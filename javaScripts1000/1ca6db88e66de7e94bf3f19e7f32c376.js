/**
 * @license
 * lodash 3.10.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 * Build: `lodash modern -o ./lodash.js`
 */
(function(){function t(t,e){if(t!==e){var i=null===t,n=t===_,r=t==t,o=null===e,a=e===_,s=e==e;if(t>e&&!o||!r||i&&!a&&s||n&&s)return 1;if(t<e&&!i||!s||o&&!n&&r||a&&r)return-1}return 0}function e(t,e,i){for(var n=t.length,r=i?n:-1;i?r--:++r<n;)if(e(t[r],r,t))return r;return-1}function i(t,e,i){if(e!=e)return p(t,i);i-=1;for(var n=t.length;++i<n;)if(t[i]===e)return i;return-1}function n(t){return"function"==typeof t||!1}function r(t){return null==t?"":t+""}function o(t,e){for(var i=-1,n=t.length;++i<n&&-1<e.indexOf(t.charAt(i)););return i}function a(t,e){for(var i=t.length;i--&&-1<e.indexOf(t.charAt(i)););return i}function s(e,i){return t(e.a,i.a)||e.b-i.b}function l(t){return Rt[t]}function h(t){return Ht[t]}function c(t,e,i){return e?t=Ft[t]:i&&(t=Xt[t]),"\\"+t}function u(t){return"\\"+Xt[t]}function p(t,e,i){var n=t.length;for(e+=i?0:-1;i?e--:++e<n;){var r=t[e];if(r!=r)return e}return-1}function d(t){return!!t&&"object"==typeof t}function f(t){return 160>=t&&9<=t&&13>=t||32==t||160==t||5760==t||6158==t||8192<=t&&(8202>=t||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function g(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;)t[i]===e&&(t[i]=F,o[++r]=i);return o}function m(t){for(var e=-1,i=t.length;++e<i&&f(t.charCodeAt(e)););return e}function y(t){for(var e=t.length;e--&&f(t.charCodeAt(e)););return e}function v(t){return Ot[t]}var _,x="3.10.1",b=1,k=2,w=4,S=8,T=16,P=32,A=64,D=128,C=256,M=30,L="...",I=150,E=16,R=200,H=1,O=2,Y="Expected a function",F="__lodash_placeholder__",X="[object Arguments]",z="[object Array]",B="[object Boolean]",N="[object Date]",W="[object Error]",U="[object Function]",G="[object Number]",V="[object Object]",j="[object RegExp]",$="[object String]",K="[object ArrayBuffer]",q="[object Float32Array]",Z="[object Float64Array]",J="[object Int8Array]",Q="[object Int16Array]",tt="[object Int32Array]",et="[object Uint8Array]",it="[object Uint8ClampedArray]",nt="[object Uint16Array]",rt="[object Uint32Array]",ot=/\b__p\+='';/g,at=/\b(__p\+=)''\+/g,st=/(__e\(.*?\)|\b__t\))\+'';/g,lt=/&(?:amp|lt|gt|quot|#39|#96);/g,ht=/[&<>"'`]/g,ct=RegExp(lt.source),ut=RegExp(ht.source),pt=/<%-([\s\S]+?)%>/g,dt=/<%([\s\S]+?)%>/g,ft=/<%=([\s\S]+?)%>/g,gt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,mt=/^\w*$/,yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,vt=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,_t=RegExp(vt.source),xt=/[\u0300-\u036f\ufe20-\ufe23]/g,bt=/\\(\\)?/g,kt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,wt=/\w*$/,St=/^0[xX]/,Tt=/^\[object .+?Constructor\]$/,Pt=/^\d+$/,At=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,Ct=/['\n\r\u2028\u2029\\]/g,Mt=RegExp("[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?=[A-Z\\xc0-\\xd6\\xd8-\\xde][a-z\\xdf-\\xf6\\xf8-\\xff]+)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+|[A-Z\\xc0-\\xd6\\xd8-\\xde]+|[0-9]+","g"),Lt="Array ArrayBuffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Math Number Object RegExp Set String _ clearTimeout isFinite parseFloat parseInt setTimeout TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap".split(" "),It={};It[q]=It[Z]=It[J]=It[Q]=It[tt]=It[et]=It[it]=It[nt]=It[rt]=!0,It[X]=It[z]=It[K]=It[B]=It[N]=It[W]=It[U]=It["[object Map]"]=It[G]=It[V]=It[j]=It["[object Set]"]=It[$]=It["[object WeakMap]"]=!1;var Et={};Et[X]=Et[z]=Et[K]=Et[B]=Et[N]=Et[q]=Et[Z]=Et[J]=Et[Q]=Et[tt]=Et[G]=Et[V]=Et[j]=Et[$]=Et[et]=Et[it]=Et[nt]=Et[rt]=!0,Et[W]=Et[U]=Et["[object Map]"]=Et["[object Set]"]=Et["[object WeakMap]"]=!1;var Rt={"Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã":"A","Ã ":"a","Ã¡":"a","Ã¢":"a","Ã£":"a","Ã¤":"a","Ã¥":"a","Ã":"C","Ã§":"c","Ã":"D","Ã°":"d","Ã":"E","Ã":"E","Ã":"E","Ã":"E","Ã¨":"e","Ã©":"e","Ãª":"e","Ã«":"e","Ã":"I","Ã":"I","Ã":"I","Ã":"I","Ã¬":"i","Ã­":"i","Ã®":"i","Ã¯":"i","Ã":"N","Ã±":"n","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã":"O","Ã²":"o","Ã³":"o","Ã´":"o","Ãµ":"o","Ã¶":"o","Ã¸":"o","Ã":"U","Ã":"U","Ã":"U","Ã":"U","Ã¹":"u","Ãº":"u","Ã»":"u","Ã¼":"u","Ã":"Y","Ã½":"y","Ã¿":"y","Ã":"Ae","Ã¦":"ae","Ã":"Th","Ã¾":"th","Ã":"ss"},Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ot={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Yt={function:!0,object:!0},Ft={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Xt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},zt=Yt[typeof exports]&&exports&&!exports.nodeType&&exports,Bt=Yt[typeof module]&&module&&!module.nodeType&&module,Nt=Yt[typeof self]&&self&&self.Object&&self,Wt=Yt[typeof window]&&window&&window.Object&&window,Ut=Bt&&Bt.exports===zt&&zt,Gt=zt&&Bt&&"object"==typeof global&&global&&global.Object&&global||Wt!==(this&&this.window)&&Wt||Nt||this,Vt=function f(Rt){function Ht(t){if(d(t)&&!(vo(t)||t instanceof Ft)){if(t instanceof Yt)return t;if(Un.call(t,"__chain__")&&Un.call(t,"__wrapped__"))return Li(t)}return new Yt(t)}function Ot(){}function Yt(t,e,i){this.__wrapped__=t,this.__actions__=i||[],this.__chain__=!!e}function Ft(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=yr,this.__views__=[]}function Xt(){this.__data__={}}function zt(t){var e=t?t.length:0;for(this.data={hash:ar(null),set:new tr};e--;)this.push(t[e])}function Bt(t,e){var i=t.data;return("string"==typeof e||an(e)?i.set.has(e):i.hash[e])?0:-1}function Nt(t,e){var i=-1,n=t.length;for(e||(e=Mn(n));++i<n;)e[i]=t[i];return e}function Wt(t,e){for(var i=-1,n=t.length;++i<n&&!1!==e(t[i],i,t););return t}function Ut(t,e){for(var i=-1,n=t.length;++i<n;)if(!e(t[i],i,t))return!1;return!0}function jt(t,e){for(var i=-1,n=t.length,r=-1,o=[];++i<n;){var a=t[i];e(a,i,t)&&(o[++r]=a)}return o}function $t(t,e){for(var i=-1,n=t.length,r=Mn(n);++i<n;)r[i]=e(t[i],i,t);return r}function Kt(t,e){for(var i=-1,n=e.length,r=t.length;++i<n;)t[r+i]=e[i];return t}function qt(t,e,i,n){var r=-1,o=t.length;for(n&&o&&(i=t[++r]);++r<o;)i=e(i,t[r],r,t);return i}function Zt(t,e){for(var i=-1,n=t.length;++i<n;)if(e(t[i],i,t))return!0;return!1}function Jt(t,e,i,n){return t!==_&&Un.call(n,i)?t:e}function Qt(t,e,i){for(var n=-1,r=Co(e),o=r.length;++n<o;){var a=r[n],s=t[a],l=i(s,e[a],a,t,e);(l==l?l===s:s!=s)&&(s!==_||a in t)||(t[a]=l)}return t}function te(t,e){return null==e?t:ie(e,Co(e),t)}function ee(t,e){for(var i=-1,n=null==t,r=!n&&_i(t),o=r?t.length:0,a=e.length,s=Mn(a);++i<a;){var l=e[i];s[i]=r?xi(l,o)?t[l]:_:n?_:t[l]}return s}function ie(t,e,i){i||(i={});for(var n=-1,r=e.length;++n<r;){var o=e[n];i[o]=t[o]}return i}function ne(t,e,i){var n=typeof t;return"function"==n?e===_?t:He(t,e,i):null==t?Tn:"object"==n?_e(t):e===_?Cn(t):xe(t,e)}function re(t,e,i,n,r,o,a){var s;if(i&&(s=r?i(t,n,r):i(t)),s!==_)return s;if(!an(t))return t;if(n=vo(t)){if(s=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Un.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!e)return Nt(t,s)}else{var l=Vn.call(t),h=l==U;if(l!=V&&l!=X&&(!h||r))return Et[l]?function(t,e,i){var n=t.constructor;switch(e){case K:return Oe(t);case B:case N:return new n(+t);case q:case Z:case J:case Q:case tt:case et:case it:case nt:case rt:return e=t.buffer,new n(i?Oe(e):e,t.byteOffset,t.length);case G:case $:return new n(t);case j:var r=new n(t.source,wt.exec(t));r.lastIndex=t.lastIndex}return r}(t,l,e):r?t:{};if(s=function(t){return"function"==typeof(t=t.constructor)&&t instanceof t||(t=On),new t}(h?{}:t),!e)return te(s,t)}for(o||(o=[]),a||(a=[]),r=o.length;r--;)if(o[r]==t)return a[r];return o.push(t),a.push(s),(n?Wt:pe)(t,(function(n,r){s[r]=re(n,e,i,r,t,o,a)})),s}function oe(t,e,i){if("function"!=typeof t)throw new Xn(Y);return er((function(){t.apply(_,i)}),e)}function ae(t,e){var n=t?t.length:0,r=[];if(!n)return r;var o=-1,a=gi(),s=a===i,l=s&&e.length>=R&&ar&&tr?new zt(e):null,h=e.length;l&&(a=Bt,s=!1,e=l);t:for(;++o<n;)if(l=t[o],s&&l==l){for(var c=h;c--;)if(e[c]===l)continue t;r.push(l)}else 0>a(e,l,0)&&r.push(l);return r}function se(t,e){var i=!0;return Sr(t,(function(t,n,r){return i=!!e(t,n,r)})),i}function le(t,e){var i=[];return Sr(t,(function(t,n,r){e(t,n,r)&&i.push(t)})),i}function he(t,e,i,n){var r;return i(t,(function(t,i,o){return e(t,i,o)?(r=n?i:t,!1):void 0})),r}function ce(t,e,i,n){n||(n=[]);for(var r=-1,o=t.length;++r<o;){var a=t[r];d(a)&&_i(a)&&(i||vo(a)||en(a))?e?ce(a,e,i,n):Kt(n,a):i||(n[n.length]=a)}return n}function ue(t,e){Pr(t,e,yn)}function pe(t,e){return Pr(t,e,Co)}function de(t,e){return Ar(t,e,Co)}function fe(t,e){for(var i=-1,n=e.length,r=-1,o=[];++i<n;){var a=e[i];on(t[a])&&(o[++r]=a)}return o}function ge(t,e,i){if(null!=t){i!==_&&i in Ci(t)&&(e=[i]),i=0;for(var n=e.length;null!=t&&i<n;)t=t[e[i++]];return i&&i==n?t:_}}function me(t,e,i,n,r,o){if(t===e)t=!0;else if(null==t||null==e||!an(t)&&!d(e))t=t!=t&&e!=e;else t:{var a=me,s=vo(t),l=vo(e),h=z,c=z;s||((h=Vn.call(t))==X?h=V:h!=V&&(s=pn(t))),l||((c=Vn.call(e))==X?c=V:c!=V&&pn(e));var u=h==V;l=c==V;if(!(c=h==c)||s||u){if(!n&&(h=u&&Un.call(t,"__wrapped__"),l=l&&Un.call(e,"__wrapped__"),h||l)){t=a(h?t.value():t,l?e.value():e,i,n,r,o);break t}if(c){for(r||(r=[]),o||(o=[]),h=r.length;h--;)if(r[h]==t){t=o[h]==e;break t}r.push(t),o.push(e),t=(s?ui:pi)(t,e,a,i,n,r,o),r.pop(),o.pop()}else t=!1}else t=function(t,e,i){switch(i){case B:case N:return+t==+e;case W:return t.name==e.name&&t.message==e.message;case G:return t!=+t?e!=+e:t==+e;case j:case $:return t==e+""}return!1}(t,e,h)}return t}function ye(t,e,i){var n=e.length,r=n,o=!i;if(null==t)return!r;for(t=Ci(t);n--;){var a=e[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<r;){var s=(a=e[n])[0],l=t[s],h=a[1];if(o&&a[2]){if(l===_&&!(s in t))return!1}else if((a=i?i(l,h,s):_)===_?!me(h,l,i,!0):!a)return!1}return!0}function ve(t,e){var i=-1,n=_i(t)?Mn(t.length):[];return Sr(t,(function(t,r,o){n[++i]=e(t,r,o)})),n}function _e(t){var e=mi(t);if(1==e.length&&e[0][2]){var i=e[0][0],n=e[0][1];return function(t){return null!=t&&(t[i]===n&&(n!==_||i in Ci(t)))}}return function(t){return ye(t,e)}}function xe(t,e){var i=vo(t),n=ki(t)&&e==e&&!an(e),r=t+"";return t=Mi(t),function(o){if(null==o)return!1;var a=r;if(o=Ci(o),!(!i&&n||a in o)){if(null==(o=1==t.length?o:ge(o,Te(t,0,-1))))return!1;a=Oi(t),o=Ci(o)}return o[a]===e?e!==_||a in o:me(e,o[a],_,!0)}}function be(t){return function(e){return null==e?_:e[t]}}function ke(t,e){for(var i=t?e.length:0;i--;){var n=e[i];if(n!=r&&xi(n)){var r=n;ir.call(t,n,1)}}}function we(t,e){return t+sr(gr()*(e-t+1))}function Se(t,e,i,n,r){return r(t,(function(t,r,o){i=n?(n=!1,t):e(i,t,r,o)})),i}function Te(t,e,i){var n=-1,r=t.length;for(0>(e=null==e?0:+e||0)&&(e=-e>r?0:r+e),0>(i=i===_||i>r?r:+i||0)&&(i+=r),r=e>i?0:i-e>>>0,e>>>=0,i=Mn(r);++n<r;)i[n]=t[n+e];return i}function Pe(t,e){var i;return Sr(t,(function(t,n,r){return!(i=e(t,n,r))})),!!i}function Ae(t,e){var i=t.length;for(t.sort(e);i--;)t[i]=t[i].c;return t}function De(e,i,n){var r=di(),o=-1;return i=$t(i,(function(t){return r(t)})),Ae(e=ve(e,(function(t){return{a:$t(i,(function(e){return e(t)})),b:++o,c:t}})),(function(e,i){var r;t:{for(var o=-1,a=e.a,s=i.a,l=a.length,h=n.length;++o<l;)if(r=t(a[o],s[o])){if(o>=h)break t;r*="asc"===(o=n[o])||!0===o?1:-1;break t}r=e.b-i.b}return r}))}function Ce(t,e){var n=-1,r=gi(),o=t.length,a=r===i,s=a&&o>=R,l=s&&ar&&tr?new zt(void 0):null,h=[];l?(r=Bt,a=!1):(s=!1,l=e?[]:h);t:for(;++n<o;){var c=t[n],u=e?e(c,n,t):c;if(a&&c==c){for(var p=l.length;p--;)if(l[p]===u)continue t;e&&l.push(u),h.push(c)}else 0>r(l,u,0)&&((e||s)&&l.push(u),h.push(c))}return h}function Me(t,e){for(var i=-1,n=e.length,r=Mn(n);++i<n;)r[i]=t[e[i]];return r}function Le(t,e,i,n){for(var r=t.length,o=n?r:-1;(n?o--:++o<r)&&e(t[o],o,t););return i?Te(t,n?0:o,n?o+1:r):Te(t,n?o+1:0,n?r:o)}function Ie(t,e){(o=t)instanceof Ft&&(o=o.value());for(var i=-1,n=e.length;++i<n;)var r=e[i],o=r.func.apply(r.thisArg,Kt([o],r.args));return o}function Ee(t,e,i){var n=0,r=t?t.length:n;if("number"==typeof e&&e==e&&r<=_r){for(;n<r;){var o=n+r>>>1,a=t[o];(i?a<=e:a<e)&&null!==a?n=o+1:r=o}return r}return Re(t,e,Tn,i)}function Re(t,e,i,n){e=i(e);for(var r=0,o=t?t.length:0,a=e!=e,s=null===e,l=e===_;r<o;){var h=sr((r+o)/2),c=i(t[h]),u=c!==_,p=c==c;(a?p||n:s?p&&u&&(n||null!=c):l?p&&(n||u):null!=c&&(n?c<=e:c<e))?r=h+1:o=h}return pr(o,vr)}function He(t,e,i){if("function"!=typeof t)return Tn;if(e===_)return t;switch(i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,r){return t.call(e,i,n,r)};case 4:return function(i,n,r,o){return t.call(e,i,n,r,o)};case 5:return function(i,n,r,o,a){return t.call(e,i,n,r,o,a)}}return function(){return t.apply(e,arguments)}}function Oe(t){var e=new Kn(t.byteLength);return new nr(e).set(new nr(t)),e}function Ye(t,e,i){for(var n=i.length,r=-1,o=ur(t.length-n,0),a=-1,s=e.length,l=Mn(s+o);++a<s;)l[a]=e[a];for(;++r<n;)l[i[r]]=t[r];for(;o--;)l[a++]=t[r++];return l}function Fe(t,e,i){for(var n=-1,r=i.length,o=-1,a=ur(t.length-r,0),s=-1,l=e.length,h=Mn(a+l);++o<a;)h[o]=t[o];for(a=o;++s<l;)h[a+s]=e[s];for(;++n<r;)h[a+i[n]]=t[o++];return h}function Xe(t,e){return function(i,n,r){var o=e?e():{};if(n=di(n,r,3),vo(i)){r=-1;for(var a=i.length;++r<a;){var s=i[r];t(o,s,n(s,r,i),i)}}else Sr(i,(function(e,i,r){t(o,e,n(e,i,r),r)}));return o}}function ze(t){return Qi((function(e,i){var n=-1,r=null==e?0:i.length,o=2<r?i[r-2]:_,a=2<r?i[2]:_,s=1<r?i[r-1]:_;for("function"==typeof o?(o=He(o,s,5),r-=2):r-=(o="function"==typeof s?s:_)?1:0,a&&bi(i[0],i[1],a)&&(o=3>r?_:o,r=1);++n<r;)(a=i[n])&&t(e,a,o);return e}))}function Be(t,e){return function(i,n){var r=i?Mr(i):0;if(!Si(r))return t(i,n);for(var o=e?r:-1,a=Ci(i);(e?o--:++o<r)&&!1!==n(a[o],o,a););return i}}function Ne(t){return function(e,i,n){for(var r=Ci(e),o=(n=n(e)).length,a=t?o:-1;t?a--:++a<o;){var s=n[a];if(!1===i(r[s],s,r))break}return e}}function We(t){return function(e){for(var i=-1,n=(e=wn(xn(e))).length,r="";++i<n;)r=t(r,e[i],i);return r}}function Ue(t){return function(){switch((e=arguments).length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var e,i=wr(t.prototype);return an(e=t.apply(i,e))?e:i}}function Ge(t){return function e(i,n,r){return r&&bi(i,n,r)&&(n=_),(i=ci(i,t,_,_,_,_,_,n)).placeholder=e.placeholder,i}}function Ve(t,e){return Qi((function(i){var n=i[0];return null==n?n:(i.push(e),t.apply(_,i))}))}function je(t,e){return function(i,n,r){if(r&&bi(i,n,r)&&(n=_),1==(n=di(n,r,3)).length){for(var o=n,a=-1,s=(r=i=vo(i)?i:Di(i)).length,l=e,h=l;++a<s;){var c=r[a],u=+o(c);t(u,l)&&(l=u,h=c)}if(r=h,!i.length||r!==e)return r}return function(t,e,i,n){var r=n,o=r;return Sr(t,(function(t,a,s){a=+e(t,a,s),(i(a,r)||a===n&&a===o)&&(r=a,o=t)})),o}(i,n,t,e)}}function $e(t,i){return function(n,r,o){return r=di(r,o,3),vo(n)?-1<(r=e(n,r,i))?n[r]:_:he(n,r,t)}}function Ke(t){return function(i,n,r){return i&&i.length?e(i,n=di(n,r,3),t):-1}}function qe(t){return function(e,i,n){return he(e,i=di(i,n,3),t,!0)}}function Ze(t){return function(){for(var e,i=arguments.length,n=t?i:-1,r=0,o=Mn(i);t?n--:++n<i;){if("function"!=typeof(a=o[r++]=arguments[n]))throw new Xn(Y);!e&&Yt.prototype.thru&&"wrapper"==fi(a)&&(e=new Yt([],!0))}for(n=e?-1:i;++n<i;){var a,s="wrapper"==(r=fi(a=o[n]))?Cr(a):_;e=s&&wi(s[0])&&s[1]==(D|S|P|C)&&!s[4].length&&1==s[9]?e[fi(s[0])].apply(e,s[3]):1==a.length&&wi(a)?e[r]():e.thru(a)}return function(){var t=(r=arguments)[0];if(e&&1==r.length&&vo(t)&&t.length>=R)return e.plant(t).value();for(var n=0,r=i?o[n].apply(this,r):t;++n<i;)r=o[n].call(this,r);return r}}}function Je(t,e){return function(i,n,r){return"function"==typeof n&&r===_&&vo(i)?t(i,n):e(i,He(n,r,3))}}function Qe(t){return function(e,i,n){return("function"!=typeof i||n!==_)&&(i=He(i,n,3)),t(e,i,yn)}}function ti(t){return function(e,i,n){return("function"!=typeof i||n!==_)&&(i=He(i,n,3)),t(e,i)}}function ei(t){return function(e,i,n){var r={};return i=di(i,n,3),pe(e,(function(e,n,o){o=i(e,n,o),e=t?e:o,r[n=t?o:n]=e})),r}}function ii(t){return function(e,i,n){return e=r(e),(t?e:"")+ai(e,i,n)+(t?"":e)}}function ni(t){var e=Qi((function(i,n){var r=g(n,e.placeholder);return ci(i,t,_,n,r)}));return e}function ri(t,e){return function(i,n,r,o){var a=3>arguments.length;return"function"==typeof n&&o===_&&vo(i)?t(i,n,r,a):Se(i,di(n,o,4),r,a,e)}}function oi(t,e,i,n,r,o,a,s,l,h){var c=e&D,u=e&b,p=e&k,d=e&S,f=e&w,m=e&T,y=p?_:Ue(t);return function v(){for(var x=D=arguments.length,w=Mn(D);x--;)w[x]=arguments[x];if(n&&(w=Ye(w,n,r)),o&&(w=Fe(w,o,a)),(d||m)&&(D=D-(S=g(w,x=v.placeholder)).length)<h){var S,T=s?Nt(s):_,D=ur(h-D,0),C=d?S:_,M=d?w:_;return e|=d?P:A,e&=~(d?A:P),f||(e&=~(b|k)),w=[t,e,i,M,C,w=d?_:w,S=d?_:S,T,l,D],T=oi.apply(_,w),wi(t)&&Lr(T,w),T.placeholder=x,T}if(x=u?i:this,T=p?x[t]:t,s)for(D=w.length,C=pr(s.length,D),S=Nt(w);C--;)M=s[C],w[C]=xi(M,D)?S[M]:_;return c&&l<w.length&&(w.length=l),this&&this!==Gt&&this instanceof v&&(T=y||Ue(t)),T.apply(x,w)}}function ai(t,e,i){return(t=t.length)<(e=+e)&&hr(e)?bn(i=null==i?" ":i+"",or((e-=t)/i.length)).slice(0,e):""}function si(t,e,i,n){var r=e&b,o=Ue(t);return function e(){for(var a=-1,s=arguments.length,l=-1,h=n.length,c=Mn(h+s);++l<h;)c[l]=n[l];for(;s--;)c[l++]=arguments[++a];return(this&&this!==Gt&&this instanceof e?o:t).apply(r?i:this,c)}}function li(t){var e=Rn[t];return function(t,i){return(i=i===_?0:+i||0)?(i=Jn(10,i),e(t*i)/i):e(t)}}function hi(t){return function(e,i,n,r){var o=di(n);return null==n&&o===ne?Ee(e,i,t):Re(e,i,o(n,r,1),t)}}function ci(t,e,i,n,r,o,a,s){var l=e&k;if(!l&&"function"!=typeof t)throw new Xn(Y);var h=n?n.length:0;if(h||(e&=~(P|A),n=r=_),h-=r?r.length:0,e&A){var c=n,u=r;n=r=_}var p=l?_:Cr(t);return i=[t,e,i,n,r,c,u,o,a,s],p&&(s=(n=i[1])|(e=p[1]),r=e==D&&n==S||e==D&&n==C&&i[7].length<=p[8]||e==(D|C)&&n==S,(s<D||r)&&(e&b&&(i[2]=p[2],s|=n&b?0:w),(n=p[3])&&(r=i[3],i[3]=r?Ye(r,n,p[4]):Nt(n),i[4]=r?g(i[3],F):Nt(p[4])),(n=p[5])&&(r=i[5],i[5]=r?Fe(r,n,p[6]):Nt(n),i[6]=r?g(i[5],F):Nt(p[6])),(n=p[7])&&(i[7]=Nt(n)),e&D&&(i[8]=null==i[8]?p[8]:pr(i[8],p[8])),null==i[9]&&(i[9]=p[9]),i[0]=p[0],i[1]=s),e=i[1],s=i[9]),i[9]=null==s?l?0:t.length:ur(s-h,0)||0,(p?Dr:Lr)(e==b?function(t,e){var i=Ue(t);return function n(){return(this&&this!==Gt&&this instanceof n?i:t).apply(e,arguments)}}(i[0],i[2]):e!=P&&e!=(b|P)||i[4].length?oi.apply(_,i):si.apply(_,i),i)}function ui(t,e,i,n,r,o,a){var s=-1,l=t.length;if(l!=(c=e.length)&&(!r||c<=l))return!1;for(;++s<l;){var h=t[s],c=e[s],u=n?n(r?c:h,r?h:c,s):_;if(u!==_){if(u)continue;return!1}if(r){if(!Zt(e,(function(t){return h===t||i(h,t,n,r,o,a)})))return!1}else if(h!==c&&!i(h,c,n,r,o,a))return!1}return!0}function pi(t,e,i,n,r,o,a){var s=Co(t),l=s.length,h=Co(e).length;if(l!=h&&!r)return!1;for(h=l;h--;){var c=s[h];if(!(r?c in e:Un.call(e,c)))return!1}for(var u=r;++h<l;){var p=t[c=s[h]],d=e[c],f=n?n(r?d:p,r?p:d,c):_;if(f===_?!i(p,d,n,r,o,a):!f)return!1;u||(u="constructor"==c)}return!(!u&&(i=t.constructor,n=e.constructor,i!=n&&"constructor"in t&&"constructor"in e&&!("function"==typeof i&&i instanceof i&&"function"==typeof n&&n instanceof n)))}function di(t,e,i){var n=(n=Ht.callback||Sn)===Sn?ne:n;return i?n(t,e,i):n}function fi(t){for(var e=t.name+"",i=kr[e],n=i?i.length:0;n--;){var r=i[n],o=r.func;if(null==o||o==t)return r.name}return e}function gi(t,e,n){var r=(r=Ht.indexOf||Hi)===Hi?i:r;return t?r(t,e,n):r}function mi(t){for(var e=(t=vn(t)).length;e--;){var i=t[e][1];t[e][2]=i==i&&!an(i)}return t}function yi(t,e){var i=null==t?_:t[e];return sn(i)?i:_}function vi(t,e,i){return null==t||ki(e,t)||(t=1==(e=Mi(e)).length?t:ge(t,Te(e,0,-1)),e=Oi(e)),null==(e=null==t?t:t[e])?_:e.apply(t,i)}function _i(t){return null!=t&&Si(Mr(t))}function xi(t,e){return t="number"==typeof t||Pt.test(t)?+t:-1,e=null==e?xr:e,-1<t&&0==t%1&&t<e}function bi(t,e,i){if(!an(i))return!1;var n=typeof e;return!!("number"==n?_i(i)&&xi(e,i.length):"string"==n&&e in i)&&(e=i[e],t==t?t===e:e!=e)}function ki(t,e){var i=typeof t;return!!("string"==i&&mt.test(t)||"number"==i)||!vo(t)&&(!gt.test(t)||null!=e&&t in Ci(e))}function wi(t){var e=fi(t),i=Ht[e];return"function"==typeof i&&e in Ft.prototype&&(t===i||!!(e=Cr(i))&&t===e[0])}function Si(t){return"number"==typeof t&&-1<t&&0==t%1&&t<=xr}function Ti(t,e){t=Ci(t);for(var i=-1,n=e.length,r={};++i<n;){var o=e[i];o in t&&(r[o]=t[o])}return r}function Pi(t,e){var i={};return ue(t,(function(t,n,r){e(t,n,r)&&(i[n]=t)})),i}function Ai(t){for(var e=yn(t),i=e.length,n=i&&t.length,r=!!n&&Si(n)&&(vo(t)||en(t)),o=-1,a=[];++o<i;){var s=e[o];(r&&xi(s,n)||Un.call(t,s))&&a.push(s)}return a}function Di(t){return null==t?[]:_i(t)?an(t)?t:On(t):_n(t)}function Ci(t){return an(t)?t:On(t)}function Mi(t){if(vo(t))return t;var e=[];return r(t).replace(yt,(function(t,i,n,r){e.push(n?r.replace(bt,"$1"):i||t)})),e}function Li(t){return t instanceof Ft?t.clone():new Yt(t.__wrapped__,t.__chain__,Nt(t.__actions__))}function Ii(t,e,i){return t&&t.length?((i?bi(t,e,i):null==e)&&(e=1),Te(t,0>e?0:e)):[]}function Ei(t,e,i){var n=t?t.length:0;return n?((i?bi(t,e,i):null==e)&&(e=1),Te(t,0,0>(e=n-(+e||0))?0:e)):[]}function Ri(t){return t?t[0]:_}function Hi(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=0>n?ur(r+n,0):n;else if(n)return(n=Ee(t,e))<r&&(e==e?e===t[n]:t[n]!=t[n])?n:-1;return i(t,e,n||0)}function Oi(t){var e=t?t.length:0;return e?t[e-1]:_}function Yi(t){return Ii(t,1)}function Fi(t,e,n,r){if(!t||!t.length)return[];null!=e&&"boolean"!=typeof e&&(n=bi(t,e,r=n)?_:e,e=!1);var o=di();if((null!=n||o!==ne)&&(n=o(n,r,3)),e&&gi()===i){var a;e=n,n=-1,r=t.length;o=-1;for(var s=[];++n<r;){var l=t[n],h=e?e(l,n,t):l;n&&a===h||(a=h,s[++o]=l)}t=s}else t=Ce(t,n);return t}function Xi(t){if(!t||!t.length)return[];var e=-1,i=0;t=jt(t,(function(t){return _i(t)?(i=ur(t.length,i),!0):void 0}));for(var n=Mn(i);++e<i;)n[e]=$t(t,be(e));return n}function zi(t,e,i){return t&&t.length?(t=Xi(t),null==e?t:(e=He(e,i,4),$t(t,(function(t){return qt(t,e,_,!0)})))):[]}function Bi(t,e){var i=-1,n=t?t.length:0,r={};for(!n||e||vo(t[0])||(e=[]);++i<n;){var o=t[i];e?r[o]=e[i]:o&&(r[o[0]]=o[1])}return r}function Ni(t){return(t=Ht(t)).__chain__=!0,t}function Wi(t,e,i){return e.call(i,t)}function Ui(t,e,i){var n=vo(t)?Ut:se;return i&&bi(t,e,i)&&(e=_),("function"!=typeof e||i!==_)&&(e=di(e,i,3)),n(t,e)}function Gi(t,e,i){return(vo(t)?jt:le)(t,e=di(e,i,3))}function Vi(t,e,i,n){var r=t?Mr(t):0;return Si(r)||(r=(t=_n(t)).length),i="number"!=typeof i||n&&bi(e,i,n)?0:0>i?ur(r+i,0):i||0,"string"==typeof t||!vo(t)&&un(t)?i<=r&&-1<t.indexOf(e,i):!!r&&-1<gi(t,e,i)}function ji(t,e,i){return(vo(t)?$t:ve)(t,e=di(e,i,3))}function $i(t,e,i){if(i?bi(t,e,i):null==e)return 0<(r=(t=Di(t)).length)?t[we(0,r-1)]:_;i=-1;var n=(r=(t=fn(t)).length)-1;for(e=pr(0>e?0:+e||0,r);++i<e;){var r,o=t[r=we(i,n)];t[r]=t[i],t[i]=o}return t.length=e,t}function Ki(t,e,i){var n=vo(t)?Zt:Pe;return i&&bi(t,e,i)&&(e=_),("function"!=typeof e||i!==_)&&(e=di(e,i,3)),n(t,e)}function qi(t,e){var i;if("function"!=typeof e){if("function"!=typeof t)throw new Xn(Y);var n=t;t=e,e=n}return function(){return 0<--t&&(i=e.apply(this,arguments)),1>=t&&(e=_),i}}function Zi(t,e,i){function n(e,i){i&&qn(i),l=p=d=_,e&&(f=no(),h=t.apply(u,s),p||l||(s=u=_))}function r(){var t=e-(no()-c);0>=t||t>e?n(d,l):p=er(r,t)}function o(){n(m,p)}function a(){if(s=arguments,c=no(),u=this,d=m&&(p||!y),!1===g)var i=y&&!p;else{l||y||(f=c);var n=g-(c-f),a=0>=n||n>g;a?(l&&(l=qn(l)),f=c,h=t.apply(u,s)):l||(l=er(o,n))}return a&&p?p=qn(p):p||e===g||(p=er(r,e)),i&&(a=!0,h=t.apply(u,s)),!a||p||l||(s=u=_),h}var s,l,h,c,u,p,d,f=0,g=!1,m=!0;if("function"!=typeof t)throw new Xn(Y);if(e=0>e?0:+e||0,!0===i){var y=!0;m=!1}else an(i)&&(y=!!i.leading,g="maxWait"in i&&ur(+i.maxWait||0,e),m="trailing"in i?!!i.trailing:m);return a.cancel=function(){p&&qn(p),l&&qn(l),f=0,l=p=d=_},a}function Ji(t,e){function i(){var n=arguments,r=e?e.apply(this,n):n[0],o=i.cache;return o.has(r)?o.get(r):(n=t.apply(this,n),i.cache=o.set(r,n),n)}if("function"!=typeof t||e&&"function"!=typeof e)throw new Xn(Y);return i.cache=new Ji.Cache,i}function Qi(t,e){if("function"!=typeof t)throw new Xn(Y);return e=ur(e===_?t.length-1:+e||0,0),function(){for(var i=arguments,n=-1,r=ur(i.length-e,0),o=Mn(r);++n<r;)o[n]=i[e+n];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,i[0],o);case 2:return t.call(this,i[0],i[1],o)}for(r=Mn(e+1),n=-1;++n<e;)r[n]=i[n];return r[e]=o,t.apply(this,r)}}function tn(t,e){return t>e}function en(t){return d(t)&&_i(t)&&Un.call(t,"callee")&&!Qn.call(t,"callee")}function nn(t,e,i,n){return(n=(i="function"==typeof i?He(i,n,3):_)?i(t,e):_)===_?me(t,e,i):!!n}function rn(t){return d(t)&&"string"==typeof t.message&&Vn.call(t)==W}function on(t){return an(t)&&Vn.call(t)==U}function an(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function sn(t){return null!=t&&(on(t)?$n.test(Wn.call(t)):d(t)&&Tt.test(t))}function ln(t){return"number"==typeof t||d(t)&&Vn.call(t)==G}function hn(t){var e,i;return!(!d(t)||Vn.call(t)!=V||en(t)||!(Un.call(t,"constructor")||(e=t.constructor,"function"!=typeof e||e instanceof e)))&&(ue(t,(function(t,e){i=e})),i===_||Un.call(t,i))}function cn(t){return an(t)&&Vn.call(t)==j}function un(t){return"string"==typeof t||d(t)&&Vn.call(t)==$}function pn(t){return d(t)&&Si(t.length)&&!!It[Vn.call(t)]}function dn(t,e){return t<e}function fn(t){var e=t?Mr(t):0;return Si(e)?e?Nt(t):[]:_n(t)}function gn(t){return ie(t,yn(t))}function mn(t){return fe(t,yn(t))}function yn(t){if(null==t)return[];an(t)||(t=On(t));for(var e=(e=t.length)&&Si(e)&&(vo(t)||en(t))&&e||0,i=-1,n="function"==typeof(n=t.constructor)&&n.prototype===t,r=Mn(e),o=0<e;++i<e;)r[i]=i+"";for(var a in t)o&&xi(a,e)||"constructor"==a&&(n||!Un.call(t,a))||r.push(a);return r}function vn(t){t=Ci(t);for(var e=-1,i=Co(t),n=i.length,r=Mn(n);++e<n;){var o=i[e];r[e]=[o,t[o]]}return r}function _n(t){return Me(t,Co(t))}function xn(t){return(t=r(t))&&t.replace(At,l).replace(xt,"")}function bn(t,e){var i="";if(t=r(t),1>(e=+e)||!t||!hr(e))return i;do{e%2&&(i+=t),e=sr(e/2),t+=t}while(e);return i}function kn(t,e,i){var n=t;return(t=r(t))?(i?bi(n,e,i):null==e)?t.slice(m(t),y(t)+1):(e+="",t.slice(o(t,e),a(t,e)+1)):t}function wn(t,e,i){return i&&bi(t,e,i)&&(e=_),(t=r(t)).match(e||Mt)||[]}function Sn(t,e,i){return i&&bi(t,e,i)&&(e=_),d(t)?Pn(t):ne(t,e)}function Tn(t){return t}function Pn(t){return _e(re(t,!0))}function An(t,e,i){if(null==i){var n=(o=an(e))?Co(e):_;((n=n&&n.length?fe(e,n):_)?n.length:o)||(n=!1,i=e,e=t,t=this)}n||(n=fe(e,Co(e)));var r=!0,o=-1,a=on(t),s=n.length;!1===i?r=!1:an(i)&&"chain"in i&&(r=i.chain);for(;++o<s;){var l=e[i=n[o]];t[i]=l,a&&(t.prototype[i]=function(e){return function(){var i=this.__chain__;if(r||i){var n=t(this.__wrapped__);return(n.__actions__=Nt(this.__actions__)).push({func:e,args:arguments,thisArg:t}),n.__chain__=i,n}return e.apply(t,Kt([this.value()],arguments))}}(l))}return t}function Dn(){}function Cn(t){return ki(t)?be(t):function(t){var e=t+"";return t=Mi(t),function(i){return ge(i,t,e)}}(t)}var Mn=(Rt=Rt?Vt.defaults(Gt.Object(),Rt,Vt.pick(Gt,Lt)):Gt).Array,Ln=Rt.Date,In=Rt.Error,En=Rt.Function,Rn=Rt.Math,Hn=Rt.Number,On=Rt.Object,Yn=Rt.RegExp,Fn=Rt.String,Xn=Rt.TypeError,zn=Mn.prototype,Bn=On.prototype,Nn=Fn.prototype,Wn=En.prototype.toString,Un=Bn.hasOwnProperty,Gn=0,Vn=Bn.toString,jn=Gt._,$n=Yn("^"+Wn.call(Un).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kn=Rt.ArrayBuffer,qn=Rt.clearTimeout,Zn=Rt.parseFloat,Jn=Rn.pow,Qn=Bn.propertyIsEnumerable,tr=yi(Rt,"Set"),er=Rt.setTimeout,ir=zn.splice,nr=Rt.Uint8Array,rr=yi(Rt,"WeakMap"),or=Rn.ceil,ar=yi(On,"create"),sr=Rn.floor,lr=yi(Mn,"isArray"),hr=Rt.isFinite,cr=yi(On,"keys"),ur=Rn.max,pr=Rn.min,dr=yi(Ln,"now"),fr=Rt.parseInt,gr=Rn.random,mr=Hn.NEGATIVE_INFINITY,yr=Hn.POSITIVE_INFINITY,vr=4294967294,_r=2147483647,xr=9007199254740991,br=rr&&new rr,kr={};Ht.support={},Ht.templateSettings={escape:pt,evaluate:dt,interpolate:ft,variable:"",imports:{_:Ht}};var wr=function(){function t(){}return function(e){if(an(e)){t.prototype=e;var i=new t;t.prototype=_}return i||{}}}(),Sr=Be(pe),Tr=Be(de,!0),Pr=Ne(),Ar=Ne(!0),Dr=br?function(t,e){return br.set(t,e),t}:Tn,Cr=br?function(t){return br.get(t)}:Dn,Mr=be("length"),Lr=function(){var t=0,e=0;return function(i,n){var r=no(),o=E-(r-e);if(e=r,0<o){if(++t>=I)return i}else t=0;return Dr(i,n)}}(),Ir=Qi((function(t,e){return d(t)&&_i(t)?ae(t,ce(e,!1,!0)):[]})),Er=Ke(),Rr=Ke(!0),Hr=Qi((function(t){for(var e=t.length,n=e,r=Mn(c),o=gi(),a=o===i,s=[];n--;){var l=t[n]=_i(l=t[n])?l:[];r[n]=a&&120<=l.length&&ar&&tr?new zt(n&&l):null}var h=-1,c=(a=t[0])?a.length:0,u=r[0];t:for(;++h<c;)if(l=a[h],0>(u?Bt(u,l):o(s,l,0))){for(n=e;--n;){var p=r[n];if(0>(p?Bt(p,l):o(t[n],l,0)))continue t}u&&u.push(l),s.push(l)}return s})),Or=Qi((function(e,i){var n=ee(e,i=ce(i));return ke(e,i.sort(t)),n})),Yr=hi(),Fr=hi(!0),Xr=Qi((function(t){return Ce(ce(t,!1,!0))})),zr=Qi((function(t,e){return _i(t)?ae(t,e):[]})),Br=Qi(Xi),Nr=Qi((function(t){var e=t.length,i=2<e?t[e-2]:_,n=1<e?t[e-1]:_;return 2<e&&"function"==typeof i?e-=2:(i=1<e&&"function"==typeof n?(--e,n):_,n=_),t.length=e,zi(t,i,n)})),Wr=Qi((function(t){return t=ce(t),this.thru((function(e){e=vo(e)?e:[Ci(e)];for(var i=t,n=-1,r=e.length,o=-1,a=i.length,s=Mn(r+a);++n<r;)s[n]=e[n];for(;++o<a;)s[n++]=i[o];return s}))})),Ur=Qi((function(t,e){return ee(t,ce(e))})),Gr=Xe((function(t,e,i){Un.call(t,i)?++t[i]:t[i]=1})),Vr=$e(Sr),jr=$e(Tr,!0),$r=Je(Wt,Sr),Kr=Je((function(t,e){for(var i=t.length;i--&&!1!==e(t[i],i,t););return t}),Tr),qr=Xe((function(t,e,i){Un.call(t,i)?t[i].push(e):t[i]=[e]})),Zr=Xe((function(t,e,i){t[i]=e})),Jr=Qi((function(t,e,i){var n=-1,r="function"==typeof e,o=ki(e),a=_i(t)?Mn(t.length):[];return Sr(t,(function(t){var s=r?e:o&&null!=t?t[e]:_;a[++n]=s?s.apply(t,i):vi(t,e,i)})),a})),Qr=Xe((function(t,e,i){t[i?0:1].push(e)}),(function(){return[[],[]]})),to=ri(qt,Sr),eo=ri((function(t,e,i,n){var r=t.length;for(n&&r&&(i=t[--r]);r--;)i=e(i,t[r],r,t);return i}),Tr),io=Qi((function(t,e){if(null==t)return[];var i=e[2];return i&&bi(e[0],e[1],i)&&(e.length=1),De(t,ce(e),[])})),no=dr||function(){return(new Ln).getTime()},ro=Qi((function(t,e,i){var n=b;if(i.length){var r=g(i,ro.placeholder);n=n|P}return ci(t,n,e,i,r)})),oo=Qi((function(t,e){for(var i=-1,n=(e=e.length?ce(e):mn(t)).length;++i<n;){var r=e[i];t[r]=ci(t[r],b,t)}return t})),ao=Qi((function(t,e,i){var n=b|k;if(i.length){var r=g(i,ao.placeholder);n=n|P}return ci(e,n,t,i,r)})),so=Ge(S),lo=Ge(T),ho=Qi((function(t,e){return oe(t,1,e)})),co=Qi((function(t,e,i){return oe(t,e,i)})),uo=Ze(),po=Ze(!0),fo=Qi((function(t,e){if(e=ce(e),"function"!=typeof t||!Ut(e,n))throw new Xn(Y);var i=e.length;return Qi((function(n){for(var r=pr(n.length,i);r--;)n[r]=e[r](n[r]);return t.apply(this,n)}))})),go=ni(P),mo=ni(A),yo=Qi((function(t,e){return ci(t,C,_,_,_,ce(e))})),vo=lr||function(t){return d(t)&&Si(t.length)&&Vn.call(t)==z},_o=ze((function t(e,i,n,r,o){if(!an(e))return e;var a=_i(i)&&(vo(i)||pn(i)),s=a?_:Co(i);return Wt(s||i,(function(l,h){if(s&&(l=i[h=l]),d(l)){r||(r=[]),o||(o=[]);t:{for(var c=h,u=r,p=o,f=u.length,g=i[c];f--;)if(u[f]==g){e[c]=p[f];break t}f=e[c];var m=n?n(f,g,c,e,i):_,y=m===_;y&&(m=g,_i(g)&&(vo(g)||pn(g))?m=vo(f)?f:_i(f)?Nt(f):[]:hn(g)||en(g)?m=en(f)?gn(f):hn(f)?f:{}:y=!1),u.push(g),p.push(m),y?e[c]=t(m,g,n,u,p):(m==m?m!==f:f==f)&&(e[c]=m)}}else c=e[h],(p=(u=n?n(c,l,h,e,i):_)===_)&&(u=l),u===_&&(!a||h in e)||!p&&(u==u?u===c:c!=c)||(e[h]=u)})),e})),xo=ze((function(t,e,i){return i?Qt(t,e,i):te(t,e)})),bo=Ve(xo,(function(t,e){return t===_?e:t})),ko=Ve(_o,(function t(e,i){return e===_?i:_o(e,i,t)})),wo=qe(pe),So=qe(de),To=Qe(Pr),Po=Qe(Ar),Ao=ti(pe),Do=ti(de),Co=cr?function(t){var e=null==t?_:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&_i(t)?Ai(t):an(t)?cr(t):[]}:Ai,Mo=ei(!0),Lo=ei(),Io=Qi((function(t,e){if(null==t)return{};if("function"!=typeof e[0])return e=$t(ce(e),Fn),Ti(t,ae(yn(t),e));var i=He(e[0],e[1],3);return Pi(t,(function(t,e,n){return!i(t,e,n)}))})),Eo=Qi((function(t,e){return null==t?{}:"function"==typeof e[0]?Pi(t,He(e[0],e[1],3)):Ti(t,ce(e))})),Ro=We((function(t,e,i){return e=e.toLowerCase(),t+(i?e.charAt(0).toUpperCase()+e.slice(1):e)})),Ho=We((function(t,e,i){return t+(i?"-":"")+e.toLowerCase()})),Oo=ii(),Yo=ii(!0),Fo=We((function(t,e,i){return t+(i?"_":"")+e.toLowerCase()})),Xo=We((function(t,e,i){return t+(i?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))})),zo=Qi((function(t,e){try{return t.apply(_,e)}catch(t){return rn(t)?t:new In(t)}})),Bo=Qi((function(t,e){return function(i){return vi(i,t,e)}})),No=Qi((function(t,e){return function(i){return vi(t,i,e)}})),Wo=li("ceil"),Uo=li("floor"),Go=je(tn,mr),Vo=je(dn,yr),jo=li("round");return Ht.prototype=Ot.prototype,Yt.prototype=wr(Ot.prototype),Yt.prototype.constructor=Yt,Ft.prototype=wr(Ot.prototype),Ft.prototype.constructor=Ft,Xt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Xt.prototype.get=function(t){return"__proto__"==t?_:this.__data__[t]},Xt.prototype.has=function(t){return"__proto__"!=t&&Un.call(this.__data__,t)},Xt.prototype.set=function(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this},zt.prototype.push=function(t){var e=this.data;"string"==typeof t||an(t)?e.set.add(t):e.hash[t]=!0},Ji.Cache=Xt,Ht.after=function(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Xn(Y);var i=t;t=e,e=i}return t=hr(t=+t)?t:0,function(){return 1>--t?e.apply(this,arguments):void 0}},Ht.ary=function(t,e,i){return i&&bi(t,e,i)&&(e=_),e=t&&null==e?t.length:ur(+e||0,0),ci(t,D,_,_,_,_,e)},Ht.assign=xo,Ht.at=Ur,Ht.before=qi,Ht.bind=ro,Ht.bindAll=oo,Ht.bindKey=ao,Ht.callback=Sn,Ht.chain=Ni,Ht.chunk=function(t,e,i){e=(i?bi(t,e,i):null==e)?1:ur(sr(e)||1,1),i=0;for(var n=t?t.length:0,r=-1,o=Mn(or(n/e));i<n;)o[++r]=Te(t,i,i+=e);return o},Ht.compact=function(t){for(var e=-1,i=t?t.length:0,n=-1,r=[];++e<i;){var o=t[e];o&&(r[++n]=o)}return r},Ht.constant=function(t){return function(){return t}},Ht.countBy=Gr,Ht.create=function(t,e,i){var n=wr(t);return i&&bi(t,e,i)&&(e=_),e?te(n,e):n},Ht.curry=so,Ht.curryRight=lo,Ht.debounce=Zi,Ht.defaults=bo,Ht.defaultsDeep=ko,Ht.defer=ho,Ht.delay=co,Ht.difference=Ir,Ht.drop=Ii,Ht.dropRight=Ei,Ht.dropRightWhile=function(t,e,i){return t&&t.length?Le(t,di(e,i,3),!0,!0):[]},Ht.dropWhile=function(t,e,i){return t&&t.length?Le(t,di(e,i,3),!0):[]},Ht.fill=function(t,e,i,n){var r=t?t.length:0;if(!r)return[];for(i&&"number"!=typeof i&&bi(t,e,i)&&(i=0,n=r),r=t.length,0>(i=null==i?0:+i||0)&&(i=-i>r?0:r+i),0>(n=n===_||n>r?r:+n||0)&&(n+=r),r=i>n?0:n>>>0,i>>>=0;i<r;)t[i++]=e;return t},Ht.filter=Gi,Ht.flatten=function(t,e,i){var n=t?t.length:0;return i&&bi(t,e,i)&&(e=!1),n?ce(t,e):[]},Ht.flattenDeep=function(t){return t&&t.length?ce(t,!0):[]},Ht.flow=uo,Ht.flowRight=po,Ht.forEach=$r,Ht.forEachRight=Kr,Ht.forIn=To,Ht.forInRight=Po,Ht.forOwn=Ao,Ht.forOwnRight=Do,Ht.functions=mn,Ht.groupBy=qr,Ht.indexBy=Zr,Ht.initial=function(t){return Ei(t,1)},Ht.intersection=Hr,Ht.invert=function(t,e,i){i&&bi(t,e,i)&&(e=_),i=-1;for(var n=Co(t),r=n.length,o={};++i<r;){var a=n[i],s=t[a];e?Un.call(o,s)?o[s].push(a):o[s]=[a]:o[s]=a}return o},Ht.invoke=Jr,Ht.keys=Co,Ht.keysIn=yn,Ht.map=ji,Ht.mapKeys=Mo,Ht.mapValues=Lo,Ht.matches=Pn,Ht.matchesProperty=function(t,e){return xe(t,re(e,!0))},Ht.memoize=Ji,Ht.merge=_o,Ht.method=Bo,Ht.methodOf=No,Ht.mixin=An,Ht.modArgs=fo,Ht.negate=function(t){if("function"!=typeof t)throw new Xn(Y);return function(){return!t.apply(this,arguments)}},Ht.omit=Io,Ht.once=function(t){return qi(2,t)},Ht.pairs=vn,Ht.partial=go,Ht.partialRight=mo,Ht.partition=Qr,Ht.pick=Eo,Ht.pluck=function(t,e){return ji(t,Cn(e))},Ht.property=Cn,Ht.propertyOf=function(t){return function(e){return ge(t,Mi(e),e+"")}},Ht.pull=function(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var i=0,n=gi(),r=t.length;++i<r;)for(var o=0,a=t[i];-1<(o=n(e,a,o));)ir.call(e,o,1);return e},Ht.pullAt=Or,Ht.range=function(t,e,i){i&&bi(t,e,i)&&(e=i=_),t=+t||0,null==e?(e=t,t=0):e=+e||0;var n=-1;e=ur(or((e-t)/((i=null==i?1:+i||0)||1)),0);for(var r=Mn(e);++n<e;)r[n]=t,t+=i;return r},Ht.rearg=yo,Ht.reject=function(t,e,i){var n=vo(t)?jt:le;return e=di(e,i,3),n(t,(function(t,i,n){return!e(t,i,n)}))},Ht.remove=function(t,e,i){var n=[];if(!t||!t.length)return n;var r=-1,o=[],a=t.length;for(e=di(e,i,3);++r<a;)e(i=t[r],r,t)&&(n.push(i),o.push(r));return ke(t,o),n},Ht.rest=Yi,Ht.restParam=Qi,Ht.set=function(t,e,i){if(null==t)return t;e=null!=t[n=e+""]||ki(e,t)?[n]:Mi(e);for(var n=-1,r=e.length,o=r-1,a=t;null!=a&&++n<r;){var s=e[n];an(a)&&(n==o?a[s]=i:null==a[s]&&(a[s]=xi(e[n+1])?[]:{})),a=a[s]}return t},Ht.shuffle=function(t){return $i(t,yr)},Ht.slice=function(t,e,i){var n=t?t.length:0;return n?(i&&"number"!=typeof i&&bi(t,e,i)&&(e=0,i=n),Te(t,e,i)):[]},Ht.sortBy=function(t,e,i){if(null==t)return[];i&&bi(t,e,i)&&(e=_);var n=-1;return e=di(e,i,3),Ae(t=ve(t,(function(t,i,r){return{a:e(t,i,r),b:++n,c:t}})),s)},Ht.sortByAll=io,Ht.sortByOrder=function(t,e,i,n){return null==t?[]:(n&&bi(e,i,n)&&(i=_),vo(e)||(e=null==e?[]:[e]),vo(i)||(i=null==i?[]:[i]),De(t,e,i))},Ht.spread=function(t){if("function"!=typeof t)throw new Xn(Y);return function(e){return t.apply(this,e)}},Ht.take=function(t,e,i){return t&&t.length?((i?bi(t,e,i):null==e)&&(e=1),Te(t,0,0>e?0:e)):[]},Ht.takeRight=function(t,e,i){var n=t?t.length:0;return n?((i?bi(t,e,i):null==e)&&(e=1),Te(t,0>(e=n-(+e||0))?0:e)):[]},Ht.takeRightWhile=function(t,e,i){return t&&t.length?Le(t,di(e,i,3),!1,!0):[]},Ht.takeWhile=function(t,e,i){return t&&t.length?Le(t,di(e,i,3)):[]},Ht.tap=function(t,e,i){return e.call(i,t),t},Ht.throttle=function(t,e,i){var n=!0,r=!0;if("function"!=typeof t)throw new Xn(Y);return!1===i?n=!1:an(i)&&(n="leading"in i?!!i.leading:n,r="trailing"in i?!!i.trailing:r),Zi(t,e,{leading:n,maxWait:+e,trailing:r})},Ht.thru=Wi,Ht.times=function(t,e,i){if(1>(t=sr(t))||!hr(t))return[];var n=-1,r=Mn(pr(t,4294967295));for(e=He(e,i,1);++n<t;)4294967295>n?r[n]=e(n):e(n);return r},Ht.toArray=fn,Ht.toPlainObject=gn,Ht.transform=function(t,e,i,n){var r=vo(t)||pn(t);return e=di(e,n,4),null==i&&(r||an(t)?(n=t.constructor,i=r?vo(t)?new n:[]:wr(on(n)?n.prototype:_)):i={}),(r?Wt:pe)(t,(function(t,n,r){return e(i,t,n,r)})),i},Ht.union=Xr,Ht.uniq=Fi,Ht.unzip=Xi,Ht.unzipWith=zi,Ht.values=_n,Ht.valuesIn=function(t){return Me(t,yn(t))},Ht.where=function(t,e){return Gi(t,_e(e))},Ht.without=zr,Ht.wrap=function(t,e){return ci(e=null==e?Tn:e,P,_,[t],[])},Ht.xor=function(){for(var t=-1,e=arguments.length;++t<e;){var i=arguments[t];if(_i(i))var n=n?Kt(ae(n,i),ae(i,n)):i}return n?Ce(n):[]},Ht.zip=Br,Ht.zipObject=Bi,Ht.zipWith=Nr,Ht.backflow=po,Ht.collect=ji,Ht.compose=po,Ht.each=$r,Ht.eachRight=Kr,Ht.extend=xo,Ht.iteratee=Sn,Ht.methods=mn,Ht.object=Bi,Ht.select=Gi,Ht.tail=Yi,Ht.unique=Fi,An(Ht,Ht),Ht.add=function(t,e){return(+t||0)+(+e||0)},Ht.attempt=zo,Ht.camelCase=Ro,Ht.capitalize=function(t){return(t=r(t))&&t.charAt(0).toUpperCase()+t.slice(1)},Ht.ceil=Wo,Ht.clone=function(t,e,i,n){return e&&"boolean"!=typeof e&&bi(t,e,i)?e=!1:"function"==typeof e&&(n=i,i=e,e=!1),"function"==typeof i?re(t,e,He(i,n,3)):re(t,e)},Ht.cloneDeep=function(t,e,i){return"function"==typeof e?re(t,!0,He(e,i,3)):re(t,!0)},Ht.deburr=xn,Ht.endsWith=function(t,e,i){e+="";var n=(t=r(t)).length;return i=i===_?n:pr(0>i?0:+i||0,n),0<=(i-=e.length)&&t.indexOf(e,i)==i},Ht.escape=function(t){return(t=r(t))&&ut.test(t)?t.replace(ht,h):t},Ht.escapeRegExp=function(t){return(t=r(t))&&_t.test(t)?t.replace(vt,c):t||"(?:)"},Ht.every=Ui,Ht.find=Vr,Ht.findIndex=Er,Ht.findKey=wo,Ht.findLast=jr,Ht.findLastIndex=Rr,Ht.findLastKey=So,Ht.findWhere=function(t,e){return Vr(t,_e(e))},Ht.first=Ri,Ht.floor=Uo,Ht.get=function(t,e,i){return(t=null==t?_:ge(t,Mi(e),e+""))===_?i:t},Ht.gt=tn,Ht.gte=function(t,e){return t>=e},Ht.has=function(t,e){if(null==t)return!1;var i=Un.call(t,e);if(!i&&!ki(e)){if(null==(t=1==(e=Mi(e)).length?t:ge(t,Te(e,0,-1))))return!1;e=Oi(e),i=Un.call(t,e)}return i||Si(t.length)&&xi(e,t.length)&&(vo(t)||en(t))},Ht.identity=Tn,Ht.includes=Vi,Ht.indexOf=Hi,Ht.inRange=function(t,e,i){return e=+e||0,i===_?(i=e,e=0):i=+i||0,t>=pr(e,i)&&t<ur(e,i)},Ht.isArguments=en,Ht.isArray=vo,Ht.isBoolean=function(t){return!0===t||!1===t||d(t)&&Vn.call(t)==B},Ht.isDate=function(t){return d(t)&&Vn.call(t)==N},Ht.isElement=function(t){return!!t&&1===t.nodeType&&d(t)&&!hn(t)},Ht.isEmpty=function(t){return null==t||(_i(t)&&(vo(t)||un(t)||en(t)||d(t)&&on(t.splice))?!t.length:!Co(t).length)},Ht.isEqual=nn,Ht.isError=rn,Ht.isFinite=function(t){return"number"==typeof t&&hr(t)},Ht.isFunction=on,Ht.isMatch=function(t,e,i,n){return i="function"==typeof i?He(i,n,3):_,ye(t,mi(e),i)},Ht.isNaN=function(t){return ln(t)&&t!=+t},Ht.isNative=sn,Ht.isNull=function(t){return null===t},Ht.isNumber=ln,Ht.isObject=an,Ht.isPlainObject=hn,Ht.isRegExp=cn,Ht.isString=un,Ht.isTypedArray=pn,Ht.isUndefined=function(t){return t===_},Ht.kebabCase=Ho,Ht.last=Oi,Ht.lastIndexOf=function(t,e,i){var n=t?t.length:0;if(!n)return-1;var r=n;if("number"==typeof i)r=(0>i?ur(n+i,0):pr(i||0,n-1))+1;else if(i)return t=t[r=Ee(t,e,!0)-1],(e==e?e===t:t!=t)?r:-1;if(e!=e)return p(t,r,!0);for(;r--;)if(t[r]===e)return r;return-1},Ht.lt=dn,Ht.lte=function(t,e){return t<=e},Ht.max=Go,Ht.min=Vo,Ht.noConflict=function(){return Gt._=jn,this},Ht.noop=Dn,Ht.now=no,Ht.pad=function(t,e,i){e=+e;var n=(t=r(t)).length;return n<e&&hr(e)?(e=sr(n=(e-n)/2),(i=ai("",n=or(n),i)).slice(0,e)+t+i):t},Ht.padLeft=Oo,Ht.padRight=Yo,Ht.parseInt=function(t,e,i){return(i?bi(t,e,i):null==e)?e=0:e&&(e=+e),t=kn(t),fr(t,e||(St.test(t)?16:10))},Ht.random=function(t,e,i){i&&bi(t,e,i)&&(e=i=_);var n=null==t,r=null==e;return null==i&&(r&&"boolean"==typeof t?(i=t,t=1):"boolean"==typeof e&&(i=e,r=!0)),n&&r&&(e=1,r=!1),t=+t||0,r?(e=t,t=0):e=+e||0,i||t%1||e%1?(i=gr(),pr(t+i*(e-t+Zn("1e-"+((i+"").length-1))),e)):we(t,e)},Ht.reduce=to,Ht.reduceRight=eo,Ht.repeat=bn,Ht.result=function(t,e,i){var n=null==t?_:t[e];return n===_&&(null==t||ki(e,t)||(n=null==(t=1==(e=Mi(e)).length?t:ge(t,Te(e,0,-1)))?_:t[Oi(e)]),n=n===_?i:n),on(n)?n.call(t):n},Ht.round=jo,Ht.runInContext=f,Ht.size=function(t){var e=t?Mr(t):0;return Si(e)?e:Co(t).length},Ht.snakeCase=Fo,Ht.some=Ki,Ht.sortedIndex=Yr,Ht.sortedLastIndex=Fr,Ht.startCase=Xo,Ht.startsWith=function(t,e,i){return t=r(t),i=null==i?0:pr(0>i?0:+i||0,t.length),t.lastIndexOf(e,i)==i},Ht.sum=function(t,e,i){if(i&&bi(t,e,i)&&(e=_),1==(e=di(e,i,3)).length){i=(t=vo(t)?t:Di(t)).length;for(var n=0;i--;)n+=+e(t[i])||0;t=n}else t=function(t,e){var i=0;return Sr(t,(function(t,n,r){i+=+e(t,n,r)||0})),i}(t,e);return t},Ht.template=function(t,e,i){var n=Ht.templateSettings;i&&bi(t,e,i)&&(e=i=_),t=r(t),e=Qt(te({},i||e),n,Jt),i=Qt(te({},e.imports),n.imports,Jt);var o,a,s=Co(i),l=Me(i,s),h=0;i=e.interpolate||Dt;var c="__p+='";i=Yn((e.escape||Dt).source+"|"+i.source+"|"+(i===ft?kt:Dt).source+"|"+(e.evaluate||Dt).source+"|$","g");var p="sourceURL"in e?"//# sourceURL="+e.sourceURL+"\n":"";if(t.replace(i,(function(e,i,n,r,s,l){return n||(n=r),c+=t.slice(h,l).replace(Ct,u),i&&(o=!0,c+="'+__e("+i+")+'"),s&&(a=!0,c+="';"+s+";\n__p+='"),n&&(c+="'+((__t=("+n+"))==null?'':__t)+'"),h=l+e.length,e})),c+="';",(e=e.variable)||(c="with(obj){"+c+"}"),c=(a?c.replace(ot,""):c).replace(at,"$1").replace(st,"$1;"),c="function("+(e||"obj")+"){"+(e?"":"obj||(obj={});")+"var __t,__p=''"+(o?",__e=_.escape":"")+(a?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",(e=zo((function(){return En(s,p+"return "+c).apply(_,l)}))).source=c,rn(e))throw e;return e},Ht.trim=kn,Ht.trimLeft=function(t,e,i){var n=t;return(t=r(t))?t.slice((i?bi(n,e,i):null==e)?m(t):o(t,e+"")):t},Ht.trimRight=function(t,e,i){var n=t;return(t=r(t))?(i?bi(n,e,i):null==e)?t.slice(0,y(t)+1):t.slice(0,a(t,e+"")+1):t},Ht.trunc=function(t,e,i){i&&bi(t,e,i)&&(e=_);var n=M;if(i=L,null!=e)if(an(e)){var o="separator"in e?e.separator:o;n="length"in e?+e.length||0:n;i="omission"in e?r(e.omission):i}else n=+e||0;if(n>=(t=r(t)).length)return t;if(1>(n-=i.length))return i;if(e=t.slice(0,n),null==o)return e+i;if(cn(o)){if(t.slice(n).search(o)){var a,s=t.slice(0,n);for(o.global||(o=Yn(o.source,(wt.exec(o)||"")+"g")),o.lastIndex=0;t=o.exec(s);)a=t.index;e=e.slice(0,null==a?n:a)}}else t.indexOf(o,n)!=n&&(-1<(o=e.lastIndexOf(o))&&(e=e.slice(0,o)));return e+i},Ht.unescape=function(t){return(t=r(t))&&ct.test(t)?t.replace(lt,v):t},Ht.uniqueId=function(t){var e=++Gn;return r(t)+e},Ht.words=wn,Ht.all=Ui,Ht.any=Ki,Ht.contains=Vi,Ht.eq=nn,Ht.detect=Vr,Ht.foldl=to,Ht.foldr=eo,Ht.head=Ri,Ht.include=Vi,Ht.inject=to,An(Ht,function(){var t={};return pe(Ht,(function(e,i){Ht.prototype[i]||(t[i]=e)})),t}(),!1),Ht.sample=$i,Ht.prototype.sample=function(t){return this.__chain__||null!=t?this.thru((function(e){return $i(e,t)})):$i(this.value())},Ht.VERSION=x,Wt("bind bindKey curry curryRight partial partialRight".split(" "),(function(t){Ht[t].placeholder=Ht})),Wt(["drop","take"],(function(t,e){Ft.prototype[t]=function(i){var n=this.__filtered__;if(n&&!e)return new Ft(this);i=null==i?1:ur(sr(i)||0,0);var r=this.clone();return n?r.__takeCount__=pr(r.__takeCount__,i):r.__views__.push({size:i,type:t+(0>r.__dir__?"Right":"")}),r},Ft.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}})),Wt(["filter","map","takeWhile"],(function(t,e){var i=e+1,n=i!=O;Ft.prototype[t]=function(t,e){var r=this.clone();return r.__iteratees__.push({iteratee:di(t,e,1),type:i}),r.__filtered__=r.__filtered__||n,r}})),Wt(["first","last"],(function(t,e){var i="take"+(e?"Right":"");Ft.prototype[t]=function(){return this[i](1).value()[0]}})),Wt(["initial","rest"],(function(t,e){var i="drop"+(e?"":"Right");Ft.prototype[t]=function(){return this.__filtered__?new Ft(this):this[i](1)}})),Wt(["pluck","where"],(function(t,e){var i=e?"filter":"map",n=e?_e:Cn;Ft.prototype[t]=function(t){return this[i](n(t))}})),Ft.prototype.compact=function(){return this.filter(Tn)},Ft.prototype.reject=function(t,e){return t=di(t,e,1),this.filter((function(e){return!t(e)}))},Ft.prototype.slice=function(t,e){t=null==t?0:+t||0;var i=this;return i.__filtered__&&(0<t||0>e)?new Ft(i):(0>t?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==_&&(i=0>(e=+e||0)?i.dropRight(-e):i.take(e-t)),i)},Ft.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},Ft.prototype.toArray=function(){return this.take(yr)},pe(Ft.prototype,(function(t,e){var i=/^(?:filter|map|reject)|While$/.test(e),n=/^(?:first|last)$/.test(e),r=Ht[n?"take"+("last"==e?"Right":""):e];r&&(Ht.prototype[e]=function(){function e(t){return n&&a?r(t,1)[0]:r.apply(_,Kt([t],o))}var o=n?[1]:arguments,a=this.__chain__,s=this.__wrapped__,l=!!this.__actions__.length,h=s instanceof Ft,c=o[0],u=h||vo(s);return u&&i&&"function"==typeof c&&1!=c.length&&(h=u=!1),c={func:Wi,args:[e],thisArg:_},l=h&&!l,n&&!a?l?((s=s.clone()).__actions__.push(c),t.call(s)):r.call(_,this.value())[0]:!n&&u?(s=l?s:new Ft(this),(s=t.apply(s,o)).__actions__.push(c),new Yt(s,a)):this.thru(e)})})),Wt("join pop push replace shift sort splice split unshift".split(" "),(function(t){var e=(/^(?:replace|split)$/.test(t)?Nn:zn)[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",n=/^(?:join|pop|replace|shift)$/.test(t);Ht.prototype[t]=function(){var t=arguments;return n&&!this.__chain__?e.apply(this.value(),t):this[i]((function(i){return e.apply(i,t)}))}})),pe(Ft.prototype,(function(t,e){var i=Ht[e];if(i){var n=i.name+"";(kr[n]||(kr[n]=[])).push({name:e,func:i})}})),kr[oi(_,k).name]=[{name:"wrapper",func:_}],Ft.prototype.clone=function(){var t=new Ft(this.__wrapped__);return t.__actions__=Nt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=Nt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=Nt(this.__views__),t},Ft.prototype.reverse=function(){if(this.__filtered__){var t=new Ft(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Ft.prototype.value=function(){var t,e=this.__wrapped__.value(),i=this.__dir__,n=vo(e),r=0>i,o=n?e.length:0;t=o;for(var a=this.__views__,s=0,l=-1,h=a.length;++l<h;){var c=a[l],u=c.size;switch(c.type){case"drop":s+=u;break;case"dropRight":t-=u;break;case"take":t=pr(t,s+u);break;case"takeRight":s=ur(s,t-u)}}if(a=(t={start:s,end:t}).start,t=(s=t.end)-a,r=r?s:a-1,s=(a=this.__iteratees__).length,l=0,h=pr(t,this.__takeCount__),!n||o<R||o==t&&h==t)return Ie(e,this.__actions__);n=[];t:for(;t--&&l<h;){for(o=-1,c=e[r+=i];++o<s;){u=(p=a[o]).type;var p=p.iteratee(c);if(u==O)c=p;else if(!p){if(u==H)continue t;break t}}n[l++]=c}return n},Ht.prototype.chain=function(){return Ni(this)},Ht.prototype.commit=function(){return new Yt(this.value(),this.__chain__)},Ht.prototype.concat=Wr,Ht.prototype.plant=function(t){for(var e,i=this;i instanceof Ot;){var n=Li(i);e?r.__wrapped__=n:e=n;var r=n;i=i.__wrapped__}return r.__wrapped__=t,e},Ht.prototype.reverse=function(){function t(t){return t.reverse()}var e=this.__wrapped__;return e instanceof Ft?(this.__actions__.length&&(e=new Ft(this)),(e=e.reverse()).__actions__.push({func:Wi,args:[t],thisArg:_}),new Yt(e,this.__chain__)):this.thru(t)},Ht.prototype.toString=function(){return this.value()+""},Ht.prototype.run=Ht.prototype.toJSON=Ht.prototype.valueOf=Ht.prototype.value=function(){return Ie(this.__wrapped__,this.__actions__)},Ht.prototype.collect=Ht.prototype.map,Ht.prototype.head=Ht.prototype.first,Ht.prototype.select=Ht.prototype.filter,Ht.prototype.tail=Ht.prototype.rest,Ht}();"function"==typeof define&&"object"==typeof define.amd&&define.amd?(Gt._=Vt,define((function(){return Vt}))):zt&&Bt?Ut?(Bt.exports=Vt)._=Vt:zt._=Vt:Gt._=Vt}).call(this),
/**
 * @license Highstock JS v2.1.8 (2015-08-20)
 *
 * (c) 2009-2014 Torstein Honsi
 *
 * License: www.highcharts.com/license
 */
function(){var t,e,i,n,r,o,a,s,l,h,c,u,p,d,f,g,m,y,v,_,x,b,k,w,S,T,P=document,A=window,D=Math,C=D.round,M=D.floor,L=D.ceil,I=D.max,E=D.min,R=D.abs,H=D.cos,O=D.sin,Y=D.PI,F=2*Y/360,X=navigator.userAgent,z=A.opera,B=/(msie|trident)/i.test(X)&&!z,N=8===P.documentMode,W=/AppleWebKit/.test(X),U=/Firefox/.test(X),G=/(Mobile|Android|Windows Phone)/.test(X),V="http://www.w3.org/2000/svg",j=!!P.createElementNS&&!!P.createElementNS(V,"svg").createSVGRect,$=U&&parseInt(X.split("Firefox/")[1],10)<4,K=!j&&!B&&!!P.createElement("canvas").getContext,q={},Z=0,J=function(){},Q=[],tt=0,et="div",it="hidden",nt="highcharts-",rt="visible",ot="px",at="none",st="M",lt="L",ht=/^[0-9]+$/,ct=["plotTop","marginRight","marginBottom","plotLeft"],ut={};(T=A.Highcharts=A.Highcharts?Nt(16,!0):{}).seriesTypes=ut;var pt=T.extend=function(t,e){var i;for(i in t||(t={}),e)t[i]=e[i];return t};function dt(){var t,e,i=arguments,n={},r=function(t,e){var i,n;for(n in"object"!=typeof t&&(t={}),e)e.hasOwnProperty(n)&&((i=e[n])&&"object"==typeof i&&"[object Array]"!==Object.prototype.toString.call(i)&&"renderTo"!==n&&"number"!=typeof i.nodeType?t[n]=r(t[n]||{},i):t[n]=e[n]);return t};for(!0===i[0]&&(n=i[1],i=Array.prototype.slice.call(i,2)),e=i.length,t=0;t<e;t++)n=r(n,i[t]);return n}function ft(t,e){return parseInt(t,e||10)}function gt(t){return"string"==typeof t}function mt(t){return t&&"object"==typeof t}function yt(t){return"[object Array]"===Object.prototype.toString.call(t)}function vt(t){return"number"==typeof t}function _t(t){return D.log(t)/D.LN10}function xt(t){return D.pow(10,t)}function bt(t,e){for(var i=t.length;i--;)if(t[i]===e){t.splice(i,1);break}}function kt(t){return null!=t}function wt(t,e,i){var n,r;if(gt(e))kt(i)?t.setAttribute(e,i):t&&t.getAttribute&&(r=t.getAttribute(e));else if(kt(e)&&mt(e))for(n in e)t.setAttribute(n,e[n]);return r}function St(t){return yt(t)?t:[t]}var Tt=T.pick=function(){var t,e,i=arguments,n=i.length;for(t=0;t<n;t++)if(null!=(e=i[t]))return e};function Pt(t,e){B&&!j&&e&&void 0!==e.opacity&&(e.filter="alpha(opacity="+100*e.opacity+")"),pt(t.style,e)}function At(t,e,i,n,r){var o=P.createElement(t);return e&&pt(o,e),r&&Pt(o,{padding:0,border:at,margin:0}),i&&Pt(o,i),n&&n.appendChild(o),o}function Dt(t,e){var i=function(){};return i.prototype=new t,pt(i.prototype,e),i}function Ct(t,e){return new Array((e||2)+1-String(t).length).join(0)+t}function Mt(t,e){return/%$/.test(t)?e*parseFloat(t)/100:parseFloat(t)}var Lt=T.wrap=function(t,e,i){var n=t[e];t[e]=function(){var t=Array.prototype.slice.call(arguments);return t.unshift(n),i.apply(this,t)}};function It(t){return 6e4*(u&&u(t)||c||0)}function Et(t,e){var i,o=n.lang;return/f$/.test(t)?(i=(i=t.match(/\.([0-9])/))?i[1]:-1,null!==e&&(e=T.numberFormat(e,i,o.decimalPoint,t.indexOf(",")>-1?o.thousandsSep:""))):e=r(t,e),e}function Rt(t,e){for(var i,n,r,o,a,s,l,h="{",c=!1,u=[];-1!==(l=t.indexOf(h));){if(i=t.slice(0,l),c){for(a=(r=(n=i.split(":")).shift().split(".")).length,s=e,o=0;o<a;o++)s=s[r[o]];n.length&&(s=Et(n.join(":"),s)),u.push(s)}else u.push(i);t=t.slice(l+1),h=(c=!c)?"}":"{"}return u.push(t),u.join("")}function Ht(t){return D.pow(10,M(D.log(t)/D.LN10))}function Ot(t,e,i,n,r){var o,a,s=t;for(o=t/(i=Tt(i,1)),e||(e=[1,2,2.5,5,10],!1===n&&(1===i?e=[1,2,5,10]:i<=.1&&(e=[1/i]))),a=0;a<e.length&&(s=e[a],!(r&&s*i>=t||!r&&o<=(e[a]+(e[a+1]||e[a]))/2));a++);return s*=i}function Yt(t,e){var i,n,r=t.length;for(n=0;n<r;n++)t[n].ss_i=n;for(t.sort((function(t,n){return 0===(i=e(t,n))?t.ss_i-n.ss_i:i})),n=0;n<r;n++)delete t[n].ss_i}function Ft(t){for(var e=t.length,i=t[0];e--;)t[e]<i&&(i=t[e]);return i}function Xt(t){for(var e=t.length,i=t[0];e--;)t[e]>i&&(i=t[e]);return i}function zt(t,e){var i;for(i in t)t[i]&&t[i]!==e&&t[i].destroy&&t[i].destroy(),delete t[i]}function Bt(t){i||(i=At(et)),t&&i.appendChild(t),i.innerHTML=""}function Nt(t,e){var i="Highcharts error #"+t+": www.highcharts.com/errors/"+t;if(e)throw i;A.console&&console.log(i)}function Wt(t,e){return parseFloat(t.toPrecision(e||14))}function Ut(t,e){e.renderer.globalAnimation=Tt(t,e.animation)}r=function(t,e,i){if(!kt(e)||isNaN(e))return n.lang.invalidDate||"";t=Tt(t,"%Y-%m-%d %H:%M:%S");var r,o=new l(e-It(e)),a=o[d](),s=o[f](),h=o[g](),c=o[m](),u=o[y](),v=n.lang,_=v.weekdays,x=pt({a:_[s].substr(0,3),A:_[s],d:Ct(h),e:h,w:s,b:v.shortMonths[c],B:v.months[c],m:Ct(c+1),y:u.toString().substr(2,2),Y:u,H:Ct(a),k:a,I:Ct(a%12||12),l:a%12||12,M:Ct(o[p]()),p:a<12?"AM":"PM",P:a<12?"am":"pm",S:Ct(o.getSeconds()),L:Ct(C(e%1e3),3)},T.dateFormats);for(r in x)for(;-1!==t.indexOf("%"+r);)t=t.replace("%"+r,"function"==typeof x[r]?x[r](e):x[r]);return i?t.substr(0,1).toUpperCase()+t.substr(1):t},a={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5,month:24192e5,year:314496e5},T.numberFormat=function(t,e,i,r){var o=n.lang,a=+t||0,s=-1===e?E((a.toString().split(".")[1]||"").length,20):isNaN(e=R(e))?2:e,l=void 0===i?o.decimalPoint:i,h=void 0===r?o.thousandsSep:r,c=a<0?"-":"",u=String(ft(a=R(a).toFixed(s))),p=u.length>3?u.length%3:0;return c+(p?u.substr(0,p)+h:"")+u.substr(p).replace(/(\d{3})(?=\d)/g,"$1"+h)+(s?l+R(a-u).toFixed(s).slice(2):"")},o={init:function(t,e,i){e=e||"";var n,r,o,a,s,l=t.shift,h=e.indexOf("C")>-1,c=h?7:3,u=e.split(" "),p=[].concat(i),d=function(t){for(o=t.length;o--;)t[o]===st&&t.splice(o+1,0,t[o+1],t[o+2],t[o+1],t[o+2])};if(h&&(d(u),d(p)),t.isArea&&(a=u.splice(u.length-6,6),s=p.splice(p.length-6,6)),l<=p.length/c&&u.length===p.length)for(;l--;)p=[].concat(p).splice(0,c).concat(p);if(t.shift=0,u.length)for(n=p.length;u.length<n;)r=[].concat(u).splice(u.length-c,c),h&&(r[c-6]=r[c-2],r[c-5]=r[c-1]),u=u.concat(r);return a&&(u=u.concat(a),p=p.concat(s)),[u,p]},step:function(t,e,i,n){var r,o=[],a=t.length;if(1===i)o=n;else if(a===e.length&&i<1)for(;a--;)r=parseFloat(t[a]),o[a]=isNaN(r)?t[a]:i*parseFloat(e[a]-r)+r;else o=e;return o}},function(t){A.HighchartsAdapter=A.HighchartsAdapter||t&&{init:function(e){var i=t.fx;t.extend(t.easing,{easeOutQuad:function(t,e,i,n,r){return-n*(e/=r)*(e-2)+i}}),t.each(["cur","_default","width","height","opacity"],(function(e,n){var r,o=i.step;"cur"===n?o=i.prototype:"_default"===n&&t.Tween&&(o=t.Tween.propHooks[n],n="set"),(r=o[n])&&(o[n]=function(t){var i;if("align"!==(t=e?t:this).prop)return(i=t.elem).attr?i.attr(t.prop,"cur"===n?void 0:t.now):r.apply(this,arguments)})})),Lt(t.cssHooks.opacity,"get",(function(t,e,i){return e.attr?e.opacity||0:t.call(this,e,i)})),this.addAnimSetter("d",(function(t){var i,n=t.elem;t.started||(i=e.init(n,n.d,n.toD),t.start=i[0],t.end=i[1],t.started=!0),n.attr("d",e.step(t.start,t.end,t.pos,n.toD))})),this.each=Array.prototype.forEach?function(t,e){return Array.prototype.forEach.call(t,e)}:function(t,e){var i,n=t.length;for(i=0;i<n;i++)if(!1===e.call(t[i],t[i],i,t))return i},t.fn.highcharts=function(){var t,e,i="Chart",n=arguments;return this[0]&&(gt(n[0])&&(i=n[0],n=Array.prototype.slice.call(n,1)),void 0!==(t=n[0])&&(t.chart=t.chart||{},t.chart.renderTo=this[0],new T[i](t,n[1]),e=this),void 0===t&&(e=Q[wt(this[0],"data-highcharts-chart")])),e}},addAnimSetter:function(e,i){t.Tween?t.Tween.propHooks[e]={set:i}:t.fx.step[e]=i},getScript:t.getScript,inArray:t.inArray,adapterRun:function(e,i){return t(e)[i]()},grep:t.grep,map:function(t,e){for(var i=[],n=0,r=t.length;n<r;n++)i[n]=e.call(t[n],t[n],n,t);return i},offset:function(e){return t(e).offset()},addEvent:function(e,i,n){t(e).bind(i,n)},removeEvent:function(e,i,n){var r=P.removeEventListener?"removeEventListener":"detachEvent";P[r]&&e&&!e[r]&&(e[r]=function(){}),t(e).unbind(i,n)},fireEvent:function(e,i,n,r){var o,a=t.Event(i),s="detached"+i;!B&&n&&(delete n.layerX,delete n.layerY,delete n.returnValue),pt(a,n),e[i]&&(e[s]=e[i],e[i]=null),t.each(["preventDefault","stopPropagation"],(function(t,e){var i=a[e];a[e]=function(){try{i.call(a)}catch(t){"preventDefault"===e&&(o=!0)}}})),t(e).trigger(a),e[s]&&(e[i]=e[s],e[s]=null),!r||a.isDefaultPrevented()||o||r(a)},washMouseEvent:function(t){var e=t.originalEvent||t;return void 0===e.pageX&&(e.pageX=t.pageX,e.pageY=t.pageY),e},animate:function(e,i,n){var r=t(e);e.style||(e.style={}),i.d&&(e.toD=i.d,i.d=1),r.stop(),void 0!==i.opacity&&e.attr&&(i.opacity+="px"),e.hasAnim=1,r.animate(i,n)},stop:function(e){e.hasAnim&&t(e).stop()}}}(A.jQuery);var Gt=A.HighchartsAdapter,Vt=Gt||{};Gt&&Gt.init.call(Gt,o);var jt=Vt.adapterRun,$t=Vt.getScript,Kt=Vt.inArray,qt=T.each=Vt.each,Zt=Vt.grep,Jt=Vt.offset,Qt=Vt.map,te=Vt.addEvent,ee=Vt.removeEvent,ie=Vt.fireEvent,ne=Vt.washMouseEvent,re=Vt.animate,oe=Vt.stop,ae=(n={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",numericSymbols:["k","M","G","T","P","E"],resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:" "},global:{useUTC:!0,canvasToolsURL:"http://code.highcharts.com/stock/2.1.8/modules/canvas-tools.js",VMLRadialGradientURL:"http://code.highcharts.com/stock/2.1.8/gfx/vml-radial-gradient.png"},chart:{borderColor:"#4572A7",borderRadius:0,defaultSeriesType:"line",ignoreHiddenSeries:!0,spacing:[10,10,15,10],backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0",resetZoomButton:{theme:{zIndex:20},position:{align:"right",x:-10,y:10}}},title:{text:"Chart title",align:"center",margin:15,style:{color:"#333333",fontSize:"18px"}},subtitle:{text:"",align:"center",style:{color:"#555555"}},plotOptions:{line:{allowPointSelect:!1,showCheckbox:!1,animation:{duration:1e3},events:{},lineWidth:2,marker:{lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{enabled:!0,lineWidthPlus:1,radiusPlus:2},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:{align:"center",formatter:function(){return null===this.y?"":T.numberFormat(this.y,-1)},style:{color:"contrast",fontSize:"11px",fontWeight:"bold",textShadow:"0 0 6px contrast, 0 0 3px contrast"},verticalAlign:"bottom",x:0,y:0,padding:5},cropThreshold:300,pointRange:0,states:{hover:{lineWidthPlus:1,marker:{},halo:{size:10,opacity:.25}},select:{marker:{}}},stickyTracking:!0,turboThreshold:1e3}},labels:{style:{position:"absolute",color:"#3E576F"}},legend:{enabled:!0,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderColor:"#909090",borderRadius:0,navigation:{activeColor:"#274b6d",inactiveColor:"#CCC"},shadow:!1,itemStyle:{color:"#333333",fontSize:"12px",fontWeight:"bold"},itemHoverStyle:{color:"#000"},itemHiddenStyle:{color:"#CCC"},itemCheckboxStyle:{position:"absolute",width:"13px",height:"13px"},symbolPadding:5,verticalAlign:"bottom",x:0,y:0,title:{style:{fontWeight:"bold"}}},loading:{labelStyle:{fontWeight:"bold",position:"relative",top:"45%"},style:{position:"absolute",backgroundColor:"white",opacity:.5,textAlign:"center"}},tooltip:{enabled:!0,animation:j,backgroundColor:"rgba(249, 249, 249, .85)",borderWidth:1,borderRadius:3,dateTimeLabelFormats:{millisecond:"%A, %b %e, %H:%M:%S.%L",second:"%A, %b %e, %H:%M:%S",minute:"%A, %b %e, %H:%M",hour:"%A, %b %e, %H:%M",day:"%A, %b %e, %Y",week:"Week from %A, %b %e, %Y",month:"%B %Y",year:"%Y"},footerFormat:"",headerFormat:'<span style="font-size: 10px">{point.key}</span><br/>',pointFormat:'<span style="color:{point.color}">â</span> {series.name}: <b>{point.y}</b><br/>',shadow:!0,snap:G?25:10,style:{color:"#333333",cursor:"default",fontSize:"12px",padding:"8px",whiteSpace:"nowrap"}},credits:{enabled:!0,text:"Highcharts.com",href:"http://www.highcharts.com",position:{align:"right",x:-10,verticalAlign:"bottom",y:-5},style:{cursor:"pointer",color:"#909090",fontSize:"9px"}}}).plotOptions,se=ae.line;function le(){var t=n.global,e=t.useUTC,i=e?"getUTC":"get",r=e?"setUTC":"set";l=t.Date||window.Date,c=e&&t.timezoneOffset,u=e&&t.getTimezoneOffset,h=function(t,i,n,r,o,a){var s;return e?(s=l.UTC.apply(0,arguments),s+=It(s)):s=new l(t,i,Tt(n,1),Tt(r,0),Tt(o,0),Tt(a,0)).getTime(),s},p=i+"Minutes",d=i+"Hours",f=i+"Day",g=i+"Date",m=i+"Month",y=i+"FullYear",v=r+"Milliseconds",_=r+"Seconds",x=r+"Minutes",b=r+"Hours",k=r+"Date",w=r+"Month",S=r+"FullYear"}le();var he=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/,ce=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,ue=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/,pe=function(t){var e,i,n=[];return function(t){t&&t.stops?i=Qt(t.stops,(function(t){return pe(t[1])})):(e=he.exec(t))?n=[ft(e[1]),ft(e[2]),ft(e[3]),parseFloat(e[4],10)]:(e=ce.exec(t))?n=[ft(e[1],16),ft(e[2],16),ft(e[3],16),1]:(e=ue.exec(t))&&(n=[ft(e[1]),ft(e[2]),ft(e[3]),1])}(t),{get:function(e){var r;return i?((r=dt(t)).stops=[].concat(r.stops),qt(i,(function(t,i){r.stops[i]=[r.stops[i][0],t.get(e)]}))):r=n&&!isNaN(n[0])?"rgb"===e?"rgb("+n[0]+","+n[1]+","+n[2]+")":"a"===e?n[3]:"rgba("+n.join(",")+")":t,r},brighten:function(t){if(i)qt(i,(function(e){e.brighten(t)}));else if(vt(t)&&0!==t){var e;for(e=0;e<3;e++)n[e]+=ft(255*t),n[e]<0&&(n[e]=0),n[e]>255&&(n[e]=255)}return this},rgba:n,setOpacity:function(t){return n[3]=t,this},raw:t}};function de(){}de.prototype={opacity:1,textProps:["fontSize","fontWeight","fontFamily","fontStyle","color","lineHeight","width","textDecoration","textOverflow","textShadow"],init:function(t,e){this.element="span"===e?At(e):P.createElementNS(V,e),this.renderer=t},animate:function(t,e,i){var n=Tt(e,this.renderer.globalAnimation,!0);return oe(this),n?(n=dt(n,{}),i&&(n.complete=i),re(this,t,n)):this.attr(t,null,i),this},colorGradient:function(t,e,i){var n,r,o,a,s,l,h,c,u,p,d,f=this.renderer,g=[];if(t.linearGradient?r="linearGradient":t.radialGradient&&(r="radialGradient"),r){for(p in o=t[r],a=f.gradients,l=t.stops,u=i.radialReference,yt(o)&&(t[r]=o={x1:o[0],y1:o[1],x2:o[2],y2:o[3],gradientUnits:"userSpaceOnUse"}),"radialGradient"===r&&u&&!kt(o.gradientUnits)&&(o=dt(o,{cx:u[0]-u[2]/2+o.cx*u[2],cy:u[1]-u[2]/2+o.cy*u[2],r:o.r*u[2],gradientUnits:"userSpaceOnUse"})),o)"id"!==p&&g.push(p,o[p]);for(p in l)g.push(l[p]);a[g=g.join(",")]?d=a[g].attr("id"):(o.id=d=nt+Z++,a[g]=s=f.createElement(r).attr(o).add(f.defs),s.stops=[],qt(l,(function(t){var e;0===t[1].indexOf("rgba")?(n=pe(t[1]),h=n.get("rgb"),c=n.get("a")):(h=t[1],c=1),e=f.createElement("stop").attr({offset:t[0],"stop-color":h,"stop-opacity":c}).add(s),s.stops.push(e)}))),i.setAttribute(e,"url("+f.url+"#"+d+")")}},applyTextShadow:function(t){var e,i=this.element,n=-1!==t.indexOf("contrast"),r={},o=this.renderer.forExport||void 0!==i.style.textShadow&&!B;n&&(r.textShadow=t=t.replace(/contrast/g,this.renderer.getContrast(i.style.fill))),W&&(r.textRendering="geometricPrecision"),o?Pt(i,r):(this.fakeTS=!0,this.ySetter=this.xSetter,e=[].slice.call(i.getElementsByTagName("tspan")),qt(t.split(/\s?,\s?/g),(function(t){var n,r,o=i.firstChild;t=t.split(" "),n=t[t.length-1],(r=t[t.length-2])&&qt(e,(function(t,e){var a;0===e&&(t.setAttribute("x",i.getAttribute("x")),e=i.getAttribute("y"),t.setAttribute("y",e||0),null===e&&i.setAttribute("y",0)),wt(a=t.cloneNode(1),{class:nt+"text-shadow",fill:n,stroke:n,"stroke-opacity":1/I(ft(r),3),"stroke-width":r,"stroke-linejoin":"round"}),i.insertBefore(a,o)}))})))},attr:function(t,e,i){var n,r,o,a,s=this.element,l=this;if("string"==typeof t&&void 0!==e&&(n=t,(t={})[n]=e),"string"==typeof t)l=(this[t+"Getter"]||this._defaultGetter).call(this,t,s);else{for(n in t)r=t[n],a=!1,this.symbolName&&/^(x|y|width|height|r|start|end|innerR|anchorX|anchorY)/.test(n)&&(o||(this.symbolAttr(t),o=!0),a=!0),!this.rotation||"x"!==n&&"y"!==n||(this.doTransform=!0),a||(this[n+"Setter"]||this._defaultSetter).call(this,r,n,s),this.shadows&&/^(width|height|visibility|x|y|d|transform|cx|cy|r)$/.test(n)&&this.updateShadows(n,r);this.doTransform&&(this.updateTransform(),this.doTransform=!1)}return i&&i(),l},updateShadows:function(t,e){for(var i=this.shadows,n=i.length;n--;)i[n].setAttribute(t,"height"===t?I(e-(i[n].cutHeight||0),0):"d"===t?this.d:e)},addClass:function(t){var e=this.element,i=wt(e,"class")||"";return-1===i.indexOf(t)&&wt(e,"class",i+" "+t),this},symbolAttr:function(t){var e=this;qt(["x","y","r","start","end","width","height","innerR","anchorX","anchorY"],(function(i){e[i]=Tt(t[i],e[i])})),e.attr({d:e.renderer.symbols[e.symbolName](e.x,e.y,e.width,e.height,e)})},clip:function(t){return this.attr("clip-path",t?"url("+this.renderer.url+"#"+t.id+")":at)},crisp:function(t){var e,i,n={},r=t.strokeWidth||this.strokeWidth||0;for(e in i=C(r)%2/2,t.x=M(t.x||this.x||0)+i,t.y=M(t.y||this.y||0)+i,t.width=M((t.width||this.width||0)-2*i),t.height=M((t.height||this.height||0)-2*i),t.strokeWidth=r,t)this[e]!==t[e]&&(this[e]=n[e]=t[e]);return n},css:function(t){var e,i,n,r=this.styles,o={},a=this.element,s="",l=!r;if(t&&t.color&&(t.fill=t.color),r)for(i in t)t[i]!==r[i]&&(o[i]=t[i],l=!0);if(l){if(e=this.textWidth=t&&t.width&&"text"===a.nodeName.toLowerCase()&&ft(t.width)||this.textWidth,r&&(t=pt(r,o)),this.styles=t,e&&(K||!j&&this.renderer.forExport)&&delete t.width,B&&!j)Pt(this.element,t);else{for(i in n=function(t,e){return"-"+e.toLowerCase()},t)s+=i.replace(/([A-Z])/g,n)+":"+t[i]+";";wt(a,"style",s)}e&&this.added&&this.renderer.buildText(this)}return this},on:function(t,i){var n=this,r=n.element;return e&&"click"===t?(r.ontouchstart=function(t){n.touchEventFired=l.now(),t.preventDefault(),i.call(r,t)},r.onclick=function(t){(-1===X.indexOf("Android")||l.now()-(n.touchEventFired||0)>1100)&&i.call(r,t)}):r["on"+t]=i,this},setRadialReference:function(t){return this.element.radialReference=t,this},translate:function(t,e){return this.attr({translateX:t,translateY:e})},invert:function(){return this.inverted=!0,this.updateTransform(),this},updateTransform:function(){var t,e=this.translateX||0,i=this.translateY||0,n=this.scaleX,r=this.scaleY,o=this.inverted,a=this.rotation,s=this.element;o&&(e+=this.attr("width"),i+=this.attr("height")),t=["translate("+e+","+i+")"],o?t.push("rotate(90) scale(-1,1)"):a&&t.push("rotate("+a+" "+(s.getAttribute("x")||0)+" "+(s.getAttribute("y")||0)+")"),(kt(n)||kt(r))&&t.push("scale("+Tt(n,1)+" "+Tt(r,1)+")"),t.length&&s.setAttribute("transform",t.join(" "))},toFront:function(){var t=this.element;return t.parentNode.appendChild(t),this},align:function(t,e,i){var n,r,o,a,s,l={},h=this.renderer,c=h.alignedObjects;return t?(this.alignOptions=t,this.alignByTranslate=e,i&&!gt(i)||(this.alignTo=s=i||"renderer",bt(c,this),c.push(this),i=null)):(t=this.alignOptions,e=this.alignByTranslate,s=this.alignTo),i=Tt(i,h[s],h),n=t.align,r=t.verticalAlign,o=(i.x||0)+(t.x||0),a=(i.y||0)+(t.y||0),"right"!==n&&"center"!==n||(o+=(i.width-(t.width||0))/{right:1,center:2}[n]),l[e?"translateX":"x"]=C(o),"bottom"!==r&&"middle"!==r||(a+=(i.height-(t.height||0))/({bottom:1,middle:2}[r]||1)),l[e?"translateY":"y"]=C(a),this[this.placed?"animate":"attr"](l),this.placed=!0,this.alignAttr=l,this},getBBox:function(t){var e,i,n,r,o,a,s=this.renderer,l=this.rotation,h=this.element,c=this.styles,u=l*F,p=this.textStr,d=h.style;if(void 0!==p&&(a=["",l||0,c&&c.fontSize,h.style.width].join(","),a=""===p||ht.test(p)?"num:"+p.toString().length+a:p+a),a&&!t&&(e=s.cache[a]),!e){if(h.namespaceURI===V||s.forExport){try{o=this.fakeTS&&function(t){qt(h.querySelectorAll("."+nt+"text-shadow"),(function(e){e.style.display=t}))},U&&d.textShadow?(r=d.textShadow,d.textShadow=""):o&&o(at),e=h.getBBox?pt({},h.getBBox()):{width:h.offsetWidth,height:h.offsetHeight},r?d.textShadow=r:o&&o("")}catch(t){}(!e||e.width<0)&&(e={width:0,height:0})}else e=this.htmlGetBBox();s.isSVG&&(i=e.width,n=e.height,B&&c&&"11px"===c.fontSize&&"16.9"===n.toPrecision(3)&&(e.height=n=14),l&&(e.width=R(n*O(u))+R(i*H(u)),e.height=R(n*H(u))+R(i*O(u)))),a&&(s.cache[a]=e)}return e},show:function(t){return this.attr({visibility:t?"inherit":rt})},hide:function(){return this.attr({visibility:it})},fadeOut:function(t){var e=this;e.animate({opacity:0},{duration:t||150,complete:function(){e.attr({y:-9999})}})},add:function(t){var e,i=this.renderer,n=this.element;return t&&(this.parentGroup=t),this.parentInverted=t&&t.inverted,void 0!==this.textStr&&i.buildText(this),this.added=!0,(!t||t.handleZ||this.zIndex)&&(e=this.zIndexSetter()),e||(t?t.element:i.box).appendChild(n),this.onAdd&&this.onAdd(),this},safeRemoveChild:function(t){var e=t.parentNode;e&&e.removeChild(t)},destroy:function(){var t,e,i,n=this,r=n.element||{},o=n.shadows,a=n.renderer.isSVG&&"SPAN"===r.nodeName&&n.parentGroup;if(r.onclick=r.onmouseout=r.onmouseover=r.onmousemove=r.point=null,oe(n),n.clipPath&&(n.clipPath=n.clipPath.destroy()),n.stops){for(i=0;i<n.stops.length;i++)n.stops[i]=n.stops[i].destroy();n.stops=null}for(n.safeRemoveChild(r),o&&qt(o,(function(t){n.safeRemoveChild(t)}));a&&a.div&&0===a.div.childNodes.length;)t=a.parentGroup,n.safeRemoveChild(a.div),delete a.div,a=t;for(e in n.alignTo&&bt(n.renderer.alignedObjects,n),n)delete n[e];return null},shadow:function(t,e,i){var n,r,o,a,s,l,h=[],c=this.element;if(t){for(a=Tt(t.width,3),s=(t.opacity||.15)/a,l=this.parentInverted?"(-1,-1)":"("+Tt(t.offsetX,1)+", "+Tt(t.offsetY,1)+")",n=1;n<=a;n++)o=2*a+1-2*n,wt(r=c.cloneNode(0),{isShadow:"true",stroke:t.color||"black","stroke-opacity":s*n,"stroke-width":o,transform:"translate"+l,fill:at}),i&&(wt(r,"height",I(wt(r,"height")-o,0)),r.cutHeight=o),e?e.element.appendChild(r):c.parentNode.insertBefore(r,c),h.push(r);this.shadows=h}return this},xGetter:function(t){return"circle"===this.element.nodeName&&(t={x:"cx",y:"cy"}[t]||t),this._defaultGetter(t)},_defaultGetter:function(t){var e=Tt(this[t],this.element?this.element.getAttribute(t):null,0);return/^[\-0-9\.]+$/.test(e)&&(e=parseFloat(e)),e},dSetter:function(t,e,i){t&&t.join&&(t=t.join(" ")),/(NaN| {2}|^$)/.test(t)&&(t="M 0 0"),i.setAttribute(e,t),this[e]=t},dashstyleSetter:function(t){var e;if(t=t&&t.toLowerCase()){for(e=(t=t.replace("shortdashdotdot","3,1,1,1,1,1,").replace("shortdashdot","3,1,1,1").replace("shortdot","1,1,").replace("shortdash","3,1,").replace("longdash","8,3,").replace(/dot/g,"1,3,").replace("dash","4,3,").replace(/,$/,"").split(",")).length;e--;)t[e]=ft(t[e])*this["stroke-width"];t=t.join(",").replace("NaN","none"),this.element.setAttribute("stroke-dasharray",t)}},alignSetter:function(t){this.element.setAttribute("text-anchor",{left:"start",center:"middle",right:"end"}[t])},opacitySetter:function(t,e,i){this[e]=t,i.setAttribute(e,t)},titleSetter:function(t){var e=this.element.getElementsByTagName("title")[0];e||(e=P.createElementNS(V,"title"),this.element.appendChild(e)),e.appendChild(P.createTextNode(String(Tt(t),"").replace(/<[^>]*>/g,"")))},textSetter:function(t){t!==this.textStr&&(delete this.bBox,this.textStr=t,this.added&&this.renderer.buildText(this))},fillSetter:function(t,e,i){"string"==typeof t?i.setAttribute(e,t):t&&this.colorGradient(t,e,i)},visibilitySetter:function(t,e,i){"inherit"===t?i.removeAttribute(e):i.setAttribute(e,t)},zIndexSetter:function(t,e){var i,n,r,o,a,s=this.renderer,l=this.parentGroup,h=(l||s).element||s.box,c=this.element,u=this.added;if(kt(t)&&(c.setAttribute(e,t),t=+t,this[e]===t&&(u=!1),this[e]=t),u){for((t=this.zIndex)&&l&&(l.handleZ=!0),i=h.childNodes,a=0;a<i.length&&!o;a++)r=wt(n=i[a],"zIndex"),n!==c&&(ft(r)>t||!kt(t)&&kt(r))&&(h.insertBefore(c,n),o=!0);o||h.appendChild(c)}return o},_defaultSetter:function(t,e,i){i.setAttribute(e,t)}},de.prototype.yGetter=de.prototype.xGetter,de.prototype.translateXSetter=de.prototype.translateYSetter=de.prototype.rotationSetter=de.prototype.verticalAlignSetter=de.prototype.scaleXSetter=de.prototype.scaleYSetter=function(t,e){this[e]=t,this.doTransform=!0},de.prototype["stroke-widthSetter"]=de.prototype.strokeSetter=function(t,e,i){this[e]=t,this.stroke&&this["stroke-width"]?(this.strokeWidth=this["stroke-width"],de.prototype.fillSetter.call(this,this.stroke,"stroke",i),i.setAttribute("stroke-width",this["stroke-width"]),this.hasStroke=!0):"stroke-width"===e&&0===t&&this.hasStroke&&(i.removeAttribute("stroke"),this.hasStroke=!1)};var fe,ge,me,ye,ve=function(){this.init.apply(this,arguments)};if(ve.prototype={Element:de,init:function(t,e,i,n,r){var o,a,s,l,h=location;a=(o=this.createElement("svg").attr({version:"1.1"}).css(this.getStyle(n))).element,t.appendChild(a),-1===t.innerHTML.indexOf("xmlns")&&wt(a,"xmlns",V),this.isSVG=!0,this.box=a,this.boxWrapper=o,this.alignedObjects=[],this.url=(U||W)&&P.getElementsByTagName("base").length?h.href.replace(/#.*?$/,"").replace(/([\('\)])/g,"\\$1").replace(/ /g,"%20"):"",this.createElement("desc").add().element.appendChild(P.createTextNode("Created with Highstock 2.1.8")),this.defs=this.createElement("defs").add(),this.forExport=r,this.gradients={},this.cache={},this.setSize(e,i,!1),U&&t.getBoundingClientRect&&(this.subPixelFix=s=function(){Pt(t,{left:0,top:0}),l=t.getBoundingClientRect(),Pt(t,{left:L(l.left)-l.left+ot,top:L(l.top)-l.top+ot})},s(),te(A,"resize",s))},getStyle:function(t){return this.style=pt({fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Arial, Helvetica, sans-serif',fontSize:"12px"},t)},isHidden:function(){return!this.boxWrapper.getBBox().width},destroy:function(){var t=this.defs;return this.box=null,this.boxWrapper=this.boxWrapper.destroy(),zt(this.gradients||{}),this.gradients=null,t&&(this.defs=t.destroy()),this.subPixelFix&&ee(A,"resize",this.subPixelFix),this.alignedObjects=null,null},createElement:function(t){var e=new this.Element;return e.init(this,t),e},draw:function(){},buildText:function(t){for(var e,i,n,r=t.element,o=this,a=o.forExport,s=Tt(t.textStr,"").toString(),l=-1!==s.indexOf("<"),h=r.childNodes,c=wt(r,"x"),u=t.styles,p=t.textWidth,d=u&&u.lineHeight,f=u&&u.textShadow,g=u&&"ellipsis"===u.textOverflow,m=h.length,y=p&&!t.added&&this.box,v=function(t){return d?ft(d):o.fontMetrics(/(px|em)$/.test(t&&t.style.fontSize)?t.style.fontSize:u&&u.fontSize||o.style.fontSize||12,t).h},_=function(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">")};m--;)r.removeChild(h[m]);l||f||g||-1!==s.indexOf(" ")?(i=/<.*style="([^"]+)".*>/,n=/<.*href="(http[^"]+)".*>/,y&&y.appendChild(r),""===(e=l?s.replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br.*?>/g):[s])[e.length-1]&&e.pop(),qt(e,(function(e,s){var l,h=0;e=e.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||"),l=e.split("|||"),qt(l,(function(e){if(""!==e||1===l.length){var d,f={},m=P.createElementNS(V,"tspan");if(i.test(e)&&wt(m,"style",d=e.match(i)[1].replace(/(;| |^)color([ :])/,"$1fill$2")),n.test(e)&&!a&&(wt(m,"onclick",'location.href="'+e.match(n)[1]+'"'),Pt(m,{cursor:"pointer"}))," "!==(e=_(e.replace(/<(.|\n)*?>/g,"")||" "))){if(m.appendChild(P.createTextNode(e)),h?f.dx=0:s&&null!==c&&(f.x=c),wt(m,f),r.appendChild(m),!h&&s&&(!j&&a&&Pt(m,{display:"block"}),wt(m,"dy",v(m))),p){for(var y,x,b,k=e.replace(/([^\^])-/g,"$1- ").split(" "),w=l.length>1||s||k.length>1&&"nowrap"!==u.whiteSpace,S=[],T=v(m),A=t.rotation,D=e,C=D.length;(w||g)&&(k.length||S.length);)t.rotation=0,b=t.getBBox(!0).width,!j&&o.forExport&&(b=o.measureSpanWidth(m.firstChild.data,t.styles)),y=b>p,void 0===x&&(x=y),g&&x?(C/=2,""===D||!y&&C<.5?k=[]:(y&&(x=!0),k=[(D=e.substring(0,D.length+(y?-1:1)*L(C)))+(p>3?"â¦":"")],m.removeChild(m.firstChild))):y&&1!==k.length?(m.removeChild(m.firstChild),S.unshift(k.pop())):(k=S,S=[],k.length&&(wt(m=P.createElementNS(V,"tspan"),{dy:T,x:c}),d&&wt(m,"style",d),r.appendChild(m)),b>p&&(p=b)),k.length&&m.appendChild(P.createTextNode(k.join(" ").replace(/- /g,"-")));x&&t.attr("title",t.textStr),t.rotation=A}h++}}}))})),y&&y.removeChild(r),f&&t.applyTextShadow&&t.applyTextShadow(f)):r.appendChild(P.createTextNode(_(s)))},getContrast:function(t){return(t=pe(t).rgba)[0]+t[1]+t[2]>384?"#000000":"#FFFFFF"},button:function(t,e,i,n,r,o,a,s,l){var h,c,u,p,d,f,g=this.label(t,e,i,l,null,null,null,null,"button"),m=0,y={x1:0,y1:0,x2:0,y2:1};return r=dt({"stroke-width":1,stroke:"#CCCCCC",fill:{linearGradient:y,stops:[[0,"#FEFEFE"],[1,"#F6F6F6"]]},r:2,padding:5,style:{color:"black"}},r),u=r.style,delete r.style,o=dt(r,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#FFF"],[1,"#ACF"]]}},o),p=o.style,delete o.style,a=dt(r,{stroke:"#68A",fill:{linearGradient:y,stops:[[0,"#9BD"],[1,"#CDF"]]}},a),d=a.style,delete a.style,s=dt(r,{style:{color:"#CCC"}},s),f=s.style,delete s.style,te(g.element,B?"mouseover":"mouseenter",(function(){3!==m&&g.attr(o).css(p)})),te(g.element,B?"mouseout":"mouseleave",(function(){3!==m&&(h=[r,o,a][m],c=[u,p,d][m],g.attr(h).css(c))})),g.setState=function(t){g.state=m=t,t?2===t?g.attr(a).css(d):3===t&&g.attr(s).css(f):g.attr(r).css(u)},g.on("click",(function(t){3!==m&&n.call(g,t)})).attr(r).css(pt({cursor:"default"},u))},crispLine:function(t,e){return t[1]===t[4]&&(t[1]=t[4]=C(t[1])-e%2/2),t[2]===t[5]&&(t[2]=t[5]=C(t[2])+e%2/2),t},path:function(t){var e={fill:at};return yt(t)?e.d=t:mt(t)&&pt(e,t),this.createElement("path").attr(e)},circle:function(t,e,i){var n=mt(t)?t:{x:t,y:e,r:i},r=this.createElement("circle");return r.xSetter=function(t){this.element.setAttribute("cx",t)},r.ySetter=function(t){this.element.setAttribute("cy",t)},r.attr(n)},arc:function(t,e,i,n,r,o){var a;return mt(t)&&(e=t.y,i=t.r,n=t.innerR,r=t.start,o=t.end,t=t.x),(a=this.symbol("arc",t||0,e||0,i||0,i||0,{innerR:n||0,start:r||0,end:o||0})).r=i,a},rect:function(t,e,i,n,r,o){r=mt(t)?t.r:r;var a=this.createElement("rect"),s=mt(t)?t:void 0===t?{}:{x:t,y:e,width:I(i,0),height:I(n,0)};return void 0!==o&&(s.strokeWidth=o,s=a.crisp(s)),r&&(s.r=r),a.rSetter=function(t){wt(this.element,{rx:t,ry:t})},a.attr(s)},setSize:function(t,e,i){var n=this.alignedObjects,r=n.length;for(this.width=t,this.height=e,this.boxWrapper[Tt(i,!0)?"animate":"attr"]({width:t,height:e});r--;)n[r].align()},g:function(t){var e=this.createElement("g");return kt(t)?e.attr({class:nt+t}):e},image:function(t,e,i,n,r){var o,a={preserveAspectRatio:at};return arguments.length>1&&pt(a,{x:e,y:i,width:n,height:r}),(o=this.createElement("image").attr(a)).element.setAttributeNS?o.element.setAttributeNS("http://www.w3.org/1999/xlink","href",t):o.element.setAttribute("hc-svg-href",t),o},symbol:function(t,e,i,n,r,o){var a,s,l,h,c=this.symbols[t],u=c&&c(C(e),C(i),n,r,o),p=/^url\((.*?)\)$/;return u?(a=this.path(u),pt(a,{symbolName:t,x:e,y:i,width:n,height:r}),o&&pt(a,o)):p.test(t)&&(h=function(t,e){t.element&&(t.attr({width:e[0],height:e[1]}),t.alignByTranslate||t.translate(C((n-e[0])/2),C((r-e[1])/2)))},s=t.match(p)[1],l=q[s]||o&&o.width&&o.height&&[o.width,o.height],(a=this.image(s).attr({x:e,y:i})).isImg=!0,l?h(a,l):(a.attr({width:0,height:0}),At("img",{onload:function(){h(a,q[s]=[this.width,this.height])},src:s}))),a},symbols:{circle:function(t,e,i,n){var r=.166*i;return[st,t+i/2,e,"C",t+i+r,e,t+i+r,e+n,t+i/2,e+n,"C",t-r,e+n,t-r,e,t+i/2,e,"Z"]},square:function(t,e,i,n){return[st,t,e,lt,t+i,e,t+i,e+n,t,e+n,"Z"]},triangle:function(t,e,i,n){return[st,t+i/2,e,lt,t+i,e+n,t,e+n,"Z"]},"triangle-down":function(t,e,i,n){return[st,t,e,lt,t+i,e,t+i/2,e+n,"Z"]},diamond:function(t,e,i,n){return[st,t+i/2,e,lt,t+i,e+n/2,t+i/2,e+n,t,e+n/2,"Z"]},arc:function(t,e,i,n,r){var o=r.start,a=r.r||i||n,s=r.end-.001,l=r.innerR,h=r.open,c=H(o),u=O(o),p=H(s),d=O(s),f=r.end-o<Y?0:1;return[st,t+a*c,e+a*u,"A",a,a,0,f,1,t+a*p,e+a*d,h?st:lt,t+l*p,e+l*d,"A",l,l,0,f,0,t+l*c,e+l*u,h?"":"Z"]},callout:function(t,e,i,n,r){var o,a=E(r&&r.r||0,i,n),s=a+6,l=r&&r.anchorX,h=r&&r.anchorY;return o=["M",t+a,e,"L",t+i-a,e,"C",t+i,e,t+i,e,t+i,e+a,"L",t+i,e+n-a,"C",t+i,e+n,t+i,e+n,t+i-a,e+n,"L",t+a,e+n,"C",t,e+n,t,e+n,t,e+n-a,"L",t,e+a,"C",t,e,t,e,t+a,e],l&&l>i&&h>e+s&&h<e+n-s?o.splice(13,3,"L",t+i,h-6,t+i+6,h,t+i,h+6,t+i,e+n-a):l&&l<0&&h>e+s&&h<e+n-s?o.splice(33,3,"L",t,h+6,t-6,h,t,h-6,t,e+a):h&&h>n&&l>t+s&&l<t+i-s?o.splice(23,3,"L",l+6,e+n,l,e+n+6,l-6,e+n,t+a,e+n):h&&h<0&&l>t+s&&l<t+i-s&&o.splice(3,3,"L",l-6,e,l,e-6,l+6,e,i-a,e),o}},clipRect:function(t,e,i,n){var r,o=nt+Z++,a=this.createElement("clipPath").attr({id:o}).add(this.defs);return(r=this.rect(t,e,i,n,0).add(a)).id=o,r.clipPath=a,r.count=0,r},text:function(t,e,i,n){var r,o=K||!j&&this.forExport,a={};return n&&!this.forExport?this.html(t,e,i):(a.x=Math.round(e||0),i&&(a.y=Math.round(i)),(t||0===t)&&(a.text=t),r=this.createElement("text").attr(a),o&&r.css({position:"absolute"}),n||(r.xSetter=function(t,e,i){var n,r,o=i.getElementsByTagName("tspan"),a=i.getAttribute(e);for(r=0;r<o.length;r++)(n=o[r]).getAttribute(e)===a&&n.setAttribute(e,t);i.setAttribute(e,t)}),r)},fontMetrics:function(t,e){var i,n;return t=t||this.style.fontSize,e&&A.getComputedStyle&&(e=e.element||e,t=(n=A.getComputedStyle(e,""))&&n.fontSize),{h:i=(t=/px/.test(t)?ft(t):/em/.test(t)?12*parseFloat(t):12)<24?t+3:C(1.2*t),b:C(.8*i),f:t}},rotCorr:function(t,e,i){var n=t;return e&&i&&(n=I(n*H(e*F),4)),{x:-t/3*O(e*F),y:n}},label:function(t,e,i,n,r,o,a,s,l){var h,c,u,p,d,f,g,m,y=this,v=y.g(l),_=y.text("",0,0,a).attr({zIndex:1}),x=0,b=3,k=0,w=0,S={};function T(){var t,e,i=_.element.style;c=(void 0===u||void 0===p||v.styles.textAlign)&&kt(_.textStr)&&_.getBBox(),v.width=(u||c.width||0)+2*b+k,v.height=(p||c.height||0)+2*b,g=b+y.fontMetrics(i&&i.fontSize,_).b,m&&(h||(t=C(-x*b)+w,e=(s?-g:0)+w,v.box=h=n?y.symbol(n,t,e,v.width,v.height,S):y.rect(t,e,v.width,v.height,0,S["stroke-width"]),h.isImg||h.attr("fill",at),h.add(v)),h.isImg||h.attr(pt({width:C(v.width),height:C(v.height)},S)),S=null)}function P(){var t,e=v.styles,i=e&&e.textAlign,n=k+b*(1-x);t=s?0:g,kt(u)&&c&&("center"===i||"right"===i)&&(n+={center:.5,right:1}[i]*(u-c.width)),n===_.x&&t===_.y||(_.attr("x",n),void 0!==t&&_.attr("y",t)),_.x=n,_.y=t}function A(t,e){h?h.attr(t,e):S[t]=e}v.onAdd=function(){_.add(v),v.attr({text:t||0===t?t:"",x:e,y:i}),h&&kt(r)&&v.attr({anchorX:r,anchorY:o})},v.widthSetter=function(t){u=t},v.heightSetter=function(t){p=t},v.paddingSetter=function(t){kt(t)&&t!==b&&(b=v.padding=t,P())},v.paddingLeftSetter=function(t){kt(t)&&t!==k&&(k=t,P())},v.alignSetter=function(t){x={left:0,center:.5,right:1}[t]},v.textSetter=function(t){void 0!==t&&_.textSetter(t),T(),P()},v["stroke-widthSetter"]=function(t,e){t&&(m=!0),w=t%2/2,A(e,t)},v.strokeSetter=v.fillSetter=v.rSetter=function(t,e){"fill"===e&&t&&(m=!0),A(e,t)},v.anchorXSetter=function(t,e){r=t,A(e,C(t)-w-d)},v.anchorYSetter=function(t,e){o=t,A(e,t-f)},v.xSetter=function(t){v.x=t,x&&(t-=x*((u||c.width)+b)),d=C(t),v.attr("translateX",d)},v.ySetter=function(t){f=v.y=C(t),v.attr("translateY",f)};var D=v.css;return pt(v,{css:function(t){if(t){var e={};t=dt(t),qt(v.textProps,(function(i){void 0!==t[i]&&(e[i]=t[i],delete t[i])})),_.css(e)}return D.call(v,t)},getBBox:function(){return{width:c.width+2*b,height:c.height+2*b,x:c.x-b,y:c.y-b}},shadow:function(t){return h&&h.shadow(t),v},destroy:function(){ee(v.element,"mouseenter"),ee(v.element,"mouseleave"),_&&(_=_.destroy()),h&&(h=h.destroy()),de.prototype.destroy.call(v),v=y=T=P=A=null}})}},t=ve,pt(de.prototype,{htmlCss:function(t){var e=this.element,i=t&&"SPAN"===e.tagName&&t.width;return i&&(delete t.width,this.textWidth=i,this.updateTransform()),t&&"ellipsis"===t.textOverflow&&(t.whiteSpace="nowrap",t.overflow="hidden"),this.styles=pt(this.styles,t),Pt(this.element,t),this},htmlGetBBox:function(){var t=this.element;return"text"===t.nodeName&&(t.style.position="absolute"),{x:t.offsetLeft,y:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}},htmlUpdateTransform:function(){if(this.added){var t=this.renderer,e=this.element,i=this.translateX||0,n=this.translateY||0,r=this.x||0,o=this.y||0,a=this.textAlign||"left",s={left:0,center:.5,right:1}[a],l=this.shadows,h=this.styles;if(Pt(e,{marginLeft:i,marginTop:n}),l&&qt(l,(function(t){Pt(t,{marginLeft:i+1,marginTop:n+1})})),this.inverted&&qt(e.childNodes,(function(i){t.invertChild(i,e)})),"SPAN"===e.tagName){var c,u,p=this.rotation,d=ft(this.textWidth),f=[p,a,e.innerHTML,this.textWidth,this.textAlign].join(",");f!==this.cTT&&(u=t.fontMetrics(e.style.fontSize).b,kt(p)&&this.setSpanRotation(p,s,u),(c=Tt(this.elemWidth,e.offsetWidth))>d&&/[ \-]/.test(e.textContent||e.innerText)&&(Pt(e,{width:d+ot,display:"block",whiteSpace:h&&h.whiteSpace||"normal"}),c=d),this.getSpanCorrection(c,u,s,p,a)),Pt(e,{left:r+(this.xCorr||0)+ot,top:o+(this.yCorr||0)+ot}),W&&(u=e.offsetHeight),this.cTT=f}}else this.alignOnAdd=!0},setSpanRotation:function(t,e,i){var n={},r=B?"-ms-transform":W?"-webkit-transform":U?"MozTransform":z?"-o-transform":"";n[r]=n.transform="rotate("+t+"deg)",n[r+(U?"Origin":"-origin")]=n.transformOrigin=100*e+"% "+i+"px",Pt(this.element,n)},getSpanCorrection:function(t,e,i){this.xCorr=-t*i,this.yCorr=-e}}),pt(ve.prototype,{html:function(t,e,i){var n=this.createElement("span"),r=n.element,o=n.renderer;return n.textSetter=function(t){t!==r.innerHTML&&delete this.bBox,r.innerHTML=this.textStr=t,n.htmlUpdateTransform()},n.xSetter=n.ySetter=n.alignSetter=n.rotationSetter=function(t,e){"align"===e&&(e="textAlign"),n[e]=t,n.htmlUpdateTransform()},n.attr({text:t,x:C(e),y:C(i)}).css({position:"absolute",fontFamily:this.style.fontFamily,fontSize:this.style.fontSize}),r.style.whiteSpace="nowrap",n.css=n.htmlCss,o.isSVG&&(n.add=function(t){var e,i,a=o.box.parentNode,s=[];if(this.parentGroup=t,t){if(!(e=t.div)){for(i=t;i;)s.push(i),i=i.parentGroup;qt(s.reverse(),(function(t){var i,n=wt(t.element,"class");n&&(n={className:n}),e=t.div=t.div||At(et,n,{position:"absolute",left:(t.translateX||0)+ot,top:(t.translateY||0)+ot},e||a),i=e.style,pt(t,{translateXSetter:function(e,n){i.left=e+ot,t[n]=e,t.doTransform=!0},translateYSetter:function(e,n){i.top=e+ot,t[n]=e,t.doTransform=!0}}),Lt(t,"visibilitySetter",(function(t,e,n,r){t.call(this,e,n,r),i[n]=e}))}))}}else e=a;return e.appendChild(r),n.added=!0,n.alignOnAdd&&n.htmlUpdateTransform(),n}),n}}),!j&&!K){ge={init:function(t,e){var i=["<",e,' filled="f" stroked="f"'],n=["position: ","absolute",";"],r=e===et;("shape"===e||r)&&n.push("left:0;top:0;width:1px;height:1px;"),n.push("visibility: ",r?it:rt),i.push(' style="',n.join(""),'"/>'),e&&(i=r||"span"===e||"img"===e?i.join(""):t.prepVML(i),this.element=At(i)),this.renderer=t},add:function(t){var e=this.renderer,i=this.element,n=e.box,r=t&&t.inverted,o=t?t.element||t:n;return r&&e.invertChild(i,o),o.appendChild(i),this.added=!0,this.alignOnAdd&&!this.deferUpdateTransform&&this.updateTransform(),this.onAdd&&this.onAdd(),this},updateTransform:de.prototype.htmlUpdateTransform,setSpanRotation:function(){var t=this.rotation,e=H(t*F),i=O(t*F);Pt(this.element,{filter:t?["progid:DXImageTransform.Microsoft.Matrix(M11=",e,", M12=",-i,", M21=",i,", M22=",e,", sizingMethod='auto expand')"].join(""):at})},getSpanCorrection:function(t,e,i,n,r){var o,a=n?H(n*F):1,s=n?O(n*F):0,l=Tt(this.elemHeight,this.element.offsetHeight),h=r&&"left"!==r;this.xCorr=a<0&&-t,this.yCorr=s<0&&-l,o=a*s<0,this.xCorr+=s*e*(o?1-i:i),this.yCorr-=a*e*(n?o?i:1-i:1),h&&(this.xCorr-=t*i*(a<0?-1:1),n&&(this.yCorr-=l*i*(s<0?-1:1)),Pt(this.element,{textAlign:r}))},pathToVML:function(t){for(var e=t.length,i=[];e--;)vt(t[e])?i[e]=C(10*t[e])-5:"Z"===t[e]?i[e]="x":(i[e]=t[e],!t.isArc||"wa"!==t[e]&&"at"!==t[e]||(i[e+5]===i[e+7]&&(i[e+7]+=t[e+7]>t[e+5]?1:-1),i[e+6]===i[e+8]&&(i[e+8]+=t[e+8]>t[e+6]?1:-1)));return i.join(" ")||"x"},clip:function(t){var e,i,n=this;return t?(bt(e=t.members,n),e.push(n),n.destroyClip=function(){bt(e,n)},i=t.getCSS(n)):(n.destroyClip&&n.destroyClip(),i={clip:N?"inherit":"rect(auto)"}),n.css(i)},css:de.prototype.htmlCss,safeRemoveChild:function(t){t.parentNode&&Bt(t)},destroy:function(){return this.destroyClip&&this.destroyClip(),de.prototype.destroy.apply(this)},on:function(t,e){return this.element["on"+t]=function(){var t=A.event;t.target=t.srcElement,e(t)},this},cutOffPath:function(t,e){var i;return 9!==(i=(t=t.split(/[ ,]/)).length)&&11!==i||(t[i-4]=t[i-2]=ft(t[i-2])-10*e),t.join(" ")},shadow:function(t,e,i){var n,r,o,a,s,l,h,c=[],u=this.element,p=this.renderer,d=u.style,f=u.path;if(f&&"string"!=typeof f.value&&(f="x"),s=f,t){for(l=Tt(t.width,3),h=(t.opacity||.15)/l,n=1;n<=3;n++)a=2*l+1-2*n,i&&(s=this.cutOffPath(f.value,a+.5)),o=['<shape isShadow="true" strokeweight="',a,'" filled="false" path="',s,'" coordsize="10 10" style="',u.style.cssText,'" />'],r=At(p.prepVML(o),null,{left:ft(d.left)+Tt(t.offsetX,1),top:ft(d.top)+Tt(t.offsetY,1)}),i&&(r.cutOff=a+1),o=['<stroke color="',t.color||"black",'" opacity="',h*n,'"/>'],At(p.prepVML(o),null,null,r),e?e.element.appendChild(r):u.parentNode.insertBefore(r,u),c.push(r);this.shadows=c}return this},updateShadows:J,setAttr:function(t,e){N?this.element[t]=e:this.element.setAttribute(t,e)},classSetter:function(t){this.element.className=t},dashstyleSetter:function(t,e,i){(i.getElementsByTagName("stroke")[0]||At(this.renderer.prepVML(["<stroke/>"]),null,null,i))[e]=t||"solid",this[e]=t},dSetter:function(t,e,i){var n,r=this.shadows;if(t=t||[],this.d=t.join&&t.join(" "),i.path=t=this.pathToVML(t),r)for(n=r.length;n--;)r[n].path=r[n].cutOff?this.cutOffPath(t,r[n].cutOff):t;this.setAttr(e,t)},fillSetter:function(t,e,i){var n=i.nodeName;"SPAN"===n?i.style.color=t:"IMG"!==n&&(i.filled=t!==at,this.setAttr("fillcolor",this.renderer.color(t,i,e,this)))},opacitySetter:J,rotationSetter:function(t,e,i){var n=i.style;this[e]=n[e]=t,n.left=-C(O(t*F)+1)+ot,n.top=C(H(t*F))+ot},strokeSetter:function(t,e,i){this.setAttr("strokecolor",this.renderer.color(t,i,e))},"stroke-widthSetter":function(t,e,i){i.stroked=!!t,this[e]=t,vt(t)&&(t+=ot),this.setAttr("strokeweight",t)},titleSetter:function(t,e){this.setAttr(e,t)},visibilitySetter:function(t,e,i){"inherit"===t&&(t=rt),this.shadows&&qt(this.shadows,(function(i){i.style[e]=t})),"DIV"===i.nodeName&&(t=t===it?"-999em":0,N||(i.style[e]=t?rt:it),e="top"),i.style[e]=t},xSetter:function(t,e,i){this[e]=t,"x"===e?e="left":"y"===e&&(e="top"),this.updateClipping?(this[e]=t,this.updateClipping()):i.style[e]=t},zIndexSetter:function(t,e,i){i.style[e]=t}},T.VMLElement=ge=Dt(de,ge),ge.prototype.ySetter=ge.prototype.widthSetter=ge.prototype.heightSetter=ge.prototype.xSetter;var _e={Element:ge,isIE8:X.indexOf("MSIE 8.0")>-1,init:function(t,e,i,n){var r,o,a;if(this.alignedObjects=[],o=(r=this.createElement(et).css(pt(this.getStyle(n),{position:"relative"}))).element,t.appendChild(r.element),this.isVML=!0,this.box=o,this.boxWrapper=r,this.cache={},this.setSize(e,i,!1),!P.namespaces.hcv){P.namespaces.add("hcv","urn:schemas-microsoft-com:vml"),a="hcv\\:fill, hcv\\:path, hcv\\:shape, hcv\\:stroke{ behavior:url(#default#VML); display: inline-block; } ";try{P.createStyleSheet().cssText=a}catch(t){P.styleSheets[0].cssText+=a}}},isHidden:function(){return!this.box.offsetWidth},clipRect:function(t,e,i,n){var r=this.createElement(),o=mt(t);return pt(r,{members:[],count:0,left:(o?t.x:t)+1,top:(o?t.y:e)+1,width:(o?t.width:i)-1,height:(o?t.height:n)-1,getCSS:function(t){var e=t.element,i=e.nodeName,n="shape"===i,r=t.inverted,o=this.top-(n?e.offsetTop:0),a=this.left,s=a+this.width,l=o+this.height,h={clip:"rect("+C(r?a:o)+"px,"+C(r?l:s)+"px,"+C(r?s:l)+"px,"+C(r?o:a)+"px)"};return!r&&N&&"DIV"===i&&pt(h,{width:s+ot,height:l+ot}),h},updateClipping:function(){qt(r.members,(function(t){t.element&&t.css(r.getCSS(t))}))}})},color:function(t,e,i,r){var o,a,s,l=this,h=/^rgba/,c=at;if(t&&t.linearGradient?s="gradient":t&&t.radialGradient&&(s="pattern"),s){var u,p,d,f,g,m,y,v,_,x,b,k,w=t.linearGradient||t.radialGradient,S="",T=t.stops,P=[],A=function(){a=['<fill colors="'+P.join(",")+'" opacity="',v,'" o:opacity2="',y,'" type="',s,'" ',S,'focus="100%" method="any" />'],At(l.prepVML(a),null,null,e)};if(b=T[0],k=T[T.length-1],b[0]>0&&T.unshift([0,b[1]]),k[0]<1&&T.push([1,k[1]]),qt(T,(function(t,e){h.test(t[1])?(o=pe(t[1]),u=o.get("rgb"),p=o.get("a")):(u=t[1],p=1),P.push(100*t[0]+"% "+u),e?(v=p,_=u):(y=p,x=u)})),"fill"===i)if("gradient"===s)d=w.x1||w[0]||0,f=w.y1||w[1]||0,g=w.x2||w[2]||0,m=w.y2||w[3]||0,S='angle="'+(90-180*D.atan((m-f)/(g-d))/Y)+'"',A();else{var C,M=w.r,L=2*M,I=2*M,E=w.cx,R=w.cy,H=e.radialReference,O=function(){H&&(C=r.getBBox(),E+=(H[0]-C.x)/C.width-.5,R+=(H[1]-C.y)/C.height-.5,L*=H[2]/C.width,I*=H[2]/C.height),S='src="'+n.global.VMLRadialGradientURL+'" size="'+L+","+I+'" origin="0.5,0.5" position="'+E+","+R+'" color2="'+x+'" ',A()};r.added?O():r.onAdd=O,c=_}else c=u}else if(h.test(t)&&"IMG"!==e.tagName)o=pe(t),a=["<",i,' opacity="',o.get("a"),'"/>'],At(this.prepVML(a),null,null,e),c=o.get("rgb");else{var F=e.getElementsByTagName(i);F.length&&(F[0].opacity=1,F[0].type="solid"),c=t}return c},prepVML:function(t){var e="display:inline-block;behavior:url(#default#VML);",i=this.isIE8;return t=t.join(""),t=i?-1===(t=t.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />')).indexOf('style="')?t.replace("/>",' style="'+e+'" />'):t.replace('style="','style="'+e):t.replace("<","<hcv:")},text:ve.prototype.html,path:function(t){var e={coordsize:"10 10"};return yt(t)?e.d=t:mt(t)&&pt(e,t),this.createElement("shape").attr(e)},circle:function(t,e,i){var n=this.symbol("circle");return mt(t)&&(i=t.r,e=t.y,t=t.x),n.isCircle=!0,n.r=i,n.attr({x:t,y:e})},g:function(t){var e;return t&&(e={className:nt+t,class:nt+t}),this.createElement(et).attr(e)},image:function(t,e,i,n,r){var o=this.createElement("img").attr({src:t});return arguments.length>1&&o.attr({x:e,y:i,width:n,height:r}),o},createElement:function(t){return"rect"===t?this.symbol(t):ve.prototype.createElement.call(this,t)},invertChild:function(t,e){var i=this,n=e.style,r="IMG"===t.tagName&&t.style;Pt(t,{flip:"x",left:ft(n.width)-(r?ft(r.top):1),top:ft(n.height)-(r?ft(r.left):1),rotation:-90}),qt(t.childNodes,(function(e){i.invertChild(e,t)}))},symbols:{arc:function(t,e,i,n,r){var o,a=r.start,s=r.end,l=r.r||i||n,h=r.innerR,c=H(a),u=O(a),p=H(s),d=O(s);return s-a==0?["x"]:(o=["wa",t-l,e-l,t+l,e+l,t+l*c,e+l*u,t+l*p,e+l*d],r.open&&!h&&o.push("e",st,t,e),o.push("at",t-h,e-h,t+h,e+h,t+h*p,e+h*d,t+h*c,e+h*u,"x","e"),o.isArc=!0,o)},circle:function(t,e,i,n,r){return r&&(i=n=2*r.r),r&&r.isCircle&&(t-=i/2,e-=n/2),["wa",t,e,t+i,e+n,t+i,e+n/2,t+i,e+n/2,"e"]},rect:function(t,e,i,n,r){return ve.prototype.symbols[kt(r)&&r.r?"callout":"square"].call(0,t,e,i,n,r)}}};T.VMLRenderer=fe=function(){this.init.apply(this,arguments)},fe.prototype=dt(ve.prototype,_e),t=fe}function xe(t,e,i,n){this.axis=t,this.pos=e,this.type=i||"",this.isNew=!0,i||n||this.addLabel()}ve.prototype.measureSpanWidth=function(t,e){var i,n=P.createElement("span"),r=P.createTextNode(t);return n.appendChild(r),Pt(n,e),this.box.appendChild(n),i=n.offsetWidth,Bt(n),i},K&&(T.CanVGRenderer=me=function(){V="http://www.w3.org/1999/xhtml"},me.prototype.symbols={},ye=function(){var t=[];function e(){var e,i=t.length;for(e=0;e<i;e++)t[e]();t=[]}return{push:function(i,n){0===t.length&&$t(n,e),t.push(i)}}}(),t=me),xe.prototype={addLabel:function(){var t,e,i=this.axis,n=i.options,r=i.chart,o=i.categories,a=i.names,s=this.pos,l=n.labels,h=i.tickPositions,c=s===h[0],u=s===h[h.length-1],p=o?Tt(o[s],a[s],s):s,d=this.label,f=h.info;i.isDatetimeAxis&&f&&(e=n.dateTimeLabelFormats[f.higherRanks[s]||f.unitName]),this.isFirst=c,this.isLast=u,t=i.labelFormatter.call({axis:i,chart:r,isFirst:c,isLast:u,dateTimeLabelFormat:e,value:i.isLog?Wt(xt(p)):p}),kt(d)?d&&d.attr({text:t}):(this.label=d=kt(t)&&l.enabled?r.renderer.text(t,0,0,l.useHTML).css(dt(l.style)).add(i.labelGroup):null,this.labelLength=d&&d.getBBox().width,this.rotation=0)},getLabelSize:function(){return this.label?this.label.getBBox()[this.axis.horiz?"height":"width"]:0},handleOverflow:function(t){var e,i,n=this.axis,r=t.x,o=n.chart.chartWidth,a=n.chart.spacing,s=Tt(n.labelLeft,E(n.pos,a[3])),l=Tt(n.labelRight,I(n.pos+n.len,o-a[1])),h=this.label,c=this.rotation,u={left:0,center:.5,right:1}[n.labelAlign],p=h.getBBox().width,d=n.slotWidth,f=u,g=1,m={};c?c<0&&r-u*p<s?i=C(r/H(c*F)-s):c>0&&r+u*p>l&&(i=C((o-r)/H(c*F))):(e=r+(1-u)*p,r-u*p<s?d=t.x+d*(1-u)-s:e>l&&(d=l-t.x+d*u,g=-1),(d=E(n.slotWidth,d))<n.slotWidth&&"center"===n.labelAlign&&(t.x+=g*(n.slotWidth-d-f*(n.slotWidth-E(p,d)))),(p>d||n.autoRotation&&h.styles.width)&&(i=d)),i&&(m.width=i,n.options.labels.style.textOverflow||(m.textOverflow="ellipsis"),h.css(m))},getPosition:function(t,e,i,n){var r=this.axis,o=r.chart,a=n&&o.oldChartHeight||o.chartHeight;return{x:t?r.translate(e+i,null,null,n)+r.transB:r.left+r.offset+(r.opposite?(n&&o.oldChartWidth||o.chartWidth)-r.right-r.left:0),y:t?a-r.bottom+r.offset-(r.opposite?r.height:0):a-r.translate(e+i,null,null,n)-r.transB}},getLabelPosition:function(t,e,i,n,r,o,a,s){var l=this.axis,h=l.transA,c=l.reversed,u=l.staggerLines,p=l.tickRotCorr||{x:0,y:0},d=Tt(r.y,p.y+(2===l.side?8:-i.getBBox().height/2));return t=t+r.x+p.x-(o&&n?o*h*(c?-1:1):0),e=e+d-(o&&!n?o*h*(c?1:-1):0),u&&(e+=a/(s||1)%u*(l.labelOffset/u)),{x:t,y:C(e)}},getMarkPath:function(t,e,i,n,r,o){return o.crispLine([st,t,e,lt,t+(r?0:-i),e+(r?i:0)],n)},render:function(t,e,i){var n,r,o,a=this.axis,s=a.options,l=a.chart.renderer,h=a.horiz,c=this.type,u=this.label,p=this.pos,d=s.labels,f=this.gridLine,g=c?c+"Grid":"grid",m=c?c+"Tick":"tick",y=s[g+"LineWidth"],v=s[g+"LineColor"],_=s[g+"LineDashStyle"],x=s[m+"Length"],b=Tt(s[m+"Width"],!c&&a.isXAxis?1:0),k=s[m+"Color"],w=s[m+"Position"],S=this.mark,T=d.step,P=!0,A=a.tickmarkOffset,D=this.getPosition(h,p,A,e),C=D.x,M=D.y,L=h&&C===a.pos+a.len||!h&&M===a.pos?-1:1;i=Tt(i,1),this.isActive=!0,y&&(n=a.getPlotLinePath(p+A,y*L,e,!0),void 0===f&&(o={stroke:v,"stroke-width":y},_&&(o.dashstyle=_),c||(o.zIndex=1),e&&(o.opacity=0),this.gridLine=f=y?l.path(n).attr(o).add(a.gridGroup):null),!e&&f&&n&&f[this.isNew?"attr":"animate"]({d:n,opacity:i})),b&&x&&("inside"===w&&(x=-x),a.opposite&&(x=-x),r=this.getMarkPath(C,M,x,b*L,h,l),S?S.animate({d:r,opacity:i}):this.mark=l.path(r).attr({stroke:k,"stroke-width":b,opacity:i}).add(a.axisGroup)),u&&!isNaN(C)&&(u.xy=D=this.getLabelPosition(C,M,u,h,d,A,t,T),this.isFirst&&!this.isLast&&!Tt(s.showFirstLabel,1)||this.isLast&&!this.isFirst&&!Tt(s.showLastLabel,1)?P=!1:!h||a.isRadial||d.step||d.rotation||e||0===i||this.handleOverflow(D),T&&t%T&&(P=!1),P&&!isNaN(D.y)?(D.opacity=i,u[this.isNew?"attr":"animate"](D),this.isNew=!1):u.attr("y",-9999))},destroy:function(){zt(this,this.axis)}},T.PlotLineOrBand=function(t,e){this.axis=t,e&&(this.options=e,this.id=e.id)},T.PlotLineOrBand.prototype={render:function(){var t,e,i,n,r,o,a=this,s=a.axis,l=s.horiz,h=a.options,c=h.label,u=a.label,p=h.width,d=h.to,f=h.from,g=kt(f)&&kt(d),m=h.value,y=h.dashStyle,v=a.svgElem,_=[],x=h.color,b=h.zIndex,k=h.events,w={},S=s.chart.renderer;if(s.isLog&&(f=_t(f),d=_t(d),m=_t(m)),p)_=s.getPlotLinePath(m,p),w={stroke:x,"stroke-width":p},y&&(w.dashstyle=y);else{if(!g)return;_=s.getPlotBandPath(f,d,h),x&&(w.fill=x),h.borderWidth&&(w.stroke=h.borderColor,w["stroke-width"]=h.borderWidth)}if(kt(b)&&(w.zIndex=b),v)_?v.animate({d:_},null,v.onGetPath):(v.hide(),v.onGetPath=function(){v.show()},u&&(a.label=u=u.destroy()));else if(_&&_.length&&(a.svgElem=v=S.path(_).attr(w).add(),k))for(e in t=function(t){v.on(t,(function(e){k[t].apply(a,[e])}))},k)t(e);return c&&kt(c.text)&&_&&_.length&&s.width>0&&s.height>0?(c=dt({align:l&&g&&"center",x:l?!g&&4:10,verticalAlign:!l&&g&&"middle",y:l?g?16:10:g?6:-4,rotation:l&&!g&&90},c),u||(w={align:c.textAlign||c.align,rotation:c.rotation},kt(b)&&(w.zIndex=b),a.label=u=S.text(c.text,0,0,c.useHTML).attr(w).css(c.style).add()),i=[_[1],_[4],g?_[6]:_[1]],n=[_[2],_[5],g?_[7]:_[2]],r=Ft(i),o=Ft(n),u.align(c,!1,{x:r,y:o,width:Xt(i)-r,height:Xt(n)-o}),u.show()):u&&u.hide(),a},destroy:function(){bt(this.axis.plotLinesAndBands,this),delete this.axis,zt(this)}},s={getPlotBandPath:function(t,e){var i=this.getPlotLinePath(e,null,null,!0),n=this.getPlotLinePath(t,null,null,!0);return n&&i&&n.toString()!==i.toString()?n.push(i[4],i[5],i[1],i[2]):n=null,n},addPlotBand:function(t){return this.addPlotBandOrLine(t,"plotBands")},addPlotLine:function(t){return this.addPlotBandOrLine(t,"plotLines")},addPlotBandOrLine:function(t,e){var i=new T.PlotLineOrBand(this,t).render(),n=this.userOptions;return i&&(e&&(n[e]=n[e]||[],n[e].push(t)),this.plotLinesAndBands.push(i)),i},removePlotBandOrLine:function(t){for(var e=this.plotLinesAndBands,i=this.options,n=this.userOptions,r=e.length;r--;)e[r].id===t&&e[r].destroy();qt([i.plotLines||[],n.plotLines||[],i.plotBands||[],n.plotBands||[]],(function(e){for(r=e.length;r--;)e[r].id===t&&bt(e,e[r])}))}};var be=T.Axis=function(){this.init.apply(this,arguments)};be.prototype={defaultOptions:{dateTimeLabelFormats:{millisecond:"%H:%M:%S.%L",second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:!1,gridLineColor:"#D8D8D8",labels:{enabled:!0,style:{color:"#606060",cursor:"default",fontSize:"11px"},x:0,y:15},lineColor:"#C0D0E0",lineWidth:1,minPadding:.01,maxPadding:.01,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",startOfWeek:1,startOnTick:!1,tickColor:"#C0D0E0",tickLength:10,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",title:{align:"middle",style:{color:"#707070"}},type:"linear"},defaultYAxisOptions:{endOnTick:!0,gridLineWidth:1,tickPixelInterval:72,showLastLabel:!0,labels:{x:-8,y:3},lineWidth:0,maxPadding:.05,minPadding:.05,startOnTick:!0,title:{rotation:270,text:"Values"},stackLabels:{enabled:!1,formatter:function(){return T.numberFormat(this.total,-1)},style:dt(ae.line.dataLabels.style,{color:"#000000"})}},defaultLeftAxisOptions:{labels:{x:-15,y:null},title:{rotation:270}},defaultRightAxisOptions:{labels:{x:15,y:null},title:{rotation:90}},defaultBottomAxisOptions:{labels:{autoRotation:[-45],x:0,y:null},title:{rotation:0}},defaultTopAxisOptions:{labels:{autoRotation:[-45],x:0,y:-15},title:{rotation:0}},init:function(t,e){var i=e.isX;this.chart=t,this.horiz=t.inverted?!i:i,this.isXAxis=i,this.coll=i?"xAxis":"yAxis",this.opposite=e.opposite,this.side=e.side||(this.horiz?this.opposite?0:2:this.opposite?1:3),this.setOptions(e);var n=this.options,r=n.type,o="datetime"===r;this.labelFormatter=n.labels.formatter||this.defaultLabelFormatter,this.userOptions=e,this.minPixelPadding=0,this.reversed=n.reversed,this.zoomEnabled=!1!==n.zoomEnabled,this.categories=n.categories||"category"===r,this.names=this.names||[],this.isLog="logarithmic"===r,this.isDatetimeAxis=o,this.isLinked=kt(n.linkedTo),this.ticks={},this.labelEdge=[],this.minorTicks={},this.plotLinesAndBands=[],this.alternateBands={},this.len=0,this.minRange=this.userMinRange=n.minRange||n.maxZoom,this.range=n.range,this.offset=n.offset||0,this.stacks={},this.oldStacks={},this.stacksTouched=0,this.max=null,this.min=null,this.crosshair=Tt(n.crosshair,St(t.options.tooltip.crosshairs)[i?0:1],!1);var a,s=this.options.events;for(a in-1===Kt(this,t.axes)&&(i&&!this.isColorAxis?t.axes.splice(t.xAxis.length,0,this):t.axes.push(this),t[this.coll].push(this)),this.series=this.series||[],t.inverted&&i&&void 0===this.reversed&&(this.reversed=!0),this.removePlotBand=this.removePlotBandOrLine,this.removePlotLine=this.removePlotBandOrLine,s)te(this,a,s[a]);this.isLog&&(this.val2lin=_t,this.lin2val=xt)},setOptions:function(t){this.options=dt(this.defaultOptions,this.isXAxis?{}:this.defaultYAxisOptions,[this.defaultTopAxisOptions,this.defaultRightAxisOptions,this.defaultBottomAxisOptions,this.defaultLeftAxisOptions][this.side],dt(n[this.coll],t))},defaultLabelFormatter:function(){var t,e,i=this.axis,o=this.value,a=i.categories,s=this.dateTimeLabelFormat,l=n.lang.numericSymbols,h=l&&l.length,c=i.options.labels.format,u=i.isLog?o:i.tickInterval;if(c)e=Rt(c,this);else if(a)e=o;else if(s)e=r(s,o);else if(h&&u>=1e3)for(;h--&&void 0===e;)u>=(t=Math.pow(1e3,h+1))&&10*o%t==0&&null!==l[h]&&(e=T.numberFormat(o/t,-1)+l[h]);return void 0===e&&(e=R(o)>=1e4?T.numberFormat(o,-1):T.numberFormat(o,-1,void 0,"")),e},getSeriesExtremes:function(){var t=this,e=t.chart;t.hasVisibleSeries=!1,t.dataMin=t.dataMax=t.ignoreMinPadding=t.ignoreMaxPadding=null,t.buildStacks&&t.buildStacks(),qt(t.series,(function(i){if(i.visible||!e.options.chart.ignoreHiddenSeries){var n,r,o,a=i.options.threshold;t.hasVisibleSeries=!0,t.isLog&&a<=0&&(a=null),t.isXAxis?(n=i.xData).length&&(t.dataMin=E(Tt(t.dataMin,n[0]),Ft(n)),t.dataMax=I(Tt(t.dataMax,n[0]),Xt(n))):(i.getExtremes(),o=i.dataMax,kt(r=i.dataMin)&&kt(o)&&(t.dataMin=E(Tt(t.dataMin,r),r),t.dataMax=I(Tt(t.dataMax,o),o)),kt(a)&&(t.dataMin>=a?(t.dataMin=a,t.ignoreMinPadding=!0):t.dataMax<a&&(t.dataMax=a,t.ignoreMaxPadding=!0)))}}))},translate:function(t,e,i,n,r,o){var a,s=this.linkedParent||this,l=1,h=0,c=n?s.oldTransA:s.transA,u=n?s.oldMin:s.min,p=s.minPixelPadding,d=(s.doPostTranslate||s.isLog&&r)&&s.lin2val;return c||(c=s.transA),i&&(l*=-1,h=s.len),s.reversed&&(h-=(l*=-1)*(s.sector||s.len)),e?(t=t*l+h,a=(t-=p)/c+u,d&&(a=s.lin2val(a))):(d&&(t=s.val2lin(t)),"between"===o&&(o=.5),a=l*(t-u)*c+h+l*p+(vt(o)?c*o*s.pointRange:0)),a},toPixels:function(t,e){return this.translate(t,!1,!this.horiz,null,!0)+(e?0:this.pos)},toValue:function(t,e){return this.translate(t-(e?0:this.pos),!0,!this.horiz,null,!0)},getPlotLinePath:function(t,e,i,n,r){var o,a,s,l,h,c=this.chart,u=this.left,p=this.top,d=i&&c.oldChartHeight||c.chartHeight,f=i&&c.oldChartWidth||c.chartWidth,g=this.transB,m=function(t,e,i){return(t<e||t>i)&&(n?t=E(I(e,t),i):h=!0),t};return r=Tt(r,this.translate(t,null,null,i)),o=s=C(r+g),a=l=C(d-r-g),isNaN(r)?h=!0:this.horiz?(a=p,l=d-this.bottom,o=s=m(o,u,u+this.width)):(o=u,s=f-this.right,a=l=m(a,p,p+this.height)),h&&!n?null:c.renderer.crispLine([st,o,a,lt,s,l],e||1)},getLinearTickPositions:function(t,e,i){var n,r,o=Wt(M(e/t)*t),a=Wt(L(i/t)*t),s=[];if(e===i&&vt(e))return[e];for(n=o;n<=a&&(s.push(n),(n=Wt(n+t))!==r);)r=n;return s},getMinorTickPositions:function(){var t,e,i,n=this.options,r=this.tickPositions,o=this.minorTickInterval,a=[],s=this.pointRangePadding||0,l=this.min-s,h=this.max+s,c=h-l;if(c&&c/o<this.len/3)if(this.isLog)for(i=r.length,e=1;e<i;e++)a=a.concat(this.getLogTickPositions(o,r[e-1],r[e],!0));else if(this.isDatetimeAxis&&"auto"===n.minorTickInterval)a=a.concat(this.getTimeTicks(this.normalizeTimeTickInterval(o),l,h,n.startOfWeek));else for(t=l+(r[0]-l)%o;t<=h;t+=o)a.push(t);return 0!==a.length&&this.trimTicks(a,n.startOnTick,n.endOnTick),a},adjustForMinRange:function(){var t,e,i,n,r,o,a,s,l=this.options,h=this.min,c=this.max,u=this.dataMax-this.dataMin>=this.minRange;if(this.isXAxis&&void 0===this.minRange&&!this.isLog&&(kt(l.min)||kt(l.max)?this.minRange=null:(qt(this.series,(function(t){for(r=t.xData,o=t.xIncrement?1:r.length-1,i=o;i>0;i--)n=r[i]-r[i-1],(void 0===e||n<e)&&(e=n)})),this.minRange=E(5*e,this.dataMax-this.dataMin))),c-h<this.minRange){var p=this.minRange;a=[h-(t=(p-c+h)/2),Tt(l.min,h-t)],u&&(a[2]=this.dataMin),s=[(h=Xt(a))+p,Tt(l.max,h+p)],u&&(s[2]=this.dataMax),(c=Ft(s))-h<p&&(a[0]=c-p,a[1]=Tt(l.min,c-p),h=Xt(a))}this.min=h,this.max=c},setAxisTranslation:function(t){var e,i,n=this,r=n.max-n.min,o=n.axisPointRange||0,a=0,s=0,l=n.linkedParent,h=!!n.categories,c=n.transA,u=n.isXAxis;(u||h||o)&&(l?(a=l.minPointOffset,s=l.pointRangePadding):qt(n.series,(function(t){var i=h?1:u?t.pointRange:n.axisPointRange||0,l=t.options.pointPlacement,c=t.closestPointRange;i>r&&(i=0),o=I(o,i),n.single||(a=I(a,gt(l)?0:i/2),s=I(s,"on"===l?0:i)),!t.noSharedTooltip&&kt(c)&&(e=kt(e)?E(e,c):c)})),i=n.ordinalSlope&&e?n.ordinalSlope/e:1,n.minPointOffset=a*=i,n.pointRangePadding=s*=i,n.pointRange=E(o,r),u&&(n.closestPointRange=e)),t&&(n.oldTransA=c),n.translationSlope=n.transA=c=n.len/(r+s||1),n.transB=n.horiz?n.left:n.bottom,n.minPixelPadding=c*a},minFromRange:function(){return this.max-this.range},setTickInterval:function(t){var e,i,n,r=this,o=r.chart,a=r.options,s=r.isLog,l=r.isDatetimeAxis,h=r.isXAxis,c=r.isLinked,u=a.maxPadding,p=a.minPadding,d=a.tickInterval,f=a.tickPixelInterval,g=r.categories;l||g||c||this.getTickAmount(),c?(r.linkedParent=o[r.coll][a.linkedTo],i=r.linkedParent.getExtremes(),r.min=Tt(i.min,i.dataMin),r.max=Tt(i.max,i.dataMax),a.type!==r.linkedParent.options.type&&Nt(11,1)):(r.min=Tt(r.userMin,a.min,r.dataMin),r.max=Tt(r.userMax,a.max,r.dataMax)),s&&(!t&&E(r.min,Tt(r.dataMin,r.min))<=0&&Nt(10,1),r.min=Wt(_t(r.min),15),r.max=Wt(_t(r.max),15)),r.range&&kt(r.max)&&(r.userMin=r.min=I(r.min,r.minFromRange()),r.userMax=r.max,r.range=null),r.beforePadding&&r.beforePadding(),r.adjustForMinRange(),g||r.axisPointRange||r.usePercentage||c||!kt(r.min)||!kt(r.max)||(e=r.max-r.min)&&(kt(a.min)||kt(r.userMin)||!p||!(r.dataMin<0)&&r.ignoreMinPadding||(r.min-=e*p),kt(a.max)||kt(r.userMax)||!u||!(r.dataMax>0)&&r.ignoreMaxPadding||(r.max+=e*u)),vt(a.floor)&&(r.min=I(r.min,a.floor)),vt(a.ceiling)&&(r.max=E(r.max,a.ceiling)),r.min===r.max||void 0===r.min||void 0===r.max?r.tickInterval=1:c&&!d&&f===r.linkedParent.options.tickPixelInterval?r.tickInterval=d=r.linkedParent.tickInterval:r.tickInterval=Tt(d,this.tickAmount?(r.max-r.min)/I(this.tickAmount-1,1):void 0,g?1:(r.max-r.min)*f/I(r.len,f)),h&&!t&&qt(r.series,(function(t){t.processData(r.min!==r.oldMin||r.max!==r.oldMax)})),r.setAxisTranslation(!0),r.beforeSetTickPositions&&r.beforeSetTickPositions(),r.postProcessTickInterval&&(r.tickInterval=r.postProcessTickInterval(r.tickInterval)),r.pointRange&&(r.tickInterval=I(r.pointRange,r.tickInterval)),n=Tt(a.minTickInterval,r.isDatetimeAxis&&r.closestPointRange),!d&&r.tickInterval<n&&(r.tickInterval=n),l||s||d||(r.tickInterval=Ot(r.tickInterval,null,Ht(r.tickInterval),Tt(a.allowDecimals,!(r.tickInterval>.5&&r.tickInterval<5&&r.max>1e3&&r.max<9999)),!!this.tickAmount)),!this.tickAmount&&this.len&&(r.tickInterval=r.unsquish()),this.setTickPositions()},setTickPositions:function(){var t,e,i=this.options,n=i.tickPositions,r=i.tickPositioner,o=i.startOnTick,a=i.endOnTick;this.tickmarkOffset=this.categories&&"between"===i.tickmarkPlacement&&1===this.tickInterval?.5:0,this.minorTickInterval="auto"===i.minorTickInterval&&this.tickInterval?this.tickInterval/5:i.minorTickInterval,this.tickPositions=t=n&&n.slice(),t||((t=this.isDatetimeAxis?this.getTimeTicks(this.normalizeTimeTickInterval(this.tickInterval,i.units),this.min,this.max,i.startOfWeek,this.ordinalPositions,this.closestPointRange,!0):this.isLog?this.getLogTickPositions(this.tickInterval,this.min,this.max):this.getLinearTickPositions(this.tickInterval,this.min,this.max)).length>this.len&&(t=[t[0],t.pop()]),this.tickPositions=t,r&&(r=r.apply(this,[this.min,this.max]))&&(this.tickPositions=t=r)),this.isLinked||(this.trimTicks(t,o,a),this.min===this.max&&kt(this.min)&&!this.tickAmount&&(e=!0,this.min-=.5,this.max+=.5),this.single=e,n||r||this.adjustTickAmount())},trimTicks:function(t,e,i){var n=t[0],r=t[t.length-1],o=this.minPointOffset||0;e?this.min=n:this.min-o>n&&t.shift(),i?this.max=r:this.max+o<r&&t.pop(),0===t.length&&kt(n)&&t.push((r+n)/2)},getTickAmount:function(){var t,e={},i=this.options,n=i.tickAmount,r=i.tickPixelInterval;!kt(i.tickInterval)&&this.len<r&&!this.isRadial&&!this.isLog&&i.startOnTick&&i.endOnTick&&(n=2),n||!1===this.chart.options.chart.alignTicks||!1===i.alignTicks||(qt(this.chart[this.coll],(function(i){var n=i.options,r=i.horiz,o=[r?n.left:n.top,r?n.width:n.height,n.pane].join(",");e[o]?i.series.length&&(t=!0):e[o]=1})),t&&(n=L(this.len/r)+1)),n<4&&(this.finalTickAmt=n,n=5),this.tickAmount=n},adjustTickAmount:function(){var t,e,i=this.tickInterval,n=this.tickPositions,r=this.tickAmount,o=this.finalTickAmt,a=n&&n.length;if(a<r){for(;n.length<r;)n.push(Wt(n[n.length-1]+i));this.transA*=(a-1)/(r-1),this.max=n[n.length-1]}else a>r&&(this.tickInterval*=2,this.setTickPositions());if(kt(o)){for(t=e=n.length;t--;)(3===o&&t%2==1||o<=2&&t>0&&t<e-1)&&n.splice(t,1);this.finalTickAmt=void 0}},setScale:function(){var t,e;this.oldMin=this.min,this.oldMax=this.max,this.oldAxisLength=this.len,this.setAxisSize(),e=this.len!==this.oldAxisLength,qt(this.series,(function(e){(e.isDirtyData||e.isDirty||e.xAxis.isDirty)&&(t=!0)})),e||t||this.isLinked||this.forceRedraw||this.userMin!==this.oldUserMin||this.userMax!==this.oldUserMax?(this.resetStacks&&this.resetStacks(),this.forceRedraw=!1,this.getSeriesExtremes(),this.setTickInterval(),this.oldUserMin=this.userMin,this.oldUserMax=this.userMax,this.isDirty||(this.isDirty=e||this.min!==this.oldMin||this.max!==this.oldMax)):this.cleanStacks&&this.cleanStacks()},setExtremes:function(t,e,i,n,r){var o=this,a=o.chart;i=Tt(i,!0),qt(o.series,(function(t){delete t.kdTree})),r=pt(r,{min:t,max:e}),ie(o,"setExtremes",r,(function(){o.userMin=t,o.userMax=e,o.eventArgs=r,i&&a.redraw(n)}))},zoom:function(t,e){var i=this.dataMin,n=this.dataMax,r=this.options,o=E(i,Tt(r.min,i)),a=I(n,Tt(r.max,n));return this.allowZoomOutside||(kt(i)&&t<=o&&(t=o),kt(n)&&e>=a&&(e=a)),this.displayBtn=void 0!==t||void 0!==e,this.setExtremes(t,e,!1,void 0,{trigger:"zoom"}),!0},setAxisSize:function(){var t=this.chart,e=this.options,i=e.offsetLeft||0,n=e.offsetRight||0,r=this.horiz,o=Tt(e.width,t.plotWidth-i+n),a=Tt(e.height,t.plotHeight),s=Tt(e.top,t.plotTop),l=Tt(e.left,t.plotLeft+i),h=/%$/;h.test(a)&&(a=parseFloat(a)/100*t.plotHeight),h.test(s)&&(s=parseFloat(s)/100*t.plotHeight+t.plotTop),this.left=l,this.top=s,this.width=o,this.height=a,this.bottom=t.chartHeight-a-s,this.right=t.chartWidth-o-l,this.len=I(r?o:a,0),this.pos=r?l:s},getExtremes:function(){var t=this.isLog;return{min:t?Wt(xt(this.min)):this.min,max:t?Wt(xt(this.max)):this.max,dataMin:this.dataMin,dataMax:this.dataMax,userMin:this.userMin,userMax:this.userMax}},getThreshold:function(t){var e=this.isLog,i=e?xt(this.min):this.min,n=e?xt(this.max):this.max;return null===t?t=n<0?n:i:i>t?t=i:n<t&&(t=n),this.translate(t,0,1,0,1)},autoLabelAlign:function(t){var e=(Tt(t,0)-90*this.side+720)%360;return e>15&&e<165?"right":e>195&&e<345?"left":"center"},unsquish:function(){var t,e,i,n=this.chart,r=this.ticks,o=this.options.labels,a=this.horiz,s=this.tickInterval,l=s,h=this.len/(((this.categories?1:0)+this.max-this.min)/s),c=o.rotation,u=n.renderer.fontMetrics(o.style.fontSize,r[0]&&r[0].label),p=Number.MAX_VALUE,d=function(t){var e=t/(h||1);return(e=e>1?L(e):1)*s};return a?(i=kt(c)?[c]:h<Tt(o.autoRotationLimit,80)&&!o.staggerLines&&!o.step&&o.autoRotation)&&qt(i,(function(i){var n;(i===c||i&&i>=-90&&i<=90)&&(n=(e=d(R(u.h/O(F*i))))+R(i/360))<p&&(p=n,t=i,l=e)})):o.step||(l=d(u.h)),this.autoRotation=i,this.labelRotation=t,l},renderUnsquish:function(){var t,e,i,n,r=this.chart,o=r.renderer,a=this.tickPositions,s=this.ticks,l=this.options.labels,h=this.horiz,c=r.margin,u=this.categories?a.length:a.length-1,p=this.slotWidth=h&&!l.step&&!l.rotation&&(this.staggerLines||1)*r.plotWidth/u||!h&&(c[3]&&c[3]-r.spacing[3]||.33*r.chartWidth),d=I(1,C(p-2*(l.padding||5))),f={},g=o.fontMetrics(l.style.fontSize,s[0]&&s[0].label),m=l.style.textOverflow,y=0;if(gt(l.rotation)||(f.rotation=l.rotation||0),this.autoRotation)qt(a,(function(t){(t=s[t])&&t.labelLength>y&&(y=t.labelLength)})),y>d&&y>g.h?f.rotation=this.labelRotation:this.labelRotation=0;else if(p&&(t={width:d+ot},!m))for(t.textOverflow="clip",i=a.length;!h&&i--;)n=a[i],(e=s[n].label)&&("ellipsis"===e.styles.textOverflow&&e.css({textOverflow:"clip"}),e.getBBox().height>this.len/a.length-(g.h-g.f)&&(e.specCss={textOverflow:"ellipsis"}));f.rotation&&(t={width:(y>.5*r.chartHeight?.33*r.chartHeight:r.chartHeight)+ot},m||(t.textOverflow="ellipsis")),this.labelAlign=f.align=l.align||this.autoLabelAlign(this.labelRotation),qt(a,(function(e){var i=s[e],n=i&&i.label;n&&(t&&n.css(dt(t,n.specCss)),delete n.specCss,n.attr(f),i.rotation=f.rotation)})),this.tickRotCorr=o.rotCorr(g.b,this.labelRotation||0,2===this.side)},hasData:function(){return this.hasVisibleSeries||kt(this.min)&&kt(this.max)&&!!this.tickPositions},getOffset:function(){var t,e,i,n,r,o,a,s=this,l=s.chart,h=l.renderer,c=s.options,u=s.tickPositions,p=s.ticks,d=s.horiz,f=s.side,g=l.inverted?[1,0,3,2][f]:f,m=0,y=0,v=c.title,_=c.labels,x=0,b=l.axisOffset,k=l.clipOffset,w=[-1,1,1,-1][f];if(t=s.hasData(),s.showAxis=e=t||Tt(c.showEmpty,!0),s.staggerLines=s.horiz&&_.staggerLines,s.axisGroup||(s.gridGroup=h.g("grid").attr({zIndex:c.gridZIndex||1}).add(),s.axisGroup=h.g("axis").attr({zIndex:c.zIndex||2}).add(),s.labelGroup=h.g("axis-labels").attr({zIndex:_.zIndex||7}).addClass(nt+s.coll.toLowerCase()+"-labels").add()),t||s.isLinked)qt(u,(function(t){p[t]?p[t].addLabel():p[t]=new xe(s,t)})),s.renderUnsquish(),qt(u,(function(t){0!==f&&2!==f&&{1:"left",3:"right"}[f]!==s.labelAlign||(x=I(p[t].getLabelSize(),x))})),s.staggerLines&&(x*=s.staggerLines,s.labelOffset=x);else for(o in p)p[o].destroy(),delete p[o];v&&v.text&&!1!==v.enabled&&(s.axisTitle||(s.axisTitle=h.text(v.text,0,0,v.useHTML).attr({zIndex:7,rotation:v.rotation||0,align:v.textAlign||{low:"left",middle:"center",high:"right"}[v.align]}).addClass(nt+this.coll.toLowerCase()+"-title").css(v.style).add(s.axisGroup),s.axisTitle.isNew=!0),e&&(m=s.axisTitle.getBBox()[d?"height":"width"],y=kt(i=v.offset)?0:Tt(v.margin,d?5:10)),s.axisTitle[e?"show":"hide"]()),s.offset=w*Tt(c.offset,b[f]),s.tickRotCorr=s.tickRotCorr||{x:0,y:0},a=2===f?s.tickRotCorr.y:0,n=x+y+(x&&w*(d?Tt(_.y,s.tickRotCorr.y+8):_.x)-a),s.axisTitleMargin=Tt(i,n),b[f]=I(b[f],s.axisTitleMargin+m+w*s.offset,n),r=c.offset?0:2*M(c.lineWidth/2),k[g]=I(k[g],r)},getLinePath:function(t){var e=this.chart,i=this.opposite,n=this.offset,r=this.horiz,o=this.left+(i?this.width:0)+n,a=e.chartHeight-this.bottom-(i?this.height:0)+n;return i&&(t*=-1),e.renderer.crispLine([st,r?this.left:o,r?a:this.top,lt,r?e.chartWidth-this.right:o,r?a:e.chartHeight-this.bottom],t)},getTitlePosition:function(){var t=this.horiz,e=this.left,i=this.top,n=this.len,r=this.options.title,o=t?e:i,a=this.opposite,s=this.offset,l=r.x||0,h=r.y||0,c=ft(r.style.fontSize||12),u={low:o+(t?0:n),middle:o+n/2,high:o+(t?n:0)}[r.align],p=(t?i+this.height:e)+(t?1:-1)*(a?-1:1)*this.axisTitleMargin+(2===this.side?c:0);return{x:t?u+l:p+(a?this.width:0)+s+l,y:t?p+h-(a?this.height:0)+s:u+h}},render:function(){var t,e,i,n=this,r=n.chart,o=r.renderer,a=n.options,s=n.isLog,l=n.isLinked,h=n.tickPositions,c=n.axisTitle,u=n.ticks,p=n.minorTicks,d=n.alternateBands,f=a.stackLabels,g=a.alternateGridColor,m=n.tickmarkOffset,y=a.lineWidth,v=r.hasRendered&&kt(n.oldMin)&&!isNaN(n.oldMin),_=n.showAxis,x=o.globalAnimation;n.labelEdge.length=0,n.overlap=!1,qt([u,p,d],(function(t){var e;for(e in t)t[e].isActive=!1})),(n.hasData()||l)&&(n.minorTickInterval&&!n.categories&&qt(n.getMinorTickPositions(),(function(t){p[t]||(p[t]=new xe(n,t,"minor")),v&&p[t].isNew&&p[t].render(null,!0),p[t].render(null,!1,1)})),h.length&&(qt(h,(function(t,e){(!l||t>=n.min&&t<=n.max)&&(u[t]||(u[t]=new xe(n,t)),v&&u[t].isNew&&u[t].render(e,!0,.1),u[t].render(e))})),m&&(0===n.min||n.single)&&(u[-1]||(u[-1]=new xe(n,-1,null,!0)),u[-1].render(-1))),g&&qt(h,(function(t,r){r%2==0&&t<n.max&&(d[t]||(d[t]=new T.PlotLineOrBand(n)),e=t+m,i=void 0!==h[r+1]?h[r+1]+m:n.max,d[t].options={from:s?xt(e):e,to:s?xt(i):i,color:g},d[t].render(),d[t].isActive=!0)})),n._addedPlotLB||(qt((a.plotLines||[]).concat(a.plotBands||[]),(function(t){n.addPlotBandOrLine(t)})),n._addedPlotLB=!0)),qt([u,p,d],(function(t){var e,i,n=[],o=x?x.duration||500:0,a=function(){for(i=n.length;i--;)t[n[i]]&&!t[n[i]].isActive&&(t[n[i]].destroy(),delete t[n[i]])};for(e in t)t[e].isActive||(t[e].render(e,!1,0),t[e].isActive=!1,n.push(e));t!==d&&r.hasRendered&&o?o&&setTimeout(a,o):a()})),y&&(t=n.getLinePath(y),n.axisLine?n.axisLine.animate({d:t}):n.axisLine=o.path(t).attr({stroke:a.lineColor,"stroke-width":y,zIndex:7}).add(n.axisGroup),n.axisLine[_?"show":"hide"]()),c&&_&&(c[c.isNew?"attr":"animate"](n.getTitlePosition()),c.isNew=!1),f&&f.enabled&&n.renderStackTotals(),n.isDirty=!1},redraw:function(){this.render(),qt(this.plotLinesAndBands,(function(t){t.render()})),qt(this.series,(function(t){t.isDirty=!0}))},destroy:function(t){var e,i,n=this,r=n.stacks,o=n.plotLinesAndBands;for(e in t||ee(n),r)zt(r[e]),r[e]=null;for(qt([n.ticks,n.minorTicks,n.alternateBands],(function(t){zt(t)})),i=o.length;i--;)o[i].destroy();qt(["stackTotalGroup","axisLine","axisTitle","axisGroup","cross","gridGroup","labelGroup"],(function(t){n[t]&&(n[t]=n[t].destroy())})),this.cross&&this.cross.destroy()},drawCrosshair:function(t,e){var i,n,r,o,a=this.crosshair,s=a.animation;if(!this.crosshair||!1===(kt(e)||!Tt(this.crosshair.snap,!0))||e&&e.series&&e.series[this.coll]!==this)this.hideCrosshair();else{if(Tt(a.snap,!0)?kt(e)&&(n=this.isXAxis?e.plotX:this.len-e.plotY):n=this.horiz?t.chartX-this.pos:this.len-t.chartY+this.pos,null===(i=this.isRadial?this.getPlotLinePath(this.isXAxis?e.x:Tt(e.stackY,e.y))||null:this.getPlotLinePath(null,null,null,null,n)||null))return void this.hideCrosshair();this.cross?this.cross.attr({visibility:rt})[s?"animate":"attr"]({d:i},s):(o=this.categories&&!this.isRadial,r={"stroke-width":a.width||(o?this.transA:1),stroke:a.color||(o?"rgba(155,200,255,0.2)":"#C0C0C0"),zIndex:a.zIndex||2},a.dashStyle&&(r.dashstyle=a.dashStyle),this.cross=this.chart.renderer.path(i).attr(r).add())}},hideCrosshair:function(){this.cross&&this.cross.hide()}},pt(be.prototype,s),be.prototype.getTimeTicks=function(t,e,i,r){var o,s,T=[],P={},A=n.global.useUTC,D=new l(e-It(e)),C=t.unitRange,L=t.count;if(kt(e)){D[v](C>=a.second?0:L*M(D.getMilliseconds()/L)),C>=a.second&&D[_](C>=a.minute?0:L*M(D.getSeconds()/L)),C>=a.minute&&D[x](C>=a.hour?0:L*M(D[p]()/L)),C>=a.hour&&D[b](C>=a.day?0:L*M(D[d]()/L)),C>=a.day&&D[k](C>=a.month?1:L*M(D[g]()/L)),C>=a.month&&(D[w](C>=a.year?0:L*M(D[m]()/L)),s=D[y]()),C>=a.year&&(s-=s%L,D[S](s)),C===a.week&&D[k](D[g]()-D[f]()+Tt(r,1)),o=1,(c||u)&&(D=D.getTime(),D=new l(D+It(D))),s=D[y]();for(var I=D.getTime(),E=D[m](),R=D[g](),H=(a.day+(A?It(D):60*D.getTimezoneOffset()*1e3))%a.day;I<i;)T.push(I),C===a.year?I=h(s+o*L,0):C===a.month?I=h(s,E+o*L):A||C!==a.day&&C!==a.week?I+=C*L:I=h(s,E,R+o*L*(C===a.day?1:7)),o++;T.push(I),qt(Zt(T,(function(t){return C<=a.hour&&t%a.day===H})),(function(t){P[t]="day"}))}return T.info=pt(t,{higherRanks:P,totalRange:C*L}),T},be.prototype.normalizeTimeTickInterval=function(t,e){var i,n=e||[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1,2]],["week",[1,2]],["month",[1,2,3,4,6]],["year",null]],r=n[n.length-1],o=a[r[0]],s=r[1];for(i=0;i<n.length;i++){if(r=n[i],o=a[r[0]],s=r[1],n[i+1])if(t<=(o*s[s.length-1]+a[n[i+1][0]])/2)break}return o===a.year&&t<5*o&&(s=[1,2,5]),{unitRange:o,count:Ot(t/o,s,"year"===r[0]?I(Ht(t/o),1):1),unitName:r[0]}},be.prototype.getLogTickPositions=function(t,e,i,n){var r=this.options,o=this.len,a=[];if(n||(this._minorAutoInterval=null),t>=.5)t=C(t),a=this.getLinearTickPositions(t,e,i);else if(t>=.08){var s,l,h,c,u,p,d;for(s=t>.3?[1,2,4]:t>.15?[1,2,4,6,8]:[1,2,3,4,5,6,7,8,9],l=M(e);l<i+1&&!d;l++)for(c=s.length,h=0;h<c&&!d;h++)(u=_t(xt(l)*s[h]))>e&&(!n||p<=i)&&void 0!==p&&a.push(p),p>i&&(d=!0),p=u}else{var f=xt(e),g=xt(i),m=r[n?"minorTickInterval":"tickInterval"],y="auto"===m?null:m,v=r.tickPixelInterval/(n?5:1),_=n?o/this.tickPositions.length:o;t=Ot(t=Tt(y,this._minorAutoInterval,(g-f)*v/(_||1)),null,Ht(t)),a=Qt(this.getLinearTickPositions(t,f,g),_t),n||(this._minorAutoInterval=t/5)}return n||(this.tickInterval=t),a};var ke,we=T.Tooltip=function(){this.init.apply(this,arguments)};we.prototype={init:function(t,e){var i=e.borderWidth,n=e.style,r=ft(n.padding);this.chart=t,this.options=e,this.crosshairs=[],this.now={x:0,y:0},this.isHidden=!0,this.label=t.renderer.label("",0,0,e.shape||"callout",null,null,e.useHTML,null,"tooltip").attr({padding:r,fill:e.backgroundColor,"stroke-width":i,r:e.borderRadius,zIndex:8}).css(n).css({padding:0}).add().attr({y:-9999}),K||this.label.shadow(e.shadow),this.shared=e.shared},destroy:function(){this.label&&(this.label=this.label.destroy()),clearTimeout(this.hideTimer),clearTimeout(this.tooltipTimeout)},move:function(t,e,i,n){var r=this,o=r.now,a=!1!==r.options.animation&&!r.isHidden&&(R(t-o.x)>1||R(e-o.y)>1),s=r.followPointer||r.len>1;pt(o,{x:a?(2*o.x+t)/3:t,y:a?(o.y+e)/2:e,anchorX:s?void 0:a?(2*o.anchorX+i)/3:i,anchorY:s?void 0:a?(o.anchorY+n)/2:n}),r.label.attr(o),a&&(clearTimeout(this.tooltipTimeout),this.tooltipTimeout=setTimeout((function(){r&&r.move(t,e,i,n)}),32))},hide:function(t){var e=this;clearTimeout(this.hideTimer),this.isHidden||(this.chart.hoverPoints,this.hideTimer=setTimeout((function(){e.label.fadeOut(),e.isHidden=!0}),Tt(t,this.options.hideDelay,500)))},getAnchor:function(t,e){var i,n,r,o=this.chart,a=o.inverted,s=o.plotTop,l=o.plotLeft,h=0,c=0;return i=(t=St(t))[0].tooltipPos,this.followPointer&&e&&(void 0===e.chartX&&(e=o.pointer.normalize(e)),i=[e.chartX-o.plotLeft,e.chartY-s]),i||(qt(t,(function(t){n=t.series.yAxis,r=t.series.xAxis,h+=t.plotX+(!a&&r?r.left-l:0),c+=(t.plotLow?(t.plotLow+t.plotHigh)/2:t.plotY)+(!a&&n?n.top-s:0)})),h/=t.length,c/=t.length,i=[a?o.plotWidth-c:h,this.shared&&!a&&t.length>1&&e?e.chartY-s:a?o.plotHeight-h:c]),Qt(i,C)},getPosition:function(t,e,i){var n,r=this.chart,o=this.distance,a={},s=i.h||0,l=["y",r.chartHeight,e,i.plotY+r.plotTop,r.plotTop,r.plotTop+r.plotHeight],h=["x",r.chartWidth,t,i.plotX+r.plotLeft,r.plotLeft,r.plotLeft+r.plotWidth],c=Tt(i.ttBelow,r.inverted&&!i.negative||!r.inverted&&i.negative),u=function(t,e,i,n,r,l){var h=i<n-o,u=n+o+i<e,p=n-o-i,d=n+o;if(c&&u)a[t]=d;else if(!c&&h)a[t]=p;else if(h)a[t]=E(l-i,p-s<0?p:p-s);else{if(!u)return!1;a[t]=I(r,d+s+i>e?d:d+s)}},p=function(t,e,i,n){if(n<o||n>e-o)return!1;a[t]=n<i/2?1:n>e-i/2?e-i-2:n-i/2},d=function(t){var e=l;l=h,h=e,n=t},f=function(){!1!==u.apply(0,l)?!1!==p.apply(0,h)||n||(d(!0),f()):n?a.x=a.y=0:(d(!0),f())};return(r.inverted||this.len>1)&&d(),f(),a},defaultFormatter:function(t){var e,i=this.points||St(this);return(e=(e=[t.tooltipFooterHeaderFormatter(i[0])]).concat(t.bodyFormatter(i))).push(t.tooltipFooterHeaderFormatter(i[0],!0)),e.join("")},refresh:function(t,e){var i,n,r,o,a,s,l=this.chart,h=this.label,c=this.options,u={},p=[],d=c.formatter||this.defaultFormatter,f=l.hoverPoints,g=this.shared;clearTimeout(this.hideTimer),this.followPointer=St(t)[0].series.tooltipOptions.followPointer,i=(r=this.getAnchor(t,e))[0],n=r[1],!g||t.series&&t.series.noSharedTooltip?u=t.getLabelConfig():(l.hoverPoints=t,f&&qt(f,(function(t){t.setState()})),qt(t,(function(t){t.setState("hover"),p.push(t.getLabelConfig())})),(u={x:t[0].category,y:t[0].y}).points=p,this.len=p.length,t=t[0]),o=d.call(u,this),s=t.series,this.distance=Tt(s.tooltipOptions.distance,16),!1===o?this.hide():(this.isHidden&&(oe(h),h.attr("opacity",1).show()),h.attr({text:o}),a=c.borderColor||t.color||s.color||"#606060",h.attr({stroke:a}),this.updatePosition({plotX:i,plotY:n,negative:t.negative,ttBelow:t.ttBelow,h:r[2]||0}),this.isHidden=!1),ie(l,"tooltipRefresh",{text:o,x:i+l.plotLeft,y:n+l.plotTop,borderColor:a})},updatePosition:function(t){var e=this.chart,i=this.label,n=(this.options.positioner||this.getPosition).call(this,i.width,i.height,t);this.move(C(n.x),C(n.y||0),t.plotX+e.plotLeft,t.plotY+e.plotTop)},getXDateFormat:function(t,e,i){var n,o,s,l=e.dateTimeLabelFormats,h=i&&i.closestPointRange,c="01-01 00:00:00.000",u={millisecond:15,second:12,minute:9,hour:6,day:3},p="millisecond";if(h){for(o in s=r("%m-%d %H:%M:%S.%L",t.x),a){if(h===a.week&&+r("%w",t.x)===i.options.startOfWeek&&s.substr(6)===c.substr(6)){o="week";break}if(a[o]>h){o=p;break}if(u[o]&&s.substr(u[o])!==c.substr(u[o]))break;"week"!==o&&(p=o)}o&&(n=l[o])}else n=l.day;return n||l.year},tooltipFooterHeaderFormatter:function(t,e){var i=e?"footer":"header",n=t.series,r=n.tooltipOptions,o=r.xDateFormat,a=n.xAxis,s=a&&"datetime"===a.options.type&&vt(t.key),l=r[i+"Format"];return s&&!o&&(o=this.getXDateFormat(t,r,a)),s&&o&&(l=l.replace("{point.key}","{point.key:"+o+"}")),Rt(l,{point:t,series:n})},bodyFormatter:function(t){return Qt(t,(function(t){var e=t.series.tooltipOptions;return(e.pointFormatter||t.point.tooltipFormatter).call(t.point,e.pointFormat)}))}},e=void 0!==P.documentElement.ontouchstart;var Se=T.Pointer=function(t,e){this.init(t,e)};if(Se.prototype={init:function(t,e){var i,n,r=e.chart,o=r.events,a=K?"":r.zoomType,s=t.inverted;this.options=e,this.chart=t,this.zoomX=i=/x/.test(a),this.zoomY=n=/y/.test(a),this.zoomHor=i&&!s||n&&s,this.zoomVert=n&&!s||i&&s,this.hasZoom=i||n,this.runChartClick=o&&!!o.click,this.pinchDown=[],this.lastValidTouch={},T.Tooltip&&e.tooltip.enabled&&(t.tooltip=new we(t,e.tooltip),this.followTouchMove=Tt(e.tooltip.followTouchMove,!0)),this.setDOMEvents()},normalize:function(t,e){var i,n,r;return t=t||window.event,(t=ne(t)).target||(t.target=t.srcElement),r=t.touches?t.touches.length?t.touches.item(0):t.changedTouches[0]:t,e||(this.chartPosition=e=Jt(this.chart.container)),void 0===r.pageX?(i=I(t.x,t.clientX-e.left),n=t.y):(i=r.pageX-e.left,n=r.pageY-e.top),pt(t,{chartX:C(i),chartY:C(n)})},getCoordinates:function(t){var e={xAxis:[],yAxis:[]};return qt(this.chart.axes,(function(i){e[i.isXAxis?"xAxis":"yAxis"].push({axis:i,value:i.toValue(t[i.horiz?"chartX":"chartY"])})})),e},runPointActions:function(t){var e,i,n,r,o,a,s,l=this.chart,h=l.series,c=l.tooltip,u=!!c&&c.shared,p=l.hoverPoint,d=l.hoverSeries,f=l.chartWidth,g=[];if(!u&&!d)for(i=0;i<h.length;i++)!h[i].directTouch&&h[i].options.stickyTracking||(h=[]);if(!u&&d&&d.directTouch&&p?a=p:(qt(h,(function(e){r=e.noSharedTooltip&&u,o=!u&&e.directTouch,e.visible&&!r&&!o&&Tt(e.options.enableMouseTracking,!0)&&(s=e.searchPoint(t,!r&&1===e.kdDimensions))&&g.push(s)})),qt(g,(function(t){t&&"number"==typeof t.dist&&t.dist<f&&(f=t.dist,a=t)}))),a&&(a!==this.prevKDPoint||c&&c.isHidden)){if(u&&!a.series.noSharedTooltip){for(i=g.length;i--;)(g[i].clientX!==a.clientX||g[i].series.noSharedTooltip)&&g.splice(i,1);g.length&&c&&c.refresh(g,t),qt(g,(function(e){e.onMouseOver(t,e!==(d&&d.directTouch&&p||a))}))}else c&&c.refresh(a,t),d&&d.directTouch||a.onMouseOver(t);this.prevKDPoint=a}else e=d&&d.tooltipOptions.followPointer,c&&e&&!c.isHidden&&(n=c.getAnchor([{}],t),c.updatePosition({plotX:n[0],plotY:n[1]}));c&&!this._onDocumentMouseMove&&(this._onDocumentMouseMove=function(t){Q[ke]&&Q[ke].pointer.onDocumentMouseMove(t)},te(P,"mousemove",this._onDocumentMouseMove)),qt(l.axes,(function(e){e.drawCrosshair(t,Tt(a,p))}))},reset:function(t,e){var i=this.chart,n=i.hoverSeries,r=i.hoverPoint,o=i.hoverPoints,a=i.tooltip,s=a&&a.shared?o:r;(t=t&&a&&s)&&void 0===St(s)[0].plotX&&(t=!1),t?(a.refresh(s),r&&(r.setState(r.state,!0),qt(i.axes,(function(t){Tt(t.options.crosshair&&t.options.crosshair.snap,!0)?t.drawCrosshair(null,r):t.hideCrosshair()})))):(r&&r.onMouseOut(),o&&qt(o,(function(t){t.setState()})),n&&n.onMouseOut(),a&&a.hide(e),this._onDocumentMouseMove&&(ee(P,"mousemove",this._onDocumentMouseMove),this._onDocumentMouseMove=null),qt(i.axes,(function(t){t.hideCrosshair()})),this.hoverX=i.hoverPoints=i.hoverPoint=null)},scaleGroups:function(t,e){var i,n=this.chart;qt(n.series,(function(r){i=t||r.getPlotBox(),r.xAxis&&r.xAxis.zoomEnabled&&(r.group.attr(i),r.markerGroup&&(r.markerGroup.attr(i),r.markerGroup.clip(e?n.clipRect:null)),r.dataLabelsGroup&&r.dataLabelsGroup.attr(i))})),n.clipRect.attr(e||n.clipBox)},dragStart:function(t){var e=this.chart;e.mouseIsDown=t.type,e.cancelClick=!1,e.mouseDownX=this.mouseDownX=t.chartX,e.mouseDownY=this.mouseDownY=t.chartY},drag:function(t){var e,i,n=this.chart,r=n.options.chart,o=t.chartX,a=t.chartY,s=this.zoomHor,l=this.zoomVert,h=n.plotLeft,c=n.plotTop,u=n.plotWidth,p=n.plotHeight,d=this.selectionMarker,f=this.mouseDownX,g=this.mouseDownY,m=r.panKey&&t[r.panKey+"Key"];d&&d.touch||(o<h?o=h:o>h+u&&(o=h+u),a<c?a=c:a>c+p&&(a=c+p),this.hasDragged=Math.sqrt(Math.pow(f-o,2)+Math.pow(g-a,2)),this.hasDragged>10&&(e=n.isInsidePlot(f-h,g-c),n.hasCartesianSeries&&(this.zoomX||this.zoomY)&&e&&!m&&(d||(this.selectionMarker=d=n.renderer.rect(h,c,s?1:u,l?1:p,0).attr({fill:r.selectionMarkerFill||"rgba(69,114,167,0.25)",zIndex:7}).add())),d&&s&&(i=o-f,d.attr({width:R(i),x:(i>0?0:i)+f})),d&&l&&(i=a-g,d.attr({height:R(i),y:(i>0?0:i)+g})),e&&!d&&r.panning&&n.pan(t,r.panning)))},drop:function(t){var e=this,i=this.chart,n=this.hasPinched;if(this.selectionMarker){var r,o={xAxis:[],yAxis:[],originalEvent:t.originalEvent||t},a=this.selectionMarker,s=a.attr?a.attr("x"):a.x,l=a.attr?a.attr("y"):a.y,h=a.attr?a.attr("width"):a.width,c=a.attr?a.attr("height"):a.height;(this.hasDragged||n)&&(qt(i.axes,(function(i){if(i.zoomEnabled&&kt(i.min)&&(n||e[{xAxis:"zoomX",yAxis:"zoomY"}[i.coll]])){var a=i.horiz,u="touchend"===t.type?i.minPixelPadding:0,p=i.toValue((a?s:l)+u),d=i.toValue((a?s+h:l+c)-u);o[i.coll].push({axis:i,min:E(p,d),max:I(p,d)}),r=!0}})),r&&ie(i,"selection",o,(function(t){i.zoom(pt(t,n?{animation:!1}:null))}))),this.selectionMarker=this.selectionMarker.destroy(),n&&this.scaleGroups()}i&&(Pt(i.container,{cursor:i._cursor}),i.cancelClick=this.hasDragged>10,i.mouseIsDown=this.hasDragged=this.hasPinched=!1,this.pinchDown=[])},onContainerMouseDown:function(t){(t=this.normalize(t)).preventDefault&&t.preventDefault(),this.dragStart(t)},onDocumentMouseUp:function(t){Q[ke]&&Q[ke].pointer.drop(t)},onDocumentMouseMove:function(t){var e=this.chart,i=this.chartPosition;t=this.normalize(t,i),!i||this.inClass(t.target,"highcharts-tracker")||e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||this.reset()},onContainerMouseLeave:function(){var t=Q[ke];t&&(t.pointer.reset(),t.pointer.chartPosition=null)},onContainerMouseMove:function(t){var e=this.chart;ke=e.index,(t=this.normalize(t)).returnValue=!1,"mousedown"===e.mouseIsDown&&this.drag(t),!this.inClass(t.target,"highcharts-tracker")&&!e.isInsidePlot(t.chartX-e.plotLeft,t.chartY-e.plotTop)||e.openMenu||this.runPointActions(t)},inClass:function(t,e){for(var i;t;){if(i=wt(t,"class")){if(-1!==i.indexOf(e))return!0;if(-1!==i.indexOf(nt+"container"))return!1}t=t.parentNode}},onTrackerMouseOut:function(t){var e=this.chart.hoverSeries,i=t.relatedTarget||t.toElement,n=i&&i.point&&i.point.series;!e||e.options.stickyTracking||this.inClass(i,nt+"tooltip")||n===e||e.onMouseOut()},onContainerClick:function(t){var e=this.chart,i=e.hoverPoint,n=e.plotLeft,r=e.plotTop;(t=this.normalize(t)).originalEvent=t,e.cancelClick||(i&&this.inClass(t.target,nt+"tracker")?(ie(i.series,"click",pt(t,{point:i})),e.hoverPoint&&i.firePointEvent("click",t)):(pt(t,this.getCoordinates(t)),e.isInsidePlot(t.chartX-n,t.chartY-r)&&ie(e,"click",t)))},setDOMEvents:function(){var t=this,i=t.chart.container;i.onmousedown=function(e){t.onContainerMouseDown(e)},i.onmousemove=function(e){t.onContainerMouseMove(e)},i.onclick=function(e){t.onContainerClick(e)},te(i,"mouseleave",t.onContainerMouseLeave),1===tt&&te(P,"mouseup",t.onDocumentMouseUp),e&&(i.ontouchstart=function(e){t.onContainerTouchStart(e)},i.ontouchmove=function(e){t.onContainerTouchMove(e)},1===tt&&te(P,"touchend",t.onDocumentTouchEnd))},destroy:function(){var t;for(t in ee(this.chart.container,"mouseleave",this.onContainerMouseLeave),tt||(ee(P,"mouseup",this.onDocumentMouseUp),ee(P,"touchend",this.onDocumentTouchEnd)),clearInterval(this.tooltipTimeout),this)this[t]=null}},pt(T.Pointer.prototype,{pinchTranslate:function(t,e,i,n,r,o){(this.zoomHor||this.pinchHor)&&this.pinchTranslateDirection(!0,t,e,i,n,r,o),(this.zoomVert||this.pinchVert)&&this.pinchTranslateDirection(!1,t,e,i,n,r,o)},pinchTranslateDirection:function(t,e,i,n,r,o,a,s){var l,h,c,u,p,d,f=this.chart,g=t?"x":"y",m=t?"X":"Y",y="chart"+m,v=t?"width":"height",_=f["plot"+(t?"Left":"Top")],x=s||1,b=f.inverted,k=f.bounds[t?"h":"v"],w=1===e.length,S=e[0][y],T=i[0][y],P=!w&&e[1][y],A=!w&&i[1][y],D=function(){!w&&R(S-P)>20&&(x=s||R(T-A)/R(S-P)),c=(_-T)/x+S,l=f["plot"+(t?"Width":"Height")]/x};D(),(h=c)<k.min?(h=k.min,u=!0):h+l>k.max&&(h=k.max-l,u=!0),u?(T-=.8*(T-a[g][0]),w||(A-=.8*(A-a[g][1])),D()):a[g]=[T,A],b||(o[g]=c-_,o[v]=l),d=b?t?"scaleY":"scaleX":"scale"+m,p=b?1/x:x,r[v]=l,r[g]=h,n[d]=x,n["translate"+m]=p*_+(T-p*S)},pinch:function(t){var e=this,i=e.chart,n=e.pinchDown,r=t.touches,o=r.length,a=e.lastValidTouch,s=e.hasZoom,l=e.selectionMarker,h={},c=1===o&&(e.inClass(t.target,nt+"tracker")&&i.runTrackerClick||e.runChartClick),u={};o>1&&(e.initiated=!0),s&&e.initiated&&!c&&t.preventDefault(),Qt(r,(function(t){return e.normalize(t)})),"touchstart"===t.type?(qt(r,(function(t,e){n[e]={chartX:t.chartX,chartY:t.chartY}})),a.x=[n[0].chartX,n[1]&&n[1].chartX],a.y=[n[0].chartY,n[1]&&n[1].chartY],qt(i.axes,(function(t){if(t.zoomEnabled){var e=i.bounds[t.horiz?"h":"v"],n=t.minPixelPadding,r=t.toPixels(Tt(t.options.min,t.dataMin)),o=t.toPixels(Tt(t.options.max,t.dataMax)),a=E(r,o),s=I(r,o);e.min=E(t.pos,a-n),e.max=I(t.pos+t.len,s+n)}})),e.res=!0):n.length&&(l||(e.selectionMarker=l=pt({destroy:J,touch:!0},i.plotBox)),e.pinchTranslate(n,r,h,l,u,a),e.hasPinched=s,e.scaleGroups(h,u),!s&&e.followTouchMove&&1===o?this.runPointActions(e.normalize(t)):e.res&&(e.res=!1,this.reset(!1,0)))},touch:function(t,e){var i=this.chart;ke=i.index,1===t.touches.length?(t=this.normalize(t),i.isInsidePlot(t.chartX-i.plotLeft,t.chartY-i.plotTop)&&!i.openMenu?(e&&this.runPointActions(t),this.pinch(t)):e&&this.reset()):2===t.touches.length&&this.pinch(t)},onContainerTouchStart:function(t){this.touch(t,!0)},onContainerTouchMove:function(t){this.touch(t)},onDocumentTouchEnd:function(t){Q[ke]&&Q[ke].pointer.drop(t)}}),A.PointerEvent||A.MSPointerEvent){var Te={},Pe=!!A.PointerEvent,Ae=function(){var t,e=[];for(t in e.item=function(t){return this[t]},Te)Te.hasOwnProperty(t)&&e.push({pageX:Te[t].pageX,pageY:Te[t].pageY,target:Te[t].target});return e},De=function(t,e,i,n){"touch"!==(t=t.originalEvent||t).pointerType&&t.pointerType!==t.MSPOINTER_TYPE_TOUCH||!Q[ke]||(n(t),Q[ke].pointer[e]({type:i,target:t.currentTarget,preventDefault:J,touches:Ae()}))};pt(Se.prototype,{onContainerPointerDown:function(t){De(t,"onContainerTouchStart","touchstart",(function(t){Te[t.pointerId]={pageX:t.pageX,pageY:t.pageY,target:t.currentTarget}}))},onContainerPointerMove:function(t){De(t,"onContainerTouchMove","touchmove",(function(t){Te[t.pointerId]={pageX:t.pageX,pageY:t.pageY},Te[t.pointerId].target||(Te[t.pointerId].target=t.currentTarget)}))},onDocumentPointerUp:function(t){De(t,"onDocumentTouchEnd","touchend",(function(t){delete Te[t.pointerId]}))},batchMSEvents:function(t){t(this.chart.container,Pe?"pointerdown":"MSPointerDown",this.onContainerPointerDown),t(this.chart.container,Pe?"pointermove":"MSPointerMove",this.onContainerPointerMove),t(P,Pe?"pointerup":"MSPointerUp",this.onDocumentPointerUp)}}),Lt(Se.prototype,"init",(function(t,e,i){t.call(this,e,i),this.hasZoom&&Pt(e.container,{"-ms-touch-action":at,"touch-action":at})})),Lt(Se.prototype,"setDOMEvents",(function(t){t.apply(this),(this.hasZoom||this.followTouchMove)&&this.batchMSEvents(te)})),Lt(Se.prototype,"destroy",(function(t){this.batchMSEvents(ee),t.call(this)}))}var Ce=T.Legend=function(t,e){this.init(t,e)};Ce.prototype={init:function(t,e){var i,n=this,r=e.itemStyle,o=e.itemMarginTop||0;this.options=e,e.enabled&&(n.itemStyle=r,n.itemHiddenStyle=dt(r,e.itemHiddenStyle),n.itemMarginTop=o,n.padding=i=Tt(e.padding,8),n.initialItemX=i,n.initialItemY=i-5,n.maxItemWidth=0,n.chart=t,n.itemHeight=0,n.symbolWidth=Tt(e.symbolWidth,16),n.pages=[],n.render(),te(n.chart,"endResize",(function(){n.positionCheckboxes()})))},colorizeItem:function(t,e){var i,n,r=this.options,o=t.legendItem,a=t.legendLine,s=t.legendSymbol,l=this.itemHiddenStyle.color,h=e?r.itemStyle.color:l,c=e?t.legendColor||t.color||"#CCC":l,u=t.options&&t.options.marker,p={fill:c};if(o&&o.css({fill:h,color:h}),a&&a.attr({stroke:c}),s){if(u&&s.isMarker)for(i in p.stroke=c,u=t.convertAttribs(u))void 0!==(n=u[i])&&(p[i]=n);s.attr(p)}},positionItem:function(t){var e=this.options,i=e.symbolPadding,n=!e.rtl,r=t._legendItemPos,o=r[0],a=r[1],s=t.checkbox,l=t.legendGroup;l&&l.element&&l.translate(n?o:this.legendWidth-o-2*i-4,a),s&&(s.x=o,s.y=a)},destroyItem:function(t){var e=t.checkbox;qt(["legendItem","legendLine","legendSymbol","legendGroup"],(function(e){t[e]&&(t[e]=t[e].destroy())})),e&&Bt(t.checkbox)},destroy:function(){var t=this.group,e=this.box;e&&(this.box=e.destroy()),t&&(this.group=t.destroy())},positionCheckboxes:function(t){var e,i=this.group.alignAttr,n=this.clipHeight||this.legendHeight;i&&(e=i.translateY,qt(this.allItems,(function(r){var o,a=r.checkbox;a&&(o=e+a.y+(t||0)+3,Pt(a,{left:i.translateX+r.checkboxOffset+a.x-20+ot,top:o+ot,display:o>e-6&&o<e+n-6?"":at}))})))},renderTitle:function(){var t,e=this.options,i=this.padding,n=e.title,r=0;n.text&&(this.title||(this.title=this.chart.renderer.label(n.text,i-3,i-4,null,null,null,null,null,"legend-title").attr({zIndex:1}).css(n.style).add(this.group)),r=(t=this.title.getBBox()).height,this.offsetWidth=t.width,this.contentGroup.attr({translateY:r})),this.titleHeight=r},setText:function(t){var e=this.options;t.legendItem.attr({text:e.labelFormat?Rt(e.labelFormat,t):e.labelFormatter.call(t)})},renderItem:function(t){var e,i,n,r=this.chart,o=r.renderer,a=this.options,s="horizontal"===a.layout,l=this.symbolWidth,h=a.symbolPadding,c=this.itemStyle,u=this.itemHiddenStyle,p=this.padding,d=s?Tt(a.itemDistance,20):0,f=!a.rtl,g=a.width,m=a.itemMarginBottom||0,y=this.itemMarginTop,v=this.initialItemX,_=t.legendItem,x=t.series&&t.series.drawLegendSymbol?t.series:t,b=x.options,k=this.createCheckboxForItem&&b&&b.showCheckbox,w=a.useHTML;_||(t.legendGroup=o.g("legend-item").attr({zIndex:1}).add(this.scrollGroup),t.legendItem=_=o.text("",f?l+h:-h,this.baseline||0,w).css(dt(t.visible?c:u)).attr({align:f?"left":"right",zIndex:2}).add(t.legendGroup),this.baseline||(this.fontMetrics=o.fontMetrics(c.fontSize,_),this.baseline=this.fontMetrics.f+3+y,_.attr("y",this.baseline)),x.drawLegendSymbol(this,t),this.setItemEvents&&this.setItemEvents(t,_,w,c,u),this.colorizeItem(t,t.visible),k&&this.createCheckboxForItem(t)),this.setText(t),i=_.getBBox(),n=t.checkboxOffset=a.itemWidth||t.legendItemWidth||l+h+i.width+d+(k?20:0),this.itemHeight=e=C(t.legendItemHeight||i.height),s&&this.itemX-v+n>(g||r.chartWidth-2*p-v-a.x)&&(this.itemX=v,this.itemY+=y+this.lastLineHeight+m,this.lastLineHeight=0),this.maxItemWidth=I(this.maxItemWidth,n),this.lastItemY=y+this.itemY+m,this.lastLineHeight=I(e,this.lastLineHeight),t._legendItemPos=[this.itemX,this.itemY],s?this.itemX+=n:(this.itemY+=y+e+m,this.lastLineHeight=e),this.offsetWidth=g||I((s?this.itemX-v-d:n)+p,this.offsetWidth)},getAllItems:function(){var t=[];return qt(this.chart.series,(function(e){var i=e.options;Tt(i.showInLegend,!kt(i.linkedTo)&&void 0,!0)&&(t=t.concat(e.legendItems||("point"===i.legendType?e.data:e)))})),t},adjustMargins:function(t,e){var i=this.chart,n=this.options,r=n.align.charAt(0)+n.verticalAlign.charAt(0)+n.layout.charAt(0);this.display&&!n.floating&&qt([/(lth|ct|rth)/,/(rtv|rm|rbv)/,/(rbh|cb|lbh)/,/(lbv|lm|ltv)/],(function(o,a){o.test(r)&&!kt(t[a])&&(i[ct[a]]=I(i[ct[a]],i.legend[(a+1)%2?"legendHeight":"legendWidth"]+[1,-1,-1,1][a]*n[a%2?"x":"y"]+Tt(n.margin,12)+e[a]))}))},render:function(){var t,e,i,n,r=this,o=r.chart,a=o.renderer,s=r.group,l=r.box,h=r.options,c=r.padding,u=h.borderWidth,p=h.backgroundColor;r.itemX=r.initialItemX,r.itemY=r.initialItemY,r.offsetWidth=0,r.lastItemY=0,s||(r.group=s=a.g("legend").attr({zIndex:7}).add(),r.contentGroup=a.g().attr({zIndex:1}).add(s),r.scrollGroup=a.g().add(r.contentGroup)),r.renderTitle(),Yt(t=r.getAllItems(),(function(t,e){return(t.options&&t.options.legendIndex||0)-(e.options&&e.options.legendIndex||0)})),h.reversed&&t.reverse(),r.allItems=t,r.display=e=!!t.length,r.lastLineHeight=0,qt(t,(function(t){r.renderItem(t)})),i=(h.width||r.offsetWidth)+c,n=r.lastItemY+r.lastLineHeight+r.titleHeight,n=r.handleOverflow(n),n+=c,(u||p)&&(l?i>0&&n>0&&(l[l.isNew?"attr":"animate"](l.crisp({width:i,height:n})),l.isNew=!1):(r.box=l=a.rect(0,0,i,n,h.borderRadius,u||0).attr({stroke:h.borderColor,"stroke-width":u||0,fill:p||at}).add(s).shadow(h.shadow),l.isNew=!0),l[e?"show":"hide"]()),r.legendWidth=i,r.legendHeight=n,qt(t,(function(t){r.positionItem(t)})),e&&s.align(pt({width:i,height:n},h),!0,"spacingBox"),o.isResizing||this.positionCheckboxes()},handleOverflow:function(t){var e,i,n=this,r=this.chart,o=r.renderer,a=this.options,s=a.y,l="top"===a.verticalAlign,h=r.spacingBox.height+(l?-s:s)-this.padding,c=a.maxHeight,u=this.clipRect,p=a.navigation,d=Tt(p.animation,!0),f=p.arrowSize||12,g=this.nav,m=this.pages,y=this.padding,v=this.allItems,_=function(t){u.attr({height:t}),n.contentGroup.div&&(n.contentGroup.div.style.clip="rect("+y+"px,9999px,"+(y+t)+"px,0)")};return"horizontal"===a.layout&&(h/=2),c&&(h=E(h,c)),m.length=0,t>h?(this.clipHeight=e=I(h-20-this.titleHeight-y,0),this.currentPage=Tt(this.currentPage,1),this.fullHeight=t,qt(v,(function(t,n){var r=t._legendItemPos[1],o=C(t.legendItem.getBBox().height),a=m.length;(!a||r-m[a-1]>e&&(i||r)!==m[a-1])&&(m.push(i||r),a++),n===v.length-1&&r+o-m[a-1]>e&&m.push(r),r!==i&&(i=r)})),u||(u=n.clipRect=o.clipRect(0,y,9999,0),n.contentGroup.clip(u)),_(e),g||(this.nav=g=o.g().attr({zIndex:1}).add(this.group),this.up=o.symbol("triangle",0,0,f,f).on("click",(function(){n.scroll(-1,d)})).add(g),this.pager=o.text("",15,10).css(p.style).add(g),this.down=o.symbol("triangle-down",0,0,f,f).on("click",(function(){n.scroll(1,d)})).add(g)),n.scroll(0),t=h):g&&(_(r.chartHeight),g.hide(),this.scrollGroup.attr({translateY:1}),this.clipHeight=0),t},scroll:function(t,e){var i,n=this.pages,r=n.length,o=this.currentPage+t,a=this.clipHeight,s=this.options.navigation,l=s.activeColor,h=s.inactiveColor,c=this.pager,u=this.padding;o>r&&(o=r),o>0&&(void 0!==e&&Ut(e,this.chart),this.nav.attr({translateX:u,translateY:a+this.padding+7+this.titleHeight,visibility:rt}),this.up.attr({fill:1===o?h:l}).css({cursor:1===o?"default":"pointer"}),c.attr({text:o+"/"+r}),this.down.attr({x:18+this.pager.getBBox().width,fill:o===r?h:l}).css({cursor:o===r?"default":"pointer"}),i=-n[o-1]+this.initialItemY,this.scrollGroup.animate({translateY:i}),this.currentPage=o,this.positionCheckboxes(i))}};var Me=T.LegendSymbolMixin={drawRectangle:function(t,e){var i=t.options.symbolHeight||t.fontMetrics.f;e.legendSymbol=this.chart.renderer.rect(0,t.baseline-i+1,t.symbolWidth,i,t.options.symbolRadius||0).attr({zIndex:3}).add(e.legendGroup)},drawLineMarker:function(t){var e,i,n,r=this.options,o=r.marker,a=t.symbolWidth,s=this.chart.renderer,l=this.legendGroup,h=t.baseline-C(.3*t.fontMetrics.b);r.lineWidth&&(n={"stroke-width":r.lineWidth},r.dashStyle&&(n.dashstyle=r.dashStyle),this.legendLine=s.path([st,0,h,lt,a,h]).attr(n).add(l)),o&&!1!==o.enabled&&(e=o.radius,this.legendSymbol=i=s.symbol(this.symbol,a/2-e,h-e,2*e,2*e).add(l),i.isMarker=!0)}};(/Trident\/7\.0/.test(X)||U)&&Lt(Ce.prototype,"positionItem",(function(t,e){var i=this,n=function(){e._legendItemPos&&t.call(i,e)};n(),setTimeout(n)}));var Le=T.Chart=function(){this.init.apply(this,arguments)};Le.prototype={callbacks:[],init:function(t,e){var i,r=t.series;t.series=null,(i=dt(n,t)).series=t.series=r,this.userOptions=t;var o=i.chart;this.margin=this.splashArray("margin",o),this.spacing=this.splashArray("spacing",o);var a=o.events;this.bounds={h:{},v:{}},this.callback=e,this.isResizing=0,this.options=i,this.axes=[],this.series=[],this.hasCartesianSeries=o.showAxes;var s,l=this;if(l.index=Q.length,Q.push(l),tt++,!1!==o.reflow&&te(l,"load",(function(){l.initReflow()})),a)for(s in a)te(l,s,a[s]);l.xAxis=[],l.yAxis=[],l.animation=!K&&Tt(o.animation,!0),l.pointCount=l.colorCounter=l.symbolCounter=0,l.firstRender()},initSeries:function(t){var e,i=this.options.chart,n=t.type||i.type||i.defaultSeriesType,r=ut[n];return r||Nt(17,!0),(e=new r).init(this,t),e},isInsidePlot:function(t,e,i){var n=i?e:t,r=i?t:e;return n>=0&&n<=this.plotWidth&&r>=0&&r<=this.plotHeight},redraw:function(t){var e,i,n,r=this.axes,o=this.series,a=this.pointer,s=this.legend,l=this.isDirtyLegend,h=this.hasCartesianSeries,c=this.isDirtyBox,u=o.length,p=u,d=this.renderer,f=d.isHidden(),g=[];for(Ut(t,this),f&&this.cloneRenderTo(),this.layOutTitles();p--;)if((n=o[p]).options.stacking&&(e=!0,n.isDirty)){i=!0;break}if(i)for(p=u;p--;)(n=o[p]).options.stacking&&(n.isDirty=!0);qt(o,(function(t){t.isDirty&&"point"===t.options.legendType&&(t.updateTotals&&t.updateTotals(),l=!0)})),l&&s.options.enabled&&(s.render(),this.isDirtyLegend=!1),e&&this.getStacks(),h&&(this.isResizing||(this.maxTicks=null,qt(r,(function(t){t.setScale()})))),this.getMargins(),h&&(qt(r,(function(t){t.isDirty&&(c=!0)})),qt(r,(function(t){var i=t.min+","+t.max;t.extKey!==i&&(t.extKey=i,g.push((function(){ie(t,"afterSetExtremes",pt(t.eventArgs,t.getExtremes())),delete t.eventArgs}))),(c||e)&&t.redraw()}))),c&&this.drawChartBox(),qt(o,(function(t){t.isDirty&&t.visible&&(!t.isCartesian||t.xAxis)&&t.redraw()})),a&&a.reset(!0),d.draw(),ie(this,"redraw"),f&&this.cloneRenderTo(!0),qt(g,(function(t){t.call()}))},get:function(t){var e,i,n,r=this.axes,o=this.series;for(e=0;e<r.length;e++)if(r[e].options.id===t)return r[e];for(e=0;e<o.length;e++)if(o[e].options.id===t)return o[e];for(e=0;e<o.length;e++)for(n=o[e].points||[],i=0;i<n.length;i++)if(n[i].id===t)return n[i];return null},getAxes:function(){var t,e=this,i=this.options,n=i.xAxis=St(i.xAxis||{}),r=i.yAxis=St(i.yAxis||{});qt(n,(function(t,e){t.index=e,t.isX=!0})),qt(r,(function(t,e){t.index=e})),t=n.concat(r),qt(t,(function(t){new be(e,t)}))},getSelectedPoints:function(){var t=[];return qt(this.series,(function(e){t=t.concat(Zt(e.points||[],(function(t){return t.selected})))})),t},getSelectedSeries:function(){return Zt(this.series,(function(t){return t.selected}))},setTitle:function(t,e,i){var n,r,o=this,a=o.options;n=a.title=dt(a.title,t),r=a.subtitle=dt(a.subtitle,e),qt([["title",t,n],["subtitle",e,r]],(function(t){var e=t[0],i=o[e],n=t[1],r=t[2];i&&n&&(o[e]=i=i.destroy()),r&&r.text&&!i&&(o[e]=o.renderer.text(r.text,0,0,r.useHTML).attr({align:r.align,class:nt+e,zIndex:r.zIndex||4}).css(r.style).add())})),o.layOutTitles(i)},layOutTitles:function(t){var e,i=0,n=this.title,r=this.subtitle,o=this.options,a=o.title,s=o.subtitle,l=this.renderer,h=this.spacingBox.width-44;n&&(n.css({width:(a.width||h)+ot}).align(pt({y:l.fontMetrics(a.style.fontSize,n).b-3},a),!1,"spacingBox"),a.floating||a.verticalAlign||(i=n.getBBox().height)),r&&(r.css({width:(s.width||h)+ot}).align(pt({y:i+(a.margin-13)+l.fontMetrics(a.style.fontSize,r).b},s),!1,"spacingBox"),s.floating||s.verticalAlign||(i=L(i+r.getBBox().height))),e=this.titleOffset!==i,this.titleOffset=i,!this.isDirtyBox&&e&&(this.isDirtyBox=e,this.hasRendered&&Tt(t,!0)&&this.isDirtyBox&&this.redraw())},getChartSize:function(){var t=this.options.chart,e=t.width,i=t.height,n=this.renderToClone||this.renderTo;kt(e)||(this.containerWidth=jt(n,"width")),kt(i)||(this.containerHeight=jt(n,"height")),this.chartWidth=I(0,e||this.containerWidth||600),this.chartHeight=I(0,Tt(i,this.containerHeight>19?this.containerHeight:400))},cloneRenderTo:function(t){var e=this.renderToClone,i=this.container;t?e&&(this.renderTo.appendChild(i),Bt(e),delete this.renderToClone):(i&&i.parentNode===this.renderTo&&this.renderTo.removeChild(i),this.renderToClone=e=this.renderTo.cloneNode(0),Pt(e,{position:"absolute",top:"-9999px",display:"block"}),e.style.setProperty&&e.style.setProperty("display","block","important"),P.body.appendChild(e),i&&e.appendChild(i))},getContainer:function(){var e,i,n,r,o,a,s=this.options.chart;this.renderTo=r=s.renderTo,a=nt+Z++,gt(r)&&(this.renderTo=r=P.getElementById(r)),r||Nt(13,!0),o=ft(wt(r,"data-highcharts-chart")),!isNaN(o)&&Q[o]&&Q[o].hasRendered&&Q[o].destroy(),wt(r,"data-highcharts-chart",this.index),r.innerHTML="",s.skipClone||r.offsetWidth||this.cloneRenderTo(),this.getChartSize(),i=this.chartWidth,n=this.chartHeight,this.container=e=At(et,{className:nt+"container"+(s.className?" "+s.className:""),id:a},pt({position:"relative",overflow:it,width:i+ot,height:n+ot,textAlign:"left",lineHeight:"normal",zIndex:0,"-webkit-tap-highlight-color":"rgba(0,0,0,0)"},s.style),this.renderToClone||r),this._cursor=e.style.cursor,this.renderer=s.forExport?new ve(e,i,n,s.style,!0):new t(e,i,n,s.style),K&&this.renderer.create(this,e,i,n),this.renderer.chartIndex=this.index},getMargins:function(t){var e=this.spacing,i=this.margin,n=this.titleOffset;this.resetMargins(),n&&!kt(i[0])&&(this.plotTop=I(this.plotTop,n+this.options.title.margin+e[0])),this.legend.adjustMargins(i,e),this.extraBottomMargin&&(this.marginBottom+=this.extraBottomMargin),this.extraTopMargin&&(this.plotTop+=this.extraTopMargin),t||this.getAxisMargins()},getAxisMargins:function(){var t=this,e=t.axisOffset=[0,0,0,0],i=t.margin;t.hasCartesianSeries&&qt(t.axes,(function(t){t.getOffset()})),qt(ct,(function(n,r){kt(i[r])||(t[n]+=e[r])})),t.setChartSize()},reflow:function(t){var e=this,i=e.options.chart,n=e.renderTo,r=i.width||jt(n,"width"),o=i.height||jt(n,"height"),a=t?t.target:A,s=function(){e.container&&(e.setSize(r,o,!1),e.hasUserSize=null)};e.hasUserSize||e.isPrinting||!r||!o||a!==A&&a!==P||(r===e.containerWidth&&o===e.containerHeight||(clearTimeout(e.reflowTimeout),t?e.reflowTimeout=setTimeout(s,100):s()),e.containerWidth=r,e.containerHeight=o)},initReflow:function(){var t=this,e=function(e){t.reflow(e)};te(A,"resize",e),te(t,"destroy",(function(){ee(A,"resize",e)}))},setSize:function(t,e,i){var n,r,o,a=this,s=a.renderer,l=s.globalAnimation;a.isResizing+=1,o=function(){a&&ie(a,"endResize",null,(function(){a.isResizing-=1}))},Ut(i,a),a.oldChartHeight=a.chartHeight,a.oldChartWidth=a.chartWidth,kt(t)&&(a.chartWidth=n=I(0,C(t)),a.hasUserSize=!!n),kt(e)&&(a.chartHeight=r=I(0,C(e))),(l?re:Pt)(a.container,{width:n+ot,height:r+ot},l),a.setChartSize(!0),s.setSize(n,r,i),a.maxTicks=null,qt(a.axes,(function(t){t.isDirty=!0,t.setScale()})),qt(a.series,(function(t){t.isDirty=!0})),a.isDirtyLegend=!0,a.isDirtyBox=!0,a.layOutTitles(),a.getMargins(),a.redraw(i),a.oldChartHeight=null,ie(a,"resize"),!1===l?o():setTimeout(o,l&&l.duration||500)},setChartSize:function(t){var e,i,n,r,o,a,s,l=this.inverted,h=this.renderer,c=this.chartWidth,u=this.chartHeight,p=this.options.chart,d=this.spacing,f=this.clipOffset;this.plotLeft=n=C(this.plotLeft),this.plotTop=r=C(this.plotTop),this.plotWidth=o=I(0,C(c-n-this.marginRight)),this.plotHeight=a=I(0,C(u-r-this.marginBottom)),this.plotSizeX=l?a:o,this.plotSizeY=l?o:a,this.plotBorderWidth=p.plotBorderWidth||0,this.spacingBox=h.spacingBox={x:d[3],y:d[0],width:c-d[3]-d[1],height:u-d[0]-d[2]},this.plotBox=h.plotBox={x:n,y:r,width:o,height:a},s=2*M(this.plotBorderWidth/2),e=L(I(s,f[3])/2),i=L(I(s,f[0])/2),this.clipBox={x:e,y:i,width:M(this.plotSizeX-I(s,f[1])/2-e),height:I(0,M(this.plotSizeY-I(s,f[2])/2-i))},t||qt(this.axes,(function(t){t.setAxisSize(),t.setAxisTranslation()}))},resetMargins:function(){var t=this;qt(ct,(function(e,i){t[e]=Tt(t.margin[i],t.spacing[i])})),t.axisOffset=[0,0,0,0],t.clipOffset=[0,0,0,0]},drawChartBox:function(){var t,e,i=this.options.chart,n=this.renderer,r=this.chartWidth,o=this.chartHeight,a=this.chartBackground,s=this.plotBackground,l=this.plotBorder,h=this.plotBGImage,c=i.borderWidth||0,u=i.backgroundColor,p=i.plotBackgroundColor,d=i.plotBackgroundImage,f=i.plotBorderWidth||0,g=this.plotLeft,m=this.plotTop,y=this.plotWidth,v=this.plotHeight,_=this.plotBox,x=this.clipRect,b=this.clipBox;t=c+(i.shadow?8:0),(c||u)&&(a?a.animate(a.crisp({width:r-t,height:o-t})):(e={fill:u||at},c&&(e.stroke=i.borderColor,e["stroke-width"]=c),this.chartBackground=n.rect(t/2,t/2,r-t,o-t,i.borderRadius,c).attr(e).addClass(nt+"background").add().shadow(i.shadow))),p&&(s?s.animate(_):this.plotBackground=n.rect(g,m,y,v,0).attr({fill:p}).add().shadow(i.plotShadow)),d&&(h?h.animate(_):this.plotBGImage=n.image(d,g,m,y,v).add()),x?x.animate({width:b.width,height:b.height}):this.clipRect=n.clipRect(b),f&&(l?l.animate(l.crisp({x:g,y:m,width:y,height:v,strokeWidth:-f})):this.plotBorder=n.rect(g,m,y,v,0,-f).attr({stroke:i.plotBorderColor,"stroke-width":f,fill:at,zIndex:1}).add()),this.isDirtyBox=!1},propFromSeries:function(){var t,e,i,n=this,r=n.options.chart,o=n.options.series;qt(["inverted","angular","polar"],(function(a){for(t=ut[r.type||r.defaultSeriesType],i=n[a]||r[a]||t&&t.prototype[a],e=o&&o.length;!i&&e--;)(t=ut[o[e].type])&&t.prototype[a]&&(i=!0);n[a]=i}))},linkSeries:function(){var t=this,e=t.series;qt(e,(function(t){t.linkedSeries.length=0})),qt(e,(function(e){var i=e.options.linkedTo;gt(i)&&(i=":previous"===i?t.series[e.index-1]:t.get(i))&&(i.linkedSeries.push(e),e.linkedParent=i,e.visible=Tt(e.options.visible,i.options.visible,e.visible))}))},renderSeries:function(){qt(this.series,(function(t){t.translate(),t.render()}))},renderLabels:function(){var t=this,e=t.options.labels;e.items&&qt(e.items,(function(i){var n=pt(e.style,i.style),r=ft(n.left)+t.plotLeft,o=ft(n.top)+t.plotTop+12;delete n.left,delete n.top,t.renderer.text(i.html,r,o).attr({zIndex:2}).css(n).add()}))},render:function(){var t,e,i,n,r=this.axes,o=this.renderer,a=this.options;this.setTitle(),this.legend=new Ce(this,a.legend),this.getStacks&&this.getStacks(),this.getMargins(!0),this.setChartSize(),t=this.plotWidth,e=this.plotHeight=this.plotHeight-13,qt(r,(function(t){t.setScale()})),this.getAxisMargins(),i=t/this.plotWidth>1.1,n=e/this.plotHeight>1.1,(i||n)&&(this.maxTicks=null,qt(r,(function(t){(t.horiz&&i||!t.horiz&&n)&&t.setTickInterval(!0)})),this.getMargins()),this.drawChartBox(),this.hasCartesianSeries&&qt(r,(function(t){t.render()})),this.seriesGroup||(this.seriesGroup=o.g("series-group").attr({zIndex:3}).add()),this.renderSeries(),this.renderLabels(),this.showCredits(a.credits),this.hasRendered=!0},showCredits:function(t){t.enabled&&!this.credits&&(this.credits=this.renderer.text(t.text,0,0).on("click",(function(){t.href&&(location.href=t.href)})).attr({align:t.position.align,zIndex:8}).css(t.style).add().align(t.position))},destroy:function(){var t,e=this,i=e.axes,n=e.series,r=e.container,o=r&&r.parentNode;for(ie(e,"destroy"),Q[e.index]=void 0,tt--,e.renderTo.removeAttribute("data-highcharts-chart"),ee(e),t=i.length;t--;)i[t]=i[t].destroy();for(t=n.length;t--;)n[t]=n[t].destroy();for(t in qt(["title","subtitle","chartBackground","plotBackground","plotBGImage","plotBorder","seriesGroup","clipRect","credits","pointer","scroller","rangeSelector","legend","resetZoomButton","tooltip","renderer"],(function(t){var i=e[t];i&&i.destroy&&(e[t]=i.destroy())})),r&&(r.innerHTML="",ee(r),o&&Bt(r)),e)delete e[t]},isReadyToRender:function(){var t=this;return!(!j&&A==A.top&&"complete"!==P.readyState||K&&!A.canvg)||(K?ye.push((function(){t.firstRender()}),t.options.global.canvasToolsURL):P.attachEvent("onreadystatechange",(function(){P.detachEvent("onreadystatechange",t.firstRender),"complete"===P.readyState&&t.firstRender()})),!1)},firstRender:function(){var t=this,e=t.options,i=t.callback;t.isReadyToRender()&&(t.getContainer(),ie(t,"init"),t.resetMargins(),t.setChartSize(),t.propFromSeries(),t.getAxes(),qt(e.series||[],(function(e){t.initSeries(e)})),t.linkSeries(),ie(t,"beforeRender"),T.Pointer&&(t.pointer=new Se(t,e)),t.render(),t.renderer.draw(),i&&i.apply(t,[t]),qt(t.callbacks,(function(e){void 0!==t.index&&e.apply(t,[t])})),ie(t,"load"),t.cloneRenderTo(!0))},splashArray:function(t,e){var i=e[t],n=mt(i)?i:[i,i,i,i];return[Tt(e[t+"Top"],n[0]),Tt(e[t+"Right"],n[1]),Tt(e[t+"Bottom"],n[2]),Tt(e[t+"Left"],n[3])]}};var Ie=T.CenteredSeriesMixin={getCenter:function(){var t,e,i,n=this.options,r=this.chart,o=2*(n.slicedOffset||0),a=r.plotWidth-2*o,s=r.plotHeight-2*o,l=n.center,h=[Tt(l[0],"50%"),Tt(l[1],"50%"),n.size||"100%",n.innerSize||0],c=E(a,s);for(e=0;e<4;++e)i=h[e],t=e<2||2===e&&/%$/.test(i),h[e]=Mt(i,[a,s,c,h[2]][e])+(t?o:0);return h}},Ee=function(){};Ee.prototype={init:function(t,e,i){var n;return this.series=t,this.color=t.color,this.applyOptions(e,i),this.pointAttr={},t.options.colorByPoint&&(n=t.options.colors||t.chart.options.colors,this.color=this.color||n[t.colorCounter++],t.colorCounter===n.length&&(t.colorCounter=0)),t.chart.pointCount++,this},applyOptions:function(t,e){var i=this.series,n=i.options.pointValKey||i.pointValKey;return t=Ee.prototype.optionsToObject.call(this,t),pt(this,t),this.options=this.options?pt(this.options,t):t,n&&(this.y=this[n]),void 0===this.x&&i&&(this.x=void 0===e?i.autoIncrement():e),this},optionsToObject:function(t){var e,i={},n=this.series,r=n.options.keys,o=r||n.pointArrayMap||["y"],a=o.length,s=0,l=0;if("number"==typeof t||null===t)i[o[0]]=t;else if(yt(t))for(!r&&t.length>a&&("string"===(e=typeof t[0])?i.name=t[0]:"number"===e&&(i.x=t[0]),s++);l<a;)i[o[l++]]=t[s++];else"object"==typeof t&&(i=t,t.dataLabels&&(n._hasPointLabels=!0),t.marker&&(n._hasPointMarkers=!0));return i},destroy:function(){var t,e=this.series.chart,i=e.hoverPoints;for(t in e.pointCount--,i&&(this.setState(),bt(i,this),i.length||(e.hoverPoints=null)),this===e.hoverPoint&&this.onMouseOut(),(this.graphic||this.dataLabel)&&(ee(this),this.destroyElements()),this.legendItem&&e.legend.destroyItem(this),this)this[t]=null},destroyElements:function(){for(var t,e=["graphic","dataLabel","dataLabelUpper","group","connector","shadowGroup"],i=6;i--;)this[t=e[i]]&&(this[t]=this[t].destroy())},getLabelConfig:function(){return{x:this.category,y:this.y,color:this.color,key:this.name||this.category,series:this.series,point:this,percentage:this.percentage,total:this.total||this.stackTotal}},tooltipFormatter:function(t){var e=this.series,i=e.tooltipOptions,n=Tt(i.valueDecimals,""),r=i.valuePrefix||"",o=i.valueSuffix||"";return qt(e.pointArrayMap||["y"],(function(e){e="{point."+e,(r||o)&&(t=t.replace(e+"}",r+e+"}"+o)),t=t.replace(e+"}",e+":,."+n+"f}")})),Rt(t,{point:this,series:this.series})},firePointEvent:function(t,e,i){var n=this,r=this.series.options;(r.point.events[t]||n.options&&n.options.events&&n.options.events[t])&&this.importEvents(),"click"===t&&r.allowPointSelect&&(i=function(t){n.select&&n.select(null,t.ctrlKey||t.metaKey||t.shiftKey)}),ie(this,t,e,i)}};var Re=T.Series=function(){};function He(t,e,i,n,r){var o=t.chart.inverted;this.axis=t,this.isNegative=i,this.options=e,this.x=n,this.total=null,this.points={},this.stack=r,this.alignOptions={align:e.align||(o?i?"left":"right":"center"),verticalAlign:e.verticalAlign||(o?"middle":i?"bottom":"top"),y:Tt(e.y,o?4:i?14:-6),x:Tt(e.x,o?i?-6:6:0)},this.textAlign=e.textAlign||(o?i?"right":"left":"center")}Re.prototype={isCartesian:!0,type:"line",pointClass:Ee,sorted:!0,requireSorting:!0,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor",r:"radius"},axisTypes:["xAxis","yAxis"],colorCounter:0,parallelArrays:["x","y"],init:function(t,e){var i,n,r=this,o=t.series,a=function(t,e){return Tt(t.options.index,t._i)-Tt(e.options.index,e._i)};for(i in r.chart=t,r.options=e=r.setOptions(e),r.linkedSeries=[],r.bindAxes(),pt(r,{name:e.name,state:"",pointAttr:{},visible:!1!==e.visible,selected:!0===e.selected}),K&&(e.animation=!1),n=e.events)te(r,i,n[i]);(n&&n.click||e.point&&e.point.events&&e.point.events.click||e.allowPointSelect)&&(t.runTrackerClick=!0),r.getColor(),r.getSymbol(),qt(r.parallelArrays,(function(t){r[t+"Data"]=[]})),r.setData(e.data,!1),r.isCartesian&&(t.hasCartesianSeries=!0),o.push(r),r._i=o.length-1,Yt(o,a),this.yAxis&&Yt(this.yAxis.series,a),qt(o,(function(t,e){t.index=e,t.name=t.name||"Series "+(e+1)}))},bindAxes:function(){var t,e=this,i=e.options,n=e.chart;qt(e.axisTypes||[],(function(r){qt(n[r],(function(n){t=n.options,(i[r]===t.index||void 0!==i[r]&&i[r]===t.id||void 0===i[r]&&0===t.index)&&(n.series.push(e),e[r]=n,n.isDirty=!0)})),e[r]||e.optionalAxis===r||Nt(18,!0)}))},updateParallelArrays:function(t,e){var i=t.series,n=arguments,r="number"==typeof e?function(n){var r="y"===n&&i.toYData?i.toYData(t):t[n];i[n+"Data"][e]=r}:function(t){Array.prototype[e].apply(i[t+"Data"],Array.prototype.slice.call(n,2))};qt(i.parallelArrays,r)},autoIncrement:function(){var t,e,i=this.options,n=this.xIncrement,r=i.pointIntervalUnit;return n=Tt(n,i.pointStart,0),this.pointInterval=e=Tt(this.pointInterval,i.pointInterval,1),"month"!==r&&"year"!==r||(t=new l(n),e=(t="month"===r?+t[w](t[m]()+e):+t[S](t[y]()+e))-n),this.xIncrement=n+e,n},getSegments:function(){var t,e=-1,i=[],n=this.points,r=n.length;if(r)if(this.options.connectNulls){for(t=r;t--;)null===n[t].y&&n.splice(t,1);n.length&&(i=[n])}else qt(n,(function(t,o){null===t.y?(o>e+1&&i.push(n.slice(e+1,o)),e=o):o===r-1&&i.push(n.slice(e+1,o+1))}));this.segments=i},setOptions:function(t){var e,i,r=this.chart,o=r.options.plotOptions,a=r.userOptions||{},s=a.plotOptions||{},l=o[this.type];return this.userOptions=t,e=dt(l,o.series,t),this.tooltipOptions=dt(n.tooltip,n.plotOptions[this.type].tooltip,a.tooltip,s.series&&s.series.tooltip,s[this.type]&&s[this.type].tooltip,t.tooltip),null===l.marker&&delete e.marker,this.zoneAxis=e.zoneAxis,i=this.zones=(e.zones||[]).slice(),!e.negativeColor&&!e.negativeFillColor||e.zones||i.push({value:e[this.zoneAxis+"Threshold"]||e.threshold||0,color:e.negativeColor,fillColor:e.negativeFillColor}),i.length&&kt(i[i.length-1].value)&&i.push({color:this.color,fillColor:this.fillColor}),e},getCyclic:function(t,e,i){var n,r=this.userOptions,o="_"+t+"Index",a=t+"Counter";e||(kt(r[o])?n=r[o]:(r[o]=n=this.chart[a]%i.length,this.chart[a]+=1),e=i[n]),this[t]=e},getColor:function(){this.options.colorByPoint?this.options.color=null:this.getCyclic("color",this.options.color||ae[this.type].color,this.chart.options.colors)},getSymbol:function(){var t=this.options.marker;this.getCyclic("symbol",t.symbol,this.chart.options.symbols),/^url/.test(this.symbol)&&(t.radius=0)},drawLegendSymbol:Me.drawLineMarker,setData:function(t,e,i,n){var r,o,a,s=this,l=s.points,h=l&&l.length||0,c=s.options,u=s.chart,p=null,d=s.xAxis,f=d&&!!d.categories,g=c.turboThreshold,m=this.xData,y=this.yData,v=s.pointArrayMap,_=v&&v.length;if(r=(t=t||[]).length,e=Tt(e,!0),!1!==n&&r&&h===r&&!s.cropped&&!s.hasGroupedData&&s.visible)qt(t,(function(t,e){l[e].update&&l[e].update(t,!1,null,!1)}));else{if(s.xIncrement=null,s.pointRange=f?1:c.pointRange,s.colorCounter=0,qt(this.parallelArrays,(function(t){s[t+"Data"].length=0})),g&&r>g){for(o=0;null===p&&o<r;)p=t[o],o++;if(vt(p)){var x=Tt(c.pointStart,0),b=Tt(c.pointInterval,1);for(o=0;o<r;o++)m[o]=x,y[o]=t[o],x+=b;s.xIncrement=x}else if(yt(p))if(_)for(o=0;o<r;o++)a=t[o],m[o]=a[0],y[o]=a.slice(1,_+1);else for(o=0;o<r;o++)a=t[o],m[o]=a[0],y[o]=a[1];else Nt(12)}else for(o=0;o<r;o++)void 0!==t[o]&&(a={series:s},s.pointClass.prototype.applyOptions.apply(a,[t[o]]),s.updateParallelArrays(a,o),f&&kt(a.name)&&(d.names[a.x]=a.name));for(gt(y[0])&&Nt(14,!0),s.data=[],s.options.data=t,o=h;o--;)l[o]&&l[o].destroy&&l[o].destroy();d&&(d.minRange=d.userMinRange),s.isDirty=s.isDirtyData=u.isDirtyBox=!0,i=!1}e&&u.redraw(i)},processData:function(t){var e,i,n,r,o,a,s,l,h=this.xData,c=this.yData,u=h.length,p=0,d=this.xAxis,f=this.options,g=f.cropThreshold,m=this.isCartesian;if(m&&!this.isDirty&&!d.isDirty&&!this.yAxis.isDirty&&!t)return!1;for(d&&(s=(a=d.getExtremes()).min,l=a.max),m&&this.sorted&&(!g||u>g||this.forceCrop)&&(h[u-1]<s||h[0]>l?(h=[],c=[]):(h[0]<s||h[u-1]>l)&&(h=(e=this.cropData(this.xData,this.yData,s,l)).xData,c=e.yData,p=e.start,i=!0)),o=h.length-1;o>=0;o--)(n=h[o]-h[o-1])>0&&(void 0===r||n<r)?r=n:n<0&&this.requireSorting&&Nt(15);this.cropped=i,this.cropStart=p,this.processedXData=h,this.processedYData=c,null===f.pointRange&&(this.pointRange=r||1),this.closestPointRange=r},cropData:function(t,e,i,n){var r,o=t.length,a=0,s=o,l=Tt(this.cropShoulder,1);for(r=0;r<o;r++)if(t[r]>=i){a=I(0,r-l);break}for(;r<o;r++)if(t[r]>n){s=r+l;break}return{xData:t.slice(a,s),yData:e.slice(a,s),start:a,end:s}},generatePoints:function(){var t,e,i,n,r=this.options.data,o=this.data,a=this.processedXData,s=this.processedYData,l=this.pointClass,h=a.length,c=this.cropStart||0,u=this.hasGroupedData,p=[];if(!o&&!u){var d=[];d.length=r.length,o=this.data=d}for(n=0;n<h;n++)e=c+n,u?p[n]=(new l).init(this,[a[n]].concat(St(s[n]))):(o[e]?i=o[e]:void 0!==r[e]&&(o[e]=i=(new l).init(this,r[e],a[n])),p[n]=i),p[n].index=e;if(o&&(h!==(t=o.length)||u))for(n=0;n<t;n++)n!==c||u||(n+=h),o[n]&&(o[n].destroyElements(),o[n].plotX=void 0);this.data=o,this.points=p},getExtremes:function(t){var e,i,n,r,o,a,s,l=this.xAxis,h=this.yAxis,c=this.processedXData,u=[],p=0,d=l.getExtremes(),f=d.min,g=d.max;for(e=(t=t||this.stackedYData||this.processedYData).length,a=0;a<e;a++)if(r=c[a],i=null!=(o=t[a])&&(!h.isLog||o.length||o>0),n=this.getExtremesFromAll||this.options.getExtremesFromAll||this.cropped||(c[a+1]||r)>=f&&(c[a-1]||r)<=g,i&&n)if(s=o.length)for(;s--;)null!==o[s]&&(u[p++]=o[s]);else u[p++]=o;this.dataMin=Ft(u),this.dataMax=Xt(u)},translate:function(){this.processedXData||this.processData(),this.generatePoints();var t,e,i,n,r=this.options,o=r.stacking,a=this.xAxis,s=a.categories,l=this.yAxis,h=this.points,c=h.length,u=!!this.modifyValue,p=r.pointPlacement,d="between"===p||vt(p),f=r.threshold,g=r.startFromThreshold?f:0,m=Number.MAX_VALUE;for(t=0;t<c;t++){var y,v,_=h[t],x=_.x,b=_.y,k=_.low,w=o&&l.stacks[(this.negStacks&&b<(g?0:f)?"-":"")+this.stackKey];l.isLog&&null!==b&&b<=0&&(_.y=b=null,Nt(10)),_.plotX=e=E(I(-1e5,a.translate(x,0,0,0,1,p,"flags"===this.type)),1e5),o&&this.visible&&w&&w[x]&&(k=(v=(y=w[x]).points[this.index+","+t])[0],b=v[1],k===g&&(k=Tt(f,l.min)),l.isLog&&k<=0&&(k=null),_.total=_.stackTotal=y.total,_.percentage=y.total&&_.y/y.total*100,_.stackY=b,y.setOffset(this.pointXOffset||0,this.barW||0)),_.yBottom=kt(k)?l.translate(k,0,1,0,1):null,u&&(b=this.modifyValue(b,_)),_.plotY=i="number"==typeof b&&b!==1/0?E(I(-1e5,l.translate(b,0,1,0,1)),1e5):void 0,_.isInside=void 0!==i&&i>=0&&i<=l.len&&e>=0&&e<=a.len,_.clientX=d?a.translate(x,0,0,0,1):e,_.negative=_.y<(f||0),_.category=s&&void 0!==s[_.x]?s[_.x]:_.x,t&&(m=E(m,R(e-n))),n=e}this.closestPointRangePx=m,this.getSegments()},setClip:function(t){var e=this.chart,i=e.renderer,n=e.inverted,r=this.clipBox,o=r||e.clipBox,a=this.sharedClipKey||["_sharedClip",t&&t.duration,t&&t.easing,o.height].join(","),s=e[a],l=e[a+"m"];s||(t&&(o.width=0,e[a+"m"]=l=i.clipRect(-99,n?-e.plotLeft:-e.plotTop,99,n?e.chartWidth:e.chartHeight)),e[a]=s=i.clipRect(o)),t&&(s.count+=1),!1!==this.options.clip&&(this.group.clip(t||r?s:e.clipRect),this.markerGroup.clip(l),this.sharedClipKey=a),t||(s.count-=1,s.count<=0&&a&&e[a]&&(r||(e[a]=e[a].destroy()),e[a+"m"]&&(e[a+"m"]=e[a+"m"].destroy())))},animate:function(t){var e,i,n=this.chart,r=this.options.animation;r&&!mt(r)&&(r=ae[this.type].animation),t?this.setClip(r):((e=n[i=this.sharedClipKey])&&e.animate({width:n.plotSizeX},r),n[i+"m"]&&n[i+"m"].animate({width:n.plotSizeX+99},r),this.animate=null)},afterAnimate:function(){this.setClip(),ie(this,"afterAnimate")},drawPoints:function(){var t,e,i,n,r,o,a,s,l,h,c,u,p,d=this.points,f=this.chart,g=this.options.marker,m=this.pointAttr[""],y=this.markerGroup,v=this.xAxis,_=Tt(g.enabled,v.isRadial,this.closestPointRangePx>2*g.radius);if(!1!==g.enabled||this._hasPointMarkers)for(n=d.length;n--;)r=d[n],e=M(r.plotX),i=r.plotY,l=r.graphic,h=r.marker||{},c=!!r.marker,u=_&&void 0===h.enabled||h.enabled,p=r.isInside,u&&void 0!==i&&!isNaN(i)&&null!==r.y?(o=(t=r.pointAttr[r.selected?"select":""]||m).r,s=0===(a=Tt(h.symbol,this.symbol)).indexOf("url"),l?l[p?"show":"hide"](!0).animate(pt({x:e-o,y:i-o},l.symbolName?{width:2*o,height:2*o}:{})):p&&(o>0||s)&&(r.graphic=l=f.renderer.symbol(a,e-o,i-o,2*o,2*o,c?h:g).attr(t).add(y))):l&&(r.graphic=l.destroy())},convertAttribs:function(t,e,i,n){var r,o,a=this.pointAttrToOptions,s={};for(r in t=t||{},e=e||{},i=i||{},n=n||{},a)o=a[r],s[r]=Tt(t[o],e[r],i[r],n[r]);return s},getAttribs:function(){var t,e,i,n,r,o,a,s,l=this,h=l.options,c=ae[l.type].marker?h.marker:h,u=c.states,p=u.hover,d=l.color,f=l.options.negativeColor,g={stroke:d,fill:d},m=l.points||[],y=[],v=l.pointAttrToOptions,_=l.hasPointSpecificOptions,x=c.lineColor,b=c.fillColor,k=h.turboThreshold,w=l.zones,S=l.zoneAxis||"y";if(h.marker?(p.radius=p.radius||c.radius+p.radiusPlus,p.lineWidth=p.lineWidth||c.lineWidth+p.lineWidthPlus):(p.color=p.color||pe(p.color||d).brighten(p.brightness).get(),p.negativeColor=p.negativeColor||pe(p.negativeColor||f).brighten(p.brightness).get()),y[""]=l.convertAttribs(c,g),qt(["hover","select"],(function(t){y[t]=l.convertAttribs(u[t],y[""])})),l.pointAttr=y,e=m.length,!k||e<k||_)for(;e--;){if((c=(r=m[e]).options&&r.options.marker||r.options)&&!1===c.enabled&&(c.radius=0),w.length){for(n=w[i=0];r[S]>=n.value;)n=w[++i];n.color&&(r.color=r.fillColor=n.color)}if(_=h.colorByPoint||r.color,r.options)for(s in v)kt(c[v[s]])&&(_=!0);_?(o=[],t=(u=(c=c||{}).states||{}).hover=u.hover||{},h.marker||(t.color=t.color||!r.options.color&&p[r.negative&&f?"negativeColor":"color"]||pe(r.color).brighten(t.brightness||p.brightness).get()),a={color:r.color},b||(a.fillColor=r.color),x||(a.lineColor=r.color),c.hasOwnProperty("color")&&!c.color&&delete c.color,o[""]=l.convertAttribs(pt(a,c),y[""]),o.hover=l.convertAttribs(u.hover,y.hover,o[""]),o.select=l.convertAttribs(u.select,y.select,o[""])):o=y,r.pointAttr=o}},destroy:function(){var t,e,i,n,r,o=this,a=o.chart,s=/AppleWebKit\/533/.test(X),l=o.data||[];for(ie(o,"destroy"),ee(o),qt(o.axisTypes||[],(function(t){(r=o[t])&&(bt(r.series,o),r.isDirty=r.forceRedraw=!0)})),o.legendItem&&o.chart.legend.destroyItem(o),e=l.length;e--;)(i=l[e])&&i.destroy&&i.destroy();for(n in o.points=null,clearTimeout(o.animationTimeout),o)o[n]instanceof de&&!o[n].survive&&(t=s&&"group"===n?"hide":"destroy",o[n][t]());for(n in a.hoverSeries===o&&(a.hoverSeries=null),bt(a.series,o),o)delete o[n]},getSegmentPath:function(t){var e=this,i=[],n=e.options.step;return qt(t,(function(r,o){var a,s=r.plotX,l=r.plotY;e.getPointSpline?i.push.apply(i,e.getPointSpline(t,r,o)):(i.push(o?lt:st),n&&o&&(a=t[o-1],"right"===n?i.push(a.plotX,l):"center"===n?i.push((a.plotX+s)/2,a.plotY,(a.plotX+s)/2,l):i.push(s,a.plotY)),i.push(r.plotX,r.plotY))})),i},getGraphPath:function(){var t,e=this,i=[],n=[];return qt(e.segments,(function(r){t=e.getSegmentPath(r),r.length>1?i=i.concat(t):n.push(r[0])})),e.singlePoints=n,e.graphPath=i,i},drawGraph:function(){var t=this,e=this.options,i=[["graph",e.lineColor||this.color,e.dashStyle]],n=e.lineWidth,r="square"!==e.linecap,o=this.getGraphPath(),a=this.fillGraph&&this.color||at,s=this.zones;qt(s,(function(n,r){i.push(["zoneGraph"+r,n.color||t.color,n.dashStyle||e.dashStyle])})),qt(i,(function(i,s){var l,h=i[0],c=t[h];c?c.animate({d:o}):(n||a)&&o.length&&(l={stroke:i[1],"stroke-width":n,fill:a,zIndex:1},i[2]?l.dashstyle=i[2]:r&&(l["stroke-linecap"]=l["stroke-linejoin"]="round"),t[h]=t.chart.renderer.path(o).attr(l).add(t.group).shadow(s<2&&e.shadow))}))},applyZones:function(){var t,e,i,n,r,o,a,s=this,l=this.chart,h=l.renderer,c=this.zones,u=this.clips||[],p=this.graph,d=this.area,f=I(l.chartWidth,l.chartHeight),g=this[(this.zoneAxis||"y")+"Axis"],m=g.reversed,y=l.inverted,v=g.horiz,_=!1;c.length&&(p||d)&&void 0!==g.min&&(p&&p.hide(),d&&d.hide(),n=g.getExtremes(),qt(c,(function(c,x){t=m?v?l.plotWidth:0:v?0:g.toPixels(n.min),t=E(I(Tt(e,t),0),f),e=E(I(C(g.toPixels(Tt(c.value,n.max),!0)),0),f),_&&(t=e=g.toPixels(n.max)),r=Math.abs(t-e),o=E(t,e),a=I(t,e),g.isXAxis?(i={x:y?a:o,y:0,width:r,height:f},v||(i.x=l.plotHeight-i.x)):(i={x:0,y:y?a:o,width:f,height:r},v&&(i.y=l.plotWidth-i.y)),l.inverted&&h.isVML&&(i=g.isXAxis?{x:0,y:m?o:a,height:i.width,width:l.chartWidth}:{x:i.y-l.plotLeft-l.spacingBox.x,y:0,width:i.height,height:l.chartHeight}),u[x]?u[x].animate(i):(u[x]=h.clipRect(i),p&&s["zoneGraph"+x].clip(u[x]),d&&s["zoneArea"+x].clip(u[x])),_=c.value>n.max})),this.clips=u)},invertGroups:function(){var t=this,e=t.chart;function i(){var e={width:t.yAxis.len,height:t.xAxis.len};qt(["group","markerGroup"],(function(i){t[i]&&t[i].attr(e).invert()}))}t.xAxis&&(te(e,"resize",i),te(t,"destroy",(function(){ee(e,"resize",i)})),i(),t.invertGroups=i)},plotGroup:function(t,e,i,n,r){var o=this[t],a=!o;return a&&(this[t]=o=this.chart.renderer.g(e).attr({visibility:i,zIndex:n||.1}).add(r)),o[a?"attr":"animate"](this.getPlotBox()),o},getPlotBox:function(){var t=this.chart,e=this.xAxis,i=this.yAxis;return t.inverted&&(e=i,i=this.xAxis),{translateX:e?e.left:t.plotLeft,translateY:i?i.top:t.plotTop,scaleX:1,scaleY:1}},render:function(){var t,e=this,i=e.chart,n=e.options,r=n.animation,o=r&&!!e.animate&&i.renderer.isSVG&&Tt(r.duration,500)||0,a=e.visible?rt:it,s=n.zIndex,l=e.hasRendered,h=i.seriesGroup;t=e.plotGroup("group","series",a,s,h),e.markerGroup=e.plotGroup("markerGroup","markers",a,s,h),o&&e.animate(!0),e.getAttribs(),t.inverted=!!e.isCartesian&&i.inverted,e.drawGraph&&(e.drawGraph(),e.applyZones()),qt(e.points,(function(t){t.redraw&&t.redraw()})),e.drawDataLabels&&e.drawDataLabels(),e.visible&&e.drawPoints(),e.drawTracker&&!1!==e.options.enableMouseTracking&&e.drawTracker(),i.inverted&&e.invertGroups(),!1===n.clip||e.sharedClipKey||l||t.clip(i.clipRect),o&&e.animate(),l||(o?e.animationTimeout=setTimeout((function(){e.afterAnimate()}),o):e.afterAnimate()),e.isDirty=e.isDirtyData=!1,e.hasRendered=!0},redraw:function(){var t=this.chart,e=this.isDirtyData,i=this.isDirty,n=this.group,r=this.xAxis,o=this.yAxis;n&&(t.inverted&&n.attr({width:t.plotWidth,height:t.plotHeight}),n.animate({translateX:Tt(r&&r.left,t.plotLeft),translateY:Tt(o&&o.top,t.plotTop)})),this.translate(),this.render(),e&&ie(this,"updatedData"),(i||e)&&delete this.kdTree},kdDimensions:1,kdAxisArray:["clientX","plotY"],searchPoint:function(t,e){var i=this.xAxis,n=this.yAxis,r=this.chart.inverted;return this.searchKDTree({clientX:r?i.len-t.chartY+i.pos:t.chartX-i.pos,plotY:r?n.len-t.chartX+n.pos:t.chartY-n.pos},e)},buildKDTree:function(){var t=this,e=t.kdDimensions;function i(){var i=Zt(t.points||[],(function(t){return null!==t.y}));t.kdTree=function e(i,n,r){var o,a,s=i&&i.length;if(s)return o=t.kdAxisArray[n%r],i.sort((function(t,e){return t[o]-e[o]})),{point:i[a=Math.floor(s/2)],left:e(i.slice(0,a),n+1,r),right:e(i.slice(a+1),n+1,r)}}(i,e,e)}delete t.kdTree,t.options.kdSync?i():setTimeout(i)},searchKDTree:function(t,e){var i=this,n=this.kdAxisArray[0],r=this.kdAxisArray[1],o=e?"distX":"dist";if(this.kdTree||this.buildKDTree(),this.kdTree)return function t(e,a,s,l){var h,c,u,p,d,f,g,m,y,v=a.point,_=i.kdAxisArray[s%l],x=v;return g=v,m=kt((f=e)[n])&&kt(g[n])?Math.pow(f[n]-g[n],2):null,y=(m||0)+((kt(f[r])&&kt(g[r])?Math.pow(f[r]-g[r],2):null)||0),g.dist=kt(y)?Math.sqrt(y):Number.MAX_VALUE,g.distX=kt(m)?Math.sqrt(m):Number.MAX_VALUE,u=(h=e[_]-v[_])<0?"right":"left",a[c=h<0?"left":"right"]&&(x=(p=t(e,a[c],s+1,l))[o]<x[o]?p:v),a[u]&&Math.sqrt(h*h)<x[o]&&(x=(d=t(e,a[u],s+1,l))[o]<x[o]?d:x),x}(t,this.kdTree,this.kdDimensions,this.kdDimensions)}},He.prototype={destroy:function(){zt(this,this.axis)},render:function(t){var e=this.options,i=e.format,n=i?Rt(i,this):e.formatter.call(this);this.label?this.label.attr({text:n,visibility:it}):this.label=this.axis.chart.renderer.text(n,null,null,e.useHTML).css(e.style).attr({align:this.textAlign,rotation:e.rotation,visibility:it}).add(t)},setOffset:function(t,e){var i,n=this.axis,r=n.chart,o=r.inverted,a=n.reversed,s=this.isNegative&&!a||!this.isNegative&&a,l=n.translate(n.usePercentage?100:this.total,0,0,0,1),h=n.translate(0),c=R(l-h),u=r.xAxis[0].translate(this.x)+t,p=r.plotHeight,d={x:o?s?l:l-c:u,y:o?p-u-e:s?p-l-c:p-l,width:o?c:e,height:o?e:c},f=this.label;f&&(f.align(this.alignOptions,null,d),i=f.alignAttr,f[!1===this.options.crop||r.isInsidePlot(i.x,i.y)?"show":"hide"](!0))}},Le.prototype.getStacks=function(){var t=this;qt(t.yAxis,(function(t){t.stacks&&t.hasVisibleSeries&&(t.oldStacks=t.stacks)})),qt(t.series,(function(e){!e.options.stacking||!0!==e.visible&&!1!==t.options.chart.ignoreHiddenSeries||(e.stackKey=e.type+Tt(e.options.stack,""))}))},be.prototype.buildStacks=function(){var t=this.series,e=Tt(this.options.reversedStacks,!0),i=t.length;if(!this.isXAxis){for(this.usePercentage=!1;i--;)t[e?i:t.length-i-1].setStackedPoints();if(this.usePercentage)for(i=0;i<t.length;i++)t[i].setPercentStacks()}},be.prototype.renderStackTotals=function(){var t,e,i,n=this.chart,r=n.renderer,o=this.stacks,a=this.stackTotalGroup;for(t in a||(this.stackTotalGroup=a=r.g("stack-labels").attr({visibility:rt,zIndex:6}).add()),a.translate(n.plotLeft,n.plotTop),o)for(i in e=o[t])e[i].render(a)},be.prototype.resetStacks=function(){var t,e,i=this.stacks;if(!this.isXAxis)for(t in i)for(e in i[t])i[t][e].touched<this.stacksTouched?(i[t][e].destroy(),delete i[t][e]):(i[t][e].total=null,i[t][e].cum=0)},be.prototype.cleanStacks=function(){var t,e,i;if(!this.isXAxis)for(e in this.oldStacks&&(t=this.stacks=this.oldStacks),t)for(i in t[e])t[e][i].cum=t[e][i].total},Re.prototype.setStackedPoints=function(){if(this.options.stacking&&(!0===this.visible||!1===this.chart.options.chart.ignoreHiddenSeries)){var t,e,i,n,r,o,a,s,l=this.processedXData,h=this.processedYData,c=[],u=h.length,p=this.options,d=p.threshold,f=p.startFromThreshold?d:0,g=p.stack,m=p.stacking,y=this.stackKey,v="-"+y,_=this.negStacks,x=this.yAxis,b=x.stacks,k=x.oldStacks;for(x.stacksTouched+=1,o=0;o<u;o++)a=l[o],s=h[o],r=this.index+","+o,b[n=(t=_&&s<(f?0:d))?v:y]||(b[n]={}),b[n][a]||(k[n]&&k[n][a]?(b[n][a]=k[n][a],b[n][a].total=null):b[n][a]=new He(x,x.options.stackLabels,t,a,g)),(e=b[n][a]).points[r]=[Tt(e.cum,f)],e.touched=x.stacksTouched,"percent"===m?(i=t?y:v,_&&b[i]&&b[i][a]?(i=b[i][a],e.total=i.total=I(i.total,e.total)+R(s)||0):e.total=Wt(e.total+(R(s)||0))):e.total=Wt(e.total+(s||0)),e.cum=Tt(e.cum,f)+(s||0),e.points[r].push(e.cum),c[o]=e.cum;"percent"===m&&(x.usePercentage=!0),this.stackedYData=c,x.oldStacks={}}},Re.prototype.setPercentStacks=function(){var t=this,e=t.stackKey,i=t.yAxis.stacks,n=t.processedXData;qt([e,"-"+e],(function(e){for(var r,o,a,s,l=n.length;l--;)r=n[l],(a=(o=i[e]&&i[e][r])&&o.points[t.index+","+l])&&(s=o.total?100/o.total:0,a[0]=Wt(a[0]*s),a[1]=Wt(a[1]*s),t.stackedYData[l]=a[1])}))},pt(Le.prototype,{addSeries:function(t,e,i){var n,r=this;return t&&(e=Tt(e,!0),ie(r,"addSeries",{options:t},(function(){n=r.initSeries(t),r.isDirtyLegend=!0,r.linkSeries(),e&&r.redraw(i)}))),n},addAxis:function(t,e,i,n){var r=e?"xAxis":"yAxis",o=this.options;new be(this,dt(t,{index:this[r].length,isX:e})),o[r]=St(o[r]||{}),o[r].push(t),Tt(i,!0)&&this.redraw(n)},showLoading:function(t){var e=this,i=e.options,n=e.loadingDiv,r=i.loading,o=function(){n&&Pt(n,{left:e.plotLeft+ot,top:e.plotTop+ot,width:e.plotWidth+ot,height:e.plotHeight+ot})};n||(e.loadingDiv=n=At(et,{className:nt+"loading"},pt(r.style,{zIndex:10,display:at}),e.container),e.loadingSpan=At("span",null,r.labelStyle,n),te(e,"redraw",o)),e.loadingSpan.innerHTML=t||i.lang.loading,e.loadingShown||(Pt(n,{opacity:0,display:""}),re(n,{opacity:r.style.opacity},{duration:r.showDuration||0}),e.loadingShown=!0),o()},hideLoading:function(){var t=this.options,e=this.loadingDiv;e&&re(e,{opacity:0},{duration:t.loading.hideDuration||100,complete:function(){Pt(e,{display:at})}}),this.loadingShown=!1}}),pt(Ee.prototype,{update:function(t,e,i,n){var r,o=this,a=o.series,s=o.graphic,l=a.chart,h=a.options,c=a.xAxis&&a.xAxis.names;function u(){o.applyOptions(t),null===o.y&&s&&(o.graphic=s.destroy()),mt(t)&&!yt(t)&&(o.redraw=function(){s&&s.element&&t&&t.marker&&t.marker.symbol&&(o.graphic=s.destroy()),t&&t.dataLabels&&o.dataLabel&&(o.dataLabel=o.dataLabel.destroy()),o.redraw=null}),r=o.index,a.updateParallelArrays(o,r),c&&o.name&&(c[o.x]=o.name),h.data[r]=o.options,a.isDirty=a.isDirtyData=!0,!a.fixedBox&&a.hasCartesianSeries&&(l.isDirtyBox=!0),"point"===h.legendType&&(l.isDirtyLegend=!0),e&&l.redraw(i)}e=Tt(e,!0),!1===n?u():o.firePointEvent("update",{options:t},u)},remove:function(t,e){this.series.removePoint(Kt(this,this.series.data),t,e)}}),pt(Re.prototype,{addPoint:function(t,e,i,n){var r,o,a,s,l=this,h=l.options,c=l.data,u=l.graph,p=l.area,d=l.chart,f=l.xAxis&&l.xAxis.names,g=u&&u.shift||0,m=["graph","area"],y=h.data,v=l.xData;if(Ut(n,d),i){for(a=l.zones.length;a--;)m.push("zoneGraph"+a,"zoneArea"+a);qt(m,(function(t){l[t]&&(l[t].shift=g+1)}))}if(p&&(p.isArea=!0),e=Tt(e,!0),r={series:l},l.pointClass.prototype.applyOptions.apply(r,[t]),s=r.x,a=v.length,l.requireSorting&&s<v[a-1])for(o=!0;a&&v[a-1]>s;)a--;l.updateParallelArrays(r,"splice",a,0,0),l.updateParallelArrays(r,a),f&&r.name&&(f[s]=r.name),y.splice(a,0,t),o&&(l.data.splice(a,0,null),l.processData()),"point"===h.legendType&&l.generatePoints(),i&&(c[0]&&c[0].remove?c[0].remove(!1):(c.shift(),l.updateParallelArrays(r,"shift"),y.shift())),l.isDirty=!0,l.isDirtyData=!0,e&&(l.getAttribs(),d.redraw())},removePoint:function(t,e,i){var n=this,r=n.data,o=r[t],a=n.points,s=n.chart,l=function(){r.length===a.length&&a.splice(t,1),r.splice(t,1),n.options.data.splice(t,1),n.updateParallelArrays(o||{series:n},"splice",t,1),o&&o.destroy(),n.isDirty=!0,n.isDirtyData=!0,e&&s.redraw()};Ut(i,s),e=Tt(e,!0),o?o.firePointEvent("remove",null,l):l()},remove:function(t,e){var i=this,n=i.chart;t=Tt(t,!0),i.isRemoving||(i.isRemoving=!0,ie(i,"remove",null,(function(){i.destroy(),n.isDirtyLegend=n.isDirtyBox=!0,n.linkSeries(),t&&n.redraw(e)}))),i.isRemoving=!1},update:function(t,e){var i,n=this,r=this.chart,o=this.userOptions,a=this.type,s=ut[a].prototype,l=["group","markerGroup","dataLabelsGroup"];for(i in(t.type&&t.type!==a||void 0!==t.zIndex)&&(l.length=0),qt(l,(function(t){l[t]=n[t],delete n[t]})),t=dt(o,{animation:!1,index:this.index,pointStart:this.xData[0]},{data:this.options.data},t),this.remove(!1),s)this[i]=void 0;pt(this,ut[t.type||a].prototype),qt(l,(function(t){n[t]=l[t]})),this.init(r,t),r.linkSeries(),Tt(e,!0)&&r.redraw(!1)}}),pt(be.prototype,{update:function(t,e){var i=this.chart;t=i.options[this.coll][this.options.index]=dt(this.userOptions,t),this.destroy(!0),this._addedPlotLB=this.chart._labelPanes=void 0,this.init(i,pt(t,{events:void 0})),i.isDirtyBox=!0,Tt(e,!0)&&i.redraw()},remove:function(t){for(var e=this.chart,i=this.coll,n=this.series,r=n.length;r--;)n[r]&&n[r].remove(!1);bt(e.axes,this),bt(e[i],this),e.options[i].splice(this.options.index,1),qt(e[i],(function(t,e){t.options.index=e})),this.destroy(),e.isDirtyBox=!0,Tt(t,!0)&&e.redraw()},setTitle:function(t,e){this.update({title:t},e)},setCategories:function(t,e){this.update({categories:t},e)}});var Oe=Dt(Re);ut.line=Oe,ae.area=dt(se,{threshold:0});var Ye=Dt(Re,{type:"area",getSegments:function(){var t,e,i,n,r=this,o=[],a=[],s=[],l=this.xAxis,h=this.yAxis,c=h.stacks[this.stackKey],u={},p=this.points,d=this.options.connectNulls;if(this.options.stacking&&!this.cropped){for(i=0;i<p.length;i++)u[p[i].x]=p[i];for(n in c)null!==c[n].total&&s.push(+n);s.sort((function(t,e){return t-e})),qt(s,(function(n){var o,s=0;if(!d||u[n]&&null!==u[n].y)if(u[n])a.push(u[n]);else{for(i=r.index;i<=h.series.length;i++)if(o=c[n].points[i+","+n]){s=o[1];break}t=l.translate(n),e=h.toPixels(s,!0),a.push({y:null,plotX:t,clientX:t,plotY:e,yBottom:e,onMouseOver:J})}})),a.length&&o.push(a)}else Re.prototype.getSegments.call(this),o=this.segments;this.segments=o},getSegmentPath:function(t){var e,i,n=Re.prototype.getSegmentPath.call(this,t),r=[].concat(n),o=this.options,a=n.length,s=this.yAxis.getThreshold(o.threshold);if(3===a&&r.push(lt,n[1],n[2]),o.stacking&&!this.closedStacks)for(e=t.length-1;e>=0;e--)i=Tt(t[e].yBottom,s),e<t.length-1&&o.step&&r.push(t[e+1].plotX,i),r.push(t[e].plotX,i);else this.closeSegment(r,t,s);return this.areaPath=this.areaPath.concat(r),n},closeSegment:function(t,e,i){t.push(lt,e[e.length-1].plotX,i,lt,e[0].plotX,i)},drawGraph:function(){this.areaPath=[],Re.prototype.drawGraph.apply(this);var t=this,e=this.areaPath,i=this.options,n=this.zones,r=[["area",this.color,i.fillColor]];qt(n,(function(e,n){r.push(["zoneArea"+n,e.color||t.color,e.fillColor||i.fillColor])})),qt(r,(function(n){var r=n[0],o=t[r];o?o.animate({d:e}):t[r]=t.chart.renderer.path(e).attr({fill:Tt(n[2],pe(n[1]).setOpacity(Tt(i.fillOpacity,.75)).get()),zIndex:0}).add(t.group)}))},drawLegendSymbol:Me.drawRectangle});ut.area=Ye,ae.spline=dt(se);var Fe=Dt(Re,{type:"spline",getPointSpline:function(t,e,i){var n,r,o,a,s,l=e.plotX,h=e.plotY,c=t[i-1],u=t[i+1];if(c&&u){var p,d=c.plotX,f=c.plotY,g=u.plotX,m=u.plotY;a=(1.5*h+m)/2.5,a+=p=(a-(r=(1.5*h+f)/2.5))*((o=(1.5*l+g)/2.5)-l)/(o-(n=(1.5*l+d)/2.5))+h-a,(r+=p)>f&&r>h?a=2*h-(r=I(f,h)):r<f&&r<h&&(a=2*h-(r=E(f,h))),a>m&&a>h?r=2*h-(a=I(m,h)):a<m&&a<h&&(r=2*h-(a=E(m,h))),e.rightContX=o,e.rightContY=a}return i?(s=["C",c.rightContX||c.plotX,c.rightContY||c.plotY,n||l,r||h,l,h],c.rightContX=c.rightContY=null):s=[st,l,h],s}});ut.spline=Fe,ae.areaspline=dt(ae.area);var Xe=Ye.prototype,ze=Dt(Fe,{type:"areaspline",closedStacks:!0,getSegmentPath:Xe.getSegmentPath,closeSegment:Xe.closeSegment,drawGraph:Xe.drawGraph,drawLegendSymbol:Me.drawRectangle});ut.areaspline=ze,ae.column=dt(se,{borderColor:"#FFFFFF",borderRadius:0,groupPadding:.2,marker:null,pointPadding:.1,minPointLength:0,cropThreshold:50,pointRange:null,states:{hover:{brightness:.1,shadow:!1,halo:!1},select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}},dataLabels:{align:null,verticalAlign:null,y:null},startFromThreshold:!0,stickyTracking:!1,tooltip:{distance:6},threshold:0});var Be=Dt(Re,{type:"column",pointAttrToOptions:{stroke:"borderColor",fill:"color",r:"borderRadius"},cropShoulder:0,directTouch:!0,trackerGroups:["group","dataLabelsGroup"],negStacks:!0,init:function(){Re.prototype.init.apply(this,arguments);var t=this,e=t.chart;e.hasRendered&&qt(e.series,(function(e){e.type===t.type&&(e.isDirty=!0)}))},getColumnMetrics:function(){var t,e,i=this,n=i.options,r=i.xAxis,o=i.yAxis,a=r.reversed,s={},l=0;!1===n.grouping?l=1:qt(i.chart.series,(function(n){var r=n.options,a=n.yAxis;n.type===i.type&&n.visible&&o.len===a.len&&o.pos===a.pos&&(r.stacking?(t=n.stackKey,void 0===s[t]&&(s[t]=l++),e=s[t]):!1!==r.grouping&&(e=l++),n.columnIndex=e)}));var h=E(R(r.transA)*(r.ordinalSlope||n.pointRange||r.closestPointRange||r.tickInterval||1),r.len),c=h*n.groupPadding,u=(h-2*c)/l,p=E(n.maxPointWidth||r.len,Tt(n.pointWidth,u*(1-2*n.pointPadding))),d=(u-p)/2+(c+((a?l-(i.columnIndex||0):i.columnIndex)||0)*u-h/2)*(a?-1:1);return i.columnMetrics={width:p,offset:d}},translate:function(){var t=this,e=t.chart,i=t.options,n=t.borderWidth=Tt(i.borderWidth,t.closestPointRange*t.xAxis.transA<2?0:1),r=t.yAxis,o=i.threshold,a=t.translatedThreshold=r.getThreshold(o),s=Tt(i.minPointLength,5),l=t.getColumnMetrics(),h=l.width,c=t.barW=I(h,1+2*n),u=t.pointXOffset=l.offset,p=-(n%2?.5:0),d=n%2?.5:1;e.inverted&&(a-=.5,e.renderer.isVML&&(d+=1)),i.pointPadding&&(c=L(c)),Re.prototype.translate.apply(t),qt(t.points,(function(i){var n,o,l=Tt(i.yBottom,a),f=999+R(l),g=E(I(-f,i.plotY),r.len+f),m=i.plotX+u,y=c,v=E(g,l),_=I(g,l)-v;R(_)<s&&s&&(_=s,o=!r.reversed&&!i.negative||r.reversed&&i.negative,v=C(R(v-a)>s?l-s:a-(o?s:0))),i.barX=m,i.pointWidth=h,y=C(m+y)+p-(m=C(m)+p),n=R(v)<.5,_=E(C(v+_)+d,9e4)-(v=C(v)+d),n&&(v-=1,_+=1),i.tooltipPos=e.inverted?[r.len+r.pos-e.plotLeft-g,t.xAxis.len-m-y/2,_]:[m+y/2,g+r.pos-e.plotTop,_],i.shapeType="rect",i.shapeArgs={x:m,y:v,width:y,height:_}}))},getSymbol:J,drawLegendSymbol:Me.drawRectangle,drawGraph:J,drawPoints:function(){var t,e,i=this,n=this.chart,r=i.options,o=n.renderer,a=r.animationLimit||250;qt(i.points,(function(s){var l,h=s.plotY,c=s.graphic;void 0===h||isNaN(h)||null===s.y?c&&(s.graphic=c.destroy()):(t=s.shapeArgs,l=kt(i.borderWidth)?{"stroke-width":i.borderWidth}:{},e=s.pointAttr[s.selected?"select":""]||i.pointAttr[""],c?(oe(c),c.attr(l)[n.pointCount<a?"animate":"attr"](dt(t))):s.graphic=c=o[s.shapeType](t).attr(l).attr(e).add(i.group).shadow(r.shadow,null,r.stacking&&!r.borderRadius))}))},animate:function(t){var e,i=this.yAxis,n=this.options,r=this.chart.inverted,o={};j&&(t?(o.scaleY=.001,e=E(i.pos+i.len,I(i.pos,i.toPixels(n.threshold))),r?o.translateX=e-i.len:o.translateY=e,this.group.attr(o)):(o.scaleY=1,o[r?"translateX":"translateY"]=i.pos,this.group.animate(o,this.options.animation),this.animate=null))},remove:function(){var t=this,e=t.chart;e.hasRendered&&qt(e.series,(function(e){e.type===t.type&&(e.isDirty=!0)})),Re.prototype.remove.apply(t,arguments)}});ut.column=Be,ae.bar=dt(ae.column);var Ne=Dt(Be,{type:"bar",inverted:!0});ut.bar=Ne,ae.scatter=dt(se,{lineWidth:0,marker:{enabled:!0},tooltip:{headerFormat:'<span style="color:{point.color}">â</span> <span style="font-size: 10px;"> {series.name}</span><br/>',pointFormat:"x: <b>{point.x}</b><br/>y: <b>{point.y}</b><br/>"}});var We=Dt(Re,{type:"scatter",sorted:!1,requireSorting:!1,noSharedTooltip:!0,trackerGroups:["group","markerGroup","dataLabelsGroup"],takeOrdinalPosition:!1,kdDimensions:2,drawGraph:function(){this.options.lineWidth&&Re.prototype.drawGraph.call(this)}});ut.scatter=We,ae.pie=dt(se,{borderColor:"#FFFFFF",borderWidth:1,center:[null,null],clip:!1,colorByPoint:!0,dataLabels:{distance:30,enabled:!0,formatter:function(){return null===this.y?void 0:this.point.name},x:0},ignoreHiddenPoint:!0,legendType:"point",marker:null,size:null,showInLegend:!1,slicedOffset:10,states:{hover:{brightness:.1,shadow:!1}},stickyTracking:!1,tooltip:{followPointer:!0}});var Ue={type:"pie",isCartesian:!1,pointClass:Dt(Ee,{init:function(){Ee.prototype.init.apply(this,arguments);var t,e=this;return pt(e,{visible:!1!==e.visible,name:Tt(e.name,"Slice")}),t=function(t){e.slice("select"===t.type)},te(e,"select",t),te(e,"unselect",t),e},setVisible:function(t,e){var i=this,n=i.series,r=n.chart,o=n.options.ignoreHiddenPoint;e=Tt(e,o),t!==i.visible&&(i.visible=i.options.visible=t=void 0===t?!i.visible:t,n.options.data[Kt(i,n.data)]=i.options,qt(["graphic","dataLabel","connector","shadowGroup"],(function(e){i[e]&&i[e][t?"show":"hide"](!0)})),i.legendItem&&r.legend.colorizeItem(i,t),t||"hover"!==i.state||i.setState(""),o&&(n.isDirty=!0),e&&r.redraw())},slice:function(t,e,i){var n,r=this.series;Ut(i,r.chart),e=Tt(e,!0),this.sliced=this.options.sliced=t=kt(t)?t:!this.sliced,r.options.data[Kt(this,r.data)]=this.options,n=t?this.slicedTranslation:{translateX:0,translateY:0},this.graphic.animate(n),this.shadowGroup&&this.shadowGroup.animate(n)},haloPath:function(t){var e=this.shapeArgs,i=this.series.chart;return this.sliced||!this.visible?[]:this.series.chart.renderer.symbols.arc(i.plotLeft+e.x,i.plotTop+e.y,e.r+t,e.r+t,{innerR:this.shapeArgs.r,start:e.start,end:e.end})}}),requireSorting:!1,directTouch:!0,noSharedTooltip:!0,trackerGroups:["group","dataLabelsGroup"],axisTypes:[],pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},animate:function(t){var e=this,i=e.points,n=e.startAngleRad;t||(qt(i,(function(t){var i=t.graphic,r=t.shapeArgs;i&&(i.attr({r:t.startR||e.center[3]/2,start:n,end:n}),i.animate({r:r.r,start:r.start,end:r.end},e.options.animation))})),e.animate=null)},setData:function(t,e,i,n){Re.prototype.setData.call(this,t,!1,i,n),this.processData(),this.generatePoints(),Tt(e,!0)&&this.chart.redraw(i)},updateTotals:function(){var t,e,i=0,n=this.points,r=n.length,o=this.options.ignoreHiddenPoint;for(t=0;t<r;t++)e=n[t],i+=o&&!e.visible?0:e.y;for(this.total=i,t=0;t<r;t++)(e=n[t]).percentage=i>0&&(e.visible||!o)?e.y/i*100:0,e.total=i},generatePoints:function(){Re.prototype.generatePoints.call(this),this.updateTotals()},translate:function(t){this.generatePoints();var e,i,n,r,o,a,s,l=0,h=this.options,c=h.slicedOffset,u=c+h.borderWidth,p=h.startAngle||0,d=this.startAngleRad=Y/180*(p-90),f=(this.endAngleRad=Y/180*(Tt(h.endAngle,p+360)-90))-d,g=this.points,m=h.dataLabels.distance,y=h.ignoreHiddenPoint,v=g.length;for(t||(this.center=t=this.getCenter()),this.getX=function(e,i){return n=D.asin(E((e-t[1])/(t[2]/2+m),1)),t[0]+(i?-1:1)*(H(n)*(t[2]/2+m))},a=0;a<v;a++)s=g[a],e=d+l*f,y&&!s.visible||(l+=s.percentage/100),i=d+l*f,s.shapeType="arc",s.shapeArgs={x:t[0],y:t[1],r:t[2]/2,innerR:t[3]/2,start:C(1e3*e)/1e3,end:C(1e3*i)/1e3},(n=(i+e)/2)>1.5*Y?n-=2*Y:n<-Y/2&&(n+=2*Y),s.slicedTranslation={translateX:C(H(n)*c),translateY:C(O(n)*c)},r=H(n)*t[2]/2,o=O(n)*t[2]/2,s.tooltipPos=[t[0]+.7*r,t[1]+.7*o],s.half=n<-Y/2||n>Y/2?1:0,s.angle=n,u=E(u,m/2),s.labelPos=[t[0]+r+H(n)*m,t[1]+o+O(n)*m,t[0]+r+H(n)*u,t[1]+o+O(n)*u,t[0]+r,t[1]+o,m<0?"center":s.half?"right":"left",n]},drawGraph:null,drawPoints:function(){var t,e,i,n,r,o=this,a=o.chart.renderer,s=o.options.shadow;s&&!o.shadowGroup&&(o.shadowGroup=a.g("shadow").add(o.group)),qt(o.points,(function(l){null!==l.y&&(e=l.graphic,n=l.shapeArgs,i=l.shadowGroup,s&&!i&&(i=l.shadowGroup=a.g("shadow").add(o.shadowGroup)),t=l.sliced?l.slicedTranslation:{translateX:0,translateY:0},i&&i.attr(t),e?e.animate(pt(n,t)):(r={"stroke-linejoin":"round"},l.visible||(r.visibility="hidden"),l.graphic=e=a[l.shapeType](n).setRadialReference(o.center).attr(l.pointAttr[l.selected?"select":""]).attr(r).attr(t).add(o.group).shadow(s,i)))}))},searchPoint:J,sortByAngle:function(t,e){t.sort((function(t,i){return void 0!==t.angle&&(i.angle-t.angle)*e}))},drawLegendSymbol:Me.drawRectangle,getCenter:Ie.getCenter,getSymbol:J};Ue=Dt(Re,Ue),ut.pie=Ue,Re.prototype.drawDataLabels=function(){var t,e,i,n,r=this,o=r.options,a=o.cursor,s=o.dataLabels,l=r.points,h=r.hasRendered||0,c=r.chart.renderer;(s.enabled||r._hasPointLabels)&&(r.dlProcessOptions&&r.dlProcessOptions(s),n=r.plotGroup("dataLabelsGroup","data-labels",s.defer?it:rt,s.zIndex||6),Tt(s.defer,!0)&&(n.attr({opacity:+h}),h||te(r,"afterAnimate",(function(){r.visible&&n.show(),n[o.animation?"animate":"attr"]({opacity:1},{duration:200})}))),e=s,qt(l,(function(l){var h,u,p,d,f,g,m=l.dataLabel,y=l.connector,v=!0,_={};if(t=l.dlOptions||l.options&&l.options.dataLabels,h=Tt(t&&t.enabled,e.enabled),m&&!h)l.dataLabel=m.destroy();else if(h){if(g=(s=dt(e,t)).style,f=s.rotation,u=l.getLabelConfig(),i=s.format?Rt(s.format,u):s.formatter.call(u,s),g.color=Tt(s.color,g.color,r.color,"black"),m)kt(i)?(m.attr({text:i}),v=!1):(l.dataLabel=m=m.destroy(),y&&(l.connector=y.destroy()));else if(kt(i)){for(d in p={fill:s.backgroundColor,stroke:s.borderColor,"stroke-width":s.borderWidth,r:s.borderRadius||0,rotation:f,padding:s.padding,zIndex:1},"contrast"===g.color&&(_.color=s.inside||s.distance<0||o.stacking?c.getContrast(l.color||r.color):"#000000"),a&&(_.cursor=a),p)void 0===p[d]&&delete p[d];m=l.dataLabel=c[f?"text":"label"](i,0,-999,s.shape,null,null,s.useHTML).attr(p).css(pt(g,_)).add(n).shadow(s.shadow)}m&&r.alignDataLabel(l,m,s,null,v)}})))},Re.prototype.alignDataLabel=function(t,e,i,n,r){var o,a,s=this.chart,l=s.inverted,h=Tt(t.plotX,-999),c=Tt(t.plotY,-999),u=e.getBBox(),p=s.renderer.fontMetrics(i.style.fontSize).b,d=this.visible&&(t.series.forceDL||s.isInsidePlot(h,C(c),l)||n&&s.isInsidePlot(h,l?n.x+1:n.y+n.height-1,l));d&&(n=pt({x:l?s.plotWidth-c:h,y:C(l?s.plotHeight-h:c),width:0,height:0},n),pt(i,{width:u.width,height:u.height}),i.rotation?(o=s.renderer.rotCorr(p,i.rotation),e[r?"attr":"animate"]({x:n.x+i.x+n.width/2+o.x,y:n.y+i.y+n.height/2}).attr({align:i.align})):(e.align(i,null,n),a=e.alignAttr,"justify"===Tt(i.overflow,"justify")?this.justifyDataLabel(e,i,a,u,n,r):Tt(i.crop,!0)&&(d=s.isInsidePlot(a.x,a.y)&&s.isInsidePlot(a.x+u.width,a.y+u.height)),i.shape&&e.attr({anchorX:t.plotX,anchorY:t.plotY}))),d||(e.attr({y:-999}),e.placed=!1)},Re.prototype.justifyDataLabel=function(t,e,i,n,r,o){var a,s,l=this.chart,h=e.align,c=e.verticalAlign,u=t.box?0:t.padding||0;(a=i.x+u)<0&&("right"===h?e.align="left":e.x=-a,s=!0),(a=i.x+n.width-u)>l.plotWidth&&("left"===h?e.align="right":e.x=l.plotWidth-a,s=!0),(a=i.y+u)<0&&("bottom"===c?e.verticalAlign="top":e.y=-a,s=!0),(a=i.y+n.height-u)>l.plotHeight&&("top"===c?e.verticalAlign="bottom":e.y=l.plotHeight-a,s=!0),s&&(t.placed=!o,t.align(e,null,r))},ut.pie&&(ut.pie.prototype.drawDataLabels=function(){var t,e,i,n,r,o,a,s,l,h,c,u,p,d=this,f=d.data,g=d.chart,m=d.options.dataLabels,y=Tt(m.connectorPadding,10),v=Tt(m.connectorWidth,1),_=g.plotWidth,x=g.plotHeight,b=Tt(m.softConnector,!0),k=m.distance,w=d.center,S=w[2]/2,T=w[1],P=k>0,A=[[],[]],D=[0,0,0,0],M=function(t,e){return e.y-t.y};if(d.visible&&(m.enabled||d._hasPointLabels)){for(Re.prototype.drawDataLabels.apply(d),qt(f,(function(t){t.dataLabel&&t.visible&&A[t.half].push(t)})),u=2;u--;){var L,H,O,Y,F=[],X=[],z=A[u],B=z.length;if(B){for(d.sortByAngle(z,u-.5),p=a=0;!a&&z[p];)a=z[p]&&z[p].dataLabel&&(z[p].dataLabel.getBBox().height||21),p++;if(k>0){for(O=E(T+S+k,g.plotHeight),H=I(0,T-S-k);H<=O;H+=a)F.push(H);if(B>(L=F.length)){for((c=[].concat(z)).sort(M),p=B;p--;)c[p].rank=p;for(p=B;p--;)z[p].rank>=L&&z.splice(p,1);B=z.length}for(p=0;p<B;p++){t=z[p],o=t.labelPos;var N,W,U=9999;for(W=0;W<L;W++)(N=R(F[W]-o[1]))<U&&(U=N,Y=W);if(Y<p&&null!==F[p])Y=p;else if(L<B-p+Y&&null!==F[p])for(Y=L-B+p;null===F[Y];)Y++;else for(;null===F[Y];)Y++;X.push({i:Y,y:F[Y]}),F[Y]=null}X.sort(M)}for(p=0;p<B;p++){var G,V;t=z[p],o=t.labelPos,n=t.dataLabel,h=!1===t.visible?it:"inherit",V=o[1],k>0?(Y=(G=X.pop()).i,(V>(l=G.y)&&null!==F[Y+1]||V<l&&null!==F[Y-1])&&(l=E(I(0,V),g.plotHeight))):l=V,s=m.justify?w[0]+(u?-1:1)*(S+k):d.getX(l===T-S-k||l===T+S+k?V:l,u),n._attr={visibility:h,align:o[6]},n._pos={x:s+m.x+({left:y,right:-y}[o[6]]||0),y:l+m.y-10},n.connX=s,n.connY=l,null===this.options.size&&(r=n.width,s-r<y?D[3]=I(C(r-s+y),D[3]):s+r>_-y&&(D[1]=I(C(s+r-_+y),D[1])),l-a/2<0?D[0]=I(C(a/2-l),D[0]):l+a/2>x&&(D[2]=I(C(l+a/2-x),D[2])))}}}(0===Xt(D)||this.verifyDataLabelOverflow(D))&&(this.placeDataLabels(),P&&v&&qt(this.points,(function(t){e=t.connector,o=t.labelPos,(n=t.dataLabel)&&n._pos&&t.visible?(h=n._attr.visibility,s=n.connX,l=n.connY,i=b?[st,s+("left"===o[6]?5:-5),l,"C",s,l,2*o[2]-o[4],2*o[3]-o[5],o[2],o[3],lt,o[4],o[5]]:[st,s+("left"===o[6]?5:-5),l,lt,o[2],o[3],lt,o[4],o[5]],e?(e.animate({d:i}),e.attr("visibility",h)):t.connector=e=d.chart.renderer.path(i).attr({"stroke-width":v,stroke:m.connectorColor||t.color||"#606060",visibility:h}).add(d.dataLabelsGroup)):e&&(t.connector=e.destroy())})))}},ut.pie.prototype.placeDataLabels=function(){qt(this.points,(function(t){var e,i=t.dataLabel;i&&t.visible&&((e=i._pos)?(i.attr(i._attr),i[i.moved?"animate":"attr"](e),i.moved=!0):i&&i.attr({y:-999}))}))},ut.pie.prototype.alignDataLabel=J,ut.pie.prototype.verifyDataLabelOverflow=function(t){var e,i=this.center,n=this.options,r=n.center,o=n.minSize||80,a=o;return null!==r[0]?a=I(i[2]-I(t[1],t[3]),o):(a=I(i[2]-t[1]-t[3],o),i[0]+=(t[3]-t[1])/2),null!==r[1]?a=I(E(a,i[2]-I(t[0],t[2])),o):(a=I(E(a,i[2]-t[0]-t[2]),o),i[1]+=(t[0]-t[2])/2),a<i[2]?(i[2]=a,i[3]=Mt(n.innerSize||0,a),this.translate(i),qt(this.points,(function(t){t.dataLabel&&(t.dataLabel._pos=null)})),this.drawDataLabels&&this.drawDataLabels()):e=!0,e}),ut.column&&(ut.column.prototype.alignDataLabel=function(t,e,i,n,r){var o=this.chart.inverted,a=t.series,s=t.dlBox||t.shapeArgs,l=Tt(t.below,t.plotY>Tt(this.translatedThreshold,a.yAxis.len)),h=Tt(i.inside,!!this.options.stacking);s&&(n=dt(s),o&&(n={x:a.yAxis.len-n.y-n.height,y:a.xAxis.len-n.x-n.width,width:n.height,height:n.width}),h||(o?(n.x+=l?0:n.width,n.width=0):(n.y+=l?n.height:0,n.height=0))),i.align=Tt(i.align,!o||h?"center":l?"right":"left"),i.verticalAlign=Tt(i.verticalAlign,o||h?"middle":l?"top":"bottom"),Re.prototype.alignDataLabel.call(this,t,e,i,n,r)}),function(t){var e=t.Chart,i=t.each,n=t.pick,r=HighchartsAdapter.addEvent;e.prototype.callbacks.push((function(t){function e(){var e=[];i(t.series,(function(t){var r=t.options.dataLabels,o=t.dataLabelCollections||["dataLabel"];(r.enabled||t._hasPointLabels)&&!r.allowOverlap&&t.visible&&i(o,(function(r){i(t.points,(function(t){t[r]&&(t[r].labelrank=n(t.labelrank,t.shapeArgs&&t.shapeArgs.height),e.push(t[r]))}))}))})),t.hideOverlappingLabels(e)}e(),r(t,"redraw",e)})),e.prototype.hideOverlappingLabels=function(t){var e,n,r,o,a,s,l,h,c,u,p,d,f,g,m,y,v=t.length;for(n=0;n<v;n++)(e=t[n])&&(e.oldOpacity=e.opacity,e.newOpacity=1);for(t.sort((function(t,e){return(e.labelrank||0)-(t.labelrank||0)})),n=0;n<v;n++)for(o=t[n],r=n+1;r<v;++r)a=t[r],o&&a&&o.placed&&a.placed&&0!==o.newOpacity&&0!==a.newOpacity&&(s=o.alignAttr,l=a.alignAttr,h=2*(o.box?0:o.padding),c=s.x,u=s.y,p=o.width-h,d=o.height-h,f=l.x,g=l.y,m=a.width-h,y=a.height-h,!(f>c+p||f+m<c||g>u+d||g+y<u)&&((o.labelrank<a.labelrank?o:a).newOpacity=0));i(t,(function(t){var e,i;t&&(i=t.newOpacity,t.oldOpacity!==i&&t.placed&&(i?t.show(!0):e=function(){t.hide()},t.alignAttr.opacity=i,t[t.isOld?"animate":"attr"](t.alignAttr,null,e)),t.isOld=!0)}))}}(T);var Ge=T.TrackerMixin={drawTrackerPoint:function(){var t=this,i=t.chart,n=i.pointer,r=t.options.cursor,o=r&&{cursor:r},a=function(t){for(var e,n=t.target;n&&!e;)e=n.point,n=n.parentNode;void 0!==e&&e!==i.hoverPoint&&e.onMouseOver(t)};qt(t.points,(function(t){t.graphic&&(t.graphic.element.point=t),t.dataLabel&&(t.dataLabel.element.point=t)})),t._hasTracking||(qt(t.trackerGroups,(function(i){t[i]&&(t[i].addClass(nt+"tracker").on("mouseover",a).on("mouseout",(function(t){n.onTrackerMouseOut(t)})).css(o),e&&t[i].on("touchstart",a))})),t._hasTracking=!0)},drawTrackerGraph:function(){var t,i,n=this,r=n.options,o=r.trackByArea,a=[].concat(o?n.areaPath:n.graphPath),s=a.length,l=n.chart,h=l.pointer,c=l.renderer,u=l.options.tooltip.snap,p=n.tracker,d=r.cursor,f=d&&{cursor:d},g=n.singlePoints,m=function(){l.hoverSeries!==n&&n.onMouseOver()},y="rgba(192,192,192,"+(j?1e-4:.002)+")";if(s&&!o)for(i=s+1;i--;)a[i]===st&&a.splice(i+1,0,a[i+1]-u,a[i+2],lt),(i&&a[i]===st||i===s)&&a.splice(i,0,lt,a[i-2]+u,a[i-1]);for(i=0;i<g.length;i++)t=g[i],a.push(st,t.plotX-u,t.plotY,lt,t.plotX+u,t.plotY);p?p.attr({d:a}):(n.tracker=c.path(a).attr({"stroke-linejoin":"round",visibility:n.visible?rt:it,stroke:y,fill:o?y:at,"stroke-width":r.lineWidth+(o?0:2*u),zIndex:2}).add(n.group),qt([n.tracker,n.markerGroup],(function(t){t.addClass(nt+"tracker").on("mouseover",m).on("mouseout",(function(t){h.onTrackerMouseOut(t)})).css(f),e&&t.on("touchstart",m)})))}};ut.column&&(Be.prototype.drawTracker=Ge.drawTrackerPoint),ut.pie&&(ut.pie.prototype.drawTracker=Ge.drawTrackerPoint),ut.scatter&&(We.prototype.drawTracker=Ge.drawTrackerPoint),pt(Ce.prototype,{setItemEvents:function(t,e,i,n,r){var o=this;(i?e:t.legendGroup).on("mouseover",(function(){t.setState("hover"),e.css(o.options.itemHoverStyle)})).on("mouseout",(function(){e.css(t.visible?n:r),t.setState()})).on("click",(function(e){var i=function(){t.setVisible()};e={browserEvent:e},t.firePointEvent?t.firePointEvent("legendItemClick",e,i):ie(t,"legendItemClick",e,i)}))},createCheckboxForItem:function(t){t.checkbox=At("input",{type:"checkbox",checked:t.selected,defaultChecked:t.selected},this.options.itemCheckboxStyle,this.chart.container),te(t.checkbox,"click",(function(e){var i=e.target;ie(t.series||t,"checkboxClick",{checked:i.checked,item:t},(function(){t.select()}))}))}}),n.legend.itemStyle.cursor="pointer",pt(Le.prototype,{showResetZoom:function(){var t=this,e=n.lang,i=t.options.chart.resetZoomButton,r=i.theme,o=r.states,a="chart"===i.relativeTo?null:"plotBox";this.resetZoomButton=t.renderer.button(e.resetZoom,null,null,(function(){t.zoomOut()}),r,o&&o.hover).attr({align:i.position.align,title:e.resetZoomTitle}).add().align(i.position,!1,a)},zoomOut:function(){var t=this;ie(t,"selection",{resetSelection:!0},(function(){t.zoom()}))},zoom:function(t){var e,i,n=this.pointer,r=!1;!t||t.resetSelection?qt(this.axes,(function(t){e=t.zoom()})):qt(t.xAxis.concat(t.yAxis),(function(t){var i=t.axis,o=i.isXAxis;(n[o?"zoomX":"zoomY"]||n[o?"pinchX":"pinchY"])&&(e=i.zoom(t.min,t.max),i.displayBtn&&(r=!0))})),i=this.resetZoomButton,r&&!i?this.showResetZoom():!r&&mt(i)&&(this.resetZoomButton=i.destroy()),e&&this.redraw(Tt(this.options.chart.animation,t&&t.animation,this.pointCount<100))},pan:function(t,e){var i,n=this,r=n.hoverPoints;r&&qt(r,(function(t){t.setState()})),qt("xy"===e?[1,0]:[1],(function(e){var r=t[e?"chartX":"chartY"],o=n[e?"xAxis":"yAxis"][0],a=n[e?"mouseDownX":"mouseDownY"],s=(o.pointRange||0)/2,l=o.getExtremes(),h=o.toValue(a-r,!0)+s,c=o.toValue(a+n[e?"plotWidth":"plotHeight"]-r,!0)-s,u=a>r;o.series.length&&(u||h>E(l.dataMin,l.min))&&(!u||c<I(l.dataMax,l.max))&&(o.setExtremes(h,c,!1,!1,{trigger:"pan"}),i=!0),n[e?"mouseDownX":"mouseDownY"]=r})),i&&n.redraw(!1),Pt(n.container,{cursor:"move"})}}),pt(Ee.prototype,{select:function(t,e){var i=this,n=i.series,r=n.chart;t=Tt(t,!i.selected),i.firePointEvent(t?"select":"unselect",{accumulate:e},(function(){i.selected=i.options.selected=t,n.options.data[Kt(i,n.data)]=i.options,i.setState(t&&"select"),e||qt(r.getSelectedPoints(),(function(t){t.selected&&t!==i&&(t.selected=t.options.selected=!1,n.options.data[Kt(t,n.data)]=t.options,t.setState(""),t.firePointEvent("unselect"))}))}))},onMouseOver:function(t,e){var i=this.series,n=i.chart,r=n.tooltip,o=n.hoverPoint;n.hoverSeries!==i&&i.onMouseOver(),o&&o!==this&&o.onMouseOut(),this.series&&(this.firePointEvent("mouseOver"),!r||r.shared&&!i.noSharedTooltip||r.refresh(this,t),this.setState("hover"),e||(n.hoverPoint=this))},onMouseOut:function(){var t=this.series.chart,e=t.hoverPoints;this.firePointEvent("mouseOut"),e&&-1!==Kt(this,e)||(this.setState(),t.hoverPoint=null)},importEvents:function(){if(!this.hasImportedEvents){var t,e=dt(this.series.options.point,this.options).events;for(t in this.events=e,e)te(this,t,e[t]);this.hasImportedEvents=!0}},setState:function(t,e){var i,n,r,o,a=this.plotX,s=this.plotY,l=this.series,h=l.options.states,c=ae[l.type].marker&&l.options.marker,u=c&&!c.enabled,p=c&&c.states[t],d=p&&!1===p.enabled,f=l.stateMarkerGraphic,g=this.marker||{},m=l.chart,y=l.halo;t=t||"",o=this.pointAttr[t]||l.pointAttr[t],t===this.state&&!e||this.selected&&"select"!==t||h[t]&&!1===h[t].enabled||t&&(d||u&&!1===p.enabled)||t&&g.states&&g.states[t]&&!1===g.states[t].enabled||(this.graphic?(i=c&&this.graphic.symbolName&&o.r,this.graphic.attr(dt(o,i?{x:a-i,y:s-i,width:2*i,height:2*i}:{})),f&&f.hide()):(t&&p&&(i=p.radius,r=g.symbol||l.symbol,f&&f.currentSymbol!==r&&(f=f.destroy()),f?f[e?"animate":"attr"]({x:a-i,y:s-i}):r&&(l.stateMarkerGraphic=f=m.renderer.symbol(r,a-i,s-i,2*i,2*i).attr(o).add(l.markerGroup),f.currentSymbol=r)),f&&(f[t&&m.isInsidePlot(a,s,m.inverted)?"show":"hide"](),f.element.point=this)),(n=h[t]&&h[t].halo)&&n.size?(y||(l.halo=y=m.renderer.path().add(m.seriesGroup)),y.attr(pt({fill:pe(this.color||l.color).setOpacity(n.opacity).get()},n.attributes))[e?"animate":"attr"]({d:this.haloPath(n.size)})):y&&y.attr({d:[]}),this.state=t)},haloPath:function(t){var e=this.series,i=e.chart,n=e.getPlotBox(),r=i.inverted;return i.renderer.symbols.circle(n.translateX+(r?e.yAxis.len-this.plotY:this.plotX)-t,n.translateY+(r?e.xAxis.len-this.plotX:this.plotY)-t,2*t,2*t)}}),pt(Re.prototype,{onMouseOver:function(){var t=this.chart,e=t.hoverSeries;e&&e!==this&&e.onMouseOut(),this.options.events.mouseOver&&ie(this,"mouseOver"),this.setState("hover"),t.hoverSeries=this},onMouseOut:function(){var t=this.options,e=this.chart,i=e.tooltip,n=e.hoverPoint;e.hoverSeries=null,n&&n.onMouseOut(),this&&t.events.mouseOut&&ie(this,"mouseOut"),!i||t.stickyTracking||i.shared&&!this.noSharedTooltip||i.hide(),this.setState()},setState:function(t){var e,i=this.options,n=this.graph,r=i.states,o=i.lineWidth,a=0;if(t=t||"",this.state!==t){if(this.state=t,r[t]&&!1===r[t].enabled)return;if(t&&(o=r[t].lineWidth||o+(r[t].lineWidthPlus||0)),n&&!n.dashstyle)for(e={"stroke-width":o},n.attr(e);this["zoneGraph"+a];)this["zoneGraph"+a].attr(e),a+=1}},setVisible:function(t,e){var i,n=this,r=n.chart,o=n.legendItem,a=r.options.chart.ignoreHiddenSeries,s=n.visible;n.visible=t=n.userOptions.visible=void 0===t?!s:t,i=t?"show":"hide",qt(["group","dataLabelsGroup","markerGroup","tracker"],(function(t){n[t]&&n[t][i]()})),r.hoverSeries!==n&&(r.hoverPoint&&r.hoverPoint.series)!==n||n.onMouseOut(),o&&r.legend.colorizeItem(n,t),n.isDirty=!0,n.options.stacking&&qt(r.series,(function(t){t.options.stacking&&t.visible&&(t.isDirty=!0)})),qt(n.linkedSeries,(function(e){e.setVisible(t,!1)})),a&&(r.isDirtyBox=!0),!1!==e&&r.redraw(),ie(n,i)},show:function(){this.setVisible(!0)},hide:function(){this.setVisible(!1)},select:function(t){this.selected=t=void 0===t?!this.selected:t,this.checkbox&&(this.checkbox.checked=t),ie(this,t?"select":"unselect")},drawTracker:Ge.drawTrackerGraph}),Lt(Re.prototype,"init",(function(t){var e,i=this;t.apply(this,Array.prototype.slice.call(arguments,1)),(e=i.xAxis)&&e.options.ordinal&&te(i,"updatedData",(function(){delete e.ordinalIndex}))})),Lt(be.prototype,"getTimeTicks",(function(t,e,i,n,o,s,l,h){var c,u,p,d,f,g=0,m=0,y={},v=[],_=-Number.MAX_VALUE,x=this.options.tickPixelInterval;if(!this.options.ordinal&&!this.options.breaks||!s||s.length<3||void 0===i)return t.call(this,e,i,n,o);for(d=s.length;m<d;m++){if(f=m&&s[m-1]>n,s[m]<i&&(g=m),m===d-1||s[m+1]-s[m]>5*l||f){if(s[m]>_){for(c=t.call(this,e,s[g],s[m],o);c.length&&c[0]<=_;)c.shift();c.length&&(_=c[c.length-1]),v=v.concat(c)}g=m+1}if(f)break}if(p=c.info,h&&p.unitRange<=a.hour){for(m=v.length-1,g=1;g<m;g++)r("%d",v[g])!==r("%d",v[g-1])&&(y[v[g]]="day",u=!0);u&&(y[v[0]]="day"),p.higherRanks=y}if(v.info=p,h&&kt(x)){for(var b,k,w,S,T,P=v.length,A=P,D=[],C=[];A--;)k=this.translate(v[A]),w&&(C[A]=w-k),D[A]=w=k;for(C.sort(),(S=C[M(C.length/2)])<.6*x&&(S=null),A=v[P-1]>n?P-1:P,w=void 0;A--;)T=w-(k=D[A]),w&&T<.8*x&&(null===S||T<.8*S)?(y[v[A]]&&!y[v[A+1]]?(b=A+1,w=k):b=A,v.splice(b,1)):w=k}return v})),pt(be.prototype,{beforeSetTickPositions:function(){var t,e,i,n,r,o,a=[],s=!1,l=this.getExtremes(),h=l.min,c=l.max,u=this.isXAxis&&!!this.options.breaks,p=this.options.ordinal;if(p||u){if(qt(this.series,(function(e,i){if(!1!==e.visible&&(!1!==e.takeOrdinalPosition||u)&&(a=a.concat(e.processedXData),t=a.length,a.sort((function(t,e){return t-e})),t))for(i=t-1;i--;)a[i]===a[i+1]&&a.splice(i,1)})),(t=a.length)>2){for(e=a[1]-a[0],o=t-1;o--&&!s;)a[o+1]-a[o]!==e&&(s=!0);!this.options.keepOrdinalPadding&&(a[0]-h>e||c-a[a.length-1]>e)&&(s=!0)}s?(this.ordinalPositions=a,i=this.val2lin(I(h,a[0]),!0),n=I(this.val2lin(E(c,a[a.length-1]),!0),1),this.ordinalSlope=r=(c-h)/(n-i),this.ordinalOffset=h-i*r):this.ordinalPositions=this.ordinalSlope=this.ordinalOffset=void 0}this.doPostTranslate=p&&s||u,this.groupIntervalFactor=null},val2lin:function(t,e){var i=this.ordinalPositions;if(i){var n,r,o=i.length;for(n=o;n--;)if(i[n]===t){r=n;break}for(n=o-1;n--;)if(t>i[n]||0===n){r=n+(t-i[n])/(i[n+1]-i[n]);break}return e?r:this.ordinalSlope*(r||0)+this.ordinalOffset}return t},lin2val:function(t,e){var i=this.ordinalPositions;if(i){var n,r,o=this.ordinalSlope,a=this.ordinalOffset,s=i.length-1;if(e)t<0?t=i[0]:t>s?t=i[s]:r=t-(s=M(t));else for(;s--;)if(t>=(n=o*s+a)){r=(t-n)/(o*(s+1)+a-n);break}return void 0!==r&&void 0!==i[s]?i[s]+(r?r*(i[s+1]-i[s]):0):t}return t},getExtendedPositions:function(){var t,e,i=this.chart,n=this.series[0].currentDataGrouping,r=this.ordinalIndex,o=n?n.count+n.unitName:"raw",a=this.getExtremes();return r||(r=this.ordinalIndex={}),r[o]||(t={series:[],getExtremes:function(){return{min:a.dataMin,max:a.dataMax}},options:{ordinal:!0},val2lin:be.prototype.val2lin},qt(this.series,(function(r){(e={xAxis:t,xData:r.xData,chart:i,destroyGroupedData:J}).options={dataGrouping:n?{enabled:!0,forced:!0,approximation:"open",units:[[n.unitName,[n.count]]]}:{enabled:!1}},r.processData.apply(e),t.series.push(e)})),this.beforeSetTickPositions.apply(t),r[o]=t.ordinalPositions),r[o]},getGroupIntervalFactor:function(t,e,i){var n,r=0,o=i.processedXData,a=o.length,s=[],l=this.groupIntervalFactor;if(!l){for(;r<a-1;r++)s[r]=o[r+1]-o[r];s.sort((function(t,e){return t-e})),n=s[M(a/2)],t=I(t,o[0]),e=E(e,o[a-1]),this.groupIntervalFactor=l=a*n/(e-t)}return l},postProcessTickInterval:function(t){var e=this.ordinalSlope;return e?this.options.breaks?this.closestPointRange:t/(e/this.closestPointRange):t}}),Lt(Le.prototype,"pan",(function(t,e){var i=this,n=i.xAxis[0],r=e.chartX,o=!1;if(n.options.ordinal&&n.series.length){var a,s,l,h,c=i.mouseDownX,u=n.getExtremes(),p=u.dataMax,d=u.min,f=u.max,g=i.hoverPoints,m=n.closestPointRange,y=n.translationSlope*(n.ordinalSlope||m),v=(c-r)/y,_={ordinalPositions:n.getExtendedPositions()},x=n.lin2val,b=n.val2lin;_.ordinalPositions?R(v)>1&&(g&&qt(g,(function(t){t.setState()})),v<0?(l=_,h=n.ordinalPositions?n:_):(l=n.ordinalPositions?n:_,h=_),p>(s=h.ordinalPositions)[s.length-1]&&s.push(p),i.fixedRange=f-d,(a=n.toFixedRange(null,null,x.apply(l,[b.apply(l,[d,!0])+v,!0]),x.apply(h,[b.apply(h,[f,!0])+v,!0]))).min>=E(u.dataMin,d)&&a.max<=I(p,f)&&n.setExtremes(a.min,a.max,!0,!1,{trigger:"pan"}),i.mouseDownX=r,Pt(i.container,{cursor:"move"})):o=!0}else o=!0;o&&t.apply(this,Array.prototype.slice.call(arguments,1))})),Lt(Re.prototype,"getSegments",(function(t){var e,i=this,n=i.options.gapSize,r=i.xAxis;t.apply(this,Array.prototype.slice.call(arguments,1)),n&&(e=i.segments,qt(e,(function(t,i){for(var o=t.length-1;o--;){if(t[o].x<r.min&&t[o+1].x>r.max){e.length=0;break}t[o+1].x-t[o].x>r.closestPointRange*n&&e.splice(i+1,0,t.splice(o+1,t.length-o))}})))})),function(t){"use strict";var e=t.pick,i=t.wrap,n=t.extend,r=HighchartsAdapter.fireEvent,o=t.Axis,a=t.Series;function s(){return Array.prototype.slice.call(arguments,1)}n(o.prototype,{isInBreak:function(t,e){var i=t.repeat||1/0,n=t.from,r=t.to-t.from,o=e>=n?(e-n)%i:i-(n-e)%i;return t.inclusive?o<=r:o<r&&0!==o},isInAnyBreak:function(t,i){var n,r,o,a=this.options.breaks,s=a&&a.length;if(s){for(;s--;)this.isInBreak(a[s],t)&&(n=!0,r||(r=e(a[s].showPoints,!this.isXAxis)));o=n&&i?n&&!r:n}return o}}),i(o.prototype,"setTickPositions",(function(t){if(t.apply(this,Array.prototype.slice.call(arguments,1)),this.options.breaks){var e,i=this,n=this.tickPositions,r=this.tickPositions.info,o=[];if(r&&r.totalRange>=i.closestPointRange)return;for(e=0;e<n.length;e++)i.isInAnyBreak(n[e])||o.push(n[e]);this.tickPositions=o,this.tickPositions.info=r}})),i(o.prototype,"init",(function(t,e,i){if(i.breaks&&i.breaks.length&&(i.ordinal=!1),t.call(this,e,i),this.options.breaks){var n=this;n.doPostTranslate=!0,this.val2lin=function(t){var e,i,r=t;for(i=0;i<n.breakArray.length;i++)if((e=n.breakArray[i]).to<=t)r-=e.len;else{if(e.from>=t)break;if(n.isInBreak(e,t)){r-=t-e.from;break}}return r},this.lin2val=function(t){var e,i,r=t;for(i=0;i<n.breakArray.length&&!((e=n.breakArray[i]).from>=r);i++)(e.to<r||n.isInBreak(e,r))&&(r+=e.len);return r},this.setExtremes=function(t,e,i,n,r){for(;this.isInAnyBreak(t);)t-=this.closestPointRange;for(;this.isInAnyBreak(e);)e-=this.closestPointRange;o.prototype.setExtremes.call(this,t,e,i,n,r)},this.setAxisTranslation=function(t){o.prototype.setAxisTranslation.call(this,t);var e,i,a,s,l,h,c=n.options.breaks,u=[],p=[],d=0,f=n.userMin||n.min,g=n.userMax||n.max;for(l in c)i=(a=c[l]).repeat||1/0,n.isInBreak(a,f)&&(f+=a.to%i-f%i),n.isInBreak(a,g)&&(g-=g%i-a.from%i);for(l in c){for(s=(a=c[l]).from,i=a.repeat||1/0;s-i>f;)s-=i;for(;s<f;)s+=i;for(h=s;h<g;h+=i)u.push({value:h,move:"in"}),u.push({value:h+(a.to-a.from),move:"out",size:a.breakSize})}for(l in u.sort((function(t,e){return t.value===e.value?("in"===t.move?0:1)-("in"===e.move?0:1):t.value-e.value})),e=0,s=f,u)1===(e+="in"===(a=u[l]).move?1:-1)&&"in"===a.move&&(s=a.value),0===e&&(p.push({from:s,to:a.value,len:a.value-s-(a.size||0)}),d+=a.value-s-(a.size||0));n.breakArray=p,r(n,"afterBreaks"),n.transA*=(g-n.min)/(g-f-d),n.min=f,n.max=g}}})),i(a.prototype,"generatePoints",(function(t){t.apply(this,s(arguments));var e,i=this,n=i.xAxis,r=i.yAxis,o=i.points,a=o.length,l=i.options.connectNulls;if(n&&r&&(n.options.breaks||r.options.breaks))for(;a--;)null===(e=o[a]).y&&!1===l||!n.isInAnyBreak(e.x,!0)&&!r.isInAnyBreak(e.y,!0)||(o.splice(a,1),this.data[a]&&this.data[a].destroyElements())})),i(t.seriesTypes.column.prototype,"drawPoints",(function(t){t.apply(this);var i,n,o,a,s,l,h=this.points,c=this.yAxis,u=c.breakArray||[],p=e(this.options.threshold,c.min);for(a=0;a<h.length;a++)for(l=(n=h[a]).stackY||n.y,s=0;s<u.length;s++)i=!1,p<(o=u[s]).from&&l>o.to||p>o.from&&l<o.from?i="pointBreak":(p<o.from&&l>o.from&&l<o.to||p>o.from&&l>o.to&&l<o.from)&&(i="pointInBreak"),i&&r(c,i,{point:n,brk:o})}))}(T);var Ve=Re.prototype,je=we.prototype,$e=Ve.processData,Ke=Ve.generatePoints,qe=Ve.destroy,Ze=je.tooltipFooterHeaderFormatter,Je="number",Qe={approximation:"average",groupPixelWidth:2,dateTimeLabelFormats:{millisecond:["%A, %b %e, %H:%M:%S.%L","%A, %b %e, %H:%M:%S.%L","-%H:%M:%S.%L"],second:["%A, %b %e, %H:%M:%S","%A, %b %e, %H:%M:%S","-%H:%M:%S"],minute:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],hour:["%A, %b %e, %H:%M","%A, %b %e, %H:%M","-%H:%M"],day:["%A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],week:["Week from %A, %b %e, %Y","%A, %b %e","-%A, %b %e, %Y"],month:["%B %Y","%B","-%B %Y"],year:["%Y","%Y","-%Y"]}},ti={line:{},spline:{},area:{},areaspline:{},column:{approximation:"sum",groupPixelWidth:10},arearange:{approximation:"range"},areasplinerange:{approximation:"range"},columnrange:{approximation:"range",groupPixelWidth:10},candlestick:{approximation:"ohlc",groupPixelWidth:10},ohlc:{approximation:"ohlc",groupPixelWidth:5}},ei=[["millisecond",[1,2,5,10,20,25,50,100,200,500]],["second",[1,2,5,10,15,30]],["minute",[1,2,5,10,15,30]],["hour",[1,2,3,4,6,8,12]],["day",[1]],["week",[1]],["month",[1,3,6]],["year",null]],ii={sum:function(t){var e,i=t.length;if(!i&&t.hasNulls)e=null;else if(i)for(e=0;i--;)e+=t[i];return e},average:function(t){var e=t.length,i=ii.sum(t);return typeof i===Je&&e&&(i/=e),i},open:function(t){return t.length?t[0]:t.hasNulls?null:void 0},high:function(t){return t.length?Xt(t):t.hasNulls?null:void 0},low:function(t){return t.length?Ft(t):t.hasNulls?null:void 0},close:function(t){return t.length?t[t.length-1]:t.hasNulls?null:void 0},ohlc:function(t,e,i,n){if(t=ii.open(t),e=ii.high(e),i=ii.low(i),n=ii.close(n),typeof t===Je||typeof e===Je||typeof i===Je||typeof n===Je)return[t,e,i,n]},range:function(t,e){if(t=ii.low(t),e=ii.high(e),typeof t===Je||typeof e===Je)return[t,e]}};Ve.groupData=function(t,e,i,n){var r,o,a,s,l=this.data,h=this.options.data,c=[],u=[],p=t.length,d=!!e,f=[[],[],[],[]],g="function"==typeof n?n:ii[n],m=this.pointArrayMap,y=m&&m.length;for(s=0;s<=p&&!(t[s]>=i[0]);s++);for(;s<=p;s++){for(;(void 0!==i[1]&&t[s]>=i[1]||s===p)&&(r=i.shift(),void 0!==(a=g.apply(0,f))&&(c.push(r),u.push(a)),f[0]=[],f[1]=[],f[2]=[],f[3]=[],s!==p););if(s===p)break;if(m){var v,_,x=this.cropStart+s,b=l&&l[x]||this.pointClass.prototype.applyOptions.apply({series:this},[h[x]]);for(v=0;v<y;v++)typeof(_=b[m[v]])===Je?f[v].push(_):null===_&&(f[v].hasNulls=!0)}else typeof(o=d?e[s]:null)===Je?f[0].push(o):null===o&&(f[0].hasNulls=!0)}return[c,u]},Ve.processData=function(){var t,e=this,i=e.chart,n=e.options,r=n.dataGrouping,o=!1!==e.allowDG&&r&&Tt(r.enabled,i.options._stock);if(e.forceCrop=o,e.groupPixelWidth=null,e.hasProcessed=!0,!1!==$e.apply(e,arguments)&&o){e.destroyGroupedData();var a,s=e.processedXData,l=e.processedYData,h=i.plotSizeX,c=e.xAxis,u=c.options.ordinal,p=e.groupPixelWidth=c.getGroupPixelWidth&&c.getGroupPixelWidth(),d=e.pointRange;if(p){t=!0,e.points=null;var f=c.getExtremes(),g=f.min,m=f.max,y=u&&c.getGroupIntervalFactor(g,m,e)||1,v=p*(m-g)/h*y,_=c.getTimeTicks(c.normalizeTimeTickInterval(v,r.units||ei),g,m,c.options.startOfWeek,s,e.closestPointRange),x=Ve.groupData.apply(e,[s,l,_,r.approximation]),b=x[0],k=x[1];if(r.smoothed){for(b[a=b.length-1]=m;a--&&a>0;)b[a]+=v/2;b[0]=g}e.currentDataGrouping=_.info,null===n.pointRange&&(e.pointRange=_.info.totalRange),e.closestPointRange=_.info.totalRange,kt(b[0])&&b[0]<c.dataMin&&(c.min===c.dataMin&&(c.min=b[0]),c.dataMin=b[0]),e.processedXData=b,e.processedYData=k}else e.currentDataGrouping=null,e.pointRange=d;e.hasGroupedData=t}},Ve.destroyGroupedData=function(){var t=this.groupedData;qt(t||[],(function(e,i){e&&(t[i]=e.destroy?e.destroy():null)})),this.groupedData=null},Ve.generatePoints=function(){Ke.apply(this),this.destroyGroupedData(),this.groupedData=this.hasGroupedData?this.points:null},je.tooltipFooterHeaderFormatter=function(t,e){var i,n,o,a,s,l,h=t.series,c=h.options,u=h.tooltipOptions,p=c.dataGrouping,d=u.xDateFormat,f=h.xAxis;return f&&"datetime"===f.options.type&&p&&vt(t.key)?(n=h.currentDataGrouping,o=p.dateTimeLabelFormats,n?(a=o[n.unitName],1===n.count?d=a[0]:(d=a[1],i=a[2])):!d&&o&&(d=this.getXDateFormat(t,u,f)),s=r(d,t.key),i&&(s+=r(i,t.key+n.totalRange-1)),l=u[(e?"footer":"header")+"Format"].replace("{point.key}",s)):l=Ze.call(this,t,e),l},Ve.destroy=function(){for(var t=this.groupedData||[],e=t.length;e--;)t[e]&&t[e].destroy();qe.apply(this)},Lt(Ve,"setOptions",(function(t,e){var i=t.call(this,e),n=this.type,r=this.chart.options.plotOptions,o=ae[n].dataGrouping;return ti[n]&&(o||(o=dt(Qe,ti[n])),i.dataGrouping=dt(o,r.series&&r.series.dataGrouping,r[n].dataGrouping,e.dataGrouping)),this.chart.options._stock&&(this.requireSorting=!0),i})),Lt(be.prototype,"setScale",(function(t){t.call(this),qt(this.series,(function(t){t.hasProcessed=!1}))})),be.prototype.getGroupPixelWidth=function(){var t,e,i,n=this.series,r=n.length,o=0,a=!1;for(t=r;t--;)(i=n[t].options.dataGrouping)&&(o=I(o,i.groupPixelWidth));for(t=r;t--;)(i=n[t].options.dataGrouping)&&n[t].hasProcessed&&(e=(n[t].processedXData||n[t].data).length,(n[t].groupPixelWidth||e>this.chart.plotSizeX/o||e&&i.forced)&&(a=!0));return a?o:0},be.prototype.setDataGrouping=function(t,e){var i;if(e=Tt(e,!0),t||(t={forced:!1,units:null}),this instanceof be)for(i=this.series.length;i--;)this.series[i].update({dataGrouping:t},!1);else qt(this.chart.options.series,(function(e){e.dataGrouping=t}),!1);e&&this.chart.redraw()},ae.ohlc=dt(ae.column,{lineWidth:1,tooltip:{pointFormat:'<span style="color:{point.color}">â</span> <b> {series.name}</b><br/>Open: {point.open}<br/>High: {point.high}<br/>Low: {point.low}<br/>Close: {point.close}<br/>'},states:{hover:{lineWidth:3}},threshold:null});var ni=Dt(ut.column,{type:"ohlc",pointArrayMap:["open","high","low","close"],toYData:function(t){return[t.open,t.high,t.low,t.close]},pointValKey:"high",pointAttrToOptions:{stroke:"color","stroke-width":"lineWidth"},upColorProp:"stroke",getAttribs:function(){ut.column.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,n=e.upColor||t.color,r=dt(t.pointAttr),o=t.upColorProp;r[""][o]=n,r.hover[o]=i.hover.upColor||n,r.select[o]=i.select.upColor||n,qt(t.points,(function(t){t.open<t.close&&!t.options.color&&(t.pointAttr=r)}))},translate:function(){var t=this.yAxis;ut.column.prototype.translate.apply(this),qt(this.points,(function(e){null!==e.open&&(e.plotOpen=t.translate(e.open,0,1,0,1)),null!==e.close&&(e.plotClose=t.translate(e.close,0,1,0,1))}))},drawPoints:function(){var t,e,i,n,r,o,a,s,l=this,h=l.points,c=l.chart;qt(h,(function(h){void 0!==h.plotY&&(a=h.graphic,t=h.pointAttr[h.selected?"selected":""]||l.pointAttr[""],n=t["stroke-width"]%2/2,s=C(h.plotX)-n,r=C(h.shapeArgs.width/2),o=["M",s,C(h.yBottom),"L",s,C(h.plotY)],null!==h.open&&(e=C(h.plotOpen)+n,o.push("M",s,e,"L",s-r,e)),null!==h.close&&(i=C(h.plotClose)+n,o.push("M",s,i,"L",s+r,i)),a?a.attr(t).animate({d:o}):h.graphic=c.renderer.path(o).attr(t).add(l.group))}))},animate:null});ut.ohlc=ni,ae.candlestick=dt(ae.column,{lineColor:"black",lineWidth:1,states:{hover:{lineWidth:2}},tooltip:ae.ohlc.tooltip,threshold:null,upColor:"white"});var ri=Dt(ni,{type:"candlestick",pointAttrToOptions:{fill:"color",stroke:"lineColor","stroke-width":"lineWidth"},upColorProp:"fill",getAttribs:function(){ut.ohlc.prototype.getAttribs.apply(this,arguments);var t=this,e=t.options,i=e.states,n=e.upLineColor||e.lineColor,r=i.hover.upLineColor||n,o=i.select.upLineColor||n;qt(t.points,(function(t){t.open<t.close&&(t.lineColor&&(t.pointAttr=dt(t.pointAttr),n=t.lineColor),t.pointAttr[""].stroke=n,t.pointAttr.hover.stroke=r,t.pointAttr.select.stroke=o)}))},drawPoints:function(){var t,e,i,n,r,o,a,s,l,h,c,u,p=this,d=p.points,f=p.chart,g=p.pointAttr[""];qt(d,(function(d){h=d.graphic,void 0!==d.plotY&&(t=d.pointAttr[d.selected?"selected":""]||g,s=t["stroke-width"]%2/2,l=C(d.plotX)-s,e=d.plotOpen,i=d.plotClose,n=D.min(e,i),r=D.max(e,i),u=C(d.shapeArgs.width/2),o=C(n)!==C(d.plotY),a=r!==d.yBottom,n=C(n)+s,r=C(r)+s,c=["M",l-u,r,"L",l-u,n,"L",l+u,n,"L",l+u,r,"Z","M",l,n,"L",l,o?C(d.plotY):n,"M",l,r,"L",l,a?C(d.yBottom):r],h?h.attr(t).animate({d:c}):d.graphic=f.renderer.path(c).attr(t).add(p.group).shadow(p.options.shadow))}))}});ut.candlestick=ri;var oi=ve.prototype.symbols;ae.flags=dt(ae.column,{fillColor:"white",lineWidth:1,pointRange:0,shape:"flag",stackDistance:12,states:{hover:{lineColor:"black",fillColor:"#FCFFC5"}},style:{fontSize:"11px",fontWeight:"bold",textAlign:"center"},tooltip:{pointFormat:"{point.text}<br/>"},threshold:null,y:-30}),ut.flags=Dt(ut.column,{type:"flags",sorted:!1,noSharedTooltip:!0,allowDG:!1,takeOrdinalPosition:!1,trackerGroups:["markerGroup"],forceCrop:!0,init:Re.prototype.init,pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth",r:"radius"},translate:function(){ut.column.prototype.translate.apply(this);var t,e,i,n,r,o,a=this.options,s=this.chart,l=this.points,h=l.length-1,c=a.onSeries,u=c&&s.get(c),p=u&&u.options.step,d=u&&u.points,f=d&&d.length,g=this.xAxis,m=g.getExtremes();if(u&&u.visible&&f)for(o=u.currentDataGrouping,n=d[f-1].x+(o?o.totalRange:0),l.sort((function(t,e){return t.x-e.x}));f--&&l[h]&&(t=l[h],!((i=d[f]).x<=t.x&&void 0!==i.plotY&&(t.x<=n&&(t.plotY=i.plotY,i.x<t.x&&!p&&(r=d[f+1])&&void 0!==r.plotY&&(t.plotY+=(t.x-i.x)/(r.x-i.x)*(r.plotY-i.plotY))),f++,--h<0))););qt(l,(function(t,i){var n;void 0===t.plotY&&(t.x>=m.min&&t.x<=m.max?t.plotY=s.chartHeight-g.bottom-(g.opposite?g.height:0)+g.offset-s.plotTop:t.shapeArgs={}),(e=l[i-1])&&e.plotX===t.plotX&&(void 0===e.stackIndex&&(e.stackIndex=0),n=e.stackIndex+1),t.stackIndex=n}))},drawPoints:function(){var t,e,i,n,r,o,a,s,l,h,c,u=this.pointAttr[""],p=this.points,d=this.chart.renderer,f=this.options,g=f.y;for(r=p.length;r--;)c=(o=p[r]).plotX>this.xAxis.len,(e=o.plotX)>0&&(e-=Tt(o.lineWidth,f.lineWidth)%2),s=o.stackIndex,n=o.options.shape||f.shape,void 0!==(i=o.plotY)&&(i=o.plotY+g-(void 0!==s&&s*f.stackDistance)),l=s?void 0:o.plotX,h=s?void 0:o.plotY,a=o.graphic,void 0!==i&&e>=0&&!c?(t=o.pointAttr[o.selected?"select":""]||u,a?a.attr({x:e,y:i,r:t.r,anchorX:l,anchorY:h}):a=o.graphic=d.label(o.options.title||f.title||"A",e,i,n,l,h,f.useHTML).css(dt(f.style,o.style)).attr(t).attr({align:"flag"===n?"left":"center",width:f.width,height:f.height}).add(this.markerGroup).shadow(f.shadow),o.tooltipPos=[e,i]):a&&(o.graphic=a.destroy())},drawTracker:function(){var t=this.points;Ge.drawTrackerPoint.apply(this),qt(t,(function(e){var i=e.graphic;i&&te(i.element,"mouseover",(function(){e.stackIndex>0&&!e.raised&&(e._y=i.y,i.attr({y:e._y-8}),e.raised=!0),qt(t,(function(t){t!==e&&t.raised&&t.graphic&&(t.graphic.attr({y:t._y}),t.raised=!1)}))}))}))},animate:J,buildKDTree:J,setClip:J}),oi.flag=function(t,e,i,n,r){return["M",r&&r.anchorX||t,r&&r.anchorY||e,"L",t,e+n,t,e,t+i,e,t+i,e+n,t,e+n,"Z"]},qt(["circle","square"],(function(t){oi[t+"pin"]=function(e,i,n,r,o){var a,s,l=o&&o.anchorX,h=o&&o.anchorY;return"circle"===t&&r>n&&(e-=C((r-n)/2),n=r),a=oi[t](e,i,n,r),l&&h&&(s=i>h?i:i+r,a.push("M",l,s,"L",l,h)),a}})),t===T.VMLRenderer&&qt(["flag","circlepin","squarepin"],(function(t){fe.prototype.symbols[t]=oi[t]}));var ai,si=[].concat(ei),li=function(t){var e=Zt(arguments,(function(t){return"number"==typeof t}));if(e.length)return Math[t].apply(0,e)};function hi(t){var e=t.options,i=e.navigator,n=i.enabled,r=e.scrollbar,o=r.enabled,a=n?i.height:0,s=o?r.height:0;this.handles=[],this.scrollbarButtons=[],this.elementsToDestroy=[],this.chart=t,this.setBaseSeries(),this.height=a,this.scrollbarHeight=s,this.scrollbarEnabled=o,this.navigatorEnabled=n,this.navigatorOptions=i,this.scrollbarOptions=r,this.outlineHeight=a+s,this.init()}function ci(t){this.init(t)}si[4]=["day",[1,2,3,4]],si[5]=["week",[1,2,3]],ai=void 0===ut.areaspline?"line":"areaspline",pt(n,{navigator:{handles:{backgroundColor:"#ebe7e8",borderColor:"#b2b1b6"},height:40,margin:25,maskFill:"rgba(128,179,236,0.3)",maskInside:!0,outlineColor:"#b2b1b6",outlineWidth:1,series:{type:ai,color:"#4572A7",compare:null,fillOpacity:.05,dataGrouping:{approximation:"average",enabled:!0,groupPixelWidth:2,smoothed:!0,units:si},dataLabels:{enabled:!1,zIndex:2},id:nt+"navigator-series",lineColor:"#4572A7",lineWidth:1,marker:{enabled:!1},pointRange:0,shadow:!1,threshold:null},xAxis:{tickWidth:0,lineWidth:0,gridLineColor:"#EEE",gridLineWidth:1,tickPixelInterval:200,labels:{align:"left",style:{color:"#888"},x:3,y:-4},crosshair:!1},yAxis:{gridLineWidth:0,startOnTick:!1,endOnTick:!1,minPadding:.1,maxPadding:.1,labels:{enabled:!1},crosshair:!1,title:{text:null},tickWidth:0}},scrollbar:{height:G?20:14,barBackgroundColor:"#bfc8d1",barBorderRadius:0,barBorderWidth:1,barBorderColor:"#bfc8d1",buttonArrowColor:"#666",buttonBackgroundColor:"#ebe7e8",buttonBorderColor:"#bbb",buttonBorderRadius:0,buttonBorderWidth:1,minWidth:6,rifleColor:"#666",trackBackgroundColor:"#eeeeee",trackBorderColor:"#eeeeee",trackBorderWidth:1,liveRedraw:j&&!G}}),hi.prototype={drawHandle:function(t,e){var i,n=this.chart,r=n.renderer,o=this.elementsToDestroy,a=this.handles,s=this.navigatorOptions.handles,l={fill:s.backgroundColor,stroke:s.borderColor,"stroke-width":1};this.rendered||(a[e]=r.g("navigator-handle-"+["left","right"][e]).css({cursor:"ew-resize"}).attr({zIndex:4-e}).add(),i=r.rect(-4.5,0,9,16,0,1).attr(l).add(a[e]),o.push(i),i=r.path(["M",-1.5,4,"L",-1.5,12,"M",.5,4,"L",.5,12]).attr(l).add(a[e]),o.push(i)),a[e][n.isResizing?"animate":"attr"]({translateX:this.scrollerLeft+this.scrollbarHeight+parseInt(t,10),translateY:this.top+this.height/2-8})},drawScrollbarButton:function(t){var e,i=this.chart.renderer,n=this.elementsToDestroy,r=this.scrollbarButtons,o=this.scrollbarHeight,a=this.scrollbarOptions;this.rendered||(r[t]=i.g().add(this.scrollbarGroup),e=i.rect(-.5,-.5,o+1,o+1,a.buttonBorderRadius,a.buttonBorderWidth).attr({stroke:a.buttonBorderColor,"stroke-width":a.buttonBorderWidth,fill:a.buttonBackgroundColor}).add(r[t]),n.push(e),e=i.path(["M",o/2+(t?-1:1),o/2-3,"L",o/2+(t?-1:1),o/2+3,o/2+(t?2:-2),o/2]).attr({fill:a.buttonArrowColor}).add(r[t]),n.push(e)),t&&r[t].attr({translateX:this.scrollerWidth-o})},render:function(t,e,i,n){var r,o,a,s,l,h,c,u,p,d,f,g,m,y=this.chart,v=y.renderer,_=this.scrollbarGroup,x=this.navigatorGroup,b=this.scrollbar,k=this.xAxis,w=this.scrollbarTrack,S=this.scrollbarHeight,T=this.scrollbarEnabled,P=this.navigatorOptions,A=this.scrollbarOptions,D=A.minWidth,L=this.height,H=this.top,O=this.navigatorEnabled,Y=P.outlineWidth,F=Y/2,X=0,z=this.outlineHeight,B=A.barBorderRadius,N=A.barBorderWidth,W=H+F;kt(t)&&!isNaN(t)&&(this.navigatorLeft=r=Tt(k.left,y.plotLeft+S),this.navigatorWidth=o=Tt(k.len,y.plotWidth-2*S),this.scrollerLeft=a=r-S,this.scrollerWidth=s=s=o+2*S,k.getExtremes&&(!(m=this.getUnionExtremes(!0))||m.dataMin===k.min&&m.dataMax===k.max||k.setExtremes(m.dataMin,m.dataMax,!0,!1)),i=Tt(i,k.translate(t)),n=Tt(n,k.translate(e)),(isNaN(i)||R(i)===1/0)&&(i=0,n=s),k.translate(n,!0)-k.translate(i,!0)<y.xAxis[0].minRange||(this.zoomedMax=E(I(i,n),o),this.zoomedMin=I(this.fixedWidth?this.zoomedMax-this.fixedWidth:E(i,n),0),this.range=this.zoomedMax-this.zoomedMin,c=(h=C(this.zoomedMax))-(l=C(this.zoomedMin)),this.rendered||(O&&(this.navigatorGroup=x=v.g("navigator").attr({zIndex:3}).add(),this.leftShade=v.rect().attr({fill:P.maskFill}).add(x),P.maskInside?this.leftShade.css({cursor:"ew-resize "}):this.rightShade=v.rect().attr({fill:P.maskFill}).add(x),this.outline=v.path().attr({"stroke-width":Y,stroke:P.outlineColor}).add(x)),T&&(this.scrollbarGroup=_=v.g("scrollbar").add(),d=A.trackBorderWidth,this.scrollbarTrack=w=v.rect().attr({x:0,y:-d%2/2,fill:A.trackBackgroundColor,stroke:A.trackBorderColor,"stroke-width":d,r:A.trackBorderRadius||0,height:S}).add(_),this.scrollbar=b=v.rect().attr({y:-N%2/2,height:S,fill:A.barBackgroundColor,stroke:A.barBorderColor,"stroke-width":N,r:B}).add(_),this.scrollbarRifles=v.path().attr({stroke:A.rifleColor,"stroke-width":1}).add(_))),g=y.isResizing?"animate":"attr",O&&(this.leftShade[g](P.maskInside?{x:r+l,y:H,width:h-l,height:L}:{x:r,y:H,width:l,height:L}),this.rightShade&&this.rightShade[g]({x:r+h,y:H,width:o-h,height:L}),this.outline[g]({d:[st,a,W,lt,r+l-F,W,r+l-F,W+z,lt,r+h-F,W+z,lt,r+h-F,W,a+s,W].concat(P.maskInside?[st,r+l+F,W,lt,r+h-F,W]:[])}),this.drawHandle(l+F,0),this.drawHandle(h+F,1)),T&&_&&(this.drawScrollbarButton(0),this.drawScrollbarButton(1),_[g]({translateX:a,translateY:C(W+L)}),w[g]({width:s}),u=S+l,(p=c-N)<D&&(X=(D-p)/2,p=D,u-=X),this.scrollbarPad=X,b[g]({x:M(u)+N%2/2,width:p}),f=S+l+c/2-.5,this.scrollbarRifles.attr({visibility:c>12?rt:it})[g]({d:[st,f-3,S/4,lt,f-3,2*S/3,st,f,S/4,lt,f,2*S/3,st,f+3,S/4,lt,f+3,2*S/3]})),this.scrollbarPad=X,this.rendered=!0))},addEvents:function(){var t,i=this.chart.container,n=this.mouseDownHandler,r=this.mouseMoveHandler,o=this.mouseUpHandler;t=[[i,"mousedown",n],[i,"mousemove",r],[document,"mouseup",o]],e&&t.push([i,"touchstart",n],[i,"touchmove",r],[document,"touchend",o]),qt(t,(function(t){te.apply(null,t)})),this._events=t},removeEvents:function(){qt(this._events,(function(t){ee.apply(null,t)})),this._events=void 0,this.navigatorEnabled&&this.baseSeries&&ee(this.baseSeries,"updatedData",this.updatedDataHandler)},init:function(){var t,e,i,n,r=this,o=r.chart,a=r.scrollbarHeight,s=r.navigatorOptions,l=r.height,h=r.top,c=r.baseSeries;r.mouseDownHandler=function(e){e=o.pointer.normalize(e);var n,a,s,h,c=r.zoomedMin,u=r.zoomedMax,p=r.top,d=r.scrollbarHeight,f=r.scrollerLeft,g=r.scrollerWidth,m=r.navigatorLeft,y=r.navigatorWidth,v=r.scrollbarPad,_=r.range,x=e.chartX,b=e.chartY,k=o.xAxis[0],w=G?10:7;b>p&&b<p+l+d&&((h=!r.scrollbarEnabled||b<p+l)&&D.abs(x-c-m)<w?(r.grabbedLeft=!0,r.otherHandlePos=u,r.fixedExtreme=k.max,o.fixedRange=null):h&&D.abs(x-u-m)<w?(r.grabbedRight=!0,r.otherHandlePos=c,r.fixedExtreme=k.min,o.fixedRange=null):x>m+c-v&&x<m+u+v?(r.grabbedCenter=x,r.fixedWidth=_,i=x-c):x>f&&x<f+g&&((s=h?x-m-_/2:x<m?c-.2*_:x>f+g-d?c+.2*_:x<m+c?c-_:u)<0?s=0:s+_>=y&&(s=y-_,n=r.getUnionExtremes().dataMax),s!==c&&(r.fixedWidth=_,a=t.toFixedRange(s,s+_,null,n),k.setExtremes(a.min,a.max,!0,!1,{trigger:"navigator"}))))},r.mouseMoveHandler=function(t){var e,a=r.scrollbarHeight,s=r.navigatorLeft,l=r.navigatorWidth,h=r.scrollerLeft,c=r.scrollerWidth,u=r.range;0!==t.pageX&&((e=(t=o.pointer.normalize(t)).chartX)<s?e=s:e>h+c-a&&(e=h+c-a),r.grabbedLeft?(n=!0,r.render(0,0,e-s,r.otherHandlePos)):r.grabbedRight?(n=!0,r.render(0,0,r.otherHandlePos,e-s)):r.grabbedCenter&&(n=!0,e<i?e=i:e>l+i-u&&(e=l+i-u),r.render(0,0,e-i,e-i+u)),n&&r.scrollbarOptions.liveRedraw&&setTimeout((function(){r.mouseUpHandler(t)}),0))},r.mouseUpHandler=function(e){var a,s,l;n&&(r.zoomedMin===r.otherHandlePos?s=r.fixedExtreme:r.zoomedMax===r.otherHandlePos&&(l=r.fixedExtreme),a=t.toFixedRange(r.zoomedMin,r.zoomedMax,s,l),o.xAxis[0].setExtremes(a.min,a.max,!0,!1,{trigger:"navigator",triggerOp:"navigator-drag",DOMEvent:e})),"mousemove"!==e.type&&(r.grabbedLeft=r.grabbedRight=r.grabbedCenter=r.fixedWidth=r.fixedExtreme=r.otherHandlePos=n=i=null)};var u=o.xAxis.length,p=o.yAxis.length;o.extraBottomMargin=r.outlineHeight+s.margin,r.navigatorEnabled?(r.xAxis=t=new be(o,dt({breaks:c&&c.xAxis.options.breaks,ordinal:c&&c.xAxis.options.ordinal},s.xAxis,{id:"navigator-x-axis",isX:!0,type:"datetime",index:u,height:l,offset:0,offsetLeft:a,offsetRight:-a,keepOrdinalPadding:!0,startOnTick:!1,endOnTick:!1,minPadding:0,maxPadding:0,zoomEnabled:!1})),r.yAxis=e=new be(o,dt(s.yAxis,{id:"navigator-y-axis",alignTicks:!1,height:l,offset:0,index:p,zoomEnabled:!1})),c||s.series.data?r.addBaseSeries():0===o.series.length&&Lt(o,"redraw",(function(t,e){o.series.length>0&&!r.series&&(r.setBaseSeries(),o.redraw=t),t.call(o,e)}))):r.xAxis=t={translate:function(t,e){var i=o.xAxis[0],n=i.getExtremes(),r=o.plotWidth-2*a,s=li("min",i.options.min,n.dataMin),l=li("max",i.options.max,n.dataMax)-s;return e?t*l/r+s:r*(t-s)/l},toFixedRange:be.prototype.toFixedRange},Lt(o,"getMargins",(function(i){var n=this.legend,o=n.options;i.apply(this,[].slice.call(arguments,1)),r.top=h=r.navigatorOptions.top||this.chartHeight-r.height-r.scrollbarHeight-this.spacing[2]-("bottom"===o.verticalAlign&&o.enabled&&!o.floating?n.legendHeight+Tt(o.margin,10):0),t&&e&&(t.options.top=e.options.top=h,t.setAxisSize(),e.setAxisSize())})),r.addEvents()},getUnionExtremes:function(t){var e,i=this.chart.xAxis[0],n=this.xAxis,r=n.options,o=i.options;return t&&null===i.dataMin||(e={dataMin:Tt(r&&r.min,li("min",o.min,i.dataMin,n.dataMin)),dataMax:Tt(r&&r.max,li("max",o.max,i.dataMax,n.dataMax))}),e},setBaseSeries:function(t){var e=this.chart;t=t||e.options.navigator.baseSeries,this.series&&this.series.remove(),this.baseSeries=e.series[t]||"string"==typeof t&&e.get(t)||e.series[0],this.xAxis&&this.addBaseSeries()},addBaseSeries:function(){var t,e,i=this.baseSeries,n=i?i.options:{},r=n.data,o=this.navigatorOptions.series;e=o.data,this.hasNavigatorData=!!e,(t=dt(n,o,{enableMouseTracking:!1,group:"nav",padXAxis:!1,xAxis:"navigator-x-axis",yAxis:"navigator-y-axis",name:"Navigator",showInLegend:!1,isInternal:!0,visible:!0})).data=e||r,this.series=this.chart.initSeries(t),i&&!1!==this.navigatorOptions.adaptToUpdatedData&&(te(i,"updatedData",this.updatedDataHandler),i.userOptions.events=pt(i.userOptions.event,{updatedData:this.updatedDataHandler}))},updatedDataHandler:function(){var t,e,i,n,r,o=this.chart.scroller,a=o.baseSeries,s=a.xAxis,l=s.getExtremes(),h=l.min,c=l.max,u=l.dataMin,p=l.dataMax,d=c-h,f=o.series,g=f.xData,m=!!s.setExtremes;e=c>=g[g.length-1]-(this.closestPointRange||0),t=h<=u,o.hasNavigatorData||(f.options.pointStart=a.xData[0],f.setData(a.options.data,!1),r=!0),t&&(i=(n=u)+d),e&&(i=p,t||(n=I(i-d,f.xData[0]))),m&&(t||e)?isNaN(n)||s.setExtremes(n,i,!0,!1,{trigger:"updatedData"}):(r&&this.chart.redraw(!1),o.render(I(h,u),E(c,p)))},destroy:function(){this.removeEvents(),qt([this.xAxis,this.yAxis,this.leftShade,this.rightShade,this.outline,this.scrollbarTrack,this.scrollbarRifles,this.scrollbarGroup,this.scrollbar],(function(t){t&&t.destroy&&t.destroy()})),this.xAxis=this.yAxis=this.leftShade=this.rightShade=this.outline=this.scrollbarTrack=this.scrollbarRifles=this.scrollbarGroup=this.scrollbar=null,qt([this.scrollbarButtons,this.handles,this.elementsToDestroy],(function(t){zt(t)}))}},T.Scroller=hi,Lt(be.prototype,"zoom",(function(t,e,i){var n,r,o=this.chart,a=o.options,s=a.chart.zoomType,l=a.navigator,h=a.rangeSelector;return this.isXAxis&&(l&&l.enabled||h&&h.enabled)&&("x"===s?o.resetZoomButton="blocked":"y"===s?r=!1:"xy"===s&&(n=this.previousZoom,kt(e)?this.previousZoom=[this.min,this.max]:n&&(e=n[0],i=n[1],delete this.previousZoom))),void 0!==r?r:t.call(this,e,i)})),Lt(Le.prototype,"init",(function(t,e,i){te(this,"beforeRender",(function(){var t=this.options;(t.navigator.enabled||t.scrollbar.enabled)&&(this.scroller=new hi(this))})),t.call(this,e,i)})),Lt(Re.prototype,"addPoint",(function(t,e,i,n,r){var o=this.options.turboThreshold;o&&this.xData.length>o&&mt(e)&&!yt(e)&&this.chart.scroller&&Nt(20,!0),t.call(this,e,i,n,r)})),pt(n,{rangeSelector:{buttonTheme:{width:28,height:18,fill:"#f7f7f7",padding:2,r:0,"stroke-width":0,style:{color:"#444",cursor:"pointer",fontWeight:"normal"},zIndex:7,states:{hover:{fill:"#e7e7e7"},select:{fill:"#e7f0f9",style:{color:"black",fontWeight:"bold"}}}},inputPosition:{align:"right"},labelStyle:{color:"#666"}}}),n.lang=dt(n.lang,{rangeSelectorZoom:"Zoom",rangeSelectorFrom:"From",rangeSelectorTo:"To"}),ci.prototype={clickButton:function(t,e){var i,n,r,o,a,s,h,c,u=this,p=u.selected,d=u.chart,f=u.buttons,g=u.buttonOptions[t],m=d.xAxis[0],y=d.scroller&&d.scroller.getUnionExtremes()||m||{},v=y.dataMin,_=y.dataMax,x=m&&C(E(m.max,Tt(_,m.max))),b=g.type,k=g._range,w=g.dataGrouping;if(null!==v&&null!==_&&t!==u.selected){if(d.fixedRange=k,w&&(this.forcedDataGrouping=!0,be.prototype.setDataGrouping.call(m||{chart:this.chart},w,!1)),"month"===b||"year"===b)m?(c={range:g,max:x,dataMin:v,dataMax:_},i=m.minFromRange.call(c),"number"==typeof c.newMax&&(x=c.newMax)):k=g;else if(k)i=I(x-k,v),x=E(i+k,_);else if("ytd"===b){if(!m)return void te(d,"beforeRender",(function(){u.clickButton(t)}));void 0===_&&(v=Number.MAX_VALUE,_=Number.MIN_VALUE,qt(d.series,(function(t){var e=t.xData;v=E(e[0],v),_=I(e[e.length-1],_)})),e=!1),a=(n=new l(_)).getFullYear(),i=o=I(v||0,l.UTC(a,0,1)),n=n.getTime(),x=E(_||n,n)}else"all"===b&&m&&(i=v,x=_);f[p]&&f[p].setState(0),f[t]&&f[t].setState(2),m?(m.setExtremes(i,x,Tt(e,1),0,{trigger:"rangeSelectorButton",rangeSelectorButton:g}),u.setSelected(t)):(r=d.options.xAxis[0],h=r.range,r.range=k,s=r.min,r.min=o,u.setSelected(t),te(d,"load",(function(){r.range=h,r.min=s})))}},setSelected:function(t){this.selected=this.options.selected=t},defaultButtons:[{type:"month",count:1,text:"1m"},{type:"month",count:3,text:"3m"},{type:"month",count:6,text:"6m"},{type:"ytd",text:"YTD"},{type:"year",count:1,text:"1y"},{type:"all",text:"All"}],init:function(t){var e=this,i=t.options.rangeSelector,n=i.buttons||[].concat(e.defaultButtons),r=i.selected,o=e.blurInputs=function(){var t=e.minInput,i=e.maxInput;t&&t.blur&&ie(t,"blur"),i&&i.blur&&ie(i,"blur")};e.chart=t,e.options=i,e.buttons=[],t.extraTopMargin=35,e.buttonOptions=n,te(t.container,"mousedown",o),te(t,"resize",o),qt(n,e.computeButtonRange),void 0!==r&&n[r]&&this.clickButton(r,!1),te(t,"load",(function(){te(t.xAxis[0],"setExtremes",(function(i){this.max-this.min!==t.fixedRange&&"rangeSelectorButton"!==i.trigger&&"updatedData"!==i.trigger&&e.forcedDataGrouping&&this.setDataGrouping(!1,!1)})),te(t.xAxis[0],"afterSetExtremes",(function(){e.updateButtonStates(!0)}))}))},updateButtonStates:function(t){var e=this,i=this.chart,n=i.xAxis[0],o=i.scroller&&i.scroller.getUnionExtremes()||n,a=o.dataMin,s=o.dataMax,l=e.selected,h=e.options.allButtonsEnabled,c=e.buttons;t&&i.fixedRange!==C(n.max-n.min)&&(c[l]&&c[l].setState(0),e.setSelected(null)),qt(e.buttonOptions,(function(t,o){var u=C(n.max-n.min),p=t._range,d=t.type,f=t.count||1,g=p>s-a,m=p<n.minRange,y="all"===t.type&&n.max-n.min>=s-a&&2!==c[o].state,v="ytd"===t.type&&r("%Y",a)===r("%Y",s),_=i.renderer.forExport&&o===l,x=p===u;("month"===d||"year"===d)&&u>=24*{month:28,year:365}[d]*36e5*f&&u<=24*{month:31,year:366}[d]*36e5*f&&(x=!0),_||x&&o!==l?(e.setSelected(o),c[o].setState(2)):!h&&(g||m||y||v)?c[o].setState(3):3===c[o].state&&c[o].setState(0)}))},computeButtonRange:function(t){var e=t.type,i=t.count||1,n={millisecond:1,second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};n[e]?t._range=n[e]*i:"month"!==e&&"year"!==e||(t._range=24*{month:30,year:365}[e]*36e5*i)},setInputValue:function(t,e){var i=this.chart.options.rangeSelector;kt(e)&&(this[t+"Input"].HCTime=e),this[t+"Input"].value=r(i.inputEditDateFormat||"%Y-%m-%d",this[t+"Input"].HCTime),this[t+"DateBox"].attr({text:r(i.inputDateFormat||"%b %e, %Y",this[t+"Input"].HCTime)})},showInput:function(t){var e=this.inputGroup,i=this[t+"DateBox"];Pt(this[t+"Input"],{left:e.translateX+i.x+ot,top:e.translateY+ot,width:i.width-2+ot,height:i.height-2+ot,border:"2px solid silver"})},hideInput:function(t){Pt(this[t+"Input"],{border:0,width:"1px",height:"1px"}),this.setInputValue(t)},drawInput:function(t){var e,i,r,o=this,a=o.chart,s=a.renderer.style,h=a.renderer,c=a.options.rangeSelector,u=n.lang,p=o.div,d="min"===t,f=this.inputGroup;this[t+"Label"]=i=h.label(u[d?"rangeSelectorFrom":"rangeSelectorTo"],this.inputGroup.offset).attr({padding:2}).css(dt(s,c.labelStyle)).add(f),f.offset+=i.width+5,this[t+"DateBox"]=r=h.label("",f.offset).attr({padding:2,width:c.inputBoxWidth||90,height:c.inputBoxHeight||17,stroke:c.inputBoxBorderColor||"silver","stroke-width":1}).css(dt({textAlign:"center",color:"#444"},s,c.inputStyle)).on("click",(function(){o.showInput(t),o[t+"Input"].focus()})).add(f),f.offset+=r.width+(d?10:0),this[t+"Input"]=e=At("input",{name:t,className:nt+"range-selector",type:"text"},pt({position:"absolute",border:0,width:"1px",height:"1px",padding:0,textAlign:"center",fontSize:s.fontSize,fontFamily:s.fontFamily,top:a.plotTop+ot},c.inputStyle),p),e.onfocus=function(){o.showInput(t)},e.onblur=function(){o.hideInput(t)},e.onchange=function(){var t=e.value,i=(c.inputDateParser||l.parse)(t),r=a.xAxis[0],s=r.dataMin,h=r.dataMax;isNaN(i)&&(i=t.split("-"),i=l.UTC(ft(i[0]),ft(i[1])-1,ft(i[2]))),isNaN(i)||(n.global.useUTC||(i+=60*(new l).getTimezoneOffset()*1e3),d?i>o.maxInput.HCTime?i=void 0:i<s&&(i=s):i<o.minInput.HCTime?i=void 0:i>h&&(i=h),void 0!==i&&a.xAxis[0].setExtremes(d?i:r.min,d?r.max:i,void 0,void 0,{trigger:"rangeSelectorInput"}))}},getPosition:function(){var t=this.chart,e=t.options.rangeSelector,i=Tt((e.buttonPosition||{}).y,t.plotTop-t.axisOffset[0]-35);return{buttonTop:i,inputTop:i-10}},render:function(t,e){var i,r,o=this,a=o.chart,s=a.renderer,l=a.container,h=a.options,c=h.exporting&&h.navigation&&h.navigation.buttonOptions,u=h.rangeSelector,p=o.buttons,d=n.lang,f=o.div,g=o.inputGroup,m=u.buttonTheme,y=u.buttonPosition||{},v=u.inputEnabled,_=m&&m.states,x=a.plotLeft,b=this.getPosition(),k=o.group,w=o.rendered;w||(o.group=k=s.g("range-selector-buttons").add(),o.zoomText=s.text(d.rangeSelectorZoom,Tt(y.x,x),15).css(u.labelStyle).add(k),i=Tt(y.x,x)+o.zoomText.getBBox().width+5,qt(o.buttonOptions,(function(t,e){p[e]=s.button(t.text,i,0,(function(){o.clickButton(e),o.isActive=!0}),m,_&&_.hover,_&&_.select,_&&_.disabled).css({textAlign:"center"}).add(k),i+=p[e].width+Tt(u.buttonSpacing,5),o.selected===e&&p[e].setState(2)})),o.updateButtonStates(),!1!==v&&(o.div=f=At("div",null,{position:"relative",height:0,zIndex:1}),l.parentNode.insertBefore(f,l),o.inputGroup=g=s.g("input-group").add(),g.offset=0,o.drawInput("min"),o.drawInput("max"))),k[w?"animate":"attr"]({translateY:b.buttonTop}),!1!==v&&(g.align(pt({y:b.inputTop,width:g.offset,x:c&&b.inputTop<(c.y||0)+c.height-a.spacing[0]?-40:0},u.inputPosition),!0,a.spacingBox),kt(v)||(r=k.getBBox(),g[g.translateX<r.x+r.width+10?"hide":"show"]()),o.setInputValue("min",t),o.setInputValue("max",e)),o.rendered=!0},destroy:function(){var t,e=this.minInput,i=this.maxInput,n=this.chart,r=this.blurInputs;for(t in ee(n.container,"mousedown",r),ee(n,"resize",r),zt(this.buttons),e&&(e.onfocus=e.onblur=e.onchange=null),i&&(i.onfocus=i.onblur=i.onchange=null),this)this[t]&&"chart"!==t&&(this[t].destroy?this[t].destroy():this[t].nodeType&&Bt(this[t])),this[t]=null}},be.prototype.toFixedRange=function(t,e,i,n){var r=this.chart&&this.chart.fixedRange,o=Tt(i,this.translate(t,!0)),a=Tt(n,this.translate(e,!0)),s=r&&(a-o)/r;return s>.7&&s<1.3&&(n?o=a-r:a=o+r),{min:o,max:a}},be.prototype.minFromRange=function(){var t,e,i,n=this.range,r={month:"Month",year:"FullYear"}[n.type],o=this.max,a=new l(o);return"number"==typeof n?(t=this.max-n,i=n):(a["set"+r](a["get"+r]()-n.count),t=a.getTime()),e=Tt(this.dataMin,Number.MIN_VALUE),isNaN(t)&&(t=e),t<=e&&(t=e,this.newMax=E(t+i,this.dataMax)),isNaN(o)&&(t=void 0),t},Lt(Le.prototype,"init",(function(t,e,i){te(this,"init",(function(){this.options.rangeSelector.enabled&&(this.rangeSelector=new ci(this))})),t.call(this,e,i)})),T.RangeSelector=ci,Le.prototype.callbacks.push((function(t){var e,i=t.scroller,n=t.rangeSelector;function r(){e=t.xAxis[0].getExtremes(),i.render(e.min,e.max)}function o(){e=t.xAxis[0].getExtremes(),isNaN(e.min)||n.render(e.min,e.max)}function a(t){"navigator-drag"!==t.triggerOp&&i.render(t.min,t.max)}function s(t){n.render(t.min,t.max)}i&&(te(t.xAxis[0],"afterSetExtremes",a),Lt(t,"drawChartBox",(function(t){var e=this.isDirtyBox;t.call(this),e&&r()})),r()),n&&(te(t.xAxis[0],"afterSetExtremes",s),te(t,"resize",o),o()),te(t,"destroy",(function(){i&&ee(t.xAxis[0],"afterSetExtremes",a),n&&(ee(t,"resize",o),ee(t.xAxis[0],"afterSetExtremes",s))}))})),T.StockChart=function(t,e){var i=t.series,n=Tt(t.navigator&&t.navigator.enabled,!0)?{startOnTick:!1,endOnTick:!1}:null,r={marker:{enabled:!1,radius:2}},o={shadow:!1,borderWidth:0};return t.xAxis=Qt(St(t.xAxis||{}),(function(t){return dt({minPadding:0,maxPadding:0,ordinal:!0,title:{text:null},labels:{overflow:"justify"},showLastLabel:!0},t,{type:"datetime",categories:null},n)})),t.yAxis=Qt(St(t.yAxis||{}),(function(t){return dt({labels:{y:-2},opposite:Tt(t.opposite,!0),showLastLabel:!1,title:{text:null}},t)})),t.series=null,(t=dt({chart:{panning:!0,pinchType:"x"},navigator:{enabled:!0},scrollbar:{enabled:!0},rangeSelector:{enabled:!0},title:{text:null,style:{fontSize:"16px"}},tooltip:{shared:!0,crosshairs:!0},legend:{enabled:!1},plotOptions:{line:r,spline:r,area:r,areaspline:r,arearange:r,areasplinerange:r,column:o,columnrange:o,candlestick:o,ohlc:o}},t,{_stock:!0,chart:{inverted:!1}})).series=i,new Le(t,e)},Lt(Se.prototype,"init",(function(t,e,i){var n=i.chart.pinchType||"";t.call(this,e,i),this.pinchX=this.pinchHor=-1!==n.indexOf("x"),this.pinchY=this.pinchVert=-1!==n.indexOf("y"),this.hasZoom=this.hasZoom||this.pinchHor||this.pinchVert})),Lt(be.prototype,"autoLabelAlign",(function(t){var e,i=this.chart,n=this.options,r=i._labelPanes=i._labelPanes||{},o=this.options.labels;return this.chart.options._stock&&"yAxis"===this.coll&&!r[e=n.top+","+n.height]&&o.enabled?(15===o.x&&(o.x=0),void 0===o.align&&(o.align="right"),r[e]=1,"right"):t.call(this,[].slice.call(arguments,1))})),Lt(be.prototype,"getPlotLinePath",(function(t,e,i,n,r,o){var a,s,l,h,c,u,p=this,d=this.isLinked&&!this.series?this.linkedParent.series:this.series,f=p.chart,g=f.renderer,m=p.left,y=p.top,v=[],_=[];return"colorAxis"===p.coll?t.apply(this,[].slice.call(arguments,1)):(_=p.isXAxis?kt(p.options.yAxis)?[f.yAxis[p.options.yAxis]]:Qt(d,(function(t){return t.yAxis})):kt(p.options.xAxis)?[f.xAxis[p.options.xAxis]]:Qt(d,(function(t){return t.xAxis})),c=p.isXAxis?f.yAxis:f.xAxis,qt(c,(function(t){if(!kt(t.options.id)||-1===t.options.id.indexOf("navigator")){var e=t.isXAxis?"yAxis":"xAxis",i=kt(t.options[e])?f[e][t.options[e]]:f[e][0];p===i&&_.push(t)}})),u=_.length?[]:[p.isXAxis?f.yAxis[0]:f.xAxis[0]],qt(_,(function(t){-1===Kt(t,u)&&u.push(t)})),o=Tt(o,p.translate(e,null,null,n)),isNaN(o)||(p.horiz?qt(u,(function(t){var e;s=t.pos,h=s+t.len,((a=l=C(o+p.transB))<m||a>m+p.width)&&(r?a=l=E(I(m,a),m+p.width):e=!0),e||v.push("M",a,s,"L",l,h)})):qt(u,(function(t){var e;a=t.pos,l=a+t.len,((s=h=C(y+p.height-o))<y||s>y+p.height)&&(r?s=h=E(I(y,s),p.top+p.height):e=!0),e||v.push("M",a,s,"L",l,h)}))),v.length>0?g.crispPolyLine(v,i||1):null)})),be.prototype.getPlotBandPath=function(t,e){var i,n=this.getPlotLinePath(e,null,null,!0),r=this.getPlotLinePath(t,null,null,!0),o=[];if(r&&n&&r.toString()!==n.toString())for(i=0;i<r.length;i+=6)o.push("M",r[i+1],r[i+2],"L",r[i+4],r[i+5],n[i+4],n[i+5],n[i+1],n[i+2]);else o=null;return o},ve.prototype.crispPolyLine=function(t,e){var i;for(i=0;i<t.length;i+=6)t[i+1]===t[i+4]&&(t[i+1]=t[i+4]=C(t[i+1])-e%2/2),t[i+2]===t[i+5]&&(t[i+2]=t[i+5]=C(t[i+2])+e%2/2);return t},t===T.VMLRenderer&&(fe.prototype.crispPolyLine=ve.prototype.crispPolyLine),Lt(be.prototype,"hideCrosshair",(function(t,e){t.call(this,e),kt(this.crossLabelArray)&&(kt(e)?this.crossLabelArray[e]&&this.crossLabelArray[e].hide():qt(this.crossLabelArray,(function(t){t.hide()})))})),Lt(be.prototype,"drawCrosshair",(function(t,e,i){if(t.call(this,e,i),kt(this.crosshair.label)&&this.crosshair.label.enabled&&kt(i)){var n,r,o,a,s=this.chart,l=this.options.crosshair.label,h=this.isXAxis?"x":"y",c=this.horiz,u=this.opposite,p=this.left,d=this.top,f=this.crossLabel,g=l.format,m="";f||(f=this.crossLabel=s.renderer.label().attr({align:l.align||(c?"center":u?"right"===this.labelAlign?"right":"left":"left"===this.labelAlign?"left":"center"),zIndex:12,height:c?16:void 0,fill:l.backgroundColor||this.series[0]&&this.series[0].color||"gray",padding:Tt(l.padding,2),stroke:l.borderColor||null,"stroke-width":l.borderWidth||0}).css(pt({color:"white",fontWeight:"normal",fontSize:"11px",textAlign:"center"},l.style)).add()),c?(n=i.plotX+p,r=d+(u?0:this.height)):(n=u?this.width+p:0,r=i.plotY+d),r<d||r>d+this.height?this.hideCrosshair():(g||l.formatter||(this.isDatetimeAxis&&(m="%b %d, %Y"),g="{value"+(m?":"+m:"")+"}"),f.attr({text:g?Rt(g,{value:i[h]}):l.formatter.call(this,i[h]),x:n,y:r,visibility:rt}),o=f.getBBox(),c?("inside"===this.options.tickPosition&&!u||"inside"!==this.options.tickPosition&&u)&&(r=f.y-o.height):r=f.y-o.height/2,a=c?{left:p-o.x,right:p+this.width-o.x}:{left:"left"===this.labelAlign?p:0,right:"right"===this.labelAlign?p+this.width:s.chartWidth},f.translateX<a.left&&(n+=a.left-f.translateX),f.translateX+o.width>=a.right&&(n-=f.translateX+o.width-a.right),f.attr({x:n,y:r,visibility:rt}))}}));var ui=Ve.init,pi=Ve.processData,di=Ee.prototype.tooltipFormatter;Ve.init=function(){ui.apply(this,arguments),this.setCompare(this.options.compare)},Ve.setCompare=function(t){this.modifyValue="value"===t||"percent"===t?function(e,i){var n=this.compareValue;return void 0!==e&&(e="value"===t?e-n:e=e/n*100-100,i&&(i.change=e)),e}:null,this.chart.hasRendered&&(this.isDirty=!0)},Ve.processData=function(){var t,e,i,n=this,r=0;if(pi.apply(this,arguments),n.xAxis&&n.processedYData)for(t=n.processedXData,i=(e=n.processedYData).length;r<i;r++)if(typeof e[r]===Je&&t[r]>=n.xAxis.min){n.compareValue=e[r];break}},Lt(Ve,"getExtremes",(function(t){t.apply(this,[].slice.call(arguments,1)),this.modifyValue&&(this.dataMax=this.modifyValue(this.dataMax),this.dataMin=this.modifyValue(this.dataMin))})),be.prototype.setCompare=function(t,e){this.isXAxis||(qt(this.series,(function(e){e.setCompare(t)})),Tt(e,!0)&&this.chart.redraw())},Ee.prototype.tooltipFormatter=function(t){return t=t.replace("{point.change}",(this.change>0?"+":"")+T.numberFormat(this.change,Tt(this.series.tooltipOptions.changeDecimals,2))),di.apply(this,[t])},Lt(Re.prototype,"render",(function(t){this.chart.options._stock&&this.xAxis&&(!this.clipBox&&this.animate?(this.clipBox=dt(this.chart.clipBox),this.clipBox.width=this.xAxis.len,this.clipBox.height=this.yAxis.len):this.chart[this.sharedClipKey]&&(oe(this.chart[this.sharedClipKey]),this.chart[this.sharedClipKey].attr({width:this.xAxis.len,height:this.yAxis.len}))),t.call(this)})),pt(T,{Color:pe,Point:Ee,Tick:xe,Renderer:t,SVGElement:de,SVGRenderer:ve,arrayMin:Ft,arrayMax:Xt,charts:Q,dateFormat:r,error:Nt,format:Rt,pathAnim:o,getOptions:function(){return n},hasBidiBug:$,isTouchDevice:G,setOptions:function(t){return n=dt(!0,n,t),le(),n},addEvent:te,removeEvent:ee,createElement:At,discardElement:Bt,css:Pt,each:qt,map:Qt,merge:dt,splat:St,extendClass:Dt,pInt:ft,svg:j,canvas:K,vml:!j&&!K,product:"Highstock",version:"2.1.8"})}();var mustOverride=function(t){throw t+" is abstract and must be overridden"},InheritanceException=function(t){this.message=t,this.name=this.constructor.name},__inherit=function(t,e){var i;if(e(t,(function(e){if(i)throw new InheritanceException("must call the ctor function only once");for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);var r=function(){this.constructor=e};return r.prototype=t.prototype,e.prototype=new r,i=e,e})),!i)throw new InheritanceException("must call the ctor function with the class constructor");return i},__base=function(t){var e;if(t((function(t){if(e)throw new InheritanceException("must call the ctor function only once");var i=function(){this.constructor=t};return i.prototype={},t.prototype=new i,e=t,t})),!e)throw new InheritanceException("must call the ctor function with the class constructor");return e},Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo,Michelangelo;!function(Michelangelo){var UnknownToolColor="#94b14b",__extends=this.__extends||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},Rejection=__inherit(Error,(function(t,e){e((function(e,i,n){t.call(this,i),this.name=e,this.detail=n}))}));Michelangelo.Rejection=Rejection;var Logger=__base((function(t){var e,i=t((function(){}));e="undefined"!=typeof console&&"function"==typeof console.log?console:{log:function(){},warn:function(){},error:function(){}},i.log=function(){e.log.apply(e,arguments)},i.warn=function(){e.warn.apply(e,arguments)},i.error=function(){e.error.apply(e,arguments)},i.debug=function(){Michelangelo.isDebugEnabled()&&e.log.apply(e,arguments)}}));Michelangelo.Logger=Logger;var Marshal=__base((function(ctor){var klass=ctor((function(){}));klass.stringify=function(t){var e="(function() { return {",i=0;for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];i&&(e+=","),e+="function"==typeof r?"'"+n+"': "+r.toString():"'"+n+"': "+JSON.stringify(r),i+=1}return e+="}})()"},klass.objectify=function(str){return eval(str)}}));Michelangelo.Marshal=Marshal;var Helpers=__base((function(t){t((function(){})).render=function(){throw new Error("Michelangelo.Helpers.render() has been deprecated.  Please use the new jquery syntax instead.\nSee https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md")}}));Michelangelo.Helpers=Helpers;var EventManager=__base((function(t){var e=null,i=function(){return e||(e=new DirectEventManager)},n=t((function(){}));n.prototype._fire=function(t,n,r){this!==e&&i()._fire(t,n,r)},n.prototype.createNotifier=function(){mustOverride("createNotifier")},n.prototype.on=function(){mustOverride("on")},n.on=function(t,e){return i().on(t,e)}}));Michelangelo.EventManager=EventManager;var Notifier=__base((function(t){var e=t((function(t,e){this.__notify=t,this.__source=e}));e.prototype.notify=function(t,e,i){this.__notify(t,e,this.__source||i)};var i=new e((function(){}));e.Null=function(){return i}}));Michelangelo.Notifier=Notifier;var DirectEventManager=__inherit(EventManager,(function(t,e){var i=1,n=e((function(e){t.call(this),this.__callbacks={},this.__wrapper=e||function(t){t()}}));n.prototype.on=function(t,e){var n=this;n.__callbacks[t]||(n.__callbacks[t]={});var r=i++;return this.__callbacks[t][r]=e,function(){var e=n.__callbacks[t];e&&delete e[r]}},n.prototype.createNotifier=function(t){var e=this;return new Notifier((function(t,i,n){e._fire(t,i,n)}),t)},n.prototype._fire=function(e,i,n){var r=this;this.__callbacks[e]&&$.each(this.__callbacks[e],(function(t,e){r.__wrapper((function(){e(i,n)}))})),t.prototype._fire.call(this,e,i,n)}}));Michelangelo.DirectEventManager=DirectEventManager;var Environment=__base((function(t){var e=t((function(t){this.__key=t.key||"Custom",this.__name=t.name||"Custom",this.__url=t.url,this.__apiRootUrl=t.apiRootUrl,this.__uiRootUrl=t.uiRootUrl,this.__canUseCustomHeaders=t.canUseCustomHeaders,this.__canUsePost=t.canUsePost,this.__maxGetContentLength=t.maxGetContentLength||1500}));e.prototype.name=function(){return this.__name},e.prototype.url=function(){return this.__url},e.prototype.apiRootUrl=function(){return this.__apiRootUrl},e.prototype.uiRootUrl=function(){return this.__uiRootUrl},e.prototype.recentChartsUrl=function(){return this.__recentChartsUrl},e.prototype.canUseCustomHeaders=function(){return this.__canUseCustomHeaders&&!window.XDomainRequest},e.prototype.canUsePost=function(){return this.__canUsePost},e.prototype.key=function(){return this.__key},e.prototype.postPresentationUrl=function(){return this.__apiRootUrl+"/presentation"},e.prototype.presentationDefinitionUrl=function(t){return this.__apiRootUrl+"/definition/"+t},e.prototype.presentationUrl=function(t){return this.__apiRootUrl+"/presentation/"+t},e.prototype.presentationListUrl=function(t){return this.__apiRootUrl+"/user/presentations"+(t?"/list":"")},e.prototype.rawDataParseUrl=function(){return this.__apiRootUrl+"/rawdata/parse"},e.prototype.maxGetContentLength=function(){return this.__maxGetContentLength};var i=function(){var t="http://"+$(location).attr("host");return""===$(location).attr("port")&&(t+="/Michelangelo.Service.WebHost"),t},n=e,r=[new n({key:"MuxPublic",name:"Mux (public, production)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api.wsj.net/api/michelangelo",uiRootUrl:"http://api.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"MuxStaging",name:"Mux (public, staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"http://api-staging.wsj.net/api/michelangelo",uiRootUrl:"http://api-staging.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"MuxLocal",name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",apiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo",uiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"MuxPublicSecure",name:"Mux (public, production, secure)",url:"https://api-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"MuxStagingSecure",name:"Mux (public, staging, secure)",url:"https://api-staging-secure.wsj.net/api/michelangelo/timeseries/history",apiRootUrl:"https://api-staging-secure.wsj.net/api/michelangelo",uiRootUrl:"https://api-staging-secure.wsj.net/ui/michelangelo",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"DirectDev",name:"Direct (internal, dev)",url:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/timeseries/history",apiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/api/",uiRootUrl:"http://michelangelo-dev.marketwatch.com/Michelangelo.Service.WebHost/ui/",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"Local",name:"Michelangelo (local)",url:i()+"/api/timeseries/history",apiRootUrl:i()+"/api",uiRootUrl:i()+"/ui",canUseCustomHeaders:!0,canUsePost:!0}),new n({key:"DowJonesDataServicesPublic",name:"DJDS (public)",url:"http://services.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new n({key:"DowJonesDataServicesPublicStaging",name:"DJDS (public, staging)",url:"http://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",apiRootUrl:"",uiRootUrl:""}),new n({key:"DowJonesDataServicesLocal",name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",apiRootUrl:"",uiRootUrl:""})],o={};$.each(r,(function(t,e){o[e.key()]=e})),e.getWellKnownEnvironments=function(){return $.extend([],r)},e.getWellKnownEnvironment=function(t){return o[t]};var a=function(){return e.getWellKnownEnvironment("MuxPublic")},s=a();e.ambient=function(t){if(0===arguments.length)return s;if(!t)return s=a(),e;if("string"===$.type(t)){var i=e.getWellKnownEnvironment(arguments[0]);if(i)return s=i,Logger.debug("Michelangelo ambient environment set to '"+t+"': "+i.name()),e}return t instanceof e?(s=t,Logger.debug("Michelangelo ambient environment set directly: "+t.name()),e):(Logger.error("Michelangelo ambient environment was not changed to '"+t+"'. Valid values are: "+$.map(r,(function(t){return"\r\n  "+t.key()+": "+t.name()})).join()+"\r\nor a custom environment definition."),e)},e.select=function(t){if(0===arguments.length||!t)return e.ambient();if(t instanceof e)return t;var i=e.getWellKnownEnvironment(t);return i||(Logger.warn("Could not select an environment for input '"+t+"'; returning ambient environment."),e.ambient())}}));Michelangelo.Environment=Environment;var Entitlement=__base((function(t){var e=null,i=t((function(t){if("string"!==$.type(t))throw"token must be a string";this.__token=t}));i.prototype.token=function(){return this.__token},i.prototype.ckey=function(){return this.token()?this.token().substr(0,10):""},i.ambient=function(t){return 0===arguments.length?e:t?"string"===$.type(t)?(e=new Entitlement(t),Logger.debug("Michelangelo ambient entitlement set to '"+e.token()+"'"),i):t instanceof i?(e=t,Logger.debug("Michelangelo ambient entitlement set to '"+e.token()+"'"),i):(Logger.error("Michelangelo ambient entitlement was not changed to '"+t+"'. Value must be a token string or an Entitlement instance"),i):(e=i.__defaultEntitlement(),i)},i.select=function(t){return t instanceof i?t:"string"===$.type(t)?new Entitlement(t):i.ambient()},i.__defaultEntitlement=function(){return new i("")},e=i.__defaultEntitlement()}));Michelangelo.Entitlement=Entitlement;var Ajax=__base((function(t){t((function(){})).send=function(t,e,i,n,r){try{r=Math.max(0,+r||0);var o=0;e=$.extend(!0,{data:{},params:{},headers:{}},e),i=Environment.select(i),"function"==typeof t?t=t(i):"function"==typeof i[t]&&(t=i[t].call(i));var a=Entitlement.select(n).token();e.params.ckey=a.substr(0,10),i.canUseCustomHeaders()?e.headers["Dylan2010.EntitlementToken"]=a:e.params.entitlementToken=a,"GET"===e.type&&(e.params=$.extend(e.data,e.params),delete e.data);var s=$.map(e.params,(function(t,e){return e+"="+encodeURIComponent(t)})).join("&");s&&(t=t+(-1===t.indexOf("?")?"?":"&")+s);var l=function(i,n,a){try{if(o++<=r)return $.ajax(t,e).fail((function(t,e,i){l(t,e,i)}));var s="";if(i.responseText)try{var h=JSON.parse(i.responseText);h.Message&&(s=h.Message,h.ExceptionMessage&&(s+="  (with exception: "+h.ExceptionMessage+")"))}catch(t){}return s||"string"!==$.type(a)||(s=a,a=null),r&&(s+=" (after "+(r+1)+" attempts)"),$.Deferred().reject(new Rejection("AJAX error",s,a))}catch(t){return $.Deferred().reject(new Rejection("AJAX exception",t.message,t))}};return l(null,"","")}catch(t){return $.Deferred().reject(new Rejection("AJAX exception",t.message,t))}}})),Position={above:0,below:1,onTop:2,overlay:3,compare:4};Michelangelo.Position=Position;var MetaData=(klass=function(){},klass.getLocalRoot=function(){var t="http://"+$(location).attr("host");return""===$(location).attr("port")&&(t+="/Michelangelo.Service.WebHost"),t},klass.AxisTypes=[{name:"Linear",value:"linear"},{name:"Log",value:"logarithmic"}],klass.SeriesChartTypes=[{name:"Line",value:"line"},{name:"Candlesticks",value:"candlestick"},{name:"OHLC",value:"ohlc"},{name:"Area",value:"area"},{name:"Column",value:"column"},{name:"Smoothed",value:"spline"},{name:"Scatter",value:"scatter"},{name:"AreaRange",value:"arearange",special:!0}],klass.DataFormats=[{name:"Auto",value:"Auto"},{name:"CSV",value:"CSV"},{name:"TSV",value:"TSV"}],klass.TimeFrames=[{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"8 hours",value:"PT8H"},{name:"1 day",value:"D1"},{name:"2 days",value:"D2"},{name:"5 days",value:"D5"},{name:"10 days",value:"D10"},{name:"1 month",value:"P1M"},{name:"3 months",value:"P3M"},{name:"6 months",value:"P6M"},{name:"1 Year",value:"P1Y"},{name:"2 Years",value:"P2Y"},{name:"3 Years",value:"P3Y"},{name:"5 Years",value:"P5Y"},{name:"10 Years",value:"P10Y"},{name:"Yesterday",value:"D1-1"},{name:"All",value:"all"},{name:"YTD",value:"YTD"},{name:"Custom",value:"custom"}],klass.Steps=[{name:"1 minute",value:"PT1M"},{name:"5 minutes",value:"PT5M"},{name:"10 minutes",value:"PT10M"},{name:"15 minutes",value:"PT15M"},{name:"1 hour",value:"PT1H"},{name:"2 hours",value:"PT2H"},{name:"1 day",value:"P1D"},{name:"2 days",value:"P2D"},{name:"3 days",value:"P3D"},{name:"4 days",value:"P4D"},{name:"5 days",value:"P5D"},{name:"Weekly",value:"P7D"},{name:"Monthly",value:"P1M"},{name:"Quarterly",value:"P3M"},{name:"Yearly",value:"P1Y"}],klass.TickerDataPointsList=[{name:"Last",value:"Last"},{name:"Open",value:"Open"},{name:"High",value:"High"},{name:"Low",value:"Low"},{name:"Hybrid",value:"Hybrid"},{name:"Volume",value:"Volume"},{name:"% Change",value:"PercentChange"}],klass.AnimationEasings=["linear","swing","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","easeOutSine","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce"],klass.IndicatorPositionList=[{name:"Above",value:Michelangelo.Position.above},{name:"Below",value:Michelangelo.Position.below},{name:"OnTop",value:Michelangelo.Position.onTop},{name:"Overlay",value:Michelangelo.Position.overlay},{name:"Compare",value:Michelangelo.Position.compare}],klass.IndicatorHeightsList=[{name:"Teeny",value:50},{name:"Small",value:100},{name:"Medium",value:200},{name:"Large",value:300},{name:"X-Large",value:400},{name:"Huge",value:500}],klass.AdlIndicator={name:"Accumulation Distribution Line (ADL)",serverKind:"AccumulationDistributionLine",abbreviation:"ADL"},klass.AroonIndicator={name:"Aroon Indicator",serverKind:"AroonIndicator",abbreviation:"Aroon",parameters:[{name:"Period",defaultValue:"25",includeInLabel:!0}]},klass.AverageTrueRange={name:"Average True Range (ATR)",serverKind:"AverageTrueRange",abbreviation:"ATR",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.BollingerBandsIndicator={name:"Bollinger Bands",serverKind:"BollingerBands",isOverlay:!0,abbreviation:"BB",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0}]},klass.CommodityChannelIndex={name:"Commodity Channel Index (CCI)",serverKind:"CommodityChannelIndex",abbreviation:"CCI",parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},klass.CompetitorComparison={name:"Competitor Comparison (Beta)",serverKind:"CompetitorComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},klass.DividendsIndicator={name:"Dividends",serverKind:"DividendEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.DmiAndAdx={name:"DMI/ADX",serverKind:"AverageDirectionalIndex",abbreviation:"DMI/ADX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.EarningsIndicator={name:"Earnings",serverKind:"EarningsEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0},{name:"YearOverYear",defaultValue:!1,inputType:"checkbox",clientOnly:!1}]},klass.ExponentialMovingAverage={name:"Exponential Moving Average",serverKind:"ExponentialMovingAverage",isOverlay:!0,abbreviation:"EMA",parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},klass.FundComparison={name:"Fund Comparison (Beta)",serverKind:"FundComparison",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0},{name:"NumFunds",defaultValue:"5"},{name:"FundType",inputType:"pickList",defaultValue:"ETF",choices:["ETF","MutualFund","Both"]}]},klass.HorizontalLineIndicator={name:"Horizontal Line",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"Value",defaultValue:"10"}]},klass.InsiderTransactions={name:"Insider Transactions (beta)",serverKind:"InsiderTransactions",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.KeltnerChannels={name:"Keltner Channels",serverKind:"KeltnerChannels",isOverlay:!0,abbreviation:"KELT",parameters:[{name:"EMA Period",serverName:"EmaPeriod",defaultValue:"20",includeInLabel:!0},{name:"Multiplier",defaultValue:"2.0",includeInLabel:!0},{name:"ATR Period",serverName:"AtrPeriod",defaultValue:"10",includeInLabel:!0}]},klass.MacdIndicator={name:"MACD",serverKind:"MovingAverageConvergenceDivergence",parameters:[{name:"EMA Period #1",serverName:"EMA1",defaultValue:"12",includeInLabel:!0},{name:"EMA Period #2",serverName:"EMA2",defaultValue:"26",includeInLabel:!0},{name:"Signal Line",serverName:"SignalLine",defaultValue:"9",includeInLabel:!0}]},klass.Momentum={name:"Momentum",serverKind:"Momentum",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},klass.MoneyFlowIndex={name:"Money Flow Index",serverKind:"MoneyFlowIndex",abbreviation:"MFI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.MovingAverageEnvelopes={name:"Moving Average Envelopes",serverKind:"MovingAverageEnvelopes",isOverlay:!0,abbreviation:"ENV",parameters:[{name:"Period",defaultValue:"9",includeInLabel:!0},{name:"Percent",defaultValue:"0.02",includeInLabel:!0}]},klass.NewsDensity={name:"News Density",serverKind:"NewsDensity",excludeFromLabel:!0,parameters:[{name:"DocTypes",inputType:"docTypesList",isList:"true"},{name:"Significance Flag",inputType:"pickList",defaultValue:"None",choices:["Significant","Prominent","PassingMention","None"]}]},klass.DocTypes=[{name:" ",value:" "},{name:"MarketWatch Common",value:"90, 91, 92, 99, 103, 53, 3"},{name:"WSJDN",value:"424, 425, 463, 115, 25, 421, 449, 473"}],klass.NewsWiresCorporate={name:"NewsWires - ENF - Corporate",serverKind:"NewsWiresCorporate",excludeFromLabel:!0,parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"scatter",clientOnly:!0},{name:"EnfNames",isList:!0,inputType:"biglist",defaultValue:"REV_CUR,PROFIT_CUR,SALES_CUR"}]},klass.OnBalanceVolume={name:"On Balance Volume",serverKind:"OnBalanceVolume"},klass.OpenHighLowLines={name:"Open/High/Low Lines",serverKind:"OpenHighLowLines",isOverlay:!0,excludeFromLabel:!0,parameters:[{name:"ShowOpen",inputType:"checkbox",defaultValue:!0},{name:"ShowHigh",inputType:"checkbox",defaultValue:!0},{name:"ShowLow",inputType:"checkbox",defaultValue:!0},{name:"ShowPriorClose",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekHigh",inputType:"checkbox",defaultValue:!1},{name:"Show52WeekLow",inputType:"checkbox",defaultValue:!1}]},klass.ParabolicSAR={name:"Parabolic SAR",serverKind:"ParabolicSAR",isOverlay:!0,abbreviation:"SAR",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0},{name:"AF Begin",serverName:"initial",defaultValue:"0.02",includeInLabel:!0},{name:"AF Increment",serverName:"step",defaultValue:"0.02",includeInLabel:!0},{name:"AF Maximum",serverName:"maximumStep",defaultValue:"0.2",includeInLabel:!0}]},klass.PriceChannels={name:"Price Channels",serverKind:"PriceChannels",abbreviation:"CHAN",isOverlay:!0,parameters:[{name:"Period",defaultValue:"20",includeInLabel:!0}]},klass.PriceToEarningsRanges={name:"P/E Ranges",serverKind:"PriceToEarningsRanges",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"ohlc",clientOnly:!0}]},klass.PriceToEarningsRatio={name:"P/E Ratio",serverKind:"PriceToEarningsRatio"},klass.ProjectedInstrumentSeries={name:"Projected Instrument Series",serverKind:"ProjectedInstrumentSeries",isOverlay:!0,abbreviation:"Projected",parameters:[{name:"TimeFrame",defaultValue:"14",includeInLabel:!0},{name:"Confidence",defaultValue:"90",includeInLabel:!0},{name:"Simulations",defaultValue:"100",includeInLabel:!0},{name:"ChartType",inputType:"chartType",defaultValue:"arearange",allowed:["line","arearange"],clientOnly:!0}]},klass.RateOfChange={name:"Rate Of Change (ROC)",serverKind:"RateOfChange",abbreviation:"ROC",parameters:[{name:"Period",defaultValue:"12",includeInLabel:!0}]},klass.RelativeStrengthIndex={name:"Relative Strength Index",serverKind:"RelativeStrengthIndex",abbreviation:"RSI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.RollingDividend={name:"Rolling Dividend",serverKind:"RollingDividend",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"line",clientOnly:!0}]},klass.SimpleMovingAverage={name:"Simple Moving Average",abbreviation:"SMA",serverKind:"SimpleMovingAverage",isOverlay:!0,parameters:[{name:"Period",isList:!0,defaultValue:"9, 18",includeInLabel:!0}]},klass.SplitsIndicator={name:"Splits",serverKind:"SplitEvents",isEvent:!0,parameters:[{name:"Hide Axis",defaultValue:!0,inputType:"checkbox",clientOnly:!0}]},klass.StochasticOscillatorFast={name:"Stochastic Oscillator (Fast)",serverKind:"StochasticOscillatorFast",abbreviation:"Fast STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},klass.StochasticOscillatorSlow={name:"Stochastic Oscillator (Slow)",serverKind:"StochasticOscillatorSlow",abbreviation:"Slow STO",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0},{name:"K Smoothing Period",serverName:"KSMAPeriod",defaultValue:"3",includeInLabel:!0},{name:"D SMA Period",serverName:"DSMAPeriod",defaultValue:"3",includeInLabel:!0}]},klass.TotalReturn={name:"Total Return",serverKind:"TotalReturn",isOverlay:!0},klass.TrueStrengthIndex={name:"True Strength Index (TSI)",serverKind:"TrueStrengthIndex",abbreviation:"TSI",parameters:[{name:"Period1",defaultValue:"25",includeInLabel:!0},{name:"Period2",defaultValue:"13",includeInLabel:!0}]},klass.UlcerIndex={name:"Ulcer Index",serverKind:"UlcerIndex",abbreviation:"UI",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.UltimateOscillator={name:"Ultimate Oscillator",serverKind:"UltimateOscillator",abbreviation:"ULT",parameters:[{name:"PeriodShort",defaultValue:"7",includeInLabel:!0},{name:"PeriodMiddle",defaultValue:"14",includeInLabel:!0},{name:"PeriodLong",defaultValue:"28",includeInLabel:!0}]},klass.VolatilityFast={name:"Volatility (Fast)",serverKind:"VolatilityFast"},klass.VolatilitySlow={name:"Volatility (Slow)",serverKind:"VolatilitySlow",parameters:[{name:"Period",defaultValue:"21",includeInLabel:!0}]},klass.VolumeAccumulation={name:"Volume Accumulation",serverKind:"VolumeAccumulation"},klass.IndicatorList=[klass.VolumeIndicator={name:"Volume",serverKind:"Volume",parameters:[{name:"ChartType",inputType:"chartType",defaultValue:"column",clientOnly:!0}]},klass.AdlIndicator,klass.AroonIndicator,klass.AverageTrueRange,klass.BollingerBandsIndicator,klass.CommodityChannelIndex,klass.CompetitorComparison,klass.DividendsIndicator,klass.DmiAndAdx,klass.EarningsIndicator,klass.ExponentialMovingAverage,klass.FundComparison,klass.KeltnerChannels,klass.HorizontalLineIndicator,klass.InsiderTransactions,klass.MacdIndicator,klass.Momentum,klass.MoneyFlowIndex,klass.MovingAverageEnvelopes,klass.NewsDensity,klass.NewsWiresCorporate,klass.OnBalanceVolume,klass.OpenHighLowLines,klass.ParabolicSAR,klass.PriceChannels,klass.PriceToEarningsRanges,klass.PriceToEarningsRatio,klass.ProjectedInstrumentSeries,klass.RateOfChange,klass.RelativeStrengthIndex,klass.RollingDividend,klass.SimpleMovingAverage,klass.SplitsIndicator,klass.StochasticOscillatorFast,klass.StochasticOscillatorSlow,klass.TotalReturn,klass.TrueStrengthIndex,klass.UlcerIndex,klass.UltimateOscillator,klass.VolatilityFast,klass.VolatilitySlow,klass.VolumeAccumulation,klass.VolumePlus={name:"Volume+",serverKind:"VolumePlus",parameters:[{name:"Period",defaultValue:"50",includeInLabel:!0}]},klass.VortexIndicator={name:"Vortex Indicator",serverKind:"VortexIndicator",abbreviation:"VTX",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.WilliamsPercentR={name:"Williams %R",serverKind:"WilliamsPercentR",abbreviation:"Wm%R",parameters:[{name:"Period",defaultValue:"14",includeInLabel:!0}]},klass.Yield={name:"Yield",serverKind:"Yield",excludeFromLabel:!0}],klass.EndPoints={Local:{name:"Michelangelo (local)",url:klass.getLocalRoot()+"/api/timeseries/history",stashUrl:klass.getLocalRoot()+"/api/stash/timeseries",recentChartsUrl:klass.getLocalRoot()+"/api/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxLocal:{name:"Mux (local)",url:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/timeseries/history",stashUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries",recentChartsUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxPublic:{name:"Mux (public)",url:"http://api.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},MuxStaging:{name:"Mux (staging)",url:"http://api-staging.wsj.net/api/michelangelo/timeseries/history",stashUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries",recentChartsUrl:"http://api-staging.wsj.net/api/michelangelo/stash/timeseries/recent",canUseCustomHeaders:!0,canUsePost:!0},DowJonesDataServicesLocal:{name:"DJDS (local)",url:"http://"+$(location).attr("host")+"/DowJones.DataServices.WebHost/public/michelangelorest.svc/v1/timeseries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublic:{name:"DJDS (public)",url:"http://services.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""},DowJonesDataServicesPublicStaging:{name:"DJDS (public, staging)",url:"http://services-staging.dowjones.com/michelangelorest.svc/v1/timeSeries",stashUrl:"",recentChartsUrl:""}},klass.EndPointList=[klass.EndPoints.DowJonesDataServicesPublic,klass.EndPoints.DowJonesDataServicesPublicStaging,klass.EndPoints.DowJonesDataServicesLocal,klass.EndPoints.MuxLocal,klass.EndPoints.MuxStaging,klass.EndPoints.MuxPublic,klass.EndPoints.Local],klass),klass;Michelangelo.MetaData=MetaData;var Annotation=__base((function(t){var e=t((function(t){if(t){_.assign(this,_.cloneDeep(t));var e=this.data;e&&(delete this.data,_.defaults(this,e))}else this.id="a";this.type=this.constructor.type()}));e.type=function(){throw'must override "type" method on Annotation-derived types'},e.prototype.idify=function(t){return this.makeId!==t&&(this.makeId=t,this.id="a"+t()),this};var i={};e.create=function(t){var e=i[t.type||""];return e?new e(t):null},e._register=function(t){i[t.type()]=t}}));Michelangelo.Annotation=Annotation;var IndicatorParameter=function(t){this.value=void 0,this.metaData=t};Michelangelo.IndicatorParameter=IndicatorParameter;var Indicator=__base((function(t){var e=t((function(t){var i=this;if(this.annotations=[],t.seriesId){$.extend(this,t);var n=$.map(this.annotations,(function(t){return Annotation.create(t)}));t instanceof e?this.annotations=n:(this.annotations=[],$.each(n,(function(t,e){i.addAnnotation(e)})))}else this.seriesId="i",this.height=MetaData.IndicatorHeightsList[1].value,this.showAxisTitle=!0,this.axisType="linear",t.isOverlay?this.position=Position.overlay:t.isEvent?this.position=Position.onTop:this.position=Position.below,this.metaData=t,this.buildParametersFromMetaData()}));e.prototype.idify=function(t){return this.makeId!==t&&(this.makeId=t,this.seriesId="i"+t(),$.each(this.annotations,(function(e,i){i.idify(t)}))),this},e.prototype.addAnnotation=function(t){this.annotations.push(t.idify(this.makeId))},e.prototype.getAxisTitle=function(t){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:t&&t.CommonName&&t.CommonName.length>0?t.CommonName:this.metaData.name},e.prototype.buildParametersFromMetaData=function(){if(this.parameters=[],this.metaData.parameters){var t=this;$.each(this.metaData.parameters,(function(e,i){var n=new Michelangelo.IndicatorParameter(i);i.defaultValue&&(n.value=i.defaultValue),t.parameters.push(n)}))}}}));Michelangelo.Indicator=Indicator;var SeriesParameter=function(t,e,i){this.name=t,this.inputType=e,this.value=i};Michelangelo.SeriesParameter=SeriesParameter;var Series=__base((function(t){var e=t((function(t){var i=this;if(this.seriesKind="unknown",this.chartType="line",this.showAxisTitle=!0,this.axisType="linear",this.position=Michelangelo.Position.onTop,this.height=Michelangelo.MetaData.IndicatorHeightsList[3].value,this.canHaveIndicators=!1,this.canEditData=!1,this.desiredDataPoint="Last",this.djid=null,this.tooltipDataPoints=[],this.customToolTipData={},this.parameters=[],this.indicators=[],this.annotations=[],t){$.extend(!0,this,t);var n=$.map(this.indicators,(function(t){return new Indicator(t)})),r=$.map(this.annotations,(function(t){return Annotation.create(t)}));t instanceof e?(this.indicators=n,this.annotations=r):(this.indicators=[],$.each(n,(function(t,e){i.addIndicator(e)})),this.annotations=[],$.each(r,(function(t,e){i.addAnnotation(e)})))}else this.seriesId="s"}));e.prototype.idify=function(t){return this.makeId!==t&&(this.makeId=t,this.seriesId="s"+t(),$.each(this.indicators,(function(e,i){i.idify(t)})),$.each(this.annotations,(function(e,i){i.idify(t)}))),this},e.prototype.addIndicator=function(t){this.indicators.push(t.idify(this.makeId))},e.prototype.addAnnotation=function(t){this.annotations.push(t.idify(this.makeId))},e.prototype.addParameter=function(t,e,i){this.parameters.push(new SeriesParameter(t,e,i))},e.prototype.addToRequest=function(){return null},e.prototype.getGuiTitle=function(){return"Generic Series"},e.prototype.getAxisTitle=function(t){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getName(t)},e.prototype.getName=function(){return"Generic Series"},e.prototype.getFieldNames=function(){return[]},e.prototype.recommendedChartType=function(){return""},e.prototype.canPickDataPoint=function(){return!1},e.prototype.canAddExtraTooltips=function(){return!1},e.prototype.canAnnotate=function(){return!0}}));Michelangelo.Series=Series;var TickerSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="TickerSeries",this.chartType="candlestick",this.canHaveIndicators=!0,this.addParameter("Ticker","ticker"),this.addParameter("HideSeries","checkbox"))}return __extends(e,t),e.prototype.setTicker=function(t){this.parameters[0].value=t},e.prototype.getTicker=function(){return this.parameters[0].value},e.prototype.getGuiTitle=function(){var t=this.getTicker(),e="Ticker Series";return t&&(e+=": "+t),e},e.prototype.getAxisTitle=function(t){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:t&&t.CommonName&&t.CommonName.length>0?t.CommonName:t?t.CountryCode&&t.CountryCode.length>0?t.CountryCode+":"+t.Ticker:t.Ticker:"Ticker Series"},e.prototype.getName=function(t){return t?t.CountryCode&&t.CountryCode.length>0?t.CountryCode+":"+t.Ticker:t.Ticker:"Ticker Series"},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return e.parseAndSetTicker(this.getTicker(),this.djid)?(e.Kind="Ticker",e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),e.HideSeries=!1,this.parameters.length>1&&(e.HideSeries=this.parameters[1].value),this.tooltipDataPoints&&this.tooltipDataPoints.length>0&&(e.ToolTipDataTypes=this.tooltipDataPoints),t.Series.push(e),e):null},e.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},e.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},e.prototype.canAddExtraTooltips=function(){return!0},e}(Series);Michelangelo.TickerSeries=TickerSeries;var SpreadsheetSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="SpreadsheetSeries",this.addParameter("Name","spreadsheet","Simple series"),this.addParameter("Google","checkbox",!0))}return __extends(e,t),e.prototype.setKey=function(t){this.parameters[0].value=t},e.prototype.getKey=function(){return this.parameters[0].value},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getKey()&&this.getKey().length>0?(e.Kind="Spreadsheet",e.SeriesId=this.seriesId,e.Key=this.getKey(),e.Dialect=this.parameters[1].value?"Google":"URL",t.Series.push(e),e):null},e.prototype.getGuiTitle=function(){var t=this.getKey(),e="Spreadsheet";return t&&(t.length>30&&(t="..."+t.substring(t.length-27)),e+=": "+t),e},e.prototype.getName=function(t){return t&&t.CommonName&&t.CommonName.length>0?t.CommonName:"Spreadsheet"},e.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},e}(Series);Michelangelo.SpreadsheetSeries=SpreadsheetSeries;var NewsWiresCorporateSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="NewsWiresCorporateSeries",this.chartType="column",this.addParameter("Ticker","ticker"),this.addParameter("ENF Name","enfName","REV_CUR"))}return __extends(e,t),e.prototype.setTicker=function(t){this.parameters[0].value=t},e.prototype.getTicker=function(){return this.parameters[0].value},e.prototype.getEnfName=function(){return this.parameters[1].value},e.prototype.setEnfName=function(t){this.parameters[1].value=t},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return e.parseAndSetTicker(this.getTicker())?(e.Kind="NewsWiresCorporate",e.SeriesId=this.seriesId,e.DataTypes=[this.getEnfName()],t.Series.push(e),e):null},e.prototype.getGuiTitle=function(){var t=this.getTicker(),e=this.getEnfName(),i="NewsWires Corporate Series";return t&&(i+=": "+t),e&&(i+=", "+e),i},e.prototype.getName=function(t){return t?t.Ticker+", "+t.DesiredDataPoints[0]:"NewsWires Corporate Series"},e.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},e}(Series);Michelangelo.NewsWiresCorporateSeries=NewsWiresCorporateSeries;var SovereignDebtSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="SovereignDebtSeries",this.chartType="line",this.addParameter("Country Code","countryCode"))}return __extends(e,t),e.prototype.getCountryCode=function(){return this.parameters[0].value},e.prototype.setCountryCode=function(t){this.parameters[0].value=t},e.prototype.getGuiTitle=function(){var t=this.getCountryCode(),e="Sovereign Debt History Series";return t&&(e+=": "+t),e},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries,i=this.getCountryCode();return i&&i.length>0?(e.Kind="SovereignDebt",e.Key=i,e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),t.Series.push(e),e):null},e.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},e.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},e.prototype.getName=function(t){return t?t.CommonName&&t.CommonName.length>0?t.CommonName:t.Ticker:"Sov Debt Series"},e.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getCountryCode().toUpperCase()+" Sovereign Debt"},e}(Series);Michelangelo.SovereignDebtSeries=SovereignDebtSeries;var textPhraseSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="TextPhraseSeries",this.chartType="column",this.addParameter("Phrases","phrases"))}return __extends(e,t),e.prototype.getPhrases=function(){return this.parameters[0].value},e.prototype.setPhrases=function(t){this.parameters[0].value=t},e.prototype.getGuiTitle=function(){return"Text Phrase Series"},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getPhrases()&&this.getPhrases().length>0?(e.Kind="TextPhrases",e.SeriesId=this.seriesId,e.Key=this.getPhrases(),t.Series.push(e),e):null},e.prototype.getName=function(t){return t&&t.CommonName&&t.CommonName.length>0?t.CommonName:"Text Phrase(s)"},e.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},e.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Phrase Counts"},e}(Series);Michelangelo.TextPhraseSeries=textPhraseSeries;var newsDensitySeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="NewsDensitySeries",this.chartType="column",this.addParameter("Property Name","densityName","MKTW-industry"),this.addParameter("Property Value","densityValue"))}return __extends(e,t),e.prototype.getPropertyName=function(){return this.parameters[0].value},e.prototype.setPropertyName=function(t){this.parameters[0].value=t},e.prototype.getPropertyValue=function(){return this.parameters[1].value},e.prototype.setPropertyValue=function(t){this.parameters[1].value=t},e.prototype.getGuiTitle=function(){return"News Density Series"},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.getPropertyName()&&this.getPropertyName().length>0&&this.getPropertyValue()&&this.getPropertyValue().length>0?(e.Kind="NewsDensity",e.SeriesId=this.seriesId,e.Key=this.getPropertyName()+"~"+this.getPropertyValue(),t.Series.push(e),e):null},e.prototype.getName=function(){return this.getPropertyName()},e.prototype.getFieldNames=function(t){return[t.DesiredDataPoints[0]]},e.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Density"},e}(Series);Michelangelo.NewsDensitySeries=newsDensitySeries;var ipoByDateSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="IpoByDateSeries",this.chartType="line",this.addParameter("Date","date"))}return __extends(e,t),e.prototype.getDate=function(){return this.parameters[0].value},e.prototype.setDate=function(t){this.parameters[0].value=t},e.prototype.getGuiTitle=function(){var t=this.getDate(),e="IPO Performance";return t&&(e+=": "+t),e},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries,i=this.getDate();return i?(e.Kind="IpoByDate",e.Key=i,e.SeriesId=this.seriesId,e.DataTypes=this.getFieldNames(null),t.Series.push(e),e):null},e.prototype.getFieldNames=function(){return"ohlc"===this.chartType||"candlestick"===this.chartType?["Open","High","Low","Last"]:"arearange"===this.chartType?["Low","High"]:[this.desiredDataPoint]},e.prototype.canPickDataPoint=function(){return!("ohlc"===this.chartType||"candlestick"===this.chartType||"arearange"===this.chartType)},e.prototype.getName=function(t){return t?t.CommonName&&t.CommonName.length>0?t.CommonName:t.Ticker:"IPO Series"},e.prototype.getAxisTitle=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:this.getDate().toUpperCase()+" IPOs"},e}(Series);Michelangelo.IpoByDateSeries=ipoByDateSeries;var RawDataSeries=function(t){function e(e,i){t.call(this,e,i),e||(this.seriesKind="RawDataSeries",this.DataFormat="Auto",this.addParameter("","rawData"),this.canEditData=!0)}return __extends(e,t),e.prototype.getGuiTitle=function(){return"Raw Data Series"},e.prototype.setData=function(t){this.parameters[0].value=t},e.prototype.getName=function(){return this.axisTitle&&this.axisTitle.length>0?this.axisTitle:"Raw Data"},e.prototype.recommendedChartType=function(){return"line"},e.prototype.addToRequest=function(t){var e=new Michelangelo.ServerRequestSeries;return this.parameters[0].value?(e.Kind="Spreadsheet",e.SeriesId=this.seriesId,e.Key=this.getName(),e.Dialect="RawData",e.RawData=this.parameters[0].value,t.Series.push(e),e):null},e}(Series);Michelangelo.RawDataSeries=RawDataSeries;var ChartDefinition=__base((function(t){var e=t((function(t){var i=this;if(this.version=1,this.showNavigator=!1,this.showRangeSelector=!1,this.showExporting=!1,this.showLegend=!1,this.showTooltips=!0,this.title=null,this.subtitle=null,this.firstAxisOnLeft=!1,this.maxVisibleAxesPerPane=3,this.showTimestamp=!1,this.showIndicatorLabels=!1,this.filterNullSlots=!1,this.includeClosedSlots=!1,this.filterClosedPoints=!0,this.includeOfficialClose=!0,this.injectOpen=!1,this.showPreMarket=!1,this.showAfterHours=!1,this.useExtendedTimeFrame=!0,this.includeMockTick=!0,this.wantPriorClose=!1,this.includeCurrentQuotes=!1,this.resetTodaysAfterHoursPercentChange=!1,this.showYAxisTitle=!0,this.addTimeZoneToXAxisTitle=!0,this.xAxisTitle="Time",this.credit=null,this.showPreMarketBands=!1,this.showAfterHoursBands=!1,this.showClosedBands=!1,this.xAxisCompressed=!1,this.animationSpeed=300,this.animationEasing="linear",this.timeFrame="P6M",this.startDate=null,this.endDate=null,this.step="P1D",this.series=[],!this.makeId){var n=1;this.makeId=function(){return n++}}if(t){$.extend(!0,this,t);var r=$.map(this.series,(function(t){var e;switch(t.seriesKind){case"TickerSeries":e=new Michelangelo.TickerSeries(t);break;case"SpreadsheetSeries":e=new Michelangelo.SpreadsheetSeries(t);break;case"TextPhraseSeries":e=new Michelangelo.TextPhraseSeries(t);break;case"RawDataSeries":e=new Michelangelo.RawDataSeries(t);break;case"SovereignDebtSeries":e=new Michelangelo.SovereignDebtSeries(t);break;case"IpoByDateSeries":e=new Michelangelo.IpoByDateSeries(t);break;case"NewsDensitySeries":e=new Michelangelo.NewsDensitySeries(t);break;default:throw"Series kind '"+t.seriesKind+"' is not yet implemented!"}return e}));if(t instanceof e)this.series=r;else if(this.series=[],$.each(r,(function(t,e){i.addSeries(e)})),this.series.length>0&&this.extensionData&&this.extensionData.annotations&&this.extensionData.annotations.items){var o=this.series[0];$.each(this.extensionData.annotations.items,(function(t,e){o.addAnnotation(Annotation.create(e))})),delete this.extensionData}}this.style=this.style||Michelangelo.EmptyStyle.instance()}));e.prototype.addSeries=function(t){this.series.push(t.idify(this.makeId))}}));Michelangelo.ChartDefinition=ChartDefinition,Michelangelo.ViewModel=function(){Logger.warn("Michelangelo.ViewModel is deprecated. Use Michelangelo.ChartDefinition instead."),Michelangelo.ChartDefinition.call(this),this.load=function(){throw new Error("Michelangelo.ViewModel.load() is deprecated.  Use the presentation manager's load method instead.\nSee https://github.dowjones.net/MarketData/Michelangelo/blob/master/docs/Jquery-Syntax.md#presentationmanagerload")}};var Repo=__base((function(t){var e,i=t((function(){}));i.prototype.get=function(){mustOverride()},i.prototype.getDefinition=function(){mustOverride()},i.prototype.put=function(){mustOverride()},i.prototype.list=function(){mustOverride()},i.ambient=function(t){return arguments.length?(t?t instanceof i?(e=t,Logger.debug("Michelangelo ambient repo set directly.")):Logger.error("Michelangelo ambient repo was not changed. Value must be a Repo."):e=null,i):e||(e=new CloudRepo)},i.select=function(t){return t instanceof Repo?t:i.ambient()}}));Michelangelo.Repo=Repo;var CloudRepo=__inherit(Repo,(function(t,e){var i=e((function(t){this.__environment=t,this.__dataFetcher=Fetcher.select(null,t,null)}));i.prototype.get=function(t){var e=this;return Ajax.send((function(e){return e.presentationUrl(t)}),{type:"GET",dataType:"json",cache:!0},this.__environment).then((function(i){if(!i)return $.Deferred().reject("Chart '"+t+"' not found in "+Environment.select(this.__environment).key()+".");var n=new ChartDefinition(i.definition);if(i.data){var r=JSON.stringify(e.__dataFetcher.buildRequest(n)),o=i.data;delete o.version,e.__dataFetcher.setCacheItem(r,o)}return{metadata:i.metadata,definition:n}}))},i.prototype.getDefinition=function(t){return this.get(t).definition},i.prototype.put=function(t,e){if(!t)return $.Deferred().reject("A user ID is required to save the chart");if(!e||!e.definition)return $.Deferred().reject("A definition is required to save the chart");if(!e.metadata||!e.metadata.description)return $.Deferred().reject("A description is required to save the chart");if("custom"===e.definition.timeFrame&&0===e.definition.step.indexOf("PT")){var i=JSON.stringify(this.__dataFetcher.buildRequest(e.definition)),n=this.__dataFetcher.getCacheItem(i);if(n){var r=n.serverResponse;r.version="1",e.data=r}}return Ajax.send("postPresentationUrl",{type:"POST",params:{user:t},data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",cache:!1},this.__environment)},i.prototype.list=function(t){var e=t&&t.userId&&t.userId.trim(),i=t&&t.description&&t.description.trim()&&t.supportPaging;if(!e&&!i)return $.Deferred().reject("userId or description must be specified the the list options");var n={limit:t.limit||10,page:t.page||1};return e&&(n.user=t.userId),i&&(n.description=t.description),Ajax.send((function(e){return e.presentationListUrl(t.supportPaging)}),{type:"GET",params:n,cache:!1},this.__environment)}}));Michelangelo.CloudRepo=CloudRepo;var Fetcher=__base((function(t){var e=t((function(t,e){this.__environment=t,this.__entitlement=e,this.__cache={},this.__requestCount=0}));e.prototype.fetch=function(t,e,i){var n=this.buildRequest(t);if(null===n)return $.Deferred().resolve();i.notify("request.built",n,this);var r=JSON.stringify(n),o=this.getCacheItem(r);return o&&o.expiration&&o.expiration<(new Date).getTime()&&(o=null),o||(o=this.__cache[r]={expiration:null,deferred:$.Deferred()},this.sendRequest(n,e,o,i)),o.deferred.promise()},e.prototype.clearCache=function(){this.__cache={}},e.prototype.getCacheItem=function(t){return this.__cache[t]},e.prototype.setCacheItem=function(t,e){(this.__cache[t]={expiration:new Date(864e13).getTime(),deferred:$.Deferred(),serverResponse:e}).deferred.resolve(e)},e.prototype.buildRequest=function(t){var e=new Michelangelo.ServerRequest;return e.TimeFrame=t.timeFrame,e.Step=t.step,e.IncludeMockTick=t.includeMockTick,e.FilterNullSlots=t.filterNullSlots,e.IncludeClosedSlots=t.includeClosedSlots,e.FilterClosedPoints=t.filterClosedPoints,e.IncludeOfficialClose=t.includeOfficialClose,e.InjectOpen=t.injectOpen,e.ShowPreMarket=t.showPreMarket,e.ShowAfterHours=t.showAfterHours,e.UseExtendedTimeFrame=t.useExtendedTimeFrame,e.WantPriorClose=t.wantPriorClose,e.IncludeCurrentQuotes=t.includeCurrentQuotes,e.ResetTodaysAfterHoursPercentChange=t.resetTodaysAfterHoursPercentChange,e.EntitlementToken=Entitlement.select(this.__entitlement).token(),t.startDate&&("number"==typeof t.startDate?e.StartDate=t.startDate:e.StartDate=Date.parse(t.startDate),isNaN(e.StartDate))||t.endDate&&("number"==typeof t.endDate?e.EndDate=t.endDate:e.EndDate=Date.parse(t.endDate),isNaN(e.EndDate))?null:(this.addSeriesToRequest(e,t.series),0===e.Series.length?null:e)},e.prototype.addSeriesToRequest=function(t,e){var i=this;$.each(e,(function(e,n){var r=n.addToRequest(t);i.addIndicatorsToRequestSeries(t,r,n.indicators)}))},e.prototype.addIndicatorsToRequestSeries=function(t,e,i){$.each(i,(function(t,i){if(i.metaData.serverKind){var n=new Michelangelo.ServerRequestIndicator;n.Kind=i.metaData.serverKind,n.SeriesId=i.seriesId,n.Parameters=[],$.each(i.parameters,(function(t,e){if(!e.metaData.clientOnly){var i=e.metaData.name;if(e.metaData.serverName&&(i=e.metaData.serverName),e.metaData.isList){var r=e.value.split(",");$.each(r,(function(t,e){n.Parameters.push({Name:i,Value:e})}))}else n.Parameters.push({Name:i,Value:e.value})}})),e.Indicators?e.Indicators.push(n):e.Indicators=[n]}}))};var i;e.prototype.sendRequest=function(t,e,i,n){try{var r=this,o=Environment.select(this.__environment);0===this.__requestCount&&n.notify("dataFetch.started",null,this),this.__requestCount++;var a={cache:!0,params:{},headers:{},dataType:"json"},s=JSON.stringify(t);encodeURI(s).length>o.maxGetContentLength()&&o.canUsePost()?(a.type="POST",a.data=s,a.contentType="application/json; charset=utf-8",a.params.hash=function(t){var e,i,n=0;if(0===t.length)return n;for(e=0,i=t.length;e<i;e++)n=(n<<5)-n+t.charCodeAt(e),n|=0;return n}(a.data)):(a.type="GET",a.params.json=s),e&&e.showServerPerf&&(a.params.perf=!0);var l="",h=null;e&&o.canUseCustomHeaders()&&(e.sendAkamaiDebugHeaders&&(a.headers.Pragma="akamai-x-cache-on, akamai-x-cache-remote-on, akamai-x-check-cacheable, akamai-x-get-cache-key, akamai-x-get-extracted-values, akamai-x-get-nonces, akamai-x-get-ssl-client-session-id, akamai-x-get-true-cache-key, akamai-x-serial-no, akamai-x-get-request-id"),e.showInternalRequest&&(l+="Q"),e.showInternalGuts&&(l+="G"),e.showInternalResponse&&(l+="R"),e.showInternalStore&&(l+="S"),e.showServerResponse&&(l+="H"),e.showInternalSeries&&(l+="Z"),e.useDebugNow&&(h=e.debugNow)),l.length>0&&(a.headers["X-Mike-Debug"]=l),h&&(a.headers["X-Mike-Now"]=h),Ajax.send("url",a,o,null,1).then((function(t,e,o){var a=t.Debug;t.Debug=null,n.notify("response.received",t,r),r.fireAllHeaderEvents(o,n),r.fireAllDebugEvents(a,n),r.__requestCount--,i.expiration=(new Date).getTime()+6e5,i.serverResponse=t,i.deferred.resolve(t)}),(function(t){r.fireAllHeaderEvents(null,n),n.notify("error",t,r),r.__requestCount--,i.expiration=new Date(0),i.deferred.reject(new Rejection("Could not fetch data",t.message,t))})).always((function(){0===r.__requestCount&&n.notify("dataFetch.complete",null,r)}))}catch(t){return $.Deferred().reject(new Rejection("Data fetch exception",t.message,t))}},e.prototype.fireHeader=function(t,e,i,n,r){var o=null;if(e){var a="";if(n)for(var s=1;;){var l=i+"-"+s,h=e.getResponseHeader(l);if(!h)break;a+=h,s+=1}else a=e.getResponseHeader(i);if(a)try{o=JSON.parse(a)}catch(t){r.notify("error","Malformed (truncated?) JSON data in "+i+" header, length="+a.length+".",this),o=null}}r.notify(t,o,this)},e.prototype.fireAllDebugEvents=function(t,e){t&&(null!==t.InternalRequest&&e.notify("internalRequest.received",t.InternalRequest,this),null!==t.Series&&e.notify("internalSeries.received",t.Series,this),null!==t.Guts&&e.notify("internalGuts.received",t.Guts,this),null!==t.Store&&e.notify("internalStore.received",t.Store,this),null!==t.InternalResponse&&e.notify("internalResponse.received",t.InternalResponse,this),null!==t.InternalStitched&&e.notify("internalStitched.received",t.InternalStitched,this),null!==t.Stitched&&e.notify("stitched.received",t.Stitched,this))},e.prototype.fireAllHeaderEvents=function(t,e){this.fireHeader("perf.received",t,"X-DJ-Perf",!1,e)},e.ambient=function(t){return arguments.length?(t?t instanceof e?(i=t,Logger.debug("Michelangelo ambient fetcher set directly.")):Logger.error("Michelangelo ambient fetcher was not changed. Value must be a Fetcher."):i=null,e):i||(i=new Fetcher)},e.select=function(t,i,n){return t instanceof e?t:i||n?new Fetcher(i,n):e.ambient()}}));Michelangelo.Fetcher=Fetcher,Michelangelo.ambience=function(t,e,i,n){if(1===arguments.length&&$.isPlainObject(t)){var r=t;t=r.environment,e=r.entitlement,i=r.repo,n=r.dataFetcher}t&&Environment.ambient(t),e&&Entitlement.ambient(e),Michelangelo.Repo&&Michelangelo.Repo.ambient(i),Michelangelo.Fetcher&&Michelangelo.Fetcher.ambient(n)};var LineTerminators=__base((function(t){var e={},i=t((function(){}));i.registerTerminator=function(t,i){e[t]=i},i.getTerminatorFunc=function(t){return e[t]},i.getLineTerminators=function(){return Cloner.clone(e)},i.isLineTerminator=function(t){return!!e[t]}}));Michelangelo.LineTerminators=LineTerminators,function(){function t(t){return function(e,i){var n=i.physY-e.physY,r=i.physX-e.physX,o=Math.atan2(n,r);return{physX:i.physX-t*Math.cos(o),physY:i.physY-t*Math.sin(o)}}}LineTerminators.registerTerminator("arrow",(function(t,e,i,n){return(t=t.data([1])).enter().append("polygon").classed("arrow",!0).attr("points","0,0 -8,5, -8, -5"),t.attr("transform",n).attr("fill",i).attr("stroke",i).attr("stroke-width",e),{selection:t}}));LineTerminators.registerTerminator("closed-circle",(function(e,i,n,r){return(e=e.data([1])).enter().append("circle").classed("closed-circle",!0).attr("r",4),e.attr("transform",r).attr("fill",n),{selection:e,mutator:t(4)}}));LineTerminators.registerTerminator("open-circle",(function(e,i,n,r){return(e=e.data([1])).enter().append("circle").classed("open-circle",!0).attr("r",8),e.attr("stroke",n).attr("transform",r).attr("fill","transparent"),{selection:e,mutator:t(8)}}))}();var Symbol=__base((function(t){var e=function(){},i=1,n={},r=t((function(t,e){var r=t.trim();r in n&&(r+="-"+(i++).toString()),this.__key=r,this.__type=e,n[r]=this}));function o(t){var e=t;return"object"==typeof t&&(e=t.path),e}r.prototype.type=function(){return this.__type},r.equals=function(t,e){var i=_.isUndefined(e)||_.isNull(e);return _.isUndefined(t)||_.isNull(t)?i:!i&&t.__key===e.__key},r.hash=function(){return _(arguments).indexBy((function(t){return t[0].__key})).mapValues((function(t){return t[1]})).value()},r.mergeHashes=function(t,i,r){var o={};r=_.extend({a:e,b:e,both:e},r);for(var a=_.keys(t).sort(),s=_.keys(i).sort(),l=0,h=0;l<a.length&&h<s.length;){var c,u=l<a.length?a[l]:void 0,p=h<s.length?s[h]:void 0;u===p?(c=r.both(n[u],t[u],i[u]),l++,h++):_.isUndefined(p)||u<p?(c=r.a(n[u],t[u]),l++):(c=r.b(n[p],t[p]),h++),void 0!==c&&(o[u]=c)}return o},r.expandHash=function(t){return _.isArray(t)?t.slice(0):_.map(t,(function(t,e){return[n[e],t]}))},r.applyInPlace=function(t,e,i,n){_.each(t,(function(t){var r=t[0].__key;if(r in i){var a=i[r];if("object"==typeof a)(0,a.func)(e,n,t[1]);for(var s=o(a).split("."),l=s[0],h=e,c=1;c<s.length;c++)l in h||(h[l]={}),h=h[l],l=s[c];h[l]=t[1]}}))},r.hasEffect=function(t,e,i){return _.any(t,(function(t){var n=t[0].__key;if(n in i){for(var r=o(i[n]).split("."),a=r[0],s=e,l=1;l<r.length;l++){if(!(a in s))return!0;s=s[a],a=r[l]}return s[a]!==t[1]}}))},r.collect=function(t,e){return _.reduce(r.expandHash(e),(function(e,i){for(var n=o(i[1]).split("."),r=n[0],a=t,s=1;s<n.length;s++){if(!(r in a))return e;a=a[r],r=n[s]}return r in a&&(e[i[0].__key]=a[r]),e}),{})}}));Michelangelo.Symbol=Symbol;var SymbolType=__base((function(t){var e=function(t,e){return t===e},i={},n=t((function(t,i){this.__name=t,this.__valueEquals=i||e}));n.prototype.name=function(){return this.__name},n.prototype.combineValues=function(t,e){return this.__valueEquals(t,e)?t:i},n.multivalue=function(){return i}}));Michelangelo.SymbolType=SymbolType;var SymbolTypes={hexColor:new SymbolType("hex-color"),lineThickness:new SymbolType("line-thickness"),lineForm:new SymbolType("line-form"),startLineForm:new SymbolType("start-line-form"),endLineForm:new SymbolType("end-line-form"),text:new SymbolType("text"),fontSize:new SymbolType("font-size"),fontFamily:new SymbolType("font-family"),textAlignment:new SymbolType("text-alignment"),startDate:new SymbolType("start-date"),endDate:new SymbolType("end-date"),startValue:new SymbolType("start-value"),endValue:new SymbolType("end-value"),isConcave:new SymbolType("is-concave")};Michelangelo.SymbolTypes=SymbolTypes;var Symbols={generalColor:new Symbol("general-color",SymbolTypes.hexColor),thickness:new Symbol("thickness",SymbolTypes.lineThickness),lineForm:new Symbol("line-form",SymbolTypes.lineForm),startLineForm:new Symbol("start-line-form",SymbolTypes.startLineForm),endLineForm:new Symbol("end-line-form",SymbolTypes.endLineForm),text:new Symbol("text",SymbolTypes.text),fontSize:new Symbol("font-size",SymbolTypes.fontSize),fontFamily:new Symbol("font-family",SymbolTypes.fontFamily),textAlignment:new Symbol("text-alignment",SymbolTypes.textAlignment),startDate:new Symbol("start-date",SymbolTypes.startDate),endDate:new Symbol("end-date",SymbolTypes.endDate),startValue:new Symbol("start-value",SymbolTypes.startValue),endValue:new Symbol("end-value",SymbolTypes.endValue),isConcave:new Symbol("is-concave",SymbolTypes.isConcave)};Michelangelo.Symbols=Symbols;var Cloner=__base((function(t){var e=t((function(){}));e.clone=function(t){return $.extend(!0,{},t)},e.shallowClone=function(t){return $.extend({},t)}}));Michelangelo.Cloner=Cloner;var DrawingHandler=__base((function(t){var e=t((function(){this.__hostElements=[],this.__dirty=!1}));e.prototype.context=function(){throw"DrawingHandler subtypes must override context()"},e.prototype._createHostElement=function(t){var e=this.context().getHostElement(t).append("g").classed("annotation",!0).classed("event-target",!0).datum(this);return this.__hostElements.push(e),e},e.prototype._applyToHostElements=function(t){$.each(this.__hostElements,(function(e,i){t(i)}))},e.prototype.add=function(){this.__dirty=!0},e.prototype.update=function(){this.__dirty=!1},e.prototype.refresh=function(t){this.__isUserDrivenAction=t,this.__dirty&&this.update()},e.prototype.remove=function(){this._applyToHostElements((function(t){t.datum(null),t.remove()})),this.__hostElements=[]}}));Michelangelo.DrawingHandler=DrawingHandler;var AnnotationHandler=__inherit(DrawingHandler,(function(t,e){var i=e((function(e,i){t.call(this),this.__annotation=e,this.__context=i,this.__isCreating=!1,this.__overlays=null}));i.dragCreate=function(){throw"AnnotationHandler subtypes must provide dragCreate()"},i.prototype.annotation=function(){return this.__annotation},i.prototype.context=function(){return this.__context},i.prototype.createOnNoDrag=function(){return!1},i.prototype.moveTo=function(){this.__dirty=!0},i.prototype.startDrag=function(){},i.prototype.endDrag=function(t){t||this.publish(),this.__dirty=!0},i.prototype.dirty=function(){this.__dirty=!0},i.prototype.getDomainPosition=function(t){var e=t||{},i=this.annotation();return e.annotationId=i.id,e},i.prototype.update=function(){var e=this.context().isSelected(this);this._applyToHostElements((function(t){t.classed("selected",e)})),e?this.__overlays||this.__addOverlays():this.__removeOverlays(),this.__overlays&&this._applyToOverlays((function(t){t.update()})),this.__isUserDrivenAction&&this.context().reportPosition(this.getDomainPosition(),this),t.prototype.update.call(this)},i.prototype.publish=function(){var t=this.context();this.__isCreating?(this.__isCreating=!1,t.publishAdd(this)):t.publishUpdate(this)},i.prototype.getLocation=function(){return Point.Physical(0,0)},i.prototype._createHostElement=function(e){var i=t.prototype._createHostElement.call(this,e);return i.attr("mask","url(#"+this.context().maskId()+")"),i},i.prototype.remove=function(e){e&&this.context().publishRemove(this),this.__removeOverlays(),t.prototype.remove.call(this)},i.prototype._applyToOverlays=function(t){this.__overlays&&$.each(this.__overlays,(function(e,i){t(i)}))},i.prototype.__removeOverlays=function(){this._applyToOverlays((function(t){t.remove()})),this.__overlays=null},i.prototype.__addOverlays=function(){this.__overlays=this._createOverlays(),this._applyToOverlays((function(t){t.add()}))},i.prototype.startCreateMode=function(t){var e=this;this.__addOverlays();var i=_.find(this.__overlays||[],(function(t){return t.tag&&"start"===t.tag()}));i&&(this.__isCreating=!0,this.context().trackDrag([i],t,(function(){e.__isCreating=!1,e.createOnNoDrag()?e.context().publishAdd(e):(e.context().select([]),e.remove())})))},i.prototype.handleMouseDown=function(t){if(t.button)return!1;t.stopPropagation(),t.stopImmediatePropagation();var e=this,i=this.context();if(t.shiftKey)i.select([this],!0),i.swallowMouseUp();else{var n=null;i.isSelected(this)?i.hasSelection()&&(n=function(){return i.select([e])}):i.select([this]),i.trackDrag(null,Point.Physical(t.chartX,t.chartY),n)}return!1},i.prototype.handleClick=function(t){return t.stopPropagation(),t.stopImmediatePropagation(),!1},i.prototype._map=function(){return{}},i.prototype.applyAttributes=function(t){_.isPlainObject(t)&&(t=Symbol.expandHash(t)),t=_.select(t,(function(t){return t[1]!==SymbolType.multivalue()}));var e=this._map();Symbol.applyInPlace(t,this.__annotation,e,this.__context),this.__isCreating||this.context().publishUpdate(this),this.__dirty=!0},i.prototype.accumulateAttributes=function(t){var e=this._map(),i=Symbol.collect(this.__annotation,e);return t?Symbol.mergeHashes(t,i,{both:function(t,e,i){return t.type().combineValues(e,i)}}):i},i.applyLineForm=function(t,e){switch(e){case"dashed":t.attr("stroke-dasharray","6 6");break;case"dotted":t.attr("stroke-dasharray","3 5");break;default:t.attr("stroke-dasharray",null)}},i.neatenPoint=function(t,e){var i=(e||1)%2==0?0:.5;return Point.Physical(Math.round(t.physX+i)-i,Math.round(t.physY+i)-i)},i.neatenValue=function(t,e){var i=(e||1)%2==0?0:.5;return Math.round(t+i)-i}}));Michelangelo.AnnotationHandler=AnnotationHandler;var DragHandle=__inherit(DrawingHandler,(function(t,e){var i=e((function(e,i,n,r,o){t.call(this),this.__handler=e,this.__moveAction=i,this.__getLocationFn=n,this.__tag=r,this.__handleShape=o,this.__dragging=!1}));i.prototype.handler=function(){return this.__handler},i.prototype.tag=function(){return this.__tag},i.prototype.context=function(){return this.__handler.context()},i.prototype.add=function(){var e=this.context();this.__hostElement=this._createHostElement("overlay");var i=this.__hostElement.classed("drag-handle",!0).append("g").attr("transform","translate(0.5 0.5)").attr("filter","url(#"+e.dropShadowId()+")").append("g"),n=this.__handleShape||{shape:"circle",attrs:{r:7,cx:0,cy:0,fill:"#a9f3ff","fill-opacity":.25,stroke:"#46869b"}};i.append(n.shape).attr("fill-opacity",.25).attr(n.attrs),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.getLocation();this.__hostElement.classed("dragging",this.__dragging).select("g").attr("transform","translate("+e.physX+" "+e.physY+")"),t.prototype.update.call(this)},i.prototype.moveTo=function(t){this.__moveAction(t),this.__handler.dirty()},i.prototype.startDrag=function(){this.__dragging=!0,this.__dirty=!0},i.prototype.endDrag=function(t){t||this.__handler.publish(),this.__dragging=!1,this.__dirty=!0},i.prototype.handleMouseDown=function(t){var e=this,i=this.context();return t.shiftKey?i.select([this.__handler],!0):(this.update(),i.getSelectionList().length>1?i.trackDrag(null,Point.Physical(t.chartX,t.chartY),(function(){return i.select([e.__handler])})):i.trackDrag([this],Point.Physical(t.chartX,t.chartY))),t.stopImmediatePropagation(),!1},i.prototype.handleClick=function(t){return t.stopPropagation(),!1},i.prototype.getLocation=function(){return this.__getLocationFn()}}));Michelangelo.DragHandle=DragHandle;var Tools=__base((function(t){var e={},i=t((function(){})),n={};i.registerHandler=function(t){var i=t.annotationType().type();n[i]=t;var r=t.displayInfo();e[i]={symbol:i,displayName:r.name,precedence:r.precedence,createStartMode:function(e){return new InteractionMode(e,i,(function(e){return new InteractionState(e,t.annotationType(),r.instruction)}))}}},i.getTools=function(){return Cloner.clone(e)},i.createHandler=function(t,e){var i=n[t.type];return i?new i(t,e):null},i.dragCreateHandler=function(t,e,i){var r=n[t.type()];return r?r.dragCreate(e,i):null}}));Michelangelo.Tools=Tools;var AnnotationContext=__base((function(t){var e=__base((function(t){var e=t((function(t){this.__axis=t;var e=t.getExtremes(),i=t.toPixels(e.min),n=t.toPixels(e.max);i<=n?(this.__physMin=i,this.__physMax=n,this.__inverted=!1):(this.__physMin=n,this.__physMax=i,this.__inverted=!0)}));e.prototype.toDomain=function(t){return this.__axis.toValue(t)},e.prototype.toPhysical=function(t){return this.__axis.toPixels(t)},e.prototype.toVisible=function(t){return this.__inverted?this.__physMax-t*(this.__physMax-this.__physMin):t*(this.__physMax-this.__physMin)+this.__physMin},e.prototype.isInRange=function(t){return this.__physMax>=t&&this.__physMin<=t},e.prototype.constrain=function(t){return t>this.__physMax?this.__physMax:t<this.__physMin?this.__physMin:t}})),i=t((function(t,i,n,r,o){this.__manager=t,this.__xAxis=new e(i),this.__yAxis=new e(n),this.__maskId=r,this.__parentId=o}));i.prototype.getYValueForSeries=function(t){return this.__manager.getYValueForSeries(this.__parentId,t)},i.prototype.reportPosition=function(t,e){this.__manager.notify("annotation-update.position",t,e)},i.prototype.toDomainX=function(t){return this.__xAxis.toDomain(t)},i.prototype.toDomainY=function(t){return this.__yAxis.toDomain(t)},i.prototype.toPhysicalX=function(t){return this.__xAxis.toPhysical(t)},i.prototype.toPhysicalY=function(t){return this.__yAxis.toPhysical(t)},i.prototype.toVisibleX=function(t){return this.__xAxis.toVisible(t)},i.prototype.toVisibleY=function(t){return this.__yAxis.toVisible(t)},i.prototype.toDomainPoint=function(t){return Point.Domain(this.__xAxis.toDomain(t.physX),this.__yAxis.toDomain(t.physY))},i.prototype.toPhysicalPoint=function(t){return Point.Physical(this.__xAxis.toPhysical(t.domX),this.__yAxis.toPhysical(t.domY))},i.prototype.toVisiblePoint=function(t){return Point.Physical(this.__xAxis.toVisible(t.domX),this.__yAxis.toVisible(t.domY))},i.prototype.isIn=function(t){return this.__xAxis.isInRange(t.physX)&&this.__yAxis.isInRange(t.physY)},i.prototype.constrain=function(t){return Point.Physical(this.__xAxis.constrain(t.physX),this.__yAxis.constrain(t.physY))},i.prototype.__withEditor=function(t,e){return this.__manager.__editor?t(this.__manager.__editor):e},i.prototype.maskId=function(){return this.__maskId},i.prototype.dropShadowId=function(){return this.__manager.__dropShadowId},i.prototype.getHostElement=function(t){return this.__manager.getLayerElement(t)},i.prototype.idify=function(t){return t.idify(this.__manager.__def.makeId)},i.prototype.select=function(t,e){this.__withEditor((function(i){i.select(t,e)}))},i.prototype.isSelected=function(t){return this.__withEditor((function(e){return e.isSelected(t)}),!1)},i.prototype.hasSelection=function(){return this.getSelectionList().length>0},i.prototype.getSelection=function(){return this.__withEditor((function(t){return t.getSelection()}),{})},i.prototype.getSelectionList=function(){return this.__withEditor((function(t){return t.getSelectionList()}),[])},i.prototype.trackDrag=function(t,e,i){return this.__withEditor((function(n){return n.trackDrag(t,e,i)}),!1)},i.prototype.addHandler=function(t){var e=Tools.createHandler(t,this);e&&(this.__manager.addHandler(e),e.add())},i.prototype.dragCreate=function(t,e){var i=Tools.dragCreateHandler(t,this,e);i&&(this.idify(i.annotation()),this.__manager.addHandler(i),this.select([i]),i.add(),i.startCreateMode(e))},i.prototype.swallowMouseUp=function(){this.__withEditor((function(t){t.swallowMouseUp()}))},i.prototype.publishAdd=function(t){this.__manager.editExecutor().addAnnotation(this.__parentId,t.annotation())},i.prototype.publishUpdate=function(t){this.__manager.editExecutor().updateAnnotation(this.__parentId,t.annotation())},i.prototype.publishRemove=function(t){this.__manager.editExecutor().removeAnnotation(this.__parentId,t.annotation().id)}})),InteractionModeBase=__base((function(t){var e=t((function(t){this.__name=t||"none"}));e.prototype.name=function(){return this.__name},e.prototype.instructionText=function(){return null},e.prototype.handleMouseDown=function(){},e.prototype.handleMouseMove=function(){},e.prototype.handleMouseUp=function(){},e.prototype.handleClick=function(){},e.prototype.handleKeyDown=function(){},e.prototype.handleKeyPress=function(){},e.prototype.start=function(){},e.prototype.cancel=function(){}})),InteractionMode=__inherit(InteractionModeBase,(function(t,e){var i=e((function(e,i,n){t.call(this,i),this.__context=e,n?"function"===$.type(n)?this.__state=n(this):this.__state=n:this.__state=new InteractionState(this)}));i.prototype.context=function(){return this.__context},i.prototype.instructionText=function(){return this.__state.instructionText()},i.prototype.handleClick=function(t){return this.__transition(this.__state.handleClick(t))},i.prototype.handleMouseDown=function(t){return this.__transition(this.__state.handleMouseDown(t))},i.prototype.handleMouseMove=function(t){return this.__transition(this.__state.handleMouseMove(t))},i.prototype.handleMouseUp=function(t){return this.__transition(this.__state.handleMouseUp(t))},i.prototype.handleKeyPress=function(t){return this.__transition(this.__state.handleKeyPress(t))},i.prototype.handleKeyDown=function(t){return this.__transition(this.__state.handleKeyDown(t))},i.prototype.__transition=function(t){return!t||(this.__state=t,!1)}})),SelectInteractionMode=__inherit(InteractionModeBase,(function(t,e){var i=e((function(e){t.call(this,"select"),this.__editor=e}));i.prototype.instructionText=function(){return"Click to select an annotation; Shift+click to select multiple annotations."},i.prototype.__getHandlerForElement=function(t){for(;t&&!(t instanceof SVGSVGElement);){var e=d3.select(t).datum();if(e&&e instanceof DrawingHandler)return e;t=t.parentElement||t.parentNode}return null},i.prototype.handleMouseDown=function(t){var e=this.__getHandlerForElement(t.target);if(e){var i=e.handleMouseDown;if(i)return i.call(e,t)}return t.shiftKey||(this.__editor.select([]),this.__editor.swallowMouseUp()),t.stopPropagation(),t.stopImmediatePropagation(),!1},i.prototype.handleKeyDown=function(t){return 46!==t.keyCode&&8!==t.keyCode||(this.__editor.deleteSelected(),t.stopPropagation(),t.stopImmediatePropagation()),!1}})),InteractionState=__base((function(t){var e=t((function(t,e,i){this.__mode=t,this.__instructionText=i||"",this.__annotationType=e}));e.prototype.instructionText=function(){return this.__instructionText},e.prototype.mode=function(){return this.__mode},e.prototype.handleClick=function(){return this},e.prototype.handleMouseDown=function(t){var e=Point.Physical(t.chartX,t.chartY),i=this.__mode.context();return i&&i.dragCreate(this.__annotationType,e),t.stopPropagation(),t.preventDefault(),null},e.prototype.handleMouseMove=function(){return this},e.prototype.handleKeyDown=function(t){return 27===t.keyCode?this.handleEscape():this},e.prototype.handleKeyPress=function(){return this},e.prototype.handleEscape=function(){return null}}));Michelangelo.InteractionState=InteractionState;var ChartDefinitionEditExecutor=__base((function(t){var e=t((function(t){this.__def=t;var e={};$.each(t.series,(function(t,i){e[i.seriesId]=i,$.each(i.indicators,(function(t,i){e[i.seriesId]=i}))})),this.__map=e}));e.prototype.addAnnotation=function(t,e){var i=Annotation.create(e);return this.__map[t].addAnnotation(i),i.id},e.prototype.removeAnnotation=function(t,e){var i=this.__map[t];$.each(i.annotations,(function(t,n){if(n.id===e)return i.annotations.splice(t,1),!1}))},e.prototype.updateAnnotation=function(t,e){var i=this.__map[t];$.each(i.annotations,(function(t,i){if(i.id===e.id)return $.extend(!0,i,e),!1}))}}));Michelangelo.ChartDefinitionEditExecutor=ChartDefinitionEditExecutor;var DragTracking=function(t,e){this.offset=t,this.target=e},DragTracker=function(){function t(t,e,i,n){this.__engaged=!1,this.__startDelta=3,this.__dragStart=e,this.__endAction=i,this.__noDragAction=n||function(){},this.__tracking=$.map(t,(function(t){var i=t.getLocation();return new DragTracking(Point.Physical(e.physX-i.physX,e.physY-i.physY),t)}))}return t.prototype.handleMouseUp=function(t){t.stopPropagation(),t.stopImmediatePropagation(),this.__engaged?this.__endAction($.map(this.__tracking,(function(t){return t.target}))):this.__noDragAction()},t.prototype.handleMouseMove=function(t){this.__engaged||Math.sqrt(Math.pow(t.chartX-this.__dragStart.physX,2)+Math.pow(t.chartY-this.__dragStart.physY,2))>this.__startDelta&&(this.__engaged=!0,$.each(this.__tracking,(function(t,e){e.target.startDrag()}))),this.__engaged&&$.each(this.__tracking,(function(e,i){i.target.moveTo(Point.Physical(t.chartX-i.offset.physX,t.chartY-i.offset.physY))})),t.stopPropagation(),t.stopImmediatePropagation()},t.prototype.cancel=function(){$.each(this.__tracking,(function(t,e){e.target.endDrag(!0)}))},t}();Michelangelo.DragTracker=DragTracker;var PublicEditor=__base((function(t){var e=t((function(t){this.__realEditor=t}));e.prototype.mode=function(t){if(!arguments.length)return this.__realEditor.mode();var e=this;return this.__realEditor.refresh((function(){return e.__realEditor.mode(t)}))},e.prototype.modes=function(){return this.__realEditor.modes()},e.prototype.deleteSelected=function(){var t=this;return this.__realEditor.refresh((function(){return t.__realEditor.deleteSelected()}))},e.prototype.end=function(){return this.__realEditor.end()},e.prototype.instructionText=function(){return this.__realEditor.instructionText()},e.prototype.select=function(t,e){var i=this;return this.__realEditor.refresh((function(){return i.__realEditor.select(t,e)}))},e.prototype.getSelection=function(){return __base.mapValues(this.__realEditor.getSelection(),(function(t,e){return e.annotation()}))},e.prototype.getSelectionList=function(){return _.map(this.__realEditor.getSelectionList(),(function(t){return t.annotation()}))},e.prototype.isSelected=function(t){return this.__realEditor.isSelected(t)},e.prototype.getSelectionDescription=function(){return this.__realEditor.getSelectionDescription()},e.prototype.applyToSelection=function(t){var e=this;return this.__realEditor.refresh((function(){return e.__realEditor.applyToSelection(t)}))},e.prototype.getSelectionVersion=function(){return this.__realEditor.getSelectionVersion()}})),AnnotationEditor=__base((function(t){var e=t((function(t,e){this.__manager=t,this.__context=e;var i={symbol:"select",displayName:"Select",precedence:0};this.__modes=$.map(Tools.getTools(),(function(t){return{symbol:t.symbol,displayName:t.displayName,precedence:t.precedence}})),e?(this.__modes.sort((function(t,e){return t.precedence-e.precedence})),this.__modes=[i].concat(this.__modes)):this.__modes=[i],this.__eventFilter=".annotations-"+t.id(),this.__selection={},this.__selectionList=[],this.__selectionVersion=0,this.__mode=new InteractionModeBase,this.mode(null),this.__publicEditor=new PublicEditor(this)}));e.prototype.publicEditor=function(){return this.__publicEditor},e.prototype.context=function(){return this.__context},e.prototype.refresh=function(t){return this.__manager.refresh(t)},e.prototype.mode=function(t){if(!arguments.length)return this.__mode.name();if(this.__mode.cancel(),this.__mode=null,t&&"select"!==t){var e=this.__manager.tools()[t];e&&(this.__mode=e.createStartMode(this.__context))}return this.__mode=this.__mode||new SelectInteractionMode(this),this.__mode.start(),this},e.prototype.modes=function(){return this.__modes},e.prototype.instructionText=function(){return this.__mode.instructionText()},e.prototype.end=function(){var t=this.__manager;t&&(this.unrender(),this.__mode.cancel(),this.__manager=null,t.endEdit())},e.prototype.render=function(t){var e=this.__selection;$.each(e,(function(i){i in t?e[i]=t[i]:delete e[i]}));var i=this.__manager.svgElement();this._subscribe(i,"mousedown",this.__handleMouseDown,this),this._subscribe(i,"mousemove",this.__handleMouseMove,this),this._subscribe(document,"mouseup",this.__handleMouseUp,this),this._subscribe(i,"click",this.__handleClick,this),this._subscribe(document,"keydown",this.__handleKeyDown,this),this._subscribe(document,"keypress",this.__handleKeyPress,this),this.__selectionVersion++},e.prototype.unrender=function(){$(this.__manager.containerElement()).off(this.__eventFilter),$(this.__manager.svgElement()).off(this.__eventFilter),$(document).off(this.__eventFilter)},e.prototype._subscribe=function(t,e,i,n){var r=this;$(t).on(e+this.__eventFilter,(function(t){return r.__dispatchInContext(n||r,i,t)}))},e.prototype._subscribeForHandler=function(t,e){var i=this;$(this.__manager.svgElement()).on(t+this.__eventFilter,".event-target",(function(t){return function(t,n){var r=d3.select(t).datum()||null;if(r){var o=r[e];if(o)return i.__dispatchInContext(r,o,n)}return!0}(this,t)}))},e.prototype.__dispatchInContext=function(t,e,i){var n=this;return this.__manager.event((function(){if(i&&i.originalEvent){var r=n.__manager.chart().pointer.normalize(i.originalEvent);$.extend(i,{chartX:r.chartX,chartY:r.chartY})}return e.call(t,i)}))},e.prototype.trackDrag=function(t,e,i){var n=this;n.__dragTracker&&(n.__dragTracker.cancel(),n.__dragTracker=null),n.__manager.__userDrivenAction=!0,t||(t=n.getSelection());this.__dragTracker=new DragTracker(t,e,(function(t){$.each(t,(function(t,e){e.endDrag(!1)})),n.__manager.__userDrivenAction=!1}),i)},e.prototype.endCreatingItem=function(){this.mode(null)},e.prototype.select=function(t,e){var i=this;e?$.each(t,(function(t,e){var n=e.annotation().id;n in i.__selection?delete i.__selection[n]:i.__selection[n]=e,e.dirty()})):($.each(this.__selection,(function(t,e){e.dirty()})),this.__selection={},$.each(t,(function(t,e){i.__selection[e.annotation().id]=e,e.dirty()}))),this.__selectionList=_.map(this.__selection,(function(t){return t})),this.__selectionVersion++},e.prototype.getSelection=function(){return $.extend({},this.__selection)},e.prototype.getSelectionList=function(){return $.extend([],this.__selectionList)},e.prototype.isSelected=function(t){return t.annotation().id in this.__selection},e.prototype.getSelectionDescription=function(){return _(this.__selection).reduce((function(t,e){return e.accumulateAttributes(t)}),null)},e.prototype.applyToSelection=function(t){_(this.__selection).each((function(e){e.applyAttributes(t)}),null),this.__selectionVersion++},e.prototype.getSelectionVersion=function(){return this.__selectionVersion},e.prototype.deleteSelected=function(){var t=this;$.each(this.__selection,(function(e,i){t.__manager.removeHandler(i),i.remove(!0)})),this.select([])},e.prototype.swallowMouseUp=function(){this.__swallowMouseUp=!0},e.prototype.__handleClick=function(t){this.__mode.handleClick(t)},e.prototype.__handleMouseUp=function(t){this.__dragTracker?(this.__dragTracker.handleMouseUp(t),this.__dragTracker=null):this.__swallowMouseUp?(t.stopPropagation(),t.stopImmediatePropagation()):this.__transition(this.__mode.handleMouseUp(t)),this.__swallowMouseUp=!1},e.prototype.__handleMouseMove=function(t){this.__dragTracker?this.__dragTracker.handleMouseMove(t):this.__transition(this.__mode.handleMouseMove(t))},e.prototype.__handleKeyDown=function(t){this.__transition(this.__mode.handleKeyDown(t))},e.prototype.__handleMouseDown=function(t){this.__transition(this.__mode.handleMouseDown(t))},e.prototype.__handleKeyPress=function(t){this.__transition(this.__mode.handleKeyPress(t))},e.prototype.__transition=function(t){t&&this.mode(null)}})),AnnotationManager=__base((function(t){var e=t((function(t,e,i){this.__id=t,this.__notifier=e,this.__eventWrapper=i||function(t){return t()},this.__nextSubId=1,this.__dropShadowId=this.__makeId("dropShadow"),this.__handlers={},this.__axisInfo={},this.__parentContexts={},this.__tools=Tools.getTools(),this.__editExecutor=null}));e.prototype.__makeId=function(t){return t+"-"+this.__id+"-"+this.__nextSubId++},e.prototype.getYValueForSeries=function(t,e){var i=this.__chart,n=_.find(i.series,(function(e){return e.userOptions.sourceId===t}));if(!n)return null;var r=n.userOptions.id;return e(i.get(r),this.__determineSeriesYPoint)},e.prototype.__determineSeriesYPoint=function(t){if(!!!t.series.options.compare)return t.y;var e=t.series.compareValue;return 100*(t.y/e-1)},e.prototype.render=function(t,e,i,n){this.unrender(),this.__chart=t,this.__renderModel=e,this.__def=i,this.__editExecutor=n,this.__container=t.container,this.__$container=$(this.__container),this.__$svg=this.__$container.find("svg"),this.__svg=this.__$svg.get(0),this.__svg_d3=d3.select(this.__svg),this.__defs_d3=this.__svg_d3.select("defs"),this.__style_d3=this.__defs_d3.append("style").attr("type","text/css"),this.__group_d3=d3.select(t.renderer.g().attr("zIndex",3.5).addClass("annotations").add().element),this.__overlay_d3=d3.select(t.renderer.g().attr("zIndex",3.75).addClass("annotation-overlays").add().element),this.__background_d3=d3.select(t.renderer.g().attr("zIndex",2.5).addClass("annotation-background").add().element),this.__defs_d3.append("filter").attr("id",this.__dropShadowId).attr("x","-10%").attr("y","-10%").attr("width","200%").attr("height","200%").call((function(t){t.append("feGaussianBlur").attr("in","SourceAlpha").attr("stdDeviation","1"),t.append("feOffset").attr("dx","2").attr("dy","2").attr("result","offsetblur"),t.append("feFlood").attr("flood-color","#000").attr("flood-opacity","50%"),t.append("feComposite").attr("in2","offsetblur").attr("operator","in"),t.append("feMerge").call((function(t){t.append("feMergeNode"),t.append("feMergeNode").attr("in","SourceGraphic")}))}));var r=this;this.__handlers={};var o=r.__chart.xAxis[0];this.__axisInfo={},this.__parentContexts={},$.each(this.__renderModel.panes,(function(t,e){$.each(e.axes,(function(t,e){var i=e.axisStyle.__mikeId,n=e.getActualAxis(r.__chart),a=r.__makeId("annotationMask"),s=r.__defs_d3.append("mask").attr("id",a).append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","#FFF");r.__axisInfo[i]={axis:n,maskId:a,rect_d3:s},$.each(e.series,(function(t,e){var i=new AnnotationContext(r,o,n,a,e.sourceId);r.__parentContexts[e.sourceId]=i,$.each(e.annotations,(function(t,e){i.addHandler(e)}))}))}))})),this.__updateMasks(),this.__setStyles(),this.__editor&&this.__editor.render(this.__handlers),this.refresh()},e.prototype.__updateMasks=function(){var t=this.__chart.xAxis[0],e=t.getExtremes();$.each(this.__axisInfo,(function(i,n){var r=n.axis,o=r.getExtremes();n.rect_d3.attr("x",t.toPixels(e.min)).attr("y",r.toPixels(o.max)).attr("width",t.toPixels(e.max)-t.toPixels(e.min)).attr("height",r.toPixels(o.min)-r.toPixels(o.max))}))},e.prototype.__setStyles=function(){this.__editor?this.__style_d3.text(".highcharts-grid, .highcharts-axis, .highcharts-series-group { pointer-events: none }</style>"):this.__style_d3.text("")},e.prototype.redraw=function(){$.each(this.__handlers,(function(t,e){e.update()})),this.__updateMasks()},e.prototype.refresh=function(t){var e=this;try{t&&t()}finally{$.each(this.__handlers,(function(t,i){i.refresh(e.__userDrivenAction)}))}},e.prototype.event=function(t){var e=this;this.refresh((function(){e.__eventWrapper(t)}))},e.prototype.unrender=function(){this.__editor&&this.__editor.unrender(),this.__chart=null,this.__axisInfo={},this.__parentContexts={}},e.prototype.canEdit=function(t){if(!t){for(var e in this.__handlers)if(this.__handlers.hasOwnProperty(e))return!0;return!1}return"string"===$.type(t.seriesId)&&this.__parentContexts[t.seriesId]},e.prototype.edit=function(t){if(!this.canEdit(t))return this.__editor;var e=t&&"string"===$.type(t.seriesId)&&this.__parentContexts[t.seriesId]||null;return this.__editor&&this.__editor.context()===e||(this.__editor&&this.endEdit(!0),this.__setStyles(),this.__editor=new AnnotationEditor(this,e),this.__notifier.notify("edit.started",null,this)),this.__editor},e.prototype.editor=function(){return this.__editor?this.__editor.publicEditor():null},e.prototype.endEdit=function(t){var e=this.__editor;e&&(this.__editor=null,e.end(),t||this.__notifier.notify("edit.ended",null,this),this.__setStyles())},e.prototype.notify=function(t,e,i){this.__notifier.notify(t,e,i)},e.prototype.id=function(){return this.__id},e.prototype.chart=function(){return this.__chart},e.prototype.svgElement=function(){return this.__svg},e.prototype.containerElement=function(){return this.__container},e.prototype.tools=function(){return this.__tools},e.prototype.editExecutor=function(){return this.__editExecutor},e.prototype.eventWrapper=function(){return this.__eventWrapper},e.prototype.addHandler=function(t){this.__handlers[t.annotation().id]=t},e.prototype.removeHandler=function(t){delete this.__handlers[t.annotation().id]},e.prototype.getLayerElement=function(t){switch(t){case"background":return this.__background_d3;case"overlay":return this.__overlay_d3;default:return this.__group_d3}}})),Point=__base((function(t){var e=t((function(){}));e.Domain=function(t,e){return{domX:t,domY:e}},e.Physical=function(t,e){return{physX:t,physY:e}},e.AddDomain=function(t,e){return Point.Domain(t.domX+e.domX,t.domY+e.domY)},e.AddPhysical=function(t,e){return Point.Physical(t.physX+e.physX,t.physY+e.physY)},e.PhysicalDifference=function(t,e){return Point.Physical(t.physX-e.physX,t.physY-e.physY)}}));Michelangelo.Point=Point;var Rect=__base((function(t){var e=t((function(){}));e.Domain=function(t,e,i,n){return{domTop:Math.min(t,i),domLeft:Math.min(e,n),domBottom:Math.max(t,i),domRight:Math.max(e,n)}},e.Physical=function(t,e,i,n){return{physTop:Math.min(t,i),physLeft:Math.min(e,n),physBottom:Math.max(t,i),physRight:Math.max(e,n)}},e.FromPhysical=function(t,e){return Rect.Physical(t.physY,t.physX,e.physY,e.physX)},e.FromDomain=function(t,e){return Rect.Domain(t.domY,t.domX,e.domY,e.domX)}}));Michelangelo.Rect=Rect;var PaletteColorDefinition=__base((function(t){var e=t((function(){}));e.prototype.displayName=function(){return this.__displayName},e.prototype.symbol=function(){return this.__symbol},e.prototype.rgbHex=function(){return this.__rgbHex}}));Michelangelo.PaletteColorDefinition=PaletteColorDefinition;var LineWidthDefinition=__base((function(t){var e=t((function(){}));e.prototype.displayName=function(){return this.__displayName},e.prototype.symbol=function(){return this.__symbol},e.prototype.physicalWidth=function(){return this.__physicalWidth}}));Michelangelo.LineWidthDefinition=LineWidthDefinition;var LineFormDefinition=__base((function(t){var e=t((function(){}));e.prototype.displayName=function(){return this.__displayName},e.prototype.symbol=function(){return this.__symbol}}));Michelangelo.LineFormDefinition=LineFormDefinition;var EllipseAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{center:Point.Domain(0,0),control1:Point.Domain(0,0),control2:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})}));i.type=function(){return"ellipse"},Annotation._register(i)}));Michelangelo.EllipseAnnotation=EllipseAnnotation,__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return EllipseAnnotation},i.displayInfo=function(){return{name:"Ellipse",precedence:50,instruction:"Click and drag in the chart to draw a circle or ellipse."}},i.dragCreate=function(t,e){var n=new EllipseAnnotation;return n.center=t.toDomainPoint(e),n.control1=t.toDomainPoint(e),n.control2=t.toDomainPoint(e),new i(n,t)};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);i.prototype._map=function(){return n},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={center:_.clone(t.center),control1:_.clone(t.control1),control2:_.clone(t.control2)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("ellipse").classed("fill",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("ellipse").classed("outline",!0).attr("cx",0).attr("cy",0).attr("rx",1e-6).attr("ry",1e-6).attr("fill","none").attr("stroke","none"),t.prototype.add.call(this)};var r=function(t,e){var i=t.physX-e.physX,n=t.physY-e.physY;return Math.sqrt(i*i+n*n)},o=function(t,e){return Math.atan2(e.physY-t.physY,e.physX-t.physX)};i.prototype.update=function(){var e=this.context(),i=this.annotation(),n=AnnotationHandler.neatenPoint(e.toPhysicalPoint(i.center),2),a=AnnotationHandler.neatenPoint(e.toPhysicalPoint(i.control1),i.borderThickness||1),s=AnnotationHandler.neatenPoint(e.toPhysicalPoint(i.control2),i.borderThickness||1),l=r(a,n),h=r(s,n),c=180*o(a,n)/Math.PI;this.__hostElement.attr("visibility",null).select(".fill").attr("cx",n.physX).attr("cy",n.physY).attr("rx",l).attr("ry",h).attr("transform","rotate("+c+","+n.physX+","+n.physY+")").attr("fill",i.color||UnknownToolColor);var u=this.__hostElement.select(".outline").attr("cx",n.physX).attr("cy",n.physY).attr("rx",l).attr("ry",h).attr("transform","rotate("+c+","+n.physX+","+n.physY+")").attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness);AnnotationHandler.applyLineForm(u,i.borderForm),t.prototype.update.call(this)},i.prototype.__moveControl=function(t,e,i,n,a){n=n||1;var s=this.context(),l=s.toPhysicalPoint(t),h=o(l,e)+Math.PI/2*(n/Math.abs(n)),c=r(l,a?e:s.toPhysicalPoint(i));return{control:s.toDomainPoint(e),otherControl:s.toDomainPoint(Point.Physical(l.physX+Math.cos(h)*c,l.physY+Math.sin(h)*c))}},i.prototype._createOverlays=function(){var t=this,e=this.annotation();return[new DragHandle(this,(function(i){var n=t.__moveControl(e.center,i,e.control2,1,t.__isCreating);e.control1=n.control,e.control2=n.otherControl}),(function(){return t.context().toPhysicalPoint(e.control1)}),"start"),new DragHandle(this,(function(i){var n=t.__moveControl(e.center,i,e.control1,-1,t.__isCreating);e.control2=n.control,e.control1=n.otherControl}),(function(){return t.context().toPhysicalPoint(e.control2)}))]},i.prototype.moveTo=function(e){var i=this.annotation(),n=this.__initialDragData,r=this.context();i.center=r.toDomainPoint(Point.AddPhysical(e,r.toPhysicalPoint(n.center))),i.control1=r.toDomainPoint(Point.AddPhysical(e,r.toPhysicalPoint(n.control1))),i.control2=r.toDomainPoint(Point.AddPhysical(e,r.toPhysicalPoint(n.control2))),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)}));var LineAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{start:{domX:0,domY:0,form:"none"},end:{domX:0,domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})}));i.type=function(){return"line"},Annotation._register(i)}));Michelangelo.LineAnnotation=LineAnnotation;var ValueLineAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{domY:0,start:{domX:0,form:"none"},end:{domX:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})}));i.type=function(){return"value line"},Annotation._register(i)}));Michelangelo.ValueLineAnnotation=ValueLineAnnotation;var TimeLineAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{domX:0,start:{domY:0,form:"none"},end:{domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})}));i.type=function(){return"time line"},Annotation._register(i)}));Michelangelo.TimeLineAnnotation=TimeLineAnnotation;var DataPointCalloutAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{domX:0,isEndPointHorizontal:!1,start:{domY:0,form:"none"},end:{domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid"})}));i.type=function(){return"datapoint callout"},Annotation._register(i)})),EffectiveEnds,LineHandlerBase,LineHandler,ValueLineHandler,TimeLineHandler,DataPointCalloutHandler;Michelangelo.DataPointCalloutAnnotation=DataPointCalloutAnnotation,EffectiveEnds=__base((function(t){t((function(t,e){this.inherited=t,this.hitable=e}))})),LineHandlerBase=__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.prototype.createOnNoDrag=function(){return!!this.constraint()},i.prototype.getDomainPosition=function(e){return t.prototype.getDomainPosition.call(this,e)},i.prototype.constraint=function(){return null};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.endLineForm,"end.form"]);i.prototype._map=function(){return n},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("line",!0).attr("visibility","collapse").append("line").classed("line hit-helper",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("style","stroke-width: 5px; stroke: white").attr("opacity",0),this.__hostElement.append("line").classed("start-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end-extension",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("line visible",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.annotation(),i=this.physicalStart(),n=this.physicalEnd(),r=this.__updateLineExt(i,n,e.start.form,e.form,".start-extension"),o=this.__updateLineExt(n,i,e.end.form,e.form,".end-extension"),a=AnnotationHandler.neatenPoint(r.inherited,e.thickness||1),s=AnnotationHandler.neatenPoint(o.inherited,e.thickness||1),l=this.__applyLineTerminator(".terminator.start",e.start.form,s,a,e.thickness||1,e.color||UnknownToolColor),h=this.__applyLineTerminator(".terminator.end",e.end.form,a,s,e.thickness||1,e.color||UnknownToolColor);l&&(a=l(s,a)),h&&(s=h(a,s));var c=this.__hostElement.attr("visibility",null).select(".line.visible").attr("x1",a.physX).attr("y1",a.physY).attr("x2",s.physX).attr("y2",s.physY).attr("stroke",e.thickness<=0?"none":e.color||UnknownToolColor).attr("stroke-width",e.thickness||1);AnnotationHandler.applyLineForm(c,e.form),this.__hostElement.select(".line.hit-helper").attr("x1",r.hitable.physX).attr("y1",r.hitable.physY).attr("x2",o.hitable.physX).attr("y2",o.hitable.physY),t.prototype.update.call(this)},i.prototype.__applyArrow=function(t,e,i,n,r,o){var a=180*Math.atan2(n.physY-i.physY,n.physX-i.physX)/Math.PI,s=this.__hostElement.selectAll(t);"arrow"===e?((s=s.data([1])).enter().append("polygon").classed(t.replace(/\./g," "),!0).attr("points","0,0 -8,5, -8, -5"),s.attr("transform","translate("+n.physX+" "+n.physY+") rotate("+a+") ").attr("fill",o).attr("stroke",o).attr("stroke-width",r)):s.remove()},i.prototype.__applyLineTerminator=function(t,e,i,n,r,o){var a=180*Math.atan2(n.physY-i.physY,n.physX-i.physX)/Math.PI,s=this.__hostElement.selectAll(t),l=LineTerminators.getTerminatorFunc(e);if(e&&l){var h=l(s,r,o,"translate("+n.physX+" "+n.physY+") rotate("+a+") ");return(s=h.selection).classed(t.replace(/\./g," "),!0),h.mutator}s.remove()},i.prototype.__updateLineExt=function(t,e,i,n,r){var o;if(!i||"none"===i||LineTerminators.isLineTerminator(i))this.__hostElement.selectAll(r).attr("visibility","hidden"),o=new EffectiveEnds(t,t);else{var a,s,l=this.context(),h=this.annotation(),c=Math.atan2(t.physY-e.physY,e.physX-t.physX);t.physY===e.physY?a=Point.Physical(t.physX>=e.physX?l.toVisibleX(1):l.toVisibleX(0),t.physY):(s=t.physY<e.physY?l.toVisibleY(1):l.toVisibleY(0),a=Point.Physical(t.physX+(t.physY-s)/Math.tan(c),s));var u=this.__hostElement.selectAll(r).attr("visibility",null).attr("x1",a.physX).attr("y1",a.physY).attr("x2",t.physX).attr("y2",t.physY).attr("stroke",h.color||UnknownToolColor).attr("stroke-width",h.thickness||1);if("inherit"===i&&(i=n),n===i)u.attr("visibility","hidden"),o=new EffectiveEnds(a,a);else switch(i){case"dashed":u.attr("stroke-dasharray","6 6"),o=new EffectiveEnds(t,a);break;case"dotted":u.attr("stroke-dasharray","3 5"),o=new EffectiveEnds(t,a);break;default:u.attr("stroke-dasharray",null),o=new EffectiveEnds(t,a)}}return o},i.prototype._createOverlays=function(){var t=this;return[new DragHandle(this,(function(e){t.physicalStart(e)}),(function(){return t.physicalStart()})),new DragHandle(this,(function(e){t.physicalEnd(e)}),(function(){return t.physicalEnd()}),"start")]},i.prototype.moveTo=function(e){var i=this.context();this.physicalStart(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.end))),t.prototype.moveTo.call(this,e)}})),LineHandler=__inherit(LineHandlerBase,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return LineAnnotation},i.displayInfo=function(){return{name:"Line",precedence:10,instruction:"Click and drag in the chart to draw a line."}},i.prototype.getDomainPosition=function(){var e=this.annotation(),n=[{field:"startX",label:"Start X",value:e.start.domX},{field:"startY",label:"Start Y",value:e.start.domY},{field:"endX",label:"End X",value:e.end.domX},{field:"endY",label:"End X",value:e.end.domY}],r=this.physicalStart(),o={positionData:n,annotationName:i.displayInfo().name,physicalPosition:r};return t.prototype.getDomainPosition.call(this,o)},i.dragCreate=function(t,e){var i=new LineAnnotation,n=t.toDomainPoint(e);return i.start={domX:n.domX,domY:n.domY,form:"none"},i.end={domX:n.domX,domY:n.domY,form:"none"},new LineHandler(i,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){return arguments.length?(_.assign(this.annotation().start,this.context().toDomainPoint(t)),this):this.context().toPhysicalPoint(this.annotation().start)},i.prototype.physicalEnd=function(t){return arguments.length?(_.assign(this.annotation().end,this.context().toDomainPoint(t)),this):this.context().toPhysicalPoint(this.annotation().end)},Tools.registerHandler(i)})),ValueLineHandler=__inherit(LineHandlerBase,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return ValueLineAnnotation},i.displayInfo=function(){return{name:"Value Line",precedence:10.1,instruction:"Click and drag in the chart to draw a value line."}};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startValue,"domY"]);i.prototype._map=function(){return n},i.prototype.getDomainPosition=function(){var e=[{field:"yValue",label:"Y Axis Value",value:this.annotation().domY,valueType:"dollar"}],n=this.physicalStart(),r={positionData:e,annotationName:i.displayInfo().name,physicalPosition:n};return t.prototype.getDomainPosition.call(this,r)},i.prototype.constraint=function(){return"value"},i.dragCreate=function(t,e){var i=new ValueLineAnnotation;return i.domY=t.toDomainY(e.physY),i.start={domX:t.toDomainX(e.physX),form:"inherit"},i.end={domX:t.toDomainX(e.physX+1),form:"inherit"},new ValueLineHandler(i,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domY:t.domY,start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.start.domX=e.toDomainX(t.physX),i.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(i.start.domX),e.toPhysicalY(i.domY))},i.prototype.physicalEnd=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.end.domX=e.toDomainX(t.physX),i.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(i.end.domX),e.toPhysicalY(i.domY))},Tools.registerHandler(i)})),TimeLineHandler=__inherit(LineHandlerBase,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return TimeLineAnnotation},i.displayInfo=function(){return{name:"Time Line",precedence:10.2,instruction:"Click and drag in the chart to draw a time line."}};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startDate,"domX"]);i.prototype._map=function(){return n},i.prototype.getDomainPosition=function(){var e=[{field:"xValue",label:"Date",value:this.annotation().domX,valueType:"date"}],n=this.physicalStart(),r={positionData:e,annotationName:i.displayInfo().name,physicalPosition:n};return t.prototype.getDomainPosition.call(this,r)},i.prototype.constraint=function(){return"time"},i.dragCreate=function(t,e){var i=new TimeLineAnnotation;return i.domX=t.toDomainX(e.physX),i.start={domY:t.toDomainY(e.physY),form:"inherit"},i.end={domY:t.toDomainY(e.physY+1),form:"inherit"},new TimeLineHandler(i,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domX:t.domX,start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.domX=e.toDomainX(t.physX),i.start.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(i.domX),e.toPhysicalY(i.start.domY))},i.prototype.physicalEnd=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.domX=e.toDomainX(t.physX),i.end.domY=e.toDomainY(t.physY),this):Point.Physical(e.toPhysicalX(i.domX),e.toPhysicalY(i.end.domY))},Tools.registerHandler(i)})),DataPointCalloutHandler=__inherit(LineHandlerBase,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return DataPointCalloutAnnotation};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.startDate,{path:"start.domX",func:function(t,e,i){var n=r(e,i);t.start.domY=n}}]);function r(t,e){return t.getYValueForSeries((function(t,i){var n=t.data.length>0?t.data:t.groupedData,r={diff:1/0},o={diff:-1/0};n.forEach((function(t){var i=t.x-e,n={point:t,diff:i};i<0?o=i>o.diff?n:o:r=i<r.diff?n:r}));var a=o.point,s=r.point,l=i(a),h=(i(s)-l)/(s.x-a.x);return(e-a.x)*h+l}))}i.prototype._map=function(){return n},i.displayInfo=function(){return{name:"Data Point Callout",precedence:10,instruction:"Click on the chart to add. Click and drag the outside box to rotate."}},i.prototype.getDomainPosition=function(){var e=this.annotation(),n=[{field:"xValue",label:"Date",value:e.start.domX,valueType:"date"},{field:"startY",label:"Value",value:e.start.domY,valueType:"dollar"}],r=this.physicalStart(),o={positionData:n,annotationName:i.displayInfo().name,physicalPosition:r};return t.prototype.getDomainPosition.call(this,o)},i.prototype._createOverlays=function(){var t=this;return[new DragHandle(this,(function(e){t.physicalStart(e)}),(function(){return t.physicalStart()}),"start"),new DragHandle(this,(function(e){t.rotateLine(e)}),(function(){return t.physicalEnd()}),"",{shape:"rect",attrs:{x:-7.5,y:0,height:15,width:15,fill:"#FA1E1E",stroke:"#46869b"}})]},i.dragCreate=function(t,e){var i=new DataPointCalloutAnnotation,n=t.toDomainX(e.physX);i.domX=n;var o=r(t,n);return i.start={domY:o,domX:n,form:"none"},i.end={domY:t.toDomainY(e.physY),domX:n,form:"none"},new DataPointCalloutHandler(i,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={domX:t.domX,start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();if(!arguments.length)return Point.Physical(e.toPhysicalX(i.start.domX),e.toPhysicalY(i.start.domY));var n=e.toDomainX(t.physX),o=r(e,n);return i.start.domX=n,i.start.domY=o,this},i.prototype.physicalEnd=function(t){var e,i,n=this.context(),r=this.annotation();if(!arguments.length)return r.isEndPointHorizontal?(e=r.end.domX,i=r.start.domY):(e=r.start.domX,i=r.end.domY),Point.Physical(n.toPhysicalX(e),n.toPhysicalY(i));var o=n.toDomainX(t.physX),a=n.toDomainY(t.physY);r.end.domX=o,r.end.domY=a},i.prototype.rotateLine=function(t){var e,i,n,r=this.physicalStart(),o=t.physX-r.physX,a=r.physY-t.physY,s=(0,{topSnap:function(t,e){return{physX:t.physX,physY:e.physY,isHorizontal:!1}},leftSnap:function(t,e){return{physX:e.physX,physY:t.physY,isHorizontal:!0}},bottomSnap:function(t,e){return{physX:t.physX,physY:e.physY,isHorizontal:!1}},rightSnap:function(t,e){return{physX:e.physX,physY:t.physY,isHorizontal:!0}}}[(e=o,i=a,45<=(n=Math.atan2(i,e)*(180/Math.PI))&&n<=135?"topSnap":n<=-135||135<=n?"leftSnap":-45<=n&&n<=45?"rightSnap":-135<=n&&n<=-45?"bottomSnap":void 0)])(r,t);this.annotation().isEndPointHorizontal=s.isHorizontal,this.physicalEnd(s)},i.prototype.moveTo=function(e,i){var n=this.context();if(!i)return this.physicalStart(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.start))),void this.physicalEnd(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.end)));this.physicalStart(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(e,n.toPhysicalPoint(this.__initialDragData.end))),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)}));var RegionAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{from:Point.Domain(0,0),to:Point.Domain(0,0),color:UnknownToolColor,borderThickness:1,borderForm:"solid"})}));i.type=function(){return"region"},Annotation._register(i)}));Michelangelo.RegionAnnotation=RegionAnnotation,__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return RegionAnnotation},i.displayInfo=function(){return{name:"Region",precedence:40,instruction:"Click and drag in the chart to highlight a region."}},i.dragCreate=function(t,e){var n=new RegionAnnotation;return n.from=t.toDomainPoint(e),n.to=t.toDomainPoint(e),new i(n,t)};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"]);i.prototype._map=function(){return n},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={from:_.clone(t.from),to:_.clone(t.to)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("region",!0).attr("visibility","collapse").append("rect").classed("fill",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none").attr("opacity",.25),this.__hostElement.append("rect").classed("outline",!0).attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("stroke","none"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.context(),i=this.annotation(),n=Rect.FromPhysical(AnnotationHandler.neatenPoint(e.toPhysicalPoint(i.from),i.borderThickness||1),AnnotationHandler.neatenPoint(e.toPhysicalPoint(i.to),i.borderThickness||1));this.__hostElement.attr("visibility",null).select(".fill").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("fill",i.color||UnknownToolColor);var r=this.__hostElement.select(".outline").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness);AnnotationHandler.applyLineForm(r,i.borderForm),t.prototype.update.call(this)},i.prototype._createOverlays=function(){var t=this.context(),e=this.annotation();return[new DragHandle(this,(function(i){e.from.domX=t.toDomainX(i.physX)}),(function(){return t.toPhysicalPoint(Point.Domain(e.from.domX,(e.from.domY+e.to.domY)/2))})),new DragHandle(this,(function(i){e.to.domX=t.toDomainX(i.physX)}),(function(){return t.toPhysicalPoint(Point.Domain(e.to.domX,(e.from.domY+e.to.domY)/2))})),new DragHandle(this,(function(i){e.from.domY=t.toDomainY(i.physY)}),(function(){return t.toPhysicalPoint(Point.Domain((e.from.domX+e.to.domX)/2,e.from.domY))})),new DragHandle(this,(function(i){e.to.domY=t.toDomainY(i.physY)}),(function(){return t.toPhysicalPoint(Point.Domain((e.from.domX+e.to.domX)/2,e.to.domY))})),new DragHandle(this,(function(i){e.from=t.toDomainPoint(i)}),(function(){return t.toPhysicalPoint(e.from)})),new DragHandle(this,(function(i){e.to=t.toDomainPoint(i)}),(function(){return t.toPhysicalPoint(e.to)}),"start"),new DragHandle(this,(function(i){e.to.domX=t.toDomainX(i.physX),e.from.domY=t.toDomainY(i.physY)}),(function(){return t.toPhysicalPoint(Point.Domain(e.to.domX,e.from.domY))})),new DragHandle(this,(function(i){e.from.domX=t.toDomainX(i.physX),e.to.domY=t.toDomainY(i.physY)}),(function(){return t.toPhysicalPoint(Point.Domain(e.from.domX,e.to.domY))}))]},i.prototype.moveTo=function(e){var i=this.context(),n=this.annotation();n.from=i.toDomainPoint(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.from))),n.to=i.toDomainPoint(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.to))),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)}));var TextAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{location:location,text:"Text",font:"Arial",fontSize:5,alignment:"left",color:UnknownToolColor})}));i.type=function(){return"text"},Annotation._register(i)}));Michelangelo.TextAnnotation=TextAnnotation,__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return TextAnnotation},i.displayInfo=function(){return{name:"Text",precedence:100,instruction:"Click in the chart to add text."}},i.prototype.createOnNoDrag=function(){return!0},i.dragCreate=function(t,e){var n=new TextAnnotation;return n.location=t.toDomainPoint(e),new i(n,t)};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.text,"text"],[Symbols.fontFamily,"font"],[Symbols.fontSize,"fontSize"],[Symbols.textAlignment,"alignment"]);i.prototype._map=function(){return n},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={location:_.clone(t.location)}},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground"),this.__hostElement.classed("text",!0).attr("visibility","collapse"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this,i=this.context(),n=this.annotation(),r=AnnotationHandler.neatenPoint(i.toPhysicalPoint(n.location),2),o="start";switch(n.alignment){case"right":o="end";break;case"center":o="middle"}this.__hostElement.attr("visibility",null).selectAll("text").remove();var a=Math.max(6,Math.abs(i.toVisibleY(1)-i.toVisibleY(0))*(n.fontSize||5)/100);_(n.text.replace(/<\/?p>/g,"").split(/\n/)).map((function(t,i){var s=_(function(t){var e={strong:0,em:0,noop:0},i=[];return t.replace(/([^<]+)|<(\/)?(strong|b)?(em|i)?>/g,(function(t,n,r,o,a){var s=function(t,e){return t?"strong":e?"em":"noop"}(o,a);n?i.push({text:n,tag:(e.strong?"b":"")+(e.em?"i":"")}):r?e[s]--:e[s]++})),i}(t)).select((function(t){return t.text.length>0})).value(),l=e.__hostElement.append("text").attr("x",r.physX).attr("y",r.physY+a*i).attr("fill",n.color||UnknownToolColor).attr("font-family",n.font||"Arial").attr("font-size",a).attr("text-anchor",o).attr("style","cursor: default");_.each(s,(function(t){l.append("tspan").text(t.text.replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")).attr("xml:space","preserve").attr("style","font-weight: "+(-1===t.tag.indexOf("b")?"normal":"bold")+"; font-style: "+(-1===t.tag.indexOf("i")?"normal":"italic"))}))})),t.prototype.update.call(this)},i.prototype._createOverlays=function(){var t=this.context(),e=this.annotation();return[new DragHandle(this,(function(i){e.location=t.toDomainPoint(i)}),(function(){return t.toPhysicalPoint(e.location)}),"start")]},i.prototype.moveTo=function(e){var i=this.context();this.annotation().location=i.toDomainPoint(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.location))),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)}));var TimeRangeAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{startTime:0,endTime:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})}));i.type=function(){return"time range"},Annotation._register(i)}));Michelangelo.TimeRangeAnnotation=TimeRangeAnnotation;var TimeRangeHandler=__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return TimeRangeAnnotation},i.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a time range."}},i.dragCreate=function(t,e){var i=new TimeRangeAnnotation;return i.startTime=t.toDomainX(e.physX),i.endTime=t.toDomainX(e.physX),new TimeRangeHandler(i,t)};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"],[Symbols.startDate,"startTime"],[Symbols.endDate,"endTime"]);i.prototype._map=function(){return n},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={startTime:t.startTime,endTime:t.endTime}},i.prototype.getDomainPosition=function(){var e=this.annotation(),n=[{field:"startDate",label:"Start Date",value:e.startTime,valueType:"date"},{field:"endDate",label:"End Date",value:e.endTime,valueType:"date"}],r=this.physicalStart(),o={positionData:n,annotationName:i.displayInfo().name,physicalPosition:r};return t.prototype.getDomainPosition.call(this,o)},i.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.context(),i=this.annotation(),n=Rect.Physical(e.toVisibleY(1),AnnotationHandler.neatenValue(e.toPhysicalX(i.startTime),i.borderThickness||1),e.toVisibleY(0),AnnotationHandler.neatenValue(e.toPhysicalX(i.endTime),i.borderThickness||1)),r=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",n.physLeft).attr("y1",n.physTop).attr("x2",n.physLeft).attr("y2",n.physBottom).attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness||1);AnnotationHandler.applyLineForm(r,i.borderForm);var o=this.__hostElement.select("line.end").attr("x1",n.physRight).attr("y1",n.physTop).attr("x2",n.physRight).attr("y2",n.physBottom).attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness||1);AnnotationHandler.applyLineForm(o,i.borderForm),this.__hostElement.select("rect").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("fill",i.color||UnknownToolColor),t.prototype.update.call(this)},i.prototype._createOverlays=function(){var t=this;return[new DragHandle(this,(function(e){t.physicalStart(e)}),(function(){return t.physicalStart()})),new DragHandle(this,(function(e){t.physicalEnd(e)}),(function(){return t.physicalEnd()}),"start")]},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.startTime=e.toDomainX(t.physX),this):Point.Physical(e.toPhysicalX(i.startTime),e.toVisibleY(.5))},i.prototype.physicalEnd=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.endTime=e.toDomainX(t.physX),this):Point.Physical(e.toPhysicalX(i.endTime),e.toVisibleY(.5))},i.prototype.moveTo=function(e){var i=this.context(),n=this.annotation();n.startTime=i.toDomainX(e.physX+i.toPhysicalX(this.__initialDragData.startTime)),n.endTime=i.toDomainX(e.physX+i.toPhysicalX(this.__initialDragData.endTime)),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)})),ValueRangeAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{start:0,end:0,color:UnknownToolColor,borderThickness:1,borderForm:"solid"})}));i.type=function(){return"value range"},Annotation._register(i)}));Michelangelo.ValueRangeAnnotation=ValueRangeAnnotation;var ValueRangeHandler=__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return ValueRangeAnnotation},i.displayInfo=function(){return{name:"Time Range",precedence:20,instruction:"Click and drag in the chart to highlight a value range."}},i.prototype.getDomainPosition=function(){var e=this.annotation(),n=[{field:"startValue",label:"From",value:e.start,valueType:"dollar"},{field:"endValue",label:"To",value:e.end,valueType:"dollar"}],r=this.physicalStart(),o={positionData:n,annotationName:i.displayInfo().name,physicalPosition:r};return t.prototype.getDomainPosition.call(this,o)},i.dragCreate=function(t,e){var i=new ValueRangeAnnotation;return i.start=t.toDomainY(e.physY),i.end=t.toDomainY(e.physY),new ValueRangeHandler(i,t)};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"borderThickness"],[Symbols.lineForm,"borderForm"],[Symbols.startValue,"start"],[Symbols.endValue,"end"]);i.prototype._map=function(){return n},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:t.start,end:t.end}},i.prototype.add=function(){this.__hostElement=this._createHostElement("background"),this.__hostElement.classed("time-range",!0).attr("visibility","collapse").append("rect").attr("x",0).attr("y",0).attr("width",0).attr("height",0).attr("fill","none").attr("opacity",.25),this.__hostElement.append("line").classed("start",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),this.__hostElement.append("line").classed("end",!0).attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",0).attr("stroke","none"),t.prototype.add.call(this)},i.prototype.update=function(){var e=this.context(),i=this.annotation(),n=Rect.Physical(AnnotationHandler.neatenValue(e.toPhysicalY(i.start),i.borderThickness||1),e.toVisibleX(0),AnnotationHandler.neatenValue(e.toPhysicalY(i.end),i.borderThickness||1),e.toVisibleX(1)),r=this.__hostElement.attr("visibility",null).select("line.start").attr("x1",n.physLeft).attr("y1",n.physTop).attr("x2",n.physRight).attr("y2",n.physTop).attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness||1);AnnotationHandler.applyLineForm(r,i.borderForm);var o=this.__hostElement.select("line.end").attr("x1",n.physLeft).attr("y1",n.physBottom).attr("x2",n.physRight).attr("y2",n.physBottom).attr("stroke",i.borderThickness<=0?"none":i.color||UnknownToolColor).attr("stroke-width",i.borderThickness||1);AnnotationHandler.applyLineForm(o,i.borderForm),this.__hostElement.select("rect").attr("x",n.physLeft).attr("y",n.physTop).attr("width",n.physRight-n.physLeft).attr("height",n.physBottom-n.physTop).attr("fill",i.color||UnknownToolColor),t.prototype.update.call(this)},i.prototype._createOverlays=function(){var t=this;return[new DragHandle(this,(function(e){t.physicalStart(e)}),(function(){return t.physicalStart()})),new DragHandle(this,(function(e){t.physicalEnd(e)}),(function(){return t.physicalEnd()}),"start")]},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.start=e.toDomainY(t.physY),this):Point.Physical(e.toVisibleX(.5),e.toPhysicalY(i.start))},i.prototype.physicalEnd=function(t){var e=this.context(),i=this.annotation();return arguments.length?(i.end=e.toDomainY(t.physY),this):Point.Physical(e.toVisibleX(.5),e.toPhysicalY(i.end))},i.prototype.moveTo=function(e){var i=this.context(),n=this.annotation();n.start=i.toDomainY(e.physY+i.toPhysicalY(this.__initialDragData.start)),n.end=i.toDomainY(e.physY+i.toPhysicalY(this.__initialDragData.end)),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)})),CurvedLineAnnotation=__inherit(Annotation,(function(t,e){var i=e((function(e){t.call(this,e),_.defaults(this,{start:{domX:0,domY:0,form:"arrow"},end:{domX:0,domY:0,form:"none"},color:UnknownToolColor,thickness:1,form:"solid",isConcave:!0})}));i.type=function(){return"curved line"},Annotation._register(i)})),CurvedLineHandler;Michelangelo.CurvedLineAnnotation=CurvedLineAnnotation,CurvedLineHandler=__inherit(AnnotationHandler,(function(t,e){var i=e((function(e,i){t.call(this,e,i)}));i.annotationType=function(){return CurvedLineAnnotation},i.displayInfo=function(){return{name:"Curved Line",precedence:15,instruction:"Click and drag to create quarter circle line"}},i.prototype.createOnNoDrag=function(){return!!this.constraint()},i.prototype.constraint=function(){return"date"};var n=Symbol.hash([Symbols.generalColor,"color"],[Symbols.thickness,"thickness"],[Symbols.lineForm,"form"],[Symbols.startLineForm,"start.form"],[Symbols.isConcave,"isConcave"]);function r(){var t=Math.PI/2,e={stroke:"none"},i=d3.scale.linear().domain([0,59]).range([0,t]),n=20;function r(t){var r=d3.svg.line.radial().interpolate("basis").radius(n).angle((function(t,e){return i(e)})),o=d3.range(60);return t.datum(o).attr(e).attr("d",r),t}return r.radius=function(t){return arguments.length?(n=t,r):n},r.attrs=function(t){return arguments.length?(e=t,r):e},r}function o(t,e,i){var n,r=e.physX-t.physX,o=i?e.physY-t.physY:t.physY-e.physY;return n=o>=0,r>=0?n?"Q1":"Q4":n?"Q2":"Q3"}i.prototype._map=function(){return n},i.prototype.add=function(){this.__hostElement=this._createHostElement("foreground");var e=this.__hostElement.classed("curved-line",!0).attr("visibility","collapse"),i=r().attrs({fill:"none","stroke-width":"5px",stroke:"white",opacity:"0"});e.append("path").call(i).classed("curved-line hit-helper",!0),e.append("path").call(r()).classed("curved-line visible",!0),t.prototype.add.call(this)},i.prototype.update=function(){var e,i,n,a=this.annotation(),s=this.physicalStart(),l=this.physicalEnd(),h=AnnotationHandler.neatenPoint(s,a.thickness||1),c=AnnotationHandler.neatenPoint(l,a.thickness||1),u=h.physY-c.physY,p=(e=h,i=c,n=a.isConcave,function(t,e,i,n){var r=e?"concave":"convex",o=i.physY-n.physY,a={Q1:{concave:{rotation:-90,getTranslation:function(t,e){return[t+e.physX,e.physY]}},convex:{rotation:90,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q2:{concave:{rotation:0,getTranslation:function(t,e){return[e.physX-t,e.physY]}},convex:{rotation:180,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q3:{concave:{rotation:-90,getTranslation:function(t,e){return[e.physX+t,e.physY]}},convex:{rotation:90,getTranslation:function(t,e){return[e.physX,e.physY-t]}}},Q4:{concave:{rotation:0,getTranslation:function(t,e){return[e.physX-t,e.physY]}},convex:{rotation:180,getTranslation:function(t,e){return[e.physX,e.physY-t]}}}}[t][r];return"translate("+a.getTranslation(o,i)+"), rotate("+a.rotation+")"}(o(e,i),n,e,i)),d=this.__hostElement,f={fill:"none",stroke:a.color||UnknownToolColor,"stroke-width":a.thickness||1,transform:p},g=r().radius(u).attrs(f),m=d.attr("visibility",null).select(".curved-line.visible").call(g);AnnotationHandler.applyLineForm(m,a.form);var y=g.attrs({fill:"none","stroke-width":"5px",stroke:"white",opacity:"0",transform:p});d.select(".curved-line.hit-helper").call(y),this.__applyLineTerminator(".terminator.start",a.start.form,h,c,a.thickness||1,a.color||UnknownToolColor,a.isConcave),t.prototype.update.call(this)},i.prototype.__applyLineTerminator=function(t,e,i,n,r,a,s){var l=s?"concave":"convex",h={Q1:{concave:90,convex:180},Q2:{concave:90,convex:0},Q3:{concave:-90,convex:0},Q4:{concave:-90,convex:180}}[o(i,n)][l],c=this.__hostElement.selectAll(t),u=LineTerminators.getTerminatorFunc(e);if(e&&u){var p=u(c,r,a,"translate("+i.physX+" "+i.physY+") rotate("+h+") ");return(c=p.selection).classed(t.replace(/\./g," "),!0),p.mutator}c.remove()},i.prototype._createOverlays=function(){var t=this;return[new DragHandle(this,(function(e){t.physicalStart(e)}),(function(){return t.physicalStart()}),"start"),new DragHandle(this,(function(e){t.physicalEnd(e)}),(function(){return t.physicalEnd()}),"",{shape:"circle",attrs:{r:10,cx:0,cy:0,fill:"#41BAC1","fill-opacity":.5,stroke:"#41BAC1"}})]},i.dragCreate=function(t,e){var i=new CurvedLineAnnotation,n=t.toDomainPoint(e),r=t.toDomainPoint({physX:e.physX-70,physY:e.physY-70});return i.start={domX:n.domX,domY:n.domY,form:"arrow"},i.end={domX:r.domX,domY:r.domY,form:"none"},new CurvedLineHandler(i,t)},i.prototype.startDrag=function(){var t=this.annotation();this.__initialDragData={start:_.clone(t.start),end:_.clone(t.end)}},i.prototype.physicalStart=function(t){var e=this.context(),i=this.annotation();if(!arguments.length)return this.context().toPhysicalPoint(i.start);var n=this.physicalStart(),r=Point.PhysicalDifference(t,n),o=this.physicalEnd(),a=Point.AddPhysical(o,r);return i.end.domX=e.toDomainX(a.physX),i.end.domY=e.toDomainY(a.physY),_.assign(i.start,e.toDomainPoint(t)),this},i.prototype.physicalEnd=function(t){var e=this.context(),i=this.annotation();if(!arguments.length)return this.context().toPhysicalPoint(i.end);var n=this.physicalStart(),r=o(n,t,!0),a=["Q1","Q3"].indexOf(r)>-1?1:-1,s=t.physX-n.physX,l=n.physY+s*a,h=e.toDomainX(t.physX),c=e.toDomainY(l);return i.end.domX=h,i.end.domY=c,this},i.prototype.moveTo=function(e){var i=this.context();this.physicalStart(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.start))),this.physicalEnd(Point.AddPhysical(e,i.toPhysicalPoint(this.__initialDragData.end))),t.prototype.moveTo.call(this,e)},Tools.registerHandler(i)}));var PostProcessor=__base((function(t){var e=t((function(){})),i=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)n&&i.setAttribute(n,e[n]);return i},n=function(t,e,n){var r=i(t,n);if(e){var o=[];e.fontSize&&o.push("font-size:"+e.fontSize),e.fontFamily&&o.push("font-family:"+e.fontFamily),e.color&&o.push("fill:"+e.color),o.length&&r.setAttribute("style",o.join(";"))}return r},r=function(t,e){return t&&t.mikeStyle&&t.mikeStyle[e]?t.mikeStyle[e]:{}},o=function(t,e,o,a){var s=r(a,"indicatorLabels"),l=o.xAxis[0],h=l.toPixels(l.getExtremes().min);$.each(e.panes,(function(e,r){var a=r.axes[0].getActualAxis(o),l=a.toPixels(a.getExtremes().max),c=function(t,e){var i=[],n=null;return $.each(e.axes,(function(t,e){e.labels.length>0?i.push(e.labels.slice(0)):e.title&&!n&&(n=e.title)})),0===i.length&&n&&i.push(n),i.join(", ")}(0,r);if(c){var u=n("text",s.style,{x:h,y:l,"z-index":1}),p=i("tspan",{dy:"1em"});u.appendChild(p),p.appendChild(document.createTextNode(c)),t.append(u)}}))};e.exec=function(t,e,a){var s=$(a.container).find("svg"),l=t.def(),h=e.style;l.showTimestamp&&function(t,e,i){var o=r(i,"timestamp"),a="%m/%d/%y %l:%M %P";o.dateFormat&&(a=o.dateFormat);var s=Highcharts.dateFormat(a,new Date),l=n("text",o.style,{x:e.renderWidth()-2,y:e.renderHeight()-2,"z-index":1,"text-anchor":"end"});l.appendChild(document.createTextNode(s)),t.append(l)}(s,t,h),l.showIndicatorLabels&&o(s,e,a,h),function(t,e){var n=r(e,"injectCss");if(n&&n.length>0){var o=t.find("defs");if(o.length>0){var a=i("style",{type:"text/css"}),s=n.join(" ");a.appendChild(document.createTextNode(s)),o.append(a)}}}(s,h);var c={svg:s,quotes:e.quotes,chart:a};t.notify("svg.ready",c)}}));Michelangelo.PostProcessor=PostProcessor;var RenderContext=__base((function(t){var e=t((function(t,e,i,n,r,o){this.__host=t,this.__def=e,this.__renderSize=i,this.__notifier=n||Michelangelo.Notifier.Null(),this.__immediate=!!r,this.__editExecutor=o}));e.prototype.host=function(){return this.__host},e.prototype.def=function(){return this.__def},e.prototype.renderWidth=function(){return this.__renderSize.width},e.prototype.renderHeight=function(){return this.__renderSize.height},e.prototype.notify=function(t,e){this.__notifier.notify(t,e)},e.prototype.notifier=function(){return this.__notifier},e.prototype.immediate=function(){return this.__immediate},e.prototype.editExecutor=function(){return this.__editExecutor}}));Michelangelo.RenderContext=RenderContext;var Renderer=__base((function(t){var e=t((function(){}));e.prototype.measure=function(){mustOverride()},e.prototype.render=function(){mustOverride()},e.prototype.unrender=function(){mustOverride()},e.prototype.edit=function(){return null},e.prototype.editor=function(){return null},e.prototype.canEdit=function(){return!1}})),HighstockRenderer=__inherit(Renderer,(function(t,e){var i=e((function(e,i,n,r){t.call(this),this.__lastDataGrouping=null,this.__notifier=i,this.__chart=null,this.__annotationManager={render:function(){},redraw:function(){},unrender:function(){},edit:function(){},canEdit:function(){return!1},editor:function(){return null}}}));i.prototype.edit=function(t){this.__annotationManager.edit(t)},i.prototype.editor=function(){return this.__annotationManager.editor()},i.prototype.canEdit=function(t){return this.__annotationManager.canEdit(t)},i.prototype.__isEditing=function(){return!!this.__annotationManager.editor()},i.prototype.measure=function(t,e){this.__renderModel=null;var i=t.def();try{var n={width:t.renderWidth(),height:t.renderHeight()};if(!e)return"auto"===n.height&&(n.height=300),n;var r=this.__assimilateStyle(i);t.notify("style.hook",{style:r,model:i}),this.__renderModel=new Michelangelo.RenderModel(e,i,r,n),t.notify("renderModel.built",this.__renderModel,this)}catch(e){throw t.notify("presentation.error",e,this),e}return this.__renderModel.size},i.prototype.render=function(t,e){var i=this,n=t.def();try{if(this.unrender(t.notifier()),!this.__renderModel)return this.__renderEmptyChart(n,t),$.Deferred().reject();var r=[],o=new Michelangelo.ToolTipRepository(this.__renderModel.tzData,e.TimeInfo),a=this.__buildChartConfig(n,t,e,this.__renderModel,o,r);return this.__renderModel.style.highchartsStyles&&$.extend(!0,a,this.__renderModel.style.highchartsStyles),t.notify("chartConfig.built",a,this),t.notify("tooltip.info",o,this),a.chart.events={redraw:function(){i.__annotationManager.redraw(),t.notify("chart.redrawn",null,this)}},new Highcharts.StockChart(a,(function(e){try{i.__chart=e,i.__annotationManager.render(e,i.__renderModel,n,t.editExecutor()),i.__detectDataGroupingChanges(t,e),PostProcessor.exec(t,i.__renderModel,e)}catch(t){Michelangelo.Logger.log("Unhandled error in Michelangelo HighStock render callback:"),Michelangelo.Logger.log(t)}})),t.notify("bluegrass.subscribe",r,this),$.Deferred().resolve()}catch(e){return t.notify("presentation.error",e,this),$.Deferred().reject(e)}},i.prototype.unrender=function(t){if(this.__annotationManager.unrender(),this.__renderModel&&t.notify("bluegrass.unsubscribe",null,this),this.__chart){var e=this.__chart;this.__chart=null,e.destroy()}this.__annotationHandlers=[]},i.prototype.privateDataOmgMakeThisGoAway=function(){return{chart:this.__chart}},i.prototype.__fontHack=function(){Michelangelo.Logger.debug("FONT HACK:");var t=$(this.__chart.container).find("svg");if(0!==t.length){var e=t.find("defs").first();0===e.length&&Michelangelo.Logger.debug("...no defs..."),e.append('<style type="text/css"><![CDATA[ @import url(http://fonts.googleapis.com/css?family=Walter+Turncoat); ]]></style>'),Michelangelo.Logger.debug("...font HACKED!")}else Michelangelo.Logger.debug("...no SVG...")},i.prototype.__assimilateStyle=function(t){var e={};return $.extend(!0,e,Michelangelo.DefaultStyle.instance()),t.style&&$.extend(!0,e,t.style),e.highchartsYAxisStyle={},e.highchartsStyles.yAxis&&(e.highchartsYAxisStyle=e.highchartsStyles.yAxis,e.highchartsStyles.yAxis=void 0),e},i.prototype.__renderEmptyChart=function(t,e){var i=this.__buildSkeletonChartConfig(t,e);e.notify("chartConfig.built",i,this),this.__chart=new Highcharts.StockChart(i),this.__chart.showLoading("No data to display")},i.prototype.__buildChartConfig=function(t,e,i,n,r,o){var a=this,s=this.__buildSkeletonChartConfig(t,e);if(!i)return s;n.title&&n.title.length>0&&(s.title={text:t.title}),n.subtitle&&n.subtitle.length>0&&(s.subtitle={text:t.subtitle}),s.legend.enabled=n.layoutContext.showLegend,s.credits.enabled=n.layoutContext.showCredits,i.TimeInfo&&i.TimeInfo.IsIntraday&&(s.rangeSelector.buttons=[{type:"minute",count:30,text:"30m"},{type:"hour",count:1,text:"1h"},{type:"hour",count:2,text:"2h"},{type:"hour",count:4,text:"4h"},{type:"day",count:1,text:"1d"},{type:"all",text:"All"}]),n.xAxis.showTitle&&(s.xAxis.title={text:n.xAxis.title}),s.xAxis.ordinal=n.xAxis.compressed,$.extend(!0,s.xAxis,{labels:{enabled:n.xAxis.showLabels}}),n.xAxis.min&&n.xAxis.max&&(s.xAxis.min=n.xAxis.min,s.xAxis.max=n.xAxis.max,s.xAxis.startOnTick=!1,s.xAxis.endOnTick=!1),s.xAxis.plotBands=[],$.each(n.xAxis.plotBands,(function(t,e){var i={from:e.from,to:e.to,color:e.color,label:{text:e.name}};e.labelStyle&&$.extend(!0,i.label,e.labelStyle),s.xAxis.plotBands.push(i)})),s.xAxis.plotLines=[],$.each(n.xAxis.plotLines,(function(t,e){s.xAxis.plotLines.push(e)})),n.isCompare&&(s.plotOptions.series.compare="percent");var l={};return $.each(n.panes,(function(h,c){l.renderPane=c,$.each(c.axes,(function(h,c){var u={opposite:!c.onLeft,title:{text:c.title},labels:{enabled:c.showLabels},plotLines:[],top:c.top,height:c.height,offset:c.offset,type:c.type};if(t.style&&t.style.mikeStyle){var p=t.style.mikeStyle.multipleAxisExtensionFactorForIndicators;p&&!isNaN(Number(p))&&(c.isIndicatorAxis?u.maxPadding=Number(p):$.grep(l.renderPane.axes,(function(t){return t.isIndicatorAxis})).length>0&&(u.minPadding=Number(p)))}u.labels.formatter=function(){var t;if(this.axis.tickInterval>=1e4&&!c.labelUnitSymbol){var e=1,i="";this.axis.tickInterval>=1e10?(e=1e9,i="b"):this.axis.tickInterval>=1e7?(e=1e6,i="m"):this.axis.tickInterval>=1e4&&(e=1e3,i="k"),t=Highcharts.numberFormat(this.value/e,0)+i}else{var n=this.axis.tickInterval+"",r=0;n.indexOf(".")>=0&&(r=n.length-n.indexOf(".")-1),c.maxLabelDecimals&&r>c.maxLabelDecimals&&(r=c.maxLabelDecimals),c.disallowOneDecimal&&1===r&&(r=2),t=Highcharts.numberFormat(this.value,r);var o=!1;"boolean"==typeof c.addYAxisUnits?o=c.addYAxisUnits:"string"==typeof c.addYAxisUnits&&("all"===c.addYAxisUnits?o=!0:"none"===c.addYAxisUnits?o=!1:"first"===c.addYAxisUnits?o=this.isFirst:"last"===c.addYAxisUnits&&(o=this.isLast)),c.labelUnitSymbol||(o=!1),o&&(c.labelSuffix?t+=c.labelUnitSymbol:t=c.labelUnitSymbol+t)}return t};var d=null;if(t.style.mikeStyle&&t.style.mikeStyle.yAxisLabelsPadding){var f=Number(t.style.mikeStyle.yAxisLabelsPadding);isNaN(f)||(d=f)}if(t.style.mikeStyle&&t.style.mikeStyle.yAxisLabelsOutside){var g=d||4;c.onLeft?(u.labels.align="right",u.labels.x=-g):(u.labels.align="left",u.labels.x=g)}else t.style.mikeStyle&&!1===t.style.mikeStyle.yAxisLabelsOutside&&(c.onLeft?(u.labels.align="left",d&&(u.labels.x=d)):(u.labels.align="right",d&&(u.labels.x=-d)));$.extend(!0,u,c.axisStyle);var m=s.yAxis.length;s.yAxis.push(u),$.each(c.series,(function(l,h){var c=Michelangelo.ServerResponseHelpers.findSeriesByResponseId(i,h.responseId);if(c){var u={id:h.id,type:h.chartType,name:h.seriesName,yAxis:m,data:null,tooltip:{valueDecimals:3},sourceId:h.sourceId};if((t.includeMockTick||i.TimeInfo.IsIntraday)&&c.BlueGrassChannels&&c.BlueGrassChannels.length>0){var p=new Michelangelo.BlueGrassUpdater(t,n,h,i,e.notifier(),(function(){return a.__chart}));$.each(c.BlueGrassChannels,(function(t,e){o.push({channel:e.ChannelName,callback:function(t){p.messageHandler(p,t)}})}))}h.seriesOptions&&$.extend(!0,u,h.seriesOptions);var d=new Michelangelo.DataPointBuilder(c,i.TimeInfo,n.tzData,r,h.id);u.data=d.build(h.fieldNames);var f={ticker:c.Ticker,countryCode:c.CountryCode,commonName:c.CommonName,instrumentType:c.InstrumentType,dataPoints:h.fieldNames,isIndicator:h.isIndicator,extraData:{}};if(c.ExtraData&&$.each(c.ExtraData,(function(t,e){"PriorClose"===e.Name&&(f.extraData.priorClose={value:e.Value,hints:{decimals:3,suffix:!0,unitSymbol:""}})})),r.setCustomData(h.id,h.customToolTipData),r.setSeriesData(h.id,f),c.FormatHints&&$.each(h.fieldNames,(function(t,e){r.setFormatHints(h.id,e,{decimals:c.FormatHints.DecimalPlaces,suffix:c.FormatHints.Suffix,unitSymbol:c.FormatHints.UnitSymbol})})),c.ToolTipDataPoints&&$.each(c.ToolTipDataPoints,(function(t,e){"PercentChange"===e&&r.setFormatHints(h.id,e,{decimals:3,suffix:!0,unitSymbol:"%"})})),c.ExtraToolTips&&$.each(c.ExtraToolTips,(function(t,e){r.addPoint(e.DateUtc,h.id,e.Name,e.Value)})),("line"===h.chartType||"area"===h.chartType||"spline"===h.chartType)&&1===u.data.length&&c.ExtraData&&i.TimeInfo.IsIntraday){var g=c.ExtraData.filter((function(t){return"MostRecentOpen"===t.Name}))[0],y=c.ExtraData.filter((function(t){return"MostRecentLast"===t.Name}))[0];g&&y&&g.Date&&y.Date&&g.Value&&y.Value&&(u.data=[[n.tzData.utcToLocal(g.Date),g.Value],[n.tzData.utcToLocal(y.Date),y.Value]])}s.series.push(u)}})),$.each(c.events,(function(t,e){var n=Michelangelo.ServerResponseHelpers.findEventByResponseId(i,e.responseId);if(n){var o={id:e.id,type:e.chartType,name:e.seriesName,yAxis:m,data:[],tooltip:{valueDecimals:3}},a={ticker:n.Ticker,countryCode:n.CountryCode,dataPoints:["Value"],isEvent:!0};r.setSeriesData(e.id,a),$.each(n.DataPoints,(function(t,i){if(i.Value){var n=null;e.eventStyle&&(n=e.eventStyle.unchangedImageUrl,i.Change&&(i.Change>0?n=e.eventStyle.upImageUrl:i.Change<0&&(n=e.eventStyle.downImageUrl)));var r={x:i.EventDate,y:i.Value};n&&(r.marker={symbol:"url("+n+")"}),o.data.push(r)}})),s.series.push(o)}})),c.plotLines&&i&&i.TimeInfo&&!n.isCompare&&a.__addPlotLines(i,s,n,c,u,m)}))})),n.applyHighStockCandleHack&&a.__addNullSeries(s,n.tzData,i.TimeInfo),s},i.prototype.__addNullSeries=function(t,e,i){if(i&&i.Ticks){for(var n={id:"$$candle-hack",type:"line",name:"$$candle-hack",yAxis:0,data:[],showInLegend:!1},r=0;r<i.Ticks.length;r++){var o=+i.Ticks[r];o=e.utcToLocal(o),n.data.push([o,null])}t.series.push(n)}},i.prototype.__addPlotLines=function(t,e,i,n,r,o){if(t&&t.TimeInfo&&t.TimeInfo.Ticks){var a=[],s=Math.floor(t.TimeInfo.Ticks.length/2),l=i.tzData.utcToLocal(t.TimeInfo.Ticks[s]);if($.each(n.plotLines,(function(t,e){var i=e.value;r.plotLines.push(e),a.push([l,i])})),a.length>0){var h={id:"pl-"+o,type:"scatter",yAxis:o,data:a,marker:{enabled:!1},showInLegend:!1};e.series.push(h)}}},i.prototype.__buildSkeletonChartConfig=function(t,e){var i,n=+t.animationSpeed;i=0!==n&&{duration:n,easing:t.animationEasing};return{chart:{renderTo:e.host()},credits:{enabled:!1,text:t.credit},exporting:{enabled:t.showExporting},legend:{enabled:!1},loading:{labelStyle:{color:"white"},style:{backgroundColor:"gray"}},navigator:{enabled:t.showNavigator},plotOptions:{series:{compare:void 0,animation:!e.immediate()&&i,enableMouseTracking:t.showTooltips&&!this.__isEditing()}},rangeSelector:{enabled:t.showRangeSelector,buttons:void 0},scrollbar:{enabled:!1},subtitle:void 0,title:void 0,tooltip:{enabled:t.showTooltips&&!this.__isEditing(),crosshairs:[!0,!0]},xAxis:{},yAxis:[],series:[]}},i.prototype.__detectDataGroupingChanges=function(t,e){var i=_.map(t.def().series,(function(t){return t.seriesId})),n=_(e.series).filter((function(t){return 0===t.options.id.indexOf("rs-")&&_.contains(i,t.options.sourceId)})).map((function(t){return _.assign({seriesId:t.options.sourceId,dataGrouping:_.isObject(t.currentDataGrouping)?_.pick(t.currentDataGrouping,["unitName","unitRange"]):null})})).valueOf(),r={hasAnyDataGrouping:_.some(n,(function(t){return _.isObject(t.dataGrouping)})),series:n};!_.isEqual(this.__lastDataGrouping,r)&&t.notify("chart.dataGroupingChanged",r,this),this.__lastDataGrouping=r}}));Michelangelo.HighstockRenderer=HighstockRenderer;var BlueGrassChannelEntry=__base((function(t){var e=t((function(t){this.channelName=t,this.notifier=null,this.handlers={};var e=this;this.callback=function(t){e.notifier&&t&&t.h&&t.h.t&&e.notifier.notify("bg.message",{name:t.h.t,message:t}),$.each(e.handlers,(function(e,i){i.callback(t)}))}}));e.prototype.setNotifier=function(t){this.notifier=t},e.prototype.addHandler=function(t,e){t in this.handlers?Logger.debug("Duplicate call to addHandler, channel='"+this.channelName+"', id='"+t+"'"):this.handlers[t]=e},e.prototype.removeHandler=function(t){delete this.handlers[t]},e.prototype.hasHandlers=function(){for(var t in this.handlers)if(this.handlers.hasOwnProperty(t))return!0;return!1},e.prototype.subscribe=function(t,e){e&&(e.subscribe(this.channelName,this.callback),this.notifier&&this.notifier.notify("bg.addChannel",{name:this.channelName}),Logger.debug("...BG subscribed to channel '"+this.channelName+"'..."))},e.prototype.unsubscribe=function(t,e){e&&(e.unsubscribe(this.channelName,this.callback),this.notifier&&this.notifier.notify("bg.removeChannel",{name:this.channelName}),Logger.debug("...BG unsubscribed from channel '"+this.channelName+"'..."))}})),BlueGrassClient=__base((function(t){var e=function(t,e,i){t.connection=e,t.onConnectionEventEx(t.connection,i)},i=t((function(t){this.bgRunTime=t,this.channels={},this.connected=!1,this.connectTimer=null,this.connectAttempts=0,this.connection=null,this.notifier=null;var i=this;1===i.bgRunTime.getConnection.length?i.bgRunTime.getConnection((function(t,n){e(i,t,n)})):i.connectTimer=setInterval((function(){Logger.debug("...BG event timer..."),i.connectAttempts+=1;var t=i.bgRunTime.getConnection();t&&t.isOpen()?(e(i,t,"init"),clearInterval(i.connectTimer),i.connectTimer=null):i.connectAttempts>30&&clearInterval(i.connectTimer)}),500)}));i.prototype.setNotifier=function(t){this.notifier=t,$.each(this.channels,(function(e,i){i.setNotifier(t)}))},i.prototype.onConnectionEvent=function(){},i.prototype.onConnectionEventEx=function(t,e){Logger.debug("...onConnectionEventEx, event='"+e+"'..."),this.connected=!0;var i=this;$.each(this.channels,(function(e,n){n.subscribe(i.bgRunTime,t)}))},i.prototype.unsubscribe=function(t){var e=this;$.each(e.channels,(function(i,n){n.removeHandler(t),n.hasHandlers()||(e.connected&&n.unsubscribe(e.bgRunTime,e.connection),delete e.channels[i])}))},i.prototype.subscribe=function(t,e){var i=this;$.each(e,(function(e,n){var r=i.channels[n.channel];r?r.addHandler(t,n):(r=new BlueGrassChannelEntry(n.channel),i.channels[n.channel]=r,r.addHandler(t,n),r.setNotifier(i.notifier),i.connected&&r.subscribe(i.bgRunTime,i.connection))}))}}));Michelangelo.BlueGrassClient=BlueGrassClient;var BlueGrassUpdater=__base((function(t){var e=function(t){if(!t||0===t.length)return!1;for(var e=0;e<t.length;e++)if(t[e])return!0;return!1};t((function(t,i,n,r,o,a){if(this.model=t,this.seriesId=n.id,this.enabled=!0,this.warned=!1,this.dataGroupingWarned=!1,this.unhandledWarned=!1,this.pointUpdateNotified=!1,this.pointAddNotified=!1,this.delayNotified=!1,this.__notifier=o,this.__chartAccessor=a,Michelangelo.isDebugEnabled()&&(window.bgDebugStats={delayed:0}),this.tzData=i.tzData,this.lastTick=function(t){for(var i=0,n=0;n<t.Series.length;n++)for(var r=t.Series[n],o=r.DataPoints.length-1;o>0;o--)if(e(r.DataPoints[o])){o>i&&(i=o);break}var a=t.TimeInfo.Ticks[i];return Michelangelo.Logger.debug("-> BG setup, last="+i+", lastTick="+new Date(a).toTimeString()),a}(r),this.step=r.TimeInfo.Step,"ohlc"===n.chartType||"candlestick"===n.chartType)return Logger.debug("BGUpdater: Chart type '"+n.chartType+"' is not yet handled."),void(this.enabled=!1);if(1===n.fieldNames.length&&"Last"!==n.fieldNames[0])return Logger.debug("BGUpdater: only charts for 'Last' data point can be updated."),void(this.enabled=!1);if(!r.TimeInfo.IsIntraday)return r.TimeInfo.IsIntraday||t.includeMockTick?!r.TimeInfo.IsIntraday&&t.includeMockTick?(this.enabled=!0,void(this.handler=new BlueGrassEodMockTickHandler)):void Logger.debug("BGUpdater: unknown case."):(Logger.debug("BGUpdater: EOD charts w/o mock tick are not yet implemented."),void(this.enabled=!1));this.enabled=!0;var s=t&&t.style&&t.style.mikeStyle&&t.style.mikeStyle.shiftChartOnBlueGrassTick||!1;this.handler=new BlueGrassIdayLineHandler(r.TimeInfo,i.tzData,this,s)})).prototype.messageHandler=function(t,e){if(t.enabled&&t.handler){var n=e.b;if(n&&n.z&&0!==n.z.length){var r=i(n.z);if(!(t.lastQuoteDate&&r<=t.lastQuoteDate)){t.lastQuoteDate=r;var o=t.__chartAccessor();if(o){var a=o.get(t.seriesId);a?t.handler.handleQuote(t.handler,a,n,r):t.warned||(Logger.debug("BGUpdater: Series '"+t.seriesId+"' not found."),t.warned=!0)}else t.warned||(Logger.debug("BGUpdater: Chart was not found."),t.warned=!0)}}}};var i=function(t){var e=parseInt(t);return isNaN(e)&&(t=t.indexOf("-")>=0||t.indexOf("+")>=0?t.substring(6,t.length-7):t.substring(6,t.length-2),e=parseInt(t)),e}}));Michelangelo.BlueGrassUpdater=BlueGrassUpdater;var BlueGrassEodMockTickHandler=__base((function(t){t((function(){})).prototype.handleQuote=function(t,e,i){var n=e.data[e.data.length-1],r=i.l;n.update(r)}})),BlueGrassIdayLineHandler=__base((function(t){var e=t((function(t,e,i,n){this.updater=i,this.tzData=e,this.step=t.Step,this.shift=n}));e.prototype.handleQuote=function(t,e,i,n){var r=n-t.updater.lastTick;if(r<0)return this.delayNotified||(this.delayNotified=!0,Logger.log("BGUpdater: point before chart start: quoteDate="+new Date(n).toTimeString()+", lastTick="+new Date(t.updater.lastTick).toTimeString())),void(window.bgDebugStats&&(window.bgDebugStats.delayed+=1));var o=Math.round(r/t.step),a=this.tzData.utcToLocal(t.updater.lastTick+o*t.step),s=i.l;if(t.updater.__notifier.notify("bg.tick",{x:a,y:s},t.updater),!function(t,e,i,n){var r;if(t.data&&t.data.length>0){for(r=0;r<t.data.length-1;r++){var o=t.data[r];if(o.x===e)return o.update(i),n.pointUpdateNotified||(n.pointUpdateNotified=!0,Logger.log("BGUpdater: Point updated! (this message will only appear once)")),!0}return!1}return t.xData?(n.dataGroupingWarned||(n.dataGroupingWarned=!0,Logger.log("BGUpdater: Series is in data grouping mode; BG updates not implemented. Try disabling data grouping in your style.")),!0):(n.unhandledWarned||(n.unhandledWarned=!0,Logger.log("BGUpdater: Don't know how to update series.")),!1)}(e,a,s,t.updater)){var l=[a,s];e.addPoint(l,!0,t.shift,!0),this.pointAddNotified||(this.pointAddNotified=!0,Logger.log("BGUpdater: Point added! (this message will only appear once)"))}}})),PresentationManager=__base((function(t){var e=__base((function(t){var e=1,i=function(t,e){if($.isNumeric(t)){if(t>0)return t}else switch(t){case"host":return Michelangelo.Logger.warn("'host' size is deprecated; use 'fill' instead."),"fill";case"fill":case"auto":return t}return e},n=function(t,e){return"auto"===t?"auto":"fill"===t?e:t},r=t((function(t,i,n){var r=this;this.__version=0,this.__hostElement=t,this.__id="michelangelo-presentation-"+e++,this.__config=$.extend(!0,{entitlement:null,environment:null,dataFetcher:null,bluegrassClient:null,eventWrapper:null,promiseWrapper:null},i||{}),this.__def=null,this.__template=null,this.__style=null,this.__tooltipFormatter=null,this.__renderSize={},this.__measuredSize={},this.__hostWatchId=null,this.__decorator=n,this.__eventManager=new DirectEventManager(this.__config.eventWrapper),this.__notifier=this.__eventManager.createNotifier(n),this.__dataFetcher=Fetcher.select(this.__config.dataFetcher,this.__config.environment,this.__config.entitlement),this.__promiseWrapper=this.__config.promiseWrapper||function(t){return t},this.__renderer=new HighstockRenderer(this.__id,this.__notifier,this.__config.eventWrapper),this.size({width:"fill",height:"auto"}),this.__config.bluegrassClient&&(this.__config.bluegrassClient.setNotifier(this.__notifier),this.__eventManager.on("bluegrass.subscribe",(function(t){r.__config.bluegrassClient.subscribe(r.__id,t)})),this.__eventManager.on("bluegrass.unsubscribe",(function(){r.__config.bluegrassClient.unsubscribe(r.__id)}))),this.__eventManager.on("edit.started",(function(){r.render(!0)})),this.__eventManager.on("edit.ended",(function(){r.render(!0)})),this.__eventManager.on("tooltip.info",(function(t){r.__tooltipFormatter&&r.__tooltipFormatter.tooltipRepo&&r.__tooltipFormatter.tooltipRepo(t)}))}));r.prototype.id=function(){return this.__id},r.prototype.hostElement=function(){return this.__hostElement},r.prototype.version=function(){return this.__version},r.prototype.remove=function(){null!==this.__hostWatchId&&clearInterval(this.__hostWatchId),this.__renderer.unrender(this.__notifier),$(this.__hostElement).html(""),delete this.__hostElement.__michelangeloPresentationManager__,this.__fire("presentationManager.removed")},r.prototype.size=function(t){var e=this.__renderSize;if(0===arguments.length)return $.extend({},e);if(!$.isPlainObject(t))return Logger.error("Could not set presentation render size from '"+t+"'"),this;var n={width:i(t.width,e.width),height:i(t.height,e.height)};return n.width===e.width&&n.height===e.height||(this.__renderSize=n,this.__renderedParentSize=null,this.__version++,this.__manageHostWatch()),this},r.prototype.load=function(t){var e=this;return Repo.select(e.__config.repo).get(t).then((function(t){return e.def(t.definition),e.__decorator}))},r.prototype.render=function(t){if(!this.__def)return this.__promiseWrapper($.Deferred().reject());try{var e,i,r=this,o=this.__version,a=new Michelangelo.Notifier((function(t,e){switch(t){case"dataFetch.started":r.__fire("refresh.started");break;case"dataFetch.complete":r.__fire("refresh.complete");break;default:r.__fire(t,e)}})),s=r.__parentSize(),l=(p=r.__renderSize,d=s,{width:n(p.width,d.width),height:n(p.height,d.height)});if("function"==typeof this.__style){var h=this.__style(this.__def,l);h instanceof ChartDefinition?e=new ChartDefinition(h):(e=new ChartDefinition(h.def),i=h.executor)}else(e=new ChartDefinition(this.__def)).style=this.__style||e.style;if(this.__tooltipFormatter&&this.__tooltipFormatter.formatter){var c={highchartsStyles:{tooltip:{useHTML:!0,shared:!0,formatter:this.__tooltipFormatter.formatter}}};$.extend(!0,e.style,c)}!i&&this.__def instanceof ChartDefinition&&(i=new ChartDefinitionEditExecutor(this.__def));var u=this.__dataFetcher.fetch(e,this.__config.debugModel,a).then((function(n){if(o===r.__version){a.notify("response.ready",n);var h=new RenderContext(r.__hostElement,e,l,r.__notifier,t),c=r.__renderer.measure(h,n);c.width=isNaN(c.width)?s.width:c.width,c.height=isNaN(c.height)?s.height:c.height,r.__measuredSize={width:c.width,height:c.height},$(r.__hostElement).css(c),r.__renderedParentSize=r.__parentSize();var u=new RenderContext(r.__hostElement,e,c,r.__notifier,t,i);return r.__renderer.render(u,n)}})).then((function(){return r.__decorator}),(function(t){return $.Deferred().reject(t,r.__decorator)}));return this.__promiseWrapper(u)}catch(t){return this.__fire("presentation.error",t),this.__promiseWrapper($.Deferred().reject(t))}var p,d},r.prototype.getConfig=function(){return this.__config},r.prototype.getMeasuredSize=function(){return this.__measuredSize},r.prototype.def=function(t){return 0===arguments.length?this.__def:(this.__def!==t&&(this.__def=t||{}),this.__version++,this)},r.prototype.style=function(t){return arguments.length?(this.__style=t,this):this.__style},r.prototype.tooltipFormatter=function(t){return arguments.length?(this.__tooltipFormatter=t,this):this.__tooltipFormatter},r.prototype.editor=function(){return this.__renderer.editor()},r.prototype.edit=function(t){return this.__renderer.edit(t),this},r.prototype.canEdit=function(t){return this.__renderer.canEdit(t)},r.prototype.__fire=function(t,e){this.__notifier.notify(t,e,this)},r.prototype.on=function(t,e){return this.__eventManager.on(t,e)},r.prototype.__manageHostWatch=function(){var t=this,e=this.__renderSize,i="fill"===e.width||"fill"===e.height;i||null===this.__hostWatchId?i&&null===this.__hostWatchId&&(this.__hostWatchId=setInterval((function(){var e=t.__parentSize();!t.__renderedParentSize||e.width===t.__renderedParentSize.width&&e.height===t.__renderedParentSize.height||(t.__version++,t.render(!0))}),100)):(clearInterval(this.__hostWatchId),this.__hostWatchId=null)},r.prototype.__parentSize=function(){var t=$(this.__hostElement.parentNode);return{width:t.width(),height:t.height()}}})),i=t((function(t,i){var n=new e(t,i,this);this.__impl=function(){return n},n.__fire("presentationManager.created")}));i.prototype.getRenderedAxesBoundaries=function(){var t=this.__impl().__renderer.__chart,e=t.xAxis[0].getExtremes(),i=t.yAxis[0].getExtremes();return{x:{min:e.min,max:e.max},y:{min:i.min,max:i.max}}},i.prototype.id=function(){return this.__impl().id()},i.prototype.hostElement=function(){return this.__impl().hostElement()},i.prototype.version=function(){return this.__impl().version()},i.prototype.remove=function(){this.__impl().remove()},i.prototype.size=function(){var t=this.__impl();return t.size.apply(t,arguments)},i.prototype.getMeasuredSize=function(){var t=this.__impl();return t.getMeasuredSize.apply(t,arguments)},i.prototype.style=function(){var t=this.__impl();return t.style.apply(t,arguments)},i.prototype.tooltipFormatter=function(){var t=this.__impl();return t.tooltipFormatter.apply(t,arguments)},i.prototype.load=function(t){return this.__impl().load(t)},i.prototype.render=function(){var t=this.__impl();return t.render.apply(t,arguments)},i.prototype.getConfig=function(){return this.__impl().getConfig()},i.prototype.def=function(){var t=this.__impl();return t.def.apply(t,arguments)},i.prototype.editor=function(){return this.__impl().editor()},i.prototype.edit=function(){var t=this.__impl();return t.edit.apply(t,arguments)},i.prototype.canEdit=function(){var t=this.__impl();return t.canEdit.apply(t,arguments)},i.prototype.on=function(t,e){return this.__impl().on(t,e)},i.getFrom=function(t){var e=t.__michelangeloPresentationManager__;return e instanceof i?e:null},i.createIn=function(t,e){i.removeFrom(t);var n=new PresentationManager(t,e);return t.__michelangeloPresentationManager__=n,n},i.getFromOrCreateIn=function(t,e){return i.getFrom(t)||i.createIn(t,e)},i.removeFrom=function(t){var e=i.getFrom(t);e&&e.remove()},i.prototype.extensionFactories=function(){return Logger.warn("extensionFactories are no longer required and will be deprecated."),this}}));Michelangelo.PresentationManager=PresentationManager;var DebugViewModel=__base((function(t){var e=t((function(){this.showMikeModel=!1,this.showDemoModel=!1,this.showServerRequest=!1,this.showServerResponse=!1,this.showInternalSeries=!1,this.showChartConfig=!1,this.showRenderModel=!1,this.showInternalRequest=!1,this.showInternalGuts=!1,this.showInternalStore=!1,this.showInternalResponse=!1,this.showServerPerf=!1,this.showBlueGrass=!1,this.sendAkamaiDebugHeaders=!1,this.useDebugNow=!1}));return e.prototype.wireUpDebug=function(t){var e=this;t.on("request.built",(function(t){e.serverRequest=t})),t.on("response.received",(function(t){e.serverResponse=t})),t.on("renderModel.built",(function(t){e.renderModel=$.extend(!0,{},t),delete e.renderModel.serverResponse,delete e.renderModel.model})),t.on("chartConfig.built",(function(t){var i=$.extend(!0,{},t);i.chart&&i.chart.renderTo&&"string"!==$.type(i.chart.renderTo)&&(i.chart.renderTo=i.chart.renderTo.toString()),e.chartConfig=i})),t.on("perf.received",(function(t){e.showPerfGraph(t)})),t.on("internalRequest.received",(function(t){e.internalRequest=t})),t.on("internalSeries.received",(function(t){e.internalSeries=t})),t.on("internalGuts.received",(function(t){e.internalGuts=t})),t.on("internalStore.received",(function(t){e.internalStore=t})),t.on("internalResponse.received",(function(t){e.internalResponse=t})),t.on("internalStitched.received",(function(t){e.internalStitchedResponse=t})),t.on("stitched.received",(function(t){e.stitchedResponse=t}))},e.prototype.wrapText=function(t){if(!t)return"";for(var e="",i=0,n=0;n<t.length;n++)i>50&&(i=0,e+="<br/>"),e+=t.charAt(n),i+=1;return e},e.prototype.showPerfGraph=function(t){if(this.showServerPerf&&"#serverPerfChartDiv".length&&t&&0!==t.length){var e=this,i={chart:{type:"columnrange",renderTo:"serverPerfChartDiv",inverted:!0},credits:{enabled:!1},exporting:{enabled:!1},title:{text:"Server Performance Measures"},xAxis:{categories:[]},yAxis:{title:{text:"Time (ticks)"},endOnTick:!1,minPadding:0,maxPadding:0,startOnTick:!1},tooltip:{crosshairs:[!0,!0],useHTML:!0,formatter:function(){return'<table><tr><th colspan="2" style="font-weight: bold">'+this.point.name+'</th></tr><tr><td>URL:</td><td><a href="'+this.point.url+'">'+e.wrapText(this.point.url)+"</a></td></tr><tr><td>Start:</td><td>"+this.point.startTime+"</td></tr><tr><td>Elapsed:</td><td>"+Highcharts.numberFormat(this.point.elapsed,4)+" ms</td></tr></table>"}},legend:{enabled:!1},series:[{name:"Times",data:[]}]},n=t[0].StartTicks,r=90;$.each(t,(function(t,e){i.xAxis.categories.push(e.Name);var o=e.StartTicks-n,a={low:o,high:o+e.ElapsedTicks,name:e.Name,url:e.Url,startTime:e.StartTime,elapsed:e.ElapsedMilliseconds};i.series[0].data.push(a),r+=18})),$("#serverPerfChartDiv").height(r),e.perfChart=new Highcharts.Chart(i)}},e}));Michelangelo.DebugViewModel=DebugViewModel;var PresentationHook=__base((function(t){var e=function(t,e,i){var n=t.id().replace(/-/g,"_"),r=window||{},o=r.mike||(r.mike={}),a=o[n]||(o[n]={pm:t});a.def=t.def(),a[e]=i};t((function(){})).hook=function(t){t.on("request.built",(function(i){e(t,"serverRequest",i)})),t.on("response.received",(function(i){e(t,"serverResponse",i)})),t.on("renderModel.built",(function(i){e(t,"renderModel",i)})),t.on("chartConfig.built",(function(i){e(t,"chartConfig",$.extend(!0,{},i))})),t.on("tooltip.info",(function(i){e(t,"tooltipRepo",i)}))}})),DebugCookieWrangler=__base((function(t){var e=t((function(){}));e.isEnabled=function(){return-1!==document.cookie.indexOf("letsGetMikey=enabled")},e.clearCookie=function(){document.cookie="letsGetMikey=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},e.setCookie=function(){document.cookie="letsGetMikey=enabled; expires=Tue, 19 Jan 2038 03:14:07 GMT"}}));Michelangelo.isDebugEnabled=function(){return DebugCookieWrangler.isEnabled()},Michelangelo.disableDebug=function(){return DebugCookieWrangler.clearCookie(),DebugCookieWrangler.isEnabled()},Michelangelo.enableDebug=function(){return DebugCookieWrangler.setCookie(),DebugCookieWrangler.isEnabled()},EventManager.on("presentationManager.created",(function(t,e){Michelangelo.isDebugEnabled()&&PresentationHook.hook(e)}));var IFrameComm=__base((function(t){var e=t((function(){this.__secret="dwh:"}));e.prototype.buildMessage=function(t){var e=JSON.stringify(t);return this.__secret+e},e.prototype.parseMessage=function(t){if(!t||0!==t.indexOf(this.__secret))return null;var e=t.substr(this.__secret.length);return JSON.parse(e)}}));Michelangelo.IFrameComm=IFrameComm;var IFrameLoader=__base((function(t){var e=t((function(t,e){var i={hostElement:t,hostId:$(t).attr("id"),parentId:e};this.__state=function(){return i},this.__comm=new Michelangelo.IFrameComm}));e.loadIn=function(t,e){var i=new IFrameLoader(t,e);return window.addEventListener("message",(function(t){i.receiveMessage.call(i,t)}),!1),i.getAmbience(),i},e.prototype.receiveMessage=function(t){var e=this.__state(),i=this.__comm.parseMessage(t.data);if(i)switch(i.kind){case"ambient":Michelangelo.ambience(i.environment,i.entitlementToken),e.chartId=i.chartId,e.containerSize=i.containerSize,e.renderSize=i.renderSize,e.callbacks=Michelangelo.Marshal.objectify(i.callbacks),e.style=Michelangelo.Marshal.objectify(i.style),e.defOverride=JSON.parse(i.defOverride),e.cssUrls=JSON.parse(i.cssUrls),e.cssText=JSON.parse(i.cssText),e.tooltipFormatterConfig=JSON.parse(i.tooltipFormatterConfig),e.tooltip=Michelangelo.Marshal.objectify(i.tooltip),this.doLoad()}};e.prototype.getAmbience=function(){var t={kind:"getAmbience",hostId:this.__state().parentId};parent.postMessage(this.__comm.buildMessage(t),"*")},e.prototype.doLoad=function(){var t=this.__state(),e=this;return function(t){if(t&&0!==t.length)for(var e=document.getElementsByTagName("head")[0],i=0;i<t.length;i++){var n=document.createElement("link");n.rel="stylesheet",n.type="text/css",n.href=t[i],n.media="all",e.appendChild(n)}}(t.cssUrls),function(t){if(t&&0!==t.length)for(var e=document.getElementsByTagName("head")[0],i=0;i<t.length;i++){var n=document.createElement("style");n.type="text/css",n.appendChild(document.createTextNode(t[i])),e.appendChild(n)}}(t.cssText),Repo.ambient().get(t.chartId).then((function(i){t.model=i.definition,$.extend(!0,t.model,t.defOverride);var n=$(t.hostElement).presentation({}).def(t.model).style(t.style).size(t.renderSize),r=null,o=Michelangelo.ToolTipFormatter;if("object"==typeof t.tooltip&&("object"==typeof t.tooltip.config&&(r=t.tooltip.config),"function"==typeof t.tooltip.formatter&&(o=t.tooltip.formatter)),r||(r=t.tooltipFormatterConfig),n.tooltipFormatter(new o(r)),t.callbacks)for(var a in t.callbacks)if(t.callbacks.hasOwnProperty(a)){var s=t.callbacks[a];"function"==typeof s&&n.on(a,s)}n.render().then((function(){var i={kind:"chartRendered",hostId:t.parentId,renderSize:t.renderSize,containerSize:t.containerSize,measuredSize:n.getMeasuredSize()};parent.postMessage(e.__comm.buildMessage(i),"*")}))}))}}));$.fn.extend({presentation:function(t){return this.length?t?PresentationManager.createIn(this[0],t):PresentationManager.getFrom(this[0]):null}}),$.fn.extend({loadFramed:function(t){return this.length?IFrameLoader.loadIn(this[0],t):null}})}(Michelangelo||(Michelangelo={})),function(t){var e,i,n,r=(e=function(t,e,i){for(var n=0;n<e.length;n++){var r,o=e[n].index;(-1===o||"NaN"===(r=t[o]))&&(r=null),i.push(r)}},i=function(t,e){for(var i=[],n=0;n<t.length;n++){var r=t[n];if(r)for(var o=0;o<e.DesiredDataPoints.length;o++)r===e.DesiredDataPoints[o]&&i.push({name:r,index:o});else i.push({name:"null",index:-1})}return i},n=function(t){if(!t||!t.ToolTipDataPoints||0===t.ToolTipDataPoints.length)return null;var e=t.DesiredDataPoints.length,i=[];return $.each(t.ToolTipDataPoints,(function(t,n){i.push({name:n,index:e+t})})),i},function(t,r,o,a,s){this.build=function(l){l&&0!==l.length||(l=t.DesiredDataPoints);var h=[],c=i(l,t);if(!c||0===c.length)return h;for(var u=n(t),p=0;p<t.DataPoints.length;p++){var d=t.DataPoints[p],f=+r.Ticks[p],g=[f=o.utcToLocal(f)];if(e(d,c,g),u)for(var m=0;m<u.length;m++){var y=u[m];a.addPoint(f,s,y.name,d[y.index])}h.push(g)}return h}});t.DataPointBuilder=r}(Michelangelo||(Michelangelo={})),function(t){var e=function(t,e){var i={tzData:t,timeInfo:{spansMoreThan12Months:e.LastTick-e.FirstTick>31556908800,step:e.Step,isIntraday:e.IsIntraday}},n=function(t){return i[t]||(i[t]={}),i[t]};this.getData=function(){return i},this.addPoint=function(t,e,i,r){var o=n(e);o.points||(o.points=[]),o.points[t]||(o.points[t]=[]),o.points[t].push({name:i,value:r})},this.setFormatHints=function(t,e,i){var r=n(t);r.hints||(r.hints={}),r.hints[e]=i},this.setCustomData=function(t,e){n(t).customData=e},this.setSeriesData=function(t,e){n(t).seriesData=e},this.getTzData=function(){return i.tzData},this.getTimeInfo=function(){return i.timeInfo},this.getPoints=function(t,e){var i=n(e);return i&&i.points&&i.points[t]&&i.points[t].length>0?i.points[t]:null},this.getCustomData=function(t){return n(t).customData||{}},this.getSeriesData=function(t){return n(t).seriesData||{}},this.getFormatHints=function(t,e){var i=n(t);return i.hints?i.hints[e]:null}},i=function(){},n=function(e){var i=this;this.showDateRange=!0,e&&!1===e.showDateRange&&(this.showDateRange=!1);var n=null;this.tooltipRepo=function(t){n=t};var r={iday:{main:"%m/%d/%Y %I:%M %p",group:"%I:%M %p"},eod:{main:"%m/%d/%Y",group:"%m/%d/%Y"}};e&&e.dateFormats&&$.extend(!0,r,e.dateFormats);var o=[{unit:"millisecond",factor:1},{unit:"second",factor:1e3},{unit:"minute",factor:6e4},{unit:"hour",factor:36e5},{unit:"day",factor:864e5},{unit:"week",factor:6048e5},{unit:"month",factor:26784e5},{unit:"year",factor:31556952e3}];this._formatHeader=function(e){var a=[];if(!n)return a;var s=n.getTimeInfo(),l=n.getTzData(),h=r.eod;s.isIntraday?h=r.iday:s.spansMoreThan12Months&&r.eodAndChartSpansMoreThanTwelveMonths&&(h=r.eodAndChartSpansMoreThanTwelveMonths);var c=Highcharts.dateFormat(h.main,e.x);if(i.showDateRange&&e.series.currentDataGrouping){var u=e.series.currentDataGrouping,p=function(e,i,n){var r,a;for(r=0;r<o.length;r++)if((a=o[r]).unit===i)return e+a.factor*n;return t.Logger.log("Time unit "+i+" is not yet handled!"),e}(e.x,u.unitName,u.count);c+=" to "+Highcharts.dateFormat(h.group,p)}return s.isIntraday&&(c+=" "+l.getAbbreviation(e.x)),a.push('<div class="mike-tip">'),a.push('<span class="mike-tip-date">'+c+"</span>"),a};var a=function(t,e,i){var n=Highcharts.numberFormat(t,e.decimals);e.unitSymbol&&(e.suffix?n+=e.unitSymbol:n=e.unitSymbol+n);var r="";return $.isNumeric(i)&&(r=t>i?" mike-tip-up":t<i?" mike-tip-down":" mike-tip-unchanged"),'<span class="mike-tip-val'+r+'">'+n+"</span>"},s=function(t,e,i,r){if("string"==typeof e)return e;var o=null;return n&&i&&(o=n.getFormatHints(t,i)),"PercentChange"===i&&(r=0),o||(o={decimals:3,unitSymbol:null}),a(e,o,r)};this.formatter=function(){var t,e,r,o,l,h,c,u,p,d,f,g,m=this.points||(function(t){return"[object Array]"===Object.prototype.toString.call(t)}(g=this)?g:[g]),y={decimals:3,unitSymbol:"%",suffix:!0};return h=i._formatHeader(m[0]),c=m[0].x,$.each(m,(function(i,g){t=g.series,l=t.userOptions.id,u=[],p=!1,f=null,n&&(r=n.getCustomData(l),(o=n.getSeriesData(l))&&(u=o.dataPoints,p=o.isIndicator,o.extraData&&o.extraData.priorClose&&(f=o.extraData.priorClose.value))),d="mike-tip-name",d+=p?" mike-tip-indi":" mike-tip-series",h.push('<span class="'+d+'" style="color: '+t.color+'">'),h.push('<span class="mike-tip-bullet">â</span>'),h.push('<span class="mike-tip-label">'+t.name+"</span>");var m,v,_,x=!!g.point.change||0===g.point.change;if(x){var b=g.y/(.01*(100+g.point.change));_=b}else _=f;0===u.length?(m=s(l,g.y,null,_),v=""):1===u.length&&(m=s(l,g.y,u[0],_),v=u[0]),x?h.push(a(g.point.change,y,0)):h.push(m),h.push("</span>"),x&&r&&r.showLastPriceInCompareMode&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">'+v+"</span>"+m+"</span>"),u.length>1&&$.each(u,(function(t,e){var i,n,r;h.push('<span class="mike-tip-data"><span class="mike-tip-label">'+e+"</span>"+s(l,(i=g.point,"last"===(r=(n=e).charAt(0).toLowerCase()+n.slice(1))&&(r="close"),i[r]),e,_)+"</span>")})),n&&(e=n.getPoints(c,l))&&$.each(e,(function(t,e){var i=_;"PercentChange"===e.name?i=0:"Volume"===e.name&&(i=null),h.push('<span class="mike-tip-data"><span class="mike-tip-label">'+e.name+"</span>"+s(l,e.value,e.name,i)+"</span>")})),r&&o&&(o.extraData&&r.showPriorClose&&o.extraData.priorClose&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">Prior Close</span>'+a(o.extraData.priorClose.value,o.extraData.priorClose.hints,null)+"</span>"),r.showTicker&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">Ticker</span>'+o.ticker+"</span>"),r.showCountryCode&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">Country Code</span>'+o.countryCode+"</span>"),r.showCommonName&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">Common Name</span>'+o.commonName+"</span>"),r.showInstrumentType&&h.push('<span class="mike-tip-data"><span class="mike-tip-label">Instrument Type</span>'+o.instrumentType+"</span>"))})),h.push("</div>"),h.join("")}};t.ToolTipRepository=e,t.ToolTipHierarchy=i,t.ToolTipFormatter=n}(Michelangelo||(Michelangelo={})),function(t){var e=function(){function e(e,i,n,r){this.isCompare=!1,this.tzData=null,this.serverResponse=e,this.model=i,this.style=n,this.size=$.extend({width:"fill",height:"auto"},r),this.quotes=[],this.mainPane=new t.RenderPane,this.panes=[this.mainPane];var o={showLegend:!1,showCredits:!1,showTitle:!1,showSubtitle:!1};if(this.layoutContext=o,!this.shouldHide(this.style.mikeStyle.hideLegend))if("boolean"==typeof i.showLegend)o.showLegend=i.showLegend;else if("number"==typeof i.showLegend){var a=0;this.model.series&&(a=this.model.series.length),o.showLegend=i.showLegend<=a}o.showCredits=null!==i.credit&&i.credit.length>0&&!this.shouldHide(this.style.mikeStyle.hideCredits),this.shouldHide(this.style.mikeStyle.hideTitle)||(this.title=i.title,this.title&&(o.showTitle=!0)),this.shouldHide(this.style.mikeStyle.hideSubtitle)||(this.subtitle=i.subtitle,this.subtitle&&(o.showSubtitle=!0)),this.xAxis=new t.RenderXAxis,this.xAxis.showLabels=!this.shouldHide(this.style.mikeStyle.hideXAxisLabels),this.mainAxis=new t.RenderYAxis(n.highchartsYAxisStyle),this.mainPane.axes.push(this.mainAxis),this.scanSeries(),this.processSeries(),i.xAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideXAxisTitle)&&(this.xAxis.title=i.xAxisTitle,i.addTimeZoneToXAxisTitle&&e&&e.TimeInfo&&e.TimeInfo.IsIntraday&&(this.xAxis.title=this.tzData.addTimeZoneToTitle(this.xAxis.title,e.TimeInfo.FirstTick,e.TimeInfo.LastTick)),this.xAxis.showTitle=!0),this.xAxis.compressed=i.xAxisCompressed,new t.RenderLayout(this.model,this.panes,this.style,this.size,o).doLayout()}e.prototype.shouldHide=function(t){return!!(t&&t.minChartWidth&&this.size.width<t.minChartWidth)||!!(t&&t.minChartHeight&&this.size.height<t.minChartHeight)},e.prototype.scanSeries=function(){var e=this,i=!1,n=!1,r=!1;e.serverResponse&&e.serverResponse.TimeInfo&&(r=e.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,(function(o,a){if(null===e.tzData){var s=t.ServerResponseHelpers.findSeriesBySeriesId(e.serverResponse,a.seriesId);s&&s.length>0&&$.each(s,(function(i,n){if(null===e.tzData)if(n.TimeZoneData)e.tzData=new t.TimeZoneData(n.TimeZoneData,r);else if(n.UtcOffset&&n.TimeZoneAbbreviation){var o={SwitchDateUtc:0,UtcOffsetBeforeSwitch:n.UtcOffset,UtcOffsetAfterSwitch:n.UtcOffset,IsDstBeforeSwitch:!1,IsDstAfterSwitch:!1,StandardAbbreviation:n.TimeZoneAbbreviation,DaylightAbbreviation:n.TimeZoneAbbreviation,ShortAbbreviation:n.TimeZoneAbbreviation};e.tzData=new t.TimeZoneData(o,r)}}))}a.position===t.Position.compare&&(e.isCompare=!0),"TickerSeries"===a.seriesKind&&("candlestick"===a.chartType||"ohlc"===a.chartType?i=!0:n=!0)})),null===e.tzData&&(e.tzData=new t.TimeZoneData(null,r)),this.isCompare&&(this.mainAxis.labelUnitSymbol="%",this.mainAxis.labelSuffix=!0,this.mainAxis.addYAxisUnits="all"),!i||n||this.model.filterNullSlots||(e.applyHighStockCandleHack=!0)};e.prototype.processSeries=function(){var e=this,i=!1;e.serverResponse&&e.serverResponse.TimeInfo&&(i=e.serverResponse.TimeInfo.IsIntraday),$.each(this.model.series,(function(n,r){var o=t.ServerResponseHelpers.findSeriesBySeriesId(e.serverResponse,r.seriesId);o&&0!==o.length&&$.each(o,(function(o,a){0===n&&i&&(e.model.xAxisCompressed||e.model.filterNullSlots||0===e.model.timeFrame.indexOf("D1")&&(e.xAxis.min=e.tzData.utcToLocal(e.serverResponse.TimeInfo.TimeFrameStart),e.xAxis.max=e.tzData.utcToLocal(e.serverResponse.TimeInfo.TimeFrameEnd)),(e.model.showPreMarketBands||e.model.showAfterHoursBands||e.model.showClosedBands)&&e.style&&e.style.mikeStyle&&a.MarketSessions&&a.MarketSessions.length>0&&$.each(a.MarketSessions,(function(i,n){if("Trading"!==n.Kind&&("Closed"!==n.Kind||e.model.showClosedBands)&&("PreMarket"!==n.Kind||e.model.showPreMarketBands)&&("AfterMarket"!==n.Kind||e.model.showAfterHoursBands)){var r=n.Kind[0].toLowerCase()+n.Kind.slice(1),o=e.tzData.utcToLocal(n.Start),a=e.tzData.utcToLocal(n.End),s=e.style.mikeStyle.marketBands;if(s&&s.enabled){var l=new t.RenderPlotBand(o,a);if(l.name=n.Kind,l.color=s.color,l.labelStyle=s.labelStyle,s[r]){var h=s[r];h.color&&(l.color=h.color),h.name&&(l.name=h.name)}e.xAxis.plotBands.push(l)}var c=e.style.mikeStyle.marketLines;if(c){var u,p={},d={};$.extend(!0,p,c.left),$.extend(!0,d,c.right),c[r]&&(c[r].left&&$.extend(!0,p,c[r].left),c[r].right&&$.extend(!0,d,c[r].right)),p.enabled&&(u=new t.RenderPlotLine(o,p),e.xAxis.plotLines.push(u)),d.enabled&&(u=new t.RenderPlotLine(a,d),e.xAxis.plotLines.push(u))}}})));a.DjId&&(r.djid=a.DjId);var s=new t.RenderSeries(a.ResponseId,!1,r.seriesId,r.annotations);if(s.fieldNames=r.getFieldNames(a),s.customToolTipData=r.customToolTipData,s.customToolTipData.showLastPriceInCompareMode=_.some(r.tooltipDataPoints,(function(t){return"Last"===t})),s.chartType=r.chartType,s.seriesName=r.getName(a),e.style.seriesStyles&&e.style.seriesStyles[r.seriesKind]){var l=e.style.seriesStyles[r.seriesKind];s.seriesOptions="function"==typeof l?l(r.chartType):l}var h=function(t,e){var i,n=null;if(t.DesiredDataPoints)for(i=0;i<t.DesiredDataPoints.length;i++)"PercentChange"===t.DesiredDataPoints[i]&&(n=i);if(!n&&t.ToolTipDataPoints)for(i=0;i<t.ToolTipDataPoints.length;i++)"PercentChange"===t.ToolTipDataPoints[i]&&(n=i+t.DesiredDataPoints.length);if(null!==n)for(i=t.DataPoints.length;i>=0;i--)if(t.DataPoints[i]&&t.DataPoints[i][n])return{value:t.DataPoints[i][n],tick:e.Ticks[i]};return null}(a,e.serverResponse.TimeInfo);if(a.CurrentQuote||h){var c={ticker:a.Ticker,countryCode:a.CountryCode,commonName:a.CommonName,utcOffset:a.UtcOffset,timeZoneAbbreviation:a.TimeZoneAbbreviation,seriesId:s.id};a.CurrentQuote&&(c.quoteDateUtc=a.CurrentQuote.DateUtc,c.quoteLast=a.CurrentQuote.Last,c.quoteNetChange=a.CurrentQuote.NetChange,c.quoteChangePercent=a.CurrentQuote.ChangePercent,c.hintUnitSymbol=a.CurrentQuote.UnitSymbol,c.hintSuffix=a.CurrentQuote.Suffix,c.hintDecimalPlaces=a.CurrentQuote.DecimalPlaces),h&&(c.chartChangePercent=h.value,c.chartChangeDateUtc=h.tick),e.quotes.push(c)}a.BlueGrassChannels&&$.each(a.BlueGrassChannels,(function(t,e){s.blueGrassChannels.push(e.ChannelName)}));var u=0===n,p=e.determinePane(r,null,u),d=e.determineAxis(r,p,a,u,null);d.series.push(s),$.each(r.indicators,(function(i,n){var r=t.ServerResponseHelpers.findSeriesBySeriesId(e.serverResponse,n.seriesId),o=null;if(r&&r.length>0&&(o=r[0]),null===o){var s=t.ServerResponseHelpers.findEventBySeriesId(e.serverResponse,n.seriesId);if(null===s){var l=t.ServerResponseHelpers.findAggregateBySeriesId(e.serverResponse,n.seriesId);null===l?n.metaData===t.MetaData.HorizontalLineIndicator&&e.processHorizontalLine(n,d):e.processAggregate(n,l,d,a.ExtraData)}else e.processEvent(n,s,p,d)}else e.processIndicator(n,o,p,d)}))}))}))};return e.prototype.processEvent=function(e,i,n,r){var o=this.determinePane(e,n,!1),a=this.determineAxis(e,o,i,!1,r),s=new t.RenderEvent(i.ResponseId);if(i.Ticker?s.seriesName=i.Ticker+" "+e.metaData.name:s.seriesName=e.metaData.name,a.events.push(s),s.eventStyle=this.style.eventStyles[e.metaData.serverKind],e.parameters[0].value&&(a.isHidden=!0,$.extend(!0,a.axisStyle,{title:{text:null},labels:{enabled:!1}})),function(t){if(!t||!t.length)return!1;if(1===t.length)return!0;for(var e=t[0].Value,i=1;i<t.length;i++)if(t[i].Value!==e)return!1;return!0}(i.DataPoints)){var l=i.DataPoints[0].Value;a.axisStyle.min=l-1,a.axisStyle.max=l+1}},e.prototype.processAggregate=function(e,i,n,r){if(i.DataPoints){var o=i.DataPoints.slice();r&&$.each(r,(function(t,e){"PriorClose"===e.Name&&o.push({Name:"priorClose",Value:e.Value})}));var a=this.style.aggregateStyles[e.metaData.serverKind];$.each(o,(function(e,i){if(i.Value){var r=new t.RenderPlotLine(i.Value,a[i.Name]||{});n.plotLines.push(r)}}))}},e.prototype.processHorizontalLine=function(e,i){var n=parseFloat(e.parameters[0].value),r=new t.RenderPlotLine(n);i.plotLines.push(r)},e.prototype.processIndicator=function(t,e,i,n){var r=this.style.indicatorStyles[t.metaData.serverKind],o=this.determinePane(t,i,!1),a=this.determineAxis(t,o,e,!1,n);this.buildSeriesForIndicator(t,e,a,r),r&&r.axisStyle&&$.extend(!0,a.axisStyle,r.axisStyle)},e.prototype.determinePane=function(e,i,n){var r;return n||e.position===t.Position.compare?r=this.mainPane:e.position===t.Position.overlay||e.position===t.Position.onTop?r=null!==i?i:this.mainPane:(r=new t.RenderPane,e.position===t.Position.above?this.panes.unshift(r):this.panes.push(r)),r.height||(r.height=e.height),r},e.prototype.determineAxis=function(e,i,n,r,o){var a;return r?a=this.mainAxis:e.position===t.Position.overlay&&null!==o?a=o:(e.position===t.Position.overlay||e.position===t.Position.compare)&&i.axes.length>0?a=i.axes[0]:((a=new t.RenderYAxis(this.style.highchartsYAxisStyle)).isIndicatorAxis=e instanceof t.Indicator,i.axes.push(a),i.axes.length>this.model.maxVisibleAxesPerPane&&(a.isHidden=!0,$.extend(!0,a.axisStyle,{title:{text:null},labels:{enabled:!1}}))),a.isHidden||(a.showLabels=!this.shouldHide(this.style.mikeStyle.hideYAxisLabels),a.setLabels(n,this.style),!a.title&&this.model.showYAxisTitle&&e.showAxisTitle&&!this.shouldHide(this.style.mikeStyle.hideYAxisTitle)&&(a.title=e.getAxisTitle(n))),a.type=e.axisType,a},e.prototype.buildSeriesForIndicator=function(e,i,n,r){if(i){var o;r&&(o=r.seriesStyles);var a=null;$.each(e.parameters,(function(t,e){"chartType"===e.metaData.inputType&&(a=e.value)}));var s,l=[];if("ohlc"===a||"candlestick"===a){s=new t.RenderSeries(i.ResponseId,!0,e.seriesId,e.annotations);var h,c,u=null,p=null;i.DesiredDataPoints.length>1?(h=i.DesiredDataPoints[0],c=i.DesiredDataPoints[1]):c=h=i.DesiredDataPoints[0],"candlestick"===a&&(u=h,p=c),s.seriesName=e.metaData.name,s.fieldNames=[u,h,c,p],s.chartType=a,o&&(s.seriesOptions=o[0]),l.push(s)}else"arearange"===a?((s=new t.RenderSeries(i.ResponseId,!0,e.seriesId,e.annotations)).seriesName=e.metaData.name,s.fieldNames=["Low","High"],s.chartType=a,o&&(s.seriesOptions=o[0]),l.push(s)):$.each(i.DesiredDataPoints,(function(n,r){(s=new t.RenderSeries(i.ResponseId,!0,e.seriesId,e.annotations)).fieldNames=[r],s.seriesName=r,a&&(s.chartType=a),o&&(s.seriesOptions=o[n]),l.push(s)}));if($.each(l,(function(t,e){n.series.push(e)})),l.length&&!e.metaData.excludeFromLabel&&!e.metaData.isEvent){var d=e.metaData.name;e.metaData.abbreviation&&(d=e.metaData.abbreviation);var f=[];e.parameters&&$.each(e.parameters,(function(t,e){if(e.metaData.includeInLabel){var i=e.value;e.metaData.isList&&(i=i.replace(/\s+/g,"")),f.push(i)}})),f.length>0&&(d+="("+f.join(",")+")"),n.labels.push(d)}}},e}();t.RenderModel=e;var i=function(){this.height=void 0,this.axes=[]};t.RenderPane=i;var n=function(){this.plotBands=[],this.plotLines=[],this.compressed=!0,this.showTitle=!1,this.title=void 0,this.showLabels=!0,this.min=void 0,this.max=void 0};t.RenderXAxis=n;var r=function(){var t=1;function e(e){this.top=void 0,this.height=void 0,this.offset=void 0,this.onLeft=!1,this.title=void 0,this.labelUnitSymbol=void 0,this.labelSuffix=void 0,this.addYAxisUnits=void 0,this.maxLabelDecimals=void 0,this.disallowOneDecimal=!1,this.isHidden=!1,this.showLabels=!0,this.type="linear",this.axisStyle={},$.extend(!0,this.axisStyle,e),this.axisStyle.__mikeId=t++,this.plotLines=[],this.series=[],this.events=[],this.labels=[]}return e.prototype.setLabels=function(t,e){t&&t.FormatHints&&(null!==t.FormatHints.UnitSymbol&&!this.labelUnitSymbol&&e.mikeStyle.addYAxisUnits&&(this.labelUnitSymbol=t.FormatHints.UnitSymbol,this.labelSuffix=t.FormatHints.Suffix,this.addYAxisUnits=e.mikeStyle.addYAxisUnits),e.mikeStyle.maxYAxisLabelDecimals?this.maxLabelDecimals=e.mikeStyle.maxYAxisLabelDecimals:t.FormatHints.DecimalPlaces&&!this.maxLabelDecimals&&(this.maxLabelDecimals=t.FormatHints.DecimalPlaces),e&&e.mikeStyle&&e.mikeStyle.disallowOneDecimalOnYAxis&&(this.disallowOneDecimal=!0))},e.prototype.getActualAxis=function(t){var e=this.axisStyle.__mikeId;return $.grep(t.yAxis,(function(t){return t.options.__mikeId===e}))[0]},e}();t.RenderYAxis=r;var o=function(t,e){this.width=1,this.dashStyle="Solid",this.color="Green",this.zIndex=4,$.extend(!0,this,e),this.value=t};t.RenderPlotLine=o;var a=function(t,e){this.from=t,this.to=e,this.color="#F0F0F0",this.labelStyle=void 0,this.name="Band",this.zIndex=2};t.RenderPlotBand=a;var s=function(){function e(i,n,r,o){e.nextId+=1,this.id="rs-"+t.RenderSeries.nextId,this.isIndicator=n,this.sourceId=r,this.annotations=o||[],this.responseId=i,this.seriesName=i,this.chartType="line",this.fieldNames=[],this.seriesOptions=void 0,this.dataParameter=void 0,this.blueGrassChannels=[]}return e.nextId=0,e}();t.RenderSeries=s;var l=function(){function t(e){t.nextId+=1,this.id="re-"+t.nextId,this.responseId=e,this.seriesName=e,this.chartType="scatter"}return t.nextId=0,t}();t.RenderEvent=l}(Michelangelo||(Michelangelo={})),function(t){var e=function(){function t(t,e,i,n,r){this.model=t,this.panes=e,this.style=i,this.size=n,this.context=r}t.prototype.__doHorizontalLayout=function(){var t=this;$.each(this.panes,(function(e,i){var n=0;$.each(i.axes,(function(e,i){var r=n%2==0;i.onLeft=r?t.model.firstAxisOnLeft:!t.model.firstAxisOnLeft,i.isHidden?i.offset=-75:(i.offset=75*Math.floor(n/2),n+=1)}))}))},t.prototype.__getTitleHeight=function(){var t=0;return this.context.showTitle&&(t+=30),this.context.showSubtitle&&(t+=20),t},t.prototype.__getRangeSelectorHeight=function(){return this.model.showRangeSelector?35:0},t.prototype.__getNavigatorHeight=function(){return this.model.showNavigator?52:0},t.prototype.__getLegendHeight=function(){var t=0;if(this.context.showLegend){t=45;var e=this.style.highchartsStyles&&this.style.highchartsStyles.legend?this.style.highchartsStyles.legend:null;if(e){var i=!e.verticalAlign||"bottom"===e.verticalAlign;!e.floating&&i&&"left"!==e.align&&"right"!==e.align||(t=0)}}return t},t.prototype.determineHeight=function(){var t=53;t+=this.__getRangeSelectorHeight(),t+=this.__getTitleHeight(),t+=this.__getNavigatorHeight(),t+=this.__getLegendHeight();for(var e=0;e<this.panes.length;e++)t+=this.panes[e].height;return t};var e=function(t){return(t=Math.floor(100*t))+"%"};return t.prototype.__doVerticalLayout=function(){var t,i,n=0;for(t=0;t<this.panes.length;t++)n+=this.panes[t].height,t>0&&(n+=20);var r=20/n,o=0;for(t=0;t<this.panes.length;t++){var a=this.panes[t],s=a.height/n;for(t>0&&(o+=r),i=0;i<a.axes.length;i++){var l=a.axes[i];l.top=e(o),l.height=e(s)}o+=s}},t.prototype.doLayout=function(){this.__doHorizontalLayout(),this.__doVerticalLayout(),"auto"===this.size.height&&(this.size.height=this.determineHeight())},t}();t.RenderLayout=e}(Michelangelo||(Michelangelo={})),function(t){var e=function(){this.Step="P1D",this.TimeFrame="P6M",this.StartDate=void 0,this.EndDate=void 0,this.EntitlementToken="f9471dd374424d13bcc79e5ca933473e",this.IncludeMockTick=!0,this.FilterNullSlots=!0,this.FilterClosedPoints=!0,this.IncludeClosedSlots=!1,this.IncludeOfficialClose=!0,this.InjectOpen=!1,this.ShowPreMarket=!1,this.ShowAfterHours=!1,this.UseExtendedTimeFrame=!1,this.WantPriorClose=!1,this.IncludeCurrentQuotes=!1,this.ResetTodaysAfterHoursPercentChange=!1,this.Series=[]};t.ServerRequest=e;var i=function(){function t(){}return t.prototype.parseAndSetTicker=function(t,e){return!(!t&&!e)&&(e?(this.Key=e,this.Dialect="DjId"):"vid:"===t.substring(0,4)?(this.Key=t.substring(4),this.Dialect="VarastoId"):(this.Key=t,/.*\/.*\/.*\/.*/.test(t)?this.Dialect="Charting":this.Dialect="Mktw"),!0)},t}();t.ServerRequestSeries=i;var n=function(){this.Parameters=[]};t.ServerRequestIndicator=n;var r=function(){};t.ServerRequestIndicatorParameter=r;var o=function(){function t(){}return t.findSeriesBySeriesId=function(t,e){var i=null;return t&&t.Series&&$.each(t.Series,(function(t,n){n.SeriesId===e&&(i?i.push(n):i=[n])})),i},t.findSeriesByResponseId=function(t,e){var i=null;return t&&t.Series&&$.each(t.Series,(function(t,n){n.ResponseId!==e||(i=n)})),i},t.findAggregateBySeriesId=function(t,e){var i=null;return t&&t.Aggregates&&$.each(t.Aggregates,(function(t,n){n.SeriesId!==e||(i=n)})),i},t.findEventBySeriesId=function(t,e){var i=null;return t&&t.Events&&$.each(t.Events,(function(t,n){n.SeriesId!==e||(i=n)})),i},t.findEventByResponseId=function(t,e){var i=null;return null!==t&&t.Events&&$.each(t.Events,(function(t,n){n.ResponseId!==e||(i=n)})),i},t}();t.ServerResponseHelpers=o}(Michelangelo||(Michelangelo={})),function(t){var e=function(){function t(){}return t.instance=function(){return null===t._instance&&(t._instance={}),t._instance},t._instance=null,t}();t.EmptyStyle=e;var i=function(){function t(){}return t.instance=function(){return null===t._instance&&(t._instance=t.makeInstance()),t._instance},t.makeInstance=function(){var t={highchartsStyles:{plotOptions:{area:{threshold:null},line:{connectNulls:!1},scatter:{tooltip:{headerFormat:"{point.x:%d-%b-%Y}",pointFormat:"<br /><b>{series.name}: {point.y:.2f}</b>"}}},xAxis:{dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e %b",week:"%e %b",month:"%b %y",year:"%Y"}}},mikeStyle:{yAxisLabelsOutside:!1,addYAxisUnits:"all",shiftChartOnBlueGrassTick:!1,timestamp:{style:{fontSize:"10px",color:"#A0A0A0"}},indicatorLabels:{style:{fontSize:"10px",color:"#A0A0A0"}}},indicatorStyles:[],eventStyles:[],aggregateStyles:[],seriesStyles:[]};return t.mikeStyle.marketBands={enabled:!0,labelStyle:{rotation:-90,align:"center",verticalAlign:"top",textAlign:"right",style:{color:"#A0A0A0",fontSize:"6pt"}},color:"rgba(150, 150, 255, 0.1)",closed:{color:"#C0C0C0"},preMarket:{name:"Pre-Market"},afterMarket:{name:"After-Hours"}},t.mikeStyle.marketLines={left:{enabled:!1},right:{enabled:!1}},t.indicatorStyles.AroonIndicator={axisStyle:{endOnTick:!1,min:0,max:101},seriesStyles:[{color:"green"},{color:"red"}]},t.indicatorStyles.BollingerBands={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.CommodityChannelIndex={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:100,width:1,dashStyle:"Solid",color:"LightGray"},{value:0,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-100,width:1,dashStyle:"Solid",color:"LightGray"}]}},t.indicatorStyles.CompetitorComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},t.indicatorStyles.FundComparison={seriesStyles:[{lineWidth:0,fillColor:"rgba(80, 80, 80, 0.2)"}]},t.indicatorStyles.KeltnerChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.MovingAverageConvergenceDivergence={seriesStyles:[{color:"blue"},{color:"red"},{color:"black",type:"column"}]},t.indicatorStyles.NewsDensity={seriesStyles:[{type:"column"}]},t.indicatorStyles.ParabolicSAR={seriesStyles:[{lineWidth:0,marker:{enabled:!0,symbol:"circle"}}]},t.indicatorStyles.PriceChannels={seriesStyles:[{color:"blue",lineWidth:1},{color:"red",lineWidth:1,dashStyle:"Dot"},{color:"blue",lineWidth:1}]},t.indicatorStyles.PriceToEarningsRanges={seriesStyles:[{color:"black"}]},t.indicatorStyles.RelativeStrengthIndex={axisStyle:{min:0,max:100,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:70,width:1,dashStyle:"Solid",color:"LightGray"},{value:30,width:1,dashStyle:"Solid",color:"LightGray"}]}},t.indicatorStyles.RollingDividend={seriesStyles:[{connectNulls:!0}]},t.indicatorStyles.Volume={seriesStyles:[{color:"black"}]},t.indicatorStyles.VolumePlus={seriesStyles:[{color:"black",type:"column"},{color:"red",type:"column"},{color:"orange"}]},t.indicatorStyles.VortexIndicator={axisStyle:{gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:1.1,width:1,dashStyle:"Solid",color:"LightGray"},{value:1,width:1,dashStyle:"DashDot",color:"LightGray"},{value:.9,width:1,dashStyle:"Solid",color:"LightGray"}]},seriesStyles:[{color:"green"},{color:"red"}]},t.indicatorStyles.WilliamsPercentR={axisStyle:{min:-100,max:0,gridLineWidth:0,minorGridLineWidth:0,startOnTick:!1,endOnTick:!1,showLastLabel:!0,plotLines:[{value:-20,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Overbought"}},{value:-50,width:1,dashStyle:"DashDot",color:"LightGray"},{value:-80,width:1,dashStyle:"Solid",color:"LightGray",label:{text:"Oversold",y:12}}]}},t.aggregateStyles.OpenHighLowLines={open:{color:"Red"},high:{color:"Blue"},low:{color:"Blue"}},t.eventStyles.DividendEvents={upImageUrl:"../images/event-dividend-inc.svg",downImageUrl:"../images/event-dividend-dec.svg",unchangedImageUrl:"../images/event-dividend-nc.svg"},t.eventStyles.EarningsEvents={upImageUrl:"../images/event-earnings-inc.svg",downImageUrl:"../images/event-earnings-dec.svg",unchangedImageUrl:"../images/event-earnings-nc.svg"},t.eventStyles.SplitEvents={upImageUrl:"../images/event-split-inc.svg",downImageUrl:"../images/event-split-dec.svg",unchangedImageUrl:"../images/event-split-nc.svg"},t.eventStyles.InsiderTransactions={upImageUrl:"../images/green-bubble.png",downImageUrl:"../images/red-bubble.png",unchangedImageUrl:"../images/red-bubble.png"},t.seriesStyles.TickerSeries=function(t){return"column"===t?{dataGrouping:{approximation:"close"}}:null},t.seriesStyles.TextPhraseSeries={connectNulls:!0},t},t._instance=null,t}();t.DefaultStyle=i}(Michelangelo||(Michelangelo={})),function(t){var e=function(){function t(t,e){this.serverTzData=t,this.isIntraday=e}return t.prototype.isDst=function(t){return!!this.serverTzData&&(t<this.serverTzData.SwitchDateUtc?this.serverTzData.IsDstBeforeSwitch:this.serverTzData.IsDstAfterSwitch)},t.prototype.utcToLocal=function(t){return this.isIntraday&&this.serverTzData?t<this.serverTzData.SwitchDateUtc?t+6e4*this.serverTzData.UtcOffsetBeforeSwitch:t+6e4*this.serverTzData.UtcOffsetAfterSwitch:t},t.prototype.getAbbreviation=function(t){return this.serverTzData?this.isDst(t)?this.serverTzData.DaylightAbbreviation:this.serverTzData.StandardAbbreviation:null},t.prototype.addTimeZoneToTitle=function(t,e,i){var n=this.getAbbreviation(e),r=this.getAbbreviation(i);return n&&r?n===r?t+" ("+n+")":t+" ("+n+"/"+r+")":t},t}();t.TimeZoneData=e}(Michelangelo||(Michelangelo={})),function(t){"function"==typeof define&&define("vendor.asset.michelangelo/michelangelo",["vendor.asset.highstock/highstock","vendor.asset.jquery/jquery.ie.cors"],(function(){return t}))}(Michelangelo||(Michelangelo={})),function(t){(t.versions||(t.versions={})).core="2.0.1968"}(Michelangelo||(Michelangelo={})),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):t.MichelangeloYieldCurve=e(t.$)}(this,(function(t){var e={};return function(e){var i=function(t){throw t+" is abstract and must be overridden"},n=function(t){this.message=t,this.name=this.constructor.name},r=function(t,e){var i;if(e(t,(function(e){if(i)throw new n("must call the ctor function only once");for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);var o=function(){this.constructor=e};return o.prototype=t.prototype,e.prototype=new o,i=e,e})),!i)throw new n("must call the ctor function with the class constructor");return i},o=function(t){var e;if(t((function(t){if(e)throw new n("must call the ctor function only once");var i=function(){this.constructor=t};return i.prototype={},t.prototype=new i,e=t,t})),!e)throw new n("must call the ctor function with the class constructor");return e},a=o((function(t){var e=t((function(){}));e.isEnabled=function(){return-1!==document.cookie.indexOf("MikeyYC=enabled")},e.clearCookie=function(){document.cookie="MikeyYC=; expires=Thu, 01 Jan 1970 00:00:00 GMT"},e.setCookie=function(){document.cookie="MikeyYC=enabled; expires=Tue, 19 Jan 2038 03:14:07 GMT"}}));e.isDebugEnabled=function(){return a.isEnabled()},e.disableDebug=function(){return a.clearCookie(),a.isEnabled()},e.enableDebug=function(){return a.setCookie(),a.isEnabled()};var s=o((function(t){var e=t((function(){})),i=["JAN","FEB","MAR","APR","MAY","JUN","JUL","AUG","SEP","OCT","NOV","DEC"];e.formatDate=function(t){t?"number"==typeof t&&(t=new Date(t)):t=new Date;var e=t.getUTCDate();e<10&&(e="0"+e);var n=t.getUTCMonth(),r=t.getUTCFullYear();return[e,i[n],r].join("-")},e.formatYieldDate=function(t,e){var i;if(e||(e="%m/%d/%Y %l:%M %p"),!t.historicalDate&&t.tzData){var n=t.tzData.utcToLocal(t.yieldDate);i=Highcharts.dateFormat(e,n);var r=t.tzData.getAbbreviation(n);r&&(i+=" "+r)}else i=Highcharts.dateFormat("%m/%d/%Y",t.yieldDate);return i}})),l=o((function(t){var i,n=t((function(){}));i="undefined"!=typeof console&&"function"==typeof console.log?console:{log:function(){},warn:function(){},error:function(){}},n.log=function(){i.log.apply(i,arguments)},n.warn=function(){i.warn.apply(i,arguments)},n.error=function(){i.error.apply(i,arguments)},n.debug=function(){e.isDebugEnabled()&&i.log.apply(i,arguments)}}));e.Logger=l;var h=r(Error,(function(t,e){e((function(e,i,n){t.call(this,i),this.name=e,this.detail=n}))}));e.Rejection=h;var c=o((function(t){var e=t((function(t){this.__serverTzData=t}));e.prototype.isDst=function(t){return!!this.__serverTzData&&(t<this.__serverTzData.SwitchDateUtc?this.__serverTzData.IsDstBeforeSwitch:this.__serverTzData.IsDstAfterSwitch)},e.prototype.utcToLocal=function(t){return this.__serverTzData?t<this.__serverTzData.SwitchDateUtc?t+6e4*this.__serverTzData.UtcOffsetBeforeSwitch:t+6e4*this.__serverTzData.UtcOffsetAfterSwitch:t},e.prototype.getAbbreviation=function(t){return this.__serverTzData?this.isDst(t)?this.__serverTzData.DaylightAbbreviation:this.__serverTzData.StandardAbbreviation:null}})),u=o((function(t){var e=null,n=function(){return e||(e=new d)},r=t((function(){}));r.prototype._fire=function(t,i,r){this!==e&&n()._fire(t,i,r)},r.prototype.createNotifier=function(){i("createNotifier")},r.prototype.on=function(){i("on")},r.on=function(t,e){return n().on(t,e)}}));e.EventManager=u;var p=o((function(t){var e=t((function(t,e){this.__notify=t,this.__source=e}));e.prototype.notify=function(t,e,i){this.__notify(t,e,this.__source||i)};var i=new e((function(){}));e.Null=function(){return i}}));e.Notifier=p;var d=r(u,(function(e,i){var n=1,r=i((function(t){e.call(this),this.__callbacks={},this.__wrapper=t||function(t){t()}}));r.prototype.on=function(t,e){var i=this;i.__callbacks[t]||(i.__callbacks[t]={});var r=n++;return this.__callbacks[t][r]=e,function(){var e=i.__callbacks[t];e&&delete e[r]}},r.prototype.createNotifier=function(t){var e=this;return new p((function(t,i,n){e._fire(t,i,n)}),t)},r.prototype._fire=function(i,n,r){var o=this;this.__callbacks[i]&&t.each(this.__callbacks[i],(function(t,e){o.__wrapper((function(){e(n,r)}))})),e.prototype._fire.call(this,i,n,r)}}));e.DirectEventManager=d;var f=o((function(e){var i=null,n=e((function(e){if("string"!==t.type(e))throw"token must be a string";this.__token=e}));n.prototype.token=function(){return this.__token},n.prototype.ckey=function(){return this.token()?this.token().substr(0,10):""},n.ambient=function(e){return 0===arguments.length?i:e?"string"===t.type(e)?(i=new f(e),l.debug("Michelangelo ambient entitlement set to '"+i.token()+"'"),n):e instanceof n?(i=e,l.debug("Michelangelo ambient entitlement set to '"+i.token()+"'"),n):(l.error("Michelangelo ambient entitlement was not changed to '"+e+"'. Value must be a token string or an Entitlement instance"),n):(i=n.__defaultEntitlement(),n)},n.select=function(e){return e instanceof n?e:"string"===t.type(e)?new f(e):n.ambient()},n.__defaultEntitlement=function(){return new n("")},i=n.__defaultEntitlement()}));e.Entitlement=f;var g=o((function(e){var i=e((function(t){this.__key=t.key||"Custom",this.__name=t.name||"Custom",this.__apiRootUrl=t.apiRootUrl,this.__canUseCustomHeaders=t.canUseCustomHeaders}));i.prototype.name=function(){return this.__name},i.prototype.url=function(){return this.__apiRootUrl+"/sovereigndebt/yieldcurve"},i.prototype.apiRootUrl=function(){return this.__apiRootUrl},i.prototype.key=function(){return this.__key},i.prototype.getCountriesUrl=function(){return this.__apiRootUrl+"/sovereigndebt/countries"},i.prototype.canUseCustomHeaders=function(){return this.__canUseCustomHeaders&&!window.XDomainRequest};var n,r=i,o=[new r({key:"MuxPublic",name:"Mux (public, production)",apiRootUrl:"http://api.wsj.net/api/michelangelo",canUseCustomHeaders:!0}),new r({key:"MuxStaging",name:"Mux (public, staging)",apiRootUrl:"http://api-staging.wsj.net/api/michelangelo",canUseCustomHeaders:!0}),new r({key:"MuxLocal",name:"Mux (local)",apiRootUrl:"http://local-proxy.marketwatch.com/DowJones.Mux.WebHost/public/api/michelangelo",canUseCustomHeaders:!0}),new r({key:"MuxPublicSecure",name:"Mux (public, production, secure)",apiRootUrl:"https://api-secure.wsj.net/api/michelangelo",canUseCustomHeaders:!0}),new r({key:"MuxStagingSecure",name:"Mux (public, staging, secure)",apiRootUrl:"https://api-staging-secure.wsj.net/api/michelangelo",canUseCustomHeaders:!0}),new r({key:"Local",name:"Michelangelo (local)",apiRootUrl:(n="http://"+t(location).attr("host"),""===t(location).attr("port")&&(n+="/Michelangelo.Service.WebHost"),n+"/api"),canUseCustomHeaders:!0})],a={};t.each(o,(function(t,e){a[e.key()]=e})),i.getWellKnownEnvironments=function(){return t.extend([],o)},i.getWellKnownEnvironment=function(t){return a[t]};var s=function(){return i.getWellKnownEnvironment("MuxPublic")},h=s();i.ambient=function(e){if(0===arguments.length)return h;if(!e)return h=s(),i;if("string"===t.type(e)){var n=i.getWellKnownEnvironment(arguments[0]);if(n)return h=n,l.debug("Michelangelo ambient environment set to '"+e+"': "+n.name()),i}return e instanceof i?(h=e,l.debug("Michelangelo ambient environment set directly: "+e.name()),i):(l.error("Michelangelo ambient environment was not changed to '"+e+"'. Valid values are: "+t.map(o,(function(t){return"\r\n  "+t.key()+": "+t.name()})).join()+"\r\nor a custom environment definition."),i)},i.select=function(t){if(0===arguments.length||!t)return i.ambient();if(t instanceof i)return t;var e=i.getWellKnownEnvironment(t);return e||(l.warn("Could not select an environment for input '"+t+"'; returning ambient environment."),i.ambient())}}));e.Environment=g;var m=o((function(e){e((function(){})).send=function(e,i,n,r,o){try{o=Math.max(0,+o||0);var a=0;i=t.extend(!0,{data:{},params:{},headers:{}},i),n=g.select(n),"function"==typeof e?e=e(n):"function"==typeof n[e]&&(e=n[e].call(n));var s=f.select(r).token();i.params.ckey=s.substr(0,10),n.canUseCustomHeaders()?i.headers["Dylan2010.EntitlementToken"]=s:i.params.entitlementToken=s,"GET"===i.type&&(i.params=t.extend(i.data,i.params),delete i.data);var l=t.map(i.params,(function(t,e){return e+"="+encodeURIComponent(t)})).join("&");l&&(e=e+(-1===e.indexOf("?")?"?":"&")+l);var c=function(n,r,s){try{if(a++<=o)return t.ajax(e,i).fail((function(t,e,i){c(t,e,i)}));var l="";if(n.responseText)try{var u=JSON.parse(n.responseText);u.Message&&(l=u.Message,u.ExceptionMessage&&(l+="  (with exception: "+u.ExceptionMessage+")"))}catch(t){}return l||"string"!==t.type(s)||(l=s,s=null),o&&(l+=" (after "+(o+1)+" attempts)"),t.Deferred().reject(new h("AJAX error",l,s))}catch(e){return t.Deferred().reject(new h("AJAX exception",e.message,e))}};return c(null,"","")}catch(e){return t.Deferred().reject(new h("AJAX exception",e.message,e))}}})),y=o((function(t){var e=t((function(){this.__data={}})),i=function(t,e){return t+"."+e};e.prototype.fetch=function(t,e){var n=i(t,e),r=this.__data[n];return r||null},e.prototype.store=function(t,e,n){var r=i(t,e);this.__data[r]=n},e.prototype.clear=function(){this.__data={}}})),v=o((function(i){var n,r=i((function(t,e){this.__environment=t,this.__entitlement=e,this.__cache=new y}));r.prototype.fetch=function(i,n){var r=this;if(!i.countries||0===i.countries.length)return e.Logger.log("At least one country must be specified."),t.Deferred().resolve();if(!i.historicalDates||0===i.historicalDates.length)return e.Logger.log("At least one historical date must be specified."),t.Deferred().resolve();var o=function(t){var e=[];return t.countries.forEach((function(i){t.historicalDates.forEach((function(t){e.push({country:i.countryCode,date:t.date,serverData:null})}))})),e}(i);o.forEach((function(t){t.serverData=r.__cache.fetch(t.country,t.date)}));var a=[];o.forEach((function(t){t.serverData||a.push(t)}));var s=t.Deferred();if(0===a.length)s.resolve(o);else{var l=this.buildRequest(a);this.sendRequest(l,s,n,o)}return s},r.prototype.findKey=function(t,e,i){var n=null;return t.forEach((function(t){t.date===i&&t.country===e&&(n=t)})),n},r.prototype.stitchResponse=function(t,e){var i=this;e.Countries.forEach((function(e){var n;n=e.HistoricalDate?s.formatDate(e.HistoricalDate):"NOW";var r=e.CountryCode;i.__cache.store(r,n,e);var o=i.findKey(t,r,n);o&&(o.serverData=e)}))},r.prototype.buildRequest=function(t){var e=[],i=[];return t.forEach((function(t){-1===e.indexOf(t.date)&&e.push(t.date),-1===i.indexOf(t.country)&&i.push(t.country)})),{countryCodes:i.join(","),historicalDates:e.join(",")}},r.prototype.sendRequest=function(t,e,i,n){try{var r=this,o=g.select(this.__environment),a={cache:!0,params:t,headers:{},type:"GET"};i.notify("fetch.start"),m.send("url",a,o,null,1).then((function(t){r.stitchResponse.call(r,n,t),i.notify("response.received",n),i.notify("fetch.finish"),e.resolve(n)}),(function(t){i.notify("error",t,r),i.notify("fetch.error"),e.reject(new h("Could not fetch data",t.message,t))})).always((function(){i.notify("dataFetch.complete",null,r)}))}catch(t){e.reject(new h("Data fetch exception",t.message,t))}},r.prototype.cache=function(){return this.__cache},r.ambient=function(t){return arguments.length?(t?t instanceof r?(n=t,l.debug("MichelangeloYieldCurve ambient fetcher set directly.")):l.error("MichelangeloYieldCurve ambient fetcher was not changed. Value must be a Fetcher."):n=null,r):n||(n=new v)},r.select=function(t,e,i){return t instanceof r?t:e||i?new v(e,i):r.ambient()}}));e.clearCache=function(){v.ambient().cache().clear()};var _=o((function(i){i((function(){})).fetch=function(){var i=t.Deferred(),n=e.Environment.ambient(),r=function(t,e){return t.name<e.name?-1:t.name>e.name?1:0};return m.send("getCountriesUrl",{cache:!0,headers:{},type:"GET"},n,null,1).then((function(t){var e=t.Countries.map((function(t){return{countryCode:t.CountryCode.toUpperCase(),name:t.Name}}));e=e.sort(r),i.resolve(e)}),(function(t){var e={statusCode:t.status,statusText:t.statusText,responseHeaders:t.getAllResponseHeaders(),responseText:t.responseText};i.reject(e)})),i}}));e.Countries=_;var x=o((function(t){var e=t((function(){this.__data={}})),i=function(t,e){return t+"##"+e};e.prototype.addPoint=function(t,e,n){var r=i(t,e);this.__data[r]=n},e.prototype.getInfo=function(t,e){var n=i(t,e);return this.__data[n]}})),b=o((function(t){var e,i=t((function(){this.__repo=null,e=this})),n=function(t,e){t.push('<span class="mikeyc-tip-subtitle">'+e.date+"</span>"),e.points.forEach((function(e){!function(t,e){t.push('<span class="mikeyc-tip-name" style="color: '+e.point.series.color+'">'),t.push(e.info.countryCode+" - "+e.info.displayName),t.push("</span>"),t.push('<span class="mikeyc-tip-data"><span class="mikeyc-tip-label">Yield</span>'+Highcharts.numberFormat(e.point.y,3)+"%</span>"),t.push('<span class="mikeyc-tip-data"><span class="mikeyc-tip-label">Yield Date</span>'+s.formatYieldDate(e.info,"%e-%b-%Y %H:%M")+"</span>"),t.push('<span class="mikeyc-tip-data"><span class="mikeyc-tip-label">Ticker</span>'+e.info.ticker+"</span>")}(t,e)}))};i.prototype.formatter=function(){var t=[];return function(t,e){var i;i=e<12?e+" month":e/12+" year",t.push('<div class="mikeyc-tip">'),t.push('<span class="mikeyc-tip-title">Tenor: '+i+"</span>")}(t,this.x),function(t){var i=[];return t.forEach((function(t){var n=t.series.userOptions.id,r=t.point.id,o=e.__repo.getInfo(n,r),a=o.historicalDate,s=function(t,e){for(var i=0;i<t.length;i++)if(t[i].key===e)return t[i];return null}(i,a);s||(s={key:a,date:Highcharts.dateFormat("%e-%b-%Y",a),points:[]},i.push(s)),s.points.push({point:t,info:o,value:t.y})})),i.sort((function(t,e){return t.key<e.key?-1:t.key>e.key?1:0}))}(this.points).forEach((function(e){n(t,e)})),t.push("</div>"),t.join("")},i.prototype.tooltipRepo=function(t){this.__repo=t}})),k=o((function(t){var e,i=t((function(){this.__repo=null,e=this}));i.prototype.formatter=function(){var t=[];return function(t){var i=[];return t.forEach((function(t){var n=t.series.userOptions.id,r=t.point.id,o=e.__repo.getInfo(n,r),a=o.ticker,l=function(t,e){for(var i=0;i<t.length;i++)if(t[i].key===e)return t[i];return null}(i,a);l||(l={key:a,ticker:a,name:o.displayName,points:[]},i.push(l));var h=s.formatYieldDate(o);l.points.push({point:t,info:o,value:Highcharts.numberFormat(t.y,3),date:h})})),i.forEach((function(t){t.points.sort((function(t,e){return t.info.yieldDate<e.info.yieldDate?-1:t.info.yieldDate>e.info.yieldDate?1:0}))})),i.forEach((function(t){t.points.sort((function(t,e){return t.info.yieldDate<e.info.yieldDate?-1:t.info.yieldDate>e.info.yieldDate?1:0}))})),i.sort((function(t,e){return t.key<e.key?-1:t.key>e.key?1:0}))}(this.points).forEach((function(e){!function(t,e){t.push('<span class="mikeyc-tip-title">'+e.name+"</span>"),t.push('<span class="mikeyc-tip-subtitle">'+e.ticker+"</span>"),e.points.forEach((function(e){!function(t,e){t.push('<span class="mikeyc-tip-data mikeyc-tip-date" style="color: '+e.point.color+'">'+e.date+"</span>"),t.push('<span class="mikeyc-tip-data" style="color: '+e.point.color+'">'+e.value+"%</span>")}(t,e)}))}(t,e)})),t.join("")},i.prototype.tooltipRepo=function(t){this.__repo=t}}));e.DebugToolTipFormatter=b,e.ToolTipFormatter=k,e.ambience=function(e,i){if(1===arguments.length&&t.isPlainObject(e)){var n=e;e=n.environment,i=n.entitlement}e&&g.ambient(e),i&&f.ambient(i)};var w=o((function(t){var e=t((function(){this.__hasBeenRendered=!1,this.__renderedSeries=[]}));e.prototype.hasBeenRendered=function(t){return arguments.length?(this.__hasBeenRendered=t,this.__hasBeenRendered):this.__hasBeenRendered},e.prototype.update=function(t){this.hasBeenRendered(!0),this.__renderedSeries=t};var i=function(t,e,i){t.push({id:e.id,countryCode:e.countryCode,historicalDate:e.historicalDate,action:i})};e.prototype.getDeltas=function(t){var e,n,r,o,a=[];for(e=0;e<this.__renderedSeries.length;e++){for(r=!1,o=this.__renderedSeries[e].id,n=0;n<t.length&&!r;n++)t[n].id===o&&(r=!0);r||i(a,this.__renderedSeries[e],"remove")}for(e=0;e<t.length;e++){for(r=!1,o=t[e].id,n=0;n<this.__renderedSeries.length&&!r;n++)this.__renderedSeries[n].id===o&&(r=!0);r||i(a,t[e],"add")}return a}})),S=o((function(t){var i=t((function(t,i,n,r,o,a,s){this.__host=t,this.__state=i,this.__style=n,this.__def=r,this.__nameBuilder=o,this.__immediate=!!s,this.__notifier=a||e.Notifier.Null()}));i.prototype.host=function(){return this.__host},i.prototype.state=function(){return this.__state},i.prototype.style=function(){return this.__style},i.prototype.notify=function(t,e){this.__notifier.notify(t,e)},i.prototype.nameBuilder=function(){return this.__nameBuilder},i.prototype.immediate=function(){return this.__immediate},i.prototype.findCountryStyle=function(t){var e=this.__def.countries.filter((function(e){return e.countryCode===t}));if(e.length>0){var i=e[0];if("object"==typeof i.style)return i.style}return{}},i.prototype.findDateStyle=function(t){"string"!=typeof t&&(t=s.formatDate(t));var e=this.__def.historicalDates.filter((function(e){return e.date.toUpperCase()===t}));if(e.length>0){var i=e[0];if("object"==typeof i.style)return i.style}return{}}})),T=r(o((function(t){var e=t((function(){}));e.prototype.measure=function(){i("measure")},e.prototype.render=function(){i("render")},e.prototype.unrender=function(){i("unrender")}})),(function(i,n){var r=n((function(){i.call(this),this.__chart=null,this.__tooltipRepo=null})),o=function(t){return t?t.replace(/[^-]*-[^-]*-/,""):"n/a"},a=function(e,i,n){var r={code:e.CountryCode,name:e.Name,date:e.HistoricalDate},a={name:n.nameBuilder()(r),data:[]};if(t.extend(!0,a,n.findCountryStyle(e.CountryCode)),t.extend(!0,a,n.findDateStyle(e.HistoricalDate)),a.id=i,e.Points)for(var s=0;s<e.Points.length;s++){var l=e.Points[s].OfficialId,h=e.Points[s].Months;null!==e.Points[s].YieldRate&&a.data.push({x:h,y:e.Points[s].YieldRate,name:e.Points[s].DisplayName,id:l});var u={countryCode:e.CountryCode,displayName:e.Points[s].DisplayName,historicalDate:e.HistoricalDate,yieldDate:e.Points[s].YieldDate,ticker:o(l)};e.TimeZoneData&&(u.tzData=new c(e.TimeZoneData)),this.__tooltipRepo.addPoint(i,l,u)}return a},s=function(t,e,i,n){for(var r=0;r<t.length;r++){var o=t[r].serverData,s=t[r].country+"-"+t[r].date,l=a(o,s,n);e.push(l),i.push({id:s,countryCode:o.CountryCode,historicalDate:o.HistoricalDate})}},l=function(i,n){var r=this;this.__tooltipRepo=new x;var o=[],a=[];s(n,o,a,i);var l={chart:{renderTo:i.host()},series:o},h={highchartsStyles:{credits:{enabled:!1},exporting:{enabled:!1},subtitle:{text:null},title:{text:null},xAxis:{labels:{enabled:!1},tickLength:0,type:"logarithmic"},yAxis:{opposite:!0,labels:{enabled:!0,formatter:function(){return Highcharts.numberFormat(this.value,2)+"%"}},title:{text:null}}},mikeStyle:{plotLines:{style:{color:"#C0C0C0",width:1,label:{verticalAlign:"bottom",align:"center",y:12,rotation:0,line:{marker:{symbol:"circle"}},style:{color:"#333",fontSize:"9px"}}},positions:[{title:"1wk",months:.25},{title:"1m",months:1},{title:"3m",months:3},{title:"6m",months:6},{title:"1y",months:12},{title:"2y",months:24},{title:"3y",months:36},{title:"4y",months:48},{title:"5y",months:60},{title:"10y",months:120},{title:"15y",months:180},{title:"20y",months:240},{title:"30y",months:360},{title:"40y",months:480},{title:"50y",months:600}]}}},c=i.style();if(t.extend(!0,h,c),c&&c.mikeStyle&&c.mikeStyle.plotLines&&c.mikeStyle.plotLines.positions&&(h.mikeStyle.plotLines.positions=c.mikeStyle.plotLines.positions),i.immediate()){t.extend(!0,h,{highchartsStyles:{plotOptions:{series:{animation:!1}}}})}!function(e,i){var n=i.highchartsStyles.xAxis;if(!n.plotLines){n.plotLines=[];var r=i.mikeStyle;if(r&&r.plotLines&&r.plotLines.positions)for(var o=r.plotLines.style,a=0;a<r.plotLines.positions.length;a++){var s=r.plotLines.positions[a],l={value:s.months,label:{text:s.title}};o&&t.extend(!0,l,o),n.plotLines.push(l)}}}(0,h),t.extend(!0,l,h.highchartsStyles),this.__tooltipRepo&&i.notify("tooltip.info",this.__tooltipRepo),new Highcharts.Chart(l,(function(t){try{r.__chart=t,i.state().update(a)}catch(t){e.Logger.log("Unhandled error in Michelangelo HighStock render callback:"),e.Logger.log(t)}}))},h=function(t,e){for(var i=0;i<t.length;i++)if(t[i].id===e)return t[i];return null},u=function(t){for(var e=this.__chart.series,i=0;i<e.length;i++)if(e[i].userOptions.id===t)return e[i];return null};r.prototype.render=function(t,e){t.state().hasBeenRendered()?function(t,e){var i=[],n=[];s(e,i,n,t);for(var r=t.state().getDeltas(n),o=!1,a=0;a<r.length;a++){var l,c=r[a];"add"===c.action?(l=h(i,c.id))&&(this.__chart.addSeries(l,!1),o=!0):"remove"===c.action&&(l=u(c.id))&&(l.remove(!1),o=!0)}o&&(this.__tooltipRepo&&t.notify("tooltip.info",this.__tooltipRepo),this.__chart.redraw()),t.state().update(n)}(t,e):l(t,e)},r.prototype.unrender=function(){if(this.__chart){var t=this.__chart;this.__chart=null,t.destroy()}};r.prototype.measure=function(t,e,i){var n={width:e.width,height:e.height};return"fill"===n.height?n.height=i.height:"auto"===n.height?n.height=function(t){var e=53;return e+=function(t){var e=0,i=!1,n=!1;return t&&t.highchartsStyles&&(t.highchartsStyles.title&&t.highchartsStyles.title.text&&(i=!0),t.highchartsStyles.subtitle&&t.highchartsStyles.subtitle.text&&(n=!0)),i&&(e+=30),n&&(e+=20),e}(t),e+=function(t){var e=0,i=null;if(t&&t.highchartsStyles&&(i=t.highchartsStyles.legend),(i&&i.enabled||!i)&&(e=45,i)){var n=!i.verticalAlign||"bottom"===i.verticalAlign;!i.floating&&n&&"left"!==i.align&&"right"!==i.align||(e=0)}return e}(t),e+=200}(t):isNaN(n.height)&&(n.height=i.height),"fill"===n.width?n.width=i.width:"auto"===n.width?n.width=Math.floor(4*n.height/3):isNaN(n.width)&&(n.width=i.width),n}})),P=o((function(i){var n=o((function(i){var n=i((function(e,i,n){var r=this;this.__hostElement=e,this.__config=t.extend(!0,{entitlement:null,environment:null,dataFetcher:null,eventWrapper:null,promiseWrapper:null},i||{}),this.__def=null,this.__style=null,this.__decorator=n,this.__renderState=new w,this.__renderSize={},this.__measuredSize={},this.__hostWatchId=null,this.__eventManager=new d(this.__config.eventWrapper),this.__notifier=this.__eventManager.createNotifier(n),this.__dataFetcher=v.select(this.__config.dataFetcher,this.__config.environment,this.__config.entitlement),this.__promiseWrapper=this.__config.promiseWrapper||function(t){return t},this.__renderer=new T,this.size({width:"fill",height:"auto"}),this.__tooltipFormatter=null,this.__nameBuilder=function(t){var e=t.date?Highcharts.dateFormat("%m/%e/%y",t.date):"Current";return t.name+", "+e},this.__eventManager.on("tooltip.info",(function(t){r.__tooltipFormatter&&r.__tooltipFormatter.tooltipRepo&&r.__tooltipFormatter.tooltipRepo(t)}))})),r=function(t){var i,n={countries:[],historicalDates:[]};if(!t)return n;if(t.countries&&t.countries.length>0)for(i=0;i<t.countries.length;i++){var r=t.countries[i];if(r){if("string"==typeof r)r={countryCode:r.toUpperCase(),style:{}};else{if("object"!=typeof r){e.Logger.log("country is not valid, type="+typeof r);continue}if("string"!=typeof r.countryCode)continue;r={countryCode:r.countryCode.toUpperCase(),style:r.style||{}}}n.countries.push(r)}}if(t.historicalDates&&t.historicalDates.length>0)for(i=0;i<t.historicalDates.length;i++){var o=t.historicalDates[i];if(o){if("string"==typeof o)o={date:o.toUpperCase(),style:{}};else if("number"==typeof o)o={date:s.formatDate(o),style:{}};else{if("object"!=typeof o){e.Logger.log("date is not valid, type="+typeof o);continue}if("string"==typeof o.date)o={date:o.date.toUpperCase(),style:o.style||{}};else{if("number"!=typeof o.date)continue;o={date:s.formatDate(o.date),style:o.style||{}}}}n.historicalDates.push(o)}}else n.historicalDates.push({date:s.formatDate(),style:{}});return n};n.prototype.def=function(t){return 0===arguments.length?this.__def:(this.__def!==t&&(this.__def=r(t)),this)};var o=function(e,i){if(t.isNumeric(e)){if(e>0)return e}else switch(e){case"host":return l.warn("'host' size is deprecated; use 'fill' instead."),"fill";case"fill":case"auto":return e}return i};n.prototype.size=function(e){var i=this.__renderSize;if(0===arguments.length)return t.extend({},i);if(!t.isPlainObject(e))return l.error("Could not set presentation render size from '"+e+"'"),this;var n={width:o(e.width,i.width),height:o(e.height,i.height)};return n.width===i.width&&n.height===i.height||(this.__renderSize=n,this.__renderedParentSize=null,this.__manageHostWatch()),this},n.prototype.style=function(t){return arguments.length?(this.__style=t,this):this.__style},n.prototype.tooltipFormatter=function(t){return arguments.length?(this.__tooltipFormatter=t,this):this.__tooltipFormatter},n.prototype.nameBuilder=function(t){return arguments.length?(this.__nameBuilder=t,this):this.__nameBuilder},n.prototype.remove=function(){null!==this.__hostWatchId&&clearInterval(this.__hostWatchId),this.__renderer.unrender(this.__notifier),t(this.__hostElement).html(""),delete this.__hostElement.__michelangeloPresentationManager__,this.__fire("presentationManager.removed")},n.prototype.render=function(e){if(!this.__def)return this.__promiseWrapper(t.Deferred().reject());try{var i=this,n=i.__style;if(this.__tooltipFormatter&&this.__tooltipFormatter.formatter){var r={highchartsStyles:{tooltip:{useHTML:!0,shared:!0,formatter:this.__tooltipFormatter.formatter}}};t.extend(!0,n,r)}var o=this.__dataFetcher.fetch(i.__def,i.__notifier).then((function(r){var o=i.__renderer.measure(n,i.__renderSize,i.__parentSize());i.__measuredSize={width:o.width,height:o.height},t(i.__hostElement).css(o),i.__renderedParentSize=i.__parentSize();var a=new S(i.__hostElement,i.__renderState,n,i.__def,i.__nameBuilder,i.__notifier,e);return i.__renderer.render(a,r)})).then((function(){return i.__decorator}),(function(e){return t.Deferred().reject(e,i.__decorator)}));return this.__promiseWrapper(o)}catch(e){return this.__fire("presentation.error",e),l.log("presentation error: "+e),this.__promiseWrapper(t.Deferred().reject(e))}},n.prototype.__fire=function(t,e){this.__notifier.notify(t,e,this)},n.prototype.on=function(t,e){return this.__eventManager.on(t,e)},n.prototype.__manageHostWatch=function(){var t=this,e=this.__renderSize,i="fill"===e.width||"fill"===e.height;i||null===this.__hostWatchId?i&&null===this.__hostWatchId&&(this.__hostWatchId=setInterval((function(){var e=t.__parentSize();!t.__renderedParentSize||e.width===t.__renderedParentSize.width&&e.height===t.__renderedParentSize.height||(t.__renderState.hasBeenRendered(!1),t.render(!0))}),100)):(clearInterval(this.__hostWatchId),this.__hostWatchId=null)},n.prototype.__parentSize=function(){var e=t(this.__hostElement.parentNode);return{width:e.width(),height:e.height()}}})),r=i((function(t,e){var i=new n(t,e,this);this.__impl=function(){return i},i.__fire("presentationManager.created")}));r.prototype.render=function(){var t=this.__impl();return t.render.apply(t,arguments)},r.prototype.def=function(){var t=this.__impl();return t.def.apply(t,arguments)},r.prototype.nameBuilder=function(){var t=this.__impl();return t.nameBuilder.apply(t,arguments)},r.prototype.size=function(){var t=this.__impl();return t.size.apply(t,arguments)},r.prototype.style=function(){var t=this.__impl();return t.style.apply(t,arguments)},r.prototype.tooltipFormatter=function(){var t=this.__impl();return t.tooltipFormatter.apply(t,arguments)},r.prototype.remove=function(){this.__impl().remove()},r.prototype.on=function(t,e){return this.__impl().on(t,e)},r.getFrom=function(t){var e=t.__michelangeloPresentationManager__;return e instanceof r?e:null},r.createIn=function(t,e){r.removeFrom(t);var i=new P(t,e);return t.__michelangeloPresentationManager__=i,i},r.removeFrom=function(t){var e=r.getFrom(t);e&&e.remove()}}));e.PresentationManager=P,t.fn.extend({yieldCurve:function(t){return this.length?t?P.createIn(this[0],t):P.getFrom(this[0]):null}})}(e),e})),function(t){(t.versions||(t.versions={}))["yield-curve"]="2.0.1969"}(Michelangelo||(Michelangelo={})),function(t,e){function i(t,e,i){this.init.call(this,t,e,i)}var n=t.arrayMin,r=t.arrayMax,o=t.each,a=t.extend,s=t.merge,l=t.map,h=t.pick,c=t.pInt,u=t.getOptions().plotOptions,p=t.seriesTypes,d=t.extendClass,f=t.splat,g=t.wrap,m=t.Axis,y=t.Tick,v=t.Point,_=t.Pointer,x=t.CenteredSeriesMixin,b=t.TrackerMixin,k=t.Series,w=Math,S=w.round,T=w.floor,P=w.max,A=t.Color,D=function(){};a(i.prototype,{init:function(t,e,i){var n=this,r=n.defaultOptions;n.chart=e,n.options=t=s(r,e.angular?{background:{}}:void 0,t),(t=t.background)&&o([].concat(f(t)).reverse(),(function(t){var e=t.backgroundColor,r=i.userOptions;t=s(n.defaultBackgroundOptions,t);e&&(t.backgroundColor=e),t.color=t.backgroundColor,i.options.plotBands.unshift(t),r.plotBands=r.plotBands||[],r.plotBands.unshift(t)}))},defaultOptions:{center:["50%","50%"],size:"85%",startAngle:0},defaultBackgroundOptions:{shape:"circle",borderWidth:1,borderColor:"silver",backgroundColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,"#FFF"],[1,"#DDD"]]},from:-Number.MAX_VALUE,innerRadius:0,to:Number.MAX_VALUE,outerRadius:"105%"}});var C,M=m.prototype,L=(y=y.prototype,{getOffset:D,redraw:function(){this.isDirty=!1},render:function(){this.isDirty=!1},setScale:D,setCategories:D,setTitle:D}),I={isRadial:!0,defaultRadialGaugeOptions:{labels:{align:"center",x:0,y:null},minorGridLineWidth:0,minorTickInterval:"auto",minorTickLength:10,minorTickPosition:"inside",minorTickWidth:1,tickLength:10,tickPosition:"inside",tickWidth:2,title:{rotation:0},zIndex:2},defaultRadialXOptions:{gridLineWidth:1,labels:{align:null,distance:15,x:0,y:null},maxPadding:0,minPadding:0,showLastLabel:!1,tickLength:0},defaultRadialYOptions:{gridLineInterpolation:"circle",labels:{align:"right",x:-3,y:-2},showLastLabel:!1,title:{x:4,text:null,rotation:90}},setOptions:function(t){(t=this.options=s(this.defaultOptions,this.defaultRadialOptions,t)).plotBands||(t.plotBands=[])},getOffset:function(){M.getOffset.call(this),this.chart.axisOffset[this.side]=0,this.center=this.pane.center=x.getCenter.call(this.pane)},getLinePath:function(t,e){var i=this.center;e=h(e,i[2]/2-this.offset);return this.chart.renderer.symbols.arc(this.left+i[0],this.top+i[1],e,e,{start:this.startAngleRad,end:this.endAngleRad,open:!0,innerR:0})},setAxisTranslation:function(){M.setAxisTranslation.call(this),this.center&&(this.transA=this.isCircular?(this.endAngleRad-this.startAngleRad)/(this.max-this.min||1):this.center[2]/2/(this.max-this.min||1),this.minPixelPadding=this.isXAxis?this.transA*this.minPointOffset:0)},beforeSetTickPositions:function(){this.autoConnect&&(this.max+=(this.categories?1:this.pointRange)||this.closestPointRange||0)},setAxisSize:function(){M.setAxisSize.call(this),this.isRadial&&(this.center=this.pane.center=t.CenteredSeriesMixin.getCenter.call(this.pane),this.isCircular&&(this.sector=this.endAngleRad-this.startAngleRad),this.len=this.width=this.height=this.center[2]*h(this.sector,1)/2)},getPosition:function(t,e){return this.postTranslate(this.isCircular?this.translate(t):0,h(this.isCircular?e:this.translate(t),this.center[2]/2)-this.offset)},postTranslate:function(t,e){var i=this.chart,n=this.center;t=this.startAngleRad+t;return{x:i.plotLeft+n[0]+Math.cos(t)*e,y:i.plotTop+n[1]+Math.sin(t)*e}},getPlotBandPath:function(t,e,i){var n,r=this.center,o=this.startAngleRad,a=r[2]/2,s=[h(i.outerRadius,"100%"),i.innerRadius,h(i.thickness,10)],u=/%$/,p=this.isCircular;return"polygon"===this.options.gridLineInterpolation?r=this.getPlotLinePath(t).concat(this.getPlotLinePath(e,!0)):(t=Math.max(t,this.min),e=Math.min(e,this.max),p||(s[0]=this.translate(t),s[1]=this.translate(e)),s=l(s,(function(t){return u.test(t)&&(t=c(t,10)*a/100),t})),"circle"!==i.shape&&p?(t=o+this.translate(t),e=o+this.translate(e)):(t=-Math.PI/2,e=1.5*Math.PI,n=!0),r=this.chart.renderer.symbols.arc(this.left+r[0],this.top+r[1],s[0],s[0],{start:Math.min(t,e),end:Math.max(t,e),innerR:h(s[1],s[0]-s[2]),open:n})),r},getPlotLinePath:function(t,e){var i,n,r,a=this,s=a.center,l=a.chart,h=a.getPosition(t);return a.isCircular?r=["M",s[0]+l.plotLeft,s[1]+l.plotTop,"L",h.x,h.y]:"circle"===a.options.gridLineInterpolation?(t=a.translate(t))&&(r=a.getLinePath(0,t)):(o(l.xAxis,(function(t){t.pane===a.pane&&(i=t)})),r=[],t=a.translate(t),s=i.tickPositions,i.autoConnect&&(s=s.concat([s[0]])),e&&(s=[].concat(s).reverse()),o(s,(function(e,o){n=i.getPosition(e,t),r.push(o?"L":"M",n.x,n.y)}))),r},getTitlePosition:function(){var t=this.center,e=this.chart,i=this.options.title;return{x:e.plotLeft+t[0]+(i.x||0),y:e.plotTop+t[1]-{high:.5,middle:.25,low:0}[i.align]*t[2]+(i.y||0)}}};g(M,"init",(function(t,n,r){var o,l,c=n.angular,u=n.polar,p=r.isX,d=c&&p;l=n.options;var g=r.pane||0;c?(a(this,d?L:I),(o=!p)&&(this.defaultRadialOptions=this.defaultRadialGaugeOptions)):u&&(a(this,I),this.defaultRadialOptions=(o=p)?this.defaultRadialXOptions:s(this.defaultYAxisOptions,this.defaultRadialYOptions)),t.call(this,n,r),d||!c&&!u||(t=this.options,n.panes||(n.panes=[]),this.pane=g=n.panes[g]=n.panes[g]||new i(f(l.pane)[g],n,this),g=g.options,n.inverted=!1,l.chart.zoomType=null,this.startAngleRad=n=(g.startAngle-90)*Math.PI/180,this.endAngleRad=l=(h(g.endAngle,g.startAngle+360)-90)*Math.PI/180,this.offset=t.offset||0,(this.isCircular=o)&&r.max===e&&l-n==2*Math.PI&&(this.autoConnect=!0))})),g(y,"getPosition",(function(t,e,i,n,r){var o=this.axis;return o.getPosition?o.getPosition(i):t.call(this,e,i,n,r)})),g(y,"getLabelPosition",(function(t,e,i,n,r,o,a,s,l){var c=this.axis,u=o.y,p=20,d=o.align,f=(c.translate(this.pos)+c.startAngleRad+Math.PI/2)/Math.PI*180%360;return c.isRadial?(t=c.getPosition(this.pos,c.center[2]/2+h(o.distance,-25)),"auto"===o.rotation?n.attr({rotation:f}):null===u&&(u=c.chart.renderer.fontMetrics(n.styles.fontSize).b-n.getBBox().height/2),null===d&&(c.isCircular?(this.label.getBBox().width>c.len*c.tickInterval/(c.max-c.min)&&(p=0),d=f>p&&f<180-p?"left":f>180+p&&f<360-p?"right":"center"):d="center",n.attr({align:d})),t.x+=o.x,t.y+=u):t=t.call(this,e,i,n,r,o,a,s,l),t})),g(y,"getMarkPath",(function(t,e,i,n,r,o,a){var s=this.axis;return s.isRadial?e=["M",e,i,"L",(t=s.getPosition(this.pos,s.center[2]/2+n)).x,t.y]:e=t.call(this,e,i,n,r,o,a),e})),u.arearange=s(u.area,{lineWidth:1,marker:null,threshold:null,tooltip:{pointFormat:'<span style="color:{series.color}">â</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},trackByArea:!0,dataLabels:{align:null,verticalAlign:null,xLow:0,xHigh:0,yLow:0,yHigh:0},states:{hover:{halo:!1}}}),p.arearange=d(p.area,{type:"arearange",pointArrayMap:["low","high"],dataLabelCollections:["dataLabel","dataLabelUpper"],toYData:function(t){return[t.low,t.high]},pointValKey:"low",deferTranslatePolar:!0,highToXY:function(t){var e=this.chart,i=this.xAxis.postTranslate(t.rectPlotX,this.yAxis.len-t.plotHigh);t.plotHighX=i.x-e.plotLeft,t.plotHigh=i.y-e.plotTop},getSegments:function(){var t=this;o(t.points,(function(e){t.options.connectNulls||null!==e.low&&null!==e.high?null===e.low&&null!==e.high&&(e.y=e.high):e.y=null})),k.prototype.getSegments.call(this)},translate:function(){var t=this,e=t.yAxis;p.area.prototype.translate.apply(t),o(t.points,(function(t){var i=t.low,n=t.high,r=t.plotY;null===n&&null===i?t.y=null:null===i?(t.plotLow=t.plotY=null,t.plotHigh=e.translate(n,0,1,0,1)):null===n?(t.plotLow=r,t.plotHigh=null):(t.plotLow=r,t.plotHigh=e.translate(n,0,1,0,1))})),this.chart.polar&&o(this.points,(function(e){t.highToXY(e)}))},getSegmentPath:function(t){var e,i,n,r=[],o=t.length,a=k.prototype.getSegmentPath,s=(n=this.options).step;for(e=HighchartsAdapter.grep(t,(function(t){return null!==t.plotLow}));o--;)null!==(i=t[o]).plotHigh&&r.push({plotX:i.plotHighX||i.plotX,plotY:i.plotHigh});return t=a.call(this,e),s&&(!0===s&&(s="left"),n.step={left:"right",center:"center",right:"left"}[s]),r=a.call(this,r),n.step=s,n=[].concat(t,r),this.chart.polar||(r[0]="L"),this.areaPath=this.areaPath.concat(t,r),n},drawDataLabels:function(){var t,e,i,n=this.data,r=n.length,o=[],a=k.prototype,s=this.options.dataLabels,l=s.align,h=this.chart.inverted;if(s.enabled||this._hasPointLabels){for(t=r;t--;)(e=n[t])&&(i=e.plotHigh>e.plotLow,e.y=e.high,e._plotY=e.plotY,e.plotY=e.plotHigh,o[t]=e.dataLabel,e.dataLabel=e.dataLabelUpper,e.below=i,h?(l||(s.align=i?"right":"left"),s.x=s.xHigh):s.y=s.yHigh);for(a.drawDataLabels&&a.drawDataLabels.apply(this,arguments),t=r;t--;)(e=n[t])&&(i=e.plotHigh>e.plotLow,e.dataLabelUpper=e.dataLabel,e.dataLabel=o[t],e.y=e.low,e.plotY=e._plotY,e.below=!i,h?(l||(s.align=i?"left":"right"),s.x=s.xLow):s.y=s.yLow);a.drawDataLabels&&a.drawDataLabels.apply(this,arguments)}s.align=l},alignDataLabel:function(){p.column.prototype.alignDataLabel.apply(this,arguments)},setStackedPoints:D,getSymbol:D,drawPoints:D}),u.areasplinerange=s(u.arearange),p.areasplinerange=d(p.arearange,{type:"areasplinerange",getPointSpline:p.spline.prototype.getPointSpline}),C=p.column.prototype,u.columnrange=s(u.column,u.arearange,{lineWidth:1,pointRange:null}),p.columnrange=d(p.arearange,{type:"columnrange",translate:function(){var t,e=this,i=e.yAxis;C.translate.apply(e),o(e.points,(function(n){var r,o=n.shapeArgs,a=e.options.minPointLength;n.tooltipPos=null,n.plotHigh=t=i.translate(n.high,0,1,0,1),n.plotLow=n.plotY,r=t,n=n.plotY-t,Math.abs(n)<a?(n+=a-=n,r-=a/2):n<0&&(r-=n*=-1),o.height=n,o.y=r}))},directTouch:!0,trackerGroups:["group","dataLabelsGroup"],drawGraph:D,pointAttrToOptions:C.pointAttrToOptions,drawPoints:C.drawPoints,drawTracker:C.drawTracker,animate:C.animate,getColumnMetrics:C.getColumnMetrics}),u.gauge=s(u.line,{dataLabels:{enabled:!0,defer:!1,y:15,borderWidth:1,borderColor:"silver",borderRadius:3,crop:!1,verticalAlign:"top",zIndex:2},dial:{},pivot:{},tooltip:{headerFormat:""},showInLegend:!1}),b={type:"gauge",pointClass:d(v,{setState:function(t){this.state=t}}),angular:!0,drawGraph:D,fixedBox:!0,forceDL:!0,trackerGroups:["group","dataLabelsGroup"],translate:function(){var t=this.yAxis,e=this.options,i=t.center;this.generatePoints(),o(this.points,(function(n){var r=s(e.dial,n.dial),o=c(h(r.radius,80))*i[2]/200,a=c(h(r.baseLength,70))*o/100,l=c(h(r.rearLength,10))*o/100,u=r.baseWidth||3,p=r.topWidth||1,d=e.overshoot,f=t.startAngleRad+t.translate(n.y,null,null,null,!0);d&&"number"==typeof d?(d=d/180*Math.PI,f=Math.max(t.startAngleRad-d,Math.min(t.endAngleRad+d,f))):!1===e.wrap&&(f=Math.max(t.startAngleRad,Math.min(t.endAngleRad,f))),f=180*f/Math.PI,n.shapeType="path",n.shapeArgs={d:r.path||["M",-l,-u/2,"L",a,-u/2,o,-p/2,o,p/2,a,u/2,-l,u/2,"z"],translateX:i[0],translateY:i[1],rotation:f},n.plotX=i[0],n.plotY=i[1]}))},drawPoints:function(){var t=this,e=t.yAxis.center,i=t.pivot,n=t.options,r=n.pivot,a=t.chart.renderer;o(t.points,(function(e){var i=e.graphic,r=e.shapeArgs,o=r.d,l=s(n.dial,e.dial);i?(i.animate(r),r.d=o):e.graphic=a[e.shapeType](r).attr({stroke:l.borderColor||"none","stroke-width":l.borderWidth||0,fill:l.backgroundColor||"black",rotation:r.rotation}).add(t.group)})),i?i.animate({translateX:e[0],translateY:e[1]}):t.pivot=a.circle(0,0,h(r.radius,5)).attr({"stroke-width":r.borderWidth||0,stroke:r.borderColor||"silver",fill:r.backgroundColor||"black"}).translate(e[0],e[1]).add(t.group)},animate:function(t){var e=this;t||(o(e.points,(function(t){var i=t.graphic;i&&(i.attr({rotation:180*e.yAxis.startAngleRad/Math.PI}),i.animate({rotation:t.shapeArgs.rotation},e.options.animation))})),e.animate=null)},render:function(){this.group=this.plotGroup("group","series",this.visible?"visible":"hidden",this.options.zIndex,this.chart.seriesGroup),k.prototype.render.call(this),this.group.clip(this.chart.clipRect)},setData:function(t,e){k.prototype.setData.call(this,t,!1),this.processData(),this.generatePoints(),h(e,!0)&&this.chart.redraw()},drawTracker:b&&b.drawTrackerPoint},p.gauge=d(p.line,b),u.boxplot=s(u.column,{fillColor:"#FFFFFF",lineWidth:1,medianWidth:2,states:{hover:{brightness:-.3}},threshold:null,tooltip:{pointFormat:'<span style="color:{point.color}">â</span> <b> {series.name}</b><br/>Maximum: {point.high}<br/>Upper quartile: {point.q3}<br/>Median: {point.median}<br/>Lower quartile: {point.q1}<br/>Minimum: {point.low}<br/>'},whiskerLength:"50%",whiskerWidth:2}),p.boxplot=d(p.column,{type:"boxplot",pointArrayMap:["low","q1","median","q3","high"],toYData:function(t){return[t.low,t.q1,t.median,t.q3,t.high]},pointValKey:"high",pointAttrToOptions:{fill:"fillColor",stroke:"color","stroke-width":"lineWidth"},drawDataLabels:D,translate:function(){var t=this.yAxis,e=this.pointArrayMap;p.column.prototype.translate.apply(this),o(this.points,(function(i){o(e,(function(e){null!==i[e]&&(i[e+"Plot"]=t.translate(i[e],0,1,0,1))}))}))},drawPoints:function(){var t,i,n,r,a,s,l,c,u,p,d,f,g,m,y,v,_,x,b,k,w,P,A=this,D=A.points,C=A.options,M=A.chart.renderer,L=!1!==A.doQuartiles,I=parseInt(A.options.whiskerLength,10)/100;o(D,(function(o){u=o.graphic,w=o.shapeArgs,d={},m={},v={},P=o.color||A.color,o.plotY!==e&&(t=o.pointAttr[o.selected?"selected":""],_=w.width,x=T(w.x),b=x+_,k=S(_/2),i=T(L?o.q1Plot:o.lowPlot),n=T(L?o.q3Plot:o.lowPlot),r=T(o.highPlot),a=T(o.lowPlot),d.stroke=o.stemColor||C.stemColor||P,d["stroke-width"]=h(o.stemWidth,C.stemWidth,C.lineWidth),d.dashstyle=o.stemDashStyle||C.stemDashStyle,m.stroke=o.whiskerColor||C.whiskerColor||P,m["stroke-width"]=h(o.whiskerWidth,C.whiskerWidth,C.lineWidth),v.stroke=o.medianColor||C.medianColor||P,v["stroke-width"]=h(o.medianWidth,C.medianWidth,C.lineWidth),l=d["stroke-width"]%2/2,p=["M",c=x+k+l,n,"L",c,r,"M",c,i,"L",c,a],L&&(l=t["stroke-width"]%2/2,c=T(c)+l,i=T(i)+l,n=T(n)+l,f=["M",x+=l,n,"L",x,i,"L",b+=l,i,"L",b,n,"L",x,n,"z"]),I&&(l=m["stroke-width"]%2/2,g=["M",c-k*I,r+=l,"L",c+k*I,r,"M",c-k*I,a+=l,"L",c+k*I,a]),l=v["stroke-width"]%2/2,s=S(o.medianPlot)+l,y=["M",x,s,"L",b,s],u?(o.stem.animate({d:p}),I&&o.whiskers.animate({d:g}),L&&o.box.animate({d:f}),o.medianShape.animate({d:y})):(o.graphic=u=M.g().add(A.group),o.stem=M.path(p).attr(d).add(u),I&&(o.whiskers=M.path(g).attr(m).add(u)),L&&(o.box=M.path(f).attr(t).add(u)),o.medianShape=M.path(y).attr(v).add(u)))}))},setStackedPoints:D}),u.errorbar=s(u.boxplot,{color:"#000000",grouping:!1,linkedTo:":previous",tooltip:{pointFormat:'<span style="color:{point.color}">â</span> {series.name}: <b>{point.low}</b> - <b>{point.high}</b><br/>'},whiskerWidth:null}),p.errorbar=d(p.boxplot,{type:"errorbar",pointArrayMap:["low","high"],toYData:function(t){return[t.low,t.high]},pointValKey:"high",doQuartiles:!1,drawDataLabels:p.arearange?p.arearange.prototype.drawDataLabels:D,getColumnMetrics:function(){return this.linkedParent&&this.linkedParent.columnMetrics||p.column.prototype.getColumnMetrics.call(this)}}),u.waterfall=s(u.column,{lineWidth:1,lineColor:"#333",dashStyle:"dot",borderColor:"#333",dataLabels:{inside:!0},states:{hover:{lineWidthPlus:0}}}),p.waterfall=d(p.column,{type:"waterfall",upColorProp:"fill",pointValKey:"y",translate:function(){var t,e,i,n,r,o,a,s,l,h=this.options,c=this.yAxis,u=h.threshold,d=h.stacking;for(p.column.prototype.translate.apply(this),a=s=u,t=0,h=(e=this.points).length;t<h;t++)i=e[t],o=this.processedYData[t],n=i.shapeArgs,l=(r=d&&c.stacks[(this.negStacks&&o<u?"-":"")+this.stackKey])?r[i.x].points[this.index+","+t]:[0,o],i.isSum?i.y=o:i.isIntermediateSum&&(i.y=o-s),r=P(a,a+i.y)+l[0],n.y=c.translate(r,0,1),i.isSum?(n.y=c.translate(l[1],0,1),n.height=Math.min(c.translate(l[0],0,1),c.len)-n.y):i.isIntermediateSum?(n.y=c.translate(l[1],0,1),n.height=Math.min(c.translate(s,0,1),c.len)-n.y,s=l[1]):(0!==a&&(n.height=o>0?c.translate(a,0,1)-n.y:c.translate(a,0,1)-c.translate(a-o,0,1)),a+=o),n.height<0&&(n.y+=n.height,n.height*=-1),i.plotY=n.y=S(n.y)-this.borderWidth%2/2,n.height=P(S(n.height),.001),i.yBottom=n.y+n.height,n=i.plotY+(i.negative?n.height:0),this.chart.inverted?i.tooltipPos[0]=c.len-n:i.tooltipPos[1]=n},processData:function(t){var e,i,n,r,o,a,s,l=this.yData,h=this.options.data,c=l.length;for(n=i=r=o=this.options.threshold||0,s=0;s<c;s++)a=l[s],e=h&&h[s]?h[s]:{},"sum"===a||e.isSum?l[s]=n:"intermediateSum"===a||e.isIntermediateSum?l[s]=i:(n+=a,i+=a),r=Math.min(n,r),o=Math.max(n,o);k.prototype.processData.call(this,t),this.dataMin=r,this.dataMax=o},toYData:function(t){return t.isSum?0===t.x?null:"sum":t.isIntermediateSum?0===t.x?null:"intermediateSum":t.y},getAttribs:function(){p.column.prototype.getAttribs.apply(this,arguments);var e=this,i=(r=e.options).states,n=r.upColor||e.color,r=t.Color(n).brighten(.1).get(),a=s(e.pointAttr),l=e.upColorProp;a[""][l]=n,a.hover[l]=i.hover.upColor||r,a.select[l]=i.select.upColor||n,o(e.points,(function(t){t.options.color||(t.y>0?(t.pointAttr=a,t.color=n):t.pointAttr=e.pointAttr)}))},getGraphPath:function(){var t,e,i,n=this.data,r=n.length,o=S(this.options.lineWidth+this.borderWidth)%2/2,a=[];for(i=1;i<r;i++)e=n[i].shapeArgs,e=["M",(t=n[i-1].shapeArgs).x+t.width,t.y+o,"L",e.x,t.y+o],n[i-1].y<0&&(e[2]+=t.height,e[5]+=t.height),a=a.concat(e);return a},getExtremes:D,drawGraph:k.prototype.drawGraph}),u.polygon=s(u.scatter,{marker:{enabled:!1}}),p.polygon=d(p.scatter,{type:"polygon",fillGraph:!0,getSegmentPath:function(t){return k.prototype.getSegmentPath.call(this,t).concat("z")},drawGraph:k.prototype.drawGraph,drawLegendSymbol:t.LegendSymbolMixin.drawRectangle}),u.bubble=s(u.scatter,{dataLabels:{formatter:function(){return this.point.z},inside:!0,verticalAlign:"middle"},marker:{lineColor:null,lineWidth:1},minSize:8,maxSize:"20%",states:{hover:{halo:{size:5}}},tooltip:{pointFormat:"({point.x}, {point.y}), Size: {point.z}"},turboThreshold:0,zThreshold:0,zoneAxis:"z"}),b=d(v,{haloPath:function(){return v.prototype.haloPath.call(this,this.shapeArgs.r+this.series.options.states.hover.halo.size)},ttBelow:!1}),p.bubble=d(p.scatter,{type:"bubble",pointClass:b,pointArrayMap:["y","z"],parallelArrays:["x","y","z"],trackerGroups:["group","dataLabelsGroup"],bubblePadding:!0,zoneAxis:"z",pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",fill:"fillColor"},applyOpacity:function(t){var e=this.options.marker,i=h(e.fillOpacity,.5);t=t||e.fillColor||this.color;return 1!==i&&(t=A(t).setOpacity(i).get("rgba")),t},convertAttribs:function(){var t=k.prototype.convertAttribs.apply(this,arguments);return t.fill=this.applyOpacity(t.fill),t},getRadii:function(t,e,i,n){var r,o,a=this.zData,s=[],l="width"!==this.options.sizeBy,h=e-t;for(r=0,e=a.length;r<e;r++)a[r]<t?s.push(i/2-1):(o=h>0?(a[r]-t)/h:.5,l&&o>=0&&(o=Math.sqrt(o)),s.push(w.ceil(i+o*(n-i))/2));this.radii=s},animate:function(t){var e=this.options.animation;t||(o(this.points,(function(t){var i=t.graphic;t=t.shapeArgs;i&&t&&(i.attr("r",1),i.animate({r:t.r},e))})),this.animate=null)},translate:function(){var t,i,n,r=this.data,o=this.radii;for(p.scatter.prototype.translate.call(this),t=r.length;t--;)i=r[t],(n=o?o[t]:0)>=this.minPxSize/2?(i.shapeType="circle",i.shapeArgs={x:i.plotX,y:i.plotY,r:n},i.dlBox={x:i.plotX-n,y:i.plotY-n,width:2*n,height:2*n}):i.shapeArgs=i.plotY=i.dlBox=e},drawLegendSymbol:function(t,e){var i=c(t.itemStyle.fontSize)/2;e.legendSymbol=this.chart.renderer.circle(i,t.baseline-i,i).attr({zIndex:3}).add(e.legendGroup),e.legendSymbol.isMarker=!0},drawPoints:p.column.prototype.drawPoints,alignDataLabel:p.column.prototype.alignDataLabel,buildKDTree:D,applyZones:D}),m.prototype.beforePadding=function(){var t=this,i=this.len,a=this.chart,s=0,l=i,u=this.isXAxis,p=u?"xData":"yData",d=this.min,f={},g=w.min(a.plotWidth,a.plotHeight),m=Number.MAX_VALUE,y=-Number.MAX_VALUE,v=this.max-d,_=i/v,x=[];o(this.series,(function(e){var i=e.options;!e.bubblePadding||!e.visible&&a.options.chart.ignoreHiddenSeries||(t.allowZoomOutside=!0,x.push(e),u&&(o(["minSize","maxSize"],(function(t){var e=i[t],n=/%$/.test(e);e=c(e);f[t]=n?g*e/100:e})),e.minPxSize=f.minSize,e.maxPxSize=f.maxSize,(e=e.zData).length&&(m=h(i.zMin,w.min(m,w.max(n(e),!1===i.displayNegative?i.zThreshold:-Number.MAX_VALUE))),y=h(i.zMax,w.max(y,r(e))))))})),o(x,(function(t){var e,i=t[p],n=i.length;if(u&&t.getRadii(m,y,t.minPxSize,t.maxPxSize),v>0)for(;n--;)"number"==typeof i[n]&&(e=t.radii[n],s=Math.min((i[n]-d)*_-e,s),l=Math.max((i[n]-d)*_+e,l))})),x.length&&v>0&&!this.isLog&&(_*=(i+s-(l-=i))/i,o([["min","userMin",s],["max","userMax",l]],(function(i){h(t.options[i[0]],t[i[1]])===e&&(t[i[0]]+=i[2]/_)})))},function(){function t(t,e,i){t.call(this,e,i),this.chart.polar&&(this.closeSegment=function(t){var e=this.xAxis.center;t.push("L",e[0],e[1])},this.closedStacks=!0)}function e(t,e){var i=this.chart,n=this.options.animation,r=this.group,o=this.markerGroup,a=this.xAxis.center,s=i.plotLeft,l=i.plotTop;i.polar?i.renderer.isSVG&&(!0===n&&(n={}),e?(i={translateX:a[0]+s,translateY:a[1]+l,scaleX:.001,scaleY:.001},r.attr(i),o&&o.attr(i)):(i={translateX:s,translateY:l,scaleX:1,scaleY:1},r.animate(i,n),o&&o.animate(i,n),this.animate=null)):t.call(this,e)}var i,n=k.prototype,r=_.prototype;n.searchPointByAngle=function(t){var e=this.chart,i=this.xAxis.pane.center;return this.searchKDTree({clientX:180+Math.atan2(t.chartX-i[0]-e.plotLeft,t.chartY-i[1]-e.plotTop)*(-180/Math.PI)})},g(n,"buildKDTree",(function(t){this.chart.polar&&(this.kdByAngle?this.searchPoint=this.searchPointByAngle:this.kdDimensions=2),t.apply(this)})),n.toXY=function(t){var e,i=this.chart,n=t.plotX;e=t.plotY,t.rectPlotX=n,t.rectPlotY=e,e=this.xAxis.postTranslate(t.plotX,this.yAxis.len-e),t.plotX=t.polarPlotX=e.x-i.plotLeft,t.plotY=t.polarPlotY=e.y-i.plotTop,this.kdByAngle?((i=(n/Math.PI*180+this.xAxis.pane.options.startAngle)%360)<0&&(i+=360),t.clientX=i):t.clientX=t.plotX},p.area&&g(p.area.prototype,"init",t),p.areaspline&&g(p.areaspline.prototype,"init",t),p.spline&&g(p.spline.prototype,"getPointSpline",(function(t,e,i,n){var r,o,a,s,l,h,c;return this.chart.polar?(r=i.plotX,o=i.plotY,t=e[n-1],a=e[n+1],this.connectEnds&&(t||(t=e[e.length-2]),a||(a=e[1])),t&&a&&(s=t.plotX,l=t.plotY,e=a.plotX,h=a.plotY,s=(1.5*r+s)/2.5,l=(1.5*o+l)/2.5,a=(1.5*r+e)/2.5,c=(1.5*o+h)/2.5,e=Math.sqrt(Math.pow(s-r,2)+Math.pow(l-o,2)),h=Math.sqrt(Math.pow(a-r,2)+Math.pow(c-o,2)),s=Math.atan2(l-o,s-r),l=Math.atan2(c-o,a-r),c=Math.PI/2+(s+l)/2,Math.abs(s-c)>Math.PI/2&&(c-=Math.PI),s=r+Math.cos(c)*e,l=o+Math.sin(c)*e,a=r+Math.cos(Math.PI+c)*h,c=o+Math.sin(Math.PI+c)*h,i.rightContX=a,i.rightContY=c),n?(i=["C",t.rightContX||t.plotX,t.rightContY||t.plotY,s||r,l||o,r,o],t.rightContX=t.rightContY=null):i=["M",r,o]):i=t.call(this,e,i,n),i})),g(n,"translate",(function(t){var e=this.chart;if(t.call(this),e.polar&&(this.kdByAngle=e.tooltip&&e.tooltip.shared,!this.preventPostTranslate))for(e=(t=this.points).length;e--;)this.toXY(t[e])})),g(n,"getSegmentPath",(function(t,e){var i=this.points;return this.chart.polar&&!1!==this.options.connectEnds&&e[e.length-1]===i[i.length-1]&&null!==i[0].y&&(this.connectEnds=!0,e=[].concat(e,[i[0]])),t.call(this,e)})),g(n,"animate",e),p.column&&(i=p.column.prototype,g(i,"animate",e),g(i,"translate",(function(t){var e,i,n=this.xAxis,r=this.yAxis.len,o=n.center,a=n.startAngleRad,s=this.chart.renderer;if(this.preventPostTranslate=!0,t.call(this),n.isRadial)for(i=(n=this.points).length;i--;)t=(e=n[i]).barX+a,e.shapeType="path",e.shapeArgs={d:s.symbols.arc(o[0],o[1],r-e.plotY,null,{start:t,end:t+e.pointWidth,innerR:r-h(e.yBottom,r)})},this.toXY(e),e.tooltipPos=[e.plotX,e.plotY],e.ttBelow=e.plotY>o[1]})),g(i,"alignDataLabel",(function(t,e,i,r,o,a){this.chart.polar?(t=e.rectPlotX/Math.PI*180,null===r.align&&(r.align=t>20&&t<160?"left":t>200&&t<340?"right":"center"),null===r.verticalAlign&&(r.verticalAlign=t<45||t>315?"bottom":t>135&&t<225?"top":"middle"),n.alignDataLabel.call(this,e,i,r,o,a)):t.call(this,e,i,r,o,a)}))),g(r,"getCoordinates",(function(t,e){var i=this.chart,n={xAxis:[],yAxis:[]};return i.polar?o(i.axes,(function(t){var r=t.isXAxis,o=t.center,a=e.chartX-o[0]-i.plotLeft;o=e.chartY-o[1]-i.plotTop;n[r?"xAxis":"yAxis"].push({axis:t,value:t.translate(r?Math.PI-Math.atan2(a,o):Math.sqrt(Math.pow(a,2)+Math.pow(o,2)),!0)})})):n=t.call(this,e),n}))}()}(Highcharts);
//# sourceMappingURL=chart-33bd87a969.min.js.map
