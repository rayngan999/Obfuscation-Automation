/*
 imagesLoaded PACKAGED v3.0.4
 JavaScript is all like "You images are done yet or what?"
 EventEmitter v4.2.0 - git.io/ee
 Oliver Caldwell
 MIT license
 @preserve
 eventie v1.0.3
 event binding helper
   eventie.bind( elem, 'click', myFn )
   eventie.unbind( elem, 'click', myFn )
 imagesLoaded v3.0.4
 JavaScript is all like "You images are done yet or what?"
*/
(function(){function f(){}function g(a,b){for(var c=a.length;c--;)if(a[c].listener===b)return c;return-1}var d=f.prototype;d.getListeners=function(a){var b=this._getEvents(),c;if("object"===typeof a){var e={};for(c in b)b.hasOwnProperty(c)&&a.test(c)&&(e[c]=b[c])}else e=b[a]||(b[a]=[]);return e};d.flattenListeners=function(a){var b=[],c;for(c=0;c<a.length;c+=1)b.push(a[c].listener);return b};d.getListenersAsObject=function(a){var b=this.getListeners(a);if(b instanceof Array){var c={};c[a]=b}return c||
b};d.addListener=function(a,b){var c=this.getListenersAsObject(a),e="object"===typeof b,d;for(d in c)c.hasOwnProperty(d)&&-1===g(c[d],b)&&c[d].push(e?b:{listener:b,once:!1});return this};d.on=d.addListener;d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})};d.once=d.addOnceListener;d.defineEvent=function(a){this.getListeners(a);return this};d.defineEvents=function(a){for(var b=0;b<a.length;b+=1)this.defineEvent(a[b]);return this};d.removeListener=function(a,b){var c=this.getListenersAsObject(a),
e;for(e in c)if(c.hasOwnProperty(e)){var d=g(c[e],b);-1!==d&&c[e].splice(d,1)}return this};d.off=d.removeListener;d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)};d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)};d.manipulateListeners=function(a,b,c){var e,d,l=a?this.removeListener:this.addListener;a=a?this.removeListeners:this.addListeners;if("object"!==typeof b||b instanceof RegExp)for(e=c.length;e--;)l.call(this,b,c[e]);else for(e in b)b.hasOwnProperty(e)&&
(d=b[e])&&("function"===typeof d?l.call(this,e,d):a.call(this,e,d));return this};d.removeEvent=function(a){var b=typeof a,c=this._getEvents(),e;if("string"===b)delete c[a];else if("object"===b)for(e in c)c.hasOwnProperty(e)&&a.test(e)&&delete c[e];else delete this._events;return this};d.emitEvent=function(a,b){var c=this.getListenersAsObject(a),e,d;for(d in c)if(c.hasOwnProperty(d))for(e=c[d].length;e--;){var l=c[d][e];var f=l.listener.apply(this,b||[]);f!==this._getOnceReturnValue()&&!0!==l.once||
this.removeListener(a,c[d][e].listener)}return this};d.trigger=d.emitEvent;d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)};d.setOnceReturnValue=function(a){this._onceReturnValue=a;return this};d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0};d._getEvents=function(){return this._events||(this._events={})};"function"===typeof define&&define.amd?define("eventEmitter/EventEmitter",function(){return f}):
"undefined"!==typeof module&&module.exports?module.exports=f:this.EventEmitter=f}).call(this);
(function(f){var g=document.documentElement,d=function(){};g.addEventListener?d=function(b,c,a){b.addEventListener(c,a,!1)}:g.attachEvent&&(d=function(b,c,a){b[c+a]=a.handleEvent?function(){var b=f.event;b.target=b.target||b.srcElement;a.handleEvent.call(a,b)}:function(){var c=f.event;c.target=c.target||c.srcElement;a.call(b,c)};b.attachEvent("on"+c,b[c+a])});var a=function(){};g.removeEventListener?a=function(b,c,a){b.removeEventListener(c,a,!1)}:g.detachEvent&&(a=function(b,a,d){b.detachEvent("on"+
a,b[a+d]);try{delete b[a+d]}catch(n){b[a+d]=void 0}});g={bind:d,unbind:a};"function"===typeof define&&define.amd?define("eventie/eventie",g):f.eventie=g})(this);
(function(f){function g(b,a){for(var c in a)b[c]=a[c];return b}function d(b){var a=[];if("[object Array]"===n.call(b))a=b;else if("number"===typeof b.length)for(var c=0,d=b.length;c<d;c++)a.push(b[c]);else a.push(b);return a}function a(a,f){function h(a,c,e){if(!(this instanceof h))return new h(a,c);"string"===typeof a&&(a=document.querySelectorAll(a));this.elements=d(a);this.options=g({},this.options);"function"===typeof c?e=c:g(this.options,c);if(e)this.on("always",e);this.getImages();b&&(this.jqDeferred=
new b.Deferred);var m=this;setTimeout(function(){m.check()})}function k(a){this.img=a}h.prototype=new a;h.prototype.options={};h.prototype.getImages=function(){this.images=[];for(var a=0,b=this.elements.length;a<b;a++){var c=this.elements[a];"IMG"===c.nodeName&&this.addImage(c);c=c.querySelectorAll("img");for(var d=0,e=c.length;d<e;d++)this.addImage(c[d])}};h.prototype.addImage=function(a){a=new k(a);this.images.push(a)};h.prototype.check=function(){function a(a,m){b.options.debug&&e&&c.log("confirm",
a,m);b.progress(a);d++;d===f&&b.complete();return!0}var b=this,d=0,f=this.images.length;this.hasAnyBroken=!1;if(f)for(var g=0;g<f;g++){var h=this.images[g];h.on("confirm",a);h.check()}else this.complete()};h.prototype.progress=function(a){this.hasAnyBroken=this.hasAnyBroken||!a.isLoaded;var b=this;setTimeout(function(){b.emit("progress",b,a);b.jqDeferred&&b.jqDeferred.notify(b,a)})};h.prototype.complete=function(){var a=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var b=this;setTimeout(function(){b.emit(a,
b);b.emit("always",b);if(b.jqDeferred)b.jqDeferred[b.hasAnyBroken?"reject":"resolve"](b)})};b&&(b.fn.imagesLoaded=function(a,c){return(new h(this,a,c)).jqDeferred.promise(b(this))});var l={};k.prototype=new a;k.prototype.check=function(){var a=l[this.img.src];a?this.useCached(a):(l[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth?this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(a=this.proxyImage=new Image,f.bind(a,"load",this),f.bind(a,"error",this),a.src=this.img.src))};
k.prototype.useCached=function(a){if(a.isConfirmed)this.confirm(a.isLoaded,"cached was confirmed");else{var b=this;a.on("confirm",function(a){b.confirm(a.isLoaded,"cache emitted confirmed");return!0})}};k.prototype.confirm=function(a,b){this.isConfirmed=!0;this.isLoaded=a;this.emit("confirm",this,b)};k.prototype.handleEvent=function(a){var b="on"+a.type;if(this[b])this[b](a)};k.prototype.onload=function(){this.confirm(!0,"onload");this.unbindProxyEvents()};k.prototype.onerror=function(){this.confirm(!1,
"onerror");this.unbindProxyEvents()};k.prototype.unbindProxyEvents=function(){f.unbind(this.proxyImage,"load",this);f.unbind(this.proxyImage,"error",this)};return h}var b=f.jQuery,c=f.console,e="undefined"!==typeof c,n=Object.prototype.toString;"function"===typeof define&&define.amd?define("imagesLoaded",["eventEmitter/EventEmitter","eventie/eventie"],a):f.imagesLoaded=a(f.EventEmitter,f.eventie)})(window);
