/*! @sbg/harmony-ui-components - v28.1.1 - 2020-07-09 
 * Copyright (c) 2020 Intuit; Licensed  */

function onPlayerStateChange(a,b){var c,d,e,f,g=document.querySelector('[videokey="'+a+'"]');g&&(g._ended=!1,0===b.data?(g._emitVideoEvent("video-completed"),g._ended=!0,(g._overlayDiv||g.section)&&(e=g.querySelector(".ha-video-main-div"),g._overlayDiv?e.insertBefore(g._overlayDiv,e.querySelector("iframe")):(c=document.createElement("div"),c.classList.add("ha-video-overlay"),d=document.createElement("div"),g.section&&d.appendChild(g.section),c.appendChild(d),g.classList.contains("minimized")&&c.classList.add("hidden"),e.insertBefore(c,e.querySelector("iframe")),g._overlayDiv=c),g.section&&g.section.focusContent())):1===b.data?(g._emitVideoEvent("video-started"),g._overlayDiv&&g._overlayDiv.parentNode&&g._overlayDiv.parentNode.removeChild(g._overlayDiv)):2===b.data&&g._emitVideoEvent("video-paused"),(f=b.target.getVideoData&&b.target.getVideoData())&&f.title&&!g.titleText&&(g.querySelector(".ha-video-title-bar h3").textContent=f.title))}function onPlayerReady(a,b){var c,d=document.querySelector('[videokey="'+a+'"]');try{d.classList.contains("visible")&&d._player&&d._player.playVideo&&d._player.playVideo(),d.titleText||(d.querySelector(".ha-video-title-bar h3").textContent=b.target.getVideoData().title),c=d.querySelector("iframe"),c.setAttribute("title","Video"),c.setAttribute("tabindex","0")}catch(a){}}function onYouTubeIframeAPIReady(){videoKeys.forEach(function(a){var b,c,d=document.querySelector('[videokey="'+a+'"]');d&&(b=d.url&&d.url.split("embed/")[1],b&&(b=b.split("?")[0]),c=d.hideRelatedVideos?0:1,d._player=new YT.Player(a,{videoId:b,playerVars:{enablejsapi:1,showinfo:0,modestbranding:1,autoplay:0,rel:c},events:{onStateChange:onPlayerStateChange.bind(null,a),onReady:onPlayerReady.bind(null,a)}}))})}var root,factory;root="undefined"!=typeof self?self:this,factory=function(a,b,c,d){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return a[d].call(e.exports,e,e.exports,b),e.l=!0,e.exports}var c={};return b.m=a,b.c=c,b.d=function(a,c,d){b.o(a,c)||Object.defineProperty(a,c,{configurable:!1,enumerable:!0,get:d})},b.n=function(a){var c=a&&a.__esModule?function(){return a.default}:function(){return a};return b.d(c,"a",c),c},b.o=function(a,b){return Object.prototype.hasOwnProperty.call(a,b)},b.p="/",b(b.s=7)}([function(b,c){b.exports=a},function(a,c){a.exports=b},function(a,b){a.exports=c},function(a,b,c){var d;void 0===(d=function(){return{BACKSPACE:8,TAB:9,ENTER:13,SPACEBAR:32,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,MINUS:189,EQUALS:187,NUM_PAD_MINUS:109,NUM_PAD_PLUS:107,H:72,K:75,M:77,R:82,T:84,W:87,Y:89,isLetter:function(a){return a>64&&a<91},isNumber:function(a){return a>47&&a<58||a>95&&a<106},isSpecialChar:function(a){return a>106&&a<112||a>185&&a<223}}}.apply(b,[]))||(a.exports=d)},function(a,b){a.exports=d},function(a,b,c){var d;void 0===(d=function(){var a=1e4,b=a;return{get baseZindex(){return a},set baseZindex(c){a!==b?console.warn("The global z-index is already in use; baseZindex should be set at application initialization"):b=c,a=c},getTopZindex:function(){return b++},bringToFront:function(a){a.parentNode!==a.ownerDocument.body&&a.ownerDocument.body.appendChild(a),a.style.zIndex=this.getTopZindex()},getBoxShadowSize:function(a){var b,c,d,e,f,g=void 0,h={left:0,right:0,top:0,bottom:0};return"none"===(g=window.getComputedStyle(a).getPropertyValue("box-shadow"))?h:(c=(b=(g=(g=(g=g.replace(/rgba?\([^\)]+\)/gi,"")).replace(/#[0-9a-f]+/gi,"")).replace(/[a-z]+/gi,"").trim()).split(" ")).length>0?parseInt(b[0],10):0,d=b.length>1?parseInt(b[1],10):0,f=b.length>2?parseInt(b[2],10):0,e=b.length>3?parseInt(b[3],10):0,h.left=Math.max(e-c+.5*f,0),h.right=Math.max(e+c+.5*f,0),h.top=Math.max(e-d+.5*f,0),h.bottom=Math.max(e+d+.5*f,0),h)},getDimension:function(a){var b,c={position:"",display:"",top:"",left:""},d=!1,e=void 0,f={},g="";if(!function(a){return a.offsetWidth>0&&a.offsetHeight>0}(a))if((e=a.getBoundingClientRect()).width&&e.height)f.width=e.width,f.height=e.height;else{for(g in d=!0,c)c[g]=a.style[g]||"";a.style.position="absolute",a.style.left="-1000px",a.style.top="-1000px",a.style.display="inline-block"}if(b={width:f.width||a.offsetWidth,height:f.height||a.offsetHeight},d)for(g in c)a.style[g]=c[g];return b},getPageSize:function(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:Math.max(c.scrollHeight,b.scrollHeight,c.offsetHeight,b.offsetHeight,c.clientHeight,b.clientHeight)}},getPositionInDocument:function(a){var b=a.getBoundingClientRect(),c=window.pageXOffset||document.documentElement.scrollLeft,d=window.pageYOffset||document.documentElement.scrollTop;return{left:Math.round(b.left)+c,right:Math.round(b.right)+c,top:Math.round(b.top)+d,bottom:Math.round(b.bottom)+d,width:Math.round(b.width),height:Math.round(b.height)}}}}.apply(b,[]))||(a.exports=d)},function(a,b,c){var d,e;d=[c(3)],void 0===(e=function(a){function b(a){a.stopPropagation(),a.preventDefault()}function c(a,b){a.shiftKey||b.focus()}function d(a){return a.hasAttribute("tabIndex")?+a.getAttribute("tabIndex"):f.indexOf(a.tagName)>-1?0:void 0}function e(a,b){var c,d=void 0;if(b){d=!1;do{d="none"===a.style.display||"hidden"===a.style.visibility||a.classList.contains("hidden"),a=a.parentElement}while(a&&a!==b&&!d);return d}return(c=window.getComputedStyle(a)).display&&"none"===c.display||c.visibility&&"hidden"===c.visibility}var f=["INPUT","SELECT","BUTTON","TEXTAREA","A","AREA","OBJECT"];return{getBoundariesTabableElement:function(a,b,c){var d={},e=a.querySelectorAll("*"),f=0,g=void 0,h=void 0;for(d.first=null;null===d.first&&f<e.length;++f)g=e[f],c&&(h=window.getComputedStyle(g)),g&&this.isTabNavigable(g,a)&&(!c||"none"!==h.display&&"hidden"!==h.visibility)&&(d.first=g);if(d.last=null,b)for(f=e.length-1;null===d.last&&f>0;--f)g=e[f],c&&(h=window.getComputedStyle(g)),e[f]&&this.isTabNavigable(e[f],a)&&(!c||"none"!==h.display&&"hidden"!==h.visibility)&&(d.last=g);return d},_getFirstTabable:function(a){var b=a.querySelectorAll("*"),c=void 0,d=void 0;for(c=null,d=0;d<b.length;++d)if(this.isTabNavigable(b[d])){c=b[d];break}return c},_getFirstFocusable:function(a){var b=a.querySelectorAll("*"),c=void 0,d=void 0;for(c=null,d=0;d<b.length;++d)if(this.isFocusable(b[d])){c=b[d];break}return c},isTabNavigable:function(a,b){return!a.disabled&&!e(a,b)&&d(a)>=0},isFocusable:function(a){return!a.disabled&&!e(a)&&d(a)>=-1},keepFocusInsideListener:function(d,e){var f=void 0,g=void 0;d.keyCode===a.TAB&&(f=this.getBoundariesTabableElement(e,!0),g=d.target,f.first&&f.last?d.shiftKey?g===f.first?(b(d),function(a,b){a.shiftKey&&b.focus()}(d,e)):g===e&&(b(d),f.last.focus()):g===f.last&&(b(d),c(d,e)):(b(d),c(d,e)))},setFocusOnFirst:function(a){var b=this.getBoundariesTabableElement(a);if(b.first)return b.first.focus(),b.first},setFocusOnAnyFirst:function(a){var b=this._getFirstTabable(a)||this._getFirstFocusable(a);return b&&b.focus(),b},setFocusOnPreviousElement:function(a){for(var b=a.parentElement,c=a.previousElementSibling;c;){if(this.isFocusable(c)&&!e(c))return void c.focus();c=c.previousElementSibling}this.isFocusable(b)?b.focus():(b.classList.add("hidden-focus-style"),b.setAttribute("tabindex",-1),b.focus())},addA11yFocus:function(a){a._mouseActive=!1,a.classList.add("ha-a11y-focus"),a.listenTo(a,"mousedown",function(){a._mouseActive=!0,setTimeout(function(){a._mouseActive=!1},150)}),a.listenTo(a,"focus",function(){a._mouseActive||a.classList.add("ha-a11y-focused")},!0),a.listenTo(a,"blur",function(){a.classList.remove("ha-a11y-focused")},!0)},hideChildElementsFromAria:function(a,b){var c=!1,d=void 0,e=[];return b=b||[],Array.prototype.slice.call(a.children,0).forEach(function(a){for(c=!1,d=0;d<b.length;d++)if(b[d]===a){c=!0;break}c||(e.push({element:a,oldValue:a.getAttribute("aria-hidden")}),a.setAttribute("aria-hidden",!0))}),b.forEach(function(a){a&&(e.push({element:a,oldValue:a.getAttribute("aria-hidden")}),a.removeAttribute("aria-hidden"))}),{remove:function(){e.forEach(function(a){a.oldValue?a.element.setAttribute("aria-hidden",a.oldValue):a.element.removeAttribute("aria-hidden")})}}}}}.apply(b,d))||(a.exports=e)},function(a,b,c){"use strict";function d(a){var b,c=[];for(b in a)c.push(b);return c}function e(a,b){var c,e,f,g,h,i=a[0],j=a.length,k=1;if(j<2||null===i)return i;for(;k<j;k++)for(h=(g=d(c=a[k])).length,e=0;e<h;e++)(void 0===i[f=g[e]]||b)&&(i[f]=c[f]);return i}function f(a){return!!a&&!!a.nodeType}function g(a){return Array.isArray(a)&&a.reduce(function(a,b){return a&&f(b)},!0)}function h(a){return!!a&&"[object Object]"===a.toString()}function i(a,b){f(a)&&b.filter(function(a){return f(a)}).forEach(function(b){a.appendChild(b)})}function j(a,b,c){var d=document.createElement(a),e=h(b)?b:{},f=Array.isArray(c)?c:[];return Object.keys(e).forEach(function(a){var b=e[a];/^attr-/.test(a)?d.setAttribute(function(a){return a.substring("attr-".length,a.length)}(a),b):d[a]=b}),i(d,f),d}function k(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}function l(a){return f(a)?Array.prototype.slice.call(a.children):[]}function m(a,b){return n(a,b)[0]||null}function n(a,b){var c=[];return f(a)&&b&&(c=Array.prototype.slice.call(a.querySelectorAll(b))),c.filter(function(b){return-1!==l(a).indexOf(b)})}function o(a,b,c){var d=function(a,b){return"function"==typeof b?b.bind(a):b},e=(b||[]).reduce(function(a,b){var c=a[b];return a&&c?d(a,c):null},a);return c&&e?c(e):void 0}function p(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function q(a){return a||Ca}function r(a,b){var c=document.body.querySelector(".hrc-underlay");a||q(b).pop(),q(b).length?c.style.zIndex=q(b)[q(b).length-1]:c&&document.body.removeChild(c)}function s(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function t(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function u(a){return a.show?pa.isHandheld()?N.a.createElement("span",{"data-automation-id":"respemsg_"+a.errorMessage.replace(/ /g,"_"),className:"input-error-message",role:"alert"},a.errorMessage):N.a.createElement($a,{className:"input-error-tooltip",targetSelector:"."+a.tooltipTargetClass,role:"alert",trigger:"hover",position:["top"]},a.errorMessage):null}function v(a){return a.show?N.a.createElement("span",{className:"hi hi-circle-alert"}):null}function w(a){return a.show?N.a.createElement("span",{className:"ha-required-indicator"}," *"):null}function x(a){return a.show?N.a.createElement("span",{className:"ha-optional-indicator"}," ",a.labelOptional||cb):null}function y(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function z(){lb.push(document.activeElement)}function A(){var a=lb.pop();a&&a.focus()}function B(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function C(a,b,c,d){a.removeEventListener(b,c,!!d)}function D(a){bc.forEach(function(a){this.classList.remove("position-"+a)},a),cc.forEach(function(a){this.classList.remove("position-"+a)},a),dc.forEach(function(a){this.classList.remove("alignment-"+a)},a),ec.forEach(function(a){this.classList.remove("alignment-"+a)},a)}function E(a){a.scrollHandler&&(a.scrollParent.removeEventListener("scroll",a.scrollHandler),a.scrollHandler=null,a.scrollParent=null)}function F(a,b,c,d,e,f){var g,h=d||["left","right"],i=c||["bottom","top"];return function(a,b,c,d,e,f){var g=void 0,h=0;(g=function(a){if(a._scrollTarget)return a._scrollTarget;for(var b=a.parentElement||a.parentNode;b;){if(b._scrollTarget)return b._scrollTarget;if(b.scrollHandler)return b;if(b===a.ownerDocument)return;b=b.parentElement||b.parentNode}}(b))?(a._scrollTarget=g,a.moveHandler||(a.moveHandler=function(b){a.style.left=parseInt(a.style.left,10)+b.dx+"px",a.style.top=parseInt(a.style.top,10)+b.dy+"px",a.style.zIndex=Vb.a.getTopZindex()},a.parentCloseHandler=function(){a.classList.contains("no-transition")||a.classList.add("no-transition")},a.parentObscuredHandler=function(){a.classList.add("no-transition"),a.classList.remove("visible"),setTimeout(function(){a.classList.remove("no-transition")},20)},a.parentRevealedHandler=function(){a.classList.add("no-transition"),a.classList.add("visible"),setTimeout(function(){a.classList.remove("no-transition")},20)},g.addEventListener("ha-popup-move",a.moveHandler),g.addEventListener("close",a.parentCloseHandler),g.addEventListener("ha-popup-obscured",a.parentObscuredHandler),g.addEventListener("ha-popup-revealed",a.parentRevealedHandler),a.addEventListener("close",function a(b){g.removeEventListener("ha-popup-move",b.target.moveHandler),g.removeEventListener("close",b.target.parentCloseHandler),g.removeEventListener("ha-popup-obscured",b.target.parentObscuredHandler),g.removeEventListener("ha-popup-revealed",b.target.parentRevealedHandler),b.target.moveHandler=null,b.target.parentCloseHandler=null,b.target.parentObscuredHandler=null,b.target.parentRevealedHandler=null,b.target.removeEventListener("close",a),b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition")}))):a.scrollHandler||(a.scrollParent=ca.getScrollParent(b),a.scrollParent!==a.ownerDocument&&(a.scrollHandler=ca.throttleDebounce(function(){fc(a,b),!a.classList.contains("leave")&&a.classList.contains("visible")&&0===h&&(h=requestAnimationFrame(function(){F(a,b,c,d,e,f),h=0}))},20),a.scrollParent.addEventListener("scroll",a.scrollHandler),a.closeHandler||(a.closeHandler=function(b){h&&(cancelAnimationFrame(h),h=0),E(b.target),a._noAutoFocusLastActiveElementOnClose=a._tmpNoAutoFocusLastActiveElementOnClose,b.target.removeEventListener("close",a.closeHandler),a.closeHandler=null},a.addEventListener("close",a.closeHandler))))}(a,b,c,d,e,f),Vb.a.bringToFront(a),(g=function(a,b,c,d,e,f){var g,h={x:-1,y:-1},i={top:Xb.a.tryTopPosition,left:Xb.a.tryLeftPosition,right:Xb.a.tryRightPosition,bottom:Xb.a.tryBottomPosition},j={top:Zb.a.tryTopAlignment,left:Zb.a.tryLeftAlignment,right:Zb.a.tryRightAlignment,bottom:Zb.a.tryBottomAlignment,middle:Zb.a.tryMiddleAlignment,center:Zb.a.tryCenterAlignment},k={},l=a.querySelector(".connector"),m=void 0,n={boxShadow:{top:0,left:0,right:0,bottom:0},margin:0,parentPosition:{},spaceToNextObject:{},dimensions:{}};return f=f||{},n.parentPosition=Vb.a.getPositionInDocument(b),n.spaceToNextObject=n.parentPosition,a.style.minWidth||(a.style.minWidth=n.parentPosition.width+"px"),n.dimensions=Vb.a.getDimension(a),l?n.margin=_b+(e||ac):(n.margin=_b+(e||0),n.boxShadow=Vb.a.getBoxShadowSize(a)),c.some(function(a){var c=f[a]||i[a];if(c)return c.call(b,n,h,k),k.position})||(f.bottom||i.bottom).call(b,n,h,k,!0),g=bc.indexOf(k.position)>-1,m=g?ec:dc,d.some(function(a){if(m.indexOf(a)>-1)return(f[a]||j[a]).call(b,n,h,k),k.alignment})||g||(f.top||j.top,j.top.call(b,n,h,k,!0)),l&&"middle"===k.alignment&&(l.style.top=(Math.min(n.dimensions.height,n.parentPosition.height)-14)/2+"px"),{currentPosition:h,currentPositionType:k}}(a,b,i,h,e,f)).currentPositionType.position&&g.currentPositionType.alignment?(a.style.top&&a.style.left&&$b.emit(a,"ha-popup-move",{dx:g.currentPosition.x-parseInt(a.style.left,10),dy:g.currentPosition.y-parseInt(a.style.top,10)}),function(a,b){D(a),a.classList.add("position-"+b.currentPositionType.position),a.classList.add("alignment-"+b.currentPositionType.alignment),a.style.left=b.currentPosition.x+"px",a.style.top=b.currentPosition.y+"px"}(a,g),!0):(G(a),!1)}function G(a){a&&a.open&&a.close(),E(a)}function H(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function I(a,b,c){return a&&b?a.filter(function(a){return(a[c]||a.value)===b})[0]:null}function J(){document.body.classList.remove("body-lock")}function K(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function L(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}Object.defineProperty(b,"__esModule",{value:!0});var M=c(0),N=c.n(M),O=c(1),P=c.n(O),Q=c(2),R=c.n(Q),S=(c(8),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),T=function(a){function b(a){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),S(b,[{key:"render",value:function(){var a=this.props,b=(a.className,function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["className"])),c=R()(["ha-label",this.props.className]);return N.a.createElement("label",Object.assign({},b,{className:c}),this.props.children)}}]),b}();T.propTypes={className:P.a.string,id:P.a.string,children:P.a.node};var U,V,W,X=T,Y={guid:function(){function a(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return a()+a()},generateId:function(a){return a+"-"+this.guid()}},Z={validators:{required:function(a){return"string"==typeof a||Array.isArray(a)?Array.isArray(a)?a.length>0:!!a:!(void 0===a||null===a)},pattern:function(a,b){return new RegExp(b).test(a)},validator:function(a,b){return!b||"function"!=typeof b||b(a)},min:function(a,b,c){return"date"===c.type||parseFloat(a)>=b},max:function(a,b,c){return"date"===c.type||parseFloat(a)<=b},minLength:function(a,b){return void 0===a||null===a||a.length>=b},maxLength:function(a,b){return void 0===a||null===a||a.length<=b},minRequiredSelections:function(a,b){return void 0===a||null===a||a.length>=b}},getValidity:function(a,b){var c=this,d=Object.keys(this.validators).filter(function(a){return void 0!==b[a]}),e=!b.required&&(void 0===a||null===a||0===a.length);return!(0!==d.length&&!e)||d.every(function(d){return c.validators[d](a,b[d],b)},this)}},$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_=/(auto|scroll)/,aa=0,ba={getTextWidth:function(a,b,c){var d,e=(c||document.createElement("canvas")).getContext("2d");return e.font=b,(d=Math.floor(e.measureText(a).width))?d+1:d},removeNodesSafe:function(a,b){var c=[];return Array.prototype.slice.apply(b).filter(function(b){return a===b.parentNode}).map(function(b){c.push(a.removeChild(b)),b.render&&b.render()}),c},appendChildCollection:function(a,b){var c;for(c=0;c<b.length;++c)a.appendChild(b[c])},stopEvent:function(a){a.stopPropagation(),a.preventDefault()},getAnimationEventNames:function(){return{animationstart:"webkitAnimationName"in document.documentElement.style?"webkitAnimationStart":"animationstart",animationend:"webkitAnimationName"in document.documentElement.style?"webkitAnimationEnd":"animationend",transitionend:"onwebkittransitionend"in window?"webkitTransitionEnd":"transitionend"}},getComponentFromElement:function(a,b){for(;a&&a.tagName!==b;)a=a.parentNode;return a},getComponentFromElementByClassName:function(a,b){for(;a&&!a.classList.contains(b);)a=a.parentNode;return a},validationRequired:function(a){return a.required||a.pattern||a.validator||a.min||a.max||a.numeric||a.password||a.minDate||a.maxDate},extend:function(){return e(Array.prototype.slice.call(arguments),!1)},mixin:function(){return e(Array.prototype.slice.call(arguments),!0)},stopNativeEvent:function(a,b,c){a.listenTo(b,c,function(a){a.stopPropagation()})},getSafeTargetFromEvent:function(a){return a.relatedTarget||a.explicitOriginalTarget||document.activeElement},getNextSiblingOfType:function(a,b){for(;(a=a.nextSibling)&&a.nodeName!==b;);return a},getPrevSiblingOfType:function(a,b){for(;(a=a.previousSibling)&&a.nodeName!==b;);return a},getArrayDiff:function(a,b){return a=a||[],b=b||[],a.filter(function(a){return b.indexOf(a)<0})},getDirectChildByType:function(a,b){var c,d=a.children;return Array.prototype.forEach.call(d,function(a){a.tagName.toLowerCase()===b&&(c=a)}),c},getScrollParent:function(a){var b,c=a,d="absolute"===getComputedStyle(a).position,e=!1;do{if(null===(c=c.parentElement||c.parentNode))return a.ownerDocument;c!==a.ownerDocument?(b=getComputedStyle(c),d&&"static"===b.position||(_.test(b.overflow)||_.test(b.overflowX)||_.test(b.overflowY))&&(e=!0)):e=!0}while(!e);return c},isEmptyObject:function(a){for(var b in a)return!1;return!0},invertObject:function(a){var b={},c=Object.prototype.toString;return Object.keys(a).forEach(function(d){var e=a[d];null!=e&&"function"!=typeof e.toString&&(e=c.call(e)),b[e]=d}),b},uniqueBy:function(a,b){if(!Array.isArray(a))return a;var c=[],d={};return a.filter(function(a){if(a.hasOwnProperty(b))return!(c.indexOf(a[b])>-1||(c.push(a[b]),0));var e=JSON.stringify(a);return!d[e]&&(d[e]=!0)})},sortBy:function(a,b){return Array.isArray(a)?a.sort(function(a,c){var d=1;return"-"===b[0]&&(d=-1,b=b.substr(1)),(a[b]<c[b]?-1:a[b]>c[b]?1:0)*d}):a},uniqueIds:function(){return""+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"")+ ++aa},sanitize:function(a){return a&&"string"==typeof a?a.replace(/<script>/g,"&lt;script&gt;").replace(/\<\/script>/g,"&lt;/script&gt;"):a},unsanitize:function(a){return a&&"string"==typeof a?a.replace(/&lt;/g,"<").replace(/&gt;/g,">"):a},throttle:function(a,b){var c=!0;return function(){c&&(c=!1,setTimeout(function(){c=!0},b),a.apply(this,arguments))}},throttleDebounce:function(a,b){var c=!0,d=null;return function e(){var f=this;c?(c=!1,setTimeout(function(){c=!0,d&&e.apply(f)},b),d?(a.apply(this,d),d=null):a.apply(this,arguments)):d=arguments}},type:function(a){switch(null==a?""+a:Object.prototype.toString.call(a).slice(8,-1).toLowerCase()){case"string":return String;case"boolean":return ba.YesNoType;case"number":return Number;case"object":return Object;case"array":return Array}},updateClassWithProps:function(a,b){if(a.classList.length>0){var c=[];return a.supportedClasses?(c=a.supportedClasses.filter(function(b){return a.classList.contains(b)&&-1===c.indexOf(b)}),(b?c.concat(b.split(" ")):c).join(" ").trim()):(b&&b.split(" ").forEach(function(b){a.classList.contains(b)||a.classList.add(b)}),a.classList.toString())}return b||""},YesNoType:{parse:function(a){return"yes"===a.toLowerCase()},stringify:function(a){return a?"yes":"no"}},toggleSuffixText:function(a,b,c){return c?a&&a.slice(-2)!==b&&(a+=b):a&&a.slice(-2)===b&&(a=a.slice(0,-2)),a},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}},createElement:j,appendChildren:i,attachContentToNode:function(a,b){return a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?a.forEach(function(a){a&&a.nodeType&&b.appendChild(a)}):a.nodeType&&b.appendChild(a)),b},removeAllChildrenFrom:k,wrapIfNotWrapped:function(a,b){var c=null,d=String.prototype.toLowerCase;return a&&(f(b)?c=d.call(b.tagName)===d.call(a)?b:j(a,{},[b]):g(b)&&(c=j(a,{},b))),c},setAttributes:function(a,b){var c;return f(a)&&h(b)&&Object.keys(b).forEach(function(d){c=b[d],a.setAttribute(d,c)}),a},arrayOfChildrenFrom:l,queryChildOf:m,queryChildrenOf:n,isNode:f,getFunctionName:function(a){if("function"==typeof a){if(a.name)return a.name;var b=a.toString().match(/^function\s*([^\s(]+)/);return b?b[1]:"anonymous func"}},checkReactChildrenType:function(a,b,c,d){var e,f,g,h=a||[];for(var i in h=Array.isArray(h)?h:[h],c=Array.isArray(c)?c:[c],h){for(f=!0,g=h[i].type,e=0;e<c.length;e++)if(g===c[e]){f=!1;break}if(f)return new Error(b+"'s children can only have one instance of the following types: "+d+"; not accept type: "+g)}},isOpen:function(a){return a&&("HA-POPOVER"===a.nodeName&&a.open||"HA-MODAL"===a.nodeName&&a.classList.contains("show"))},showPopoverOrModal:function(a,b,c){a&&(this.isOpen(a)?c.setPosition(a,b,["bottom","top"],["left","right"]):c.show(a,b,["bottom","top"],["left","right"]))},replaceChildrenOf:function(a,b){f(a)&&(f(b)?(k(a),a.appendChild(b)):g(b)&&(k(a),i(a,b)))},contentQueryFactory:function(a,b){return function(c){var d=[b[c],c].join(" > "),e=a.querySelector(d),f=m(a,c);return e||f}},ifSafeChain:o,ifExists:function(a,b){return o(a,[],b)},customMixin:function(a,b,c,d){var e,f,g={};for(e in b)f=b[e],e in a&&(a[e]===f||e in g&&g[e]===f)||(a[e]=c?c(f,d):f);return a},clone:function(a,b){if((b=b||[]).indexOf(a)>=0)return null;if(!a||"object"!==(void 0===a?"undefined":$(a))||"function"==typeof a)return a;if(a.nodeType&&"cloneNode"in a)return b.push(a),a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var c;if(Array.isArray(a))b.push(a),c=[];else{b.push(a);try{c=a.constructor?new a.constructor:{}}catch(a){c={}}}return ba.customMixin(c,a,ba.clone,b)},animateScrollTo:function(a,b,c){var d=(new Date).valueOf(),e=b,f=a.scrollTop;setTimeout(function b(){var g=(new Date).valueOf(),h=Math.min((g-d)/c,1);a.scrollTop=f+(e-f)*h,h<1&&setTimeout(b,33)},33)},hidePopoverOrModal:function(a,b){"HA-MODAL"===a.nodeName?a.close():b.hide(a)},closest:function(a,b){if("function"==typeof a.closest)return a.closest(b);var c,d,e=b.charAt(0);for("["===e&&(c=(b=b.substr(1,b.length-2)).split("=")).length>1&&(d=!0,c[1]=c[1].replace(/'/g,"").replace(/'/g,""));a&&a!==document&&1===a.nodeType;a=a.parentNode)if("."===e){if(a.classList.contains(b.substr(1)))return a}else if("#"===e){if(a.id===b.substr(1))return a}else if("["===e&&a.hasAttribute(c[0])){if(!d)return a;if(a.getAttribute(c[0])===c[1])return a}else if(a.tagName.toLowerCase()===b)return a;return null}},ca=ba,da=c(9),ea=c.n(da),fa={pc:"pc",tablet:"tablet",mobile:"mobile"},ga=[],ha="portrait",ia="landscape",ja=!1,ka=0,la=function(){var a;for(a=ga.length-1;a>=0;a--)ga[a].remove&&ga.splice(a,1)},ma=ca.debounce(la,250,!1),na=function(){W=V,(V={}).hasTouch="ontouchstart"in document.documentElement||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,V.orientation=window.matchMedia("(orientation: landscape)").matches?ia:ha,V.width=window.screen.width,V.height=window.screen.height;var a=U._uaParser().device;V.deviceType=a.type||"pc",V.isDesktop="pc"===V.deviceType,la(),ga.forEach(function(a){a.listener===a.callback?a.callback(V,W):"string"==typeof a.callback?a.listener[a.callback](V,W):a.callback.bind(a.listener)(V,W)})},oa=function(){return document.body.dataset.view||""};U={_uaParser:ea.a,deviceTypes:fa,isDesktop:function(){return V.deviceType===fa.pc},isHandheld:function(){return V.deviceType===fa.mobile||V.deviceType===fa.tablet||"mobile"===oa()},isMobile:function(){return V.deviceType===fa.mobile||"mobile"===oa()},isTablet:function(){return V.deviceType===fa.tablet||"mobile"===oa()},getScreenParameters:function(){return V},hasTouch:function(){return V.hasTouch}},na(),na=ca.debounce(na,250,!1),U.normalize=function(a,b){var c=a.match(/[\?:]|[^:\?]*/g),d=0;return(a=function a(b){var e=c[d++];return":"===e?0:"?"===c[d++]?!b&&U[e]()?a():(a(!0),a(b)):e||0}())&&b(a)},U.getOSName=function(){return this._uaParser().os.name},U.getOSVersion=function(a){var b=parseFloat(this._uaParser().os.version);return a?Math.round(b):b},U.isAndroid=function(){return"Android"===this.getOSName()},U.isAndroidWebView=function(){return!!this.isAndroid()&&this._uaParser().ua.match(/wv/g)},U.addiOS9ImmediateFocus=function(){if(!(ja||(ja=!0,U.getOSVersion(!1)>=9.3||"iOS"!==U.getOSName()))){var a=document.body,b=!1,c=0,d=0;a.addEventListener("touchstart",function(a){b=!1,c=a.touches[0].clientX,d=a.touches[0].clientY}),a.addEventListener("touchmove",function(a){(Math.abs(a.touches[0].clientX-c)>10||Math.abs(a.touches[0].clientY-d)>10)&&(b=!0)}),a.addEventListener("touchend",function(a){if(!b){var c=a.changedTouches[0].target;3===c.nodeType&&(c=c.parentNode),function(a,b,c){!b||"HA-CHECKBOX"!==b.tagName&&"HA-TEXTAREA"!==b.tagName&&"HA-TEXT-FIELD"!==b.tagName&&"HA-DATE-PICKER"!==b.tagName?document.activeElement&&"INPUT"===document.activeElement.tagName&&document.activeElement.blur():(c.preventDefault(),b.ownerTag||"HA-TEXT-FIELD"!==b.tagName&&"HA-DATE-PICKER"!==b.tagName&&"HA-TEXTAREA"!==b.tagName?a.click():a.focus())}(c,c.parentElement,a)}}),a.addEventListener("touchcancel",function(){b=!1,c=0,d=0})}},U.getOrientation=function(){return window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait"},U.isIOSDevice=function(){return U.isHandheld()&&"iOS"===U.getOSName()},U.isIPhonePlus=function(){return U.isIOSDevice()&&window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches},U.isIPhonePlusWithTabBar=function(){return U.isIPhonePlus()&&window.innerHeight<370},U.isChrome=function(){return!!window.chrome&&!!window.chrome.webstore},U.isSafari=function(){return/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||"undefined"!=typeof safari&&safari.pushNotification).toString()},U.isFirefox=function(){return"undefined"!=typeof InstallTrigger},U.isEdge=function(){return!U.isIE11()&&!!window.StyleMedia},U.isIE11=function(){return!!document.documentMode},U.stopTouchMove=function(a,b){a&&(b?a.addEventListener("touchmove",ca.stopEvent):a.removeEventListener("touchmove",ca.stopEvent,!1))},U.bodyLock=function(){ka=window.pageYOffset,document.body.classList.add("body-lock"),U.stopTouchMove(document.body,!0)},U.bodyUnlock=function(){ka&&window.scrollTo(0,ka),ka=0,document.body.classList.remove("body-lock"),U.stopTouchMove(document.body,!1)},U.load=function(a,b,c){a?b([a],c):c()},document.body.classList.add(U.isDesktop()?"desktop":"handheld"),U.isHandheld()&&(U.getScreenParameters().deviceType===fa.mobile?document.body.classList.add("mobile"):document.body.classList.add("tablet")),U.registerCallback=function(a,b){return b||(b=a),ga.push({listener:b,callback:a}),{remove:function(){var a;for(a=ga.length-1;a>=0;a--)ga[a].listener===b&&(ga[a].remove=!0,ma())}}},window.addEventListener("orientationChange",na),window.addEventListener("resize",na);var pa=U,qa=c(4),ra=c.n(qa),sa=c(13),ta=c.n(sa),ua=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),va=2e4,wa=va,xa=function(){function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)}return ua(a,null,[{key:"getBaseZindex",value:function(){return va}},{key:"setBaseZindex",value:function(a){va!==wa?console.warn("The global z-index is already in use; baseZindex should be set at application initialization"):wa=a,va=a}},{key:"getTopZindex",value:function(){return wa++}},{key:"getPageSize",value:function(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:c.clientHeight}}},{key:"tryTopPosition",value:function(a,b,c,d,e,f){var g=b.top,h=d+e.bottom,i=c.height+h,j=window.pageYOffset||(document.documentElement||{}).scrollTop,k={};return i<g&&(k.position="top",k.y=b.top-i+j),Object.assign(f,k)}},{key:"tryBottomPosition",value:function(a,b,c,d,e,f,g){var h=d+e.top,i=this.getPageSize(a.ownerDocument).height-b.bottom,j=c.height+h,k=window.pageYOffset||(document.documentElement||{}).scrollTop,l={};return(j<i||g)&&(l.position="bottom",l.y=b.bottom+h+k),Object.assign(f,l)}},{key:"tryRightPosition",value:function(a,b,c,d,e,f){var g=d+e.left,h=this.getPageSize(a.ownerDocument).width-b.right,i=c.width+g,j=window.pageXOffset||(document.documentElement||{}).scrollLeft,k={};return i<h&&(k.position="right",k.x=b.right+g+j),Object.assign(f,k)}},{key:"tryLeftPosition",value:function(a,b,c,d,e,f){var g=d+e.right,h=b.left,i=c.width+g,j=window.pageXOffset||(document.documentElement||{}).scrollLeft,k={};return i<h&&(k.position="left",k.x=b.left-i+j),Object.assign(f,k)}},{key:"tryLeftAlignment",value:function(a,b,c,d){var e=this.getPageSize(a.ownerDocument).width-b.left,f={};return c.width<e&&(f.alignment="left",f.x=b.left),Object.assign(d,f)}},{key:"tryCenterAlignment",value:function(a,b,c,d){var e=this.getPageSize(a.ownerDocument).width,f=c.width,g=c.width/2,h=b.left+b.width/2,i={};return f<e&&(i.alignment="center",i.x=h>g?h+g<e?h-g:e-c.width:0),Object.assign(d,i)}},{key:"tryRightAlignment",value:function(a,b,c,d,e){var f=b.right,g={};return(c.width<f||e)&&(g.alignment="right",g.x=b.left-c.width+b.width),Object.assign(d,g)}},{key:"tryTopAlignment",value:function(a,b,c,d,e){var f=this.getPageSize(a.ownerDocument).height-b.top,g=c.height,h=window.pageYOffset||(document.documentElement||{}).scrollTop,i={};return(g<f||e)&&(i.alignment="top",i.y=b.top+h),Object.assign(d,i)}},{key:"tryMiddleAlignment",value:function(a,b,c,d){var e=this.getPageSize(a.ownerDocument).height,f={},g=window.pageYOffset||(document.documentElement||{}).scrollTop;return f.alignment="middle",b.top+c.height<e?f.y=b.top+b.height/2-c.height/2+g:f.y=Math.max(0,e-c.height),Object.assign(d,f)}},{key:"tryBottomAlignment",value:function(a,b,c,d){var e=b.bottom,f=c.height,g=window.pageYOffset||(document.documentElement||{}).scrollTop,h={};return f<e&&(h.alignment="bottom",h.y=b.bottom-c.height+g),Object.assign(d,h)}},{key:"getPositionInDocument",value:function(a){var b=a.getBoundingClientRect(),c=window.pageXOffset||(document.documentElement||{}).scrollLeft,d=window.pageYOffset||(document.documentElement||{}).scrollTop;return{left:Math.round(b.left)+c,right:Math.round(b.right)+c,top:Math.round(b.top)+d,bottom:Math.round(b.bottom)+d,width:Math.round(b.width),height:Math.round(b.height)}}},{key:"getElementPosition",value:function(a,b,c,d,e,f,g){var h=this,i={x:-1,y:-1,position:null,alignment:null},j={top:this.tryTopPosition,left:this.tryLeftPosition,right:this.tryRightPosition,bottom:this.tryBottomPosition},k={top:this.tryTopAlignment,left:this.tryLeftAlignment,right:this.tryRightAlignment,bottom:this.tryBottomAlignment,middle:this.tryMiddleAlignment,center:h.tryCenterAlignment},l=this.getPositionInDocument(a),m=b.getBoundingClientRect();f=f||{},e=5+(e||0);var n=this.getBoxShadowSize(a),o={bottom:!1,top:!1,left:!1,right:!1},p=Array.isArray(c)?c:c.split(" "),q=Array.isArray(d)?d:d.split(" "),r=p.some(function(a){o[a]=!0;var c=f[a]||j[a];if(c){var d=c.call(h,b,m,l,e,n,i);return!!d.position&&(Object.assign(i,d),!0)}});if(r||g||Object.keys(o).forEach(function(a){if(!o[a]&&!r){var c=(f[a]||j[a]).call(h,b,m,l,e,n,i);c.position&&(Object.assign(i,c),r=!0)}}),!r){var s=f.bottom||j.bottom;Object.assign(i,s.call(h,b,m,l,e,n,i,!0))}var t=["top","bottom"].indexOf(i.position)>-1,u=void 0,v=void 0;t?(u=["left","center","right"],v={left:!1,center:!1,right:!1}):(u=["top","middle","bottom"],v={top:!1,middle:!1,bottom:!1});var w=q.some(function(a){if(v[a]=!0,u.indexOf(a)>-1){var c=k[a].call(h,b,m,l,i);return!!c.alignment&&(Object.assign(i,c),!0)}});if(w||Object.keys(v).forEach(function(a){if(!v[a]&&!w){var c=k[a].call(h,b,m,l,i);c.alignment&&(Object.assign(i,c),w=!0)}}),!w)if(t){var x=f.right||k.right;Object.assign(i,x.call(h,b,m,l,i,!0))}else{var y=f.top||k.top;Object.assign(i,y.call(h,b,m,l,i,!0))}return{currentPosition:{x:i.x,y:i.y},currentPositionType:{position:i.position,alignment:i.alignment}}}},{key:"getBoxShadowSize",value:function(a){var b=window.getComputedStyle(a).getPropertyValue("box-shadow"),c={left:0,right:0,top:0,bottom:0};if("none"===b)return c;var d=(b=(b=(b=b.replace(/rgba?\([^\)]+\)/gi,"")).replace(/#[0-9a-f]+/gi,"")).replace(/[a-z]+/gi,"").trim()).split(" "),e=d.length>0?parseInt(d[0],10):0,f=d.length>1?parseInt(d[1],10):0,g=d.length>2?parseInt(d[2],10):0,h=d.length>3?parseInt(d[3],10):0;return c.left=Math.max(h-e+.5*g,0),c.right=Math.max(h+e+.5*g,0),c.top=Math.max(h-f+.5*g,0),c.bottom=Math.max(h+f+.5*g,0),c}}]),a}(),ya=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),za=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleScroll=function(){requestAnimationFrame(c.updatePosition)},c.updatePosition=function(){if(c._isMounted){var a=ra.a.findDOMNode(c);if(a){var b=c.props.tooltipTarget||a.ownerDocument.querySelector(c.props.targetSelector)||a.previousElementSibling;if(b){var d=xa.getElementPosition(a,b,c.props.position,c.props.alignment,c.props.margin,c.props.customPositioningMethods,c.props.forcePosition);c.setState({position:"position-"+d.currentPositionType.position,alignment:"alignment-"+d.currentPositionType.alignment,left:d.currentPosition.x,top:d.currentPosition.y})}}}},c.addParentHandlers=function(){if(c.context.safeContext){var a=c.context.safeContext;a.parentPosition&&(c.unsubscribeParentPosition=a.parentPosition(function(a){if(a){var b=c.state.targetMovedOutOfViewport,d=c.props.tooltipTarget||document.querySelector(c.props.targetSelector),e=xa.getPositionInDocument(d);e.bottom<a.top||e.top>a.bottom||e.right<a.left||e.left>a.right?b=!0:c.state.targetMovedOutOfViewport&&(b=!1),c.setState({targetMovedOutOfViewport:b}),"number"==typeof c.state.left&&"number"==typeof c.state.top&&"number"==typeof a.x&&"number"==typeof a.y&&c.setState({left:c.state.left-a.x,top:c.state.top-a.y})}})),a.parentShow&&(c.unsubscribeParentShow=a.parentShow(function(a){c.setState({parentShow:a})}))}},c.state={targetMovedOutOfViewport:!1,parentShow:!0},c.alignmentReadjustedCount=0,c.positionForceUpdated=!1,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),ya(b,[{key:"componentDidMount",value:function(){var a=this;this._isMounted=!0,this.addParentHandlers(),this.props.underlay||window.addEventListener("scroll",this.handleScroll,!0),ta.a.onResize(function(){return requestAnimationFrame(a.updatePosition)}),this.updatePosition()}},{key:"componentWillReceiveProps",value:function(a){a.forcePositionUpdate&&(this.positionForceUpdated=!1)}},{key:"componentDidUpdate",value:function(a){if(this.props.show){var b=Array.isArray(this.props.alignment)?this.props.alignment:this.props.alignment.split(" ");a.show?b.indexOf("right")>=0&&this.alignmentReadjustedCount<2?(this.alignmentReadjustedCount+=1,this.updatePosition()):this.props.forcePositionUpdate&&!this.positionForceUpdated&&(this.updatePosition(),this.positionForceUpdated=!0):this.updatePosition()}else if(this.props.targetSelector!==a.targetSelector)this.updatePosition();else{this.alignmentReadjustedCount=0;var c=!1;for(var d in this.props.style)this.props.style[d]!==a.style[d]&&(c=!0);c&&this.updatePosition()}}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,ta.a.offResize(this.updatePosition),this.unsubscribeParentPosition&&this.unsubscribeParentPosition(),this.unsubscribeParentShow&&this.unsubscribeParentShow(),this.props.underlay||window.removeEventListener("scroll",this.handleScroll,!0)}},{key:"render",value:function(){var a;if(this.state.targetMovedOutOfViewport||!this.state.parentShow)return null;var b=N.a.Children.only(this.props.children);return N.a.cloneElement(b,{show:this.props.show&&this.state.parentShow,className:R()((a={},p(a,this.state.position,this.state.position),p(a,this.state.alignment,this.state.alignment),a)),style:Object.assign({top:this.state.top+"px",left:this.state.left+"px",position:"absolute"},this.props.style)})}}]),b}();za.propTypes={alignment:P.a.oneOfType([P.a.array,P.a.string]),children:P.a.node,customPositioningMethods:P.a.object,forcePosition:P.a.bool,forcePositionUpdate:P.a.bool,margin:P.a.number,position:P.a.oneOfType([P.a.array,P.a.string]),show:P.a.bool,style:P.a.object,targetSelector:P.a.string,tooltipTarget:P.a.object,underlay:P.a.bool},za.defaultProps={children:null,forcePosition:!1,forcePositionUpdate:!1,targetSelector:"",position:"bottom top",alignment:["left","right"],margin:0,customPositioningMethods:{},show:!1,style:{},tooltipTarget:null,underlay:!0},za.contextTypes={safeContext:P.a.object};var Aa=za,Ba=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Ca=[],Da=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={close:!1},c.portal=null,c.childZIndex=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Ba(b,[{key:"componentWillUpdate",value:function(a){a.show||(a.show!==this.props.show?this.setState({close:!0}):a.show===this.props.show&&this.state.close&&this.setState({close:!1}))}},{key:"componentWillUnmount",value:function(){this.portal&&(document.body.removeChild(this.portal),this.portal=null,this.props.underlay&&r(this.props.disableZIndex,this.props.zIndexArray))}},{key:"show",value:function(){var a=void 0;if(this.portal||(this.portal=document.createElement("div"),document.body.appendChild(this.portal)),this.childZIndex||(this.props.underlay&&function(a,b){var c=document.body.querySelector(".hrc-underlay");if(c||((c=document.createElement("div")).classList.add("hrc-underlay"),c.tabIndex=-1,document.body.appendChild(c)),!a){var d=xa.getTopZindex();c.style.zIndex=d,q(b).push(d)}}(this.props.disableZIndex,this.props.zIndexArray),this.props.disableZIndex||(this.childZIndex=xa.getTopZindex())),this.props.disableZIndex)a=N.a.cloneElement(this.props.children,{underlay:this.props.underlay});else if(this.props.style){var b=Object.assign({},this.props.style,{zIndex:this.childZIndex});a=N.a.cloneElement(this.props.children,{style:b,underlay:this.props.underlay})}else a=N.a.cloneElement(this.props.children,{style:{zIndex:this.childZIndex},underlay:this.props.underlay});return a}},{key:"close",value:function(){var a=void 0;if(this.childZIndex=null,this.props.underlay&&r(this.props.disableZIndex,this.props.zIndexArray),this.props.disableZIndex)a=N.a.cloneElement(this.props.children,{underlay:this.props.underlay});else if(this.props.style){var b=Object.assign({},this.props.style,{zIndex:this.childZIndex});a=N.a.cloneElement(this.props.children,{style:b,underlay:this.props.underlay})}else a=N.a.cloneElement(this.props.children,{style:{zIndex:this.childZIndex},underlay:this.props.underlay});return a}},{key:"render",value:function(){var a=void 0;return this.props.show?a=this.show():this.state.close&&(a=this.close()),a&&this.portal?ra.a.createPortal(a,this.portal):null}}]),b}();Da.propTypes={children:P.a.element.isRequired,disableZIndex:P.a.bool,show:P.a.bool.isRequired,style:P.a.object,underlay:P.a.bool,zIndexArray:P.a.array},Da.defaultProps={disableZIndex:!1,style:{},underlay:!0,zIndexArray:null};var Ea=Da,Fa=function a(){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,a)};Fa.filterProps=function(a,b){return Object.keys(a).reduce(function(a,c){var d=a;return b[c]&&(d[c]=b[c]),d},{})},Fa.passthroughProps=function(a,b,c){var d=c.omit,e=void 0===d?[]:d,f=c.force,g=void 0===f?[]:f,h=Object.keys(b).reduce(function(a,b){var c=a;return c[b]=!0,c},{});return h=e.reduce(function(a,b){var c=a;return c[b]=!1,c},h),h=g.reduce(function(a,b){var c=a;return c[b]=!0,c},h),Object.keys(a).reduce(function(b,c){var d=b;return h[c]||(d[c]=a[c]),d},{})},Fa.getChildByType=function(a,b){return a.find(function(a){return a.type===b})};var Ga=Fa,Ha=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Ia=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Ha(b,[{key:"render",value:function(){var a=this.props.show;return N.a.createElement(Ea,Object.assign({show:a,underlay:!1},Ga.filterProps(Ea.propTypes,this.props)),N.a.createElement(Aa,Ga.filterProps(Aa.propTypes,this.props),this.props.children))}}]),b}();Ia.propTypes={children:P.a.node,show:P.a.bool},Ia.defaultProps={children:null,show:!1};var Ja=Ia,Ka=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),La={MOUNTED:"MOUNTED",UNMOUNTED:"UNMOUNTED",ENTERING:"ENTERING",ENTERED:"ENTERED",EXITING:"EXITING",EXITED:"EXITED"},Ma={enter:"ENTER",exit:"EXIT",none:"NONE"},Na=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={status:a.renderOnMount||a.transition===Ma.enter?La.MOUNTED:La.UNMOUNTED},c.performEnterAfterUpdate=!1,c.listeners={},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Ka(b,[{key:"componentDidMount",value:function(){this.props.transition===Ma.enter?this.performEnter(this.props):this.props.transition===Ma.exit&&this.state.status===La.MOUNTED&&this.performExit(this.props)}},{key:"componentWillReceiveProps",value:function(a){var b=this.state.status;a.transition!==this.props.transition&&(a.transition===Ma.enter?b===La.MOUNTED||b===La.EXITED||b===La.EXITING?this.performEnter(a):b===La.UNMOUNTED&&(this.performEnterAfterUpdate=!0,this.setState({status:La.MOUNTED})):b!==La.ENTERING&&b!==La.ENTERED||this.performExit(a))}},{key:"componentDidUpdate",value:function(){this.performEnterAfterUpdate&&this.performEnter(this.props)}},{key:"performEnter",value:function(a){var b=this,c=ra.a.findDOMNode(this);a.onEnter&&a.onEnter(c),this.setState({status:La.ENTERING},function(){a.onEntering&&a.onEntering(c),b.listeners.onEnterTransitionEnd=function(d){d&&d.stopPropagation(),c.removeEventListener("animationend",b.listeners.onEnterTransitionEnd,!1),b.setState({status:La.ENTERED},function(){a.onEntered&&a.onEntered(d,c)})}.bind(b),c.addEventListener("animationend",b.listeners.onEnterTransitionEnd)}),this.performEnterAfterUpdate=!1}},{key:"performExit",value:function(a){var b=this,c=ra.a.findDOMNode(this);a.onExit&&a.onExit(c),this.setState({status:La.EXITING},function(){a.onExiting&&a.onExiting(c),b.listeners.onExitTransitionEnd=function(d){d&&d.stopPropagation(),c.removeEventListener("animationend",b.listeners.onExitTransitionEnd,!1),b.setState({status:La.EXITED},function(){a.onExited&&a.onExited(d,c),a.unmountOnExit&&b.setState({status:La.UNMOUNTED},function(){a.onUnmount&&a.onUnmount(c)})})}.bind(b),c.addEventListener("animationend",b.listeners.onExitTransitionEnd)})}},{key:"getClassName",value:function(a){var b;return(b={},s(b,La.EXITING,this.props.exitClassName),s(b,La.EXITED,this.props.exitedClassName?this.props.exitedClassName:this.props.exitClassName),s(b,La.ENTERING,this.props.enterClassName),s(b,La.ENTERED,this.props.enteredClassName?this.props.enteredClassName:this.props.enterClassName),b)[a]}},{key:"render",value:function(){if(this.state.status===La.UNMOUNTED)return null;var a=Ga.passthroughProps(this.props,b.propTypes,{force:["children","className","show"]}),c=N.a.Children.only(this.props.children);return N.a.cloneElement(c,Object.assign({},a,{className:R()(c.props.className,this.props.className,this.getClassName(this.state.status))}))}}]),b}();Na.propTypes={renderOnMount:P.a.bool,transition:P.a.oneOf([Ma.enter,Ma.exit,Ma.none]),unmountOnExit:P.a.bool,enterClassName:P.a.string,enteredClassName:P.a.string,exitClassName:P.a.string,exitedClassName:P.a.string,onEnter:P.a.func,onEntering:P.a.func,onEntered:P.a.func,onExit:P.a.func,onExiting:P.a.func,onExited:P.a.func,onUnmount:P.a.func},Na.defaultProps={renderOnMount:!1,transition:"",unmountOnExit:!1,enterClassName:"",enteredClassName:"",exitClassName:"",exitedClassName:"",onEnter:function(){},onEntering:function(){},onEntered:function(){},onExit:function(){},onExiting:function(){},onExited:function(){},onUnmount:function(){}};var Oa=function(a){return Boolean(a.offsetWidth||a.offsetHeight||a.getClientRects().length)},Pa=function(a){var b,c,d=window.getComputedStyle(a);return"inline"===d.display?a.getClientRects().length:(b=+d.height.slice(0,-2),c=+d.lineHeight.slice(0,-2)||1.2*+d.fontSize.slice(0,-2),Math.round(b/c))},Qa=function(a,b){return Pa(a)>b.lines},Ra=function a(b,c,d){var e=!1,f=Array.prototype.slice.call(b.cloneNode(!0).childNodes);return c||(c=b),b.innerHTML="",f.forEach(function(f){if(f.tagName&&"script"===f.tagName.toLowerCase())b.appendChild(f);else{if(e)return!0;b.appendChild(f),Qa(c,d)&&(e=3===f.nodeType?function(a,b,c){var d=a.nodeValue,e=-1!==d.indexOf(" ")?" ":"",f=d.split(e),g=-1,h=0,i=f.length-1,j=void 0;for(c.fallbackToLetter&&0===h&&0===i&&(e="",i=(f=d.split(e)).length-1);h<=i&&(0!==h||0!==i)&&(j=Math.floor((h+i)/2))!==g;)g=j,a.nodeValue=f.slice(0,g+1).join(e)+c.ellipsis,Array.prototype.forEach.call(b.childNodes,function(a){if(3!==a.nodeType){var b=a.style.display;a.style.display="none",a.style.display=b}}),Qa(b,c)?i=g:(position=g,h=g);return-1===position||1===f.length&&0===f[0].length||(d=function(a,b){for(;b.lastCharacter.indexOf(a.slice(-1))>-1;)a=a.slice(0,-1);return a+=b.ellipsis}(f.slice(0,position+1).join(e),c),a.nodeValue=d),!0}(f,c,d):a(f,c,d))}}),e},Sa=function a(b,c){var d=[];if(!b||0===b.length||!c||0===c.length)return!1;if(b.length>1)return Array.prototype.forEach.call(b,function(b,e){d[e]=a(b,c)}),d;var e,f,g,h,i=Array.prototype.slice.call(b.childNodes),j=!1,k=void 0,l=function(a,b){var c=void 0;for(c in a)b.hasOwnProperty(c)&&(b[c]=a[c]);return b}(c,{ellipsis:"... ",fallbackToLetter:!0,lastCharacter:[" ","",",",";","!","?"],lines:0,inPageOffset:100}),m={revert:function(){b.innerHTML="",k&&(k.cancel(),k=null),i.forEach(function(a){try{b.appendChild(a)}catch(a){b.appendChild(document.createTextNode(""))}}),b.setAttribute("style",b.getAttribute("ha-ellipsis-style")||""),b.removeAttribute("ha-ellipsis")},originalContent:i,isTruncated:!1},n=function(){b.setAttribute("ha-ellipsis",!0),b.setAttribute("ha-ellipsis-style",b.getAttribute("style")||""),b.style.wordWrap="break-word",b.style.whiteSpace="normal",Qa(b,l)&&(j=Ra(b,null,l)),m.isTruncated=j};return b.hasAttribute("ha-ellipsis")&&m.revert(),Oa(b)?n():(e=function(){Oa(b)&&(k&&(k.cancel(),k=null),n())},f=l.inPageOffset,g=(new Date).getTime(),h=void 0,h=requestAnimationFrame(function a(){h=requestAnimationFrame(a),(new Date).getTime()-g>=f&&(e.call(),g=(new Date).getTime())}),k={cancel:function(){return cancelAnimationFrame(h)}}),m};Sa.getLines=Pa;var Ta=Sa,Ua=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Va=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c.tooltipInner=a},c.renderWithEllipsis=pa.isHandheld(),c.tooltipInner=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Ua(b,[{key:"componentDidMount",value:function(){this.renderWithEllipsis&&Ta(this.tooltipInner,{lines:5})}},{key:"render",value:function(){return N.a.createElement("div",{className:"tooltip-inner","aria-describedby":this.props.ariaDescribedById,ref:this.handleRef},this.props.children)}}]),b}();Va.propTypes={ariaDescribedById:P.a.string};var Wa=Va,Xa=(c(14),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Ya={CUSTOM:"custom",HOVER:"hover",FOCUS:"focus"},Za=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.attachEvents=function(){c.targetElement&&(c.props.trigger===Ya.HOVER?(c.targetElement.addEventListener("mouseenter",c.showToolTip),!c.props.dismissible&&c.props.duration<=0&&c.targetElement.addEventListener("mouseleave",c.hideToolTip)):c.props.trigger===Ya.FOCUS&&(c.targetElement.addEventListener("focus",c.showToolTip),!c.props.dismissible&&c.props.duration<=0&&c.targetElement.addEventListener("focusout",c.hideToolTip)))},c.removeEvents=function(){c.targetElement&&(c.props.trigger===Ya.HOVER?(c.targetElement.removeEventListener("mouseenter",c.showToolTip),c.props.duration<=0&&c.targetElement.removeEventListener("mouseleave",c.hideToolTip)):(c.targetElement.removeEventListener("focus",c.showToolTip),c.props.duration<=0&&c.targetElement.removeEventListener("focusout",c.hideToolTip)))},c.showToolTip=function(){c.state.show||c.setState({show:!0}),c.handleShow(),!c.props.dismissible&&c.props.duration>0&&(c.timer=setTimeout(c.hideToolTip,c.props.duration))},c.hideToolTip=function(){c.state.show&&(c.setState({show:!1}),c.handleDismiss())},c.handleClose=function(a){c.props.onClose&&c.props.onClose(a),c.hideToolTip()},c.handleDismiss=function(a){c.props.onDismiss&&c.props.onDismiss(a)},c.handleShow=function(a){c.props.onShow&&c.props.onShow(a)},c.handlePreviousSiblingRef=c.handlePreviousSiblingRef.bind(c),c.previousSiblingTarget=null,c.state={show:!1},c.timer=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Xa(b,[{key:"componentDidMount",value:function(){this.props.targetSelector?this.targetElement=document.querySelector(this.props.targetSelector):this.targetElement=this.previousSiblingTarget.previousSibling,this.attachEvents()}},{key:"componentWillUnmount",value:function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null),this.removeEvents()}},{key:"handlePreviousSiblingRef",value:function(a){this.previousSiblingTarget=a}},{key:"renderDismissButton",value:function(){return this.props.dismissible?N.a.createElement("button",{"aria-label":"Close",className:"hi hi-close btn-icon-only",onClick:this.handleClose}):null}},{key:"renderTooltip",value:function(){var a,b=this.props.automationId||("string"==typeof this.props.children?"tooltip_"+this.props.children.replace(/ /g,"_"):"tooltip"),c=R()((t(a={"ha-tooltip-react":!0},this.props.className,this.props.className),t(a,"tooltip",!0),t(a,"dismissible",this.props.dismissible),a)),d=this.state.show;return N.a.createElement(Ja,Object.assign({tooltipTarget:this.targetElement,show:d},Ga.filterProps(Aa.propTypes,this.props)),N.a.createElement(Na,{enterClassName:"enter",exitClassName:"leave",transition:d?Ma.enter:Ma.exit,unmountOnExit:!0},N.a.createElement("div",{className:c,"data-automation-id":b,role:"tooltip"},N.a.createElement("div",{className:"tooltip-container"},this.renderDismissButton(),N.a.createElement(Wa,{ariaDescribedById:this.props.ariaDescribedById},this.props.children)))))}},{key:"render",value:function(){return this.props.targetSelector?this.renderTooltip():N.a.createElement("div",{className:"tooltip-empty-prevsib",ref:this.handlePreviousSiblingRef},this.renderTooltip())}}]),b}();Za.propTypes={automationId:P.a.string,children:P.a.node,className:P.a.string,dismissible:P.a.bool,duration:P.a.number,onClose:P.a.func,onDismiss:P.a.func,onShow:P.a.func,position:P.a.oneOfType([P.a.array,P.a.string]),targetSelector:P.a.string,trigger:P.a.oneOf([Ya.CUSTOM,Ya.FOCUS,Ya.HOVER]),ariaDescribedById:P.a.string},Za.defaultProps={children:null,className:"",dismissible:!1,duration:0,position:"top",trigger:Ya.HOVER};var $a=Za;u.propTypes={errorMessage:P.a.string.isRequired,show:P.a.bool.isRequired,tooltipTargetClass:P.a.string.isRequired,ariaDescribedById:P.a.string};var _a=u;v.propTypes={show:P.a.bool.isRequired};var ab=v;w.propTypes={show:P.a.bool.isRequired};var bb=w,cb="optional";x.propTypes={show:P.a.bool.isRequired,labelOptional:P.a.string};var db=x,eb=(c(15),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),fb=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.componentWillReceiveProps=function(a){var b=!1;(a.resetValidation||a.disabled)&&(c.firstValidity=!0,c.setState({showValidity:!1})),c.props.required===a.required||a.required||(b=Z.getValidity(c.state.value,a),c.state.isValid!==b&&(c.setState({isValid:b,showValidity:!0}),c.props.onValidityChange&&c.props.onValidityChange(b))),a.resetValidation||!a.alwaysRenderValidity||c.props.noValidationInPropLoad||c.setState({showValidity:!0});var d=a.value!==c.props.value||c.props.alwaysUpdateValueFromProps,e=!a.resetValidation&&a.alwaysRenderValidity&&!c.props.noValidationInPropLoad||d;d&&c.setState({value:a.value}),e&&c.testValidity(a.value)},c.hasNoValue=function(){return null===c.state.value||void 0===c.state.value||""===c.state.value},c.handleRef=function(a){c.textInput=a,c.props.inputRef(a)},c.handleLabelOnClick=function(a){c.textInput&&c.textInput.focus()},c.handleInput=function(a){var b=a.target.value;c.prevValue=c.state.value;var d=Object.assign({},a);d.validityState=c.testValidity(b),c.props.onInput&&c.props.onInput(d),c.setState({value:b})},c.handleBlur=function(a){var b=a.target.value,d=Object.assign({},a);d.validityState=c.testValidity(b),c.props.onBlur&&c.props.onBlur(d),c.props.onChange&&b!==c.prevValue&&(c.prevValue=b,c.props.onChange(d)),c.setState({focused:!1})},c.testValidity=function(a){var b=Z.getValidity(a,c.props);return(c.state.isValid!==b||c.firstValidity)&&(c.setState({isValid:b}),c.props.onValidityChange&&c.props.onValidityChange(b),c.firstValidity&&(c.firstValidity=!1)),b},c.handleFocus=function(a){c.setState({focused:!0}),c.props.onFocus(a)},c.renderIcon=function(){if(c.props.icon){var a=R()(["hi","embedded",c.props.icon]);return N.a.createElement("i",{className:a})}},c.renderMobileChevron=function(){return c.props.renderMobileChevron?N.a.createElement("button",{className:"hi hi-chevron-down","aria-hidden":"true"}):null},c.renderLabel=function(a,b){if(c.props.label||b){var d=b?Object.assign({},b.props,{className:R()(["ha-label-validatable",b.props.className])}):{className:"ha-label-validatable"};return N.a.createElement("div",null,N.a.createElement(ab,{show:a}),N.a.createElement(X,Object.assign({},d,{htmlFor:c.id,onClick:c.handleLabelOnClick}),b?b.props.children:c.props.label,N.a.createElement(bb,{show:c.props.required&&!c.props.noRequiredIndicator}),N.a.createElement(db,{show:c.props.optional,labelOptional:c.props.labelOptional})))}},c.render=function(){var a,b=c.filterProps(["autoComplete","disabled","placeholder","min","max","minLength","maxLength","name","onClick","onMouseEnter","onMouseLeave","onKeyPress","onKeyDown","onKeyUp","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","pattern","inputMode","readOnly","style","type","tabIndex","autoFocus"],c.props),d=!c.state.isValid&&c.state.showValidity,e=pa.isHandheld(),f=pa.isChrome()||pa.isSafari(),g=R()((y(a={"ha-text-field":!0,"text-indent-needed":f,validatable:!0,disabled:c.props.disabled},c.props.className,c.props.className),y(a,"icon",c.props.icon),y(a,"input-error",d),y(a,c.tooltipTargetClass,d),y(a,"mobile-text-field",e),y(a,"mobile-text-field-focused",e&&c.state.focused),y(a,"mobile-text-field-content",e&&c.state.value),a)),h=void 0,i=N.a.Children.map(c.props.children,function(a){if(a.type!==X&&"label"!==a.type)return a;h=a}),j=c.props.required&&!c.state.value?c.props.requiredMessage:c.props.invalidMessage,k="name-error-"+c.id;return d&&N.a.createElement("span",{className:"screen-reader-error-message","aria-describedby":k,role:"alert"},j),N.a.createElement("div",{className:g,onClick:c.props.onClick,"data-automation-id":c.props.automationId},c.renderLabel(d,h),c.renderIcon(),i,N.a.createElement("input",Object.assign({},b,{ref:c.handleRef,id:c.id,className:"ha-input",value:c.state.value||"","aria-label":c.getAriaLabel(),"aria-required":!!c.props.required||null,"aria-invalid":!!d||null,"aria-describedby":!e&&d?k:null,onBlur:c.handleBlur,onFocus:c.handleFocus,onInput:c.handleInput,onChange:function(){}})),c.renderMobileChevron(),N.a.createElement(_a,{show:d,errorMessage:j,tooltipTargetClass:c.tooltipTargetClass,ariaDescribedById:k}))},c.id=a.id||Y.generateId("ha-text-field"),c.tooltipTargetClass=Y.generateId("ha-validation-tooltip-target"),c.textInput=null,c.prevValue=a.value,c.firstValidity=!0,c.state={focused:!1,showValidity:a.alwaysRenderValidity,isValid:Z.getValidity(a.value,a),value:a.value},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),eb(b,[{key:"componentDidMount",value:function(){this.props.onValidityChange&&this.props.onValidityChange(this.state.isValid)}},{key:"componentDidUpdate",value:function(a){"date"===this.props.type&&pa.isIOSDevice()&&(this.textInput.defaultValue=""),this.gainFocusOnUpdate&&(this.gainFocusOnUpdate=!1,this.textInput.focus()),this.state.focused||this.state.showValidity||a.resetValidation!==this.props.resetValidation||this.props.disabled||this.firstValidity||Z.getValidity(this.state.value,this.props)||this.setState({showValidity:!0})}},{key:"focusOnNextUpdate",value:function(){this.gainFocusOnUpdate=!0}},{key:"getAriaLabel",value:function(){return this.props.label?null:this.props.ariaLabel||this.props.placeholder?this.props.ariaLabel||this.props.placeholder:void console.warn("A11y: TextField needs a label, ariaLabel, or placeholder in order to be used accessibly. Ensure one is passed from higher order components like Select and TF Typeaheads.")}},{key:"filterProps",value:function(a,b){var c={};return Object.keys(b).forEach(function(d){a.indexOf(d)>-1?c[d]=b[d]:(d.indexOf("data-")>-1||d.indexOf("aria-")>-1)&&(c[d]=b[d])}),c}}]),b}();fb.propTypes={id:P.a.string,className:P.a.string,disabled:P.a.bool,icon:P.a.string,label:P.a.string,ariaLabel:P.a.string,placeholder:P.a.string,minLength:P.a.oneOfType([P.a.number,P.a.string]),maxLength:P.a.oneOfType([P.a.number,P.a.string]),name:P.a.string,onClick:P.a.func,onBlur:P.a.func,onChange:P.a.func,onInput:P.a.func,onValueChange:P.a.func,onFocus:P.a.func,value:P.a.string,pattern:P.a.string,required:P.a.bool,noRequiredIndicator:P.a.bool,optional:P.a.bool,labelOptional:P.a.string,min:P.a.oneOfType([P.a.number,P.a.string]),max:P.a.oneOfType([P.a.number,P.a.string]),requiredMessage:P.a.string,invalidMessage:P.a.string,noValidationInPropLoad:P.a.bool,validator:P.a.func,onValidityChange:P.a.func,alwaysRenderValidity:P.a.bool,resetValidation:P.a.bool,renderMobileChevron:P.a.bool,type:P.a.string,automationId:P.a.string,inputRef:P.a.func,autoComplete:P.a.string,mobileMaxHeight:P.a.number,autoFocus:P.a.bool,alwaysUpdateValueFromProps:P.a.bool},fb.defaultProps={value:"",automationId:"text_field",autoComplete:"on",icon:"",maxLength:524288,minLength:0,mobileMaxHeight:34,noRequiredIndicator:!1,optional:!1,required:!1,alwaysRenderValidity:!1,requiredMessage:"Required",invalidMessage:"Invalid value",noValidationInPropLoad:!1,resetValidation:!1,autoFocus:!1,onFocus:function(){},onClick:function(){},onInput:function(){},inputRef:function(){},renderMobileChevron:!1,type:"text",alwaysUpdateValueFromProps:!1};var gb=fb,hb=c(6),ib=c.n(hb),jb=c(3),kb=c.n(jb),lb=[];c(16);var mb=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),nb=P.a.node,ob=P.a.string,pb=P.a.bool,qb=P.a.func,rb=P.a.object,sb=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.setFocus=function(){if(c.props.forceFocusOn&&c.forcedFocusElement&&c.props.disableAutoFocus)c.forcedFocusElement.focus();else if(!c.props.disableAutoFocus&&c.popover&&c.popover!==document.activeElement){var a=ib.a.getBoundariesTabableElement(c.popover).first;a?a.focus():c.popover.focus()}},c.getPopover=function(a){c.popover=a,c.props.reference(a),c.attachPopoverEvents()},c.getSecretDiv=function(a){c.secretDiv=a,c.attachAccessibilityEvents()},c.attachEvents=function(){c.targetElement&&(c.targetElement.addEventListener("click",c.togglePopover),c.props.disableDefaultAccessibility||c.targetElement.addEventListener("keydown",c.handleTargetKeyDown),c.props.disableCloseOnBlur?(c.targetElement.addEventListener("focusout",c.handleTargetFocusOut),c.targetElement.addEventListener("focusin",c.handleTargetFocusIn)):c.targetElement.addEventListener("blur",c.handlePopoverBlur))},c.attachAccessibilityEvents=function(){c.secretDiv&&c.secretDiv.addEventListener("focusin",c.handlePopoverBlur)},c.attachPopoverEvents=function(){c.popover&&c.popover.addEventListener("focusout",c.handlePopoverBlur)},c.detachEvents=function(){c.targetElement&&(c.targetElement.removeEventListener("click",c.togglePopover),c.targetElement.removeEventListener("keydown",c.handleTargetKeyDown),c.props.disableCloseOnBlur?(c.targetElement.removeEventListener("focusout",c.handleTargetFocusOut),c.targetElement.removeEventListener("focusin",c.handleTargetFocusIn)):c.targetElement.removeEventListener("blur",c.handlePopoverBlur)),c.secretDiv&&c.secretDiv.removeEventListener("focusin",c.handlePopoverBlur),c.popover&&c.popover.removeEventListener("focusout",c.handlePopoverBlur)},c.handleTargetKeyDown=function(a){a.keyCode===kb.a.ENTER?c.togglePopover():a.keyCode===kb.a.TAB&&c.state.show&&c.popover.focus()},c.handleScroll=function(){ra.a.findDOMNode(c.popover)&&ra.a.findDOMNode(c.popover).getBoundingClientRect().top<-5&&c.setState({show:!1},function(){c.props.focusBackOnClose&&A()})},c.togglePopover=function(){c.props.disabled||(c.props.disableCloseOnBlur?c.lastFocusIsTarget&&c.state.show?c.setState({show:!1}):c.setState({show:!0}):c.setState(function(a){return{show:!a.show}}),c.lastFocusIsTarget=!0)},c.handleTargetFocusOut=function(){c.lastFocusIsTarget=!1},c.handleTargetFocusIn=function(){c.lastFocusIsTarget=!0},c.handlePopoverBlur=function(a){a.stopPropagation(),a.preventDefault(),"focusin"===a.type?c.props.disableCloseOnBlur?c.targetElement.focus():(c.setState({show:!1}),c.props.focusBackOnClose&&A()):setTimeout(function(){!c.popover||c.popover.contains(document.activeElement)||c.targetElement.contains(document.activeElement)||c.props.disableCloseOnBlur||c.setState({show:!1})},100)},c.lastFocusIsTarget=!1,c.forcedFocusElement=null,c.popover=null,c.secretDiv=null,c.targetElement=null,c.state={show:a.show&&!a.disabled},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),mb(b,[{key:"componentDidMount",value:function(){this.targetElement=document.querySelector(this.props.targetSelector),window.addEventListener("scroll",this.handleScroll),this.props.disableAutoOpen||this.attachEvents(),this.props.forceFocusOn&&("targetSelector"===this.props.forceFocusOn&&this.props.targetSelector?this.forcedFocusElement=this.targetElement||document.querySelector(this.props.targetSelector):this.forcedFocusElement=document.querySelector(this.props.forceFocusOn)),this.props.show&&(this.setFocus(),this.props.focusBackOnClose&&z())}},{key:"UNSAFE_componentWillReceiveProps",value:function(a){var b=this;!a.show&&this.props.show&&this.state.show?this.setState(function(){return{show:!1}}):a.show&&this.setState({show:!0},function(){b.setFocus(),b.props.focusBackOnClose&&z()})}},{key:"UNSAFE_componentWillUpdate",value:function(){this.targetElement||(this.targetElement=document.querySelector(this.props.targetSelector))}},{key:"componentDidUpdate",value:function(){this.props.disableAutoFocus?this.state.show?(this.setFocus(),this.props.onShow(),this.props.focusBackOnClose&&z()):(this.props.onClose(),this.props.focusBackOnClose&&A()):!this.state.show||this.popover&&this.popover.style.top&&this.popover.style.left?this.state.show&&this.popover?(this.setFocus(),this.props.onShow(),this.props.focusBackOnClose&&z()):this.state.show||this.props.onClose():this.forceUpdate()}},{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll),this.detachEvents()}},{key:"render",value:function(){var a=this.props,b=a.automationId,c=a.children,d=a.className,e=a.disableSpike,f=a.disableTabIndex,g=a.sameWidthAsTargetSelector,h=(a.show,a.style),i=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(a,["automationId","children","className","disableSpike","disableTabIndex","sameWidthAsTargetSelector","show","style"]),j=R()(d,"ids","ids-popover","ha-popover",{connector:!e}),k=this.targetElement&&g?Object.assign({},h,{minWidth:this.targetElement.offsetWidth}):h,l=f?{}:{tabIndex:this.state.show?"0":"-1"};return N.a.createElement(Ja,Object.assign({style:k,show:this.state.show,onScroll:this.handleScroll},i),N.a.createElement(Na,{enterClassName:"enter",transition:this.state.show?Ma.enter:Ma.exit,exitClassName:"leave",unmountOnExit:!0},N.a.createElement("div",Object.assign({ref:this.getPopover,className:j},l,{"data-automation-id":b+"_popover"}),c,N.a.createElement("div",Object.assign({},l,{"aria-hidden":!0,ref:this.getSecretDiv})))))}}]),b}();sb.propTypes={children:nb.isRequired,className:ob,disabled:pb,disableAutoFocus:pb,disableAutoOpen:pb,disableCloseOnBlur:pb,disableDefaultAccessibility:pb,disableSpike:pb,disableTabIndex:pb,forceFocusOn:ob,focusBackOnClose:pb,forcePosition:pb,forcePositionUpdate:pb,onClose:qb,onFocusLost:qb,onShow:qb,reference:qb,sameWidthAsTargetSelector:pb,show:pb,style:rb,targetSelector:ob.isRequired,automationId:ob},sb.defaultProps={className:"",disabled:!1,disableAutoFocus:!0,disableAutoOpen:!1,disableCloseOnBlur:!1,disableDefaultAccessibility:!1,disableTabIndex:!1,disableSpike:!1,focusBackOnClose:!0,forceFocusOn:"",forcePosition:!1,forcePositionUpdate:!1,onClose:function(){},onFocusLost:function(){},onShow:function(){},reference:function(){},sameWidthAsTargetSelector:!1,show:!1,style:{},automationId:"popover"};var tb=sb,ub=tb,vb=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),wb=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c.modal=a},c.handleModalClick=function(a){"modal"===a.target.className&&c.props.onDismiss()},c.listeners={},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),vb(b,[{key:"componentDidMount",value:function(){this.props.show?this.setupModal():this.teardownModal()}},{key:"componentDidUpdate",value:function(){this.props.show?this.setupModal():this.teardownModal()}},{key:"componentWillUnmount",value:function(){this.listeners.onKeyDown&&(this.modal.removeEventListener("keydown",this.listeners.onKeyDown,!1),this.listeners={}),this.modal.ownerDocument.body.classList.remove("modal-open")}},{key:"setupModal",value:function(){var a=this;this.modal.tabIndex="-1","error"===this.props.type||"alert"===this.props.type?this.modal.setAttribute("role","alertdialog"):this.modal.setAttribute("role","dialog"),this.modal.ownerDocument.body.classList.add("modal-open"),this.listeners.onKeyDown||(this.listeners.onKeyDown=function(b){kb.a.ESCAPE===b.keyCode?(b.stopPropagation(),a.modal.removeEventListener("keydown",a.listeners.onKeyDown,!1),a.props.onDismiss&&a.props.onDismiss()):ib.a.keepFocusInsideListener(b,a.modal)}.bind(this),this.modal.addEventListener("keydown",this.listeners.onKeyDown,!1))}},{key:"teardownModal",value:function(){this.modal.ownerDocument.body.classList.remove("modal-open"),this.lastFocus&&this.lastFocus.focus(),this.lastFocus=null,this.listeners.onKeyDown&&(this.modal.removeEventListener("keydown",this.listeners.onKeyDown,!1),this.listeners={})}},{key:"renderDismissable",value:function(){return this.props.dismissible?N.a.createElement("button",{type:"button",className:"btn btn-link hi hi-close medium pull-right show","aria-label":"Close",onClick:this.props.onDismiss}):null}},{key:"renderTitleText",value:function(){var a=this.props,b=a.size,c=a.titleText,d=a.type;if(c){var e=null,f=R()({hi:!0,"hi-circle-check":"confirm"===d||"endflow"===d,"hi-circle-info":"info"===d,"hi-circle-alert":"error"===d||"warn"===d||"alert"===d}),g=R()(B({"modal-title":!0,"hi-confirm":"endflow"===d},"hi-"+d,!!d&&"endflow"!==d)),h=null;return d&&(h=N.a.createElement("i",{className:f})),e="small"!==b||"error"!==d&&"alert"!==d?N.a.createElement("h2",null,c):N.a.createElement("h4",null,c),N.a.createElement("div",{className:g},h,e)}return null}},{key:"renderSection",value:function(){return"error"===this.props.type&&"small"===this.props.size?null:(this.props.children.length?this.props.children:[this.props.children]).filter(function(a){return a&&"section"===a.type})}},{key:"renderAside",value:function(){return"endflow"===this.props.type?(this.props.children.length?this.props.children:[this.props.children]).filter(function(a){return a&&"aside"===a.type}):null}},{key:"renderFooter",value:function(){return(this.props.children.length?this.props.children:[this.props.children]).filter(function(a){return a&&"footer"===a.type})}},{key:"render",value:function(){var a,b=this.props,c=b.size,d=b.type,e=R()("modal-dialog",(B(a={},""+d,d),B(a,""+c,c),B(a,"message-icon","error"!==d&&"alert"!==d),a)),f=R()(B({"ids-ui":!0,"ha-modal":!0,"mobile-modal":pa.isHandheld(),show:this.props.show},this.props.className,this.props.className));return N.a.createElement("div",{ref:this.handleRef,className:f,style:this.props.style,"data-automation-id":this.props.automationId+"_modal"},N.a.createElement("div",{className:"modal",onClick:this.handleModalClick},N.a.createElement("div",{className:e},N.a.createElement("div",{className:"modal-content"},N.a.createElement("header",null,this.renderDismissable(),this.renderTitleText()),this.renderSection(),this.renderAside(),this.renderFooter()))))}}]),b}();wb.propTypes={children:P.a.node.isRequired,className:P.a.string,dismissible:P.a.bool,onDismiss:P.a.func,size:P.a.oneOf(["small","medium","large","fullwidth","fullscreen"]).isRequired,show:P.a.bool.isRequired,style:P.a.shape({zIndex:P.a.number.isRequired}),titleText:P.a.string,type:P.a.oneOf(["","error","endflow","confirm","info","warn"]),automationId:P.a.string},wb.defaultProps={className:"",dismissible:!1,onDismiss:function(){},style:null,titleText:"",type:"",automationId:"modal"};var xb=wb,yb=(c(17),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),zb=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),yb(b,[{key:"render",value:function(){return N.a.createElement(Ea,{show:this.props.show,disableZIndex:pa.isIOSDevice(),zIndexArray:this.props.zIndexArray},N.a.createElement(Na,Object.assign({},this.props,{transition:this.props.show?Ma.enter:Ma.exit,onEntered:this.props.onShow,onExited:this.props.onClose,enterClassName:R()("showModal","from-bottom-slide-in"),exitClassName:"fadeOutModal",exitedClassName:"hidden",transitionOnRender:!1}),N.a.createElement(xb,this.props,this.props.children)))}}]),b}();zb.propTypes={className:P.a.string,show:P.a.bool.isRequired,titleText:P.a.string,type:P.a.string,size:P.a.string,dismissible:P.a.bool,onShow:P.a.func,onClose:P.a.func,onDismiss:P.a.func,zIndexArray:P.a.array};var Ab=zb,Bb=(c(18),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Db=P.a.string,Eb=P.a.bool,Fb=P.a.object,Gb=P.a.func,Hb=function(a){if("string"==typeof a)return a;if("object"===(void 0===a?"undefined":Cb(a))){if(a.nodeType===Node.ELEMENT_NODE)return a.outerHTML;if(a.nodeType===Node.TEXT_NODE)return a.textContent;if(N.a.isValidElement(a))return console.warn("MenuItem does not support item prop of React element type"),null}},Ib=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.highlightPattern=function(a){document.createElement("span").textContent=a;var b=new RegExp(c.props.highlightPattern.toString().replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi");return a.replace(b,'&lt;span class="type-ahead-strong"&gt;$&&lt;/span&gt;').replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;span class="type-ahead-strong"&gt;/g,'<span class="type-ahead-strong">').replace(/&lt;\/span&gt;/g,"</span>")},c.createLabel=function(){if(!c.state.mounted)return null;var a=ca.sanitize(c.props.label),b=c.props.item;if(b&&(b.id=ca.sanitize(b.id),b.label=ca.sanitize(b.label)),c.props.highlightPattern)if(c.props.itemRenderer){var d=c.props.itemRenderer(c.menuItem,b,c.highlightPattern(a));a=Hb(d)}else a=c.highlightPattern(a);else if(c.props.itemRenderer){var e=c.props.itemRenderer(c.menuItem,b,a);a=Hb(e)}else"string"==typeof a&&(a=a.replace(/</g,"&lt;").replace(/>/g,"&gt;"));return{__html:a=ca.sanitize(a)}},c.handleMouseOver=function(){c.menuItem&&c.menuItem.focus()},c.handleClick=function(a){a.stopPropagation(),c.props.disabled||(a.nativeEvent=a.nativeEvent||{target:{}},a.nativeEvent.target.selectedItem={label:c.props.label,value:c.props.value},c.props.onSelected(a.nativeEvent,c.props.addNew))},c.handleKeyDown=function(a){a.keyCode!==kb.a.ENTER&&a.keyCode!==kb.a.SPACEBAR||c.props.disabled||(a.nativeEvent=a.nativeEvent||{target:{}},a.nativeEvent.target.selectedItem={label:c.props.label,value:c.props.value},c.props.onSelected(a.nativeEvent,c.props.addNew))},c.menuItem=null,c.state={mounted:!1},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Bb(b,[{key:"componentDidMount",value:function(){this.setState({mounted:!0,width:this.getWidth()})}},{key:"shouldComponentUpdate",value:function(a,b){var c=!1;for(var d in this.props)this.props[d]!==a[d]&&(c=!0);for(var e in this.state)this.state[e]!==b[e]&&(c=!0);return c}},{key:"componentDidUpdate",value:function(){this.menuItem.offsetWidth>this.state.width&&this.setState({width:this.menuItem.offsetWidth})}},{key:"getWidth",value:function(){return this.menuItem?this.menuItem.offsetWidth:void 0}},{key:"renderLabel",value:function(){return this.props.addNew?N.a.createElement("span",{className:"menu-item-label"},N.a.createElement("span",{className:"hi hi-create-lg"}),this.props.label):this.props.itemRenderer?N.a.createElement("span",{dangerouslySetInnerHTML:this.createLabel()}):N.a.createElement("span",{className:"menu-item-label",dangerouslySetInnerHTML:this.createLabel()})}},{key:"render",value:function(){var a=this,b=pa.isHandheld(),c=this.props,d=c.disabled,e=c.addNew,f=c.className,g=c.label,h=R()("ha-menu-item",{disabled:d,"mobile-menu-item":b,"add-new-menu-item":e},f);return N.a.createElement("div",{className:h,tabIndex:"-1","aria-label":g,role:"option",onKeyDown:this.handleKeyDown,onClick:this.handleClick,onMouseOver:this.handleMouseOver,onTouchStart:b?this.handleMouseOver:null,ref:function(b){a.menuItem=b}},this.renderLabel())}}]),b}();Ib.propTypes={addNew:Eb,disabled:Eb,item:Fb,label:Db,onSelected:Gb,value:Db,className:Db},Ib.defaultProps={addNew:!1,label:"",value:"",disabled:!1,onSelected:function(){},className:null};var Jb=Ib,Kb=(c(19),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Lb=P.a.bool,Mb=P.a.string,Nb=P.a.node,Ob=P.a.func,Pb=P.a.array,Qb=P.a.number,Rb=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.getMaxWidth=function(){if(c.menuItems.length)return c.menuItems.map(function(a){return a.getWidth()}).reduce(function(a,b){return Math.max(a,b)})},c.getWidth=function(){return c.menuWidth},c.getMenu=function(a){c.menu=a,c.props.reference(a)},c.onItemSelected=function(a,b){c.props.onItemSelected(a,b)},c.handleKeyDown=function(a){a.stopPropagation(),a.preventDefault(),a.keyCode===kb.a.DOWN?c.handleA11yFocus("down"):a.keyCode===kb.a.UP?c.handleA11yFocus("up"):a.keyCode===kb.a.HOME?c.handleA11yFocus("home"):a.keyCode===kb.a.END?c.handleA11yFocus("end"):a.keyCode!==kb.a.TAB&&a.keyCode!==kb.a.ESCAPE||c.props.handleTabEsc(a)},c.handleA11yFocus=function(a){"home"===a?c.handleHomeAndDownKey():"end"===a&&c.handleEndAndUpKey(),c.state.currentlyFocusedItem?c.state.currentlyFocusedItem[c.a11ySelectionFocusMap[a]]?c.handleInCurrentlyFocusedItem(a):"up"===a?c.handleEndAndUpKey():"down"===a&&c.handleHomeAndDownKey():c.handleCurrentlyFocusedItemNull(a)},c.handleHomeAndDownKey=function(){var a=c.state.domItems[0];a.focus(),c.setState({currentlyFocusedItem:a})},c.handleEndAndUpKey=function(){var a=c.state.domItems[c.state.domItems.length-1];a.focus(),c.setState({currentlyFocusedItem:a})},c.handleCurrentlyFocusedItemNull=function(a){var b=void 0;if("up"===a)b=c.state.domItems[c.state.domItems.length-1];else{var d=c.state.domItems.length>1?1:0;b=c.state.domItems[d]}b.focus(),c.setState({currentlyFocusedItem:b})},c.handleInCurrentlyFocusedItem=function(a){var b=c.state.currentlyFocusedItem[c.a11ySelectionFocusMap[a]];-1!==b.className.indexOf("disabled")&&("down"===a?b=b.nextSibling:"up"===a&&(b=b.previousSibling)),b.focus(),c.setState({currentlyFocusedItem:b})},c.handleOrientationChange=function(){c.forceUpdate()},c.renderMenuItem=function(a,b){return N.a.createElement(Jb,{onSelected:c.onItemSelected,key:b,id:b,value:a[c.props.storeValueProperty]||a.value,label:a[c.props.storeLabelProperty]||a.label,disabled:a.disabled,isSelected:c.props.selectedValue===a.value,item:a,className:a.className,itemRenderer:c.props.itemRenderer,highlightPattern:c.props.searchQuery,ref:function(a){a&&c.menuItems.push(a)}})},c.renderAddNewMenuItem=function(){return c.props.addNew?N.a.createElement(Jb,{addNew:!0,onSelected:c.onItemSelected,key:"-1",label:c.props.searchQuery?c.props.addNewText+" "+c.props.searchQuery:""+c.props.addNewText}):null},c.renderMenuItems=function(){var a=c.props.items||[];return a.length&&c.props.children&&console.warn("Using both children and items prop to populate menu. This is incorrect, please use one or the other"),!a.length&&c.props.children?N.a.Children.toArray(c.props.children).map(function(a){return a.props.item?{label:a.props.item.label,value:a.props.item.value,className:a.props.item.className,disabled:a.props.disabled,onSelected:a.props.onSelected}:{label:a.props.children?a.props.children:a.props.label,value:a.props.value,className:a.props.className,disabled:a.props.disabled}}).map(c.renderMenuItem):0===a.length||c.props.children?null:a.map(c.renderMenuItem)},c.selectedItem=null,c.isHandheld=pa.isHandheld(),c.state={currentlyFocusedItem:null,domItems:null},c.a11ySelectionFocusMap={down:"nextSibling",up:"previousSibling"},c.menuItems=[],c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Kb(b,[{key:"componentDidMount",value:function(){this.setState({domItems:document.querySelectorAll(".ha-menu-item"),width:this.getMaxWidth()}),this.menuWidth=this.getMaxWidth(),this.isHandheld&&window.addEventListener("orientationchange",this.handleOrientationChange)}},{key:"componentWillUpdate",value:function(){this.menuItems=[]}},{key:"componentDidUpdate",value:function(){this.state.width<this.getMaxWidth()&&(this.setState({width:this.getMaxWidth()}),this.menuWidth=this.getMaxWidth(),this.props.returnWidth&&this.props.returnWidth(this.menuWidth))}},{key:"componentWillUnmount",value:function(){this.isHandheld&&window.removeEventListener("orientationchange",this.handleOrientationChange,!1)}},{key:"render",value:function(){var a,b,c,d=this.props.items,e=R()((a={"ha-menu":!0},b=this.props.className,c=!!this.props.className,b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a)),f={overflowY:this.props.disableScroll?"hidden":"auto"};return this.props.size?f.maxHeight=32*this.props.size+"px":d&&d.length>6&&!this.isHandheld?f.maxHeight="224px":(f.maxHeight=window.innerHeight-100+"px",f.overflowY=this.props.disableScroll?"hidden":"scroll"),N.a.createElement("div",{onBlur:this.props.onBlur,style:f,className:e,tabIndex:"-1",role:"listbox",onKeyDown:this.handleKeyDown,"data-automation-id":this.props.automationId+"_menu",ref:this.getMenu},this.renderAddNewMenuItem(),this.renderMenuItems())}}]),b}();Rb.propTypes={addNew:Lb,addNewText:Mb,automationId:Mb,children:Nb,className:Mb,disableScroll:Lb,handleTabEsc:Ob,items:Pb,itemRenderer:Ob,onBlur:Ob,onItemSelected:Ob.isRequired,reference:Ob,searchQuery:Mb,selectedValue:Mb,size:Qb,returnWidth:Ob},Rb.defaultProps={addNew:!1,addNewText:"",children:null,className:"",disableScroll:!1,handleTabEsc:function(){},items:[],onBlur:function(){},onItemSelected:function(){},reference:function(){},searchQuery:"",selectedValue:"",size:0,automationId:"menu"};var Sb=Rb,Tb=Sb,Ub=c(5),Vb=c.n(Ub),Wb=c(20),Xb=c.n(Wb),Yb=c(21),Zb=c.n(Yb),$b={on:function(a,b,c,d){var e=b.match(/(.*):(.*)/);return e&&(b=e[2],e=e[1],c=function(a,b,c){return function(d){var e=function(a,b,c){for(var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&1===a.nodeType&&a!==c;){if(d.call(a,b))return a;a=a.parentNode}return!1}(d.target,a,c);e&&b(d,e)}}(e,c,a)),a.addEventListener(b,c,!!d),{remove:function(){return C(a,b,c,d)}}},off:C,emit:function(a,b,c){var d=void 0;"bubbles"in(c=c||{})||(c.bubbles=!0),"cancelable"in c||(c.cancelable=!1),a.emit?a.emit(b,c):((d=document.createEvent("UIEvent")).initUIEvent(b,c.bubbles,c.cancelable,window,1),Object.keys(c).forEach(function(a){a in{bubbles:1,cancelable:1}||(d[a]=c[a])}),a.dispatchEvent(d))}},_b=5,ac=4,bc=["top","bottom"],cc=["left","right"],dc=["top","middle","bottom"],ec=["left","center","right"],fc=function(a,b){if(a.classList.contains("leave")||a.classList.contains("closed"))return E(a),a.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),void(a.classList.contains("no-transition")||a.classList.add("no-transition"));var c=Vb.a.getPositionInDocument(b),d=Vb.a.getPositionInDocument(a.scrollParent);c.bottom<d.top||c.top>d.bottom||c.right<d.left||c.left>d.right?a.classList.contains("visible")&&(a._closeOnBlur?(E(a),a._tmpNoAutoFocusLastActiveElementOnClose=a._noAutoFocusLastActiveElementOnClose,a._noAutoFocusLastActiveElementOnClose=!0,a.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),a.classList.contains("no-transition")||a.classList.add("no-transition"),a.close()):a.classList.contains("visible")&&(a.classList.remove("visible"),a.emit("ha-popup-obscured"))):a.classList.contains("visible")||(a.classList.add("visible"),a.emit("ha-popup-revealed"))},gc={installResizeMethod:function(a,b,c,d,e,f){var g;return g=function(){a.classList.contains("visible")&&F(a,b,c,d,e,f)},Viewport.onResize(g),g},uninstallResizeMethod:function(a){Viewport.offResize(a)},clearPosition:D,setPosition:F,show:function(a,b,c,d,e,f){document.body.contains(b)&&a.show&&!a.classList.contains("visible")&&F(a,b,c,d,e,f)&&a.show()},hide:G},hc={showPopoverForm:function(a,b){!function(a){a&&a.open&&gc.hide(a)}(a&&a.dropdownElement),b&&"function"==typeof b.show?b.show():function(a,b){a&&b&&(b.open||gc.show(b,a,["bottom","top"],["left","right"]))}(a,b)}},ic=(c(22),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),jc=P.a.bool,kc=P.a.string,lc=P.a.oneOfType,mc=P.a.element,nc=P.a.array,oc=P.a.func,pc=P.a.number,qc=P.a.object,rc=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));sc.call(c);var d=void 0;return a.data&&(d=c.sortAndDedupe(a,a.data)),c.state={showFocus:!1,itemsListVisible:!1,visibleItems:a.data?d:[],forcePositionUpdate:!1,currentSelection:I(d,a.value,a.storeValueProperty),inputCleared:!1,modalOpen:!1,searchInProgressValue:null,inputTextValue:null},c.id=Y.guid(),c.KEY_WAIT_TIME=150,c.BLUR_WAIT_TIME=pa.isSafari()||pa.isFirefox()?130:0,c.INPUT_SEARCH_TIMEOUT=null,c.sta=null,c.inputEl=null,c.actionBtn=null,c.modalInputEl=null,c.menuEl=null,c.addNewPopover=null,c.isHandheld=pa.isHandheld(),c.isIOSDevice=pa.isIOSDevice(),c.isIE11=pa.isIE11(),c.noBlurHandle=!1,c.addNewSelected=!1,c.originalItems=a.data?d:[],c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),ic(b,[{key:"componentDidMount",value:function(){var a=this;this.setupDomEventListeners(),this.setupStoreEventListeners(),this.props.addNew&&this.setupAddNewPopover(),this.props.store&&this.fetchStoreItems(null,function(b){var c=a.sortAndDedupe(a.props,b),d=void 0;a.props.value.trim()?(d=I(b,a.props.value,a.props.storeValueProperty))?(a.originalItems=a.sortAndDedupe(a.props,b),a.setState({currentSelection:d,visibleItems:c})):a.fetchStoreItems(a.props.value,function(d){a.originalItems=b,a.setState({currentSelection:I(d,a.props.value,a.props.storeValueProperty),visibleItems:c})},{filterById:!0}):(a.originalItems=c,a.setState({currentSelection:null,visibleItems:c}))})}},{key:"UNSAFE_componentWillReceiveProps",value:function(a){var b=void 0;a.data&&(b=this.sortAndDedupe(a,a.data),this.originalItems=b,this.setState({visibleItems:b,forcePositionUpdate:!1,currentSelection:I(b,a.value,a.storeValueProperty)}))}},{key:"findExactMatchIndex",value:function(a){var b=this;return a?this.state.visibleItems.map(function(a){return a[b.props.storeLabelProperty||"label"].toLowerCase()}).indexOf(a.toLowerCase()):-1}},{key:"renderTextField",value:function(){var a=this,b=void 0;b=this.state.searchInProgressValue?this.state.searchInProgressValue:this.state.inputTextValue&&!this.addNewSelected?this.state.inputTextValue:this.state.inputCleared?"":this.state.currentSelection?this.state.currentSelection[this.props.storeLabelProperty||"label"]:this.props.value&&this.originalItems?(b=I(this.originalItems,this.props.value,this.props.storeValueProperty))?b[this.props.storeLabelProperty||"label"]:this.state.inputTextValue&&this.addNewSelected?this.state.inputTextValue:"":"",b=ca.unsanitize(b);var c,d,e,f=R()(H({search:!0,"mobile-text-field-content":!!this.state.currentSelection},"select-type-ahead-input-"+this.id,!0)),g=(c=["ariaLabel","label","placeholder","required","alwaysRenderValidity","noRequiredIndicator","optional","labelOptional","resetValidation","mobileMaxHeight","name","onValidityChange","requiredMessage","invalidMessage","validator","disabled","style","onKeyDown","onKeyPress"],d=this.props,e={},c.forEach(function(a){d[a]&&(e[a]=d[a])}),e);return N.a.createElement(gb,Object.assign({autoComplete:"off",inputRef:this.inputElRef,onBlur:this.noBlurHandle?null:this.handleSTABlur,icon:a.isHandheld?null:a.props.icon,onFocus:this.handleTextFieldFocus,onClick:this.handleTextFieldClick,onInput:this.handleTextFieldInput,onKeyUp:this.isIE11?this.handleTextFieldKeyUp:this.props.onKeyUp,value:b,className:f,type:this.isHandheld?"button":"text",belongsToTypeAhead:!0,renderMobileChevron:this.isHandheld&&!this.props.isTextFieldTypeAhead,automationId:this.props.automationId+"_text_field"},g))}},{key:"renderActionButton",value:function(){return this.props.isTextFieldTypeAhead?null:N.a.createElement("button",{ref:this.actionBtnRef,type:"button",className:"action-button","aria-expanded":this.state.itemsListVisible,"aria-haspopup":"true",tabIndex:"-1",onClick:this.handleActionButtonClick,"aria-describedby":"select-type-ahead-label-"+this.id,disabled:this.props.disabled,"data-automation-id":this.props.automationId+"_action_button"},N.a.createElement("span",{className:"caret","aria-hidden":"true"}),N.a.createElement("span",{className:"sr-only"},this.props.typeaheadAriaLabel))}},{key:"renderItems",value:function(){var a=R()({"menu-item-selected":!!this.state.currentSelection,"typeahead-menu":!0});return this.isHandheld&&0===this.state.visibleItems.length&&!this.props.addNew?null:N.a.createElement(Tb,{reference:this.menuElRef,automationId:this.props.automationId,onBlur:this.handleSTABlur,size:this.props.size,className:a,onItemSelected:this.handleItemSelected,items:this.state.visibleItems,storeLabelProperty:this.props.storeLabelProperty,storeValueProperty:this.props.storeValueProperty,itemRenderer:this.props.itemRenderer,searchQuery:this.state.searchInProgressValue,addNew:this.props.addNew,addNewText:this.props.addNewText})}},{key:"renderDesktopMenu",value:function(){var a=this.state.itemsListVisible&&(this.state.visibleItems.length>0||this.props.addNew),b=this.state.forcePositionUpdate;return N.a.createElement(ub,{disableAutoFocus:!0,disableCloseOnBlur:!0,disableSpike:!0,disableAutoOpen:!0,sameWidthAsTargetSelector:!0,focusBackOnClose:!1,forcePosition:!0,forcePositionUpdate:b,disabled:this.props.disabled,show:a,className:"select-type-ahead-popover",targetSelector:"#select-type-ahead-"+this.id,automationId:this.props.automationId},this.renderItems())}},{key:"renderMobileMenu",value:function(){var a=R()(H({mobile:!0,"ha-a11y-focus":!0,"popover-menu-items":!0,"mobile-menu":!0,"mobile-type-ahead-menu":!0,"select-ta-mobile-menu":!0},this.props.mobileMenuClass,!!this.props.mobileMenuClass));return N.a.createElement(Ab,{show:this.state.itemsListVisible,size:"fullscreen",className:a,dismissible:!0,titleText:this.props.label,onShow:this.handleModalShow,onDismiss:this.handleModalDismiss,automationId:this.props.automationId},N.a.createElement("section",null,this.renderModalInputSearch(),this.renderItems()),this.props.children)}},{key:"renderMenuDropdown",value:function(){return this.isHandheld?this.renderMobileMenu():this.renderDesktopMenu()}},{key:"render",value:function(){var a=R()(H({"ha-select-type-ahead":!this.props.isTextFieldTypeAhead,"ha-textfield-type-ahead":this.props.isTextFieldTypeAhead,disabled:this.props.disabled,"menu-expanded":this.state.itemsListVisible,"element-selected":this.state.currentSelection,"has-icon":!this.isHandheld&&this.props.icon,"no-label":!this.props.label},this.props.className,!!this.props.className)),b=R()({"search-container":!0,focused:this.state.showFocus});return N.a.createElement("div",{className:a,ref:this.staRef,id:"select-type-ahead-"+this.id,name:this.props.name,"data-automation-id":this.props.automationId,style:this.props.style},N.a.createElement("div",{className:b,id:"select-type-ahead-"+this.id+"-search-container",onKeyDown:this.handleSearchContainerKeyDown},this.renderTextField(),this.renderActionButton(),this.renderMenuDropdown()),this.props.children)}}]),b}();rc.propTypes={addNew:jc,addNewText:kc,alwaysRenderValidity:jc,ariaLabel:kc,automationId:kc,children:lc([jc,mc]),className:kc,data:nc,disabled:jc,icon:kc,invalidMessage:kc,isTextFieldTypeAhead:jc,itemRenderer:P.a.func,label:kc,mobileMenuClass:kc,name:kc,noRequiredIndicator:jc,noSort:jc,onChange:oc,onInput:oc,onKeyUp:oc,onClick:oc,onItemsClose:oc,onItemsShow:oc,onValidityChange:oc,openItemsOnFocus:P.a.bool,placeholder:kc,required:jc,requiredMessage:kc,resetValidation:jc,size:pc,staticItems:jc,store:qc,storeLabelProperty:kc,storeValueProperty:kc,style:qc,typeaheadAriaLabel:kc,validator:oc,value:kc},rc.defaultProps={addNew:!1,addNewText:"Add New",alwaysRenderValidity:!1,ariaLabel:void 0,automationId:"select_type_ahead",children:null,className:void 0,data:null,disabled:!1,icon:void 0,invalidMessage:void 0,isTextFieldTypeAhead:!1,itemRenderer:null,label:void 0,mobileMenuClass:void 0,name:void 0,onChange:function(){},onClick:function(){},onKeyUp:function(){},onInput:function(){},onItemsShow:function(){},onItemsClose:function(){},openItemsOnFocus:!1,noRequiredIndicator:!1,noSort:!1,onValidityChange:function(){},placeholder:void 0,requiredMessage:"Required",required:!1,resetValidation:!1,size:void 0,staticItems:!1,store:null,storeLabelProperty:void 0,storeValueProperty:void 0,style:null,typeaheadAriaLabel:"View Choices",validator:void 0,value:""};var sc=function(){var a=this;this.setupDomEventListeners=function(){a.sta&&a.sta.addEventListener("keyup",function(b){b.keyCode===kb.a.ESCAPE&&(a.setState({itemsListVisible:!1}),a.inputEl&&a.inputEl.focus())})},this.setupStoreEventListeners=function(){var b=a.props.store;b&&b.on&&(b.on("add",function(){a.fetchStoreItems(null,function(b){var c=a.sortAndDedupe(a.props,b);a.originalItems=c,a.setState({visibleItems:c,forcePositionUpdate:!1})})}),b.on("delete",function(){a.fetchStoreItems(null,function(b){var c=a.sortAndDedupe(a.props,b);a.originalItems=c,a.setState({visibleItems:c,forcePositionUpdate:!1})})}))},this.getModalSearchInputValue=function(){return a.state.searchInProgressValue?a.state.searchInProgressValue:a.state.currentSelection&&!a.state.textfieldDirty?a.state.currentSelection[a.props.storeLabelProperty||"label"]:""},this.setupAddNewPopover=function(){var b=a.sta.querySelector("ha-popover");if(b){a.addNewPopover=b;var c="select-type-ahead-"+a.id;b.targetSelector?b.targetSelector="#"+c:b.setAttribute("targetSelector","#"+c),b.classList.add("popover-add-items"),b.setAttribute("automationId","addNewItem_popover")}},this.fetchStoreItems=function(b,c){var d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(a.props.store){var e=void 0;e=d.filterById?{equals:b||""}:{contains:b||""},a.props.store.query(e).then(function(a){"function"==typeof c&&c(a)})}},this.sortAndDedupe=function(a,b){return a.noSort?ca.uniqueBy(b,a.storeValueProperty||"value"):ca.sortBy(ca.uniqueBy(b,a.storeValueProperty||"value"),a.storeLabelProperty||"label")},this.focusOnFirstMenuItem=function(){if(a.menuEl){var b=a.menuEl.querySelector(".ha-menu-item");b&&b.focus()}},this.handleAccessibility=function(){a.state.itemsListVisible?a.focusOnFirstMenuItem():a.setState({itemsListVisible:!0})},this.handleItemSelected=function(b,c,d,e){a.isIOSDevice&&J();var f=d?b.target.value:b.target.selectedItem.value,g=I(a.state.visibleItems,f,a.props.storeValueProperty),h=!g&&d,i=a.state.searchInProgressValue;if(a.noBlurHandle=c,a.setState(function(a){return{modalOpen:!1,itemsListVisible:!1,visibleItems:[],forcePositionUpdate:!1,currentSelection:c?null:g,searchInProgressValue:null,inputTextValue:h||c?a.searchInProgressValue:null,inputCleared:!1}}),c)setTimeout(function(){hc.showPopoverForm(a.sta,a.addNewPopover),a.noBlurHandle=!1,a.addNewSelected=!0},300);else{if(h)a.props.onChange({selectedItem:null,inputTextValue:i});else{var j=d?e:b;j.selectedItem=g,a.props.onChange(j)}a.inputEl&&(a.inputEl.focus(),a.isHandheld&&(a.inputEl.style.color="transparent",a.inputEl.style.textShadow="0 0 0 #393a3d"))}},this.handleActionButtonClick=function(b){a.setState(function(b){return{itemsListVisible:!b.itemsListVisible,visibleItems:a.originalItems,forcePositionUpdate:!1}}),a.props.onClick(b),setTimeout(function(){!a.state.itemsListVisible&&a.inputEl?a.inputEl.focus():a.menuEl&&!a.isHandheld&&a.menuEl.focus()})},this.handleTextFieldFocus=function(){var b={showFocus:!0};a.props.openItemsOnFocus&&!a.isHandheld&&(b.itemsListVisible=!0),a.setState(b)},this.handleTextFieldClick=function(b){a.props.disabled||a.state.modalOpen||(a.isIOSDevice&&document.body.classList.add("body-lock"),a.setState({itemsListVisible:a.props.openItemsOnFocus||a.isHandheld&&!a.state.modalOpen,visibleItems:a.props.isTextFieldTypeAhead&&!a.state.currentSelection&&a.isHandheld?[]:a.originalItems,forcePositionUpdate:!1}),!a.isHandheld&&a.inputEl&&a.inputEl!==document.activeElement&&a.inputEl.focus(),a.props.onClick(b))},this.handleSearchContainerKeyDown=function(b){return b.keyCode===kb.a.UP||b.keyCode===kb.a.DOWN?(b.preventDefault(),b.stopPropagation(),a.handleAccessibility()):function(){}},this.searchItems=function(b){var c=b.target.value;(c||"").trim(),c?a.setState({textfieldDirty:!0,searchInProgressValue:c}):a.setState(function(b){return{itemsListVisible:!0,currentSelection:a.isHandheld?b.currentSelection:null,inputCleared:!a.isHandheld,searchInProgressValue:null,inputTextValue:a.isHandheld?b.inputTextValue:null,visibleItems:a.originalItems,textfieldDirty:!0}});var d=void 0;try{d=new RegExp(c.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"gi")}catch(a){}a.props.store&&!a.props.staticItems?(a.INPUT_SEARCH_TIMEOUT&&clearTimeout(a.INPUT_SEARCH_TIMEOUT),a.INPUT_SEARCH_TIMEOUT=setTimeout(function(){a.fetchStoreItems(c,function(b){a.filterAndShowResults(d,b)})},a.KEY_WAIT_TIME)):a.filterAndShowResults(d)},this.handleTextFieldInput=function(b){a.isIE11||a.searchItems(b),a.props.onInput(b),setTimeout(function(){a.isHandheld||a.isIE11||!a.inputEl||a.inputEl===document.activeElement||a.inputEl.focus()})},this.handleTextFieldKeyUp=function(b){a.searchItems(b),a.props.onKeyUp(b)},this.filterAndShowResults=function(b,c){(c=c||a.originalItems.filter(function(c){return(c[a.props.storeLabelProperty]||c.label).match(b)})).length?(a.setState(function(b){return{visibleItems:c,forcePositionUpdate:(b.visibleItems.length!==c.length||c.length===a.originalItems.length)&&!a.isHandheld,itemsListVisible:!0,currentSelection:a.isHandheld?b.currentSelection:null}}),0===a.originalItems.length&&(a.originalItems=c)):a.setState(function(b,c){return{itemsListVisible:a.isHandheld||c.addNew,visibleItems:[],forcePositionUpdate:!1,currentSelection:a.isHandheld?b.currentSelection:null}})},this.checkSearchInProgressValueHasExactMatch=function(){var b=a.inputEl?a.inputEl.value:"",c=a.addNewSelected?b:a.state.searchInProgressValue,d=a.findExactMatchIndex(c);return-1!==d&&a.setState({itemsListVisible:!1,currentSelection:a.state.visibleItems[d],searchInProgressValue:null,inputTextValue:null,inputCleared:!1}),a.addNewSelected&&(a.addNewSelected=!1,b&&(a.inputEl.value="")),d},this.handleSTABlur=function(){a.isHandheld||a.noBlurHandle||setTimeout(function(){var b=document.activeElement,c=a.props.isTextFieldTypeAhead?a.state.searchInProgressValue||a.state.inputTextValue:null;if(a.sta&&b&&!(a.menuEl&&a.menuEl.contains(b)||a.inputEl===b||a.actionBtn===b)){if(a.state.visibleItems.length){var d=a.checkSearchInProgressValueHasExactMatch();if(d>=0){var e=I(a.state.visibleItems,a.state.visibleItems[d][a.props.storeValueProperty||"value"],a.props.storeValueProperty);a.props.onChange({selectedItem:e})}}a.setState({showFocus:!1,itemsListVisible:!1,forcePositionUpdate:!1,searchInProgressValue:null,inputTextValue:c});var f=a.props.isTextFieldTypeAhead?{selectedItem:null,inputTextValue:c}:{selectedItem:null};a.state.currentSelection||a.props.onChange(f),a.actionBtn===b&&a.actionBtn.blur(),a.inputEl===b&&a.inputEl.blur()}},a.BLUR_WAIT_TIME)},this.handleModalShow=function(){a.setState({modalOpen:!0,textfieldDirty:!1,searchInProgressValue:a.props.isTextFieldTypeAhead?a.state.inputTextValue:null}),a.props.onItemsShow(),a.modalInputEl&&a.modalInputEl.focus()},this.handleModalDismiss=function(){if(a.isIOSDevice&&J(),a.state.visibleItems){var b=a.checkSearchInProgressValueHasExactMatch();b>=0&&a.props.onChange({selectedItem:a.state.visibleItems[b]}),a.inputEl&&(a.isHandheld?(a.inputEl.style.color="transparent",a.inputEl.style.textShadow="0 0 0 #393a3d",a.state.inputCleared&&a.props.onChange({selectedItem:null})):a.inputEl.focus())}a.setState({modalOpen:!1,itemsListVisible:!1,searchInProgressValue:null}),a.props.onItemsClose()},this.handleModalTextFieldInputClear=function(){a.setState({inputCleared:!0,searchInProgressValue:null,inputTextValue:null,visibleItems:a.originalItems,currentSelection:null}),a.modalInputEl&&a.modalInputEl.focus()},this.handleModalInputKeyUp=function(b,c){b.keyCode===kb.a.ENTER&&a.handleItemSelected(b,!1,!0,c)},this.staRef=function(b){a.sta=b},this.inputElRef=function(b){a.inputEl=b},this.actionBtnRef=function(b){a.actionBtn=b},this.modalInputElRef=function(b){a.modalInputEl=b},this.menuElRef=function(b){a.menuEl=b},this.renderModalInputSearch=function(){return N.a.createElement("div",{className:"ha-text-field mobile-text-field"},N.a.createElement("input",{ref:a.modalInputElRef,className:"ha-input mobile-modal-input-field-"+a.id,type:"text",placeholder:a.props.placeholder,"aria-label":a.props.label,value:a.getModalSearchInputValue(),onInput:a.handleTextFieldInput,onKeyUp:a.props.isTextFieldTypeAhead&&a.handleModalInputKeyUp}),a.renderModalInputSearchActionIcon())},this.renderModalInputSearchActionIcon=function(){return!a.state.currentSelection||a.state.searchInProgressValue||a.state.textfieldDirty?a.state.searchInProgressValue?N.a.createElement("button",{className:"btn btn-link hi hi-global-create","aria-label":"Clear input",onClick:a.handleModalTextFieldInputClear}):N.a.createElement("button",{className:"btn btn-link hi hi-search","aria-label":"Search"}):N.a.createElement("button",{className:"btn btn-link hi hi-global-create","aria-label":"Clear input",onClick:a.handleModalTextFieldInputClear})}},tc=rc,uc=(c(23),c(24),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),vc=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return wc.call(c),c.state={active:!1,ariaExpanded:!1,clientWidth:0,id:Y.generateId(c.props.id),showModal:!1,showPopover:!1,triggeredFromKeyboard:!1},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),uc(b,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(a,b){!this.state.showPopover&&this.state.triggeredFromKeyboard&&this.menuButton&&this.menuButton.children&&this.menuButton.children[0].focus(),!b.focusInPopover&&this.state.focusInPopover&&this.handleDownOnPopover()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"renderCaret",value:function(){return this.props.showCaret&&!pa.isMobile()?N.a.createElement("div",{"data-automation-id":this.props.automationId+"_caret",className:"caret"}):null}},{key:"renderIcon",value:function(){if(""!==this.props.icon){var a="icon-span hi large "+this.props.icon;return N.a.createElement("span",{"data-automation-id":this.props.automationId+"_icon",className:a})}return null}},{key:"renderLabel",value:function(){return""===this.props.icon?N.a.createElement("span",{"data-automation-id":this.props.automationId+"_label",className:"label"}," ",this.props.label," "):N.a.createElement("span",{"data-automation-id":this.props.automationId+"_label",className:"label sr-only"})}},{key:"render",value:function(){var a=R()("ha-menu-button-react",{"mobile-menu-based-button":pa.isMobile()}),b=R()(this.props.className,"ha-button","no-connector",{active:this.state.active,"with-icon":this.props.icon});return this.renderMenuButton(a,b)}}]),b}();vc.propTypes={addMobileCancelOption:P.a.bool,automationId:P.a.string,children:function(a,b,c){return 0===a.items.length&&null===a[b]?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},className:P.a.string,disabled:P.a.bool,disableMobile:P.a.bool,horizontalAlign:P.a.oneOf(["left","right"]),icon:function(a,b,c){return-1===a[b].indexOf("hi-")&&""!==a[b]?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},id:P.a.string,items:function(a,b,c){return null===a.children&&0===a[b].length?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},itemRenderer:P.a.func,label:P.a.string.isRequired,menuPosition:P.a.oneOf(["top","bottom","right","left"]),mobileCancelText:P.a.string,noFocusBackOnSelect:P.a.bool,onItemsShow:P.a.func,onItemsClose:P.a.func,onSelect:P.a.func.isRequired,popoverWidth:P.a.number,selectedValue:P.a.string,showCaret:P.a.oneOf([!0,!1,"true","false"])},vc.defaultProps={addMobileCancelOption:!1,automationId:"menu_button",children:null,className:"",disabled:!1,disableMobile:!1,horizontalAlign:"left",icon:"",id:"ha-menu-button",items:[],label:"",menuPosition:"bottom",mobileCancelText:"Cancel",noFocusBackOnSelect:!1,onItemsShow:function(){},onItemsClose:function(){},onSelect:function(){},popoverWidth:-1,selectedValue:"",showCaret:!0};var wc=function(){var a=this;this.handleDownOnPopover=function(){if(a.menu){var b=a.menu.querySelector(".ha-menu-item");b&&b.focus()}},this.handleTabEscOnPopover=function(b){b.keyCode!==kb.a.TAB&&b.keyCode!==kb.a.ESCAPE||a.menuButton&&a.menuButton.id===a.state.id&&(a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!0}),a.props.onItemsClose(b))},this.shouldAddMobileCancel=function(){return a.props.addMobileCancelOption||"Cancel"!==a.props.mobileCancelText},this.handleMenuButtonBlur=function(){setTimeout(function(){!a._mounted||!a.state.showPopover||a.state.triggeredFromKeyboard||a.state.focusInPopover||document.activeElement.classList.contains("ha-menu-item")||document.activeElement.parentElement.id===a.state.id||(a.props.onItemsClose(),a.setState({active:!1,ariaExpanded:!1,showPopover:!1}))},150)},this.refHandleMenu=function(b){b&&(a.menu=b)},this.refHandleMenuButton=function(b){b&&(a.menuButton=b)},this.refHandlerMenuPopover=function(b){b&&(a.menuPopover=b),a.menuButton&&a.menuPopover&&(-1!==a.props.popoverWidth&&(a.menuPopover.style.minWidth=a.props.popoverWidth+"px"),a.menuPopover.style.padding="0px")},this.handlePopoverOnShow=function(){a.state.ariaExpanded||a.setState({ariaExpanded:!0,active:!0,showPopover:!0})},this.handlePopoverOnClose=function(){a.state.ariaExpanded&&a.setState({ariaExpanded:!1,active:!1,focusInPopover:!1,showPopover:!1})},this.handleKeyDown=function(b){a.props.disabled||(a.state.showPopover?b.keyCode===kb.a.TAB||b.keyCode===kb.a.ESCAPE?(b.stopPropagation(),b.preventDefault(),a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!1}),a.props.onItemsClose(b)):b.keyCode===kb.a.DOWN&&(b.stopPropagation(),b.preventDefault(),a.setState({focusInPopover:!0,triggeredFromKeyboard:!0})):b.keyCode!==kb.a.ENTER&&b.keyCode!==kb.a.DOWN||a.menuButton&&a.menuButton.id===a.state.id&&(b.preventDefault(),b.stopPropagation(),a.setState({active:!0,ariaExpanded:!0,focusInPopover:!1,showPopover:!0,triggeredFromKeyboard:!0}),a.props.onItemsShow(b)))},this.handleMenuButtonClick=function(b){b.stopPropagation(),a.state.showPopover?a.props.onItemsClose(b):a.props.onItemsShow(b),a.setState({active:!a.state.active,ariaExpanded:!a.state.ariaExpanded,focusInPopover:!1,showPopover:!a.state.showPopover,triggeredFromKeyboard:"click"!==b.type}),a.menuButton&&a.menuButton.children&&a.menuButton.children.length>=1&&a.menuButton.children[0].focus()},this.handleItemSelected=function(b){b.stopPropagation(),a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showModal:!1,showPopover:!1}),a.props.onSelect(b),a.props.onItemsClose(b),a.props.noFocusBackOnSelect&&a.menuButton?a.menuButton.blur():a.menuButton&&a.menuButton.children&&a.menuButton.children.length>=1&&a.menuButton.children[0].focus()},this.handleShowModal=function(b){a.state.showModal?a.handleCloseModal():a.setState({showModal:!0,showPopover:!1,triggeredFromKeyboard:b})},this.handleCloseModal=function(){a.setState({showModal:!1,showPopover:!1,triggeredFromKeyboard:!1})},this.disabledMenuButton=function(){return a.props.disabled?null:pa.isMobile()?N.a.createElement(Ab,{automationId:a.props.automationId,className:"from-bottom",dismissible:a.shouldAddMobileCancel(),id:a.state.id,onDismiss:a.handleCloseModal,show:a.state.showModal,size:"fullwidth"},N.a.createElement("section",null,N.a.createElement(Sb,{automationId:a.props.automationId,items:a.props.items,itemRenderer:a.props.itemRenderer,onItemSelected:a.handleItemSelected,selectedValue:a.props.selectedValue},a.props.children))):N.a.createElement(tb,{alignment:[a.props.horizontalAlign],automationId:a.props.automationId,disableAutoFocus:!0,disableAutoOpen:!0,disableDefaultAccessibility:!0,disableSpike:!0,onClose:a.handlePopoverOnClose,onShow:a.handlePopoverOnShow,position:a.props.menuPosition,reference:a.refHandlerMenuPopover,sameWidthAsTargetSelector:!0,show:a.state.showPopover,targetSelector:"#"+a.state.id},N.a.createElement(Sb,{automationId:a.props.automationId,disableScroll:!0,handleTabEsc:a.handleTabEscOnPopover,items:a.props.items,itemRenderer:a.props.itemRenderer,onItemSelected:a.handleItemSelected,reference:a.refHandleMenu,selectedValue:a.props.selectedValue},a.props.children))},this.renderMobileMenuButton=function(b,c){return N.a.createElement("div",{className:"ha-menu-button-container"},N.a.createElement("div",{className:b,"data-automation-id":a.props.automationId,id:a.state.id,ref:a.refHandleMenuButton,tabIndex:"-1"},N.a.createElement("button",{"aria-expanded":a.state.ariaExpanded,"aria-haspopup":"true",className:c,"data-automation-id":a.props.automationId+"_action_button",disabled:a.props.disabled,onBlur:a.handleMenuButtonBlur,onClick:a.handleShowModal,type:"button"},a.renderLabel(),a.renderIcon(),a.renderCaret())),a.disabledMenuButton())},this.renderWebMenuButton=function(b,c){return N.a.createElement("div",{className:"ha-menu-button-container"},N.a.createElement("div",{className:b,"data-automation-id":a.props.automationId,id:a.state.id,ref:a.refHandleMenuButton,tabIndex:"-1"},N.a.createElement("button",{"aria-expanded":a.state.ariaExpanded,"aria-haspopup":"true",className:c,"data-automation-id":a.props.automationId+"_action_button",disabled:a.props.disabled,onBlur:a.handleMenuButtonBlur,onClick:a.handleMenuButtonClick,onKeyDown:a.handleKeyDown,type:"button"},a.renderLabel(),a.renderIcon(),a.renderCaret())),a.disabledMenuButton())},this.renderMenuButton=function(b,c){return pa.isMobile()&&!a.props.disableMobile?a.renderMobileMenuButton(b,c):a.renderWebMenuButton(b,c)}},xc=vc,yc=xc,zc=(c(25),c(26),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Ac=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return Bc.call(c),c.state={active:!1,ariaExpanded:!1,comboButtonId:Y.generateId("ha-combo-button"),comboDropdownId:Y.generateId("ha-combo-button-dropdown"),focusInPopover:!1,focusOnComboButton:!1,showPopover:!1,triggeredFromKeyboard:!1},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),zc(b,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(a,b){var c=this,d=this.isComboButtonValid();!this.state.showPopover&&this.state.triggeredFromKeyboard&&d&&(this.comboButton.children[1].blur(),setTimeout(function(){c.comboButton.children[1].focus()},200)),!b.focusInPopover&&this.state.focusInPopover&&this.handleDownOnPopover(),!this.state.focusInPopover&&this.state.focusOnComboButton&&d&&this.comboButton.children[0].focus()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){var a,b,c,d=""!==this.props.mobileIcon,e=R()({"ha-combo-button-react":!0}),f=R()({"combo-button-action":!0,"ha-button":!0,"ha-button-dark":-1!==this.props.className.indexOf("ha-button-dark"),"ha-button-primary":-1!==this.props.className.indexOf("ha-button-primary"),"no-connector":!0,"with-icon":this.props.mobileIcon,disabled:this.props.disabled}),g=R()({"combo-button-dropdown":!0,"ha-button":!0,"ha-button-dark":-1!==this.props.className.indexOf("ha-button-dark"),"ha-button-primary":-1!==this.props.className.indexOf("ha-button-primary"),"no-connector":!0,"with-icon":this.props.mobileIcon,disabled:this.props.disabled}),h=R()({label:!0,"sr-only":d}),i=R()((a={"icon-span":d,hi:d,large:d},b=this.props.mobileIcon,c=d,b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a));return this.renderComboButton(e,f,g,h,i)}}]),b}();Ac.propTypes={automationId:P.a.string,children:function(a,b,c){return 0===a.items.length&&null===a[b]?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},className:P.a.string,disabled:P.a.bool,horizontalAlign:P.a.oneOf(["left","right"]),items:function(a,b,c){return null===a.children&&0===a[b].length?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},label:P.a.string.isRequired,menuPosition:P.a.string,mobileIcon:function(a,b,c){return-1===a[b].indexOf("hi-")&&""!==a[b]?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},modal:P.a.bool,noFocusBackOnSelect:P.a.bool,onSelect:P.a.func.isRequired,popoverWidth:P.a.number,selectedValue:P.a.string,value:P.a.any},Ac.defaultProps={automationId:"combo_button",className:"",children:null,disabled:!1,horizontalAlign:"right",items:[],label:"",menuPosition:"bottom",mobileIcon:"",modal:pa.isMobile(),noFocusBackOnSelect:!1,onSelect:function(){},popoverWidth:-1,selectedValue:""};var Bc=function(){var a=this;this.isComboButtonValid=function(){return a.comboButton&&a.comboButton.children&&a.comboButton.children.length>=1},this.handleDownOnPopover=function(){if(a.menu){var b=a.menu.querySelector(".ha-menu-item");b&&b.focus()}},this.handleTabEscOnPopover=function(b){b.keyCode!==kb.a.TAB&&b.keyCode!==kb.a.ESCAPE||a.comboButtonDropdown&&a.comboButtonDropdown.id===a.state.comboDropdownId&&a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!0})},this.refHandleMenu=function(b){b&&(a.menu=b)},this.refHandleComboButton=function(b){b&&(a.comboButton=b)},this.refHandleComboPopover=function(b){b&&(a.comboPopover=b),a.comboButton&&a.comboPopover&&(-1!==a.props.popoverWidth&&(a.comboPopover.style.minWidth=a.props.popoverWidth+"px"),a.comboPopover.style.padding="0px")},this.refHandleComboButtonDropdown=function(b){b&&(a.comboButtonDropdown=b)},this.handlePopoverOnShow=function(){a.state.ariaExpanded||a.setState({ariaExpanded:!0,active:!0,showPopover:!0})},this.handlePopoverOnClose=function(){a.state.ariaExpanded&&a.setState({ariaExpanded:!1,active:!1,focusInPopover:!1,showPopover:!1})},this.handleComboButtonBlur=function(){setTimeout(function(){!a._mounted||!a.state.showPopover||a.state.triggeredFromKeyboard||a.state.focusInPopover||document.activeElement.classList.contains("ha-menu-item")||document.activeElement.parentElement.id===a.state.comboButtonId||document.activeElement.parentElement.id===a.state.comboDropdownId||a.setState({active:!1,ariaExpanded:!1,showPopover:!1})},150)},this.handleKeyDownComboDropdown=function(b){a.props.disabled||(a.state.showPopover?b.keyCode===kb.a.TAB||b.keyCode===kb.a.ESCAPE?(b.stopPropagation(),b.preventDefault(),a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!1})):b.keyCode===kb.a.DOWN&&(b.stopPropagation(),b.preventDefault(),a.setState({focusInPopover:!0,triggeredFromKeyboard:!0})):b.keyCode!==kb.a.ENTER&&b.keyCode!==kb.a.DOWN||a.comboButtonDropdown&&a.comboButtonDropdown.id===a.state.comboDropdownId&&(b.preventDefault(),b.stopPropagation(),a.setState({active:!0,ariaExpanded:!0,focusOnComboButton:!1,focusInPopover:!1,showPopover:!0,triggeredFromKeyboard:!0})))},this.handleComboButtonClick=function(b){b?(b.stopPropagation(),b.preventDefault()):b={target:{}},b.target.selectedItem={label:a.props.label,value:a.props.value},a.props.onSelect(b),a.setState({focusOnComboButton:!0,showPopover:!1,triggeredFromKeyboard:!1}),a.isComboButtonValid()&&a.comboButton.children[0].focus()},this.handleComboDropdownClick=function(b){b.stopPropagation(),b.preventDefault(),a.setState({focusOnComboButton:!1,active:!a.state.active,ariaExpanded:!a.state.ariaExpanded,focusInPopover:!1,showPopover:!a.state.showPopover,triggeredFromKeyboard:"click"!==b.type}),a.comboButtonDropdown&&a.comboButtonDropdown.focus()},this.handleItemSelected=function(b){b?(b.stopPropagation(),b.preventDefault()):b={target:{}},a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1}),a.props.onSelect(b),a.props.noFocusBackOnSelect&&a.comboButtonDropdown?a.comboButtonDropdown.blur():a.comboButtonDropdown&&a.comboButtonDropdown.focus()},this.isComboButtonDisabled=function(){return a.props.disabled?null:a.showComboButton()},this.showComboButton=function(){return N.a.createElement(tb,{alignment:[a.props.horizontalAlign],automationId:a.props.automationId,disableAutoFocus:!0,disableAutoOpen:!0,disableDefaultAccessibility:!0,disableSpike:!0,onClose:a.handlePopoverOnClose,onShow:a.handlePopoverOnShow,position:a.props.menuPosition,show:a.state.showPopover,reference:a.refHandleComboPopover,sameWidthAsTargetSelector:!0,targetSelector:"#"+a.state.comboButtonId},N.a.createElement(Tb,{automationId:a.props.automationId,disableScroll:!0,items:a.props.items,handleTabEsc:a.handleTabEscOnPopover,onItemSelected:a.handleItemSelected,reference:a.refHandleMenu,selectedValue:a.props.selectedValue},a.props.children))},this.renderLabel=function(b){return""!==a.props.mobileIcon&&pa.isMobile()?null:N.a.createElement("span",{className:b}," ",a.props.label," ")},this.renderMobileIcon=function(b){return""!==a.props.mobileIcon&&pa.isMobile()?N.a.createElement("span",{className:b}):null},this.renderMobileComboButton=function(){return N.a.createElement(xc,{className:a.props.className,disabled:a.props.disabled,icon:a.props.mobileIcon,items:a.props.items,label:a.props.label,onSelect:a.props.onSelect,selectedValue:a.props.selectedValue,showCaret:!0},a.props.children)},this.renderWebComboButton=function(b,c,d,e,f){return N.a.createElement("div",{className:"ha-combo-button-react-container"},N.a.createElement("div",Object.assign({className:b,"data-automation-id":a.props.automationId,id:a.state.comboButtonId,ref:a.refHandleComboButton},{disabled:a.props.disabled}),N.a.createElement("button",Object.assign({className:c,"data-automation-id":a.props.automationId+"_action_button",onClick:a.handleComboButtonClick,onBlur:a.handleComboButtonBlur},{disabled:a.props.disabled}),a.renderLabel(e),a.renderMobileIcon(f)),N.a.createElement("button",Object.assign({"aria-expanded":a.state.ariaExpanded,"aria-haspopup":"true",className:d,"data-automation-id":a.props.automationId+"_dropdown_button",id:a.state.comboDropdownId,onClick:a.handleComboDropdownClick,onBlur:a.handleComboButtonBlur,onKeyDown:a.handleKeyDownComboDropdown,ref:a.refHandleComboButtonDropdown},{disabled:a.props.disabled}),N.a.createElement("span",{className:"caret"}))),a.isComboButtonDisabled())},this.renderComboButton=function(b,c,d,e,f){return a.props.modal?a.renderMobileComboButton():a.renderWebComboButton(b,c,d,e,f)}},Cc=Ac,Dc=(c(27),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Ec=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return Fc.call(c),c.state={active:!1,ariaExpanded:!1,clientWidth:0,id:Y.generateId(c.props.id),showPopover:!1,triggeredFromKeyboard:!1},c.comboLink=null,c.comboLinkButton=null,c.comboLinkDropdown=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Dc(b,[{key:"componentDidMount",value:function(){this._mounted=!0}},{key:"componentDidUpdate",value:function(a,b){!this.state.showPopover&&this.state.triggeredFromKeyboard&&this.comboLinkDropdown&&this.comboLinkDropdown.focus(),!b.focusInPopover&&this.state.focusInPopover&&this.handleDownOnPopover()}},{key:"componentWillUnmount",value:function(){this._mounted=!1}},{key:"render",value:function(){var a=this.props.className,b=R()(a,"ha-combo-link"),c=R()({btn:!0,"btn-link":!0,disabled:this.props.disabled}),d=R()({active:this.state.active,btn:!0,"hi-icon-button":!0,disabled:this.props.disabled});return N.a.createElement("div",{className:b},N.a.createElement("div",{className:"btn-group",id:this.state.id,ref:this.refHandleComboLink},N.a.createElement("button",{className:c,onClick:this.handleComboLinkSelected},N.a.createElement("span",{className:"label"},this.props.label)),N.a.createElement("button",{"aria-expanded":this.state.ariaExpanded,className:d,onClick:this.handleDropDownCaretClick,onKeyDown:this.handleKeyDownComboDropdown,onBlur:this.handleComboLinkDropdownBlur},N.a.createElement("span",{className:"caret"}))),N.a.createElement(tb,{alignment:[this.props.horizontalAlign],disableAutoOpen:!0,disableDefaultAccessibility:!0,disableSpike:!0,onClose:this.handlePopoverOnClose,onShow:this.handlePopoverOnShow,position:this.props.menuPosition,reference:this.refHandleMenuPopover,sameWidthAsTargetSelector:!0,show:this.state.showPopover,targetSelector:"#"+this.state.id},N.a.createElement(Sb,{disableScroll:this.props.disableScroll,handleTabEsc:this.handleTabEscOnPopover,items:this.props.items,itemRenderer:this.props.itemRenderer,onItemSelected:this.handleItemSelected,reference:this.refHandleMenu,selectedValue:this.props.selectedValue},this.props.children)))}}]),b}();Ec.propTypes={children:function(a,b,c){return 0===a.items.length&&null===a[b]?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},className:P.a.string,disabled:P.a.bool,disableScroll:P.a.bool,horizontalAlign:P.a.oneOf(["left","right"]),id:P.a.string,items:function(a,b,c){return null===a.children&&0===a[b].length?new Error("Invalid prop "+b+" supplied to "+c+", "+a[b]+" validation failed"):null},itemRenderer:P.a.func,label:P.a.string.isRequired,menuPosition:P.a.oneOf(["top","bottom","right","left"]),onSelect:P.a.func.isRequired,popoverWidth:P.a.number,selectedValue:P.a.string,value:P.a.string.isRequired},Ec.defaultProps={children:null,className:null,disabled:!1,disableScroll:!0,horizontalAlign:"left",id:"ha-combo-link",items:[],itemRenderer:null,label:"",menuPosition:"bottom",onSelect:function(){},popoverWidth:-1,selectedValue:""};var Fc=function(){var a=this;this.handleDownOnPopover=function(){if(a.menu){var b=a.menu.querySelector(".ha-menu-item");b&&b.focus()}},this.handleTabEscOnPopover=function(b){b.keyCode!==kb.a.TAB&&b.keyCode!==kb.a.ESCAPE||a.comboLinkDropdown&&a.comboLink&&a.comboLink.id===a.state.id&&a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!0})},this.showMenuPopover=function(b){a.setState({active:!0,ariaExpanded:!0,focusInPopover:!1,showPopover:!0,triggeredFromKeyboard:"keydown"===b.type}),a.comboLinkDropdown&&a.comboLinkDropdown.focus()},this.hideMenuPopover=function(){a.setState({active:!1,ariaExpanded:!1,showPopover:!1}),a.comboLinkDropdown&&a.comboLinkDropdown.focus()},this.refHandleComboLink=function(b){a.comboLink=b,a.comboLink&&a.comboLink.children&&a.comboLink.children.length>=2&&(a.comboLinkButton=a.comboLink.children[0],a.comboLinkDropdown=a.comboLink.children[1])},this.refHandleMenuPopover=function(b){b&&(a.menuPopover=b),a.state.showPopover&&a.comboLink&&a.menuPopover&&(-1===a.props.popoverWidth?a.menuPopover.style.minWidth=a.comboLink.clientWidth+"px":a.menuPopover.style.minWidth=a.props.popoverWidth+"px",a.menuPopover.style.padding="0px")},this.refHandleMenu=function(b){b&&(a.menu=b)},this.handleKeyDownComboDropdown=function(b){a.props.disabled||(a.state.showPopover?b.keyCode===kb.a.TAB||b.keyCode===kb.a.ESCAPE?(b.stopPropagation(),b.preventDefault(),a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1,triggeredFromKeyboard:!1})):b.keyCode===kb.a.DOWN&&(b.stopPropagation(),b.preventDefault(),a.setState({focusInPopover:!0,triggeredFromKeyboard:!0})):b.keyCode!==kb.a.ENTER&&b.keyCode!==kb.a.DOWN||a.comboLinkDropdown&&a.comboLink.id===a.state.id&&(b.preventDefault(),b.stopPropagation(),a.setState({active:!0,ariaExpanded:!0,focusInPopover:!1,showPopover:!0,triggeredFromKeyboard:!0})))},this.handlePopoverOnShow=function(){a.state.ariaExpanded||a.setState({active:!0,ariaExpanded:!0,showPopover:!0})},this.handlePopoverOnClose=function(){a.state.ariaExpanded&&a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1})},this.handleDropDownCaretClick=function(b){a.state.showPopover?a.hideMenuPopover():a.showMenuPopover(b)},this.handleItemSelected=function(b){b.stopPropagation(),a.setState({active:!1,ariaExpanded:!1,focusInPopover:!1,showPopover:!1}),a.props.onSelect(b),a.comboLinkButton&&a.comboLinkButton.focus()},this.handleComboLinkDropdownBlur=function(){setTimeout(function(){!a._mounted||!a.state.showPopover||a.state.triggeredFromKeyboard||a.state.focusInPopover||document.activeElement.classList.contains("ha-menu-item")||document.activeElement.parentElement.id===a.state.id||a.setState({active:!1,ariaExpanded:!1,showPopover:!1})},150)},this.handleComboLinkSelected=function(b){b.stopPropagation(),b.nativeEvent=b.nativeEvent||{target:{}},b.nativeEvent.target.selectedItem={label:a.props.label,value:a.props.value},a.props.onSelect(b.nativeEvent),a.comboLinkButton&&a.comboLinkButton.focus(),(a.state.active||a.state.ariaExpanded||a.state.showPopover)&&a.setState({active:!1,ariaExpanded:!1,showPopover:!1})}},Gc=Ec,Hc=(c(28),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Ic=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.refCallback=function(a){c.radioInput=a},c.handleClick=function(a){a.stopPropagation(),a.preventDefault(),c.props.disabled||(c.handleSelection(),c.radioInput.click())},c.handleChange=function(a){a.stopPropagation(),c.props.disabled||(c.handleSelection(),c.props.onChange&&c.props.onChange(a))},c.handleOnFocus=function(a){a.stopPropagation(),c.props.disabled||(c.props.reportFocus&&c.props.reportFocus(c.id),c.props.onFocus&&c.props.onFocus(a))},c.handleOnBlur=function(a){a.stopPropagation(),c.props.disabled||(c.props.reportBlur&&c.props.reportBlur(c.id),c.props.onBlur&&c.props.onBlur(a))},c.state={isChecked:!1},c.id=a.id||Y.generateId("ha-radio-button"),c.radioInput=null,c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Hc(b,[{key:"componentWillMount",value:function(){this.props.checked&&this.setState({isChecked:this.props.checked})}},{key:"componentWillReceiveProps",value:function(a){a.checked!==this.props.checked&&this.setState({isChecked:a.checked})}},{key:"handleSelection",value:function(){this.setState({isChecked:!0}),this.props.onSelected&&this.props.onSelected(this.props.value),this.radioInput&&this.radioInput.focus()}},{key:"renderLabel",value:function(){return N.a.createElement(X,{htmlFor:this.id,onClick:this.handleClick},this.props.label)}},{key:"render",value:function(){var a,b,c,d=this.props,e=d.automationId,f=(d.checked,d.onSelected,d.reportFocus,d.reportBlur,d.children),g=function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(d,["automationId","checked","onSelected","reportFocus","reportBlur","children"]),h=this.state.isChecked,i=R()((a={"ha-radio-button":!0,"mobile-radio":pa.isHandheld()},b=this.props.className,c=this.props.className,b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a));return N.a.createElement("div",{className:i,"data-automation-id":e+"_"+this.props.value},N.a.createElement("input",Object.assign({type:"radio"},g,{ref:this.refCallback,id:this.id,checked:h,onChange:this.handleChange,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur})),this.renderLabel(),f)}}]),b}();Ic.propTypes={className:P.a.string,label:P.a.string,value:P.a.oneOfType([P.a.string,P.a.number]).isRequired,checked:P.a.bool,disabled:P.a.bool,onSelected:P.a.func,reportFocus:P.a.func,reportBlur:P.a.func,onChange:P.a.func,onClick:P.a.func,automationId:P.a.string},Ic.defaultProps={value:"",checked:!1,disabled:!1,automationId:"rbtn_default"};var Jc,Kc=Ic,Lc=(c(29),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Mc=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.onSelectedItem=function(a){c.testValidity(a),c.setState({value:a})},c.reportFocus=function(a){c.setState({focusRadios:Object.assign({},c.state.focusRadios,K({},a,!0))})},c.reportBlur=function(a){c.setState({focusRadios:Object.assign({},c.state.focusRadios,K({},a,!1))})};var d=function(a){var b=void 0,c=!1;return N.a.Children.forEach(a,function(a){a.type===Kc&&a.props&&a.props.checked?b=a.props.value:a.type!==X&&"label"!==a.type||(c=!0)}),{value:b,hasCustomLabel:c}}(a.children),e=d.value,f=d.hasCustomLabel;return a.value&&(e=a.value),c.state={value:e,showValidity:a.alwaysRenderValidity,isValid:Z.getValidity(e,a),focusRadios:{}},c.id=a.id||Y.generateId("ha-radio-button-group"),c.hasCustomLabel=f,c.tooltipTargetClass=Y.generateId("ha-validation-tooltip-target"),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Lc(b,[{key:"componentDidMount",value:function(){this.props.onValidityChange&&this.props.onValidityChange(this.state.isValid)}},{key:"componentWillReceiveProps",value:function(a){a.resetValidation&&this.setState({showValidity:!1,focusRadios:{}}),!a.resetValidation&&a.alwaysRenderValidity&&this.setState({showValidity:!0}),a.value!==this.props.value&&(this.testValidity(a.value),this.setState({value:a.value}))}},{key:"componentDidUpdate",value:function(){var a=this;!this.props.required||this.hasFocusRadio()||this.state.showValidity?this.props.required&&!this.hasNoValue()&&this.state.showValidity&&this.setState({showValidity:!1}):setTimeout(function(){a.hasNoValue()&&a.setState({showValidity:!0})},150)}},{key:"hasNoValue",value:function(){return null===this.state.value||void 0===this.state.value}},{key:"hasFocusRadio",value:function(){var a=this,b=Object.keys(this.state.focusRadios);return 0===b.length||b.some(function(b){return a.state.focusRadios[b]})}},{key:"testValidity",value:function(a){var b=Z.getValidity(a,this.props);this.state.isValid!==b&&(this.setState({isValid:b}),this.props.onValidityChange&&this.props.onValidityChange(b))}},{key:"getLabelDom",value:function(a,b){var c=b?Object.assign({},b.props,{className:R()(["ha-label-validatable",b.props.className])}):{className:"ha-label-validatable"};return N.a.createElement("div",{className:b?null:"label-container"},N.a.createElement(ab,{show:a}),N.a.createElement("legend",null,N.a.createElement(X,c,b?b.props.children:this.props.label,N.a.createElement(bb,{show:this.props.required&&!this.props.noRequiredIndicator}),N.a.createElement(db,{show:this.props.optional&&!this.props.required,labelOptional:this.props.labelOptional}))))}},{key:"renderLabel",value:function(a,b){if(this.props.label&&!a)return this.getLabelDom(b)}},{key:"renderChildren",value:function(a){var b=this,c=void 0,d=this.props.name?this.props.name:this.id;return N.a.Children.map(this.props.children,function(e,f){return e.type===Kc?(c=!(e.props.value!==b.state.value||void 0===b.state.value&&null===b.state.value),N.a.cloneElement(e,{key:f,name:d,checked:c,onSelected:b.onSelectedItem,onChange:b.props.onChange,onClick:b.props.onClick,reportFocus:b.reportFocus,reportBlur:b.reportBlur,automationId:b.props.automationId})):e.type===X||"label"===e.type?b.getLabelDom(a,e):e})}},{key:"render",value:function(){var a,b=!this.state.isValid&&this.state.showValidity,c=this.hasNoValue()&&this.props.required?this.props.requiredMessage:this.props.invalidMessage,d=R()((K(a={"ha-radio-button-group":!0,"ha-inline":this.props.inline,"input-error":b},this.tooltipTargetClass,b),K(a,this.props.className,this.props.className),a));return N.a.createElement("div",{className:d,id:this.id,"data-automation-id":this.props.automationId},N.a.createElement("fieldset",null,this.renderLabel(this.hasCustomLabel,b),this.renderChildren(b)),N.a.createElement(_a,{show:b,errorMessage:c,tooltipTargetClass:this.tooltipTargetClass}))}}]),b}();Mc.propTypes={children:P.a.array,className:P.a.string,label:P.a.string,name:P.a.string,value:P.a.oneOfType([P.a.string,P.a.number]),required:P.a.bool,noRequiredIndicator:P.a.bool,labelOptional:P.a.string,optional:P.a.bool,inline:P.a.bool,validator:P.a.func,onValidityChange:P.a.func,resetValidation:P.a.bool,alwaysRenderValidity:P.a.bool,requiredMessage:P.a.string,invalidMessage:P.a.string,onChange:P.a.func,onClick:P.a.func,automationId:P.a.string},Mc.defaultProps=(K(Jc={noRequiredIndicator:!1,optional:!1,required:!1},"optional",!1),K(Jc,"requiredMessage","Required Field"),K(Jc,"invalidMessage","Invalid Value"),K(Jc,"alwaysRenderValidity",!1),Jc);var Nc=Mc,Oc=(c(30),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Pc=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleClick=function(a,b){return function(d){if(d.preventDefault(),!b){c.setState({selectedIndex:a});var e=Object.assign({},d);c.props.onSelected(e,a)}}},c.handleKeyEvents=function(a){kb.a.LEFT===a.keyCode?(a.preventDefault(),c.moveToIndex(!0)):kb.a.RIGHT===a.keyCode?(a.preventDefault(),c.moveToIndex(!1)):kb.a.SPACE!==a.keyCode&&kb.a.ENTER!==a.keyCode||c.tabpanel&&(a.currentTarget&&a.currentTarget.blur(),c.tabpanel.focus())},c.setTabPanel=function(a){c.tabpanel=a},c.handleTabRef=function(a){c.nextFocusableTab=a},c.renderLabels=c.renderLabels.bind(c),c.state={selectedIndex:a.defaultSelected},c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Oc(b,[{key:"moveToIndex",value:function(a){for(var b=0,c=a?-1:1,d=this.state.selectedIndex,e=N.a.Children.toArray(this.props.children);b<e.length&&!(d+c*(b+1)<0||d+c*(b+1)>e.length-1);){if(!e[d+c*(b+1)].props.destroyInactiveTab&&!e[d+c*(b+1)].props.disabled){b+=1,this.setState({selectedIndex:d+c*b});break}b+=1}}},{key:"renderChildrenContent",value:function(){var a=N.a.Children.toArray(this.props.children),b=this.state.selectedIndex;return N.a.createElement("div",{className:"tab",role:"tabpanel",tabIndex:"0",ref:this.setTabPanel},a[b])}},{key:"renderLabelNames",value:function(a,b){var c="hi large hi-"+a.props.icon;return N.a.createElement("span",{"data-text":a.props.name,className:a.props.disabled?"tabs-names__tabs-item--tabs-disabled":"tabs-names__tabs-item--tabs "+b},a.props.icon?N.a.createElement("span",null,N.a.createElement("i",{className:c}),N.a.createElement("span",{className:"tab-name"},a.props.name)):null,a.props.badgeType?N.a.createElement("span",null,N.a.createElement("span",{class:"tab-name"},a.props.name)," ",N.a.createElement("i",{className:a.props.badgeType},a.props.badgeContent)):null,a.props.icon||a.props.badgeType?null:N.a.createElement("span",{className:"tab-name"},a.props.name))}},{key:"renderLabels",value:function(a,b){var c=this.state.selectedIndex===b?"tabs-names__tabs-item--active":"tabs-names__tabs-item",d=this.state.selectedIndex;if(a.props.destroyInactiveTab)return null;var e=d===b;return N.a.createElement("li",{className:c,key:b,onClick:this.handleClick(b,a.props.disabled),onKeyDown:this.handleKeyEvents,tabIndex:e?0:-1,role:"tab",ref:e?this.handleTabRef:null,"aria-selected":e,"aria-expanded":e},this.renderLabelNames(a,b))}},{key:"renderTitles",value:function(){return N.a.createElement("ul",{className:"tabs-names",role:"tablist"},N.a.Children.map(this.props.children,this.renderLabels))}},{key:"render",value:function(){return N.a.createElement("div",{className:"tabs"},this.renderTitles(),this.renderChildrenContent())}}]),b}();Pc.propTypes={children:P.a.oneOfType([P.a.array,P.a.element]).isRequired,defaultSelected:P.a.number,onSelected:P.a.func},Pc.defaultProps={defaultSelected:0,onSelected:function(){}};var Qc=Pc,Rc=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),Sc=function(a){function b(){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Rc(b,[{key:"render",value:function(){return N.a.createElement("div",{className:"tab__tab-content"},this.props.children,this.props.disabled)}}]),b}();Sc.propTypes={badgeContent:P.a.string,badgeType:P.a.string,children:P.a.element.isRequired,destroyInactiveTab:P.a.bool,disabled:P.a.bool,icon:P.a.string,name:P.a.string.isRequired},Sc.defaultProps={badgeContent:"",badgeType:"",destroyInactiveTab:!1,disabled:!1,icon:"",name:""};var Tc=Sc,Uc=(c(31),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Vc=function(a){function b(a){!function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b);var c=function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));c.handleRef=function(a){c.textArea=a},c.handleBlur=function(a){var b=c.state.value?c.state.value.trim():"";c.setState({focus:!1,value:b}),b!==c.state.value&&c.isHandheld&&c.updateTextAreaMobileStyle(b),c.testValidity(b),c.props.onChange&&b!==c.prevValue&&(c.prevValue=b,a.target.value=b,c.props.onChange(a)),c.props.onBlur&&c.props.onBlur(a)},c.handleFocus=function(a){c.setState({focus:!0}),c.props.onFocus&&c.props.onFocus(a)},c.handleChange=function(a){var b=a.target.value;c.isHandheld&&c.updateTextAreaMobileStyle(b),b&&c.testValidity(b),c.setState({value:b})},c.handleLabelOnClick=function(a){a.stopPropagation(),a.preventDefault(),c.props.onClick&&c.props.onClick(a),c.textArea&&c.textArea.focus()};var d=!c.props.alwaysRenderValidity||Z.getValidity(a.value,a);c.state={value:a.value||"",divStyle:null,textAreaStyle:null,isValid:d,focus:!1},c.id=a.id||Y.generateId("ha-textarea"),c.textArea=null;var e=c.getMaxRows(a.mobileRows,a.mobileRowsMax),f=e.mobileRows,g=e.mobileRowsMax;return c.mobileRows=f,c.mobileRowsMax=g,c.isHandheld=pa.isHandheld(),c.firstValidity=!0,c.textareaStyles=null,c.prevValue=a.value?a.value.trim():"",c.tooltipTargetClass=Y.generateId("ha-validation-tooltip-target"),c}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Uc(b,[{key:"componentDidMount",value:function(){this.textArea&&this.isHandheld&&(this.textareaStyles=getComputedStyle(this.textArea),this.updateDivMobileStyle(),this.updateTextAreaMobileStyle())}},{key:"componentWillReceiveProps",value:function(a){if(a.resetValidation&&(this.firstValidity=!0,this.setState({isValid:!0})),!a.resetValidation&&a.alwaysRenderValidity&&this.testValidity(this.state.value),a.value!==this.props.value&&(this.testValidity(a.value),this.setState({value:a.value})),this.props.mobileRows!==a.mobileRows||this.props.mobileRowsMax!==a.mobileRowsMax){var b=this.getMaxRows(a.mobileRows,a.mobileRowsMax),c=b.mobileRows,d=b.mobileRowsMax;this.mobileRows=c,this.mobileRowsMax=d,this.textArea&&this.isHandheld&&(this.updateDivMobileStyle(),this.updateTextAreaMobileStyle())}}},{key:"testValidity",value:function(a){var b=Z.getValidity(a,this.props);(this.state.isValid!==b||this.firstValidity)&&(this.setState({isValid:b}),this.props.onValidityChange&&this.props.onValidityChange(b),this.firstValidity&&(this.firstValidity=!1))}},{key:"getMaxRows",value:function(a,b){var c=2,d=4;return a<=b?(c=a,d=b):(console.error("mobileRowsMax should not be less than mobileRows."),console.error("mobileRows is set to default 2, and mobileRowsMax is set to default 4.")),{mobileRows:c,mobileRowsMax:d}}},{key:"updateDivMobileStyle",value:function(){var a=parseInt(Math.ceil(this.textareaStyles.lineHeight.slice(0,-2)))||23,b=this.mobileRowsMax*a+23+"px";this.setState({divStyle:{height:b}})}},{key:"updateTextAreaMobileStyle",value:function(a){var b=this.getTextAreaMobileStyle(a);this.setState({textAreaStyle:b})}},{key:"getContentHeightMobile",value:function(a,b){var c,d=document.createElement("div");return d.style.fontSize=a.fontSize,d.style.whiteSpace=a.whiteSpace,d.style.wordBreak=a.wordBreak,d.style.wordWrap=a.wordWrap,d.style.wordSpacing=a.wordSpacing,d.style.textTransform=a.textTransform,d.style.fontFamily=a.fontFamily,d.style.lineHeight=a.lineHeight,d.style.fontWeight=a.fontWeight,d.style.width=a.width,d.style.padding=a.padding,d.style.letterSpacing=a.letterSpacing,d.style.position="absolute",d.style.top="-90px",d.style.left=-1*(parseInt(a.width)+10)+"px",d.textContent=b,document.body.appendChild(d),c=d.offsetHeight,document.body.removeChild(d),c}},{key:"getTextAreaMobileStyle",value:function(a){var b=this.getContentHeightMobile(this.textareaStyles,a),c=parseInt(this.textareaStyles.height),d=parseInt(Math.ceil(this.textareaStyles.lineHeight.slice(0,-2)))||23,e=Math.max(parseInt(c/d),1),f=Math.max(parseInt(Math.floor(b/d)),1),g=0;return{paddingTop:(g=this.state.value||this.state.focus?this.mobileRows>f?this.mobileRows*d:f<=this.mobileRowsMax&&f!==e?f*d:Math.max(c,34):34)<=34?"10px":"0",height:g+"px"}}},{key:"renderLabel",value:function(a,b){if(this.props.label||b){var c=b?Object.assign({},b.props,{className:R()(["ha-label-validatable",b.props.className])}):{className:"ha-label-validatable"};return N.a.createElement("div",null,N.a.createElement(ab,{show:a}),N.a.createElement(X,Object.assign({},c,{htmlFor:this.id,onClick:this.handleLabelOnClick}),b?b.props.children:this.props.label,N.a.createElement(bb,{show:this.props.required&&!this.props.noRequiredIndicator}),N.a.createElement(db,{show:this.props.optional,labelOptional:this.props.labelOptional})))}}},{key:"getAriaLabel",value:function(){if(!this.props.label)return this.props.ariaLabel||this.props.placeholder?this.props.ariaLabel||this.props.placeholder:void console.warn("A11y: Textarea needs a label, ariaLabel, or placeholder in order to be used accessibly. Ensure one is passed from higher order components.")}},{key:"render",value:function(){var a,b=this.props,c=(b.label,b.required),d=b.children,e=(b.noRequiredIndicator,b.optional,b.labelOptional,b.mobileRows,b.mobileRowsMax,b.pattern,b.ariaLabel,b.requiredMessage,b.invalidMessage,b.validator,b.onValidityChange,b.resetValidation,b.alwaysRenderValidity,b.automationId,function(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}(b,["label","required","children","noRequiredIndicator","optional","labelOptional","mobileRows","mobileRowsMax","pattern","ariaLabel","requiredMessage","invalidMessage","validator","onValidityChange","resetValidation","alwaysRenderValidity","automationId"])),f=!this.state.isValid,g=R()((L(a={"ha-textarea":!0,"mobile-textarea":this.isHandheld,"mobile-textarea-content":!!this.state.value&&this.isHandheld,"mobile-textarea-focused":this.state.focus&&this.isHandheld,disabled:this.props.disabled,"input-error":f},this.tooltipTargetClass,f),L(a,this.props.className,this.props.className),a)),h=void 0,i=N.a.Children.map(d,function(a){if(a.type!==X&&"label"!==a.type)return a;h=a}),j=this.props.required&&!this.state.value?this.props.requiredMessage:this.props.invalidMessage,k="name-error-"+this.id;return N.a.createElement("div",{className:g,style:this.state.divStyle,"data-automation-id":this.props.automationId},this.renderLabel(f,h),i,N.a.createElement("div",{className:"textarea-container"},N.a.createElement("textarea",Object.assign({},e,{ref:this.handleRef,id:this.id,className:"ha-input",style:this.state.textAreaStyle,rows:this.isHandheld?this.mobileRows:this.props.rows,value:this.state.value||"","aria-label":this.getAriaLabel(),"aria-required":!!c||null,"aria-invalid":!!f||null,"aria-describedby":!this.isHandheld&&f?k:null,onBlur:this.handleBlur,onFocus:this.handleFocus,onChange:this.handleChange}))),N.a.createElement(_a,{show:f,errorMessage:j,tooltipTargetClass:this.tooltipTargetClass,ariaDescribedById:k}))}}]),b}();Vc.propTypes={alwaysRenderValidity:P.a.bool,ariaLabel:P.a.string,automationId:P.a.string,className:P.a.string,cols:P.a.number,disabled:P.a.bool,id:P.a.string,invalidMessage:P.a.string,label:P.a.string,labelOptional:P.a.string,name:P.a.string,noRequiredIndicator:P.a.bool,maxLength:P.a.number,minLength:P.a.number,mobileRows:P.a.number,mobileRowsMax:P.a.number,onBlur:P.a.func,onFocus:P.a.func,optional:P.a.bool,onValidityChange:P.a.func,pattern:P.a.string,placeholder:P.a.string,readOnly:P.a.bool,required:P.a.bool,requiredMessage:P.a.string,resetValidation:P.a.bool,rows:P.a.number,validator:P.a.func,value:P.a.string},Vc.defaultProps={alwaysRenderValidity:!1,automationId:"text_area",cols:20,invalidMessage:"Invalid Value",maxLength:524288,minLength:0,mobileRows:2,mobileRowsMax:4,noRequiredIndicator:!1,optional:!1,required:!1,requiredMessage:"Required Field",resetValidation:!1,rows:2,value:""};var Wc=Vc,Xc=(c(32),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),Yc=function(a){function b(a){return function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}(this,b),function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(b,N.a.Component),Xc(b,[{key:"render",value:function(){return N.a.createElement("div",null,N.a.createElement(tc,Object.assign({},this.props,{isTextFieldTypeAhead:!0})))}}]),b}();Yc.propTypes={addNew:P.a.bool,addNewText:P.a.string,ariaLabel:P.a.string,children:P.a.oneOfType([P.a.bool,P.a.element]),className:P.a.string,data:P.a.array,disabled:P.a.bool,icon:P.a.string,itemRenderer:P.a.func,label:P.a.string,mobileMenuClass:P.a.string,name:P.a.string,noRequiredIndicator:P.a.bool,noSort:P.a.bool,onChange:P.a.func,onClick:P.a.func,onItemsClose:P.a.func,onItemsShow:P.a.func,openItemsOnFocus:P.a.bool,placeholder:P.a.string,required:P.a.bool,requiredMessage:P.a.string,size:P.a.number,staticItems:P.a.bool,store:P.a.object,storeLabelProperty:P.a.string,storeValueProperty:P.a.string,typeaheadAriaLabel:P.a.string,value:P.a.string,automationId:P.a.string,invalidMessage:P.a.string,validator:P.a.func,onValidityChange:P.a.func,alwaysRenderValidity:P.a.bool,resetValidation:P.a.bool},Yc.defaultProps={automationId:"textfield_type_ahead"};var Zc=Yc;c.d(b,"SelectTypeAhead",function(){return tc}),c.d(b,"Tooltip",function(){return $a}),c.d(b,"TextField",function(){return gb}),c.d(b,"MenuButton",function(){return yc}),c.d(b,"ComboButton",function(){return Cc}),c.d(b,"ComboLink",function(){return Gc}),c.d(b,"Label",function(){return X}),c.d(b,"Popover",function(){return ub}),c.d(b,"RadioButton",function(){return Kc}),c.d(b,"RadioButtonGroup",function(){return Nc}),c.d(b,"Tabs",function(){return Qc}),c.d(b,"Tab",function(){return Tc}),c.d(b,"Textarea",function(){return Wc}),c.d(b,"TextFieldTypeAhead",function(){return Zc})},function(a,b){},function(a,b,c){(function(a){var d,e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a};!function(f,g){"use strict";var h="model",i="name",j="type",k="vendor",l="version",m="mobile",n="tablet",o={extend:function(a,b){var c={};for(var d in a)b[d]&&b[d].length%2==0?c[d]=b[d].concat(a[d]):c[d]=a[d];return c},has:function(a,b){return"string"==typeof a&&-1!==b.toLowerCase().indexOf(a.toLowerCase())},lowerize:function(a){return a.toLowerCase()},major:function(a){return"string"===(void 0===a?"undefined":e(a))?a.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},p={rgx:function(a,b){for(var c,d,f,g,h,i,j=0;j<b.length&&!h;){var k=b[j],l=b[j+1];for(c=d=0;c<k.length&&!h;)if(h=k[c++].exec(a))for(f=0;f<l.length;f++)i=h[++d],"object"===(void 0===(g=l[f])?"undefined":e(g))&&g.length>0?2==g.length?"function"==e(g[1])?this[g[0]]=g[1].call(this,i):this[g[0]]=g[1]:3==g.length?"function"!==e(g[1])||g[1].exec&&g[1].test?this[g[0]]=i?i.replace(g[1],g[2]):void 0:this[g[0]]=i?g[1].call(this,i,g[2]):void 0:4==g.length&&(this[g[0]]=i?g[3].call(this,i.replace(g[1],g[2])):void 0):this[g]=i||void 0;j+=2}},str:function(a,b){for(var c in b)if("object"===e(b[c])&&b[c].length>0){for(var d=0;d<b[c].length;d++)if(o.has(b[c][d],a))return"?"===c?void 0:c}else if(o.has(b[c],a))return"?"===c?void 0:c;return a}},q={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},r={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[i,l],[/(opios)[\/\s]+([\w\.]+)/i],[[i,"Opera Mini"],l],[/\s(opr)\/([\w\.]+)/i],[[i,"Opera"],l],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[i,l],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[i,"IE"],l],[/(edge|edgios|edgea)\/((\d+)?[\w\.]+)/i],[[i,"Edge"],l],[/(yabrowser)\/([\w\.]+)/i],[[i,"Yandex"],l],[/(puffin)\/([\w\.]+)/i],[[i,"Puffin"],l],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[i,"UCBrowser"],l],[/(comodo_dragon)\/([\w\.]+)/i],[[i,/_/g," "],l],[/(micromessenger)\/([\w\.]+)/i],[[i,"WeChat"],l],[/(qqbrowserlite)\/([\w\.]+)/i],[i,l],[/(QQ)\/([\d\.]+)/i],[i,l],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[i,l],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[i,l],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[i,l],[/(MetaSr)[\/\s]?([\w\.]+)/i],[i],[/(LBBROWSER)/i],[i],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[l,[i,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[l,[i,"Facebook"]],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[l,[i,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[i,/(.+)/,"$1 WebView"],l],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[i,/(.+(?:g|us))(.+)/,"$1 $2"],l],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[l,[i,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[i,l],[/(dolfin)\/([\w\.]+)/i],[[i,"Dolphin"],l],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[i,"Chrome"],l],[/(coast)\/([\w\.]+)/i],[[i,"Opera Coast"],l],[/fxios\/([\w\.-]+)/i],[l,[i,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[l,[i,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[l,i],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[i,"GSA"],l],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[i,[l,p.str,q.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[i,l],[/(navigator|netscape)\/([\w\.-]+)/i],[[i,"Netscape"],l],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[i,l]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",o.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",o.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+;))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",o.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[h,k,[j,n]],[/applecoremedia\/[\w\.]+ \((ipad)/],[h,[k,"Apple"],[j,n]],[/(apple\s{0,1}tv)/i],[[h,"Apple TV"],[k,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[k,h,[j,n]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[h,[k,"Amazon"],[j,n]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[h,p.str,q.device.amazon.model],[k,"Amazon"],[j,m]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[h,k,[j,m]],[/\((ip[honed|\s\w*]+);/i],[h,[k,"Apple"],[j,m]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[k,h,[j,m]],[/\(bb10;\s(\w+)/i],[h,[k,"BlackBerry"],[j,m]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[h,[k,"Asus"],[j,n]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[k,"Sony"],[h,"Xperia Tablet"],[j,n]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[h,[k,"Sony"],[j,m]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[k,h,[j,"console"]],[/android.+;\s(shield)\sbuild/i],[h,[k,"Nvidia"],[j,"console"]],[/(playstation\s[34portablevi]+)/i],[h,[k,"Sony"],[j,"console"]],[/(sprint\s(\w+))/i],[[k,p.str,q.device.sprint.vendor],[h,p.str,q.device.sprint.model],[j,m]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[k,h,[j,n]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[k,[h,/_/g," "],[j,m]],[/(nexus\s9)/i],[h,[k,"HTC"],[j,n]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[h,[k,"Huawei"],[j,m]],[/(microsoft);\s(lumia[\s\w]+)/i],[k,h,[j,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[h,[k,"Microsoft"],[j,"console"]],[/(kin\.[onetw]{3})/i],[[h,/\./g," "],[k,"Microsoft"],[j,m]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[h,[k,"Motorola"],[j,m]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[h,[k,"Motorola"],[j,n]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[k,o.trim],[h,o.trim],[j,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[h,/^/,"SmartTV"],[k,"Samsung"],[j,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[h,[k,"Sharp"],[j,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[k,"Samsung"],h,[j,n]],[/smart-tv.+(samsung)/i],[k,[j,"smarttv"],h],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[k,"Samsung"],h,[j,m]],[/sie-(\w*)/i],[h,[k,"Siemens"],[j,m]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[k,"Nokia"],h,[j,m]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[h,[k,"Acer"],[j,n]],[/android.+([vl]k\-?\d{3})\s+build/i],[h,[k,"LG"],[j,n]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[k,"LG"],h,[j,n]],[/(lg) netcast\.tv/i],[k,h,[j,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[h,[k,"LG"],[j,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[h,[k,"Lenovo"],[j,n]],[/linux;.+((jolla));/i],[k,h,[j,m]],[/((pebble))app\/[\d\.]+\s/i],[k,h,[j,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[k,h,[j,m]],[/crkey/i],[[h,"Chromecast"],[k,"Google"]],[/android.+;\s(glass)\s\d/i],[h,[k,"Google"],[j,"wearable"]],[/android.+;\s(pixel c)\s/i],[h,[k,"Google"],[j,n]],[/android.+;\s(pixel xl|pixel)\s/i],[h,[k,"Google"],[j,m]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[h,/_/g," "],[k,"Xiaomi"],[j,m]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[h,/_/g," "],[k,"Xiaomi"],[j,n]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[h,[k,"Meizu"],[j,n]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[h,[k,"OnePlus"],[j,m]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[h,[k,"RCA"],[j,n]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[h,[k,"Dell"],[j,n]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[h,[k,"Verizon"],[j,n]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[k,"Barnes & Noble"],h,[j,n]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[h,[k,"NuVision"],[j,n]],[/android.+;\s(k88)\sbuild/i],[h,[k,"ZTE"],[j,n]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[h,[k,"Swiss"],[j,m]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[h,[k,"Swiss"],[j,n]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[h,[k,"Zeki"],[j,n]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[k,"Dragon Touch"],h,[j,n]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[h,[k,"Insignia"],[j,n]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[h,[k,"NextBook"],[j,n]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[k,"Voice"],h,[j,m]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[k,"LvTel"],h,[j,m]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[h,[k,"Envizen"],[j,n]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[k,h,[j,n]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[h,[k,"MachSpeed"],[j,n]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[k,h,[j,n]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[h,[k,"Rotor"],[j,n]],[/android.+(KS(.+))\s+build/i],[h,[k,"Amazon"],[j,n]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[k,h,[j,n]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[j,o.lowerize],k,h],[/(android[\w\.\s\-]{0,9});.+build/i],[h,[k,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[l,[i,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[i,l],[/rv\:([\w\.]{1,9}).+(gecko)/i],[l,i]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[i,l],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[i,[l,p.str,q.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[i,"Windows"],[l,p.str,q.os.windows.version]],[/\((bb)(10);/i],[[i,"BlackBerry"],l],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[i,l],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[i,"Symbian"],l],[/\((series40);/i],[i],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[i,"Firefox OS"],l],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[i,l],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[i,"Chromium OS"],l],[/(sunos)\s?([\w\.\d]*)/i],[[i,"Solaris"],l],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[i,l],[/(haiku)\s(\w+)/i],[i,l],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[l,/_/g,"."],[i,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[i,"Mac OS"],[l,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]*)/i],[i,l]]},s=function a(b,c){if("object"===(void 0===b?"undefined":e(b))&&(c=b,b=void 0),!(this instanceof a))return new a(b,c).getResult();var d=b||(f&&f.navigator&&f.navigator.userAgent?f.navigator.userAgent:""),g=c?o.extend(r,c):r;return this.getBrowser=function(){var a={name:void 0,version:void 0};return p.rgx.call(a,d,g.browser),a.major=o.major(a.version),a},this.getCPU=function(){var a={architecture:void 0};return p.rgx.call(a,d,g.cpu),a},this.getDevice=function(){var a={vendor:void 0,model:void 0,type:void 0};return p.rgx.call(a,d,g.device),a},this.getEngine=function(){var a={name:void 0,version:void 0};return p.rgx.call(a,d,g.engine),a},this.getOS=function(){var a={name:void 0,version:void 0};return p.rgx.call(a,d,g.os),a},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return d},this.setUA=function(a){return d=a,this},this};s.VERSION="0.7.18",s.BROWSER={NAME:i,MAJOR:"major",VERSION:l},s.CPU={ARCHITECTURE:"architecture"},s.DEVICE={MODEL:h,VENDOR:k,TYPE:j,CONSOLE:"console",MOBILE:m,SMARTTV:"smarttv",TABLET:n,WEARABLE:"wearable",EMBEDDED:"embedded"},s.ENGINE={NAME:i,VERSION:l},s.OS={NAME:i,VERSION:l},"undefined"!==e(b)?("undefined"!==e(a)&&a.exports&&(b=a.exports=s),b.UAParser=s):"function"===e(c(11))&&c(12)?void 0===(d=function(){return s}.call(b,c,b,a))||(a.exports=d):f&&(f.UAParser=s);var t=f&&(f.jQuery||f.Zepto);if("undefined"!==(void 0===t?"undefined":e(t))){var u=new s;t.ua=u.getResult(),t.ua.get=function(){return u.getUA()},t.ua.set=function(a){u.setUA(a);var b=u.getResult();for(var c in b)t.ua[c]=b[c]}}}("object"===("undefined"==typeof window?"undefined":e(window))?window:this)}).call(b,c(10)(a))},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children||(a.children=[]),Object.defineProperty(a,"loaded",{enumerable:!0,get:function(){return a.l}}),Object.defineProperty(a,"id",{enumerable:!0,get:function(){return a.i}}),a.webpackPolyfill=1),a}},function(a,b){a.exports=function(){throw new Error("define cannot be used indirect")}},function(a,b){(function(b){a.exports=b}).call(b,{})},function(a,b,c){var d;void 0===(d=function(){function a(a,b){var c=["input","select","textarea"],d=document.getElementsByTagName("body")[0],e="add"===a?HTMLElement.prototype.addEventListener:HTMLElement.prototype.removeEventListener,f="add"===a?window.addEventListener:window.removeEventListener,g=function(a){var d=a.target.nodeName.toLowerCase();c.indexOf(d)>-1&&b()};/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)?(e.call(d,"focusin",g,!1),e.call(d,"focusout",g,!1),e.call(document,"orientationchange",b,!1)):f.call(window,"resize",b,!1)}return{onResize:function(b){a("add",b)},offResize:function(b){a("remove",b)}}}.call(b,c,b,a))||(a.exports=d)},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b,c){var d,e;d=[c(5)],void 0===(e=function(a){return{tryLeftPosition:function(a,b,c){var d=a.margin+a.boxShadow.right,e=a.parentPosition.left,f=a.dimensions.width+d;f<=e&&(c.position="left",b.x=e-f)},tryRightPosition:function(b,c,d){var e=b.margin+b.boxShadow.left,f=a.getPageSize(this.ownerDocument).width-b.spaceToNextObject.right;b.dimensions.width+e<f&&(d.position="right",c.x=b.parentPosition.right+e)},tryTopPosition:function(a,b,c){var d=a.margin+a.boxShadow.bottom,e=a.spaceToNextObject.top,f=a.dimensions.height+d;f<=e&&(c.position="top",b.y=e-f)},tryBottomPosition:function(b,c,d,e){var f=b.margin+b.boxShadow.top,g=a.getPageSize(this.ownerDocument).height-b.spaceToNextObject.bottom;(b.dimensions.height+f<g||e)&&(d.position="bottom",c.y=b.parentPosition.bottom+f)}}}.apply(b,d))||(a.exports=e)},function(a,b,c){var d,e;d=[c(5)],void 0===(e=function(a){return{tryLeftAlignment:function(b,c,d){var e=a.getPageSize(this.ownerDocument).width-b.parentPosition.left,f=b.dimensions.width;d.alignment="left",c.x=f<=e?b.parentPosition.left:b.parentPosition.left-(f-e)},tryRightAlignment:function(a,b,c){var d=a.parentPosition.right;a.dimensions.width<d&&(c.alignment="right",b.x=a.parentPosition.left-a.dimensions.width+a.parentPosition.width)},tryTopAlignment:function(b,c,d,e){var f=a.getPageSize(this.ownerDocument).height-b.parentPosition.top;(b.dimensions.height<f||e)&&(d.alignment="top",c.y=b.parentPosition.top)},tryBottomAlignment:function(a,b,c){var d=a.parentPosition.bottom,e=a.dimensions.height;e<d&&(c.alignment="bottom",b.y=a.parentPosition.bottom-e)},tryMiddleAlignment:function(b,c,d){var e=a.getPageSize(this.ownerDocument).height,f=b.dimensions.height,g=b.parentPosition.top;d.alignment="middle",c.y=g+f<e?g:Math.max(0,e-b.dimensions.height)},tryCenterAlignment:function(b,c,d){var e=a.getPageSize(this.ownerDocument).width;if(b.dimensions.width<e){d.alignment="center";var f=b.dimensions.width/2,g=b.parentPosition.left+b.parentPosition.width/2;c.x=g>f?g+f<e?g-f:e-b.dimensions.width:0}}}}.apply(b,d))||(a.exports=e)},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){},function(a,b){}])},"object"==typeof exports&&"object"==typeof module?module.exports=factory(require("react"),require("prop-types"),require("classnames"),require("react-dom")):"function"==typeof define&&define.amd?define("@sbg/harmony-react-components",["react","prop-types","classnames","react-dom"],factory):"object"==typeof exports?exports.ids=factory(require("react"),require("prop-types"),require("classnames"),require("react-dom")):root.ids=factory(root.react,root["prop-types"],root.classnames,root["react-dom"]);var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAAside",["exports","react","react-dom"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("react-dom"));else{var c={exports:{}};b(c.exports,a.react,a.reactDom),a.HAAside=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=(d(c),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),i(b,[{key:"render",value:function(){return h.default.createElement("aside",this.props,this.props.children)}}]),b}(h.default.Component);a.default=j});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASection",["exports","react","react-dom"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("react-dom"));else{var c={exports:{}};b(c.exports,a.react,a.reactDom),a.HASection=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=(d(c),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),i(b,[{key:"render",value:function(){return h.default.createElement("section",this.props,this.props.children)}}]),b}(h.default.Component);a.default=j});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFooter",["exports","react","react-dom"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("react-dom"));else{var c={exports:{}};b(c.exports,a.react,a.reactDom),a.HAFooter=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=(d(c),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),i(b,[{key:"render",value:function(){return h.default.createElement("footer",this.props,this.props.children)}}]),b}(h.default.Component);a.default=j}),define("hui/core/utils",[],function(){"use strict";function a(a){var b,c=[];for(b in a)c.push(b);return c}function b(b,c){var d,e,f,g,h,i=b[0],j=b.length,k=1;if(j<2||null===i)return i;for(k;k<j;k++)for(d=b[k],g=a(d),h=g.length,e=0;e<h;e++)f=g[e],(void 0===i[f]||c)&&(i[f]=d[f]);return i}function c(a){return!!a&&!!a.nodeType}function d(a){return Array.isArray(a)&&a.reduce(function(a,b){return a&&c(b)},!0)}function e(a){return!!a&&"[object Object]"===a.toString()}function f(a,b){c(a)&&b.filter(function(a){return c(a)}).forEach(function(b){a.appendChild(b)})}function g(a,b,c){function d(a){return/^attr-/.test(a)}function g(a){return a.substring("attr-".length,a.length)}var h=document.createElement(a),i=e(b)?b:{},j=Array.isArray(c)?c:[];return Object.keys(i).forEach(function(a){var b=i[a];d(a)?h.setAttribute(g(a),b):h[a]=b}),f(h,j),h}function h(a){for(;a&&a.firstChild;)a.removeChild(a.firstChild)}function i(a){return c(a)?Array.prototype.slice.call(a.children):[]}function j(a,b){return k(a,b)[0]||null}function k(a,b){var d=[],e=function(b){return-1!==i(a).indexOf(b)};return c(a)&&b&&(d=Array.prototype.slice.call(a.querySelectorAll(b))),d.filter(e)}function l(a,b,c){var d=function(a,b){return"function"==typeof b?b.bind(a):b},e=function(a,b){var c=a[b];return a&&c?d(a,c):null},f=(b||[]).reduce(e,a);return c&&f?c(f):void 0}function m(a){if("function"==typeof a){if(a.name)return a.name;var b=a.toString().match(/^function\s*([^\s(]+)/);return b?b[1]:"anonymous func"}}function n(a,b,c,d){var e,f,g,h=a||[];h=Array.isArray(h)?h:[h],c=Array.isArray(c)?c:[c];for(var i in h){if(h[i]&&h[i].type)for(f=!0,g=h[i].type,e=0;e<c.length;e++)if(g===c[e]){f=!1;break}if(f)return new Error(b+"'s children can only have one instance of the following types: "+d+"; not accept type: "+g)}}var o=/(auto|scroll)/,p={getTextWidth:function(a,b,c){var d,e=c||document.createElement("canvas"),f=e.getContext("2d");return f.font=b,d=Math.floor(f.measureText(a).width),d?d+1:d},removeNodesSafe:function(a,b){var c,d=[];return c=Array.prototype.slice.apply(b),c.filter(function(b){return a===b.parentNode}).map(function(b){d.push(a.removeChild(b)),b.render&&b.render()}),d},appendChildCollection:function(a,b){var c;for(c=0;c<b.length;++c)a.appendChild(b[c])},stopEvent:function(a){a.stopPropagation(),a.preventDefault()},getAnimationEventNames:function(){return{animationstart:"webkitAnimationName"in document.documentElement.style?"webkitAnimationStart":"animationstart",animationend:"webkitAnimationName"in document.documentElement.style?"webkitAnimationEnd":"animationend",transitionend:"onwebkittransitionend"in window?"webkitTransitionEnd":"transitionend"}},getComponentFromElement:function(a,b){for(;a&&a.tagName!==b;)a=a.parentNode;return a},getComponentFromElementByClassName:function(a,b){for(;a&&!a.classList.contains(b);)a=a.parentNode;return a},validationRequired:function(a){return a.required||a.pattern||a.validator||a.min||a.max||a.numeric||a.password||a.minDate||a.maxDate},extend:function(){return b(Array.prototype.slice.call(arguments),!1)},mixin:function(){return b(Array.prototype.slice.call(arguments),!0)},stopNativeEvent:function(a,b,c){a.listenTo(b,c,function(a){a.stopPropagation()})},getSafeTargetFromEvent:function(a){return a.relatedTarget||a.explicitOriginalTarget||document.activeElement},getNextSiblingOfType:function(a,b){for(;(a=a.nextSibling)&&a.nodeName!==b;);return a},getPrevSiblingOfType:function(a,b){for(;(a=a.previousSibling)&&a.nodeName!==b;);return a},getArrayDiff:function(a,b){return a=a||[],b=b||[],a.filter(function(a){return b.indexOf(a)<0})},getDirectChildByType:function(a,b){var c,d=a.children;return Array.prototype.forEach.call(d,function(a){a.tagName.toLowerCase()===b&&(c=a)}),c},getScrollParent:function(a){var b,c=a,d="absolute"===getComputedStyle(a).position,e=!1;do{if(null===(c=c.parentElement||c.parentNode))return a.ownerDocument;c!==a.ownerDocument?(b=getComputedStyle(c),d&&"static"===b.position||(o.test(b.overflow)||o.test(b.overflowX)||o.test(b.overflowY))&&(e=!0)):e=!0}while(!e);return c},throttle:function(a,b){var c=!0;return function(){c&&(c=!1,setTimeout(function(){c=!0},b),a.apply(this,arguments))}},throttleDebounce:function(a,b){var c=!0,d=null;return function e(){var f=this;c?(c=!1,setTimeout(function(){c=!0,d&&e.apply(f)},b),d?(a.apply(this,d),d=null):a.apply(this,arguments)):d=arguments}},type:function(a){switch(null==a?""+a:Object.prototype.toString.call(a).slice(8,-1).toLowerCase()){case"string":return String;case"boolean":return p.YesNoType;case"number":return Number;case"object":return Object;case"array":return Array}},updateClassWithProps:function(a,b){if(a.classList.length>0){var c,d,e=[];return a.supportedClasses?(e=a.supportedClasses.filter(function(b){return a.classList.contains(b)&&-1===e.indexOf(b)}),d=b?e.concat(b.split(" ")):e,d.join(" ").trim()):(b&&(c=b.split(" "),c.forEach(function(b){a.classList.contains(b)||a.classList.add(b)})),a.classList.toString())}return b||""},YesNoType:{parse:function(a){return"yes"===a.toLowerCase()},stringify:function(a){return a?"yes":"no"}},toggleSuffixText:function(a,b,c){return c?a&&a.slice(-2)!==b&&(a+=b):a&&a.slice(-2)===b&&(a=a.slice(0,-2)),a},debounce:function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},createElement:g,appendChildren:f,attachContentToNode:function(a,b){return a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?a.forEach(function(a){a&&a.nodeType&&b.appendChild(a)}):a.nodeType&&b.appendChild(a)),b},removeAllChildrenFrom:h,wrapIfNotWrapped:function(a,b){var e=null,f=String.prototype.toLowerCase;return a&&(c(b)?e=f.call(b.tagName)===f.call(a)?b:g(a,{},[b]):d(b)&&(e=g(a,{},b))),e},setAttributes:function(a,b){var d;return c(a)&&e(b)&&Object.keys(b).forEach(function(c){d=b[c],a.setAttribute(c,d)}),a},arrayOfChildrenFrom:i,queryChildOf:j,queryChildrenOf:k,isNode:c,getFunctionName:m,checkReactChildrenType:n,isOpen:function(a){return a&&("HA-POPOVER"===a.nodeName&&a.open||"HA-MODAL"===a.nodeName&&a.classList.contains("show"))},showPopoverOrModal:function(a,b,c){a&&(this.isOpen(a)?c.setPosition(a,b,["bottom","top"],["left","right"]):c.show(a,b,["bottom","top"],["left","right"]))},replaceChildrenOf:function(a,b){c(a)&&(c(b)?(h(a),a.appendChild(b)):d(b)&&(h(a),f(a,b)))},contentQueryFactory:function(a,b){return function(c){var d=[b[c],c].join(" > "),e=a.querySelector(d),f=j(a,c);return e||f}},ifSafeChain:l,ifExists:function(a,b){return l(a,[],b)},customMixin:function(a,b,c,d){var e,f,g={};for(e in b)f=b[e],e in a&&(a[e]===f||e in g&&g[e]===f)||(a[e]=c?c(f,d):f);return a},clone:function(a,b){if(b=b||[],b.indexOf(a)>=0)return null;if(!a||"object"!=typeof a||"function"==typeof a)return a;if(a.nodeType&&"cloneNode"in a)return b.push(a),a.cloneNode(!0);if(a instanceof Date)return new Date(a.getTime());if(a instanceof RegExp)return new RegExp(a);var c;if(Array.isArray(a))b.push(a),c=[];else{b.push(a);try{c=a.constructor?new a.constructor:{}}catch(a){c={}}}return p.customMixin(c,a,p.clone,b)},animateScrollTo:function(a,b,c){var d=(new Date).valueOf(),e=b,f=a.scrollTop;setTimeout(function b(){var g=(new Date).valueOf(),h=Math.min((g-d)/c,1);a.scrollTop=f+(e-f)*h,h<1&&setTimeout(b,33)},33)},hidePopoverOrModal:function(a,b){"HA-MODAL"===a.nodeName?a.close():b.hide(a)},closest:function(a,b){if("function"==typeof a.closest)return a.closest(b);var c,d,e=b.charAt(0);for("["===e&&(b=b.substr(1,b.length-2),c=b.split("="),c.length>1&&(d=!0,c[1]=c[1].replace(/"/g,"").replace(/'/g,"")));a&&a!==document&&1===a.nodeType;a=a.parentNode)if("."===e){if(a.classList.contains(b.substr(1)))return a}else if("#"===e){if(a.id===b.substr(1))return a}else if("["===e&&a.hasAttribute(c[0])){if(!d)return a;if(a.getAttribute(c[0])===c[1])return a}else if(a.tagName.toLowerCase()===b)return a;return null},hasClass:function(a,b){if(c(a)){if(a.classList)return a.classList.contains(b);return(" "+((a.getAttribute&&a.getAttribute("class")||"").match(/[^\x20\t\r\n\f]+/g)||[]).join(" ")+" ").indexOf(" "+b+" ")>-1}return!1}};return p}),define("register-component/v2/register",[],function(){function a(a,d){if(a in c)throw new TypeError("A widget is already registered with tag '"+a+"'.");var e=c[a]={prototype:d};return b.registerElement(a,e)}var b="undefined"!=typeof document&&document,c={};return a}),define("register-component/v2/UIComponent",["object-utils/classes"],function(a){"use strict";function b(a,b,c){return function(d){var e=g(d.target,a,c);e&&b(d,e)}}function c(a){return a.stringify&&a.parse}function d(a,b){if(a&&("function"==typeof a&&(a={stringify:a,parse:a}),!c(a)))throw new TypeError(b+": invalid type");return a||null}function e(a,b,c){var d=typeof a;if(a&&"function"!==d&&"string"!==d)throw new TypeError(c+": "+b+" not a function or method name");return a||null}function f(a,b){return a.hasOwnProperty(b)||m(a,b,{value:Object.create(null)}),a[b]}function g(a,b,c){for(var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&1===a.nodeType&&a!==c;){if(d.call(a,b))return a;a=a.parentNode}return!1}function h(a,b,c){void 0===c&&(c=null);var d=b&&b.parse;return d===Boolean?function(a){return null!==a&&"false"!==a}:d?function(b){return null===b?c:d(b,a)}:function(a){return null===a?c:a}}function i(a,b,c,d,e){var f=d&&d.stringify;m(a,b,{get:function(){return e(this.getAttribute(c))},set:f===Boolean?function(a){a?this.setAttribute(c,c):this.removeAttribute(c)}:f?function(a){a=null===a?a:f(a,b),null===a||""===a?this.removeAttribute(c):this.setAttribute(c,a)}:function(a){null===a||""===a?this.removeAttribute(c):this.setAttribute(c,a)}})}function j(a){function b(a){for(var d,e=a.children,f=0;f<e.length;++f)d=e[f],d.tagName.indexOf("-")>=0?c.push(d):d.children.length&&b(d)}var c=[];return b(a),c}var k=0,l=0,m=Object.defineProperty;return a.createObject(HTMLElement.prototype,{init:function(){this.baseClass="",this.componentId=0,this.template=null,this.componentId=++k},createdCallback:function(){if(m(this,"_attrChangeCalls",{value:{}}),this.init(),this.baseClass){this.baseClass.split(" ").filter(Boolean).forEach(function(a){this.classList.add(a)},this)}this._setupEventAttrbutes(),this.render(),this._listenforReady(),this._rendered=!0,this._initBoundProperties()},_listenforReady:function(){var a="component-upgraded",b=j(this),c=b.reduce(function(a,b){return b._upgraded?a+1:a},0),d=b.length,e=function(b){b.stopPropagation(),++c===d&&(this.removeEventListener(a,e),this.ready())}.bind(this);d?this.addEventListener(a,e):this.ready()},ready:function(){this._upgraded=!0,this.emit("component-upgraded",{bubbles:!0})},attachedCallback:function(){},attributeChangedCallback:function(a,b,c){var d=this._attributes&&this._attributes[a.toLowerCase()];if(a=a.toLowerCase(),d){var e=this._attrChangeCalls;e[a]>0?e[a]--:this._attributeChanged(a,b,c)}},preRender:function(){},postRender:function(){},render:function(){var a;this._rendered||(this.preRender(),this.template&&(a=this.template(this),this.innerHTML=a.replace(/<[\/]{0,1}(template|TEMPLATE)[^><]*>/g,"")),this.postRender())},_initBoundProperties:function(){var a=this._attrChangeCalls;this._attributes&&Object.keys(this._attributes).forEach(function(b){a[b.toLowerCase()]=0,this._attributeChanged(b,null,this.getAttribute(b))},this)},setupProperties:function(a){var b=f(this,"_attributes"),g=f(this,"_properties");for(var j in a){var k,l,m,n=a[j];"function"==typeof n||c(n)?(k=n,n={}):k=n.type||null,k=d(k,j),n.change,m=n.attribute||j.toLowerCase(),l=n.default;var o=h(j,k,l);if(j in g)throw new Error("Property "+j+" already bound");if(m.toLowerCase()in b)throw new Error("Attribute "+m+" already bound");i(this,j,m,k,o),b[m.toLowerCase()]=g[j]={p:j,c:e(n.change,"change callback",j),g:o}}return this},_attributeChanged:function(a,b,c){var d,e=this._attributes&&this._attributes[a.toLowerCase()];if(e&&(d=e.c)){var f=e.g,g=f(c),h=f(b);"function"==typeof d?d.call(this,g,h):this[d](g,h)}},_setupEventAttrbutes:function(){for(var a=/^data-on-(.+)$/,b=this.attributes,c=0,d=b.length;c<d;c++){var e,f=b[c];if(e=a.exec(f.name)){var g=e[1],h=f.value,i=this[h];"function"==typeof i?this.on(g,i):console.warn(this.nodeName+': event handler "'+h+'" is not '+h?"a function":"defined")}}},on:function(a,b){return this.listenTo(this,a,b)},off:function(a,b){return this.stopListening(this,a,b)},emit:function(a,b){b=b||{};var c,d=!("bubbles"in b)||b.bubbles,e=!("cancelable"in b)||b.cancelable;c=this.ownerDocument.createEvent("HTMLEvents"),c.initEvent(a,d,e);for(var f in b)f in c||(c[f]=b[f]);return this.dispatchEvent(c)},listenTo:function(a,c,d,e){var f,g;if(d||"object"!=typeof c||(d=this),f=this._listeningTo||(this._listeningTo={}),g="l"+ ++l,f[g]={object:a,name:c,callback:d},a.addEventListener){var h=c.match(/(.*):(.*)/);h&&(c=h[2],h=h[1],d=b(h,d,a),f[g].callback=d,f[g].name=c),a.addEventListener(c,d,!!e)}else a.on&&a.on(c,d,this);return this},stopListening:function(a,b,c,d){var e,f,g=this._listeningTo,h={};if(!g)return this;if(!a||b||c)if(a&&b&&!c)for(f in g)g[f].object===a&&g[f].name===b&&(h[f]=g[f]);else if(a&&b&&c)for(f in g)g[f].object===a&&g[f].name===b&&g[f].callback===c&&(h[f]=g[f]);else a||b||c||(h=g);else for(f in g)g[f].object===a&&(h[f]=g[f]);for(f in h)e=h[f],e.object.removeEventListener?e.object.removeEventListener(e.name,e.callback,!!d):e.object.off&&e.object.off(e.name,e.callback,this),delete this._listeningTo[f];return this},setAttribute:function a(b,c){this._attrChangeCalls[(""+b).toLowerCase()]++;var d=this.getAttribute(b);a.superFunc.call(this,b,c);var e=this.getAttribute(b);d!==e&&this._attributeChanged(b,d,e)},removeAttribute:function a(b){if(this.hasAttribute(b)){this._attrChangeCalls[(""+b).toLowerCase()]++;var c=this.getAttribute(b);a.superFunc.call(this,b),null!==c&&this._attributeChanged(b,c,null)}}})}),define("register-component/template",["mustache"],function(a){var b={};return{load:function(c,d,e,f){if(b[c])e(b[c]);else{var g;g=function(d){f&&f.isBuild?e():(a.parse(d),b[c]=function(b){return a.render(d,b)},e(b[c]))},d(["text!"+c],g)}}}}),define("text!hui/card/card-discovery-large.html",[],function(){return'<template>\n    <div class="card-discovery-large-container" aria-labelledby="card-discovery-large-title-{{componentId}}" tabindex="-1">\n        <header>\n            <button class="btn hi hi-close pull-right" aria-label="Close"></button>\n            <h3 class="card-discovery-large-title card-discovery-large-title-{{componentId}}">\n            </h3>\n        </header>\n        <section id="card-discovery-large-text-{{componentId}}"></section>\n        <footer></footer>\n    </div>\n</template>'}),define("hui/core/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SPACEBAR:32,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,MINUS:189,EQUALS:187,NUM_PAD_MINUS:109,NUM_PAD_PLUS:107,H:72,K:75,M:77,R:82,T:84,W:87,Y:89,isLetter:function(a){return a>64&&a<91},isNumber:function(a){return a>47&&a<58||a>95&&a<106},isSpecialChar:function(a){return a>106&&a<112||a>185&&a<223}}}),define("hui/core/a11y",["./keys","./utils"],function(a,b){function c(a){a.stopPropagation(),a.preventDefault()}function d(a,b){a.shiftKey&&b.focus()}function e(a,b){a.shiftKey||b.focus()}function f(a){return a.hasAttribute("tabIndex")?+a.getAttribute("tabIndex"):h.indexOf(a.tagName)>-1?0:void 0}function g(a,c){var d,e;if(c){d=!1;do{d="none"===a.style.display||"hidden"===a.style.visibility||b.hasClass(a,"hidden"),a=a.parentElement}while(a&&a!==c&&!d);return d}return e=window.getComputedStyle(a),e.display&&"none"===e.display||e.visibility&&"hidden"===e.visibility}var h=["INPUT","SELECT","BUTTON","TEXTAREA","A","AREA","OBJECT"];return{getBoundariesTabableElement:function(a,b,c){var d,e,f={},g=0,h=a.querySelectorAll("*");for(f.first=null,g;null===f.first&&g<h.length;++g)d=h[g],c&&(e=window.getComputedStyle(d)),d&&this.isTabNavigable(d,a)&&(!c||"none"!==e.display&&"hidden"!==e.visibility)&&(f.first=d);if(f.last=null,b)for(g=h.length-1;null===f.last&&g>0;--g)d=h[g],c&&(e=window.getComputedStyle(d)),h[g]&&this.isTabNavigable(h[g],a)&&(!c||"none"!==e.display&&"hidden"!==e.visibility)&&(f.last=d);return f},_getFirstTabable:function(a){var b,c,d=a.querySelectorAll("*");for(b=null,c=0;c<d.length;++c)if(this.isTabNavigable(d[c])){b=d[c];break}return b},_getFirstFocusable:function(a){var b,c,d=a.querySelectorAll("*");for(b=null,c=0;c<d.length;++c)if(this.isFocusable(d[c])){b=d[c];break}return b},isTabNavigable:function(a,b){return!a.disabled&&!g(a,b)&&f(a)>=0},isFocusable:function(a){return!a.disabled&&!g(a)&&f(a)>=-1},keepFocusInsideListener:function(b,f){var g,h;b.keyCode===a.TAB&&(g=this.getBoundariesTabableElement(f,!0),h=b.target,g.first&&g.last?b.shiftKey?h===g.first?(c(b),d(b,f)):h===f&&(c(b),g.last.focus()):h===g.last&&(c(b),e(b,f)):(c(b),e(b,f)))},setFocusOnFirst:function(a){var b=this.getBoundariesTabableElement(a);if(b.first)return b.first.focus(),b.first},setFocusOnAnyFirst:function(a){var b;return b=this._getFirstTabable(a)||this._getFirstFocusable(a),b&&b.focus(),b},setFocusOnPreviousElement:function(a){for(var b=a.parentElement,c=a.previousElementSibling;c;){if(this.isFocusable(c)&&!g(c))return void c.focus();c=c.previousElementSibling}if(this.isFocusable(b))return void b.focus();b.classList.add("hidden-focus-style"),b.setAttribute("tabindex",-1),b.focus()},addA11yFocus:function(a){a._mouseActive=!1,a.classList.add("ha-a11y-focus"),a.listenTo(a,"mousedown",function(){a._mouseActive=!0,setTimeout(function(){a._mouseActive=!1},150)}),a.listenTo(a,"focus",function(){a._mouseActive||a.classList.add("ha-a11y-focused")},!0),a.listenTo(a,"blur",function(){a.classList.remove("ha-a11y-focused")},!0)},hideChildElementsFromAria:function(a,b){var c,d=!1,e=[],f="aria-hidden";return b=b||[],Array.prototype.slice.call(a.children,0).forEach(function(a){for(d=!1,c=0;c<b.length;c++)if(b[c]===a){d=!0;break}d||(e.push({element:a,oldValue:a.getAttribute(f)}),a.setAttribute(f,!0))}),b.forEach(function(a){a&&(e.push({element:a,oldValue:a.getAttribute(f)}),a.removeAttribute("aria-hidden"))}),{remove:function(){e.forEach(function(a){a.oldValue?a.element.setAttribute(f,a.oldValue):a.element.removeAttribute(f)})}}}}}),define("hui/core/contentNode",[],function(){"use strict";function a(a,b,c,d){var e;d&&d.hasOwnProperty(c)?(e=d[c](a,b,c),a._cachedChildNodes[c]=e):a._cachedChildNodes[c]=b.parentElement.removeChild(b)}function b(b,c,d){var e;if(c&&b.childNodes&&b.childNodes.length){b._cachedChildNodes={};for(e in c)c.hasOwnProperty(e)&&b.querySelector(e)&&a(b,b.querySelector(e),e,d)}}function c(a,b){var c,d;if(a._cachedChildNodes){for(c in a._cachedChildNodes)a._cachedChildNodes.hasOwnProperty(c)&&(d=b[c],a[d]=[].slice.call(a._cachedChildNodes[c].childNodes));delete a._cachedChildNodes}}function d(a,b,c){var d,e,f;for(e in b)b[e]&&c.hasOwnProperty(e)&&(d=c[e],Array.isArray(b[e])?a[d]=b[e]:a[d]=[b[e]]);f="DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.",console.warn(f)}return{cacheInputContent:b,storeCachedInput:c,addContent:d}}),define("hui/card-discovery-large",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","register-component/template!./card/card-discovery-large.html","./core/a11y","./core/contentNode","./core/keys","./core/utils"],function(a,b,c,d,e,f,g,h){function i(a){var b,c=a.children.length;1===c?b="one-btn":2===c?b="two-btn":3===c&&(b="three-btn"),b&&a.classList.add(b)}var j={section:"section",footer:"footer"};return b("ha-card-discovery-large",a.createObject(c,{init:function a(){a.super(this),this.template=d,f.cacheInputContent(this,j),this._lastFocus=null,this._footer=null,this._section=null,this.setupProperties({dismissible:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("header button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.add("hidden"),b.classList.remove("show"))}},titleText:{default:"",type:String,change:function(a){var b=this.querySelector(".card-discovery-large-title");b&&(b.textContent=a)}},open:{default:!1,type:Boolean,change:function(a){var b,c,d,f,i=this;a&&!this.classList.contains("show")?(this.classList.add("show"),this._lastFocus=document.activeElement,b=this.querySelector("section").querySelector("input, textarea, select, button"),c=this.querySelector("footer .ha-button-primary"),d=this.querySelector("header button"),f=b||c||d,f?f.focus():this.focus(),this.on("keydown",function(a){i.dismissible&&a.keyCode===g.ESCAPE&&(h.stopEvent(a),i.emit("dismiss"),i.close()),e.keepFocusInsideListener(a,i)}),this.emit("show")):!a&&this.classList.contains("show")&&(this._lastFocus&&this._lastFocus.focus(),this.classList.remove("show"),this.off("keydown"),this.emit("close"))}}}),this.on("header button:click",function(){this.emit("dismiss"),this.close()}.bind(this))},show:function(){this.open=!0},close:function(){this.open=!1},set footer(a){for(var b=this.querySelector("footer");b.firstChild;)b.removeChild(b.firstChild);a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?[].forEach.call(a,function(a){"HA-FOOTER-BUTTONS"===a.nodeName&&i(a),b.appendChild(a)}):a.nodeType&&("HA-FOOTER-BUTTONS"===a.nodeName&&i(a),b.appendChild(a))),this._footer=a},get footer(){return this._footer},set section(a){for(var b=this.querySelector("section");b.firstChild;)b.removeChild(b.firstChild);a&&("string"==typeof a?b.textContent=a:Array.isArray(a)?[].forEach.call(a,function(a){a&&a.nodeType&&b.appendChild(a)}):a.nodeType&&b.appendChild(a)),this._section=a},get section(){return this._section},postRender:function a(){a.super(this),e.addA11yFocus(this),f.storeCachedInput(this,j)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HACardDiscoveryLarge",["exports","prop-types","react","./HASection","./HAFooter","hui/core/utils","hui/card-discovery-large"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HASection"),require("./HAFooter"),require("hui/core/utils"),require("hui/card-discovery-large"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HASection,a.HAFooter,a.utils,a.cardDiscoveryLarge),a.HACardDiscoveryLarge=c.exports}}(this,function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var k=g(b),l=g(c),m=g(d),n=g(e),o=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(a){h(this,b);var c=i(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return r.call(c),c._cardDiscoveryLarge=null,c._listeners={},c}return j(b,a),p(b,[{key:"componentDidMount",value:function(){this.fixRenderedChildren(),this.mountCardDiscoveryLarge()}},{key:"componentDidUpdate",value:function(a){this.mountCardDiscoveryLarge(a)}},{key:"componentWillUnmount",value:function(){this._cardDiscoveryLarge.removeEventListener("show",this._listeners.onShow,!1),this._cardDiscoveryLarge.removeEventListener("close",this._listeners.onClose,!1),this._cardDiscoveryLarge.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._cardDiscoveryLarge.removeEventListener("component-upgraded",this._listeners.componentUpgraded,!1),this._listeners={}}},{key:"fixRenderedChildren",value:function(){var a=this._cardDiscoveryLarge.querySelector(".card-discovery-large-container"),b=a.nextElementSibling;if(b){this._cardDiscoveryLarge.section=b;var c=a.querySelector("section > section"),d=Array.prototype.slice.call(c.children);if(d.length<1)this._cardDiscoveryLarge.section=b.textContent;else{var e=this._cardDiscoveryLarge.querySelector("section");d.forEach(function(a){e.appendChild(a)})}var f=a.nextElementSibling;Array.prototype.slice.call(a.childNodes).filter(function(a){return"FOOTER"===a.nodeName}).slice(0).forEach(function(b){a.removeChild(b)}),f&&(a.appendChild(f),this._cardDiscoveryLarge.footer=Array.prototype.slice.call(f.children))}}},{key:"mountCardDiscoveryLarge",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._cardDiscoveryLarge&&this.props.open!==b.open)if(this.props.open){if(this.setupListeners(),this._cardDiscoveryLarge.show)this._cardDiscoveryLarge.show();else{var c=function(b){b.stopPropagation(),a._cardDiscoveryLarge.show()};this._listeners.componentUpgraded=c.bind(this),this._cardDiscoveryLarge.addEventListener("component-upgraded",this._listeners.componentUpgraded)}var d=this._cardDiscoveryLarge.querySelector("section").querySelector("input, textarea, select, button"),e=this._cardDiscoveryLarge.querySelector("footer .ha-button-primary"),f=this._cardDiscoveryLarge.querySelector("header button"),g=d||e||f;g?g.focus():this.focus()}else b.show&&this._cardDiscoveryLarge.close()}},{key:"setupListeners",value:function(){var a=this;if(0===Object.keys(this._listeners).length){var b=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=b.bind(this),this._cardDiscoveryLarge.addEventListener("show",this._listeners.onShow);var c=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b)};this._listeners.onClose=c.bind(this),this._cardDiscoveryLarge.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._cardDiscoveryLarge.addEventListener("dismiss",this._listeners.onDismiss)}}},{key:"render",value:function(){return l.default.createElement("ha-card-discovery-large",o({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(l.default.Component);q.propTypes={children:function(a,b,c){var d=(0,f.checkReactChildrenType)(a[b],c,[m.default,n.default],"HASection,HAFooter");if(d)return d},className:k.default.string,titleText:k.default.string,dismissible:k.default.bool,open:k.default.bool,onShow:k.default.func,onClose:k.default.func,onDismiss:k.default.func};var r=function(){var a=this;this.handleRef=function(b){a._cardDiscoveryLarge=b}};a.default=q}),define("hui/core/deviceUtils",["./utils","ua-parser"],function(a,b){if("undefined"==typeof document)return{normalize:function(){},load:function(){arguments[2]()}};var c,d,e,f={pc:"pc",tablet:"tablet",mobile:"mobile"},g=[],h={portrait:"portrait",landscape:"landscape"},i=!1,j=0,k=function(){var a;for(a=g.length-1;a>=0;a--)g[a].remove&&g.splice(a,1)},l=a.debounce(k,250,!1),m=function(){e=d,d={},d.hasTouch="ontouchstart"in document.documentElement||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,d.orientation=window.matchMedia("(orientation: landscape)").matches?h.landscape:h.portrait,d.width=window.screen.width,d.height=window.screen.height;var a=c._uaParser().device;d.deviceType=a.type||"pc",d.isDesktop="pc"===d.deviceType,k(),g.forEach(function(a){a.listener===a.callback?a.callback(d,e):"string"==typeof a.callback?a.listener[a.callback](d,e):a.callback.bind(a.listener)(d,e)})},n=function(){return document.body.dataset.view||""},o=function(a,b,c){!b||"HA-CHECKBOX"!==b.tagName&&"HA-TEXTAREA"!==b.tagName&&"HA-TEXT-FIELD"!==b.tagName&&"HA-DATE-PICKER"!==b.tagName?document.activeElement&&"INPUT"===document.activeElement.tagName&&document.activeElement.blur():(c.preventDefault(),b.ownerTag||"HA-TEXT-FIELD"!==b.tagName&&"HA-DATE-PICKER"!==b.tagName&&"HA-TEXTAREA"!==b.tagName?a.click():a.focus())},p=function(a){if(a&&!(a._componentSizeData.windowSize.width!==window.innerWidth||a._componentSizeData.windowSize.height<=window.innerHeight)){var b=0;a._componentSizeData&&(b=a._componentSizeData.height+a.offsetHeight+a._componentSizeData.ancestor.footerNode.offsetHeight),window.innerHeight<b?a.scrollIntoView():a.getBoundingClientRect().top<a._componentSizeData.height&&(a._componentSizeData.offsetY?a._componentSizeData.ancestor.sectionNode.scrollTop=a._componentSizeData.offsetY:a.scrollIntoView())}};return c={_uaParser:b,deviceTypes:f,isDesktop:function(){return d.deviceType===f.pc},isHandheld:function(){return d.deviceType===f.mobile||d.deviceType===f.tablet||"mobile"===n()},isMobile:function(){return d.deviceType===f.mobile||"mobile"===n()},isTablet:function(){return d.deviceType===f.tablet||"mobile"===n()},getScreenParameters:function(){return d},hasTouch:function(){return d.hasTouch}},m(),m=a.debounce(m,250,!1),c.normalize=function(a,b){var d=a.match(/[\?:]|[^:\?]*/g),e=0,f=function(a){var b=d[e++];return":"===b?0:"?"===d[e++]?!a&&c[b]()?f():(f(!0),f(a)):b||0};return(a=f())&&b(a)},c.getOSName=function(){return this._uaParser().os.name},c.getOSVersion=function(a){var b=parseFloat(this._uaParser().os.version);return a?Math.round(b):b},c.isAndroid=function(){return"Android"===this.getOSName()},c.isAndroidWebView=function(){return!!this.isAndroid()&&this._uaParser().ua.match(/wv/g)},c.addiOS9ImmediateFocus=function(){if(!(i||(i=!0,c.getOSVersion(!1)>=9.3||"iOS"!==c.getOSName()))){var a=document.body,b=!1,d=0,e=0;a.addEventListener("touchstart",function(a){b=!1,d=a.touches[0].clientX,e=a.touches[0].clientY}),a.addEventListener("touchmove",function(a){(Math.abs(a.touches[0].clientX-d)>10||Math.abs(a.touches[0].clientY-e)>10)&&(b=!0)}),a.addEventListener("touchend",function(a){if(!b){var c=a.changedTouches[0].target;3===c.nodeType&&(c=c.parentNode);var d=c.parentElement;o(c,d,a)}}),a.addEventListener("touchcancel",function(){b=!1,d=0,e=0})}},c.getOrientation=function(){return window.matchMedia("(orientation: landscape)").matches?"landscape":"portrait"},c.isIOSDevice=function(){return c.isHandheld()&&"iOS"===c.getOSName()},c.isIPhonePlus=function(){return c.isIOSDevice()&&window.matchMedia("(-webkit-min-device-pixel-ratio: 3)").matches},c.isIPhonePlusWithTabBar=function(){return c.isIPhonePlus()&&window.innerHeight<370},c.stopTouchMove=function(b,c){b&&(c?b.addEventListener("touchmove",a.stopEvent):b.removeEventListener("touchmove",a.stopEvent,!1))},c.bodyLock=function(){j=window.pageYOffset,document.body.classList.add("body-lock"),c.stopTouchMove(document.body,!0)},c.bodyUnlock=function(){j&&window.scrollTo(0,j),j=0,document.body.classList.remove("body-lock"),c.stopTouchMove(document.body,!1)},c.load=function(a,b,c){a?b([a],c):c()},document.body.classList.add(c.isDesktop()?"desktop":"handheld"),c.isHandheld()&&(c.getScreenParameters().deviceType===f.mobile?document.body.classList.add("mobile"):document.body.classList.add("tablet")),c.registerCallback=function(a,b){return b||(b=a),g.push({listener:b,callback:a}),{remove:function(){var a;for(a=g.length-1;a>=0;a--)g[a].listener===b&&(g[a].remove=!0,l())}}},c.scrollToViewAndroid=function(a,b,c){a&&(c&&(a._componentSizeData={height:a.getBoundingClientRect().top,offsetY:c.sectionNode.scrollTop,windowSize:b,ancestor:c}),a._componentSizeData&&!a._windowResizeListenersAdded&&(a._scrollToView=p.bind(null,a),a.listenTo(window,"resize",a._scrollToView),a._windowResizeListenersAdded=!0))},c.removeScrollToViewAndroid=function(a){a&&(a.stopListening(window,"resize",a._scrollToView),a._windowResizeListenersAdded=!1,a._componentSizeData=void 0)},window.addEventListener("orientationChange",m),window.addEventListener("resize",m),c}),define("hui/checkbox",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/a11y","./core/deviceUtils"],function(a,b,c,d,e){"use strict";return a("ha-checkbox",c.createObject(b,{init:function a(){a.super(this),this.setupProperties({name:{default:"",change:function(a){this._nodes.input.name=a}},disabled:{default:!1,type:Boolean,change:function(a){this._nodes.input.disabled=a}},checked:{default:!1,type:Boolean,change:function(a){this._nodes.input.checked!==a&&(this._nodes.input.checked=a),this.emit("change")}},value:{default:"on",change:function(a){this._nodes.input.value=a}},label:{default:"",change:function(a){var b=this._nodes.label;b.textContent=a,this.ariaLabel||(this.ariaLabel=b.textContent),a||this.removeAttribute("label")}},indeterminate:{default:!1,type:Boolean,change:function(a){this.querySelector("input").indeterminate=a}},ariaLabel:{default:"",change:function(a){var b=this.querySelector("input");a?b.setAttribute("aria-label",a):b.removeAttribute("aria-label")}}})},postRender:function a(){a.super(this),this._nodes={};var b,c,f=this.querySelector("input");e.isHandheld()&&this.classList.add("mobile-checkbox"),f||(f=this.ownerDocument.createElement("input"),f.type="checkbox",this.appendChild(f)),c="ha-checkbox-"+this.componentId,f.id=c,this._nodes.input=f,b=this.querySelector("label"),b||(b=this.ownerDocument.createElement("label"),this.appendChild(b)),b.htmlFor=c,this._nodes.label=b,this.ariaLabel||this.label&&(this.ariaLabel=this.label),this.listenTo(f,"click",function(a){a.stopImmediatePropagation(),this.checked=a.target.checked,this.emit("click")}.bind(this)),this.on("click",function(a){a.preventDefault()}),this.listenTo(f,"change",function(a){a.stopPropagation()}.bind(this)),this.listenTo(b,"click",function(a){a.stopPropagation()}),this.listenTo(f,"blur",function(){this.emit("blur")}.bind(this)),this.listenTo(f,"focus",function(){this.emit("focus")}.bind(this)),d.addA11yFocus(this)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HACheckbox",["exports","prop-types","react","hui/checkbox"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/checkbox"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.checkbox),a.HACheckbox=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=d(b),j=d(c),k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return h(b,a),l(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=b.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var c=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=c.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("click",this._listeners.onClick,!1)}},{key:"render",value:function(){var a=this.props,b=a.disabled,c=e(a,["disabled"]);return!0===b||"true"===b?j.default.createElement("ha-checkbox",k({ref:this.handleRef,class:this.props.className,disabled:!0},c)):j.default.createElement("ha-checkbox",k({ref:this.handleRef,class:this.props.className},c))}}]),b}(j.default.Component);m.propTypes={className:i.default.string,label:i.default.string,value:i.default.string,name:i.default.string,checked:i.default.bool,disabled:i.default.bool,indeterminate:i.default.bool,onChange:i.default.func,onClick:i.default.func},a.default=m}),define("hui/validatable/base-validator",["object-utils/classes","register-component/v2/UIComponent"],function(a,b){"use strict";return a.createObject(b,{init:function(a,b){this.options=b,this.validationType=a,this.element=b.element,this.onInit()},test:function(){return!1},onInit:function(){},getValue:function(){return this.element.value},matchToValue:function(a){return new RegExp(a).test(this.getValue())}})}),define("hui/validatable/validators/required",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){var a=this.getValue();return Array.isArray(a)?a.length>0:!!a}})}),define("hui/validatable/validators/numeric",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return this.matchToValue("^[0-9]+$")}})}),define("hui/validatable/validators/pattern",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return this.matchToValue(this.options.pattern)}})}),define("hui/validatable/validators/function",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(a){return this.options.validatorFunc(a)}})}),define("hui/validatable/validators/min",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return parseFloat(this.getValue())>=this.options.minVal}})}),define("hui/validatable/validators/max",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return parseFloat(this.getValue())<=this.options.maxVal}})}),define("hui/validatable/validators/minDate",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return new Date(this.getValue())>=new Date(this.options.minDate)}})}),define("hui/validatable/validators/maxDate",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){var a=new Date(this.options.maxDate);return new Date(this.getValue())<new Date(a.getFullYear(),a.getMonth(),a.getDate()+1)}})}),define("hui/validatable/validators/expected",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return this.getValue()===this.options.expectedValue}})}),define("hui/validatable/validators/min-required",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return this.element.value.length>=this.options.minRequired}})}),define("hui/validatable/validators/minlength",["../base-validator","object-utils/classes"],function(a,b){"use strict";return b.createObject(a,{test:function(){return this.getValue().length>=this.options.minLength}})}),define("hui/validatable/validators",["./validators/required","./validators/numeric","./validators/pattern","./validators/function","./validators/min","./validators/max","./validators/minDate","./validators/maxDate","./validators/expected","./validators/min-required","./validators/minlength"],function(a,b,c,d,e,f,g,h,i,j,k){"use strict";var l={required:a,numeric:b,pattern:c,validator:d,min:e,max:f,minDate:g,maxDate:h,expected:i,minRequired:j,minLength:k};return{create:function(a,b){var c=l[a];return c.init(a,b),c}}}),define("hui/core/position",[],function(){function a(a){return a.offsetWidth>0&&a.offsetHeight>0}var b=1e4,c=b;return{get baseZindex(){return b},set baseZindex(a){b!==c?console.warn("The global z-index is already in use; baseZindex should be set at application initialization"):c=a,b=a},getTopZindex:function(){return c++},bringToFront:function(a){a.parentNode!==a.ownerDocument.body&&a.ownerDocument.body.appendChild(a),a.style.zIndex=this.getTopZindex()},getBoxShadowSize:function(a){var b,c,d,e,f,g,h=window.getComputedStyle(a),i={left:0,right:0,top:0,bottom:0};return"none"===(b=h.getPropertyValue("box-shadow"))?i:(b=b.replace(/rgba?\([^\)]+\)/gi,""),b=b.replace(/#[0-9a-f]+/gi,""),b=b.replace(/[a-z]+/gi,"").trim(),c=b.split(" "),d=c.length>0?parseInt(c[0],10):0,e=c.length>1?parseInt(c[1],10):0,g=c.length>2?parseInt(c[2],10):0,f=c.length>3?parseInt(c[3],10):0,i.left=Math.max(f-d+.5*g,0),i.right=Math.max(f+d+.5*g,0),i.top=Math.max(f-e+.5*g,0),i.bottom=Math.max(f+e+.5*g,0),i)},getDimension:function(b){var c,d={},e={position:"",display:"",top:"",left:""},f=!1,g={},h="";if(!a(b))if(c=b.getBoundingClientRect(),c.width&&c.height)g.width=c.width,g.height=c.height;else{f=!0;for(h in e)e[h]=b.style[h]||"";b.style.position="absolute",b.style.left="-1000px",b.style.top="-1000px",b.style.display="inline-block"}if(d={width:g.width||b.offsetWidth,height:g.height||b.offsetHeight},f)for(h in e)b.style[h]=e[h];return d},getPageSize:function(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:Math.max(c.scrollHeight,b.scrollHeight,c.offsetHeight,b.offsetHeight,c.clientHeight,b.clientHeight)}},getPositionInDocument:function(a){var b=a.getBoundingClientRect(),c={x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop};return{left:Math.round(b.left)+c.x,right:Math.round(b.right)+c.x,top:Math.round(b.top)+c.y,bottom:Math.round(b.bottom)+c.y,width:Math.round(b.width),height:Math.round(b.height)}}}}),define("hui/core/popupPositionUtils",["./position"],function(a){function b(a,b,c){var d=a.margin+a.boxShadow.bottom,e=a.spaceToNextObject.top,f=a.dimensions.height+d;f<=e&&(c.position="top",b.y=e-f)}function c(b,c,d,e){var f=b.margin+b.boxShadow.top,g=a.getPageSize(this.ownerDocument).height-b.spaceToNextObject.bottom;(b.dimensions.height+f<g||e)&&(d.position="bottom",c.y=b.parentPosition.bottom+f)}function d(b,c,d){var e=b.margin+b.boxShadow.left,f=a.getPageSize(this.ownerDocument).width-b.spaceToNextObject.right;b.dimensions.width+e<f&&(d.position="right",c.x=b.parentPosition.right+e)}function e(a,b,c){var d=a.margin+a.boxShadow.right,e=a.parentPosition.left,f=a.dimensions.width+d;f<=e&&(c.position="left",b.x=e-f)}return{tryLeftPosition:e,tryRightPosition:d,tryTopPosition:b,tryBottomPosition:c}}),define("hui/core/popupAlignmentUtils",["./position"],function(a){function b(b,c,d){var e=a.getPageSize(this.ownerDocument).width-b.parentPosition.left,f=b.dimensions.width;d.alignment="left",c.x=f<=e?b.parentPosition.left:b.parentPosition.left-(f-e)}function c(b,c,d){var e,f,g=a.getPageSize(this.ownerDocument).width,h=b.dimensions.width;h<g&&(d.alignment="center",e=b.dimensions.width/2,f=b.parentPosition.left+b.parentPosition.width/2,c.x=f>e?f+e<g?f-e:g-b.dimensions.width:0)}function d(a,b,c){var d=a.parentPosition.right;a.dimensions.width<d&&(c.alignment="right",b.x=a.parentPosition.left-a.dimensions.width+a.parentPosition.width)}function e(b,c,d,e){var f=a.getPageSize(this.ownerDocument).height-b.parentPosition.top;(b.dimensions.height<f||e)&&(d.alignment="top",c.y=b.parentPosition.top)}function f(b,c,d){var e,f,g=a.getPageSize(this.ownerDocument).height;d.alignment="middle",e=b.dimensions.height,f=b.parentPosition.top,c.y=f+e<g?f:Math.max(0,g-b.dimensions.height)}function g(a,b,c){var d=a.parentPosition.bottom,e=a.dimensions.height;e<d&&(c.alignment="bottom",b.y=a.parentPosition.bottom-e)}return{tryLeftAlignment:b,tryRightAlignment:d,tryTopAlignment:e,tryBottomAlignment:g,tryMiddleAlignment:f,tryCenterAlignment:c}}),define("hui/core/Viewport",[],function(){"use strict";function a(){return/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)}function b(b,c){var d=["input","select","textarea"],e=document.getElementsByTagName("body")[0],f="add"===b?HTMLElement.prototype.addEventListener:HTMLElement.prototype.removeEventListener,g="add"===b?window.addEventListener:window.removeEventListener,h=function(a){var b=a.target.nodeName.toLowerCase();d.indexOf(b)>-1&&c()};a()?(f.call(e,"focusin",h,!1),f.call(e,"focusout",h,!1),f.call(document,"orientationchange",c,!1)):g.call(window,"resize",c,!1)}return{onResize:function(a){b("add",a)},offResize:function(a){b("remove",a)}}}),define("hui/core/event",["exports"],function(a){function b(a,b,c){for(var d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.msMatchesSelector;a&&1===a.nodeType&&a!==c;){if(d.call(a,b))return a;a=a.parentNode}return!1}function c(a,c,d){return function(e){var f=b(e.target,a,d);f&&c(e,f)}}function d(a,b,c,d){a.removeEventListener(b,c,!!d)}function e(a,b,e,f){var g=b.match(/(.*):(.*)/);return g&&(b=g[2],g=g[1],e=c(g,e,a)),a.addEventListener(b,e,!!f),{remove:function(){return d(a,b,e,f)}}}function f(a,b,c){var d;c=c||{},"bubbles"in c||(c.bubbles=!0),"cancelable"in c||(c.cancelable=!1),a.emit?a.emit(b,c):(d=document.createEvent("UIEvent"),d.initUIEvent(b,c.bubbles,c.cancelable,window,1),Object.keys(c).forEach(function(a){a in{bubbles:1,cancelable:1}||(d[a]=c[a])}),a.dispatchEvent(d))}a.on=e,a.off=d,a.emit=f}),define("hui/core/popup",["./position","./popupPositionUtils","./popupAlignmentUtils","./utils","./Viewport","./event"],function(a,b,c,d,e,f){function g(d,e,f,g,h,i){var j,k,l,m,n,o={x:-1,y:-1},p={top:b.tryTopPosition,left:b.tryLeftPosition,right:b.tryRightPosition,bottom:b.tryBottomPosition},q={top:c.tryTopAlignment,left:c.tryLeftAlignment,right:c.tryRightAlignment,bottom:c.tryBottomAlignment,middle:c.tryMiddleAlignment,center:c.tryCenterAlignment},u={},x=d.querySelector(".connector"),y={boxShadow:{top:0,left:0,right:0,bottom:0},margin:0,parentPosition:{},spaceToNextObject:{},dimensions:{}};return i=i||{},y.parentPosition=a.getPositionInDocument(e),y.spaceToNextObject=y.parentPosition,d.style.minWidth||(d.style.minWidth=y.parentPosition.width+"px"),y.dimensions=a.getDimension(d),x?y.margin=r+(h||s):(y.margin=r+(h||0),y.boxShadow=a.getBoxShadowSize(d)),j=f.some(function(a){var b=i[a]||p[a];if(b)return b.call(e,y,o,u),u.position}),j||(m=i.bottom||p.bottom,m.call(e,y,o,u,!0)),l=t.indexOf(u.position)>-1,n=l?w:v,k=g.some(function(a){var b;if(n.indexOf(a)>-1)return b=i[a]||q[a],b.call(e,y,o,u),u.alignment}),k||l||(m=i.top||q.top,q.top.call(e,y,o,u,!0)),x&&"middle"===u.alignment&&(x.style.top=(Math.min(y.dimensions.height,y.parentPosition.height)-14)/2+"px"),{currentPosition:o,currentPositionType:u}}function h(a){t.forEach(function(a){this.classList.remove("position-"+a)},a),u.forEach(function(a){this.classList.remove("position-"+a)},a),v.forEach(function(a){this.classList.remove("alignment-"+a)},a),w.forEach(function(a){this.classList.remove("alignment-"+a)},a)}function i(a,b){h(a),a.classList.add("position-"+b.currentPositionType.position),a.classList.add("alignment-"+b.currentPositionType.alignment),a.style.left=b.currentPosition.x+"px",a.style.top=b.currentPosition.y+"px"}function j(a){if(a._scrollTarget)return a._scrollTarget;for(var b=a.parentElement||a.parentNode;b;){if(b._scrollTarget)return b._scrollTarget;if(b.scrollHandler)return b;if(b===a.ownerDocument)return;b=b.parentElement||b.parentNode}}function k(a){a.scrollHandler&&(a.scrollParent.removeEventListener("scroll",a.scrollHandler),a.scrollHandler=null,a.scrollParent=null)}function l(b,c,e,f,g,h){var i,l=0;i=j(c),i?(b._scrollTarget=i,b.moveHandler||(b.moveHandler=function(c){b.style.left=parseInt(b.style.left,10)+c.dx+"px",b.style.top=parseInt(b.style.top,10)+c.dy+"px",b.style.zIndex=a.getTopZindex()},b.parentCloseHandler=function(){b.classList.contains("no-transition")||b.classList.add("no-transition")},b.parentObscuredHandler=function(){b.classList.add("no-transition"),b.classList.remove("visible"),setTimeout(function(){b.classList.remove("no-transition")},20)},b.parentRevealedHandler=function(){b.classList.add("no-transition"),b.classList.add("visible"),setTimeout(function(){b.classList.remove("no-transition")},20)},i.addEventListener("ha-popup-move",b.moveHandler),i.addEventListener("close",b.parentCloseHandler),i.addEventListener("ha-popup-obscured",b.parentObscuredHandler),i.addEventListener("ha-popup-revealed",b.parentRevealedHandler),b.addEventListener("close",function a(b){i.removeEventListener("ha-popup-move",b.target.moveHandler),i.removeEventListener("close",b.target.parentCloseHandler),i.removeEventListener("ha-popup-obscured",b.target.parentObscuredHandler),i.removeEventListener("ha-popup-revealed",b.target.parentRevealedHandler),b.target.moveHandler=null,b.target.parentCloseHandler=null,b.target.parentObscuredHandler=null,b.target.parentRevealedHandler=null,b.target.removeEventListener("close",a),b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition")}))):b.scrollHandler||(b.scrollParent=d.getScrollParent(c),b.scrollParent!==b.ownerDocument&&(b.scrollHandler=d.throttleDebounce(function(){x(b,c),!b.classList.contains("leave")&&b.classList.contains("visible")&&0===l&&(l=requestAnimationFrame(function(){m(b,c,e,f,g,h),l=0}))},20),b.scrollParent.addEventListener("scroll",b.scrollHandler),b.closeHandler||(b.closeHandler=function(a){l&&(cancelAnimationFrame(l),l=0),k(a.target),b._noAutoFocusLastActiveElementOnClose=b._tmpNoAutoFocusLastActiveElementOnClose,a.target.removeEventListener("close",b.closeHandler),b.closeHandler=null},b.addEventListener("close",b.closeHandler))))}function m(b,c,d,e,h,j){var k,m=e||["left","right"],n=d||["bottom","top"];return l(b,c,d,e,h,j),a.bringToFront(b),k=g(b,c,n,m,h,j),k.currentPositionType.position&&k.currentPositionType.alignment?(b.style.top&&b.style.left&&f.emit(b,"ha-popup-move",{dx:k.currentPosition.x-parseInt(b.style.left,10),dy:k.currentPosition.y-parseInt(b.style.top,10)}),i(b,k),!0):(q(b),!1)}function n(a,b,c,d,f,g){var h;return h=function(){a.classList.contains("visible")&&m(a,b,c,d,f,g)},e.onResize(h),h}function o(a){e.offResize(a)}function p(a,b,c,d,e,f){document.body.contains(b)&&a.show&&!a.classList.contains("visible")&&m(a,b,c,d,e,f)&&a.show()}function q(a){a&&a.open&&a.close(),k(a)}var r=5,s=4,t=["top","bottom"],u=["left","right"],v=["top","middle","bottom"],w=["left","center","right"],x=function(b,c){if(b.classList.contains("leave")||b.classList.contains("closed"))return k(b),b.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),void(b.classList.contains("no-transition")||b.classList.add("no-transition"));var d=a.getPositionInDocument(c),e=a.getPositionInDocument(b.scrollParent);d.bottom<e.top||d.top>e.bottom||d.right<e.left||d.left>e.right?b.classList.contains("visible")&&(b._closeOnBlur?(k(b),b._tmpNoAutoFocusLastActiveElementOnClose=b._noAutoFocusLastActiveElementOnClose,b._noAutoFocusLastActiveElementOnClose=!0,b.addEventListener("close",function a(b){b.target.classList.contains("no-transition")&&b.target.classList.remove("no-transition"),b.target.removeEventListener("close",a)}),b.classList.contains("no-transition")||b.classList.add("no-transition"),b.close()):b.classList.contains("visible")&&(b.classList.remove("visible"),b.emit("ha-popup-obscured"))):b.classList.contains("visible")||(b.classList.add("visible"),b.emit("ha-popup-revealed"))};return{installResizeMethod:n,uninstallResizeMethod:o,clearPosition:h,setPosition:m,show:p,hide:q}}),define("hui/core/tooltip",[],function(){function a(a){var b,c,d="focus"===a.trigger?"blur":"mouseleave",e=a._listenersTargets.length;for(b=0;b<e;++b)(c=a._listenersTargets[b])&&(!a.dismissible&&a.duration<=0&&"custom"!==a.trigger?a.listenTo(c,d,a._hideCallback,!0):a.stopListening(c,d,a._hideCallback,!0))}return{removeOldListeners:function(a){var b,c,d=a._listenersTargets.length,e="focus"===a.trigger?"blur":"mouseleave",f="hover"===a.trigger?"mouseenter":"focus";for(b=0;b<d;++b)c=a._listenersTargets[b],a.stopListening(c,f,a._showCallback,!0),a.stopListening(c,e,a._hideCallback,!0)},resetListeners:function(b,c){var d,e,f,g;for("hover"===c?(e="focus",d="mouseenter"):"focus"===c&&(e="mouseenter",d="focus"),f=0;f<b._listenersTargets.length;++f)(g=b._listenersTargets[f])&&(b.stopListening(g,e,b._showCallback,!0),"custom"!==b.trigger&&b.listenTo(g,d,b._showCallback,!0));a(b)},resetTooltipDismissal:a,setTooltipTargets:function(a,b){if(-1===b.indexOf("_previousSibling"))a._listenersTargets=a.ownerDocument.querySelectorAll(b);else{var c=b.split("_previousSibling")[1];a._listenersTargets=c?[a.previousElementSibling.querySelector(c.trim())||a.previousElementSibling]:[a.previousElementSibling]}}}}),define("hui/core/ellipsis",[],function(){"use strict";function a(a){return Boolean(a.offsetWidth||a.offsetHeight||a.getClientRects().length)}function b(a,b){function c(){d=requestAnimationFrame(c),(new Date).getTime()-e>=b&&(a.call(),e=(new Date).getTime())}var d,e=(new Date).getTime();return d=requestAnimationFrame(c),{cancel:function(){return cancelAnimationFrame(d)}}}function c(a){var b,c,d=window.getComputedStyle(a),e=d.display;return"inline"===e?a.getClientRects().length:(b=+d.height.slice(0,-2),c=+d.lineHeight.slice(0,-2)||1.2*+d.fontSize.slice(0,-2),Math.round(b/c))}function d(a,b){return c(a)>b.lines}function e(a,b){for(;b.lastCharacter.indexOf(a.slice(-1))>-1;)a=a.slice(0,-1);return a+=b.ellipsis}function f(a,b,c){var f,g=a.nodeValue,h=-1!==g.indexOf(" ")?" ":"",i=g.split(h),j=-1,k=-1,l=0,m=i.length-1;for(c.fallbackToLetter&&0===l&&0===m&&(h="",i=g.split(h),m=i.length-1);l<=m&&(0!==l||0!==m)&&(f=Math.floor((l+m)/2))!==k;)k=f,a.nodeValue=i.slice(0,k+1).join(h)+c.ellipsis,Array.prototype.forEach.call(b.childNodes,function(a){if(3!==a.nodeType){var b=a.style.display;a.style.display="none",a.style.display=b}}),d(b,c)?m=k:(j=k,l=k);return-1===j||1===i.length&&0===i[0].length||(g=e(i.slice(0,j+1).join(h),c),a.nodeValue=g),!0}function g(a,b,c){var e=!1,h=Array.prototype.slice.call(a.cloneNode(!0).childNodes);return b||(b=a),a.innerHTML="",h.forEach(function(h){if(h.tagName&&"script"===h.tagName.toLowerCase())a.appendChild(h);else{if(e)return!0;a.appendChild(h),d(b,c)&&(e=3===h.nodeType?f(h,b,c):g(h,b,c))}}),e}function h(a,b){var c;for(c in a)b.hasOwnProperty(c)&&(b[c]=a[c]);return b}function i(c,e){function f(){c.setAttribute("ha-ellipsis",!0),c.setAttribute("ha-ellipsis-style",c.getAttribute("style")||""),c.style.wordWrap="break-word",c.style.whiteSpace="normal",d(c,n)&&(m=g(c,null,n)),o.isTruncated=m}var j=[];if(!c||0===c.length||!e||0===e.length)return!1;if(c.length>1)return Array.prototype.forEach.call(c,function(a,b){j[b]=i(a,e)}),j;var k,l=Array.prototype.slice.call(c.childNodes),m=!1,n=h(e,{ellipsis:"... ",fallbackToLetter:!0,lastCharacter:[" ","",",",";","!","?"],lines:0,inPageOffset:100}),o={revert:function(){c.innerHTML="",k&&(k.cancel(),k=null),l.forEach(function(a){try{c.appendChild(a)}catch(a){c.appendChild(document.createTextNode(""))}}),c.setAttribute("style",c.getAttribute("ha-ellipsis-style")||""),c.removeAttribute("ha-ellipsis")},originalContent:l,isTruncated:!1};return c.hasAttribute("ha-ellipsis")&&o.revert(),a(c)?f():k=b(function(){a(c)&&(k&&(k.cancel(),k=null),f())},n.inPageOffset),o}return i.getLines=c,i}),define("hui/tooltip",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/popup","./core/tooltip","./core/utils","./core/a11y","./core/deviceUtils","./core/ellipsis"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){for(var b=a.target;"HA-TOOLTIP"!==b.tagName;)b=b.parentElement;b.emit("dismiss"),b.close()}function k(a){var b=a.target;setTimeout(b._hideCallback,b.duration)}function l(a,b){var c,d,e,g=!1,i=a.querySelector(".tooltip-inner");if(b&&(g=b.tooltipMessage||b.getAttribute("tooltipMessage")),e=g||a.message){for("string"==typeof e?e=[a.ownerDocument.createTextNode(e)]:e instanceof HTMLElement&&(e=[e]),c=i.childNodes.length,d=0;d<c;d++)i.removeChild(i.childNodes[0]);i.innerHTML="",f.appendChildCollection(i,e)}if(h.isHandheld()&&h.getScreenParameters().deviceType===h.deviceTypes.mobile){var j=a.ownerDocument.createTextNode(i.textContent);i.innerHTML="",i.appendChild(j)}}function m(a,b){var c=["input","select","textarea"],d=b.querySelector(c.join(","));return d||b}function n(a,b){a.id||(a.id="ha-tooltip-"+a.componentId);var c=m(a,b);c!==b?c.setAttribute("aria-describedby",a.id):b._inputElement?b._inputElement.setAttribute("aria-describedby",a.id):b.setAttribute("aria-describedby",a.id)}var o,p=null;return o=a.createObject(b,{init:function a(){a.super(this),this._listenersTargets=[],this._message="",this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this.setAttribute("role","tooltip"),this.setupProperties({_alignment:{default:"left"},targetSelector:{default:"_previousSibling",change:function(a){e.removeOldListeners(this),e.setTooltipTargets(this,a),e.resetListeners(this,this.trigger)}},position:{default:"top bottom"},dismissible:{type:Boolean,default:!1,change:function(a){a?(this.classList.add("dismissible"),this.on("button:click",j)):(this.classList.remove("dismissible"),this.off("button:click",j)),e.resetTooltipDismissal(this)}},trigger:{default:"hover",change:function(a){e.resetListeners(this,a)}},duration:{default:0,change:function(a){a>0?this.on("show",k):this.off("show",k),e.resetTooltipDismissal(this)}}})},createdCallback:function a(){var b;a.super(this),b=f.getAnimationEventNames(),this.on(b.animationend,function(a){var b=a.target;switch(a.animationName){case"ha-fade-in":b.classList.remove("enter"),b.emit("show");break;case"ha-fade-out":b.classList.remove("leave"),b.classList.remove("visible"),b.emit("close"),d.clearPosition(b)}})},attachedCallback:function(){this._attached||(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger),l(this,this._listenersTargets[0]))},postRender:function a(){console.warn("DEPRECATION WARNING: The ha-tooltip web component is deprecated. Try using the new React component to continue the journey to TSA.");var b,c,d,e,h;a.super(this),g.addA11yFocus(this),this.hasAttribute("message")?d=this.getAttribute("message"):(e=this.querySelector(".tooltip-inner"),d=e?f.removeNodesSafe(e,e.childNodes):f.removeNodesSafe(this,this.childNodes)),b=this.querySelector("div.tooltip-container"),c=this.querySelector("div.tooltip-inner"),h=this.querySelector("button.btn-container"),this.style.minWidth="1px",b||(b=this.ownerDocument.createElement("div"),b.className="tooltip-container",h=this.ownerDocument.createElement("button"),h.className="hi hi-close btn-icon-only",h.setAttribute("aria-label","Close"),b.appendChild(h),c=this.ownerDocument.createElement("div"),c.className="tooltip-inner",b.appendChild(c),this.appendChild(b)),this.message=d},get message(){return this._message},set message(a){this._message=a,l(this)},show:function(a){var b,c,e,f,g,j=17,k=this.classList.contains("visible"),o=a?a.currentTarget:null,q=[],r={};if(o||(o=this._listenersTargets[0]),o){if(n(this,o),c=m(this,o),l(this,o),!p||o!==p)for(p=o,q=this.ownerDocument.querySelectorAll("ha-tooltip.visible"),g=0;g<q.length;g++)b=q[g],b.close();if(h.isHandheld()?(f=["right","left"],e=h.getScreenParameters().deviceType===h.deviceTypes.tablet?["bottom","top"]:["top","bottom"]):(e=this.position.split(" "),f=this._alignment.split(" ")),k&&this.classList.contains("leave")&&(this.classList.remove("leave"),d.clearPosition(this)),h.isHandheld()&&h.getScreenParameters().deviceType===h.deviceTypes.mobile&&(this.ellipsed=i(this.querySelector(".tooltip-inner"),{lines:5})),!(this.className.indexOf("position-")>-1)){if(!d.setPosition(this,c,e,f,j,r))return;this._resizeMethod=d.installResizeMethod(this,c,e,f,j,r)}k||(this.classList.add("visible"),this.classList.remove("closed"))}},hide:function(){this.close(),console.warn('DEPRECATION WARNING: This method is deprecated, use "close" method instead')},close:function(){this._timed&&(clearTimeout(this._timed),delete this._timed),this.classList.contains("visible")&&(this.classList.add("leave"),this.classList.add("closed"),p=null,this._resizeMethod&&(d.uninstallResizeMethod(this._resizeMethod),this._resizeMethod=null))}}),c("ha-tooltip",o)}),define("hui/validatable/validatable",["object-utils/classes","register-component/v2/UIComponent","./validators","../core/popup","../core/deviceUtils","../tooltip"],function(a,b,c,d,e){"use strict";function f(a){var b={};return a.every(function(a){return b={isValid:a.test(a.element),message:a.options.errorMessage,type:a.validationType},b.isValid}),b}function g(a){var b,d,e,f,g=a.validationTarget,h={required:{errorMessage:a.requiredMessage},pattern:{pattern:a.pattern},validator:{validatorFunc:a.validator},min:{minVal:a.min},max:{maxVal:a.max},minDate:{minDate:a.minDate},maxDate:{maxDate:a.maxDate},numeric:{numeric:a.numeric},expected:{expectedValue:a.expected},minRequired:{minRequired:a.minRequired},minLength:{minLength:a.minLength}};a._validators=[];for(e in h)if(d={element:g,errorMessage:a.invalidMessage},f=h[e],a[e]){for(b in f)d[b]=f[b];a._validators.push(c.create(e,d))}}function h(a,b){b?j(a):a.tooltip&&(e.isDesktop()?a.tooltip.close():a.tooltip.parentElement&&(a.tooltip.parentElement.removeChild(a.tooltip),a.tooltip=null))}function i(a,b){var c,d=a.querySelector(".hi-circle-alert"),e=a.querySelector("legend")||a.querySelector("label"),f=a.querySelectorAll(a.highlightElementSelector);b?(a.classList.remove("input-error"),d&&d.classList.add("hide")):(a.classList.add("input-error"),d?d.classList.remove("hide"):e&&(c=e.parentElement,d=document.createElement("span"),d.className="hi hi-circle-alert",d.setAttribute("aria-hidden",!0),c.insertBefore(d,e))),Array.prototype.forEach.call(f,function(a){b?(a.removeAttribute("aria-invalid"),a.removeAttribute("aria-describedby")):a.setAttribute("aria-invalid",!0)})}function j(a){var b,c,f,g=a.querySelector("legend")||a.querySelector("label"),h=["top","bottom"],i=["left","right"],j=a.validationTarget,k=a.querySelectorAll(a.highlightElementSelector),l=0,m=g?-5:10,n={},o=a.tooltip||a.querySelector("span.input-error-message");a._validationInfo&&(b="name-error-"+a.componentId,e.isHandheld()?(o||(o=document.createElement("span"),o.classList.add("input-error-message"),o.setAttribute("role","alert")),o.setAttribute("id",b),o.textContent=a._validationInfo.message,a.appendChild(o)):(o||(o=document.createElement("ha-tooltip"),j.id&&(o.targetSelector="#"+j.id),o.trigger="custom",o.position="top",o.setAttribute("role","alert")),o.message=a._validationInfo.message,f=o.querySelector(".tooltip-inner"),f.id=b,o.classList.contains("visible")&&o.classList.contains("leave")?o.classList.remove("leave"):(n.left=function(a,b,c){function d(a){var b=a.documentElement,c=a.body;return{width:Math.max(c.scrollWidth,b.scrollWidth,c.offsetWidth,b.offsetWidth,c.clientWidth,b.clientWidth),height:Math.max(c.scrollHeight,b.scrollHeight,c.offsetHeight,b.offsetHeight,c.clientHeight,b.clientHeight)}}var e,f,g=d(this.ownerDocument).width-a.parentPosition.left;"top"===c.position?(f=a.dimensions.width+l,e=l):(f=a.dimensions.width,e=0),f<g&&(c.alignment="left",b.x=a.parentPosition.left+e)},d.show(o,j,h,i,m,n),o._resizeMethod=d.installResizeMethod(o,j,h,i,m,n))),Array.prototype.forEach.call(k,function(a){a.setAttribute("aria-describedby",b)}),a.label&&(c=a.querySelector("legend")||a.querySelector("label"),l=c.offsetWidth+17),a.tooltip=o)}return a.createObject(b,{init:function a(){a.super(this),this._validators=null,this._validationInfo=null,this.required=!1,this.validator=null,this.min=null,this.max=null,this.highlightElementSelector=null,this.validationTarget=null,this.setupProperties({requiredMessage:{default:"Required Message",type:String,change:function(a){var b;Array.isArray(this._validators)&&this._validators.length>0&&(b=this._validators.filter(function(a){return"required"===a.validationType}))&&b[0]&&(b[0].options.errorMessage=a,this._validationInfo&&"required"===this._validationInfo.type&&(this._validationInfo.message=a))}},invalidMessage:{default:"Invalid Value",type:String,change:function(a){Array.isArray(this._validators)&&this._validators.length>0&&(this._validators.forEach(function(b){"required"!==b.validationType&&(b.options.errorMessage=a)}),this._validationInfo&&"required"!==this._validationInfo.type&&(this._validationInfo.message=a))}}})},showValidationMessage:function(){console.warn('DEPRECATION WARNING: The "showValidationMessage" event is going to be deprecated. From now on, please use "reportValidity" method instead.'),j(this)},checkValidity:function(a){return g(this),0===this._validators.length||a||0===this.value.length&&!this.required?(this._validationInfo=null,!0):(this._validationInfo=f(this._validators),this._validationInfo.isValid)},handleTooltipBinding:function(a){a?(this.listenTo(this.validationTarget,"mouseenter",this.reportValidity),this.listenTo(this.validationTarget,"mouseleave",this.reportValidity),this.listenTo(this.validationTarget,"blur",this.reportValidity,!0)):(this.stopListening(this.validationTarget,"mouseenter",this.reportValidity),this.stopListening(this.validationTarget,"mouseleave",this.reportValidity),this.stopListening(this.validationTarget,"blur",this.reportValidity,!0),this.reportValidity())},reportValidity:function(a,b){var c,d=this._validationInfo&&this._validationInfo.isValid,f=e.isHandheld(),g=this.ownerDocument.activeElement;if(!a)return d=this.checkValidity(b),i(this,d),h(this,!d),d;switch(a.type){case"focus":case"mouseenter":case"mouseover":f||h(this,!d);break;case"mouseout":g!==a.target&&e.isDesktop()&&h(this,!1);break;case"mouseleave":!a.target.contains(g)&&e.isDesktop()&&h(this,!1);break;case"blur":case"hide":d=this.checkValidity(),i(this,d),h(this,f&&!d);break;case"keyup":d||!this._validationInfo||!1!==this._validationInfo.isValid?d=!0:(d=this.checkValidity())&&(i(this,d),c=!d,h(this,c))}return d},resetValidation:function(){this.checkValidity(!0),i(this,!0),h(this,!1)}})}),define("hui/checkbox-group",["register-component/v2/register","./validatable/validatable","object-utils/classes","./core/utils","./checkbox"],function(a,b,c,d){"use strict";function e(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}if(!a.reactLayering){var e,f=a.querySelector("legend");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}}function f(a){var b=d.getComponentFromElement(a.target,"HA-CHECKBOX-GROUP");d.stopEvent(a),b.emit(a.type)}function g(a,b){var c=a._value.indexOf(b.value);b.checked&&!b.disabled?-1===c&&(a._value.push(b.value),a._selectedItems.push(b),a.reportValidity(!0)):a._value&&-1!==c&&(a._value.splice(c,1),a._selectedItems.splice(c,1)),a.reportValidity(null,!0)}function h(a){var b=d.getComponentFromElement(a.target,"HA-CHECKBOX-GROUP");d.stopEvent(a),g(b,a.target),b.emit(a.type)}return a("ha-checkbox-group",c.createObject(b,{init:function a(){a.super(this),this._label=null,this._selectedItems=[],this._value=[],this._checkboxes=[],this.validationTarget=this,this.highlightElementSelector='input[type="checkbox"]',this.setupProperties({reactLayering:{type:Boolean,default:!1},name:{default:"ha-checkbox-group-"+this.componentId,type:String,change:function(a){this._checkboxes.length>0&&this._checkboxes.forEach(function(b){b.name?b.name=a:b.setAttribute("name",a)})}},minRequired:{default:0,type:Number,change:function(a,b){a!==b&&this.handleTooltipBinding(a||this.required)}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&e(this)}},required:{type:Boolean,default:!1,change:function(a,b){a!==b&&(e(this),this.handleTooltipBinding(a||this.minRequired))}}})},set value(a){this._value.length=0,this._selectedItems.length=0,a&&a.forEach(function(a){this._checkboxes.forEach(function(b){a===b.value?(this._selectedItems.push(b),this._value.push(a),b.checked=!0):-1===this._value.indexOf(b.value)&&(b.checked=!1)}.bind(this))}.bind(this))},get value(){return this._value},set checkboxes(a){var b=this.querySelector("fieldset");this._checkboxes.length=0,Array.prototype.slice.call(b.querySelectorAll("ha-checkbox"),0).forEach(function(a){this.stopListening(a,"click",f),this.stopListening(a,"change",h),this.reactLayering||b.removeChild(a)}.bind(this)),a&&(a=[].slice.call(a),a.forEach(function(a){this.listenTo(a,"click",f),this.listenTo(a,"change",h),this.reactLayering||b.appendChild(a),this._checkboxes.push(a),g(this,a)},this))},get checkboxes(){return this._checkboxes},set selectedItems(a){},get selectedItems(){return this._selectedItems},set label(a){if(!this.reactLayering){var b,c=this.querySelector("fieldset"),d=this.querySelector("legend"),f=c.querySelector(".label-container"),g=c.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(c.removeChild(g),d=this.querySelector("legend")),d||(d=this.ownerDocument.createElement("legend")),f||(f=this.ownerDocument.createElement("div"),f.classList.add("label-container"),f.appendChild(d),c.insertBefore(f,c.firstChild)),d.htmlFor=c.id,e(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),f&&c.removeChild(f),d=this.ownerDocument.createElement("legend"),d.htmlFor=c.id,Array.isArray(a)?(g&&c.removeChild(g),[].forEach.call(a,function(a){d.appendChild(a)}),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)):g?(c.removeChild(g),d.innerHTML=a.innerHTML,g.innerHTML=d.outerHTML):(d.appendChild(a),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)),c.insertBefore(g,c.firstChild),e(this)),this.listenTo(d,"click",function(a){"legend"===a.target.localName&&a.stopPropagation()})):(this.stopListening(d,"click"),g?c.removeChild(g):f&&c.removeChild(f),this.hasAttribute("label")&&this.removeAttribute("label")),this._label=a}},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},postRender:function a(){a.super(this);var b=this.querySelectorAll("ha-checkbox"),c=this.querySelector("fieldset"),e=this.querySelector("ha-label"),f=c||this;c||(c=this.ownerDocument.createElement("fieldset"),this.appendChild(c)),b.length>0&&(b=d.removeNodesSafe(f,b),this.checkboxes=b);var g=this.getAttribute("label");e?e?this.label=e:g&&this.removeAttribute("label"):g&&(this.label=g)},attachedCallback:function a(){a.super(this)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HACheckboxGroup",["exports","prop-types","react","hui/checkbox-group"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/checkbox-group"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.checkboxGroup),a.HACheckboxGroup=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"testValidity",value:function(){if(this.props.onValidityChange){var a=void 0;this._huiComponent.checkValidity&&(a=this._huiComponent.checkValidity()),this._lastValidity!==a&&(this._lastValidity=a,this.props.onValidityChange(a))}}},{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b),a.testValidity()};this.removeWebRenderComp(),this.updateCheckboxes(),this._listeners.onChange=b.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var c=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=c.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick);var d=function(a){a.stopPropagation()};this._listeners.onShow=d.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow);var e=function(a){a.stopPropagation()};this._listeners.onClose=e.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var f=function(a){a.stopPropagation()};this._listeners.onDismiss=f.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss),window.setTimeout(function(){a._huiComponent&&(a.props.validator&&(a._huiComponent.validator=a.props.validator),a.props.alwaysRenderValidity&&a._huiComponent.reportValidity(),a.testValidity())},0)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("click",this._listeners.onClick,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1),this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1)}},{key:"componentDidUpdate",value:function(){this.props.validator&&(this._huiComponent.validator=this.props.validator),this.testValidity(),this.props.alwaysRenderValidity&&this._huiComponent.reportValidity()}},{key:"removeWebRenderComp",value:function(){var a=this._huiComponent.querySelectorAll("fieldset");a&&a.length>1&&this._huiComponent.removeChild(a[0])}},{key:"updateCheckboxes",value:function(){var a=this._huiComponent.querySelectorAll("ha-checkbox");a&&(this._huiComponent.checkboxes=Array.prototype.slice.call(a))}},{key:"render",value:function(){var a=this.props.required&&!this.props.noRequiredIndicator?" *":"";return i.default.createElement("ha-checkbox-group",j({ref:this.handleRef,class:this.props.className,reactLayering:!0},this.props),i.default.createElement("fieldset",null,this.props.label?i.default.createElement("div",{className:"label-container"},i.default.createElement("legend",null,this.props.label,a)):null,this.props.children))}}]),b}(i.default.Component);l.propTypes={className:h.default.string,name:h.default.string,label:h.default.string,value:h.default.array,checkboxes:h.default.array,selectedItems:h.default.array,minRequired:h.default.number,required:h.default.bool,noRequiredIndicator:h.default.bool,min:h.default.number,max:h.default.number,requiredMessage:h.default.string,invalidMessage:h.default.string,validator:h.default.func,onValidityChange:h.default.func,alwaysRenderValidity:h.default.bool,onChange:h.default.func,onClick:h.default.func},a.default=l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAColorPicker",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAColorPicker=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleColorCircleClicked=function(a){c.setState({selectedColor:a.colorCode,selectedColorName:a.colorName}),c.props.handleColorChange(a)},c.handleColorInputChanged=function(a){c.setState({selectedColor:a.target.value}),c.props.handleColorChange(a.target.value)},c.handleColorCircleClicked=c.handleColorCircleClicked.bind(c),c.handleColorInputChanged=c.handleColorInputChanged.bind(c),c.state={selectedColor:c.props.colors.colors.length>0?c.props.colors.colors[0].colorCode:"#48565f",selectedColorName:c.props.colors.colors.length>0?c.props.colors.colors[0].colorName:"Green"},c}return g(b,a),j(b,[{key:"render",value:function(){var a=this,b={borderColor:this.state.selectedColor},c={backgroundColor:this.state.selectedColor},d="Your selected color is "+this.state.selectedColorName;return i.default.createElement("div",{className:"ha-color-picker-container"},i.default.createElement("div",{className:"selected-color",role:"image","aria-label":d,"aria-live":"polite"},i.default.createElement("div",{style:b,className:"selected-color-circle-outer"},i.default.createElement("div",{style:c,className:"selected-color-circle-inner"})),i.default.createElement("div",{className:"hex-value-input"},i.default.createElement("ha-text-field",{onInput:this.handleColorInputChanged,label:"Color",value:this.state.selectedColor,placeholder:"#48565f"}))),i.default.createElement("div",{className:"color-all-circles"},this.props.colors.colors.map(function(b){return i.default.createElement("button",{key:b.colorCode,style:{backgroundColor:b.colorCode,border:0},"aria-label":b.colorName,className:"paletteColorCircle",onClick:function(){return a.handleColorCircleClicked(b)}})})))}}]),b}(i.default.Component);k.propTypes={colors:h.default.object.isRequired,handleColorChange:h.default.func},a.default=k}),define("hui/core/domObserver",[],function(){function a(a){a.disconnect()}function b(a,b,c){a.observe(b,c)}function c(c,d,e,f){var g=new MutationObserver(function(h){var i,j=!1;for(i=0;i<h.length;i++)if(e(h[i])){j=!0;break}j&&(a(g),f(h),b(g,c,d))});return g.observe(c,d),{remove:function(){g.disconnect()},pauses:0,pause:function(){this.pauses||a(g),this.pauses++},resume:function(){this.pauses=Math.max(0,this.pauses-1),this.pauses||b(g,c,d)}}}function d(a,b){return c(a,{childList:!0,characterData:!0,subtree:!0,attributes:!0},function(b){return!("attributes"===b.type&&b.target===a)},function(){b.call(a)})}function e(a,b,d){return c(a,{childList:!0,characterData:!1,subtree:!0,attributes:!0},function(c){var d;if("childList"===c.type&&c.target===a){if(c.addedNodes.length>0)for(d=0;d<c.addedNodes.length;d++)if(i(a,c.addedNodes[d],b))return!0;if(c.removedNodes.length>0)for(d=0;d<c.removedNodes.length;d++)if(i(a,c.removedNodes[d],b))return!0}else if("attributes"===c.type&&i(a,c.target,b))return!0;return!1},function(){var c=[];Array.prototype.slice.call(a.querySelectorAll(b),0).forEach(function(b){b.parentElement===a&&c.push(b)}),d.call(a,c)})}function f(a,b,c,e){var f=e();return b[c]!==f&&(b[c]=f),d(a,function(){b[c]=e()})}function g(a,b){if(a.length!==b.length)return!0;for(var c=0;c<a.length;c++)if(!a[c].isEqualNode(b[c]))return!0;return!1}function h(a,b,c,d){var f=[];return Array.prototype.slice.call(a.querySelectorAll(b),0).forEach(function(b){b.parentElement===a&&f.push(b)}),g(f,c[d])&&(c[d]=f),e(a,b,function(a){c[d]=a})}var i=function(){var a=Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector;return function(b,c,d){return(null===c.parentElement||c.parentElement===b)&&a.call(c,d)}}();return{observeContentChanges:d,observeElementChanges:e,bindContentChanges:f,bindChildrenChanges:h}}),define("hui/item",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/domObserver"],function(a,b,c,d){"use strict";function e(a){if(a)return a.replace(/<\/?[^>]+(>|$)/g,"")}var f;return f=c.createObject(a,{init:function a(){a.super(this),this._label="",this._sanitizeInputs=!1,this.setupProperties({sanitizeInputs:{default:!1,type:Boolean,change:function(a){this.setAttribute("sanitizeInputs",a),this.label=this.label,this._sanitizeInputs=a}},value:{default:"",type:String},label:{default:"",type:String,change:function(a){if(this._labelBinding&&this._labelBinding.pause(),this.sanitizeInputs){var b=e(a);this.textContent=b,this._label=b}else this.innerHTML=a,this._label=a;this._labelBinding&&this._labelBinding.resume()}}})},postRender:function a(){a.super(this),this.label=this.sanitizeInputs?e(this.textContent):this.innerHTML?this.innerHTML:this.label,this.value=this.getAttribute("value")||this.label},attachedCallback:function(){this._labelBinding=d.bindContentChanges(this,this,"label",function(){return this.sanitizeInputs?e(this.textContent):this.innerHTML?this.innerHTML:this.label}.bind(this))},detachedCallback:function(){this._labelBinding&&(this._labelBinding.remove(),this._labelBinding=null)}}),b("ha-item",f)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAItem",["exports","prop-types","react","hui/item"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/item"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.item),a.HAItem=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),k(b,[{key:"render",value:function(){return i.default.createElement("ha-item",j({class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,value:h.default.string,disabled:h.default.oneOfType([h.default.bool,h.default.string])},a.default=l}),define("hui/core/ResponsiveBase",["object-utils/classes","register-component/v2/UIComponent","./deviceUtils"],function(a,b,c){return a.createObject(b,{attachedCallback:function(){this._resizeHandle=c.registerCallback("_resize",this)},detachedCallback:function(){this._resizeHandle.remove()},_resize:function(){}})}),define("hui/core/menuItemUtils",[],function(){function a(a,b,c,d){var e=d.createElement("ha-menu-item");return e.value=a.value||a.getAttribute("value")||a.getAttribute("label"),e.sanitizeInputs=a.sanitizeInputs||!1,(a.hasAttribute("disabled")&&!1!==a.getAttribute("disabled")||a.disabled)&&(e.disabled=!0),e.label="function"==typeof c?c(a):a.label||a.textContent||a.getAttribute("label"),b&&Object.keys(b).forEach(function(a){e.setAttribute(a,b[a])}),e}return{createMenuItemLabelWrapper:function(a,b){var c=a.createElement("span");return c.classList.add("menu-item-label"),Array.isArray(b)&&b.forEach(function(a){c.appendChild(a)}),c},createMenuItem:a,createMenuItems:function(b,c,d,e){return b.map(function(b){return a(b,c,d,e)})}}}),define("hui/core/dojoUtils",[],function(){return{isDojoWidgetPopup:function(a){for(;a&&"BODY"!==a.tagName;){if(a.classList.contains("dijitPopup"))return!0;a=a.parentNode}return!1},getDojoWidgetPopup:function(a,b){for(;a&&"BODY"!==a.tagName;)if(a.classList.contains("dijitPopup")){if(a.parentNode&&a.parentNode.childNodes)for(var c=0;c<a.parentNode.childNodes.length;++c)if(a.parentNode.childNodes[c].tagName===b)return a}else a=a.parentNode;return a},getTargetSelector:function(a,b){var c=b.getAttribute("dijitpopupparent");return a.querySelector("#"+c)},shouldDismissPopover:function(a,b){for(;a&&"BODY"!==a.tagName;){if(a.tagName===b||a.classList.contains("dijitPopup"))return!1;a=a.parentNode}return!0}}}),define("hui/popover",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/utils","./core/popup","./core/dojoUtils"],function(a,b,c,d,e,f,g,h){function i(a){a.contains(document.activeElement)&&document.activeElement.blur(),a.classList.remove("visible"),a.classList.remove("leave"),!a._noAutoFocusLastActiveElementOnClose&&a.lastFocus&&a.lastFocus.focus(),a.open=!1,a.emit("close")}function j(a,b){var c;switch(a){case"ha-fade-in":b.classList.remove("enter"),b._noAutoFocusFirstTabbableElementOnShow||(c=b.lastElementChild)&&(d.setFocusOnAnyFirst(c)||c.focus()),b.open=!0,b.emit("show");break;case"ha-fade-out":i(b)}}function k(a,b){var c,d;if(h.isDojoWidgetPopup(b)){d=h.getDojoWidgetPopup(b,"HA-POPOVER"),d&&(c=h.getTargetSelector(a,d));var e=function(b){b.relatedTarget&&(h.shouldDismissPopover(b.relatedTarget,"HA-POPOVER")&&a.close(),document.activeElement.removeEventListener("blur",e))};document.activeElement.addEventListener("blur",e)}else(d=f.getComponentFromElement(b,"HA-POPOVER"))&&(c=a.querySelector(d.targetSelector));return c}function l(a,b){return"HA-POPOVER"===b.tagName?a.querySelector(b.targetSelector):k(a,b)}function m(a,b){var c,d=b;return a.contains(d)?c=!0:(d=l(a,b),c=!!d&&a.contains(d)),c}function n(a,b){var c,d=a.querySelector(".connector");(c="_previousSibling"===b?a.previousElementSibling:""!==b?a.ownerDocument.querySelector(b):a.target)&&("BUTTON"!==c.tagName&&"A"!==c.tagName||c.classList.contains("no-connector")?d&&a.removeChild(d):d||(d=a.ownerDocument.createElement("div"),d.classList.add("connector"),a.insertBefore(d,a.firstChild)))}var o;return o=b.createObject(c,{init:function a(){a.super(this),this._horizontalAlign=["left","right"],this.setupProperties({targetSelector:{default:"_previousSibling",change:function(a){"_previousSibling"===a&&(this._target=this.previousElementSibling),n(this,a)}}})},get openOrOpening(){return this.open||this.classList.contains("enter")},set section(a){for(var b=this.querySelector(".connector");this.firstChildElement;)this.removeChild(this.firstChildElement);b&&this.appendChild(b),this.appendChild(a),this._section=a},get section(){return this._section},get target(){var a=this._target;return a||("_previousSibling"===this.targetSelector?(this._target=this.previousElementSibling,a=this._target):a=this.ownerDocument.querySelector(this.targetSelector)),a},set target(a){this._target=a,n(this,this.targetSelector)},set horizontalAlign(a){this._horizontalAlign=a},get horizontalAlign(){return this._horizontalAlign},postRender:function a(){a.super(this),this._noAutoFocusFirstTabbableElementOnShow=!1,this._noAutoFocusLastActiveElementOnClose=!1,this._closeOnBlur=!0,this.open=!1;var b=this.querySelector(".connector")?this.children[1]:this.children[0];b&&(this._section=b),this.tabIndex=-1,this.listenTo(this,"blur",function(a){this._closeOnBlur&&(a.currentTarget.contains(a.target)||f.stopEvent(a),this._handleCloseOnBlur(this,a.target))}.bind(this),!0),this.on("keydown",function(a){if(e.ESCAPE===a.keyCode){var b=f.getComponentFromElement(a.target,this.tagName);b&&b.close(),this.postHandleKeydown(b)}}.bind(this));var c=f.getAnimationEventNames();this.on(c.animationend,function(a){a.target===this&&j(a.animationName,a.target)}.bind(this))},_handleCloseOnBlur:function(a,b){var c,d=this;setTimeout(function(){c=a.ownerDocument.activeElement,m(a,c)||(a.close(),d.postHandleCloseOnBlur(a,b))},1)},postHandleCloseOnBlur:function(){},postHandleKeydown:function(){},attachedCallback:function(){n(this)},addContent:function(a){this.section=a,console.warn("DEPRECATION WARNING: addContent method should not be used anymore. Use section property instead.")},show:function(){var a,b=this.className.indexOf("position-")>-1,c=this;this.target&&!this.classList.contains("visible")&&(b||g.setPosition(this,this.target,null,this._horizontalAlign))&&(a=g.installResizeMethod(this,this.target,null,this._horizontalAlign),this.on("close",function b(d){c.off("close",b),d.target===this&&(g.uninstallResizeMethod(a),g.clearPosition(this))}),this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"),this.tabIndex=0)},close:function(a){a||null===this.parentElement?i(this):this.classList.add("leave")}}),a("ha-popover",o)}),define("hui/core/underlay",["./a11y","./position","./utils"],function(a,b,c){"use strict";var d,e=[];return{show:function(c){var f=document.body,g=f.querySelector(".ha-underlay");return g?e.push(g.style.zIndex):(g=document.createElement("div"),g.classList.add("ha-underlay"),g.tabIndex=-1,f.appendChild(g),d=function(){a.setFocusOnFirst(this)}.bind(c),g.addEventListener("focus",d)),b.bringToFront(g),this._hiddenAriaRemoveHandle=a.hideChildElementsFromAria(document.body,[c]),g},hide:function(){var a,b="webkitAnimationName"in document.documentElement.style?"webkitAnimationEnd":"animationend",f=document.body,g=f.querySelector(".ha-underlay");g&&!g.classList.contains("fade-out")&&(this._hiddenAriaRemoveHandle&&(this._hiddenAriaRemoveHandle.remove(),this._hiddenAriaRemoveHandle=null),e.length?g.style.zIndex=e.pop():(f.addEventListener(b,function e(){f.removeEventListener(b,e),g.removeEventListener("focus",d),d=null,(a=c.arrayOfChildrenFrom(f))&&-1!==a.indexOf(g)&&f.removeChild(g)}),g.classList.add("fade-out")))},setZIndex:function(a){var b=document.body.querySelector(".ha-underlay");b&&(b.style.zIndex=a)}}}),define("hui/modal",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/contentNode","./core/position","./core/underlay","./core/utils","./core/deviceUtils"],function(a,b,c,d,e,f,g,h,i,j){function k(a,b,c){var d=a.querySelector(".modal-title"),e=d.querySelector("#modal-title-"+a.componentId),f=a.querySelector(".modal-title i.hi");e&&d.removeChild(e),e="small"!==b||"error"!==c&&"alert"!==c&&"warn"!==c?a.ownerDocument.createElement("h2"):a.ownerDocument.createElement("h4"),e.id="modal-title-"+a.componentId,e.textContent=a.titleText,d.insertBefore(e,d.firstChild),f&&d.insertBefore(f,d.firstChild)}function l(a){var b,c,d={1:"one-btn",2:"two-btn",3:"three-btn"};i.isNode(a)&&(c=a.querySelectorAll("button").length,(b=d[c])&&a.classList.add(b))}function m(a){return a.classList.contains("mobile-menu")}function n(a){return m&&a.classList.contains("mobile-type-ahead-menu")}function o(a){return a.targetSelector.indexOf("ha-menu-button")>-1}function p(a){a._visible&&(document.body.classList.contains("body-lock")||document.body.classList.add("body-lock"),a.classList.remove("show"),setTimeout(function(){a.classList.add("show"),"landscape"===j.getOrientation()&&j.isIPhonePlus()&&setTimeout(function(){n(a)&&window.scrollTo(0,0),j.isIPhonePlusWithTabBar()&&o(a)&&document.body.classList.remove("body-lock")},380)},0))}function q(a){return a.stopPropagation(),!0}function r(a,b){var c=a;m(a)&&(c=a.section),b?c.addEventListener("touchmove",q):c.removeEventListener("touchmove",q)}var s,t=null;return b("ha-modal",a.createObject(c,{init:function a(){a.super(this),this._visible=!1,this._lockBody=!0,this._handleOrientation=null,this._message="",this._extrainfo=null,this.setupProperties({dismissible:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("header button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.add("hidden"),b.classList.remove("show"))}},reactLayering:{type:Boolean,default:!1},size:{default:"small",type:String,change:function(a){for(var b=this.querySelector(".modal-dialog"),c=["small","medium","large","fullscreen"],d=0;d<c.length;d++)b.classList.contains(c[d])&&b.classList.remove(c[d]);b.classList.add(a),k(this,a,this.type)}},type:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-dialog"),c=this.querySelector(".modal-title"),d=c.querySelector("i"),e=["confirm","info","error","warn","endflow","alert"],f=0;if(""!==a&&!this.reactLayering){for(;f<e.length;f++)b.classList.contains(e[f])&&b.classList.remove(e[f]),c.classList.contains("hi-"+e[f])&&c.classList.remove("hi-"+e[f]);switch("error"===a||"alert"===a||"warn"===a||"endflow"===a?(b.classList.add(a),"error"===a||"alert"===a||"warn"===a?("alert"===a&&console.warn('DEPRECATION WARNING: Type "alert" is deprecated, take care using this type for futures releases'),this.setAttribute("role","alertdialog"),b.classList.remove("message-icon"),c.classList.add("hi-"+a)):"endflow"===a&&(b.classList.add("message-icon"),c.classList.add("hi-confirm"))):(b.classList.add("message-icon"),c.classList.add("hi-"+a)),k(this,this.size,a),d||(d=this.ownerDocument.createElement("i"),c.firstElementChild?c.insertBefore(d,c.firstElementChild):c.appendChild(d)),d.className="hi",a){case"confirm":case"endflow":d.classList.add("hi-circle-check");break;case"info":d.classList.add("hi-circle-info");break;case"error":case"warn":case"alert":d.classList.add("hi-circle-alert")}}}},titleText:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-title h2")||this.querySelector(".modal-title h4");b&&(b.textContent=a)}},subtitle:{default:"",type:String,change:function(a){var b=this.querySelector(".modal-title h2")||this.querySelector(".modal-title h4");if(this.querySelector("header").classList[a?"add":"remove"]("modal-subtitle"),b){var c=document.createElement("div"),d=b.nextElementSibling;c.classList.add("modal-subtitle"),c.textContent=a,d&&d.classList.contains("modal-subtitle")&&d.parentElement.removeChild(d),b.parentElement.appendChild(c)}}}}),this.tabIndex="-1",this.setAttribute("role","dialog"),s=i.getAnimationEventNames().animationend,this.on("header button:click",function(){this.emit("dismiss"),this.close()}.bind(this))},set buttons(a){var b=this.querySelector("footer");i.removeAllChildrenFrom(b),i.replaceChildrenOf(b,a),l(b)},get buttons(){var a=this.querySelector("footer");return i.arrayOfChildrenFrom(a).filter(function(a){return a&&"BUTTON"===a.tagName})},set message(a){var b=this.querySelector("section");i.removeAllChildrenFrom(b),"string"==typeof a?b.textContent=a:i.replaceChildrenOf(b,a),this._message=a},get message(){return this._message},set section(a){this.message=a},get section(){return this.message},set extraInfo(a){var b=this.querySelector("aside");i.removeAllChildrenFrom(b),i.replaceChildrenOf(b,a),this._extrainfo=a},get extraInfo(){return this._extrainfo},postRender:function a(){var b,c,e,f,g=i.createElement,h=i.setAttributes,k="div.modal > div.modal-dialog > div.modal-content",m=i.contentQueryFactory(this,{main:k,section:k,aside:k,footer:k});a.super(this),d.addA11yFocus(this),c=m("main")||m("section")||g("section"),e=m("aside")||g("aside"),f=m("footer")||g("footer"),i.removeAllChildrenFrom(this),b=g("div",{className:"modal","attr-tabIndex":"-1","attr-aria-labelledby":"modal-title-"+this.componentId,"attr-aria-describedby":"modal-text-"+this.componentId},[g("div",{className:"modal-dialog"},[g("div",{className:"modal-content"},[g("header",{},[g("button",{type:"button",className:"btn btn-link hi hi-close medium pull-right","attr-aria-label":"Close"}),g("div",{className:"modal-title"})]),h(c,{id:"modal-text-"+this.componentId}),f,e])])]),this.appendChild(b),j.isHandheld()&&(this.classList.add("mobile-modal"),this.size||(this.size="small")),l(this.querySelector("footer"))},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')},show:function(){if(!this._visible){this.reactLayering||(h.show(this),g.bringToFront(this)),this._visible=!0,this._handleOrientation=p.bind(null,this),this.emit("will-show");var a=this.querySelector(".modal"),b=this.querySelector(".modal-title"),c=this.querySelector("section"),f=a.querySelector(".ha-button-primary")||b.querySelector("input, button, textarea, select")||c.querySelector("input, button, textarea, select"),k=this;this._lockBody&&j.isIOSDevice()&&(j.stopTouchMove(this.ownerDocument.querySelector(".ha-underlay"),!0),window.addEventListener("orientationchange",this._handleOrientation),n(this)&&!o(this)||j.isIPhonePlusWithTabBar()||j.bodyLock()),this.ownerDocument.body.classList.add("modal-open"),this.classList.remove("hidden"),this.classList.add("show"),this.classList.add("show-delay"),t=this.ownerDocument.activeElement,f?f.focus():d.setFocusOnAnyFirst(a),this.listenTo(a,s,function b(){k.stopListening(a,s,b),k.classList.add("from-bottom-slide-in"),k.classList.remove("show-delay"),k._lockBody&&j.isIOSDevice()&&(j.isIPhonePlusWithTabBar()||(n(k)&&!o(k)&&j.bodyLock(),r(k,!0)))}),this.on("keydown",function(b){b.keyCode===e.ESCAPE&&!0===this.dismissible&&(i.stopEvent(b),this.emit("dismiss"),k.close()),d.keepFocusInsideListener(b,a)}),this.emit("show")}},close:function(){if(this._visible){this._visible=!1;var a=this.querySelector(".modal"),b=this;this.classList.add("hidden"),this.classList.remove("from-bottom-slide-in"),this.off("keydown"),this.reactLayering||h.hide(),j.isIOSDevice()&&(window.removeEventListener("orientationchange",this._handleOrientation,!1),j.bodyUnlock()),this.emit("will-close"),this.listenTo(a,s,function c(){b.stopListening(a,s,c),b.classList.remove("show"),b.classList.remove("visible"),b.ownerDocument.body.classList.remove("modal-open"),b.emit("close"),b.emit("hide"),t&&!b._noAutoFocusLastActiveElementOnClose&&t.focus(),t=null,b._lockBody&&j.isIOSDevice()&&(j.isIPhonePlusWithTabBar()||r(b,!1))})}},hide:function(){console.warn("DEPRECATION WARNING: This method is deprecated, take care using this method for futures releases"),this.close()},addContent:function(a){var b={main:"message",section:"message",aside:"extraInfo",footer:"buttons"};f.addContent(this,a,b)},detachedCallback:function(){this.parentElement&&this.parentElement!==this.ownerDocument.body&&this.close()}}))}),define("hui/menu",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","./core/keys","./core/utils","./core/deviceUtils"],function(a,b,c,d,e,f){function g(a){var b=a._searchTerm.toLowerCase(),c=b.length,d=a.ownerDocument.activeElement,e=-1,f=0;for(d&&(e=a.items.indexOf(d)),-1!==e&&e!==a.items.length-1&&(f=e+1);f!==e;)a.items[f].label.toLowerCase().substr(0,c)!==b||a.items[f].disabled?f===a.items.length-1?f=0:++f:(a.items[f].focus(),e=f);a._timeOut=null,a._searchTerm=null}function h(a,b){var c=a.items;c.length&&(c.forEach(function(a){a.selected=!1,a.setAttribute("aria-selected",!1)}),a._selectedItem=b,a.selectedIndex!==c.indexOf(b)&&(a.selectedIndex=c.indexOf(b)),b.selected=!0,b.setAttribute("aria-selected",!0))}function i(a){return"separator"!==a.type&&!a.disabled}function j(a,b,c,d){for(var e=a.length;c>-1&&c<e;){if(c===d)return;if(i(a[c]))return void a[c].focus();"down"===b?c++:c--}}function k(a){return e.closest(a,"ha-menu-item")}function l(a,b){a&&(a.style.maxHeight=window.innerHeight-b+"px")}function m(a){"landscape"===f.getOrientation()&&f.isIPhonePlus()?l(a,a._bottomOffset+50):l(a,a._bottomOffset)}var n;return n=a.createObject(c,{init:function a(){a.super(this),this._selectedItem=null,this._items=null,this._bottomOffset=70,this._isHandheld=f.isHandheld(),this._handleOrientationChange=m.bind(null,this),this.setupProperties({sanitizeInputs:{default:!1,type:Boolean,change:function(a){this.setAttribute("sanitizeInputs",a),this.items&&this.items.forEach(function(b){b.sanitizeInputs=a})}},selectedIndex:{default:-1,type:Number,change:function(a){if(-1===a)this._selectedItem=null;else if(a>=0&&a<this.length){var b=this.items[a];this.selectedItem!==b&&(h(this,b),this.emit("select"))}else this._selectedIndex=-1}},size:{default:0,type:Number,change:function(a){this._isHandheld?(l(this,this._bottomOffset),this.style.overflowY="auto"):a?(this.style.maxHeight=32*a+"px",this.style.overflowY="auto"):(this.style.maxHeight="none",this.style.overflowY="hidden")}}}),this.tabIndex=-1,this.hasAttribute("role")||this.setAttribute("role","menu"),this.on("ha-menu-item:click",function(a){var b=k(a.target);b&&i(b)&&(h(this,b),this.emit("select",{detail:{selectedByClickOrKeyboard:!0}}))}.bind(this)),this._isHandheld&&this.on("ha-menu-item:touchstart",function(a){var b=e.getComponentFromElement(a.target,"HA-MENU-ITEM");!b&&a.target.classList.contains("menu-item-label")&&(b=e.getComponentFromElement(a.target.parentElement,"HA-MENU-ITEM")),b&&i(b)&&b.focus()}.bind(this)),this.on("keydown",function(a){var b,c=a.target,f=this.items;if(d.isLetter(a.keyCode)||d.isNumber(a.keyCode))return e.stopEvent(a),this._timeOut?clearTimeout(this._timeOut):this._searchTerm="",this._searchTerm+=String.fromCharCode(a.keyCode),void(this._timeOut=setTimeout(function(){g(this)}.bind(this),1e3));if("HA-MENU-ITEM"!==c.tagName&&(a.keyCode===d.UP||a.keyCode===d.DOWN||a.keyCode===d.END||a.keyCode===d.HOME))return e.stopEvent(a),void f[0].focus();switch(a.keyCode){case d.UP:e.stopEvent(a),b=0===f.indexOf(c)?f.length-1:f.indexOf(c)-1,j(f,"up",b);break;case d.DOWN:e.stopEvent(a),j(f,"down",(f.indexOf(c)+1)%f.length);break;case d.END:e.stopEvent(a),j(f,"up",f.length-1,f.indexOf(c));break;case d.HOME:e.stopEvent(a),j(f,"down",0,f.indexOf(c));break;case d.ENTER:case d.SPACEBAR:"HA-MENU-ITEM"===c.tagName&&i(c)&&(e.stopEvent(a),h(this,c),this.emit("select",{detail:{selectedByClickOrKeyboard:!0}}));break;default:return}}.bind(this),!0),this.on("ha-menu-item:mousemove",function(a){for(var b=a.target;b&&"HA-POPOVER"!==b.tagName;)b=b.parentElement;b&&b.classList.contains("leave")||a.target.focus()}.bind(this),!0)},set items(a){var b;for(this.tabIndex=-1;this.firstChild;)this.removeChild(this.firstChild);Array.isArray(a)&&(a.forEach(function(a){a.nodeType?b=a:(b=this.ownerDocument.createElement("ha-menu-item"),Object.keys(a).forEach(function(c){b[c]=a[c]})),b.sanitizeInputs=this.sanitizeInputs,b.setAttribute("aria-selected",!!b.selected),this.appendChild(b)},this),this.length=a.length),this._items=a},get items(){return this._items},get selected(){return console.warn("DEPRECATION WARNING: selected property is deprecated. Use selectedItem instead"),this._selectedItem},get selectedItem(){return this._selectedItem},set selected(a){},get length(){return this._items.length},set length(a){},preRender:function(){var a=this.querySelectorAll("ha-menu-item");this.items=e.removeNodesSafe(this,a)},postRender:function a(){a.super(this),this._isHandheld&&window.addEventListener("orientationchange",this._handleOrientationChange)},detachedCallback:function(){this._isHandheld&&window.removeEventListener("orientationchange",this._handleOrientationChange,!1)},add:function(a,b){b=void 0!==b?b:this.items.length,this.items.splice(b,0,a),this.items=this.items},remove:function(a){a>=0&&a<this.items.length&&(this.items.splice(a,1),this.items=this.items)}}),b("ha-menu",n)}),define("hui/menu-item",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/deviceUtils","./core/menuItemUtils"],function(a,b,c,d,e){function f(a){if(a)return a.replace(/<\/?[^>]+(>|$)/g,"")}return a("ha-menu-item",c.createObject(b,{init:function a(){a.super(this),this._label="",this.setupProperties({sanitizeInputs:{default:!1,type:Boolean,change:function(a){this.setAttribute("sanitizeInputs",a),this.label=this.label}},value:{default:""},disabled:{default:!1,type:Boolean,change:function(a){a?(this.classList.add("disabled"),this.setAttribute("disabled","disabled"),this.setAttribute("aria-disabled","true")):(this.classList.remove("disabled"),this.removeAttribute("disabled"),this.removeAttribute("aria-disabled"))}},selected:{default:!1,type:Boolean},type:{default:"default",change:function(a){"separator"===a?(this.classList.add("separator"),this.textContent=""):this.classList.remove("separator")}}})},set label(a){if("default"===this.type){var b;"string"==typeof a?(this.setAttribute("aria-label",f(a)),b=this.sanitizeInputs?f(a):a,this.setUpTextLabel(b)):a&&(this.sanitizeInputs?(b=f(a.textContent),this.setAttribute("aria-label",b),this.setAttribute("label",b),this.setUpTextLabel(b)):(this.removeAttribute("label"),this.removeAttribute("aria-label"),a.nodeType&&this.appendChild(a))),this._label=b||a}},get label(){return this._label},setUpTextLabel:function(a){this.setAttribute("label",a);var b;if(a){if(!(b=this.querySelector("span.menu-item-label"))){for(;this.firstChild;)this.removeChild(this.firstChild);b=e.createMenuItemLabelWrapper(this.ownerDocument),this.appendChild(b)}for(;b.firstChild;)b.removeChild(b.firstChild)}b&&(b.innerHTML=a)},postRender:function a(){a.super(this),this.tabIndex=-1,this.label=this.textContent,this.value=this.getAttribute("value")||this.label,this.setAttribute("role","button"),d.isHandheld()&&this.classList.add("mobile-menu-item")}}))}),define("hui/menu/menu-based-buttons",["object-utils/classes","../core/ResponsiveBase","../core/popup","../core/utils","../core/deviceUtils","../core/keys","../core/menuItemUtils","../core/domObserver","../popover","../modal","../menu","../menu-item","../item"],function(a,b,c,d,e,f,g,h){"use strict";function i(a,b,d){a&&(k(a)?c.setPosition(a,b,["bottom","top"],d):c.show(a,b,["bottom","top"],d))}function j(a){a&&("HA-MODAL"===a.nodeName?a.close():c.hide(a))}function k(a){return a&&("HA-POPOVER"===a.nodeName&&a.open||"HA-MODAL"===a.nodeName&&a.classList.contains("show"))}function l(a,b,c,d){c.setAttribute("aria-expanded","true"),c.classList.add("active"),a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0,i(a,b,d)}function m(a,b,c){k(a)&&(b.setAttribute("aria-expanded","false"),setTimeout(function(){j(a)},c||0))}return a.createObject(b,{init:function a(){a.super(this),this._popover=null,this._items=null,this._horizontalAlign=["left","right"],this.setupProperties({label:{default:"",type:String,change:function(a){var b=this.querySelector(".label"),c=this.dropdownElement.querySelector("ha-menu");b.innerHTML=a,c.setAttribute("aria-label",a)}},selectedIndex:{default:-1,type:Number,change:function(a){var b=this.dropdownElement.querySelector("ha-menu");Array.isArray(this.items)&&a>-1&&a<this.items.length?b.selectedIndex=this.selectedIndex:-1!==a&&(this.selectedIndex=-1)}},noFocusBackOnSelect:{default:!1,type:Boolean},horizontalAlign:{default:"left",type:String,change:function(a){var b="right"===a?["right","left"]:["left","right"];this._horizontalAlign=b,this._getPopover().horizontalAlign=b}}})},postRender:function a(){a.super(this),this._setupComponent()},_setupComponent:function(){var a=this.dropdownElement,b=this._getTriggerElement();e.isHandheld()&&this.classList.add("mobile-menu-based-button"),b?b.id=this._getTargetSelectorId():b=this._renderTriggerElement(),a&&a.parentNode&&a.parentNode.removeChild(a),this._initPopover(b),this.listenTo(b,"click",function(a){var c=this.dropdownElement;this.disabled||(a.stopPropagation(),b.focus(),k(c)?m(c,b):l(c,this,b,this._horizontalAlign))}.bind(this)),this.listenTo(b,"blur",function(a){var c=d.getSafeTargetFromEvent(a),e=this.dropdownElement;this.contains(c)||e.contains(c)||(m(e,b),this.emit("blur"))}.bind(this),!0),this.listenTo(b,"keydown",function(a){var c=this.dropdownElement,e=c.querySelector("ha-menu");if(!this.disabled)switch(a.keyCode){case f.SPACEBAR:case f.ENTER:d.stopEvent(a),k(c)||l(c,this,b,this._horizontalAlign);break;case f.DOWN:d.stopEvent(a),this._showWithAlignment(c,e,b,"position-bottom");break;case f.UP:d.stopEvent(a),this._showWithAlignment(c,e,b,"position-top")}}.bind(this),!0),this.on("keydown",function(a){var c=this.dropdownElement;this.disabled||a.keyCode!==f.TAB&&a.keyCode!==f.ESCAPE||k(c)&&(d.stopEvent(a),m(c,b),b.focus())}.bind(this)),this.listenTo(b,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0)},_initPopover:function(a){this._dropdownElement=null;var b,c=this.ownerDocument.createElement(this.modal?"ha-modal":"ha-popover");return c.classList.add("popover-menu-items"),c.horizontalAlign=this._horizontalAlign,c.targetSelector="#"+this._getTargetSelectorId(),b=this.ownerDocument.createElement("ha-menu"),c.section=b,this.label&&b.setAttribute("aria-label",this.label),this.appendChild(c),this.items=Array.prototype.slice.apply(this.querySelectorAll("ha-item")),e.isHandheld()&&(c.classList.add("mobile-menu"),c.classList.add("from-bottom"),this.modal&&c.on("click",function(a){a.target===this.querySelector(".modal")&&(c.emit("dismiss"),c.close())})),this.listenTo(c,"show",function(a){a.stopPropagation(),this.emit("items-show")}.bind(this)),this.listenTo(c,"close",function(b){b.stopPropagation(),this.emit("items-close"),this._focusOnNextClose&&(a.focus(),this._focusOnNextClose=!1),a.classList.remove("active")}.bind(this)),this.listenTo(c,"hide",function(a){a.stopPropagation()}),this.listenTo(b,"click",function(a){a.stopPropagation()}.bind(this)),this.listenTo(b,"select",function(b){this._handleSelect(b,a,c)}.bind(this)),this.listenTo(a,"blur",function(b){var e=d.getSafeTargetFromEvent(b);c.contains(e)||a.classList.remove("active")}.bind(this)),this.listenTo(c,"blur",function(b){var e=d.getSafeTargetFromEvent(b);this.contains(e)||c.contains(e)||(a.classList.remove("active"),m(c,a),this.emit("blur"))}.bind(this),!0),this.listenTo(c,"keydown",function(b){b.keyCode===f.TAB&&(a.focus(),d.stopEvent(b))}.bind(this)),c},_getPopover:function(){return this._dropdownElement?this._dropdownElement:(this._dropdownElement=this.querySelector(this.modal?"ha-modal":"ha-popover"),this._dropdownElement)},_handleSelect:function(a,b,c,d){a.stopPropagation(),d||(this.selectedIndex=a.target.selectedIndex),this.noFocusBackOnSelect?b.classList.remove("active"):this._focusOnNextClose=!0,m(c,b,e.isHandheld()?300:0),d||this.emit("select")},_showWithAlignment:function(a,b,c,d){if(k(a)){if(a.classList.contains(d)){var e,f;"position-top"===d?e=b.items.length-1:"position-bottom"===d&&(e=0),f=b.items&&b.items.length>0?b.items[e]:b,f.focus()}}else l(a,this,c,this._horizontalAlign)},attachedCallback:function(){this._itemHandle=h.bindChildrenChanges(this,"ha-item",this,"items")},detachedCallback:function(){var a=this.dropdownElement;a&&a.parentElement&&(a.parentElement.removeChild(a),j(a)),this._itemHandle&&(this._itemHandle.remove(),this._itemHandle=null)},set popover(a){console.warn('DEPRECATION WARNING: "popover" property is going to be deprecated, please from now on don\'t use it.');var b;this.popover&&this.popover!==a&&this.removeChild(this.popover),this._popover=a,a&&(b=this._getTargetSelectorId(),a.classList.add("popover-menu-items"),a.targetSelector="#"+b,a._noAutoFocusLastActiveElementOnClose=!0,a.parentNode!==this&&this.appendChild(a))},get popover(){return console.warn('DEPRECATION WARNING: "popover" property is going to be deprecated, please from now on don\'t use it.'),this._popover},set items(a){if(a){this._itemHandle&&this._itemHandle.pause();var b,c=this.dropdownElement.querySelector("ha-menu"),d=[];b=Array.prototype.slice.call(this.querySelectorAll("ha-item")),b.forEach(function(a){this.removeChild(a)}.bind(this)),Array.isArray(a)&&a.forEach(function(a){d.push(a),this.insertBefore(a,this._getFirstNonItemChild())},this),c&&(c.render?c.items=g.createMenuItems(d,{role:"menuitem"},this.itemRenderer||this.renderItem,this.ownerDocument):(c.innerHTML="",d.forEach(function(a){c.appendChild(a)}))),this._items=a,this._itemHandle&&this._itemHandle.resume()}},get items(){return this._items},set selectedItem(a){},get selectedItem(){return Array.isArray(this.items)&&this.selectedIndex>-1?this.items[this.selectedIndex]:null},get dropdownElement(){return this._getPopover()},_getTargetSelectorId:function(){return this.localName+"-target-"+this.componentId},_getFirstNonItemChild:function(){return Array.prototype.slice.call(this.children).filter(function(a){return"HA-ITEM"!==a.tagName})[0]},get modal(){return"HA-MENU-BUTTON"===this.tagName&&e.getScreenParameters().deviceType===e.deviceTypes.mobile}})}),define("hui/menu-button",["object-utils/classes","register-component/v2/register","./menu/menu-based-buttons","./core/deviceUtils","./item"],function(a,b,c,d){"use strict";var e,f=["ha-button-default","ha-button-primary","ha-button-dark"],g=Date.now()+"-menu-button-cancel-item-value";return e=a.createObject(c,{init:function a(){a.super(this),this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("button"),c=this.querySelector(".combo-button-action"),d=this.querySelector(".combo-button-dropdown");c&&d?a?(c.disabled=!0,d.disabled=!0):(c.disabled=!1,d.disabled=!1):b.disabled=a}},addMobileCancelOption:{default:!1,type:Boolean,change:function(a,b){d.getScreenParameters().deviceType===d.deviceTypes.mobile&&a!==b&&(a&&this.mobileCancelText?this._addCancelItem(this.mobileCancelText):this._removeCancelItem(!0))}},mobileCancelText:{default:"Cancel",type:String,change:function(a,b){d.getScreenParameters().deviceType===d.deviceTypes.mobile&&(a===b&&"Cancel"===a||(this.addMobileCancelOption=!0))}},icon:{default:"",type:String,change:function(a){var b=this._getTriggerElement(),c=b.querySelector(".icon-span"),d=b.querySelector(".label");c&&(a?(b.classList.add("with-icon"),c.className="icon-span hi large "+a,d&&d.classList.add("sr-only")):(b.classList.remove("with-icon"),c.classList.add("hidden"),d&&d.classList.remove("sr-only"))),this.showCaret=!this.showCaret,this.showCaret=!this.showCaret}},showCaret:{default:!1,type:Boolean,change:function(a){var b,c=this._getTriggerElement();c&&(b=c.querySelector(".caret")),!a&&b?b.parentElement.removeChild(b):a&&!b&&c&&(b=this.ownerDocument.createElement("span"),b.className="caret",c.appendChild(b))}},automationId:{default:"",type:String,change:function(a,b){if(a!==b){if(d.isDesktop){var c=this.querySelector("ha-menu-button ha-popover");c&&a?c.setAttribute("automationId",a+"_popover"):c&&!a&&c.removeAttribute("automationId")}if(d.isHandheld){var e=this.querySelector("ha-menu-button ha-modal");e&&a?e.setAttribute("automationId",a+"_modal"):e&&!a&&e.removeAttribute("automationId")}var f=this.querySelector("ha-combo-button ha-popover");f&&a?f.setAttribute("automationId",a+"_popover"):f&&!a&&f.removeAttribute("automationId")}}}})},_handleSelect:function a(b,c,d){a.super(this,b,c,d,b&&b.target&&b.target.selectedItem&&b.target.selectedItem.value===g)},_transferButtonClasses:function(){var a=this._getTriggerElement();f.forEach(function(b){this.classList.contains(b)&&(a.classList.add(b),this.classList.remove(b))},this)},_renderTriggerElement:function(){var a,b,c;return a=this.ownerDocument.createElement("button"),a.type="type",a.className="ha-button no-connector",a.id=this._getTargetSelectorId(),a.setAttribute("aria-expanded","false"),a.setAttribute("aria-haspopup","true"),b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),c=this.ownerDocument.createElement("span"),c.className="icon-span",a.appendChild(c),d.isDesktop()&&(this.showCaret=!0),this.appendChild(a),a},_removeCancelItem:function(a){this._hasCancelItem&&(this._items.splice(-1),this._hasCancelItem=!1,a&&(this.items=this._items))},_addCancelItem:function(a){this._items.some(function(a){return a.value===g||a.getAttribute("value")===g})&&(this._hasCancelItem=!0,this._removeCancelItem());var b=document.createElement("ha-item");b.value=g,b.textContent=a,this.items=this._items.concat(b),this._hasCancelItem=!0},_getTriggerElement:function(){return this.querySelector("button.ha-button.no-connector")},attachedCallback:function a(){a.super(this),this._transferButtonClasses(),console.warn("DEPRECATION WARNING: The ha-menu-button web component is deprecated. Try using the new React component to continue the journey to TSA.")}}),b("ha-menu-button",e)}),define("hui/combo-button",["object-utils/classes","register-component/v2/register","./menu-button","./core/utils"],function(a,b,c,d){"use strict";var e,f=["ha-button-default","ha-button-primary","ha-button-dark"];return e=a.createObject(c.prototype,{_transferButtonClasses:function a(){a.super(this);var b=this.querySelector(".combo-button-action"),c=this._getTriggerElement();b&&c&&f.forEach(function(a){c.classList.contains(a)&&b.classList.add(a)},this)},_renderTriggerElement:function(){var a,b,c,d;return a=this.ownerDocument.createElement("button"),a.type="button",a.className="ha-button combo-button-action no-connector",a.id=this._getTargetSelectorId(),b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),this.appendChild(a),c=this.ownerDocument.createElement("button"),c.type="button",c.className="ha-button combo-button-dropdown no-connector",c.setAttribute("aria-expanded","false"),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-label",this.label+" menu"),d=this.ownerDocument.createElement("span"),d.className="caret",c.appendChild(d),this.showCaret=!0,this.appendChild(c),c},_getTriggerElement:function(){return this.querySelector("button.ha-button.combo-button-dropdown")},_resize:function(a,b){if(b.isDesktop!==a.isDesktop){var c,d=this.querySelector("ha-modal")||this.querySelector("ha-popover");d&&d.parentNode.removeChild(d),c=b.isDesktop?[this.querySelector("button.ha-button.combo-button-dropdown"),this.querySelector("button.ha-button.combo-button-action")]:[this.querySelector("button.ha-button.no-connector")],c.forEach(function(a){f.forEach(function(b){a.classList.contains(b)&&this.classList.add(b)},this),a.parentNode.removeChild(a)},this),this._transferButtonClasses(),this._initBoundProperties()}},postRender:function a(){a.super(this);var b=this.querySelector(".combo-button-action");this.listenTo(b,"click",function(a){d.stopEvent(a),this.dropdownElement.close(),this.emit("click")}.bind(this))}}),b("ha-combo-button",e)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAComboButton",["exports","prop-types","react","./HAItem","hui/core/utils","hui/combo-button"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAItem"),require("hui/core/utils"),require("hui/combo-button"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAItem,a.utils,a.comboButton),a.HAComboButton=c.exports}}(this,function(a,b,c,d,e){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var j=f(b),k=f(c),l=f(d),m=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a){g(this,b);var c=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return p.call(c),c._huiComponent=null,c._listeners={},c}return i(b,a),n(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onClick&&!a.props.disabled&&a.props.onClick(b)};this._listeners.onClick=b.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick);var c=function(b){b.stopPropagation(),a.props.onItemsClose&&a.props.onItemsClose(b)};this._listeners.onItemsClose=c.bind(this),this._huiComponent.addEventListener("items-close",this._listeners.onItemsClose);var d=function(b){b.stopPropagation(),a.props.onItemsShow&&a.props.onItemsShow(b)};this._listeners.onItemsShow=d.bind(this),this._huiComponent.addEventListener("items-show",this._listeners.onItemsShow);var e=function(b){b.stopPropagation(),a.props.onSelect&&a.props.onSelect(b)};this._listeners.onSelect=e.bind(this),this._huiComponent.addEventListener("select",this._listeners.onSelect)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("click",this._listeners.onClick,!1),this._huiComponent.removeEventListener("items-close",this._listeners.onItemsClose,!1),this._huiComponent.removeEventListener("items-show",this._listeners.onItemsShow,!1),this._huiComponent.removeEventListener("select",this._listeners.onSelect,!1)}},{key:"render",value:function(){return k.default.createElement("ha-combo-button",m({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(k.default.Component);o.propTypes={children:function(a,b,c){var d=(0,e.checkReactChildrenType)(a[b],c,l.default,"HAItem");if(d)return d},className:j.default.string,label:j.default.string,disabled:j.default.bool,selectedIndex:j.default.number,selectedItem:j.default.object,items:j.default.array,onClick:j.default.func,onItemsClose:j.default.func,onItemsShow:j.default.func,onSelect:j.default.func};var p=function(){var a=this;this.handleRef=function(b){a._huiComponent=b}};a.default=o}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAComboButtonV2",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HAComboButtonV2=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.ComboButton}),define("hui/combo-link",["object-utils/classes","register-component/v2/register","./menu/menu-based-buttons","./core/utils"],function(a,b,c,d){"use strict";return b("ha-combo-link",a.createObject(c,{init:function a(){a.super(this),this.setupProperties({automationId:{default:"",type:String,change:function(a,b){if(a!==b){var c=this.querySelector("ha-combo-link ha-popover");c&&a?c.setAttribute("automationId",a+"_popover"):c&&!a&&c.removeAttribute("automationId")}}}})},_renderTriggerElement:function(){var a,b,c,d,e;return a=this.ownerDocument.createElement("button"),a.type="button",a.className="btn btn-link no-connector",a.id=this._getTargetSelectorId(),b=this.ownerDocument.createElement("span"),b.className="label",a.appendChild(b),c=this.ownerDocument.createElement("button"),c.type="button",c.className="btn hi-icon-button btn-link no-connector",c.setAttribute("aria-expanded","false"),c.setAttribute("aria-haspopup","true"),c.setAttribute("aria-label",this.label+" menu"),d=this.ownerDocument.createElement("span"),d.className="caret",c.appendChild(d),e=this.ownerDocument.createElement("div"),e.className="btn-group",e.appendChild(a),e.appendChild(c),this.appendChild(e),c},_getTriggerElement:function(){return this.querySelector("button.hi-icon-button")},postRender:function a(){a.super(this);var b,c;(c=this.querySelector(".btn-group > button"))&&(this.listenTo(c,"click",function(a){d.stopEvent(a),this.emit("click")}.bind(this)),b=c.querySelector("span.label"),this.listenTo(b,"click",function(a){d.stopEvent(a);var b=this.dropdownElement;b.open&&b.close(),this.emit("click")}.bind(this)))}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAComboLink",["exports","prop-types","react","./HAItem","hui/core/utils","hui/combo-link"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAItem"),require("hui/core/utils"),require("hui/combo-link"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAItem,a.utils,a.comboLink),a.HAComboLink=c.exports}}(this,function(a,b,c,d,e){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var j=f(b),k=f(c),l=f(d),m=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=function(a){function b(a){g(this,b);var c=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return p.call(c),c._huiComponent=null,c._listeners={},c}return i(b,a),n(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=b.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick);var c=function(b){b.stopPropagation(),a.props.onItemsClose&&a.props.onItemsClose(b)};this._listeners.onItemsClose=c.bind(this),this._huiComponent.addEventListener("items-close",this._listeners.onItemsClose);var d=function(b){b.stopPropagation(),a.props.onItemsShow&&a.props.onItemsShow(b)};this._listeners.onItemsShow=d.bind(this),this._huiComponent.addEventListener("items-show",this._listeners.onItemsShow);var e=function(b){b.stopPropagation(),a.props.onSelect&&a.props.onSelect(b)};this._listeners.onSelect=e.bind(this),this._huiComponent.addEventListener("select",this._listeners.onSelect),this.updateWebComponent()}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("click",this._listeners.onClick,!1),this._huiComponent.removeEventListener("items-close",this._listeners.onItemsClose,!1),this._huiComponent.removeEventListener("items-show",this._listeners.onItemsShow,!1),this._huiComponent.removeEventListener("select",this._listeners.onSelect,!1)}},{key:"updateWebComponent",value:function(){var a=this._huiComponent.querySelectorAll("ha-item");a&&(this._huiComponent.items=Array.prototype.slice.call(a))}},{key:"render",value:function(){return k.default.createElement("ha-combo-link",m({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(k.default.Component);o.propTypes={children:function(a,b,c){var d=(0,e.checkReactChildrenType)(a[b],c,l.default,"HAItem");if(d)return d},className:j.default.string,label:j.default.string,disabled:j.default.bool,selectedIndex:j.default.number,selectedItem:j.default.object,items:j.default.array,onClick:j.default.func,onItemsClose:j.default.func,onItemsShow:j.default.func,onSelect:j.default.func};var p=function(){var a=this;this.handleRef=function(b){a._huiComponent=b}};a.default=o}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAComboLinkV2",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HAComboLinkV2=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.ComboLink}),define("hui/core/icon",{onChangeIconProperty:function(a){if(this._textField)return this._textField.icon=a,void(a||this.removeAttribute("icon"));var b=this.querySelector("i");if(a){if(!b)switch(b=this.ownerDocument.createElement("i"),this.tagName.toLowerCase()){case"ha-select":this.querySelector("button").appendChild(b);break;case"ha-text-field":this.insertBefore(b,this.querySelector("input"));break;default:throw new Error("Embedded icon not implemented for "+this.tagName)}b.className="hi embedded "+a}else b&&b.parentNode.removeChild(b),this.removeAttribute("icon")}}),define("hui/text-field",["register-component/v2/register","./validatable/validatable","./core/icon","./core/utils","./core/deviceUtils","./core/keys","object-utils/classes"],function(a,b,c,d,e,f,g){function h(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("label");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function i(a){return a.required||!!a.max||!!a.min||!!a.pattern||!!a.minLength||!!a.validator}function j(a,b){a!==b&&this.handleTooltipBinding(i(this))}function k(a){var b=a.querySelector("input");a._validationListenersAdded||(a._boundValidator=a._reportValidity.bind(a),a.listenTo(b,"mouseenter",a._boundValidator),a.listenTo(b,"mouseout",a._boundValidator),a.listenTo(b,"focus",a._boundValidator),a.listenTo(b,"blur",a._boundValidator),a.listenTo(b,"keyup",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseover",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.add("ha-validatable"),a._validationListenersAdded=!0)}function l(a){var b=a.querySelector("input");!d.validationRequired(a)&&a._validationListenersAdded&&(a.stopListening(b,"mouseenter",a._boundValidator),a.stopListening(b,"mouseout",a._boundValidator),a.stopListening(b,"focus",a._boundValidator),a.stopListening(b,"blur",a._boundValidator),a.stopListening(b,"keyup",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseover",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.remove("ha-validatable"),a._validationListenersAdded=!1)}return a("ha-text-field",g.createObject(b,{init:function a(){a.super(this),this._validationListenersAdded=!1,this._windowResizeListenersAdded=!1,this._label=null,this.validationTarget=this,this.highlightElementSelector="input",this._customValidatorFunction=null,this.supportedClasses=["mobile-text-field","mobile-text-field-focused","mobile-text-field-attachment-focused","mobile-text-field-show-placeholder","mobile-text-field-content","disabled","ha-validatable"],this.setupProperties({optional:{default:!1,type:Boolean,change:function(a){a&&(this.required=!1);var b,c=this.querySelector("label");c&&(b=c.querySelector("span.optional"),a?b||(b=this.ownerDocument.createElement("span"),b.className="optional",c.appendChild(b),b.innerHTML=" "+this.labelOptional):b&&c.removeChild(b))}},labelOptional:{default:"optional",change:function(a){var b=this.querySelector(".optional");this.optional&&b&&(b.innerHTML=" "+a)}},name:{default:"",change:function(a){var b=this.querySelector("input"),c=this.querySelector('input[type="file"]');a?c?(c.name=a,b.removeAttribute("name")):b.name=a:(b.removeAttribute("name"),c&&c.removeAttribute("name"))}},autoComplete:{default:"on",change:function(a){this.querySelector("input").autocomplete=a}},size:{default:20,type:Number,change:function(a){this.querySelector("input").size=a}},placeholder:{default:"",change:function(a){var b=this.querySelector("input");b.placeholder=a,this.label||this.ariaLabel||b.setAttribute("aria-label",a),a||(b.hasAttribute("aria-label")&&b.removeAttribute("aria-label"),b.hasAttribute("placeholder")&&b.removeAttribute("placeholder"))}},icon:{default:"",type:String,change:c.onChangeIconProperty},disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("input").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&h(this)}},required:{default:!1,type:Boolean,change:function(a,b){var c=this.querySelector("input");a&&(this.optional=!1),a!==b&&(h(this),a?k(this,c):l(this,c),this.handleTooltipBinding(i(this)),c.required=a,c.setAttribute("aria-required",a))}},maxLength:{default:524288,type:Number,change:function(a){this.querySelector("input").maxLength=a}},minLength:{default:0,type:Number,change:function(a){var b=this.querySelector("input");a?(b.minLength=a,b.setAttribute("minLength",a),k(this,b)):(b.removeAttribute("minLength"),b.minLength=0,l(this,b))}},pattern:{default:"",change:function(a){var b=this.querySelector("input");a?(b.pattern=a,k(this,b)):(b.removeAttribute("pattern"),l(this,b))}},min:{change:this._onChangeMin},max:{change:this._onChangeMax},mobileMaxHeight:{type:Number,default:34,change:function(a){e.isHandheld()&&(this.classList.contains("mobile-text-field-focused")?this._inputElement.style.height=a+"px":(this.value&&(this._previousHeight=Math.min(this.mobileMaxHeight,this._getDefaultHeight(this.value)+15)+"px"),this._inputElement.style.height=this._previousHeight||""))}},attachment:{type:Boolean,change:function(a){a?this._setUpAttachmentField():this._removeAttachmentField()}},type:{type:String,default:"text",change:function(a){var b=this.querySelector("input");this.attachment||b.setAttribute("type",a||"text")}},ariaLabel:{default:"",change:function(a){var b=this.querySelector("input");b&&(a?b.setAttribute("aria-label",a):b.placeholder||b.removeAttribute("aria-label"))}}}),this._validationData={}},postRender:function a(){a.super(this);var b,c,d=this.querySelector("input"),g=this.querySelector("ha-label");d||(d=this.ownerDocument.createElement("input"),d.className="ha-input",this.appendChild(d)),e.isHandheld()&&(this.classList.add("mobile-text-field"),e.addiOS9ImmediateFocus(),this.listenTo(d,"focus",function(){this.classList.add("mobile-text-field-focused"),d.style.height=this.mobileMaxHeight+"px"}.bind(this)),this.listenTo(d,"blur",function(){this.classList.remove("mobile-text-field-focused"),d.style.height=this._previousHeight||""}.bind(this))),d.id="ha-text-field-"+this.componentId,this.highlightElement=d,b=this.getAttribute("value"),b&&(this.value=b,e.isHandheld()&&this.classList.add("mobile-text-field-content")),c=this.getAttribute("label"),g?this.label=Array.prototype.slice.call(g.childNodes):c&&(this.label=c),this.listenTo(d,"input",function(a){a.stopPropagation(),this.value=a.target.value,this.emit("input")}.bind(this)),this.listenTo(d,"change",function(a){a.stopPropagation(),this.value&&e.isHandheld()?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content"),this.emit("change")}.bind(this)),this.listenTo(d,"blur",function(){this.emit("blur")}.bind(this)),this.listenTo(d,"focus",function(){this.emit("focus")}.bind(this)),this.listenTo(d,"invalid",function(a){a.preventDefault()}),this.listenTo(d,"click",function(a){var b=this.querySelector('input[type="file"]');b&&(a.preventDefault(),a.stopPropagation(),b.click())}.bind(this)),this.listenTo(this,'input[type="file"]:change',function(a){var b,c,f=a.target.value;f&&(b=f.indexOf("\\")>=0?f.lastIndexOf("\\"):f.lastIndexOf("/"),c=f.substring(b),0!==c.indexOf("\\")&&0!==c.indexOf("/")||(c=c.substring(1)),d.value=c,e.isHandheld()&&this.classList.add("mobile-text-field-content"))}.bind(this)),this.listenTo(d,"keydown",function(a){if(this.attachment&&(a.preventDefault(),a.keyCode===f.BACKSPACE||a.keyCode===f.DELETE)){d.value="",this.classList.remove("mobile-text-field-content");var b,c,e=this.querySelector('input[type="file"]');e&&(b=e.cloneNode(!0),c=e.parentNode,c.removeChild(e),c.appendChild(b))}}.bind(this)),this._setUpMobileListeners(),this.listenTo(d,"blur",function(){this.classList.remove("mobile-text-field-focused"),this.classList.remove("mobile-text-field-attachment-focused"),this.classList.remove("mobile-text-field-show-placeholder")}.bind(this))},_onChangeMax:j,_onChangeMin:j,_reportValidity:function(a){var b=d.getComponentFromElement(a.target,this.tagName);b&&b.reportValidity(a)},startValidation:function(){k(this)},stopValidation:function(){l(this)},_setUpMobileListeners:function(){var a=this.querySelector("input");if(this.listenTo(a,"focus",function(){e.isHandheld()&&(this.attachment?this.classList.add("mobile-text-field-attachment-focused"):(this.classList.add("mobile-text-field-focused"),a.style.height="34px"))}.bind(this)),this.listenTo(a,"blur",function(){e.isHandheld()&&(this.attachment?this.classList.remove("mobile-text-field-attachment-focused"):(this.classList.remove("mobile-text-field-focused"),a.style.height=this._previousHeight||""),e.isAndroid()&&this._windowResizeListenersAdded&&e.removeScrollToViewAndroid(this))}.bind(this)),e.isHandheld()&&e.isAndroid()){var b,c;this.listenTo(a,"click",function(){b={width:window.innerWidth,height:window.innerHeight},c=d.closest(this,"ha-page-modal"),e.scrollToViewAndroid(this,b,c)}.bind(this))}},_removeAttachmentField:function(){var a,b=this.querySelector('input[type="file"]'),c=this.querySelector("input"),d=this.querySelector("label"),e=this.name;b&&("hi-attach"===this.icon&&(this.icon=""),a=b.parentNode,a.parentNode.removeChild(a)),c&&c.removeAttribute("aria-hidden"),d&&d.removeAttribute("aria-hidden"),this.name="",this.name=e},_setUpAttachmentField:function(){var a,b,c,d,e,f,g,h=this.name;a=this.querySelector('input[type="file"]'),a&&a.parentNode.parentNode.removeChild(a.parentNode),"hi-attach"!==this.icon&&(this.icon="hi-attach"),e=this.querySelector("input"),f=this.querySelector("label"),c=e.id+"-file-upload",g=this.querySelector(".hi-attach"),f&&f.setAttribute("aria-hidden","true"),e.setAttribute("aria-hidden","true"),g.setAttribute("aria-hidden","true"),a=document.createElement("input"),a.setAttribute("type","file"),a.setAttribute("id",c),d=document.createElement("div"),d.classList.add("ha-textfield-file-input-container"),d.classList.add("sr-only"),f&&(b=document.createElement("label"),b.innerHTML=f.innerHTML,b.setAttribute("for",c),d.appendChild(b)),d.appendChild(a),this.appendChild(d),this.name="",this.name=h},get value(){return this.querySelector("input").value},set value(a){var b=this.querySelector("input"),c=e.isHandheld();"number"==typeof a&&(a+="",a&&c?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content")),a!==this.value&&(this.querySelector("input").value=a),a?a!==this.getAttribute("value")&&this.setAttribute("value",a):(this.removeAttribute("value"),c&&(this.classList.remove("mobile-text-field-content"),this._previousHeight="",this.classList.contains("mobile-text-field-focused")||(b.style.height=""))),this._calculateMobileHeight(a)},_calculateMobileHeight:function(a){var b=this.querySelector("input");e.isHandheld()&&(a?(this.classList.add("mobile-text-field-content"),this._previousHeight=Math.min(this.mobileMaxHeight,this._getDefaultHeight(a)+15)+"px",this.classList.contains("mobile-text-field-focused")||(b.style.height=this._previousHeight)):(this._previousHeight="",this.classList.contains("mobile-text-field-focused")||(b.style.height="")))},get validator(){return this._customValidatorFunction},set validator(a){a&&a!==this.validator?(this._customValidatorFunction=a,this.startValidation()):a||(this._customValidatorFunction=null,this.stopValidation())},get _inputElement(){return this.querySelector("input")},set label(a){var b,c=this.querySelector("input"),d=this.querySelector("label"),e=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(e&&(this.removeChild(e),d=this.querySelector("label")),d||(d=this.ownerDocument.createElement("label"),this.insertBefore(d,c)),d.htmlFor=c.id,h(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),d&&!e?this.removeChild(d):e&&this.removeChild(e),d=this.ownerDocument.createElement("label"),e=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){d.appendChild(a)}),e.appendChild(d),this.insertBefore(e,this.firstElementChild),h(this)),this.ariaLabel||c.hasAttribute("aria-label")&&c.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),e=this.querySelector("ha-label"),e?this.removeChild(e):d&&this.removeChild(d),c.placeholder&&(this.ariaLabel||c.setAttribute("aria-label",c.placeholder))),this._label=a,this.attachment&&this._setUpAttachmentField()},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"value"===b?this.value!==d&&null!==d&&(this.value=d):"label"===b?(this.label=d,this.optional&&this.setAttribute("optional","true")):a.super(this,b,c,d)},focus:function(){this._inputElement.focus()},blur:function(){this._inputElement.blur()},_getDefaultHeight:function(a){var b,c,d=getComputedStyle(this._inputElement);return a=String(a||""),b=this.ownerDocument.createElement("div"),b.style.fontSize=d.fontSize,b.style.whiteSpace="pre-wrap",b.style.wordBreak="break-all",b.style.fontFamily=d.fontFamily,b.style.width=d.width,b.style.maxHeight=this.mobileMaxHeight+"px",b.style.position="absolute",b.style.top="-44px",b.style.left="-"+(parseInt(d.width,10)+10)+"px",b.textContent=a.endsWith("\n")?a+"_":a,this.ownerDocument.body.appendChild(b),c=b.offsetHeight,this.ownerDocument.body.removeChild(b),c}}))}),define("hui/core/timeUtils",[],function(){return{_isoRegex:/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/,parseISODateString:function(a){var b,c=this._isoRegex.exec(a),d=null,e=0;return c&&(c.shift(),c[1]&&c[1]--,d=new Date(c[0]||1970,c[1]||0,c[2]||1,c[3]||0,c[4]||0,c[5]||0),c[0]<100&&d.setFullYear(c[0]||1970),e=0,b=c[7]&&c[7].charAt(0),"Z"!==b&&(e=60*(c[8]||0)+(Number(c[9])||0),"-"!==b&&(e*=-1)),b&&(e-=d.getTimezoneOffset()),e&&d.setTime(d.getTime()+6e4*e)),d},pad:function(a,b){for(var c=String(a),d=b||2;c.length<d;)c="0"+c;return c},formatDateAsEsDateString:function(a){return a instanceof Date?a.getFullYear()+"-"+this.pad(a.getMonth()+1)+"-"+this.pad(a.getDate()):""},formatDateAsPattern:function(a,b){return b.replace(/([a-z])\1*/gi,function(b){var c,d,e=b.charAt(0),f=b.length;switch(e){case"y":switch(c=a.getFullYear(),f){case 1:break;case 2:c=String(c),c=c.substr(c.length-2),d=!0;break;default:d=!0}break;case"m":var g=a.getMonth();f<3&&(c=g+1,d=!0);break;case"d":c=a.getDate(),d=!0}return d&&(c=this.pad(c,f)),c}.bind(this))},compareDateWithoutDay:function(a,b){var c=new Date(a),d=new Date(b),e=c.setDate(1)-d.setDate(1);return 0===e?0:e>0?1:-1},parsePatternAsDate:function(a,b){if(!a)return new Date(b);var c=this.regExForPattern(a),d=c.matchPositions,e=c.regEx,f=b.match(e);if(f){var g=new Date,h=d.m&&parseInt(f[d.m])||g.getMonth()+1,i=d.d&&parseInt(f[d.d])||g.getDate(),j=d.y&&parseInt(f[d.y])||g.getFullYear();return new Date(j,h-1,i)}return new Date("")},regExForPattern:function(a){var b={},c=1;return{regEx:new RegExp(("^"+a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+"$").replace(/([a-z])\1*/gi,function(a){var d=a.charAt(0),e=a.length;switch(d){case"m":case"y":case"d":return b[d]=c++,"(\\d{"+e+"})"}return a})),matchPositions:b}}}}),define("text!hui/date-picker/calendar.html",[],function(){return'<template>\n    <div class="ha-calendar-main-div" role="presentation">\n        <div class="ha-calendar-navigation" role="presentation">\n            <div class="ha-calendar-previous-month hi hi-chevron-left" tabindex="0"\n                 aria-describedby="dates-navigation{{componentId}}" id="decrementMonth{{componentId}}" role="button"\n                 aria-label="Go to previous month">\n            </div>\n            <div class="ha-calendar-next-month hi hi-chevron-right" tabindex="0"\n                 aria-describedby="dates-navigation{{componentId}}" id="incrementMonth{{componentId}}" role="button"\n                 aria-label="Go to next month">\n            </div>\n            <div aria-live="assertive" class="ha-calendar-month-display" id="monthAndYearNode{{componentId}}"></div>\n        </div>\n        <table aria-labelledby="monthAndYearNode{{componentId}}" tabindex="0" cellspacing="0" cellpadding="0"\n               id="gridNode{{componentId}}">\n            <thead>\n            <tr id="dayCellsNode{{componentId}}">\n            </tr>\n            </thead>\n            <tbody id="dateRowsNode{{componentId}}">\n            </tbody>\n        </table>\n        <div class="ha-calendar-year-navigation">\n            <span class="ha-calendar-previous-year" role="button" tabindex="0" aria-label="Go to previous year"\n                    aria-describedby="dates-navigation{{componentId}}">\n            </span>\n            <span aria-live="assertive" class="ha-calendar-current-year">\n            </span>\n            <span class="ha-calendar-next-year" role="button" tabindex="0" aria-label="Go to next year"\n                    aria-describedby="dates-navigation{{componentId}}">\n            </span>\n        </div>\n        <span class="sr-only selectionAlertNode"></span>\n        <div class="sr-only" id="dates-navigation{{componentId}}">shift focus to input to change calendar dates</div>\n    </div>\n</template>\n'}),define("hui/date-picker/calendar",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","register-component/template!./calendar.html","../core/keys","../core/a11y","../core/timeUtils","../tooltip"],function(a,b,c,d,e,f,g){return a("ha-calendar",b.createObject(c,{init:function a(){a.super(this),this.template=d,this._currentDate=new Date(Date.now()),this._selection=[this._currentDate],this._month=this._currentDate.getMonth(),this._year=this._currentDate.getFullYear(),this._otherMonth="other-month",this._blackout="blackout-date",this._selected="selected-date",this._highlighted="highlighted-date",this._currentDateClass="current-date",this._notableDate="notable-date",this._monthLabels=["JANUARY","FEBRUARY","MARCH","APRIL","MAY","JUNE","JULY","AUGUST","SEPTEMBER","OCTOBER","NOVEMBER","DECEMBER"],this._monthAbbreviations=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],this._dayOfWeekLabels=["S","M","T","W","T","F","S"],this.setupProperties({maxDate:{default:"",type:String,change:function(){this.updateRendering()}},minDate:{default:"",type:String,change:function(){this.updateRendering()}},showYearNavigation:{default:!1,type:Boolean,change:function(a){a?this.querySelector(".ha-calendar-year-navigation").classList.remove("hidden"):this.querySelector(".ha-calendar-year-navigation").classList.add("hidden"),this.updateRendering()}},selectedDateRangeText:{default:"Selected {{start}} through {{end}}",type:String},selectedDateText:{default:"Selected date: {{date}}",type:String}})},postRender:function a(){a.super(this),this.querySelector("#gridNode"+this.componentId).focus(),this.updateRendering(),this.listenTo(this,".ha-calendar-next-month:click",function(){this.month=this.month+1,this.select(new Date(this._year,this._month))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-month:click",function(){this.month=this.month-1,this.select(new Date(this._year,this._month+1,0))}.bind(this),!0),this.listenTo(this,".ha-calendar-next-year:click",function(){this.year=this.year+1,this.select(new Date(this._year,this._month))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-year:click",function(){this.year=this.year-1,this.select(new Date(this._year,this._month+1,0))}.bind(this),!0),this.listenTo(this,"td:click",function(a){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this.isInOtherMonth(c)||(this.emit("change",{date:c}),this.select([c]))}.bind(this),!0),this.listenTo(this,"td:mouseover",function(a){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this.isInOtherMonth(c)||this.select([c])}.bind(this)),this.listenTo(this,"keydown",this.handleKeyDown.bind(this))},attachedCallback:function a(){a.super(this)},set blackoutDates(a){this._blackoutDates&&this._setClass(this._blackoutDates,this._blackout,!1),this._blackoutDates=a,this._setClass(this._blackoutDates,this._blackout,!0)},get blackoutDates(){return this._blackoutDates},set currentDate(a){this._currentDate&&this._setClass(this._currentDate,this._currentDateClass,!1),this._currentDate=a,this._setClass(this._currentDate,this._currentDateClass,!0)},get currentDate(){return this._currentDate},set highlightedDates(a){this._highlightedDates&&this._setClass(this._highlightedDates,this._highlighted,!1),this._highlightedDates=a,this._setClass(this._highlightedDates,this._highlighted,!0)},get highlightedDates(){return this._highlightedDates},set month(a){for(;a<0;)a+=12,this._year--;for(;a>=12;)a-=12,this._year++;this._month=a,this.updateRendering()},get month(){return this._month},set monthLabels(a){this._monthLabels=a,this.updateRendering()},get monthLabels(){return this._monthLabels},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this.updateRendering()},get dayOfWeekLabels(){return this._dayOfWeekLabels},set monthAbbreviations(a){this._monthAbbreviations=a,this.updateRendering()},get monthAbbreviations(){return this._monthAbbreviations},set notableDates(a){this._notableDates&&this._setClass(this._notableDates,this._notableDate,!1),this._notableDates=a,this._setClass(this._notableDates,this._notableDate,!0)},get notableDates(){return this._notableDates},set year(a){this._year=a,this.updateRendering()},get year(){return this._year},set tooltips(a){var b,c,d,e,f,g,h;this._tooltipNodes&&this._tooltipNodes.forEach(function(a){a&&(a.close(),a.parentNode&&a.parentNode.removeChild(a))}),this._tooltips=a,this._tooltipNodes=[];for(b in a)a.hasOwnProperty(b)&&(c=this._parseIfString(b))&&(d=this.ownerDocument.createElement("ha-tooltip"),this._tooltipNodes.push(d),e=this.ownerDocument.createElement("div"),e.classList.add("ha-calendar-tooltip-header"),e.textContent=this._monthAbbreviations[c.getMonth()]+" "+c.getDate(),f=this.ownerDocument.createElement("div"),f.classList.add("ha-calendar-tooltip-content"),f.textContent=a[b],d.trigger="hover",d.appendChild(e),d.appendChild(f),g="#"+this._getDateId(c),d.targetSelector=g,(h=this.querySelector(g))&&h.appendChild(d))},get tooltips(){return this._tooltips},deselect:function(a){if(this._selection){var b,c=this;if(Array.isArray(a))a.forEach(function(a){for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)});else for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)}this._setClass(a,this._selected,!1)},select:function(a,b,c){var d,e,f,h,i,j,k=this.ownerDocument.createElement("span"),l=this.querySelector(".selectionAlertNode"),m=this.maxDate?g.parseISODateString(this.maxDate):null,n=this.minDate?g.parseISODateString(this.minDate):null;if(Array.isArray(a)?(d=this._parseIfString(a[0]),f=this._parseIfString(a[a.length-1])):d=this._parseIfString(a),!(m&&(d>m||f&&f>m)||n&&d<n)){if(k.classList.add("sr-only"),k.classList.add("selectionAlertNode"),k.setAttribute("role","alert"),this._selection&&this._setClass(this._selection,this._selected,!1),Array.isArray(a))this._selection=a.slice(0);else{if(this.isInOtherMonth(a)&&!c)return void(this._selection=[]);this._selection=[a]}if(this._setClass(a,this._selected,!0),c&&(!d||d.getFullYear()===this._year&&d.getMonth()===this._month||(this._year=d.getFullYear(),this._month=d.getMonth(),this.updateRendering())),b){if(e=d?new Date(d.getFullYear(),d.getMonth(),d.getDate()):null,h=[],d&&f){for(j=f.valueOf();e.valueOf()<=j;)h.push(e),e=new Date(e.getFullYear(),e.getMonth(),e.getDate()+1);this.highlightedDates=h}d&&f&&(k.textContent=this.selectedDateRangeText.replace("{{start}}",d.toISOString().substring(0,10)).replace("{{end}}",f.toISOString().substring(0,10)),this.querySelector("#selectionAlertNode"+this.componentId),l.parentNode.replaceChild(k,l))}else d&&(k.textContent=this.selectedDateText.replace("{{date}}",d.toISOString().substring(0,10)),l.parentNode.replaceChild(k,l));d&&(i=this._getDateId(d),this.querySelector("#"+i)&&this.querySelector("#gridNode"+this.componentId).setAttribute("aria-activedescendant",i))}},_inVisiblePopover:function(){for(var a=this.parentNode;a;){if("HA-POPOVER"===a.tagName&&a.classList.contains("visible"))return!0;a=a.parentNode}return!1},_moveFocus:function(a){var b=!1,c=!1,d=f.getBoundariesTabableElement(this,!0,!0);"INPUT"===a.target.tagName?a.shiftKey||(a.preventDefault(),a.stopPropagation(),d.first.focus()):a.shiftKey?a.target===d.first&&(b=!0):a.target===d.last&&(c=!0),(b||c)&&this._owningInput&&(b?(a.preventDefault(),a.stopPropagation()):this.emit("ha-calendar-exiting"),this._owningInput.focus())},updateRendering:function(){for(var a,b,c=this.querySelector("#monthAndYearNode"+this.componentId),d=this.querySelector("#dateRowsNode"+this.componentId),e=this.querySelector("#dayCellsNode"+this.componentId),f=this.querySelector(".ha-calendar-previous-year"),g=this.querySelector(".ha-calendar-current-year"),h=this.querySelector(".ha-calendar-next-year");e.firstChild;)e.removeChild(e.firstChild);for(a=0;a<this._dayOfWeekLabels.length;a++)b=this.ownerDocument.createElement("th"),b.textContent=this._dayOfWeekLabels[a],e.appendChild(b);for(c.textContent=this._monthLabels[this._month]+(this.showYearNavigation?"":" "+this._year);d.firstChild;)d.removeChild(d.firstChild);d.appendChild(this._buildDateRows()),f.textContent=this.year-1,g.textContent=this.year,h.textContent=this.year+1,this._setClass(this._highlightedDates,this._highlighted,!0),this._setClass(this._blackoutDates,this._blackout,!0),this._setClass(this._selection,this._selected,!0),this._setClass(this._currentDate,this._currentDateClass,!0),this._setClass(this._notableDates,this._notableDate,!0),this.tooltips=this._tooltips},_buildDateRows:function(){var a,b,c,d,e,f=new Date(this._year,this._month),h=this.minDate?g.parseISODateString(this.minDate):null,i=this.maxDate?g.parseISODateString(this.maxDate):null,j=this.querySelector(".ha-calendar-next-month"),k=this.querySelector(".ha-calendar-previous-month"),l=this.ownerDocument.createDocumentFragment();for(this._otherMonthDays=[],0===f.getDay()?f.setDate(f.getDate()-7):f.setDate(f.getDate()-f.getDay()),a=0;a<6;a++){for(c=this.ownerDocument.createElement("tr"),b=0;b<7;b++)d=this.ownerDocument.createElement("td"),d.setAttribute("aria-selected","false"),e=this.ownerDocument.createElement("div"),f.getMonth()!==this._month&&(this._otherMonthDays.push(new Date(f.getFullYear(),f.getMonth(),f.getDate())),d.classList.add(this._otherMonth)),e.textContent=f.getDate(),d.appendChild(e),d.setAttribute("id",this._getDateId(f)),(i&&f>i||h&&f<h)&&(d.setAttribute("disabled","disabled"),d.classList.add(this._blackout)),c.appendChild(d),f.setDate(f.getDate()+1);l.appendChild(c)}return i&&g.compareDateWithoutDay(this._otherMonthDays[this._otherMonthDays.length-1],i)>0?(document.activeElement===j&&k.focus(),j.classList.add("hidden"),j.setAttribute("aria-hidden","true")):(j.classList.remove("hidden"),j.setAttribute("aria-hidden","false")),h&&g.compareDateWithoutDay(this._otherMonthDays[0],h)<0?(document.activeElement===k&&j.focus(),k.classList.add("hidden"),k.setAttribute("aria-hidden","true")):(k.classList.remove("hidden"),k.setAttribute("aria-hidden","false")),l},_getDateFromCell:function(a){var b=a.getAttribute("id").substring(2).split("component")[0],c=b.substring(0,2),d=b.substring(2,4),e=b.substring(4);return new Date(e,c,d)},_getDateId:function(a){var b=a.getDate(),c=a.getMonth();return b<10&&(b="0"+b),c<10&&(c="0"+c),"id"+c+b+a.getFullYear()+"component"+this.componentId},_getDateIds:function(a){var b,c=[],d=this;return Array.isArray(a)?a.forEach(function(a){(b=d._parseIfString(a))&&c.push(d._getDateId(b))}):(b=d._parseIfString(a))&&c.push(this._getDateId(b)),c},_getDateNodes:function(a){var b,c=[],d=this;return this._getDateIds(a).forEach(function(a){(b=d.querySelector("#"+a))&&c.push(b)}),c},_getSelectedDate:function(){return this._selection&&this._parseIfString(this._selection[0])||this._currentDate},isInOtherMonth:function(a){a=this._parseIfString(a);var b=!1;return this._otherMonthDays&&this._otherMonthDays.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b},_isBlackoutDate:function(a){var b=!1,c=this.minDate?g.parseISODateString(this.minDate):null,d=this.maxDate?g.parseISODateString(this.maxDate):null;return!!(d&&a>d||c&&a<c)||(this._blackoutDates&&this._blackoutDates.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b)},handleKeyDown:function(a){var b;a.keyCode===e.TAB?this._moveFocus(a):a.keyCode===e.ENTER||a.keyCode===e.SPACEBAR?(a.preventDefault(),a.target===this.querySelector(".ha-calendar-next-year")?(this.year=this.year+1,this.select(new Date(this._year,this._month))):a.target===this.querySelector(".ha-calendar-previous-year")?(this.year=this.year-1,this.select(new Date(this._year,this._month+1,0))):a.target===this.querySelector(".ha-calendar-next-month")?(this.month=this.month+1,this.select(new Date(this._year,this._month))):a.target===this.querySelector(".ha-calendar-previous-month")?(this.month=this.month-1,this.select(new Date(this._year,this._month+1,0))):this._selection&&this._selection[0]&&(b=this._getDateFromCell(this._getDateNodes(this._selection[0])[0]),this._isBlackoutDate(b)||this.isInOtherMonth(b)||this.emit("change",{date:b}))):a.keyCode===e.LEFT?(a.preventDefault(),b=this._getSelectedDate(),b?this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-1),!1,!0):this.select([new Date(this._year,this._month)])):a.keyCode===e.RIGHT?(a.preventDefault(),b=this._getSelectedDate(),b?this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+1)],!1,!0):this.select([new Date(this._year,this._month)])):a.keyCode===e.END||a.keyCode===e.H?(a.preventDefault(),this.select([new Date(this._year,this._month+1,0)])):a.keyCode===e.HOME||a.keyCode===e.M?(a.preventDefault(),this.select([new Date(this._year,this._month)])):a.keyCode===e.PAGEUP?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(-1):this._updateSelectionMonth(-1)):a.keyCode===e.PAGEDOWN?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(1):this._updateSelectionMonth(1)):a.keyCode===e.Y?(a.preventDefault(),this.select([new Date(this._year,0,1)],!1,!0)):a.keyCode===e.R?(a.preventDefault(),this.select([new Date(this._year+1,0,0)],!1,!0)):a.keyCode===e.W?(a.preventDefault(),(b=this._getSelectedDate())&&this.select([new Date(this._year,this._month,b.getDate()-b.getDay())],!1,!0)):a.keyCode===e.K?(a.preventDefault(),(b=this._getSelectedDate())&&this.select([new Date(this._year,this._month,b.getDate()+(6-b.getDay()))],!1,!0)):a.keyCode===e.T?(a.preventDefault(),this.select(this._currentDate,!1,!0)):a.keyCode===e.UP?(a.preventDefault(),(b=this._getSelectedDate())&&this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()-7)],!1,!0)):a.keyCode===e.DOWN&&(a.preventDefault(),(b=this._getSelectedDate())&&this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+7)],!1,!0))},_parseIfString:function(a){return"string"==typeof a?new Date(a):a&&a.getDate?a:null},_setClass:function(a,b,c){var d=this._selected===b||this._highlighted===b;this._getDateNodes(a).forEach(function(a){void 0!==c?c?(a.classList.add(b),d&&a.setAttribute("aria-selected","true")):a.classList.remove(b):a.classList.toggle(b)})},_updateSelectionYear:function(a){var b,c;this._selection&&(b=this._parseIfString(this._selection[0])||this._currentDate)?(c=new Date(b.getFullYear()+a,b.getMonth(),b.getDate()),c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()||(c=new Date(b.getFullYear()+a,b.getMonth()+1,0)),this.select([c],!1,!0)):this.select([new Date(this._year+a,this._month+1,0)],!1,!0)},_updateSelectionMonth:function(a){var b,c;this._selection&&(b=this._parseIfString(this._selection[0])||this._currentDate)?(c=new Date(b.getFullYear(),b.getMonth()+a,b.getDate()),c.getMonth()===b.getMonth()+(a+1)&&(c=new Date(b.getFullYear(),b.getMonth()+(a+1),0)),this.select([c],!1,!0)):this.select([new Date(this._year,this._month+a+1,0)],!1,!0)}}))}),define("hui/date-picker/double-calendar",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","../core/keys","./calendar"],function(a,b,c,d){return a("ha-double-calendar",b.createObject(c,{init:function a(){a.super(this),this._currentDate=new Date(Date.now()),this._selection=[this._currentDate],this._minMonth=this._currentDate.getMonth(),this._maxMonth=this._minMonth+1,this._year=this._currentDate.getFullYear(),this.setupProperties({})},postRender:function a(){if(a.super(this),!this.calendarOne){var b=this.ownerDocument.createElement("ha-calendar"),c=this.ownerDocument.createElement("ha-calendar");this.appendChild(b),this.appendChild(c)}this.updateRendering(),this.listenTo(this,".ha-calendar-next-month:click",function(a){a.stopPropagation(),this.show(this._year,this._maxMonth+1),this.select(new Date(this._year,this._maxMonth))}.bind(this),!0),this.listenTo(this,".ha-calendar-previous-month:click",function(a){a.stopPropagation(),this.show(this._year,this._minMonth-1),this.select(new Date(this._year,this._minMonth+1,0))}.bind(this),!0),this.listenTo(this,"td:click",function(a){a.stopPropagation();var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this._isOtherMonthCell(b,c)||(this.emit("change",{date:c}),this.select([c]),this._pauseForClick=!0,setTimeout(function(){this._pauseForClick=!1}.bind(this),500))}.bind(this),!0),this.listenTo(this,"td:mouseover",function(a){if(a.stopPropagation(),!this._pauseForClick){var b="TD"===a.target.nodeName?a.target:a.target.parentNode,c="TD"===b.nodeName?this._getDateFromCell(b):null;!c||this._isBlackoutDate(c)||this._isOtherMonthCell(b,c)||this.select([c])}}.bind(this)),this.listenTo(this,"keydown",this.handleKeyDown.bind(this))},attachedCallback:function a(){a.super(this),this.calendarOne.stopListening(),this.calendarOne.querySelector(".ha-calendar-next-month").classList.add("hidden"),this.calendarTwo.querySelector(".ha-calendar-previous-month").classList.add("hidden"),this.calendarTwo.stopListening()},set blackoutDates(a){this._blackoutDates=a,this.calendarOne.blackoutDates=a,this.calendarTwo.blackoutDates=a},get blackoutDates(){return this._blackoutDates},get calendarOne(){return this.querySelector("ha-calendar")},get calendarTwo(){return this.querySelectorAll("ha-calendar")[1]},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this.calendarOne.dayOfWeekLabels=a,this.calendarTwo.dayOfWeekLabels=a},get dayOfWeekLabels(){return this._dayOfWeekLabels||this.calendarOne.dayOfWeekLabels},set currentDate(a){this._currentDate=a,this.calendarOne.currentDate=a,this.calendarTwo.currentDate=a},get currentDate(){return this._currentDate},set highlightedDates(a){this._highlightedDates=a,this.calendarOne.highlightedDates=a,this.calendarTwo.highlightedDates=a},get highlightedDates(){return this._highlightedDates},get maxMonth(){return(this._maxMonth+12)%12},get minMonth(){return(this._minMonth+12)%12},set monthLabels(a){this._monthLabels=a,this.calendarOne.monthLabels=a,this.calendarTwo.monthLabels=a},get monthLabels(){return this._monthLabels||this.calendarOne.monthLabels},set monthAbbreviations(a){this._monthAbbreviations=a,this.calendarOne.monthAbbreviations=a,this.calendarTwo.monthAbbreviations=a},get monthAbbreviations(){return this._monthAbbreviations||this.calendarOne.monthAbbreviations},set notableDates(a){this._notableDates=a,this.calendarOne.notableDates=a,this.calendarTwo.notableDates=a},get notableDates(){return this._notableDates},set preselection(a){this._preselection=a,this._selection&&this.select(this._selection)},get preselection(){return this._preselection},set postselection(a){this._postselection=a,this._selection&&this.select(this._selection)},get postselection(){return this._postselection},show:function(a,b){for(;b<0;)b+=12,a--;for(;b>=12;)b-=12,a++;var c=new Date(this._year,this._maxMonth+1,0),d=new Date(this._year,this._minMonth),e=new Date(a,b);e.valueOf()>c.valueOf()?(this._maxMonth=b,this._minMonth=b-1,this._year=a,this.updateRendering()):e.valueOf()<d.valueOf()&&(this._minMonth=b,this._maxMonth=b+1,this._year=a,this.updateRendering())},set tooltips(a){this._tooltips=a,this.calendarOne.tooltips=this.calendarTwo.tooltips=a},get tooltips(){return this._tooltips},get year(){return this._year},deselect:function(a){if(this._selection){var b,c=this;if(Array.isArray(a))a.forEach(function(a){for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)});else for(;(b=c._selection.indexOf(a))>-1;)c._selection.splice(b,1)}this.calendarOne.deselect(a),this.calendarTwo.deselect(a)},select:function(a,b,c){var d,e;Array.isArray(a)?this._selection=a.slice(0):this._selection=[a],this._preselection?(e=this._selection.slice(0),e.unshift(this._preselection),b=!0):this._postselection&&(e=this._selection.slice(0),e.push(this._postselection),b=!0),c&&(d=this._parseIfString(this._getSelectedDate()))&&!isNaN(d.getFullYear())&&this.show(d.getFullYear(),d.getMonth()),this.calendarOne.select(e||this._selection,b),this.calendarTwo.select(e||this._selection,b)},updateRendering:function(){this.calendarOne._year=this.calendarTwo._year=this._year,this.calendarOne.month=this._minMonth,this.calendarTwo.month=this._maxMonth},_getDateFromCell:function(a){var b=a.getAttribute("id").substring(2).split("component")[0],c=b.substring(0,2),d=b.substring(2,4),e=b.substring(4);return new Date(e,c,d)},_getDateNodes:function(a){return this.calendarOne._getDateNodes(a).concat(this.calendarTwo._getDateNodes(a))},_getSelectedDate:function(){return this._selection&&(this._preselection?this._parseIfString(this._selection[this._selection.length-1]):this._parseIfString(this._selection[0]))||this._currentDate},_isBlackoutDate:function(a){var b=!1;return this._blackoutDates&&this._blackoutDates.forEach(function(c){c=this._parseIfString(c),c.getFullYear()===a.getFullYear()&&c.getMonth()===a.getMonth()&&c.getDate()===a.getDate()&&(b=!0)}.bind(this)),b},_inFirstCalendar:function(a){for(var b=this.calendarOne;a&&a!==this;){if(a===b)return!0;a=a.parentNode}return!1},_isOtherMonthCell:function(a,b){return b?this._inFirstCalendar(a)?this.calendarOne.isInOtherMonth(b):this.calendarTwo.isInOtherMonth(b):(b=a,this.calendarOne.isInOtherMonth(b)&&this.calendarTwo.isInOtherMonth(b))},handleKeyDown:function(a){var b;a.keyCode===d.TAB?this._moveFocus(a):a.keyCode===d.ENTER||a.keyCode===d.SPACEBAR?(a.preventDefault(),a.target===this.calendarTwo.querySelector(".ha-calendar-next-month")?(this.show(this._year,this._maxMonth+1),this.select(new Date(this._year,this._maxMonth))):a.target===this.calendarOne.querySelector(".ha-calendar-previous-month")?(this.show(this._year,this._minMonth-1),this.select(new Date(this._year,this._minMonth+1,0))):(b=this._getSelectedDate())&&(this._isBlackoutDate(b)||this._isOtherMonthCell(b)||this.emit("change",{date:b}))):a.keyCode===d.LEFT||a.keyCode===d.NUM_PAD_MINUS||a.keyCode===d.MINUS?(a.preventDefault(),b=this._getSelectedDate(),b?this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-1),!1,!0):this.select([new Date(this._year,this._minMonth)])):a.keyCode===d.RIGHT||a.keyCode===d.NUM_PAD_PLUS||a.keyCode===d.EQUALS&&a.shiftKey?(a.preventDefault(),b=this._getSelectedDate(),b?this.select([new Date(b.getFullYear(),b.getMonth(),b.getDate()+1)],!1,!0):this.select([new Date(this._year,this._minMonth)])):a.keyCode===d.END||a.keyCode===d.H?(a.preventDefault(),b=this._getSelectedDate(),b&&!isNaN(b.getMonth())?this.select(new Date(b.getFullYear(),b.getMonth()+1,0),!1,!0):this.select([new Date(this._year,this._maxMonth+1,0)])):a.keyCode===d.HOME||a.keyCode===d.M?(b=this._getSelectedDate(),b&&!isNaN(b.getMonth())?this.select(new Date(b.getFullYear(),b.getMonth()),!1,!0):this.select(new Date(this._year,this._minMonth)),a.preventDefault()):a.keyCode===d.PAGEUP?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(-1):this._updateSelectionMonth(-1)):a.keyCode===d.PAGEDOWN?(a.preventDefault(),a.ctrlKey?this._updateSelectionYear(1):this._updateSelectionMonth(1)):a.keyCode===d.Y?(a.preventDefault(),this.select(new Date(this._year,0,1),!1,!0)):a.keyCode===d.R?(a.preventDefault(),this.select(new Date(this._year+1,0,0),!1,!0)):a.keyCode===d.W?(a.preventDefault(),(b=this._getSelectedDate())&&this.select(new Date(this._year,b.getMonth(),b.getDate()-b.getDay()),!1,!0)):a.keyCode===d.K?(a.preventDefault(),(b=this._getSelectedDate())&&this.select(new Date(this._year,b.getMonth(),b.getDate()+(6-b.getDay())),!1,!0)):a.keyCode===d.T?(a.preventDefault(),this.select(this._currentDate,!1,!0)):a.keyCode===d.UP?(a.preventDefault(),(b=this._getSelectedDate())&&this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()-7),!1,!0)):a.keyCode===d.DOWN&&(a.preventDefault(),(b=this._getSelectedDate())&&this.select(new Date(b.getFullYear(),b.getMonth(),b.getDate()+7),!1,!0))},_moveFocus:function(a){var b=!1,c=!1;"INPUT"===a.target.tagName?a.shiftKey||(a.preventDefault(),a.stopPropagation(),this.calendarOne.querySelector(".ha-calendar-previous-month").focus()):a.shiftKey?a.target.classList.contains("ha-calendar-previous-month")&&(b=!0):a.target.classList.contains("ha-calendar-next-month")&&(c=!0),(b||c)&&this._owningInput&&(b?(a.preventDefault(),a.stopPropagation()):this.emit("ha-calendar-exiting"),this._owningInput.focus())},_parseIfString:function(a){return"string"==typeof a?new Date(a):a&&a.getDate?a:null},_updateSelectionYear:function(a){var b,c;(b=this._getSelectedDate())?(c=new Date(b.getFullYear()+a,b.getMonth(),b.getDate()),c.getMonth()===b.getMonth()&&c.getDate()===b.getDate()||(c=new Date(b.getFullYear()+a,b.getMonth()+1,0)),this.select([c],!1,!0)):this.select([new Date(this._year+a,a>0?this._maxMonth+1:this._minMonth+1,0)],!1,!0)},_updateSelectionMonth:function(a){var b,c;(b=this._getSelectedDate())?(c=new Date(b.getFullYear(),b.getMonth()+a,b.getDate()),c.getMonth()===b.getMonth()+(a+1)&&(c=new Date(b.getFullYear(),b.getMonth()+(a+1),0)),this.select([c],!1,!0)):this.select([new Date(this._year,a>0?this._maxMonth+a+1:this._minMonth+a+1,0)],!1,!0)}}))}),define("hui/date-picker",["register-component/v2/register","./text-field","object-utils/classes","./core/keys","./core/deviceUtils","./core/event","./core/utils","./core/timeUtils","./popover","./date-picker/calendar","./date-picker/double-calendar"],function(a,b,c,d,e,f,g,h){function i(a){return document.activeElement||a.relatedTarget||a.explicitOriginalTarget}var j=/\d{4}-\d{2}-\d{2}/,k=["dd/mm/yyyy","mm/dd/yyyy","yyyy/mm/dd","dd-mm-yyyy","mm-dd-yyyy","yyyy-mm-dd","dd.mm.yyyy","mm.dd.yyyy","yyyy.mm.dd"];return a("ha-date-picker",c.createObject(b.prototype,{init:function a(){a.super(this),this._validatorFunctions=[],this._isAndroidWebView=e.isAndroidWebView(),this._isMobileNotAndroidWebView=e.isHandheld()&&!this._isAndroidWebView,this._dateFormat="",this.setupProperties({maxDate:{default:"",type:String,change:function(a){var b=a?h.parseISODateString(a):null,c=this._getCalendar();b?(c&&(c.maxDate=h.formatDateAsEsDateString(b)),this.startValidation()):(c&&(c.maxDate=""),this.stopValidation())}},minDate:{default:"",type:String,change:function(a){var b=a?h.parseISODateString(a):null,c=this._getCalendar();b?(c&&(c.minDate=h.formatDateAsEsDateString(b)),this.startValidation()):(c&&(c.minDate=""),this.stopValidation())}},showYearNavigation:{default:!1,type:Boolean,change:function(a){if(this._isMobileNotAndroidWebView)return void(a&&console.warn("showYearNavigation API isn't supported on mobile devices"));this._getCalendar()&&(this._getCalendar().showYearNavigation=a)}},useDoubleCalendar:{default:!1,type:Boolean,change:function(a){if(e.isHandheld())return void(a&&console.warn("useDoubleCalendar API isn't supported on mobile devices"));var b=this._getCalendar();a?(this.classList.add("ha-double-calendar-date-picker"),b&&"HA-DOUBLE-CALENDAR"!==b.nodeName?(b.parentNode.removeChild(b),this._popoverElement.section=this.ownerDocument.createElement("ha-double-calendar")):b||(this._popoverElement.section=this.ownerDocument.createElement("ha-double-calendar"))):(this.classList.remove("ha-double-calendar-date-picker"),b&&"HA-CALENDAR"!==b.nodeName?(b.parentNode.removeChild(b),this._popoverElement.section=this.ownerDocument.createElement("ha-calendar")):b||(this._popoverElement.section=this.ownerDocument.createElement("ha-calendar"))),this._getCalendar()._owningInput=this.querySelector("input"),Array.prototype.forEach.call(this._getCalendar().querySelectorAll("[id*=gridNode]"),function(a){a.removeAttribute("tabindex")}),this._setupListeners()}},navigationAriaDescription:{default:"shift focus to input to change calendar dates",type:String,change:function(a){if(this._isMobileNotAndroidWebView)return void("shift focus to input to change calendar dates"!==a&&console.warn("navigationAriaDescription API isn't supported on mobile devices"));var b,c,d,e,f=this.querySelectorAll("ha-calendar");for(e=0;e<f.length;e++)b=f[e],c=b&&b.componentId,(d=c&&this.querySelector("#dates-navigation"+c))&&(d.textContent=a)}},dateFormat:{default:"",type:String,change:function(a,b){var c=this.value;if(a&&a!==b){var d=a.toLowerCase();if(k.some(function(a){return a===d})){var e=h.regExForPattern(d);this._dateFormat="",this.placeholder=a.toUpperCase(),this.dateFormatter=function(a){return h.formatDateAsPattern(a,d)},this.datePattern=e.regEx,this._dateFormat=d}else console.warn("Attempted to use a dateFormat that was not supported, "+d)}else this._dateFormat="";this.value!==c&&(this.value=c)}}})},postRender:function a(){a.super(this),this.stopListening(),e.isHandheld()&&this.classList.add("mobile-date-picker");var b=this._popoverElement,c=this._getCalendar(),d=this.getAttribute("pattern")||this.getAttribute("_pattern"),f=this.querySelector("input"),g=this.getAttribute("value"),h=this.getAttribute("placeholder"),i=this;this._isMobileNotAndroidWebView?this.type="date":(c&&c.parentNode.removeChild(c),b&&b.parentNode.removeChild(b),b=this.ownerDocument.createElement("ha-popover"),b.style.minWidth="auto",c=this.useDoubleCalendar?this.ownerDocument.createElement("ha-double-calendar"):this.ownerDocument.createElement("ha-calendar"),Array.prototype.forEach.call(c.querySelectorAll("[id*=gridNode]"),function(a){a.removeAttribute("tabindex")}),b.section=c,b.targetSelector="#"+f.id,b._closeOnBlur=!1,b._noAutoFocusFirstTabbableElementOnShow=!0,b._noAutoFocusLastActiveElementOnClose=!0,this.appendChild(b),this._popover=b),d?(this.datePattern=d,this.pattern="",this.removeAttribute("pattern"),this.setAttribute("_pattern",d)):this.datePattern=/^$|^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.]((?:19|20)\d\d)$/,this._rendered=!0,g&&(this.value=g),this.validator=function(){return i._validator.call(this,i)},this.placeholder=h||"MM/DD/YYYY",this._setupListeners()},detachedCallback:function(){var a=this._popoverElement;a&&a.parentElement&&a.parentElement.removeChild(a)},closeCalendar:function(){if(this._isMobileNotAndroidWebView)return void console.warn("closeCalendar API isn't supported on mobile devices");this._popoverElement.close()},select:function(a){if(!this._isMobileNotAndroidWebView){var b=this._getCalendar();return!!b&&(b.select(a),!0)}},preselect:function(a){if(this._isMobileNotAndroidWebView)return void console.warn("preselect API isn't supported on mobile devices");var b=this._getCalendar();return!!b&&(b.preselection=a,!0)},postselect:function(a){if(this._isMobileNotAndroidWebView)return void console.warn("postselect API isn't supported on mobile devices");var b=this._getCalendar();return!!b&&(b.postselection=a,!0)},showCalendar:function(){if(this._isMobileNotAndroidWebView)return void console.warn("showCalendar API isn't supported on mobile devices");this._popoverElement.show(),this._popoverElement.tabIndex=-1,this._popoverElement.lastFocus=null},showNextMonth:function(){if(this._isMobileNotAndroidWebView)return void console.warn("showNextMonth API isn't supported on mobile devices");"HA-CALENDAR"===this._getCalendar().nodeName?this._getCalendar().month+=1:this._getCalendar().show(this._getCalendar().year,this._getCalendar().maxMonth+1)},showPreviousMonth:function(){if(this._isMobileNotAndroidWebView)return void console.warn("showPreviousMonth API isn't supported on mobile devices");"HA-CALENDAR"===this._getCalendar().nodeName?this._getCalendar().month-=1:this._getCalendar().show(this._getCalendar().year,this._getCalendar().minMonth-1)},format:function(a,b){return b?b(a):(a.getMonth()>=9?a.getMonth()+1:"0"+(a.getMonth()+1))+"/"+(a.getDate()>=10?a.getDate():"0"+a.getDate())+"/"+a.getFullYear()},_getCalendar:function(){var a=this._popoverElement;return a&&(a.querySelector("ha-double-calendar")||a.querySelector("ha-calendar"))},get _popoverElement(){return this._popover||this.querySelector("ha-popover")},_getInput:function(){return this.querySelector("input")},_nativeDateInputFormat:function(a){var b=a.getMonth()+1,c=a.getDate();return a.getFullYear()+"-"+(b<10?"0"+b:b)+"-"+(c<10?"0"+c:c)},_setupListeners:function(){this._validationListenersAdded=!1,this.stopListening(),this._closeListener&&this._closeListener.remove();var a=this._popoverElement,b=this._getCalendar(),c=this.querySelector("input"),j=this,k=[c,a],l=e.isHandheld(),m=function(a){setTimeout(function(){var b=i(a),d=b,e=j._popoverElement,f=!1,g=b===c;if(!g)for(;d;){if(d===e){f=!0;break}d=d.parentNode}g||f||e.openOrOpening&&(j._dontRefocusInput=!0,j.closeCalendar())},100)};this._isMobileNotAndroidWebView?(this.listenTo(c,"change",function(a){var b=c.value;this.value=b,this.value&&l?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content"),this.reportValidity(),a.stopPropagation(),this.emit("change",{date:b})}.bind(this)),e.addiOS9ImmediateFocus(),this._setUpMobileListeners()):(k.forEach(function(a){this.listenTo(a,"blur",m,!0)},this),this.listenTo(c,"change",function(a){a.stopPropagation(),this._isAndroidWebView&&(this.value?this.classList.add("mobile-text-field-content"):this.classList.remove("mobile-text-field-content"))}.bind(this)),this.listenTo(b,"change",function(a){var b=a.date;this.value=b,this.closeCalendar(),this.reportValidity(),a.stopPropagation(),this.emit("change",{date:b})}.bind(this)),this.listenTo(b,"ha-calendar-exiting",function(){this._dontOpenCalendar=!0,this._dontRefocusInput=!0,a.close()}.bind(this)),this.listenTo(c,"focus",function(){if(this._dontOpenCalendar)return void(this._dontOpenCalendar=!1);this._isAndroidWebView&&this.classList.add("mobile-text-field-focused");var a=this._getInput().value,c=h.parsePatternAsDate(this._dateFormat,a);this.datePattern&&!this.datePattern.test(a)||isNaN(c.getFullYear())||this._popoverElement.classList.contains("visible")||b.select(c,!1,!0),this.showCalendar()}.bind(this)),this.listenTo(c,"input",function(a){var c=a.target.value,d=h.parsePatternAsDate(this._dateFormat,c);isNaN(d.getTime())||this.datePattern&&!c.match(this.datePattern)||(this.value=d.toISOString(0,10),b.select(d,!1,!0),this.emit("change",{date:d}))}.bind(this)),this.listenTo(c,"keydown",function(c){a.openOrOpening?b.handleKeyDown(c):c.keyCode===d.ENTER&&this.showCalendar(),d.isLetter(c.keyCode)&&c.preventDefault()}.bind(this)),this._isAndroidWebView&&(this.listenTo(c,"keyup",function(a){a.target.value=a.target.value.replace(/[a-zA-Z]+/g,"")}.bind(this)),this.listenTo(c,"blur",function(){this.classList.remove("mobile-text-field-focused")}.bind(this))),this._closeListener=f.on(a,"close",function(){if(this._dontRefocusInput)return void(this._dontRefocusInput=!1);var a=this.querySelector("input");a&&document.activeElement!==a&&(this._dontOpenCalendar=!0,a.focus())}.bind(this)),g.validationRequired(this)&&this.startValidation())},_validator:function(a){for(var b=!0,c=0;c<a._validatorFunctions.length&&(b=a._validatorFunctions[c].call(this));)c++;return b},set dateFormatter(a){if(this._dateFormat)return void console.warn("dateFormatter isn't available when using dateFormat");this._dateFormatter=a},get dateFormatter(){return this._dateFormatter},get monthAbbreviations(){return this._isMobileNotAndroidWebView?void console.warn("monthAbbreviations API isn't supported on mobile devices"):this._getCalendar().monthAbbreviations},set monthAbbreviations(a){if(this._isMobileNotAndroidWebView)return void console.warn("monthAbbreviations API isn't supported on mobile devices");this._getCalendar().monthAbbreviations=a},get monthLabels(){return this._isMobileNotAndroidWebView?void console.warn("monthLabels API isn't supported on mobile devices"):this._getCalendar().monthLabels},set monthLabels(a){if(this._isMobileNotAndroidWebView)return void console.warn("monthLabels API isn't supported on mobile devices");this._getCalendar().monthLabels=a},get dayOfWeekLabels(){return this._isMobileNotAndroidWebView?void console.warn("dayOfWeekLabels API isn't supported on mobile devices"):this._getCalendar().dayOfWeekLabels},set dayOfWeekLabels(a){if(this._isMobileNotAndroidWebView)return void console.warn("dayOfWeekLabels API isn't supported on mobile devices");this._getCalendar().dayOfWeekLabels=a},set blackoutDates(a){if(this._isMobileNotAndroidWebView)return void console.warn("blackoutDates API isn't supported on mobile devices");this._getCalendar().blackoutDates=a},get blackoutDates(){return this._isMobileNotAndroidWebView?void console.warn("blackoutDates API isn't supported on mobile devices"):this._getCalendar().blackoutDates},set highlightedDates(a){if(this._isMobileNotAndroidWebView)return void console.warn("highlightedDates API isn't supported on mobile devices");this._getCalendar().highlightedDates=a},get highlightedDates(){return this._isMobileNotAndroidWebView?void console.warn("highlightedDates API isn't supported on mobile devices"):this._getCalendar().highlightedDates},set notableDates(a){if(this._isMobileNotAndroidWebView)return void console.warn("notableDates API isn't supported on mobile devices");this._getCalendar()&&(this._getCalendar().notableDates=a)},get notableDates(){return this._isMobileNotAndroidWebView?void console.warn("notableDates API isn't supported on mobile devices"):this._getCalendar()?this._getCalendar().notableDates:void 0},set datePattern(a){if(this._isMobileNotAndroidWebView)return void console.warn("datePattern API isn't supported on mobile devices");if(this._dateFormat)return void console.warn("datePattern isn't available when using dateFormat");var b=this;this._formatValidator&&this._validatorFunctions.splice(this._validatorFunctions.indexOf(this._formatValidator),1),this._pattern=a&&"string"==typeof a?new RegExp(a):a,a?(this._formatValidator=function(){var a=b._pattern.test(b._getInput().value);return a||(this.errorMessage="Invalid date"),a},this._validatorFunctions.push(this._formatValidator),this.startValidation()):this.stopValidation()},get datePattern(){return this._pattern},set tooltips(a){if(this._isMobileNotAndroidWebView)return void console.warn("tooltips API isn't supported on mobile devices");this._getCalendar()&&(this._getCalendar().tooltips=a)},get tooltips(){return this._isMobileNotAndroidWebView?void console.warn("tooltips API isn't supported on mobile devices"):this._getCalendar()?this._getCalendar().tooltips:void 0},set value(a){if(this._rendered){var b,c,d,e;if("string"==typeof a&&a?d=h.parseISODateString(a)||new Date(a):a&&(d=a),d){if(isNaN(d.getTime()))return void console.error("ha-date-picker passed invalid ISO Date string");b=this.format(d,this.dateFormatter),c=this._nativeDateInputFormat(d),this.select(d)}else b=c="";e=this._getInput(),this._isMobileNotAndroidWebView?j.test(c)&&c!==e.value&&(e.value=c):b!==e.value&&(e.value=b),this.getAttribute("value")!==c&&this.setAttribute("value",c),this._calculateMobileHeight(e.value)}},get value(){var a=this._getInput().value,b=this._isMobileNotAndroidWebView?a?h.parseISODateString(a):new Date(""):h.parsePatternAsDate(this._dateFormat,a);return isNaN(b.getTime())?a:this._nativeDateInputFormat(b)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HADatePicker",["exports","prop-types","react","hui/core/utils","hui/date-picker"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/core/utils"),require("hui/date-picker"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.utils,a.datePicker),a.HADatePicker=c.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=e(b),j=e(c),k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._listeners={},c._huiMethodsCalled={},c._huiComponent=null,c.state={classAttributes:null},c}return h(b,a),l(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onInput&&a.props.onInput(b),a._testValidity()};this._listeners.onInput=b.bind(this),this._huiComponent&&this._huiComponent.addEventListener("input",this._listeners.onInput);var c=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=c.bind(this),this._huiComponent&&this._huiComponent.addEventListener("change",this._listeners.onChange),this.updateDatePicker()}},{key:"updateDatePicker",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._huiComponent){if(this.props.className!==b.className&&this.updateElementClasses(),!b.onChange&&this.props.onChange||this.props.onChange!==b.onChange){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1);var c=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=c.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange)}if(this.props.validator&&(this._huiComponent.validator=this.props.validator),this._testValidity(),this._huiComponent.showCalendar)this.invokeHUIMethods();else{var d=function(b){b.stopPropagation(),a.invokeHUIMethods()};this._listeners.componentUpgraded=d.bind(this),this._huiComponent.addEventListener("component-upgraded",this._listeners.componentUpgraded)}}}},{key:"updateElementClasses",value:function(){var a=(0,d.updateClassWithProps)(this._huiComponent,this.props.className);a&&this.setState({classAttributes:a})}},{key:"componentDidUpdate",value:function(a){this.updateDatePicker(a)}},{key:"invokeHUIMethods",value:function(){this.props.showCalendar&&this._huiComponent.showCalendar(),this.props.closeCalendar&&this._huiComponent.closeCalendar(),this.props.format&&this._huiComponent.format(new Date(this.props.value),this.props.format),this.props.dateFormat&&(this._huiComponent.value=this.props.value),this.props.monthLabels&&(this._huiComponent.monthLabels=this.props.monthLabels),this.props.dayOfWeekLabels&&(this._huiComponent.dayOfWeekLabels=this.props.dayOfWeekLabels),this.props.showNextMonth&&(this._huiMethodsCalled.showNextMonth||(this._huiComponent.showNextMonth(),this._huiMethodsCalled.showNextMonth=!0)),this.props.showPreviousMonth&&(this._huiMethodsCalled.showPreviousMonth||(this._huiComponent.showPreviousMonth(),this._huiMethodsCalled.showPreviousMonth=!0)),this.props.preselect&&this._huiComponent.preselect(this.props.preselect),this.props.postselect&&this._huiComponent.postselect(this.props.postselect),this.props.alwaysRenderValidity&&this._huiComponent.reportValidity()}},{key:"_testValidity",value:function(){if(this.props.onValidityChange){var a=void 0;this._huiComponent.checkValidity&&(a=this._huiComponent.checkValidity()),this._lastValidity!==a&&(this._lastValidity=a,this.props.onValidityChange(a))}}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("input",this._listeners.onInput,!1),this._huiComponent.removeEventListener("component-upgraded",this._listeners.componentUpgraded,!1),this._huiMethodsCalled={},this._listeners={}}},{key:"render",value:function(){return j.default.createElement("ha-date-picker",k({ref:this.handleRef,class:this.state.classAttributes},this.props))}}]),b}(j.default.Component);m.propTypes={className:i.default.string,id:i.default.string,disabled:i.default.bool,label:i.default.string,labelOptional:i.default.string,monthLabels:i.default.array,monthAbbreviations:i.default.array,dayOfWeekLabels:i.default.array,showYearNavigation:i.default.bool,tooltips:i.default.object,blackoutDates:i.default.array,notableDates:i.default.array,useDoubleCalendar:i.default.bool,navigationAriaDescription:i.default.string,dateFormatter:i.default.func,dateFormat:i.default.string,datePattern:i.default.string,name:i.default.string,icon:i.default.string,maxLength:i.default.number,minLength:i.default.number,optional:i.default.bool,placeholder:i.default.string,pattern:i.default.string,size:i.default.number,value:i.default.string,autoComplete:i.default.string,required:i.default.bool,noRequiredIndicator:i.default.bool,min:i.default.number,max:i.default.number,requiredMessage:i.default.string,invalidMessage:i.default.string,validator:i.default.func,onValidityChange:i.default.func,alwaysRenderValidity:i.default.bool,onInput:i.default.func,onChange:i.default.func},a.default=m});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAPortal",["exports","prop-types","react","react-dom","hui/core/position"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("react-dom"),require("hui/core/position"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.reactDom,a.position),a.HAPortal=c.exports}}(this,function(a,b,c,d,e){"use strict";function f(a){return a&&a.__esModule?a:{default:a}}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function h(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function i(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var j=f(b),k=f(c),l=f(d),m=f(e),n=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),o=[],p=function(a){function b(a){g(this,b);var c=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.state={style:null},c.portal=document.createElement("div"),c.childZIndex=null,c}return i(b,a),n(b,[{key:"componentDidMount",value:function(){document.body.appendChild(this.portal),this.props.show&&this.show(this.props)}},{key:"componentWillReceiveProps",value:function(a){this.props.show!==a.show&&(a.show?this.show(a):this.close(a))}},{key:"componentWillUnmount",value:function(){this.childHasZindex()&&this.lowerUnderlay(),this.portal&&document.body.removeChild(this.portal),this.portal=null}},{key:"childHasZindex",value:function(){return!!this.portal&&Array.prototype.slice.call(this.portal.childNodes).some(function(a){return a.style&&a.style.zIndex})}},{key:"raiseUnderlay",value:function(a){var b=document.body.querySelector(".ha-underlay");b||(b=document.createElement("div"),b.classList.add("ha-underlay"),b.tabIndex=-1,document.body.appendChild(b)),b.style.zIndex=a,o.push(a)}},{key:"lowerUnderlay",value:function(){if(!this.props.nounderlay){var a=document.body.querySelector(".ha-underlay");o.pop()&&o.length?a&&(a.style.zIndex=o[o.length-1]):a&&document.body.removeChild(a)}}},{key:"show",value:function(a){this.childZIndex||(this.props.nounderlay||this.raiseUnderlay(m.default.getTopZindex()),this.childZIndex=m.default.getTopZindex());var b=Object.assign({},a.style,{zIndex:this.childZIndex});this.setState({style:b})}},{key:"close",value:function(a){var b=Object.assign({},a.style,{zIndex:this.childZIndex});this.setState({style:b}),this.lowerUnderlay(),this.childZIndex=null}},{key:"render",value:function(){var a=k.default.cloneElement(this.props.children,{style:this.state.style,nounderlay:this.props.nounderlay});return l.default.createPortal(a,this.portal)}}]),b}(k.default.PureComponent);p.propTypes={show:j.default.bool.isRequired,nounderlay:j.default.bool,children:j.default.element.isRequired},p.defaultProps={nounderlay:!1},a.default=p}),define("hui/drawer/DrawerBase",["../core/a11y","../core/keys","../core/utils","register-component/v2/UIComponent","object-utils/classes","../core/contentNode"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c=a.querySelector(".content h3");c&&(c.textContent=b)}function h(a,b){for(var c=a&&a.parentNode;c;){if(c===b)return!0;c=c.parentNode}return!1}return e.createObject(d,{init:function d(){d.super(this),this._lastFocus=null,this._open=!1,this.setupProperties({titleText:{default:"",change:function(a){g(this,a)}}}),this.on("keydown",function(d){b.ESCAPE===d.keyCode?(c.stopEvent(d),this.emit("dismiss"),"ha-drawer-large"===this.localName?this.noCloseOnDismiss||this.close():"ha-drawer-small"===this.localName&&this.close()):a.keepFocusInsideListener(d,this)}),this.listenTo(window,"resize",function(){this._open&&"INPUT"===this.ownerDocument.activeElement.tagName&&h(this.ownerDocument.activeElement,this)&&setTimeout(function(){this.ownerDocument.activeElement&&this.ownerDocument.activeElement.scrollIntoViewIfNeeded&&this.ownerDocument.activeElement.scrollIntoViewIfNeeded()}.bind(this),0)}.bind(this))},hide:function(){console.warn('DEPRECATION WARNING: The "hide" method is going to be deprecated. From now on, please use the "close" method instead.'),this.close()},postRender:function b(){b.super(this),a.addA11yFocus(this),this.tabIndex=-1,this.role="dialog"},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')},addContent:function(a){var b={section:"section",main:"section",footer:"footer"};f.addContent(this,a,b)},_focusFirst:function(){var b=this.querySelector(".content");a.setFocusOnFirst(b),b.scrollTop=0}})}),define("hui/drawer-large",["register-component/v2/register","./drawer/DrawerBase","./core/position","./core/underlay","object-utils/classes","./core/utils","./core/deviceUtils"],function(a,b,c,d,e,f,g){"use strict";var h,i=f.createElement,j=function(a){return a.querySelector("aside > footer > *")},k=function(a){return a.querySelector("aside > section > div.inner-content > *")},l=function(a){var b=a.querySelector("main");return b&&console.warn("DEPRECATION WARNING: <main> tags should not be used anymore to add content to <ha-drawer-large>. Please add content through a <section> tag."),b},m=function(a){return a.querySelector("section")},n=function(a){return a.querySelector("footer")},o=function(){var a=i("button",{className:"drawer-close first-focus"},[i("span",{className:"hi hi-close"})]);return a.setAttribute("aria-label","close"),a},p=function(){return i("header",{className:"header"},[o()])},q=function(a,b){var c=i("section",{className:"content"},[i("h3",{id:"drawer-large-title-"+b}),i("div",{className:"inner-content"},[a])]);return c.setAttribute("tabindex","-1"),c},r=function(a){var b=i("footer",{className:"footer"},[a]);return b.setAttribute("tabindex","-1"),b},s=function(a,b,c){var d=i("aside",{className:"drawer-panel"},[p(),q(a,b),r(c)]);return d.setAttribute("aria-labelledby","drawer-large-title-"+b),d.setAttribute("tabindex","-1"),d};return h=e.createObject(b,{init:function a(){a.super(this);var b=f.getAnimationEventNames();this.setupProperties({backdrop:{default:!1,type:Boolean},reactLayering:{type:Boolean,default:!1},overlay:{default:!1,type:Boolean,change:function(a,b){a!==b&&(this.backdrop=a,console.warn('DEPRECATION WARNING: The "overlay" property is going to be deprecated. From now on, please use the "backdrop" property instead.'))}},noCloseOnDismiss:{type:Boolean,default:!1}}),this.on("button.drawer-close:click",function(){this.emit("dismiss"),this.noCloseOnDismiss||this.close()}.bind(this)),this.on(b.animationend,function(a){a.stopPropagation(),"ha-drawer-slide-in"===a.animationName?this._focusFirst():"ha-drawer-slide-out"===a.animationName&&this.classList.remove("show")}.bind(this))},get footer(){return f.arrayOfChildrenFrom(j(this))},set footer(a){f.replaceChildrenOf(this.querySelector("aside > footer"),f.wrapIfNotWrapped("footer",a))},get section(){return f.arrayOfChildrenFrom(k(this))},set section(a){f.replaceChildrenOf(this.querySelector("aside > section > div.inner-content"),f.wrapIfNotWrapped("section",a))},get headerNode(){return this.querySelector("aside > header")},get footerNode(){return this.querySelector("aside > footer")},get sectionNode(){return this.querySelector("aside > section")},show:function(){this._open||(this._open=!0,this._lastFocus=this.ownerDocument.activeElement,this.classList.add("show"),this.classList.remove("slide-out"),this.classList.add("slide-in"),this.backdrop&&(this.reactLayering||d.show(this),this.ownerDocument.documentElement.style.overflow="hidden"),g.isHandheld()&&this.ownerDocument.body.classList.add("no-overscroll"),this.reactLayering||c.bringToFront(this),g.isIOSDevice()&&(this.backdrop&&(g.stopTouchMove(this.ownerDocument.querySelector(".ha-underlay"),!0),g.isTablet()&&this.ownerDocument.body.classList.add("body-lock")),this.headerNode&&g.stopTouchMove(this.headerNode,!0),this.footerNode&&g.stopTouchMove(this.footerNode,!0)),this.emit("show"))},close:function(){this._open&&(this._open=!1,this.classList.remove("slide-in"),this.classList.add("slide-out"),this.backdrop&&(this.reactLayering||d.hide(),setTimeout(function(){this.ownerDocument.documentElement.style.overflow=""}.bind(this),350)),g.isHandheld()&&this.ownerDocument.body.classList.remove("no-overscroll"),g.isIOSDevice()&&(this.backdrop&&g.isTablet()&&this.ownerDocument.body.classList.remove("body-lock"),this.headerNode&&g.stopTouchMove(this.headerNode,!1),this.footerNode&&g.stopTouchMove(this.footerNode,!1)),this._lastFocus&&this._lastFocus.focus(),this._lastFocus=null,this.emit("close"),this.emit("hide"))},postRender:function a(){a.super(this);var b=k(this)||l(this)||m(this),c=j(this)||n(this);f.removeAllChildrenFrom(this),this.appendChild(s(b,this.componentId,c))}}),a("ha-drawer-large",h)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HADrawerLarge",["exports","react","prop-types","./HAPortal","./HASection","./HAFooter","hui/core/utils","hui/drawer-large"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("prop-types"),require("./HAPortal"),require("./HASection"),require("./HAFooter"),require("hui/core/utils"),require("hui/drawer-large"));else{var c={exports:{}};b(c.exports,a.react,a.propTypes,a.HAPortal,a.HASection,a.HAFooter,a.utils,a.drawerLarge),a.HADrawerLarge=c.exports}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=h(b),m=h(c),n=h(d),o=h(e),p=h(f),q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(a){i(this,b);var c=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return t.call(c),c._drawerLarge=null,c._listeners={},c}return k(b,a),r(b,[{key:"componentDidMount",value:function(){var a=this;setTimeout(function(){a._drawerLarge&&(a.removeWebRenderComp(),a.setIDToChildDom(a._drawerLarge.componentId),a.mountDrawerLarge())})}},{key:"componentDidUpdate",value:function(a){this.mountDrawerLarge(a)}},{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"mountDrawerLarge",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._drawerLarge&&this.props.show!==b.show)if(this.props.show)if(this.setupListeners(),this._drawerLarge.show)this._drawerLarge.show();else{var c=function(b){b.stopPropagation(),a._drawerLarge.show()};this._listeners.componentUpgraded=c.bind(this),this._drawerLarge.addEventListener("component-upgraded",this._listeners.componentUpgraded)}else b.show&&this._drawerLarge.close()}},{key:"removeWebRenderComp",value:function(){var a=this._drawerLarge.querySelectorAll("aside");a&&a.length>1&&this._drawerLarge.removeChild(a[0])}},{key:"setIDToChildDom",value:function(a){var b=this._drawerLarge.querySelector("aside"),c=this._drawerLarge.querySelector("section h3");b&&a&&b.setAttribute("aria-labelledby","drawer-large-title-"+a),c&&a&&c.setAttribute("id","drawer-large-title-"+a)}},{key:"setupListeners",value:function(){var a=this;if(0===Object.keys(this._listeners).length){var b=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=b.bind(this),this._drawerLarge.addEventListener("show",this._listeners.onShow);var c=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b),a.cleanUpListeners()};this._listeners.onClose=c.bind(this),this._drawerLarge.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._drawerLarge.addEventListener("dismiss",this._listeners.onDismiss)}}},{key:"cleanUpListeners",value:function(){this._drawerLarge&&(this._drawerLarge.removeEventListener("show",this._listeners.onShow,!1),this._drawerLarge.removeEventListener("close",this._listeners.onClose,!1),this._drawerLarge.removeEventListener("dismiss",this._listeners.onDismiss,!1)),this._listeners={}}},{key:"render",value:function(){var a=this;return l.default.createElement(n.default,{show:this.props.show,nounderlay:!this.props.backdrop},l.default.createElement("ha-drawer-large",q({ref:this.handleRef,class:this.props.className,reactLayering:!0},this.props),l.default.createElement("aside",{className:"drawer-panel",tabIndex:"-1"},l.default.createElement("header",{className:"header"},l.default.createElement("button",{className:"drawer-close first-focus","aria-label":"close"},l.default.createElement("span",{className:"hi hi-close"}))),l.default.Children.map(this.props.children,function(b){return b.type===o.default?l.default.createElement("section",{key:"1",className:"content",tabIndex:"-1"},l.default.createElement("h3",null,a.props.titleText),l.default.createElement("div",{className:"inner-content"},b)):b.type===p.default?l.default.createElement("footer",{key:"2",className:"footer",tabIndex:"-1"},b):void 0}))))}}]),b}(l.default.Component);s.propTypes={children:function(a,b,c){var d=(0,g.checkReactChildrenType)(a[b],c,[o.default,p.default],"HASection,HAFooter");if(d)return d},className:m.default.string,show:m.default.bool.isRequired,titleText:m.default.string,backdrop:m.default.bool,onShow:m.default.func,onClose:m.default.func,noCloseOnDismiss:m.default.bool,onDismiss:m.default.func};var t=function(){var a=this;this.handleRef=function(b){a._drawerLarge=b}};a.default=s}),define("text!hui/step-flow/flow-confirmation.html",[],function(){return'<section>\n    <div class="confirm-check hi hi-circle-check"></div>\n    <h1 class="step-title" tabindex="-1">{{titleText}}</h1>\n    <h3 class="step-subtitle">{{subtitleText}}</h3>\n</section>\n'}),define("hui/step-flow/flow-confirmation",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./flow-confirmation.html","../core/utils","../core/contentNode"],function(a,b,c,d,e,f){"use strict";var g,h={section:"content"};return g=a.createObject(b,{init:function a(){var b=this;a.super(this),this.setupProperties({titleText:{},subtitleText:{}}),this.classList.contains("processed")||(f.cacheInputContent(this,h),this.template=function(){return d({titleText:b.titleText,subtitleText:b.subtitleText})})},set content(a){var b=a instanceof Array?a:[a];e.appendChildCollection(this._section,b)},get content(){return this._section},postRender:function a(){a.super(this),this._section=this.querySelector("section"),this.classList.contains("processed")||(f.storeCachedInput(this,h),this.classList.add("processed"))}}),c("ha-flow-confirmation",g)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFlowConfirmation",["exports","prop-types","react","hui/step-flow/flow-confirmation"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/step-flow/flow-confirmation"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.flowConfirmation),a.HAFlowConfirmation=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),k(b,[{key:"render",value:function(){return i.default.createElement("ha-flow-confirmation",j({class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,titleText:h.default.string,subtitleText:h.default.string},a.default=l}),define("hui/step-flow/flow-landing",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/utils","../core/contentNode"],function(a,b,c,d){"use strict";return c("ha-flow-landing",a.createObject(b,{set content(a){var b=a instanceof Array?a:[a];this._section=this.querySelector("section"),this._section||(this._section=this.ownerDocument.createElement("section"),this.appendChild(this._section)),d.appendChildCollection(this._section,b)},get content(){return this._section}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFlowLanding",["exports","prop-types","react","hui/step-flow/flow-landing"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/step-flow/flow-landing"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.flowLanding),a.HAFlowLanding=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),k(b,[{key:"render",value:function(){return i.default.createElement("ha-flow-landing",j({class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string},a.default=l}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HALabel",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HALabel=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Label}),define("text!hui/step-flow/flow-step.html",[],function(){return"<template>\n    <section></section>\n    <footer></footer>\n</template>"}),define("hui/step-flow/flow-step",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./flow-step.html","../core/utils","../core/contentNode"],function(a,b,c,d,e,f){"use strict";var g,h=function(a){return e.getComponentFromElement(a,"HA-STEP-FLOW")},i=function(a,b,c){var d=a.querySelector(b),f=[].concat(c),g=d&&d.children||[];e.removeNodesSafe(d,g),e.appendChildCollection(d,f)},j={section:"section",footer:"footer"};return g=a.createObject(b,{init:function a(){var b=this;a.super(this),this._hideOnTransition=!1,this._originalTop=null,this.classList.contains("landing")||this.classList.contains("confirmation")?this._noCacheContent=!0:(f.cacheInputContent(this,j),this.template=d,this.stepType="default"),this.setupProperties({stepId:{},showSaveForLaterButton:{type:Boolean},saveForLaterButtonText:{type:String,default:"Save and Finish Later"},nextButtonText:{},previousButtonText:{},hideStepButtons:{type:Boolean,change:function(a){this._setButtonsHidden(a)}},titleText:{type:String,default:"",change:function(a){var c=this._section,d=c.querySelector("section>h1.step-title");a?(d||(d=this.ownerDocument.createElement("h1"),d.setAttribute("tabindex","-1"),d.classList.add("step-title"),c.insertBefore(d,c.firstChild)),d.innerHTML=a,this._titleNode=d):d&&(e.removeNodesSafe(this.section,d),this._titleNode=null),this._progressIndicatorTextSet||this.emit("change-flow-step-progress-indicator-text",{step:b,progressIndicatorText:a})}},subtitleText:{type:String,default:"",change:function(a){var c=this._section,d=c.querySelector("section>h1.step-title"),f=c.querySelector("section>h3.step-subtitle");a?(f||(f=this.ownerDocument.createElement("h3"),f.classList.add("step-subtitle"),d?c.insertBefore(f,d.nextSibling):c.insertBefore(f,c.firstChild)),f.innerHTML=a,this._subtitleNode=f):f&&(e.removeNodesSafe(b,f),this._subtitleNode=f)}},progressIndicatorText:{type:String,default:this.getAttribute("titleText"),change:function(a){this._progressIndicatorTextSet=a&&a!==this.titleText,this.emit("change-flow-step-progress-indicator-text",{step:b,progressIndicatorText:a})}},stepComplete:{type:Boolean,change:function(a){this.emit("change-flow-step-complete",{step:b,stepComplete:a})}},stepAvailable:{type:Boolean,change:function(a){this.emit("change-flow-step-available",{step:b,stepAvailable:a})}},hideProgressIndicator:{type:Boolean},hideProgressIndicatorItem:{type:Boolean},useCustomButtons:{type:Boolean},navigationDirection:{type:String,default:this.getAttribute("navigationDirection")||"vertical",change:function(a){var b={horizontal:"vertical",vertical:"horizontal"},c=b[a];a&&c&&(this.classList.remove(c),this.classList.add(a))}}}),this._btnListener=function(a){var c=a.target,d=c.getAttribute("data-to-step-id");d?b.swipeToById(d,"down"!==c.getAttribute("data-to-step-direction")):c.classList.contains("next-btn")?(h(b).emit("next"),h(b).swipeToNext()):c.classList.contains("prev-btn")?(h(b).emit("previous"),h(b).swipeToPrevious()):c.classList.contains("done-btn")?(h(b).emit("done"),h(b).swipeToIndex(null)):c.classList.contains("save-for-later-btn")&&b.emit("saveForLater",{step:b})};var c=e.getAnimationEventNames().animationend;this.listenTo(this,c,function(a){"HA-FLOW-STEP"===a.target.tagName&&(this._hideOnTransition?(this._hideOnTransition=!1,h(b)._doneOutTransition(b)):(this._setFocus(),h(this)._setTransition(!1)))})},get stepType(){return this._stepType},set stepType(a){"landing"===a||"confirmation"===a?(this.hideProgressIndicatorItem=!0,this.hideProgressIndicator=!0,this.classList.remove("default"),this.classList.contains(a)||this.classList.add(a),this._stepType=a):(this._stepType="default",this.classList.remove("landing"),this.classList.remove("confirmation"),this.classList.add("default"))},set section(a){i(this,"section",a),this._addButtonListeners()},get section(){return this._section},set content(a){this._section.appendChild(a),this._content=a},get content(){return this._content},set footer(a){i(this,"footer",a),this._addButtonListeners()},get footer(){return this._footer},postRender:function a(){a.super(this),this._section=this.querySelector("section"),this._footer=this.querySelector("footer"),this._noCacheContent||f.storeCachedInput(this,j),this._addButtonListeners()},_setFocus:function(){var a=this.querySelector(".step-title");a&&a.focus()},_setButtonsHidden:function(a){var b,c,d=this.querySelectorAll(".step-flow-button");if(d)for(c=0;c<d.length;c++)b=d.item(c),a?b.classList.add("hide"):b.classList.remove("hide")},isLanding:function(){return"landing"===this.stepType},replaceSection:function(a){e.removeNodesSafe(this,[this._section]),this._section=a,this.insertBefore(a,this.firstChild)},validate:function(){return!this.validator||this.validator.call(this)},swipeToIndex:function(a){h(this).swipeToIndex(a)},swipeToById:function(a,b){h(this).swipeToById(a,b)},initialize:function(a){this._initialized||(this.useCustomButtons||(this._createButtons(a),this._setButtonsHidden(this.hideStepButtons)),this._initialized=!0)},_createButtons:function(a){var b=a.getStepsArray(),c=b.indexOf(this),d=this,e=function(b){return d[b]?d[b]:a[b]};c<0||(c>0&&"default"===this.stepType&&this._createButton(e("previousButtonText"),["prev-btn","ha-button-secondary"]),c===b.length-1?this._createButton(a.doneButtonText,["done-btn","ha-button-primary"]):this._createButton(e("nextButtonText"),["next-btn","ha-button-primary"]),this.showSaveForLaterButton&&this._createButton(this.saveForLaterButtonText,["save-for-later-btn","ha-button-secondary"]),this._addButtonListeners())},_createButton:function(a,b){var c=this.ownerDocument.createElement("button");c.classList.add("ha-button"),c.classList.add("step-flow-button"),b.forEach(function(a){c.classList.add(a)}),c.innerHTML=a,this._footer.appendChild(c)},_addButtonListeners:function(){var a=this,b=Array.prototype.slice.call(this.querySelectorAll("button.step-flow-button"));b&&b.forEach(function(b){a.listenTo(b,"click",a._btnListener)})},_setup:function(){this.classList.remove("slide-in-next"),this.classList.remove("slide-in-back"),this.classList.remove("slide-out-next"),this.classList.remove("slide-out-back"),this.classList.remove("slide-out-next-delayed"),this.classList.remove("slide-out-back-delayed")},_swipeIn:function(a){this._saveOriginal(this),this._setup(),this.parentElement.scrollTop=0,a?this.classList.add("slide-in-next"):this.classList.add("slide-in-back"),this.stepAvailable=!0},_swipeOut:function(a,b){this._setup(),a?this.classList.add(b?"slide-out-next-delayed":"slide-out-next"):this.classList.add(b?"slide-out-back-delayed":"slide-out-back"),this._hideOnTransition=!0},_saveOriginal:function(){null===this._originalTop&&(this._originalTop=this.getBoundingClientRect().top-h(this).getBoundingClientRect().top)}}),c("ha-flow-step",g)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFlowStep",["exports","prop-types","react","./HASection","./HALabel","hui/core/utils","hui/step-flow/flow-step"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HASection"),require("./HALabel"),require("hui/core/utils"),require("hui/step-flow/flow-step"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HASection,a.HALabel,a.utils,a.flowStep),a.HAFlowStep=c.exports}}(this,function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function j(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var k=g(b),l=g(c),m=g(d),n=g(e),o=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},p=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),q=function(a){function b(a){h(this,b);var c=i(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c.state={classAttributes:"default"},c}return j(b,a),p(b,[{key:"componentDidMount",value:function(){this.setHuiProperties(),this.updateSection(),this.props.className&&this.updateElementClasses()}},{key:"componentWillReceiveProps",value:function(a){this.state.classAttributes!==a.className&&this.updateElementClasses()}},{key:"componentDidUpdate",value:function(a){this.setHuiProperties(a)}},{key:"updateSection",value:function(){var a=void 0,b=void 0;this._huiComponent&&(a=this._huiComponent.querySelectorAll("section"),b=this._huiComponent.querySelector(".printButton")),a&&a.length>1&&(this._huiComponent.insertBefore(a[1],a[0]),this._huiComponent.removeChild(a[0])),b&&this._huiComponent.insertBefore(b,this._huiComponent.firstChild)}},{key:"setHuiProperties",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.props.validator&&(this._huiComponent.validator=this.props.validator),this.props.beforeShowPromise&&(this._huiComponent.beforeShowPromise=this.props.beforeShowPromise)}},{key:"updateElementClasses",value:function(){var a=(0,f.updateClassWithProps)(this._huiComponent,this.props.className);a&&this.setState({classAttributes:a})}},{key:"render",value:function(){var a=this,b=void 0;this.props.printStepFlow&&"function"==typeof this.props.printStepFlow&&(b=l.default.createElement("div",{className:"printButton",onClick:this.props.printStepFlow},l.default.createElement(n.default,{className:"printLabel"},l.default.createElement("span",null,"Print"))));var c=l.default.Children.map(this.props.children,function(b){return b&&b.type===m.default?l.default.createElement("section",b.props,a.props.titleText?l.default.createElement("h1",{tabIndex:"-1",className:"step-title"},a.props.titleText):null,a.props.subtitleText?l.default.createElement("h3",{className:"step-subtitle"},a.props.subtitleText):null,b.props.children):b});return l.default.createElement("ha-flow-step",o({ref:this.handleRef,class:this.state.classAttributes},this.props),b,c)}}]),b}(l.default.Component);q.propTypes={className:k.default.string,children:k.default.any,id:k.default.string,stepId:k.default.string,showSaveForLaterButton:k.default.bool,saveForLaterButtonText:k.default.string,nextButtonText:k.default.string,previousButtonText:k.default.string,titleText:k.default.string,subtitleText:k.default.string,progressIndicatorText:k.default.string,stepComplete:k.default.bool,stepAvailable:k.default.bool,hideProgressIndicator:k.default.bool,hideProgressIndicatorItem:k.default.bool,hideStepButtons:k.default.bool,useCustomButtons:k.default.bool,content:k.default.object,validator:k.default.func,beforeShowPromise:k.default.func,printStepFlow:k.default.func},a.default=q});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFooterCenter",["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.HAFooterCenter=c.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var g=c(b),h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),i(b,[{key:"render",value:function(){return g.default.createElement("span",h({className:"footer-center"},this.props),this.props.children)}}]),b}(g.default.Component);a.default=j});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFooterLeft",["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.HAFooterLeft=c.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var g=c(b),h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),i(b,[{key:"render",value:function(){return g.default.createElement("span",h({className:"footer-left"},this.props),this.props.children)}}]),b}(g.default.Component);a.default=j});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAFooterRight",["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.HAFooterRight=c.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var g=c(b),h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),i(b,[{key:"render",value:function(){return g.default.createElement("span",h({className:"footer-right"},this.props),this.props.children)}}]),b}(g.default.Component);a.default=j});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAGuidanceTooltip",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAGuidanceTooltip=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c.state={show:c.props.show},c._huiComponent=null,c.rightConnectorPosition="",c._listeners={onChange:null},c.attachTriggers=c.attachTriggers.bind(c),c.showTooltip=c.showTooltip.bind(c),c.hideTooltip=c.hideTooltip.bind(c),c}return g(b,a),j(b,[{key:"componentDidMount",value:function(){var a=this;this._listeners.onChange=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)},setTimeout(this.attachTriggers,0)}},{key:"setTarget",value:function(a){this.state.target||(a||(a=document.querySelector(this.props.targetSelector)),this.setState({target:a}))}},{key:"getTarget",value:function(){return this.state.target?this.state.target:document.querySelector(this.props.targetSelector)}},{key:"attachTriggers",value:function(a){this.setTarget(a);var b=this.state.target;if(b)switch(this.props.trigger){case"hover":b.addEventListener("mouseenter",this.showTooltip,!1),b.addEventListener("mouseleave",this.hideTooltip,!1);break;case"click":b.addEventListener("click",this.showTooltip,!1);break;case"focus":b.addEventListener("focusin",this.showTooltip,!1),b.addEventListener("focusout",this.hideTooltip,!1)}}},{key:"showTooltip",value:function(){this.setState({show:!0})}},{key:"hideTooltip",value:function(){this.setState({show:!1}),this.props.onDismiss&&this.props.onDismiss()}},{key:"renderPrevButton",value:function(){return 0===this.props.index?i.default.createElement("a",{className:"prev"},"Prev"):i.default.createElement("button",{className:"prev bold-text-label","aria-label":"Previous",onClick:this.props.onPrevButtonClick},"Prev")}},{key:"renderNextButton",value:function(){var a=this.props.count-1;return this.props.index===a?i.default.createElement("a",{className:"next"},"Next"):i.default.createElement("button",{className:"next bold-text-label","aria-label":"Next",onClick:this.props.onNextButtonClick},"Next")}},{key:"renderCurrentIndex",value:function(){if("undefined"!==this.props.index&&"undefined"!==this.props.count)return i.default.createElement("span",{className:"index-progress"},this.props.index+1," of ",this.props.count)}},{key:"renderFooter",value:function(){return i.default.createElement("div",{className:"footer"},this.renderCurrentIndex(),i.default.createElement("span",{className:"action-label"},this.renderPrevButton(),"|",this.renderNextButton()))}},{key:"getTooltipPosition",value:function(){var a=this.state.target;if(a||(a=this.getTarget()),a){var b=a.getBoundingClientRect(),c=this.tooltip.getBoundingClientRect(),d=0,e=0,f=12,g=a.offsetLeft,h=a.offsetTop;return"left"===this.props.position?(d=g-c.width-f,e=h):"right"===this.props.position?(d=g+b.width+f,e=h):"top"===this.props.position?(d=g,e=h-c.height-f):"bottom"===this.props.position&&(d=g,e=h+b.height+f),window.innerWidth<d+c.width?(d-=c.width-b.width,this.rightConnectorPosition="arrow-right"):this.rightConnectorPosition="",{left:d,top:e}}}},{key:"getConnectorPosition",value:function(){return"left"===this.props.position?"arrow_box_right":"right"===this.props.position?"arrow_box_left":"top"===this.props.position?"arrow_box_bottom":"bottom"===this.props.position?"arrow_box_top":void 0}},{key:"componentWillReceiveProps",value:function(a){this.state.show!==a.show&&this.setState({show:a.show})}},{key:"componentWillMount",value:function(){this.style={visibility:"hidden"}}},{key:"render",value:function(){var a=this,b="",c=this.style,d=this.props.titleStyle;c=this.state.show?this.getTooltipPosition():{visibility:"hidden"};var e=this.props.className?this.props.className:"";return b="guidance-tooltip visible "+this.getConnectorPosition()+" "+this.rightConnectorPosition+" "+e,i.default.createElement("div",{className:b,ref:function(b){a.tooltip=b},style:c,role:"tooltip"},i.default.createElement("h3",{className:"title-msg "+d},this.props.titleText),i.default.createElement("div",{className:"dismiss-button","aria-label":"Close Tooltip",onClick:this.hideTooltip},i.default.createElement("i",{className:"hi page small hi-close"})),i.default.createElement("div",null,this.props.children),this.props.tour&&this.renderFooter())}}]),b}(i.default.Component);k.propTypes={id:h.default.string,className:h.default.string,showOnRender:h.default.bool,targetSelector:h.default.string.isRequired,position:h.default.string.isRequired,titleText:h.default.string.isRequired,titleStyle:h.default.string,tooltipStyle:h.default.string,message:h.default.string,dismissible:h.default.bool,trigger:h.default.string,duration:h.default.oneOfType([h.default.number,h.default.string]),onChange:h.default.func,onDismiss:h.default.func},a.default=k});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAGuidedTour",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAGuidedTour=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c.state={index:-1},c._huiComponent=null,c._listeners={onChange:null},c.show=c.show.bind(c),c.handlePrevButtonClick=c.handlePrevButtonClick.bind(c),c.handleNextButtonClick=c.handleNextButtonClick.bind(c),c}return g(b,a),j(b,[{key:"componentDidMount",value:function(){var a=this;this._listeners.onChange=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)},setTimeout(this.show,0)}},{key:"handlePrevButtonClick",value:function(){var a=this.state.index-1;this.setState({index:a})}},{key:"handleNextButtonClick",value:function(){var a=this.state.index+1;this.setState({index:a})}},{key:"show",value:function(){this.setState({index:0})}},{key:"render",value:function(){var a=this,b=0,c=this.props.children.length;return i.default.createElement("div",{ref:this.handleRef},i.default.Children.map(this.props.children,function(d){return b===a.state.index?i.default.cloneElement(d,{index:b++,show:!0,count:c,tour:!0,onPrevButtonClick:a.handlePrevButtonClick,onNextButtonClick:a.handleNextButtonClick}):i.default.cloneElement(d,{index:b++,show:!1,count:c,tour:!0,onPrevButtonClick:a.handlePrevButtonClick,onNextButtonClick:a.handleNextButtonClick})}))}}]),b}(i.default.Component);k.propTypes={id:h.default.string,className:h.default.string,showOnRender:h.default.bool,targetSelector:h.default.string,position:h.default.string,titleText:h.default.string,message:h.default.string,dismissible:h.default.bool,trigger:h.default.string,duration:h.default.oneOfType([h.default.number,h.default.string]),onChange:h.default.func,onClick:h.default.func},a.default=k});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAHeader",["exports","react","react-dom"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("react-dom"));else{var c={exports:{}};b(c.exports,a.react,a.reactDom),a.HAHeader=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=(d(c),function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}()),j=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),i(b,[{key:"render",value:function(){return h.default.createElement("header",this.props,this.props.children)}}]),b}(h.default.Component);a.default=j}),define("hui/message",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";return b("ha-message",a.createObject(c,{}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMessage",["exports","prop-types","react","hui/message"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/message"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.message),a.HAMessage=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),k(b,[{key:"render",value:function(){return i.default.createElement("ha-message",j({class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string},a.default=l}),define("hui/text",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";return b("ha-text",a.createObject(c,{}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAText",["exports","prop-types","react","hui/text"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/text"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.text),a.HAText=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return g(b,a),k(b,[{key:"render",value:function(){return i.default.createElement("ha-text",j({class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string},a.default=l}),define("hui/info-link",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/utils","./core/keys","./core/a11y","./tooltip","./message","./text"],function(a,b,c,d,e,f){"use strict";var g,h=function(a,b){var c,e,f=a.querySelectorAll(b),g="";return f&&(c=d.removeNodesSafe(a,f),e=c[0]),e&&e instanceof HTMLElement&&(g=e),g},i=function(){return d.createElement("span",{className:"link-text"})},j=function(){return d.createElement("ha-tooltip",{position:"bottom top",alignment:"right left",dismissible:!0,trigger:"custom"})};return g=a.createObject(b,{init:function a(){a.super(this),this._linkText="",this._message="",this.initializeLinkText(),this.initializeMessage()},initializeLinkText:function(){var a=this.querySelector(".link-text"),b=this.getAttribute("linktext"),c=h(this,"ha-text"),d=b||c||"";a&&!d&&(d=Array.prototype.slice.call(a.childNodes)),this.linkText=d},initializeMessage:function(){var a=this.getAttribute("message"),b=h(this,"ha-message"),c=a||b||"";this.message=c},set linkText(a){var b=this.querySelector(".link-text");if(b||(b=i(),this.insertBefore(b,this.firstChild)),a){for("string"==typeof a?this.setAttribute("linktext",a):this.removeAttribute("linktext");b.firstChild;)b.removeChild(b.firstChild);d.attachContentToNode(a,b),this._linkText=a}},get linkText(){return this._linkText},set message(a){var b=this.ownerDocument.createElement("span"),c=this.querySelector("ha-tooltip");a="string"==typeof a?a.trim():a,c||(c=j(),this.appendChild(c)),a&&("string"==typeof a?this.setAttribute("message",a):this.removeAttribute("message"),d.attachContentToNode(a,b),this._message=a,c.message=b)},get message(){return this._message},attributeChangedCallback:function a(b,c,d){"linktext"===b?this.linkText=d:"message"===b?this.message=d:a.super(this,b,c,d)},postRender:function a(){var b=this.querySelector("ha-tooltip"),c=this.querySelector(".link-text");b||(b=j(),this.appendChild(b)),this.tooltip=b,this.tooltip.on("keydown",function(a){a.keyCode===e.ESCAPE&&this.tooltip.close()}.bind(this)),a.super(this),this.tabIndex="0",this.setAttribute("role","link"),this.setAttribute("aria-haspopup","true"),this.on("keydown",function(a){a.keyCode===e.SPACEBAR||a.keyCode===e.ENTER?(c.classList.add("active"),b.show(),b.tabIndex=-1,b.focus()):a.keyCode===e.ESCAPE&&this.tooltip.close()}.bind(this)),this.on(".link-text:click",function(a){a.stopImmediatePropagation(),a.preventDefault(),c.classList.add("active"),b.show(a),b.tabIndex=-1,this.emit("click")}.bind(this)),this.listenTo(this.tooltip,"dismiss",function(a){var b=a.target;a.stopImmediatePropagation(),b&&"HA-TOOLTIP"===b.tagName&&(b.close(),this.focus())}.bind(this)),this.listenTo(this.tooltip,"close",function(a){a.stopImmediatePropagation(),c.classList.remove("active"),this.tooltip.removeAttribute("tabindex"),this.focus()}.bind(this)),this.listenTo(this.tooltip,"show",function(a){a.stopImmediatePropagation()}),f.addA11yFocus(this)},get tooltip(){return this._tooltip||this.querySelector("ha-tooltip")},set tooltip(a){this._tooltip=a},detachedCallback:function(){this.tooltip&&this.tooltip.parentElement&&this.tooltip.parentElement.removeChild(this.tooltip)}}),c("ha-info-link",g)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAInfoLink",["exports","prop-types","react","./HAMessage","./HAText","hui/core/utils","hui/info-link"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAMessage"),require("./HAText"),require("hui/core/utils"),require("hui/info-link"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAMessage,a.HAText,a.utils,a.infoLink),a.HAInfoLink=c.exports}}(this,function(a,b,c,d,e,f){"use strict";function g(a){return a&&a.__esModule?a:{default:a}}function h(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=g(b),m=g(c),n=g(d),o=g(e),p=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(a){i(this,b);var c=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return s.call(c),c._huiComponent=null,c._listeners={},c}return k(b,a),q(b,[{key:"componentDidMount",value:function(){var a=this;this.updateReactComponent();var b=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=b.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick);var c=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b)};this._listeners.onClose=c.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss);var e=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=e.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("click",this._listeners.onClick,!1),this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1)}},{key:"updateReactComponent",value:function(){var a=this;this.props.children&&m.default.Children.forEach(this.props.children,function(b){b.type===o.default&&a._huiComponent.initializeLinkText(),b.type===n.default&&a._huiComponent.initializeMessage()})}},{key:"render",value:function(){var a=this.props,b=a.linkText,c=h(a,["linkText"]);return m.default.createElement("ha-info-link",p({ref:this.handleRef,linktext:b},c),this.props.children)}}]),b}(m.default.Component);r.propTypes={className:l.default.string,children:function(a,b,c){var d=(0,f.checkReactChildrenType)(a[b],c,[n.default,o.default],"HAMessage,HAText");if(d)return d},onClick:l.default.func,onClose:l.default.func,onDismiss:l.default.func,onShow:l.default.func};var s=function(){var a=this;this.handleRef=function(b){a._huiComponent=b}};a.default=r}),define("hui/simple-list",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/keys","./core/utils"],function(a,b,c,d,e){var f=function(a){var b=[];return a.childElementCount>=0&&(b=e.removeNodesSafe(a,a.childNodes)),b},g=function(a){var b,c,d=0,e=0;if(a&&a.parentNode){for(b=a.parentNode.childNodes;(c=b.item(e++))&&c!==a;)1===c.nodeType&&d++;return d}return-1};return a("ha-list",c.createObject(b,{init:function a(){a.super(this),this._selectedItem=null,this._items=[],this.setupProperties({complexity:{default:"basic",type:String},selectedIndex:{default:-1,type:Number,change:function(a){[].forEach.call(this.querySelectorAll("li"),function(b,c){c===a?(b.classList.add("ha-active"),b.setAttribute("aria-selected",!0),this._selectedItem=b):(b.classList.remove("ha-active"),b.setAttribute("aria-selected",!1))}.bind(this)),this.emit("select")}},size:{type:Number,change:function(a){var b=this.querySelector("ul");a?(b.style.maxHeight=49*a+"px",b.style.overflowY="auto"):(b.style.maxHeight="none",b.style.overflowY="hidden")}},titleText:{default:"",change:function(a,b){var c,d=this.querySelector("h2");b!==a&&(d?d.innerHTML=a:(c=this.querySelector("ul"),d=this.ownerDocument.createElement("h2"),d.id="ha-list-header-"+this.componentId,d.innerHTML=a,this.insertBefore(d,c)))}}}),this.on(".list-group:keydown",function(a){var b,c=a.target;if(a.keyCode!==d.TAB){if(c&&c.classList.contains("list-group"))return void c.firstChild.focus();for(;c&&!c.classList.contains("list-group-item");)c=c.parentNode;switch(e.stopEvent(a),a.keyCode){case d.UP:c.previousSibling?(b=c.previousSibling,b.focus(),this.selectedIndex=g(b)):(b=c.parentNode.lastChild,b.focus(),this.selectedIndex=g(b));break;case d.DOWN:c.nextSibling?(b=c.nextSibling,b.focus(),this.selectedIndex=g(b)):(b=c.parentNode.firstChild,b.focus(),this.selectedIndex=g(b));break;case d.ENTER:case d.SPACEBAR:this.selectedIndex=g(c)}}}.bind(this)),this.on(".list-group-item:click",function(a){this.emit("click"),e.stopEvent(a);for(var b=a.target;b&&!b.classList.contains("list-group-item");)b=b.parentNode;b&&(this.selectedIndex=g(b))}.bind(this))},set items(a){var b,c,d,e=this.querySelector(".list-group");a&&a.length>0&&(e.innerHTML="",this._items=[],[].forEach.call(a,function(a){a.classList.add("list-group-item"),a.tabIndex=-1,b=f(a),b.forEach(function(b){b.data?(c=this.ownerDocument.createElement("span"),c.innerHTML=b.data,a.setAttribute("aria-selected",!1),a.appendChild(c)):(d=this.ownerDocument.createElement("span"),d.classList.add("control"),d.appendChild(b),a.appendChild(d)),this._items.push(a)},this),e.appendChild(a)}.bind(this)),this.getAttribute("size")||(this.size=this._items.length))},get items(){return this._items},set selectedItem(a){},get selectedItem(){return this._selectedItem},postRender:function a(){a.super(this);var b,c,d=null!==this.querySelector(".list-group-item"),e=this.getAttribute("size");d||(b=this.querySelector(".list-group"),b||(b=this.ownerDocument.createElement("ul"),b.tabIndex=0,b.classList.add("list-group"),this.appendChild(b)),b.setAttribute("aria-labelledby","ha-list-header-"+this.componentId),c=this.querySelectorAll("li")||[],this.items=c,!e&&c.length>0&&(this.size=c.length),this.setAttribute("complexity","basic"))}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAList",["exports","prop-types","react","hui/simple-list"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/simple-list"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.simpleList),a.HAList=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c.list=a},c.list=null,c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){var a=this.list.querySelectorAll("li");a&&(this.list.items=Array.prototype.slice.call(a))}},{key:"render",value:function(){return i.default.createElement("ha-list",j({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,titleText:h.default.string,selectedIndex:h.default.oneOfType([h.default.string,h.default.number]),complexity:h.default.string,size:h.default.oneOfType([h.default.string,h.default.number])},a.default=l}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMenuButton",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HAMenuButton=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.MenuButton});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAModal",["exports","prop-types","react","./HAPortal","./HASection","./HAAside","./HAFooter","hui/core/utils","hui/modal"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAPortal"),require("./HASection"),require("./HAAside"),require("./HAFooter"),require("hui/core/utils"),require("hui/modal"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAPortal,a.HASection,a.HAAside,a.HAFooter,a.utils,a.modal),a.HAModal=c.exports}}(this,function(a,b,c,d,e,f,g,h){"use strict";function i(a){return a&&a.__esModule?a:{default:a}}function j(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function k(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function l(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var m=i(b),n=i(c),o=i(d),p=i(e),q=i(f),r=i(g),s=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},t=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),u=function(a){function b(a){j(this,b);var c=k(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return v.call(c),c._modal=null,c._listeners={},c}return l(b,a),t(b,[{key:"componentDidMount",value:function(){var a=this;setTimeout(function(){a._modal&&(a.removeWebRenderComp(),a.setIDToChildDom(a._modal.componentId),a.mountModal())})}},{key:"componentDidUpdate",value:function(a){this.mountModal(a)}},{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"mountModal",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._modal&&this.props.show!==b.show)if(this.props.show)if(this.setupListeners(),this._modal.show)this._modal.show();else{var c=function(b){b.stopPropagation(),a._modal.show()};this._listeners.componentUpgraded=c.bind(this),this._modal.addEventListener("component-upgraded",this._listeners.componentUpgraded)}else b.show&&this._modal.close()}},{key:"removeWebRenderComp",value:function(){var a=this._modal.querySelectorAll(".modal");if(a&&a.length>1)this._modal.removeChild(a[0]);else{var b=this._modal.querySelectorAll(".modal-title h2");b&&b.length>1&&b[0].parentElement.removeChild(b[0])}}},{key:"setIDToChildDom",value:function(a){var b=this._modal.querySelector(".modal"),c=this._modal.querySelector("header h2"),d=this._modal.querySelector("header h4"),e=this._modal.querySelector("section");b&&a&&(b.setAttribute("aria-labelledby","modal-title-"+a),b.setAttribute("aria-describedby","modal-text-"+a)),c&&a&&c.setAttribute("id","modal-title-"+a),d&&a&&d.setAttribute("id","modal-title-"+a),e&&a&&e.setAttribute("id","modal-text-"+a)}},{key:"setupListeners",value:function(){var a=this;if(0===Object.keys(this._listeners).length){var b=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=b.bind(this),this._modal.addEventListener("show",this._listeners.onShow);var c=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b),a.cleanUpListeners()};this._listeners.onClose=c.bind(this),this._modal.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._modal.addEventListener("dismiss",this._listeners.onDismiss)}}},{key:"cleanUpListeners",value:function(){this._modal&&(this._modal.removeEventListener("show",this._listeners.onShow,!1),this._modal.removeEventListener("close",this._listeners.onClose,!1),this._modal.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._modal.removeEventListener("component-upgraded",this._listeners.componentUpgraded,!1)),this._listeners={}}},{key:"getModalTitleIcon",value:function(a){switch(a){case"confirm":case"endflow":return n.default.createElement("span",{className:"hi hi-circle-check modal-icon"});case"info":return n.default.createElement("span",{className:"hi hi-circle-info modal-icon"});case"error":case"warn":case"alert":return n.default.createElement("span",{className:"hi hi-circle-alert modal-icon"})}}},{key:"getModalClass",value:function(a,b){var c="modal-dialog "+b+" ",d="modal-title ";return"error"===a||"alert"===a||"warn"===a||"endflow"===a?(c+=a+" ","error"===a||"alert"===a||"warn"===a?("alert"===a&&console.warn('DEPRECATION WARNING: Type "alert" is deprecated, take care using this type for futures releases'),c=c.replace("message-icon",""),d+="hi-"+a):"endflow"===a&&(c+="message-icon",d+="hi-confirm")):(c+="message-icon",d+="hi-"+a),{dialog:c,title:d}}},{key:"render",value:function(){var a={1:"one-btn",2:"two-btn",3:"three-btn"},b=["alert","error","warn"],c=this.getModalClass(this.props.type,this.props.size),d="btn btn-link hi hi-close medium pull-right "+(this.props.dismissible?"":"hidden");return n.default.createElement(o.default,{show:this.props.show},n.default.createElement("ha-modal",s({ref:this.handleRef,class:this.props.className,reactLayering:!0},this.props),n.default.createElement("div",{className:"modal",tabIndex:"-1"},n.default.createElement("div",{className:c.dialog},n.default.createElement("div",{className:"modal-content"},n.default.createElement("header",null,n.default.createElement("button",{type:"button",className:d,"aria-label":"Close"}),n.default.createElement("div",{className:c.title},this.getModalTitleIcon(this.props.type),"small"===this.props.size&&b.indexOf(this.props.type)>-1?n.default.createElement("h4",null,this.props.titleText):n.default.createElement("h2",null,this.props.titleText))),n.default.Children.map(this.props.children,function(b){if(b.type===p.default)return n.default.cloneElement(b,{key:"1"});if(b.type===r.default){var c=a[n.default.Children.count(b.props.children)];return c=b.props.className?c+" "+b.props.className:c,n.default.cloneElement(b,{className:c,key:"2"})}return b.type===q.default?n.default.cloneElement(b,{key:"3"}):void 0}))))))}}]),b}(n.default.Component);u.propTypes={children:function(a,b,c){var d=(0,h.checkReactChildrenType)(a[b],c,[p.default,r.default,q.default],"HASection,HAFooter,HAAside");if(d)return d},className:m.default.string,show:m.default.bool.isRequired,titleText:m.default.string,type:m.default.string,size:m.default.string,dismissible:m.default.bool,onShow:m.default.func,onClose:m.default.func,onDismiss:m.default.func};var v=function(){var a=this;this.handleRef=function(b){a._modal=b}};a.default=u});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMoneyBar",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAMoneyBar=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"getHighlightClass",value:function(a){return a.isHighlighted?"alert-highlight":""}},{key:"getTitle",value:function(a){if(a.showTitle)return i.default.createElement("h3",{className:"title"},a.title)}},{key:"getAlert",value:function(a){var b="alertText "+this.getHighlightClass(a),c="alertAmount "+this.getHighlightClass(a),d=i.default.createElement("div",null,i.default.createElement("span",{className:b},a.alertText),i.default.createElement("span",{className:c},a.alertAmount));if(a.verticleLayout&&(d=i.default.createElement("div",null,i.default.createElement("span",{className:c},a.alertAmount),i.default.createElement("span",{className:b},a.alertText))),a.showAlert&&(a.alertText||a.alertAmount))return i.default.createElement("div",{className:"ha-money-bar-alert",onClick:a.handleAlertClick,onMouseEnter:a.handleMouseEnter,onMouseLeave:a.handleMouseLeave},i.default.createElement("i",{className:"hi navigation hi-circle-alert","aria-hidden":!0}),d)}},{key:"render",value:function(){return i.default.createElement("section",{className:(this.props.verticleLayout?"layout-320":"")+" ha-money-bar2"},this.getTitle(this.props),this.getAlert(this.props),i.default.createElement("div",{className:"ha-money-bar-sections"},this.props.children))}}]),b}(i.default.Component);a.default=k,k.displayName="HAMoneyBar",k.propTypes={alertText:h.default.object,showTitle:h.default.bool,alertAmount:h.default.object,showAlert:h.default.bool,handleAlertClick:h.default.func,handleMouseEnter:h.default.func,handleMouseLeave:h.default.func,verticleLayout:h.default.bool,title:h.default.object,isHighlighted:h.default.bool,children:function(a,b){var c=a[b];void 0===c.length&&(c=[c]),c.forEach(function(a){if("HAMoneyBarSection"!==a.type.displayName)throw new Error("Cannot have "+a.type.displayName+" as a child of HAMoneyBar")})}}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMoneyBarAmount",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAMoneyBarAmount=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"getHighlightClass",value:function(){return this.props.isHighlighted?"ha-money-bar-amount-highlight":""}},{key:"render",value:function(){var a="center-align";return"right"===this.props.align?a="pull-right":"left"===this.props.align&&(a="pull-left"),i.default.createElement("div",{key:this.props.key,className:"ha-money-bar-amount "+(this.props.disabled?"inactive":"")+" "+this.getHighlightClass(),onClick:this.props.handleClick,onMouseEnter:this.props.handleMouseEnter,onMouseLeave:this.props.handleMouseLeave},i.default.createElement("div",{className:"amountText "+this.props.colorClass+" "+a},this.props.amount),i.default.createElement("div",{className:"subText "+a},this.props.subText))}}]),b}(i.default.Component);a.default=k,k.displayName="HAMoneyBarAmount",k.propTypes={amount:h.default.object.isRequired,subText:h.default.object.isRequired,colorClass:h.default.string.isRequired,align:h.default.string,key:h.default.string,handleClick:h.default.func,disabled:h.default.bool,handleMouseEnter:h.default.func,handleMouseLeave:h.default.func,isHighlighted:h.default.bool}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMoneyBarSection",["exports","prop-types","react","./HAHeader"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAHeader"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAHeader),a.HAMoneyBarSection=c.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=e(b),j=e(c),k=e(d),l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(){return f(this,b),g(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return h(b,a),l(b,[{key:"getHeader",value:function(){return j.default.createElement(k.default,null,j.default.createElement("h4",null,j.default.createElement("span",{className:"boldText"},this.props.total," ",this.props.boldText),j.default.createElement("span",{className:"plainText"},this.props.plainText)))}},{key:"render",value:function(){var a=[],b=void 0;return this.props.children&&this.props.children.forEach(function(c){if(!j.default.isValidElement(c))return void console.warn("Invalid react element as child for HAMoneyBarSection");c.type.displayName?name=c.type.displayName:name=c.type.toString().match(/^function\s*([^\s(]+)/)[1];var d=name;"HAMoneyBarAmount"===d&&a.push(c),"HAPercentageBar"===d&&(b=c)}),j.default.createElement("div",{className:this.props.className+" ha-money-bar-section",onMouseEnter:this.props.handleMouseEnter,onMouseLeave:this.props.handleMouseLeave},this.getHeader(),j.default.createElement("div",{className:"ha-money-bar-amounts"},a),b)}}]),b}(j.default.Component);a.default=m,m.displayName="HAMoneyBarSection",m.propTypes={boldText:i.default.object.isRequired,plainText:i.default.object.isRequired,total:i.default.object.isRequired,verticleLayout:i.default.bool,className:i.default.string,handleMouseEnter:i.default.func,handleMouseLeave:i.default.func,children:function(a,b){var c=a[b];void 0===c.length&&(c=[c]);var d=["HAMoneyBarAmount","HAPercentageBar"];c.forEach(function(a){if(d.indexOf(a.type.displayName)<0)throw new Error("Cannot have child of type "+a.type.displayName+" in HAMoneyBarSection")})}}});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAMoneyBarSegment",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HAMoneyBarSegment=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),j(b,[{key:"_refCallback",value:function(a){var b=this;this.el=a,this.el&&this.el.style&&this.el.style.width!==this.props.width&&setTimeout(function(){return b.el.style.width=b.props.width},10)}},{key:"getHighlightClass",value:function(){return this.props.isHighlighted&&this.props.verticleLayout?"ha-money-bar-segment-verticle-highlight":this.props.isHighlighted?"ha-money-bar-segment-highlight":""}},{key:"render",value:function(){return this._refCallback=this._refCallback.bind(this),i.default.createElement("div",{className:(this.props.colorClass||"")+" ha-money-bar-segment "+(this.props.className||"")+" "+(this.props.disabled?"inactive":"")+" "+this.getHighlightClass(),onClick:this.props.handleClick,onMouseEnter:this.props.handleMouseEnter,onMouseLeave:this.props.handleMouseLeave,ref:this._refCallback})}}]),b}(i.default.Component);a.default=k,k.displayName="HAMoneyBarSegment",k.propTypes={colorClass:h.default.string.isRequired,handleClick:h.default.func,share:h.default.number.isRequired,disabled:h.default.bool,width:h.default.string,className:h.default.string,handleMouseEnter:h.default.func,handleMouseLeave:h.default.func,verticleLayout:h.default.bool,isHighlighted:h.default.bool}}),define("text!hui/page-message/page-message.html",[],function(){return'<template>\n    <span class="hi-icon-{{type}}"></span>\n    <button class="btn hi hi-close" aria-label="Close"></button>\n    <header>\n        <h4>{{titleText}}</h4>\n    </header>\n    <div class="message-content">{{message}}</div>\n</template>\n'}),define("hui/page-message",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/a11y","register-component/template!./page-message/page-message.html"],function(a,b,c,d){"use strict";function e(a){var b;(b=a.previousElementSibling||a.parentElement.previousElementSibling)&&b.focus()}var f;return f=c.createObject(a,{show:function(){this.classList.remove("hidden"),this.emit("show")},init:function a(){a.super(this),this._message=null,this._dismissible=!0,this.setupProperties({titleText:{default:"",type:String,change:function(a){var b=this.querySelector("header"),c=this.querySelector("h4");a?(b||(b=this.ownerDocument.createElement("header"),c=this.ownerDocument.createElement("h4"),b.appendChild(c),this.insertBefore(b,this.querySelector(".message-content"))),c.textContent=a,this.setAttribute("aria-label",a)):(b&&this.removeChild(b),this.removeAttribute("aria-label"))}},type:{default:"info",type:String,change:function(a){var b=this.querySelector("span.message-icon");b.className="alert"===a||"warn"===a||"error"===a?"message-icon hi hi-circle-alert":"discovery"===a?"message-icon hi hi-lightbulb-o":"message-icon hi hi-circle-info","alert"===a&&console.warn('DEPRECATION WARNING: The "alert" type is going to be deprecated. From now on, please use "error" type instead.')}}}),this.on("button.btn.hi-close:click",function(){this.emit("dismiss"),this.close()}.bind(this))},set message(a){var b=this.querySelector(".message-content");"string"==typeof a?(b.innerHTML=a,this._message=a):a&&a.nodeType&&(b.innerHTML="",b.appendChild(a),this._message=a)},get message(){return this._message},set dismissible(a){var b=this.querySelector("button");a?(b.classList.add("show"),b.removeAttribute("aria-hidden")):(b.classList.remove("show"),b.setAttribute("aria-hidden",!0)),this._dismissible=a},get dismissible(){return this._dismissible},postRender:function a(){var b,c,e=this.querySelector(".message-content"),f=this.querySelector("span.message-icon"),g=this.querySelector("h4"),h=this.querySelector("button");a.super(this),d.addA11yFocus(this),e?c=e.innerHTML:(c=this.innerHTML,this.innerHTML="",h=this.ownerDocument.createElement("button"),h.className="btn hi hi-close",h.setAttribute("aria-hidden",!0),h.setAttribute("aria-label","close"),e=this.ownerDocument.createElement("div"),e.className="message-content",b=this.ownerDocument.createElement("header"),f||(f=this.ownerDocument.createElement("span"),f.classList.add("message-icon")),f.setAttribute("aria-hidden",!0),g=this.ownerDocument.createElement("h4"),b.appendChild(g),this.appendChild(f),this.appendChild(h),this.appendChild(b),this.appendChild(e)),this.setAttribute("role","alert"),this.dismissible="false"!==this.getAttribute("dismissible"),this.message=c,this.tabIndex=-1},hide:function(){console.warn('DEPRECATION WARNING: The "hide" event is going to be deprecated. From now on, please use "close" method instead.'),this.emit("hide"),this.close()},close:function(){e(this),this.classList.add("hidden"),this.emit("close")},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-page-message",f)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAPageMessage",["exports","prop-types","react","hui/page-message"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/page-message"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.pageMessage),a.HAPageMessage=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){var a=this;this.renderUpdate();var b=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b)};this._listeners.onClose=b.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var c=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=c.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss);var d=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=d.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1)}},{key:"renderUpdate",value:function(){this._huiComponent.postRender();var a=this._huiComponent.querySelector("span.message-icon"),b=this._huiComponent.querySelector("header h4");if(this.props.children&&(this._huiComponent.message=this.props.children),a)switch(this.props.type){case"alert":console.warn('DEPRECATION WARNING: The "alert" type is going to be deprecated. From now on, please use "error" type instead.');case"warn":case"error":a.className="message-icon hi hi-circle-alert";break;case"discovery":a.className="message-icon hi hi-lightbulb-o";break;default:a.className="message-icon hi hi-circle-info"}b&&(this.props.titleText?b.textContent=this.props.titleText:this._huiComponent.removeChild(b.parentElement))}},{key:"render",value:function(){return i.default.createElement("ha-page-message",j({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,titleText:h.default.string,type:h.default.string,dismissible:h.default.bool,onClose:h.default.func,onDismiss:h.default.func,onShow:h.default.func},a.default=l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAPercentageBar",["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.HAPercentageBar=c.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var g=c(b),h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),h(b,[{key:"setWidths",value:function(a){var b=0,c=0,d=0,e=!0,f=null,h=a.map(function(a){return a.props.share}),i=h.reduce(function(a,b){return a+b})||1;return f=h.map(function(a){e=e&&!a;var c=100*a/i;return c>0&&c<=5?b++:d+=c,c}),c=100-5*b,e&&(f=h.map(function(){return Math.floor(100/h.length)}),c=100,d=100),a.map(function(a,b){var h=null,i=f[b],j=a.props.className||"";return h=0===i?0:i<=5?4.2:Math.floor(i*c/d)-.8,g.default.cloneElement(a,{key:b,width:h+"%",className:e?j+" zero":j})})}},{key:"render",value:function(){return g.default.createElement("div",{className:"ha-percentage-bar"},this.setWidths(this.props.children))}}]),b}(g.default.Component);a.default=i,i.displayName="HAPercentageBar",i.propTypes={children:function(a,b){a=a[b],a.forEach(function(a){if("HAMoneyBarSegment"!==a.type.displayName)throw new Error("Cannot have a child of type "+a.type.displayName+" for HAPercentageBar")})}}}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAPopover",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HAPopover=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Popover}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HARadioButton",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HARadioButton=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.RadioButton}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HARadioButtonGroup",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HARadioButtonGroup=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.RadioButtonGroup}),define("hui/segmented-button",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/utils","./core/a11y","./core/keys"],function(a,b,c,d,e,f){"use strict";function g(a,b){var c,e=b.keyCode;e===f.LEFT?c=d.getPrevSiblingOfType(b.target,"BUTTON"):e===f.RIGHT&&(c=d.getNextSiblingOfType(b.target,"BUTTON")),c&&(c.focus(),a.selectedItem=c)}function h(a){a.stopPropagation();var b=d.getComponentFromElement(a.target,"HA-SEGMENTED-BUTTON");b.selectedItem=a.target,b.emit("click")}function i(a){var b=a.buttons,c=0;for(c;c<b.length;c++)b[c].setAttribute("aria-pressed",!1)}return a("ha-segmented-button",c.createObject(b,{set buttons(a){var b,c,d=[].slice.call(this.querySelectorAll("button"));d.forEach(function(a){this.stopListening(a,"click",h),this.removeChild(a)}.bind(this)),c=[].slice.call(a),c.forEach(function(a){var c=a.label||a.getAttribute("label");a.classList.add("ha-button"),a.disabled=a.disabled||a.getAttribute("disabled"),c&&console.warn("Label property is deprecated. Should use textContent instead."),!a.textContent&&c&&(a.textContent=c),(a.getAttribute("selected")||a.selected)&&(b=a),a.setAttribute("aria-pressed",!1),this.listenTo(a,"click",h),this._buttons.push(a),this.appendChild(a)}.bind(this)),b?this.selectedIndex=[].indexOf.call(this.buttons,b):this._buttons.length>0&&(this.selectedIndex=0)},set selectedItem(a){this._selectedItem=a,this.value!==a.value&&(this.value=a.value)},get buttons(){return this._buttons},get selectedItem(){return this._selectedItem},init:function a(){a.super(this),this.setupProperties({selectedIndex:{default:0,type:Number,change:function(a){var b=this.buttons[a];b&&(i(this),b.setAttribute("aria-pressed",!0),this.selectedItem!==b&&(this.selectedItem=b))}},value:{default:"",change:function(a){var b=[].slice.call(this.buttons);a&&(b.every(function(b,c){return b.value!==a||(this.selectedIndex=c,!1)}.bind(this)),this.emit("change"))}},name:{default:""}}),this.on("button:keydown",function(a){g(this,a)}.bind(this))},postRender:function a(){a.super(this);var b=this.querySelectorAll("button");this._buttons=[],this.buttons=b,e.addA11yFocus(this)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASegmentedButton",["exports","prop-types","react","hui/segmented-button"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/segmented-button"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.segmentedButton),a.HASegmentedButton=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){var a=this;this._huiComponent.postRender();var b=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=b.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var c=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=c.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("click",this._listeners.onClick,!1)}},{key:"render",value:function(){return i.default.createElement("ha-segmented-button",j({ref:this.handleRef},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,name:h.default.string,label:h.default.string,value:h.default.string,buttons:h.default.array,selectedItem:h.default.object,selectedIndex:h.default.number,onChange:h.default.func,onClick:h.default.func},a.default=l}),define("hui/add-new-helper",["./core/popup","./core/menuItemUtils"],function(a,b){function c(b){b&&b.open&&a.hide(b)}function d(b,c){var d;c&&(d="HA-SELECT"===b.tagName?b:b.querySelector(".search-container"),c.open||a.show(c,d,["bottom","top"],["left","right"]))}function e(a,c,d){var e,f,g;return f=d.createElement("span"),f.className="hi hi-create-lg",e=b.createMenuItemLabelWrapper(d,[f,d.createTextNode([a,c].join(" "))]),g=d.createElement("ha-menu-item"),g.label=e,g.value="",g.classList.add("add-new-menu-item"),g.setAttribute("role","option"),g.setAttribute("aria-label",a),g}function f(a,b,c){var d,f;(f=a.items)&&0!==f.length&&f[0].classList.contains("add-new-menu-item")||(d=e(b,c,a.ownerDocument),a.add(d,0))}function g(a){var b,c=a.value.length;setTimeout(function(){a.createTextRange?(b=a.createTextRange(),b.move("character",c),b.select()):a.setSelectionRange(c,c),a.focus()},0)}return{showPopoverForm:function(a,b){var e,f,h=a.dropdownElement;c(h),"HA-SELECT"!==a.tagName&&(f=a.addNewPopover.querySelector("ha-popover-form").addNewNameSelector)&&(e=a.addNewPopover.querySelector(f),e.value=a.typedText,g(e.querySelector("input"))),d(a,b)},addMenuItem:function(a){var b=a.dropdownElement,c="",d=b.querySelector("ha-menu");"HA-SELECT"!==a.tagName&&(c=a.querySelector("input").value),d&&"HA-MENU"===d.tagName&&f(d,a.addNewText,c)}}}),define("hui/popover-form",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/contentNode","./core/a11y","./core/utils"],function(a,b,c,d,e,f){"use strict";function g(a){return Array.isArray(a)&&a.length>0?a:null}return a("ha-popover-form",b.createObject(c,{init:function a(){a.super(this),this.setupProperties({addNewNameSelector:{default:"",type:String}}),this.tabIndex=-1,this.parentNode&&"HA-POPOVER"===this.parentNode.tagName&&(this.parentNode._noAutoFocusLastActiveElementOnClose=!0),this.on("keydown",function(a){e.keepFocusInsideListener(a,this)})},get section(){var a=f.queryChildOf(this,"section");return g(f.arrayOfChildrenFrom(a))},set section(a){var b=f.queryChildOf(this,"section");f.replaceChildrenOf(b,a)},get footer(){var a=f.queryChildOf(this,"footer");return g(f.arrayOfChildrenFrom(a))},set footer(a){var b=f.queryChildOf(this,"footer");f.removeAllChildrenFrom(b),f.replaceChildrenOf(b,a)},postRender:function a(){var b,c;a.super(this),b=f.queryChildOf(this,"section")||this.ownerDocument.createElement("section"),c=f.queryChildOf(this,"footer")||this.ownerDocument.createElement("footer"),f.removeAllChildrenFrom(this),f.appendChildren(this,[b,c])},addContent:function(a){var b={section:"section",footer:"footer"};d.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore. Use section or footer property instead.")}}))}),define("hui/select",["./validatable/validatable","register-component/v2/register","./core/icon","./core/popup","./core/event","./core/keys","./core/utils","./core/deviceUtils","object-utils/classes","./add-new-helper","./core/menuItemUtils","./core/domObserver","./modal","./popover","./popover-form","./menu","./menu-item","./item"],function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(a,b,c){function d(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)d(a),a=a.nextSibling}var e;(c=c||a.querySelector("label"))&&(b?c.textContent=g.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(d(c),e&&(e.textContent=g.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function n(a,b){var c=Array.prototype.slice.call(b.childNodes);for(var d in c)if(c[d].nodeName===a)return c[d];return null}function o(a,b){b.setAttribute("aria-expanded","true"),b.classList.add("active"),h.isHandheld()?a._noAutoFocusLastActiveElementOnClose=!1:(a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0),g.showPopoverOrModal(a,b,d)}function p(a){g.hidePopoverOrModal(a,d)}function q(a,b){g.isOpen(a)&&(b.setAttribute("aria-expanded","false"),g.hidePopoverOrModal(a,d))}function r(a,b,c){var d=a.ownerDocument.createElement("ha-item");return d.label=c,d.value=b,d.sanitizeInputs=a._sanitizeInputs,d}function s(a,b){var c=r(a,b,b),d=a.items;d.unshift(c),a.items=d}function t(a){var b,c;return c=a.addNewPopover.querySelector("ha-popover-form"),c.addNewNameSelector&&(b=c.querySelector(c.addNewNameSelector))&&b.value?(g.hidePopoverOrModal(a.addNewPopover,d),s(a,b.value),a.value=b.value,a.classList.add("element-selected"),a.dropdownElement.classList.add("element-was-selected"),b.value="",void a.emit("change")):void g.hidePopoverOrModal(a.addNewPopover,d)}function u(a,b){var c=g.getSafeTargetFromEvent(b);this.contains(c)||c===this._menuPopover||this._menuPopover.contains(c)||this._menuPopover.contains(b.target)||(q(this._menuPopover,a),this.emit("blur"))}function v(a,b,c){"function"==typeof c?g.replaceChildrenOf(a,c(b)):a.textContent=b.textContent||b.label}function w(a,b){var c;if(!a||!b||a.length!==b.length)return!1;for(c=0;c<a.length;c++)if(a[c].value!==b[c].value)return!1;return!0}function x(a){var b=a.querySelector("button.action-button");a.placeholder||a.selectButtonAriaLabel?b.setAttribute("aria-label",a.placeholder||a.selectButtonAriaLabel):b.hasAttribute("aria-label")&&b.removeAttribute("aria-label")}function y(a){var b;if(a.render)for(;a.items.length>0;)a.remove(0);else b=Array.prototype.slice.call(a.querySelectorAll("ha-menu-item")),b.forEach(function(b){a.removeChild(b)})}function z(a){Array.prototype.slice.call(a.querySelectorAll("ha-item")).forEach(function(b){a.removeChild(b)})}function A(a,b){a.render?a.items=b:b.forEach(function(b){a.appendChild(b)})}var B,C=!1;return B=i.createObject(a,{createdCallback:function a(){var b;this.hasAttribute("value")&&(b=this.getAttribute("value")),a.super(this),b&&setTimeout(function(){this.value=b}.bind(this),0)},init:function a(){a.super(this),this.validationTarget=this,this.highlightElementSelector=".action-button",this._items=null,this._label="",this._sanitizeInputs=!1,this._addNewPopover=null,this._boundValidate=this.validate.bind(this),this.setupProperties({sanitizeInputs:{default:!1,type:Boolean,change:function(a){var b=this._menu||this.dropdownElement.querySelector("ha-menu");!b.render?b.setAttribute("sanitizeInputs",a):b.sanitizeInputs=a,this.items&&this.items.forEach(function(b){b.sanitizeInputs=a}),this.setAttribute("sanitizeInputs",a),this._sanitizeInputs=a}},size:{default:10,type:Number,change:function(a){var b=this._menu||this.dropdownElement.querySelector("ha-menu");!b.render?b.setAttribute("size",a):b.size=a}},selectedIndex:{default:-1,type:Number,change:function(a,b){if(a!==b){var c=this._menu||this.dropdownElement.querySelector("ha-menu");-1===a?(c.selectedIndex=-1,this.value=""):this.items&&a>-1&&a<this.items.length&&a!==b?(this.addNew&&this.items.length!==c.items.length?c.selectedIndex=this.selectedIndex+1:c.selectedIndex=this.selectedIndex,c.selectedItem&&(this.value=c.selectedItem.value)):this.selectedIndex=-1}}},name:{default:"",type:String},addNew:{default:!1,type:Boolean},addNewText:{default:"Add New",type:String},value:{default:"",type:String,change:function(a,b){var c,d,e,f=this._menu||this.dropdownElement.querySelector("ha-menu"),g=!!f.render,i=this.querySelector("span.label");if(!a)return h.isDesktop()?i.textContent=this.placeholder:i.textContent="",this.value="",this.selectedIndex=-1,this.classList.remove("element-selected"),void x(this);if(a!==b){if(!g)return;f.selectedItem&&f.selectedItem.value===a?(d=this.addNew&&this.items.length!==f.items.length?f.selectedIndex-1:f.selectedIndex,c=this.items[d]):this.items.forEach(function(b,e){b.value!==a&&b.getAttribute("value")!==a||(d=e,c=b)},this),c?(this.selectedIndex=d,v(i,c,this.selectedItemRenderer),(e=this.querySelector("button.action-button"))&&e.removeAttribute("aria-label")):(i.textContent=this.placeholder,this.selectedIndex=-1,this.value="",this.classList.remove("element-selected"),x(this))}}},disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("button.action-button").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},placeholder:{default:"",change:function(a,b){var c=this.querySelector("button.action-button");a!==b&&(this.value||(h.isDesktop()?this.querySelector("span.label").innerHTML=a:(this.querySelector("span.label").innerHTML="",this.dropdownElement&&(this.dropdownElement.subtitle=a))),this.label||(this.placeholder?c.setAttribute("aria-label",a):c.removeAttribute("aria-label")))}},icon:{default:"",type:String,change:c.onChangeIconProperty},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&m(this)}},required:{default:!1,type:Boolean,change:function(a,b){this._validateIgnoreEvent||(this._validateIgnoreEvent=function(){this.validate()}.bind(this)),a!==b&&(m(this),a!==b&&(a?(this.addNewPopover&&e.on(this.addNewPopover,"close",this._validateIgnoreEvent),e.on(this._menuPopover,"close",this._validateIgnoreEvent)):(this.addNewPopover&&e.off(this.addNewPopover,"close",this._validateIgnoreEvent),e.off(this._menuPopover,"close",this._validateIgnoreEvent))),this.handleTooltipBinding(a),this.querySelector("button.action-button").setAttribute("aria-required",a))}},noFocusBackOnSelect:{default:!1,type:Boolean},selectButtonAriaLabel:{default:"View Choices",type:String,change:function(a){var b=this.querySelector("button.action-button");b&&b.setAttribute("aria-label",this.placeholder||a)}},automationId:{default:"",type:String,change:function(a,b){if(a!==b){if(h.isDesktop){var c=this.querySelector("ha-select ha-popover.popover-menu-items");c&&a?c.setAttribute("automationId",a+"_popover"):c&&!a&&c.removeAttribute("automationId")}if(h.isHandheld){var d=this.querySelector("ha-select ha-modal");d&&a?d.setAttribute("automationId",a+"_modal"):d&&!a&&d.removeAttribute("automationId")}}}}})},_getTargetSelectorId:function(){return this.localName+"-target-"+this.componentId},postRender:function a(){a.super(this);var b,c,i,k,l,m,p,r=this.querySelector("button.action-button"),s=this.querySelector("ha-label"),t=h.isHandheld(),v=this.querySelector("ha-popover-form"),w=this._getTargetSelectorId(),x=function(a){this.disabled||(a.stopPropagation(),this.classList.add("mobile-focused"),r.focus(),this.addNewPopover&&this.addNewPopover.open?g.hidePopoverOrModal(this.addNewPopover,d):g.isOpen(i)?q(i,r):(this.addNew&&j.addMenuItem(this),o(i,r),C=!1,this.emit("click")),setTimeout(function(){this.classList.remove("mobile-focused")}.bind(this),500))}.bind(this);r||(r=this.ownerDocument.createElement("button"),r.type="button",r.className="action-button no-connector ha-input",r.id=w,r.setAttribute("aria-expanded","false"),r.setAttribute("aria-haspopup","true"),r.setAttribute("aria-label",this.placeholder||this.selectButtonAriaLabel),b=this.ownerDocument.createElement("span"),b.classList.add("label"),r.appendChild(b),t||(k=this.ownerDocument.createElement("span"),k.classList.add("caret"),k.setAttribute("aria-hidden","true"),r.appendChild(k)),l=this.ownerDocument.createElement("span"),l.setAttribute("aria-hidden","true"),h.isDesktop()?l.classList.add("caret"):(l.classList.add("hi"),l.classList.add("hi-chevron-down")),r.appendChild(l),this.appendChild(r),m=this.ownerDocument.createElement("ha-menu"),m.setAttribute("role","listbox"),i=this.ownerDocument.createElement(t?"ha-modal":"ha-popover"),i.targetSelector="#"+w,i.classList.add("popover-menu-items"),i.section=m,t&&(i.dismissible=!0),this.appendChild(i)),this._menuPopover=i=i||this.querySelector((t?"ha-modal":"ha-popover")+".popover-menu-items"),t&&(i.classList.add("mobile-menu"),i.size="fullscreen","iOS"===h.getOSName()&&(i._lockBody=!0)),this._menu=m,this.items=Array.prototype.slice.call(this.querySelectorAll("ha-item")),p=this.getAttribute("label"),s?s&&(this.label=t?s.textContent:Array.prototype.slice.call(s.childNodes)):p&&(this.label=p),t&&(i.titleText=this.label,i.subtitle=this.placeholder),this.listenTo(r,"click",x),h.isHandheld()&&(c=n("LABEL",this))&&this.listenTo(c,"click",x),this.listenTo(r,"keydown",function(a){var b;switch(a.keyCode){case f.TAB:case f.ESCAPE:i.open&&(g.stopEvent(a),q(i,r),r.focus());break;case f.SPACEBAR:case f.ENTER:g.stopEvent(a),i.open||(this.addNew&&j.addMenuItem(this),C=!0,o(i,r));break;case f.DOWN:g.stopEvent(a),i.open?i.classList.contains("position-bottom")&&(b=m.items&&m.items.length>0?m.items[0]:m,b.focus()):(this.addNew&&j.addMenuItem(this),C=!0,o(i,r));break;case f.UP:g.stopEvent(a),i.open?i.classList.contains("position-top")&&(b=m.items&&m.items.length>0?m.items[m.items.length-1]:m,b.focus()):(this.addNew&&j.addMenuItem(this),C=!0,o(i,r))}}.bind(this),!0),this.listenTo(r,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0),this._addNewPopover&&(this._addNewPopover.targetSelector="#"+this.querySelector("button.action-button").id),v&&v.parentNode&&(this.addNewPopover=v.parentNode),i||(this.addNewPopover?Array.prototype.forEach.call(this.querySelectorAll("ha-popover"),function(a){a!==this.addNewPopover&&a.querySelector("ha-menu")&&(i=this._menuPopover=a)}.bind(this)):i=this._menuPopover=this.querySelector("ha-popover")),m=i.querySelector("ha-menu"),this.listenTo(m,"click",function(a){"ha-menu-item"===a.target.localName&&a.stopPropagation()}.bind(this)),this.listenTo(m,"select",function(a){if(a.target===m){a.stopPropagation();var b=this.querySelector("button.action-button");this.addNew&&this.addNewPopover&&m.selectedItem.classList.contains("add-new-menu-item")?(this.addNewPopover._closeOnBlur=!0,m.selectedIndex=-1,j.showPopoverForm(this,this.addNewPopover),this.emit("add-new")):(this.selectedIndex=this.addNew&&this.items.length!==m.items.length?a.target.selectedIndex-1:a.target.selectedIndex,this.classList.add("element-selected"),this.dropdownElement.classList.add("element-was-selected"),a.detail&&a.detail.selectedByClickOrKeyboard&&!this.noFocusBackOnSelect?this._focusOnNextClose=!0:b.classList.remove("active"),this.emit("change")),q(i,b)}}.bind(this)),e.on(i,"show",function(a){this.emit("items-show"),a.stopPropagation(),C&&m.selectedItem&&m.selectedItem.focus()}.bind(this)),e.on(i,"close",function(a){this.emit("items-close"),a.stopPropagation(),this._focusOnNextClose&&(r.focus(),this._focusOnNextClose=!1),this.addNew&&m.remove(0),r.classList.remove("active")}.bind(this)),e.on(i,"hide",function(a){a.stopPropagation()}.bind(this)),e.on(i,"blur",u.bind(this,r),!0),this.listenTo(r,"blur",u.bind(this,r),!0),e.on(i,"keydown",function(a){if(!this.disabled){var b=a.target;switch(a.keyCode){case f.TAB:case f.ESCAPE:(h.isDesktop()||a.keyCode===f.ESCAPE)&&i.open&&(g.stopEvent(a),q(i,r),r.focus());break;case f.ENTER:case f.SPACEBAR:"HA-MENU"===b.tagName&&(g.stopEvent(a),C=!0,this.addNew&&j.showPopoverForm(this,this.addNewPopover))}}}.bind(this))},attachedCallback:function(){this._bindHandle=l.bindChildrenChanges(this,"ha-item",this,"items")},detachedCallback:function(){[this._addNewPopover,this._menuPopover].forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)}),this._bindHandle&&(this._bindHandle.remove(),this._bindHandle=null)},set label(a){var b,c,d=function(a,b){var c=Array.prototype.slice.call(b.childNodes);for(var d in c)if(c[d].nodeName===a)return c[d];return null},e=this.querySelector(".action-button"),f=d("LABEL",this),g=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(this.removeChild(g),f=d("LABEL",this)),f||(f=this.ownerDocument.createElement("label"),this.insertBefore(f,e)),m(this,a,f),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),f=d("LABEL",this),f&&!g?this.removeChild(f):g&&this.removeChild(g),f=this.ownerDocument.createElement("label"),g=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){f.appendChild(a)}),g.appendChild(f),this.insertBefore(g,this.firstElementChild),m(this)),c=this.localName+"-label-"+this.componentId,f.setAttribute("id",c),e.setAttribute("aria-describedby",c),e.hasAttribute("aria-label")&&e.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),e.removeAttribute("aria-describedby"),f=d("LABEL",this),g=this.querySelector("ha-label"),g?this.removeChild(g):f&&this.removeChild(f),this.placeholder?e.setAttribute("aria-label",this.placeholder):e.removeAttribute("aria-label")),this._label=a},get label(){return this._label},get selectedItem(){return Array.isArray(this.items)&&this.selectedIndex>-1?this.items[this.selectedIndex]:null},set selectedItem(a){},get items(){return this._items},set items(a){var b,c=this.dropdownElement.querySelector("ha-menu"),d={role:"option"};this._bindHandle&&this._bindHandle.pause(),z(this),y(c),a=Array.isArray(a)?a:[a],b=a.map(function(a){return a.sanitizeInputs=this._sanitizeInputs,this.insertBefore(a,this._getFirstNonItemChild()),a.getAttribute("class")&&(d.class=a.getAttribute("class")),k.createMenuItem(a,d,this.itemRenderer,this.ownerDocument)},this),A(c,b);var e=this.value;w(a,this._items)||(this.selectedIndex=-1),this._items=a,this.value=e,this._bindHandle&&this._bindHandle.resume()},get addNewPopover(){return this._addNewPopover},set addNewPopover(a){var b;if(this.addNewPopover&&this.addNewPopover!==a&&this.removeChild(this.addNewPopover),this._addNewPopover=a,a){b=this.querySelector("button.action-button").id,a.targetSelector?a.targetSelector="#"+b:a.setAttribute("targetSelector","#"+b),a.classList.add("popover-add-items"),a.setAttribute("automationId","addNewItem_popover"),a.parentElement!==this&&this.appendChild(a);var c=a.querySelector("ha-popover-form");c&&(e.on(c,"save",function(a){g.stopEvent(a),t(this),this.emit("add-new")}.bind(this)),e.on(c,"cancel",function(a){g.stopEvent(a),p(this.addNewPopover)}.bind(this)))}},get dropdownElement(){return this._menuPopover||(this._menuPopover=this.querySelector((h.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},set dropdownElement(a){this._menuPopover=a},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},_getMenuPopover:function(){return console.info("_getMenuPopover should be deprecated in favor of .dropdownElement"),this.dropdownElement},validate:function(a){return this.reportValidity(a)},reportValidity:function a(b){if(b&&"blur"===b.type&&this._menuPopover.open)setTimeout(function(){this._menuPopover&&(this._menuPopover.contains(document.activeElement)||this.contains(document.activeElement))||a.super(this,b)}.bind(this),0);else if(h.isDesktop()||!b||"blur"!==b.type&&"hide"!==b.type)return a.super(this,b)},resetValidation:function a(){(this.dropdownElement.open||g.isOpen(this.dropdownElement))&&this.dropdownElement.close(!0),a.super(this)},_getFirstNonItemChild:function(){return Array.prototype.slice.call(this.children).filter(function(a){return"HA-ITEM"!==a.tagName})[0]}}),b("ha-select",B)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASelect",["exports","prop-types","react","hui/select"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/select"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.select),a.HASelect=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a,c._huiComponent&&c.props&&c.props.selectedItemRenderer&&(c._huiComponent.selectedItemRenderer=c.props.selectedItemRenderer)},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"testValidity",value:function(){if(this.props.onValidityChange){var a=void 0;this._huiComponent.checkValidity&&(a=this._huiComponent.checkValidity()),this._lastValidity!==a&&(this._lastValidity=a,this.props.onValidityChange(a))}}},{key:"updateAddNewPop",value:function(){var a=this._huiComponent.querySelector("ha-popover > ha-popover-form"),b=void 0;a&&(b=a.parentElement),b&&(this._huiComponent.addNewPopover=b)}},{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onAddNew&&a.props.onAddNew(b)};this._listeners.onAddNew=b.bind(this),this._huiComponent.addEventListener("add-new",this._listeners.onAddNew),this.props.addNew&&this.updateAddNewPop();var c=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b),a.testValidity()};this._listeners.onChange=c.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var d=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=d.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick);var e=function(b){b.stopPropagation(),a.props.onItemsShow&&a.props.onItemsShow(b)};this._listeners.onItemsShow=e.bind(this),this._huiComponent.addEventListener("items-show",this._listeners.onItemsShow);var f=function(b){b.stopPropagation(),a.props.onItemsClose&&a.props.onItemsClose(b)};this._listeners.onItemsClose=f.bind(this),this._huiComponent.addEventListener("items-close",this._listeners.onItemsClose);var g=function(a){a.stopPropagation()};this._listeners.onDismiss=g.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss),window.setTimeout(function(){a._huiComponent&&(a.props.validator&&(a._huiComponent.validator=a.props.validator),a.props.alwaysRenderValidity&&a._huiComponent.reportValidity(),a.props.resetValidation&&a._huiComponent.resetValidation(),a.testValidity(),a.props.value&&(a._huiComponent.value=a.props.value))},0)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("add-new",this._listeners.onAddNew,!1),this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("click",this._listeners.onClick,!1),this._huiComponent.removeEventListener("items-show",this._listeners.onItemsShow,!1),this._huiComponent.removeEventListener("items-close",this._listeners.onItemsClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._huiComponent.resetValidation()}},{key:"componentDidUpdate",value:function(a){var b=this;a.children!==this.props.children&&a.value!==this.props.value&&window.setTimeout(function(){b._huiComponent&&(b._huiComponent.value=b.props.value,b._huiComponent.value&&b.props.required&&b._huiComponent.resetValidation())},0),this.props.validator&&(this._huiComponent.validator=this.props.validator),this.testValidity(),this.props.alwaysRenderValidity&&this._huiComponent.reportValidity(),this.props.resetValidation&&this._huiComponent.resetValidation()}},{key:"render",value:function(){return i.default.createElement("ha-select",j({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={className:h.default.string,label:h.default.string,placeholder:h.default.string,icon:h.default.string,name:h.default.string,value:h.default.string,items:h.default.array,size:h.default.number,selectedIndex:h.default.number,selectedItem:h.default.object,addNew:h.default.bool,addNewPopover:h.default.object,addNewText:h.default.string,disabled:h.default.bool,required:h.default.bool,noRequiredIndicator:h.default.bool,min:h.default.number,max:h.default.number,requiredMessage:h.default.string,invalidMessage:h.default.string,validator:h.default.func,onValidityChange:h.default.func,alwaysRenderValidity:h.default.bool,resetValidation:h.default.bool,onAddNew:h.default.func,onChange:h.default.func,onClick:h.default.func,onItemsShow:h.default.func,onItemsClose:h.default.func,selectedItemRenderer:h.default.func},a.default=l}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASelectTypeAhead",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HASelectTypeAhead=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.SelectTypeAhead}),define("hui/single-step",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/popup","./core/tooltip","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g){"use strict";function h(a){for(var b=a.target;"HA-SINGLE-STEP"!==b.tagName;)b=b.parentElement;b.emit("dismiss"),b.close()}function i(a){var b=a.target;setTimeout(b._hideCallback,b.duration)}function j(a,b){var c,d,e,g=!1,h=a.querySelector(".single-step-title");if(b&&(g=b.singleStepTitleText||b.getAttribute("singleStepTitleText")),e=g||a.titleText){for("string"==typeof e&&(e=[a.ownerDocument.createTextNode(e)]),c=h.childNodes.length,d=0;d<c;d++)h.removeChild(h.childNodes[0]);h.innerHTML="",f.appendChildCollection(h,e)}}function k(a,b){var c,d,e,g=!1,h=a.querySelector(".single-step-inner");if(b&&(g=b.singleStepMessage||b.getAttribute("singleStepMessage")),e=g||a.message){for("string"==typeof e&&(e=[a.ownerDocument.createTextNode(e)]),c=h.childNodes.length,d=0;d<c;d++)h.removeChild(h.childNodes[0]);h.innerHTML="",f.appendChildCollection(h,e)}}var l,m=null;return l=a.createObject(b,{init:function a(){a.super(this),this._listenersTargets=[],this._titleText="",this._message="",this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this._open=!0,this.setupProperties({_alignment:{default:"left"},open:{default:!0,type:Boolean,change:function(a){a!==this._open&&(this._open=a,this._open?this.show():this.close())}},targetSelector:{default:"_previousSibling",change:function(a){e.removeOldListeners(this),e.setTooltipTargets(this,a),e.resetListeners(this,this.trigger)}},position:{default:"top"},dismissible:{type:Boolean,default:!1,change:function(a){a?(this.classList.add("dismissible"),this.on("button:click",h)):(this.classList.remove("dismissible"),this.off("button:click",h)),e.resetTooltipDismissal(this)}},trigger:{default:"hover",change:function(a){e.resetListeners(this,a)}},duration:{default:0,change:function(a){a>0?this.on("show",i):this.off("show",i),e.resetTooltipDismissal(this)}},attributeChangedCallback:function a(b,c,d){"open"===b?this.open=d:a.super(this,b,c,d)}})},createdCallback:function a(){var b;a.super(this),b=f.getAnimationEventNames(),this.on(b.animationend,function(a){var b=a.target;switch(a.animationName){case"ha-fade-in":b.classList.remove("enter"),b.emit("show");break;case"ha-fade-out":b.classList.remove("leave"),b.classList.remove("visible"),b.emit("close"),d.clearPosition(b)}})},attachedCallback:function(){this._attached||(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger),j(this,this._listenersTargets[0]),k(this,this._listenersTargets[0]),this._open&&this.show())},postRender:function a(){var b,c,d,e,h,i,j,k,l;a.super(this),g.addA11yFocus(this),this.hasAttribute("titleText")?h=this.getAttribute("titleText"):(j=this.querySelector(".single-step-title"),h=j?f.removeNodesSafe(j,j.childNodes):f.removeNodesSafe(this,this.children)),this.hasAttribute("message")?i=this.getAttribute("message"):(k=this.querySelector(".single-step-inner"),i=k?f.removeNodesSafe(k,k.childNodes):f.removeNodesSafe(this,this.children)),b=this.querySelector("div.single-step-container"),c=this.querySelector("div.single-step-bar"),d=this.querySelector("div.single-step-title"),e=this.querySelector("div.single-step-inner"),l=this.querySelector("button.btn-container"),this.style.minWidth="1px",b||(b=this.ownerDocument.createElement("div"),b.className="single-step-container",l=this.ownerDocument.createElement("button"),l.className="hi hi-close btn-icon-only",b.appendChild(l),c=this.ownerDocument.createElement("div"),c.className="single-step-bar",b.appendChild(c),d=this.ownerDocument.createElement("div"),d.className="single-step-title",b.appendChild(d),e=this.ownerDocument.createElement("div"),e.className="single-step-inner",b.appendChild(e),this.appendChild(b)),this.titleText=h,this.message=i},get titleText(){return this._titleText},set titleText(a){this._titleText=a,j(this)},get message(){return this._message},set message(a){this._message=a,k(this)},get open(){return this._open},set open(a){a!==this._open&&(this._open=a,this._open?this.show():this.close())},show:function(a){var b,c,e,f,g,h=17,i=this.classList.contains("visible"),l=a?a.currentTarget:null,n=[];if(l||(l=this._listenersTargets[0]),l){if(j(this,l),k(this,l),!m||!l.isEqualNode(m))for(m=l,n=this.ownerDocument.querySelectorAll("ha-single-step.visible"),g=0;g<n.length;g++)b=n[g],b.close();if(c=this.position.split(" "),e=new Array(c[0]),f=c[1]?new Array(c[1]):new Array(this._alignment),i&&this.classList.contains("leave")&&(this.classList.remove("leave"),d.clearPosition(this)),!(this.className.indexOf("position-")>-1)){if(!d.setPosition(this,l,e,f,h))return;this._resizeMethod=d.installResizeMethod(this,l,e,f,h)}i||(this.classList.add("visible"),this._open=!0)}},close:function(){this._timed&&(clearTimeout(this._timed),delete this._timed),this.classList.contains("visible")&&(this.classList.add("leave"),m=null,this._resizeMethod&&(d.uninstallResizeMethod(this._resizeMethod),this._resizeMethod=null),this._open=!1)}}),c("ha-single-step",l)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASingleStep",["exports","prop-types","react","hui/single-step"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/single-step"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.singleStep),a.HASingleStep=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.onClick=function(a){c.props.onClick&&c.props.onClick(a)},c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={onChange:null},c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){var a=this;this._listeners.onChange=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)},this._huiComponent.addEventListener("change",this._listeners.onChange)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1)}},{key:"render",value:function(){return i.default.createElement("ha-single-step",j({ref:this.handleRef,class:this.props.className,onClick:this.onClick},this.props),this.props.children)}}]),b}(i.default.Component);l.propTypes={id:h.default.string,className:h.default.string,showOnRender:h.default.bool,targetSelector:h.default.string,position:h.default.string,titleText:h.default.string,message:h.default.string,dismissible:h.default.bool,trigger:h.default.string,duration:h.default.oneOfType([h.default.number,h.default.string]),onChange:h.default.func,onClick:h.default.func},a.default=l}),define("hui/stacked-page-messages",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/utils"],function(a,b,c,d){"use strict";function e(a,b){if(a.type!==b.type){if(a.type===j||a.type===k)return-1;if(b.type===j||b.type===k)return 1;if(a.type===l)return-1;if(b.type===l)return 1}return 0}function f(a){var b=a.parentElement,c=a.previousElementSibling;c?c.focus():b&&(c=b.previousElementSibling)&&c.focus()}function g(a,b){return d.getArrayDiff(a,b)}function h(a,b){return d.getArrayDiff(b,a)}var i,j="alert",k="error",l="warn";return i=c.createObject(a,{init:function a(){a.super(this),this._messages=[],this._sortMessages=!0,this.on("ha-page-message:close",function(a){this.remove(this.messages.indexOf(a.target))}.bind(this))},add:function(a,b){var c=this.messages?this.messages.slice():[];null!==a&&(void 0!==b?(c.splice(b,0,a),this._sortMessages=!1):c.push(a)),this.messages=c},remove:function(a){var b;null!==this.messages&&this.messages.length&&a<this.messages.length&&(b=this.messages.slice(),b.splice(a,1),this.messages=b)},set messages(a){var b=g(this._messages,a),c=h(this._messages,a);d.removeNodesSafe(this,b),d.appendChildCollection(this,c),this._messages=a,null!==a&&a.length>0?(this._sortMessages&&a.sort(e),this._sortMessages=!0,this.show()):(this.close(),f(this))},get messages(){return this._messages},postRender:function(){var a=d.removeNodesSafe(this,this.querySelectorAll("ha-page-message"));this.innerHTML="",this.messages=a},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The "hide" method is going to be deprecated. From now please use "close" instead.'),this.emit("hide")},close:function(){this.classList.add("hidden"),this.emit("close")},show:function(){this.classList.remove("hidden"),this.emit("show")},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-stacked-page-messages",i)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAStackedPageMessages",["exports","prop-types","react","./HAPageMessage","hui/stacked-page-messages"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAPageMessage"),require("hui/stacked-page-messages"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAPageMessage,a.stackedPageMessages),a.HAStackedPageMessages=c.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=e(b),j=e(c),k=e(d),l=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},m=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),n=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return h(b,a),m(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b)};this._listeners.onClose=b.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var c=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=c.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow);var d=Array.prototype.slice.call(this._huiComponent.querySelectorAll("ha-page-message"));this._huiComponent.messages=d}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1)}},{key:"handleItemClose",value:function(a){var b=this._huiComponent.messages.indexOf(a.target);b>=0&&this._huiComponent.remove(b)}},{key:"render",value:function(){var a=this,b=j.default.Children.map(this.props.children,function(b){return b&&b.type===k.default?j.default.cloneElement(b,l({},b.props,{onClose:function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b),a.handleItemClose(b)}})):null});return j.default.createElement("ha-stacked-page-messages",l({ref:this.handleRef,class:this.props.className},this.props),b)}}]),b}(j.default.Component);n.propTypes={className:i.default.string,onClose:i.default.func,onShow:i.default.func,children:i.default.oneOfType([i.default.arrayOf(k.default),k.default])},a.default=n}),define("hui/stage",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/contentNode","./core/a11y"],function(a,b,c,d,e){"use strict";function f(){this.open?this.close():this.show()}function g(a){var b,c=a.querySelector("section"),d=a.querySelector(".btn-toggle");c&&a.collapsible&&(b=c.id,b||(c.id="stage-section-"+a.componentId,b=c.id),d&&d.setAttribute("aria-controls",b))}var h,i;return i={header:"header",section:"section",footer:"footer"},h=c.createObject(b,{init:function a(){a.super(this),this._header=null,this._section=null,this._footer=null,d.cacheInputContent(this,i),this.setupProperties({collapsible:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector("header"),d=this.querySelector("section"),e=this.querySelector(".btn-toggle");a?d&&c?(e||(e=this.ownerDocument.createElement("button"),e.className="btn-toggle",e.setAttribute("aria-expanded","false"),e.setAttribute("aria-label","expand"),this.appendChild(e),b=this.ownerDocument.createElement("i"),b.className="hi hi-chevron-down",e.appendChild(b)),d.classList.remove("inner-visible"),g(this)):this.reactLayering||console.error("You can not set collapsible to be true if you do not have both a header and a section."):(e&&this.removeChild(e),d&&d.classList.add("inner-visible"))}},open:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector(".btn-toggle"),d=this.querySelector("section");this.collapsible&&d&&(b=c.querySelector(".hi"),a?(c.setAttribute("aria-expanded","true"),c.setAttribute("aria-label","collapse"),b.classList.add("hi-chevron-up"),b.classList.remove("hi-chevron-down"),d.classList.add("inner-visible")):(c.setAttribute("aria-expanded","false"),c.setAttribute("aria-label","expand"),b.classList.remove("hi-chevron-up"),b.classList.add("hi-chevron-down"),d.classList.remove("inner-visible")))}},reactLayering:{type:Boolean,default:!1}}),this.on("button.btn-toggle:click",f.bind(this))},get header(){return this._header},set header(a){var b,c=this.querySelector("header");for(c||(c=this.ownerDocument.createElement("header"),this.appendChild(c));c.firstElementChild;)c.removeChild(c.firstElementChild);Array.isArray(a)?a.forEach(function(a){c.appendChild(a)}):c.appendChild(a),b=c.querySelector(".ha-back-links"),b?c.classList.add("ha-stage-contains-back-links"):c.classList.remove("ha-stage-contains-back-links"),this._header=a},get section(){return this._section},set section(a){var b=this.querySelector("section");for(b||(b=this.ownerDocument.createElement("section"),this.appendChild(b)),g(this);b.firstElementChild;)b.removeChild(b.firstElementChild);Array.isArray(a)?a.forEach(function(a){b.appendChild(a)}):b.appendChild(a),this.collapsible||b.classList.add("inner-visible"),this._section=a},get footer(){return this.footer},set footer(a){var b=this.querySelector("footer");for(b||(b=this.ownerDocument.createElement("footer"),this.appendChild(b));b.firstElementChild;)b.removeChild(b.firstElementChild);Array.isArray(a)?a.forEach(function(a){b.appendChild(a)}):b.appendChild(a),this._footer=a},show:function(){this.collapsible&&!this.open&&(this.open=!0,this.emit("show"))},close:function(){this.collapsible&&this.open&&(this.open=!1,this.emit("close"))},postRender:function a(){a.super(this),e.addA11yFocus(this);var b=this.querySelector(".btn-toggle");b&&this.removeChild(b),d.storeCachedInput(this,i)}}),a("ha-stage",h)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAStage",["exports","prop-types","react","./HAHeader","./HASection","./HAFooter","hui/core/utils","hui/stage"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAHeader"),require("./HASection"),require("./HAFooter"),require("hui/core/utils"),require("hui/stage"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAHeader,a.HASection,a.HAFooter,a.utils,a.stage),a.HAStage=c.exports}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=h(b),m=h(c),n=h(d),o=h(e),p=h(f),q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(a){i(this,b);var c=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return t.call(c),c.childCount=0,c._huiComponent=null,c.state={classAttributes:null},c}return k(b,a),r(b,[{key:"componentDidMount",value:function(){this.updateHeader(),this.updateSection(),this.updateFooter(),this.props.collapsible&&(2===this.childCount?this._huiComponent.collapsible=this.props.collapsible:console.error("You can not set collapsible to be true if you do not have both a header and a section.")),this.props.open&&(this._huiComponent.open=this.props.open),this.props.className&&this.updateElementClasses()}},{key:"updateElementClasses",value:function(){var a=(0,g.updateClassWithProps)(this._huiComponent,this.props.className);a&&this.setState({classAttributes:a})}},{key:"updateHeader",value:function(){var a=this._huiComponent.querySelector("header");a&&(this._huiComponent.header=Array.prototype.slice.call(a.childNodes),this.childCount++)}},{key:"updateSection",value:function(){var a=this._huiComponent.querySelector("section");a&&(this._huiComponent.section=Array.prototype.slice.call(a.childNodes),this.childCount++)}},{key:"updateFooter",value:function(){var a=this._huiComponent.querySelector("footer");a&&(this._huiComponent.footer=Array.prototype.slice.call(a.childNodes),this.childCount++)}},{key:"render",value:function(){return m.default.createElement("ha-stage",q({ref:this.handleRef,reactLayering:!0,class:this.state.classAttributes},this.props),this.props.children)}}]),b}(m.default.Component);s.propTypes={children:function(a,b,c){var d=(0,g.checkReactChildrenType)(a[b],c,[n.default,o.default,p.default],"HAHeader,HASection,HAFooter");if(d)return d},className:l.default.string,open:l.default.bool,collapsible:l.default.bool};var t=function(){var a=this;this.handleRef=function(b){a._huiComponent=b}};a.default=s}),define("text!hui/step-flow/step-flow-progress-indicator-step.html",[],function(){return'<div class="prog-container">\n    <button class="prog-circle" disabled="true">\n        <div class="prog-step-number">{{stepNumber}}</div>\n        <div  aria-label="Go back to the completed step {{stepNumber}}" class="prog-check hi hi-checkmark"></div>\n    </button>\n    <div class="prog-step-name">{{stepName}}</div>\n</div>'}),define("text!hui/step-flow/step-flow-progress-indicator-bar.html",[],function(){return'<div class="mobile-step-indicator">\n    <div class="mobile-step-title"></div>\n    <div class="mobile-step-number"></div>\n</div>\n<div class="mobile-prog-bar">\n\t<div class="mobile-prog-bar-complete" style="width: 0%;"></div>\n</div>'}),define("hui/step-flow/step-flow-progress-indicator",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","register-component/template!./step-flow-progress-indicator-step.html","register-component/template!./step-flow-progress-indicator-bar.html","../core/utils"],function(a,b,c,d,e,f){"use strict";var g,h=function(a){return f.getComponentFromElement(a,"HA-STEP-FLOW")};return g=a.createObject(b,{init:function a(){a.super(this),this.setupProperties({disableNavigation:{type:Boolean}})},initialize:function(a){var b,c,f,g,h,i=this,j=a.getStepsArray(),k=1,l=function(a){return function(){i[a].apply(i,arguments)}};for(this._setVisible(!1),this._stepFlow=a,this._progressItems={},g=j.filter(function(a){return!a.hideProgressIndicatorItem}).length,c=this.ownerDocument.createElement("div"),c.innerHTML=e(),c.classList.add("mobile-progress-indicator"),this.appendChild(c),this._progressBar=c,this._progressIndicatorSteps=g,h=0;h<j.length;h++)j[h].hideProgressIndicatorItem||(f=h+"",b=this.ownerDocument.createElement("div"),b.setAttribute("data-progress-id",f),b.setAttribute("data-progress-step-number",k),b.innerHTML=d({stepNumber:k++,stepName:j[h].progressIndicatorText?j[h].progressIndicatorText:j[h].titleText}),b.classList.add("progress-indicator-step"),this.listenTo(b.querySelector(".prog-container"),"click",l("_onProgressItemClick")),this.listenTo(j[h],"change-flow-step-progress-indicator-text",l("_onChangeProgressIndicatorText")),this.listenTo(j[h],"change-flow-step-complete",l("_onChangeFlowStepComplete")),j[h].stepComplete&&b.classList.add("completed"),this.listenTo(j[h],"change-flow-step-available",l("_onChangeFlowStepAvailable")),j[h].stepAvailable&&b.classList.add("available"),this.appendChild(b),this._progressItems[f]=b,j[h].setAttribute("data-progress-id",f));this.listenTo(a,"before-step",l("_onBeforeStep")),this.listenTo(a,"after-step",l("_onAfterStep"))},reInitialize:function(a,b){var c;this.reset(),f.removeNodesSafe(this,this.childNodes),this.initialize(a),b&&!b.hideProgressIndicator&&(c=this._getItemFromStep(b),c.classList.add("selected"),this._updateMobileProgressIndicator(b.titleText,c.getAttribute("data-progress-step-number")),this._setVisible(!0))},reset:function(){var a=this;Object.keys(this._progressItems).forEach(function(b){a._progressItems[b].classList.remove("selected")}),this._setVisible(!1)},_getItemFromStep:function(a){var b=a.getAttribute("data-progress-id");return this._progressItems[b]},_onProgressItemClick:function(a){var b,c,d=a.currentTarget.parentElement,e=d.getAttribute("data-progress-id");if(!this.disableNavigation&&!this.classList.contains("hide-progress-indicator")&&!d.classList.contains("selected")&&e&&""!==e)for(c=h(this).getStepsArray(),b=0;b<c.length;b++)if(c[b].stepAvailable&&c[b].getAttribute("data-progress-id")===e){h(this).swipeToAutoForward(c[b]);break}},_onBeforeStep:function(a){if(a){var b;a.fromStep?(b=this._getItemFromStep(a.fromStep))&&b.classList.remove("selected"):a.toStep&&(b=this._getItemFromStep(a.toStep),b&&b.classList.add("selected"),a.toStep.hideProgressIndicator&&!this.classList.contains("hide-progress-indicator")?this._setVisible(!1):this._setVisible(!0)),a.toStep&&a.toStep.hideProgressIndicator?this._setVisible(!1):this._setVisible(!0),a.toStep&&!a.toStep.hideProgressIndicator&&(b=this._getItemFromStep(a.toStep),this._updateMobileProgressIndicator(a.toStep.titleText,b.getAttribute("data-progress-step-number")))}},_updateMobileProgressIndicator:function(a,b){this._progressBar.querySelector(".mobile-step-title").textContent=a,this._progressBar.querySelector(".mobile-step-number").textContent=b+" "+this.parentElement.mobileProgressIndicatorText+" "+this._progressIndicatorSteps;var c=100*b/this._progressIndicatorSteps;this._progressBar.querySelector(".mobile-prog-bar-complete").style.width=c+"%"},_setVisible:function(a){a?(this.classList.remove("hide"),this.classList.remove("hide-progress-indicator"),this.setAttribute("aria-hidden",!1)):(this.setAttribute("aria-hidden",!0),this.classList.add("hide-progress-indicator"))},_onAfterStep:function(a){if(a&&a.toStep){var b=a&&a.toStep&&this._getItemFromStep(a.toStep);b&&b.classList.add("selected")}},_onChangeProgressIndicatorText:function(a){if(a&&a.step){var b=this._getItemFromStep(a.step).querySelector(".prog-step-name"),c=this._progressBar.querySelector(".mobile-step-title");b.textContent=a.progressIndicatorText,c.textContent=a.progressIndicatorText}},_onChangeFlowStepComplete:function(a){if(a&&a.step){var b=this._getItemFromStep(a.step);b&&(a.stepComplete?b.classList.add("completed"):b.classList.remove("completed"))}},_onChangeFlowStepAvailable:function(a){if(a&&a.step){var b,c=this._getItemFromStep(a.step);c&&(b=c.querySelector("button"),a.stepAvailable?(c.classList.add("available"),b.removeAttribute("disabled")):(c.classList.remove("available"),b.setAttribute("disabled","true")))}}}),c("ha-step-flow-progress-indicator",g)}),define("hui/step-flow",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","./core/utils","./step-flow/flow-step","./step-flow/step-flow-progress-indicator","./step-flow/flow-landing","./step-flow/flow-confirmation"],function(a,b,c,d){"use strict";var e,f;return e=d.getAnimationEventNames().animationend,f=a.createObject(b,{init:function a(){var b=this;a.super(this),this._steps=[],this._visible=!1,this._currentStep=null,this._currentIdx=-1,this.setupProperties({progressIndicator:{type:Boolean,default:!1,change:function(a){a?(this._progressIndicator||(this._progressIndicator=this.ownerDocument.createElement("ha-step-flow-progress-indicator"),this._progressIndicator.disableNavigation=this.disableProgressIndicatorNavigation,this.insertBefore(this._progressIndicator,this.firstChild),this._visible&&(this._initializeProgressIndicator(),this._progressIndicator._setVisible(!0))),this.classList.add("with-progress")):this._progressIndicator&&(d.removeNodesSafe(this,[this._progressIndicator]),this._progressIndicator=null,this._progressIndicatorInitialized=!1,this.classList.remove("with-progress"))}},disableProgressIndicatorNavigation:{type:Boolean,change:function(a){this._progressIndicator&&(this._progressIndicator.disableNavigation=a)}},flow:{type:String,default:"linear",change:function(a){this.steps.forEach(function(b){b.stepAvailable=b.stepAvailable||"linear"!==a})}},disableAutoComplete:{type:Boolean},enableAnimateIn:{type:Boolean},closeParentTrowser:{type:Boolean},nextButtonText:{default:"Next"},previousButtonText:{default:"Previous"},doneButtonText:{default:"Done"},mobileProgressIndicatorText:{default:"of"},startIndex:{default:0},navigationDirection:{type:String,default:this.getAttribute("navigationDirection")||"vertical",change:function(a){var b={horizontal:"vertical",vertical:"horizontal"},c=b[a];a&&c&&(this.classList.remove(c),this.classList.add(a))}}}),this.listenTo(this,e,function(a){var c=a.animationName;"ha-step-flow-vertical-out"===c&&b.classList.remove("shown"),"ha-step-flow-vertical-in"===c&&null===this._currentStep&&(b.swipeToIndex(0),b.classList.remove("vertical-in")),"ha-step-progress-indicator-fade-out"===c&&b.querySelector("ha-step-flow-progress-indicator").classList.add("hide"),"ha-step-flow-bg-step"===c&&(b.classList.remove("landing"),b.classList.remove("landing-out")),"ha-step-flow-bg-landing"===c&&(b.classList.add("landing"),b.classList.remove("landing-in"))})},set steps(a){var b=this,c=[];d.removeNodesSafe(b,this._steps),a.forEach(function(a){"HA-FLOW-STEP"===a.tagName&&(b.appendChild(a),a.navigationDirection=b.navigationDirection,a.classList.contains("landing")?(b._landingStep=a,b._landing=a.querySelector("ha-flow-landing")):a.classList.contains("confirmation")?(b._confStep=a,b._confirmation=a.querySelector("ha-flow-confirmation")):(a.stepAvailable=a.stepAvailable||"linear"!==b.flow,c.push(a)))}),this._steps=c},get steps(){return this._steps},set landing(a){this._landingStep=this.ownerDocument.createElement("ha-flow-step"),this._landingStep.replaceSection(a),this._landingStep.stepType="landing",this._landingStep.navigationDirection=this.navigationDirection,this._landing=a,this.insertBefore(this._landingStep,this.querySelector("ha-flow-step"))},get landing(){return this._landing},set confirmation(a){this._confStep=this.ownerDocument.createElement("ha-flow-step"),this._confStep.stepType="confirmation",this._confStep.navigationDirection=this.navigationDirection,this._confirmation=a,this._confStep.replaceSection(this._confirmation),this.appendChild(this._confStep)},get confirmation(){return this._confirmation},attachedCallback:function a(){a.super(this);var b=d.getComponentFromElement(this,"HA-PAGE-MODAL");d.isNode(b)&&b.classList.add("step-flow")},postRender:function a(){var b=this._getChildByTag("ha-flow-landing"),c=this._getChildByTag("ha-flow-confirmation"),d=this.querySelectorAll("ha-flow-step")||[];a.super(this),this.steps=Array.prototype.slice.call(d),b&&(this.landing=b),c&&(this.confirmation=c)},show:function(){this._initializeProgressIndicator(),this._visible||(this.classList.remove("vertical-out"),this.classList.add("shown"),this.enableAnimateIn?this.classList.add("vertical-in"):null===this._currentStep&&this.swipeToIndex(this.startIndex||0),this._visible=!0,this.emit("show"))},close:function(){if(this._visible){if(this.closeParentTrowser){var a=d.getComponentFromElement(this,"HA-TROWSER");a&&(a.close(),this.classList.remove("shown"))}this.classList.remove("vertical-in"),this.classList.add("vertical-out"),this._visible=!1,this.emit("close"),this._reset()}},swipeToNext:function(){this.swipeToIndex(this._currentIdx+1,!0)},swipeToPrevious:function(){this.swipeToIndex(this._currentIdx-1,!1)},swipeToById:function(a,b){var c=this._findById(a);this.swipeToIndex(c,b)},swipeToAutoForward:function(a){var b=this.getStepsArray().indexOf(a);this.swipeToIndex(b,b>this._currentIdx)},swipeToIndex:function(a,b){var c,d=this,e=function(){d._setTransition(!0),d._currentStep&&b&&!d.disableAutoComplete&&(d._currentStep.stepComplete=!0,d._currentStep.stepAvailable=!0),null!==a?d._gotoStep(a,b):(d._swipeBusy=!1,d.close())};if(!this._swipeBusy){if(this._swipeBusy=!0,this._currentStep&&b){if(!(c=this._currentStep.validate()))return void(this._swipeBusy=!1);if(this._isPromise(c))return this._startSpinner("validate",this._currentStep),void c.then(function(a){return a?e():(d._stopSpinner("validate",d._currentStep),d._swipeBusy=!1),a},function(){return d._stopSpinner("validate",d._currentStep),d._swipeBusy=!1,!1})}e()}},getStepsArray:function(){var a=[];return this._landingStep&&a.push(this._landingStep),a=a.concat(this._steps),this._confStep&&a.push(this._confStep),a},removeStepById:function(a){var b,c,f=-1,g=this;for(b=0;b<this._steps.length;b++)if(this._steps[b].stepId===a){f=b;break}-1!==f&&(c=this._steps[f],this._steps.splice(f,1),this._currentStep&&this._currentStep.stepId===a?(this._currentIdx--,this._gotoStep(this._currentIdx+1,!0),this.listenTo(c,e,function(){d.removeNodesSafe(g,[c])})):this._currentIdx>f?(this._currentIdx--,this._currentStep=this.getStepsArray()[this._currentIdx],d.removeNodesSafe(this,[c])):d.removeNodesSafe(this,[c]),this._progressIndicator&&this._currentStep&&this._progressIndicator.reInitialize(this,this._currentStep))},_initializeProgressIndicator:function(){this._progressIndicator&&!this._progressIndicatorInitialized&&(this._progressIndicator.initialize(this),this._progressIndicatorInitialized=!0)},_getChildByTag:function(a){var b,c=this.querySelectorAll(a);for(b=0;b<c.length;b++)if(c[b].parentElement===this)return c[b];return null},_reset:function(){this._currentStep=null,this._currentIdx=-1,this.getStepsArray().forEach(function(a){a._setup(),a.stepComplete=!1,a.stepAvailable=!1}),this._progressIndicator&&this._progressIndicator.reset()},_findById:function(a){var b,c=this.getStepsArray()||[];for(b=0;b<c.length;b++)if(c[b].stepId===a)return b;return-1},_doneOutTransition:function(a){this.emit("after-step",{fromStep:a,toStep:this._currentStep}),this._swipeBusy=!1,this._setTransition(!1)},_isPromise:function(a){return!(!a||"function"!=typeof a.then)},_setTransition:function(a){a?this.classList.add("transition"):this.classList.remove("transition")},_setBackground:function(a){!this._currentStep&&a.isLanding()?this.classList.add("landing"):this._currentStep&&(this._currentStep.isLanding()&&!a.isLanding()?this.classList.add("landing-out"):a.isLanding()&&!this._currentStep.isLanding()&&this.classList.add("landing-in"))},_gotoStep:function(a,b){var c,d=this.getStepsArray()[a],e=this,f=function(){var c=e._currentStep&&(e._currentStep.isLanding()||d&&d.isLanding());e._currentStep&&(e._currentStep._swipeOut(b,c),e._stopSpinner("validate",e._currentStep)),setTimeout(function(){d.initialize(e),e.emit("before-step",{fromStep:e._currentStep,toStep:d}),d._swipeIn(b),e._currentStep=d,e._currentIdx=a,e._swipeBusy=!1},c?250:0)};d&&(this._setBackground(d),d.beforeShowPromise&&(c="function"==typeof d.beforeShowPromise?d.beforeShowPromise():d.beforeShowPromise),this._isPromise(c)?(this._startSpinner("before-show",d),c.then(function(){return f(),e._stopSpinner("before-show",d),!0},function(){return e._stopSpinner("before-show",d),e._swipeBusy=!1,!1})):f())},_getSpinner:function(){var a=this.querySelector("div.ha-step-flow-spinner");return a||(a=this.ownerDocument.createElement("div"),a.appendChild(this.ownerDocument.createElement("div")),a.classList.add("ha-step-flow-spinner"),this.appendChild(a)),a},_startSpinner:function(a,b){var c=this._getSpinner();c.style.top=-this.getBoundingClientRect().top+"px",c.classList.add("spinner-show"),this.emit("start-spinner",{reason:a,step:b})},_stopSpinner:function(a,b){this._getSpinner().classList.remove("spinner-show"),this.emit("stop-spinner",{reason:a,step:b})}}),c("ha-step-flow",f)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAStepFlow",["exports","prop-types","react","./HAFlowStep","./HAFlowLanding","./HAFlowConfirmation","hui/core/utils","hui/step-flow"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAFlowStep"),require("./HAFlowLanding"),require("./HAFlowConfirmation"),require("hui/core/utils"),require("hui/step-flow"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAFlowStep,a.HAFlowLanding,a.HAFlowConfirmation,a.utils,a.stepFlow),a.HAStepFlow=c.exports}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=h(b),m=h(c),n=h(d),o=h(e),p=h(f),q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(a){i(this,b);var c=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return t.call(c),c._huiComponent=null,c._listeners={},c}return k(b,a),r(b,[{key:"componentDidMount",value:function(){var a=this;if(this._huiComponent.postRender(),this._huiComponent.show)this._huiComponent.show();else{var b=function(b){b.stopPropagation(),a._huiComponent.show()};this._listeners.componentUpgraded=b.bind(this),this._huiComponent.addEventListener("component-upgraded",this._listeners.componentUpgraded)}var c=function(b){a.props.onNext&&a.props.onNext(b)};this._listeners.onNext=c.bind(this),this._huiComponent.addEventListener("next",this._listeners.onNext);var d=function(b){a.props.onPrevious&&a.props.onPrevious(b)};this._listeners.onPrevious=d.bind(this),this._huiComponent.addEventListener("previous",this._listeners.onPrevious);var e=function(b){a.props.onDone&&a.props.onDone(b)};this._listeners.onDone=e.bind(this),this._huiComponent.addEventListener("done",this._listeners.onDone);var f=function(b){a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=f.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow);var g=function(b){a.props.onClose&&a.props.onClose(b)};this._listeners.onClose=g.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var h=function(b){a.props.onBeforeStep&&a.props.onBeforeStep(b)};this._listeners.onBeforeStep=h.bind(this),this._huiComponent.addEventListener("before-step",this._listeners.onBeforeStep);var i=function(b){a.props.onAfterStep&&a.props.onAfterStep(b)};this._listeners.onAfterStep=i.bind(this),this._huiComponent.addEventListener("after-step",this._listeners.onAfterStep);var j=function(b){a.props.onStartSpinner&&a.props.onStartSpinner(b)};this._listeners.onStartSpinner=j.bind(this),this._huiComponent.addEventListener("start-spinner",this._listeners.onStartSpinner);var k=function(b){a.props.onStopSpinner&&a.props.onStopSpinner(b)};this._listeners.onStopSpinner=k.bind(this),this._huiComponent.addEventListener("stop-spinner",this._listeners.onStopSpinner)}},{key:"componentDidUpdate",value:function(a){this.props.show!==a.show&&(this.props.show?this._huiComponent.show():this._huiComponent.close()),this.props.removeStepId!==a.removeStepId&&this._huiComponent.removeStepById(this.props.removeStepId)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("next",this._listeners.onNext,!1),this._huiComponent.removeEventListener("previous",this._listeners.onPrevious,!1),this._huiComponent.removeEventListener("done",this._listeners.onDone,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1),this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("before-step",this._listeners.onBeforeStep,!1),this._huiComponent.removeEventListener("after-step",this._listeners.onAfterStep,!1),this._huiComponent.removeEventListener("start-spinner",this._listeners.onStartSpinner,!1),this._huiComponent.removeEventListener("stop-spinner",this._listeners.onStopSpinner,!1),this._huiComponent.removeEventListener("component-upgraded",this._listeners.componentUpgraded,!1)}},{key:"render",value:function(){return m.default.createElement("ha-step-flow",q({ref:this.handleRef,class:this.props.className},this.props),this.props.children)}}]),b}(m.default.Component);s.propTypes={children:function(a,b,c){if(!a.allowAllChildren){var d=(0,g.checkReactChildrenType)(a[b],c,[n.default,o.default,p.default],"HAFlowStep,HAFlowLanding,HAFlowConfirmation");if(d)return d}},className:l.default.string,id:l.default.string,show:l.default.bool,currentStep:l.default.number,flow:l.default.string,progressIndicator:l.default.bool,startIndex:l.default.number,nextButtonText:l.default.string,previousButtonText:l.default.string,doneButtonText:l.default.string,landing:l.default.object,steps:l.default.array,confirmation:l.default.object,disableAutoComplete:l.default.bool,enableAnimateIn:l.default.bool,closeParentTrowser:l.default.bool,onNext:l.default.func,onPrevious:l.default.func,onDone:l.default.func,onShow:l.default.func,onClose:l.default.func,onBeforeStep:l.default.func,onAfterStep:l.default.func,onStartSpinner:l.default.func,onStopSpinner:l.default.func,allowAllChildren:l.default.bool,disableProgressIndicatorNavigation:l.default.bool,removeStepId:l.default.string,navigationDirection:l.default.oneOf(["vertical","horizontal"])},s.defaultProps={navigationDirection:"vertical"};var t=function(){var a=this;this.handleRef=function(b){a._huiComponent=b}};a.default=s}),define("hui/switch-button",["register-component/v2/UIComponent","register-component/v2/register","./core/utils","object-utils/classes","./core/a11y"],function(a,b,c,d,e){function f(a,b,d,e){var f,g,h,i=d.firstChild.textContent.toUpperCase(),j=e.firstChild.textContent.toUpperCase();if(h=parseInt(window.getComputedStyle(d).paddingLeft.replace("px",""),10)+parseInt(window.getComputedStyle(d).paddingRight.replace("px",""),10)," "===(g=window.getComputedStyle(d).fontSize+" "+window.getComputedStyle(d).fontFamily)&&isNaN(h)||0===h)return void(a._widthNotSet=!0);f=Math.max(c.getTextWidth(i,g),c.getTextWidth(j,g))+1,b.style.width=f+h+"px"}var g;return g=d.createObject(a,{init:function a(){a.super(this),this.setupProperties({value:{default:"on",change:function(a){this._nodes.input.value=a}},name:{default:"",change:function(a){this._nodes.input.name=a}},label:{default:"",change:function(a){var b=this.querySelector(".label-div"),c=this.querySelector("input"),d=this.querySelector("div:not(.label-div)");a?(b||(b=this.ownerDocument.createElement("div"),b.classList.add("label-div"),b.id="ha-switch-button-label-"+this.componentId,c.setAttribute("aria-describedby",b.id),this.insertBefore(b,d)),b.textContent=a):b&&(this.removeChild(b),c.removeAttribute("aria-describedby"))}},labelOff:{default:"OFF",change:function(a){this._nodes.labelOff.textContent=a,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff)}},labelOn:{default:"ON",change:function(a){this._nodes.labelOn.textContent=a,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff)}},checked:{type:Boolean,default:!1,change:function(a){this._nodes.input.checked=a,this._nodes.input.setAttribute("aria-checked",a)}}})},postRender:function a(){var b,d,f=this.querySelector("input"),g=this.querySelector(".is-switch-on"),h=this.querySelector(".is-switch-off"),i=this.querySelector("label"),j=this.ownerDocument;a.super(this),i?d=i.querySelector("i"):(d=j.createElement("i"),h=j.createElement("span"),h.classList.add("is-switch-off"),h.setAttribute("data-switch","OFF"),g=j.createElement("span"),g.classList.add("is-switch-on"),g.setAttribute("data-switch","ON"),i=j.createElement("label"),i.setAttribute("aria-live","assertive"),i.appendChild(g),i.appendChild(h),i.appendChild(d)),f||(f=j.createElement("input"),f.type="checkbox",f.setAttribute("role","switch"),f.appendChild(i),b=j.createElement("div"),b.appendChild(f),b.appendChild(i),this.appendChild(b)),i.htmlFor="ha-switch-button-"+this.componentId,f.id="ha-switch-button-"+this.componentId,h.textContent=this.labelOff,g.textContent=this.labelOn,this._nodes={input:f,label:i,labelOn:g,labelOff:h},c.stopNativeEvent(this,g,"click"),c.stopNativeEvent(this,h,"click"),c.stopNativeEvent(this,d,"click"),this.listenTo(f,"click",function(a){a.stopPropagation(),this.checked=a.target.checked,this.emit("click")}.bind(this)),this.listenTo(f,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this)),e.addA11yFocus(this,f,i)},attachedCallback:function a(){a.super(this),this._widthNotSet&&(this._widthNotSet=!1,f(this,this._nodes.label,this._nodes.labelOn,this._nodes.labelOff))}}),b("ha-switch-button",g)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HASwitchbutton",["exports","prop-types","react","hui/switch-button"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/switch-button"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.switchButton),a.HASwitchbutton=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=b.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var c=function(b){b.stopPropagation(),a.props.onClick&&a.props.onClick(b)};this._listeners.onClick=c.bind(this),this._huiComponent.addEventListener("click",this._listeners.onClick)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("click",this._listeners.onClick,!1)}},{key:"render",value:function(){return i.default.createElement("ha-switch-button",j({ref:this.handleRef},this.props))}}]),b}(i.default.Component);l.propTypes={label:h.default.string,labelOn:h.default.string,labelOff:h.default.string,value:h.default.string,name:h.default.string,checked:h.default.bool,onChange:h.default.func,onClick:h.default.func},l.defaultProps={labelOn:" ",labelOff:" "},a.default=l}),define("hui/tab",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/utils","./core/a11y"],function(a,b,c,d,e){"use strict";function f(a){var b;return b=a.ownerDocument.createElement("div"),b.className="content",a.appendChild(b),b}function g(a,b){var c=a.querySelector("i:not(.hi)"),e=a.querySelector(".content"),g=b.className||a.badgeClass,h=b.textContent||a.badgeText;e||(e=f(a)),g&&h?c?(c.className=g,c.textContent=h):e.appendChild(d.createElement("i",{className:g,textContent:h})):c&&e.removeChild(c)}function h(a){if(a){var b=a.querySelector(".content>span"),c=a.querySelector(".content>strong"),d=a.classList.contains("active");b&&c&&(d?(b.setAttribute("aria-hidden",!0),c.setAttribute("aria-hidden",!1),a.setAttribute("aria-selected",!0)):(b.setAttribute("aria-hidden",!1),c.setAttribute("aria-hidden",!0),a.setAttribute("aria-selected",!1)))}}return a("ha-tab",b.createObject(c,{init:function a(){a.super(this),this._section=null,this.setupProperties({icon:{default:"",change:function(a){var b,c,d=this.querySelector("i.hi"),e=this.querySelector(".content");a?(this.classList.add("tab-icon"),c=this.querySelector("span"),e||(e=f(this)),d||(d=this.ownerDocument.createElement("i"),d.classList.add("hi"),c?e.insertBefore(d,c):e.appendChild(d)),d.classList.length>1&&(b=d.classList[d.classList.length-1],d.classList.remove(b)),d.classList.add(a)):(this.classList.remove("tab-icon"),d&&e.removeChild(d))}},titleText:{default:"",change:function(a){var b=this.querySelector(".content>span"),c=this.querySelector(".content>strong"),d=this.querySelector(".content");a?(d||(d=f(this)),b||c?(b.textContent=a,c.textContent=a):(b=this.ownerDocument.createElement("span"),b.textContent=a,c=this.ownerDocument.createElement("strong"),c.textContent=a,d.appendChild(b),d.appendChild(c)),h(this)):b&&c&&(c.innerHTML="",b.innerHTML="")}},badgeClass:{default:"",change:function(a,b){(a||!a&&b)&&g(this,{className:a})}},badgeText:{default:"",change:function(a,b){(a||!a&&b)&&g(this,{textContent:a})}}})},set section(a){Array.isArray(a)||(a=[a]),this._section=a,this.emit("section-property-change")},get section(){return this._section},set active(a){a?this.classList.add("active"):this.classList.remove("active"),h(this)},get active(){return this.classList.contains("active")},preRender:function a(){a.super(this)},postRender:function a(){var b,c,f,g;for(a.super(this),this.setAttribute("role","tab"),b=[],c=0;c<this.childNodes.length;c++)this.childNodes[c].classList&&this.childNodes[c].classList.contains("content")||b.push(this.childNodes[c]);0===b.length&&this.id?(f=d.getComponentFromElement(this,"HA-TABS"),g="#"+this.getAttribute("aria-controls"),this.section=[].slice.call(f.querySelector(g).childNodes)):this.section=b,e.addA11yFocus(this)}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATab",["exports","prop-types","react","hui/tab"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/tab"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.tab),a.HATab=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){this._huiComponent.postRender()}},{key:"render",value:function(){return i.default.createElement("ha-tab",j({ref:this.handleRef},this.props),this.props.children)}}]),b}(c.Component);l.propTypes={className:h.default.string,titleText:h.default.string,icon:h.default.string,section:h.default.array,badgeClass:h.default.string,badgeText:h.default.string,children:h.default.any},a.default=l}),define("hui/tabs",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./core/a11y","./core/keys","./core/utils","./core/deviceUtils","./tab","./popover","./menu-button","./item"],function(a,b,c,d,e,f,g){"use strict";function h(a,b){var c=n(a,b);q(b,a,b.querySelector("#"+c))}function i(a,b,c){var d,e,f,g=c.querySelector("section.ha-tabs-content"),h=l(b,c);if(e=n(b,c),d=c.querySelector("#"+e),d||(d=c.ownerDocument.createElement("div"),g.appendChild(d),d.id=e,d.setAttribute("aria-labelledby",o(b,c)),d.setAttribute("role","tabpanel")),d.setAttribute("aria-hidden",!h),h?d.classList.add("active"):d.classList.remove("active"),a.section){for(d.innerHTML="",f=0;f<a.section.length;f++)d.appendChild(a.section[f]);q(c,b,d),r(c,b)}}function j(a,b){return 0===a?0:!a||!b.tabs||a>b.tabs.length?-1:a}function k(a,b){if(a){a=a&&"HA-ITEM"===a.nodeName?a:f.getComponentFromElement(a,"HA-TAB");var c;c=g.isHandheld()&&b.useTabButton?b.querySelector(".ha-tabs-header ha-item.active"):b.querySelector(".ha-tabs-header .active"),p(c,b),p(a,b),b.selectedIndex=b.tabs.indexOf(a),a.focus()}}function l(a,b){return b.selectedIndex>0?b.selectedIndex===a:0===a}function m(a){return parseInt(a.forHTML.slice(-1),10)}function n(a,b){return b.tabs[a]&&b.tabs[a].hasAttribute("aria-controls")?b.tabs[a].getAttribute("aria-controls"):"ha-tab-content-"+b.componentId+"-"+a}function o(a,b){return b.tabs[a]&&b.tabs[a].id?b.tabs[a].id:"ha-tab-"+b.componentId+"-"+a}function p(a,b){if(a){var c=a.forHTML,d=c?b.querySelector("#"+c):a,e=a.classList&&a.classList.contains("active");if(!d)return;e?("HA-TAB"===a.tagName?a.active=!1:a.classList.remove("active"),a.setAttribute("aria-expanded",!1),a.setAttribute("tabindex",-1),d.classList.remove("active"),d.setAttribute("aria-hidden",!0)):("HA-TAB"===a.tagName?a.active=!0:a.classList.add("active"),a.setAttribute("aria-expanded",!0),a.setAttribute("tabindex",0),d.classList.add("active"),d.setAttribute("aria-hidden",!1))}}function q(a,b,c){var e;e=d.getBoundariesTabableElement(c,!0),a.jumpers[b]=e.last||e.first}function r(a,b){function c(a){var b=f.getComponentFromElement(a.target,"HA-TABS");a.keyCode!==e.TAB||a.shiftKey||s(a.target.jumpTo,b,a)}function d(a,b){g=a.jumpers[b],(i=a.querySelector("#"+o(parseInt(b,10)+1,a)))&&g&&(g.jumpTo=i,a.stopListening(g,"keydown",c),a.listenTo(g,"keydown",c))}var g,h,i;if(b)d(a,b);else for(h in a.jumpers)d(a,h)}function s(a,b,c,d){a&&(f.stopEvent(c),k(a,b),d?d.focus():a.focus())}function t(a){var b,c,d=a.target,e=-1;for(c=f.getComponentFromElement(d,"HA-TABS"),b=0;b<c.tabs.length;b++)if(c.tabs[b]===d){e=b;break}i(d,e,c)}function u(a,b){var c,d;d=a._tabs[b],d.id=o(b,a),d.forHTML=n(b,a),d.setAttribute("aria-controls",n(b,a)),c=l(b,a),d.setAttribute("aria-selected",c),d.setAttribute("aria-expanded",c),c?d.classList.add("active"):d.classList.remove("active"),a.querySelector("header").appendChild(d),i(d,b,a)}function v(a,b){return a.map(function(a,c){var d=b.ownerDocument.createElement("ha-tab"),e=a.titleText||a.getAttribute("label"),f=l(c,b);return d.section=Array.prototype.slice.call(b.querySelector("#"+a.getAttribute("aria-controls")).children),d.titleText=e,d.classList[f?"add":"remove"]("active"),d})}function w(a,b){var c=[],d=a.ownerDocument.createElement("ha-menu-button"),e=a.ownerDocument.createElement("span");e.className="caret",d.querySelector("button").appendChild(e),b.forEach(function(b,e){var f=a.ownerDocument.createElement("ha-item"),g=b.titleText||b.getAttribute("titleText"),h=n(e,a),j=l(e,a);j&&(d.label=g),f.forHTML=n(e,a),f.section=b.section,f.label=f.textContent=f.titleText=g,f.value=h,c.push(f),f.id=o(e,a),f.forHTML=h,f.setAttribute("aria-controls",h),f.setAttribute("aria-selected",j),f.classList[j?"add":"remove"]("active"),i(f,e,a)}),a._oldTabs||(a._oldTabs=a._tabs),a._tabs=c,d.items=c,d.on("select",function(b){var c=b.target,d=c.items[c.selectedIndex];c.label=d.textContent,a.selectedIndex=c.selectedIndex}),a.querySelector("header").appendChild(d),d._getPopover().classList.remove("from-bottom")}return a("ha-tabs",b.createObject(c,{init:function a(){a.super(this),this.jumpers={},this._tabs=null,this.setupProperties({selectedIndex:{default:0,type:{parse:function(a){return Number(a)},stringify:function(a){return String(a)}},change:function(a){var b,c=j(a,this);this.tabs&&-1!==c&&(b=this.tabs[a])&&!b.classList.contains("active")&&k(b,this)}},useTabButton:{default:g.isHandheld(),type:f.YesNoType,change:function(a){!a&&this._oldTabs?this.tabs=this._oldTabs:this.tabs&&(this.tabs=this.tabs)}}})},postRender:function a(){a.super(this),d.addA11yFocus(this)},set tabs(a){function b(){var b;if(c.querySelector("header").innerHTML="",c.querySelector("section").innerHTML="",c._tabs=a||[],g.isHandheld()&&c.useTabButton)w(c,c._tabs);else{for(c._oldTabs=c._tabs,b=0;b<c._tabs.length;b++)u(c,b),c.listenTo(c._tabs[b],"section-property-change",t);r(c)}}var c=this;b(a)},get tabs(){return this._tabs},get selectedItem(){return this._tabs[this.selectedIndex]},set selectedItem(a){},ready:function a(){a.super(this);var b,c=this.querySelector("header"),d=this.querySelector("section"),e=null!==this.querySelector(".ha-tabs-content"),h=Array.prototype.slice.call(this.querySelectorAll("ha-tab")).concat(Array.prototype.slice.call(this.querySelectorAll("ha-item")));if(e){if(this.useTabButton&&g.isHandheld())this._tabs=v(h,this),this.querySelector("header").innerHTML="",w(this,this._tabs);else for(this._tabs=h,b=0;b<this._tabs.length;b++)u(this,b),this.listenTo(this._tabs[b],"section-property-change",t);r(this)}else c=this.ownerDocument.createElement("header"),c.classList.add("ha-tabs-header"),c.setAttribute("role","tablist"),d=this.ownerDocument.createElement("section"),d.classList.add("ha-tabs-content"),this.appendChild(c),this.appendChild(d),this.tabs=f.removeNodesSafe(this,h),this.tabIndex="-1"},add:function(a,b){var c,d,e=this.tabs.length;a&&"HA-TAB"===a.tagName&&(c=0===b?0:b||e,d=this.tabs,d.splice(c,0,a),this.tabs=d)},remove:function(a){var b,c=j(a,this);-1!==c&&(b=this.tabs,b.splice(c,1),this.tabs=b)},attachedCallback:function(){var a=this.querySelector("ha-tab");a&&(a.tabIndex=0)},createdCallback:function a(){a.super(this),this.on("header ha-tab:click",function(a){k(a.target,this),this.emit("select")}.bind(this)),this.on("header ha-tab:keydown",function(a){var b,c,d,f,g=a.target;a.keyCode===e.TAB?(c=m(g),h(c,this),a.shiftKey?(d=c-1)>=0&&(b=this.querySelector("#"+o(d,this)),this.jumpers.hasOwnProperty(d)&&this.jumpers[d]?s(b,this,a,this.jumpers[d]):s(b,this,a)):(f=c+1)<Object.keys(this.tabs).length&&(b=this.querySelector("#"+o(f,this)),(0===Object.keys(this.jumpers).length||this.jumpers.hasOwnProperty(c)&&!this.jumpers[c])&&s(b,this,a))):a.keyCode===e.LEFT&&g.previousElementSibling?(b=g.previousElementSibling,s(b,this,a)):a.keyCode===e.RIGHT&&g.nextElementSibling&&(b=g.nextElementSibling,s(b,this,a))}.bind(this))}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATabs",["exports","prop-types","react","hui/tabs"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/tabs"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.tabs),a.HATabs=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=d(b),j=d(c),k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return h(b,a),l(b,[{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onSelect&&a.props.onSelect(b)};this._listeners.onSelect=b.bind(this),this._huiComponent.addEventListener("select",this._listeners.onSelect),this.updateTabChildren(),(this._observer=new MutationObserver(function(b){return b.forEach(function(b){[].concat(e(b.removedNodes)).forEach(function(b){var c=b.getAttribute("data-index");a._huiComponent.remove(c)}),[].concat(e(b.addedNodes)).forEach(function(b){var c=b.getAttribute("data-index"),d=b.querySelector("ha-tab");a._huiComponent.add(d,c)})})})).observe(this._huiComponent,{childList:!0})}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("select",this._listeners.onSelect,!1),this._observer&&(this._observer.disconnect(),this._observer=null)}},{key:"updateTabChildren",value:function(){var a=this._huiComponent.querySelectorAll("ha-tab");a&&a.length>0&&(this._huiComponent.tabs=Array.prototype.slice.call(a))}},{key:"render",value:function(){var a=Array.isArray(this.props.children)?this.props.children:[this.props.children];return j.default.createElement("ha-tabs",k({ref:this.handleRef,class:this.props.className},this.props),a.map(function(a,b){return j.default.createElement("span",{key:a.key||b,"data-index":b},a)}))}}]),b}(c.Component);m.propTypes={className:i.default.string,selectedIndex:i.default.number,onSelect:i.default.func,children:i.default.any},a.default=m});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATextField",["exports","prop-types","react","hui/core/utils","hui/text-field"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("hui/core/utils"),require("hui/text-field"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.utils,a.textField),a.HATextField=c.exports}}(this,function(a,b,c,d){"use strict";function e(a){return a&&a.__esModule?a:{default:a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var i=e(b),j=e(c),k=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},l=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),m=function(a){function b(a){f(this,b);var c=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c.state={classAttributes:null},c}return h(b,a),l(b,[{key:"testValidity",value:function(){if(this.props.onValidityChange){var a=void 0;this._huiComponent.checkValidity&&(a=this._huiComponent.checkValidity()),this._lastValidity!==a&&(this._lastValidity=a,this.props.onValidityChange(a))}}},{key:"componentDidMount",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onChange&&a.props.onChange(b)};this._listeners.onChange=b.bind(this),this._huiComponent.addEventListener("change",this._listeners.onChange);var c=function(b){b.stopPropagation(),a.props.onInput&&a.props.onInput(b),a.testValidity()};this._listeners.onInput=c.bind(this),this._huiComponent.addEventListener("input",this._listeners.onInput);var d=function(a){a.stopPropagation()};this._listeners.onShow=d.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow);var e=function(a){a.stopPropagation()};this._listeners.onClose=e.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var f=function(a){a.stopPropagation()};this._listeners.onDismiss=f.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss),window.setTimeout(function(){a._huiComponent&&a.props.validator&&(a._huiComponent.validator=a.props.validator),a.props.alwaysRenderValidity&&a._huiComponent.reportValidity(),a.props.resetValidation&&a._huiComponent.resetValidation(),a.testValidity()},0),this.props.className&&this.updateElementClasses(),this.props.optional&&(this._huiComponent.optional=!0)}},{key:"updateElementClasses",value:function(a){var b=void 0;(b=a?(0,d.updateClassWithProps)(this._huiComponent,a.className):(0,d.updateClassWithProps)(this._huiComponent,this.props.className))&&this.setState({classAttributes:b})}},{key:"componentWillReceiveProps",value:function(a){this.state.classAttributes!==a.className&&this.updateElementClasses(a)}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("change",this._listeners.onChange,!1),this._huiComponent.removeEventListener("input",this._listeners.onInput,!1),this._huiComponent.removeEventListener("show",this._listeners.onShow,!1),this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._huiComponent.resetValidation()}},{key:"componentDidUpdate",value:function(){this.props.validator&&(this._huiComponent.validator=this.props.validator),this.testValidity(),this.props.alwaysRenderValidity&&this._huiComponent.reportValidity(),this.props.resetValidation&&this._huiComponent.resetValidation()}},{key:"render",value:function(){return j.default.createElement("ha-text-field",k({ref:this.handleRef,class:this.state.classAttributes},this.props),this.props.children)}}]),b}(j.default.Component);m.propTypes={className:i.default.string,disabled:i.default.bool,label:i.default.string,labelOptional:i.default.string,minLength:i.default.oneOfType([i.default.number,i.default.string]),maxLength:i.default.oneOfType([i.default.number,i.default.string]),name:i.default.string,optional:i.default.bool,placeholder:i.default.string,pattern:i.default.string,size:i.default.number,value:i.default.string,autoComplete:i.default.string,required:i.default.bool,noRequiredIndicator:i.default.bool,min:i.default.number,max:i.default.number,requiredMessage:i.default.string,invalidMessage:i.default.string,validator:i.default.func,onValidityChange:i.default.func,alwaysRenderValidity:i.default.bool,resetValidation:i.default.bool,onChange:i.default.func,onInput:i.default.func},a.default=m}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATextFieldTypeAhead",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HATextFieldTypeAhead=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.TextFieldTypeAhead}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATextFieldV2",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HATextFieldV2=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.TextField}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATextarea",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HATextarea=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Textarea}),define("text!hui/toast-message/toast-message.html",[],function(){return'<template>\n\t<div class="toast-wrapper">\n\t\t<button aria-label="Close" class="hi hi-close"></button>\n\t\t<i class="hi hi-confirm hi-circle-check"></i>\n\t\t<p>{{{message}}}</p>\n\t</div>\n</template>'}),define("hui/toast-message",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent","register-component/template!./toast-message/toast-message.html","./core/keys","./core/utils","./core/a11y","./core/event"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){window.clearTimeout(a),a=null}function j(a){i(m),a.classList.remove("animate"),m=window.setTimeout(function(){a.classList.remove("visible"),a._clearTimeout&&a._clearTimeout()}.bind(a),n)}var k,l,m,n=200;return k=a.createObject(c,{init:function a(){a.super(this),this.template=d,this._message="",this._type="confirm",this._dismissible=!0,this.setupProperties({duration:{default:8e3,type:Number}}),this.tabIndex="-1",this.on("button:click",function(){this.emit("dismiss"),this.close()}.bind(this)),this.on("keydown",function(a){a.keyCode===e.ESCAPE&&this.close()}.bind(this))},set type(a){console.warn('DEPRECATION WARNING: "type" property is going to be deprecated, please from now on don\'t use it.')},get type(){return console.warn('DEPRECATION WARNING: "type" property is going to be deprecated, please from now on don\'t use it.'),this._type},set message(a){for(var b,c=this.querySelector(".toast-wrapper > p"),d=0;c.firstChild;)c.removeChild(c.firstChild);if(a)if("string"==typeof a)c.innerHTML=a;else if(Array.isArray(a))for(;d<a.length;d++)(b=a[d])&&b.nodeType&&c.appendChild(b);else a.nodeType&&c.appendChild(a);this._message=a},get message(){return this._message},set dismissible(a){var b=this.querySelector("button");a?(b.classList.remove("hidden"),b.classList.add("show")):(b.classList.remove("show"),b.classList.add("hidden")),this._dismissible=a},get dismissible(){return this._dismissible},show:function(){l&&l.classList.contains("visible")&&!l.isEqualNode(this)&&l.close(),l=this;var a,b;this.style.marginLeft="-"+Number(this.offsetWidth)/2+"px",this._clearTimeout(),this.classList.add("animate"),this.classList.add("visible"),this.emit("show"),this.duration>0&&(a=setTimeout(this.close.bind(this),this.duration),this._clearTimeout=function(){clearTimeout(a),this._clearTimeout=function(){}}),this._lastFocus=document.activeElement,this.focus(),(b=document.querySelector("ha-page-modal[visible]"))&&h.on(b,"did-close",function a(){l&&l.close(),h.off(b,"did-close",a)})},close:function(){l=null,j(this),this.emit("close"),this.emit("hide"),this._lastFocus&&this._lastFocus.focus()},hide:function(){console.warn('DEPRECATION WARNING: This method is going to be deprecated, please from now on use "close" instead.'),this.close()},preRender:function(){var a=this.querySelector(".toast-wrapper > p");this._message=a?f.removeNodesSafe(a,a.childNodes):f.removeNodesSafe(this,this.childNodes),this._clearTimeout=function(){}},postRender:function(){g.addA11yFocus(this),this.setAttribute("role","status"),this.message=this._message,"false"===this.getAttribute("dismissible")?this.dismissible=!1:this.dismissible=!0},detachedCallback:function(){l=null,i(m),m=null,this._clearTimeout=null,delete this._clearTimeout},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),b("ha-toast-message",k)});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAToastMessage",["exports","react","prop-types","hui/toast-message"],b);else if("undefined"!=typeof exports)b(exports,require("react"),require("prop-types"),require("hui/toast-message"));else{var c={exports:{}};b(c.exports,a.react,a.propTypes,a.toastMessage),a.HAToastMessage=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.handleRef=function(a){c._huiComponent=a},c._huiComponent=null,c._listeners={},c}return g(b,a),k(b,[{key:"componentDidMount",value:function(){this.setupListeners(),this.props.show&&this._huiComponent.show(),this.removeWebRenderComp()}},{key:"componentDidUpdate",value:function(a){this.props.show!==a.show&&(this.props.show?this._huiComponent.show():this.props.duration<=0&&this._huiComponent.close())}},{key:"componentWillUnmount",value:function(){this._huiComponent.removeEventListener("show",this._listeners.onShow,!1),this._huiComponent.removeEventListener("close",this._listeners.onClose,!1),this._huiComponent.removeEventListener("dismiss",this._listeners.onDismiss,!1)}},{key:"removeWebRenderComp",value:function(){var a=this._huiComponent.querySelectorAll(".toast-wrapper");a&&a.length>1&&this._huiComponent.removeChild(a[0])}},{key:"setupListeners",value:function(){var a=this,b=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=b.bind(this),this._huiComponent.addEventListener("show",this._listeners.onShow);var c=function(b){b.stopPropagation(),a.props.onClose(b)};this._listeners.onClose=c.bind(this),this._huiComponent.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._huiComponent.addEventListener("dismiss",this._listeners.onDismiss)}},{key:"render",value:function(){return h.default.createElement("ha-toast-message",j({ref:this.handleRef,class:this.props.className},this.props),h.default.createElement("div",{className:"toast-wrapper"},h.default.createElement("button",{"aria-label":"Close",className:"hi hi-close"}),h.default.createElement("i",{className:"hi hi-confirm hi-circle-check"}),h.default.createElement("p",null,this.props.children)))}}]),b}(h.default.Component);l.propTypes={duration:i.default.oneOfType([i.default.number,i.default.string]),dismissible:i.default.bool,show:i.default.bool,onShow:i.default.func,onClose:i.default.func.isRequired,onDismiss:i.default.func},a.default=l}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATooltip",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.HATooltip=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Tooltip});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATracker",["exports","prop-types","react"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react),a.HATracker=c.exports}}(this,function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var h=d(b),i=d(c),j=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},k=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),l=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.firstChild=a.children,c.wrapWithTracking=c.wrapWithTracking.bind(c),c}return g(b,a),k(b,[{key:"wrapWithTracking",value:function(){this.firstChild.props[this.props.callbackToTrack](),this.props.sandbox.track()}},{key:"render",value:function(){var a=j({},this.firstChild.props);return a[this.props.callbackToTrack]=this.wrapWithTracking,i.default.cloneElement(this.firstChild,a)}}]),b}(i.default.Component);l.propTypes={callbackToTrack:h.default.string.isRequired,sandbox:h.default.object.isRequired},a.default=l});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATrowserFooter",["exports","react"],b);else if("undefined"!=typeof exports)b(exports,require("react"));else{var c={exports:{}};b(c.exports,a.react),a.HATrowserFooter=c.exports}}(this,function(a,b){"use strict";function c(a){return a&&a.__esModule?a:{default:a}}function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var g=c(b),h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=function(a){function b(a){return d(this,b),e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a))}return f(b,a),i(b,[{key:"render",value:function(){return g.default.createElement("footer",h({className:"page-modal-footer",tabIndex:"-1"},this.props),this.props.children)}}]),b}(g.default.Component);a.default=j}),define("hui/trowser/page-modal",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/contentNode","../core/a11y","../core/keys","../core/position","../core/underlay","../core/utils","../core/deviceUtils"],function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="webkitTransitionName"in document.documentElement.style?"webkitTransitionEnd":"animationend",l=function(a,b,c){i.replaceChildrenOf(a.querySelector(b),c)},m=function(a){return i.isNode(a)&&a.classList.add("page-modal-footer"),a};return c("ha-page-modal",a.createObject(b,{init:function a(){a.super(this),this.lastFocus=null,this.setupProperties({reactLayering:{type:Boolean,default:!1},visible:{type:Boolean,default:!1},noCloseOnDismiss:{type:Boolean,default:!1}})},get header(){return this._header},get section(){return this._section},get footer(){return this._footer},set header(a){l(this,"header",a),this._header=a},set section(a){l(this,"section",a),this._section=a},set footer(a){m(a),l(this,"div.page-modal-panel > footer",a),this._footer=a},get headerNode(){return this.querySelector("div.page-modal-panel > header")},get footerNode(){return this.querySelector("div.page-modal-panel > footer")},get sectionNode(){return this.querySelector("div.page-modal-panel > section")},createdCallback:function a(){a.super(this),this.tabIndex="-1",this.role="dialog"},postRender:function a(){var b,c,d,g,h=i.createElement,j=i.contentQueryFactory(this,{header:"div.page-modal-panel > header",section:"div.page-modal-panel > section",footer:"div.page-modal-panel > footer"}),k=this;a.super(this),c=j("header")||h("header"),d=j("section"),g=j("footer"),m(g),i.removeAllChildrenFrom(this),b=h("div",{className:"page-modal-panel","attr-aria-hidden":"true"},[c,h("section",{"attr-tabindex":"-1"},[d]),h("footer",{"attr-tabindex":"-1"},[g])]),this.appendChild(b),this.on("keydown",function(a){a.keyCode===f.ESCAPE&&(a.stopPropagation(),a.preventDefault(),k.emit("dismiss"),this.noCloseOnDismiss||k.close()),f.TAB===a.keyCode&&e.keepFocusInsideListener(a,k)}),this.on("dismiss",function(a){"HA-PAGE-MODAL-HEADER"===a.target.tagName&&(a.stopImmediatePropagation(),k.emit("dismiss"),this.noCloseOnDismiss||k.close())}),this.classList.add("hidden")},show:function(){var a,b=this;this.visible||(this.visible=!0,this.classList.remove("hidden"),this.on(k,function a(){e.setFocusOnFirst(b.querySelector("section")),this.reactLayering||h.show(this),this.reactLayering||g.bringToFront(this),b.off(k,a),b.emit("did-show")}),this.reactLayering||g.bringToFront(this),this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("slide-out"),this.ownerDocument.body.classList.add("modal-open"),a=this.querySelector(".page-modal-panel"),a.setAttribute("aria-hidden",!1),setTimeout(function(){this.classList.add("slide-in")}.bind(this),0),j.isIOSDevice()&&(this.headerNode&&j.stopTouchMove(this.headerNode,!0),this.footerNode&&j.stopTouchMove(this.footerNode,!0)),this.emit("show"))},addContent:function(a){var b={header:"header",section:"section",footer:"footer"};d.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.")},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The hide method is deprecated, use "close" method instead')},close:function(){var a,b,c=this;this.visible&&(this.visible=!1,this.on(k,function b(){c.classList.remove("slide-out"),c.stopListening(a,k,b),c.lastFocus&&c.lastFocus.focus(),c.lastFocus=null,c.off(k,b),c.classList.add("hidden"),c.emit("did-close")}),a=this.querySelector(".page-modal-panel"),a.setAttribute("aria-hidden",!0),b=this.querySelector("ha-page-modal-header"),b&&b.unselect(),this.reactLayering||h.hide(),this.classList.remove("slide-in"),this.classList.add("slide-out"),this.ownerDocument.body.classList.remove("modal-open"),j.isIOSDevice()&&(this.headerNode&&j.stopTouchMove(this.headerNode,!1),this.footerNode&&j.stopTouchMove(this.footerNode,!1)),this.emit("close"))}}))}),define("hui/trowser/page-modal-header",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/utils"],function(a,b,c,d){"use strict";function e(a,b,c){var d,e=a.querySelector(".header-left"),f=a.querySelector(".header-center"),g=a.querySelector(".header-right"),h=/function\s([^(]{1,})\(/.exec(c.toString())[1];b.forEach(function(b){switch(b.getAttribute("position")||b.position){case"left":b.classList.add("pull-left"),c.call(e,b);break;case"right":"removeChild"===h?c.call(g,b):"appendChild"===h&&(d=a.querySelector('[type="close"]'),d?g.insertBefore(b,d):c.call(g,b));break;case"center":c.call(f,b)}}.bind(a))}function f(a){var b=Array.prototype.slice.call(a.querySelectorAll("ha-page-modal-header-item"));return b=b.filter(function(a){return"close"!==a.getAttribute("type")})}function g(a){var b=a.querySelector(".title-text");return b?b.textContent:""}function h(a){var b=a.querySelector(".info-text");return b?b.textContent:""}return c("ha-page-modal-header",a.createObject(b,{init:function a(){a.super(this),this._headerItems=[],this.setupProperties({titleText:{type:String,default:"",change:function(a){var b,c;a&&(b=this.querySelector(".title-text"),c=this.querySelector(".header-center"),b?b.textContent=a:(b=this.ownerDocument.createElement("h2"),b.textContent=this.titleText,b.className="title-text pull-left",c.appendChild(b)))}},infoText:{type:String,default:"",change:function(a){var b,c;a&&(b=this.querySelector(".info-text"),c=this.querySelector(".header-right"),b?b.textContent=this.infoText:(b=this.ownerDocument.createElement("h3"),b.textContent=this.infoText,b.className="info-text ghost-text pull-left",c.insertBefore(b,c.firstChild)))}},dismissible:{type:Boolean,default:!0,change:function(a){var b=this.querySelector('[type="close"]'),c=b.querySelector("button");a?(b.classList.remove("hidden"),b.classList.add("show"),c&&c.setAttribute("aria-label","close")):(b.classList.remove("show"),b.classList.add("hidden"))}}})},set headerItems(a){e(this,this._headerItems,Node.prototype.removeChild),e(this,a,Node.prototype.appendChild),this._headerItems=a},get headerItems(){return this._headerItems},createdCallback:function a(){a.super(this),this.on("ha-page-modal-header-item button:click",function(a){for(var b=a.target;"ha-page-modal-header-item"!==b.localName;)b=b.parentNode;"close"===b.getAttribute("type")?this.emit("dismiss"):this.select(b)}.bind(this))},postRender:function a(){var b,c,e,i=d.createElement,j=document.createDocumentFragment();a.super(),b=f(this),c=g(this),e=h(this),d.removeAllChildrenFrom(this),d.appendChildren(j,[i("span",{className:"header-left"}),i("span",{className:"header-center"}),i("span",{className:"header-right pull-right"},[i("ha-page-modal-header-item",{icon:"close",position:"right","attr-type":"close"})])]),this.appendChild(j),this.headerItems=b,this.titleText=c,this.infoText=e},select:function(a){"close"!==a.getAttribute("type")&&(this.unselect(),a.select())},unselect:function(){var a=this.querySelector(".selected");a&&a.unselect()}}))}),define("hui/trowser/page-modal-footer",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register","../core/deviceUtils","../modal"],function(a,b,c,d){"use strict";function e(a,b){for(var c=0;c<a.length;c++)a[c].setAttribute("position",b);return Array.prototype.slice.call(a)}function f(a,b,c){var d,e=a.querySelector(".footer-left"),f=a.querySelector(".footer-right"),g=a.querySelector(".footer-center"),h=b.length;for(d=0;d<h;d++)switch(b[d].getAttribute("position")||b[d].position){case"left":c.call(e,b[d]);break;case"right":c.call(f,b[d]);break;case"center":c.call(g,b[d])}}return c("ha-page-modal-footer",a.createObject(b,{init:function a(){a.super(this),this._footerItems=[]},set footerItems(a){f(this,this._footerItems,Node.prototype.removeChild),f(this,a,Node.prototype.appendChild),this._footerItems=a},get footerItems(){return this._footerItems},postRender:function a(){var b=this.querySelector(".footer-left"),c=this.querySelector(".footer-right"),f=this.querySelector(".footer-center"),g=[];d.isHandheld()&&this.classList.add("mobile-page-modal-footer"),a.super(this),this.tabIndex=-1,b?(b&&b.children.length>0&&(g=g.concat(e(b.children,"left"))),c&&c.children.length>0&&(g=g.concat(e(c.children,"right"))),f&&f.children.length>0&&(g=g.concat(e(f.children,"center"))),this.footerItems=g):(b=this.ownerDocument.createElement("span"),c=this.ownerDocument.createElement("span"),f=this.ownerDocument.createElement("span"),b.className="footer-left",c.className="footer-right",f.className="footer-center",this.appendChild(b),this.appendChild(f),this.appendChild(c))},_onClickSave:function(){this._mainMenu.show()},_onClickOverflow:function(){this._overflowMenu.show()}}))}),define("hui/trowser/page-modal-header-item",["object-utils/classes","register-component/v2/UIComponent","register-component/v2/register"],function(a,b,c){"use strict";return c("ha-page-modal-header-item",a.createObject(b,{init:function a(){a.super(this),this.setupProperties({type:{type:String,default:"",change:function(a){var b=this.querySelector(".header-button");a&&b.setAttribute("aria-label",a)}},position:{type:String,default:""},icon:{type:String,default:"",change:function(a,b){var c=this.querySelector("span");a&&(c.classList.remove("hi-"+b),c.classList.add("hi-"+a))}}})},createdCallback:function a(){var b;a.super(this),b=this.querySelector("button"),this.listenTo(b,"blur",function(){this.unselect()}.bind(this))},postRender:function a(){var b,c;a.super(this),b=this.querySelector(".header-button")||this.ownerDocument.createElement("button"),c=this.querySelector("span")||this.ownerDocument.createElement("span"),b.className="header-button",b.appendChild(c),b.classList.add("btn"),b.classList.add("btn-link"),c.classList.add("hi"),this.appendChild(b)},select:function(){this.emit("select",{target:this}),this.classList.add("selected")},unselect:function(){this.emit("unselect",{target:this}),this.classList.remove("selected")}}))});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HATrowser",["exports","prop-types","react","./HAPortal","./HASection","./HATrowserFooter","hui/core/utils","hui/trowser/page-modal","hui/trowser/page-modal-header","hui/trowser/page-modal-footer","hui/trowser/page-modal-header-item"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAPortal"),require("./HASection"),require("./HATrowserFooter"),require("hui/core/utils"),require("hui/trowser/page-modal"),require("hui/trowser/page-modal-header"),require("hui/trowser/page-modal-footer"),require("hui/trowser/page-modal-header-item"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAPortal,a.HASection,a.HATrowserFooter,a.utils,a.pageModal,a.pageModalHeader,a.pageModalFooter,a.pageModalHeaderItem),a.HATrowser=c.exports}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=h(b),m=h(c),n=h(d),o=h(e),p=h(f),q=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=function(a){function b(a){i(this,b);var c=j(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return t.call(c),c._trowser=null,c._listeners={},c.state={classAttributes:null},c}return k(b,a),r(b,[{key:"componentDidMount",value:function(){var a=this;setTimeout(function(){a._trowser&&(a.removeWebRenderComp(),a.mountTrowser())})}},{key:"componentDidUpdate",value:function(a){this.mountTrowser(a)}},{key:"componentWillUnmount",value:function(){this.cleanUpListeners()}},{key:"mountTrowser",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._trowser&&this.props.show!==b.show)if(this.props.show)if(this.setupListeners(),this.state.classAttributes!==this.props.className&&(this._trowser.classList.remove("hidden"),this.updateElementClasses()),this._trowser.show)this._trowser.show();else{var c=function(b){b.stopPropagation(),a._trowser.show()};this._listeners.componentUpgraded=c.bind(this),this._trowser.addEventListener("component-upgraded",this._listeners.componentUpgraded)}else b.show&&(this._trowser.close(),this.props.className!==b.className&&this.updateElementClasses())}},{key:"updateElementClasses",value:function(){var a=(0,g.updateClassWithProps)(this._trowser,this.props.className);a&&this.setState({classAttributes:a})}},{key:"removeWebRenderComp",value:function(){var a=void 0,b=void 0,c=void 0,d=void 0,e=void 0,f=this._trowser.querySelectorAll(".page-modal-panel");f&&f.length>1&&(this._trowser.removeChild(f[0]),d=f[1],e=d.querySelector("ha-page-modal-header"),a=e.querySelectorAll("ha-page-modal-header > span.header-left"),b=e.querySelectorAll("ha-page-modal-header > span.header-center"),c=e.querySelectorAll("ha-page-modal-header > span.header-right"),this.removeDuplicateChild(e,a),this.removeDuplicateChild(e,b),this.removeDuplicateChild(e,c),this.removeDuplicateHeaderItem(a),this.removeDuplicateHeaderItem(b),this.removeDuplicateHeaderItem(c))}},{key:"removeDuplicateChild",value:function(a,b){a&&b&&b.length>1&&a.removeChild(b[0])}},{key:"removeDuplicateHeaderItem",value:function(a){var b=this;if(a&&a.length>1){Array.prototype.slice.call(a[1].querySelectorAll("ha-page-modal-header-item")).forEach(function(a){var c=a.querySelectorAll("button");b.removeDuplicateChild(a,c)})}}},{key:"setupListeners",value:function(){var a=this;if(0===Object.keys(this._listeners).length){var b=function(b){b.stopPropagation(),a.props.onShow&&a.props.onShow(b)};this._listeners.onShow=b.bind(this),this._trowser.addEventListener("show",this._listeners.onShow);var c=function(b){b.stopPropagation(),a.props.onClose&&a.props.onClose(b),a.cleanUpListeners()};this._listeners.onClose=c.bind(this),this._trowser.addEventListener("close",this._listeners.onClose);var d=function(b){b.stopPropagation(),a.props.onDismiss&&a.props.onDismiss(b)};this._listeners.onDismiss=d.bind(this),this._trowser.addEventListener("dismiss",this._listeners.onDismiss)}}},{key:"cleanUpListeners",value:function(){this._trowser&&(this._trowser.removeEventListener("show",this._listeners.onShow,!1),this._trowser.removeEventListener("close",this._listeners.onClose,!1),this._trowser.removeEventListener("dismiss",this._listeners.onDismiss,!1),this._trowser.removeEventListener("component-upgraded",this._listeners.componentUpgraded,!1)),this._listeners={}}},{key:"render",value:function(){return m.default.createElement(n.default,{show:this.props.show},m.default.createElement("ha-page-modal",q({ref:this.handleRef,class:this.state.classAttributes,reactLayering:!0},this.props),m.default.createElement("div",{className:"page-modal-panel","aria-hidden":!this.props.show},m.default.createElement("header",null,m.default.createElement("ha-page-modal-header",{titleText:this.props.titleText,infoText:this.props.infoText,dismissible:this.props.dismissible},m.default.createElement("span",{className:"header-left"},this.history),m.default.createElement("span",{className:"header-center"},m.default.createElement("h2",{className:"title-text pull-left"},this.props.titleText)),m.default.createElement("span",{className:"header-right pull-right"},this.info,this.help,this.settings,this.props.dismissible?this.closeBtn:null))),m.default.Children.map(this.props.children,function(a){return a.type===o.default?m.default.createElement("section",{key:"1",tabIndex:"-1"},a):a.type===p.default?m.default.createElement("footer",{key:"2",tabIndex:"-1"},a):void 0}))))}},{key:"info",get:function(){if(this.props.infoText)return m.default.createElement("h3",{className:"info-text ghost-text pull-left"},this.props.infoText)}},{key:"history",get:function(){if(this.props.history)return m.default.createElement("ha-page-modal-header-item",{type:"history",icon:"history",position:"left",className:"pull-left"},m.default.createElement("button",{className:"header-button btn btn-link","aria-label":"history",onClick:this.handleHeaderItemClick,onBlur:this.handleHeaderItemBlur},m.default.createElement("span",{className:"hi hi-history"})))}},{key:"settings",get:function(){if(this.props.settings)return m.default.createElement("ha-page-modal-header-item",{type:"settings",icon:"settings-o",position:"right"},m.default.createElement("button",{className:"header-button btn btn-link","aria-label":"settings",onClick:this.handleHeaderItemClick,onBlur:this.handleHeaderItemBlur},m.default.createElement("span",{className:"hi hi-settings-o"})))}},{key:"help",get:function(){if(this.props.help)return m.default.createElement("ha-page-modal-header-item",{type:"help",icon:"help-o",position:"right"},m.default.createElement("button",{className:"header-button btn btn-link "+(this.props.helpLabel?"help-icon-with-text":""),"aria-label":"help",onClick:this.handleHeaderItemClick,onBlur:this.handleHeaderItemBlur},m.default.createElement("span",{className:"hi hi-help-o"}),this.props.helpLabel?m.default.createElement("span",{className:"hi-help-label-text"},this.props.helpLabelText):null))}},{key:"closeBtn",get:function(){return m.default.createElement("ha-page-modal-header-item",{icon:"close",position:"right",type:"close",class:"show"},m.default.createElement("button",{className:"header-button btn btn-link","aria-label":"close"},m.default.createElement("span",{className:"hi hi-close"})))}}]),b}(m.default.Component);s.propTypes={children:function(a,b,c){var d=(0,g.checkReactChildrenType)(a[b],c,[o.default,p.default],"HASection,HATrowserFooter");if(d)return d},className:l.default.string,titleText:l.default.string,infoText:l.default.string,type:l.default.string,settings:l.default.bool,help:l.default.bool,history:l.default.bool,dismissible:l.default.bool,autofocus:l.default.bool,noCloseOnDismiss:l.default.bool,onShow:l.default.func,onClose:l.default.func,onDismiss:l.default.func};var t=function(){var a=this;this.handleHeaderItemClick=function(a){for(var b=a.target;!b.classList.contains("header-button");)b=b.parentElement;b&&b.classList.contains("header-button")&&b!==document.activeElement&&b.focus()},this.handleHeaderItemBlur=function(a){a.stopPropagation(),a.target&&a.target.parentElement&&a.target.parentElement.classList.remove("selected")},this.handleRef=function(b){a._trowser=b}};a.default=s});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol?"symbol":typeof a};!function(a,b){if("function"==typeof define&&define.amd)define("hui-react/HAZeroState",["exports","prop-types","react","./HAHeader","./HASection","./HAFooter","hui/core/utils"],b);else if("undefined"!=typeof exports)b(exports,require("prop-types"),require("react"),require("./HAHeader"),require("./HASection"),require("./HAFooter"),require("hui/core/utils"));else{var c={exports:{}};b(c.exports,a.propTypes,a.react,a.HAHeader,a.HASection,a.HAFooter,a.utils),a.HAZeroState=c.exports}}(this,function(a,b,c,d,e,f,g){"use strict";function h(a){return a&&a.__esModule?a:{default:a}}function i(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function j(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!==(void 0===b?"undefined":_typeof(b))&&"function"!=typeof b?a:b}function k(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(a,"__esModule",{value:!0});var l=h(b),m=h(c),n=h(d),o=h(e),p=h(f),q=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),r=function(a){function b(){return i(this,b),j(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return k(b,a),q(b,[{key:"componentWillMount",value:function(){if(this.props.simulateViewport){var a=document.getElementsByName("viewport");a&&a.length>0&&(a[0].content="width=device-width, initial-scale=1")}}},{key:"componentWillUnmount",value:function(){if(this.props.simulateViewport){var a=document.getElementsByName("viewport");a&&a.length>0&&(a[0].content="")}}},{key:"renderFooter",value:function(a){return m.default.createElement("div",{className:"footer zero-state-footer"},a)}},{key:"render",value:function(){var a=void 0,b=void 0,c=void 0,d=void 0,e=void 0;return this.props.buttonText&&(a=m.default.createElement("button",{className:"ha-button-primary ha-button",onClick:this.props.onButtonClick},this.props.buttonText)),this.props.subTitleText&&(e=m.default.createElement("span",{className:"sub-title"},this.props.subTitleText)),this.props.children&&m.default.Children.forEach(this.props.children,function(a){m.default.isValidElement(a)&&(a.type===n.default&&(b=a),a.type===o.default&&(c=a),a.type===p.default&&(d=a))}),m.default.createElement("div",{className:"ha-zero-state-container"},m.default.createElement("div",{className:"image-container zero-state-header"},b),m.default.createElement("div",{className:"zero-state-content"},m.default.createElement("div",null,m.default.createElement("span",{className:"main-title"},this.props.titleText),e),m.default.createElement("div",null,c),m.default.createElement("div",null,a)),d&&this.renderFooter(d))}}]),b}(m.default.Component);r.propTypes={titleText:l.default.string,subTitleText:l.default.string,buttonText:l.default.string,onButtonClick:l.default.func,simulateViewport:l.default.bool,children:function(a,b,c){var d=(0,g.checkReactChildrenType)(a[b],c,[n.default,o.default,p.default],"HAHeader,HASection,HAFooter");if(d)return d}},a.default=r}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/Tab",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.Tab=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Tab}),function(a,b){if("function"==typeof define&&define.amd)define("hui-react/Tabs",["exports","@sbg/harmony-react-components"],b);else if("undefined"!=typeof exports)b(exports,require("@sbg/harmony-react-components"));else{var c={exports:{}};b(c.exports,a.harmonyReactComponents),a.Tabs=c.exports}}(this,function(a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=b.Tabs}),define("hui/date-range-picker",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/deviceUtils","./date-picker"],function(a,b,c,d){return a("ha-date-range-picker",c.createObject(b,{init:function a(){a.super(this),this.setupProperties({requiredMessage:{default:"Required Field",change:function(a){this._passThrough("requiredMessage",a)},type:String},invalidMessage:{default:"Invalid Value",change:function(a){this._passThrough("invalidMessage",a)},type:String},startDateLabel:{default:"Start date",change:function(a){var b=this._getStartDatePicker();b&&(b.label=a)}},endDateLabel:{default:"End date",change:function(a){var b=this._getEndDatePicker();b&&(b.label=a)}},disabled:{default:!1,type:Boolean,change:function(a){this._passThrough("disabled",a)}},required:{default:!1,type:Boolean,change:function(a){this._passThrough("required",a)}},maxLength:{default:524288,type:Number,change:function(a){this._passThrough("maxLength",a)}},optional:{default:!1,type:Boolean,change:function(a){this._passThrough("optional",a)}},labelOptional:{default:"optional",change:function(a){this._passThrough("labelOptional",a)}},startDateName:{default:"",change:function(a){var b=this._getStartDatePicker();b&&(b.name=a)}},endDateName:{default:"",change:function(a){var b=this._getEndDatePicker();b&&(b.name=a)}},autoComplete:{default:"on",change:function(a){this._passThrough("autoComplete",a)}},size:{default:20,type:Number,change:function(a){this._passThrough("size",a)}},placeholder:{default:"MM/DD/YYYY",change:function(a){this._passThrough("placeholder",a)}},navigationAriaDescription:{default:"shift focus to input to change calendar dates",type:String,change:function(a){this._passThrough("navigationAriaDescription",a)}},dateFormat:{default:"",type:String,change:function(a){this._passThrough("dateFormat",a)}}})},postRender:function a(){a.super(this);var b=this._getStartDatePicker(),c=this._getEndDatePicker(),e=new Date(Date.now()),f=d.isHandheld();b&&b.parentNode.removeChild(b),c&&c.parentNode.removeChild(c),b=this.ownerDocument.createElement("ha-date-picker"),c=this.ownerDocument.createElement("ha-date-picker"),f||(b.useDoubleCalendar=c.useDoubleCalendar=!0),this.appendChild(b),this.appendChild(c),f||this._getEndDatePicker().select(new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)),this.setAttribute("role","group"),this.hasAttribute("aria-label")||this.setAttribute("aria-label","Select date range")},attachedCallback:function a(){a.super(this);var b=this._getStartDatePicker(),c=this._getEndDatePicker();this.listenTo(b,"change",function(a){a.stopPropagation(),d.isHandheld()||c.preselect(a.date),this.emit("change",{date:a.date,dateType:"start"})}.bind(this)),this.listenTo(c,"change",function(a){a.stopPropagation(),d.isHandheld()||b.postselect(a.date),this.emit("change",{date:a.date,dateType:"end"})}.bind(this))},showNextMonth:function(){this._getStartDatePicker().showNextMonth(),this._getEndDatePicker().showNextMonth()},showPreviousMonth:function(){this._getStartDatePicker().showPreviousMonth(),this._getEndDatePicker().showPreviousMonth()},_getStartDatePicker:function(){return this.querySelector("ha-date-picker")},_getEndDatePicker:function(){return this.querySelectorAll("ha-date-picker")[1]},_passThrough:function(a,b){var c=this._getStartDatePicker(),d=this._getEndDatePicker();c&&(c[a]=b),d&&(d[a]=b)},get ariaLabel(){return this.getAttribute("aria-label")},set ariaLabel(a){this.setAttribute("aria-label",a)},get monthAbbreviations(){return this._monthAbbreviations},set monthAbbreviations(a){this._monthAbbreviations=a,this._passThrough("monthAbbreviations",a)},get monthLabels(){return this._monthLabels},set monthLabels(a){this._monthLabels=a,this._passThrough("monthLabels",a)},get dayOfWeekLabels(){return this._dayOfWeekLabels},set dayOfWeekLabels(a){this._dayOfWeekLabels=a,this._passThrough("dayOfWeekLabels",a)},set blackoutDates(a){this._blackoutDates=a,this._passThrough("blackoutDates",a)},get blackoutDates(){return this._blackoutDates},set notableDates(a){this._notableDates=a,this._passThrough("notableDates",a)},get notableDates(){return this._notableDates},set tooltips(a){this._tooltips=a,this._passThrough("tooltips",a)},get tooltips(){return this._tooltips},set datePattern(a){this._passThrough("datePattern",a)},get datePattern(){return this._getStartDatePicker().datePattern},set minDate(a){this._passThrough("minDate",a)},get minDate(){return this._getStartDatePicker().minDate},set maxDate(a){this._passThrough("maxDate",a)},get maxDate(){return this._getStartDatePicker().maxDate}}))}),define("hui/drawer-small",["register-component/v2/register","./drawer/DrawerBase","object-utils/classes","./core/utils"],function(a,b,c,d){"use strict";function e(a){var b=a.ownerDocument,c=Math.max(b.body.scrollHeight,b.documentElement.scrollHeight,b.body.offsetHeight,b.documentElement.offsetHeight,b.body.clientHeight,b.documentElement.clientHeight),d=c-a.offsetTop+"px";a.querySelector(".content").style.height=d}function f(){this._open?this.close():this.show()}function g(a,b,c){var d,e,f=a.parentElement;f&&(d=void 0!==c&&""!==c?f.querySelector(".ha-flex-flexible"):a.previousElementSibling)&&d.classList.remove("ha-flex-flexible"),(e=b?a.ownerDocument.querySelector(b)||a.previousElementSibling:a.previousElementSibling)&&e.classList.add("ha-flex-flexible")}function h(a){return a.querySelector("section > div.inner-content > *")}function i(a){return a.querySelector("section")}function j(){var a=m("button",{className:"btn-toggle drawer-hide first-focus"},[m("i",{className:"hi hi-chevron-left drawer-arrow"}),m("i",{className:"hi hi-chevron-right drawer-arrow"})]);return a.setAttribute("aria-label","close"),a}function k(a,b){return m("section",{className:"content"},[m("h3",{id:"drawer-small-title-"+a}),m("div",{className:"inner-content"},[b])])}var l,m=d.createElement,n=null;return l=c.createObject(b,{init:function a(){a.super(this),this.setupProperties({targetSiblingSelector:{default:"",type:String,change:function(a,b){g(this,a,b)}}}),this.classList.add("ha-flex-fixed"),this.on("button.drawer-hide:click",f.bind(this))},get section(){return d.arrayOfChildrenFrom(h(this))},set section(a){d.replaceChildrenOf(this.querySelector("section > div.inner-content"),d.wrapIfNotWrapped("section",a))},attachedCallback:function a(){a.super(this),n=this.parentElement,!n||n.classList.contains("ha-flex-columns")||n.classList.contains("ha-flex-flexible")||(n.classList.add("ha-flex-columns"),n.classList.add("ha-flex-flexible")),g(this,this.targetSiblingSelector)},postRender:function a(){a.super(this);var b=document.createDocumentFragment(),c=h(this)||i(this);d.removeAllChildrenFrom(this),d.appendChildren(b,[j(),k(this.componentId,c)]),this.appendChild(b),this.setAttribute("aria-labelledby","drawer-small-title-"+this.componentId)},detachedCallback:function(){n&&(n.classList.remove("ha-flex-columns"),n.classList.remove("ha-flex-flexible")),this.targetSiblingSelector&&(this.targetSiblingSelector=null)},show:function(){this._open||(this._open=!0,e(this),this.classList.add("slide-in"),this._lastFocus=this.ownerDocument.activeElement,this._focusFirst(),this.emit("show"))},close:function(){this._open&&(this._open=!1,this.classList.remove("slide-in"),this._lastFocus&&(this._lastFocus.className.indexOf("btn-toggle")>-1?this._lastFocus.blur():this._lastFocus.focus()),this._lastFocus=null,this.emit("close"),this.emit("hide"))},addFlexColumnClass:function(a){var b=[];a&&Array.isArray(a)&&(b=a,b.forEach(function(a){a.classList.add("ha-flex-columns"),a.classList.add("ha-flex-flexible")}))},addFlexChildrenClass:function(a){var b=[];a&&Array.isArray(a)&&(b=a,b.forEach(function(a){a.classList.add("ha-flex-children")}))}}),a("ha-drawer-small",l)}),define("text!hui/flyout/flyout.html",[],function(){return'<template>\n  <div class="header-bar">\n    <span class="flyout-tip"></span>\n  </div>\n  <div class="flyout-content-wrapper">\n    <div class="flyout-side-panel-wrapper"></div>\n    <section class="flyout-content">\n    </section>\n  </div>\n</template>'}),define("hui/flyout",["register-component/v2/register","object-utils/classes","./core/contentNode","./core/popup","./core/utils","./core/a11y","./core/keys","./core/Viewport","register-component/template!./flyout/flyout.html","register-component/v2/UIComponent"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(a){var b=a.animationName,c=a.target;"ha-fade-in"===b?(c.classList.remove("enter"),c.emit("show")):"ha-fade-out"===b&&(c.classList.remove("visible"),c.classList.remove("leave"),c.emit("close"))}function l(a){var b=a.target,c=b.querySelector(".flyout-tip"),d=n(b);"ha-fade-in"!==a.animationName&&"more"!==a.type&&"less"!==a.type||(b.style.top=parseInt(b.style.top,10)+7+"px",c.style.left=d.offsetLeft-b.offsetLeft+d.offsetWidth/2-c.offsetWidth/2+"px")}function m(a){var b=e.getComponentFromElement(a.target,"HA-FLYOUT");"HA-FLYOUT"===b.tagName&&e.stopEvent(a),b.contains(e.getSafeTargetFromEvent(a))&&b.contains(document.activeElement)&&document.activeElement!==a.target||b.close()}function n(a){var b;return"_previousSibling"===a.targetSelector?(a._button||(a._button=a.previousElementSibling),b=a._button):b=a.querySelector(a.targetSelector),b}function o(a){var b,c=e.getComponentFromElement(a.target,"HA-FLYOUT"),h=c.querySelector(".flyout-more"),i=c.querySelector(".flyout-less"),j=c.querySelector(".show-more");"click"!==a.type&&a.keyCode!==g.ENTER||(a.preventDefault(),h.classList.contains("hidden")?(i.classList.add("hidden"),h.classList.remove("hidden"),j.classList.add("show-less"),j.querySelector("span").innerHTML=c.lessText,b="more"):(h.classList.add("hidden"),i.classList.remove("hidden"),j.classList.remove("show-less"),j.querySelector("span").innerHTML=c.moreText,b="less"),d.setPosition(c,n(c),t,u),c.emit(b,{target:c}),f.setFocusOnAnyFirst(c.querySelector(".flyout-content")))}function p(a,b){a.classList.contains("visible")?a.close():a.show(b)}function q(a){d.setPosition(a,n(a),t,u),l({target:a,animationName:"ha-fade-in"})}function r(a){var b,c,d,f,g,h=a.querySelectorAll("ha-menu-item, th"),i=a.querySelector(".flyout-side-panel td"),j=a.querySelectorAll(".flyout-content td"),k=j.length,l=h.length,m=0,n=document.createElement("canvas");for(b=getComputedStyle(h[0]),f=b.fontSize+" "+b.fontFamily,c=0;c<l;c++)d=h[c].textContent,(g=e.getTextWidth(d,f,n))>m&&(m=g);for(getComputedStyle(h[0].parentElement),c=0;c<k;c++)j[c].style.width=m+w+"px";i&&(i.style.width=m+v+"px")}var s,t=["bottom"],u=["center"],v=59,w=40,x={section:"section"};return a("ha-flyout",b.createObject(j,{init:function a(){a.super(this),this.template=i,this._attached=!1,c.cacheInputContent(this,x),this.setupProperties({titleText:{default:"",change:function(a){var b=this.querySelector("h3"),c=this.querySelector(".flyout-content");b?b.innerHTML=a:(b=this.ownerDocument.createElement("h3"),b.innerHTML=a,c.insertBefore(b,c.firstElementChild)),b.id="flyout-title-"+this.componentId}},moreText:{default:"More",change:function(a){var b,c=this.querySelector(".show-more");c&&!c.classList.contains("show-less")&&(b=c.querySelector("span"),b.innerHTML=a)}},lessText:{default:"Less",change:function(a){var b,c=this.querySelector(".show-more");c&&c.classList.contains("show-less")&&(b=c.querySelector("span"),b.innerHTML=a)}},targetSelector:{default:"_previousSibling"}})},set section(a){var b=this.querySelector(".flyout-content"),c=b.children,d=this.querySelector("h3");c.length>0&&e.removeNodesSafe(b,c),d&&b.appendChild(d),Array.isArray(a)?a.forEach(function(a){b.appendChild(a)}):b.appendChild(a)},get section(){return this.querySelector(".flyout-content")},attachedCallback:function(){if(!this._attached){this._attached=!0;var a,b,c,d=n(this),f=this.querySelector(".flyout-side-panel"),h=this.querySelector(".flyout-side-panel-wrapper"),i=this.querySelector(".flyout-more"),j=this.querySelector(".flyout-content"),k=this.querySelector("ha-menu");d&&"BUTTON"===d.tagName?(this.listenTo(d,"click",function(a){a.preventDefault(),p(this,a)}.bind(this)),this.listenTo(d,"keypress",function(a){a.keyCode===g.ENTER&&(a.preventDefault(),p(this,a))}.bind(this))):console.warn("Flyout must have at least a button as previous sibling"),f&&(this.classList.add("ha-flyout-side-panel"),e.removeNodesSafe(this,f),h.appendChild(f),r(this)),i&&(j.classList.add("clearfix"),i.classList.add("hidden"),c=this.querySelector("button.show-more"),c||(c=this.ownerDocument.createElement("button"),c.tabIndex=0,c.classList.add("show-more"),a=this.ownerDocument.createElement("i"),a.className="show-more-arrow",c.appendChild(a),b=this.ownerDocument.createElement("span"),b.innerHTML=this.moreText,c.appendChild(b),j.appendChild(c)),this.on(".show-more:click",o),this.on(".show-more:keypress",o),r(i)),j.children.length>1&&!f&&!i&&!k&&(this.classList.add("flyout-non-menu"),j.tabIndex=-1),this.setAttribute("aria-labelledby","flyout-title-"+this.componentId)}},show:function(a){var b=n(this),c=this.querySelectorAll("ha-menu");c.length&&-1===c[0].tabIndex&&[].forEach.call(c,function(a){a.tabIndex=0}),d.setPosition(this,b,t,u)&&(this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible")),s=a?a.type:null,this._resizeMethod=function(){q(this)}.bind(this),h.onResize(this._resizeMethod),this.focus()},close:function(){this.classList.add("leave"),n(this).focus()},preRender:function a(){a.super(this)},createdCallback:function a(){var b=e.getAnimationEventNames(),c=b.animationend,f=b.animationstart;a.super(this),this.listenTo(this,"blur",function(a){setTimeout(function(){m(a)},1)},!0),this.on(f,l),this.on("more",l),this.on("less",l),this.on(c,k),this.on("close",function(){d.uninstallResizeMethod(this._resizeMethod)}),this.on("keydown",function(a){g.ESCAPE===a.keyCode&&(e.stopEvent(a),this.close())})},postRender:function a(){a.super(this),c.storeCachedInput(this,x),this.tabIndex=-1}}))}),define("hui/inline-message",["register-component/v2/UIComponent","register-component/v2/register","object-utils/classes","./core/popup","./core/tooltip","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.animationName,c=a.target;switch(b){case"ha-fade-in":c.classList.remove("enter"),c.emit("show");break;case"ha-fade-out":c.classList.remove("visible"),c.classList.remove("leave"),c.emit("close")}}function i(a){var b,c=a.querySelector(".connector"),d=a._listenersTargets[0];if(a.targetSelector.indexOf("_previousSibling")>-1?(b=a.targetSelector.split("_previousSibling")[1],d=b?a.previousElementSibling.querySelector(b.trim()):a.previousElementSibling):""!==a.targetSelector&&(d=a.ownerDocument.querySelector(a.targetSelector)),!d)return void(c&&a.removeChild(c));c||(c=a.ownerDocument.createElement("div"),c.classList.add("connector"),a.insertBefore(c,a.firstChild))}var j;return j=c.createObject(a,{init:function a(){a.super(this);var b=f.getAnimationEventNames();this.on(b.animationend,h),this._listenersTargets=[],this._message=null,this._hideCallback=this.close.bind(this),this._showCallback=this.show.bind(this),this._attached=!1,this.setupProperties({autoClose:{type:Boolean,default:!1,change:function(a){this._dismissible=!a}},position:{type:String,default:"right bottom",change:function(a){var b={bottom:"left",top:"left",left:"middle",right:"middle"};this._alignment=a.split(" ").map(function(a){return b[a]}).join(" ")}},targetSelector:{type:String,default:"",change:function(a){e.removeOldListeners(this),a?(this.classList.remove("visible"),this.classList.remove("static"),e.setTooltipTargets(this,a),this._listenersTargets[0]&&this._listenersTargets[0]._inputElement&&(this._listenersTargets=[this._listenersTargets[0]._inputElement]),e.resetListeners(this,this.trigger),this._listenersTargets[0]&&(this.setAttribute("id","ha-inline-message-"+this.componentId),this._listenersTargets[0].setAttribute("aria-describedby",this.getAttribute("id")))):(this.classList.add("static"),this.classList.add("visible"),this._listenersTargets=[])}},trigger:{type:String,default:"custom",change:function(a){e.resetListeners(this,a)}}})},attachedCallback:function(){this.targetSelector&&!this._attached&&(this._attached=!0,e.setTooltipTargets(this,this.targetSelector),e.resetListeners(this,this.trigger))},postRender:function a(){var b,c,d;a.super(this),g.addA11yFocus(this),c=this.querySelector(".hi"),b=this.querySelector(".message-content"),b?d=b.innerHTML:(d=this.innerHTML,this.innerHTML=""),c||(c=this.ownerDocument.createElement("i"),c.classList.add("hi"),c.classList.add("hi-circle-check"),c.setAttribute("aria-hidden",!0),this.appendChild(c)),b||(b=this.ownerDocument.createElement("div"),b.classList.add("message-content"),this.appendChild(b)),this.style.minWidth="1px",this.setAttribute("role","tooltip"),this.setAttribute("aria-live","polite"),this.message=d,this.tabIndex=-1},get alignment(){return this._alignment},get dismissible(){return this._dismissible},get duration(){return 0},set message(a){var b=this.querySelector(".message-content");"string"==typeof a?(b.innerHTML=a,this._message=a):a.nodeType&&(b.innerHTML="",b.appendChild(a),this._message=a)},get message(){return this._message},close:function(a){this.classList.add("leave"),a&&"blur"===a.type||!this._target||!this._target.focus||this._target.focus(),this._target=null},show:function(){this.classList.contains("visible")||(this.targetSelector&&(i(this),this.querySelector(".connector")&&(this._target=this._listenersTargets[0],this._target&&(this._target._inputElement&&(this._target=this._target._inputElement),d.setPosition(this,this._target,this.position.split(" "),this.alignment.split(" "))))),this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"))}}),b("ha-inline-message",j)}),define("hui/label",["object-utils/classes","register-component/v2/register","register-component/v2/UIComponent"],function(a,b,c){"use strict";return b("ha-label",a.createObject(c,{}))}),define("text!hui/money-bar/money-bar.html",[],function(){return'<template>\n    <div class="segments">\n    </div>\n</template>'}),define("text!hui/money-bar-cell/money-bar-cell.html",[],function(){return'<template>\n    <div class="money-bar-block"></div>\n    <div class="money-bar-text">\n    \t<span class="primary-text">{{primaryText}}</span>\n    \t<span class="secondary-text">{{secondaryText}}</span>\n    \t<span class="close-icon" tabindex="-1" aria-label="Close" role="button"> &#xf061;</span>\n    </div>\n</template>'}),define("hui/money-bar-cell",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar-cell/money-bar-cell.html","./core/keys","object-utils/classes"],function(a,b,c,d,e){return b("ha-money-bar-cell",e.createObject(a,{init:function a(){a.super(this),this.template=c,this.mbcells=null,this.setupProperties({primaryText:{default:"",change:function(a){var b=this.querySelector(".primary-text"),c=this.querySelector(".money-bar-text"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("primary-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.primaryText=b)}},secondaryText:{default:"",change:function(a){var b=this.querySelector(".secondary-text"),c=this.querySelector(".money-bar-text"),d=c.querySelector(".close-icon");a&&(b||(b=document.createElement("span"),b.classList.add("secondary-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.secondaryText=b)}},state:{default:"deselected",change:function(a){var b=this._nodes.mbBlock,c=this.querySelector(".close-icon");this.state!==b.state&&("deselected"===a?(b.state=a,this.classList.remove("click"),c.setAttribute("tabindex","-1"),this.emit("deselected",{target:this})):"selected"===a?(b.state=a,this.classList.add("click"),c.setAttribute("tabindex","0"),this.emit("selected",{target:this})):this.state=b.state)}}}),this.listenTo(this,"mouseenter",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"mouseleave",function(a){this._eventRemoveClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focusin",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focus",function(a){this._eventAddClass("hover","inlay-hover",a)}.bind(this)),this.listenTo(this,"focusout",function(a){this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1")}.bind(this)),this.listenTo(this,"blur",function(a){this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1")}.bind(this)),this.listenTo(this,"click",function(a){a.preventDefault(),a.stopPropagation(),"selected"===this.state?(this.state="deselected",this.classList.remove("inlay-select"),this._eventRemoveClass("click","inlay-select",a),this._eventRemoveClass("hover","inlay-hover",a),this.setAttribute("tabindex","-1"),this.blur()):(this.state="selected",this.setAttribute("tabindex","0"),this.focus(),this._eventAddClass("click","inlay-select",a))}.bind(this)),this.listenTo(this,".close-icon:keydown",function(a){if(a.keyCode===d.ENTER){var b=this.nextElementSibling;this.state="deselected",this.classList.contains("outlay")&&null!==b&&b.classList.contains("inlay")&&b.classList.remove("inlay-select"),a.stopPropagation(),this.style.outline="1px dotted #212121",this.style.outline="-webkit-focus-ring-color auto 5px",this.focus()}else a.keyCode===d.TAB&&(a.stopPropagation(),a.preventDefault(),this.style.outline="1px dotted #212121",this.style.outline="-webkit-focus-ring-color auto 5px",this.focus())}.bind(this))},postRender:function(){var a=this.querySelector(".primary-text"),b=this.querySelector(".secondary-text"),c=this.querySelector(".money-bar-block");this._nodes={},this._nodes.mbBlock=c,this._nodes.primaryText=a,this._nodes.secondaryText=b,this.setAttribute("tabindex","-1"),this.setAttribute("role","menuitem"),this.setAttribute("id","ha-money-bar-cell-"+this.componentId)},_eventAddClass:function(a,b,c){this.classList.add(a);var d=this.nextElementSibling;this.classList.contains("outlay")&&null!==d&&d.classList.contains("inlay")&&d.classList.add(b),c.stopPropagation()},_eventRemoveClass:function(a,b,c){this.classList.remove(a);var d=this.nextElementSibling;this.classList.contains("outlay")&&null!==d&&d.classList.contains("inlay")&&d.classList.remove(b),c.stopPropagation()}}))}),define("text!hui/money-bar-segment/money-bar-segment.html",[],function(){return'<template>\n\t<h4 class="segment-header">\n\t\t<span class="segment-text-bold">{{titleTextBold}}</span>\n\t\t<span class="segment-text">{{titleText}}</span>\n\t</h4>\n    <div class="cells">\n    </div>\n</template>'}),define("hui/money-bar-segment",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar-segment/money-bar-segment.html","./core/utils","object-utils/classes"],function(a,b,c,d,e){return b("ha-money-bar-segment",e.createObject(a,{init:function a(){a.super(this),this.template=c,this._cells=null,Object.defineProperty(this,"cells",{set:function(a){var b=this.querySelector(".cells"),c=this.querySelector(".segment-header");b&&(b.innerHTML="",a.forEach(function(a){a.setAttribute("aria-describedby",c.id),b.appendChild(a)})),this._cells=a}}),this.setupProperties({titleTextBold:{default:"",change:function(a){var b=this.querySelector(".segment-text-bold"),c=this.querySelector(".segment-header"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("segment-text-bold"),c.insertBefore(b,d)),b.textContent=a,this._nodes.titleTextBold=b)}},titleText:{default:"",change:function(a){var b=this.querySelector(".segment-text"),c=this.querySelector(".segment-header"),d=c.firstChild;a&&(b||(b=document.createElement("span"),b.classList.add("segment-text"),c.insertBefore(b,d)),b.textContent=a,this._nodes.titleText=b)}},size:{default:"2",change:function(a){var b=this._nodes.cellContainer;this.size!==b.size&&(b.size=a,this.style.flex=a+" 0 auto",this.style["-webkit-flex"]=a+" 0 auto")}}})},preRender:function(){var a,b=this.querySelector(".cells");a=this.querySelectorAll("ha-money-bar-cell"),this.cells=b?Array.prototype.map.call(a,function(a){return a}):d.removeNodesSafe(this,a)},postRender:function a(){a.super(this);var b=this.querySelector(".cells"),c=this.querySelector(".segment-header"),d=this.querySelector(".segment-text"),e=this.querySelector(".segment-text-bold");this._nodes={},this._nodes.cellContainer=b,b.innerHTML="",c.setAttribute("id","segment-header-"+this.componentId),this._nodes.titleText=d,this._nodes.titleTextBold=e,this._cells.forEach(function(a){a.setAttribute("aria-describedby",c.id),b.appendChild(a)}),this.style.flex=this.size+" 0 auto",this.style["-webkit-flex"]=this.size+" 0 auto",this.id="ha-money-bar-segment-"+this.componentId}}))}),define("hui/money-bar",["register-component/v2/UIComponent","register-component/v2/register","register-component/template!./money-bar/money-bar.html","./core/utils","./core/keys","./core/a11y","object-utils/classes","./money-bar-cell","./money-bar-segment"],function(a,b,c,d,e,f,g){return b("ha-money-bar",g.createObject(a,{init:function a(){a.super(this),this.template=c,this._segments=null,Object.defineProperty(this,"segments",{set:function(a){var b=this.querySelector(".segments");b&&(b.innerHTML="",a.forEach(function(a){b.appendChild(a)})),this._segments=a}}),this.listenTo(this,"ha-money-bar-cell:selected",function(a){this.clearSelectedExcept(a.target)}.bind(this)),this.listenTo(this,"keydown",function(a){var b,c,d=a.target,f=this.querySelectorAll("ha-money-bar-cell"),g=a.target.nextElementSibling;if("HA-MONEY-BAR-CELL"===a.target.nodeName)if(a.stopPropagation(),a.preventDefault(),a.keyCode===e.UP||a.keyCode===e.LEFT){if(d.id!==f[0].id){for(c=0;f[c].id!==d.id;)c++;b=f[c-1],d.setAttribute("tabindex","-1"),d.style.outline="none",d.blur(),b.setAttribute("tabindex","0"),b.style.outline="1px dotted #212121",b.style.outline="-webkit-focus-ring-color auto 5px",b.focus(),"selected"===d.state&&d.querySelector(".close-icon").setAttribute("tabindex","-1"),"selected"===b.state&&b.querySelector(".close-icon").setAttribute("tabindex","0")}}else if(a.keyCode===e.DOWN||a.keyCode===e.RIGHT){if(d.id!==f[f.length-1].id){for(c=f.length-1;f[c].id!==d.id;)c--;b=f[c+1],d.style.outline="none",d.setAttribute("tabindex","-1"),d.blur(),b.setAttribute("tabindex","0"),b.style.outline="1px dotted #212121",b.style.outline="-webkit-focus-ring-color auto 5px",b.focus(),"selected"===d.state&&d.querySelector(".close-icon").setAttribute("tabindex","-1"),"selected"===b.state&&b.querySelector(".close-icon").setAttribute("tabindex","0")}}else a.keyCode===e.ENTER?"deselected"===d.state?(d.state="selected",d.classList.contains("outlay")&&null!==g&&g.classList.contains("inlay")&&g.classList.add("inlay-select")):(d.state="deselected",d.classList.contains("outlay")&&null!==g&&g.classList.contains("inlay")&&g.classList.remove("inlay-select")):a.keyCode===e.TAB&&("deselected"===d.state?(d.setAttribute("tabindex","-1"),d.style.outline="none",d.blur(),this.focus()):(d.style.outline="none",d.querySelector(".close-icon").focus()));else"HA-MONEY-BAR"===a.target.nodeName&&(a.keyCode!==e.DOWN&&a.keyCode!==e.RIGHT||(f[0].setAttribute("tabindex","0"),f[0].style.outline="1px dotted #212121",f[0].style.outline="-webkit-focus-ring-color auto 5px",f[0].focus(),a.stopPropagation(),a.preventDefault()))}.bind(this))},preRender:function(){var a,b=this.querySelector(".segments");this._segments||(a=this.querySelectorAll("ha-money-bar-segment"),this.segments=b?Array.prototype.map.call(a,function(a){return a}):d.removeNodesSafe(this,a))},postRender:function(){f.addA11yFocus(this);var a=this.querySelector(".segments");this._nodes={},this._nodes.segContainer=a,a.innerHTML="",this._segments.forEach(function(b){a.appendChild(b)}),this.setAttribute("role","menubar"),this.setAttribute("tabindex","0")},clearSelected:function(){var a=this.querySelectorAll("ha-money-bar-cell"),b=0;for(b;b<a.length;b++)a[b].setAttribute("state","deselected"),a[b].classList.remove("inlay-select")},clearSelectedExcept:function(a){var b,c=!0,d=0;for(a.classList.contains("outlay")&&(c=!1),b=this.querySelectorAll("ha-money-bar-cell"),d;d<b.length;d++)b[d].id!==a.id&&(b[d].setAttribute("state","deselected"),c&&b[d].classList.remove("inlay-select"))},setSelected:function(a){this.clearSelected(),a.setAttribute("state","selected")}}))}),define("hui/paginated-message",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes"],function(a,b,c){var d;return d=c.createObject(b,{init:function a(){a.super(this),this._message=null,this.setupProperties({titleText:{default:"",type:String,change:function(a){this.querySelector(".message-title").textContent=a,a?this.setAttribute("aria-label",a):this.removeAttribute("aria-label")}},type:{default:"error",type:String,change:function(a){"alert"===a&&console.warn("DEPRECATION WARNING: The message type 'alert' is deprecated. Please use 'error' instead."),this.querySelector("i").className="alert"===a||"error"===a||"warn"===a?"hi hi-circle-alert":"hi hi-circle-info"}}})},show:function(){this.classList.remove("hidden"),this.emit("show")},hide:function(){this.close(),this.emit("hide"),console.warn('DEPRECATION WARNING: The hide method is going to be deprecated. From now on, please use "close" instead.')},close:function(){this.classList.add("hidden"),this.emit("close")},set message(a){"string"==typeof a?this.querySelector(".message-content").innerHTML=a:this.querySelector(".message-content").appendChild(a),this._message=a},get message(){return this._message},postRender:function(){var a,b,c=this.querySelector(".message-content"),d=this.querySelector(".message-title"),e=this.querySelector("i");b=c?c.innerHTML:this.innerHTML,c||(this.innerHTML="",e||(e=this.ownerDocument.createElement("i")),e.setAttribute("aria-hidden",!0),a=this.ownerDocument.createElement("div"),a.className="message-container",d=this.ownerDocument.createElement("span"),d.className="message-title",d.setAttribute("role","heading"),d.setAttribute("aria-level","1"),c=this.ownerDocument.createElement("span"),c.className="message-content",a.appendChild(d),a.appendChild(c),this.appendChild(e),this.appendChild(a),this.setAttribute("role","alert")),this.message=b,this.type=this.getAttribute("type")||"error"},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),a("ha-paginated-message",d)}),define("text!hui/paginated-messages/paginated-messages.html",[],function(){return'<template>\n    <div class="messages"></div>\n    <div class="pagination-control">\n        <button aria-label="Previous alert" class="navigate-previous"><i class="hi hi-chevron-left"></i></button>\n        <div class="pagination-control-text">\n        </div>\n        <button aria-label="Next alert" class="navigate-next"><i class="hi hi-chevron-right"></i></button>\n        <span class="arrow-border"></span>\n    </div>\n    <button aria-label="Close" class="btn hi hi-close"></button>\n</template>\n'}),define("hui/helpers/string.helper",[],function(){return{replaceKeys:function(a,b){return a.replace(/{{([^{}]*)}}/g,function(a,c){var d=b[c];return"string"==typeof d||"number"==typeof d?d:a})}}}),define("hui/paginated-messages",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","register-component/template!./paginated-messages/paginated-messages.html","./core/keys","./helpers/string.helper","./core/utils","./core/a11y"],function(a,b,c,d,e,f,g,h){function i(a){j(a),k(a)}function j(a){var b=a.querySelector(".navigate-next"),c=a.querySelector(".navigate-previous"),d=!1,e=a._messages.length,f=a.ownerDocument;1===a._displayedIndex?(c===f.activeElement&&(d=!0),c.classList.remove("visible")):c.classList.add("visible"),a._displayedIndex===e?(b===f.activeElement&&c.focus(),b.classList.remove("visible")):(b.classList.add("visible"),d&&b.focus())}function k(a){var b=a.querySelector(".pagination-control"),c=a._messages.length;b.style.display=c>1?"block":"none",b.querySelector(".current-message").innerHTML=a._displayedIndex,b.querySelector(".total-messages").innerHTML=c}function l(a,b){var c,d=a._messages.length;b>0&&b<=d&&(a._displayedIndex=b,c=a.querySelector(".paginated-message-displayed"),c&&c.classList.remove("paginated-message-displayed"),a._messages[b-1].classList.add("paginated-message-displayed"),i(a))}var m;return m=c.createObject(b,{init:function a(){a.super(this),this.template=d,this._messages="",this._displayedIndex=0,this._dismissible=!0,this.setupProperties({paginationLabel:{default:"{{current}} of {{total}}",type:String,change:function(a){var b=f.replaceKeys(a,{current:'<span class="current-message"></span>',total:'<span class="total-messages"></span>'});this.querySelector(".pagination-control-text").innerHTML=b,i(this)}}}),this.on(".hi-close:click",function(){var a,b=this.querySelector(".messages"),c=this._messages.length;this._dismissible&&c>0&&(a=b.children[this._displayedIndex-1],a.close(),this._messages.splice(this._displayedIndex-1,1),b.removeChild(a),c--,this.emit("dismiss"),0===c?this.close():(this._displayedIndex=Math.max(this._displayedIndex-1,1),l(this,this._displayedIndex)))}.bind(this)),this.on(".navigate-next:click",function(){this.showNext()}.bind(this)),this.on(".navigate-previous:click",function(){this.showPrevious()}.bind(this)),this.on("keydown",function(a){a.keyCode===e.LEFT?this.showPrevious():a.keyCode===e.RIGHT&&this.showNext()}.bind(this),!0)},get displayedIndex(){return this._displayedIndex},get messages(){return this._messages},get dismissible(){return this._dismissible},set dismissible(a){a?this.classList.add("dismissible"):this.classList.remove("dismissible"),this._dismissible=a},set messages(a){this._messages=[],a=[].slice.call(a);var b,c=this.querySelector(".messages");c.innerHTML="",a.forEach(function(a){c.appendChild(a),this._messages.push(a)}.bind(this)),b=c.querySelector("ha-paginated-message:not(.hidden)"),b&&b.classList.add("paginated-message-displayed"),i(this)},showNext:function(){l(this,this._displayedIndex+1),this.emit("show-next")},showPrevious:function(){l(this,this._displayedIndex-1),this.emit("show-previous")},show:function(){this.classList.remove("hidden"),this.emit("show")},hide:function(){this.close(),this.emit("hide"),console.warn('DEPRECATION WARNING: The hide method is going to be deprecated. From now on, please use "close" instead.')},close:function(){h.setFocusOnPreviousElement(this),this.classList.add("hidden"),this.emit("close")},preRender:function(){var a,b=this.querySelector(".messages");this._messages||(a=this.querySelectorAll("ha-paginated-message"),this._messages=b?Array.prototype.map.call(a,function(a){return a}):g.removeNodesSafe(this,a))},postRender:function(){var a,b=this.querySelector(".messages");this.setAttribute("tabindex",-1),b.innerHTML="",this._messages.forEach(function(a){b.appendChild(a)}),"false"!==this.getAttribute("dismissible")?this.dismissible=!0:this.dismissible=!1,this._displayedIndex=1,a=b.querySelector("ha-paginated-message:not(.hidden)"),a&&a.classList.add("paginated-message-displayed"),h.addA11yFocus(this)},addEventListener:function(){HTMLElement.prototype.addEventListener.apply(this,arguments),"hide"===arguments[0]&&console.warn('DEPRECATION WARNING: The hide event is going to be deprecated. From now on, please use "close" instead.')}}),a("ha-paginated-messages",m)}),define("hui/radio-button",["register-component/v2/register","register-component/v2/UIComponent","./core/deviceUtils","object-utils/classes"],function(a,b,c,d){"use strict";return a("ha-radio-button",d.createObject(b,{init:function a(){a.super(this),this.setupProperties({label:{default:"",change:function(a){this._nodes.label.textContent=a,a||this.removeAttribute("label")}},value:{default:"",change:function(a){this._nodes.input.value=a}},disabled:{default:!1,type:Boolean,change:function(a){this._nodes.input.disabled=a}},checked:{default:!1,type:Boolean,change:function(a){this._nodes.input.checked!==a&&(this._nodes.input.checked=a)}},name:{default:"",change:function(a){this._nodes.input.name=a}}})},postRender:function a(){console.warn("DEPRECATION WARNING: Unless you are using Table, the ha-radio-button web component is deprecated. Try using the new React component to continue the journey to TSA."),a.super(this),this._nodes={};var b=this.querySelector("input"),d=this.querySelector("label");c.isHandheld()&&this.classList.add("mobile-radio"),b||(b=this.ownerDocument.createElement("input"),b.type="radio",this.appendChild(b)),b.id="ha-radio-button-"+this.componentId,this._nodes.input=b,d||(d=this.ownerDocument.createElement("label"),this.appendChild(d)),d.htmlFor=this._nodes.input.id,this._nodes.label=d,this.listenTo(b,"click",function(a){a.stopPropagation(),this.checked=a.target.checked,this._nodes.input.focus(),this.emit("click")}.bind(this)),this.listenTo(b,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this)),this.listenTo(d,"click",function(a){a.stopPropagation()})}}))}),define("hui/radio-button-group",["register-component/v2/register","./validatable/validatable","object-utils/classes","./core/utils","./core/a11y","./radio-button"],function(a,b,c,d,e){"use strict";function f(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("legend");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function g(a){var b=a.querySelectorAll("ha-radio-button");Array.prototype.forEach.call(b,function(a){a.checked=!1})}function h(a){var b=d.getComponentFromElement(a.target,"HA-RADIO-BUTTON-GROUP");d.stopEvent(a),b.reportValidity(null,!0),b._selectedItem!==a.target&&(b.value=a.target.value),b.emit(a.type)}function i(a){return a.required||!!a.expected}return a("ha-radio-button-group",c.createObject(b,{init:function a(){a.super(this),this._label=null,this._selectedItem=null,this.validationTarget=this,this.highlightElementSelector='input[type="radio"]',this._radios=null,this._fieldset=null,this._legend=null,this.setupProperties({name:{default:"ha-radio-button-group-"+this.componentId,type:String,change:function(a){var b;b=a,this.radios&&this._upgraded&&this.radios.forEach(function(a){a.name?a.name=b:a.setAttribute("name",b)})}},expected:{type:String,default:"",change:function(a,b){a!==b&&this.handleTooltipBinding(i(this))}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&f(this)}},required:{type:Boolean,default:!1,change:function(a,b){a!==b&&(f(this),this.handleTooltipBinding(i(this)))}},value:{default:"",type:String,change:function(a){var b,c;if(a&&this._upgraded){var d=this.radios?this.radios.length:0;for(g(this,a),b=0;b<d;b++)if(c=this.radios[b],c.getAttribute("value")===a){this._selectedItem=c,this._selectedItem.checked=!0;break}}}}})},set radios(a){this._radiosHandle&&this._radiosHandle.pause();var b=this.querySelector("fieldset"),c=function(a){this._radios=[],a=[].slice.call(a),Array.prototype.slice.call(b.querySelectorAll("ha-radio-button"),0).forEach(function(a){this.stopListening(a,"click",h),this.stopListening(a,"change",h),b.removeChild(a)}.bind(this)),a.forEach(function(a){this.listenTo(a,"click",h),this.listenTo(a,"change",h),a.setAttribute("name",this.name),b.appendChild(a),this._radios.push(a),a.hasAttribute("checked")&&a.checked&&(this.value=a.getAttribute("value"))},this)}.bind(this);this._upgraded&&c(a),this._radiosHandle&&this._radiosHandle.resume()},get radios(){return this._radios},set label(a){var b,c=this.querySelector("fieldset"),d=this.querySelector("legend"),e=c.querySelector(".label-container"),g=c.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(g&&(c.removeChild(g),d=this.querySelector("legend")),d||(d=this.ownerDocument.createElement("legend")),e||(e=this.ownerDocument.createElement("div"),e.classList.add("label-container"),e.appendChild(d),c.insertBefore(e,c.firstChild)),d.htmlFor=c.id,f(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),e&&c.removeChild(e),d=this.ownerDocument.createElement("legend"),d.htmlFor=c.id,Array.isArray(a)?(g&&c.removeChild(g),[].forEach.call(a,function(a){d.appendChild(a)}),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)):g?(c.removeChild(g),d.innerHTML=a.innerHTML,g.innerHTML=d.outerHTML):(d.appendChild(a),g=this.ownerDocument.createElement("ha-label"),g.appendChild(d)),c.insertBefore(g,c.firstChild),f(this)),this.listenTo(d,"click",function(a){"legend"===a.target.localName&&a.stopPropagation()})):(this.stopListening(d,"click"),g?c.removeChild(g):e&&c.removeChild(e),this.hasAttribute("label")&&this.removeAttribute("label")),this._label=a},get label(){return this._label},set selectedItem(a){},get selectedItem(){return this._selectedItem},attributeChangedCallback:function a(b,c,d){"label"===b?this.label=d:a.super(this,b,c,d)},ready:function a(){a.super(this);var b=this.querySelector("fieldset"),c=this.querySelector("ha-label"),f=this.getAttribute("label"),g=this.getAttribute("value"),h=Array.prototype.slice.call(b?b.querySelectorAll("ha-radio-button"):this.querySelectorAll("ha-radio-button")),i=this.name,j=this.value;b?this.radios=h:(this.appendChild(this.ownerDocument.createElement("fieldset")),this.radios=d.removeNodesSafe(this,h)),g&&(this.value=g),c?c?this.label=c:g&&this.removeAttribute("label"):f&&(this.label=f),this.name="",this.value="",this.name=i,this.value=j,e.addA11yFocus(this),this.hasAttribute("label")&&(this.label=this.getAttribute("label"))},attachedCallback:function a(){a.super(this)},detachedCallback:function(){this._radiosHandle&&(this._radiosHandle.remove(),this._radiosHandle=null)}}))}),define("hui/typeahead-base",["./validatable/validatable","object-utils/classes","./core/popup","./core/event","./add-new-helper","./core/keys","./core/utils","./core/menuItemUtils","./core/deviceUtils","./modal","./popover","./popover-form","./menu","./menu-item","./text-field"],function(a,b,c,d,e,f,g,h,i){"use strict";function j(a){return a.querySelector(".search-container ha-text-field.search")}function k(a){return g.getComponentFromElement(a,"HA-TEXTFIELD-TYPE-AHEAD")||g.getComponentFromElement(a,"HA-SELECT-TYPE-AHEAD")}function l(a,b){a&&(a._noAutoFocusFirstTabbableElementOnShow=!0,a._noAutoFocusLastActiveElementOnClose=!0,a.open?c.setPosition(a,b,["bottom","top"],["left","right"]):(c.show(a,b,["bottom","top"],["left","right"]),g.showPopoverOrModal(a,b,c),z=a))}function m(a){g.hidePopoverOrModal(a,c)}function n(a){var b=a.dropdownElement;a.classList.remove("menu-expanded"),a._getTriggerElement().setAttribute("aria-expanded","false"),m(b)}function o(a,b){var c,d,e=a.storeLabelProperty;d="HA-TEXTFIELD-TYPE-AHEAD"===a.tagName?a.storeLabelProperty:a.storeValueProperty,a.store?(c={},c[e]=b,c[d]=b,a._cachedItems.push(c)):console.error("No store defined. Please add a store where items can be retrieved")}function p(a){var b,d;return d=a.addNewPopover.querySelector("ha-popover-form"),d.addNewNameSelector&&(b=d.querySelector(d.addNewNameSelector))&&b.value?(g.hidePopoverOrModal(a.addNewPopover,c),o(a,b.value),a.value=b.value,a.classList.add("element-selected"),a.dropdownElement.classList.add("element-was-selected"),b.value="",void a.emit("change")):void g.hidePopoverOrModal(a.addNewPopover,c)}function q(a,b,c,e,f,g,h){var i=a.ownerDocument.createElement("ha-menu-item"),j=a.itemRenderer||a.renderItem;return"function"==typeof j?(i.label=j(i,e,b,a,d,g,h),f=e.label,i.disabled=i.label.disabled,i.value=e.value||e.label):(i.label=b,i.value=c||b,i.data=e),i.setAttribute("role","option"),f&&setTimeout(function(){i.setAttribute("aria-label",f)},0),i}function r(a,b){a.sort(function(a,c){return a[b]<c[b]?-1:a[b]>c[b]?1:0})}function s(a,b,c,d,e,f,i,j,k){var l,m,n,o,p;for(l=b.length,m=0;m<l;m++)n=b[m],e=n[c],k&&!d.test(e)||(o=e.replace(d,function(a){return g.createElement("span",{className:"type-ahead-strong",innerHTML:a}).outerHTML}),o=g.createElement("span",{innerHTML:o}),p=h.createMenuItemLabelWrapper(a.ownerDocument,[o]),j.push(q(a,p,n[f],n,e,i,j)))}function t(a,b,c){var d,f,g,h,k,m,o,p,t,u=[],v=a.dropdownElement.querySelector("ha-menu");if(0!==b.length||(v.items=[],!i.isDesktop()||a.addNew)){if(m=c?"":j(a).value.toString(),g=a.storeLabelProperty,h="HA-TEXTFIELD-TYPE-AHEAD"===a.tagName?a.storeLabelProperty:a.storeValueProperty,""===m?("HA-SELECT-TYPE-AHEAD"===a.tagName||i.isDesktop())&&b.forEach(function(b){u.push(q(a,b[g],b[h],b,null,m,u))}):"contains"===a.filterMode?(k=new RegExp(m,"gi"),s(a,b,g,k,f,h,m,u,!0)):"none"===a.filterMode&&s(a,b,g,k,f,h,m,u,!1),!a._alreadySortedItems&&a._sortList&&r(u,"textContent"),u.length>y&&m&&"HA-TEXTFIELD-TYPE-AHEAD"===a.tagName&&(u=Array.prototype.slice.call(u,0,y)),v.items=u,"HA-SELECT-TYPE-AHEAD"===a.tagName&&a.value)for(o=0;o<u.length;o++)d=u[o],d[h]===a.value?d.setAttribute("selected","selected"):d.removeAttribute("selected");i.isHandheld()||u.length>0||0===u.length&&a.addNew?(p=a.dropdownElement,a.disabled||(a.addNew&&e.addMenuItem(a),t=a.querySelector(".search-container"),a.classList.add("menu-expanded"),a._getTriggerElement().setAttribute("aria-expanded","true"),l(p,t))):i.isDesktop()&&n(a)}}function u(a){var b;a.keyCode!==f.TAB&&a.keyCode!==f.ENTER&&a.keyCode!==f.ESCAPE&&a.keyCode!==f.SPACEBAR&&(b=k(a.target),b._openedByKeyboard=!0,b._searchOnTimeout())}function v(a){var b="";a.staticItems||(b=a.typedText),a._fetchItems(b,function(){a.emit("items-update")})}function w(a){a.value="",j(a).value="",a._selectedItem=null,a.classList.remove("element-selected")}function x(a){var b;a&&a.target&&(b=a.target.parentElement),!b||"HA-SELECT-TYPE-AHEAD"!==b.tagName&&"HA-TEXTFIELD-TYPE-AHEAD"!==b.tagName||b._textField.focus()}var y=7,z=null;return b.createObject(a,{init:function a(){a.super(this),this._openedByKeyboard=!1,this._alreadySortedItems=!1,this._isValueSetByProgram=!0,this._cachedItems=null,this._store=null,this._renderItem=null,this._itemRenderer=null,this._sortList=!0,this._selectedItem=null,this._addNewPopover=null,this._fetchItems=function(a,b){a=a||"";var c={contains:a};this._alreadySortedItems=!1,this.store&&this.store.query?this.store.query(c).then(function(a){this.staticItems&&this._sortList&&(r(a,this.storeLabelProperty),this._alreadySortedItems=!0),this._cachedItems=a,b&&b(this,a)}.bind(this)):console.error("No store defined or 'query' method does not exist on the store. Please set a correct store")},this._getMatchItemValue=function(a,b){var c,d,e,f=j(this),g=b?this.storeLabelProperty:this.storeValueProperty;if(!this._cachedItems)return"";for(d=0;d<this._cachedItems.length;d++)if(c=this._cachedItems[d],c[g]===a)return this._selectedItem=c,e=this._selectedItem[this.storeLabelProperty],f.value=e,this.typedText=e,this.classList.add("element-selected"),"HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?e:this._selectedItem[this.storeValueProperty];return""},this._checkAndSetValue=function(){var a=this._getMatchItemValue(this.typedText,!0);this.value&&this.value===this.typedText||(this._isValueSetByProgram=!1,this.value=a,this.value||(this.value="",this.typedText=""))},this._matchAndShowResults=function(a){this.store?a?this.staticItems&&this._cachedItems?t(this,this._cachedItems,!0):this._fetchItems(null,function(){t(this,this._cachedItems,!0)}.bind(this)):this.staticItems&&this._cachedItems?t(this,this._cachedItems):this._fetchItems(j(this).value,t):console.error("No store defined. Please add a store where items can be retrieved")},this._triggerElementClickListener=function(){var a=this.dropdownElement;this.querySelector("ha-text-field").classList.add("mobile-focused"),this.addNewPopover&&this.addNewPopover.open?c.hide(this.addNewPopover):g.isOpen(a)?g.hidePopoverOrModal(a,c):(this._openedByKeyboard=!1,this._matchAndShowResults(!0)),setTimeout(function(){this.querySelector("ha-text-field").classList.remove("mobile-focused")}.bind(this),500),this.emit("click")},this._searchOnTimeout=function(){this._timeOut&&clearTimeout(this._timeOut),this._timeOut=setTimeout(function(){this._matchAndShowResults()}.bind(this),250)},this.setupProperties({label:{default:"",type:String,change:function(a){var b,c=this.querySelector("label"),d=this.querySelector(".action-button"),e=this.querySelector(".search-container ha-text-field"),f=e&&e.querySelector("input");if(a){if(c?f.id=c.getAttribute("for"):(c=this.ownerDocument.createElement("label"),this.insertBefore(c,this.firstElementChild),b=this.localName+"-label-"+this.componentId,c.setAttribute("id",b),c.setAttribute("for",f.id),d&&d.setAttribute("aria-describedby",b)),c.textContent=g.toggleSuffixText(a," *",this.required&&!this.noRequiredIndicator),i.isDesktop())f.removeAttribute("aria-label");else{this.querySelector("ha-modal.popover-menu-items").titleText=a}this.classList.remove("no-label")}else c&&c.parentNode===this&&(this.removeChild(c),d&&d.removeAttribute("aria-describedby")),f.setAttribute("aria-label",this.placeholder||this.typeaheadAriaLabel),this.classList.add("no-label")}},filterMode:{default:"contains"},storeLabelProperty:{default:"label"},staticItems:{default:!1,type:Boolean,change:function(a){a&&this.store?this._fetchItems():this._cachedItems=null}},noSort:{default:!1,type:Boolean,change:function(a){this._sortList=!a}},name:{default:"",type:String,change:function(a){j(this).name=a}},addNew:{default:!1,type:Boolean},addNewText:{default:"Add New",type:String},value:{default:"",type:String,change:function(a,b){var c,d=j(this),e="HA-TEXTFIELD-TYPE-AHEAD"===this.tagName;if(a===b)a&&(this.typedText=this._selectedItem[this.storeLabelProperty]);else{if(!this.store)return;a?(this._isValueSetByProgram&&(0===this._cachedItems.length?this._fetchItems(null,function(){(c=this._getMatchItemValue(a,e))||e||w(this)}.bind(this)):(c=this._getMatchItemValue(a,e))||e||w(this)),e&&!this.addNew&&(d.value=a)):w(this)}this._isValueSetByProgram=!0}},placeholder:{default:"",change:function(a){if(i.isHandheld()){this.querySelector("ha-modal.popover-menu-items").querySelector("ha-text-field").placeholder=a}j(this).placeholder=a,a||this.hasAttribute("placeholder")&&this.removeAttribute("placeholder")}},mobileMenuClass:{default:"",change:function(a){if(!a&&this.hasAttribute("mobileMenuClass")&&this.removeAttribute("mobileMenuClass"),a&&i.isHandheld()&&this.dropdownElement)if(Array.isArray(a))for(var b in a)this.dropdownElement.classList.add(b);else"string"==typeof a&&this.dropdownElement.classList.add(a)}},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){if(a!==b){var c=this.querySelector("label");c&&this.required&&(c.textContent=g.toggleSuffixText(c.textContent," *",!a))}}},required:{default:!1,type:Boolean,change:function(a,b){var c=this.querySelector("label"),e=this.querySelector("input");a!==b&&(c&&(c.textContent=g.toggleSuffixText(c.textContent," *",a&&!this.noRequiredIndicator)),this._validateIgnoreEvent||(this._validateIgnoreEvent=function(){this.reportValidity()}.bind(this)),this._validateUseEvent||(this._validateUseEvent=function(a){this.reportValidity(a)}.bind(this)),a?(d.on(this._menuPopover,"close",this._validateIgnoreEvent),this.on("input:focusout",this._validateUseEvent),e.setAttribute("required",!0),e.setAttribute("aria-required","true")):(d.off(this._menuPopover,"close",this._validateIgnoreEvent),this.off("input:focusout",this._validateUseEvent),e.setAttribute("required",!1),e.removeAttribute("aria-required")),this.handleTooltipBinding(a))}},openItemsOnFocus:{default:!1,type:Boolean},typeaheadAriaLabel:{default:"View Choices",type:String,change:function(a){var b=this.querySelector(".search-container input"),c=this.querySelector("button.action-button span.sr-only");"button"!==b.type&&this.label?c&&(c.textContent=this.placeholder||a):b.setAttribute("aria-label",this.placeholder||a)}}}),this.on("keydown",function(a){var b,c,d,h=a.target,i=this.dropdownElement,k=i.querySelector("ha-menu");switch(a.keyCode){case f.TAB:if("INPUT"===h.tagName&&h.parentElement.classList.contains("search")){if(g.isOpen(i)&&n(this),d=this._getMatchItemValue(this.typedText,!0),this.addNew){if(this._openedByKeyboard=!0,c=this.typedText,a.shiftKey){this._checkAndSetValue();break}this.value!==this.typedText&&(this._isValueSetByProgram=!1,this.value=d,this.value||(g.stopEvent(a),this.typedText=c,this.addNewPopover._closeOnBlur=!0,e.showPopoverForm(this,this.addNewPopover)))}else if(this._isValueSetByProgram=!1,this.value="HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?d||this.typedText:d,a.shiftKey)break}else h===this.querySelector("button.action-button")&&g.isOpen(i)&&(g.stopEvent(a),n(this));break;case f.ESCAPE:g.isOpen(i)&&(g.stopEvent(a),n(this)),j(this).focus();break;case f.DOWN:g.stopEvent(a),g.isOpen(i)?i.classList.contains("position-bottom")&&(b=k.items&&k.items.length>0?k.items[0]:k,b.focus()):(this._openedByKeyboard=!0,this._matchAndShowResults(this));break;case f.UP:g.stopEvent(a),g.isOpen(i)?i.classList.contains("position-top")&&(b=k.items&&k.items.length>0?k.items[k.items.length-1]:k,b.focus()):(this._openedByKeyboard=!0,this._matchAndShowResults(this));break;case f.BACKSPACE:case f.DELETE:"INPUT"===h.tagName&&h.parentElement.classList.contains("search")&&(this._openedByKeyboard=!0,this._searchOnTimeout())}}.bind(this))},postRender:function a(){a.super(this);var b=this.querySelector("div.search-container"),c=j(this),h=i.isHandheld(),k=this.querySelector("ha-menu"),l=this.querySelector((h?"ha-modal":"ha-popover")+".popover-menu-items"),m=this.querySelector("ha-popover-form"),o=this.localName+"-"+this.componentId+"-search-container",p=this.querySelector(".search-container ha-text-field input");b||(b=this.ownerDocument.createElement("div"),b.classList.add("search-container"),c=this.ownerDocument.createElement("ha-text-field"),c.classList.add("search"),b.appendChild(c),p=c.querySelector("input"),this.appendChild(b),k=this.ownerDocument.createElement("ha-menu"),k.classList.add("typeahead-menu"),k.setAttribute("role","listbox"),i.isIPhonePlus()?k._bottomOffset=110:k._bottomOffset=100,l=this.ownerDocument.createElement(h?"ha-modal":"ha-popover"),l.targetSelector="#"+o,l.classList.add("popover-menu-items"),l.section=k,h&&this._createPopoverFilterTextField(l),this.appendChild(l)),this.dropdownElement=l,b.id=o,l.targetSelector="#"+o,l.postHandleCloseOnBlur=function(a,b){var c,d;a&&b&&(d=a.ownerDocument.activeElement,a.target&&(c=a.target.parentElement),c&&"HA-SELECT-TYPE-AHEAD"===c.tagName&&(b.classList.contains("add-new-menu-item")||a.querySelector("ha-popover-form")||c.contains(d)||c._checkAndSetValue()))},l.postHandleKeydown=x,this.listenTo(c,"focus",function(a){a.stopPropagation(),this.querySelector(".search-container").classList.add("focused"),this._menuPopover&&this._menuPopover.open&&this._menuPopover.close(),this.openItemsOnFocus&&i.isDesktop()&&this._matchAndShowResults(),this.emit("focus")}.bind(this),!0),this.listenTo(c,"click",function(a){a.stopPropagation(),this.disabled||(i.isDesktop()?(a.target.select(),this.querySelector(".search-container").classList.add("focused")):this._triggerElementClickListener())}.bind(this),!0),this.listenTo(c,"keypress",u,!0),this.listenTo(c,"keyup",function(a){a.keyCode!==f.ESCAPE&&(this.typedText=c.value)}.bind(this),!0),this.listenTo(this,"blur",function(a){a.target===c.querySelector("input")&&this._blurCheck(a)}.bind(this),!0),m&&m.parentNode&&(this.addNewPopover=m.parentNode),this.listenTo(this._menuPopover,"show",function(a){this.emit("items-show"),a.stopPropagation()}.bind(this)),this.listenTo(this._menuPopover,"close",function(a){i.isDesktop()&&this.emit("items-close"),a.stopPropagation(),this.addNew&&this.dropdownElement.querySelector("ha-menu").remove(0),this._getTriggerElement().setAttribute("aria-expanded","false"),this.classList.remove("menu-expanded"),this.reportValidity()}.bind(this)),this.listenTo(this._menuPopover,"hide",function(a){a.stopPropagation()}.bind(this)),d.on(this._menuPopover,"select",function(a){var b,c=this.dropdownElement.querySelector("ha-menu");a.target===c&&(n(this),b=c.selectedItem,this._itemSelected=!0,this.addNew&&b.classList.contains("add-new-menu-item")?(this.addNewPopover._closeOnBlur=!0,e.showPopoverForm(this,this.addNewPopover),this.emit("add-new")):("HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?this.typedText=b.value:this.typedText=b.getAttribute("aria-label"),this.value!==b.value&&(this._isValueSetByProgram=!1,this.value=b.value,this._selectedItem=b.data),this.classList.add("element-selected"),this.dropdownElement.classList.add("element-was-selected"),i.isDesktop()&&j(this).focus(),this.emit("change")))}.bind(this)),this.listenTo(this._menuPopover,"keydown",function(a){a.keyCode===f.TAB&&i.isDesktop()&&(c.focus(),g.stopEvent(a))}.bind(this)),h&&(l.titleText=this.label,l.dismissible=!0,l.classList.add("mobile-menu"),l.classList.add("mobile-type-ahead-menu"),l.size="fullscreen",p.type="button",p.setAttribute("aria-label",this.placeholder||this.typeaheadAriaLabel),this.listenTo(l,"will-show",function(){this._savedBodyScrollTop=document.body.scrollTop}.bind(this)),this.listenTo(l,"will-close",function(){document.activeElement&&document.activeElement.blur(),this._savedBodyScrollTop&&(document.body.scrollTop=this._savedBodyScrollTop,this._savedBodyScrollTop=null)}.bind(this)),this.listenTo(l,"close",function(){this.addNewPopover&&this.addNewPopover.open||(p.focus(),setTimeout(function(){document.activeElement===p&&(p.blur(),p.focus())},100))}.bind(this)),this.listenTo(p,"blur",function(a){this._blurCheck(a)}.bind(this)))},_createPopoverFilterTextField:function(a){var b=document.createElement("ha-text-field"),c=document.createElement("form"),d=document.createElement("input"),e=a.querySelector("ha-menu"),g=function(){e.focus()};d.type="submit",d.value="",c.action="#",c.classList.add("typeahead-mobile-form"),c.addEventListener("submit",function(b){b.stopPropagation(),b.preventDefault(),this._saveNewValue=!0,a.close()}.bind(this)),b.setAttribute("autocomplete","off"),b.classList.add("active"),this.listenTo(b,"keyup",function(a){a.keyCode!==f.ESCAPE&&a.keyCode!==f.ENTER&&(this._matchAndShow=!0,this.typedText=b.value)}.bind(this)),"iOS"===i.getOSName()&&(a._lockBody=!0),this.listenTo(a,"show",function(){this._tempValue=this.typedText,this._clearFromMenu=!1,"HA-SELECT-TYPE-AHEAD"===this.tagName?(this._matchAndShow=!0,b.value=this.typedText=j(this).value||""):b.value=this.typedText||"","iOS"===i.getOSName()&&this.listenTo(b,"blur",g)}.bind(this)),this.listenTo(a,"close",function(){this.emit("items-close"),this._itemSelected||this._saveNewValue||(this._clearFromMenu?(this.value="",this._clearFromMenu=!1,this.emit("change")):this.typedText=this._tempValue),this._itemSelected=!1,this._saveNewValue=!1,"iOS"===i.getOSName()&&this.stopListening(b,"blur",g)}.bind(this)),"HA-TEXTFIELD-TYPE-AHEAD"===this.tagName?(c.appendChild(b),c.appendChild(d),e.parentNode.insertBefore(c,e),this.listenTo(b,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this))):e.parentNode.insertBefore(b,e)},detachedCallback:function(){[this._addNewPopover,this._menuPopover].forEach(function(a){a&&a.parentElement&&a.parentElement.removeChild(a)})},get store(){return this._store},set store(a){this._store=a,this._cachedItems=[],this.value="",this.staticItems&&this._fetchItems(),this._store&&this._store.on&&(this._store.on("add",function(){v(this)}.bind(this)),this._store.on("delete",function(){v(this)}.bind(this)))},get renderItem(){return this._renderItem},set renderItem(a){this._renderItem=a},get itemRenderer(){return this._itemRenderer},set itemRenderer(a){this._itemRenderer=a},get addNewPopover(){return this._addNewPopover},set addNewPopover(a){var b;if(this.addNewPopover&&this.addNewPopover!==a&&this.removeChild(this.addNewPopover),this._addNewPopover=a,a){this._addNewPopover.postHandleKeydown=x,b=this.querySelector(".search-container").id,a.targetSelector?a.targetSelector="#"+b:a.setAttribute("targetSelector","#"+b),a.classList.add("popover-add-items"),a.setAttribute("automationId","addNewItem_popover"),this.appendChild(a);var c=a.querySelector("ha-popover-form");c&&(d.on(c,"save",function(a){g.stopEvent(a),p(this),this.emit("add-new")}.bind(this)),d.on(c,"cancel",function(a){g.stopEvent(a),m(this.addNewPopover)}.bind(this)))}},_getMenuPopover:function(){return this._menuPopover||(this._menuPopover=this.querySelector((i.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},get _textField(){return j(this)},get typedText(){return j(this).value},set typedText(a){var b=j(this);b.value!==a&&(b.value=a),"HA-TEXTFIELD-TYPE-AHEAD"!==this.tagName||this.addNew||(this.value=this.typedText),this._matchAndShow&&(this._matchAndShow=!1,this._matchAndShowResults())},_blurCheck:function(a){var b=k(a.target),c=g.getSafeTargetFromEvent(a);b.querySelector(".search-container").classList.remove("focused"),b.contains(c)||b.dropdownElement.contains(c)||(n(b),"HA-SELECT-TYPE-AHEAD"!==b.tagName||b.addNew&&"addNewName"===c.parentElement.id||b._checkAndSetValue(),b.emit("blur"))},get _inputElement(){return j(this)._inputElement},get dropdownElement(){return this._menuPopover||(this._menuPopover=this.querySelector((i.isHandheld()?"ha-modal":"ha-popover")+".popover-menu-items")),this._menuPopover},set dropdownElement(a){this._menuPopover=a},reportValidity:function a(b){if(b&&"blur"===b.type&&this._menuPopover.open)setTimeout(function(){this._menuPopover&&(this._menuPopover.contains(document.activeElement)||this.contains(document.activeElement))||a.super(this,b)}.bind(this),0);else if(i.isHandheld()){var c=this.querySelector(".input-error-message"),d=this.querySelector("input");c?(c.setAttribute("id","input-error-message-"+this.componentId),d.setAttribute("aria-describedby","input-error-message-"+this.componentId)):d.removeAttribute("aria-describedby"),(!b||"blur"!==b.type&&"hide"!==b.type)&&a.super(this,b)}else a.super(this,b)},resetValidation:function a(){this.dropdownElement.open&&this.dropdownElement.close(!0),a.super(this)}})}),define("hui/select-type-ahead",["register-component/v2/register","object-utils/classes","./typeahead-base","./core/icon","./core/popup","./core/keys","./core/utils","./core/deviceUtils","./popover","./popover-form","./menu","./menu-item","./text-field"],function(a,b,c,d,e,f,g,h){"use strict";function i(a){var b=a.dropdownElement;a.addNewPopover&&a.addNewPopover.open?e.hide(a.addNewPopover):b.open?(e.hide(b),a.querySelector(".search-container ha-text-field input").focus()):(a._openedByKeyboard=!1,a._matchAndShowResults(a)),a.emit("click")}var j;return j=b.createObject(c,{init:function a(){a.super(this),this.validationTarget=this,this.highlightElementSelector=".search input",this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){var b=this.querySelector("button.action-button");b&&(b.disabled=a),this.querySelector("ha-text-field.search").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},icon:{default:"",type:String,change:d.onChangeIconProperty},storeValueProperty:{default:"value"},size:{default:7,type:Number,change:function(a){var b=this.dropdownElement.querySelector("ha-menu");!b.render?b.setAttribute("size",a):b.size=a}},_ownerComponentName:{default:"HA-SELECT-TYPE-AHEAD",type:String},automationId:{default:"",type:String,change:function(a,b){if(a!==b){if(h.isDesktop){var c=this.querySelector("ha-select-type-ahead ha-popover.popover-menu-items");c&&a?c.setAttribute("automationId",a+"_popover"):c&&!a&&c.removeAttribute("automationId")}if(h.isHandheld){var d=this.querySelector("ha-select-type-ahead ha-modal");d&&a?d.setAttribute("automationId",a+"_modal"):d&&!a&&d.removeAttribute("automationId")}}}}})},_clearInputValue:function(a){var b=a.parentElement.querySelector("ha-menu");""!==this.value&&(this.typedText="",this._tempValue="",b.selectedIndex=-1,this._clearFromMenu=!0),a.value="",this._matchAndShowResults(!0),a.focus()},postRender:function a(){a.super(this);var b,c,d,e=this.querySelector("button.action-button"),j=this.querySelector("div.search-container"),k=h.isHandheld(),l=this.querySelector((k?"ha-modal":"ha-popover")+".popover-menu-items");if(h.isDesktop())e||(e=this.ownerDocument.createElement("button"),e.type="button",e.classList.add("action-button"),e.setAttribute("aria-expanded","false"),e.setAttribute("aria-haspopup","true"),e.setAttribute("tabindex","-1"),b=this.ownerDocument.createElement("span"),b.classList.add("caret"),b.setAttribute("aria-hidden","true"),e.appendChild(b),c=this.ownerDocument.createElement("span"),c.classList.add("caret"),c.setAttribute("aria-hidden","true"),e.appendChild(c),d=this.ownerDocument.createElement("span"),d.classList.add("sr-only"),d.innerHTML=this.placeholder||this.typeaheadAriaLabel,e.appendChild(d),j.appendChild(e)),this.listenTo(e,"click",function(a){this.disabled||(a.stopPropagation(),e.focus(),i(this))}.bind(this)),this.listenTo(e,"focus",function(){this.querySelector(".search-container").classList.add("focused")}.bind(this),!0),this.listenTo(e,"blur",function(a){this._blurCheck(a)}.bind(this),!0),this.listenTo(e,"keydown",function(a){if(a.keyCode===f.SPACEBAR||a.keyCode===f.ENTER)a.target.classList.contains("action-button")&&(g.stopEvent(a),l.open||(this._openedByKeyboard=!0,this._matchAndShowResults(this)));else if(a.keyCode===f.TAB&&!a.shiftKey&&this.typedText!==this.value){var b=this._getMatchItemValue(this.typedText,!0);this._isValueSetByProgram=!1,this.value=b}}.bind(this),!0),this.listenTo(e,"keyup",function(a){a.keyCode===f.SPACEBAR&&a.preventDefault()},!0);else{var m=this.querySelector("ha-text-field"),n=l.querySelector("ha-text-field"),o=this.ownerDocument.createElement("button"),p=this;l.classList.add("select-ta-mobile-menu"),c=this.ownerDocument.createElement("button"),c.classList.add("hi"),c.classList.add("hi-chevron-down"),c.setAttribute("aria-hidden","true"),m.appendChild(c),o.className="btn btn-link hi hi-global-create",o.setAttribute("aria-label","Clear input"),n.appendChild(o),this.listenTo(o,"focus",function(){p._clearInputValue(n)}),this.listenTo(o,"click",function(){p._clearInputValue(n)}),m.ownerTag=this._ownerComponentName,h.addiOS9ImmediateFocus()}},set selectedItem(a){},get selectedItem(){return this._selectedItem},_getTriggerElement:function(){return this.querySelector("button.action-button")||this.querySelector('input[type="button"]')}}),a("ha-select-type-ahead",j)}),define("text!hui/tags/tag.html",[],function(){return'<template>\n    <span class="tag-label">{{label}}</span>\n    <button>\n        <span class="hi hi-close" aria-hidden="true"></span>\n        <span class="dismiss-text sr-only">Dismiss {{label}}</span>\n    </button>\n</template>\n'}),define("hui/tag",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","register-component/template!./tags/tag.html"],function(a,b,c,d){return a("ha-tag",b.createObject(c,{init:function a(){a.super(this),this.template=d,this.setupProperties({value:{type:String,default:""},label:{type:String,default:"",change:function(a){this.querySelector("span.tag-label").textContent=a,this.querySelector(".dismiss-text").textContent=this.dismissText+a}},dismissText:{type:String,default:"Dismiss ",change:function(a){this.querySelector(".dismiss-text").textContent=a+this.label}},notDismissible:{type:Boolean,default:!1,change:function(a){this.querySelector("button").classList[a?"add":"remove"]("hidden")}}}),this.on("button:click",this._onClickDismiss.bind(this))},preRender:function a(){a.super(this),this._label=this.textContent},postRender:function a(){a.super(this),this._label&&(this.label=this._label)},_onClickDismiss:function(a){this.emit("dismiss"),a.stopPropagation()}}))}),define("text!hui/tags/tags.html",[],function(){return'<template>\n    <div class="tags-container"></div>\n    <button class="more" action="showAll"></button>\n    <button class="dismiss hidden" action="dismissAll"></button>\n</template>\n'}),define("hui/tags",["register-component/v2/register","object-utils/classes","register-component/v2/UIComponent","./helpers/string.helper","register-component/template!./tags/tags.html","./tag"],function(a,b,c,d,e){function f(a,b){var c=document.createElement("style");return document.querySelector("head").appendChild(c),c=c.sheet,c.addRule?c.addRule(a,b):c.insertRule(a+"{"+b+"}",0),{sheet:c,remove:function(){var a=c.ownerNode;c.deleteRule(0),a.parentElement.removeChild(a),c=a=null}}}var g;return g=b.createObject(c,{init:function a(){a.super(this),this.template=e,this.setupProperties({maxDisplay:{type:Number,default:3,change:function(a){var b="ha-tags-"+this.componentId;this.setAttribute("data-unique-id",b),this._maxDisplayRule&&this._maxDisplayRule.remove(),this._maxDisplayRule=f("ha-tags[data-unique-id="+b+"] ha-tag:nth-of-type(1n + "+(a+1)+")","display: none"),this._update()}},noDismissAll:{type:Boolean,default:!1,change:function(){this._update()}},dismissAllText:{type:String,default:"Clear all",change:function(a){this.querySelector("button.dismiss").textContent=a}},moreText:{type:String,default:"... and {{count}} more",change:function(){this._update()}}}),this.on("ha-tag:dismiss",this._onDismiss.bind(this)),this.on("button:click",this._onClickButton.bind(this))},preRender:function a(){a.super(this),this._tags=this.querySelectorAll("ha-tag")},postRender:function a(){a.super(this),this.tags=this._tags;var b=this.querySelectorAll("ha-tag");this._tags=[],this.tags=b},detachedCallback:function(){this._maxDisplayRule&&this._maxDisplayRule.remove(),this._maxDisplayRule=null},add:function(a){this._tags.push(a),this.querySelector(".tags-container").appendChild(a),this._update()},remove:function(a){a&&(this.querySelector(".tags-container").removeChild(a),this.tags.splice(this.tags.indexOf(a),1),this._update())},set tags(a){var b=this.querySelector(".tags-container");Array.prototype.forEach.call(b.querySelectorAll("ha-tag"),this.remove.bind(this)),this._tags=[],a&&Array.prototype.forEach.call(a,this.add.bind(this))},get tags(){return this._tags},_onDismiss:function(a){this.remove(a.target)},_onClickButton:function(a){var b=a.target.getAttribute("action");"function"==typeof this[b]&&this[b]()},showAll:function(){this.emit("show-all")},dismissAll:function(){this.emit("dismiss-all"),this.tags=null},_update:function(){var a=this.querySelector("button.more"),b=this.querySelector("button.dismiss"),c=this.tags;c.length>this.maxDisplay?(a.classList.remove("hidden"),a.textContent=d.replaceKeys(this.moreText,{count:c.length-this.maxDisplay})):(a.classList.add("hidden"),a.textContent=""),b.classList[!this.noDismissAll&&c.length?"remove":"add"]("hidden")}}),a("ha-tags",g)}),define("hui/textarea",["register-component/v2/register","./validatable/validatable","./core/deviceUtils","./core/utils","object-utils/classes"],function(a,b,c,d,e){function f(a,b){function c(a){for(3===a.nodeType&&""!==a.textContent.trim()&&(e=a),a=a.firstChild;a;)c(a),a=a.nextSibling}var e,f=a.querySelector("label");f&&(b?f.textContent=d.toggleSuffixText(b," *",a.required&&!a.noRequiredIndicator):(c(f),e&&(e.textContent=d.toggleSuffixText(e.textContent," *",a.required&&!a.noRequiredIndicator))))}function g(a,b){return function(c){a._inputElement[b]=c}}function h(a){var b=a._inputElement;a._validationListenersAdded||(a._boundValidator=a._reportValidity.bind(a),a.listenTo(b,"mouseenter",a._boundValidator),a.listenTo(b,"mouseout",a._boundValidator),a.listenTo(b,"focus",a._boundValidator),a.listenTo(b,"blur",a._boundValidator),a.listenTo(b,"keyup",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseover",a._boundValidator),a.listenTo(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.add("ha-validatable"),a._validationListenersAdded=!0)}function i(a){var b=a._inputElement;!d.validationRequired(a)&&a._validationListenersAdded&&(a.stopListening(b,"mouseenter",a._boundValidator),a.stopListening(b,"mouseout",a._boundValidator),a.stopListening(b,"focus",a._boundValidator),a.stopListening(b,"blur",a._boundValidator),a.stopListening(b,"keyup",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseover",a._boundValidator),a.stopListening(a,".ha-icon-alert:mouseout",a._boundValidator),a.classList.remove("ha-validatable"),a._validationListenersAdded=!1)}return a("ha-textarea",e.createObject(b,{init:function a(){a.super(this),this._validationListenersAdded=!1,this._windowResizeListenersAdded=!1,this._label="",this._validator=null,this._customValidatorFunction=null,this._mobileRows=2,this._mobileRowsMax=4,this.highlightElementSelector="textarea",this.setupProperties({cols:{type:Number,default:20,change:g(this,"cols")},disabled:{type:Boolean,change:function(a){this._inputElement.disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},labelOptional:{default:"optional",change:function(a){var b=this.querySelector(".optional");this.optional&&b&&(b.innerHTML=" "+a)}},maxLength:{default:524288,type:Number,change:g(this,"maxLength")},minLength:{default:0,type:Number,change:g(this,"minLength")},name:{default:"",type:String,change:function(a){a?this._inputElement.name=a:this._inputElement.removeAttribute("name")}},optional:{default:!1,type:Boolean,change:function(a){var b,c=this.querySelector("label");c&&(b=c.querySelector("span.optional"),a?(b||(b=this.ownerDocument.createElement("span"),b.className="optional",c.appendChild(b)),b.innerHTML=" "+this.labelOptional):b&&c.removeChild(b))}},pattern:{default:"",change:function(a){a?h(this):i(this)}},placeholder:{default:"",type:String,change:function(a){var b=this._inputElement;b.placeholder=a,this.label||b.setAttribute("aria-label",a)}},readOnly:{type:Boolean,change:g(this,"readOnly")},noRequiredIndicator:{default:!1,type:Boolean,change:function(a,b){a!==b&&f(this)}},required:{default:!1,type:Boolean,change:function(a,b){var c=this._inputElement;a!==b&&(f(this),a?h(this,c):i(this,c),c.required=a,c.setAttribute("aria-required",a))}},rows:{type:Number,default:2,change:g(this,"rows")},mobileRows:{type:Number,default:2,change:function(a){if(a>this._mobileRowsMax)return console.error("mobileRows should not be more than mobileRowsMax."),void console.error("mobileRows is set to "+a+" and mobileRowsMax is set to "+this._mobileRowsMax);this._mobileRows=a}},mobileRowsMax:{type:Number,default:4,change:function(a){if(a<this._mobileRows)return console.error("mobileRowsMax should not be less than mobileRows."),void console.error("mobileRows is set to "+this._mobileRows+" and mobileRowsMax is set to "+a);this._mobileRowsMax=a}},value:{type:String,default:"",change:function(a){this._inputElement.value=a,a?this.classList.add("mobile-textarea-content"):this.classList.remove("mobile-textarea-content"),this._resize()}},mobileMaxHeight:{type:Number,default:0,change:function(){console.warn('DEPRECATION WARNING: The "mobileMaxHeight" variable is deprecated. From now on, please use "mobileRowsMax" instead.')}}}),this._validationData={}},postRender:function a(){a.super(this);var b,e=this._inputElement,f=this.querySelector("ha-label"),g=this.getAttribute("value"),h=c.isHandheld();if(this._notDesktop=h,e||(e=this.ownerDocument.createElement("textarea"),e.className="ha-input",this.appendChild(e)),this._resize(),e.id="ha-textarea-"+this.componentId,this.validationTarget=this,g&&(this.value=g,h&&this.classList.add("mobile-textarea-content")),h&&(this.classList.add("mobile-textarea"),c.addiOS9ImmediateFocus(),this.listenTo(e,"focus",function(){this.classList.add("mobile-textarea-focused"),this._resize()}.bind(this)),this.listenTo(e,"blur",function(){this.classList.remove("mobile-textarea-focused"),this._resize(),this.checkValidity()&&this._resize(),c.isAndroid()&&this._windowResizeListenersAdded&&c.removeScrollToViewAndroid(this)}.bind(this)),c.isAndroid())){var i,j;this.listenTo(e,"click",function(){i={width:window.innerWidth,height:window.innerHeight},j=d.closest(this,"ha-drawer-large")||d.closest(this,"ha-page-modal"),c.scrollToViewAndroid(this,i,j)}.bind(this))}b=this.getAttribute("label"),f?this.label=Array.prototype.slice.call(f.childNodes):b&&(this.label=b),this.listenTo(e,"change",function(a){a.stopPropagation(),h&&(this.value?this.classList.add("mobile-textarea-content"):this.classList.remove("mobile-textarea-content")),this.emit("change")}.bind(this)),this.listenTo(e,"input",function(a){a.stopPropagation(),this.value=a.target.value,this.emit("input")}.bind(this)),this.listenTo(e,"invalid",function(a){a.preventDefault()})},attachedCallback:function(){var a=this.value;this.value="",this.value=a},get validator(){return this._customValidatorFunction},set validator(a){a&&a!==this.validator?(this._customValidatorFunction=a,h(this)):a||(this._customValidatorFunction=null,i(this))},get _inputElement(){return this.querySelector("textarea")},set label(a){var b,c=this._inputElement,d=this.querySelector("label"),e=this.querySelector("ha-label");a?(b=Array.isArray(a)||1===a.nodeType,"string"==typeof a?(e&&(this.removeChild(e),d=this.querySelector("label")),d||(d=this.ownerDocument.createElement("label"),this.insertBefore(d,c)),d.htmlFor=c.id,f(this,a),this.setAttribute("label",a)):b&&(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),d&&!e?this.removeChild(d):e&&this.removeChild(e),d=this.ownerDocument.createElement("label"),e=this.ownerDocument.createElement("ha-label"),a=Array.isArray(a)?a:[a],a.forEach(function(a){d.appendChild(a)}),e.appendChild(d),this.insertBefore(e,this.firstElementChild),f(this)),c.hasAttribute("aria-label")&&c.removeAttribute("aria-label")):(this.hasAttribute("label")&&this.removeAttribute("label"),d=this.querySelector("label"),e=this.querySelector("ha-label"),e?this.removeChild(e):d&&this.removeChild(d),c.placeholder&&c.setAttribute("aria-label",c.placeholder)),this._label=a},get label(){return this._label},attributeChangedCallback:function a(b,c,d){"label"===b?(this.label=d,this.optional&&this.setAttribute("optional","true")):a.super(this,b,c,d)},_reportValidity:function(a){var b=d.getComponentFromElement(a.target,this.tagName);b&&b.reportValidity(a)},_getContentHeightMobile:function(a){var b=this.ownerDocument.createElement("div"),c=0;return b.style.fontSize=a.fontSize,b.style.whiteSpace=a.whiteSpace,b.style.wordBreak=a.wordBreak,b.style.wordWrap=a.wordWrap,b.style.wordSpacing=a.wordSpacing,b.style.textTransform=a.textTransform,b.style.fontFamily=a.fontFamily,b.style.lineHeight=a.lineHeight,b.style.fontWeight=a.fontWeight,b.style.width=a.width,b.style.padding=a.padding,b.style.letterSpacing=a.letterSpacing,b.style.position="absolute",b.style.top="-90px",b.style.left="-"+(parseInt(a.width)+10)+"px",b.textContent=this.value.indexOf("\n")===this.value.length-1?this.value+"_":this.value,this.ownerDocument.body.appendChild(b),c=b.offsetHeight,this.ownerDocument.body.removeChild(b),c},_resize:function(){if(this._notDesktop){var a=getComputedStyle(this._inputElement),b=23,c=34,d=this._getContentHeightMobile(a),e=parseInt(a.height),f=this._inputElement,g=0,h=0,i=parseInt(Math.ceil(a.lineHeight.slice(0,-2))),j=Math.max(parseInt(e/i),1);i=0===i?b:i,g=Math.max(parseInt(Math.floor(d/i)),1),this.value||this.classList.contains("mobile-textarea-focused")?this._mobileRows>g?(h=this._mobileRows*i,this._mobileRows):g<=this._mobileRowsMax&&g!==j?(h=g*i,g):(h=Math.max(e,c),Math.min(this._mobileRowsMax,j)):(h=c,this.mobileRows),f.style.paddingTop=h<=c?10+"px":"0px",f.style.height=h+"px",this.style.height=this._mobileRowsMax*i+b+"px"}}}))}),define("hui/textfield-type-ahead",["register-component/v2/register","object-utils/classes","./typeahead-base","./core/icon","./core/deviceUtils"],function(a,b,c,d,e){"use strict";return a("ha-textfield-type-ahead",b.createObject(c,{init:function a(){a.super(this),this.validationTarget=this,this.setupProperties({disabled:{default:!1,type:Boolean,change:function(a){this.querySelector("ha-text-field.search").disabled=a,a?this.classList.add("disabled"):this.classList.remove("disabled")}},icon:{default:"",type:String,change:d.onChangeIconProperty},maxLength:{default:524288,type:Number,change:function(a){this.querySelector("ha-text-field.search").maxLength=a}},autoComplete:{default:"on",change:function(a){this.querySelector("input").autocomplete=a}},size:{default:20,type:Number,change:function(a){this.querySelector("ha-text-field.search").size=a}},menuSize:{default:7,type:Number,change:function(a){var b=this._getMenuPopover().querySelector("ha-menu");!b.render?b.setAttribute("size",a):b.size=a}},_ownerComponentName:{default:"HA-TEXT-FIELD-TYPE-AHEAD",type:String},automationId:{default:"",type:String,change:function(a,b){if(a!==b){if(e.isDesktop){var c=this.querySelector("ha-textfield-type-ahead ha-popover.popover-menu-items");c&&a?c.setAttribute("automationId",a+"_popover"):c&&!a&&c.removeAttribute("automationId")}if(e.isHandheld){var d=this.querySelector("ha-textfield-type-ahead ha-modal");d&&a?d.setAttribute("automationId",a+"_modal"):d&&!a&&d.removeAttribute("automationId")}}}}})},postRender:function a(){a.super(this),this.listenTo(this._textField,"change",function(a){a.stopPropagation(),this.emit("change")}.bind(this)),this.querySelector("ha-text-field").ownerTag=this._ownerComponentName},get selectedItem(){return this._selectedItem},_getTriggerElement:function(){return this._inputElement}}))}),define("hui/trowser/trowser-base",["object-utils/classes","register-component/v2/UIComponent","../core/contentNode","../core/a11y","../core/event","../core/utils","../core/deviceUtils"],function(a,b,c,d,e,f,g){"use strict";function h(a,b,c,d,e){k(a,function(a){var f,g,h=a.querySelector("ha-page-modal-header"),i=h.headerItems;b?(f=a.ownerDocument.createElement("ha-page-modal-header-item"),f.type=c,f.icon=d,f.setAttribute("position",e),h.headerItems=i.concat(f)):(g=a.querySelectorAll('ha-page-modal-header-item:not([type="'+c+'"])'),h.headerItems=Array.prototype.slice.call(g))})}function i(a){return Array.isArray(a)&&a.length>0?a:null}function j(a){var b=f.createElement,c={primary:[],secondary:[],tertiary:[]},d=[].slice.call(a.children),e=function(a,b){var d=b.getAttribute("action");return-1!==Object.keys(c).indexOf(d)&&a[d].push(b),a};return d.reduce(e,c),f.removeAllChildrenFrom(a),g.isHandheld()?f.appendChildren(a,[b("span",{className:"footer-left"},c.tertiary.concat(c.secondary)),b("span",{className:"footer-center"}),b("span",{className:"footer-right"},c.primary)]):f.appendChildren(a,[b("span",{className:"footer-left"}),b("span",{className:"footer-center"},c.tertiary),b("span",{className:"footer-right"},c.secondary.concat(c.primary))]),a}var k=f.ifExists,l=f.ifSafeChain;return a.createObject(b,{init:function a(){a.super(this),this._pageModal=null,this.setupProperties({reactLayering:{type:Boolean,default:!1},titleText:{type:String,default:"",change:function(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").titleText=a})}},infoText:{type:String,default:"",change:function(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").infoText=a})}},history:{type:Boolean,default:!1,change:function(a){h(this,a,"history","history","left")}},settings:{type:Boolean,default:!1,change:function(a){h(this,a,"settings","settings-o","right")}},type:{type:String,default:"",change:function(a){"step-flow"===a&&l(this,["_pageModal"],function(a){a.querySelector(".page-modal-panel").removeChild(a.querySelector(".page-modal-panel > footer"))})}},noCloseOnDismiss:{type:Boolean,default:!1,change:function(a){this._pageModal&&(this._pageModal.noCloseOnDismiss=a)}}})},set dismissible(a){l(this,["_pageModal","querySelector"],function(b){b("ha-page-modal-header").dismissible=a})},get dismissible(){return l(this,["_pageModal","querySelector"],function(a){return a("ha-page-modal-header").dismissible})},set help(a){h(this,a,"help","help-o","right")},get help(){return!0},set footerItems(a){var b=f.createElement("footer",{},a);b=j(b),l(this,["_pageModal"],function(a){a.footer=b})},get footerItems(){return l(this,["_pageModal"],function(a){var b="div.page-modal-panel > footer > footer > ";return i([a.querySelector(b+"span.footer-left"),a.querySelector(b+"span.footer-center"),a.querySelector(b+"span.footer-right")].reduce(function(a,b){return a.concat(f.arrayOfChildrenFrom(b))},[]))})},set section(a){l(this,["_pageModal"],function(b){b.section=a})},get section(){return l(this,["_pageModal","section"],function(a){return a})},postRender:function a(){var b=f.createElement,c=f.contentQueryFactory(this,{section:"ha-page-modal > div.page-modal-panel > section",footer:"ha-page-modal > div.page-modal-panel > footer"}),g=b("ha-page-modal"),h=c("section")||b("section"),i=c("footer")||b("footer"),k=b("ha-page-modal-header"),l=!!this.querySelector("footer > span.footer-left")||!!this.querySelector("footer > span.footer-center")||!!this.querySelector("footer > span.footer-right");a.super(this),d.addA11yFocus(g),f.removeAllChildrenFrom(this),g.classList.add("trowser-modal"),g.header=k,g.section=h,l||(i=j(i)),g.footer=i,this._pageModal=g,this.appendChild(g),"false"!==this.getAttribute("help")&&(this.help=!0),"false"!==this.getAttribute("dismissible")&&(this.dismissible=!0),e.on(g,"show",function(a){a.stopPropagation(),a.target===g&&this.emit("show")}.bind(this)),e.on(g,"close",function(a){a.stopPropagation(),a.target===g&&this.emit("close")}.bind(this)),e.on(g,"dismiss",function(a){a.stopPropagation(),a.target!==g&&a.target!==k||this.emit("dismiss")}.bind(this))},detachedCallback:function(){l(this,["_pageModal"],function(a){l(a,["parentNode","removeChild"],function(b){b(a)})})},show:function(){this.reactLayering||l(this,["_pageModal","show"],function(a){a()})},addContent:function(a){var b={section:"section",footer:"footerItems"};c.addContent(this,a,b),console.warn("DEPRECATION WARNING: addContent method should not be used anymore to add content to the component. This will be removed in the future so please assign content directly to the corresponding component properties instead.")},hide:function(){this.close(),console.warn('DEPRECATION WARNING: The hide method is deprecated, use "close" method instead')},close:function(){l(this,["_pageModal","close"],function(a){a()})}})}),define("hui/trowser",["object-utils/classes","register-component/v2/register","./trowser/trowser-base","./trowser/page-modal-footer","./trowser/page-modal-header-item","./trowser/page-modal-header","./trowser/page-modal"],function(a,b,c){"use strict";return b("ha-trowser",a.createObject(c,{init:function a(){a.super(this),this.contentSelectorMap={section:"section",footer:"footer"}}}))}),define("text!hui/video/video.html",[],function(){return'<template>\n    <div class="ha-video-history-view ha-video-history-view-hidden hidden">\n        <h3 tabindex="-1" class="ha-video-history-title">{{historyTitleText}}</h3>\n        <div class="ha-video-links"></div>\n        <div class="ha-video-history-edit">\n            <button class="ha-video-history-edit-button no-button-style ha-video-focus-button">{{editHistoryText}}</button>\n        </div>\n        <div class="ha-video-history-controls hidden">\n            <button id="ha-video-clear-all-button{{componentId}}" class="no-button-style ha-video-focus-button">{{clearAllText}}</button>\n            <button class="ha-video-done-editing-button no-button-style ha-video-focus-button">{{doneEditingText}}</button>\n        </div>\n    </div>\n    <div class="ha-video-main-div">\n        <div class="ha-video-title-bar">\n            <div class="ha-video-history-option"><button aria-label="{{viewHistoryMessage}}" class="hi hi-list no-button-style"></button></div>\n            <h3>{{videoTitle}}</h3>\n            <div class="ha-video-size-options">\n                <button id="ha-video-restore{{componentId}}" aria-label="{{restoreSizeMessage}}" class="hi hi-vidresize-1 no-button-style hidden"></button>\n                <button id="ha-video-minimize{{componentId}}" aria-label="{{minimizeMessage}}" class="hi hi-vidresize-2 no-button-style"></button>\n                <button aria-label="{{closeMessage}}" class="hi hi-close no-button-style"></button>\n            </div>\n        </div>\n        <div id="ha-player{{componentId}}"></div>\n        <div class="ha-video-footer-bar"></div>\n   </div>\n    <div tabindex="0" aria-hidden="true"></div>\n    <section class="hidden"></section>\n</template>\n'});var videoKeys=[],YT,youtubeA11y;define("hui/video",["register-component/v2/register","object-utils/classes","register-component/template!./video/video.html","./popover","./core/contentNode","./core/keys","./core/position","./core/a11y"],function(a,b,c,d,e,f,g,h){return youtubeA11y=h,a("ha-video",b.createObject(d.prototype,{init:function a(){a.super(this),this.contentSelectorMap={section:"section"},this.template=c,this._lastXPosition=null,this._lastYPosition=null,this._isDragging=!1,this._draggingPosition={},this._userHistory=[],this.setAttribute("videokey","ha-player"+this.componentId),this.setupProperties({viewHistoryMessage:{default:"Toggle History View",type:String,change:function(a){this.querySelector(".ha-video-history-option button").setAttribute("aria-label",a)}},minimizeMessage:{default:"Switch to compact view",type:String,change:function(a){this.querySelector("#ha-video-minimize"+this.componentId).setAttribute("aria-label",a)}},restoreSizeMessage:{default:"Return to full size view",type:String,change:function(a){this.querySelector("#ha-video-restore"+this.componentId).setAttribute("aria-label",a)}},closeMessage:{default:"Close video player",type:String,change:function(a){this.querySelector(".ha-video-size-options .hi-close").setAttribute("aria-label",a)}},url:{default:"",type:String,change:function(a){a&&(this._player&&this._player.loadVideoByUrl&&this._player.loadVideoByUrl(a),this._exitEditMode(),this.open&&this._updateHistory(a))}},userId:{default:"",type:String,change:function(){this._refreshHistory(),this._buildHistoryContent()}},historyTitleText:{default:"Recently Watched",type:String,change:function(a){this.querySelector(".ha-video-history-title").textContent=a}},editHistoryText:{default:"Edit",type:String,change:function(a){this.querySelector(".ha-video-history-edit-button").textContent=a}},clearAllText:{default:"Clear All",type:String,change:function(a){this.querySelector("#ha-video-clear-all-button"+this.componentId).textContent=a}},doneEditingText:{default:"Done",type:String,change:function(a){this.querySelector(".ha-video-done-editing-button").textContent=a}},titleText:{default:"",type:String,change:function(a){this.querySelector(".ha-video-title-bar h3").textContent=a}},enableHistoryView:{type:Boolean,change:function(a){a?(this.querySelector(".ha-video-history-option button").classList.remove("hidden"),this.classList.remove("ha-video-no-history-view")):(this.querySelector(".ha-video-history-option button").classList.add("hidden"),this.classList.add("ha-video-no-history-view"))}},hideRelatedVideos:{default:!1,type:Boolean}}),this.on("keydown",function(a){f.ESCAPE!==a.keyCode&&h.keepFocusInsideListener(a,this)}),e.cacheInputContent(this,this.contentSelectorMap)},postRender:function a(){a.super(this),this._section=null,e.storeCachedInput(this,this.contentSelectorMap),this._closeOnBlur=!1},_setupListeners:function(){this.listenTo(this,"mousedown",function(a){this._isDragging=!0,this._draggingPosition={x:this.offsetLeft-a.pageX,y:this.offsetTop-a.pageY},a.preventDefault()}.bind(this)),this.listenTo(this.ownerDocument,"mouseup",function(){this._isDragging=!1}.bind(this)),this.listenTo(this.ownerDocument,"mousemove",function(a){this._isDragging&&(this.style.left=a.pageX+this._draggingPosition.x+"px",this.style.top=a.pageY+this._draggingPosition.y+"px")}.bind(this)),this.listenTo(this,"#ha-video-minimize"+this.componentId+":click",function(){this.minimize()}.bind(this)),this.listenTo(this,"#ha-video-restore"+this.componentId+":click",function(){this.maximize()}.bind(this)),this.listenTo(this,".hi-close:click",function(){this._emitVideoEvent("video-closed"),this.close()}.bind(this)),this.listenTo(this,".hi-list:click",function(){this.toggleHistoryView()}.bind(this)),this.listenTo(this,"close",function(){this._saveState(),this.toggleHistoryView(!0)}.bind(this)),this.listenTo(this,".ha-video-overlay:click",function(a){a.target===this.querySelector(".ha-video-overlay")&&a.target.parentNode.removeChild(a.target)}.bind(this)),this.listenTo(this,".ha-video-history-edit-button:click",function(a){a.target.classList.add("hidden"),this.querySelector(".ha-video-history-controls").classList.remove("hidden"),Array.prototype.forEach.call(this.querySelectorAll("ha-video-launcher"),function(a){a._editMode=!0}),this._focusOnHistory()}.bind(this)),this.listenTo(this,"#ha-video-clear-all-button"+this.componentId+":click",function(){this._clearHistory()}.bind(this)),this.listenTo(this,".ha-video-done-editing-button:click",function(){this._exitEditMode()}.bind(this)),this.listenTo(this,"video-launcher-dismiss",function(a){this._refreshHistory();for(var b,c=a.link.url,d=a.target;(b=this._userHistory.indexOf(c))>-1;)this._userHistory.splice(b,1);for(window.localStorage.setItem(this.userId+"haUserViewingHistory",JSON.stringify(this._userHistory));d&&"HA-VIDEO-LAUNCHER"!==d.nodeName;)d=d.parentNode;d&&d.parentNode.removeChild(d),this._focusOnHistory()}.bind(this))},attachedCallback:function a(){a.super(this);var b,c,d=this.querySelector(".connector"),e=document.createElement("script"),f=document.getElementsByTagName("script")[0],g=this._uniqueIdentifier();videoKeys.push(g),YT&&YT.Player?(b=this.url&&this.url.split("embed/")[1],b&&(b=b.split("?")[0]),c=this.hideRelatedVideos?0:1,this._player=new YT.Player(g,{videoId:b,playerVars:{enablejsapi:1,showinfo:0,modestbranding:1,rel:c},events:{onStateChange:onPlayerStateChange.bind(null,g),onReady:onPlayerReady.bind(null,g)}})):(e.src="https://www.youtube.com/iframe_api",f.parentNode.insertBefore(e,f)),d&&d.parentNode.removeChild(d),this._setupListeners()},detachedCallback:function(){var a=videoKeys.indexOf(this._uniqueIdentifier());a>-1&&videoKeys.splice(a,1),this._player=null,this.stopListening()},_uniqueIdentifier:function(){return"ha-player"+this.componentId},_buildHistoryContent:function(){var a=this.querySelector(".ha-video-links");a.innerHTML="",this._userHistory&&this._userHistory.length&&this._userHistory.forEach(function(b){a.appendChild(this._buildHistoryEntry(b))}.bind(this))},_buildHistoryEntry:function(a){var b=document.createElement("ha-video-launcher");return b.size="mini",b.orientation="horizontal",b.url=a,b.standalone=!1,b.videoPlayer=this,b},_clearHistory:function(){this._userHistory=[],this._buildHistoryContent(),window.localStorage.removeItem(this.userId+"haUserViewingHistory"),this._exitEditMode()},_emitVideoEvent:function(a){this.userId&&this.emit(a,{url:this.url,time:(new Date).valueOf(),action:a,userId:this.userId})},_exitEditMode:function(){this.querySelector(".ha-video-history-controls").classList.add("hidden"),this.querySelector(".ha-video-history-edit-button").classList.remove("hidden"),Array.prototype.forEach.call(this.querySelectorAll("ha-video-launcher"),function(a){a._editMode=!1}),this._focusOnHistory()},_focusOnHistory:function(a){a=a||this.querySelector(".ha-video-history-view");var b;a.classList.contains("ha-video-history-view-hidden")||((b=a.querySelector(".ha-video-launcher-single"))?b.focus():a.querySelector(".ha-video-history-title").focus())},_refreshHistory:function(){if(this.userId){this._userHistory=[];try{var a=JSON.parse(window.localStorage.getItem(this.userId+"haUserViewingHistory"));a&&a.length&&(this._userHistory=a)}catch(a){}}},_saveState:function(){if(this._lastYPosition=this.style.top,this._lastXPosition=this.style.left,this._player&&this._player.pauseVideo)this._player.pauseVideo();else{var a=document.getElementsByTagName("iframe");if(null!==a)for(var b=0;b<a.length;b++)a[b].src=a[b].src}},_updateHistory:function(a){var b,c=this.querySelector(".ha-video-history-view");if(this.userId&&a&&(this._refreshHistory(),this._userHistory)){if(a!==this._userHistory[0]){for(;(b=this._userHistory.indexOf(a))>-1;)this._userHistory.splice(b,1);this._userHistory.unshift(a)}this._userHistory.length>8&&this._userHistory.splice(8,1/0),window.localStorage.setItem(this.userId+"haUserViewingHistory",JSON.stringify(this._userHistory)),this._buildHistoryContent(),this._focusOnHistory(c)}},maximize:function(){var a=this.querySelector("#ha-video-minimize"+this.componentId);this.classList.remove("minimized"),this.querySelector("#ha-video-restore"+this.componentId).classList.add("hidden"),a.classList.remove("hidden"),this.enableHistoryView&&this.querySelector(".hi-list").classList.remove("hidden"),this._overlayDiv&&this._overlayDiv.classList.remove("hidden"),this.querySelector(".ha-video-title-bar h3").classList.remove("hidden"),this.focus()},minimize:function(){var a=this.querySelector("#ha-video-restore"+this.componentId);this.toggleHistoryView(!0),this.classList.add("minimized"),this.querySelector("#ha-video-minimize"+this.componentId).classList.add("hidden"),a.classList.remove("hidden"),this.querySelector(".hi-list").classList.add("hidden"),this.querySelector(".ha-video-title-bar h3").classList.add("hidden"),this._overlayDiv&&this._overlayDiv.classList.add("hidden"),this.focus()},switchView:function(a){a?this.classList.add("ha-video-mobile"):this.classList.remove("ha-video-mobile")},show:function(){if(this.toggleHistoryView(!0),!this.classList.contains("visible")){var a=function(a){return a<0?" + "+-1*a:" - "+a},b=a(234-(window.pageYOffset||window.scrollY||0)),c=a(350-(window.pageXOffset||window.scrollX||0));g.bringToFront(this),this.style.top=null!==this._lastYPosition?this._lastYPosition:"calc(50%"+b+"px)",this.style.left=null!==this._lastXPosition?this._lastXPosition:"calc(50%"+c+"px)",this.lastFocus=this.ownerDocument.activeElement,this.classList.remove("leave"),this.classList.add("enter"),this.classList.add("visible"),this.offsetTop<0&&(this.style.top="0px"),this.offsetLeft<0&&(this.style.left="0px"),this._updateHistory(this.url),this.focus(),this._player&&this._player.playVideo&&!this._ended&&this._player.playVideo()}},close:function(){this._saveState(),this.toggleHistoryView(!1),this.classList.remove("enter"),this.classList.remove("visible"),this.classList.add("leave")},toggleHistoryView:function(a){var b=this.querySelector(".ha-video-history-view");this._exitEditMode(),a||!b.classList.contains("ha-video-history-view-hidden")?(b.classList.add("ha-video-history-view-hidden"),setTimeout(function(){b.classList.add("hidden")},500),this.focus()):(this._refreshHistory(),this._buildHistoryContent(),b.classList.remove("hidden"),setTimeout(function(){b.classList.remove("ha-video-history-view-hidden"),this._focusOnHistory(b)}.bind(this),0))},set section(a){a=Array.isArray(a)?a:[a];var b,c=a.filter(function(a){return"HA-VIDEO-OVERLAY-BUTTON"===a.nodeName})[0];this._section=c,this._overlayDiv&&(b=this._overlayDiv.querySelector("ha-video-overlay-button"),b?b.parentNode.replaceChild(c,b):this._overlayDiv.firstChild.appendChild(c)),this._section&&this._section===c&&this.querySelector("section").appendChild(c.cloneNode(!0))},get section(){return this._section}}))}),define("text!hui/video-launcher/video-launcher.html",[],function(){return'<template>\n    <div class="ha-video-launcher-view">\n        <button class="ha-video-launcher-single no-button-style">\n            <div class="ha-video-launcher-preview">\n                <img alt="">\n                <div class="hi hi-vidplay" aria-hidden="true"></div>\n                <div class="ha-video-hover-div"></div>\n            </div>\n            <div class="ha-video-launcher-info">\n                <div class="ha-video-launcher-info-inner">\n                    <div class="ha-video-launcher-title"></div>\n                    <div class="ha-video-info-separator hidden">-</div>\n                    <div class="ha-video-launcher-time"></div>\n                </div>\n                <div class="ha-video-description hidden"></div>\n            </div>\n        </button>\n        <button aria-label="{{removeMessage}}" class="hi hi-close hidden no-button-style"></button>\n        </div>\n    </div>\n    <section class="hidden"></section>\n</template>\n'});var youtubeDataApiCallbackMap={};define("hui/video/youtube",[],function(){var a={},b=0,c="AIzaSyBjnMTlF9ou968qeDBc6LQpN860jJ0Juj0";return{get:function(d,e,f){var g,h,i,j,k=d.match(/^.*(?:youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/);if(!k)return void(f&&f(new Error("Unrecognized YouTube URL")));g=k[1],a[g]?e(a[g]):(h=document.createElement("script"),i=document.getElementsByTagName("script")[0],j=b,youtubeDataApiCallbackMap["a"+g+b]=function(b){a[g]=Array.isArray(b.items)&&b.items[0],a[g]&&e(a[g]),h.parentNode.removeChild(h),delete youtubeDataApiCallbackMap[""+g+j]},h.src="https://www.googleapis.com/youtube/v3/videos?callback=youtubeDataApiCallbackMap.a"+g+b+"&request.preventCache="+ +new Date+"&key="+c+"&part=contentDetails,snippet&id="+g,b++,i.parentNode.insertBefore(h,i))},set apiKey(a){c=a},get apiKey(){return c}}}),define("hui/video-launcher",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes","./core/keys","./core/contentNode","./core/ellipsis","register-component/template!./video-launcher/video-launcher.html","./video/youtube","./video"],function(a,b,c,d,e,f,g,h){var i,j;return j=c.createObject(b,{init:function a(){a.super(this),this.contentSelectorMap={section:"section"},this.template=g,this._videoPlayer=null,this.standalone=!0,this._keyDownPause=!1,this.setupProperties({enableHistoryView:{type:Boolean},size:{default:"mini",type:String,change:function(a){this.querySelector(".ha-video-launcher-view").classList["mini"===a?"add":"remove"]("ha-video-launcher-mini"),this.querySelector(".ha-video-launcher-view").classList["giant"===a?"add":"remove"]("ha-video-launcher-giant"),this.querySelector(".ha-video-launcher-view").classList["large"===a?"add":"remove"]("ha-video-launcher-large"),this.querySelector(".ha-video-info-separator").classList["giant"===a?"remove":"add"]("hidden"),this.querySelector(".ha-video-description").classList["giant"===a&&this.show||"large"===a?"remove":"add"]("hidden"),"giant"===a||"large"===a?this._changeFocusConfiguration(!0):this._changeFocusConfiguration(!1)}},orientation:{default:"horizontal",type:String,change:function(a){this.querySelector(".ha-video-launcher-view").classList["horizontal"===a?"add":"remove"]("horizontal"),this.querySelector(".ha-video-launcher-view").classList["vertical"===a?"add":"remove"]("vertical")}},url:{default:"",type:String,change:function(a){h.get(a,function(a){var b=this.querySelector(".ha-video-launcher-title");"mini"===this.size?this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.medium.url:"giant"!==this.size&&"large"!==this.size||(a.snippet.thumbnails.maxres&&a.snippet.thumbnails.maxres.url?this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.maxres.url:this.querySelector(".ha-video-launcher-preview img").src=a.snippet.thumbnails.medium.url),b.textContent=this.titleText||a.snippet.title,f(b,{lines:2}),"giant"!==this.size&&"large"!==this.size||this.querySelector(".ha-video-launcher-preview img").setAttribute("alt",a.snippet.title);var c,d,e="0s",g=a.contentDetails.duration.match(/^PT(?:(\d+)H)?(\d+)M(\d+)S$/),h=a.snippet.description;if(g&&(c=g[2],g[1]&&(c=String(parseInt(c,10)+60*parseInt(g[1],10))),d=g[3],e=c+":"+d+"s"),this.querySelector(".ha-video-launcher-time").textContent=e,this.useYoutubeDescription){var i=this.querySelector(".ha-video-description");i.textContent=h,i.classList.contains("hidden")||f(i,{lines:5})}this._youtubeDescription=h}.bind(this))}},titleText:{type:String,default:"",change:function(a){var b=this.querySelector(".ha-video-launcher-title");b&&a&&(b.textContent=a)}},useYoutubeDescription:{type:Boolean,change:function(a){var b=this.querySelector(".ha-video-description");if(a?b.textContent=this._youtubeDescription||"":this.description&&(b.textContent=this.description),"giant"===this.size){var c=a||this.description?"remove":"add";b.classList[c]("hidden")}b.classList.contains("hidden")||f(b,{lines:5})}},description:{type:String,default:"",change:function(a){var b=this.querySelector(".ha-video-description");if(b.textContent=a,"giant"===this.size){var c=a||this.useYoutubeDescription?"remove":"add";b.classList[c]("hidden")}b.classList.contains("hidden")||f(b,{lines:5})}},removeMessage:{type:String,default:"Remove video link",change:function(a){Array.prototype.forEach.call(this.querySelectorAll("button.hi-close"),function(b){b.setAttribute("aria-label",a)})}},_editMode:{type:Boolean,change:function(a){Array.prototype.forEach.call(this.querySelectorAll("button.hi-close"),function(b){b.classList[a?"remove":"add"]("hidden")})}}}),e.cacheInputContent(this,this.contentSelectorMap)},postRender:function a(){a.super(this),e.storeCachedInput(this,this.contentSelectorMap),this.listenTo(this,".hi-close:click",function(a){a.stopPropagation(),this._emitRemoveEvent(a)}.bind(this)),this.listenTo(this,".ha-video-launcher-single:click",function(a){i||a.target===this.querySelector(".hi-close")||a.target.classList.contains("ha-video-description")||(a.stopPropagation(),this.launchVideo())}.bind(this)),this.listenTo(this,"keydown",function(a){a.keyCode!==d.ENTER&&a.keyCode!==d.SPACEBAR||(a.target===this.querySelector(".hi-close")?(i=!0,setTimeout(function(){i=!1},100),this._emitRemoveEvent(a)):a.target===this.querySelector(".ha-video-launcher-single")&&(a.preventDefault(),this.launchVideo()))}.bind(this))},detachedCallback:function(){this.standalone&&this._videoPlayer&&this._videoPlayer.parentNode&&this._videoPlayer.parentNode.removeChild(this._videoPlayer)},set videoPlayer(a){this.standalone&&this._videoPlayer&&this._videoPlayer.parentNode&&this._videoPlayer.parentNode.removeChild(this._videoPlayer),this._videoPlayer=a},get videoPlayer(){return this._videoPlayer},_emitRemoveEvent:function(a){a.stopPropagation(),this.emit("video-launcher-dismiss",{link:this})},launchVideo:function(){var a,b;this._videoPlayer?this._videoPlayer.url!==this.url&&(this._videoPlayer.url=this.url):(a=this.ownerDocument.createElement("ha-video"),a.url=this.url,document.body.appendChild(a),this._videoPlayer=a,(b=this.section)&&(this._videoPlayer.section=b)),window.innerWidth<=800&&window.innerHeight<=600&&this._videoPlayer.switchView(!0),this.standalone&&(this._videoPlayer.enableHistoryView=this.enableHistoryView,this.titleText&&(this._videoPlayer.titleText=this.titleText)),this._videoPlayer.show()},_changeFocusConfiguration:function(a){var b,c,d,e,f;if(a)for(;b=this.querySelector("button.ha-video-launcher-single");)c=document.createElement("div"),d=document.createElement("button"),c.innerHTML=b.innerHTML,c.classList.add("ha-video-launcher-single"),b.classList.contains("hidden")&&c.classList.add("hidden"),e=c.querySelector(".ha-video-launcher-info-inner"),d.innerHTML=e.innerHTML,d.classList.add("ha-video-launcher-info-inner"),d.classList.add("no-button-style"),e.parentNode.replaceChild(d,e),b.parentNode.replaceChild(c,b),f=c.querySelector(".ha-video-launcher-preview img"),f.setAttribute("alt",d.querySelector(".ha-video-launcher-title").textContent),f.setAttribute("tabindex","-1");else for(;c=this.querySelector("div.ha-video-launcher-single");)b=document.createElement("button"),e=document.createElement("div"),b.innerHTML=c.innerHTML,b.classList.add("ha-video-launcher-single"),b.classList.add("no-button-style"),c.classList.contains("hidden")&&b.classList.add("hidden"),d=b.querySelector(".ha-video-launcher-info-inner"),e.innerHTML=d.innerHTML,e.classList.add("ha-video-launcher-info-inner"),d.parentNode.replaceChild(e,d),c.parentNode.replaceChild(b,c),f=b.querySelector(".ha-video-launcher-preview img"),f.setAttribute("alt",""),f.removeAttribute("tabindex")},set section(a){a=Array.isArray(a)?a:[a];var b=a.filter(function(a){return"HA-VIDEO-OVERLAY-BUTTON"===a.nodeName})[0];b&&(this.querySelector("section").appendChild(b),this._section=b,this._videoPlayer&&(this._videoPlayer.section=b))},get section(){return this._section}}),a("ha-video-launcher",j)}),define("hui/video/video-overlay-button",["register-component/v2/register","register-component/v2/UIComponent","object-utils/classes"],function(a,b,c){"use strict";return a("ha-video-overlay-button",c.createObject(b,{init:function a(){a.super(this),this.setupProperties({label:{default:"",change:function(a){var b=this.querySelector("div");b&&(b.textContent=a,a||this.removeAttribute("label"))}},type:{default:"",change:function(a){var b=this.querySelector("button");b&&("primary"===a?b.className="ha-button ha-button-primary":a&&"default"!==a||(b.className="ha-button"))}}})},postRender:function a(){if(a.super(this),!this.children.length){var b=this.textContent,c=document.createElement("button");this.textContent="",this.appendChild(document.createElement("div")),this.appendChild(c),c.type="button",c.textContent=b}Object.defineProperty(this,"textContent",{get:function(){return this.querySelector("button").textContent},set:function(a){this.querySelector("button").textContent=a}})},focusContent:function(){var a=this.querySelector("button"),b=this.querySelector("div");a?a.focus():b&&(b.setAttribute("tabindex","-1"),b.focus())}}))}),define("../../build/dist/js/hui",function(){});
//# sourceMappingURL=hui.min.map