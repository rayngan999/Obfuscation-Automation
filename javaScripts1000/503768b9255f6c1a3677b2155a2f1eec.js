(window.webpackJsonp=window.webpackJsonp||[]).push([[4,22],{691:function(t,e,i){"use strict";(function(t){var c=i(2),o=i(0),n=i(4),l=i.n(n),a=i(89),r=i(812);function u(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,c)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?u(i,!0).forEach((function(e){d(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):u(i).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function d(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}o.g.register([{rel:"stylesheet",type:"text/css",href:"public/[WEB_VER]/css/page/commonV2/card/album.css"}]),e.a={components:{},inject:{block_title:{from:"block_title",default:""}},filters:{},mixins:[a.a],props:s({album:{type:Object,default:function(){},required:!1},loading:{type:Boolean,default:!1,required:!1},sourceFrom:{type:String,default:"",required:!1},member_info:{type:Object,default:function(){},required:!1},clickDisable:{type:Boolean,default:!1,required:!1}},r.a),data:function(){return{collected_action:!1,collect_images:{default:{src:"/public/img/collect-default.png",srcset:["/public/img/collect-default@2x.png 2x","/public/img/collect-default@3x.png 3x"]},active:{src:"/public/img/collect-active.png",srcset:["/public/img/collect-active@2x.png 2x","/public/img/collect-active@3x.png 3x"]}},toggleCollect:!1}},computed:s({},Object(c.mapGetters)(["PageSetting"]),{isLogin:function(){return!!this.member_info.member_id}}),watch:{PageSetting:{handler:function(t){t.width?t.width<this.pc_min_size?this.mode_type="mobile":this.mode_type="pc":this.mode_type=t.mode_type},immediate:!0},album:{handler:function(t){t&&(this.toggleCollect=t.is_collected)},deep:!0,immediate:!0}},created:function(){},mounted:function(){var t=this;t.$nextTick().then((function(){t.lazyImg()}))},updated:function(){},destroyed:function(){},methods:s({},Object(c.mapActions)({}),{},Object(c.mapMutations)({}),{exposureAct:function(){this.album&&(this.exposureCount+=1,o.c.enterAlbum(this.album.album_id,"albumCard",this.sourceFrom))},lazyImg:function(){t(this.$el).find(".lazyload").removeClass("lazy-bind lazy-empty"),t("body").trigger("lazyImg")},formatMoney:o.s.formatMoney,formatNumber:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this;return t<1e4?e.formatMoney(t):t>=1e4&&t<1e7?"".concat(e.formatMoney((t/1e3).toFixed(2)),"k"):"".concat(e.formatMoney((t/1e6).toFixed(2)),"m")},formatTime:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(new Date).getTime(),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY/MM/DD";return l()(t,l.a.HTML5_FMT.DATETIME_LOCAL_SECONDS).format(e)},clickAlbumCard:function(t){if(!0!==this.clickDisable){var e={channel_id:this.album.channel.channel_id,album_id:this.album.album_id,source_from:this.sourceFrom||"",card_type:this.card_type||""};if(this.album.analytics&&(Object.keys(this.album.analytics).length>0||this.album.analytics.length>0)&&(e.album.analytics=this.album.analytics),o.s.getQueryVariable("search_keyword")&&(e.search_keyword=o.s.getQueryVariable("search_keyword")),o.s.getQueryVariable("type")&&(e.type=o.s.getQueryVariable("type")),this.$route){var i=this.$route.params.activity_id;i&&(e.activity_id=i)}this.block_title&&(e.block_title=this.block_title),o.p.pageAction("albumCard_click",e)}else t.preventDefault()},collect:function(t){this.openLoginModal(t)&&this.collectAct()},collectAct:function(){var e=this,i={album_id:e.album.album_id};e.collected_action=!0,e.toggleCollect=!e.toggleCollect,e.$store.dispatch("setPPGlobalCollectionAlbum",i).then((function(c){e.collected_action=!1,c.data.is_collected&&o.t.show({target:t(e.$el).find('.album-meta-item[rel="bookmark"]'),text:'\n                            <div class="text-center">æ¶èç¯ç®</div>\n                        ',isHTML:!0,direction:"top",delay:"3000"}),o.p.pageAction("channelAlbum_collect_click",s({},i,{},c.data))})).catch((function(t){e.collected_action=!1,o.o.warning({html:"æ¶èå¤±æï¼è«æ´½è©¢å®¢æäººå¡"})}))},autoCollect:function(){var t=this;t.album.is_collected||void 0===t.album.is_collected||o.o.warning({icon:"icon icon-collect_outline",html:"æ¶èç¯ç®<br>".concat(t.album.album_title),confirmButtonText:"æ¶èç¯ç®",cancelButtonText:"ä¸æ¬¡åèªª"},(function(){t.collect({target:"allow_auto_collect"})}),(function(){}))},openLoginModal:function(e){return e.target?e.target:e.currentTarget&&t(e.currentTarget).data("target"),!!this.isLogin||(e.preventDefault&&e.preventDefault(),o.j.isMobileApp()?o.j.openNativeLogin():(this.$store.dispatch("PressPlayLoginModalTriggerOpen",{}),this.$store.commit("setAutoAction",{action:"auto-collect",id:this.album.album_id})),!1)}})}}).call(this,i(1))},812:function(t,e,i){"use strict";i.d(e,"a",(function(){return c}));var c={};Object.keys(c).reduce((function(t,e){return t[e]=c[e].default,t}),{}),Object.keys(c).reduce((function(t,e){return t[e]=c[e].type,t}),{})},864:function(t,e,i){"use strict";var c=i(691).a,o=i(5),n=Object(o.a)(c,void 0,void 0,!1,null,"1d67ed40",null);e.a=n.exports}}]);