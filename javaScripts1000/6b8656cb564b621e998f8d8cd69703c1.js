Bootstrapper.bindImmediate(function(){var ddConditions={"not":[null,null],"caseInsensitive":["ignore case","ignore case"],"compareTo":["gb","en|EN"],"requiredData":["41571","47202"],"comparators":["is","matches"]};Bootstrapper.data.resolve(ddConditions.requiredData,function(){ddConditions.values=Array.prototype.slice.call(arguments,0);var Bootstrapper=window["Bootstrapper"];if(Bootstrapper.data.checkConditions(ddConditions))Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];
var ensightenOptions=Bootstrapper.ensightenOptions;var integrationName="DecibelInsight";window.usabillaIntegrations=window.usabillaIntegrations||{};window.usabillaIntegrations[integrationName]=function(onUpdate,onError){var sessionIdChecker=window.setInterval(function(){if(window.decibelInsight&&typeof window.decibelInsight.getSessionId==="function"){window.clearInterval(sessionIdChecker);onUpdate(integrationName,{sessionID:window.decibelInsight.getSessionId()},true)}},500);window.setTimeout(function(){window.clearInterval(sessionIdChecker)},
9E3)}},3297927,580137)})},-1,-1);
Bootstrapper.bindImmediate(function(){Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.registerDataDefinition(function(){Bootstrapper.data.define({extract:function(){var host=location.host;var desktopMobile=/Android|BlackBerry|BB10|iPhone|iPad|iPod|Opera Mini|IEMobile/i.test(navigator.userAgent)?"mobile":"desktop",pageName=window.dataLayer?dataLayer.pagename||dataLayer.page_name:"",type=/^(\/travel\/managebooking\/.*)$/i.test(location.pathname)&&
pageName==="MANAGEMYBOOKINGTWO"?"mmbAlpha":/(hotline\.ba\.com|cugdev546\.uk\.ba\.com)/i.test(location.host)?"hotline":"standard",environment=Bootstrapper.ensightenOptions.publishPath!=="prod"?"uat":"live",lookup=[desktopMobile,type,environment].join("-");switch(lookup){case "desktop-standard-uat":return"d6e3aaa1d767";case "desktop-standard-live":return"7cd6ae099c93";case "desktop-mmbAlpha-uat":return"74b57ceaec2e";case "desktop-mmbAlpha-live":return"7dc1daae2ccf";case "desktop-hotline-uat":return"9e43577a0b43";
case "desktop-hotline-live":return"8060024f13a2";case "mobile-standard-uat":return"faac5e7d6e13";case "mobile-standard-live":return"af5c7eb8d77a";case "mobile-mmbAlpha-uat":return"dab6bd6d789f";case "mobile-mmbAlpha-live":return"812dc1859db8";case "mobile-hotline-uat":return"085b0ea048b6";case "mobile-hotline-live":return"9b864f051e3e"}return""},transform:function(val){return val?val:""},load:"instance",trigger:Bootstrapper.data.immediateTrigger,dataDefName:"Usabilla - Button ID",collection:"Tag-Specific",
source:"Manage",priv:"false"},{id:"59189"})},59189)},-1,-1)},-1,-1);
Bootstrapper.bindImmediate(function(){var ddConditions={"not":[null,null],"caseInsensitive":["ignore case","ignore case"],"compareTo":["gb","en|EN"],"requiredData":["41571","47202"],"comparators":["is","matches"]};Bootstrapper.data.resolve(ddConditions.requiredData,function(){ddConditions.values=Array.prototype.slice.call(arguments,0);var Bootstrapper=window["Bootstrapper"];if(Bootstrapper.data.checkConditions(ddConditions))Bootstrapper.bindDOMParsed(function(){var Bootstrapper=window["Bootstrapper"];
var ensightenOptions=Bootstrapper.ensightenOptions;Bootstrapper.data.resolve(["59189"],function(manage_59189){var ensVar0=function(){return manage_59189};var custom_id=ensVar0.call(this);window.lightningjs||function(c){function g(b,d){d&&(d+=(/\?/.test(d)?"\x26":"?")+"lv\x3d1");c[b]||function(){var i=window,h=document,j=b,g=h.location.protocol,l="load",k=0;(function(){function b(){a.P(l);a.w=1;c[j]("_load")}c[j]=function(){function m(){m.id=e;return c[j].apply(m,arguments)}var b,e=++k;b=this&&this!=
i?this.id||0:0;(a.s=a.s||[]).push([e,b,arguments]);m.then=function(b,c,h){var d=a.fh[e]=a.fh[e]||[],j=a.eh[e]=a.eh[e]||[],f=a.ph[e]=a.ph[e]||[];b&&d.push(b);c&&j.push(c);h&&f.push(h);return m};return m};var a=c[j]._={};a.fh={};a.eh={};a.ph={};a.l=d?d.replace(/^\/\//,(g=="https:"?g:"http:")+"//"):d;a.p={0:+new Date};a.P=function(b){a.p[b]=new Date-a.p[0]};a.w&&b();i.addEventListener?i.addEventListener(l,b,!1):i.attachEvent("on"+l,b);var q=function(){function b(){return["\x3chead\x3e\x3c/head\x3e\x3c",
c,' onload\x3d"var d\x3d',n,";d.getElementsByTagName('head')[0].",d,"(d.",g,"('script')).",i,"\x3d'",a.l,"'\"\x3e\x3c/",c,"\x3e"].join("")}var c="body",e=h[c];if(!e)return setTimeout(q,100);a.P(1);var d="appendChild",g="createElement",i="src",k=h[g]("div"),l=k[d](h[g]("div")),f=h[g]("iframe"),n="document",p;k.style.display="none";e.insertBefore(k,e.firstChild).id=o+"-"+j;f.frameBorder="0";f.id=o+"-frame-"+j;/MSIE[]+6/.test(navigator.userAgent)&&(f[i]="javascript:false");f.allowTransparency="true";
l[d](f);try{f.contentWindow[n].open()}catch(s){a.domain=h.domain,p="javascript:var d\x3d"+n+".open();d.domain\x3d'"+h.domain+"';",f[i]=p+"void(0);"}try{var r=f.contentWindow[n];r.write(b());r.close()}catch(t){f[i]=p+'d.write("'+b().replace(/"/g,String.fromCharCode(92)+'"')+'");d.close();'}a.P(2)};a.l&&q()})()}();c[b].lv="1";return c[b]}var o="lightningjs",k=window[o]=g(o);k.require=g;k.modules=c}({});var local_url="//w.usabilla.com/"+custom_id+".js";window.usabilla_live=lightningjs.require("usabilla_live",
local_url);window.USABilla_init()})},3220106,546622)})},-1,-1);
Bootstrapper.bindImmediate(function(){var ddConditions={"not":[null,null],"caseInsensitive":["ignore case","ignore case"],"compareTo":["gb","en|EN"],"requiredData":["41571","47202"],"comparators":["is","matches"]};Bootstrapper.data.resolve(ddConditions.requiredData,function(){ddConditions.values=Array.prototype.slice.call(arguments,0);var Bootstrapper=window["Bootstrapper"];if(Bootstrapper.data.checkConditions(ddConditions))Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];
var ensightenOptions=Bootstrapper.ensightenOptions;var integrationName="dataLayer";window.usabillaIntegrations=window.usabillaIntegrations||{};window.usabillaIntegrations[integrationName]=function(onUpdate,onError){var dataLayerProperties=["sessionId","pagetitle","pagename","adobe_cookie"];var dataLayerPropertiesRemaining=dataLayerProperties.slice();var dataLayerChecker=window.setInterval(function(){var i,key,isComplete;var isUpdated=false;var dataLayerValues={};if(window.dataLayer)if(dataLayerPropertiesRemaining.length>
0){for(i=0;i<dataLayerPropertiesRemaining.length;i++){key=dataLayerPropertiesRemaining[i];if(window.dataLayer[key]){dataLayerValues[key]=window.dataLayer[key];dataLayerPropertiesRemaining=dataLayerPropertiesRemaining.filter(function(prop){return prop!==key});isUpdated=true}}isComplete=dataLayerPropertiesRemaining.length===0;if(isUpdated)onUpdate(integrationName,dataLayerValues,isComplete);if(isComplete)window.clearInterval(dataLayerChecker)}},500);window.setTimeout(function(){window.clearInterval(dataLayerChecker)},
9E3)}},3297928,580138)})},-1,-1);
Bootstrapper.bindImmediate(function(){var ddConditions={"not":[null,null],"caseInsensitive":["ignore case","ignore case"],"compareTo":["gb","en|EN"],"requiredData":["41571","47202"],"comparators":["is","matches"]};Bootstrapper.data.resolve(ddConditions.requiredData,function(){ddConditions.values=Array.prototype.slice.call(arguments,0);var Bootstrapper=window["Bootstrapper"];if(Bootstrapper.data.checkConditions(ddConditions))Bootstrapper.bindDependencyImmediate(function(){var Bootstrapper=window["Bootstrapper"];
var ensightenOptions=Bootstrapper.ensightenOptions;var requiredIntegrations=["dataLayer","DecibelInsight"];var maxWaitTimeForIntegrationData=9E3;var consoleLogging=true;var completedIntegrations=[];var allIntegrationData={};var dataSubmitted=false;var integrationName;var integration;for(i=0;i<requiredIntegrations.length;i++)try{integrationName=requiredIntegrations[i];integration=window.usabillaIntegrations[integrationName];integration(onIntegrationDataUpdate,onIntegrationError)}catch(e){log("Failed to trigger integration "+
integrationName);log(e)}window.setTimeout(function(){if(!allIntegrationsAreComplete())submitAllIntegrationData()},maxWaitTimeForIntegrationData);function allIntegrationsAreComplete(){return completedIntegrations.length===requiredIntegrations.length}function onIntegrationDataUpdate(integrationName,data,isComplete){for(var key in data)if(data.hasOwnProperty(key))allIntegrationData[integrationName+"-"+key]=data[key];if(isComplete){completedIntegrations.push(integrationName);if(allIntegrationsAreComplete())submitAllIntegrationData()}}
function onIntegrationError(integrationName,error){var timestamp=(new Date).getTime();allIntegrationData[integrationName+"-error-"+timestamp]=error}function submitAllIntegrationData(){if(dataSubmitted){log("Integration data already sent to Usabilla - some data missed the boat");log(allIntegrationData);return}commitCustomData(allIntegrationData);dataSubmitted=true}function commitCustomData(customData){try{window.usabilla_live("data",{custom:customData})}catch(e){}}function log(message){if(!consoleLogging)return;
if(typeof message==="object")console.log(message);else console.log("Usabilla Integrations: "+message)}},3297926,[3220106,3297927,3297928],580139,[546622,580137,580138])})},-1,-1);
Bootstrapper.bindImmediate(function(){var ddConditions={"not":[null,null],"caseInsensitive":["ignore case","ignore case"],"compareTo":["gb","en|EN"],"requiredData":["41571","47202"],"comparators":["is","matches"]};Bootstrapper.data.resolve(ddConditions.requiredData,function(){ddConditions.values=Array.prototype.slice.call(arguments,0);var Bootstrapper=window["Bootstrapper"];if(Bootstrapper.data.checkConditions(ddConditions))Bootstrapper.bindImmediate(function(){var Bootstrapper=window["Bootstrapper"];
var ensightenOptions=Bootstrapper.ensightenOptions;window.USABilla_init=function(){window.usabilla_live("setEventCallback",function(category,action,label,value){if(action==="Feedback:Success"){function sendReplacement(vData){var data=JSON.parse(vData);data.url=data.url.replace(new RegExp("#"),"HASHENCODED");vData=JSON.stringify(data);realSend.apply(this,arguments)}var realSend=XMLHttpRequest.prototype.send;ub_window=document.getElementById("lightningjs-frame-usabilla_live_feedback").contentWindow;
ub_window.XMLHttpRequest.prototype.send=sendReplacement;if(window.XDomainRequest){realSend=XDomainRequest.prototype.send;ub_window.XDomainRequest.prototype.send=sendReplacement}(function(){function onDecibelReady(){decibelInsight("setRetention",true);decibelInsight("sendIntegrationData","Usabilla",{f:"Success",s:value})}if(window.hasOwnProperty("decibelInsight"))decibelInsight("ready",onDecibelReady);else window["_da_ready"]=onDecibelReady})()}if(action==="Feedback:Open")(function(){function onDecibelReady(){decibelInsight("sendIntegrationData",
"Usabilla",{f:"Open"})}if(window.hasOwnProperty("decibelInsight"))decibelInsight("ready",onDecibelReady);else window["_da_ready"]=onDecibelReady})();if(action==="Campaign:Open")(function(){function onDecibelReady(){decibelInsight("sendIntegrationData","Usabilla",{c:"Open",i:label})}if(window.hasOwnProperty("decibelInsight"))decibelInsight("ready",onDecibelReady);else window["_da_ready"]=onDecibelReady})();if(action==="Campaign:Success")(function(){function onDecibelReady(){decibelInsight("sendIntegrationData",
"Usabilla",{c:"Success",i:label})}if(window.hasOwnProperty("decibelInsight"))decibelInsight("ready",onDecibelReady);else window["_da_ready"]=onDecibelReady})()})}},3397081,611806)})},-1,-1);