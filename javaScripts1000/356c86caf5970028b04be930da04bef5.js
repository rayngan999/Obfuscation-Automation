pendo.guideContent('KuwSkkJruv-R28eUyP53qfSr6hA','VueffYcOYFL8BV7GVnonkOLbUQo',"<style id=\"pendo-inline-css\" type=\"text/css\">#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo {\n  /* @version: 0.1.3 */\n  /**\n * Container: Add 2px orange line inside the container\n */\n  /**\n * Theme generic: Redesign and position the caret.\n */\n  /* Move 2px orange line from the inside to the outside */\n  /* Redesign the caret to match brand */\n  /* Correct orientation and position for each of the four sides */\n  /*\n * Theme generic: Show orange focus ring on all focusable elements\n */\n  /*\n * Multi choice poll question select element\n */\n  /*\n * Multi choice poll question radio buttons\n */\n  /*\n * Number scale poll question\n */\n  /* Focus ring */\n  /* Dark theme */\n  /*\n * Open text poll question\n */\n  /*\n * Text paragraph\n */\n  /* List item */\n  /* Inline link */\n  /*\n * Multiple button\n */\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles {\n  box-shadow: 0 2px 0 0 #eb6500 inset, rgba(115, 115, 115, 0.85) 0 0 0 1px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-vertical-alignment='Bottom Aligned'] {\n  border-top: 2px solid #eb6500 !important;\n  box-shadow: 0 -18px 0 0 #ebebeb !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-vertical-alignment='Top Aligned'] {\n  border-bottom: 2px solid #eb6500 !important;\n  box-shadow: 0 18px 0 0 #ebebeb !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-els-caret='left'] {\n  box-shadow: -2px 0 0 0 #eb6500, rgba(115, 115, 115, 0.85) 0 0 0 1px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-els-caret='right'] {\n  box-shadow: 2px 0 0 0 #eb6500, rgba(115, 115, 115, 0.85) 0 0 0 1px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-els-caret='top'] {\n  box-shadow: 0 -2px 0 0 #eb6500, rgba(115, 115, 115, 0.85) 0 0 0 1px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-step-container-styles[data-els-caret='bottom'] {\n  box-shadow: 0 2px 0 0 #eb6500, rgba(115, 115, 115, 0.85) 0 0 0 1px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo .pendo-tooltip-caret {\n  display: none !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo [data-els-caret] ~ .pendo-tooltip-caret-border {\n  background-image: linear-gradient(225deg, transparent 11px, #eb6500 11px, #eb6500 13px, #ebebeb 13px) !important;\n  border: 0px none !important;\n  display: block !important;\n  height: 16px !important;\n  width: 16px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo .els-pendo-dark[data-els-caret] ~ .pendo-tooltip-caret-border {\n  background-image: linear-gradient(225deg, transparent 11px, #eb6500 11px, #eb6500 13px, #2e2e2e 13px) !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo [data-els-caret='left'] ~ .pendo-tooltip-caret-border {\n  transform: translate(-1px, 15px) rotate(180deg);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo [data-els-caret='right'] ~ .pendo-tooltip-caret-border {\n  transform: translate(1px, 15px) rotate(90deg);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo [data-els-caret='top'] ~ .pendo-tooltip-caret-border {\n  transform: translate(15px, -1px) rotate(0deg);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo [data-els-caret='bottom'] ~ .pendo-tooltip-caret-border {\n  transform: translate(1px, 1px) rotate(180deg);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo #pendo-guide-container :focus {\n  outline-offset: 1px !important;\n  outline: 2px solid #eb6500 !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-multi-choice-poll-select-border:hover {\n  border-color: currentColor;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-multi-choice-poll-select-border > select {\n  /* Pulldown */\n  -webkit-appearance: none;\n  appearance: none;\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 92 128\" height=\"14\" width=\"18\"><path d=\"M1 51l7-7 38 38 38-38 7 7-45 45z\" fill=\"%23007398\"/></svg>');\n  background-position: right;\n  background-repeat: no-repeat;\n  background-size: 36px;\n  color: inherit;\n  font: inherit;\n  padding: 0 40px 0 8px;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-multi-choice-poll-select-border > select > option {\n  background: #fff;\n  color: #2e2e2e;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo .els-pendo-dark ._pendo-multi-choice-poll-select-border > select {\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 92 128\" height=\"14\" width=\"18\"><path d=\"M1 51l7-7 38 38 38-38 7 7-45 45z\" fill=\"%2344c6f4\"/></svg>');\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-multi-choice-poll-select-border > select:hover {\n  background-image: url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 92 128\" height=\"14\" width=\"18\"><path d=\"M1 51l7-7 38 38 38-38 7 7-45 45z\" fill=\"%23eb6500\"/></svg>');\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border > div > span {\n  display: flex !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border input.pendo-radio {\n  /* Item */\n  -webkit-appearance: none;\n  background-color: transparent;\n  border-radius: 50%;\n  border: 2px solid #8e8e8e;\n  box-sizing: border-box;\n  min-height: calc(5em);\n  max-height: calc(5em);\n  margin: 0;\n  padding: 0;\n  position: relative;\n  vertical-align: text-bottom !important;\n  min-width: calc(5em);\n  max-width: calc(5em);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border input.pendo-radio:hover {\n  border-color: currentColor;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border input.pendo-radio:before {\n  border-radius: 50%;\n  content: '';\n  display: block;\n  height: calc(0.6em);\n  left: 0.2em;\n  position: relative;\n  top: 0.2em;\n  width: calc(0.6em);\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border input.pendo-radio:checked:before {\n  background-color: #eb6500;\n  border: calc(0.3em) solid #eb6500;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo div._pendo-multi-choice-poll-select-border label.pendo-radio {\n  background-color: transparent !important;\n  color: currentColor !important;\n  text-align: left !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-number-scale-poll-wrapper {\n  padding-bottom: 0 !important;\n  padding-top: 0 !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo input[class*='_pendo-number-scale-']:focus + label {\n  outline: 2px solid #eb6500;\n  outline-offset: 1px;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo input[class*='_pendo-number-scale-'] {\n  /* For focusability un-hide the radio button and move it behind the\n   * label. */\n  color: inherit;\n  display: block !important;\n  font: inherit;\n  height: 40px;\n  position: absolute;\n  width: 40px;\n  z-index: -1;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo label[class*='_pendo-number-scale-'] {\n  border-radius: 0 !important;\n  border-radius: 0;\n  box-shadow: 0 0 0 2px #007398 inset;\n  font-family: inherit !important;\n  height: 40px !important;\n  margin-bottom: 4px !important;\n  width: 40px !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo input[class*='_pendo-number-scale-'] + label:hover {\n  box-shadow: 0 0 0 2px #eb6500 inset;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo input[class*='_pendo-number-scale-']:checked + label {\n  box-shadow: 0;\n  background-color: #007398 !important;\n  color: #fff !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo .els-pendo-dark label[class*='_pendo-number-scale-'] {\n  box-shadow: 0 0 0 2px #44c6f4 inset;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo .els-pendo-dark input[class*='_pendo-number-scale-']:checked + label {\n  background-color: #44c6f4 !important;\n  color: #2e2e2e !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo form._pendo-open-text-poll-wrapper {\n  margin-bottom: -8px;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo form._pendo-open-text-poll-wrapper > textarea {\n  /* Textarea */\n  border-color: #8e8e8e !important;\n  border-style: solid !important;\n  border-width: 1px 1px 2px !important;\n  font-family: inherit;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo form._pendo-open-text-poll-wrapper > textarea::placeholder {\n  color: inherit !important;\n  opacity: 1;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo form._pendo-open-text-poll-wrapper > textarea:focus,\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo form._pendo-open-text-poll-wrapper > textarea:hover {\n  border-color: currentColor !important;\n  box-shadow: 0 0 !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-text-list-item {\n  margin-bottom: 4px;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-text-list-item::marker {\n  color: #eb6500;\n  font-weight: 700;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo a._pendo-text-link {\n  /* Hyperlink/Anchor */\n  border-bottom: 2px solid transparent;\n  display: inline !important;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo a._pendo-text-link:hover,\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo a._pendo-text-link > u._pendo-text-underline:hover {\n  text-decoration: none !important;\n  border-bottom: 2px solid #eb6500;\n}\n#pendo-g-VueffYcOYFL8BV7GVnonkOLbUQo ._pendo-button {\n  font-family: inherit;\n}\n</style><script id=\"pendo-inline-script\">\n<% if (typeof guide !== 'undefined') { %>\nvar guide = pendo.findGuideById('<%= guide.id %>');\nvar step = guide && guide.findStepById('<%= step.id %>');\n<% } %>\n/*BEGIN PENDO SCRIPT WRAPPER*/\n/* @version: 0.1.3 */\n\n/**\n * Change the variable to activate progressive reveal.\n * Only works for number scale at the moment.\n */\nwindow.ELS_PENDO_PROGRESSIVE_REVEAL = 1;\n\n/*\n * Copy theme name which is stored in the animation name over to the\n * class attribute. So, it can be used in the custom CSS. This way we\n * can create one version of CSS which works for all themes.\n */\n(function (pendo) {\n  const container = pendo.dom('._pendo-step-container-styles');\n\n  // Template name is stored in animation name.\n  const animation = window.getComputedStyle(container[0]).animationName;\n\n  // Remove non-identifier chars and split on comma.\n  const names = animation.replace(/[^\\w-]+/, ' ').trim();\n\n  container.addClass(names);\n})(window.pendo);\n\n/**\n * Activate custom caret styling and readjust the positioning\n */\n(function (pendo) {\n  var container = pendo.dom('[data-caret-enabled=\"true\"]');\n  // Container doesn't have a caret\n  if (container.length !== 1) return;\n\n  console.debug('Pendo caret enabled');\n\n  var repositionCaret = function () {\n    var parent = container.getParent();\n    var caret = parent.find('.pendo-tooltip-caret-border');\n    if (caret.length === 0) return;\n\n    var style = caret[0].style;\n\n    // Determine on which side the caret is\n    // by examining the style properties.\n    var transform = null;\n    if (parseInt(style.left, 10) < 0) {\n      transform = 'left';\n    } else if (parseInt(style.right, 10) < 0) {\n      transform = 'right';\n    } else if (parseInt(style.top, 10) < 0) {\n      transform = 'top';\n    } else if (parseInt(style.bottom, 10) < 0) {\n      transform = 'bottom';\n    }\n\n    // Set attribute on sibling element, because the caret\n    // element parts are replaced every few hunderd milliseconds.\n    container.attr('data-els-caret', transform);\n  };\n\n  var config = { childList: true };\n  var observer = new MutationObserver(repositionCaret);\n  observer.observe(container.getParent()[0], config);\n  repositionCaret();\n})(window.pendo);\n\n/*\n * Focus trap keep the focus within the dialog.\n */\n(function (pendo) {\n  var activeGuide = pendo.getActiveGuide();\n  if (!activeGuide) return;\n  var guideElement = activeGuide.step.guideElement;\n\n  // Create two focusable elements to detect focus leaving.\n  var btnBefore = document.createElement('div');\n  btnBefore.tabIndex = 0;\n  var btnAfter = btnBefore.cloneNode();\n\n  // Func: Move focus to first (default) or last focusable element\n  function handleMoveFocus(ev) {\n    var focusElements = guideElement.find('a,button,input,radio');\n    var position =\n      ev && ev.currentTarget === btnBefore\n        ? focusElements.length - 1\n        : 0;\n    focusElements[position].focus();\n  }\n\n  // insert one element before and one after the guide content.\n  var guide = guideElement.find('._pendo-step-container-styles');\n  guide[0].appendChild(btnAfter);\n  guide[0].insertBefore(btnBefore, guide[0].firstChild);\n\n  //Move focus when its about to leave the dialog.\n  btnBefore.addEventListener('focus', handleMoveFocus);\n  btnAfter.addEventListener('focus', handleMoveFocus);\n\n  // Move focus to first focusable element on show guide.\n  handleMoveFocus();\n})(window.pendo);\n\n/**\n * Add accessibility attributes to dialog, title, and sub-title\n */\n(function (pendo) {\n  const activeGuide = pendo.getActiveGuide();\n  if (!activeGuide) return;\n  const guideElement = activeGuide.step.guideElement;\n  const guide = guideElement.find('._pendo-step-container-styles');\n\n  const subtitle = guide.find('div._pendo-text-subTitle');\n  const title = guide.find('div._pendo-text-title');\n\n  // Mark lightbox with role=\"dialog\"\n  guide.attr('aria-labelledby', title.attr('id'));\n  guide.attr('role', 'dialog');\n\n  // Mark title(s) with role=\"heading\" and aria-level=\"2\"\n  if (title.length) console.debug('Pendo title enabled');\n  title.attr('aria-level', '2');\n  title.attr('role', 'heading');\n\n  // Mark sub-title(s) with role=\"heading\" and aria-level=\"3\"\n  if (subtitle.length) console.debug('Pendo sub-title enabled');\n  subtitle.attr('aria-level', '3');\n  subtitle.attr('role', 'heading');\n})(window.pendo);\n\n/*\n * Link the <select/> or <input type=radio/> to the div//p with the\n * question\n */\n(function (pendo) {\n  const CSS_POLL = '._pendo-multi-choice-poll-';\n  const POLL_ID = 'data-pendo-poll-id';\n\n  const guide = pendo.getActiveGuide().step.guideElement;\n\n  // <select/>\n  let inputs = guide.find(CSS_POLL + 'select');\n  if (inputs.length) console.debug('Pendo choice-select enabled');\n  pendo._.each(inputs, function (input) {\n    const pollId = input.getAttribute(POLL_ID);\n\n    // Find paragraph with the question\n    const question = guide.find(\n      CSS_POLL + 'question[' + POLL_ID + '=\"' + pollId + '\"]'\n    );\n\n    if (question.length) {\n      // Also link the question to the select\n      input.setAttribute('aria-labelledby', question[0].id);\n    }\n  });\n\n  // <input type=\"radio\" />\n  inputs = guide.find(CSS_POLL + 'select-border input[type=radio]');\n  if (inputs.length) console.debug('Pendo choice-radio enabled');\n  pendo._.each(inputs, function (input) {\n    const pollId = input.getAttribute(POLL_ID);\n\n    // Find paragraph with the question\n    const question = guide.find(\n      CSS_POLL + 'question[' + POLL_ID + '=\"' + pollId + '\"]'\n    );\n\n    if (question.length) {\n      // Also link the question to the select\n      input.setAttribute('aria-describedby', question[0].id);\n    }\n  });\n})(window.pendo);\n\n/*\n * Replace the button placeholder with \"Step 1 of 5\" by inactive\n * paragraph text. Any # in the text will be replaced by the actual\n * value.\n */\n(function (pendo) {\n  const CSS_POLL = '._pendo-number-scale-poll-';\n  const POLL_ID = 'data-pendo-poll-id';\n\n  const guide = pendo.getActiveGuide().step.guideElement;\n\n  const inputs = guide.find(CSS_POLL + 'wrapper input.pendo-radio');\n  if (inputs.length) console.debug('Pendo number-scale enabled');\n  pendo._.each(inputs, function (input) {\n    const radioId = input.id;\n    const pollId = input.getAttribute(POLL_ID);\n\n    // Find paragraph with the question\n    const question = guide.find(\n      CSS_POLL + 'question[' + POLL_ID + '=\"' + pollId + '\"]'\n    );\n    if (question.length === 0) return;\n\n    // Find label with the number and div with the description.\n    const lblNumber = guide.find('label[for=\"' + radioId + '\"]');\n    const lblDesc = guide.find('div[data-pendo-for=\"' + radioId + '\"]');\n    if (lblNumber.length === 0 || lblDesc.length === 0) return;\n\n    // Give elements an unique id, pendo doesn't assign one\n    lblNumber[0].id = radioId + '-lbl';\n    lblDesc[0].id = radioId + '-desc';\n\n    // Set radio input label to both number and description\n    input.setAttribute(\n      'aria-labelledby',\n      lblNumber[0].id + ' ' + lblDesc[0].id\n    );\n\n    // Also link the question to the radio input\n    input.setAttribute('aria-describedby', question[0].id);\n  });\n})(window.pendo);\n\n/**\n * Hide content after number scale until a choice is made.\n */\n(function (pendo) {\n  if (!window.ELS_PENDO_PROGRESSIVE_REVEAL) return;\n\n  const activeGuide = pendo.getActiveGuide();\n  const guide = activeGuide.step.guideElement;\n\n  const ratings = guide.find('._pendo-number-scale-poll-wrapper input');\n  if (!ratings.length) return;\n\n  // Find all rows and hide the rows after the number scale buttons.\n  const rows = guide.find('._pendo-row,._pendo-text-paragraph');\n  let afterNumber = false;\n  for (var i = 0; i < rows.length; i++) {\n    if (afterNumber) rows[i].style.display = 'none';\n    afterNumber = afterNumber || rows[i].contains(ratings[0]);\n  }\n\n  // Restore row visibility after a number scale choice is made.\n  ratings.on('change', function () {\n    for (var i = 0; i < rows.length; i++) {\n      rows[i].style.display = 'block';\n    }\n  });\n})(window.pendo);\n\n/*\n * Link textarea to question by adding an aria-labelledby=\"â¦\".\n */\n(function (pendo) {\n  const CSS_POLL = '._pendo-open-text-poll-';\n  const POLL_ID = 'data-pendo-poll-id';\n\n  const guide = pendo.getActiveGuide().step.guideElement;\n\n  let inputs = guide.find(CSS_POLL + 'input');\n  if (inputs.length) console.debug('Pendo open-text enabled');\n  pendo._.each(inputs, function (input) {\n    const pollId = input.getAttribute(POLL_ID);\n\n    // Find paragraph with the question\n    const question = guide.find(\n      CSS_POLL + 'question[' + POLL_ID + '=\"' + pollId + '\"]'\n    );\n\n    if (question.length) {\n      // Link the question to the textarea\n      input.setAttribute('aria-labelledby', question[0].id);\n    }\n  });\n})(window.pendo);\n\n/*\n * Replace the button placeholder with \"Step 1 of 5\" by inactive\n * paragraph text. Any # in the text will be replaced by the actual\n * value.\n */\n(function (pendo) {\n  const activeGuide = pendo.getActiveGuide();\n  const guide = activeGuide.step.guideElement;\n\n  pendo._.each(guide.find('button'), function (progress) {\n    let txt = progress.textContent;\n    const match = txt.match(/^Step (\\d+|#) of (\\d+|#|)$/);\n\n    // Button doesn't contain the right text \"Step # of #\".\n    if (!match) return;\n\n    console.debug('Pendo ' + match[0] + ' enabled');\n\n    // Build step text by replacing the # placeholders if needed\n    txt = 'Step ';\n    txt += match[1] === '#' ? activeGuide.stepIndex + 1 : match[1];\n    txt += ' of ';\n    txt += match[2] === '#' ? activeGuide.guide.steps.length : match[2];\n\n    // Create a new element for the text\n    const para = document.createElement('p');\n    para.textContent = txt;\n    // Copy the styles from button to paragraph\n    para.setAttribute('style', progress.getAttribute('style'));\n\n    // Insert the text before the button\n    progress.parentNode.insertBefore(para, progress);\n    // Remove the button\n    progress.parentNode.removeChild(progress);\n  });\n})(window.pendo);\n\n/*\n * Link Yes/No buttons to question by adding an aria-describedby=\"â¦\".\n */\n(function (pendo) {\n  const CSS_POLL = '_pendo-yes-no-poll-';\n  const POLL_ID = 'data-pendo-poll-id';\n\n  const guide = pendo.getActiveGuide().step.guideElement;\n\n  // <select/>\n  let inputs = guide.find('button[class*=' + CSS_POLL + ']');\n  if (inputs.length) console.debug('Pendo yes-no enabled');\n  pendo._.each(inputs, function (input) {\n    const pollId = input.getAttribute(POLL_ID);\n\n    // Find paragraph with the question\n    const question = guide.find(\n      '.' + CSS_POLL + 'question[' + POLL_ID + '=\"' + pollId + '\"]'\n    );\n\n    if (question.length) {\n      // Link the question to the textarea\n      input.setAttribute('aria-describedby', question[0].id);\n    }\n  });\n})(window.pendo);\n\n/**\n * vim:set ts=2 sts=2 sw=2 et si:\n * pendo.dom Pendo Adobe Analaytics Integration code\n * Author: mikefo@pendo.io, s.kuip@elsevier.com\n */\n(function (pendo, pageDataTracker) {\n\n  var activeGuide = pendo.getActiveGuide();\n  // Hmm, no guide?!?\n  if (!activeGuide) {\n    console.debug('Pendo AA no guide found');\n    return;\n  }\n\n  var guideName = activeGuide.guide.name;\n\n  /*\n   * Find the campaign ID in guideName\n   */\n  // The default is empty\n  var campaignId = '';\n  // Search for campaignId open tag\n  var campIdOpen = guideName.indexOf('$[');\n  // Search for close tag after the open tag\n  var campIdClose = guideName.indexOf(']', campIdOpen);\n\n  // Get campID from the guideName if both open and close are available\n  if (campIdOpen >= 0 || campIdClose >= 0) {\n    campaignId = guideName.substring(campIdOpen + 2, campIdClose);\n    console.debug('Adobe Campaign ID: ' + campaignId);\n  }\n\n  /*\n   * Determining campaign name, exclude content after the open bracket\n   */\n  // The default campaignname is the guide name\n  var campaignName = guideName;\n\n  var bracket = guideName.indexOf('[');\n  if (bracket > 0) campaignName = guideName.substring(0, bracket - 1);\n\n  // Normalize string\n  campaignName = campaignName.replace(':', ' ').trim().toLowerCase();\n  console.debug('Adobe Campaign Name: ' + campaignName);\n\n  // Increase stepId by 1 since it starts from index 0.\n  // If there's only one step, omit.\n  var stepId =\n    activeGuide.guide.steps.length == 1\n      ? ''\n      : ':step' + (activeGuide.stepIndex + 1);\n\n  var targetElem = activeGuide.step.elementPathRule;\n  console.debug('Element Path rule is: ' + targetElem);\n\n  /**\n   * Send event to Adobe\n   *\n   * @param tag   Adobe tag\n   * @param type  \"Impression\" or \"Click\"\n   */\n  function sendAaData(tag, type) {\n    pageDataTracker.trackEvent('cta' + type, {\n      cta: { ids: [tag] },\n    });\n  }\n\n  /**\n   * Send AA impression on show to Adobe & Pendo\n   *\n   * @param elementAaTag  Adobe tag\n   * @param elementName   Descriptive name\n   */\n  function ctaImpression(elementAaTag, elementName) {\n    // Register CtaImpression Event\n    if (pageDataTracker) {\n      sendAaData(elementAaTag, 'Impression');\n      console.debug('AA Impression Registered for: ' + elementAaTag);\n    }\n\n    {\n      pendo.track(campaignName, {\n        type: elementName + ' Impression',\n        tag: elementAaTag,\n      });\n      console.debug(\n        'Track Event Impression Registered for: ' + elementAaTag\n      );\n    }\n  }\n\n  /**\n   * Send AA conversion on click to Adobe & Pendo\n   *\n   * @param element       Element to listen of for click event\n   * @param elementAaTag  Adobe tag\n   * @param elementName   Descriptive name\n   */\n  function ctaConversions(element, elementAaTag, elementName) {\n    // Track Element Click Conversions\n    pendo.dom(element).on('click', function () {\n      if (pageDataTracker) {\n        sendAaData(elementAaTag, 'Click');\n        console.debug(\n          'AA ' + elementName + ' for ' + elementAaTag + ' submitted.'\n        );\n      }\n\n      {\n        pendo.track(campaignName, {\n          type: elementName,\n          tag: elementAaTag,\n        });\n        console.debug(\n          'Track Event Click Registered for: ' + elementAaTag\n        );\n      }\n    });\n  }\n\n  ////// BUTTONS //////\n  var buttons = pendo.dom('._pendo-button');\n  pendo._.each(buttons, function (button) {\n    var buttonCta = button.textContent.toLowerCase();\n    var buttonAaTag =\n      'pendo:' +\n      campaignName +\n      stepId +\n      ':' +\n      buttonCta +\n      ':' +\n      campaignId;\n    ctaImpression(buttonAaTag, 'Button Impression');\n    ctaConversions(button, buttonAaTag, 'Button Click');\n  });\n\n  ////// LINKS //////\n  var links = pendo.dom('._pendo-text-link');\n  pendo._.each(links, function (link) {\n    var linkCta = link.textContent.toLowerCase();\n    var linkAaTag =\n      'pendo:' +\n      campaignName +\n      stepId +\n      ':' +\n      linkCta +\n      ':' +\n      campaignId;\n    ctaImpression(linkAaTag, 'Link Impression');\n    ctaConversions(link, linkAaTag, 'Link Click');\n  });\n\n  ////// VIDEOS //////\n  var videos = pendo.dom('._pendo-youtube-video-wrapper');\n  pendo._.each(videos, function (video) {\n    var videoAaTag =\n      'pendo:' + campaignName + stepId + ':yt-video:' + campaignId;\n    ctaImpression(videoAaTag, 'Video Impression');\n    ctaConversions(video, videoAaTag, 'Video Click');\n  });\n\n  ////// CLOSE BUTTON //////\n  var closeButtons = pendo.dom('._pendo-close-guide');\n  pendo._.each(closeButtons, function (button) {\n    var buttonCta = 'closeButtonX';\n    var buttonAaTag =\n      'pendo:' +\n      campaignName +\n      stepId +\n      ':' +\n      buttonCta +\n      ':' +\n      campaignId;\n    ctaImpression(buttonAaTag, 'Close Button Impression');\n    ctaConversions(button, buttonAaTag, 'Close Button Click');\n  });\n\n  ////// TARGET ELEMENT //////\n  // Only register element path clicks if path rule is defined\n  if (targetElem != '') {\n    var targetAaTag =\n      'pendo:' + campaignName + stepId + ':target-elem:' + campaignId;\n    ctaImpression(targetAaTag, 'Target Element Impression');\n    ctaConversions(targetElem, targetAaTag, 'Target Element Click');\n  }\n\n  ////// NO CTA & NO TARGET ELEMENT //////\n  if (!targetElem && !buttons && !links && !videos) {\n    var genericAaTag =\n      'pendo:' + campaignName + stepId + ':' + campaignId;\n    ctaImpression(genericAaTag, 'Impression');\n  }\n})(window.pendo, window.pageDataTracker);\n/*END PENDO SCRIPT WRAPPER*/</script>",function(root){
var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
__p+='';
return __p;
},function(step,guide){/* @version: 0.1.3 */

/**
 * Change the variable to activate progressive reveal.
 * Only works for number scale at the moment.
 */
window.ELS_PENDO_PROGRESSIVE_REVEAL = 1;

/*
 * Copy theme name which is stored in the animation name over to the
 * class attribute. So, it can be used in the custom CSS. This way we
 * can create one version of CSS which works for all themes.
 */
(function (pendo) {
  const container = pendo.dom('._pendo-step-container-styles');

  // Template name is stored in animation name.
  const animation = window.getComputedStyle(container[0]).animationName;

  // Remove non-identifier chars and split on comma.
  const names = animation.replace(/[^\w-]+/, ' ').trim();

  container.addClass(names);
})(window.pendo);

/**
 * Activate custom caret styling and readjust the positioning
 */
(function (pendo) {
  var container = pendo.dom('[data-caret-enabled="true"]');
  // Container doesn't have a caret
  if (container.length !== 1) return;

  console.debug('Pendo caret enabled');

  var repositionCaret = function () {
    var parent = container.getParent();
    var caret = parent.find('.pendo-tooltip-caret-border');
    if (caret.length === 0) return;

    var style = caret[0].style;

    // Determine on which side the caret is
    // by examining the style properties.
    var transform = null;
    if (parseInt(style.left, 10) < 0) {
      transform = 'left';
    } else if (parseInt(style.right, 10) < 0) {
      transform = 'right';
    } else if (parseInt(style.top, 10) < 0) {
      transform = 'top';
    } else if (parseInt(style.bottom, 10) < 0) {
      transform = 'bottom';
    }

    // Set attribute on sibling element, because the caret
    // element parts are replaced every few hunderd milliseconds.
    container.attr('data-els-caret', transform);
  };

  var config = { childList: true };
  var observer = new MutationObserver(repositionCaret);
  observer.observe(container.getParent()[0], config);
  repositionCaret();
})(window.pendo);

/*
 * Focus trap keep the focus within the dialog.
 */
(function (pendo) {
  var activeGuide = pendo.getActiveGuide();
  if (!activeGuide) return;
  var guideElement = activeGuide.step.guideElement;

  // Create two focusable elements to detect focus leaving.
  var btnBefore = document.createElement('div');
  btnBefore.tabIndex = 0;
  var btnAfter = btnBefore.cloneNode();

  // Func: Move focus to first (default) or last focusable element
  function handleMoveFocus(ev) {
    var focusElements = guideElement.find('a,button,input,radio');
    var position =
      ev && ev.currentTarget === btnBefore
        ? focusElements.length - 1
        : 0;
    focusElements[position].focus();
  }

  // insert one element before and one after the guide content.
  var guide = guideElement.find('._pendo-step-container-styles');
  guide[0].appendChild(btnAfter);
  guide[0].insertBefore(btnBefore, guide[0].firstChild);

  //Move focus when its about to leave the dialog.
  btnBefore.addEventListener('focus', handleMoveFocus);
  btnAfter.addEventListener('focus', handleMoveFocus);

  // Move focus to first focusable element on show guide.
  handleMoveFocus();
})(window.pendo);

/**
 * Add accessibility attributes to dialog, title, and sub-title
 */
(function (pendo) {
  const activeGuide = pendo.getActiveGuide();
  if (!activeGuide) return;
  const guideElement = activeGuide.step.guideElement;
  const guide = guideElement.find('._pendo-step-container-styles');

  const subtitle = guide.find('div._pendo-text-subTitle');
  const title = guide.find('div._pendo-text-title');

  // Mark lightbox with role="dialog"
  guide.attr('aria-labelledby', title.attr('id'));
  guide.attr('role', 'dialog');

  // Mark title(s) with role="heading" and aria-level="2"
  if (title.length) console.debug('Pendo title enabled');
  title.attr('aria-level', '2');
  title.attr('role', 'heading');

  // Mark sub-title(s) with role="heading" and aria-level="3"
  if (subtitle.length) console.debug('Pendo sub-title enabled');
  subtitle.attr('aria-level', '3');
  subtitle.attr('role', 'heading');
})(window.pendo);

/*
 * Link the <select/> or <input type=radio/> to the div//p with the
 * question
 */
(function (pendo) {
  const CSS_POLL = '._pendo-multi-choice-poll-';
  const POLL_ID = 'data-pendo-poll-id';

  const guide = pendo.getActiveGuide().step.guideElement;

  // <select/>
  let inputs = guide.find(CSS_POLL + 'select');
  if (inputs.length) console.debug('Pendo choice-select enabled');
  pendo._.each(inputs, function (input) {
    const pollId = input.getAttribute(POLL_ID);

    // Find paragraph with the question
    const question = guide.find(
      CSS_POLL + 'question[' + POLL_ID + '="' + pollId + '"]'
    );

    if (question.length) {
      // Also link the question to the select
      input.setAttribute('aria-labelledby', question[0].id);
    }
  });

  // <input type="radio" />
  inputs = guide.find(CSS_POLL + 'select-border input[type=radio]');
  if (inputs.length) console.debug('Pendo choice-radio enabled');
  pendo._.each(inputs, function (input) {
    const pollId = input.getAttribute(POLL_ID);

    // Find paragraph with the question
    const question = guide.find(
      CSS_POLL + 'question[' + POLL_ID + '="' + pollId + '"]'
    );

    if (question.length) {
      // Also link the question to the select
      input.setAttribute('aria-describedby', question[0].id);
    }
  });
})(window.pendo);

/*
 * Replace the button placeholder with "Step 1 of 5" by inactive
 * paragraph text. Any # in the text will be replaced by the actual
 * value.
 */
(function (pendo) {
  const CSS_POLL = '._pendo-number-scale-poll-';
  const POLL_ID = 'data-pendo-poll-id';

  const guide = pendo.getActiveGuide().step.guideElement;

  const inputs = guide.find(CSS_POLL + 'wrapper input.pendo-radio');
  if (inputs.length) console.debug('Pendo number-scale enabled');
  pendo._.each(inputs, function (input) {
    const radioId = input.id;
    const pollId = input.getAttribute(POLL_ID);

    // Find paragraph with the question
    const question = guide.find(
      CSS_POLL + 'question[' + POLL_ID + '="' + pollId + '"]'
    );
    if (question.length === 0) return;

    // Find label with the number and div with the description.
    const lblNumber = guide.find('label[for="' + radioId + '"]');
    const lblDesc = guide.find('div[data-pendo-for="' + radioId + '"]');
    if (lblNumber.length === 0 || lblDesc.length === 0) return;

    // Give elements an unique id, pendo doesn't assign one
    lblNumber[0].id = radioId + '-lbl';
    lblDesc[0].id = radioId + '-desc';

    // Set radio input label to both number and description
    input.setAttribute(
      'aria-labelledby',
      lblNumber[0].id + ' ' + lblDesc[0].id
    );

    // Also link the question to the radio input
    input.setAttribute('aria-describedby', question[0].id);
  });
})(window.pendo);

/**
 * Hide content after number scale until a choice is made.
 */
(function (pendo) {
  if (!window.ELS_PENDO_PROGRESSIVE_REVEAL) return;

  const activeGuide = pendo.getActiveGuide();
  const guide = activeGuide.step.guideElement;

  const ratings = guide.find('._pendo-number-scale-poll-wrapper input');
  if (!ratings.length) return;

  // Find all rows and hide the rows after the number scale buttons.
  const rows = guide.find('._pendo-row,._pendo-text-paragraph');
  let afterNumber = false;
  for (var i = 0; i < rows.length; i++) {
    if (afterNumber) rows[i].style.display = 'none';
    afterNumber = afterNumber || rows[i].contains(ratings[0]);
  }

  // Restore row visibility after a number scale choice is made.
  ratings.on('change', function () {
    for (var i = 0; i < rows.length; i++) {
      rows[i].style.display = 'block';
    }
  });
})(window.pendo);

/*
 * Link textarea to question by adding an aria-labelledby="â¦".
 */
(function (pendo) {
  const CSS_POLL = '._pendo-open-text-poll-';
  const POLL_ID = 'data-pendo-poll-id';

  const guide = pendo.getActiveGuide().step.guideElement;

  let inputs = guide.find(CSS_POLL + 'input');
  if (inputs.length) console.debug('Pendo open-text enabled');
  pendo._.each(inputs, function (input) {
    const pollId = input.getAttribute(POLL_ID);

    // Find paragraph with the question
    const question = guide.find(
      CSS_POLL + 'question[' + POLL_ID + '="' + pollId + '"]'
    );

    if (question.length) {
      // Link the question to the textarea
      input.setAttribute('aria-labelledby', question[0].id);
    }
  });
})(window.pendo);

/*
 * Replace the button placeholder with "Step 1 of 5" by inactive
 * paragraph text. Any # in the text will be replaced by the actual
 * value.
 */
(function (pendo) {
  const activeGuide = pendo.getActiveGuide();
  const guide = activeGuide.step.guideElement;

  pendo._.each(guide.find('button'), function (progress) {
    let txt = progress.textContent;
    const match = txt.match(/^Step (\d+|#) of (\d+|#|)$/);

    // Button doesn't contain the right text "Step # of #".
    if (!match) return;

    console.debug('Pendo ' + match[0] + ' enabled');

    // Build step text by replacing the # placeholders if needed
    txt = 'Step ';
    txt += match[1] === '#' ? activeGuide.stepIndex + 1 : match[1];
    txt += ' of ';
    txt += match[2] === '#' ? activeGuide.guide.steps.length : match[2];

    // Create a new element for the text
    const para = document.createElement('p');
    para.textContent = txt;
    // Copy the styles from button to paragraph
    para.setAttribute('style', progress.getAttribute('style'));

    // Insert the text before the button
    progress.parentNode.insertBefore(para, progress);
    // Remove the button
    progress.parentNode.removeChild(progress);
  });
})(window.pendo);

/*
 * Link Yes/No buttons to question by adding an aria-describedby="â¦".
 */
(function (pendo) {
  const CSS_POLL = '_pendo-yes-no-poll-';
  const POLL_ID = 'data-pendo-poll-id';

  const guide = pendo.getActiveGuide().step.guideElement;

  // <select/>
  let inputs = guide.find('button[class*=' + CSS_POLL + ']');
  if (inputs.length) console.debug('Pendo yes-no enabled');
  pendo._.each(inputs, function (input) {
    const pollId = input.getAttribute(POLL_ID);

    // Find paragraph with the question
    const question = guide.find(
      '.' + CSS_POLL + 'question[' + POLL_ID + '="' + pollId + '"]'
    );

    if (question.length) {
      // Link the question to the textarea
      input.setAttribute('aria-describedby', question[0].id);
    }
  });
})(window.pendo);

/**
 * vim:set ts=2 sts=2 sw=2 et si:
 * pendo.dom Pendo Adobe Analaytics Integration code
 * Author: mikefo@pendo.io, s.kuip@elsevier.com
 */
(function (pendo, pageDataTracker) {

  var activeGuide = pendo.getActiveGuide();
  // Hmm, no guide?!?
  if (!activeGuide) {
    console.debug('Pendo AA no guide found');
    return;
  }

  var guideName = activeGuide.guide.name;

  /*
   * Find the campaign ID in guideName
   */
  // The default is empty
  var campaignId = '';
  // Search for campaignId open tag
  var campIdOpen = guideName.indexOf('$[');
  // Search for close tag after the open tag
  var campIdClose = guideName.indexOf(']', campIdOpen);

  // Get campID from the guideName if both open and close are available
  if (campIdOpen >= 0 || campIdClose >= 0) {
    campaignId = guideName.substring(campIdOpen + 2, campIdClose);
    console.debug('Adobe Campaign ID: ' + campaignId);
  }

  /*
   * Determining campaign name, exclude content after the open bracket
   */
  // The default campaignname is the guide name
  var campaignName = guideName;

  var bracket = guideName.indexOf('[');
  if (bracket > 0) campaignName = guideName.substring(0, bracket - 1);

  // Normalize string
  campaignName = campaignName.replace(':', ' ').trim().toLowerCase();
  console.debug('Adobe Campaign Name: ' + campaignName);

  // Increase stepId by 1 since it starts from index 0.
  // If there's only one step, omit.
  var stepId =
    activeGuide.guide.steps.length == 1
      ? ''
      : ':step' + (activeGuide.stepIndex + 1);

  var targetElem = activeGuide.step.elementPathRule;
  console.debug('Element Path rule is: ' + targetElem);

  /**
   * Send event to Adobe
   *
   * @param tag   Adobe tag
   * @param type  "Impression" or "Click"
   */
  function sendAaData(tag, type) {
    pageDataTracker.trackEvent('cta' + type, {
      cta: { ids: [tag] },
    });
  }

  /**
   * Send AA impression on show to Adobe & Pendo
   *
   * @param elementAaTag  Adobe tag
   * @param elementName   Descriptive name
   */
  function ctaImpression(elementAaTag, elementName) {
    // Register CtaImpression Event
    if (pageDataTracker) {
      sendAaData(elementAaTag, 'Impression');
      console.debug('AA Impression Registered for: ' + elementAaTag);
    }

    {
      pendo.track(campaignName, {
        type: elementName + ' Impression',
        tag: elementAaTag,
      });
      console.debug(
        'Track Event Impression Registered for: ' + elementAaTag
      );
    }
  }

  /**
   * Send AA conversion on click to Adobe & Pendo
   *
   * @param element       Element to listen of for click event
   * @param elementAaTag  Adobe tag
   * @param elementName   Descriptive name
   */
  function ctaConversions(element, elementAaTag, elementName) {
    // Track Element Click Conversions
    pendo.dom(element).on('click', function () {
      if (pageDataTracker) {
        sendAaData(elementAaTag, 'Click');
        console.debug(
          'AA ' + elementName + ' for ' + elementAaTag + ' submitted.'
        );
      }

      {
        pendo.track(campaignName, {
          type: elementName,
          tag: elementAaTag,
        });
        console.debug(
          'Track Event Click Registered for: ' + elementAaTag
        );
      }
    });
  }

  ////// BUTTONS //////
  var buttons = pendo.dom('._pendo-button');
  pendo._.each(buttons, function (button) {
    var buttonCta = button.textContent.toLowerCase();
    var buttonAaTag =
      'pendo:' +
      campaignName +
      stepId +
      ':' +
      buttonCta +
      ':' +
      campaignId;
    ctaImpression(buttonAaTag, 'Button Impression');
    ctaConversions(button, buttonAaTag, 'Button Click');
  });

  ////// LINKS //////
  var links = pendo.dom('._pendo-text-link');
  pendo._.each(links, function (link) {
    var linkCta = link.textContent.toLowerCase();
    var linkAaTag =
      'pendo:' +
      campaignName +
      stepId +
      ':' +
      linkCta +
      ':' +
      campaignId;
    ctaImpression(linkAaTag, 'Link Impression');
    ctaConversions(link, linkAaTag, 'Link Click');
  });

  ////// VIDEOS //////
  var videos = pendo.dom('._pendo-youtube-video-wrapper');
  pendo._.each(videos, function (video) {
    var videoAaTag =
      'pendo:' + campaignName + stepId + ':yt-video:' + campaignId;
    ctaImpression(videoAaTag, 'Video Impression');
    ctaConversions(video, videoAaTag, 'Video Click');
  });

  ////// CLOSE BUTTON //////
  var closeButtons = pendo.dom('._pendo-close-guide');
  pendo._.each(closeButtons, function (button) {
    var buttonCta = 'closeButtonX';
    var buttonAaTag =
      'pendo:' +
      campaignName +
      stepId +
      ':' +
      buttonCta +
      ':' +
      campaignId;
    ctaImpression(buttonAaTag, 'Close Button Impression');
    ctaConversions(button, buttonAaTag, 'Close Button Click');
  });

  ////// TARGET ELEMENT //////
  // Only register element path clicks if path rule is defined
  if (targetElem != '') {
    var targetAaTag =
      'pendo:' + campaignName + stepId + ':target-elem:' + campaignId;
    ctaImpression(targetAaTag, 'Target Element Impression');
    ctaConversions(targetElem, targetAaTag, 'Target Element Click');
  }

  ////// NO CTA & NO TARGET ELEMENT //////
  if (!targetElem && !buttons && !links && !videos) {
    var genericAaTag =
      'pendo:' + campaignName + stepId + ':' + campaignId;
    ctaImpression(genericAaTag, 'Impression');
  }
})(window.pendo, window.pageDataTracker);});