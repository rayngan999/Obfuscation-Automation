document.querySelectorAll(".mmCarousel").length&&document.documentElement.clientWidth>=1e3&&(mmLoader({src:("it"==lang?"https://www.giallozafferano.it":"https://www.giallozafferano.com")+"/js/min/mmCarousel.min.js?cb="+nonce,async:!0}),document.querySelectorAll(".mmCarouselControl").forEach(e=>{e.addEventListener("click",t=>{let a=e.classList.contains("mmCarouselPrev")?"RightToLeft":"LeftToRight",o=e.closest(".gz-swiper-button-wrap").parentNode.querySelector("h3").textContent.toUpperCase();e.classList.contains("mmCarouselDisabled")||("it"==lang?ga("send","event","CarouselSwipeHP2Desktop",a,o,{nonInteraction:!0}):gtag("event",a,{event_category:"CarouselSwipeHP2Desktop",event_label:o,non_interaction:!0}))})}));const carousels=document.querySelectorAll(".mmCarousel"),arrayCarousels=Array.from(carousels);let observer=new IntersectionObserver((e,t)=>{e.forEach(e=>{if(1==e.intersectionRatio){console.log(e);var a=e.target.previousElementSibling.querySelector("h3").textContent.toUpperCase(),o=arrayCarousels.indexOf(e.target)+1;"it"==lang?ga("send","event","CarouselHP","view",a+"_"+o,{nonInteraction:!0}):gtag("event","view",{event_category:"CarouselHP",event_label:a+"_"+o,non_interaction:!0}),console.log("CarouselHP",a),t.unobserve(e.target)}})},{threshold:1,rootMargin:"0px 50px"});for(const e of carousels)observer.observe(e);function raccomandationHandler(e){var t=this;t.placeholder,t.data,t.init=(()=>{t.placeholdersMainCarousel=document.querySelectorAll(".gz-raccomandatore-slide"),t.placeholders=document.querySelectorAll(".gz-raccomandatore-swiper"),t.data=e||null,t.data&&("desktop"!=device&&t.populateMainCarousel(),t.populateCarousels())}),t.populateMainCarousel=(()=>{let e=t.data.nodo_out.slice(0,t.placeholdersMainCarousel.length);for(let a=0;a<e.length;a++){let o=t.createMainSlide(e[a]),n=t.placeholdersMainCarousel[a];n.setAttribute("data-ets-algo",e.algo),n.setAttribute("data-ets-tipo",e.tipo),n.innerHTML=o}swiperHelper.overrideMainCarouselSlides()}),t.populateCarousels=(()=>{for(let a=0;a<t.placeholders.length;a++){var e="";let o=t.placeholders[a],n=t.data["nodo_out"+o.getAttribute("data-swipernode")];for(let a=0;a<n.length;a++){e+=t.createSlide(n[a])}o.innerHTML=o.innerHTML+e,o.parentNode.classList.add("processed"),"desktop"==device&&(n.length>4?mondadoriMediaCarousel.setControls():o.parentNode.querySelector(".gz-swiper-info .gz-swiper-button-wrap").style.display="none")}}),t.createMainSlide=(e=>{var t="";return t+='<article class="gz-card"><a href="'+e.url+'" title="'+e.titolo+'"><div class="gz-image-recipe gz-'+e.type+'"><picture><img src="'+e.img+'foto_hd/hd780x520.jpg"" alt="'+e.titolo+'" width="780" height="520" /></picture></div><div class="gz-content-recipe-card">',e.benessere&&(t+='<span class="gz-label gz-benessere">Benessere</span>'),t+='<h2 class="gz-title">'+e.titolo+"</h2>",(e.num_commenti||e.rating_average)&&(t+='<ul class="gz-data-recipe">',e.num_commenti&&(t+='<li class="gz-single-data-recipe">',e.num_commenti>=200?t+='<span class="gz-icon"><svg viewBox="0 0 17 18"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#commento-orange" /></svg></span>':t+='<span class="gz-icon"><svg viewBox="0 0 24 25"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#commento-grey" /></svg></span>',t+=e.num_commenti+"</li>"),e.rating_average&&(t+='<li class="gz-single-data-recipe">',e.rating_average>=4.3?t+='<span class="gz-icon"><svg viewBox="0 0 18 16"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#voto-orange" /></svg></span>':t+='<span class="gz-icon"><svg viewBox="0 0 21 20"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#voto-grey" /></svg></span>',t+=e.rating_average+"</li>"),t+="</ul>"),t+="</div></a></article>"}),t.createSlide=(e=>{var t="",a=e.t_has_special_image?"_sp":"";return t+='<div class="gz-swiper-slide mmCarouselItem" data-ets-algo="'+e.algo+'" data-ets-tipo="'+e.tipo+'"><article class="gz-card"><a href="'+e.url+'" title="'+e.titolo+'"><div class="gz-image-recipe gz-'+e.type+'"><picture><img src="'+e.img+"foto_hd/hd360x300"+a+'.jpg" alt="'+e.titolo+'" width="360" height="300" class="lazyload" loading="lazy" />',e.benessere&&(t+='<span class="gz-label gz-benessere">'+dictionary.benessere+"</span>"),t+='</picture></div><div class="gz-content-recipe-card"><h4 class="gz-title gz-line-clamp gz-line-clamp-2">'+e.titolo+"</h4>",(e.num_commenti||e.rating_average)&&(t+='<ul class="gz-data-recipe">',e.num_commenti&&(t+='<li class="gz-single-data-recipe">',e.num_commenti>=200?t+='<span class="gz-icon"><svg viewBox="0 0 17 18"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#commento-orange" /></svg></span>':t+='<span class="gz-icon"><svg viewBox="0 0 24 25"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#commento-grey" /></svg></span>',t+=e.num_commenti+"</li>"),e.rating_average&&(t+='<li class="gz-single-data-recipe">',e.rating_average>=4.3?t+='<span class="gz-icon"><svg viewBox="0 0 18 16"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#voto-orange" /></svg></span>':t+='<span class="gz-icon"><svg viewBox="0 0 21 20"><use xlink:href="/style/images/icons.svg?cb='+nonce+'#voto-grey" /></svg></span>',t+=e.rating_average+"</li>"),t+="</ul>"),t+="</div></a></article></div>"})}(addRaccomandatoreGetter=(()=>{if("/"!=document.location.pathname)return!1;postTcfReady(async function(){let e=function(e){const t=document.cookie.split(";").reduce((e,t)=>{const[a,o]=t.split("=").map(e=>e.trim());return a&&o&&(e[a]=decodeURIComponent(o)),e},{});return e?t[e]||"":t}("raccomandatore")||null;e?localStorage.setItem("raccomandatore",encodeURIComponent(e)):localStorage.getItem("raccomandatore")&&(e=localStorage.getItem("raccomandatore"));if(e&&(e=JSON.parse(decodeURIComponent(e))).items&&e.items.length>0){let a=localStorage.getItem("kxkuid")||null,o=localStorage.getItem("localEtsId")||null;jsonToPost={},jsonToPost=e,jsonToPost.ids={uid:o,kx:a},jsonToPost.ctx="hp",jsonToPost.page=0,jsonToPost.url=document.location.href,console.log("[Raccomandatore] jsonToPost",jsonToPost),console.log("[Raccomandatore] jsonToPost1",JSON.stringify(jsonToPost));let n=await fetch("https://x77l9u4vif.execute-api.eu-west-1.amazonaws.com/prod/api/recommender/gz/v1/hp/",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(jsonToPost)}),s=await n.json();console.log("[Raccomandatore] Risultati Fetch",s);var t=new raccomandationHandler(s);t.init()}})}))(),(handlePermanenceEvent=(()=>{var e=1;let t=setInterval(()=>{"it"==lang?ga("send","event","PermanenzaHP","15sec",e,{nonInteraction:!0}):gtag("event","15sec",{event_category:"PermanenzaHP",event_label:e,non_interaction:!0}),e++},15e3);setTimeout(()=>{clearInterval(t)},6e5)}))(),(handleAutoPlayOnMainSwiper=(()=>{document.addEventListener("initSwiper",e=>{let t=document.querySelector(".gz-tiramisu"),a=!1;if("desktop"!=device&&t){let o=t.querySelector(":scope > .gz-swiper-container")?t.querySelector(":scope > .gz-swiper-container").dataset.swipername:"";if(o&&o==e.detail.swipername&&"undefined"!=typeof swiperHelper){let e=swiperHelper.getSwipers()[o].swiper;new IntersectionObserver((t,o)=>{t.forEach(t=>{1!=t.intersectionRatio&&(a?(e.autoplay.start(),a=!1):(e.autoplay.stop(),a=!0),e.update())})},{threshold:0}).observe(t),document.addEventListener("visibilitychange",t=>{document.hidden?a||e.autoplay.stop():a||e.autoplay.start(),e.update()},!1)}}})}))();
//# sourceMappingURL=home.min.js.map