!function(e){var n={};function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(i,o,function(n){return e[n]}.bind(null,o));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=1)}([function(e){e.exports={name:"video-player",version:"1.3.6",description:"",main:"./src/index.js",scripts:{test:"./node_modules/.bin/testem ci --file testem.js --port ${JS_TEST_PORT}",tdd:"./node_modules/.bin/testem dev --file testem.json",report:"./node_modules/.bin/nyc report",start:"./node_modules/.bin/webpack-dev-server --open --config webpack.dev.js",build:"./node_modules/.bin/webpack --optimize-minimize --config webpack.prod.js"},contributors:["IvÃ¡n PÃ©rez <ivanperez@vocento.com>","Jose Manuel Ortega <jmortega@vocento.com>","Adolfo Sanz Barandiaran <asanz@vocento.com>"],license:"SEE LICENSE IN LICENSE.md",devDependencies:{"@babel/core":"^7.4.3","@babel/plugin-syntax-dynamic-import":"^7.2.0","@babel/preset-env":"^7.4.3","babel-loader":"^8.0.5",chai:"^4.2.0",chromium:"^2.1.0","clean-webpack-plugin":"^2.0.1","copy-webpack-plugin":"^4.6.0","html-webpack-plugin":"^3.2.0","istanbul-instrumenter-loader":"^3.0.1",mocha:"^6.1.3",nyc:"^14.0.0",shelljs:"^0.8.3",testem:"^2.15.1",webpack:"^4.30.0","webpack-cli":"^3.3.0","webpack-dev-server":"^3.3.1","webpack-merge":"^4.2.1","webpack-shell-plugin":"^0.5.0"}}},function(e,n,t){"use strict";t.r(n);var i=t(0),o="vocento.config.multimedia.videoplayer",a=1500,r=document.documentElement.lang&&document.documentElement.lang.split("-").shift()||"es",l="lazy",d=Object.freeze({EMPTY:0,WITH_POSTER:1,WITH_THUMBNAIL:2,WITH_PLAYER:10}),c="voc-video-player-modalcontainer",s="vtm:set",u=Object.freeze({backdrop:!0,keyboard:!0,show:!0}),v={autoplay:!1,controls:!0,loop:!1,modallayer:!1,muted:!1,playsinline:!0,videoad:!0,videolive:!1},p=(Object.freeze({BRIGHTCOVE:"brightcove",YOUTUBE:"youtube",VIMEO:"vimeo",DAILYMOTION:"dailymotion",UNKNOWN:"unknown"}),Object.freeze({anonimo:!0,registrado:!0,trial:!1,suscriptor:!1,periodista:!1})),f=document.location.search.indexOf("video-player_debug=1")>-1,y="[video-player]";function h(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],i=!0,o=!1,a=void 0;try{for(var r,l=e[Symbol.iterator]();!(i=(r=l.next()).done)&&(t.push(r.value),!n||t.length!==n);i=!0);}catch(e){o=!0,a=e}finally{try{i||null==l.return||l.return()}finally{if(o)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function m(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var g=function(){function e(n,t){var i=n.source,o=n.accountname,a=n.videoid,r=n.autoplay,l=n.bumperid,d=n.controls,c=n.domain,s=n.loop,u=n.modallayer,v=n.muted,p=n.newsid,f=n.playerid,y=n.playlistid,h=n.playlistvideoid,m=n.playsinline,g=n.poster,b=n.template,w=n.src,P=n.videoad,j=n.params;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.options={source:i,accountname:o,videoid:a,autoplay:r,bumperid:l,controls:d,domain:c,loop:s,modallayer:u,muted:v,newsid:p,playerid:f,playlistid:y,playlistvideoid:h,playsinline:m,poster:g,template:b,src:w,videoad:P,params:j},o&&(o=(o=o.replace("surinenglish","diariosur")).replace("turium","welife")),this.url="".concat(t,"/videos/source/").concat(i,"/account/").concat(o,"/").concat(a,".html"),t&&-1!=t.indexOf("video-management-forms")&&(this.url="".concat(t,"/video/").concat(i,"/").concat(o,"/").concat(a,"/render")),y&&(this.url="//video-management-forms.vocento.com/playlist/".concat(i,"/").concat(o,"/").concat(y,"/render"))}var n,t,i;return n=e,(t=[{key:"fetch",value:function(){var e=this;return this.promise=Voonto.ready.then(function(n){return b.call(e,n.getUserType())}).catch(function(){return b.call(e,"anonimo")}),this.promise}}])&&m(n.prototype,t),i&&m(n,i),e}();function b(e){var n=this;return this.options.videoad=this.options.videoad?p[e]:this.options.videoad,Promise.all([Voonto.require("jquery"),Voonto.require("is")]).then(function(e){var t=h(e,2),i=t[0],o=t[1];return n.url+="?".concat(function(e){var n=this,t=[];return Object.keys(this.options).forEach(function(e){(n.options[e]||"boolean"==typeof n.options[e])&&(-1!==["autoplay","muted"].indexOf(e)?n.options[e]&&t.push({key:e,value:encodeURIComponent(n.options[e])}):t.push({key:e,value:encodeURIComponent(n.options[e])}))}),t.push({key:"isdesktop",value:e.desktop()}),t.push({key:"language",value:"".concat(r)}),t.map(function(e){return"".concat(e.key,"=").concat(e.value)}).join("&")}.call(n,o)),i.ajax(n.url,{dataType:"html"})})}function w(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var P=function(){function e(n,t){var i=n.accountname,o=n.source,a=n.videoid;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),i&&(i=(i=i.replace("surinenglish","diariosur")).replace("turium","welife")),this.url="".concat(t,"/videos/source/").concat(o,"/account/").concat(i,"/").concat(a,".json"),t&&-1!=t.indexOf("video-management-forms")&&(this.url="".concat(t,"/video/").concat(o,"/").concat(i,"/").concat(a,"/details")),this.metadata={}}var n,t,i;return n=e,(t=[{key:"fetch",value:function(){var e=this;return this.promise?this.promise.then(function(e){return e.video.metadata}):(this.promise=Voonto.require("jquery").then(function(n){return n.ajax(e.url,{dataType:"json"})}),this.promise.then(function(e){return e.video.metadata}))}}])&&w(n.prototype,t),i&&w(n,i),e}();function j(){var e;f&&(e=console).log.apply(e,[y].concat(Array.prototype.slice.call(arguments)))}function $(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var M="<span>{duration}</span>",T=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=n,this.container$=t,this.videoPlayer=null}var n,t,i;return n=e,(t=[{key:"fetch",value:function(){var e=this;return j("embed.js::fetch"),this.player.fetch().then(function(n){if(-1!==(n=function(e){return e=e.replace("<div>",'<div style="position:absolute">')}(n)).indexOf("iframe"))return e.container$.append(n),O(e.container$),k(e.container$),void E(e.container$);e.container$.append(n);var t=setInterval(function(){j("embed.js::_loadPlayer::player NOT READY"),e.container$.find("video").length&&(clearInterval(t),j("embed.js::_loadPlayer::player READY"),e.videoPlayer=function(e){var n=null;if(e.find(".video-js").get(0)){var t=e.find(".video-js").get(0);return"undefined"==typeof videojs?null:(n=videojs(t)||null)||null}if(e.find(".jwplayer").get(0)){var i=e.find(".jwplayer").get(0);return"undefined"==typeof jwplayer?null:(n=jwplayer(i)||null)||null}if(e.find("video").get(0)){var o=e.find("video").get(0);return"undefined"!=typeof videojs&&(n=videojs(o)||null),"undefined"!=typeof jwplayer&&(n=jwplayer(o)||null),n||null}if(this.container$.find("iframe").get(0)){var a=this.container$.find("iframe").get(0);return a?a.contentWindow:null}return n}(e.container$),function(e){e.find(".vjs-big-play-button").css("display","none"),0===e.children("i, span, .video-player-play-button").length&&e.find(".vjs-big-play-button").css("display","");e.find(".jw-svg-icon-play").css("display","none"),0===e.children("i, span, .jw-svg-icon-play").length&&e.find(".jw-svg-icon-play").css("display","");e.find(".vjs-poster").css("background-size","cover"),e.find(".vjs-playlist img").css("position","relative")}(e.container$),O(e.container$),function(){var e=this;this.container$.on("click",function(){k(e.container$)})}.call(e),function(){var e=this;this.videoPlayer&&(void 0!==this.videoPlayer.on&&(this.videoPlayer.on(["playing","play"],function(n){var t=setInterval(function(){0!==e.container$.children("i").length||0!==e.container$.children("span").length||0!==e.container$.children(".video-player-play-button").length?(k(e.container$),E(e.container$)):clearInterval(t)},1e3);setTimeout(function(){clearInterval(t)},1e4)}),this.videoPlayer.on("loadstart",function(n){var t=null;t||(t=e.videoPlayer.mediainfo||null),t||(t=e.videoPlayer.getPlaylistItem()||null),t||(t=null);var i=t?t.duration:0,o=i?1e3*i:0;(o=I(o))&&(o=0===o.minutes&&0===o.seconds?"directo":o.minutes+":"+o.seconds,e.container$.find(".video-player-duration").get(0)&&e.container$.find(".video-player-duration").html(M.replace(/{duration}/g,o)))})),void 0!==this.videoPlayer.onPlay&&this.videoPlayer.onPlay(function(n){var t=setInterval(function(){0!==e.container$.children("i").length||0!==e.container$.children("span").length||0!==e.container$.children(".video-player-play-button").length?k(e.container$):clearInterval(t)},1e3);setTimeout(function(){clearInterval(t)},1e4)}),void 0!==this.videoPlayer.onReady&&this.videoPlayer.onReady(function(n){var t=0;void 0!==e.videoPlayer.getDuration&&e.videoPlayer.getDuration()&&(t=e.videoPlayer.getDuration()),(t=I(t))&&(t=0===t.minutes&&0===t.seconds?"directo":t.minutes+":"+t.seconds,e.container$.find(".video-player-duration").get(0)&&e.container$.find(".video-player-duration").html(M.replace(/{duration}/g,t)))}))}.call(e))},10);setTimeout(function(){j("embed.js::_loadPlayer::player not ready STOP!"),clearInterval(t)},1e4)})}}])&&$(n.prototype,t),i&&$(n,i),e}();function O(e){e.children("div").not(".video-player-play-button").css("position","relative"),e.children("img").css("position","absolute"),e.children(".video-player-poster").css("position","absolute")}function k(e){e.children("i").remove(),e.children("span").remove(),e.children(".video-player-play-button").remove()}function E(e){e.children("img").remove(),e.children(".video-player-poster").remove()}function I(e){if(Number.isNaN(e)||e<0)return null;var n=Math.floor(e/36e5%24);n=n<10?"0"+n:n;var t=Math.floor(e/6e4%60);t=t<10?"0"+t:t;var i=Math.floor(e/1e3%60);return{hours:n,minutes:t,seconds:i=i<10?"0"+i:i,milliseconds:parseInt(e%1e3/100)}}function S(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var V="/AG-|PG-|AT-|EP-|JM-|ACB/g",_="agen",C="videos",x="video",N="php",Y=function(){function e(n,t){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.player=n,this.container$=t}var n,t,i;return n=e,(t=[{key:"fetch",value:function(){var e=this;return j("modal.js::fetch"),this.container$.empty(),function(){Voonto.require("jquery").then(function(e){e("video").each(function(){var n=e(this).get(0);if(n&&"undefined"!=typeof videojs){var t=n.id||null;if(t){var i=videojs(t)||null;if(i){var o=i.ima3||null,a=o?o.adsManager:null,r=o?o.adPlayer:null;a&&r&&(r.paused()||r.pause()),i.paused()||i.pause()}}}})})}.call(this),Voonto.require("is").then(function(n){return function(e){e.desktop()?this.player.options.autoplay=!0:this.player.options.autoplay=!1}.call(e,n)}).then(function(){return e.player.fetch()}).then(function(n){return e.container$.html(n)}).then(function(){void 0!==e.container$.children().first().modal&&e.container$.children().first().modal(u)}).then(function(){return function(){var e=this;this.container$.on("hide.bs.modal",function(){return e.container$.empty()})}.call(e)}).then(function(){return function(){var e=this.container$.children().find("video").get(0);if(!e)return;if("undefined"==typeof videojs)return;var n=e.id||null;if(!n)return;var t=videojs(n)||null;if(!t)return;var i=t.mediainfo||null;if(!i)return;var o=i.link||null;if(o&&o.url){var a=this.container$.children().first().find("[data-voc-social-buttons]").get(0);a&&this.container$.children().first().find("[data-voc-social-buttons]").socialButtons()}}.call(e)}).then(function(){return function(){this.container$.children().first().find("[data-voc-animated-underline]").get(0)&&this.container$.children().first().find("[data-voc-animated-underline]").animatedUnderline()}.call(e)}).then(function(){return function(){var e=this.container$.children().find("video").get(0);if(!e)return;if("undefined"==typeof videojs)return;var n=e.id||null;if(!n)return;var t=videojs(n)||null;if(!t)return;var i=t.mediainfo||null;if(!i)return;var o=i.name||null,a=i.link||null,r=a?a.url:null,l=i.reference_id||null,d=i.tags||null,c=i.created_at||null,u=i.updated_at||null,v=i.custom_fields||null,p=v?v.autor:null,f="rl";l&&(f=(f=l.substr(0,3)).match(V)?_:f.split("-").shift().toLowerCase());var y=[];d&&Object.values(d).forEach(function(e){if(-1!==e.indexOf("/main")){var n=e.replace("/main","").split("/");return Object.values(n).forEach(function(e){y.push(e.split("_").pop())}),!1}return-1!==r.indexOf("/"+e+"/")&&(y=e.split("/")),!0});Voonto.require("moment").then(function(e){Voonto.getInstance().trigger(s,{seccion:C,subseccion1:y[0]?y[0]:"",subseccion2:y[1]?y[1]:"",subseccion3:y[2]?y[2]:"",subseccion4:y[3]?y[3]:"",titular:o,fechaPrimeraPublicacion:e(c).format("YYYYMMDDkkmmss"),fechaModificacion:e(u).format("YYYYMMDDkkmmss"),tipoContenido:x,sistemaPublicacion:N,firmaAutor:p,origenContenido:f})})}.call(e)}).then(function(){Voonto.getInstance().trigger("paywall:content")})}}])&&S(n.prototype,t),i&&S(n,i),e}();function A(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var L='\n<img class="'.concat(l,'" data-original="{poster}" width="100%" height="auto" />\n<noscript>\n  <img src="{poster}" width="100%" height="auto" />\n</noscript>\n'),W=function(){function e(n){var t=n.modelMetadata,i=n.modelPlayer,o=n.container$;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelMetadata=t,this.modelPlayer=i,this.container$=o,this.state=d.EMPTY,this.videoPlayer=null}var n,t,i;return n=e,(t=[{key:"render",value:function(){var e=this;j("view:player.js::render"),this.container$.on("inview",function(n,t){if(t){if(j("view:player.js::render::isInView"),e.state===d.EMPTY)return j("view:player.js::render::isInView::empty"),e.container$.attr("data-voc-video-player-processed","true"),void function(){var e=this.modelPlayer.options.modallayer;this.state===d.EMPTY&&(e?(function(){var e=this;this.modelMetadata.fetch().then(function(n){e.modelMetadata=n}).then(function(){var n=e.modelMetadata.poster?e.modelMetadata.poster:null;n||(n=e.modelMetadata.image.poster?e.modelMetadata.image.poster:null),n&&(e.container$.find("img").length&&e.container$.find("img").remove(),e.container$.append(L.replace(/{poster}/g,n)),setTimeout(function(){return e.container$.find(".".concat(l)).lazyload()},0),e.state=d.WITH_POSTER)}),this.modelPlayer.options.modallayer?function(){var e=this;this.container$.on("click",function(){return z.call(e)})}.call(this):function(){}.call(this)}.call(this),this.state=d.WITH_POSTER):(function(){this.modelPlayer.options.modallayer?z.call(this):function(){this.container$.off("click"),this.container$.children(".video-player-poster").css("display","block"),this.container$.children(".video-player-poster").css("position","relative"),this.container$.children(".video-player-poster").css("max-width","100%"),this.container$.children(".video-player-poster").css("padding-top","56.25%"),this.container$.children(".video-player-poster").css("overflow","hidden"),this.container$.children("i").css("pointer-events","none"),this.container$.children("span").css("pointer-events","none"),this.container$.children(".video-player-play-button").css("pointer-events","none"),new T(this.modelPlayer,this.container$).fetch()}.call(this)}.call(this),this.state=d.WITH_PLAYER))}.call(e);if(j("view:player.js::render::isInView::NOT-empty"),e.videoPlayer=q(e.container$),e.videoPlayer)if(void 0!==e.videoPlayer.postMessage)e.videoPlayer.postMessage("playVideo","*"),e.videoPlayer.postMessage("play","*"),e.videoPlayer.postMessage(JSON.stringify({event:"command",func:"playVideo",method:"play"}),"*");else{var i=!1;if(void 0!==e.videoPlayer.isFullscreen&&(i=e.videoPlayer.isFullscreen()),void 0!==e.videoPlayer.getFullscreen&&(i=e.videoPlayer.getFullscreen()),i)return;var o=e.videoPlayer.ima3||null,a=o?o.adsManager:null,r=o?o.adPlayer:null;if(a&&r&&r.paused()&&r.play(),void 0!==e.videoPlayer.paused&&e.videoPlayer.paused()&&e.videoPlayer.hasStarted()){var c=e.videoPlayer.play();void 0!==c&&c.then(function(e){}).catch(function(e){})}void 0!==e.videoPlayer.getState&&"idle"!==e.videoPlayer.getState().toLowerCase()&&"paused"===e.videoPlayer.getState().toLowerCase()&&e.videoPlayer.play()}}else if(j("view:player.js::render::NOT-isInView"),e.videoPlayer=q(e.container$),e.videoPlayer)if(void 0!==e.videoPlayer.postMessage)e.videoPlayer.postMessage("pauseVideo","*"),e.videoPlayer.postMessage("pause","*"),e.videoPlayer.postMessage(JSON.stringify({event:"command",func:"pauseVideo",method:"pause"}),"*");else{var s=!1;void 0!==e.videoPlayer.videoWidth&&(s=0===e.videoPlayer.videoWidth());var u=!1;if(void 0!==e.videoPlayer.duration&&(u=0===e.videoPlayer.duration()||e.videoPlayer.duration()===1/0),!s&&!u){if(void 0!==e.videoPlayer.el&&!e.videoPlayer.el().classList.contains("vjs-picture-in-picture")){var v=e.videoPlayer.ima3||null,p=v?v.adsManager:null,f=v?v.adPlayer:null;p&&f&&(f.paused()||f.pause()),void 0!==e.videoPlayer.paused&&(e.videoPlayer.paused()||e.videoPlayer.pause())}void 0===e.videoPlayer.getContainer||e.videoPlayer.getContainer().classList.contains("vjs-picture-in-picture")||void 0!==e.videoPlayer.getState&&"idle"!==e.videoPlayer.getState().toLowerCase()&&"playing"===e.videoPlayer.getState().toLowerCase()&&e.videoPlayer.pause()}}})}}])&&A(n.prototype,t),i&&A(n,i),e}();function q(e){var n=null;if(e.find(".video-js").get(0)){var t=e.find(".video-js").get(0);return"undefined"==typeof videojs?null:(n=videojs(t)||null)||null}if(e.find(".jwplayer").get(0)){var i=e.find(".jwplayer").get(0);return"undefined"==typeof jwplayer?null:(n=jwplayer(i)||null)||null}if(e.find("video").get(0)){var o=e.find("video").get(0);return"undefined"!=typeof videojs&&(n=videojs(o)||null),"undefined"!=typeof jwplayer&&(n=jwplayer(o)||null),n||null}if(e.find("iframe").get(0)){var a=e.find("iframe").get(0);return a?a.contentWindow:null}return n}function z(){var e=this;this.container$.off("click"),Voonto.require("jquery").then(function(e){return e("#".concat(c))}).then(function(n){return new Y(e.modelPlayer,n).fetch()}).then(function(){setTimeout(function(){return e.container$.on("click",function(){return z.call(e)})},0)})}function R(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var U='\n<img class="'.concat(l,'" data-original="{poster}" width="100%" height="auto" />\n<noscript>\n  <img src="{poster}" width="100%" height="auto" />\n</noscript>\n'),H=function(){function e(n){var t=n.modelMetadata,i=n.container$;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelMetadata=t,this.container$=i,this.state=d.EMPTY}var n,t,i;return n=e,(t=[{key:"render",value:function(){var e=this;j("view:poster.js::render"),this.container$.on("inview",function(n,t){if(t){if(j("view:poster.js::render::isInView"),e.state===d.EMPTY)return e.modelMetadata.fetch().then(function(n){e.modelMetadata=n}).then(function(){return e.container$.attr("data-voc-video-poster-processed","true")}).then(function(){return function(){var e=this,n=this.modelMetadata.poster?this.modelMetadata.poster:null;n||(n=this.modelMetadata.image.poster?this.modelMetadata.image.poster:null);if(!n)return;this.container$.find("img").length&&this.container$.find("img").remove();this.container$.append(U.replace(/{poster}/g,n)),setTimeout(function(){return e.container$.find(".".concat(l)).lazyload()},0),this.state=d.WITH_POSTER}.call(e)})}else j("view:poster.js::render::NOT-isInView")})}}])&&R(n.prototype,t),i&&R(n,i),e}();function D(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var F='\n<img class="'.concat(l,'" data-original="{thumbnail}" width="100%" height="auto" />\n<noscript>\n  <img src="{thumbnail}" width="100%" height="auto" />\n</noscript>\n'),J=function(){function e(n){var t=n.modelMetadata,i=n.container$;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.modelMetadata=t,this.container$=i,this.state=d.EMPTY}var n,t,i;return n=e,(t=[{key:"render",value:function(){var e=this;j("view:thumbnail.js::render"),this.container$.on("inview",function(n,t){if(t){if(j("view:thumbnail.js::render::isInView"),e.state===d.EMPTY)return e.modelMetadata.fetch().then(function(n){e.modelMetadata=n}).then(function(){return e.container$.attr("data-voc-video-thumbnail-processed","true")}).then(function(){return function(){var e=this,n=this.modelMetadata.thumbnail?this.modelMetadata.thumbnail:null;n||(n=this.modelMetadata.image.thumbnail?this.modelMetadata.image.thumbnail:null);if(!n)return;this.container$.find("img").length&&this.container$.find("img").remove();this.container$.append(F.replace(/{thumbnail}/g,n)),setTimeout(function(){return e.container$.find(".".concat(l)).lazyload()},0),this.state=d.WITH_THUMBNAIL}.call(e)})}else j("view:thumbnail.js::render::NOT-isInView");return!0})}}])&&D(n.prototype,t),i&&D(n,i),e}();function B(e){switch(e.type){case"visibilitychange":!function(e){Voonto.require("jquery").then(function(n){n(e.target).find("[data-voc-video-player]").each(function(){var e=function(e){var n=null;if(e.find(".video-js").get(0)){var t=e.find(".video-js").get(0);return"undefined"==typeof videojs?null:(n=videojs(t)||null)||null}if(e.find(".jwplayer").get(0)){var i=e.find(".jwplayer").get(0);return"undefined"==typeof jwplayer?null:(n=jwplayer(i)||null)||null}if(e.find("video").get(0)){var o=e.find("video").get(0);return"undefined"!=typeof videojs&&(n=videojs(o)||null),"undefined"!=typeof jwplayer&&(n=jwplayer(o)||null),n||null}if(e.find("iframe").get(0)){var a=e.find("iframe").get(0);return a?a.contentWindow:null}return n}(n(this));if(e){if("hidden"===document.visibilityState)if(void 0!==e.postMessage)e.postMessage("pauseVideo","*"),e.postMessage("pause","*"),e.postMessage(JSON.stringify({event:"command",func:"pauseVideo",method:"pause"}),"*");else{var t=!1;void 0!==e.videoWidth&&(t=0===e.videoWidth());var i=!1;if(void 0!==e.duration&&(i=0===e.duration()||e.duration()===1/0),!t&&!i){if(void 0!==e.el&&!e.el().classList.contains("vjs-picture-in-picture")){var o=e.ima3||null,a=o?o.adsManager:null,r=o?o.adPlayer:null;a&&r&&(r.paused()||r.pause()),void 0!==e.paused&&(e.paused()||e.pause())}void 0===e.getContainer||e.getContainer().classList.contains("vjs-picture-in-picture")||void 0!==e.getState&&e.getState()&&"idle"!==e.getState().toLowerCase()&&"playing"===e.getState().toLowerCase()&&e.pause()}}if("visible"===document.visibilityState)if(void 0!==e.postMessage)G(n(this))?(e.postMessage("playVideo","*"),e.postMessage("play","*"),e.postMessage(JSON.stringify({event:"command",func:"playVideo",method:"play"}),"*")):(e.postMessage("pauseVideo","*"),e.postMessage("pause","*"),e.postMessage(JSON.stringify({event:"command",func:"pauseVideo",method:"pause"}),"*"));else{var l=!1;if(void 0!==e.videoWidth&&(l=0===e.videoWidth()),!l&&G(n(this))){var d=!1;if(void 0!==e.isFullscreen&&(d=e.isFullscreen()),void 0!==e.getFullscreen&&e.getFullscreen()&&(d=e.getFullscreen()),d)return;var c=e.ima3||null,s=c?c.adsManager:null,u=c?c.adPlayer:null;if(s&&u&&u.paused()&&u.play(),void 0!==e.paused&&e.paused()&&e.hasStarted()){var v=e.play();void 0!==v&&v.then(function(e){}).catch(function(e){})}void 0!==e.getState&&e.getState()&&"idle"!==e.getState().toLowerCase()&&"paused"===e.getState().toLowerCase()&&e.play()}}}})})}(e)}}function G(e){var n=e.offset().top,t=n+e.outerHeight(),i=window.scrollY,o=i+window.innerHeight;return t>i&&n<o}function K(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}t.d(n,"VERSION",function(){return Q}),Voonto.ready.then(function(e){var n=e.lookup(o);if(!n.serviceUrl)throw function(){var e;f&&(e=console).error.apply(e,[y].concat(Array.prototype.slice.call(arguments)))}("service url is not defined within ".concat(o)),Error("[VideoPlayer] service url is not defined within ".concat(o));Voonto.require("jquery").then(function(t){var i,o;i=document,o="visibilitychange",i.addEventListener(o,B),t("#".concat(c)).length||t("body").append('<div id="'.concat(c,'"></div>')),e.when("cmp:ready").then(function(){e.when("consent:iab-1").then(function(){X(n)})}),e.on("voonto:reload",function(i,o){t("[data-voc-video-player]",o).empty(),t("[data-voc-video-player]",o).removeData(),e.when("cmp:ready").then(function(){e.when("consent:iab-1").then(function(){X(n,o)})})}),e.on("videoplayer:refresh",function(t,i){e.when("cmp:ready").then(function(){e.when("consent:iab-1").then(function(){X(n,i)})})})})});var Q=i.version;function X(e,n){j("index.js::_init::Version ".concat(Q)),Voonto.require("jquery").then(function(t){K(t("[data-voc-video-player]",n)).reduce(function(n,i){return n.then(function(){return new Promise(function(n){!function(e,n,t){j("index.js::_initVideoPlayer");var i=e(t),o={};e.extend(o,v,{source:i.data("voc-video-player-source"),accountname:i.data("voc-video-player-accountname"),videoid:i.data("voc-video-player-videoid"),autoplay:i.data("voc-video-player-autoplay"),bumperid:i.data("voc-video-player-bumperid"),controls:i.data("voc-video-player-controls"),domain:i.data("voc-video-player-domain"),loop:i.data("voc-video-player-loop"),modallayer:i.data("voc-video-player-modallayer"),muted:i.data("voc-video-player-muted"),newsid:i.data("voc-video-player-newsid"),playerid:i.data("voc-video-player-playerid"),playlistid:i.data("voc-video-player-playlistid"),playlistvideoid:i.data("voc-video-player-playlistvideoid"),playsinline:i.data("voc-video-player-playsinline"),poster:i.data("voc-video-player-poster"),template:i.data("voc-video-player-template"),src:i.data("voc-video-player-src"),videoad:i.data("voc-video-player-videoad"),params:i.data("voc-video-player-params")});var a=new P(o,n.serviceUrl),r=new g(o,n.serviceUrl);new W({modelMetadata:a,modelPlayer:r,container$:i}).render()}(t,e,i),setTimeout(n,a)})})},Promise.resolve()),K(t("[data-voc-video-poster]",n)).reduce(function(n,i){return n.then(function(){return new Promise(function(n){!function(e,n,t){j("index.js::_initVideoPoster");var i=e(t),o={};e.extend(o,v,{source:i.data("voc-video-poster-source"),accountname:i.data("voc-video-poster-accountname"),videoid:i.data("voc-video-poster-videoid")});var a=new P(o,n.serviceUrl);new H({modelMetadata:a,container$:i}).render()}(t,e,i),setTimeout(n,0)})})},Promise.resolve()),K(t("[data-voc-video-thumbnail]",n)).reduce(function(n,i){return n.then(function(){return new Promise(function(n){!function(e,n,t){j("index.js::_initVideoThumbnail");var i=e(t),o={};e.extend(o,v,{source:i.data("voc-video-thumbnail-source"),accountname:i.data("voc-video-thumbnail-accountname"),videoid:i.data("voc-video-thumbnail-videoid")});var a=new P(o,n.serviceUrl);new J({modelMetadata:a,container$:i}).render()}(t,e,i),setTimeout(n,0)})})},Promise.resolve())})}}]);