function getCurriedBundleDefineShim(mod, define) {
  function shim() {
    var args = [].slice.call(arguments);
    if (typeof args[0] !== 'string') args.unshift(mod); else args[0] = mod;
    define.apply(undefined, args);
  };

  shim.amd = define.amd;
  return shim;
}
(function(define){
null
})(getCurriedBundleDefineShim('utilities/vendor/require-css/0.1.10/js/require-css', define));(function(define){
var JSEncryptExports={};window.JSEncryptExports=JSEncryptExports;(function(exports){var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){if(a!=null)if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&navigator.appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator.appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}}function bnToByteArray(){var i=this.t,r=new Array;r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnSquare(){var r=nbi();this.squareTo(r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}function barrettRevert(x){return x}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array,n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0)y.lShiftTo(g,y);return y}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b)}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x.millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;function Arcfour(){this.i=0;this.j=0;this.S=new Array}function ARC4init(key){var i,j,t;for(i=0;i<256;++i)this.S[i]=i;j=0;for(i=0;i<256;++i){j=j+this.S[i]+key[i%key.length]&255;t=this.S[i];this.S[i]=this.S[j];this.S[j]=t}this.i=0;this.j=0}function ARC4next(){var t;this.i=this.i+1&255;this.j=this.j+this.S[this.i]&255;t=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=t;return this.S[t+this.S[this.i]&255]}Arcfour.prototype.init=ARC4init;Arcfour.prototype.next=ARC4next;function prng_newstate(){return new Arcfour}var rng_psize=256;var rng_state;var rng_pool;var rng_pptr;if(rng_pool==null){rng_pool=new Array;rng_pptr=0;var t;if(window.crypto&&window.crypto.getRandomValues){var z=new Uint32Array(256);window.crypto.getRandomValues(z);for(t=0;t<z.length;++t)rng_pool[rng_pptr++]=z[t]&255}var onMouseMoveListener=function(ev){this.count=this.count||0;if(this.count>=256||rng_pptr>=rng_psize){if(window.removeEventListener)window.removeEventListener("mousemove",onMouseMoveListener,false);else if(window.detachEvent)window.detachEvent("onmousemove",onMouseMoveListener);return}try{var mouseCoordinates=ev.x+ev.y;rng_pool[rng_pptr++]=mouseCoordinates&255;this.count+=1}catch(e){}};if(window.addEventListener)window.addEventListener("mousemove",onMouseMoveListener,false);else if(window.attachEvent)window.attachEvent("onmousemove",onMouseMoveListener)}function rng_get_byte(){if(rng_state==null){rng_state=prng_newstate();while(rng_pptr<rng_psize){var random=Math.floor(65536*Math.random());rng_pool[rng_pptr++]=random&255}rng_state.init(rng_pool);for(rng_pptr=0;rng_pptr<rng_pool.length;++rng_pptr)rng_pool[rng_pptr]=0;rng_pptr=0}return rng_state.next()}function rng_get_bytes(ba){var i;for(i=0;i<ba.length;++i)ba[i]=rng_get_byte()}function SecureRandom(){}SecureRandom.prototype.nextBytes=rng_get_bytes;function parseBigInt(str,r){return new BigInteger(str,r)}function linebrk(s,n){var ret="";var i=0;while(i+n<s.length){ret+=s.substring(i,i+n)+"\n";i+=n}return ret+s.substring(i,s.length)}function byte2Hex(b){if(b<16)return"0"+b.toString(16);else return b.toString(16)}function pkcs1pad2(s,n){if(n<s.length+11){return null}var ba=new Array;var i=s.length-1;while(i>=0&&n>0){var c=s.charCodeAt(i--);if(c<128){ba[--n]=c}else if(c>127&&c<2048){ba[--n]=c&63|128;ba[--n]=c>>6|192}else{ba[--n]=c&63|128;ba[--n]=c>>6&63|128;ba[--n]=c>>12|224}}ba[--n]=0;var rng=new SecureRandom;var x=new Array;while(n>2){x[0]=0;while(x[0]==0)rng.nextBytes(x);ba[--n]=x[0]}ba[--n]=2;ba[--n]=0;return new BigInteger(ba)}function RSAKey(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null}function RSASetPublic(N,E){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16)}else{}}function RSADoPublic(x){return x.modPowInt(this.e,this.n)}function RSAEncrypt(text){var m=pkcs1pad2(text,this.n.bitLength()+7>>3);if(m==null)return null;var c=this.doPublic(m);if(c==null)return null;var h=c.toString(16);if((h.length&1)==0)return h;else return"0"+h}RSAKey.prototype.doPublic=RSADoPublic;RSAKey.prototype.setPublic=RSASetPublic;RSAKey.prototype.encrypt=RSAEncrypt;function pkcs1unpad2(d,n){var b=d.toByteArray();var i=0;while(i<b.length&&b[i]==0)++i;if(b.length-i!=n-1||b[i]!=2)return null;++i;while(b[i]!=0)if(++i>=b.length)return null;var ret="";while(++i<b.length){var c=b[i]&255;if(c<128){ret+=String.fromCharCode(c)}else if(c>191&&c<224){ret+=String.fromCharCode((c&31)<<6|b[i+1]&63);++i}else{ret+=String.fromCharCode((c&15)<<12|(b[i+1]&63)<<6|b[i+2]&63);i+=2}}return ret}function RSASetPrivate(N,E,D){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16);this.d=parseBigInt(D,16)}else{}}function RSASetPrivateEx(N,E,D,P,Q,DP,DQ,C){if(N!=null&&E!=null&&N.length>0&&E.length>0){this.n=parseBigInt(N,16);this.e=parseInt(E,16);this.d=parseBigInt(D,16);this.p=parseBigInt(P,16);this.q=parseBigInt(Q,16);this.dmp1=parseBigInt(DP,16);this.dmq1=parseBigInt(DQ,16);this.coeff=parseBigInt(C,16)}else{}}function RSAGenerate(B,E){var rng=new SecureRandom;var qs=B>>1;this.e=parseInt(E,16);var ee=new BigInteger(E,16);for(;;){for(;;){this.p=new BigInteger(B-qs,1,rng);if(this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE)==0&&this.p.isProbablePrime(10))break}for(;;){this.q=new BigInteger(qs,1,rng);if(this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE)==0&&this.q.isProbablePrime(10))break}if(this.p.compareTo(this.q)<=0){var t=this.p;this.p=this.q;this.q=t}var p1=this.p.subtract(BigInteger.ONE);var q1=this.q.subtract(BigInteger.ONE);var phi=p1.multiply(q1);if(phi.gcd(ee).compareTo(BigInteger.ONE)==0){this.n=this.p.multiply(this.q);this.d=ee.modInverse(phi);this.dmp1=this.d.mod(p1);this.dmq1=this.d.mod(q1);this.coeff=this.q.modInverse(this.p);break}}}function RSADoPrivate(x){if(this.p==null||this.q==null)return x.modPow(this.d,this.n);var xp=x.mod(this.p).modPow(this.dmp1,this.p);var xq=x.mod(this.q).modPow(this.dmq1,this.q);while(xp.compareTo(xq)<0)xp=xp.add(this.p);return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq)}function RSADecrypt(ctext){var c=parseBigInt(ctext,16);var m=this.doPrivate(c);if(m==null)return null;return pkcs1unpad2(m,this.n.bitLength()+7>>3)}RSAKey.prototype.doPrivate=RSADoPrivate;RSAKey.prototype.setPrivate=RSASetPrivate;RSAKey.prototype.setPrivateEx=RSASetPrivateEx;RSAKey.prototype.generate=RSAGenerate;RSAKey.prototype.decrypt=RSADecrypt;(function(){var RSAGenerateAsync=function(B,E,callback){var rng=new SecureRandom;var qs=B>>1;this.e=parseInt(E,16);var ee=new BigInteger(E,16);var rsa=this;var loop1=function(){var loop4=function(){if(rsa.p.compareTo(rsa.q)<=0){var t=rsa.p;rsa.p=rsa.q;rsa.q=t}var p1=rsa.p.subtract(BigInteger.ONE);var q1=rsa.q.subtract(BigInteger.ONE);var phi=p1.multiply(q1);if(phi.gcd(ee).compareTo(BigInteger.ONE)==0){rsa.n=rsa.p.multiply(rsa.q);rsa.d=ee.modInverse(phi);rsa.dmp1=rsa.d.mod(p1);rsa.dmq1=rsa.d.mod(q1);rsa.coeff=rsa.q.modInverse(rsa.p);setTimeout(function(){callback()},0)}else{setTimeout(loop1,0)}};var loop3=function(){rsa.q=nbi();rsa.q.fromNumberAsync(qs,1,rng,function(){rsa.q.subtract(BigInteger.ONE).gcda(ee,function(r){if(r.compareTo(BigInteger.ONE)==0&&rsa.q.isProbablePrime(10)){setTimeout(loop4,0)}else{setTimeout(loop3,0)}})})};var loop2=function(){rsa.p=nbi();rsa.p.fromNumberAsync(B-qs,1,rng,function(){rsa.p.subtract(BigInteger.ONE).gcda(ee,function(r){if(r.compareTo(BigInteger.ONE)==0&&rsa.p.isProbablePrime(10)){setTimeout(loop3,0)}else{setTimeout(loop2,0)}})})};setTimeout(loop2,0)};setTimeout(loop1,0)};RSAKey.prototype.generateAsync=RSAGenerateAsync;var bnGCDAsync=function(a,callback){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0){callback(x);return}if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}var gcda1=function(){if((i=x.getLowestSetBit())>0){x.rShiftTo(i,x)}if((i=y.getLowestSetBit())>0){y.rShiftTo(i,y)}if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}if(!(x.signum()>0)){if(g>0)y.lShiftTo(g,y);setTimeout(function(){callback(y)},0)}else{setTimeout(gcda1,0)}};setTimeout(gcda1,10)};BigInteger.prototype.gcda=bnGCDAsync;var bnpFromNumberAsync=function(a,b,c,callback){if("number"==typeof b){if(a<2){this.fromInt(1)}else{this.fromNumber(a,c);if(!this.testBit(a-1)){this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this)}if(this.isEven()){this.dAddOffset(1,0)}var bnp=this;var bnpfn1=function(){bnp.dAddOffset(2,0);if(bnp.bitLength()>a)bnp.subTo(BigInteger.ONE.shiftLeft(a-1),bnp);if(bnp.isProbablePrime(b)){setTimeout(function(){callback()},0)}else{setTimeout(bnpfn1,0)}};setTimeout(bnpfn1,0)}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}};BigInteger.prototype.fromNumberAsync=bnpFromNumberAsync})();var b64map="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b64pad="=";function hex2b64(h){var i;var c;var ret="";for(i=0;i+3<=h.length;i+=3){c=parseInt(h.substring(i,i+3),16);ret+=b64map.charAt(c>>6)+b64map.charAt(c&63)}if(i+1==h.length){c=parseInt(h.substring(i,i+1),16);ret+=b64map.charAt(c<<2)}else if(i+2==h.length){c=parseInt(h.substring(i,i+2),16);ret+=b64map.charAt(c>>2)+b64map.charAt((c&3)<<4)}while((ret.length&3)>0)ret+=b64pad;return ret}function b64tohex(s){var ret="";var i;var k=0;var slop;for(i=0;i<s.length;++i){if(s.charAt(i)==b64pad)break;v=b64map.indexOf(s.charAt(i));if(v<0)continue;if(k==0){ret+=int2char(v>>2);slop=v&3;k=1}else if(k==1){ret+=int2char(slop<<2|v>>4);slop=v&15;k=2}else if(k==2){ret+=int2char(slop);ret+=int2char(v>>2);slop=v&3;k=3}else{ret+=int2char(slop<<2|v>>4);ret+=int2char(v&15);k=0}}if(k==1)ret+=int2char(slop<<2);return ret}function b64toBA(s){var h=b64tohex(s);var i;var a=new Array;for(i=0;2*i<h.length;++i){a[i]=parseInt(h.substring(2*i,2*i+2),16)}return a}var JSX=JSX||{};JSX.env=JSX.env||{};var L=JSX,OP=Object.prototype,FUNCTION_TOSTRING="[object Function]",ADD=["toString","valueOf"];JSX.env.parseUA=function(agent){var numberify=function(s){var c=0;return parseFloat(s.replace(/\./g,function(){return c++==1?"":"."}))},nav=navigator,o={ie:0,opera:0,gecko:0,webkit:0,chrome:0,mobile:null,air:0,ipad:0,iphone:0,ipod:0,ios:null,android:0,webos:0,caja:nav&&nav.cajaVersion,secure:false,os:null},ua=agent||navigator&&navigator.userAgent,loc=window&&window.location,href=loc&&loc.href,m;o.secure=href&&href.toLowerCase().indexOf("https")===0;if(ua){if(/windows|win32/i.test(ua)){o.os="windows"}else if(/macintosh/i.test(ua)){o.os="macintosh"}else if(/rhino/i.test(ua)){o.os="rhino"}if(/KHTML/.test(ua)){o.webkit=1}m=ua.match(/AppleWebKit\/([^\s]*)/);if(m&&m[1]){o.webkit=numberify(m[1]);if(/ Mobile\//.test(ua)){o.mobile="Apple";m=ua.match(/OS ([^\s]*)/);if(m&&m[1]){m=numberify(m[1].replace("_","."))}o.ios=m;o.ipad=o.ipod=o.iphone=0;m=ua.match(/iPad|iPod|iPhone/);if(m&&m[0]){o[m[0].toLowerCase()]=o.ios}}else{m=ua.match(/NokiaN[^\/]*|Android \d\.\d|webOS\/\d\.\d/);if(m){o.mobile=m[0]}if(/webOS/.test(ua)){o.mobile="WebOS";m=ua.match(/webOS\/([^\s]*);/);if(m&&m[1]){o.webos=numberify(m[1])}}if(/ Android/.test(ua)){o.mobile="Android";m=ua.match(/Android ([^\s]*);/);if(m&&m[1]){o.android=numberify(m[1])}}}m=ua.match(/Chrome\/([^\s]*)/);if(m&&m[1]){o.chrome=numberify(m[1])}else{m=ua.match(/AdobeAIR\/([^\s]*)/);if(m){o.air=m[0]}}}if(!o.webkit){m=ua.match(/Opera[\s\/]([^\s]*)/);if(m&&m[1]){o.opera=numberify(m[1]);m=ua.match(/Version\/([^\s]*)/);if(m&&m[1]){o.opera=numberify(m[1])}m=ua.match(/Opera Mini[^;]*/);if(m){o.mobile=m[0]}}else{m=ua.match(/MSIE\s([^;]*)/);if(m&&m[1]){o.ie=numberify(m[1])}else{m=ua.match(/Gecko\/([^\s]*)/);if(m){o.gecko=1;m=ua.match(/rv:([^\s\)]*)/);if(m&&m[1]){o.gecko=numberify(m[1])}}}}}}return o};JSX.env.ua=JSX.env.parseUA();JSX.isFunction=function(o){return typeof o==="function"||OP.toString.apply(o)===FUNCTION_TOSTRING};JSX._IEEnumFix=JSX.env.ua.ie?function(r,s){var i,fname,f;for(i=0;i<ADD.length;i=i+1){fname=ADD[i];f=s[fname];if(L.isFunction(f)&&f!=OP[fname]){r[fname]=f}}}:function(){};JSX.extend=function(subc,superc,overrides){if(!superc||!subc){throw new Error("extend failed, please check that "+"all dependencies are included.")}var F=function(){},i;F.prototype=superc.prototype;subc.prototype=new F;subc.prototype.constructor=subc;subc.superclass=superc.prototype;if(superc.prototype.constructor==OP.constructor){superc.prototype.constructor=superc}if(overrides){for(i in overrides){if(L.hasOwnProperty(overrides,i)){subc.prototype[i]=overrides[i]}}L._IEEnumFix(subc.prototype,overrides)}};if(typeof KJUR=="undefined"||!KJUR)KJUR={};if(typeof KJUR.asn1=="undefined"||!KJUR.asn1)KJUR.asn1={};KJUR.asn1.ASN1Util=new function(){this.integerToByteHex=function(i){var h=i.toString(16);if(h.length%2==1)h="0"+h;return h};this.bigIntToMinTwosComplementsHex=function(bigIntegerValue){var h=bigIntegerValue.toString(16);if(h.substr(0,1)!="-"){if(h.length%2==1){h="0"+h}else{if(!h.match(/^[0-7]/)){h="00"+h}}}else{var hPos=h.substr(1);var xorLen=hPos.length;if(xorLen%2==1){xorLen+=1}else{if(!h.match(/^[0-7]/)){xorLen+=2}}var hMask="";for(var i=0;i<xorLen;i++){hMask+="f"}var biMask=new BigInteger(hMask,16);var biNeg=biMask.xor(bigIntegerValue).add(BigInteger.ONE);h=biNeg.toString(16).replace(/^-/,"")}return h};this.getPEMStringFromHex=function(dataHex,pemHeader){var dataWA=CryptoJS.enc.Hex.parse(dataHex);var dataB64=CryptoJS.enc.Base64.stringify(dataWA);var pemBody=dataB64.replace(/(.{64})/g,"$1\r\n");pemBody=pemBody.replace(/\r\n$/,"");return"-----BEGIN "+pemHeader+"-----\r\n"+pemBody+"\r\n-----END "+pemHeader+"-----\r\n"}};KJUR.asn1.ASN1Object=function(){var isModified=true;var hTLV=null;var hT="00";var hL="00";var hV="";this.getLengthHexFromValue=function(){if(typeof this.hV=="undefined"||this.hV==null){throw"this.hV is null or undefined."}if(this.hV.length%2==1){throw"value hex must be even length: n="+hV.length+",v="+this.hV}var n=this.hV.length/2;var hN=n.toString(16);if(hN.length%2==1){hN="0"+hN}if(n<128){return hN}else{var hNlen=hN.length/2;if(hNlen>15){throw"ASN.1 length too long to represent by 8x: n = "+n.toString(16)}var head=128+hNlen;return head.toString(16)+hN}};this.getEncodedHex=function(){if(this.hTLV==null||this.isModified){this.hV=this.getFreshValueHex();this.hL=this.getLengthHexFromValue();this.hTLV=this.hT+this.hL+this.hV;this.isModified=false}return this.hTLV};this.getValueHex=function(){this.getEncodedHex();return this.hV};this.getFreshValueHex=function(){return""}};KJUR.asn1.DERAbstractString=function(params){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var s=null;var hV=null;this.getString=function(){return this.s};this.setString=function(newS){this.hTLV=null;this.isModified=true;this.s=newS;this.hV=stohex(this.s)};this.setStringHex=function(newHexString){this.hTLV=null;this.isModified=true;this.s=null;this.hV=newHexString};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params["str"]!="undefined"){this.setString(params["str"])}else if(typeof params["hex"]!="undefined"){this.setStringHex(params["hex"])}}};JSX.extend(KJUR.asn1.DERAbstractString,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractTime=function(params){KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);var s=null;var date=null;this.localDateToUTC=function(d){utc=d.getTime()+d.getTimezoneOffset()*60000;var utcDate=new Date(utc);return utcDate};this.formatDate=function(dateObject,type){var pad=this.zeroPadding;var d=this.localDateToUTC(dateObject);var year=String(d.getFullYear());if(type=="utc")year=year.substr(2,2);var month=pad(String(d.getMonth()+1),2);var day=pad(String(d.getDate()),2);var hour=pad(String(d.getHours()),2);var min=pad(String(d.getMinutes()),2);var sec=pad(String(d.getSeconds()),2);return year+month+day+hour+min+sec+"Z"};this.zeroPadding=function(s,len){if(s.length>=len)return s;return new Array(len-s.length+1).join("0")+s};this.getString=function(){return this.s};this.setString=function(newS){this.hTLV=null;this.isModified=true;this.s=newS;this.hV=stohex(this.s)};this.setByDateValue=function(year,month,day,hour,min,sec){var dateObject=new Date(Date.UTC(year,month-1,day,hour,min,sec,0));this.setByDate(dateObject)};this.getFreshValueHex=function(){return this.hV}};JSX.extend(KJUR.asn1.DERAbstractTime,KJUR.asn1.ASN1Object);KJUR.asn1.DERAbstractStructured=function(params){KJUR.asn1.DERAbstractString.superclass.constructor.call(this);var asn1Array=null;this.setByASN1ObjectArray=function(asn1ObjectArray){this.hTLV=null;this.isModified=true;this.asn1Array=asn1ObjectArray};this.appendASN1Object=function(asn1Object){this.hTLV=null;this.isModified=true;this.asn1Array.push(asn1Object)};this.asn1Array=new Array;if(typeof params!="undefined"){if(typeof params["array"]!="undefined"){this.asn1Array=params["array"]}}};JSX.extend(KJUR.asn1.DERAbstractStructured,KJUR.asn1.ASN1Object);KJUR.asn1.DERBoolean=function(){KJUR.asn1.DERBoolean.superclass.constructor.call(this);this.hT="01";this.hTLV="0101ff"};JSX.extend(KJUR.asn1.DERBoolean,KJUR.asn1.ASN1Object);KJUR.asn1.DERInteger=function(params){KJUR.asn1.DERInteger.superclass.constructor.call(this);this.hT="02";this.setByBigInteger=function(bigIntegerValue){this.hTLV=null;this.isModified=true;this.hV=KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue)};this.setByInteger=function(intValue){var bi=new BigInteger(String(intValue),10);this.setByBigInteger(bi)};this.setValueHex=function(newHexString){this.hV=newHexString};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params["bigint"]!="undefined"){this.setByBigInteger(params["bigint"])}else if(typeof params["int"]!="undefined"){this.setByInteger(params["int"])}else if(typeof params["hex"]!="undefined"){this.setValueHex(params["hex"])}}};JSX.extend(KJUR.asn1.DERInteger,KJUR.asn1.ASN1Object);KJUR.asn1.DERBitString=function(params){KJUR.asn1.DERBitString.superclass.constructor.call(this);this.hT="03";this.setHexValueIncludingUnusedBits=function(newHexStringIncludingUnusedBits){this.hTLV=null;this.isModified=true;this.hV=newHexStringIncludingUnusedBits};this.setUnusedBitsAndHexValue=function(unusedBits,hValue){if(unusedBits<0||7<unusedBits){throw"unused bits shall be from 0 to 7: u = "+unusedBits}var hUnusedBits="0"+unusedBits;this.hTLV=null;this.isModified=true;this.hV=hUnusedBits+hValue};this.setByBinaryString=function(binaryString){binaryString=binaryString.replace(/0+$/,"");var unusedBits=8-binaryString.length%8;if(unusedBits==8)unusedBits=0;for(var i=0;i<=unusedBits;i++){binaryString+="0"}var h="";for(var i=0;i<binaryString.length-1;i+=8){var b=binaryString.substr(i,8);var x=parseInt(b,2).toString(16);if(x.length==1)x="0"+x;h+=x}this.hTLV=null;this.isModified=true;this.hV="0"+unusedBits+h};this.setByBooleanArray=function(booleanArray){var s="";for(var i=0;i<booleanArray.length;i++){if(booleanArray[i]==true){s+="1"}else{s+="0"}}this.setByBinaryString(s)};this.newFalseArray=function(nLength){var a=new Array(nLength);for(var i=0;i<nLength;i++){a[i]=false}return a};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params["hex"]!="undefined"){this.setHexValueIncludingUnusedBits(params["hex"])}else if(typeof params["bin"]!="undefined"){this.setByBinaryString(params["bin"])}else if(typeof params["array"]!="undefined"){this.setByBooleanArray(params["array"])}}};JSX.extend(KJUR.asn1.DERBitString,KJUR.asn1.ASN1Object);KJUR.asn1.DEROctetString=function(params){KJUR.asn1.DEROctetString.superclass.constructor.call(this,params);this.hT="04"};JSX.extend(KJUR.asn1.DEROctetString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNull=function(){KJUR.asn1.DERNull.superclass.constructor.call(this);this.hT="05";this.hTLV="0500"};JSX.extend(KJUR.asn1.DERNull,KJUR.asn1.ASN1Object);KJUR.asn1.DERObjectIdentifier=function(params){var itox=function(i){var h=i.toString(16);if(h.length==1)h="0"+h;return h};var roidtox=function(roid){var h="";var bi=new BigInteger(roid,10);var b=bi.toString(2);var padLen=7-b.length%7;if(padLen==7)padLen=0;var bPad="";for(var i=0;i<padLen;i++)bPad+="0";b=bPad+b;for(var i=0;i<b.length-1;i+=7){var b8=b.substr(i,7);if(i!=b.length-7)b8="1"+b8;h+=itox(parseInt(b8,2))}return h};KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);this.hT="06";this.setValueHex=function(newHexString){this.hTLV=null;this.isModified=true;this.s=null;this.hV=newHexString};this.setValueOidString=function(oidString){if(!oidString.match(/^[0-9.]+$/)){throw"malformed oid string: "+oidString}var h="";var a=oidString.split(".");var i0=parseInt(a[0])*40+parseInt(a[1]);h+=itox(i0);a.splice(0,2);for(var i=0;i<a.length;i++){h+=roidtox(a[i])}this.hTLV=null;this.isModified=true;this.s=null;this.hV=h};this.setValueName=function(oidName){if(typeof KJUR.asn1.x509.OID.name2oidList[oidName]!="undefined"){var oid=KJUR.asn1.x509.OID.name2oidList[oidName];this.setValueOidString(oid)}else{throw"DERObjectIdentifier oidName undefined: "+oidName}};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params["oid"]!="undefined"){this.setValueOidString(params["oid"])}else if(typeof params["hex"]!="undefined"){this.setValueHex(params["hex"])}else if(typeof params["name"]!="undefined"){this.setValueName(params["name"])}}};JSX.extend(KJUR.asn1.DERObjectIdentifier,KJUR.asn1.ASN1Object);KJUR.asn1.DERUTF8String=function(params){KJUR.asn1.DERUTF8String.superclass.constructor.call(this,params);this.hT="0c"};JSX.extend(KJUR.asn1.DERUTF8String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERNumericString=function(params){KJUR.asn1.DERNumericString.superclass.constructor.call(this,params);this.hT="12"};JSX.extend(KJUR.asn1.DERNumericString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERPrintableString=function(params){KJUR.asn1.DERPrintableString.superclass.constructor.call(this,params);this.hT="13"};JSX.extend(KJUR.asn1.DERPrintableString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERTeletexString=function(params){KJUR.asn1.DERTeletexString.superclass.constructor.call(this,params);this.hT="14"};JSX.extend(KJUR.asn1.DERTeletexString,KJUR.asn1.DERAbstractString);KJUR.asn1.DERIA5String=function(params){KJUR.asn1.DERIA5String.superclass.constructor.call(this,params);this.hT="16"};JSX.extend(KJUR.asn1.DERIA5String,KJUR.asn1.DERAbstractString);KJUR.asn1.DERUTCTime=function(params){KJUR.asn1.DERUTCTime.superclass.constructor.call(this,params);this.hT="17";this.setByDate=function(dateObject){this.hTLV=null;this.isModified=true;this.date=dateObject;this.s=this.formatDate(this.date,"utc");this.hV=stohex(this.s)};if(typeof params!="undefined"){if(typeof params["str"]!="undefined"){this.setString(params["str"])}else if(typeof params["hex"]!="undefined"){this.setStringHex(params["hex"])}else if(typeof params["date"]!="undefined"){this.setByDate(params["date"])}}};JSX.extend(KJUR.asn1.DERUTCTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERGeneralizedTime=function(params){KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this,params);this.hT="18";this.setByDate=function(dateObject){this.hTLV=null;this.isModified=true;this.date=dateObject;this.s=this.formatDate(this.date,"gen");this.hV=stohex(this.s)};if(typeof params!="undefined"){if(typeof params["str"]!="undefined"){this.setString(params["str"])}else if(typeof params["hex"]!="undefined"){this.setStringHex(params["hex"])}else if(typeof params["date"]!="undefined"){this.setByDate(params["date"])}}};JSX.extend(KJUR.asn1.DERGeneralizedTime,KJUR.asn1.DERAbstractTime);KJUR.asn1.DERSequence=function(params){KJUR.asn1.DERSequence.superclass.constructor.call(this,params);this.hT="30";this.getFreshValueHex=function(){var h="";for(var i=0;i<this.asn1Array.length;i++){var asn1Obj=this.asn1Array[i];h+=asn1Obj.getEncodedHex()}this.hV=h;return this.hV}};JSX.extend(KJUR.asn1.DERSequence,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERSet=function(params){KJUR.asn1.DERSet.superclass.constructor.call(this,params);this.hT="31";this.getFreshValueHex=function(){var a=new Array;for(var i=0;i<this.asn1Array.length;i++){var asn1Obj=this.asn1Array[i];a.push(asn1Obj.getEncodedHex())}a.sort();this.hV=a.join("");return this.hV}};JSX.extend(KJUR.asn1.DERSet,KJUR.asn1.DERAbstractStructured);KJUR.asn1.DERTaggedObject=function(params){KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);this.hT="a0";this.hV="";this.isExplicit=true;this.asn1Object=null;this.setASN1Object=function(isExplicitFlag,tagNoHex,asn1Object){this.hT=tagNoHex;this.isExplicit=isExplicitFlag;this.asn1Object=asn1Object;if(this.isExplicit){this.hV=this.asn1Object.getEncodedHex();this.hTLV=null;this.isModified=true}else{this.hV=null;this.hTLV=asn1Object.getEncodedHex();this.hTLV=this.hTLV.replace(/^../,tagNoHex);this.isModified=false}};this.getFreshValueHex=function(){return this.hV};if(typeof params!="undefined"){if(typeof params["tag"]!="undefined"){this.hT=params["tag"]}if(typeof params["explicit"]!="undefined"){this.isExplicit=params["explicit"]}if(typeof params["obj"]!="undefined"){this.asn1Object=params["obj"];this.setASN1Object(this.isExplicit,this.hT,this.asn1Object)}}};JSX.extend(KJUR.asn1.DERTaggedObject,KJUR.asn1.ASN1Object);(function(undefined){"use strict";var Hex={},decoder;Hex.decode=function(a){var i;if(decoder===undefined){var hex="0123456789ABCDEF",ignore=" \f\n\r\t\xA0\u2028\u2029";decoder=[];for(i=0;i<16;++i)decoder[hex.charAt(i)]=i;hex=hex.toLowerCase();for(i=10;i<16;++i)decoder[hex.charAt(i)]=i;for(i=0;i<ignore.length;++i)decoder[ignore.charAt(i)]=-1}var out=[],bits=0,char_count=0;for(i=0;i<a.length;++i){var c=a.charAt(i);if(c=="=")break;c=decoder[c];if(c==-1)continue;if(c===undefined)throw"Illegal character at offset "+i;bits|=c;if(++char_count>=2){out[out.length]=bits;bits=0;char_count=0}else{bits<<=4}}if(char_count)throw"Hex encoding incomplete: 4 bits missing";return out};window.Hex=Hex})();(function(undefined){"use strict";var Base64={},decoder;Base64.decode=function(a){var i;if(decoder===undefined){var b64="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ignore="= \f\n\r\t\xA0\u2028\u2029";decoder=[];for(i=0;i<64;++i)decoder[b64.charAt(i)]=i;for(i=0;i<ignore.length;++i)decoder[ignore.charAt(i)]=-1}var out=[];var bits=0,char_count=0;for(i=0;i<a.length;++i){var c=a.charAt(i);if(c=="=")break;c=decoder[c];if(c==-1)continue;if(c===undefined)throw"Illegal character at offset "+i;bits|=c;if(++char_count>=4){out[out.length]=bits>>16;out[out.length]=bits>>8&255;out[out.length]=bits&255;bits=0;char_count=0}else{bits<<=6}}switch(char_count){case 1:throw"Base64 encoding incomplete: at least 2 bits missing";case 2:out[out.length]=bits>>10;break;case 3:out[out.length]=bits>>16;out[out.length]=bits>>8&255;break;}return out};Base64.re=/-----BEGIN [^-]+-----([A-Za-z0-9+\/=\s]+)-----END [^-]+-----|begin-base64[^\n]+\n([A-Za-z0-9+\/=\s]+)====/;Base64.unarmor=function(a){var m=Base64.re.exec(a);if(m){if(m[1])a=m[1];else if(m[2])a=m[2];else throw"RegExp out of sync"}return Base64.decode(a)};window.Base64=Base64})();(function(undefined){"use strict";var hardLimit=100,ellipsis="\u2026",DOM={tag:function(tagName,className){var t=document.createElement(tagName);t.className=className;return t},text:function(str){return document.createTextNode(str)}};function Stream(enc,pos){if(enc instanceof Stream){this.enc=enc.enc;this.pos=enc.pos}else{this.enc=enc;this.pos=pos}}Stream.prototype.get=function(pos){if(pos===undefined)pos=this.pos++;if(pos>=this.enc.length)throw"Requesting byte offset "+pos+" on a stream of length "+this.enc.length;return this.enc[pos]};Stream.prototype.hexDigits="0123456789ABCDEF";Stream.prototype.hexByte=function(b){return this.hexDigits.charAt(b>>4&15)+this.hexDigits.charAt(b&15)};Stream.prototype.hexDump=function(start,end,raw){var s="";for(var i=start;i<end;++i){s+=this.hexByte(this.get(i));if(raw!==true)switch(i&15){case 7:s+="  ";break;case 15:s+="\n";break;default:s+=" ";}}return s};Stream.prototype.parseStringISO=function(start,end){var s="";for(var i=start;i<end;++i)s+=String.fromCharCode(this.get(i));return s};Stream.prototype.parseStringUTF=function(start,end){var s="";for(var i=start;i<end;){var c=this.get(i++);if(c<128)s+=String.fromCharCode(c);else if(c>191&&c<224)s+=String.fromCharCode((c&31)<<6|this.get(i++)&63);else s+=String.fromCharCode((c&15)<<12|(this.get(i++)&63)<<6|this.get(i++)&63)}return s};Stream.prototype.parseStringBMP=function(start,end){var str="";for(var i=start;i<end;i+=2){var high_byte=this.get(i);var low_byte=this.get(i+1);str+=String.fromCharCode((high_byte<<8)+low_byte)}return str};Stream.prototype.reTime=/^((?:1[89]|2\d)?\d\d)(0[1-9]|1[0-2])(0[1-9]|[12]\d|3[01])([01]\d|2[0-3])(?:([0-5]\d)(?:([0-5]\d)(?:[.,](\d{1,3}))?)?)?(Z|[-+](?:[0]\d|1[0-2])([0-5]\d)?)?$/;Stream.prototype.parseTime=function(start,end){var s=this.parseStringISO(start,end),m=this.reTime.exec(s);if(!m)return"Unrecognized time: "+s;s=m[1]+"-"+m[2]+"-"+m[3]+" "+m[4];if(m[5]){s+=":"+m[5];if(m[6]){s+=":"+m[6];if(m[7])s+="."+m[7]}}if(m[8]){s+=" UTC";if(m[8]!="Z"){s+=m[8];if(m[9])s+=":"+m[9]}}return s};Stream.prototype.parseInteger=function(start,end){var len=end-start;if(len>4){len<<=3;var s=this.get(start);if(s===0)len-=8;else while(s<128){s<<=1;--len}return"("+len+" bit)"}var n=0;for(var i=start;i<end;++i)n=n<<8|this.get(i);return n};Stream.prototype.parseBitString=function(start,end){var unusedBit=this.get(start),lenBit=(end-start-1<<3)-unusedBit,s="("+lenBit+" bit)";if(lenBit<=20){var skip=unusedBit;s+=" ";for(var i=end-1;i>start;--i){var b=this.get(i);for(var j=skip;j<8;++j)s+=b>>j&1?"1":"0";skip=0}}return s};Stream.prototype.parseOctetString=function(start,end){var len=end-start,s="("+len+" byte) ";if(len>hardLimit)end=start+hardLimit;for(var i=start;i<end;++i)s+=this.hexByte(this.get(i));if(len>hardLimit)s+=ellipsis;return s};Stream.prototype.parseOID=function(start,end){var s="",n=0,bits=0;for(var i=start;i<end;++i){var v=this.get(i);n=n<<7|v&127;bits+=7;if(!(v&128)){if(s===""){var m=n<80?n<40?0:1:2;s=m+"."+(n-m*40)}else s+="."+(bits>=31?"bigint":n);n=bits=0}}return s};function ASN1(stream,header,length,tag,sub){this.stream=stream;this.header=header;this.length=length;this.tag=tag;this.sub=sub}ASN1.prototype.typeName=function(){if(this.tag===undefined)return"unknown";var tagClass=this.tag>>6,tagConstructed=this.tag>>5&1,tagNumber=this.tag&31;switch(tagClass){case 0:switch(tagNumber){case 0:return"EOC";case 1:return"BOOLEAN";case 2:return"INTEGER";case 3:return"BIT_STRING";case 4:return"OCTET_STRING";case 5:return"NULL";case 6:return"OBJECT_IDENTIFIER";case 7:return"ObjectDescriptor";case 8:return"EXTERNAL";case 9:return"REAL";case 10:return"ENUMERATED";case 11:return"EMBEDDED_PDV";case 12:return"UTF8String";case 16:return"SEQUENCE";case 17:return"SET";case 18:return"NumericString";case 19:return"PrintableString";case 20:return"TeletexString";case 21:return"VideotexString";case 22:return"IA5String";case 23:return"UTCTime";case 24:return"GeneralizedTime";case 25:return"GraphicString";case 26:return"VisibleString";case 27:return"GeneralString";case 28:return"UniversalString";case 30:return"BMPString";default:return"Universal_"+tagNumber.toString(16);}case 1:return"Application_"+tagNumber.toString(16);case 2:return"["+tagNumber+"]";case 3:return"Private_"+tagNumber.toString(16);}};ASN1.prototype.reSeemsASCII=/^[ -~]+$/;ASN1.prototype.content=function(){if(this.tag===undefined)return null;var tagClass=this.tag>>6,tagNumber=this.tag&31,content=this.posContent(),len=Math.abs(this.length);if(tagClass!==0){if(this.sub!==null)return"("+this.sub.length+" elem)";var s=this.stream.parseStringISO(content,content+Math.min(len,hardLimit));if(this.reSeemsASCII.test(s))return s.substring(0,2*hardLimit)+(s.length>2*hardLimit?ellipsis:"");else return this.stream.parseOctetString(content,content+len)}switch(tagNumber){case 1:return this.stream.get(content)===0?"false":"true";case 2:return this.stream.parseInteger(content,content+len);case 3:return this.sub?"("+this.sub.length+" elem)":this.stream.parseBitString(content,content+len);case 4:return this.sub?"("+this.sub.length+" elem)":this.stream.parseOctetString(content,content+len);case 6:return this.stream.parseOID(content,content+len);case 16:case 17:return"("+this.sub.length+" elem)";case 12:return this.stream.parseStringUTF(content,content+len);case 18:case 19:case 20:case 21:case 22:case 26:return this.stream.parseStringISO(content,content+len);case 30:return this.stream.parseStringBMP(content,content+len);case 23:case 24:return this.stream.parseTime(content,content+len);}return null};ASN1.prototype.toString=function(){return this.typeName()+"@"+this.stream.pos+"[header:"+this.header+",length:"+this.length+",sub:"+(this.sub===null?"null":this.sub.length)+"]"};ASN1.prototype.print=function(indent){if(indent===undefined)indent="";document.writeln(indent+this);if(this.sub!==null){indent+="  ";for(var i=0,max=this.sub.length;i<max;++i)this.sub[i].print(indent)}};ASN1.prototype.toPrettyString=function(indent){if(indent===undefined)indent="";var s=indent+this.typeName()+" @"+this.stream.pos;if(this.length>=0)s+="+";s+=this.length;if(this.tag&32)s+=" (constructed)";else if((this.tag==3||this.tag==4)&&this.sub!==null)s+=" (encapsulates)";s+="\n";if(this.sub!==null){indent+="  ";for(var i=0,max=this.sub.length;i<max;++i)s+=this.sub[i].toPrettyString(indent)}return s};ASN1.prototype.toDOM=function(){var node=DOM.tag("div","node");node.asn1=this;var head=DOM.tag("div","head");var s=this.typeName().replace(/_/g," ");head.innerHTML=s;var content=this.content();if(content!==null){content=String(content).replace(/</g,"&lt;");var preview=DOM.tag("span","preview");preview.appendChild(DOM.text(content));head.appendChild(preview)}node.appendChild(head);this.node=node;this.head=head;var value=DOM.tag("div","value");s="Offset: "+this.stream.pos+"<br/>";s+="Length: "+this.header+"+";if(this.length>=0)s+=this.length;else s+=-this.length+" (undefined)";if(this.tag&32)s+="<br/>(constructed)";else if((this.tag==3||this.tag==4)&&this.sub!==null)s+="<br/>(encapsulates)";if(content!==null){s+="<br/>Value:<br/><b>"+content+"</b>";if(typeof oids==="object"&&this.tag==6){var oid=oids[content];if(oid){if(oid.d)s+="<br/>"+oid.d;if(oid.c)s+="<br/>"+oid.c;if(oid.w)s+="<br/>(warning!)"}}}value.innerHTML=s;node.appendChild(value);var sub=DOM.tag("div","sub");if(this.sub!==null){for(var i=0,max=this.sub.length;i<max;++i)sub.appendChild(this.sub[i].toDOM())}node.appendChild(sub);head.onclick=function(){node.className=node.className=="node collapsed"?"node":"node collapsed"};return node};ASN1.prototype.posStart=function(){return this.stream.pos};ASN1.prototype.posContent=function(){return this.stream.pos+this.header};ASN1.prototype.posEnd=function(){return this.stream.pos+this.header+Math.abs(this.length)};ASN1.prototype.fakeHover=function(current){this.node.className+=" hover";if(current)this.head.className+=" hover"};ASN1.prototype.fakeOut=function(current){var re=/ ?hover/;this.node.className=this.node.className.replace(re,"");if(current)this.head.className=this.head.className.replace(re,"")};ASN1.prototype.toHexDOM_sub=function(node,className,stream,start,end){if(start>=end)return;var sub=DOM.tag("span",className);sub.appendChild(DOM.text(stream.hexDump(start,end)));node.appendChild(sub)};ASN1.prototype.toHexDOM=function(root){var node=DOM.tag("span","hex");if(root===undefined)root=node;this.head.hexNode=node;this.head.onmouseover=function(){this.hexNode.className="hexCurrent"};this.head.onmouseout=function(){this.hexNode.className="hex"};node.asn1=this;node.onmouseover=function(){var current=!root.selected;if(current){root.selected=this.asn1;this.className="hexCurrent"}this.asn1.fakeHover(current)};node.onmouseout=function(){var current=root.selected==this.asn1;this.asn1.fakeOut(current);if(current){root.selected=null;this.className="hex"}};this.toHexDOM_sub(node,"tag",this.stream,this.posStart(),this.posStart()+1);this.toHexDOM_sub(node,this.length>=0?"dlen":"ulen",this.stream,this.posStart()+1,this.posContent());if(this.sub===null)node.appendChild(DOM.text(this.stream.hexDump(this.posContent(),this.posEnd())));else if(this.sub.length>0){var first=this.sub[0];var last=this.sub[this.sub.length-1];this.toHexDOM_sub(node,"intro",this.stream,this.posContent(),first.posStart());for(var i=0,max=this.sub.length;i<max;++i)node.appendChild(this.sub[i].toHexDOM(root));this.toHexDOM_sub(node,"outro",this.stream,last.posEnd(),this.posEnd())}return node};ASN1.prototype.toHexString=function(root){return this.stream.hexDump(this.posStart(),this.posEnd(),true)};ASN1.decodeLength=function(stream){var buf=stream.get(),len=buf&127;if(len==buf)return len;if(len>3)throw"Length over 24 bits not supported at position "+(stream.pos-1);if(len===0)return-1;buf=0;for(var i=0;i<len;++i)buf=buf<<8|stream.get();return buf};ASN1.hasContent=function(tag,len,stream){if(tag&32)return true;if(tag<3||tag>4)return false;var p=new Stream(stream);if(tag==3)p.get();var subTag=p.get();if(subTag>>6&1)return false;try{var subLength=ASN1.decodeLength(p);return p.pos-stream.pos+subLength==len}catch(exception){return false}};ASN1.decode=function(stream){if(!(stream instanceof Stream))stream=new Stream(stream,0);var streamStart=new Stream(stream),tag=stream.get(),len=ASN1.decodeLength(stream),header=stream.pos-streamStart.pos,sub=null;if(ASN1.hasContent(tag,len,stream)){var start=stream.pos;if(tag==3)stream.get();sub=[];if(len>=0){var end=start+len;while(stream.pos<end)sub[sub.length]=ASN1.decode(stream);if(stream.pos!=end)throw"Content size is not correct for container starting at offset "+start}else{try{for(;;){var s=ASN1.decode(stream);if(s.tag===0)break;sub[sub.length]=s}len=start-stream.pos}catch(e){throw"Exception while decoding undefined length content: "+e}}}else stream.pos+=len;return new ASN1(streamStart,header,len,tag,sub)};ASN1.test=function(){var test=[{value:[39],expected:39},{value:[129,201],expected:201},{value:[131,254,220,186],expected:16702650}];for(var i=0,max=test.length;i<max;++i){var pos=0,stream=new Stream(test[i].value,0),res=ASN1.decodeLength(stream);if(res!=test[i].expected)document.write("In test["+i+"] expected "+test[i].expected+" got "+res+"\n")}};window.ASN1=ASN1})();ASN1.prototype.getHexStringValue=function(){var hexString=this.toHexString();var offset=this.header*2;var length=this.length*2;return hexString.substr(offset,length)};RSAKey.prototype.parseKey=function(pem){try{var modulus=0;var public_exponent=0;var reHex=/^\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\s*)+$/;var der=reHex.test(pem)?Hex.decode(pem):Base64.unarmor(pem);var asn1=ASN1.decode(der);if(asn1.sub.length===3){asn1=asn1.sub[2].sub[0]}if(asn1.sub.length===9){modulus=asn1.sub[1].getHexStringValue();this.n=parseBigInt(modulus,16);public_exponent=asn1.sub[2].getHexStringValue();this.e=parseInt(public_exponent,16);var private_exponent=asn1.sub[3].getHexStringValue();this.d=parseBigInt(private_exponent,16);var prime1=asn1.sub[4].getHexStringValue();this.p=parseBigInt(prime1,16);var prime2=asn1.sub[5].getHexStringValue();this.q=parseBigInt(prime2,16);var exponent1=asn1.sub[6].getHexStringValue();this.dmp1=parseBigInt(exponent1,16);var exponent2=asn1.sub[7].getHexStringValue();this.dmq1=parseBigInt(exponent2,16);var coefficient=asn1.sub[8].getHexStringValue();this.coeff=parseBigInt(coefficient,16)}else if(asn1.sub.length===2){var bit_string=asn1.sub[1];var sequence=bit_string.sub[0];modulus=sequence.sub[0].getHexStringValue();this.n=parseBigInt(modulus,16);public_exponent=sequence.sub[1].getHexStringValue();this.e=parseInt(public_exponent,16)}else{return false}return true}catch(ex){return false}};RSAKey.prototype.getPrivateBaseKey=function(){var options={"array":[new KJUR.asn1.DERInteger({"int":0}),new KJUR.asn1.DERInteger({"bigint":this.n}),new KJUR.asn1.DERInteger({"int":this.e}),new KJUR.asn1.DERInteger({"bigint":this.d}),new KJUR.asn1.DERInteger({"bigint":this.p}),new KJUR.asn1.DERInteger({"bigint":this.q}),new KJUR.asn1.DERInteger({"bigint":this.dmp1}),new KJUR.asn1.DERInteger({"bigint":this.dmq1}),new KJUR.asn1.DERInteger({"bigint":this.coeff})]};var seq=new KJUR.asn1.DERSequence(options);return seq.getEncodedHex()};RSAKey.prototype.getPrivateBaseKeyB64=function(){return hex2b64(this.getPrivateBaseKey())};RSAKey.prototype.getPublicBaseKey=function(){var options={"array":[new KJUR.asn1.DERObjectIdentifier({"oid":"1.2.840.113549.1.1.1"}),new KJUR.asn1.DERNull]};var first_sequence=new KJUR.asn1.DERSequence(options);options={"array":[new KJUR.asn1.DERInteger({"bigint":this.n}),new KJUR.asn1.DERInteger({"int":this.e})]};var second_sequence=new KJUR.asn1.DERSequence(options);options={"hex":"00"+second_sequence.getEncodedHex()};var bit_string=new KJUR.asn1.DERBitString(options);options={"array":[first_sequence,bit_string]};var seq=new KJUR.asn1.DERSequence(options);return seq.getEncodedHex()};RSAKey.prototype.getPublicBaseKeyB64=function(){return hex2b64(this.getPublicBaseKey())};RSAKey.prototype.wordwrap=function(str,width){width=width||64;if(!str){return str}var regex="(.{1,"+width+"})( +|$\n?)|(.{1,"+width+"})";return str.match(RegExp(regex,"g")).join("\n")};RSAKey.prototype.getPrivateKey=function(){var key="-----BEGIN RSA PRIVATE KEY-----\n";key+=this.wordwrap(this.getPrivateBaseKeyB64())+"\n";key+="-----END RSA PRIVATE KEY-----";return key};RSAKey.prototype.getPublicKey=function(){var key="-----BEGIN PUBLIC KEY-----\n";key+=this.wordwrap(this.getPublicBaseKeyB64())+"\n";key+="-----END PUBLIC KEY-----";return key};RSAKey.prototype.hasPublicKeyProperty=function(obj){obj=obj||{};return obj.hasOwnProperty("n")&&obj.hasOwnProperty("e")};RSAKey.prototype.hasPrivateKeyProperty=function(obj){obj=obj||{};return obj.hasOwnProperty("n")&&obj.hasOwnProperty("e")&&obj.hasOwnProperty("d")&&obj.hasOwnProperty("p")&&obj.hasOwnProperty("q")&&obj.hasOwnProperty("dmp1")&&obj.hasOwnProperty("dmq1")&&obj.hasOwnProperty("coeff")};RSAKey.prototype.parsePropertiesFrom=function(obj){this.n=obj.n;this.e=obj.e;if(obj.hasOwnProperty("d")){this.d=obj.d;this.p=obj.p;this.q=obj.q;this.dmp1=obj.dmp1;this.dmq1=obj.dmq1;this.coeff=obj.coeff}};var JSEncryptRSAKey=function(key){RSAKey.call(this);if(key){if(typeof key==="string"){this.parseKey(key)}else if(this.hasPrivateKeyProperty(key)||this.hasPublicKeyProperty(key)){this.parsePropertiesFrom(key)}}};JSEncryptRSAKey.prototype=new RSAKey;JSEncryptRSAKey.prototype.constructor=JSEncryptRSAKey;var JSEncrypt=function(options){options=options||{};this.default_key_size=parseInt(options.default_key_size)||1024;this.default_public_exponent=options.default_public_exponent||"010001";this.log=options.log||false;this.key=null};JSEncrypt.prototype.setKey=function(key){if(this.log&&this.key){}this.key=new JSEncryptRSAKey(key)};JSEncrypt.prototype.setPrivateKey=function(privkey){this.setKey(privkey)};JSEncrypt.prototype.setPublicKey=function(pubkey){this.setKey(pubkey)};JSEncrypt.prototype.decrypt=function(string){try{return this.getKey().decrypt(b64tohex(string))}catch(ex){return false}};JSEncrypt.prototype.encrypt=function(string){try{return hex2b64(this.getKey().encrypt(string))}catch(ex){return false}};JSEncrypt.prototype.getKey=function(cb){if(!this.key){this.key=new JSEncryptRSAKey;if(cb&&{}.toString.call(cb)==="[object Function]"){this.key.generateAsync(this.default_key_size,this.default_public_exponent,cb);return}this.key.generate(this.default_key_size,this.default_public_exponent)}return this.key};JSEncrypt.prototype.getPrivateKey=function(){return this.getKey().getPrivateKey()};JSEncrypt.prototype.getPrivateKeyB64=function(){return this.getKey().getPrivateBaseKeyB64()};JSEncrypt.prototype.getPublicKey=function(){return this.getKey().getPublicKey()};JSEncrypt.prototype.getPublicKeyB64=function(){return this.getKey().getPublicBaseKeyB64()};JSEncrypt.version="2.3.0";exports.JSEncrypt=JSEncrypt})(JSEncryptExports);(function(global,factory){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=factory}else if(typeof define==="function"&&define.amd){define(factory)}else{global.JSEncrypt=factory}})(this,JSEncryptExports.JSEncrypt);

})(getCurriedBundleDefineShim('utilities/vendor/jsencrypt/2.3.1/js/jsencrypt', define));;(function(define){
;(function(){var oldLodash=window._&&["1.9.1"].indexOf(window._.VERSION)>-1;function t(t,n){return t.set(n[0],n[1]),t}function n(t,n){return t.add(n),t}function e(t,n,e){switch(e.length){case 0:return t.call(n);case 1:return t.call(n,e[0]);case 2:return t.call(n,e[0],e[1]);case 3:return t.call(n,e[0],e[1],e[2]);}return t.apply(n,e)}function r(t,n){for(var e=-1,r=t?t.length:0;++e<r&&false!==n(t[e],e,t););return t}function u(t,n){for(var e=-1,r=t?t.length:0;++e<r;)if(!n(t[e],e,t))return false;return true}function o(t,n){for(var e=-1,r=t?t.length:0,u=0,o=[];++e<r;){var i=t[e];n(i,e,t)&&(o[u++]=i)}return o}function i(t,n){return!(!t||!t.length)&&-1<p(t,n,0)}function f(t,n,e){for(var r=-1,u=t?t.length:0;++r<u;)if(e(n,t[r]))return true;return false}function a(t,n){for(var e=-1,r=t?t.length:0,u=Array(r);++e<r;)u[e]=n(t[e],e,t);return u}function c(t,n){for(var e=-1,r=n.length,u=t.length;++e<r;)t[u+e]=n[e];return t}function l(t,n,e,r){var u=-1,o=t?t.length:0;for(r&&o&&(e=t[++u]);++u<o;)e=n(e,t[u],u,t);return e}function s(t,n){for(var e=-1,r=t?t.length:0;++e<r;)if(n(t[e],e,t))return true;return false}function _(t,n,e){var r;return e(t,function(t,e,u){return n(t,e,u)?(r=e,false):void 0}),r}function h(t,n,e,r){var u=t.length;for(e+=r?1:-1;r?e--:++e<u;)if(n(t[e],e,t))return e;return-1}function p(t,n,e){if(n!==n){t:{for(n=t.length,e+=-1;++e<n;){var r=t[e];if(r!==r){t=e;break t}}t=-1}return t}for(--e,r=t.length;++e<r;)if(t[e]===n)return e;return-1}function v(t,n,e,r,u){return u(t,function(t,u,o){e=r?(r=false,t):n(e,t,u,o)}),e}function d(t,n){var e=t.length;for(t.sort(n);e--;)t[e]=t[e].c;return t}function b(t,n){for(var e=-1,r=Array(t);++e<t;)r[e]=n(e);return r}function g(t){return function(n){return t(n)}}function y(t,n){return a(n,function(n){return t[n]})}function x(t,n){return t.has(n)}function j(t){return t&&t.Object===Object?t:null}function w(t){return Ye[t]}function m(t){return He[t]}function A(t){return"\\"+Qe[t]}function O(t){var n=false;if(null!=t&&typeof t.toString!="function")try{n=!!(t+"")}catch(e){}return n}function k(t){for(var n,e=[];!(n=t.next()).done;)e.push(n.value);return e}function E(t){var n=-1,e=Array(t.size);return t.forEach(function(t,r){e[++n]=[r,t]}),e}function S(t,n){for(var e=-1,r=t.length,u=0,o=[];++e<r;){var i=t[e];i!==n&&"__lodash_placeholder__"!==i||(t[e]="__lodash_placeholder__",o[u++]=e)}return o}function R(t){var n=-1,e=Array(t.size);return t.forEach(function(t){e[++n]=t}),e}function I(t){if(!t||!qe.test(t))return t.length;for(var n=Pe.lastIndex=0;Pe.test(t);)n++;return n}function $(t){if(Tn(t)&&!yu(t)&&!(t instanceof L)){if(t instanceof C)return t;if(_r.call(t,"__wrapped__"))return yn(t)}return new C(t)}function z(){}function C(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=pe}function L(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=false,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function U(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function B(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function M(t){var n=-1,e=t?t.length:0;for(this.clear();++n<e;){var r=t[n];this.set(r[0],r[1])}}function F(t){var n=-1,e=t?t.length:0;for(this.__data__=new M;++n<e;)this.add(t[n])}function D(t){this.__data__=new B(t)}function T(t,n,e,r){return t===pe||zn(t,fr[e])&&!_r.call(r,e)?n:t}function W(t,n,e){(e===pe||zn(t[n],e))&&(typeof n!="number"||e!==pe||n in t)||(t[n]=e)}function N(t,n,e){var r=t[n];_r.call(t,n)&&zn(r,e)&&(e!==pe||n in t)||(t[n]=e)}function Z(t,n){for(var e=t.length;e--;)if(zn(t[e][0],n))return e;return-1}function P(t,n){return t&&Ct(n,ne(n),t)}function V(t,n){for(var e=-1,r=null==t,u=n.length,o=Array(u);++e<u;)o[e]=r?pe:Xn(t,n[e]);return o}function q(t,n,e,u,o,i,f){var a;if(u&&(a=i?u(t,o,i,f):u(t)),a!==pe)return a;if(!Dn(t))return t;if(o=yu(t)){if(a=en(t),!n)return zt(t,a)}else{var c=tn(t),l="[object Function]"==c||"[object GeneratorFunction]"==c;if(xu(t))return St(t,n);if("[object Object]"==c||"[object Arguments]"==c||l&&!i){if(O(t))return i?t:{};if(a=rn(l?{}:t),!n)return Lt(t,P(a,t))}else{if(!Ke[c])return i?t:{};a=un(t,c,q,n)}}if(f||(f=new D),i=f.get(t))return i;if(f.set(t,a),!o)var s=e?rt(t,ne,Xt):ne(t);return r(s||t,function(r,o){s&&(o=r,r=t[o]),N(a,o,q(r,n,e,u,o,t,f))}),a}function G(t){return Dn(t)?Or(t):{}}function J(t,n,e){if(typeof t!="function")throw new TypeError("Expected a function");return setTimeout(function(){t.apply(pe,e)},n)}function K(t,n){var e=-1,r=i,u=true,o=t.length,f=[],a=n.length;if(!o)return f;n.length>=200&&(r=x,u=false,n=new F(n));t:for(;++e<o;){var c=t[e],l=c,c=0!==c?c:0;if(u&&l===l){for(var s=a;s--;)if(n[s]===l)continue t;f.push(c)}else r(n,l,void 0)||f.push(c)}return f}function Y(t,n){var e=true;return Xr(t,function(t,r,u){return e=!!n(t,r,u)}),e}function H(t,n,e){for(var r=-1,u=t.length;++r<u;){var o=t[r],i=n(o);if(null!=i&&(f===pe?i===i&&!Vn(i):e(i,f)))var f=i,a=o}return a}function Q(t,n){var e=[];return Xr(t,function(t,r,u){n(t,r,u)&&e.push(t)}),e}function X(t,n,e,r,u){var o=-1,i=t.length;for(e||(e=fn),u||(u=[]);++o<i;){var f=t[o];n>0&&e(f)?n>1?X(f,n-1,e,r,u):c(u,f):r||(u[u.length]=f)}return u}function tt(t,n){return t&&tu(t,n,ne)}function nt(t,n){return o(n,function(n){return Mn(t[n])})}function et(t,n){n=sn(n,t)?[n]:kt(n);for(var e=0,r=n.length;null!=t&&r>e;)t=t[bn(n[e++])];return e&&e==r?t:pe}function rt(t,n,e){return n=n(t),yu(t)?n:c(n,e(t))}function ut(t,n){return t>n}function ot(t,n){return null!=t&&(_r.call(t,n)||typeof t=="object"&&n in t&&null===Rr(Object(t)))}function it(t,n){return null!=t&&n in Object(t)}function ft(t,n,e,r,u){if(t===n)n=true;else if(null==t||null==n||!Dn(t)&&!Tn(n))n=t!==t&&n!==n;else t:{var o=yu(t),i=yu(n),f="[object Array]",a="[object Array]";o||(f=tn(t),f="[object Arguments]"==f?"[object Object]":f),i||(a=tn(n),a="[object Arguments]"==a?"[object Object]":a);var c="[object Object]"==f&&!O(t),i="[object Object]"==a&&!O(n);if((a=f==a)&&!c)u||(u=new D),n=o||qn(t)?Vt(t,n,ft,e,r,u):qt(t,n,f,ft,e,r,u);else{if(!(2&r)&&(o=c&&_r.call(t,"__wrapped__"),f=i&&_r.call(n,"__wrapped__"),o||f)){t=o?t.value():t,n=f?n.value():n,u||(u=new D),n=ft(t,n,e,r,u);break t}if(a){n:if(u||(u=new D),o=2&r,f=ne(t),i=f.length,a=ne(n).length,i==a||o){for(c=i;c--;){var l=f[c];if(!(o?l in n:ot(n,l))){n=false;break n}}if(a=u.get(t))n=a==n;else{a=true,u.set(t,n);for(var s=o;++c<i;){var l=f[c],_=t[l],h=n[l];if(e)var p=o?e(h,_,l,n,t,u):e(_,h,l,t,n,u);if(p===pe?_!==h&&!ft(_,h,e,r,u):!p){a=false;break}s||(s="constructor"==l)}a&&!s&&(e=t.constructor,r=n.constructor,e!=r&&"constructor"in t&&"constructor"in n&&!(typeof e=="function"&&e instanceof e&&typeof r=="function"&&r instanceof r)&&(a=false)),u["delete"](t),n=a}}else n=false;}else n=false}}return n}function at(t,n){var e=n.length,r=e;if(null==t)return!r;for(t=Object(t);e--;){var u=n[e];if(u[2]?u[1]!==t[u[0]]:!(u[0]in t))return false}for(;++e<r;){var u=n[e],o=u[0],i=t[o],f=u[1];if(u[2]){if(i===pe&&!(o in t))return false}else if(u=new D,void 0===pe?!ft(f,i,void 0,3,u):1)return false}return true}function ct(t){return typeof t=="function"?t:null==t?fe:typeof t=="object"?yu(t)?pt(t[0],t[1]):ht(t):se(t)}function lt(t){t=null==t?t:Object(t);var n,e=[];for(n in t)e.push(n);return e}function st(t,n){return n>t}function _t(t,n){var e=-1,r=Ln(t)?Array(t.length):[];return Xr(t,function(t,u,o){r[++e]=n(t,u,o)}),r}function ht(t){var n=Ht(t);return 1==n.length&&n[0][2]?pn(n[0][0],n[0][1]):function(e){return e===t||at(e,n)}}function pt(t,n){return sn(t)&&n===n&&!Dn(n)?pn(bn(t),n):function(e){var r=Xn(e,t);return r===pe&&r===n?te(e,t):ft(n,r,pe,3)}}function vt(t,n,e,u,o){if(t!==n){if(!yu(n)&&!qn(n))var i=ee(n);r(i||n,function(r,f){if(i&&(f=r,r=n[f]),Dn(r)){o||(o=new D);var a=f,c=o,l=t[a],s=n[a],_=c.get(s);if(_)W(t,a,_);else{var _=u?u(l,s,a+"",t,n,c):pe,h=_===pe;h&&(_=s,yu(s)||qn(s)?yu(l)?_=l:Un(l)?_=zt(l):(h=false,_=q(s,true)):Nn(s)||Cn(s)?Cn(l)?_=Hn(l):!Dn(l)||e&&Mn(l)?(h=false,_=q(s,true)):_=l:h=false),c.set(s,_),h&&vt(_,s,e,u,c),c["delete"](s),W(t,a,_)}}else a=u?u(t[f],r,f+"",t,n,o):pe,a===pe&&(a=r),W(t,f,a)})}}function dt(t,n,e){var r=-1;return n=a(n.length?n:[fe],g(Kt())),t=_t(t,function(t){return{a:a(n,function(n){return n(t)}),b:++r,c:t}}),d(t,function(t,n){var r;t:{r=-1;for(var u=t.a,o=n.a,i=u.length,f=e.length;++r<i;){var a;n:{a=u[r];var c=o[r];if(a!==c){var l=a!==pe,s=null===a,_=a===a,h=Vn(a),p=c!==pe,v=null===c,d=c===c,b=Vn(c);if(!v&&!b&&!h&&a>c||h&&p&&d&&!v&&!b||s&&p&&d||!l&&d||!_){a=1;break n}if(!s&&!h&&!b&&c>a||b&&l&&_&&!s&&!h||v&&l&&_||!p&&_||!d){a=-1;break n}}a=0}if(a){r=r>=f?a:a*("desc"==e[r]?-1:1);break t}}r=t.b-n.b}return r})}function bt(t,n){return t=Object(t),l(n,function(n,e){return e in t&&(n[e]=t[e]),n},{})}function gt(t,n){for(var e=-1,r=rt(t,ee,ou),u=r.length,o={};++e<u;){var i=r[e],f=t[i];n(f,i)&&(o[i]=f)}return o}function yt(t){return function(n){return null==n?pe:n[t]}}function xt(t){return function(n){return et(n,t)}}function jt(t,n,e){var r=-1,u=t.length;for(0>n&&(n=-n>u?0:u+n),e=e>u?u:e,0>e&&(e+=u),u=n>e?0:e-n>>>0,n>>>=0,e=Array(u);++r<u;)e[r]=t[r+n];return e}function wt(t,n){var e;return Xr(t,function(t,r,u){return e=n(t,r,u),!e}),!!e}function mt(t){if(typeof t=="string")return t;if(Vn(t))return Qr?Qr.call(t):"";var n=t+"";return"0"==n&&1/t==-ve?"-0":n}function At(t,n,e){var r=-1,u=i,o=t.length,a=true,c=[],l=c;if(e)a=false,u=f;else if(o>=200){if(u=n?null:eu(t))return R(u);a=false,u=x,l=new F}else l=n?[]:c;t:for(;++r<o;){var s=t[r],_=n?n(s):s,s=e||0!==s?s:0;if(a&&_===_){for(var h=l.length;h--;)if(l[h]===_)continue t;n&&l.push(_),c.push(s)}else u(l,_,e)||(l!==c&&l.push(_),c.push(s))}return c}function Ot(t,n){var e=t;return e instanceof L&&(e=e.value()),l(n,function(t,n){return n.func.apply(n.thisArg,c([t],n.args))},e)}function kt(t){return yu(t)?t:fu(t)}function Et(t,n,e){var r=t.length;return e=e===pe?r:e,!n&&e>=r?t:jt(t,n,e)}function St(t,n){if(n)return t.slice();var e=new t.constructor(t.length);return t.copy(e),e}function Rt(t){var n=new t.constructor(t.byteLength);return new jr(n).set(new jr(t)),n}function It(t,n,e,r){var u=-1,o=t.length,i=e.length,f=-1,a=n.length,c=$r(o-i,0),l=Array(a+c);for(r=!r;++f<a;)l[f]=n[f];for(;++u<i;)(r||o>u)&&(l[e[u]]=t[u]);for(;c--;)l[f++]=t[u++];return l}function $t(t,n,e,r){var u=-1,o=t.length,i=-1,f=e.length,a=-1,c=n.length,l=$r(o-f,0),s=Array(l+c);for(r=!r;++u<l;)s[u]=t[u];for(l=u;++a<c;)s[l+a]=n[a];for(;++i<f;)(r||o>u)&&(s[l+e[i]]=t[u++]);return s}function zt(t,n){var e=-1,r=t.length;for(n||(n=Array(r));++e<r;)n[e]=t[e];return n}function Ct(t,n,e,r){e||(e={});for(var u=-1,o=n.length;++u<o;){var i=n[u],f=r?r(e[i],t[i],i,e,t):t[i];N(e,i,f)}return e}function Lt(t,n){return Ct(t,Xt(t),n)}function Ut(t){return $n(function(n,e){var r=-1,u=e.length,o=u>1?e[u-1]:pe,i=u>2?e[2]:pe,o=t.length>3&&typeof o=="function"?(u--,o):pe;for(i&&ln(e[0],e[1],i)&&(o=3>u?pe:o,u=1),n=Object(n);++r<u;)(i=e[r])&&t(n,i,r,o);return n})}function Bt(t,n,e){function r(){return(this&&this!==or&&this instanceof r?o:t).apply(u?e:this,arguments)}var u=1&n,o=Dt(t);return r}function Mt(t){return function(n){n=Qn(n);var e=qe.test(n)?n.match(Pe):pe,r=e?e[0]:n.charAt(0);return n=e?Et(e,1).join(""):n.slice(1),r[t]()+n}}function Ft(t){return function(n){return l(ie(oe(n).replace(Ne,"")),t,"")}}function Dt(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6]);}var e=G(t.prototype),n=t.apply(e,n);return Dn(n)?n:e}}function Tt(t,n,r){function u(){for(var i=arguments.length,f=Array(i),a=i,c=Jt(u);a--;)f[a]=arguments[a];return a=3>i&&f[0]!==c&&f[i-1]!==c?[]:S(f,c),i-=a.length,r>i?Zt(t,n,Wt,u.placeholder,pe,f,a,pe,pe,r-i):e(this&&this!==or&&this instanceof u?o:t,this,f)}var o=Dt(t);return u}function Wt(t,n,e,r,u,o,i,f,a,c){function l(){for(var b=arguments.length,g=Array(b),y=b;y--;)g[y]=arguments[y];if(p){var x,j=Jt(l),y=g.length;for(x=0;y--;)g[y]===j&&x++}if(r&&(g=It(g,r,u,p)),o&&(g=$t(g,o,i,p)),b-=x,p&&c>b)return j=S(g,j),Zt(t,n,Wt,l.placeholder,e,g,j,f,a,c-b);if(j=_?e:this,y=h?j[t]:t,b=g.length,f){x=g.length;for(var w=zr(f.length,x),m=zt(g);w--;){var A=f[w];g[w]=cn(A,x)?m[A]:pe}}else v&&b>1&&g.reverse();return s&&b>a&&(g.length=a),this&&this!==or&&this instanceof l&&(y=d||Dt(y)),y.apply(j,g)}var s=128&n,_=1&n,h=2&n,p=24&n,v=512&n,d=h?pe:Dt(t);return l}function Nt(t,n,r,u){function o(){for(var n=-1,a=arguments.length,c=-1,l=u.length,s=Array(l+a),_=this&&this!==or&&this instanceof o?f:t;++c<l;)s[c]=u[c];for(;a--;)s[c++]=arguments[++n];return e(_,i?r:this,s)}var i=1&n,f=Dt(t);return o}function Zt(t,n,e,r,u,o,i,f,a,c){var l=8&n,s=l?i:pe;i=l?pe:i;var _=l?o:pe;return o=l?pe:o,n=(n|(l?32:64))&~(l?64:32),4&n||(n&=-4),n=[t,n,u,_,s,o,i,f,a,c],e=e.apply(pe,n),_n(t)&&iu(e,n),e.placeholder=r,e}function Pt(t,n,e,r,u){var o,i,f=2&n;if(!f&&typeof t!="function")throw new TypeError("Expected a function");var a=r?r.length:0;if(a||(n&=-97,r=u=pe),o=o===pe?o:$r(Kn(o),0),i=i===pe?i:Kn(i),a-=u?u.length:0,64&n){var c=r,l=u;r=u=pe}var s=f?pe:ru(t);return o=[t,n,e,r,u,c,l,void 0,o,i],s&&(e=o[1],t=s[1],n=e|t,r=128==t&&8==e||128==t&&256==e&&s[8]>=o[7].length||384==t&&s[8]>=s[7].length&&8==e,131>n||r)&&(1&t&&(o[2]=s[2],n|=1&e?0:4),(e=s[3])&&(r=o[3],o[3]=r?It(r,e,s[4]):e,o[4]=r?S(o[3],"__lodash_placeholder__"):s[4]),(e=s[5])&&(r=o[5],o[5]=r?$t(r,e,s[6]):e,o[6]=r?S(o[5],"__lodash_placeholder__"):s[6]),(e=s[7])&&(o[7]=e),128&t&&(o[8]=null==o[8]?s[8]:zr(o[8],s[8])),null==o[9]&&(o[9]=s[9]),o[0]=s[0],o[1]=n),t=o[0],n=o[1],e=o[2],r=o[3],u=o[4],i=o[9]=null==o[9]?f?0:t.length:$r(o[9]-a,0),!i&&24&n&&(n&=-25),(s?nu:iu)(n&&1!=n?8==n||16==n?Tt(t,n,i):32!=n&&33!=n||u.length?Wt.apply(pe,o):Nt(t,n,e,r):Bt(t,n,e),o)}function Vt(t,n,e,r,u,o){var i=2&u,f=t.length,a=n.length;if(f!=a&&!(i&&a>f))return false;if(a=o.get(t))return a==n;var a=-1,c=true,l=1&u?new F:pe;for(o.set(t,n);++a<f;){var _=t[a],h=n[a];if(r)var p=i?r(h,_,a,n,t,o):r(_,h,a,t,n,o);if(p!==pe){if(p)continue;c=false;break}if(l){if(!s(n,function(t,n){return l.has(n)||_!==t&&!e(_,t,r,u,o)?void 0:l.add(n)})){c=false;break}}else if(_!==h&&!e(_,h,r,u,o)){c=false;break}}return o["delete"](t),c}function qt(t,n,e,r,u,o,i){switch(e){case"[object DataView]":if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)break;t=t.buffer,n=n.buffer;case"[object ArrayBuffer]":if(t.byteLength!=n.byteLength||!r(new jr(t),new jr(n)))break;return true;case"[object Boolean]":case"[object Date]":return+t==+n;case"[object Error]":return t.name==n.name&&t.message==n.message;case"[object Number]":return t!=+t?n!=+n:t==+n;case"[object RegExp]":case"[object String]":return t==n+"";case"[object Map]":var f=E;case"[object Set]":if(f||(f=R),t.size!=n.size&&!(2&o))break;return(e=i.get(t))?e==n:(o|=1,i.set(t,n),Vt(f(t),f(n),r,u,o,i));case"[object Symbol]":if(Hr)return Hr.call(t)==Hr.call(n);}return false}function Gt(t){for(var n=t.name+"",e=Pr[n],r=_r.call(Pr,n)?e.length:0;r--;){var u=e[r],o=u.func;if(null==o||o==t)return u.name}return n}function Jt(t){return(_r.call($,"placeholder")?$:t).placeholder}function Kt(){var t=$.iteratee||ae,t=t===ae?ct:t;return arguments.length?t(arguments[0],arguments[1]):t}function Yt(t,n){var e=t.__data__,r=typeof n;return("string"==r||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?e[typeof n=="string"?"string":"hash"]:e.map}function Ht(t){for(var n=ne(t),e=n.length;e--;){var r=n[e],u=t[r];n[e]=[r,u,u===u&&!Dn(u)]}return n}function Qt(t,n){var e=null==t?pe:t[n];return(!Dn(e)||lr&&lr in e?0:(Mn(e)||O(e)?br:Ce).test(gn(e)))?e:pe}function Xt(t){return mr(Object(t))}function tn(t){return vr.call(t)}function nn(t,n,e){n=sn(n,t)?[n]:kt(n);for(var r,u=-1,o=n.length;++u<o;){var i=bn(n[u]);if(!(r=null!=t&&e(t,i)))break;t=t[i]}return r?r:(o=t?t.length:0,!!o&&Fn(o)&&cn(i,o)&&(yu(t)||Pn(t)||Cn(t)))}function en(t){var n=t.length,e=t.constructor(n);return n&&"string"==typeof t[0]&&_r.call(t,"index")&&(e.index=t.index,e.input=t.input),e}function rn(t){return typeof t.constructor!="function"||hn(t)?{}:G(Rr(Object(t)))}function un(e,r,u,o){var i=e.constructor;switch(r){case"[object ArrayBuffer]":return Rt(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return r=o?Rt(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return r=o?Rt(e.buffer):e.buffer,new e.constructor(r,e.byteOffset,e.length);case"[object Map]":return r=o?u(E(e),true):E(e),l(r,t,new e.constructor);case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return r=new e.constructor(e.source,Ie.exec(e)),r.lastIndex=e.lastIndex,r;case"[object Set]":return r=o?u(R(e),true):R(e),l(r,n,new e.constructor);case"[object Symbol]":return Hr?Object(Hr.call(e)):{};}}function on(t){var n=t?t.length:pe;return Fn(n)&&(yu(t)||Pn(t)||Cn(t))?b(n,String):null}function fn(t){return yu(t)||Cn(t)}function an(t){return yu(t)&&!(2==t.length&&!Mn(t[0]))}function cn(t,n){return n=null==n?9007199254740991:n,!!n&&(typeof t=="number"||Ue.test(t))&&t>-1&&0==t%1&&n>t}function ln(t,n,e){if(!Dn(e))return false;var r=typeof n;return("number"==r?Ln(e)&&cn(n,e.length):"string"==r&&n in e)?zn(e[n],t):false}function sn(t,n){if(yu(t))return false;var e=typeof t;return"number"==e||"symbol"==e||"boolean"==e||null==t||Vn(t)?true:Ae.test(t)||!me.test(t)||null!=n&&t in Object(n)}function _n(t){var n=Gt(t),e=$[n];return typeof e=="function"&&n in L.prototype?t===e?true:(n=ru(e),!!n&&t===n[0]):false}function hn(t){var n=t&&t.constructor;return t===(typeof n=="function"&&n.prototype||fr)}function pn(t,n){return function(e){return null==e?false:e[t]===n&&(n!==pe||t in Object(e))}}function vn(t,n,e,r,u,o){return Dn(t)&&Dn(n)&&vt(t,n,pe,vn,o.set(n,t)),t}function dn(t,n){return 1==n.length?t:et(t,jt(n,0,-1))}function bn(t){if(typeof t=="string"||Vn(t))return t;var n=t+"";return"0"==n&&1/t==-ve?"-0":n}function gn(t){if(null!=t){try{return sr.call(t)}catch(n){}return t+""}return""}function yn(t){if(t instanceof L)return t.clone();var n=new C(t.__wrapped__,t.__chain__);return n.__actions__=zt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function xn(t,n,e){var r=t?t.length:0;return r?(e=null==e?0:Kn(e),0>e&&(e=$r(r+e,0)),h(t,Kt(n,3),e)):-1}function jn(t){return t&&t.length?t[0]:pe}function wn(t){var n=t?t.length:0;return n?t[n-1]:pe}function mn(t){return t?Lr.call(t):t}function An(t){return t=$(t),t.__chain__=true,t}function On(t,n){return n(t)}function kn(){return this}function En(t,n){return(yu(t)?r:Xr)(t,Kt(n,3))}function Sn(){return Date.now()}function Rn(t,n,e){function r(n){var e=a,r=c;return a=c=pe,p=n,s=t.apply(r,e)}function u(t){var e=t-h;return t-=p,h===pe||e>=n||0>e||d&&t>=l}function o(){var t=Sn();if(u(t))return i(t);var e,r=setTimeout;e=t-p,t=n-(t-h),e=d?zr(t,l-e):t,_=r(o,e)}function i(t){return _=pe,b&&a?r(t):(a=c=pe,s)}function f(){var t=Sn(),e=u(t);if(a=arguments,c=this,h=t,e){if(_===pe)return p=t=h,_=setTimeout(o,n),v?r(t):s;if(d)return _=setTimeout(o,n),r(h)}return _===pe&&(_=setTimeout(o,n)),s}var a,c,l,s,_,h,p=0,v=false,d=false,b=true;if(typeof t!="function")throw new TypeError("Expected a function");return n=Yn(n)||0,Dn(e)&&(v=!!e.leading,l=(d="maxWait"in e)?$r(Yn(e.maxWait)||0,n):l,b="trailing"in e?!!e.trailing:b),f.cancel=function(){p=0,a=h=c=_=pe},f.flush=function(){return _===pe?s:i(Sn())},f}function In(t,n){function e(){var r=arguments,u=n?n.apply(this,r):r[0],o=e.cache;return o.has(u)?o.get(u):(r=t.apply(this,r),e.cache=o.set(u,r),r)}if(typeof t!="function"||n&&typeof n!="function")throw new TypeError("Expected a function");return e.cache=new(In.Cache||M),e}function $n(t,n){if(typeof t!="function")throw new TypeError("Expected a function");return n=$r(n===pe?t.length-1:Kn(n),0),function(){for(var r=arguments,u=-1,o=$r(r.length-n,0),i=Array(o);++u<o;)i[u]=r[n+u];switch(n){case 0:return t.call(this,i);case 1:return t.call(this,r[0],i);case 2:return t.call(this,r[0],r[1],i);}for(o=Array(n+1),u=-1;++u<n;)o[u]=r[u];return o[n]=i,e(t,this,o)}}function zn(t,n){return t===n||t!==t&&n!==n}function Cn(t){return Un(t)&&_r.call(t,"callee")&&(!kr.call(t,"callee")||"[object Arguments]"==vr.call(t))}function Ln(t){return null!=t&&Fn(uu(t))&&!Mn(t)}function Un(t){return Tn(t)&&Ln(t)}function Bn(t){return Tn(t)?"[object Error]"==vr.call(t)||typeof t.message=="string"&&typeof t.name=="string":false}function Mn(t){return t=Dn(t)?vr.call(t):"","[object Function]"==t||"[object GeneratorFunction]"==t}function Fn(t){return typeof t=="number"&&t>-1&&0==t%1&&9007199254740991>=t}function Dn(t){var n=typeof t;return!!t&&("object"==n||"function"==n)}function Tn(t){return!!t&&typeof t=="object"}function Wn(t){return typeof t=="number"||Tn(t)&&"[object Number]"==vr.call(t)}function Nn(t){return!Tn(t)||"[object Object]"!=vr.call(t)||O(t)?false:(t=Rr(Object(t)),null===t?true:(t=_r.call(t,"constructor")&&t.constructor,typeof t=="function"&&t instanceof t&&sr.call(t)==pr))}function Zn(t){return Dn(t)&&"[object RegExp]"==vr.call(t)}function Pn(t){return typeof t=="string"||!yu(t)&&Tn(t)&&"[object String]"==vr.call(t)}function Vn(t){return typeof t=="symbol"||Tn(t)&&"[object Symbol]"==vr.call(t)}function qn(t){return Tn(t)&&Fn(t.length)&&!!Je[vr.call(t)]}function Gn(t){if(!t)return[];if(Ln(t))return Pn(t)?t.match(Pe):zt(t);if(Ar&&t[Ar])return k(t[Ar]());var n=tn(t);return("[object Map]"==n?E:"[object Set]"==n?R:re)(t)}function Jn(t){return t?(t=Yn(t),t===ve||t===-ve?1.7976931348623157e308*(0>t?-1:1):t===t?t:0):0===t?t:0}function Kn(t){t=Jn(t);var n=t%1;return t===t?n?t-n:t:0}function Yn(t){if(typeof t=="number")return t;if(Vn(t))return de;if(Dn(t)&&(t=Mn(t.valueOf)?t.valueOf():t,t=Dn(t)?t+"":t),typeof t!="string")return 0===t?t:+t;t=t.replace(ke,"");var n=ze.test(t);return n||Le.test(t)?Xe(t.slice(2),n?2:8):$e.test(t)?de:+t}function Hn(t){return Ct(t,ee(t))}function Qn(t){return null==t?"":mt(t)}function Xn(t,n,e){return t=null==t?pe:et(t,n),t===pe?e:t}function te(t,n){return null!=t&&nn(t,n,it)}function ne(t){var n=hn(t);if(!n&&!Ln(t))return Ir(Object(t));var e,r=on(t),u=!!r,r=r||[],o=r.length;for(e in t)!ot(t,e)||u&&("length"==e||cn(e,o))||n&&"constructor"==e||r.push(e);return r}function ee(t){for(var n=-1,e=hn(t),r=lt(t),u=r.length,o=on(t),i=!!o,o=o||[],f=o.length;++n<u;){var a=r[n];i&&("length"==a||cn(a,f))||"constructor"==a&&(e||!_r.call(t,a))||o.push(a)}return o}function re(t){return t?y(t,ne(t)):[]}function ue(t){return Uu(Qn(t).toLowerCase())}function oe(t){return(t=Qn(t))&&t.replace(Be,w).replace(Ze,"")}function ie(t,n,e){return t=Qn(t),n=e?pe:n,n===pe&&(n=Ge.test(t)?Ve:Ee),t.match(n)||[]}function fe(t){return t}function ae(t){return ct(typeof t=="function"?t:q(t,true))}function ce(t,n,e){var u=ne(n),o=nt(n,u);null!=e||Dn(n)&&(o.length||!u.length)||(e=n,n=t,t=this,o=nt(n,ne(n)));var i=!(Dn(e)&&"chain"in e&&!e.chain),f=Mn(t);return r(o,function(e){var r=n[e];t[e]=r,f&&(t.prototype[e]=function(){var n=this.__chain__;if(i||n){var e=t(this.__wrapped__);return(e.__actions__=zt(this.__actions__)).push({func:r,args:arguments,thisArg:t}),e.__chain__=n,e}return r.apply(t,c([this.value()],arguments))})}),t}function le(){}function se(t){return sn(t)?yt(bn(t)):xt(t)}function _e(){return[]}function he(){return false}var pe,ve=1/0,de=NaN,be=/\b__p\+='';/g,ge=/\b(__p\+=)''\+/g,ye=/(__e\(.*?\)|\b__t\))\+'';/g,xe=/[&<>"'`]/g,je=RegExp(xe.source),we=/<%=([\s\S]+?)%>/g,me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ae=/^\w*$/,Oe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,ke=/^\s+|\s+$/g,Ee=/[a-zA-Z0-9]+/g,Se=/\\(\\)?/g,Re=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ie=/\w*$/,$e=/^[-+]0x[0-9a-f]+$/i,ze=/^0b[01]+$/i,Ce=/^\[object .+?Constructor\]$/,Le=/^0o[0-7]+$/i,Ue=/^(?:0|[1-9]\d*)$/,Be=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Me=/($^)/,Fe=/['\n\r\u2028\u2029\\]/g,De="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*",Te="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+De,We="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]?|[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",Ne=RegExp("['\u2019]","g"),Ze=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]","g"),Pe=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+We+De,"g"),Ve=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d+",Te].join("|"),"g"),qe=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Ge=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Je={};Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=true,Je["[object Arguments]"]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object Boolean]"]=Je["[object DataView]"]=Je["[object Date]"]=Je["[object Error]"]=Je["[object Function]"]=Je["[object Map]"]=Je["[object Number]"]=Je["[object Object]"]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object WeakMap]"]=false;var Ke={};Ke["[object Arguments]"]=Ke["[object Array]"]=Ke["[object ArrayBuffer]"]=Ke["[object DataView]"]=Ke["[object Boolean]"]=Ke["[object Date]"]=Ke["[object Float32Array]"]=Ke["[object Float64Array]"]=Ke["[object Int8Array]"]=Ke["[object Int16Array]"]=Ke["[object Int32Array]"]=Ke["[object Map]"]=Ke["[object Number]"]=Ke["[object Object]"]=Ke["[object RegExp]"]=Ke["[object Set]"]=Ke["[object String]"]=Ke["[object Symbol]"]=Ke["[object Uint8Array]"]=Ke["[object Uint8ClampedArray]"]=Ke["[object Uint16Array]"]=Ke["[object Uint32Array]"]=true,Ke["[object Error]"]=Ke["[object Function]"]=Ke["[object WeakMap]"]=false;var Ye={"\xC0":"A","\xC1":"A","\xC2":"A","\xC3":"A","\xC4":"A","\xC5":"A","\xE0":"a","\xE1":"a","\xE2":"a","\xE3":"a","\xE4":"a","\xE5":"a","\xC7":"C","\xE7":"c","\xD0":"D","\xF0":"d","\xC8":"E","\xC9":"E","\xCA":"E","\xCB":"E","\xE8":"e","\xE9":"e","\xEA":"e","\xEB":"e","\xCC":"I","\xCD":"I","\xCE":"I","\xCF":"I","\xEC":"i","\xED":"i","\xEE":"i","\xEF":"i","\xD1":"N","\xF1":"n","\xD2":"O","\xD3":"O","\xD4":"O","\xD5":"O","\xD6":"O","\xD8":"O","\xF2":"o","\xF3":"o","\xF4":"o","\xF5":"o","\xF6":"o","\xF8":"o","\xD9":"U","\xDA":"U","\xDB":"U","\xDC":"U","\xF9":"u","\xFA":"u","\xFB":"u","\xFC":"u","\xDD":"Y","\xFD":"y","\xFF":"y","\xC6":"Ae","\xE6":"ae","\xDE":"Th","\xFE":"th","\xDF":"ss"},He={"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;","`":"&#96;"},Qe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Xe=parseInt,tr=typeof exports=="object"&&exports,nr=tr&&typeof module=="object"&&module,er=nr&&nr.exports===tr,rr=j(typeof self=="object"&&self),ur=j(typeof this=="object"&&this),or=j(typeof global=="object"&&global)||rr||ur||Function("return this")(),ir=Array.prototype,fr=Object.prototype,ar=String.prototype,cr=or["__core-js_shared__"],lr=function(){var t=/[^.]+$/.exec(cr&&cr.keys&&cr.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),sr=Function.prototype.toString,_r=fr.hasOwnProperty,hr=0,pr=sr.call(Object),vr=fr.toString,dr=or._,br=RegExp("^"+sr.call(_r).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),gr=er?or.Buffer:pe,yr=or.Reflect,xr=or.Symbol,jr=or.Uint8Array,wr=yr?yr.f:pe,mr=Object.getOwnPropertySymbols,Ar=typeof(Ar=xr&&xr.iterator)=="symbol"?Ar:pe,Or=Object.create,kr=fr.propertyIsEnumerable,Er=ir.splice,Sr=Math.ceil,Rr=Object.getPrototypeOf,Ir=Object.keys,$r=Math.max,zr=Math.min,Cr=ar.replace,Lr=ir.reverse,Ur=ar.split,Br=Qt(or,"DataView"),Mr=Qt(or,"Map"),Fr=Qt(or,"Promise"),Dr=Qt(or,"Set"),Tr=Qt(or,"WeakMap"),Wr=Qt(Object,"create"),Nr=Tr&&new Tr,Zr=!kr.call({valueOf:1},"valueOf"),Pr={},Vr=gn(Br),qr=gn(Mr),Gr=gn(Fr),Jr=gn(Dr),Kr=gn(Tr),Yr=xr?xr.prototype:pe,Hr=Yr?Yr.valueOf:pe,Qr=Yr?Yr.toString:pe;$.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:we,variable:"",imports:{_:$}},$.prototype=z.prototype,$.prototype.constructor=$,C.prototype=G(z.prototype),C.prototype.constructor=C,L.prototype=G(z.prototype),L.prototype.constructor=L,U.prototype.clear=function(){this.__data__=Wr?Wr(null):{}},U.prototype["delete"]=function(t){return this.has(t)&&delete this.__data__[t]},U.prototype.get=function(t){var n=this.__data__;return Wr?(t=n[t],"__lodash_hash_undefined__"===t?pe:t):_r.call(n,t)?n[t]:pe},U.prototype.has=function(t){var n=this.__data__;return Wr?n[t]!==pe:_r.call(n,t)},U.prototype.set=function(t,n){return this.__data__[t]=Wr&&n===pe?"__lodash_hash_undefined__":n,this},B.prototype.clear=function(){this.__data__=[]},B.prototype["delete"]=function(t){var n=this.__data__;return t=Z(n,t),0>t?false:(t==n.length-1?n.pop():Er.call(n,t,1),!0)},B.prototype.get=function(t){var n=this.__data__;return t=Z(n,t),0>t?pe:n[t][1]},B.prototype.has=function(t){return-1<Z(this.__data__,t)},B.prototype.set=function(t,n){var e=this.__data__,r=Z(e,t);return 0>r?e.push([t,n]):e[r][1]=n,this},M.prototype.clear=function(){this.__data__={hash:new U,map:new(Mr||B),string:new U}},M.prototype["delete"]=function(t){return Yt(this,t)["delete"](t)},M.prototype.get=function(t){return Yt(this,t).get(t)},M.prototype.has=function(t){return Yt(this,t).has(t)},M.prototype.set=function(t,n){return Yt(this,t).set(t,n),this},F.prototype.add=F.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},F.prototype.has=function(t){return this.__data__.has(t)},D.prototype.clear=function(){this.__data__=new B},D.prototype["delete"]=function(t){return this.__data__["delete"](t)},D.prototype.get=function(t){return this.__data__.get(t)},D.prototype.has=function(t){return this.__data__.has(t)},D.prototype.set=function(t,n){var e=this.__data__;return e instanceof B&&200==e.__data__.length&&(e=this.__data__=new M(e.__data__)),e.set(t,n),this};var Xr=function(t,n){return function(e,r){if(null==e)return e;if(!Ln(e))return t(e,r);for(var u=e.length,o=n?u:-1,i=Object(e);(n?o--:++o<u)&&false!==r(i[o],o,i););return e}}(tt),tu=function(t){return function(n,e,r){var u=-1,o=Object(n);r=r(n);for(var i=r.length;i--;){var f=r[t?i:++u];if(false===e(o[f],f,o))break}return n}}();wr&&!kr.call({valueOf:1},"valueOf")&&(lt=function(t){return k(wr(t))});var nu=Nr?function(t,n){return Nr.set(t,n),t}:fe,eu=Dr&&1/R(new Dr([,-0]))[1]==ve?function(t){return new Dr(t)}:le,ru=Nr?function(t){return Nr.get(t)}:le,uu=yt("length");mr||(Xt=_e);var ou=mr?function(t){for(var n=[];t;)c(n,Xt(t)),t=Rr(Object(t));return n}:Xt;(Br&&"[object DataView]"!=tn(new Br(new ArrayBuffer(1)))||Mr&&"[object Map]"!=tn(new Mr)||Fr&&"[object Promise]"!=tn(Fr.resolve())||Dr&&"[object Set]"!=tn(new Dr)||Tr&&"[object WeakMap]"!=tn(new Tr))&&(tn=function(t){var n=vr.call(t);if(t=(t="[object Object]"==n?t.constructor:pe)?gn(t):pe)switch(t){case Vr:return"[object DataView]";case qr:return"[object Map]";case Gr:return"[object Promise]";case Jr:return"[object Set]";case Kr:return"[object WeakMap]";}return n});var iu=function(){var t=0,n=0;return function(e,r){var u=Sn(),o=16-(u-n);if(n=u,o>0){if(150<=++t)return e}else t=0;return nu(e,r)}}(),fu=In(function(t){var n=[];return Qn(t).replace(Oe,function(t,e,r,u){n.push(r?u.replace(Se,"$1"):e||t)}),n}),au=$n(function(t){return At(X(t,1,Un,true))}),cu=$n(function(t){var n=wn(t);return Un(n)&&(n=pe),At(X(t,1,Un,true),Kt(n))}),lu=$n(function(t,n){return Un(t)?K(t,n):[]}),su=$n(function(t){function n(n){return V(n,t)}t=X(t,1);var e=t.length,r=e?t[0]:0,u=this.__wrapped__;return!(e>1||this.__actions__.length)&&u instanceof L&&cn(r)?(u=u.slice(r,+r+(e?1:0)),u.__actions__.push({func:On,args:[n],thisArg:pe}),new C(u,this.__chain__).thru(function(t){return e&&!t.length&&t.push(pe),t})):this.thru(n)}),_u=function(t){return function(n,e,r){var u=Object(n);if(e=Kt(e,3),!Ln(n))var o=ne(n);return r=t(o||n,function(t,n){return o&&(n=t,t=u[n]),e(t,n,u)},r),r>-1?n[o?o[r]:r]:pe}}(xn),hu=$n(function(t,n){if(null==t)return[];var e=n.length;return e>1&&ln(t,n[0],n[1])?n=[]:e>2&&ln(n[0],n[1],n[2])&&(n=[n[0]]),n=1==n.length&&yu(n[0])?n[0]:X(n,1,an),dt(t,n,[])}),pu=$n(function(t,n,e){var r=1;if(e.length)var u=S(e,Jt(pu)),r=32|r;return Pt(t,r,n,e,u)}),vu=$n(function(t,n){return J(t,1,n)}),du=$n(function(t,n,e){return J(t,Yn(n)||0,e)});In.Cache=M;var bu=$n(function(t,n){var e=S(n,Jt(bu));return Pt(t,32,pe,n,e)}),gu=$n(function(t,n){var e=S(n,Jt(gu));return Pt(t,64,pe,n,e)}),yu=Array.isArray,xu=gr?function(t){return t instanceof gr}:he,ju=Ut(function(t,n){if(Zr||hn(n)||Ln(n))Ct(n,ne(n),t);else for(var e in n)_r.call(n,e)&&N(t,e,n[e])}),wu=Ut(function(t,n){if(Zr||hn(n)||Ln(n))Ct(n,ee(n),t);else for(var e in n)N(t,e,n[e])}),mu=Ut(function(t,n,e,r){Ct(n,ee(n),t,r)}),Au=$n(function(t,n){return V(t,X(n,1))}),Ou=$n(function(t){return t.push(pe,T),e(mu,pe,t)}),ku=$n(function(t){return t.push(pe,vn),e(Su,pe,t)}),Eu=Ut(function(t,n,e){vt(t,n,e)}),Su=Ut(function(t,n,e,r){vt(t,n,e,r)}),Ru=$n(function(t,n){return null==t?{}:(n=a(X(n,1),bn),bt(t,K(rt(t,ee,ou),n)))}),Iu=$n(function(t,n){return null==t?{}:bt(t,a(X(n,1),bn))}),$u=Ft(function(t,n,e){return n=n.toLowerCase(),t+(e?ue(n):n)}),zu=Ft(function(t,n,e){return t+(e?"-":"")+n.toLowerCase()}),Cu=Mt("toLowerCase"),Lu=Ft(function(t,n,e){return t+(e?" ":"")+n.toUpperCase()}),Uu=Mt("toUpperCase"),Bu=$n(function(t,n){try{return e(t,pe,n)}catch(r){return Bn(r)?r:Error(r)}}),Mu=function(t){return $n(function(n){n=X(n,1);var e=n.length,r=e,u=C.prototype.thru;for(t&&n.reverse();r--;){var o=n[r];if(typeof o!="function")throw new TypeError("Expected a function");if(u&&!i&&"wrapper"==Gt(o))var i=new C([],true)}for(r=i?r:e;++r<e;)var o=n[r],u=Gt(o),f="wrapper"==u?ru(o):pe,i=f&&_n(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?i[Gt(f[0])].apply(i,f[3]):1==o.length&&_n(o)?i[u]():i.thru(o);return function(){var t=arguments,r=t[0];if(i&&1==t.length&&yu(r)&&r.length>=200)return i.plant(r).value();for(var u=0,t=e?n[u].apply(this,t):r;++u<e;)t=n[u].call(this,t);return t}})}(true),Fu=function(t){return function(n,e,r){r&&typeof r!="number"&&ln(n,e,r)&&(e=r=pe),n=Yn(n),n=n===n?n:0,e===pe?(e=n,n=0):e=Yn(e)||0,r=r===pe?e>n?1:-1:Yn(r)||0;var u=-1;e=$r(Sr((e-n)/(r||1)),0);for(var o=Array(e);e--;)o[t?e:++u]=n,n+=r;return o}}();$.assign=ju,$.assignIn=wu,$.assignInWith=mu,$.at=Au,$.bind=pu,$.chain=An,$.compact=function(t){for(var n=-1,e=t?t.length:0,r=0,u=[];++n<e;){var o=t[n];o&&(u[r++]=o)}return u},$.concat=function(){for(var t=arguments.length,n=Array(t?t-1:0),e=arguments[0],r=t;r--;)n[r-1]=arguments[r];return t?c(yu(e)?zt(e):[e],X(n,1)):[]},$.debounce=Rn,$.defaults=Ou,$.defaultsDeep=ku,$.defer=vu,$.delay=du,$.filter=function(t,n){return(yu(t)?o:Q)(t,Kt(n,3))},$.flatten=function(t){return t&&t.length?X(t,1):[]},$.flowRight=Mu,$.fromPairs=function(t){for(var n=-1,e=t?t.length:0,r={};++n<e;){var u=t[n];r[u[0]]=u[1]}return r},$.iteratee=ae,$.keys=ne,$.keysIn=ee,$.map=function(t,n){return(yu(t)?a:_t)(t,Kt(n,3))},$.mapValues=function(t,n){var e={};return n=Kt(n,3),tt(t,function(t,r,u){e[r]=n(t,r,u)}),e},$.matchesProperty=function(t,n){return pt(t,q(n,true))},$.memoize=In,$.merge=Eu,$.mergeWith=Su,$.mixin=ce,$.omit=Ru,$.omitBy=function(t,n){return n=Kt(n),gt(t,function(t,e){return!n(t,e)})},$.orderBy=function(t,n,e,r){return null==t?[]:(yu(n)||(n=null==n?[]:[n]),e=r?pe:e,yu(e)||(e=null==e?[]:[e]),dt(t,n,e))},$.partial=bu,$.partialRight=gu,$.pick=Iu,$.pickBy=function(t,n){return null==t?{}:gt(t,Kt(n))},$.property=se,$.range=Fu,$.remove=function(t,n){var e=[];if(!t||!t.length)return e;var r=-1,u=[],o=t.length;for(n=Kt(n,3);++r<o;){var i=t[r];n(i,r,t)&&(e.push(i),u.push(r))}for(r=t?u.length:0,o=r-1;r--;)if(i=u[r],r==o||i!==f){var f=i;if(cn(i))Er.call(t,i,1);else if(sn(i,t))delete t[bn(i)];else{var i=kt(i),a=dn(t,i);null!=a&&delete a[bn(wn(i))]}}return e},$.rest=$n,$.reverse=mn,$.set=function(t,n,e){if(null!=t){n=sn(n,t)?[n]:kt(n);for(var r=-1,u=n.length,o=u-1,i=t;null!=i&&++r<u;){var f=bn(n[r]);if(Dn(i)){var a=e;if(r!=o){var c=i[f],a=pe;a===pe&&(a=null==c?cn(n[r+1])?[]:{}:c)}N(i,f,a)}i=i[f]}}return t},$.slice=function(t,n,e){var r=t?t.length:0;return r?(e&&typeof e!="number"&&ln(t,n,e)?(n=0,e=r):(n=null==n?0:Kn(n),e=e===pe?r:Kn(e)),jt(t,n,e)):[]},$.sortBy=hu,$.split=function(t,n,e){return e&&typeof e!="number"&&ln(t,n,e)&&(n=e=pe),e=e===pe?4294967295:e>>>0,e?(t=Qn(t))&&(typeof n=="string"||null!=n&&!Zn(n))&&(n=mt(n),""==n&&qe.test(t))?Et(t.match(Pe),0,e):Ur.call(t,n,e):[]},$.tap=function(t,n){return n(t),t},$.throttle=function(t,n,e){var r=true,u=true;if(typeof t!="function")throw new TypeError("Expected a function");return Dn(e)&&(r="leading"in e?!!e.leading:r,u="trailing"in e?!!e.trailing:u),Rn(t,n,{leading:r,maxWait:n,trailing:u})},$.thru=On,$.toArray=Gn,$.toPlainObject=Hn,$.union=au,$.unionBy=cu,$.uniq=function(t){return t&&t.length?At(t):[]},$.uniqBy=function(t,n){return t&&t.length?At(t,Kt(n)):[]},$.uniqWith=function(t,n){return t&&t.length?At(t,pe,n):[]},$.unset=function(t,n){var e;if(null==t)e=true;else{e=t;var r=n,r=sn(r,e)?[r]:kt(r);e=dn(e,r),r=bn(wn(r)),e=!(null!=e&&ot(e,r))||delete e[r]}return e},$.values=re,$.without=lu,$.words=ie,$.extend=wu,$.extendWith=mu,ce($,$),$.attempt=Bu,$.camelCase=$u,$.capitalize=ue,$.clone=function(t){return q(t,false,true)},$.cloneDeep=function(t){return q(t,true,true)},$.deburr=oe,$.eq=zn,$.escape=function(t){return(t=Qn(t))&&je.test(t)?t.replace(xe,m):t},$.every=function(t,n,e){var r=yu(t)?u:Y;return e&&ln(t,n,e)&&(n=pe),r(t,Kt(n,3))},$.find=_u,$.findIndex=xn,$.findKey=function(t,n){return _(t,Kt(n,3),tt)},$.findLastIndex=function(t,n,e){var r=t?t.length:0;if(!r)return-1;var u=r-1;return e!==pe&&(u=Kn(e),u=0>e?$r(r+u,0):zr(u,r-1)),h(t,Kt(n,3),u,true)},$.forEach=En,$.forOwn=function(t,n){return t&&tt(t,Kt(n,3))},$.get=Xn,$.has=function(t,n){return null!=t&&nn(t,n,ot)},$.hasIn=te,$.head=jn,$.identity=fe,$.includes=function(t,n,e,r){return t=Ln(t)?t:re(t),e=e&&!r?Kn(e):0,r=t.length,0>e&&(e=$r(r+e,0)),Pn(t)?r>=e&&-1<t.indexOf(n,e):!!r&&-1<p(t,n,e)},$.indexOf=function(t,n,e){var r=t?t.length:0;return r?(e=null==e?0:Kn(e),0>e&&(e=$r(r+e,0)),p(t,n,e)):-1},$.isArguments=Cn,$.isArray=yu,$.isArrayLike=Ln,$.isArrayLikeObject=Un,$.isBoolean=function(t){return true===t||false===t||Tn(t)&&"[object Boolean]"==vr.call(t)},$.isBuffer=xu,$.isEmpty=function(t){if(Ln(t)&&(yu(t)||Pn(t)||Mn(t.splice)||Cn(t)||xu(t)))return!t.length;if(Tn(t)){var n=tn(t);if("[object Map]"==n||"[object Set]"==n)return!t.size}for(var e in t)if(_r.call(t,e))return false;return!(Zr&&ne(t).length)},$.isEqual=function(t,n){return ft(t,n)},$.isError=Bn,$.isFunction=Mn,$.isLength=Fn,$.isNaN=function(t){return Wn(t)&&t!=+t},$.isNull=function(t){return null===t},$.isNumber=Wn,$.isObject=Dn,$.isObjectLike=Tn,$.isPlainObject=Nn,$.isRegExp=Zn,$.isString=Pn,$.isSymbol=Vn,$.isTypedArray=qn,$.isUndefined=function(t){return t===pe},$.kebabCase=zu,$.last=wn,$.lowerFirst=Cu,$.maxBy=function(t,n){return t&&t.length?H(t,Kt(n),ut):pe},$.minBy=function(t,n){return t&&t.length?H(t,Kt(n),st):pe},$.stubArray=_e,$.stubFalse=he,$.noConflict=function(){return or._===this&&(or._=dr),this},$.noop=le,$.now=Sn,$.reduce=function(t,n,e){var r=yu(t)?l:v,u=3>arguments.length;return r(t,Kt(n,4),e,u,Xr)},$.replace=function(){var t=arguments,n=Qn(t[0]);return 3>t.length?n:Cr.call(n,t[1],t[2])},$.result=function(t,n,e){n=sn(n,t)?[n]:kt(n);var r=-1,u=n.length;for(u||(t=pe,u=1);++r<u;){var o=null==t?pe:t[bn(n[r])];o===pe&&(r=u,o=e),t=Mn(o)?o.call(t):o}return t},$.size=function(t){if(null==t)return 0;if(Ln(t)){var n=t.length;return n&&Pn(t)?I(t):n}return Tn(t)&&(n=tn(t),"[object Map]"==n||"[object Set]"==n)?t.size:ne(t).length},$.some=function(t,n,e){var r=yu(t)?s:wt;return e&&ln(t,n,e)&&(n=pe),r(t,Kt(n,3))},$.startsWith=function(t,n,e){t=Qn(t),e=Kn(e);var r=t.length;return e===e&&(r!==pe&&(e=r>=e?e:r),0!==pe&&(e=e>=0?e:0)),t.lastIndexOf(mt(n),e)==e},$.sumBy=function(t,n){var e;if(t&&t.length){e=Kt(n);for(var r,u=-1,o=t.length;++u<o;){var i=e(t[u]);i!==pe&&(r=r===pe?i:r+i)}e=r}else e=0;return e},$.template=function(t,n,e){var r=$.templateSettings;e&&ln(t,n,e)&&(n=pe),t=Qn(t),n=mu({},n,r,T),e=mu({},n.imports,r.imports,T);var u,o,i=ne(e),f=y(e,i),a=0;e=n.interpolate||Me;var c="__p+='",l="sourceURL"in n?"//# sourceURL="+n.sourceURL+"\n":"";if(t.replace(RegExp((n.escape||Me).source+"|"+e.source+"|"+(e===we?Re:Me).source+"|"+(n.evaluate||Me).source+"|$","g"),function(n,e,r,i,f,l){return r||(r=i),c+=t.slice(a,l).replace(Fe,A),e&&(u=true,c+="'+__e("+e+")+'"),f&&(o=true,c+="';"+f+";\n__p+='"),r&&(c+="'+((__t=("+r+"))==null?'':__t)+'"),a=l+n.length,n}),c+="';",(n=n.variable)||(c="with(obj){"+c+"}"),c=(o?c.replace(be,""):c).replace(ge,"$1").replace(ye,"$1;"),c="function("+(n||"obj")+"){"+(n?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(o?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+c+"return __p}",n=Bu(function(){return Function(i,l+"return "+c).apply(pe,f)}),n.source=c,Bn(n))throw n;return n},$.times=function(t,n){if(t=Kn(t),1>t||t>9007199254740991)return[];var e=4294967295,r=zr(t,4294967295);for(n=Kt(n),t-=4294967295,r=b(r,n);++e<t;)n(e);return r},$.toFinite=Jn,$.toInteger=Kn,$.toNumber=Yn,$.toString=Qn,$.trim=function(t,n,e){if((t=Qn(t))&&(e||n===pe))return t.replace(ke,"");if(!t||!(n=mt(n)))return t;t=t.match(Pe),n=n.match(Pe),e=-1;for(var r=t.length;++e<r&&-1<p(n,t[e],0););for(r=t.length;r--&&-1<p(n,t[r],0););return Et(t,e,r+1).join("")},$.truncate=function(t,n){var e=30,r="...";if(Dn(n))var u="separator"in n?n.separator:u,e="length"in n?Kn(n.length):e,r="omission"in n?mt(n.omission):r;t=Qn(t);var o=t.length;if(qe.test(t))var i=t.match(Pe),o=i.length;if(e>=o)return t;if(o=e-I(r),1>o)return r;if(e=i?Et(i,0,o).join(""):t.slice(0,o),u===pe)return e+r;if(i&&(o+=e.length-o),Zn(u)){if(t.slice(o).search(u)){var f=e;for(u.global||(u=RegExp(u.source,Qn(Ie.exec(u))+"g")),u.lastIndex=0;i=u.exec(f);)var a=i.index;e=e.slice(0,a===pe?o:a)}}else t.indexOf(mt(u),o)!=o&&(u=e.lastIndexOf(u),u>-1&&(e=e.slice(0,u)));return e+r},$.uniqueId=function(t){var n=++hr;return Qn(t)+n},$.upperCase=Lu,$.upperFirst=Uu,$.each=En,$.first=jn,ce($,function(){var t={};return tt($,function(n,e){_r.call($.prototype,e)||(t[e]=n)}),t}(),{chain:false}),$.VERSION="4.13.1",r(["bind","partial","partialRight"],function(t){$[t].placeholder=$}),r(["drop","take"],function(t,n){L.prototype[t]=function(e){var r=this.__filtered__;if(r&&!n)return new L(this);e=e===pe?1:$r(Kn(e),0);var u=this.clone();return r?u.__takeCount__=zr(e,u.__takeCount__):u.__views__.push({size:zr(e,4294967295),type:t+(0>u.__dir__?"Right":"")}),u},L.prototype[t+"Right"]=function(n){return this.reverse()[t](n).reverse()}}),r(["filter","map","takeWhile"],function(t,n){var e=n+1,r=1==e||3==e;L.prototype[t]=function(t){var n=this.clone();return n.__iteratees__.push({iteratee:Kt(t,3),type:e}),n.__filtered__=n.__filtered__||r,n}}),r(["head","last"],function(t,n){var e="take"+(n?"Right":"");L.prototype[t]=function(){return this[e](1).value()[0]}}),r(["initial","tail"],function(t,n){var e="drop"+(n?"":"Right");L.prototype[t]=function(){return this.__filtered__?new L(this):this[e](1)}}),L.prototype.compact=function(){return this.filter(fe)},L.prototype.find=function(t){return this.filter(t).head()},L.prototype.findLast=function(t){return this.reverse().find(t)},L.prototype.invokeMap=$n(function(t,n){return typeof t=="function"?new L(this):this.map(function(r){var u=t;return sn(u,r)||(u=kt(u),r=dn(r,u),u=wn(u)),u=null==r?r:r[bn(u)],null==u?pe:e(u,r,n)})}),L.prototype.reject=function(t){return t=Kt(t,3),this.filter(function(n){return!t(n)})},L.prototype.slice=function(t,n){t=Kn(t);var e=this;return e.__filtered__&&(t>0||0>n)?new L(e):(0>t?e=e.takeRight(-t):t&&(e=e.drop(t)),n!==pe&&(n=Kn(n),e=0>n?e.dropRight(-n):e.take(n-t)),e)},L.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},L.prototype.toArray=function(){return this.take(4294967295)},tt(L.prototype,function(t,n){var e=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),u=$[r?"take"+("last"==n?"Right":""):n],o=r||/^find/.test(n);u&&($.prototype[n]=function(){function n(t){return t=u.apply($,c([t],f)),r&&_?t[0]:t}var i=this.__wrapped__,f=r?[1]:arguments,a=i instanceof L,l=f[0],s=a||yu(i);s&&e&&typeof l=="function"&&1!=l.length&&(a=s=false);var _=this.__chain__,h=!!this.__actions__.length,l=o&&!_,a=a&&!h;return!o&&s?(i=a?i:new L(this),i=t.apply(i,f),i.__actions__.push({func:On,args:[n],thisArg:pe}),new C(i,_)):l&&a?t.apply(this,f):(i=this.thru(n),l?r?i.value()[0]:i.value():i)})}),r("pop push shift sort splice unshift".split(" "),function(t){var n=ir[t],e=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);$.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var u=this.value();return n.apply(yu(u)?u:[],t)}return this[e](function(e){return n.apply(yu(e)?e:[],t)})}}),tt(L.prototype,function(t,n){var e=$[n];if(e){var r=e.name+"";(Pr[r]||(Pr[r]=[])).push({name:n,func:e})}}),Pr[Wt(pe,2).name]=[{name:"wrapper",func:pe}],L.prototype.clone=function(){var t=new L(this.__wrapped__);return t.__actions__=zt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=zt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=zt(this.__views__),t},L.prototype.reverse=function(){if(this.__filtered__){var t=new L(this);t.__dir__=-1,t.__filtered__=true}else t=this.clone(),t.__dir__*=-1;return t},L.prototype.value=function(){var t,n=this.__wrapped__.value(),e=this.__dir__,r=yu(n),u=0>e,o=r?n.length:0;t=o;for(var i=this.__views__,f=0,a=-1,c=i.length;++a<c;){var l=i[a],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":t-=s;break;case"take":t=zr(t,f+s);break;case"takeRight":f=$r(f,t-s);}}if(t={start:f,end:t},i=t.start,f=t.end,t=f-i,u=u?f:i-1,i=this.__iteratees__,f=i.length,a=0,c=zr(t,this.__takeCount__),!r||200>o||o==t&&c==t)return Ot(n,this.__actions__);r=[];t:for(;t--&&c>a;){for(u+=e,o=-1,l=n[u];++o<f;){var _=i[o],s=_.type,_=(0,_.iteratee)(l);if(2==s)l=_;else if(!_){if(1==s)continue t;break t}}r[a++]=l}return r},$.prototype.at=su,$.prototype.chain=function(){return An(this)},$.prototype.commit=function(){return new C(this.value(),this.__chain__)},$.prototype.next=function(){this.__values__===pe&&(this.__values__=Gn(this.value()));var t=this.__index__>=this.__values__.length,n=t?pe:this.__values__[this.__index__++];return{done:t,value:n}},$.prototype.plant=function(t){for(var n,e=this;e instanceof z;){var r=yn(e);r.__index__=0,r.__values__=pe,n?u.__wrapped__=r:n=r;var u=r,e=e.__wrapped__}return u.__wrapped__=t,n},$.prototype.reverse=function(){var t=this.__wrapped__;return t instanceof L?(this.__actions__.length&&(t=new L(this)),t=t.reverse(),t.__actions__.push({func:On,args:[mn],thisArg:pe}),new C(t,this.__chain__)):this.thru(mn)},$.prototype.toJSON=$.prototype.valueOf=$.prototype.value=function(){return Ot(this.__wrapped__,this.__actions__)},Ar&&($.prototype[Ar]=kn),(rr||{})._=$,typeof define=="function"&&typeof define.amd=="object"&&define.amd?define(function(){return $}):nr?((nr.exports=$)._=$,tr._=$):or._=$;if(oldLodash){window.lodash=$.noConflict()}}).call(this);

})(getCurriedBundleDefineShim('utilities/vendor/lodash/4.13.1/js/lodash.custom.min', define));;(function(define){
typeof navigator!=="undefined"&&function(root,factory){if(typeof define==="function"&&define.amd){define(function(){return factory(root)})}else if(typeof module==="object"&&module.exports){module.exports=factory(root)}else{root.lottie=factory(root);root.bodymovin=root.lottie}}(window||{},function(window){"use strict";var svgNS="http://www.w3.org/2000/svg";var locationHref="";var initialDefaultFrame=-999999;var subframeEnabled=true;var expressionsPlugin;var isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);var cachedColors={};var bm_rounder=Math.round;var bm_rnd;var bm_pow=Math.pow;var bm_sqrt=Math.sqrt;var bm_abs=Math.abs;var bm_floor=Math.floor;var bm_max=Math.max;var bm_min=Math.min;var blitter=10;var BMMath={};(function(){var propertyNames=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"];var i,len=propertyNames.length;for(i=0;i<len;i+=1){BMMath[propertyNames[i]]=Math[propertyNames[i]]}})();function ProjectInterface(){return{}}BMMath.random=Math.random;BMMath.abs=function(val){var tOfVal=typeof val;if(tOfVal==="object"&&val.length){var absArr=createSizedArray(val.length);var i,len=val.length;for(i=0;i<len;i+=1){absArr[i]=Math.abs(val[i])}return absArr}return Math.abs(val)};var defaultCurveSegments=150;var degToRads=Math.PI/180;var roundCorner=0.5519;function roundValues(flag){if(flag){bm_rnd=Math.round}else{bm_rnd=function(val){return val}}}roundValues(false);function styleDiv(element){element.style.position="absolute";element.style.top=0;element.style.left=0;element.style.display="block";element.style.transformOrigin=element.style.webkitTransformOrigin="0 0";element.style.backfaceVisibility=element.style.webkitBackfaceVisibility="visible";element.style.transformStyle=element.style.webkitTransformStyle=element.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(n,c,t,d){this.type=n;this.currentTime=c;this.totalTime=t;this.direction=d<0?-1:1}function BMCompleteEvent(n,d){this.type=n;this.direction=d<0?-1:1}function BMCompleteLoopEvent(n,c,t,d){this.type=n;this.currentLoop=t;this.totalLoops=c;this.direction=d<0?-1:1}function BMSegmentStartEvent(n,f,t){this.type=n;this.firstFrame=f;this.totalFrames=t}function BMDestroyEvent(n,t){this.type=n;this.target=t}var createElementID=function(){var _count=0;return function createID(){return"__lottie_element_"+ ++_count}}();function HSVtoRGB(h,s,v){var r,g,b,i,f,p,q,t;i=Math.floor(h*6);f=h*6-i;p=v*(1-s);q=v*(1-f*s);t=v*(1-(1-f)*s);switch(i%6){case 0:r=v;g=t;b=p;break;case 1:r=q;g=v;b=p;break;case 2:r=p;g=v;b=t;break;case 3:r=p;g=q;b=v;break;case 4:r=t;g=p;b=v;break;case 5:r=v;g=p;b=q;break;}return[r,g,b]}function RGBtoHSV(r,g,b){var max=Math.max(r,g,b),min=Math.min(r,g,b),d=max-min,h,s=max===0?0:d/max,v=max/255;switch(max){case min:h=0;break;case r:h=g-b+d*(g<b?6:0);h/=6*d;break;case g:h=b-r+d*2;h/=6*d;break;case b:h=r-g+d*4;h/=6*d;break;}return[h,s,v]}function addSaturationToRGB(color,offset){var hsv=RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);hsv[1]+=offset;if(hsv[1]>1){hsv[1]=1}else if(hsv[1]<=0){hsv[1]=0}return HSVtoRGB(hsv[0],hsv[1],hsv[2])}function addBrightnessToRGB(color,offset){var hsv=RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);hsv[2]+=offset;if(hsv[2]>1){hsv[2]=1}else if(hsv[2]<0){hsv[2]=0}return HSVtoRGB(hsv[0],hsv[1],hsv[2])}function addHueToRGB(color,offset){var hsv=RGBtoHSV(color[0]*255,color[1]*255,color[2]*255);hsv[0]+=offset/360;if(hsv[0]>1){hsv[0]-=1}else if(hsv[0]<0){hsv[0]+=1}return HSVtoRGB(hsv[0],hsv[1],hsv[2])}var rgbToHex=function(){var colorMap=[];var i;var hex;for(i=0;i<256;i+=1){hex=i.toString(16);colorMap[i]=hex.length==1?"0"+hex:hex}return function(r,g,b){if(r<0){r=0}if(g<0){g=0}if(b<0){b=0}return"#"+colorMap[r]+colorMap[g]+colorMap[b]}}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(eventName,args){if(this._cbs[eventName]){var len=this._cbs[eventName].length;for(var i=0;i<len;i++){this._cbs[eventName][i](args)}}},addEventListener:function(eventName,callback){if(!this._cbs[eventName]){this._cbs[eventName]=[]}this._cbs[eventName].push(callback);return function(){this.removeEventListener(eventName,callback)}.bind(this)},removeEventListener:function(eventName,callback){if(!callback){this._cbs[eventName]=null}else if(this._cbs[eventName]){var i=0,len=this._cbs[eventName].length;while(i<len){if(this._cbs[eventName][i]===callback){this._cbs[eventName].splice(i,1);i-=1;len-=1}i+=1}if(!this._cbs[eventName].length){this._cbs[eventName]=null}}}};var createTypedArray=function(){function createRegularArray(type,len){var i=0,arr=[],value;switch(type){case"int16":case"uint8c":value=1;break;default:value=1.1;break;}for(i=0;i<len;i+=1){arr.push(value)}return arr}function createTypedArray(type,len){if(type==="float32"){return new Float32Array(len)}else if(type==="int16"){return new Int16Array(len)}else if(type==="uint8c"){return new Uint8ClampedArray(len)}}if(typeof Uint8ClampedArray==="function"&&typeof Float32Array==="function"){return createTypedArray}else{return createRegularArray}}();function createSizedArray(len){return Array.apply(null,{length:len})}function createNS(type){return document.createElementNS(svgNS,type)}function createTag(type){return document.createElement(type)}function DynamicPropertyContainer(){};DynamicPropertyContainer.prototype={addDynamicProperty:function(prop){if(this.dynamicProperties.indexOf(prop)===-1){this.dynamicProperties.push(prop);this.container.addDynamicProperty(this);this._isAnimated=true}},iterateDynamicProperties:function(){this._mdf=false;var i,len=this.dynamicProperties.length;for(i=0;i<len;i+=1){this.dynamicProperties[i].getValue();if(this.dynamicProperties[i]._mdf){this._mdf=true}}},initDynamicPropertyContainer:function(container){this.container=container;this.dynamicProperties=[];this._mdf=false;this._isAnimated=false}};var getBlendMode=function(){var blendModeEnums={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(mode){return blendModeEnums[mode]||""}}();var Matrix=function(){var _cos=Math.cos;var _sin=Math.sin;var _tan=Math.tan;var _rnd=Math.round;function reset(){this.props[0]=1;this.props[1]=0;this.props[2]=0;this.props[3]=0;this.props[4]=0;this.props[5]=1;this.props[6]=0;this.props[7]=0;this.props[8]=0;this.props[9]=0;this.props[10]=1;this.props[11]=0;this.props[12]=0;this.props[13]=0;this.props[14]=0;this.props[15]=1;return this}function rotate(angle){if(angle===0){return this}var mCos=_cos(angle);var mSin=_sin(angle);return this._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function rotateX(angle){if(angle===0){return this}var mCos=_cos(angle);var mSin=_sin(angle);return this._t(1,0,0,0,0,mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1)}function rotateY(angle){if(angle===0){return this}var mCos=_cos(angle);var mSin=_sin(angle);return this._t(mCos,0,mSin,0,0,1,0,0,-mSin,0,mCos,0,0,0,0,1)}function rotateZ(angle){if(angle===0){return this}var mCos=_cos(angle);var mSin=_sin(angle);return this._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function shear(sx,sy){return this._t(1,sy,sx,1,0,0)}function skew(ax,ay){return this.shear(_tan(ax),_tan(ay))}function skewFromAxis(ax,angle){var mCos=_cos(angle);var mSin=_sin(angle);return this._t(mCos,mSin,0,0,-mSin,mCos,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,_tan(ax),1,0,0,0,0,1,0,0,0,0,1)._t(mCos,-mSin,0,0,mSin,mCos,0,0,0,0,1,0,0,0,0,1)}function scale(sx,sy,sz){if(!sz&&sz!==0){sz=1}if(sx===1&&sy===1&&sz===1){return this}return this._t(sx,0,0,0,0,sy,0,0,0,0,sz,0,0,0,0,1)}function setTransform(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.props[0]=a;this.props[1]=b;this.props[2]=c;this.props[3]=d;this.props[4]=e;this.props[5]=f;this.props[6]=g;this.props[7]=h;this.props[8]=i;this.props[9]=j;this.props[10]=k;this.props[11]=l;this.props[12]=m;this.props[13]=n;this.props[14]=o;this.props[15]=p;return this}function translate(tx,ty,tz){tz=tz||0;if(tx!==0||ty!==0||tz!==0){return this._t(1,0,0,0,0,1,0,0,0,0,1,0,tx,ty,tz,1)}return this}function transform(a2,b2,c2,d2,e2,f2,g2,h2,i2,j2,k2,l2,m2,n2,o2,p2){var _p=this.props;if(a2===1&&b2===0&&c2===0&&d2===0&&e2===0&&f2===1&&g2===0&&h2===0&&i2===0&&j2===0&&k2===1&&l2===0){_p[12]=_p[12]*a2+_p[15]*m2;_p[13]=_p[13]*f2+_p[15]*n2;_p[14]=_p[14]*k2+_p[15]*o2;_p[15]=_p[15]*p2;this._identityCalculated=false;return this}var a1=_p[0];var b1=_p[1];var c1=_p[2];var d1=_p[3];var e1=_p[4];var f1=_p[5];var g1=_p[6];var h1=_p[7];var i1=_p[8];var j1=_p[9];var k1=_p[10];var l1=_p[11];var m1=_p[12];var n1=_p[13];var o1=_p[14];var p1=_p[15];_p[0]=a1*a2+b1*e2+c1*i2+d1*m2;_p[1]=a1*b2+b1*f2+c1*j2+d1*n2;_p[2]=a1*c2+b1*g2+c1*k2+d1*o2;_p[3]=a1*d2+b1*h2+c1*l2+d1*p2;_p[4]=e1*a2+f1*e2+g1*i2+h1*m2;_p[5]=e1*b2+f1*f2+g1*j2+h1*n2;_p[6]=e1*c2+f1*g2+g1*k2+h1*o2;_p[7]=e1*d2+f1*h2+g1*l2+h1*p2;_p[8]=i1*a2+j1*e2+k1*i2+l1*m2;_p[9]=i1*b2+j1*f2+k1*j2+l1*n2;_p[10]=i1*c2+j1*g2+k1*k2+l1*o2;_p[11]=i1*d2+j1*h2+k1*l2+l1*p2;_p[12]=m1*a2+n1*e2+o1*i2+p1*m2;_p[13]=m1*b2+n1*f2+o1*j2+p1*n2;_p[14]=m1*c2+n1*g2+o1*k2+p1*o2;_p[15]=m1*d2+n1*h2+o1*l2+p1*p2;this._identityCalculated=false;return this}function isIdentity(){if(!this._identityCalculated){this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1);this._identityCalculated=true}return this._identity}function equals(matr){var i=0;while(i<16){if(matr.props[i]!==this.props[i]){return false}i+=1}return true}function clone(matr){var i;for(i=0;i<16;i+=1){matr.props[i]=this.props[i]}}function cloneFromProps(props){var i;for(i=0;i<16;i+=1){this.props[i]=props[i]}}function applyToPoint(x,y,z){return{x:x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12],y:x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13],z:x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]}}function applyToX(x,y,z){return x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12]}function applyToY(x,y,z){return x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13]}function applyToZ(x,y,z){return x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]}function inversePoint(pt){var determinant=this.props[0]*this.props[5]-this.props[1]*this.props[4];var a=this.props[5]/determinant;var b=-this.props[1]/determinant;var c=-this.props[4]/determinant;var d=this.props[0]/determinant;var e=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/determinant;var f=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/determinant;return[pt[0]*a+pt[1]*c+e,pt[0]*b+pt[1]*d+f,0]}function inversePoints(pts){var i,len=pts.length,retPts=[];for(i=0;i<len;i+=1){retPts[i]=inversePoint(pts[i])}return retPts}function applyToTriplePoints(pt1,pt2,pt3){var arr=createTypedArray("float32",6);if(this.isIdentity()){arr[0]=pt1[0];arr[1]=pt1[1];arr[2]=pt2[0];arr[3]=pt2[1];arr[4]=pt3[0];arr[5]=pt3[1]}else{var p0=this.props[0],p1=this.props[1],p4=this.props[4],p5=this.props[5],p12=this.props[12],p13=this.props[13];arr[0]=pt1[0]*p0+pt1[1]*p4+p12;arr[1]=pt1[0]*p1+pt1[1]*p5+p13;arr[2]=pt2[0]*p0+pt2[1]*p4+p12;arr[3]=pt2[0]*p1+pt2[1]*p5+p13;arr[4]=pt3[0]*p0+pt3[1]*p4+p12;arr[5]=pt3[0]*p1+pt3[1]*p5+p13}return arr}function applyToPointArray(x,y,z){var arr;if(this.isIdentity()){arr=[x,y,z]}else{arr=[x*this.props[0]+y*this.props[4]+z*this.props[8]+this.props[12],x*this.props[1]+y*this.props[5]+z*this.props[9]+this.props[13],x*this.props[2]+y*this.props[6]+z*this.props[10]+this.props[14]]}return arr}function applyToPointStringified(x,y){if(this.isIdentity()){return x+","+y}var _p=this.props;return Math.round((x*_p[0]+y*_p[4]+_p[12])*100)/100+","+Math.round((x*_p[1]+y*_p[5]+_p[13])*100)/100}function toCSS(){var i=0;var props=this.props;var cssValue="matrix3d(";var v=10000;while(i<16){cssValue+=_rnd(props[i]*v)/v;cssValue+=i===15?")":",";i+=1}return cssValue}function roundMatrixProperty(val){var v=10000;if(val<0.000001&&val>0||val>-0.000001&&val<0){return _rnd(val*v)/v}return val}function to2dCSS(){var props=this.props;var _a=roundMatrixProperty(props[0]);var _b=roundMatrixProperty(props[1]);var _c=roundMatrixProperty(props[4]);var _d=roundMatrixProperty(props[5]);var _e=roundMatrixProperty(props[12]);var _f=roundMatrixProperty(props[13]);return"matrix("+_a+","+_b+","+_c+","+_d+","+_e+","+_f+")"}return function(){this.reset=reset;this.rotate=rotate;this.rotateX=rotateX;this.rotateY=rotateY;this.rotateZ=rotateZ;this.skew=skew;this.skewFromAxis=skewFromAxis;this.shear=shear;this.scale=scale;this.setTransform=setTransform;this.translate=translate;this.transform=transform;this.applyToPoint=applyToPoint;this.applyToX=applyToX;this.applyToY=applyToY;this.applyToZ=applyToZ;this.applyToPointArray=applyToPointArray;this.applyToTriplePoints=applyToTriplePoints;this.applyToPointStringified=applyToPointStringified;this.toCSS=toCSS;this.to2dCSS=to2dCSS;this.clone=clone;this.cloneFromProps=cloneFromProps;this.equals=equals;this.inversePoints=inversePoints;this.inversePoint=inversePoint;this._t=this.transform;this.isIdentity=isIdentity;this._identity=true;this._identityCalculated=false;this.props=createTypedArray("float32",16);this.reset()}}();(function(pool,math){var global=this,width=256,chunks=6,digits=52,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,nodecrypto;function seedrandom(seed,options,callback){var key=[];options=options===true?{entropy:true}:options||{};var shortseed=mixkey(flatten(options.entropy?[seed,tostring(pool)]:seed===null?autoseed():seed,3),key);var arc4=new ARC4(key);var prng=function(){var n=arc4.g(chunks),d=startdenom,x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};prng.int32=function(){return arc4.g(4)|0};prng.quick=function(){return arc4.g(4)/4294967296};prng.double=prng;mixkey(tostring(arc4.S),pool);return(options.pass||callback||function(prng,seed,is_math_call,state){if(state){if(state.S){copy(state,arc4)}prng.state=function(){return copy(arc4,{})}}if(is_math_call){math[rngname]=prng;return seed}else return prng})(prng,shortseed,"global"in options?options.global:this==math,options.state)}math["seed"+rngname]=seedrandom;function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];if(!keylen){key=[keylen++]}while(i<width){s[i]=i++}for(i=0;i<width;i++){s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])];s[j]=t}me.g=function(count){var t,r=0,i=me.i,j=me.j,s=me.S;while(count--){t=s[i=mask&i+1];r=r*width+s[mask&(s[i]=s[j=mask&j+t])+(s[j]=t)]}me.i=i;me.j=j;return r}}function copy(f,t){t.i=f.i;t.j=f.j;t.S=f.S.slice();return t}function flatten(obj,depth){var result=[],typ=typeof obj,prop;if(depth&&typ=="object"){for(prop in obj){try{result.push(flatten(obj[prop],depth-1))}catch(e){}}}return result.length?result:typ=="string"?obj:obj+"\0"}function mixkey(seed,key){var stringseed=seed+"",smear,j=0;while(j<stringseed.length){key[mask&j]=mask&(smear^=key[mask&j]*19)+stringseed.charCodeAt(j++)}return tostring(key)}function autoseed(){try{if(nodecrypto){return tostring(nodecrypto.randomBytes(width))}var out=new Uint8Array(width);(global.crypto||global.msCrypto).getRandomValues(out);return tostring(out)}catch(e){var browser=global.navigator,plugins=browser&&browser.plugins;return[+new Date,global,plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}mixkey(math.random(),pool)})([],BMMath);var BezierFactory=function(){var ob={};ob.getBezierEasing=getBezierEasing;var beziers={};function getBezierEasing(a,b,c,d,nm){var str=nm||("bez_"+a+"_"+b+"_"+c+"_"+d).replace(/\./g,"p");if(beziers[str]){return beziers[str]}var bezEasing=new BezierEasing([a,b,c,d]);beziers[str]=bezEasing;return bezEasing}var NEWTON_ITERATIONS=4;var NEWTON_MIN_SLOPE=0.001;var SUBDIVISION_PRECISION=1e-7;var SUBDIVISION_MAX_ITERATIONS=10;var kSplineTableSize=11;var kSampleStepSize=1/(kSplineTableSize-1);var float32ArraySupported=typeof Float32Array==="function";function A(aA1,aA2){return 1-3*aA2+3*aA1}function B(aA1,aA2){return 3*aA2-6*aA1}function C(aA1){return 3*aA1}function calcBezier(aT,aA1,aA2){return((A(aA1,aA2)*aT+B(aA1,aA2))*aT+C(aA1))*aT}function getSlope(aT,aA1,aA2){return 3*A(aA1,aA2)*aT*aT+2*B(aA1,aA2)*aT+C(aA1)}function binarySubdivide(aX,aA,aB,mX1,mX2){var currentX,currentT,i=0;do{currentT=aA+(aB-aA)/2;currentX=calcBezier(currentT,mX1,mX2)-aX;if(currentX>0){aB=currentT}else{aA=currentT}}while(Math.abs(currentX)>SUBDIVISION_PRECISION&&++i<SUBDIVISION_MAX_ITERATIONS);return currentT}function newtonRaphsonIterate(aX,aGuessT,mX1,mX2){for(var i=0;i<NEWTON_ITERATIONS;++i){var currentSlope=getSlope(aGuessT,mX1,mX2);if(currentSlope===0)return aGuessT;var currentX=calcBezier(aGuessT,mX1,mX2)-aX;aGuessT-=currentX/currentSlope}return aGuessT}function BezierEasing(points){this._p=points;this._mSampleValues=float32ArraySupported?new Float32Array(kSplineTableSize):new Array(kSplineTableSize);this._precomputed=false;this.get=this.get.bind(this)}BezierEasing.prototype={get:function(x){var mX1=this._p[0],mY1=this._p[1],mX2=this._p[2],mY2=this._p[3];if(!this._precomputed)this._precompute();if(mX1===mY1&&mX2===mY2)return x;if(x===0)return 0;if(x===1)return 1;return calcBezier(this._getTForX(x),mY1,mY2)},_precompute:function(){var mX1=this._p[0],mY1=this._p[1],mX2=this._p[2],mY2=this._p[3];this._precomputed=true;if(mX1!==mY1||mX2!==mY2)this._calcSampleValues()},_calcSampleValues:function(){var mX1=this._p[0],mX2=this._p[2];for(var i=0;i<kSplineTableSize;++i){this._mSampleValues[i]=calcBezier(i*kSampleStepSize,mX1,mX2)}},_getTForX:function(aX){var mX1=this._p[0],mX2=this._p[2],mSampleValues=this._mSampleValues;var intervalStart=0;var currentSample=1;var lastSample=kSplineTableSize-1;for(;currentSample!==lastSample&&mSampleValues[currentSample]<=aX;++currentSample){intervalStart+=kSampleStepSize}--currentSample;var dist=(aX-mSampleValues[currentSample])/(mSampleValues[currentSample+1]-mSampleValues[currentSample]);var guessForT=intervalStart+dist*kSampleStepSize;var initialSlope=getSlope(guessForT,mX1,mX2);if(initialSlope>=NEWTON_MIN_SLOPE){return newtonRaphsonIterate(aX,guessForT,mX1,mX2)}else if(initialSlope===0){return guessForT}else{return binarySubdivide(aX,intervalStart,intervalStart+kSampleStepSize,mX1,mX2)}}};return ob}();(function(){var lastTime=0;var vendors=["ms","moz","webkit","o"];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+"RequestAnimationFrame"];window.cancelAnimationFrame=window[vendors[x]+"CancelAnimationFrame"]||window[vendors[x]+"CancelRequestAnimationFrame"]}if(!window.requestAnimationFrame)window.requestAnimationFrame=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=setTimeout(function(){callback(currTime+timeToCall)},timeToCall);lastTime=currTime+timeToCall;return id};if(!window.cancelAnimationFrame)window.cancelAnimationFrame=function(id){clearTimeout(id)}})();function extendPrototype(sources,destination){var i,len=sources.length,sourcePrototype;for(i=0;i<len;i+=1){sourcePrototype=sources[i].prototype;for(var attr in sourcePrototype){if(sourcePrototype.hasOwnProperty(attr))destination.prototype[attr]=sourcePrototype[attr]}}}function getDescriptor(object,prop){return Object.getOwnPropertyDescriptor(object,prop)}function createProxyFunction(prototype){function ProxyFunction(){}ProxyFunction.prototype=prototype;return ProxyFunction}function bezFunction(){var easingFunctions=[];var math=Math;function pointOnLine2D(x1,y1,x2,y2,x3,y3){var det1=x1*y2+y1*x3+x2*y3-x3*y2-y3*x1-x2*y1;return det1>-0.001&&det1<0.001}function pointOnLine3D(x1,y1,z1,x2,y2,z2,x3,y3,z3){if(z1===0&&z2===0&&z3===0){return pointOnLine2D(x1,y1,x2,y2,x3,y3)}var dist1=Math.sqrt(Math.pow(x2-x1,2)+Math.pow(y2-y1,2)+Math.pow(z2-z1,2));var dist2=Math.sqrt(Math.pow(x3-x1,2)+Math.pow(y3-y1,2)+Math.pow(z3-z1,2));var dist3=Math.sqrt(Math.pow(x3-x2,2)+Math.pow(y3-y2,2)+Math.pow(z3-z2,2));var diffDist;if(dist1>dist2){if(dist1>dist3){diffDist=dist1-dist2-dist3}else{diffDist=dist3-dist2-dist1}}else if(dist3>dist2){diffDist=dist3-dist2-dist1}else{diffDist=dist2-dist1-dist3}return diffDist>-0.0001&&diffDist<0.0001}var getBezierLength=function(){return function(pt1,pt2,pt3,pt4){var curveSegments=defaultCurveSegments;var k;var i,len;var ptCoord,perc,addedLength=0;var ptDistance;var point=[],lastPoint=[];var lengthData=bezier_length_pool.newElement();len=pt3.length;for(k=0;k<curveSegments;k+=1){perc=k/(curveSegments-1);ptDistance=0;for(i=0;i<len;i+=1){ptCoord=bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*pt3[i]+3*(1-perc)*bm_pow(perc,2)*pt4[i]+bm_pow(perc,3)*pt2[i];point[i]=ptCoord;if(lastPoint[i]!==null){ptDistance+=bm_pow(point[i]-lastPoint[i],2)}lastPoint[i]=point[i]}if(ptDistance){ptDistance=bm_sqrt(ptDistance);addedLength+=ptDistance}lengthData.percents[k]=perc;lengthData.lengths[k]=addedLength}lengthData.addedLength=addedLength;return lengthData}}();function getSegmentsLength(shapeData){var segmentsLength=segments_length_pool.newElement();var closed=shapeData.c;var pathV=shapeData.v;var pathO=shapeData.o;var pathI=shapeData.i;var i,len=shapeData._length;var lengths=segmentsLength.lengths;var totalLength=0;for(i=0;i<len-1;i+=1){lengths[i]=getBezierLength(pathV[i],pathV[i+1],pathO[i],pathI[i+1]);totalLength+=lengths[i].addedLength}if(closed&&len){lengths[i]=getBezierLength(pathV[i],pathV[0],pathO[i],pathI[0]);totalLength+=lengths[i].addedLength}segmentsLength.totalLength=totalLength;return segmentsLength}function BezierData(length){this.segmentLength=0;this.points=new Array(length)}function PointData(partial,point){this.partialLength=partial;this.point=point}var buildBezierData=function(){var storedData={};return function(pt1,pt2,pt3,pt4){var bezierName=(pt1[0]+"_"+pt1[1]+"_"+pt2[0]+"_"+pt2[1]+"_"+pt3[0]+"_"+pt3[1]+"_"+pt4[0]+"_"+pt4[1]).replace(/\./g,"p");if(!storedData[bezierName]){var curveSegments=defaultCurveSegments;var k,i,len;var ptCoord,perc,addedLength=0;var ptDistance;var point,lastPoint=null;if(pt1.length===2&&(pt1[0]!=pt2[0]||pt1[1]!=pt2[1])&&pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt1[0]+pt3[0],pt1[1]+pt3[1])&&pointOnLine2D(pt1[0],pt1[1],pt2[0],pt2[1],pt2[0]+pt4[0],pt2[1]+pt4[1])){curveSegments=2}var bezierData=new BezierData(curveSegments);len=pt3.length;for(k=0;k<curveSegments;k+=1){point=createSizedArray(len);perc=k/(curveSegments-1);ptDistance=0;for(i=0;i<len;i+=1){ptCoord=bm_pow(1-perc,3)*pt1[i]+3*bm_pow(1-perc,2)*perc*(pt1[i]+pt3[i])+3*(1-perc)*bm_pow(perc,2)*(pt2[i]+pt4[i])+bm_pow(perc,3)*pt2[i];point[i]=ptCoord;if(lastPoint!==null){ptDistance+=bm_pow(point[i]-lastPoint[i],2)}}ptDistance=bm_sqrt(ptDistance);addedLength+=ptDistance;bezierData.points[k]=new PointData(ptDistance,point);lastPoint=point}bezierData.segmentLength=addedLength;storedData[bezierName]=bezierData}return storedData[bezierName]}}();function getDistancePerc(perc,bezierData){var percents=bezierData.percents;var lengths=bezierData.lengths;var len=percents.length;var initPos=bm_floor((len-1)*perc);var lengthPos=perc*bezierData.addedLength;var lPerc=0;if(initPos===len-1||initPos===0||lengthPos===lengths[initPos]){return percents[initPos]}else{var dir=lengths[initPos]>lengthPos?-1:1;var flag=true;while(flag){if(lengths[initPos]<=lengthPos&&lengths[initPos+1]>lengthPos){lPerc=(lengthPos-lengths[initPos])/(lengths[initPos+1]-lengths[initPos]);flag=false}else{initPos+=dir}if(initPos<0||initPos>=len-1){if(initPos===len-1){return percents[initPos]}flag=false}}return percents[initPos]+(percents[initPos+1]-percents[initPos])*lPerc}}function getPointInSegment(pt1,pt2,pt3,pt4,percent,bezierData){var t1=getDistancePerc(percent,bezierData);var u0=1;var u1=1-t1;var ptX=Math.round((u1*u1*u1*pt1[0]+(t1*u1*u1+u1*t1*u1+u1*u1*t1)*pt3[0]+(t1*t1*u1+u1*t1*t1+t1*u1*t1)*pt4[0]+t1*t1*t1*pt2[0])*1000)/1000;var ptY=Math.round((u1*u1*u1*pt1[1]+(t1*u1*u1+u1*t1*u1+u1*u1*t1)*pt3[1]+(t1*t1*u1+u1*t1*t1+t1*u1*t1)*pt4[1]+t1*t1*t1*pt2[1])*1000)/1000;return[ptX,ptY]}function getSegmentArray(){}var bezier_segment_points=createTypedArray("float32",8);function getNewSegment(pt1,pt2,pt3,pt4,startPerc,endPerc,bezierData){startPerc=startPerc<0?0:startPerc>1?1:startPerc;var t0=getDistancePerc(startPerc,bezierData);endPerc=endPerc>1?1:endPerc;var t1=getDistancePerc(endPerc,bezierData);var i,len=pt1.length;var u0=1-t0;var u1=1-t1;var u0u0u0=u0*u0*u0;var t0u0u0_3=t0*u0*u0*3;var t0t0u0_3=t0*t0*u0*3;var t0t0t0=t0*t0*t0;var u0u0u1=u0*u0*u1;var t0u0u1_3=t0*u0*u1+u0*t0*u1+u0*u0*t1;var t0t0u1_3=t0*t0*u1+u0*t0*t1+t0*u0*t1;var t0t0t1=t0*t0*t1;var u0u1u1=u0*u1*u1;var t0u1u1_3=t0*u1*u1+u0*t1*u1+u0*u1*t1;var t0t1u1_3=t0*t1*u1+u0*t1*t1+t0*u1*t1;var t0t1t1=t0*t1*t1;var u1u1u1=u1*u1*u1;var t1u1u1_3=t1*u1*u1+u1*t1*u1+u1*u1*t1;var t1t1u1_3=t1*t1*u1+u1*t1*t1+t1*u1*t1;var t1t1t1=t1*t1*t1;for(i=0;i<len;i+=1){bezier_segment_points[i*4]=Math.round((u0u0u0*pt1[i]+t0u0u0_3*pt3[i]+t0t0u0_3*pt4[i]+t0t0t0*pt2[i])*1000)/1000;bezier_segment_points[i*4+1]=Math.round((u0u0u1*pt1[i]+t0u0u1_3*pt3[i]+t0t0u1_3*pt4[i]+t0t0t1*pt2[i])*1000)/1000;bezier_segment_points[i*4+2]=Math.round((u0u1u1*pt1[i]+t0u1u1_3*pt3[i]+t0t1u1_3*pt4[i]+t0t1t1*pt2[i])*1000)/1000;bezier_segment_points[i*4+3]=Math.round((u1u1u1*pt1[i]+t1u1u1_3*pt3[i]+t1t1u1_3*pt4[i]+t1t1t1*pt2[i])*1000)/1000}return bezier_segment_points}return{getSegmentsLength:getSegmentsLength,getNewSegment:getNewSegment,getPointInSegment:getPointInSegment,buildBezierData:buildBezierData,pointOnLine2D:pointOnLine2D,pointOnLine3D:pointOnLine3D}}var bez=bezFunction();function dataFunctionManager(){function completeLayers(layers,comps,fontManager){var layerData;var animArray,lastFrame;var i,len=layers.length;var j,jLen,k,kLen;for(i=0;i<len;i+=1){layerData=layers[i];if(!("ks"in layerData)||layerData.completed){continue}layerData.completed=true;if(layerData.tt){layers[i-1].td=layerData.tt}animArray=[];lastFrame=-1;if(layerData.hasMask){var maskProps=layerData.masksProperties;jLen=maskProps.length;for(j=0;j<jLen;j+=1){if(maskProps[j].pt.k.i){convertPathsToAbsoluteValues(maskProps[j].pt.k)}else{kLen=maskProps[j].pt.k.length;for(k=0;k<kLen;k+=1){if(maskProps[j].pt.k[k].s){convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0])}if(maskProps[j].pt.k[k].e){convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0])}}}}}if(layerData.ty===0){layerData.layers=findCompLayers(layerData.refId,comps);completeLayers(layerData.layers,comps,fontManager)}else if(layerData.ty===4){completeShapes(layerData.shapes)}else if(layerData.ty==5){completeText(layerData,fontManager)}}}function findCompLayers(id,comps){var i=0,len=comps.length;while(i<len){if(comps[i].id===id){if(!comps[i].layers.__used){comps[i].layers.__used=true;return comps[i].layers}return JSON.parse(JSON.stringify(comps[i].layers))}i+=1}}function completeShapes(arr){var i,len=arr.length;var j,jLen;var hasPaths=false;for(i=len-1;i>=0;i-=1){if(arr[i].ty=="sh"){if(arr[i].ks.k.i){convertPathsToAbsoluteValues(arr[i].ks.k)}else{jLen=arr[i].ks.k.length;for(j=0;j<jLen;j+=1){if(arr[i].ks.k[j].s){convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0])}if(arr[i].ks.k[j].e){convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0])}}}hasPaths=true}else if(arr[i].ty=="gr"){completeShapes(arr[i].it)}}}function convertPathsToAbsoluteValues(path){var i,len=path.i.length;for(i=0;i<len;i+=1){path.i[i][0]+=path.v[i][0];path.i[i][1]+=path.v[i][1];path.o[i][0]+=path.v[i][0];path.o[i][1]+=path.v[i][1]}}function checkVersion(minimum,animVersionString){var animVersion=animVersionString?animVersionString.split("."):[100,100,100];if(minimum[0]>animVersion[0]){return true}else if(animVersion[0]>minimum[0]){return false}if(minimum[1]>animVersion[1]){return true}else if(animVersion[1]>minimum[1]){return false}if(minimum[2]>animVersion[2]){return true}else if(animVersion[2]>minimum[2]){return false}}var checkText=function(){var minimumVersion=[4,4,14];function updateTextLayer(textLayer){var documentData=textLayer.t.d;textLayer.t.d={k:[{s:documentData,t:0}]}}function iterateLayers(layers){var i,len=layers.length;for(i=0;i<len;i+=1){if(layers[i].ty===5){updateTextLayer(layers[i])}}}return function(animationData){if(checkVersion(minimumVersion,animationData.v)){iterateLayers(animationData.layers);if(animationData.assets){var i,len=animationData.assets.length;for(i=0;i<len;i+=1){if(animationData.assets[i].layers){iterateLayers(animationData.assets[i].layers)}}}}}}();var checkChars=function(){var minimumVersion=[4,7,99];return function(animationData){if(animationData.chars&&!checkVersion(minimumVersion,animationData.v)){var i,len=animationData.chars.length,j,jLen,k,kLen;var pathData,paths;for(i=0;i<len;i+=1){if(animationData.chars[i].data&&animationData.chars[i].data.shapes){paths=animationData.chars[i].data.shapes[0].it;jLen=paths.length;for(j=0;j<jLen;j+=1){pathData=paths[j].ks.k;if(!pathData.__converted){convertPathsToAbsoluteValues(paths[j].ks.k);pathData.__converted=true}}}}}}}();var checkColors=function(){var minimumVersion=[4,1,9];function iterateShapes(shapes){var i,len=shapes.length;var j,jLen;for(i=0;i<len;i+=1){if(shapes[i].ty==="gr"){iterateShapes(shapes[i].it)}else if(shapes[i].ty==="fl"||shapes[i].ty==="st"){if(shapes[i].c.k&&shapes[i].c.k[0].i){jLen=shapes[i].c.k.length;for(j=0;j<jLen;j+=1){if(shapes[i].c.k[j].s){shapes[i].c.k[j].s[0]/=255;shapes[i].c.k[j].s[1]/=255;shapes[i].c.k[j].s[2]/=255;shapes[i].c.k[j].s[3]/=255}if(shapes[i].c.k[j].e){shapes[i].c.k[j].e[0]/=255;shapes[i].c.k[j].e[1]/=255;shapes[i].c.k[j].e[2]/=255;shapes[i].c.k[j].e[3]/=255}}}else{shapes[i].c.k[0]/=255;shapes[i].c.k[1]/=255;shapes[i].c.k[2]/=255;shapes[i].c.k[3]/=255}}}}function iterateLayers(layers){var i,len=layers.length;for(i=0;i<len;i+=1){if(layers[i].ty===4){iterateShapes(layers[i].shapes)}}}return function(animationData){if(checkVersion(minimumVersion,animationData.v)){iterateLayers(animationData.layers);if(animationData.assets){var i,len=animationData.assets.length;for(i=0;i<len;i+=1){if(animationData.assets[i].layers){iterateLayers(animationData.assets[i].layers)}}}}}}();var checkShapes=function(){var minimumVersion=[4,4,18];function completeShapes(arr){var i,len=arr.length;var j,jLen;var hasPaths=false;for(i=len-1;i>=0;i-=1){if(arr[i].ty=="sh"){if(arr[i].ks.k.i){arr[i].ks.k.c=arr[i].closed}else{jLen=arr[i].ks.k.length;for(j=0;j<jLen;j+=1){if(arr[i].ks.k[j].s){arr[i].ks.k[j].s[0].c=arr[i].closed}if(arr[i].ks.k[j].e){arr[i].ks.k[j].e[0].c=arr[i].closed}}}hasPaths=true}else if(arr[i].ty=="gr"){completeShapes(arr[i].it)}}}function iterateLayers(layers){var layerData;var i,len=layers.length;var j,jLen,k,kLen;for(i=0;i<len;i+=1){layerData=layers[i];if(layerData.hasMask){var maskProps=layerData.masksProperties;jLen=maskProps.length;for(j=0;j<jLen;j+=1){if(maskProps[j].pt.k.i){maskProps[j].pt.k.c=maskProps[j].cl}else{kLen=maskProps[j].pt.k.length;for(k=0;k<kLen;k+=1){if(maskProps[j].pt.k[k].s){maskProps[j].pt.k[k].s[0].c=maskProps[j].cl}if(maskProps[j].pt.k[k].e){maskProps[j].pt.k[k].e[0].c=maskProps[j].cl}}}}}if(layerData.ty===4){completeShapes(layerData.shapes)}}}return function(animationData){if(checkVersion(minimumVersion,animationData.v)){iterateLayers(animationData.layers);if(animationData.assets){var i,len=animationData.assets.length;for(i=0;i<len;i+=1){if(animationData.assets[i].layers){iterateLayers(animationData.assets[i].layers)}}}}}}();function completeData(animationData,fontManager){if(animationData.__complete){return}checkColors(animationData);checkText(animationData);checkChars(animationData);checkShapes(animationData);completeLayers(animationData.layers,animationData.assets,fontManager);animationData.__complete=true}function completeText(data,fontManager){if(data.t.a.length===0&&!("m"in data.t.p)){data.singleShape=true}}var moduleOb={};moduleOb.completeData=completeData;return moduleOb}var dataManager=dataFunctionManager();var FontManager=function(){var maxWaitingTime=5000;var emptyChar={w:0,size:0,shapes:[]};var combinedCharacters=[];combinedCharacters=combinedCharacters.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);function setUpNode(font,family){var parentNode=createTag("span");parentNode.style.fontFamily=family;var node=createTag("span");node.innerHTML="giItT1WQy@!-/#";parentNode.style.position="absolute";parentNode.style.left="-10000px";parentNode.style.top="-10000px";parentNode.style.fontSize="300px";parentNode.style.fontVariant="normal";parentNode.style.fontStyle="normal";parentNode.style.fontWeight="normal";parentNode.style.letterSpacing="0";parentNode.appendChild(node);document.body.appendChild(parentNode);var width=node.offsetWidth;node.style.fontFamily=font+", "+family;return{node:node,w:width,parent:parentNode}}function checkLoadedFonts(){var i,len=this.fonts.length;var node,w;var loadedCount=len;for(i=0;i<len;i+=1){if(this.fonts[i].loaded){loadedCount-=1;continue}if(this.fonts[i].fOrigin==="n"||this.fonts[i].origin===0){this.fonts[i].loaded=true}else{node=this.fonts[i].monoCase.node;w=this.fonts[i].monoCase.w;if(node.offsetWidth!==w){loadedCount-=1;this.fonts[i].loaded=true}else{node=this.fonts[i].sansCase.node;w=this.fonts[i].sansCase.w;if(node.offsetWidth!==w){loadedCount-=1;this.fonts[i].loaded=true}}if(this.fonts[i].loaded){this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent)}}}if(loadedCount!==0&&Date.now()-this.initTime<maxWaitingTime){setTimeout(this.checkLoadedFonts.bind(this),20)}else{setTimeout(function(){this.isLoaded=true}.bind(this),0)}}function createHelper(def,fontData){var tHelper=createNS("text");tHelper.style.fontSize="100px";tHelper.setAttribute("font-family",fontData.fFamily);tHelper.setAttribute("font-style",fontData.fStyle);tHelper.setAttribute("font-weight",fontData.fWeight);tHelper.textContent="1";if(fontData.fClass){tHelper.style.fontFamily="inherit";tHelper.setAttribute("class",fontData.fClass)}else{tHelper.style.fontFamily=fontData.fFamily}def.appendChild(tHelper);var tCanvasHelper=createTag("canvas").getContext("2d");tCanvasHelper.font=fontData.fWeight+" "+fontData.fStyle+" 100px "+fontData.fFamily;return tHelper}function addFonts(fontData,defs){if(!fontData){this.isLoaded=true;return}if(this.chars){this.isLoaded=true;this.fonts=fontData.list;return}var fontArr=fontData.list;var i,len=fontArr.length;var _pendingFonts=len;for(i=0;i<len;i+=1){var shouldLoadFont=true;var loadedSelector;var j;fontArr[i].loaded=false;fontArr[i].monoCase=setUpNode(fontArr[i].fFamily,"monospace");fontArr[i].sansCase=setUpNode(fontArr[i].fFamily,"sans-serif");if(!fontArr[i].fPath){fontArr[i].loaded=true;_pendingFonts-=1}else if(fontArr[i].fOrigin==="p"||fontArr[i].origin===3){loadedSelector=document.querySelectorAll("style[f-forigin=\"p\"][f-family=\""+fontArr[i].fFamily+"\"], style[f-origin=\"3\"][f-family=\""+fontArr[i].fFamily+"\"]");if(loadedSelector.length>0){shouldLoadFont=false}if(shouldLoadFont){var s=createTag("style");s.setAttribute("f-forigin",fontArr[i].fOrigin);s.setAttribute("f-origin",fontArr[i].origin);s.setAttribute("f-family",fontArr[i].fFamily);s.type="text/css";s.innerHTML="@font-face {"+"font-family: "+fontArr[i].fFamily+"; font-style: normal; src: url('"+fontArr[i].fPath+"');}";defs.appendChild(s)}}else if(fontArr[i].fOrigin==="g"||fontArr[i].origin===1){loadedSelector=document.querySelectorAll("link[f-forigin=\"g\"], link[f-origin=\"1\"]");for(j=0;j<loadedSelector.length;j++){if(loadedSelector[j].href.indexOf(fontArr[i].fPath)!==-1){shouldLoadFont=false}}if(shouldLoadFont){var l=createTag("link");l.setAttribute("f-forigin",fontArr[i].fOrigin);l.setAttribute("f-origin",fontArr[i].origin);l.type="text/css";l.rel="stylesheet";l.href=fontArr[i].fPath;document.body.appendChild(l)}}else if(fontArr[i].fOrigin==="t"||fontArr[i].origin===2){loadedSelector=document.querySelectorAll("script[f-forigin=\"t\"], script[f-origin=\"2\"]");for(j=0;j<loadedSelector.length;j++){if(fontArr[i].fPath===loadedSelector[j].src){shouldLoadFont=false}}if(shouldLoadFont){var sc=createTag("link");sc.setAttribute("f-forigin",fontArr[i].fOrigin);sc.setAttribute("f-origin",fontArr[i].origin);sc.setAttribute("rel","stylesheet");sc.setAttribute("href",fontArr[i].fPath);defs.appendChild(sc)}}fontArr[i].helper=createHelper(defs,fontArr[i]);fontArr[i].cache={};this.fonts.push(fontArr[i])}if(_pendingFonts===0){this.isLoaded=true}else{setTimeout(this.checkLoadedFonts.bind(this),100)}}function addChars(chars){if(!chars){return}if(!this.chars){this.chars=[]}var i,len=chars.length;var j,jLen=this.chars.length,found;for(i=0;i<len;i+=1){j=0;found=false;while(j<jLen){if(this.chars[j].style===chars[i].style&&this.chars[j].fFamily===chars[i].fFamily&&this.chars[j].ch===chars[i].ch){found=true}j+=1}if(!found){this.chars.push(chars[i]);jLen+=1}}}function getCharData(char,style,font){var i=0,len=this.chars.length;while(i<len){if(this.chars[i].ch===char&&this.chars[i].style===style&&this.chars[i].fFamily===font){return this.chars[i]}i+=1}if(console&&function(){}){}return emptyChar}function measureText(char,fontName,size){var fontData=this.getFontByName(fontName);var index=char.charCodeAt(0);if(!fontData.cache[index+1]){var tHelper=fontData.helper;if(char===" "){tHelper.textContent="|"+char+"|";var doubleSize=tHelper.getComputedTextLength();tHelper.textContent="||";var singleSize=tHelper.getComputedTextLength();fontData.cache[index+1]=(doubleSize-singleSize)/100}else{tHelper.textContent=char;fontData.cache[index+1]=tHelper.getComputedTextLength()/100}}return fontData.cache[index+1]*size}function getFontByName(name){var i=0,len=this.fonts.length;while(i<len){if(this.fonts[i].fName===name){return this.fonts[i]}i+=1}return this.fonts[0]}function getCombinedCharacterCodes(){return combinedCharacters}function loaded(){return this.isLoaded}var Font=function(){this.fonts=[];this.chars=null;this.typekitLoaded=0;this.isLoaded=false;this.initTime=Date.now()};Font.getCombinedCharacterCodes=getCombinedCharacterCodes;Font.prototype.addChars=addChars;Font.prototype.addFonts=addFonts;Font.prototype.getCharData=getCharData;Font.prototype.getFontByName=getFontByName;Font.prototype.measureText=measureText;Font.prototype.checkLoadedFonts=checkLoadedFonts;Font.prototype.loaded=loaded;return Font}();var PropertyFactory=function(){var initFrame=initialDefaultFrame;var math_abs=Math.abs;function interpolateValue(frameNum,caching){var offsetTime=this.offsetTime;var newValue;if(this.propType==="multidimensional"){newValue=createTypedArray("float32",this.pv.length)}var iterationIndex=caching.lastIndex;var i=iterationIndex;var len=this.keyframes.length-1,flag=true;var keyData,nextKeyData;while(flag){keyData=this.keyframes[i];nextKeyData=this.keyframes[i+1];if(i===len-1&&frameNum>=nextKeyData.t-offsetTime){if(keyData.h){keyData=nextKeyData}iterationIndex=0;break}if(nextKeyData.t-offsetTime>frameNum){iterationIndex=i;break}if(i<len-1){i+=1}else{iterationIndex=0;flag=false}}var k,kLen,perc,jLen,j,fnc;var nextKeyTime=nextKeyData.t-offsetTime;var keyTime=keyData.t-offsetTime;var endValue;if(keyData.to){if(!keyData.bezierData){keyData.bezierData=bez.buildBezierData(keyData.s,nextKeyData.s||keyData.e,keyData.to,keyData.ti)}var bezierData=keyData.bezierData;if(frameNum>=nextKeyTime||frameNum<keyTime){var ind=frameNum>=nextKeyTime?bezierData.points.length-1:0;kLen=bezierData.points[ind].point.length;for(k=0;k<kLen;k+=1){newValue[k]=bezierData.points[ind].point[k]}}else{if(keyData.__fnct){fnc=keyData.__fnct}else{fnc=BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y,keyData.n).get;keyData.__fnct=fnc}perc=fnc((frameNum-keyTime)/(nextKeyTime-keyTime));var distanceInLine=bezierData.segmentLength*perc;var segmentPerc;var addedLength=caching.lastFrame<frameNum&&caching._lastKeyframeIndex===i?caching._lastAddedLength:0;j=caching.lastFrame<frameNum&&caching._lastKeyframeIndex===i?caching._lastPoint:0;flag=true;jLen=bezierData.points.length;while(flag){addedLength+=bezierData.points[j].partialLength;if(distanceInLine===0||perc===0||j===bezierData.points.length-1){kLen=bezierData.points[j].point.length;for(k=0;k<kLen;k+=1){newValue[k]=bezierData.points[j].point[k]}break}else if(distanceInLine>=addedLength&&distanceInLine<addedLength+bezierData.points[j+1].partialLength){segmentPerc=(distanceInLine-addedLength)/bezierData.points[j+1].partialLength;kLen=bezierData.points[j].point.length;for(k=0;k<kLen;k+=1){newValue[k]=bezierData.points[j].point[k]+(bezierData.points[j+1].point[k]-bezierData.points[j].point[k])*segmentPerc}break}if(j<jLen-1){j+=1}else{flag=false}}caching._lastPoint=j;caching._lastAddedLength=addedLength-bezierData.points[j].partialLength;caching._lastKeyframeIndex=i}}else{var outX,outY,inX,inY,keyValue;len=keyData.s.length;endValue=nextKeyData.s||keyData.e;if(this.sh&&keyData.h!==1){if(frameNum>=nextKeyTime){newValue[0]=endValue[0];newValue[1]=endValue[1];newValue[2]=endValue[2]}else if(frameNum<=keyTime){newValue[0]=keyData.s[0];newValue[1]=keyData.s[1];newValue[2]=keyData.s[2]}else{var quatStart=createQuaternion(keyData.s);var quatEnd=createQuaternion(endValue);var time=(frameNum-keyTime)/(nextKeyTime-keyTime);quaternionToEuler(newValue,slerp(quatStart,quatEnd,time))}}else{for(i=0;i<len;i+=1){if(keyData.h!==1){if(frameNum>=nextKeyTime){perc=1}else if(frameNum<keyTime){perc=0}else{if(keyData.o.x.constructor===Array){if(!keyData.__fnct){keyData.__fnct=[]}if(!keyData.__fnct[i]){outX=typeof keyData.o.x[i]==="undefined"?keyData.o.x[0]:keyData.o.x[i];outY=typeof keyData.o.y[i]==="undefined"?keyData.o.y[0]:keyData.o.y[i];inX=typeof keyData.i.x[i]==="undefined"?keyData.i.x[0]:keyData.i.x[i];inY=typeof keyData.i.y[i]==="undefined"?keyData.i.y[0]:keyData.i.y[i];fnc=BezierFactory.getBezierEasing(outX,outY,inX,inY).get;keyData.__fnct[i]=fnc}else{fnc=keyData.__fnct[i]}}else{if(!keyData.__fnct){outX=keyData.o.x;outY=keyData.o.y;inX=keyData.i.x;inY=keyData.i.y;fnc=BezierFactory.getBezierEasing(outX,outY,inX,inY).get;keyData.__fnct=fnc}else{fnc=keyData.__fnct}}perc=fnc((frameNum-keyTime)/(nextKeyTime-keyTime))}}endValue=nextKeyData.s||keyData.e;keyValue=keyData.h===1?keyData.s[i]:keyData.s[i]+(endValue[i]-keyData.s[i])*perc;if(len===1){newValue=keyValue}else{newValue[i]=keyValue}}}}caching.lastIndex=iterationIndex;return newValue}function slerp(a,b,t){var out=[];var ax=a[0],ay=a[1],az=a[2],aw=a[3],bx=b[0],by=b[1],bz=b[2],bw=b[3];var omega,cosom,sinom,scale0,scale1;cosom=ax*bx+ay*by+az*bz+aw*bw;if(cosom<0){cosom=-cosom;bx=-bx;by=-by;bz=-bz;bw=-bw}if(1-cosom>0.000001){omega=Math.acos(cosom);sinom=Math.sin(omega);scale0=Math.sin((1-t)*omega)/sinom;scale1=Math.sin(t*omega)/sinom}else{scale0=1-t;scale1=t}out[0]=scale0*ax+scale1*bx;out[1]=scale0*ay+scale1*by;out[2]=scale0*az+scale1*bz;out[3]=scale0*aw+scale1*bw;return out}function quaternionToEuler(out,quat){var qx=quat[0];var qy=quat[1];var qz=quat[2];var qw=quat[3];var heading=Math.atan2(2*qy*qw-2*qx*qz,1-2*qy*qy-2*qz*qz);var attitude=Math.asin(2*qx*qy+2*qz*qw);var bank=Math.atan2(2*qx*qw-2*qy*qz,1-2*qx*qx-2*qz*qz);out[0]=heading/degToRads;out[1]=attitude/degToRads;out[2]=bank/degToRads}function createQuaternion(values){var heading=values[0]*degToRads;var attitude=values[1]*degToRads;var bank=values[2]*degToRads;var c1=Math.cos(heading/2);var c2=Math.cos(attitude/2);var c3=Math.cos(bank/2);var s1=Math.sin(heading/2);var s2=Math.sin(attitude/2);var s3=Math.sin(bank/2);var w=c1*c2*c3-s1*s2*s3;var x=s1*s2*c3+c1*c2*s3;var y=s1*c2*c3+c1*s2*s3;var z=c1*s2*c3-s1*c2*s3;return[x,y,z,w]}function getValueAtCurrentTime(){var frameNum=this.comp.renderedFrame-this.offsetTime;var initTime=this.keyframes[0].t-this.offsetTime;var endTime=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(frameNum===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=endTime&&frameNum>=endTime||this._caching.lastFrame<initTime&&frameNum<initTime))){if(this._caching.lastFrame>=frameNum){this._caching._lastKeyframeIndex=-1;this._caching.lastIndex=0}var renderResult=this.interpolateValue(frameNum,this._caching);this.pv=renderResult}this._caching.lastFrame=frameNum;return this.pv}function setVValue(val){var multipliedValue;if(this.propType==="unidimensional"){multipliedValue=val*this.mult;if(math_abs(this.v-multipliedValue)>0.00001){this.v=multipliedValue;this._mdf=true}}else{var i=0,len=this.v.length;while(i<len){multipliedValue=val[i]*this.mult;if(math_abs(this.v[i]-multipliedValue)>0.00001){this.v[i]=multipliedValue;this._mdf=true}i+=1}}}function processEffectsSequence(){if(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length){return}if(this.lock){this.setVValue(this.pv);return}this.lock=true;this._mdf=this._isFirstFrame;var multipliedValue;var i,len=this.effectsSequence.length;var finalValue=this.kf?this.pv:this.data.k;for(i=0;i<len;i+=1){finalValue=this.effectsSequence[i](finalValue)}this.setVValue(finalValue);this._isFirstFrame=false;this.lock=false;this.frameId=this.elem.globalData.frameId}function addEffect(effectFunction){this.effectsSequence.push(effectFunction);this.container.addDynamicProperty(this)}function ValueProperty(elem,data,mult,container){this.propType="unidimensional";this.mult=mult||1;this.data=data;this.v=mult?data.k*mult:data.k;this.pv=data.k;this._mdf=false;this.elem=elem;this.container=container;this.comp=elem.comp;this.k=false;this.kf=false;this.vel=0;this.effectsSequence=[];this._isFirstFrame=true;this.getValue=processEffectsSequence;this.setVValue=setVValue;this.addEffect=addEffect}function MultiDimensionalProperty(elem,data,mult,container){this.propType="multidimensional";this.mult=mult||1;this.data=data;this._mdf=false;this.elem=elem;this.container=container;this.comp=elem.comp;this.k=false;this.kf=false;this.frameId=-1;var i,len=data.k.length;this.v=createTypedArray("float32",len);this.pv=createTypedArray("float32",len);var arr=createTypedArray("float32",len);this.vel=createTypedArray("float32",len);for(i=0;i<len;i+=1){this.v[i]=data.k[i]*this.mult;this.pv[i]=data.k[i]}this._isFirstFrame=true;this.effectsSequence=[];this.getValue=processEffectsSequence;this.setVValue=setVValue;this.addEffect=addEffect}function KeyframedValueProperty(elem,data,mult,container){this.propType="unidimensional";this.keyframes=data.k;this.offsetTime=elem.data.st;this.frameId=-1;this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1};this.k=true;this.kf=true;this.data=data;this.mult=mult||1;this.elem=elem;this.container=container;this.comp=elem.comp;this.v=initFrame;this.pv=initFrame;this._isFirstFrame=true;this.getValue=processEffectsSequence;this.setVValue=setVValue;this.interpolateValue=interpolateValue;this.effectsSequence=[getValueAtCurrentTime.bind(this)];this.addEffect=addEffect}function KeyframedMultidimensionalProperty(elem,data,mult,container){this.propType="multidimensional";var i,len=data.k.length;var s,e,to,ti;for(i=0;i<len-1;i+=1){if(data.k[i].to&&data.k[i].s&&data.k[i].e){s=data.k[i].s;e=data.k[i].e;to=data.k[i].to;ti=data.k[i].ti;if(s.length===2&&!(s[0]===e[0]&&s[1]===e[1])&&bez.pointOnLine2D(s[0],s[1],e[0],e[1],s[0]+to[0],s[1]+to[1])&&bez.pointOnLine2D(s[0],s[1],e[0],e[1],e[0]+ti[0],e[1]+ti[1])||s.length===3&&!(s[0]===e[0]&&s[1]===e[1]&&s[2]===e[2])&&bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],s[0]+to[0],s[1]+to[1],s[2]+to[2])&&bez.pointOnLine3D(s[0],s[1],s[2],e[0],e[1],e[2],e[0]+ti[0],e[1]+ti[1],e[2]+ti[2])){data.k[i].to=null;data.k[i].ti=null}if(s[0]===e[0]&&s[1]===e[1]&&to[0]===0&&to[1]===0&&ti[0]===0&&ti[1]===0){if(s.length===2||s[2]===e[2]&&to[2]===0&&ti[2]===0){data.k[i].to=null;data.k[i].ti=null}}}}this.effectsSequence=[getValueAtCurrentTime.bind(this)];this.keyframes=data.k;this.offsetTime=elem.data.st;this.k=true;this.kf=true;this._isFirstFrame=true;this.mult=mult||1;this.elem=elem;this.container=container;this.comp=elem.comp;this.getValue=processEffectsSequence;this.setVValue=setVValue;this.interpolateValue=interpolateValue;this.frameId=-1;var arrLen=data.k[0].s.length;this.v=createTypedArray("float32",arrLen);this.pv=createTypedArray("float32",arrLen);for(i=0;i<arrLen;i+=1){this.v[i]=initFrame;this.pv[i]=initFrame}this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",arrLen)};this.addEffect=addEffect}function getProp(elem,data,type,mult,container){var p;if(!data.k.length){p=new ValueProperty(elem,data,mult,container)}else if(typeof data.k[0]==="number"){p=new MultiDimensionalProperty(elem,data,mult,container)}else{switch(type){case 0:p=new KeyframedValueProperty(elem,data,mult,container);break;case 1:p=new KeyframedMultidimensionalProperty(elem,data,mult,container);break;}}if(p.effectsSequence.length){container.addDynamicProperty(p)}return p}var ob={getProp:getProp};return ob}();var TransformPropertyFactory=function(){function applyToMatrix(mat){var _mdf=this._mdf;this.iterateDynamicProperties();this._mdf=this._mdf||_mdf;if(this.a){mat.translate(-this.a.v[0],-this.a.v[1],this.a.v[2])}if(this.s){mat.scale(this.s.v[0],this.s.v[1],this.s.v[2])}if(this.sk){mat.skewFromAxis(-this.sk.v,this.sa.v)}if(this.r){mat.rotate(-this.r.v)}else{mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0])}if(this.data.p.s){if(this.data.p.z){mat.translate(this.px.v,this.py.v,-this.pz.v)}else{mat.translate(this.px.v,this.py.v,0)}}else{mat.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}}function processKeys(forceRender){if(this.elem.globalData.frameId===this.frameId){return}if(this._isDirty){this.precalculateMatrix();this._isDirty=false}this.iterateDynamicProperties();if(this._mdf||forceRender){this.v.cloneFromProps(this.pre.props);if(this.appliedTransformations<1){this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2])}if(this.appliedTransformations<2){this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2])}if(this.sk&&this.appliedTransformations<3){this.v.skewFromAxis(-this.sk.v,this.sa.v)}if(this.r&&this.appliedTransformations<4){this.v.rotate(-this.r.v)}else if(!this.r&&this.appliedTransformations<4){this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0])}if(this.autoOriented){var v1,v2,frameRate=this.elem.globalData.frameRate;if(this.p&&this.p.keyframes&&this.p.getValueAtTime){if(this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t){v1=this.p.getValueAtTime((this.p.keyframes[0].t+0.01)/frameRate,0);v2=this.p.getValueAtTime(this.p.keyframes[0].t/frameRate,0)}else if(this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t){v1=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/frameRate,0);v2=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-0.01)/frameRate,0)}else{v1=this.p.pv;v2=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-0.01)/frameRate,this.p.offsetTime)}}else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){v1=[];v2=[];var px=this.px,py=this.py,frameRate;if(px._caching.lastFrame+px.offsetTime<=px.keyframes[0].t){v1[0]=px.getValueAtTime((px.keyframes[0].t+0.01)/frameRate,0);v1[1]=py.getValueAtTime((py.keyframes[0].t+0.01)/frameRate,0);v2[0]=px.getValueAtTime(px.keyframes[0].t/frameRate,0);v2[1]=py.getValueAtTime(py.keyframes[0].t/frameRate,0)}else if(px._caching.lastFrame+px.offsetTime>=px.keyframes[px.keyframes.length-1].t){v1[0]=px.getValueAtTime(px.keyframes[px.keyframes.length-1].t/frameRate,0);v1[1]=py.getValueAtTime(py.keyframes[py.keyframes.length-1].t/frameRate,0);v2[0]=px.getValueAtTime((px.keyframes[px.keyframes.length-1].t-0.01)/frameRate,0);v2[1]=py.getValueAtTime((py.keyframes[py.keyframes.length-1].t-0.01)/frameRate,0)}else{v1=[px.pv,py.pv];v2[0]=px.getValueAtTime((px._caching.lastFrame+px.offsetTime-0.01)/frameRate,px.offsetTime);v2[1]=py.getValueAtTime((py._caching.lastFrame+py.offsetTime-0.01)/frameRate,py.offsetTime)}}this.v.rotate(-Math.atan2(v1[1]-v2[1],v1[0]-v2[0]))}if(this.data.p&&this.data.p.s){if(this.data.p.z){this.v.translate(this.px.v,this.py.v,-this.pz.v)}else{this.v.translate(this.px.v,this.py.v,0)}}else{this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}}this.frameId=this.elem.globalData.frameId}function precalculateMatrix(){if(!this.a.k){this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]);this.appliedTransformations=1}else{return}if(!this.s.effectsSequence.length){this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]);this.appliedTransformations=2}else{return}if(this.sk){if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length){this.pre.skewFromAxis(-this.sk.v,this.sa.v);this.appliedTransformations=3}else{return}}if(this.r){if(!this.r.effectsSequence.length){this.pre.rotate(-this.r.v);this.appliedTransformations=4}else{return}}else if(!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length){this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);this.appliedTransformations=4}}function autoOrient(){}function addDynamicProperty(prop){this._addDynamicProperty(prop);this.elem.addDynamicProperty(prop);this._isDirty=true}function TransformProperty(elem,data,container){this.elem=elem;this.frameId=-1;this.propType="transform";this.data=data;this.v=new Matrix;this.pre=new Matrix;this.appliedTransformations=0;this.initDynamicPropertyContainer(container||elem);if(data.p&&data.p.s){this.px=PropertyFactory.getProp(elem,data.p.x,0,0,this);this.py=PropertyFactory.getProp(elem,data.p.y,0,0,this);if(data.p.z){this.pz=PropertyFactory.getProp(elem,data.p.z,0,0,this)}}else{this.p=PropertyFactory.getProp(elem,data.p||{k:[0,0,0]},1,0,this)}if(data.rx){this.rx=PropertyFactory.getProp(elem,data.rx,0,degToRads,this);this.ry=PropertyFactory.getProp(elem,data.ry,0,degToRads,this);this.rz=PropertyFactory.getProp(elem,data.rz,0,degToRads,this);if(data.or.k[0].ti){var i,len=data.or.k.length;for(i=0;i<len;i+=1){data.or.k[i].to=data.or.k[i].ti=null}}this.or=PropertyFactory.getProp(elem,data.or,1,degToRads,this);this.or.sh=true}else{this.r=PropertyFactory.getProp(elem,data.r||{k:0},0,degToRads,this)}if(data.sk){this.sk=PropertyFactory.getProp(elem,data.sk,0,degToRads,this);this.sa=PropertyFactory.getProp(elem,data.sa,0,degToRads,this)}this.a=PropertyFactory.getProp(elem,data.a||{k:[0,0,0]},1,0,this);this.s=PropertyFactory.getProp(elem,data.s||{k:[100,100,100]},1,0.01,this);if(data.o){this.o=PropertyFactory.getProp(elem,data.o,0,0.01,elem)}else{this.o={_mdf:false,v:1}}this._isDirty=true;if(!this.dynamicProperties.length){this.getValue(true)}}TransformProperty.prototype={applyToMatrix:applyToMatrix,getValue:processKeys,precalculateMatrix:precalculateMatrix,autoOrient:autoOrient};extendPrototype([DynamicPropertyContainer],TransformProperty);TransformProperty.prototype.addDynamicProperty=addDynamicProperty;TransformProperty.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function getTransformProperty(elem,data,container){return new TransformProperty(elem,data,container)}return{getTransformProperty:getTransformProperty}}();function ShapePath(){this.c=false;this._length=0;this._maxLength=8;this.v=createSizedArray(this._maxLength);this.o=createSizedArray(this._maxLength);this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(closed,len){this.c=closed;this.setLength(len);var i=0;while(i<len){this.v[i]=point_pool.newElement();this.o[i]=point_pool.newElement();this.i[i]=point_pool.newElement();i+=1}};ShapePath.prototype.setLength=function(len){while(this._maxLength<len){this.doubleArrayLength()}this._length=len};ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength));this.i=this.i.concat(createSizedArray(this._maxLength));this.o=this.o.concat(createSizedArray(this._maxLength));this._maxLength*=2};ShapePath.prototype.setXYAt=function(x,y,type,pos,replace){var arr;this._length=Math.max(this._length,pos+1);if(this._length>=this._maxLength){this.doubleArrayLength()}switch(type){case"v":arr=this.v;break;case"i":arr=this.i;break;case"o":arr=this.o;break;}if(!arr[pos]||arr[pos]&&!replace){arr[pos]=point_pool.newElement()}arr[pos][0]=x;arr[pos][1]=y};ShapePath.prototype.setTripleAt=function(vX,vY,oX,oY,iX,iY,pos,replace){this.setXYAt(vX,vY,"v",pos,replace);this.setXYAt(oX,oY,"o",pos,replace);this.setXYAt(iX,iY,"i",pos,replace)};ShapePath.prototype.reverse=function(){var newPath=new ShapePath;newPath.setPathData(this.c,this._length);var vertices=this.v,outPoints=this.o,inPoints=this.i;var init=0;if(this.c){newPath.setTripleAt(vertices[0][0],vertices[0][1],inPoints[0][0],inPoints[0][1],outPoints[0][0],outPoints[0][1],0,false);init=1}var cnt=this._length-1;var len=this._length;var i;for(i=init;i<len;i+=1){newPath.setTripleAt(vertices[cnt][0],vertices[cnt][1],inPoints[cnt][0],inPoints[cnt][1],outPoints[cnt][0],outPoints[cnt][1],i,false);cnt-=1}return newPath};var ShapePropertyFactory=function(){var initFrame=-999999;function interpolateShape(frameNum,previousValue,caching){var iterationIndex=caching.lastIndex;var keyPropS,keyPropE,isHold,j,k,jLen,kLen,perc,vertexValue;var kf=this.keyframes;if(frameNum<kf[0].t-this.offsetTime){keyPropS=kf[0].s[0];isHold=true;iterationIndex=0}else if(frameNum>=kf[kf.length-1].t-this.offsetTime){keyPropS=kf[kf.length-1].s?kf[kf.length-1].s[0]:kf[kf.length-2].e[0];isHold=true}else{var i=iterationIndex;var len=kf.length-1,flag=true,keyData,nextKeyData;while(flag){keyData=kf[i];nextKeyData=kf[i+1];if(nextKeyData.t-this.offsetTime>frameNum){break}if(i<len-1){i+=1}else{flag=false}}isHold=keyData.h===1;iterationIndex=i;if(!isHold){if(frameNum>=nextKeyData.t-this.offsetTime){perc=1}else if(frameNum<keyData.t-this.offsetTime){perc=0}else{var fnc;if(keyData.__fnct){fnc=keyData.__fnct}else{fnc=BezierFactory.getBezierEasing(keyData.o.x,keyData.o.y,keyData.i.x,keyData.i.y).get;keyData.__fnct=fnc}perc=fnc((frameNum-(keyData.t-this.offsetTime))/(nextKeyData.t-this.offsetTime-(keyData.t-this.offsetTime)))}keyPropE=nextKeyData.s?nextKeyData.s[0]:keyData.e[0]}keyPropS=keyData.s[0]}jLen=previousValue._length;kLen=keyPropS.i[0].length;caching.lastIndex=iterationIndex;for(j=0;j<jLen;j+=1){for(k=0;k<kLen;k+=1){vertexValue=isHold?keyPropS.i[j][k]:keyPropS.i[j][k]+(keyPropE.i[j][k]-keyPropS.i[j][k])*perc;previousValue.i[j][k]=vertexValue;vertexValue=isHold?keyPropS.o[j][k]:keyPropS.o[j][k]+(keyPropE.o[j][k]-keyPropS.o[j][k])*perc;previousValue.o[j][k]=vertexValue;vertexValue=isHold?keyPropS.v[j][k]:keyPropS.v[j][k]+(keyPropE.v[j][k]-keyPropS.v[j][k])*perc;previousValue.v[j][k]=vertexValue}}}function interpolateShapeCurrentTime(){var frameNum=this.comp.renderedFrame-this.offsetTime;var initTime=this.keyframes[0].t-this.offsetTime;var endTime=this.keyframes[this.keyframes.length-1].t-this.offsetTime;var lastFrame=this._caching.lastFrame;if(!(lastFrame!==initFrame&&(lastFrame<initTime&&frameNum<initTime||lastFrame>endTime&&frameNum>endTime))){this._caching.lastIndex=lastFrame<frameNum?this._caching.lastIndex:0;this.interpolateShape(frameNum,this.pv,this._caching)}this._caching.lastFrame=frameNum;return this.pv}function resetShape(){this.paths=this.localShapeCollection}function shapesEqual(shape1,shape2){if(shape1._length!==shape2._length||shape1.c!==shape2.c){return false}var i,len=shape1._length;for(i=0;i<len;i+=1){if(shape1.v[i][0]!==shape2.v[i][0]||shape1.v[i][1]!==shape2.v[i][1]||shape1.o[i][0]!==shape2.o[i][0]||shape1.o[i][1]!==shape2.o[i][1]||shape1.i[i][0]!==shape2.i[i][0]||shape1.i[i][1]!==shape2.i[i][1]){return false}}return true}function setVValue(newPath){if(!shapesEqual(this.v,newPath)){this.v=shape_pool.clone(newPath);this.localShapeCollection.releaseShapes();this.localShapeCollection.addShape(this.v);this._mdf=true;this.paths=this.localShapeCollection}}function processEffectsSequence(){if(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length){return}if(this.lock){this.setVValue(this.pv);return}this.lock=true;this._mdf=false;var finalValue=this.kf?this.pv:this.data.ks?this.data.ks.k:this.data.pt.k;var i,len=this.effectsSequence.length;for(i=0;i<len;i+=1){finalValue=this.effectsSequence[i](finalValue)}this.setVValue(finalValue);this.lock=false;this.frameId=this.elem.globalData.frameId};function ShapeProperty(elem,data,type){this.propType="shape";this.comp=elem.comp;this.container=elem;this.elem=elem;this.data=data;this.k=false;this.kf=false;this._mdf=false;var pathData=type===3?data.pt.k:data.ks.k;this.v=shape_pool.clone(pathData);this.pv=shape_pool.clone(this.v);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.paths.addShape(this.v);this.reset=resetShape;this.effectsSequence=[]}function addEffect(effectFunction){this.effectsSequence.push(effectFunction);this.container.addDynamicProperty(this)}ShapeProperty.prototype.interpolateShape=interpolateShape;ShapeProperty.prototype.getValue=processEffectsSequence;ShapeProperty.prototype.setVValue=setVValue;ShapeProperty.prototype.addEffect=addEffect;function KeyframedShapeProperty(elem,data,type){this.propType="shape";this.comp=elem.comp;this.elem=elem;this.container=elem;this.offsetTime=elem.data.st;this.keyframes=type===3?data.pt.k:data.ks.k;this.k=true;this.kf=true;var i,len=this.keyframes[0].s[0].i.length;var jLen=this.keyframes[0].s[0].i[0].length;this.v=shape_pool.newElement();this.v.setPathData(this.keyframes[0].s[0].c,len);this.pv=shape_pool.clone(this.v);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.paths.addShape(this.v);this.lastFrame=initFrame;this.reset=resetShape;this._caching={lastFrame:initFrame,lastIndex:0};this.effectsSequence=[interpolateShapeCurrentTime.bind(this)]}KeyframedShapeProperty.prototype.getValue=processEffectsSequence;KeyframedShapeProperty.prototype.interpolateShape=interpolateShape;KeyframedShapeProperty.prototype.setVValue=setVValue;KeyframedShapeProperty.prototype.addEffect=addEffect;var EllShapeProperty=function(){var cPoint=roundCorner;function EllShapeProperty(elem,data){this.v=shape_pool.newElement();this.v.setPathData(true,4);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.paths=this.localShapeCollection;this.localShapeCollection.addShape(this.v);this.d=data.d;this.elem=elem;this.comp=elem.comp;this.frameId=-1;this.initDynamicPropertyContainer(elem);this.p=PropertyFactory.getProp(elem,data.p,1,0,this);this.s=PropertyFactory.getProp(elem,data.s,1,0,this);if(this.dynamicProperties.length){this.k=true}else{this.k=false;this.convertEllToPath()}};EllShapeProperty.prototype={reset:resetShape,getValue:function(){if(this.elem.globalData.frameId===this.frameId){return}this.frameId=this.elem.globalData.frameId;this.iterateDynamicProperties();if(this._mdf){this.convertEllToPath()}},convertEllToPath:function(){var p0=this.p.v[0],p1=this.p.v[1],s0=this.s.v[0]/2,s1=this.s.v[1]/2;var _cw=this.d!==3;var _v=this.v;_v.v[0][0]=p0;_v.v[0][1]=p1-s1;_v.v[1][0]=_cw?p0+s0:p0-s0;_v.v[1][1]=p1;_v.v[2][0]=p0;_v.v[2][1]=p1+s1;_v.v[3][0]=_cw?p0-s0:p0+s0;_v.v[3][1]=p1;_v.i[0][0]=_cw?p0-s0*cPoint:p0+s0*cPoint;_v.i[0][1]=p1-s1;_v.i[1][0]=_cw?p0+s0:p0-s0;_v.i[1][1]=p1-s1*cPoint;_v.i[2][0]=_cw?p0+s0*cPoint:p0-s0*cPoint;_v.i[2][1]=p1+s1;_v.i[3][0]=_cw?p0-s0:p0+s0;_v.i[3][1]=p1+s1*cPoint;_v.o[0][0]=_cw?p0+s0*cPoint:p0-s0*cPoint;_v.o[0][1]=p1-s1;_v.o[1][0]=_cw?p0+s0:p0-s0;_v.o[1][1]=p1+s1*cPoint;_v.o[2][0]=_cw?p0-s0*cPoint:p0+s0*cPoint;_v.o[2][1]=p1+s1;_v.o[3][0]=_cw?p0-s0:p0+s0;_v.o[3][1]=p1-s1*cPoint}};extendPrototype([DynamicPropertyContainer],EllShapeProperty);return EllShapeProperty}();var StarShapeProperty=function(){function StarShapeProperty(elem,data){this.v=shape_pool.newElement();this.v.setPathData(true,0);this.elem=elem;this.comp=elem.comp;this.data=data;this.frameId=-1;this.d=data.d;this.initDynamicPropertyContainer(elem);if(data.sy===1){this.ir=PropertyFactory.getProp(elem,data.ir,0,0,this);this.is=PropertyFactory.getProp(elem,data.is,0,0.01,this);this.convertToPath=this.convertStarToPath}else{this.convertToPath=this.convertPolygonToPath}this.pt=PropertyFactory.getProp(elem,data.pt,0,0,this);this.p=PropertyFactory.getProp(elem,data.p,1,0,this);this.r=PropertyFactory.getProp(elem,data.r,0,degToRads,this);this.or=PropertyFactory.getProp(elem,data.or,0,0,this);this.os=PropertyFactory.getProp(elem,data.os,0,0.01,this);this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.localShapeCollection.addShape(this.v);this.paths=this.localShapeCollection;if(this.dynamicProperties.length){this.k=true}else{this.k=false;this.convertToPath()}};StarShapeProperty.prototype={reset:resetShape,getValue:function(){if(this.elem.globalData.frameId===this.frameId){return}this.frameId=this.elem.globalData.frameId;this.iterateDynamicProperties();if(this._mdf){this.convertToPath()}},convertStarToPath:function(){var numPts=Math.floor(this.pt.v)*2;var angle=Math.PI*2/numPts;var longFlag=true;var longRad=this.or.v;var shortRad=this.ir.v;var longRound=this.os.v;var shortRound=this.is.v;var longPerimSegment=2*Math.PI*longRad/(numPts*2);var shortPerimSegment=2*Math.PI*shortRad/(numPts*2);var i,rad,roundness,perimSegment,currentAng=-Math.PI/2;currentAng+=this.r.v;var dir=this.data.d===3?-1:1;this.v._length=0;for(i=0;i<numPts;i+=1){rad=longFlag?longRad:shortRad;roundness=longFlag?longRound:shortRound;perimSegment=longFlag?longPerimSegment:shortPerimSegment;var x=rad*Math.cos(currentAng);var y=rad*Math.sin(currentAng);var ox=x===0&&y===0?0:y/Math.sqrt(x*x+y*y);var oy=x===0&&y===0?0:-x/Math.sqrt(x*x+y*y);x+=+this.p.v[0];y+=+this.p.v[1];this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir,i,true);longFlag=!longFlag;currentAng+=angle*dir}},convertPolygonToPath:function(){var numPts=Math.floor(this.pt.v);var angle=Math.PI*2/numPts;var rad=this.or.v;var roundness=this.os.v;var perimSegment=2*Math.PI*rad/(numPts*4);var i,currentAng=-Math.PI/2;var dir=this.data.d===3?-1:1;currentAng+=this.r.v;this.v._length=0;for(i=0;i<numPts;i+=1){var x=rad*Math.cos(currentAng);var y=rad*Math.sin(currentAng);var ox=x===0&&y===0?0:y/Math.sqrt(x*x+y*y);var oy=x===0&&y===0?0:-x/Math.sqrt(x*x+y*y);x+=+this.p.v[0];y+=+this.p.v[1];this.v.setTripleAt(x,y,x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir,x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir,i,true);currentAng+=angle*dir}this.paths.length=0;this.paths[0]=this.v}};extendPrototype([DynamicPropertyContainer],StarShapeProperty);return StarShapeProperty}();var RectShapeProperty=function(){function RectShapeProperty(elem,data){this.v=shape_pool.newElement();this.v.c=true;this.localShapeCollection=shapeCollection_pool.newShapeCollection();this.localShapeCollection.addShape(this.v);this.paths=this.localShapeCollection;this.elem=elem;this.comp=elem.comp;this.frameId=-1;this.d=data.d;this.initDynamicPropertyContainer(elem);this.p=PropertyFactory.getProp(elem,data.p,1,0,this);this.s=PropertyFactory.getProp(elem,data.s,1,0,this);this.r=PropertyFactory.getProp(elem,data.r,0,0,this);if(this.dynamicProperties.length){this.k=true}else{this.k=false;this.convertRectToPath()}};RectShapeProperty.prototype={convertRectToPath:function(){var p0=this.p.v[0],p1=this.p.v[1],v0=this.s.v[0]/2,v1=this.s.v[1]/2;var round=bm_min(v0,v1,this.r.v);var cPoint=round*(1-roundCorner);this.v._length=0;if(this.d===2||this.d===1){this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,0,true);this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,p0+v0,p1+v1-round,1,true);if(round!==0){this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,2,true);this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,p0-v0+round,p1+v1,3,true);this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,4,true);this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,p0-v0,p1-v1+round,5,true);this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,6,true);this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,p0+v0-round,p1-v1,7,true)}else{this.v.setTripleAt(p0-v0,p1+v1,p0-v0+cPoint,p1+v1,p0-v0,p1+v1,2);this.v.setTripleAt(p0-v0,p1-v1,p0-v0,p1-v1+cPoint,p0-v0,p1-v1,3)}}else{this.v.setTripleAt(p0+v0,p1-v1+round,p0+v0,p1-v1+cPoint,p0+v0,p1-v1+round,0,true);if(round!==0){this.v.setTripleAt(p0+v0-round,p1-v1,p0+v0-round,p1-v1,p0+v0-cPoint,p1-v1,1,true);this.v.setTripleAt(p0-v0+round,p1-v1,p0-v0+cPoint,p1-v1,p0-v0+round,p1-v1,2,true);this.v.setTripleAt(p0-v0,p1-v1+round,p0-v0,p1-v1+round,p0-v0,p1-v1+cPoint,3,true);this.v.setTripleAt(p0-v0,p1+v1-round,p0-v0,p1+v1-cPoint,p0-v0,p1+v1-round,4,true);this.v.setTripleAt(p0-v0+round,p1+v1,p0-v0+round,p1+v1,p0-v0+cPoint,p1+v1,5,true);this.v.setTripleAt(p0+v0-round,p1+v1,p0+v0-cPoint,p1+v1,p0+v0-round,p1+v1,6,true);this.v.setTripleAt(p0+v0,p1+v1-round,p0+v0,p1+v1-round,p0+v0,p1+v1-cPoint,7,true)}else{this.v.setTripleAt(p0-v0,p1-v1,p0-v0+cPoint,p1-v1,p0-v0,p1-v1,1,true);this.v.setTripleAt(p0-v0,p1+v1,p0-v0,p1+v1-cPoint,p0-v0,p1+v1,2,true);this.v.setTripleAt(p0+v0,p1+v1,p0+v0-cPoint,p1+v1,p0+v0,p1+v1,3,true)}}},getValue:function(frameNum){if(this.elem.globalData.frameId===this.frameId){return}this.frameId=this.elem.globalData.frameId;this.iterateDynamicProperties();if(this._mdf){this.convertRectToPath()}},reset:resetShape};extendPrototype([DynamicPropertyContainer],RectShapeProperty);return RectShapeProperty}();function getShapeProp(elem,data,type){var prop;if(type===3||type===4){var dataProp=type===3?data.pt:data.ks;var keys=dataProp.k;if(keys.length){prop=new KeyframedShapeProperty(elem,data,type)}else{prop=new ShapeProperty(elem,data,type)}}else if(type===5){prop=new RectShapeProperty(elem,data)}else if(type===6){prop=new EllShapeProperty(elem,data)}else if(type===7){prop=new StarShapeProperty(elem,data)}if(prop.k){elem.addDynamicProperty(prop)}return prop}function getConstructorFunction(){return ShapeProperty}function getKeyframedConstructorFunction(){return KeyframedShapeProperty}var ob={};ob.getShapeProp=getShapeProp;ob.getConstructorFunction=getConstructorFunction;ob.getKeyframedConstructorFunction=getKeyframedConstructorFunction;return ob}();var ShapeModifiers=function(){var ob={};var modifiers={};ob.registerModifier=registerModifier;ob.getModifier=getModifier;function registerModifier(nm,factory){if(!modifiers[nm]){modifiers[nm]=factory}}function getModifier(nm,elem,data){return new modifiers[nm](elem,data)}return ob}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){};ShapeModifier.prototype.addShapeToModifier=function(){};ShapeModifier.prototype.addShape=function(data){if(!this.closed){var shapeData={shape:data.sh,data:data,localShapeCollection:shapeCollection_pool.newShapeCollection()};this.shapes.push(shapeData);this.addShapeToModifier(shapeData);if(this._isAnimated){data.setAsAnimated()}}};ShapeModifier.prototype.init=function(elem,data){this.shapes=[];this.elem=elem;this.initDynamicPropertyContainer(elem);this.initModifierProperties(elem,data);this.frameId=initialDefaultFrame;this.closed=false;this.k=false;if(this.dynamicProperties.length){this.k=true}else{this.getValue(true)}};ShapeModifier.prototype.processKeys=function(){if(this.elem.globalData.frameId===this.frameId){return}this.frameId=this.elem.globalData.frameId;this.iterateDynamicProperties()};extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier);TrimModifier.prototype.initModifierProperties=function(elem,data){this.s=PropertyFactory.getProp(elem,data.s,0,0.01,this);this.e=PropertyFactory.getProp(elem,data.e,0,0.01,this);this.o=PropertyFactory.getProp(elem,data.o,0,0,this);this.sValue=0;this.eValue=0;this.getValue=this.processKeys;this.m=data.m;this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length};TrimModifier.prototype.addShapeToModifier=function(shapeData){shapeData.pathsData=[]};TrimModifier.prototype.calculateShapeEdges=function(s,e,shapeLength,addedLength,totalModifierLength){var segments=[];if(e<=1){segments.push({s:s,e:e})}else if(s>=1){segments.push({s:s-1,e:e-1})}else{segments.push({s:s,e:1});segments.push({s:0,e:e-1})}var shapeSegments=[];var i,len=segments.length,segmentOb;for(i=0;i<len;i+=1){segmentOb=segments[i];if(segmentOb.e*totalModifierLength<addedLength||segmentOb.s*totalModifierLength>addedLength+shapeLength){}else{var shapeS,shapeE;if(segmentOb.s*totalModifierLength<=addedLength){shapeS=0}else{shapeS=(segmentOb.s*totalModifierLength-addedLength)/shapeLength}if(segmentOb.e*totalModifierLength>=addedLength+shapeLength){shapeE=1}else{shapeE=(segmentOb.e*totalModifierLength-addedLength)/shapeLength}shapeSegments.push([shapeS,shapeE])}}if(!shapeSegments.length){shapeSegments.push([0,0])}return shapeSegments};TrimModifier.prototype.releasePathsData=function(pathsData){var i,len=pathsData.length;for(i=0;i<len;i+=1){segments_length_pool.release(pathsData[i])}pathsData.length=0;return pathsData};TrimModifier.prototype.processShapes=function(_isFirstFrame){var s,e;if(this._mdf||_isFirstFrame){var o=this.o.v%360/360;if(o<0){o+=1}s=(this.s.v>1?1:this.s.v<0?0:this.s.v)+o;e=(this.e.v>1?1:this.e.v<0?0:this.e.v)+o;if(s===e){}if(s>e){var _s=s;s=e;e=_s}s=Math.round(s*10000)*0.0001;e=Math.round(e*10000)*0.0001;this.sValue=s;this.eValue=e}else{s=this.sValue;e=this.eValue}var shapePaths;var i,len=this.shapes.length,j,jLen;var pathsData,pathData,totalShapeLength,totalModifierLength=0;if(e===s){for(i=0;i<len;i+=1){this.shapes[i].localShapeCollection.releaseShapes();this.shapes[i].shape._mdf=true;this.shapes[i].shape.paths=this.shapes[i].localShapeCollection}}else if(!(e===1&&s===0||e===0&&s===1)){var segments=[],shapeData,localShapeCollection;for(i=0;i<len;i+=1){shapeData=this.shapes[i];if(!shapeData.shape._mdf&&!this._mdf&&!_isFirstFrame&&this.m!==2){shapeData.shape.paths=shapeData.localShapeCollection}else{shapePaths=shapeData.shape.paths;jLen=shapePaths._length;totalShapeLength=0;if(!shapeData.shape._mdf&&shapeData.pathsData.length){totalShapeLength=shapeData.totalShapeLength}else{pathsData=this.releasePathsData(shapeData.pathsData);for(j=0;j<jLen;j+=1){pathData=bez.getSegmentsLength(shapePaths.shapes[j]);pathsData.push(pathData);totalShapeLength+=pathData.totalLength}shapeData.totalShapeLength=totalShapeLength;shapeData.pathsData=pathsData}totalModifierLength+=totalShapeLength;shapeData.shape._mdf=true}}var shapeS=s,shapeE=e,addedLength=0,edges;for(i=len-1;i>=0;i-=1){shapeData=this.shapes[i];if(shapeData.shape._mdf){localShapeCollection=shapeData.localShapeCollection;localShapeCollection.releaseShapes();if(this.m===2&&len>1){edges=this.calculateShapeEdges(s,e,shapeData.totalShapeLength,addedLength,totalModifierLength);addedLength+=shapeData.totalShapeLength}else{edges=[[shapeS,shapeE]]}jLen=edges.length;for(j=0;j<jLen;j+=1){shapeS=edges[j][0];shapeE=edges[j][1];segments.length=0;if(shapeE<=1){segments.push({s:shapeData.totalShapeLength*shapeS,e:shapeData.totalShapeLength*shapeE})}else if(shapeS>=1){segments.push({s:shapeData.totalShapeLength*(shapeS-1),e:shapeData.totalShapeLength*(shapeE-1)})}else{segments.push({s:shapeData.totalShapeLength*shapeS,e:shapeData.totalShapeLength});segments.push({s:0,e:shapeData.totalShapeLength*(shapeE-1)})}var newShapesData=this.addShapes(shapeData,segments[0]);if(segments[0].s!==segments[0].e){if(segments.length>1){var lastShapeInCollection=shapeData.shape.paths.shapes[shapeData.shape.paths._length-1];if(lastShapeInCollection.c){var lastShape=newShapesData.pop();this.addPaths(newShapesData,localShapeCollection);newShapesData=this.addShapes(shapeData,segments[1],lastShape)}else{this.addPaths(newShapesData,localShapeCollection);newShapesData=this.addShapes(shapeData,segments[1])}}this.addPaths(newShapesData,localShapeCollection)}}shapeData.shape.paths=localShapeCollection}}}else if(this._mdf){for(i=0;i<len;i+=1){this.shapes[i].pathsData.length=0;this.shapes[i].shape._mdf=true}}};TrimModifier.prototype.addPaths=function(newPaths,localShapeCollection){var i,len=newPaths.length;for(i=0;i<len;i+=1){localShapeCollection.addShape(newPaths[i])}};TrimModifier.prototype.addSegment=function(pt1,pt2,pt3,pt4,shapePath,pos,newShape){shapePath.setXYAt(pt2[0],pt2[1],"o",pos);shapePath.setXYAt(pt3[0],pt3[1],"i",pos+1);if(newShape){shapePath.setXYAt(pt1[0],pt1[1],"v",pos)}shapePath.setXYAt(pt4[0],pt4[1],"v",pos+1)};TrimModifier.prototype.addSegmentFromArray=function(points,shapePath,pos,newShape){shapePath.setXYAt(points[1],points[5],"o",pos);shapePath.setXYAt(points[2],points[6],"i",pos+1);if(newShape){shapePath.setXYAt(points[0],points[4],"v",pos)}shapePath.setXYAt(points[3],points[7],"v",pos+1)};TrimModifier.prototype.addShapes=function(shapeData,shapeSegment,shapePath){var pathsData=shapeData.pathsData;var shapePaths=shapeData.shape.paths.shapes;var i,len=shapeData.shape.paths._length,j,jLen;var addedLength=0;var currentLengthData,segmentCount;var lengths;var segment;var shapes=[];var initPos;var newShape=true;if(!shapePath){shapePath=shape_pool.newElement();segmentCount=0;initPos=0}else{segmentCount=shapePath._length;initPos=shapePath._length}shapes.push(shapePath);for(i=0;i<len;i+=1){lengths=pathsData[i].lengths;shapePath.c=shapePaths[i].c;jLen=shapePaths[i].c?lengths.length:lengths.length+1;for(j=1;j<jLen;j+=1){currentLengthData=lengths[j-1];if(addedLength+currentLengthData.addedLength<shapeSegment.s){addedLength+=currentLengthData.addedLength;shapePath.c=false}else if(addedLength>shapeSegment.e){shapePath.c=false;break}else{if(shapeSegment.s<=addedLength&&shapeSegment.e>=addedLength+currentLengthData.addedLength){this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[j],shapePaths[i].v[j],shapePath,segmentCount,newShape);newShape=false}else{segment=bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[j],shapePaths[i].o[j-1],shapePaths[i].i[j],(shapeSegment.s-addedLength)/currentLengthData.addedLength,(shapeSegment.e-addedLength)/currentLengthData.addedLength,lengths[j-1]);this.addSegmentFromArray(segment,shapePath,segmentCount,newShape);newShape=false;shapePath.c=false}addedLength+=currentLengthData.addedLength;segmentCount+=1}}if(shapePaths[i].c&&lengths.length){currentLengthData=lengths[j-1];if(addedLength<=shapeSegment.e){var segmentLength=lengths[j-1].addedLength;if(shapeSegment.s<=addedLength&&shapeSegment.e>=addedLength+segmentLength){this.addSegment(shapePaths[i].v[j-1],shapePaths[i].o[j-1],shapePaths[i].i[0],shapePaths[i].v[0],shapePath,segmentCount,newShape);newShape=false}else{segment=bez.getNewSegment(shapePaths[i].v[j-1],shapePaths[i].v[0],shapePaths[i].o[j-1],shapePaths[i].i[0],(shapeSegment.s-addedLength)/segmentLength,(shapeSegment.e-addedLength)/segmentLength,lengths[j-1]);this.addSegmentFromArray(segment,shapePath,segmentCount,newShape);newShape=false;shapePath.c=false}}else{shapePath.c=false}addedLength+=currentLengthData.addedLength;segmentCount+=1}if(shapePath._length){shapePath.setXYAt(shapePath.v[initPos][0],shapePath.v[initPos][1],"i",initPos);shapePath.setXYAt(shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1],"o",shapePath._length-1)}if(addedLength>shapeSegment.e){break}if(i<len-1){shapePath=shape_pool.newElement();newShape=true;shapes.push(shapePath);segmentCount=0}}return shapes};ShapeModifiers.registerModifier("tm",TrimModifier);function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier);RoundCornersModifier.prototype.initModifierProperties=function(elem,data){this.getValue=this.processKeys;this.rd=PropertyFactory.getProp(elem,data.r,0,null,this);this._isAnimated=!!this.rd.effectsSequence.length};RoundCornersModifier.prototype.processPath=function(path,round){var cloned_path=shape_pool.newElement();cloned_path.c=path.c;var i,len=path._length;var currentV,currentI,currentO,closerV,newV,newO,newI,distance,newPosPerc,index=0;var vX,vY,oX,oY,iX,iY;for(i=0;i<len;i+=1){currentV=path.v[i];currentO=path.o[i];currentI=path.i[i];if(currentV[0]===currentO[0]&&currentV[1]===currentO[1]&&currentV[0]===currentI[0]&&currentV[1]===currentI[1]){if((i===0||i===len-1)&&!path.c){cloned_path.setTripleAt(currentV[0],currentV[1],currentO[0],currentO[1],currentI[0],currentI[1],index);index+=1}else{if(i===0){closerV=path.v[len-1]}else{closerV=path.v[i-1]}distance=Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));newPosPerc=distance?Math.min(distance/2,round)/distance:0;vX=iX=currentV[0]+(closerV[0]-currentV[0])*newPosPerc;vY=iY=currentV[1]-(currentV[1]-closerV[1])*newPosPerc;oX=vX-(vX-currentV[0])*roundCorner;oY=vY-(vY-currentV[1])*roundCorner;cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);index+=1;if(i===len-1){closerV=path.v[0]}else{closerV=path.v[i+1]}distance=Math.sqrt(Math.pow(currentV[0]-closerV[0],2)+Math.pow(currentV[1]-closerV[1],2));newPosPerc=distance?Math.min(distance/2,round)/distance:0;vX=oX=currentV[0]+(closerV[0]-currentV[0])*newPosPerc;vY=oY=currentV[1]+(closerV[1]-currentV[1])*newPosPerc;iX=vX-(vX-currentV[0])*roundCorner;iY=vY-(vY-currentV[1])*roundCorner;cloned_path.setTripleAt(vX,vY,oX,oY,iX,iY,index);index+=1}}else{cloned_path.setTripleAt(path.v[i][0],path.v[i][1],path.o[i][0],path.o[i][1],path.i[i][0],path.i[i][1],index);index+=1}}return cloned_path};RoundCornersModifier.prototype.processShapes=function(_isFirstFrame){var shapePaths;var i,len=this.shapes.length;var j,jLen;var rd=this.rd.v;if(rd!==0){var shapeData,newPaths,localShapeCollection;for(i=0;i<len;i+=1){shapeData=this.shapes[i];newPaths=shapeData.shape.paths;localShapeCollection=shapeData.localShapeCollection;if(!(!shapeData.shape._mdf&&!this._mdf&&!_isFirstFrame)){localShapeCollection.releaseShapes();shapeData.shape._mdf=true;shapePaths=shapeData.shape.paths.shapes;jLen=shapeData.shape.paths._length;for(j=0;j<jLen;j+=1){localShapeCollection.addShape(this.processPath(shapePaths[j],rd))}}shapeData.shape.paths=shapeData.localShapeCollection}}if(!this.dynamicProperties.length){this._mdf=false}};ShapeModifiers.registerModifier("rd",RoundCornersModifier);function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier);RepeaterModifier.prototype.initModifierProperties=function(elem,data){this.getValue=this.processKeys;this.c=PropertyFactory.getProp(elem,data.c,0,null,this);this.o=PropertyFactory.getProp(elem,data.o,0,null,this);this.tr=TransformPropertyFactory.getTransformProperty(elem,data.tr,this);this.so=PropertyFactory.getProp(elem,data.tr.so,0,0.01,this);this.eo=PropertyFactory.getProp(elem,data.tr.eo,0,0.01,this);this.data=data;if(!this.dynamicProperties.length){this.getValue(true)}this._isAnimated=!!this.dynamicProperties.length;this.pMatrix=new Matrix;this.rMatrix=new Matrix;this.sMatrix=new Matrix;this.tMatrix=new Matrix;this.matrix=new Matrix};RepeaterModifier.prototype.applyTransforms=function(pMatrix,rMatrix,sMatrix,transform,perc,inv){var dir=inv?-1:1;var scaleX=transform.s.v[0]+(1-transform.s.v[0])*(1-perc);var scaleY=transform.s.v[1]+(1-transform.s.v[1])*(1-perc);pMatrix.translate(transform.p.v[0]*dir*perc,transform.p.v[1]*dir*perc,transform.p.v[2]);rMatrix.translate(-transform.a.v[0],-transform.a.v[1],transform.a.v[2]);rMatrix.rotate(-transform.r.v*dir*perc);rMatrix.translate(transform.a.v[0],transform.a.v[1],transform.a.v[2]);sMatrix.translate(-transform.a.v[0],-transform.a.v[1],transform.a.v[2]);sMatrix.scale(inv?1/scaleX:scaleX,inv?1/scaleY:scaleY);sMatrix.translate(transform.a.v[0],transform.a.v[1],transform.a.v[2])};RepeaterModifier.prototype.init=function(elem,arr,pos,elemsData){this.elem=elem;this.arr=arr;this.pos=pos;this.elemsData=elemsData;this._currentCopies=0;this._elements=[];this._groups=[];this.frameId=-1;this.initDynamicPropertyContainer(elem);this.initModifierProperties(elem,arr[pos]);var cont=0;while(pos>0){pos-=1;this._elements.unshift(arr[pos]);cont+=1}if(this.dynamicProperties.length){this.k=true}else{this.getValue(true)}};RepeaterModifier.prototype.resetElements=function(elements){var i,len=elements.length;for(i=0;i<len;i+=1){elements[i]._processed=false;if(elements[i].ty==="gr"){this.resetElements(elements[i].it)}}};RepeaterModifier.prototype.cloneElements=function(elements){var i,len=elements.length;var newElements=JSON.parse(JSON.stringify(elements));this.resetElements(newElements);return newElements};RepeaterModifier.prototype.changeGroupRender=function(elements,renderFlag){var i,len=elements.length;for(i=0;i<len;i+=1){elements[i]._render=renderFlag;if(elements[i].ty==="gr"){this.changeGroupRender(elements[i].it,renderFlag)}}};RepeaterModifier.prototype.processShapes=function(_isFirstFrame){var items,itemsTransform,i,dir,cont;if(this._mdf||_isFirstFrame){var copies=Math.ceil(this.c.v);if(this._groups.length<copies){while(this._groups.length<copies){var group={it:this.cloneElements(this._elements),ty:"gr"};group.it.push({"a":{"a":0,"ix":1,"k":[0,0]},"nm":"Transform","o":{"a":0,"ix":7,"k":100},"p":{"a":0,"ix":2,"k":[0,0]},"r":{"a":1,"ix":6,"k":[{s:0,e:0,t:0},{s:0,e:0,t:1}]},"s":{"a":0,"ix":3,"k":[100,100]},"sa":{"a":0,"ix":5,"k":0},"sk":{"a":0,"ix":4,"k":0},"ty":"tr"});this.arr.splice(0,0,group);this._groups.splice(0,0,group);this._currentCopies+=1}this.elem.reloadShapes()}cont=0;var renderFlag;for(i=0;i<=this._groups.length-1;i+=1){renderFlag=cont<copies;this._groups[i]._render=renderFlag;this.changeGroupRender(this._groups[i].it,renderFlag);cont+=1}this._currentCopies=copies;var offset=this.o.v;var offsetModulo=offset%1;var roundOffset=offset>0?Math.floor(offset):Math.ceil(offset);var k;var tMat=this.tr.v.props;var pProps=this.pMatrix.props;var rProps=this.rMatrix.props;var sProps=this.sMatrix.props;this.pMatrix.reset();this.rMatrix.reset();this.sMatrix.reset();this.tMatrix.reset();this.matrix.reset();var iteration=0;if(offset>0){while(iteration<roundOffset){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,false);iteration+=1}if(offsetModulo){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,offsetModulo,false);iteration+=offsetModulo}}else if(offset<0){while(iteration>roundOffset){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,true);iteration-=1}if(offsetModulo){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-offsetModulo,true);iteration-=offsetModulo}}i=this.data.m===1?0:this._currentCopies-1;dir=this.data.m===1?1:-1;cont=this._currentCopies;var j,jLen;while(cont){items=this.elemsData[i].it;itemsTransform=items[items.length-1].transform.mProps.v.props;jLen=itemsTransform.length;items[items.length-1].transform.mProps._mdf=true;items[items.length-1].transform.op._mdf=true;items[items.length-1].transform.op.v=this.so.v+(this.eo.v-this.so.v)*(i/(this._currentCopies-1));if(iteration!==0){if(i!==0&&dir===1||i!==this._currentCopies-1&&dir===-1){this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,false)}this.matrix.transform(rProps[0],rProps[1],rProps[2],rProps[3],rProps[4],rProps[5],rProps[6],rProps[7],rProps[8],rProps[9],rProps[10],rProps[11],rProps[12],rProps[13],rProps[14],rProps[15]);this.matrix.transform(sProps[0],sProps[1],sProps[2],sProps[3],sProps[4],sProps[5],sProps[6],sProps[7],sProps[8],sProps[9],sProps[10],sProps[11],sProps[12],sProps[13],sProps[14],sProps[15]);this.matrix.transform(pProps[0],pProps[1],pProps[2],pProps[3],pProps[4],pProps[5],pProps[6],pProps[7],pProps[8],pProps[9],pProps[10],pProps[11],pProps[12],pProps[13],pProps[14],pProps[15]);for(j=0;j<jLen;j+=1){itemsTransform[j]=this.matrix.props[j]}this.matrix.reset()}else{this.matrix.reset();for(j=0;j<jLen;j+=1){itemsTransform[j]=this.matrix.props[j]}}iteration+=1;cont-=1;i+=dir}}else{cont=this._currentCopies;i=0;dir=1;while(cont){items=this.elemsData[i].it;itemsTransform=items[items.length-1].transform.mProps.v.props;items[items.length-1].transform.mProps._mdf=false;items[items.length-1].transform.op._mdf=false;cont-=1;i+=dir}}};RepeaterModifier.prototype.addShape=function(){};ShapeModifiers.registerModifier("rp",RepeaterModifier);function ShapeCollection(){this._length=0;this._maxLength=4;this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(shapeData){if(this._length===this._maxLength){this.shapes=this.shapes.concat(createSizedArray(this._maxLength));this._maxLength*=2}this.shapes[this._length]=shapeData;this._length+=1};ShapeCollection.prototype.releaseShapes=function(){var i;for(i=0;i<this._length;i+=1){shape_pool.release(this.shapes[i])}this._length=0};function DashProperty(elem,data,renderer,container){this.elem=elem;this.frameId=-1;this.dataProps=createSizedArray(data.length);this.renderer=renderer;this.k=false;this.dashStr="";this.dashArray=createTypedArray("float32",data.length?data.length-1:0);this.dashoffset=createTypedArray("float32",1);this.initDynamicPropertyContainer(container);var i,len=data.length||0,prop;for(i=0;i<len;i+=1){prop=PropertyFactory.getProp(elem,data[i].v,0,0,this);this.k=prop.k||this.k;this.dataProps[i]={n:data[i].n,p:prop}}if(!this.k){this.getValue(true)}this._isAnimated=this.k}DashProperty.prototype.getValue=function(forceRender){if(this.elem.globalData.frameId===this.frameId&&!forceRender){return}this.frameId=this.elem.globalData.frameId;this.iterateDynamicProperties();this._mdf=this._mdf||forceRender;if(this._mdf){var i=0,len=this.dataProps.length;if(this.renderer==="svg"){this.dashStr=""}for(i=0;i<len;i+=1){if(this.dataProps[i].n!="o"){if(this.renderer==="svg"){this.dashStr+=" "+this.dataProps[i].p.v}else{this.dashArray[i]=this.dataProps[i].p.v}}else{this.dashoffset[0]=this.dataProps[i].p.v}}}};extendPrototype([DynamicPropertyContainer],DashProperty);function GradientProperty(elem,data,container){this.data=data;this.c=createTypedArray("uint8c",data.p*4);var cLength=data.k.k[0].s?data.k.k[0].s.length-data.p*4:data.k.k.length-data.p*4;this.o=createTypedArray("float32",cLength);this._cmdf=false;this._omdf=false;this._collapsable=this.checkCollapsable();this._hasOpacity=cLength;this.initDynamicPropertyContainer(container);this.prop=PropertyFactory.getProp(elem,data.k,1,null,this);this.k=this.prop.k;this.getValue(true)}GradientProperty.prototype.comparePoints=function(values,points){var i=0,len=this.o.length/2,diff;while(i<len){diff=Math.abs(values[i*4]-values[points*4+i*2]);if(diff>0.01){return false}i+=1}return true};GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4){return false}if(this.data.k.k[0].s){var i=0,len=this.data.k.k.length;while(i<len){if(!this.comparePoints(this.data.k.k[i].s,this.data.p)){return false}i+=1}}else if(!this.comparePoints(this.data.k.k,this.data.p)){return false}return true};GradientProperty.prototype.getValue=function(forceRender){this.prop.getValue();this._mdf=false;this._cmdf=false;this._omdf=false;if(this.prop._mdf||forceRender){var i,len=this.data.p*4;var mult,val;for(i=0;i<len;i+=1){mult=i%4===0?100:255;val=Math.round(this.prop.v[i]*mult);if(this.c[i]!==val){this.c[i]=val;this._cmdf=!forceRender}}if(this.o.length){len=this.prop.v.length;for(i=this.data.p*4;i<len;i+=1){mult=i%2===0?100:1;val=i%2===0?Math.round(this.prop.v[i]*100):this.prop.v[i];if(this.o[i-this.data.p*4]!==val){this.o[i-this.data.p*4]=val;this._omdf=!forceRender}}}this._mdf=!forceRender}};extendPrototype([DynamicPropertyContainer],GradientProperty);var buildShapeString=function(pathNodes,length,closed,mat){if(length===0){return""}var _o=pathNodes.o;var _i=pathNodes.i;var _v=pathNodes.v;var i,shapeString=" M"+mat.applyToPointStringified(_v[0][0],_v[0][1]);for(i=1;i<length;i+=1){shapeString+=" C"+mat.applyToPointStringified(_o[i-1][0],_o[i-1][1])+" "+mat.applyToPointStringified(_i[i][0],_i[i][1])+" "+mat.applyToPointStringified(_v[i][0],_v[i][1])}if(closed&&length){shapeString+=" C"+mat.applyToPointStringified(_o[i-1][0],_o[i-1][1])+" "+mat.applyToPointStringified(_i[0][0],_i[0][1])+" "+mat.applyToPointStringified(_v[0][0],_v[0][1]);shapeString+="z"}return shapeString};var ImagePreloader=function(){var proxyImage=function(){var canvas=createTag("canvas");canvas.width=1;canvas.height=1;var ctx=canvas.getContext("2d");ctx.fillStyle="#FF0000";ctx.fillRect(0,0,1,1);return canvas}();function imageLoaded(){this.loadedAssets+=1;if(this.loadedAssets===this.totalImages){if(this.imagesLoadedCb){this.imagesLoadedCb(null)}}}function getAssetsPath(assetData,assetsPath,original_path){var path="";if(assetData.e){path=assetData.p}else if(assetsPath){var imagePath=assetData.p;if(imagePath.indexOf("images/")!==-1){imagePath=imagePath.split("/")[1]}path=assetsPath+imagePath}else{path=original_path;path+=assetData.u?assetData.u:"";path+=assetData.p}return path}function createImageData(assetData){var path=getAssetsPath(assetData,this.assetsPath,this.path);var img=createTag("img");img.crossOrigin="anonymous";img.addEventListener("load",this._imageLoaded.bind(this),false);img.addEventListener("error",function(){ob.img=proxyImage;this._imageLoaded()}.bind(this),false);img.src=path;var ob={img:img,assetData:assetData};return ob}function loadAssets(assets,cb){this.imagesLoadedCb=cb;var i,len=assets.length;for(i=0;i<len;i+=1){if(!assets[i].layers){this.totalImages+=1;this.images.push(this._createImageData(assets[i]))}}}function setPath(path){this.path=path||""}function setAssetsPath(path){this.assetsPath=path||""}function getImage(assetData){var i=0,len=this.images.length;while(i<len){if(this.images[i].assetData===assetData){return this.images[i].img}i+=1}}function destroy(){this.imagesLoadedCb=null;this.images.length=0}function loaded(){return this.totalImages===this.loadedAssets}return function ImagePreloader(){this.loadAssets=loadAssets;this.setAssetsPath=setAssetsPath;this.setPath=setPath;this.loaded=loaded;this.destroy=destroy;this.getImage=getImage;this._createImageData=createImageData;this._imageLoaded=imageLoaded;this.assetsPath="";this.path="";this.totalImages=0;this.loadedAssets=0;this.imagesLoadedCb=null;this.images=[]}}();var featureSupport=function(){var ob={maskType:true};if(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent)){ob.maskType=false}return ob}();var filtersFactory=function(){var ob={};ob.createFilter=createFilter;ob.createAlphaToLuminanceFilter=createAlphaToLuminanceFilter;function createFilter(filId){var fil=createNS("filter");fil.setAttribute("id",filId);fil.setAttribute("filterUnits","objectBoundingBox");fil.setAttribute("x","0%");fil.setAttribute("y","0%");fil.setAttribute("width","100%");fil.setAttribute("height","100%");return fil}function createAlphaToLuminanceFilter(){var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("color-interpolation-filters","sRGB");feColorMatrix.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1");return feColorMatrix}return ob}();var assetLoader=function(){function formatResponse(xhr){if(xhr.response&&typeof xhr.response==="object"){return xhr.response}else if(xhr.response&&typeof xhr.response==="string"){return JSON.parse(xhr.response)}else if(xhr.responseText){return JSON.parse(xhr.responseText)}}function loadAsset(path,callback,errorCallback){var response;var xhr=new XMLHttpRequest;xhr.open("GET",path,true);try{xhr.responseType="json"}catch(err){}xhr.send();xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status==200){response=formatResponse(xhr);callback(response)}else{try{response=formatResponse(xhr);callback(response)}catch(err){if(errorCallback){errorCallback(err)}}}}}}return{load:loadAsset}}();function TextAnimatorProperty(textData,renderType,elem){this._isFirstFrame=true;this._hasMaskedPath=false;this._frameId=-1;this._textData=textData;this._renderType=renderType;this._elem=elem;this._animatorsData=createSizedArray(this._textData.a.length);this._pathData={};this._moreOptions={alignment:{}};this.renderedLetters=[];this.lettersChangedFlag=false;this.initDynamicPropertyContainer(elem)}TextAnimatorProperty.prototype.searchProperties=function(){var i,len=this._textData.a.length,animatorProps;var getProp=PropertyFactory.getProp;for(i=0;i<len;i+=1){animatorProps=this._textData.a[i];this._animatorsData[i]=new TextAnimatorDataProperty(this._elem,animatorProps,this)}if(this._textData.p&&"m"in this._textData.p){this._pathData={f:getProp(this._elem,this._textData.p.f,0,0,this),l:getProp(this._elem,this._textData.p.l,0,0,this),r:this._textData.p.r,m:this._elem.maskManager.getMaskProperty(this._textData.p.m)};this._hasMaskedPath=true}else{this._hasMaskedPath=false}this._moreOptions.alignment=getProp(this._elem,this._textData.m.a,1,0,this)};TextAnimatorProperty.prototype.getMeasures=function(documentData,lettersChangedFlag){this.lettersChangedFlag=lettersChangedFlag;if(!this._mdf&&!this._isFirstFrame&&!lettersChangedFlag&&(!this._hasMaskedPath||!this._pathData.m._mdf)){return}this._isFirstFrame=false;var alignment=this._moreOptions.alignment.v;var animators=this._animatorsData;var textData=this._textData;var matrixHelper=this.mHelper;var renderType=this._renderType;var renderedLettersCount=this.renderedLetters.length;var data=this.data;var xPos,yPos;var i,len;var letters=documentData.l,pathInfo,currentLength,currentPoint,segmentLength,flag,pointInd,segmentInd,prevPoint,points,segments,partialLength,totalLength,perc,tanAngle,mask;if(this._hasMaskedPath){mask=this._pathData.m;if(!this._pathData.n||this._pathData._mdf){var paths=mask.v;if(this._pathData.r){paths=paths.reverse()}pathInfo={tLength:0,segments:[]};len=paths._length-1;var bezierData;totalLength=0;for(i=0;i<len;i+=1){bezierData=bez.buildBezierData(paths.v[i],paths.v[i+1],[paths.o[i][0]-paths.v[i][0],paths.o[i][1]-paths.v[i][1]],[paths.i[i+1][0]-paths.v[i+1][0],paths.i[i+1][1]-paths.v[i+1][1]]);pathInfo.tLength+=bezierData.segmentLength;pathInfo.segments.push(bezierData);totalLength+=bezierData.segmentLength}i=len;if(mask.v.c){bezierData=bez.buildBezierData(paths.v[i],paths.v[0],[paths.o[i][0]-paths.v[i][0],paths.o[i][1]-paths.v[i][1]],[paths.i[0][0]-paths.v[0][0],paths.i[0][1]-paths.v[0][1]]);pathInfo.tLength+=bezierData.segmentLength;pathInfo.segments.push(bezierData);totalLength+=bezierData.segmentLength}this._pathData.pi=pathInfo}pathInfo=this._pathData.pi;currentLength=this._pathData.f.v;segmentInd=0;pointInd=1;segmentLength=0;flag=true;segments=pathInfo.segments;if(currentLength<0&&mask.v.c){if(pathInfo.tLength<Math.abs(currentLength)){currentLength=-Math.abs(currentLength)%pathInfo.tLength}segmentInd=segments.length-1;points=segments[segmentInd].points;pointInd=points.length-1;while(currentLength<0){currentLength+=points[pointInd].partialLength;pointInd-=1;if(pointInd<0){segmentInd-=1;points=segments[segmentInd].points;pointInd=points.length-1}}}points=segments[segmentInd].points;prevPoint=points[pointInd-1];currentPoint=points[pointInd];partialLength=currentPoint.partialLength}len=letters.length;xPos=0;yPos=0;var yOff=documentData.finalSize*1.2*0.714;var firstLine=true;var animatorProps,animatorSelector;var j,jLen;var letterValue;jLen=animators.length;var lastLetter;var mult,ind=-1,offf,xPathPos,yPathPos;var initPathPos=currentLength,initSegmentInd=segmentInd,initPointInd=pointInd,currentLine=-1;var elemOpacity;var sc,sw,fc,k;var lineLength=0;var letterSw,letterSc,letterFc,letterM="",letterP=this.defaultPropsArray,letterO;if(documentData.j===2||documentData.j===1){var animatorJustifyOffset=0;var animatorFirstCharOffset=0;var justifyOffsetMult=documentData.j===2?-0.5:-1;var lastIndex=0;var isNewLine=true;for(i=0;i<len;i+=1){if(letters[i].n){if(animatorJustifyOffset){animatorJustifyOffset+=animatorFirstCharOffset}while(lastIndex<i){letters[lastIndex].animatorJustifyOffset=animatorJustifyOffset;lastIndex+=1}animatorJustifyOffset=0;isNewLine=true}else{for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.t.propType){if(isNewLine&&documentData.j===2){animatorFirstCharOffset+=animatorProps.t.v*justifyOffsetMult}animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(mult.length){animatorJustifyOffset+=animatorProps.t.v*mult[0]*justifyOffsetMult}else{animatorJustifyOffset+=animatorProps.t.v*mult*justifyOffsetMult}}}isNewLine=false}}if(animatorJustifyOffset){animatorJustifyOffset+=animatorFirstCharOffset}while(lastIndex<i){letters[lastIndex].animatorJustifyOffset=animatorJustifyOffset;lastIndex+=1}}for(i=0;i<len;i+=1){matrixHelper.reset();elemOpacity=1;if(letters[i].n){xPos=0;yPos+=documentData.yOffset;yPos+=firstLine?1:0;currentLength=initPathPos;firstLine=false;lineLength=0;if(this._hasMaskedPath){segmentInd=initSegmentInd;pointInd=initPointInd;points=segments[segmentInd].points;prevPoint=points[pointInd-1];currentPoint=points[pointInd];partialLength=currentPoint.partialLength;segmentLength=0}letterO=letterSw=letterFc=letterM="";letterP=this.defaultPropsArray}else{if(this._hasMaskedPath){if(currentLine!==letters[i].line){switch(documentData.j){case 1:currentLength+=totalLength-documentData.lineWidths[letters[i].line];break;case 2:currentLength+=(totalLength-documentData.lineWidths[letters[i].line])/2;break;}currentLine=letters[i].line}if(ind!==letters[i].ind){if(letters[ind]){currentLength+=letters[ind].extra}currentLength+=letters[i].an/2;ind=letters[i].ind}currentLength+=alignment[0]*letters[i].an/200;var animatorOffset=0;for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.p.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(mult.length){animatorOffset+=animatorProps.p.v[0]*mult[0]}else{animatorOffset+=animatorProps.p.v[0]*mult}}if(animatorProps.a.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(mult.length){animatorOffset+=animatorProps.a.v[0]*mult[0]}else{animatorOffset+=animatorProps.a.v[0]*mult}}}flag=true;while(flag){if(segmentLength+partialLength>=currentLength+animatorOffset||!points){perc=(currentLength+animatorOffset-segmentLength)/currentPoint.partialLength;xPathPos=prevPoint.point[0]+(currentPoint.point[0]-prevPoint.point[0])*perc;yPathPos=prevPoint.point[1]+(currentPoint.point[1]-prevPoint.point[1])*perc;matrixHelper.translate(-alignment[0]*letters[i].an/200,-(alignment[1]*yOff/100));flag=false}else if(points){segmentLength+=currentPoint.partialLength;pointInd+=1;if(pointInd>=points.length){pointInd=0;segmentInd+=1;if(!segments[segmentInd]){if(mask.v.c){pointInd=0;segmentInd=0;points=segments[segmentInd].points}else{segmentLength-=currentPoint.partialLength;points=null}}else{points=segments[segmentInd].points}}if(points){prevPoint=currentPoint;currentPoint=points[pointInd];partialLength=currentPoint.partialLength}}}offf=letters[i].an/2-letters[i].add;matrixHelper.translate(-offf,0,0)}else{offf=letters[i].an/2-letters[i].add;matrixHelper.translate(-offf,0,0);matrixHelper.translate(-alignment[0]*letters[i].an/200,-alignment[1]*yOff/100,0)}lineLength+=letters[i].l/2;for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.t.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(xPos!==0||documentData.j!==0){if(this._hasMaskedPath){if(mult.length){currentLength+=animatorProps.t.v*mult[0]}else{currentLength+=animatorProps.t.v*mult}}else{if(mult.length){xPos+=animatorProps.t.v*mult[0]}else{xPos+=animatorProps.t.v*mult}}}}}lineLength+=letters[i].l/2;if(documentData.strokeWidthAnim){sw=documentData.sw||0}if(documentData.strokeColorAnim){if(documentData.sc){sc=[documentData.sc[0],documentData.sc[1],documentData.sc[2]]}else{sc=[0,0,0]}}if(documentData.fillColorAnim&&documentData.fc){fc=[documentData.fc[0],documentData.fc[1],documentData.fc[2]]}for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.a.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(mult.length){matrixHelper.translate(-animatorProps.a.v[0]*mult[0],-animatorProps.a.v[1]*mult[1],animatorProps.a.v[2]*mult[2])}else{matrixHelper.translate(-animatorProps.a.v[0]*mult,-animatorProps.a.v[1]*mult,animatorProps.a.v[2]*mult)}}}for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.s.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(mult.length){matrixHelper.scale(1+(animatorProps.s.v[0]-1)*mult[0],1+(animatorProps.s.v[1]-1)*mult[1],1)}else{matrixHelper.scale(1+(animatorProps.s.v[0]-1)*mult,1+(animatorProps.s.v[1]-1)*mult,1)}}}for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(animatorProps.sk.propType){if(mult.length){matrixHelper.skewFromAxis(-animatorProps.sk.v*mult[0],animatorProps.sa.v*mult[1])}else{matrixHelper.skewFromAxis(-animatorProps.sk.v*mult,animatorProps.sa.v*mult)}}if(animatorProps.r.propType){if(mult.length){matrixHelper.rotateZ(-animatorProps.r.v*mult[2])}else{matrixHelper.rotateZ(-animatorProps.r.v*mult)}}if(animatorProps.ry.propType){if(mult.length){matrixHelper.rotateY(animatorProps.ry.v*mult[1])}else{matrixHelper.rotateY(animatorProps.ry.v*mult)}}if(animatorProps.rx.propType){if(mult.length){matrixHelper.rotateX(animatorProps.rx.v*mult[0])}else{matrixHelper.rotateX(animatorProps.rx.v*mult)}}if(animatorProps.o.propType){if(mult.length){elemOpacity+=(animatorProps.o.v*mult[0]-elemOpacity)*mult[0]}else{elemOpacity+=(animatorProps.o.v*mult-elemOpacity)*mult}}if(documentData.strokeWidthAnim&&animatorProps.sw.propType){if(mult.length){sw+=animatorProps.sw.v*mult[0]}else{sw+=animatorProps.sw.v*mult}}if(documentData.strokeColorAnim&&animatorProps.sc.propType){for(k=0;k<3;k+=1){if(mult.length){sc[k]=sc[k]+(animatorProps.sc.v[k]-sc[k])*mult[0]}else{sc[k]=sc[k]+(animatorProps.sc.v[k]-sc[k])*mult}}}if(documentData.fillColorAnim&&documentData.fc){if(animatorProps.fc.propType){for(k=0;k<3;k+=1){if(mult.length){fc[k]=fc[k]+(animatorProps.fc.v[k]-fc[k])*mult[0]}else{fc[k]=fc[k]+(animatorProps.fc.v[k]-fc[k])*mult}}}if(animatorProps.fh.propType){if(mult.length){fc=addHueToRGB(fc,animatorProps.fh.v*mult[0])}else{fc=addHueToRGB(fc,animatorProps.fh.v*mult)}}if(animatorProps.fs.propType){if(mult.length){fc=addSaturationToRGB(fc,animatorProps.fs.v*mult[0])}else{fc=addSaturationToRGB(fc,animatorProps.fs.v*mult)}}if(animatorProps.fb.propType){if(mult.length){fc=addBrightnessToRGB(fc,animatorProps.fb.v*mult[0])}else{fc=addBrightnessToRGB(fc,animatorProps.fb.v*mult)}}}}for(j=0;j<jLen;j+=1){animatorProps=animators[j].a;if(animatorProps.p.propType){animatorSelector=animators[j].s;mult=animatorSelector.getMult(letters[i].anIndexes[j],textData.a[j].s.totalChars);if(this._hasMaskedPath){if(mult.length){matrixHelper.translate(0,animatorProps.p.v[1]*mult[0],-animatorProps.p.v[2]*mult[1])}else{matrixHelper.translate(0,animatorProps.p.v[1]*mult,-animatorProps.p.v[2]*mult)}}else{if(mult.length){matrixHelper.translate(animatorProps.p.v[0]*mult[0],animatorProps.p.v[1]*mult[1],-animatorProps.p.v[2]*mult[2])}else{matrixHelper.translate(animatorProps.p.v[0]*mult,animatorProps.p.v[1]*mult,-animatorProps.p.v[2]*mult)}}}}if(documentData.strokeWidthAnim){letterSw=sw<0?0:sw}if(documentData.strokeColorAnim){letterSc="rgb("+Math.round(sc[0]*255)+","+Math.round(sc[1]*255)+","+Math.round(sc[2]*255)+")"}if(documentData.fillColorAnim&&documentData.fc){letterFc="rgb("+Math.round(fc[0]*255)+","+Math.round(fc[1]*255)+","+Math.round(fc[2]*255)+")"}if(this._hasMaskedPath){matrixHelper.translate(0,-documentData.ls);matrixHelper.translate(0,alignment[1]*yOff/100+yPos,0);if(textData.p.p){tanAngle=(currentPoint.point[1]-prevPoint.point[1])/(currentPoint.point[0]-prevPoint.point[0]);var rot=Math.atan(tanAngle)*180/Math.PI;if(currentPoint.point[0]<prevPoint.point[0]){rot+=180}matrixHelper.rotate(-rot*Math.PI/180)}matrixHelper.translate(xPathPos,yPathPos,0);currentLength-=alignment[0]*letters[i].an/200;if(letters[i+1]&&ind!==letters[i+1].ind){currentLength+=letters[i].an/2;currentLength+=documentData.tr/1000*documentData.finalSize}}else{matrixHelper.translate(xPos,yPos,0);if(documentData.ps){matrixHelper.translate(documentData.ps[0],documentData.ps[1]+documentData.ascent,0)}switch(documentData.j){case 1:matrixHelper.translate(letters[i].animatorJustifyOffset+documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[letters[i].line]),0,0);break;case 2:matrixHelper.translate(letters[i].animatorJustifyOffset+documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[letters[i].line])/2,0,0);break;}matrixHelper.translate(0,-documentData.ls);matrixHelper.translate(offf,0,0);matrixHelper.translate(alignment[0]*letters[i].an/200,alignment[1]*yOff/100,0);xPos+=letters[i].l+documentData.tr/1000*documentData.finalSize}if(renderType==="html"){letterM=matrixHelper.toCSS()}else if(renderType==="svg"){letterM=matrixHelper.to2dCSS()}else{letterP=[matrixHelper.props[0],matrixHelper.props[1],matrixHelper.props[2],matrixHelper.props[3],matrixHelper.props[4],matrixHelper.props[5],matrixHelper.props[6],matrixHelper.props[7],matrixHelper.props[8],matrixHelper.props[9],matrixHelper.props[10],matrixHelper.props[11],matrixHelper.props[12],matrixHelper.props[13],matrixHelper.props[14],matrixHelper.props[15]]}letterO=elemOpacity}if(renderedLettersCount<=i){letterValue=new LetterProps(letterO,letterSw,letterSc,letterFc,letterM,letterP);this.renderedLetters.push(letterValue);renderedLettersCount+=1;this.lettersChangedFlag=true}else{letterValue=this.renderedLetters[i];this.lettersChangedFlag=letterValue.update(letterO,letterSw,letterSc,letterFc,letterM,letterP)||this.lettersChangedFlag}}};TextAnimatorProperty.prototype.getValue=function(){if(this._elem.globalData.frameId===this._frameId){return}this._frameId=this._elem.globalData.frameId;this.iterateDynamicProperties()};TextAnimatorProperty.prototype.mHelper=new Matrix;TextAnimatorProperty.prototype.defaultPropsArray=[];extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function TextAnimatorDataProperty(elem,animatorProps,container){var defaultData={propType:false};var getProp=PropertyFactory.getProp;var textAnimator_animatables=animatorProps.a;this.a={r:textAnimator_animatables.r?getProp(elem,textAnimator_animatables.r,0,degToRads,container):defaultData,rx:textAnimator_animatables.rx?getProp(elem,textAnimator_animatables.rx,0,degToRads,container):defaultData,ry:textAnimator_animatables.ry?getProp(elem,textAnimator_animatables.ry,0,degToRads,container):defaultData,sk:textAnimator_animatables.sk?getProp(elem,textAnimator_animatables.sk,0,degToRads,container):defaultData,sa:textAnimator_animatables.sa?getProp(elem,textAnimator_animatables.sa,0,degToRads,container):defaultData,s:textAnimator_animatables.s?getProp(elem,textAnimator_animatables.s,1,0.01,container):defaultData,a:textAnimator_animatables.a?getProp(elem,textAnimator_animatables.a,1,0,container):defaultData,o:textAnimator_animatables.o?getProp(elem,textAnimator_animatables.o,0,0.01,container):defaultData,p:textAnimator_animatables.p?getProp(elem,textAnimator_animatables.p,1,0,container):defaultData,sw:textAnimator_animatables.sw?getProp(elem,textAnimator_animatables.sw,0,0,container):defaultData,sc:textAnimator_animatables.sc?getProp(elem,textAnimator_animatables.sc,1,0,container):defaultData,fc:textAnimator_animatables.fc?getProp(elem,textAnimator_animatables.fc,1,0,container):defaultData,fh:textAnimator_animatables.fh?getProp(elem,textAnimator_animatables.fh,0,0,container):defaultData,fs:textAnimator_animatables.fs?getProp(elem,textAnimator_animatables.fs,0,0.01,container):defaultData,fb:textAnimator_animatables.fb?getProp(elem,textAnimator_animatables.fb,0,0.01,container):defaultData,t:textAnimator_animatables.t?getProp(elem,textAnimator_animatables.t,0,0,container):defaultData};this.s=TextSelectorProp.getTextSelectorProp(elem,animatorProps.s,container);this.s.t=animatorProps.s.t}function LetterProps(o,sw,sc,fc,m,p){this.o=o;this.sw=sw;this.sc=sc;this.fc=fc;this.m=m;this.p=p;this._mdf={o:true,sw:!!sw,sc:!!sc,fc:!!fc,m:true,p:true}}LetterProps.prototype.update=function(o,sw,sc,fc,m,p){this._mdf.o=false;this._mdf.sw=false;this._mdf.sc=false;this._mdf.fc=false;this._mdf.m=false;this._mdf.p=false;var updated=false;if(this.o!==o){this.o=o;this._mdf.o=true;updated=true}if(this.sw!==sw){this.sw=sw;this._mdf.sw=true;updated=true}if(this.sc!==sc){this.sc=sc;this._mdf.sc=true;updated=true}if(this.fc!==fc){this.fc=fc;this._mdf.fc=true;updated=true}if(this.m!==m){this.m=m;this._mdf.m=true;updated=true}if(p.length&&(this.p[0]!==p[0]||this.p[1]!==p[1]||this.p[4]!==p[4]||this.p[5]!==p[5]||this.p[12]!==p[12]||this.p[13]!==p[13])){this.p=p;this._mdf.p=true;updated=true}return updated};function TextProperty(elem,data){this._frameId=initialDefaultFrame;this.pv="";this.v="";this.kf=false;this._isFirstFrame=true;this._mdf=false;this.data=data;this.elem=elem;this.comp=this.elem.comp;this.keysIndex=0;this.canResize=false;this.minimumFontSize=1;this.effectsSequence=[];this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:false,strokeColorAnim:false,strokeWidthAnim:false,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:false};this.copyData(this.currentData,this.data.d.k[0].s);if(!this.searchProperty()){this.completeTextData(this.currentData)}}TextProperty.prototype.defaultBoxWidth=[0,0];TextProperty.prototype.copyData=function(obj,data){for(var s in data){if(data.hasOwnProperty(s)){obj[s]=data[s]}}return obj};TextProperty.prototype.setCurrentData=function(data){if(!data.__complete){this.completeTextData(data)}this.currentData=data;this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth;this._mdf=true};TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()};TextProperty.prototype.searchKeyframes=function(){this.kf=this.data.d.k.length>1;if(this.kf){this.addEffect(this.getKeyframeValue.bind(this))}return this.kf};TextProperty.prototype.addEffect=function(effectFunction){this.effectsSequence.push(effectFunction);this.elem.addDynamicProperty(this)};TextProperty.prototype.getValue=function(_finalValue){if((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!_finalValue){return}this.currentData.t=this.data.d.k[this.keysIndex].s.t;var currentValue=this.currentData;var currentIndex=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=true;this._mdf=false;var multipliedValue;var i,len=this.effectsSequence.length;var finalValue=_finalValue||this.data.d.k[this.keysIndex].s;for(i=0;i<len;i+=1){if(currentIndex!==this.keysIndex){finalValue=this.effectsSequence[i](finalValue,finalValue.t)}else{finalValue=this.effectsSequence[i](this.currentData,finalValue.t)}}if(currentValue!==finalValue){this.setCurrentData(finalValue)}this.pv=this.v=this.currentData;this.lock=false;this.frameId=this.elem.globalData.frameId};TextProperty.prototype.getKeyframeValue=function(){var textKeys=this.data.d.k,textDocumentData;var frameNum=this.elem.comp.renderedFrame;var i=0,len=textKeys.length;while(i<=len-1){textDocumentData=textKeys[i].s;if(i===len-1||textKeys[i+1].t>frameNum){break}i+=1}if(this.keysIndex!==i){this.keysIndex=i}return this.data.d.k[this.keysIndex].s};TextProperty.prototype.buildFinalText=function(text){var combinedCharacters=FontManager.getCombinedCharacterCodes();var charactersArray=[];var i=0,len=text.length;while(i<len){if(combinedCharacters.indexOf(text.charCodeAt(i))!==-1){charactersArray[charactersArray.length-1]+=text.charAt(i)}else{charactersArray.push(text.charAt(i))}i+=1}return charactersArray};TextProperty.prototype.completeTextData=function(documentData){documentData.__complete=true;var fontManager=this.elem.globalData.fontManager;var data=this.data;var letters=[];var i,len;var newLineFlag,index=0,val;var anchorGrouping=data.m.g;var currentSize=0,currentPos=0,currentLine=0,lineWidths=[];var lineWidth=0;var maxLineWidth=0;var j,jLen;var fontData=fontManager.getFontByName(documentData.f);var charData,cLength=0;var styles=fontData.fStyle?fontData.fStyle.split(" "):[];var fWeight="normal",fStyle="normal";len=styles.length;var styleName;for(i=0;i<len;i+=1){styleName=styles[i].toLowerCase();switch(styleName){case"italic":fStyle="italic";break;case"bold":fWeight="700";break;case"black":fWeight="900";break;case"medium":fWeight="500";break;case"regular":case"normal":fWeight="400";break;case"light":case"thin":fWeight="200";break;}}documentData.fWeight=fontData.fWeight||fWeight;documentData.fStyle=fStyle;len=documentData.t.length;documentData.finalSize=documentData.s;documentData.finalText=this.buildFinalText(documentData.t);documentData.finalLineHeight=documentData.lh;var trackingOffset=documentData.tr/1000*documentData.finalSize;var charCode;if(documentData.sz){var flag=true;var boxWidth=documentData.sz[0];var boxHeight=documentData.sz[1];var currentHeight,finalText;while(flag){finalText=this.buildFinalText(documentData.t);currentHeight=0;lineWidth=0;len=finalText.length;trackingOffset=documentData.tr/1000*documentData.finalSize;var lastSpaceIndex=-1;for(i=0;i<len;i+=1){charCode=finalText[i].charCodeAt(0);newLineFlag=false;if(finalText[i]===" "){lastSpaceIndex=i}else if(charCode===13||charCode===3){lineWidth=0;newLineFlag=true;currentHeight+=documentData.finalLineHeight||documentData.finalSize*1.2}if(fontManager.chars){charData=fontManager.getCharData(finalText[i],fontData.fStyle,fontData.fFamily);cLength=newLineFlag?0:charData.w*documentData.finalSize/100}else{cLength=fontManager.measureText(finalText[i],documentData.f,documentData.finalSize)}if(lineWidth+cLength>boxWidth&&finalText[i]!==" "){if(lastSpaceIndex===-1){len+=1}else{i=lastSpaceIndex}currentHeight+=documentData.finalLineHeight||documentData.finalSize*1.2;finalText.splice(i,lastSpaceIndex===i?1:0,"\r");lastSpaceIndex=-1;lineWidth=0}else{lineWidth+=cLength;lineWidth+=trackingOffset}}currentHeight+=fontData.ascent*documentData.finalSize/100;if(this.canResize&&documentData.finalSize>this.minimumFontSize&&boxHeight<currentHeight){documentData.finalSize-=1;documentData.finalLineHeight=documentData.finalSize*documentData.lh/documentData.s}else{documentData.finalText=finalText;len=documentData.finalText.length;flag=false}}}lineWidth=-trackingOffset;cLength=0;var uncollapsedSpaces=0;var currentChar;for(i=0;i<len;i+=1){newLineFlag=false;currentChar=documentData.finalText[i];charCode=currentChar.charCodeAt(0);if(currentChar===" "){val="\xA0"}else if(charCode===13||charCode===3){uncollapsedSpaces=0;lineWidths.push(lineWidth);maxLineWidth=lineWidth>maxLineWidth?lineWidth:maxLineWidth;lineWidth=-2*trackingOffset;val="";newLineFlag=true;currentLine+=1}else{val=documentData.finalText[i]}if(fontManager.chars){charData=fontManager.getCharData(currentChar,fontData.fStyle,fontManager.getFontByName(documentData.f).fFamily);cLength=newLineFlag?0:charData.w*documentData.finalSize/100}else{cLength=fontManager.measureText(val,documentData.f,documentData.finalSize)}if(currentChar===" "){uncollapsedSpaces+=cLength+trackingOffset}else{lineWidth+=cLength+trackingOffset+uncollapsedSpaces;uncollapsedSpaces=0}letters.push({l:cLength,an:cLength,add:currentSize,n:newLineFlag,anIndexes:[],val:val,line:currentLine,animatorJustifyOffset:0});if(anchorGrouping==2){currentSize+=cLength;if(val===""||val==="\xA0"||i===len-1){if(val===""||val==="\xA0"){currentSize-=cLength}while(currentPos<=i){letters[currentPos].an=currentSize;letters[currentPos].ind=index;letters[currentPos].extra=cLength;currentPos+=1}index+=1;currentSize=0}}else if(anchorGrouping==3){currentSize+=cLength;if(val===""||i===len-1){if(val===""){currentSize-=cLength}while(currentPos<=i){letters[currentPos].an=currentSize;letters[currentPos].ind=index;letters[currentPos].extra=cLength;currentPos+=1}currentSize=0;index+=1}}else{letters[index].ind=index;letters[index].extra=0;index+=1}}documentData.l=letters;maxLineWidth=lineWidth>maxLineWidth?lineWidth:maxLineWidth;lineWidths.push(lineWidth);if(documentData.sz){documentData.boxWidth=documentData.sz[0];documentData.justifyOffset=0}else{documentData.boxWidth=maxLineWidth;switch(documentData.j){case 1:documentData.justifyOffset=-documentData.boxWidth;break;case 2:documentData.justifyOffset=-documentData.boxWidth/2;break;default:documentData.justifyOffset=0;}}documentData.lineWidths=lineWidths;var animators=data.a,animatorData,letterData;jLen=animators.length;var based,ind,indexes=[];for(j=0;j<jLen;j+=1){animatorData=animators[j];if(animatorData.a.sc){documentData.strokeColorAnim=true}if(animatorData.a.sw){documentData.strokeWidthAnim=true}if(animatorData.a.fc||animatorData.a.fh||animatorData.a.fs||animatorData.a.fb){documentData.fillColorAnim=true}ind=0;based=animatorData.s.b;for(i=0;i<len;i+=1){letterData=letters[i];letterData.anIndexes[j]=ind;if(based==1&&letterData.val!==""||based==2&&letterData.val!==""&&letterData.val!=="\xA0"||based==3&&(letterData.n||letterData.val=="\xA0"||i==len-1)||based==4&&(letterData.n||i==len-1)){if(animatorData.s.rn===1){indexes.push(ind)}ind+=1}}data.a[j].s.totalChars=ind;var currentInd=-1,newInd;if(animatorData.s.rn===1){for(i=0;i<len;i+=1){letterData=letters[i];if(currentInd!=letterData.anIndexes[j]){currentInd=letterData.anIndexes[j];newInd=indexes.splice(Math.floor(Math.random()*indexes.length),1)[0]}letterData.anIndexes[j]=newInd}}}documentData.yOffset=documentData.finalLineHeight||documentData.finalSize*1.2;documentData.ls=documentData.ls||0;documentData.ascent=fontData.ascent*documentData.finalSize/100};TextProperty.prototype.updateDocumentData=function(newData,index){index=index===undefined?this.keysIndex:index;var dData=this.copyData({},this.data.d.k[index].s);dData=this.copyData(dData,newData);this.data.d.k[index].s=dData;this.recalculate(index);this.elem.addDynamicProperty(this)};TextProperty.prototype.recalculate=function(index){var dData=this.data.d.k[index].s;dData.__complete=false;this.keysIndex=0;this._isFirstFrame=true;this.getValue(dData)};TextProperty.prototype.canResizeFont=function(_canResize){this.canResize=_canResize;this.recalculate(this.keysIndex);this.elem.addDynamicProperty(this)};TextProperty.prototype.setMinimumFontSize=function(_fontValue){this.minimumFontSize=Math.floor(_fontValue)||1;this.recalculate(this.keysIndex);this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var max=Math.max;var min=Math.min;var floor=Math.floor;function TextSelectorProp(elem,data){this._currentTextLength=-1;this.k=false;this.data=data;this.elem=elem;this.comp=elem.comp;this.finalS=0;this.finalE=0;this.initDynamicPropertyContainer(elem);this.s=PropertyFactory.getProp(elem,data.s||{k:0},0,0,this);if("e"in data){this.e=PropertyFactory.getProp(elem,data.e,0,0,this)}else{this.e={v:100}}this.o=PropertyFactory.getProp(elem,data.o||{k:0},0,0,this);this.xe=PropertyFactory.getProp(elem,data.xe||{k:0},0,0,this);this.ne=PropertyFactory.getProp(elem,data.ne||{k:0},0,0,this);this.a=PropertyFactory.getProp(elem,data.a,0,0.01,this);if(!this.dynamicProperties.length){this.getValue()}}TextSelectorProp.prototype={getMult:function(ind){if(this._currentTextLength!==this.elem.textProperty.currentData.l.length){this.getValue()}var easer=BezierFactory.getBezierEasing(this.ne.v/100,0,1-this.xe.v/100,1).get;var mult=0;var s=this.finalS;var e=this.finalE;var type=this.data.sh;if(type==2){if(e===s){mult=ind>=e?1:0}else{mult=max(0,min(0.5/(e-s)+(ind-s)/(e-s),1))}mult=easer(mult)}else if(type==3){if(e===s){mult=ind>=e?0:1}else{mult=1-max(0,min(0.5/(e-s)+(ind-s)/(e-s),1))}mult=easer(mult)}else if(type==4){if(e===s){mult=0}else{mult=max(0,min(0.5/(e-s)+(ind-s)/(e-s),1));if(mult<0.5){mult*=2}else{mult=1-2*(mult-0.5)}}mult=easer(mult)}else if(type==5){if(e===s){mult=0}else{var tot=e-s;ind=min(max(0,ind+0.5-s),e-s);var x=-tot/2+ind;var a=tot/2;mult=Math.sqrt(1-x*x/(a*a))}mult=easer(mult)}else if(type==6){if(e===s){mult=0}else{ind=min(max(0,ind+0.5-s),e-s);mult=(1+Math.cos(Math.PI+Math.PI*2*ind/(e-s)))/2}mult=easer(mult)}else{if(ind>=floor(s)){if(ind-s<0){mult=1-(s-ind)}else{mult=max(0,min(e-ind,1))}}mult=easer(mult)}return mult*this.a.v},getValue:function(newCharsFlag){this.iterateDynamicProperties();this._mdf=newCharsFlag||this._mdf;this._currentTextLength=this.elem.textProperty.currentData.l.length||0;if(newCharsFlag&&this.data.r===2){this.e.v=this._currentTextLength}var divisor=this.data.r===2?1:100/this.data.totalChars;var o=this.o.v/divisor;var s=this.s.v/divisor+o;var e=this.e.v/divisor+o;if(s>e){var _s=s;s=e;e=_s}this.finalS=s;this.finalE=e}};extendPrototype([DynamicPropertyContainer],TextSelectorProp);function getTextSelectorProp(elem,data,arr){return new TextSelectorProp(elem,data,arr)}return{getTextSelectorProp:getTextSelectorProp}}();var pool_factory=function(){return function(initialLength,_create,_release,_clone){var _length=0;var _maxLength=initialLength;var pool=createSizedArray(_maxLength);var ob={newElement:newElement,release:release};function newElement(){var element;if(_length){_length-=1;element=pool[_length]}else{element=_create()}return element}function release(element){if(_length===_maxLength){pool=pooling.double(pool);_maxLength=_maxLength*2}if(_release){_release(element)}pool[_length]=element;_length+=1}function clone(){var clonedElement=newElement();return _clone(clonedElement)}return ob}}();var pooling=function(){function double(arr){return arr.concat(createSizedArray(arr.length))}return{double:double}}();var point_pool=function(){function create(){return createTypedArray("float32",2)}return pool_factory(8,create)}();var shape_pool=function(){function create(){return new ShapePath}function release(shapePath){var len=shapePath._length,i;for(i=0;i<len;i+=1){point_pool.release(shapePath.v[i]);point_pool.release(shapePath.i[i]);point_pool.release(shapePath.o[i]);shapePath.v[i]=null;shapePath.i[i]=null;shapePath.o[i]=null}shapePath._length=0;shapePath.c=false}function clone(shape){var cloned=factory.newElement();var i,len=shape._length===undefined?shape.v.length:shape._length;cloned.setLength(len);cloned.c=shape.c;var pt;for(i=0;i<len;i+=1){cloned.setTripleAt(shape.v[i][0],shape.v[i][1],shape.o[i][0],shape.o[i][1],shape.i[i][0],shape.i[i][1],i)}return cloned}var factory=pool_factory(4,create,release);factory.clone=clone;return factory}();var shapeCollection_pool=function(){var ob={newShapeCollection:newShapeCollection,release:release};var _length=0;var _maxLength=4;var pool=createSizedArray(_maxLength);function newShapeCollection(){var shapeCollection;if(_length){_length-=1;shapeCollection=pool[_length]}else{shapeCollection=new ShapeCollection}return shapeCollection}function release(shapeCollection){var i,len=shapeCollection._length;for(i=0;i<len;i+=1){shape_pool.release(shapeCollection.shapes[i])}shapeCollection._length=0;if(_length===_maxLength){pool=pooling.double(pool);_maxLength=_maxLength*2}pool[_length]=shapeCollection;_length+=1}return ob}();var segments_length_pool=function(){function create(){return{lengths:[],totalLength:0}}function release(element){var i,len=element.lengths.length;for(i=0;i<len;i+=1){bezier_length_pool.release(element.lengths[i])}element.lengths.length=0}return pool_factory(8,create,release)}();var bezier_length_pool=function(){function create(){return{addedLength:0,percents:createTypedArray("float32",defaultCurveSegments),lengths:createTypedArray("float32",defaultCurveSegments)}}return pool_factory(8,create)}();function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(num){var i,len=this.layers.length,data;this.completeLayers=true;for(i=len-1;i>=0;i--){if(!this.elements[i]){data=this.layers[i];if(data.ip-data.st<=num-this.layers[i].st&&data.op-data.st>num-this.layers[i].st){this.buildItem(i)}}this.completeLayers=this.elements[i]?this.completeLayers:false}this.checkPendingElements()};BaseRenderer.prototype.createItem=function(layer){switch(layer.ty){case 2:return this.createImage(layer);case 0:return this.createComp(layer);case 1:return this.createSolid(layer);case 3:return this.createNull(layer);case 4:return this.createShape(layer);case 5:return this.createText(layer);case 13:return this.createCamera(layer);}return this.createNull(layer)};BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")};BaseRenderer.prototype.buildAllItems=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1){this.buildItem(i)}this.checkPendingElements()};BaseRenderer.prototype.includeLayers=function(newLayers){this.completeLayers=false;var i,len=newLayers.length;var j,jLen=this.layers.length;for(i=0;i<len;i+=1){j=0;while(j<jLen){if(this.layers[j].id==newLayers[i].id){this.layers[j]=newLayers[i];break}j+=1}}};BaseRenderer.prototype.setProjectInterface=function(pInterface){this.globalData.projectInterface=pInterface};BaseRenderer.prototype.initItems=function(){if(!this.globalData.progressiveLoad){this.buildAllItems()}};BaseRenderer.prototype.buildElementParenting=function(element,parentName,hierarchy){var elements=this.elements;var layers=this.layers;var i=0,len=layers.length;while(i<len){if(layers[i].ind==parentName){if(!elements[i]||elements[i]===true){this.buildItem(i);this.addPendingElement(element)}else{hierarchy.push(elements[i]);elements[i].setAsParent();if(layers[i].parent!==undefined){this.buildElementParenting(element,layers[i].parent,hierarchy)}else{element.setHierarchy(hierarchy)}}}i+=1}};BaseRenderer.prototype.addPendingElement=function(element){this.pendingElements.push(element)};BaseRenderer.prototype.searchExtraCompositions=function(assets){var i,len=assets.length;for(i=0;i<len;i+=1){if(assets[i].xt){var comp=this.createComp(assets[i]);comp.initExpressions();this.globalData.projectInterface.registerComposition(comp)}}};BaseRenderer.prototype.setupGlobalData=function(animData,fontsContainer){this.globalData.fontManager=new FontManager;this.globalData.fontManager.addChars(animData.chars);this.globalData.fontManager.addFonts(animData.fonts,fontsContainer);this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem);this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem);this.globalData.imageLoader=this.animationItem.imagePreloader;this.globalData.frameId=0;this.globalData.frameRate=animData.fr;this.globalData.nm=animData.nm;this.globalData.compSize={w:animData.w,h:animData.h}};function SVGRenderer(animationItem,config){this.animationItem=animationItem;this.layers=null;this.renderedFrame=-1;this.svgElement=createNS("svg");var ariaLabel="";if(config&&config.title){var titleElement=createNS("title");var titleId=createElementID();titleElement.setAttribute("id",titleId);titleElement.textContent=config.title;this.svgElement.appendChild(titleElement);ariaLabel+=titleId}if(config&&config.description){var descElement=createNS("desc");var descId=createElementID();descElement.setAttribute("id",descId);descElement.textContent=config.description;this.svgElement.appendChild(descElement);ariaLabel+=" "+descId}if(ariaLabel){this.svgElement.setAttribute("aria-labelledby",ariaLabel)}var defs=createNS("defs");this.svgElement.appendChild(defs);var maskElement=createNS("g");this.svgElement.appendChild(maskElement);this.layerElement=maskElement;this.renderConfig={preserveAspectRatio:config&&config.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",progressiveLoad:config&&config.progressiveLoad||false,hideOnTransparent:config&&config.hideOnTransparent===false?false:true,viewBoxOnly:config&&config.viewBoxOnly||false,viewBoxSize:config&&config.viewBoxSize||false,className:config&&config.className||""};this.globalData={_mdf:false,frameNum:-1,defs:defs,renderConfig:this.renderConfig};this.elements=[];this.pendingElements=[];this.destroyed=false;this.rendererType="svg"}extendPrototype([BaseRenderer],SVGRenderer);SVGRenderer.prototype.createNull=function(data){return new NullElement(data,this.globalData,this)};SVGRenderer.prototype.createShape=function(data){return new SVGShapeElement(data,this.globalData,this)};SVGRenderer.prototype.createText=function(data){return new SVGTextElement(data,this.globalData,this)};SVGRenderer.prototype.createImage=function(data){return new IImageElement(data,this.globalData,this)};SVGRenderer.prototype.createComp=function(data){return new SVGCompElement(data,this.globalData,this)};SVGRenderer.prototype.createSolid=function(data){return new ISolidElement(data,this.globalData,this)};SVGRenderer.prototype.configAnimation=function(animData){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg");if(this.renderConfig.viewBoxSize){this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize)}else{this.svgElement.setAttribute("viewBox","0 0 "+animData.w+" "+animData.h)}if(!this.renderConfig.viewBoxOnly){this.svgElement.setAttribute("width",animData.w);this.svgElement.setAttribute("height",animData.h);this.svgElement.style.width="100%";this.svgElement.style.height="100%";this.svgElement.style.transform="translate3d(0,0,0)"}if(this.renderConfig.className){this.svgElement.setAttribute("class",this.renderConfig.className)}this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio);this.animationItem.wrapper.appendChild(this.svgElement);var defs=this.globalData.defs;this.setupGlobalData(animData,defs);this.globalData.progressiveLoad=this.renderConfig.progressiveLoad;this.data=animData;var maskElement=createNS("clipPath");var rect=createNS("rect");rect.setAttribute("width",animData.w);rect.setAttribute("height",animData.h);rect.setAttribute("x",0);rect.setAttribute("y",0);var maskId=createElementID();maskElement.setAttribute("id",maskId);maskElement.appendChild(rect);this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+maskId+")");defs.appendChild(maskElement);this.layers=animData.layers;this.elements=createSizedArray(animData.layers.length)};SVGRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="";this.layerElement=null;this.globalData.defs=null;var i,len=this.layers?this.layers.length:0;for(i=0;i<len;i++){if(this.elements[i]){this.elements[i].destroy()}}this.elements.length=0;this.destroyed=true;this.animationItem=null};SVGRenderer.prototype.updateContainerSize=function(){};SVGRenderer.prototype.buildItem=function(pos){var elements=this.elements;if(elements[pos]||this.layers[pos].ty==99){return}elements[pos]=true;var element=this.createItem(this.layers[pos]);elements[pos]=element;if(expressionsPlugin){if(this.layers[pos].ty===0){this.globalData.projectInterface.registerComposition(element)}element.initExpressions()}this.appendElementInPos(element,pos);if(this.layers[pos].tt){if(!this.elements[pos-1]||this.elements[pos-1]===true){this.buildItem(pos-1);this.addPendingElement(element)}else{element.setMatte(elements[pos-1].layerId)}}};SVGRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var element=this.pendingElements.pop();element.checkParenting();if(element.data.tt){var i=0,len=this.elements.length;while(i<len){if(this.elements[i]===element){element.setMatte(this.elements[i-1].layerId);break}i+=1}}}};SVGRenderer.prototype.renderFrame=function(num){if(this.renderedFrame===num||this.destroyed){return}if(num===null){num=this.renderedFrame}else{this.renderedFrame=num}this.globalData.frameNum=num;this.globalData.frameId+=1;this.globalData.projectInterface.currentFrame=num;this.globalData._mdf=false;var i,len=this.layers.length;if(!this.completeLayers){this.checkLayers(num)}for(i=len-1;i>=0;i--){if(this.completeLayers||this.elements[i]){this.elements[i].prepareFrame(num-this.layers[i].st)}}if(this.globalData._mdf){for(i=0;i<len;i+=1){if(this.completeLayers||this.elements[i]){this.elements[i].renderFrame()}}}};SVGRenderer.prototype.appendElementInPos=function(element,pos){var newElement=element.getBaseElement();if(!newElement){return}var i=0;var nextElement;while(i<pos){if(this.elements[i]&&this.elements[i]!==true&&this.elements[i].getBaseElement()){nextElement=this.elements[i].getBaseElement()}i+=1}if(nextElement){this.layerElement.insertBefore(newElement,nextElement)}else{this.layerElement.appendChild(newElement)}};SVGRenderer.prototype.hide=function(){this.layerElement.style.display="none"};SVGRenderer.prototype.show=function(){this.layerElement.style.display="block"};function CanvasRenderer(animationItem,config){this.animationItem=animationItem;this.renderConfig={clearCanvas:config&&config.clearCanvas!==undefined?config.clearCanvas:true,context:config&&config.context||null,progressiveLoad:config&&config.progressiveLoad||false,preserveAspectRatio:config&&config.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",className:config&&config.className||""};this.renderConfig.dpr=config&&config.dpr||1;if(this.animationItem.wrapper){this.renderConfig.dpr=config&&config.dpr||window.devicePixelRatio||1}this.renderedFrame=-1;this.globalData={frameNum:-1,_mdf:false,renderConfig:this.renderConfig,currentGlobalAlpha:-1};this.contextData=new CVContextData;this.elements=[];this.pendingElements=[];this.transformMat=new Matrix;this.completeLayers=false;this.rendererType="canvas"}extendPrototype([BaseRenderer],CanvasRenderer);CanvasRenderer.prototype.createShape=function(data){return new CVShapeElement(data,this.globalData,this)};CanvasRenderer.prototype.createText=function(data){return new CVTextElement(data,this.globalData,this)};CanvasRenderer.prototype.createImage=function(data){return new CVImageElement(data,this.globalData,this)};CanvasRenderer.prototype.createComp=function(data){return new CVCompElement(data,this.globalData,this)};CanvasRenderer.prototype.createSolid=function(data){return new CVSolidElement(data,this.globalData,this)};CanvasRenderer.prototype.createNull=SVGRenderer.prototype.createNull;CanvasRenderer.prototype.ctxTransform=function(props){if(props[0]===1&&props[1]===0&&props[4]===0&&props[5]===1&&props[12]===0&&props[13]===0){return}if(!this.renderConfig.clearCanvas){this.canvasContext.transform(props[0],props[1],props[4],props[5],props[12],props[13]);return}this.transformMat.cloneFromProps(props);var cProps=this.contextData.cTr.props;this.transformMat.transform(cProps[0],cProps[1],cProps[2],cProps[3],cProps[4],cProps[5],cProps[6],cProps[7],cProps[8],cProps[9],cProps[10],cProps[11],cProps[12],cProps[13],cProps[14],cProps[15]);this.contextData.cTr.cloneFromProps(this.transformMat.props);var trProps=this.contextData.cTr.props;this.canvasContext.setTransform(trProps[0],trProps[1],trProps[4],trProps[5],trProps[12],trProps[13])};CanvasRenderer.prototype.ctxOpacity=function(op){if(!this.renderConfig.clearCanvas){this.canvasContext.globalAlpha*=op<0?0:op;this.globalData.currentGlobalAlpha=this.contextData.cO;return}this.contextData.cO*=op<0?0:op;if(this.globalData.currentGlobalAlpha!==this.contextData.cO){this.canvasContext.globalAlpha=this.contextData.cO;this.globalData.currentGlobalAlpha=this.contextData.cO}};CanvasRenderer.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()};CanvasRenderer.prototype.save=function(actionFlag){if(!this.renderConfig.clearCanvas){this.canvasContext.save();return}if(actionFlag){this.canvasContext.save()}var props=this.contextData.cTr.props;if(this.contextData._length<=this.contextData.cArrPos){this.contextData.duplicate()}var i,arr=this.contextData.saved[this.contextData.cArrPos];for(i=0;i<16;i+=1){arr[i]=props[i]}this.contextData.savedOp[this.contextData.cArrPos]=this.contextData.cO;this.contextData.cArrPos+=1};CanvasRenderer.prototype.restore=function(actionFlag){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}if(actionFlag){this.canvasContext.restore();this.globalData.blendMode="source-over"}this.contextData.cArrPos-=1;var popped=this.contextData.saved[this.contextData.cArrPos];var i,arr=this.contextData.cTr.props;for(i=0;i<16;i+=1){arr[i]=popped[i]}this.canvasContext.setTransform(popped[0],popped[1],popped[4],popped[5],popped[12],popped[13]);popped=this.contextData.savedOp[this.contextData.cArrPos];this.contextData.cO=popped;if(this.globalData.currentGlobalAlpha!==popped){this.canvasContext.globalAlpha=popped;this.globalData.currentGlobalAlpha=popped}};CanvasRenderer.prototype.configAnimation=function(animData){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");this.animationItem.container.style.width="100%";this.animationItem.container.style.height="100%";this.animationItem.container.style.transformOrigin=this.animationItem.container.style.mozTransformOrigin=this.animationItem.container.style.webkitTransformOrigin=this.animationItem.container.style["-webkit-transform"]="0px 0px 0px";this.animationItem.wrapper.appendChild(this.animationItem.container);this.canvasContext=this.animationItem.container.getContext("2d");if(this.renderConfig.className){this.animationItem.container.setAttribute("class",this.renderConfig.className)}}else{this.canvasContext=this.renderConfig.context}this.data=animData;this.layers=animData.layers;this.transformCanvas={w:animData.w,h:animData.h,sx:0,sy:0,tx:0,ty:0};this.setupGlobalData(animData,document.body);this.globalData.canvasContext=this.canvasContext;this.globalData.renderer=this;this.globalData.isDashed=false;this.globalData.progressiveLoad=this.renderConfig.progressiveLoad;this.globalData.transformCanvas=this.transformCanvas;this.elements=createSizedArray(animData.layers.length);this.updateContainerSize()};CanvasRenderer.prototype.updateContainerSize=function(){this.reset();var elementWidth,elementHeight;if(this.animationItem.wrapper&&this.animationItem.container){elementWidth=this.animationItem.wrapper.offsetWidth;elementHeight=this.animationItem.wrapper.offsetHeight;this.animationItem.container.setAttribute("width",elementWidth*this.renderConfig.dpr);this.animationItem.container.setAttribute("height",elementHeight*this.renderConfig.dpr)}else{elementWidth=this.canvasContext.canvas.width*this.renderConfig.dpr;elementHeight=this.canvasContext.canvas.height*this.renderConfig.dpr}var elementRel,animationRel;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var par=this.renderConfig.preserveAspectRatio.split(" ");var fillType=par[1]||"meet";var pos=par[0]||"xMidYMid";var xPos=pos.substr(0,4);var yPos=pos.substr(4);elementRel=elementWidth/elementHeight;animationRel=this.transformCanvas.w/this.transformCanvas.h;if(animationRel>elementRel&&fillType==="meet"||animationRel<elementRel&&fillType==="slice"){this.transformCanvas.sx=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);this.transformCanvas.sy=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr)}else{this.transformCanvas.sx=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);this.transformCanvas.sy=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr)}if(xPos==="xMid"&&(animationRel<elementRel&&fillType==="meet"||animationRel>elementRel&&fillType==="slice")){this.transformCanvas.tx=(elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))/2*this.renderConfig.dpr}else if(xPos==="xMax"&&(animationRel<elementRel&&fillType==="meet"||animationRel>elementRel&&fillType==="slice")){this.transformCanvas.tx=(elementWidth-this.transformCanvas.w*(elementHeight/this.transformCanvas.h))*this.renderConfig.dpr}else{this.transformCanvas.tx=0}if(yPos==="YMid"&&(animationRel>elementRel&&fillType==="meet"||animationRel<elementRel&&fillType==="slice")){this.transformCanvas.ty=(elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))/2*this.renderConfig.dpr}else if(yPos==="YMax"&&(animationRel>elementRel&&fillType==="meet"||animationRel<elementRel&&fillType==="slice")){this.transformCanvas.ty=(elementHeight-this.transformCanvas.h*(elementWidth/this.transformCanvas.w))*this.renderConfig.dpr}else{this.transformCanvas.ty=0}}else if(this.renderConfig.preserveAspectRatio=="none"){this.transformCanvas.sx=elementWidth/(this.transformCanvas.w/this.renderConfig.dpr);this.transformCanvas.sy=elementHeight/(this.transformCanvas.h/this.renderConfig.dpr);this.transformCanvas.tx=0;this.transformCanvas.ty=0}else{this.transformCanvas.sx=this.renderConfig.dpr;this.transformCanvas.sy=this.renderConfig.dpr;this.transformCanvas.tx=0;this.transformCanvas.ty=0}this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1];this.ctxTransform(this.transformCanvas.props);this.canvasContext.beginPath();this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h);this.canvasContext.closePath();this.canvasContext.clip();this.renderFrame(this.renderedFrame,true)};CanvasRenderer.prototype.destroy=function(){if(this.renderConfig.clearCanvas){this.animationItem.wrapper.innerHTML=""}var i,len=this.layers?this.layers.length:0;for(i=len-1;i>=0;i-=1){if(this.elements[i]){this.elements[i].destroy()}}this.elements.length=0;this.globalData.canvasContext=null;this.animationItem.container=null;this.destroyed=true};CanvasRenderer.prototype.renderFrame=function(num,forceRender){if(this.renderedFrame===num&&this.renderConfig.clearCanvas===true&&!forceRender||this.destroyed||num===-1){return}this.renderedFrame=num;this.globalData.frameNum=num-this.animationItem._isFirstFrame;this.globalData.frameId+=1;this.globalData._mdf=!this.renderConfig.clearCanvas||forceRender;this.globalData.projectInterface.currentFrame=num;var i,len=this.layers.length;if(!this.completeLayers){this.checkLayers(num)}for(i=0;i<len;i++){if(this.completeLayers||this.elements[i]){this.elements[i].prepareFrame(num-this.layers[i].st)}}if(this.globalData._mdf){if(this.renderConfig.clearCanvas===true){this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h)}else{this.save()}for(i=len-1;i>=0;i-=1){if(this.completeLayers||this.elements[i]){this.elements[i].renderFrame()}}if(this.renderConfig.clearCanvas!==true){this.restore()}}};CanvasRenderer.prototype.buildItem=function(pos){var elements=this.elements;if(elements[pos]||this.layers[pos].ty==99){return}var element=this.createItem(this.layers[pos],this,this.globalData);elements[pos]=element;element.initExpressions()};CanvasRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var element=this.pendingElements.pop();element.checkParenting()}};CanvasRenderer.prototype.hide=function(){this.animationItem.container.style.display="none"};CanvasRenderer.prototype.show=function(){this.animationItem.container.style.display="block"};function HybridRenderer(animationItem,config){this.animationItem=animationItem;this.layers=null;this.renderedFrame=-1;this.renderConfig={className:config&&config.className||"",imagePreserveAspectRatio:config&&config.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:config&&config.hideOnTransparent===false?false:true};this.globalData={_mdf:false,frameNum:-1,renderConfig:this.renderConfig};this.pendingElements=[];this.elements=[];this.threeDElements=[];this.destroyed=false;this.camera=null;this.supports3d=true;this.rendererType="html"}extendPrototype([BaseRenderer],HybridRenderer);HybridRenderer.prototype.buildItem=SVGRenderer.prototype.buildItem;HybridRenderer.prototype.checkPendingElements=function(){while(this.pendingElements.length){var element=this.pendingElements.pop();element.checkParenting()}};HybridRenderer.prototype.appendElementInPos=function(element,pos){var newDOMElement=element.getBaseElement();if(!newDOMElement){return}var layer=this.layers[pos];if(!layer.ddd||!this.supports3d){if(this.threeDElements){this.addTo3dContainer(newDOMElement,pos)}else{var i=0;var nextDOMElement,nextLayer,tmpDOMElement;while(i<pos){if(this.elements[i]&&this.elements[i]!==true&&this.elements[i].getBaseElement){nextLayer=this.elements[i];tmpDOMElement=this.layers[i].ddd?this.getThreeDContainerByPos(i):nextLayer.getBaseElement();nextDOMElement=tmpDOMElement||nextDOMElement}i+=1}if(nextDOMElement){if(!layer.ddd||!this.supports3d){this.layerElement.insertBefore(newDOMElement,nextDOMElement)}}else{if(!layer.ddd||!this.supports3d){this.layerElement.appendChild(newDOMElement)}}}}else{this.addTo3dContainer(newDOMElement,pos)}};HybridRenderer.prototype.createShape=function(data){if(!this.supports3d){return new SVGShapeElement(data,this.globalData,this)}return new HShapeElement(data,this.globalData,this)};HybridRenderer.prototype.createText=function(data){if(!this.supports3d){return new SVGTextElement(data,this.globalData,this)}return new HTextElement(data,this.globalData,this)};HybridRenderer.prototype.createCamera=function(data){this.camera=new HCameraElement(data,this.globalData,this);return this.camera};HybridRenderer.prototype.createImage=function(data){if(!this.supports3d){return new IImageElement(data,this.globalData,this)}return new HImageElement(data,this.globalData,this)};HybridRenderer.prototype.createComp=function(data){if(!this.supports3d){return new SVGCompElement(data,this.globalData,this)}return new HCompElement(data,this.globalData,this)};HybridRenderer.prototype.createSolid=function(data){if(!this.supports3d){return new ISolidElement(data,this.globalData,this)}return new HSolidElement(data,this.globalData,this)};HybridRenderer.prototype.createNull=SVGRenderer.prototype.createNull;HybridRenderer.prototype.getThreeDContainerByPos=function(pos){var i=0,len=this.threeDElements.length;while(i<len){if(this.threeDElements[i].startPos<=pos&&this.threeDElements[i].endPos>=pos){return this.threeDElements[i].perspectiveElem}i+=1}};HybridRenderer.prototype.createThreeDContainer=function(pos,type){var perspectiveElem=createTag("div");styleDiv(perspectiveElem);var container=createTag("div");styleDiv(container);if(type==="3d"){perspectiveElem.style.width=this.globalData.compSize.w+"px";perspectiveElem.style.height=this.globalData.compSize.h+"px";perspectiveElem.style.transformOrigin=perspectiveElem.style.mozTransformOrigin=perspectiveElem.style.webkitTransformOrigin="50% 50%";container.style.transform=container.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"}perspectiveElem.appendChild(container);var threeDContainerData={container:container,perspectiveElem:perspectiveElem,startPos:pos,endPos:pos,type:type};this.threeDElements.push(threeDContainerData);return threeDContainerData};HybridRenderer.prototype.build3dContainers=function(){var i,len=this.layers.length;var lastThreeDContainerData;var currentContainer="";for(i=0;i<len;i+=1){if(this.layers[i].ddd&&this.layers[i].ty!==3){if(currentContainer!=="3d"){currentContainer="3d";lastThreeDContainerData=this.createThreeDContainer(i,"3d")}lastThreeDContainerData.endPos=Math.max(lastThreeDContainerData.endPos,i)}else{if(currentContainer!=="2d"){currentContainer="2d";lastThreeDContainerData=this.createThreeDContainer(i,"2d")}lastThreeDContainerData.endPos=Math.max(lastThreeDContainerData.endPos,i)}}len=this.threeDElements.length;for(i=len-1;i>=0;i--){this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem)}};HybridRenderer.prototype.addTo3dContainer=function(elem,pos){var i=0,len=this.threeDElements.length;while(i<len){if(pos<=this.threeDElements[i].endPos){var j=this.threeDElements[i].startPos;var nextElement;while(j<pos){if(this.elements[j]&&this.elements[j].getBaseElement){nextElement=this.elements[j].getBaseElement()}j+=1}if(nextElement){this.threeDElements[i].container.insertBefore(elem,nextElement)}else{this.threeDElements[i].container.appendChild(elem)}break}i+=1}};HybridRenderer.prototype.configAnimation=function(animData){var resizerElem=createTag("div");var wrapper=this.animationItem.wrapper;resizerElem.style.width=animData.w+"px";resizerElem.style.height=animData.h+"px";this.resizerElem=resizerElem;styleDiv(resizerElem);resizerElem.style.transformStyle=resizerElem.style.webkitTransformStyle=resizerElem.style.mozTransformStyle="flat";if(this.renderConfig.className){resizerElem.setAttribute("class",this.renderConfig.className)}wrapper.appendChild(resizerElem);resizerElem.style.overflow="hidden";var svg=createNS("svg");svg.setAttribute("width","1");svg.setAttribute("height","1");styleDiv(svg);this.resizerElem.appendChild(svg);var defs=createNS("defs");svg.appendChild(defs);this.data=animData;this.setupGlobalData(animData,svg);this.globalData.defs=defs;this.layers=animData.layers;this.layerElement=this.resizerElem;this.build3dContainers();this.updateContainerSize()};HybridRenderer.prototype.destroy=function(){this.animationItem.wrapper.innerHTML="";this.animationItem.container=null;this.globalData.defs=null;var i,len=this.layers?this.layers.length:0;for(i=0;i<len;i++){this.elements[i].destroy()}this.elements.length=0;this.destroyed=true;this.animationItem=null};HybridRenderer.prototype.updateContainerSize=function(){var elementWidth=this.animationItem.wrapper.offsetWidth;var elementHeight=this.animationItem.wrapper.offsetHeight;var elementRel=elementWidth/elementHeight;var animationRel=this.globalData.compSize.w/this.globalData.compSize.h;var sx,sy,tx,ty;if(animationRel>elementRel){sx=elementWidth/this.globalData.compSize.w;sy=elementWidth/this.globalData.compSize.w;tx=0;ty=(elementHeight-this.globalData.compSize.h*(elementWidth/this.globalData.compSize.w))/2}else{sx=elementHeight/this.globalData.compSize.h;sy=elementHeight/this.globalData.compSize.h;tx=(elementWidth-this.globalData.compSize.w*(elementHeight/this.globalData.compSize.h))/2;ty=0}this.resizerElem.style.transform=this.resizerElem.style.webkitTransform="matrix3d("+sx+",0,0,0,0,"+sy+",0,0,0,0,1,0,"+tx+","+ty+",0,1)"};HybridRenderer.prototype.renderFrame=SVGRenderer.prototype.renderFrame;HybridRenderer.prototype.hide=function(){this.resizerElem.style.display="none"};HybridRenderer.prototype.show=function(){this.resizerElem.style.display="block"};HybridRenderer.prototype.initItems=function(){this.buildAllItems();if(this.camera){this.camera.setup()}else{var cWidth=this.globalData.compSize.w;var cHeight=this.globalData.compSize.h;var i,len=this.threeDElements.length;for(i=0;i<len;i+=1){this.threeDElements[i].perspectiveElem.style.perspective=this.threeDElements[i].perspectiveElem.style.webkitPerspective=Math.sqrt(Math.pow(cWidth,2)+Math.pow(cHeight,2))+"px"}}};HybridRenderer.prototype.searchExtraCompositions=function(assets){var i,len=assets.length;var floatingContainer=createTag("div");for(i=0;i<len;i+=1){if(assets[i].xt){var comp=this.createComp(assets[i],floatingContainer,this.globalData.comp,null);comp.initExpressions();this.globalData.projectInterface.registerComposition(comp)}}};function MaskElement(data,element,globalData){this.data=data;this.element=element;this.globalData=globalData;this.storedData=[];this.masksProperties=this.data.masksProperties||[];this.maskElement=null;var defs=this.globalData.defs;var i,len=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(len);this.solidPath="";var path,properties=this.masksProperties;var count=0;var currentMasks=[];var j,jLen;var layerId=createElementID();var rect,expansor,feMorph,x;var maskType="clipPath",maskRef="clip-path";for(i=0;i<len;i++){if(properties[i].mode!=="a"&&properties[i].mode!=="n"||properties[i].inv||properties[i].o.k!==100){maskType="mask";maskRef="mask"}if((properties[i].mode=="s"||properties[i].mode=="i")&&count===0){rect=createNS("rect");rect.setAttribute("fill","#ffffff");rect.setAttribute("width",this.element.comp.data.w||0);rect.setAttribute("height",this.element.comp.data.h||0);currentMasks.push(rect)}else{rect=null}path=createNS("path");if(properties[i].mode=="n"){this.viewData[i]={op:PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),elem:path,lastPath:""};defs.appendChild(path);continue}count+=1;path.setAttribute("fill",properties[i].mode==="s"?"#000000":"#ffffff");path.setAttribute("clip-rule","nonzero");var filterID;if(properties[i].x.k!==0){maskType="mask";maskRef="mask";x=PropertyFactory.getProp(this.element,properties[i].x,0,null,this.element);filterID=createElementID();expansor=createNS("filter");expansor.setAttribute("id",filterID);feMorph=createNS("feMorphology");feMorph.setAttribute("operator","erode");feMorph.setAttribute("in","SourceGraphic");feMorph.setAttribute("radius","0");expansor.appendChild(feMorph);defs.appendChild(expansor);path.setAttribute("stroke",properties[i].mode==="s"?"#000000":"#ffffff")}else{feMorph=null;x=null}this.storedData[i]={elem:path,x:x,expan:feMorph,lastPath:"",lastOperator:"",filterId:filterID,lastRadius:0};if(properties[i].mode=="i"){jLen=currentMasks.length;var g=createNS("g");for(j=0;j<jLen;j+=1){g.appendChild(currentMasks[j])}var mask=createNS("mask");mask.setAttribute("mask-type","alpha");mask.setAttribute("id",layerId+"_"+count);mask.appendChild(path);defs.appendChild(mask);g.setAttribute("mask","url("+locationHref+"#"+layerId+"_"+count+")");currentMasks.length=0;currentMasks.push(g)}else{currentMasks.push(path)}if(properties[i].inv&&!this.solidPath){this.solidPath=this.createLayerSolidPath()}this.viewData[i]={elem:path,lastPath:"",op:PropertyFactory.getProp(this.element,properties[i].o,0,0.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,properties[i],3),invRect:rect};if(!this.viewData[i].prop.k){this.drawPath(properties[i],this.viewData[i].prop.v,this.viewData[i])}}this.maskElement=createNS(maskType);len=currentMasks.length;for(i=0;i<len;i+=1){this.maskElement.appendChild(currentMasks[i])}if(count>0){this.maskElement.setAttribute("id",layerId);this.element.maskedElement.setAttribute(maskRef,"url("+locationHref+"#"+layerId+")");defs.appendChild(this.maskElement)}if(this.viewData.length){this.element.addRenderableComponent(this)}}MaskElement.prototype.getMaskProperty=function(pos){return this.viewData[pos].prop};MaskElement.prototype.renderFrame=function(isFirstFrame){var finalMat=this.element.finalTransform.mat;var i,len=this.masksProperties.length;for(i=0;i<len;i++){if(this.viewData[i].prop._mdf||isFirstFrame){this.drawPath(this.masksProperties[i],this.viewData[i].prop.v,this.viewData[i])}if(this.viewData[i].op._mdf||isFirstFrame){this.viewData[i].elem.setAttribute("fill-opacity",this.viewData[i].op.v)}if(this.masksProperties[i].mode!=="n"){if(this.viewData[i].invRect&&(this.element.finalTransform.mProp._mdf||isFirstFrame)){this.viewData[i].invRect.setAttribute("x",-finalMat.props[12]);this.viewData[i].invRect.setAttribute("y",-finalMat.props[13])}if(this.storedData[i].x&&(this.storedData[i].x._mdf||isFirstFrame)){var feMorph=this.storedData[i].expan;if(this.storedData[i].x.v<0){if(this.storedData[i].lastOperator!=="erode"){this.storedData[i].lastOperator="erode";this.storedData[i].elem.setAttribute("filter","url("+locationHref+"#"+this.storedData[i].filterId+")")}feMorph.setAttribute("radius",-this.storedData[i].x.v)}else{if(this.storedData[i].lastOperator!=="dilate"){this.storedData[i].lastOperator="dilate";this.storedData[i].elem.setAttribute("filter",null)}this.storedData[i].elem.setAttribute("stroke-width",this.storedData[i].x.v*2)}}}}};MaskElement.prototype.getMaskelement=function(){return this.maskElement};MaskElement.prototype.createLayerSolidPath=function(){var path="M0,0 ";path+=" h"+this.globalData.compSize.w;path+=" v"+this.globalData.compSize.h;path+=" h-"+this.globalData.compSize.w;path+=" v-"+this.globalData.compSize.h+" ";return path};MaskElement.prototype.drawPath=function(pathData,pathNodes,viewData){var pathString=" M"+pathNodes.v[0][0]+","+pathNodes.v[0][1];var i,len;len=pathNodes._length;for(i=1;i<len;i+=1){pathString+=" C"+pathNodes.o[i-1][0]+","+pathNodes.o[i-1][1]+" "+pathNodes.i[i][0]+","+pathNodes.i[i][1]+" "+pathNodes.v[i][0]+","+pathNodes.v[i][1]}if(pathNodes.c&&len>1){pathString+=" C"+pathNodes.o[i-1][0]+","+pathNodes.o[i-1][1]+" "+pathNodes.i[0][0]+","+pathNodes.i[0][1]+" "+pathNodes.v[0][0]+","+pathNodes.v[0][1]}if(viewData.lastPath!==pathString){var pathShapeValue="";if(viewData.elem){if(pathNodes.c){pathShapeValue=pathData.inv?this.solidPath+pathString:pathString}viewData.elem.setAttribute("d",pathShapeValue)}viewData.lastPath=pathString}};MaskElement.prototype.destroy=function(){this.element=null;this.globalData=null;this.maskElement=null;this.data=null;this.masksProperties=null};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[];this._isParent=false;this.checkParenting()},setHierarchy:function(hierarchy){this.hierarchy=hierarchy},setAsParent:function(){this._isParent=true},checkParenting:function(){if(this.data.parent!==undefined){this.comp.buildElementParenting(this,this.data.parent,[])}}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=false;this.dynamicProperties=[];this._mdf=false},prepareProperties:function(num,isVisible){var i,len=this.dynamicProperties.length;for(i=0;i<len;i+=1){if(isVisible||this._isParent&&this.dynamicProperties[i].propType==="transform"){this.dynamicProperties[i].getValue();if(this.dynamicProperties[i]._mdf){this.globalData._mdf=true;this._mdf=true}}}},addDynamicProperty:function(prop){if(this.dynamicProperties.indexOf(prop)===-1){this.dynamicProperties.push(prop)}}};function TransformElement(){}TransformElement.prototype={initTransform:function(){this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:false,_opMdf:false,mat:new Matrix};if(this.data.ao){this.finalTransform.mProp.autoOriented=true}if(this.data.ty!==11){}},renderTransform:function(){this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame;this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame;if(this.hierarchy){var mat;var finalMat=this.finalTransform.mat;var i=0,len=this.hierarchy.length;if(!this.finalTransform._matMdf){while(i<len){if(this.hierarchy[i].finalTransform.mProp._mdf){this.finalTransform._matMdf=true;break}i+=1}}if(this.finalTransform._matMdf){mat=this.finalTransform.mProp.v.props;finalMat.cloneFromProps(mat);for(i=0;i<len;i+=1){mat=this.hierarchy[i].finalTransform.mProp.v.props;finalMat.transform(mat[0],mat[1],mat[2],mat[3],mat[4],mat[5],mat[6],mat[7],mat[8],mat[9],mat[10],mat[11],mat[12],mat[13],mat[14],mat[15])}}}},globalToLocal:function(pt){var transforms=[];transforms.push(this.finalTransform);var flag=true;var comp=this.comp;while(flag){if(comp.finalTransform){if(comp.data.hasMask){transforms.splice(0,0,comp.finalTransform)}comp=comp.comp}else{flag=false}}var i,len=transforms.length,ptNew;for(i=0;i<len;i+=1){ptNew=transforms[i].mat.applyToPointArray(0,0,0);pt=[pt[0]-ptNew[0],pt[1]-ptNew[1],0]}return pt},mHelper:new Matrix};function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=false;this.hidden=false;this.isTransparent=false;this.renderableComponents=[]},addRenderableComponent:function(component){if(this.renderableComponents.indexOf(component)===-1){this.renderableComponents.push(component)}},removeRenderableComponent:function(component){if(this.renderableComponents.indexOf(component)!==-1){this.renderableComponents.splice(this.renderableComponents.indexOf(component),1)}},prepareRenderableFrame:function(num){this.checkLayerLimits(num)},checkTransparency:function(){if(this.finalTransform.mProp.o.v<=0){if(!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent){this.isTransparent=true;this.hide()}}else if(this.isTransparent){this.isTransparent=false;this.show()}},checkLayerLimits:function(num){if(this.data.ip-this.data.st<=num&&this.data.op-this.data.st>num){if(this.isInRange!==true){this.globalData._mdf=true;this._mdf=true;this.isInRange=true;this.show()}}else{if(this.isInRange!==false){this.globalData._mdf=true;this.isInRange=false;this.hide()}}},renderRenderable:function(){var i,len=this.renderableComponents.length;for(i=0;i<len;i+=1){this.renderableComponents[i].renderFrame(this._isFirstFrame)}},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){if(this.data.ty===5){return{w:this.data.textData.width,h:this.data.textData.height}}else{return{w:this.data.width,h:this.data.height}}}};function RenderableDOMElement(){}(function(){var _prototype={initElement:function(data,globalData,comp){this.initFrame();this.initBaseData(data,globalData,comp);this.initTransform(data,globalData,comp);this.initHierarchy();this.initRenderable();this.initRendererElement();this.createContainerElements();this.createRenderableComponents();this.createContent();this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var elem=this.baseElement||this.layerElement;elem.style.display="none";this.hidden=true}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var elem=this.baseElement||this.layerElement;elem.style.display="block"}this.hidden=false;this._isFirstFrame=true}},renderFrame:function(){if(this.data.hd||this.hidden){return}this.renderTransform();this.renderRenderable();this.renderElement();this.renderInnerContent();if(this._isFirstFrame){this._isFirstFrame=false}},renderInnerContent:function(){},prepareFrame:function(num){this._mdf=false;this.prepareRenderableFrame(num);this.prepareProperties(num,this.isInRange);this.checkTransparency()},destroy:function(){this.innerElem=null;this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(_prototype)],RenderableDOMElement)})();function ProcessedElement(element,position){this.elem=element;this.pos=position}function SVGStyleData(data,level){this.data=data;this.type=data.ty;this.d="";this.lvl=level;this._mdf=false;this.closed=data.hd===true;this.pElem=createNS("path");this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="";this._mdf=false};function SVGShapeData(transformers,level,shape){this.caches=[];this.styles=[];this.transformers=transformers;this.lStr="";this.sh=shape;this.lvl=level;this._isAnimated=!!shape.k;var i=0,len=transformers.length;while(i<len){if(transformers[i].mProps.dynamicProperties.length){this._isAnimated=true;break}i+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=true};function SVGTransformData(mProps,op,container){this.transform={mProps:mProps,op:op,container:container};this.elements=[];this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}function SVGStrokeStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem);this.getValue=this.iterateDynamicProperties;this.o=PropertyFactory.getProp(elem,data.o,0,0.01,this);this.w=PropertyFactory.getProp(elem,data.w,0,null,this);this.d=new DashProperty(elem,data.d||{},"svg",this);this.c=PropertyFactory.getProp(elem,data.c,1,255,this);this.style=styleOb;this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem);this.getValue=this.iterateDynamicProperties;this.o=PropertyFactory.getProp(elem,data.o,0,0.01,this);this.c=PropertyFactory.getProp(elem,data.c,1,255,this);this.style=styleOb}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGGradientFillStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem);this.getValue=this.iterateDynamicProperties;this.initGradientData(elem,data,styleOb)}SVGGradientFillStyleData.prototype.initGradientData=function(elem,data,styleOb){this.o=PropertyFactory.getProp(elem,data.o,0,0.01,this);this.s=PropertyFactory.getProp(elem,data.s,1,null,this);this.e=PropertyFactory.getProp(elem,data.e,1,null,this);this.h=PropertyFactory.getProp(elem,data.h||{k:0},0,0.01,this);this.a=PropertyFactory.getProp(elem,data.a||{k:0},0,degToRads,this);this.g=new GradientProperty(elem,data.g,this);this.style=styleOb;this.stops=[];this.setGradientData(styleOb.pElem,data);this.setGradientOpacity(data,styleOb);this._isAnimated=!!this._isAnimated};SVGGradientFillStyleData.prototype.setGradientData=function(pathElement,data){var gradientId=createElementID();var gfill=createNS(data.t===1?"linearGradient":"radialGradient");gfill.setAttribute("id",gradientId);gfill.setAttribute("spreadMethod","pad");gfill.setAttribute("gradientUnits","userSpaceOnUse");var stops=[];var stop,j,jLen;jLen=data.g.p*4;for(j=0;j<jLen;j+=4){stop=createNS("stop");gfill.appendChild(stop);stops.push(stop)}pathElement.setAttribute(data.ty==="gf"?"fill":"stroke","url("+locationHref+"#"+gradientId+")");this.gf=gfill;this.cst=stops};SVGGradientFillStyleData.prototype.setGradientOpacity=function(data,styleOb){if(this.g._hasOpacity&&!this.g._collapsable){var stop,j,jLen;var mask=createNS("mask");var maskElement=createNS("path");mask.appendChild(maskElement);var opacityId=createElementID();var maskId=createElementID();mask.setAttribute("id",maskId);var opFill=createNS(data.t===1?"linearGradient":"radialGradient");opFill.setAttribute("id",opacityId);opFill.setAttribute("spreadMethod","pad");opFill.setAttribute("gradientUnits","userSpaceOnUse");jLen=data.g.k.k[0].s?data.g.k.k[0].s.length:data.g.k.k.length;var stops=this.stops;for(j=data.g.p*4;j<jLen;j+=2){stop=createNS("stop");stop.setAttribute("stop-color","rgb(255,255,255)");opFill.appendChild(stop);stops.push(stop)}maskElement.setAttribute(data.ty==="gf"?"fill":"stroke","url("+locationHref+"#"+opacityId+")");this.of=opFill;this.ms=mask;this.ost=stops;this.maskId=maskId;styleOb.msElem=maskElement}};extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(elem,data,styleOb){this.initDynamicPropertyContainer(elem);this.getValue=this.iterateDynamicProperties;this.w=PropertyFactory.getProp(elem,data.w,0,null,this);this.d=new DashProperty(elem,data.d||{},"svg",this);this.initGradientData(elem,data,styleOb);this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[];this.prevViewData=[];this.gr=createNS("g")}var SVGElementsRenderer=function(){var _identityMatrix=new Matrix;var _matrixHelper=new Matrix;var ob={createRenderFunction:createRenderFunction};function createRenderFunction(data){var ty=data.ty;switch(data.ty){case"fl":return renderFill;case"gf":return renderGradient;case"gs":return renderGradientStroke;case"st":return renderStroke;case"sh":case"el":case"rc":case"sr":return renderPath;case"tr":return renderContentTransform;}}function renderContentTransform(styleData,itemData,isFirstFrame){if(isFirstFrame||itemData.transform.op._mdf){itemData.transform.container.setAttribute("opacity",itemData.transform.op.v)}if(isFirstFrame||itemData.transform.mProps._mdf){itemData.transform.container.setAttribute("transform",itemData.transform.mProps.v.to2dCSS())}}function renderPath(styleData,itemData,isFirstFrame){var j,jLen,pathStringTransformed,redraw,pathNodes,l,lLen=itemData.styles.length;var lvl=itemData.lvl;var paths,mat,props,iterations,k;for(l=0;l<lLen;l+=1){redraw=itemData.sh._mdf||isFirstFrame;if(itemData.styles[l].lvl<lvl){mat=_matrixHelper.reset();iterations=lvl-itemData.styles[l].lvl;k=itemData.transformers.length-1;while(!redraw&&iterations>0){redraw=itemData.transformers[k].mProps._mdf||redraw;iterations--;k--}if(redraw){iterations=lvl-itemData.styles[l].lvl;k=itemData.transformers.length-1;while(iterations>0){props=itemData.transformers[k].mProps.v.props;mat.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);iterations--;k--}}}else{mat=_identityMatrix}paths=itemData.sh.paths;jLen=paths._length;if(redraw){pathStringTransformed="";for(j=0;j<jLen;j+=1){pathNodes=paths.shapes[j];if(pathNodes&&pathNodes._length){pathStringTransformed+=buildShapeString(pathNodes,pathNodes._length,pathNodes.c,mat)}}itemData.caches[l]=pathStringTransformed}else{pathStringTransformed=itemData.caches[l]}itemData.styles[l].d+=styleData.hd===true?"":pathStringTransformed;itemData.styles[l]._mdf=redraw||itemData.styles[l]._mdf}}function renderFill(styleData,itemData,isFirstFrame){var styleElem=itemData.style;if(itemData.c._mdf||isFirstFrame){styleElem.pElem.setAttribute("fill","rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")")}if(itemData.o._mdf||isFirstFrame){styleElem.pElem.setAttribute("fill-opacity",itemData.o.v)}};function renderGradientStroke(styleData,itemData,isFirstFrame){renderGradient(styleData,itemData,isFirstFrame);renderStroke(styleData,itemData,isFirstFrame)}function renderGradient(styleData,itemData,isFirstFrame){var gfill=itemData.gf;var hasOpacity=itemData.g._hasOpacity;var pt1=itemData.s.v,pt2=itemData.e.v;if(itemData.o._mdf||isFirstFrame){var attr=styleData.ty==="gf"?"fill-opacity":"stroke-opacity";itemData.style.pElem.setAttribute(attr,itemData.o.v)}if(itemData.s._mdf||isFirstFrame){var attr1=styleData.t===1?"x1":"cx";var attr2=attr1==="x1"?"y1":"cy";gfill.setAttribute(attr1,pt1[0]);gfill.setAttribute(attr2,pt1[1]);if(hasOpacity&&!itemData.g._collapsable){itemData.of.setAttribute(attr1,pt1[0]);itemData.of.setAttribute(attr2,pt1[1])}}var stops,i,len,stop;if(itemData.g._cmdf||isFirstFrame){stops=itemData.cst;var cValues=itemData.g.c;len=stops.length;for(i=0;i<len;i+=1){stop=stops[i];stop.setAttribute("offset",cValues[i*4]+"%");stop.setAttribute("stop-color","rgb("+cValues[i*4+1]+","+cValues[i*4+2]+","+cValues[i*4+3]+")")}}if(hasOpacity&&(itemData.g._omdf||isFirstFrame)){var oValues=itemData.g.o;if(itemData.g._collapsable){stops=itemData.cst}else{stops=itemData.ost}len=stops.length;for(i=0;i<len;i+=1){stop=stops[i];if(!itemData.g._collapsable){stop.setAttribute("offset",oValues[i*2]+"%")}stop.setAttribute("stop-opacity",oValues[i*2+1])}}if(styleData.t===1){if(itemData.e._mdf||isFirstFrame){gfill.setAttribute("x2",pt2[0]);gfill.setAttribute("y2",pt2[1]);if(hasOpacity&&!itemData.g._collapsable){itemData.of.setAttribute("x2",pt2[0]);itemData.of.setAttribute("y2",pt2[1])}}}else{var rad;if(itemData.s._mdf||itemData.e._mdf||isFirstFrame){rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2));gfill.setAttribute("r",rad);if(hasOpacity&&!itemData.g._collapsable){itemData.of.setAttribute("r",rad)}}if(itemData.e._mdf||itemData.h._mdf||itemData.a._mdf||isFirstFrame){if(!rad){rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2))}var ang=Math.atan2(pt2[1]-pt1[1],pt2[0]-pt1[0]);var percent=itemData.h.v>=1?0.99:itemData.h.v<=-1?-0.99:itemData.h.v;var dist=rad*percent;var x=Math.cos(ang+itemData.a.v)*dist+pt1[0];var y=Math.sin(ang+itemData.a.v)*dist+pt1[1];gfill.setAttribute("fx",x);gfill.setAttribute("fy",y);if(hasOpacity&&!itemData.g._collapsable){itemData.of.setAttribute("fx",x);itemData.of.setAttribute("fy",y)}}}};function renderStroke(styleData,itemData,isFirstFrame){var styleElem=itemData.style;var d=itemData.d;if(d&&(d._mdf||isFirstFrame)&&d.dashStr){styleElem.pElem.setAttribute("stroke-dasharray",d.dashStr);styleElem.pElem.setAttribute("stroke-dashoffset",d.dashoffset[0])}if(itemData.c&&(itemData.c._mdf||isFirstFrame)){styleElem.pElem.setAttribute("stroke","rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")")}if(itemData.o._mdf||isFirstFrame){styleElem.pElem.setAttribute("stroke-opacity",itemData.o.v)}if(itemData.w._mdf||isFirstFrame){styleElem.pElem.setAttribute("stroke-width",itemData.w.v);if(styleElem.msElem){styleElem.msElem.setAttribute("stroke-width",itemData.w.v)}}};return ob}();function ShapeTransformManager(){this.sequences={};this.sequenceList=[];this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(transforms){var i,len=transforms.length;var key="_";for(i=0;i<len;i+=1){key+=transforms[i].transform.key+"_"}var sequence=this.sequences[key];if(!sequence){sequence={transforms:[].concat(transforms),finalTransform:new Matrix,_mdf:false};this.sequences[key]=sequence;this.sequenceList.push(sequence)}return sequence},processSequence:function(sequence,isFirstFrame){var i=0,len=sequence.transforms.length,_mdf=isFirstFrame;while(i<len&&!isFirstFrame){if(sequence.transforms[i].transform.mProps._mdf){_mdf=true;break}i+=1}if(_mdf){var props;sequence.finalTransform.reset();for(i=len-1;i>=0;i-=1){props=sequence.transforms[i].transform.mProps.v.props;sequence.finalTransform.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15])}}sequence._mdf=_mdf},processSequences:function(isFirstFrame){var i,len=this.sequenceList.length;for(i=0;i<len;i+=1){this.processSequence(this.sequenceList[i],isFirstFrame)}},getNewKey:function(){return"_"+this.transform_key_count++}};function CVShapeData(element,data,styles,transformsManager){this.styledShapes=[];this.tr=[0,0,0,0,0,0];var ty=4;if(data.ty=="rc"){ty=5}else if(data.ty=="el"){ty=6}else if(data.ty=="sr"){ty=7}this.sh=ShapePropertyFactory.getShapeProp(element,data,ty,element);var i,len=styles.length,styledShape;for(i=0;i<len;i+=1){if(!styles[i].closed){styledShape={transforms:transformsManager.addTransformSequence(styles[i].transforms),trNodes:[]};this.styledShapes.push(styledShape);styles[i].elements.push(styledShape)}}}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask){return false}var i=0,len=this.data.masksProperties.length;while(i<len){if(this.data.masksProperties[i].mode!=="n"&&this.data.masksProperties[i].cl!==false){return true}i+=1}return false},initExpressions:function(){this.layerInterface=LayerExpressionInterface(this);if(this.data.hasMask&&this.maskManager){this.layerInterface.registerMaskInterface(this.maskManager)}var effectsInterface=EffectsExpressionInterface.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(effectsInterface);if(this.data.ty===0||this.data.xt){this.compInterface=CompExpressionInterface(this)}else if(this.data.ty===4){this.layerInterface.shapeInterface=ShapeExpressionInterface(this.shapesData,this.itemsData,this.layerInterface);this.layerInterface.content=this.layerInterface.shapeInterface}else if(this.data.ty===5){this.layerInterface.textInterface=TextExpressionInterface(this);this.layerInterface.text=this.layerInterface.textInterface}},setBlendMode:function(){var blendModeValue=getBlendMode(this.data.bm);var elem=this.baseElement||this.layerElement;elem.style["mix-blend-mode"]=blendModeValue},initBaseData:function(data,globalData,comp){this.globalData=globalData;this.comp=comp;this.data=data;this.layerId=createElementID();if(!this.data.sr){this.data.sr=1}this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function NullElement(data,globalData,comp){this.initFrame();this.initBaseData(data,globalData,comp);this.initFrame();this.initTransform(data,globalData,comp);this.initHierarchy()}NullElement.prototype.prepareFrame=function(num){this.prepareProperties(num,true)};NullElement.prototype.renderFrame=function(){};NullElement.prototype.getBaseElement=function(){return null};NullElement.prototype.destroy=function(){};NullElement.prototype.sourceRectAtTime=function(){};NullElement.prototype.hide=function(){};extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g");this.transformedElement=this.layerElement;this.maskedElement=this.layerElement;this._sizeChanged=false;var layerElementParent=null;var filId,fil,gg;if(this.data.td){if(this.data.td==3||this.data.td==1){var masker=createNS("mask");masker.setAttribute("id",this.layerId);masker.setAttribute("mask-type",this.data.td==3?"luminance":"alpha");masker.appendChild(this.layerElement);layerElementParent=masker;this.globalData.defs.appendChild(masker);if(!featureSupport.maskType&&this.data.td==1){masker.setAttribute("mask-type","luminance");filId=createElementID();fil=filtersFactory.createFilter(filId);this.globalData.defs.appendChild(fil);fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());gg=createNS("g");gg.appendChild(this.layerElement);layerElementParent=gg;masker.appendChild(gg);gg.setAttribute("filter","url("+locationHref+"#"+filId+")")}}else if(this.data.td==2){var maskGroup=createNS("mask");maskGroup.setAttribute("id",this.layerId);maskGroup.setAttribute("mask-type","alpha");var maskGrouper=createNS("g");maskGroup.appendChild(maskGrouper);filId=createElementID();fil=filtersFactory.createFilter(filId);var feCTr=createNS("feComponentTransfer");feCTr.setAttribute("in","SourceGraphic");fil.appendChild(feCTr);var feFunc=createNS("feFuncA");feFunc.setAttribute("type","table");feFunc.setAttribute("tableValues","1.0 0.0");feCTr.appendChild(feFunc);this.globalData.defs.appendChild(fil);var alphaRect=createNS("rect");alphaRect.setAttribute("width",this.comp.data.w);alphaRect.setAttribute("height",this.comp.data.h);alphaRect.setAttribute("x","0");alphaRect.setAttribute("y","0");alphaRect.setAttribute("fill","#ffffff");alphaRect.setAttribute("opacity","0");maskGrouper.setAttribute("filter","url("+locationHref+"#"+filId+")");maskGrouper.appendChild(alphaRect);maskGrouper.appendChild(this.layerElement);layerElementParent=maskGrouper;if(!featureSupport.maskType){maskGroup.setAttribute("mask-type","luminance");fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());gg=createNS("g");maskGrouper.appendChild(alphaRect);gg.appendChild(this.layerElement);layerElementParent=gg;maskGrouper.appendChild(gg)}this.globalData.defs.appendChild(maskGroup)}}else if(this.data.tt){this.matteElement.appendChild(this.layerElement);layerElementParent=this.matteElement;this.baseElement=this.matteElement}else{this.baseElement=this.layerElement}if(this.data.ln){this.layerElement.setAttribute("id",this.data.ln)}if(this.data.cl){this.layerElement.setAttribute("class",this.data.cl)}if(this.data.ty===0&&!this.data.hd){var cp=createNS("clipPath");var pt=createNS("path");pt.setAttribute("d","M0,0 L"+this.data.w+",0"+" L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var clipId=createElementID();cp.setAttribute("id",clipId);cp.appendChild(pt);this.globalData.defs.appendChild(cp);if(this.checkMasks()){var cpGroup=createNS("g");cpGroup.setAttribute("clip-path","url("+locationHref+"#"+clipId+")");cpGroup.appendChild(this.layerElement);this.transformedElement=cpGroup;if(layerElementParent){layerElementParent.appendChild(this.transformedElement)}else{this.baseElement=this.transformedElement}}else{this.layerElement.setAttribute("clip-path","url("+locationHref+"#"+clipId+")")}}if(this.data.bm!==0){this.setBlendMode()}},renderElement:function(){if(this.finalTransform._matMdf){this.transformedElement.setAttribute("transform",this.finalTransform.mat.to2dCSS())}if(this.finalTransform._opMdf){this.transformedElement.setAttribute("opacity",this.finalTransform.mProp.o.v)}},destroyBaseElement:function(){this.layerElement=null;this.matteElement=null;this.maskManager.destroy()},getBaseElement:function(){if(this.data.hd){return null}return this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData);this.renderableEffectsManager=new SVGEffects(this)},setMatte:function(id){if(!this.matteElement){return}this.matteElement.setAttribute("mask","url("+locationHref+"#"+id+")")}};function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(data){var i,len=this.shapeModifiers.length;for(i=0;i<len;i+=1){this.shapeModifiers[i].addShape(data)}},isShapeInAnimatedModifiers:function(data){var i=0,len=this.shapeModifiers.length;while(i<len){if(this.shapeModifiers[i].isAnimatedWithShape(data)){return true}}return false},renderModifiers:function(){if(!this.shapeModifiers.length){return}var i,len=this.shapes.length;for(i=0;i<len;i+=1){this.shapes[i].sh.reset()}len=this.shapeModifiers.length;for(i=len-1;i>=0;i-=1){this.shapeModifiers[i].processShapes(this._isFirstFrame)}},lcEnum:{"1":"butt","2":"round","3":"square"},ljEnum:{"1":"miter","2":"round","3":"bevel"},searchProcessedElement:function(elem){var elements=this.processedElements;var i=0,len=elements.length;while(i<len){if(elements[i].elem===elem){return elements[i].pos}i+=1}return 0},addProcessedElement:function(elem,pos){var elements=this.processedElements;var i=elements.length;while(i){i-=1;if(elements[i].elem===elem){elements[i].pos=pos;return}}elements.push(new ProcessedElement(elem,pos))},prepareFrame:function(num){this.prepareRenderableFrame(num);this.prepareProperties(num,this.isInRange)}};function ITextElement(){}ITextElement.prototype.initElement=function(data,globalData,comp){this.lettersChangedFlag=true;this.initFrame();this.initBaseData(data,globalData,comp);this.textProperty=new TextProperty(this,data.t,this.dynamicProperties);this.textAnimator=new TextAnimatorProperty(data.t,this.renderType,this);this.initTransform(data,globalData,comp);this.initHierarchy();this.initRenderable();this.initRendererElement();this.createContainerElements();this.createRenderableComponents();this.createContent();this.hide();this.textAnimator.searchProperties(this.dynamicProperties)};ITextElement.prototype.prepareFrame=function(num){this._mdf=false;this.prepareRenderableFrame(num);this.prepareProperties(num,this.isInRange);if(this.textProperty._mdf||this.textProperty._isFirstFrame){this.buildNewText();this.textProperty._isFirstFrame=false;this.textProperty._mdf=false}};ITextElement.prototype.createPathShape=function(matrixHelper,shapes){var j,jLen=shapes.length;var k,kLen,pathNodes;var shapeStr="";for(j=0;j<jLen;j+=1){pathNodes=shapes[j].ks.k;shapeStr+=buildShapeString(pathNodes,pathNodes.i.length,true,matrixHelper)}return shapeStr};ITextElement.prototype.updateDocumentData=function(newData,index){this.textProperty.updateDocumentData(newData,index)};ITextElement.prototype.canResizeFont=function(_canResize){this.textProperty.canResizeFont(_canResize)};ITextElement.prototype.setMinimumFontSize=function(_fontSize){this.textProperty.setMinimumFontSize(_fontSize)};ITextElement.prototype.applyTextPropertiesToMatrix=function(documentData,matrixHelper,lineNumber,xPos,yPos){if(documentData.ps){matrixHelper.translate(documentData.ps[0],documentData.ps[1]+documentData.ascent,0)}matrixHelper.translate(0,-documentData.ls,0);switch(documentData.j){case 1:matrixHelper.translate(documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[lineNumber]),0,0);break;case 2:matrixHelper.translate(documentData.justifyOffset+(documentData.boxWidth-documentData.lineWidths[lineNumber])/2,0,0);break;}matrixHelper.translate(xPos,yPos,0)};ITextElement.prototype.buildColor=function(colorData){return"rgb("+Math.round(colorData[0]*255)+","+Math.round(colorData[1]*255)+","+Math.round(colorData[2]*255)+")"};ITextElement.prototype.emptyProp=new LetterProps;ITextElement.prototype.destroy=function(){};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement);ICompElement.prototype.initElement=function(data,globalData,comp){this.initFrame();this.initBaseData(data,globalData,comp);this.initTransform(data,globalData,comp);this.initRenderable();this.initHierarchy();this.initRendererElement();this.createContainerElements();this.createRenderableComponents();if(this.data.xt||!globalData.progressiveLoad){this.buildAllItems()}this.hide()};ICompElement.prototype.prepareFrame=function(num){this._mdf=false;this.prepareRenderableFrame(num);this.prepareProperties(num,this.isInRange);if(!this.isInRange&&!this.data.xt){return}if(!this.tm._placeholder){var timeRemapped=this.tm.v;if(timeRemapped===this.data.op){timeRemapped=this.data.op-1}this.renderedFrame=timeRemapped}else{this.renderedFrame=num/this.data.sr}var i,len=this.elements.length;if(!this.completeLayers){this.checkLayers(this.renderedFrame)}for(i=len-1;i>=0;i-=1){if(this.completeLayers||this.elements[i]){this.elements[i].prepareFrame(this.renderedFrame-this.layers[i].st);if(this.elements[i]._mdf){this._mdf=true}}}};ICompElement.prototype.renderInnerContent=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1){if(this.completeLayers||this.elements[i]){this.elements[i].renderFrame()}}};ICompElement.prototype.setElements=function(elems){this.elements=elems};ICompElement.prototype.getElements=function(){return this.elements};ICompElement.prototype.destroyElements=function(){var i,len=this.layers.length;for(i=0;i<len;i+=1){if(this.elements[i]){this.elements[i].destroy()}}};ICompElement.prototype.destroy=function(){this.destroyElements();this.destroyBaseElement()};function IImageElement(data,globalData,comp){this.assetData=globalData.getAssetData(data.refId);this.initElement(data,globalData,comp);this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement);IImageElement.prototype.createContent=function(){var assetPath=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image");this.innerElem.setAttribute("width",this.assetData.w+"px");this.innerElem.setAttribute("height",this.assetData.h+"px");this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio);this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",assetPath);this.layerElement.appendChild(this.innerElem)};IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ISolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}extendPrototype([IImageElement],ISolidElement);ISolidElement.prototype.createContent=function(){var rect=createNS("rect");rect.setAttribute("width",this.data.sw);rect.setAttribute("height",this.data.sh);rect.setAttribute("fill",this.data.sc);this.layerElement.appendChild(rect)};function SVGCompElement(data,globalData,comp){this.layers=data.layers;this.supports3d=true;this.completeLayers=false;this.pendingElements=[];this.elements=this.layers?createSizedArray(this.layers.length):[];this.initElement(data,globalData,comp);this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:true}}extendPrototype([SVGRenderer,ICompElement,SVGBaseElement],SVGCompElement);function SVGTextElement(data,globalData,comp){this.textSpans=[];this.renderType="svg";this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextElement);SVGTextElement.prototype.createContent=function(){if(this.data.singleShape&&!this.globalData.fontManager.chars){this.textContainer=createNS("text")}};SVGTextElement.prototype.buildTextContents=function(textArray){var i=0,len=textArray.length;var textContents=[],currentTextContent="";while(i<len){if(textArray[i]===String.fromCharCode(13)||textArray[i]===String.fromCharCode(3)){textContents.push(currentTextContent);currentTextContent=""}else{currentTextContent+=textArray[i]}i+=1}textContents.push(currentTextContent);return textContents};SVGTextElement.prototype.buildNewText=function(){var i,len;var documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData?documentData.l.length:0);if(documentData.fc){this.layerElement.setAttribute("fill",this.buildColor(documentData.fc))}else{this.layerElement.setAttribute("fill","rgba(0,0,0,0)")}if(documentData.sc){this.layerElement.setAttribute("stroke",this.buildColor(documentData.sc));this.layerElement.setAttribute("stroke-width",documentData.sw)}this.layerElement.setAttribute("font-size",documentData.finalSize);var fontData=this.globalData.fontManager.getFontByName(documentData.f);if(fontData.fClass){this.layerElement.setAttribute("class",fontData.fClass)}else{this.layerElement.setAttribute("font-family",fontData.fFamily);var fWeight=documentData.fWeight,fStyle=documentData.fStyle;this.layerElement.setAttribute("font-style",fStyle);this.layerElement.setAttribute("font-weight",fWeight)}this.layerElement.setAttribute("arial-label",documentData.t);var letters=documentData.l||[];var usesGlyphs=!!this.globalData.fontManager.chars;len=letters.length;var tSpan;var matrixHelper=this.mHelper;var shapes,shapeStr="",singleShape=this.data.singleShape;var xPos=0,yPos=0,firstLine=true;var trackingOffset=documentData.tr/1000*documentData.finalSize;if(singleShape&&!usesGlyphs&&!documentData.sz){var tElement=this.textContainer;var justify="start";switch(documentData.j){case 1:justify="end";break;case 2:justify="middle";break;}tElement.setAttribute("text-anchor",justify);tElement.setAttribute("letter-spacing",trackingOffset);var textContent=this.buildTextContents(documentData.finalText);len=textContent.length;yPos=documentData.ps?documentData.ps[1]+documentData.ascent:0;for(i=0;i<len;i+=1){tSpan=this.textSpans[i]||createNS("tspan");tSpan.textContent=textContent[i];tSpan.setAttribute("x",0);tSpan.setAttribute("y",yPos);tSpan.style.display="inherit";tElement.appendChild(tSpan);this.textSpans[i]=tSpan;yPos+=documentData.finalLineHeight}this.layerElement.appendChild(tElement)}else{var cachedSpansLength=this.textSpans.length;var shapeData,charData;for(i=0;i<len;i+=1){if(!usesGlyphs||!singleShape||i===0){tSpan=cachedSpansLength>i?this.textSpans[i]:createNS(usesGlyphs?"path":"text");if(cachedSpansLength<=i){tSpan.setAttribute("stroke-linecap","butt");tSpan.setAttribute("stroke-linejoin","round");tSpan.setAttribute("stroke-miterlimit","4");this.textSpans[i]=tSpan;this.layerElement.appendChild(tSpan)}tSpan.style.display="inherit"}matrixHelper.reset();matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);if(singleShape){if(letters[i].n){xPos=-trackingOffset;yPos+=documentData.yOffset;yPos+=firstLine?1:0;firstLine=false}this.applyTextPropertiesToMatrix(documentData,matrixHelper,letters[i].line,xPos,yPos);xPos+=letters[i].l||0;xPos+=trackingOffset}if(usesGlyphs){charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily);shapeData=charData&&charData.data||{};shapes=shapeData.shapes?shapeData.shapes[0].it:[];if(!singleShape){tSpan.setAttribute("d",this.createPathShape(matrixHelper,shapes))}else{shapeStr+=this.createPathShape(matrixHelper,shapes)}}else{if(singleShape){tSpan.setAttribute("transform","translate("+matrixHelper.props[12]+","+matrixHelper.props[13]+")")}tSpan.textContent=letters[i].val;tSpan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}}if(singleShape&&tSpan){tSpan.setAttribute("d",shapeStr)}}while(i<this.textSpans.length){this.textSpans[i].style.display="none";i+=1}this._sizeChanged=true};SVGTextElement.prototype.sourceRectAtTime=function(time){this.prepareFrame(this.comp.renderedFrame-this.data.st);this.renderInnerContent();if(this._sizeChanged){this._sizeChanged=false;var textBox=this.layerElement.getBBox();this.bbox={top:textBox.y,left:textBox.x,width:textBox.width,height:textBox.height}}return this.bbox};SVGTextElement.prototype.renderInnerContent=function(){if(!this.data.singleShape){this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);if(this.lettersChangedFlag||this.textAnimator.lettersChangedFlag){this._sizeChanged=true;var i,len;var renderedLetters=this.textAnimator.renderedLetters;var letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter,textSpan;for(i=0;i<len;i+=1){if(letters[i].n){continue}renderedLetter=renderedLetters[i];textSpan=this.textSpans[i];if(renderedLetter._mdf.m){textSpan.setAttribute("transform",renderedLetter.m)}if(renderedLetter._mdf.o){textSpan.setAttribute("opacity",renderedLetter.o)}if(renderedLetter._mdf.sw){textSpan.setAttribute("stroke-width",renderedLetter.sw)}if(renderedLetter._mdf.sc){textSpan.setAttribute("stroke",renderedLetter.sc)}if(renderedLetter._mdf.fc){textSpan.setAttribute("fill",renderedLetter.fc)}}}}};function SVGShapeElement(data,globalData,comp){this.shapes=[];this.shapesData=data.shapes;this.stylesList=[];this.shapeModifiers=[];this.itemsData=[];this.processedElements=[];this.animatedContents=[];this.initElement(data,globalData,comp);this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement);SVGShapeElement.prototype.initSecondaryElement=function(){};SVGShapeElement.prototype.identityMatrix=new Matrix;SVGShapeElement.prototype.buildExpressionInterface=function(){};SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],true);this.filterUniqueShapes()};SVGShapeElement.prototype.filterUniqueShapes=function(){var i,len=this.shapes.length,shape;var j,jLen=this.stylesList.length;var style,count=0;var tempShapes=[];var areAnimated=false;for(j=0;j<jLen;j+=1){style=this.stylesList[j];areAnimated=false;tempShapes.length=0;for(i=0;i<len;i+=1){shape=this.shapes[i];if(shape.styles.indexOf(style)!==-1){tempShapes.push(shape);areAnimated=shape._isAnimated||areAnimated}}if(tempShapes.length>1&&areAnimated){this.setShapesAsAnimated(tempShapes)}}};SVGShapeElement.prototype.setShapesAsAnimated=function(shapes){var i,len=shapes.length;for(i=0;i<len;i+=1){shapes[i].setAsAnimated()}};SVGShapeElement.prototype.createStyleElement=function(data,level){var elementData;var styleOb=new SVGStyleData(data,level);var pathElement=styleOb.pElem;if(data.ty==="st"){elementData=new SVGStrokeStyleData(this,data,styleOb)}else if(data.ty==="fl"){elementData=new SVGFillStyleData(this,data,styleOb)}else if(data.ty==="gf"||data.ty==="gs"){var gradientConstructor=data.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;elementData=new gradientConstructor(this,data,styleOb);this.globalData.defs.appendChild(elementData.gf);if(elementData.maskId){this.globalData.defs.appendChild(elementData.ms);this.globalData.defs.appendChild(elementData.of);pathElement.setAttribute("mask","url("+locationHref+"#"+elementData.maskId+")")}}if(data.ty==="st"||data.ty==="gs"){pathElement.setAttribute("stroke-linecap",this.lcEnum[data.lc]||"round");pathElement.setAttribute("stroke-linejoin",this.ljEnum[data.lj]||"round");pathElement.setAttribute("fill-opacity","0");if(data.lj===1){pathElement.setAttribute("stroke-miterlimit",data.ml)}}if(data.r===2){pathElement.setAttribute("fill-rule","evenodd")}if(data.ln){pathElement.setAttribute("id",data.ln)}if(data.cl){pathElement.setAttribute("class",data.cl)}if(data.bm){pathElement.style["mix-blend-mode"]=getBlendMode(data.bm)}this.stylesList.push(styleOb);this.addToAnimatedContents(data,elementData);return elementData};SVGShapeElement.prototype.createGroupElement=function(data){var elementData=new ShapeGroupData;if(data.ln){elementData.gr.setAttribute("id",data.ln)}if(data.cl){elementData.gr.setAttribute("class",data.cl)}if(data.bm){elementData.gr.style["mix-blend-mode"]=getBlendMode(data.bm)}return elementData};SVGShapeElement.prototype.createTransformElement=function(data,container){var transformProperty=TransformPropertyFactory.getTransformProperty(this,data,this);var elementData=new SVGTransformData(transformProperty,transformProperty.o,container);this.addToAnimatedContents(data,elementData);return elementData};SVGShapeElement.prototype.createShapeElement=function(data,ownTransformers,level){var ty=4;if(data.ty==="rc"){ty=5}else if(data.ty==="el"){ty=6}else if(data.ty==="sr"){ty=7}var shapeProperty=ShapePropertyFactory.getShapeProp(this,data,ty,this);var elementData=new SVGShapeData(ownTransformers,level,shapeProperty);this.shapes.push(elementData);this.addShapeToModifiers(elementData);this.addToAnimatedContents(data,elementData);return elementData};SVGShapeElement.prototype.addToAnimatedContents=function(data,element){var i=0,len=this.animatedContents.length;while(i<len){if(this.animatedContents[i].element===element){return}i+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(data),element:element,data:data})};SVGShapeElement.prototype.setElementStyles=function(elementData){var arr=elementData.styles;var j,jLen=this.stylesList.length;for(j=0;j<jLen;j+=1){if(!this.stylesList[j].closed){arr.push(this.stylesList[j])}}};SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=true;var i,len=this.itemsData.length;for(i=0;i<len;i+=1){this.prevViewData[i]=this.itemsData[i]}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],true);this.filterUniqueShapes();len=this.dynamicProperties.length;for(i=0;i<len;i+=1){this.dynamicProperties[i].getValue()}this.renderModifiers()};SVGShapeElement.prototype.searchShapes=function(arr,itemsData,prevViewData,container,level,transformers,render){var ownTransformers=[].concat(transformers);var i,len=arr.length-1;var j,jLen;var ownStyles=[],ownModifiers=[],styleOb,currentTransform,modifier,processedPos;for(i=len;i>=0;i-=1){processedPos=this.searchProcessedElement(arr[i]);if(!processedPos){arr[i]._render=render}else{itemsData[i]=prevViewData[processedPos-1]}if(arr[i].ty=="fl"||arr[i].ty=="st"||arr[i].ty=="gf"||arr[i].ty=="gs"){if(!processedPos){itemsData[i]=this.createStyleElement(arr[i],level)}else{itemsData[i].style.closed=false}if(arr[i]._render){container.appendChild(itemsData[i].style.pElem)}ownStyles.push(itemsData[i].style)}else if(arr[i].ty=="gr"){if(!processedPos){itemsData[i]=this.createGroupElement(arr[i])}else{jLen=itemsData[i].it.length;for(j=0;j<jLen;j+=1){itemsData[i].prevViewData[j]=itemsData[i].it[j]}}this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,itemsData[i].gr,level+1,ownTransformers,render);if(arr[i]._render){container.appendChild(itemsData[i].gr)}}else if(arr[i].ty=="tr"){if(!processedPos){itemsData[i]=this.createTransformElement(arr[i],container)}currentTransform=itemsData[i].transform;ownTransformers.push(currentTransform)}else if(arr[i].ty=="sh"||arr[i].ty=="rc"||arr[i].ty=="el"||arr[i].ty=="sr"){if(!processedPos){itemsData[i]=this.createShapeElement(arr[i],ownTransformers,level)}this.setElementStyles(itemsData[i])}else if(arr[i].ty=="tm"||arr[i].ty=="rd"||arr[i].ty=="ms"){if(!processedPos){modifier=ShapeModifiers.getModifier(arr[i].ty);modifier.init(this,arr[i]);itemsData[i]=modifier;this.shapeModifiers.push(modifier)}else{modifier=itemsData[i];modifier.closed=false}ownModifiers.push(modifier)}else if(arr[i].ty=="rp"){if(!processedPos){modifier=ShapeModifiers.getModifier(arr[i].ty);itemsData[i]=modifier;modifier.init(this,arr,i,itemsData);this.shapeModifiers.push(modifier);render=false}else{modifier=itemsData[i];modifier.closed=true}ownModifiers.push(modifier)}this.addProcessedElement(arr[i],i+1)}len=ownStyles.length;for(i=0;i<len;i+=1){ownStyles[i].closed=true}len=ownModifiers.length;for(i=0;i<len;i+=1){ownModifiers[i].closed=true}};SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var i,len=this.stylesList.length;for(i=0;i<len;i+=1){this.stylesList[i].reset()}this.renderShape();for(i=0;i<len;i+=1){if(this.stylesList[i]._mdf||this._isFirstFrame){if(this.stylesList[i].msElem){this.stylesList[i].msElem.setAttribute("d",this.stylesList[i].d);this.stylesList[i].d="M0 0"+this.stylesList[i].d}this.stylesList[i].pElem.setAttribute("d",this.stylesList[i].d||"M0 0")}}};SVGShapeElement.prototype.renderShape=function(){var i,len=this.animatedContents.length;var animatedContent;for(i=0;i<len;i+=1){animatedContent=this.animatedContents[i];if((this._isFirstFrame||animatedContent.element._isAnimated)&&animatedContent.data!==true){animatedContent.fn(animatedContent.data,animatedContent.element,this._isFirstFrame)}}};SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement();this.shapesData=null;this.itemsData=null};function SVGTintFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("color-interpolation-filters","linearRGB");feColorMatrix.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0");feColorMatrix.setAttribute("result","f1");filter.appendChild(feColorMatrix);feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("color-interpolation-filters","sRGB");feColorMatrix.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0");feColorMatrix.setAttribute("result","f2");filter.appendChild(feColorMatrix);this.matrixFilter=feColorMatrix;if(filterManager.effectElements[2].p.v!==100||filterManager.effectElements[2].p.k){var feMerge=createNS("feMerge");filter.appendChild(feMerge);var feMergeNode;feMergeNode=createNS("feMergeNode");feMergeNode.setAttribute("in","SourceGraphic");feMerge.appendChild(feMergeNode);feMergeNode=createNS("feMergeNode");feMergeNode.setAttribute("in","f2");feMerge.appendChild(feMergeNode)}}SVGTintFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var colorBlack=this.filterManager.effectElements[0].p.v;var colorWhite=this.filterManager.effectElements[1].p.v;var opacity=this.filterManager.effectElements[2].p.v/100;this.matrixFilter.setAttribute("values",colorWhite[0]-colorBlack[0]+" 0 0 0 "+colorBlack[0]+" "+(colorWhite[1]-colorBlack[1])+" 0 0 0 "+colorBlack[1]+" "+(colorWhite[2]-colorBlack[2])+" 0 0 0 "+colorBlack[2]+" 0 0 0 "+opacity+" 0")}};function SVGFillFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("color-interpolation-filters","sRGB");feColorMatrix.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0");filter.appendChild(feColorMatrix);this.matrixFilter=feColorMatrix}SVGFillFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var color=this.filterManager.effectElements[2].p.v;var opacity=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+color[0]+" 0 0 0 0 "+color[1]+" 0 0 0 0 "+color[2]+" 0 0 0 "+opacity+" 0")}};function SVGStrokeEffect(elem,filterManager){this.initialized=false;this.filterManager=filterManager;this.elem=elem;this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var elemChildren=this.elem.layerElement.children||this.elem.layerElement.childNodes;var path,groupPath,i,len;if(this.filterManager.effectElements[1].p.v===1){len=this.elem.maskManager.masksProperties.length;i=0}else{i=this.filterManager.effectElements[0].p.v-1;len=i+1}groupPath=createNS("g");groupPath.setAttribute("fill","none");groupPath.setAttribute("stroke-linecap","round");groupPath.setAttribute("stroke-dashoffset",1);for(i;i<len;i+=1){path=createNS("path");groupPath.appendChild(path);this.paths.push({p:path,m:i})}if(this.filterManager.effectElements[10].p.v===3){var mask=createNS("mask");var id=createElementID();mask.setAttribute("id",id);mask.setAttribute("mask-type","alpha");mask.appendChild(groupPath);this.elem.globalData.defs.appendChild(mask);var g=createNS("g");g.setAttribute("mask","url("+locationHref+"#"+id+")");while(elemChildren[0]){g.appendChild(elemChildren[0])}this.elem.layerElement.appendChild(g);this.masker=mask;groupPath.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2){elemChildren=this.elem.layerElement.children||this.elem.layerElement.childNodes;while(elemChildren.length){this.elem.layerElement.removeChild(elemChildren[0])}}this.elem.layerElement.appendChild(groupPath);this.elem.layerElement.removeAttribute("mask");groupPath.setAttribute("stroke","#fff")}this.initialized=true;this.pathMasker=groupPath};SVGStrokeEffect.prototype.renderFrame=function(forceRender){if(!this.initialized){this.initialize()}var i,len=this.paths.length;var mask,path;for(i=0;i<len;i+=1){if(this.paths[i].m===-1){continue}mask=this.elem.maskManager.viewData[this.paths[i].m];path=this.paths[i].p;if(forceRender||this.filterManager._mdf||mask.prop._mdf){path.setAttribute("d",mask.lastPath)}if(forceRender||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||mask.prop._mdf){var dasharrayValue;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var s=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;var e=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)/100;var l=path.getTotalLength();dasharrayValue="0 0 0 "+l*s+" ";var lineLength=l*(e-s);var segment=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100;var units=Math.floor(lineLength/segment);var j;for(j=0;j<units;j+=1){dasharrayValue+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100+" "}dasharrayValue+="0 "+l*10+" 0 0"}else{dasharrayValue="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v/100}path.setAttribute("stroke-dasharray",dasharrayValue)}}if(forceRender||this.filterManager.effectElements[4].p._mdf){this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2)}if(forceRender||this.filterManager.effectElements[6].p._mdf){this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v)}if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(forceRender||this.filterManager.effectElements[3].p._mdf){var color=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bm_floor(color[0]*255)+","+bm_floor(color[1]*255)+","+bm_floor(color[2]*255)+")")}}};function SVGTritoneFilter(filter,filterManager){this.filterManager=filterManager;var feColorMatrix=createNS("feColorMatrix");feColorMatrix.setAttribute("type","matrix");feColorMatrix.setAttribute("color-interpolation-filters","linearRGB");feColorMatrix.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0");feColorMatrix.setAttribute("result","f1");filter.appendChild(feColorMatrix);var feComponentTransfer=createNS("feComponentTransfer");feComponentTransfer.setAttribute("color-interpolation-filters","sRGB");filter.appendChild(feComponentTransfer);this.matrixFilter=feComponentTransfer;var feFuncR=createNS("feFuncR");feFuncR.setAttribute("type","table");feComponentTransfer.appendChild(feFuncR);this.feFuncR=feFuncR;var feFuncG=createNS("feFuncG");feFuncG.setAttribute("type","table");feComponentTransfer.appendChild(feFuncG);this.feFuncG=feFuncG;var feFuncB=createNS("feFuncB");feFuncB.setAttribute("type","table");feComponentTransfer.appendChild(feFuncB);this.feFuncB=feFuncB}SVGTritoneFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var color1=this.filterManager.effectElements[0].p.v;var color2=this.filterManager.effectElements[1].p.v;var color3=this.filterManager.effectElements[2].p.v;var tableR=color3[0]+" "+color2[0]+" "+color1[0];var tableG=color3[1]+" "+color2[1]+" "+color1[1];var tableB=color3[2]+" "+color2[2]+" "+color1[2];this.feFuncR.setAttribute("tableValues",tableR);this.feFuncG.setAttribute("tableValues",tableG);this.feFuncB.setAttribute("tableValues",tableB)}};function SVGProLevelsFilter(filter,filterManager){this.filterManager=filterManager;var effectElements=this.filterManager.effectElements;var feComponentTransfer=createNS("feComponentTransfer");var feFuncR,feFuncG,feFuncB;if(effectElements[10].p.k||effectElements[10].p.v!==0||effectElements[11].p.k||effectElements[11].p.v!==1||effectElements[12].p.k||effectElements[12].p.v!==1||effectElements[13].p.k||effectElements[13].p.v!==0||effectElements[14].p.k||effectElements[14].p.v!==1){this.feFuncR=this.createFeFunc("feFuncR",feComponentTransfer)}if(effectElements[17].p.k||effectElements[17].p.v!==0||effectElements[18].p.k||effectElements[18].p.v!==1||effectElements[19].p.k||effectElements[19].p.v!==1||effectElements[20].p.k||effectElements[20].p.v!==0||effectElements[21].p.k||effectElements[21].p.v!==1){this.feFuncG=this.createFeFunc("feFuncG",feComponentTransfer)}if(effectElements[24].p.k||effectElements[24].p.v!==0||effectElements[25].p.k||effectElements[25].p.v!==1||effectElements[26].p.k||effectElements[26].p.v!==1||effectElements[27].p.k||effectElements[27].p.v!==0||effectElements[28].p.k||effectElements[28].p.v!==1){this.feFuncB=this.createFeFunc("feFuncB",feComponentTransfer)}if(effectElements[31].p.k||effectElements[31].p.v!==0||effectElements[32].p.k||effectElements[32].p.v!==1||effectElements[33].p.k||effectElements[33].p.v!==1||effectElements[34].p.k||effectElements[34].p.v!==0||effectElements[35].p.k||effectElements[35].p.v!==1){this.feFuncA=this.createFeFunc("feFuncA",feComponentTransfer)}if(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA){feComponentTransfer.setAttribute("color-interpolation-filters","sRGB");filter.appendChild(feComponentTransfer);feComponentTransfer=createNS("feComponentTransfer")}if(effectElements[3].p.k||effectElements[3].p.v!==0||effectElements[4].p.k||effectElements[4].p.v!==1||effectElements[5].p.k||effectElements[5].p.v!==1||effectElements[6].p.k||effectElements[6].p.v!==0||effectElements[7].p.k||effectElements[7].p.v!==1){feComponentTransfer.setAttribute("color-interpolation-filters","sRGB");filter.appendChild(feComponentTransfer);this.feFuncRComposed=this.createFeFunc("feFuncR",feComponentTransfer);this.feFuncGComposed=this.createFeFunc("feFuncG",feComponentTransfer);this.feFuncBComposed=this.createFeFunc("feFuncB",feComponentTransfer)}}SVGProLevelsFilter.prototype.createFeFunc=function(type,feComponentTransfer){var feFunc=createNS(type);feFunc.setAttribute("type","table");feComponentTransfer.appendChild(feFunc);return feFunc};SVGProLevelsFilter.prototype.getTableValue=function(inputBlack,inputWhite,gamma,outputBlack,outputWhite){var cnt=0;var segments=256;var perc;var min=Math.min(inputBlack,inputWhite);var max=Math.max(inputBlack,inputWhite);var table=Array.call(null,{length:segments});var colorValue;var pos=0;var outputDelta=outputWhite-outputBlack;var inputDelta=inputWhite-inputBlack;while(cnt<=256){perc=cnt/256;if(perc<=min){colorValue=inputDelta<0?outputWhite:outputBlack}else if(perc>=max){colorValue=inputDelta<0?outputBlack:outputWhite}else{colorValue=outputBlack+outputDelta*Math.pow((perc-inputBlack)/inputDelta,1/gamma)}table[pos++]=colorValue;cnt+=256/(segments-1)}return table.join(" ")};SVGProLevelsFilter.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){var val,cnt,perc,bezier;var effectElements=this.filterManager.effectElements;if(this.feFuncRComposed&&(forceRender||effectElements[3].p._mdf||effectElements[4].p._mdf||effectElements[5].p._mdf||effectElements[6].p._mdf||effectElements[7].p._mdf)){val=this.getTableValue(effectElements[3].p.v,effectElements[4].p.v,effectElements[5].p.v,effectElements[6].p.v,effectElements[7].p.v);this.feFuncRComposed.setAttribute("tableValues",val);this.feFuncGComposed.setAttribute("tableValues",val);this.feFuncBComposed.setAttribute("tableValues",val)}if(this.feFuncR&&(forceRender||effectElements[10].p._mdf||effectElements[11].p._mdf||effectElements[12].p._mdf||effectElements[13].p._mdf||effectElements[14].p._mdf)){val=this.getTableValue(effectElements[10].p.v,effectElements[11].p.v,effectElements[12].p.v,effectElements[13].p.v,effectElements[14].p.v);this.feFuncR.setAttribute("tableValues",val)}if(this.feFuncG&&(forceRender||effectElements[17].p._mdf||effectElements[18].p._mdf||effectElements[19].p._mdf||effectElements[20].p._mdf||effectElements[21].p._mdf)){val=this.getTableValue(effectElements[17].p.v,effectElements[18].p.v,effectElements[19].p.v,effectElements[20].p.v,effectElements[21].p.v);this.feFuncG.setAttribute("tableValues",val)}if(this.feFuncB&&(forceRender||effectElements[24].p._mdf||effectElements[25].p._mdf||effectElements[26].p._mdf||effectElements[27].p._mdf||effectElements[28].p._mdf)){val=this.getTableValue(effectElements[24].p.v,effectElements[25].p.v,effectElements[26].p.v,effectElements[27].p.v,effectElements[28].p.v);this.feFuncB.setAttribute("tableValues",val)}if(this.feFuncA&&(forceRender||effectElements[31].p._mdf||effectElements[32].p._mdf||effectElements[33].p._mdf||effectElements[34].p._mdf||effectElements[35].p._mdf)){val=this.getTableValue(effectElements[31].p.v,effectElements[32].p.v,effectElements[33].p.v,effectElements[34].p.v,effectElements[35].p.v);this.feFuncA.setAttribute("tableValues",val)}}};function SVGDropShadowEffect(filter,filterManager){filter.setAttribute("x","-100%");filter.setAttribute("y","-100%");filter.setAttribute("width","400%");filter.setAttribute("height","400%");this.filterManager=filterManager;var feGaussianBlur=createNS("feGaussianBlur");feGaussianBlur.setAttribute("in","SourceAlpha");feGaussianBlur.setAttribute("result","drop_shadow_1");feGaussianBlur.setAttribute("stdDeviation","0");this.feGaussianBlur=feGaussianBlur;filter.appendChild(feGaussianBlur);var feOffset=createNS("feOffset");feOffset.setAttribute("dx","25");feOffset.setAttribute("dy","0");feOffset.setAttribute("in","drop_shadow_1");feOffset.setAttribute("result","drop_shadow_2");this.feOffset=feOffset;filter.appendChild(feOffset);var feFlood=createNS("feFlood");feFlood.setAttribute("flood-color","#00ff00");feFlood.setAttribute("flood-opacity","1");feFlood.setAttribute("result","drop_shadow_3");this.feFlood=feFlood;filter.appendChild(feFlood);var feComposite=createNS("feComposite");feComposite.setAttribute("in","drop_shadow_3");feComposite.setAttribute("in2","drop_shadow_2");feComposite.setAttribute("operator","in");feComposite.setAttribute("result","drop_shadow_4");filter.appendChild(feComposite);var feMerge=createNS("feMerge");filter.appendChild(feMerge);var feMergeNode;feMergeNode=createNS("feMergeNode");feMerge.appendChild(feMergeNode);feMergeNode=createNS("feMergeNode");feMergeNode.setAttribute("in","SourceGraphic");this.feMergeNode=feMergeNode;this.feMerge=feMerge;this.originalNodeAdded=false;feMerge.appendChild(feMergeNode)}SVGDropShadowEffect.prototype.renderFrame=function(forceRender){if(forceRender||this.filterManager._mdf){if(forceRender||this.filterManager.effectElements[4].p._mdf){this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4)}if(forceRender||this.filterManager.effectElements[0].p._mdf){var col=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(col[0]*255),Math.round(col[1]*255),Math.round(col[2]*255)))}if(forceRender||this.filterManager.effectElements[1].p._mdf){this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255)}if(forceRender||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var distance=this.filterManager.effectElements[3].p.v;var angle=(this.filterManager.effectElements[2].p.v-90)*degToRads;var x=distance*Math.cos(angle);var y=distance*Math.sin(angle);this.feOffset.setAttribute("dx",x);this.feOffset.setAttribute("dy",y)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(filterElem,filterManager,elem){this.initialized=false;this.filterManager=filterManager;this.filterElem=filterElem;this.elem=elem;elem.matteElement=createNS("g");elem.matteElement.appendChild(elem.layerElement);elem.matteElement.appendChild(elem.transformedElement);elem.baseElement=elem.matteElement}SVGMatte3Effect.prototype.findSymbol=function(mask){var i=0,len=_svgMatteSymbols.length;while(i<len){if(_svgMatteSymbols[i]===mask){return _svgMatteSymbols[i]}i+=1}return null};SVGMatte3Effect.prototype.replaceInParent=function(mask,symbolId){var parentNode=mask.layerElement.parentNode;if(!parentNode){return}var children=parentNode.children;var i=0,len=children.length;while(i<len){if(children[i]===mask.layerElement){break}i+=1}var nextChild;if(i<=len-2){nextChild=children[i+1]}var useElem=createNS("use");useElem.setAttribute("href","#"+symbolId);if(nextChild){parentNode.insertBefore(useElem,nextChild)}else{parentNode.appendChild(useElem)}};SVGMatte3Effect.prototype.setElementAsMask=function(elem,mask){if(!this.findSymbol(mask)){var symbolId=createElementID();var masker=createNS("mask");masker.setAttribute("id",mask.layerId);masker.setAttribute("mask-type","alpha");_svgMatteSymbols.push(mask);var defs=elem.globalData.defs;defs.appendChild(masker);var symbol=createNS("symbol");symbol.setAttribute("id",symbolId);this.replaceInParent(mask,symbolId);symbol.appendChild(mask.layerElement);defs.appendChild(symbol);var useElem=createNS("use");useElem.setAttribute("href","#"+symbolId);masker.appendChild(useElem);mask.data.hd=false;mask.show()}elem.setMatte(mask.layerId)};SVGMatte3Effect.prototype.initialize=function(){var ind=this.filterManager.effectElements[0].p.v;var elements=this.elem.comp.elements;var i=0,len=elements.length;while(i<len){if(elements[i]&&elements[i].data.ind===ind){this.setElementAsMask(this.elem,elements[i])}i+=1}this.initialized=true};SVGMatte3Effect.prototype.renderFrame=function(){if(!this.initialized){this.initialize()}};function SVGEffects(elem){var i,len=elem.data.ef?elem.data.ef.length:0;var filId=createElementID();var fil=filtersFactory.createFilter(filId);var count=0;this.filters=[];var filterManager;for(i=0;i<len;i+=1){filterManager=null;if(elem.data.ef[i].ty===20){count+=1;filterManager=new SVGTintFilter(fil,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===21){count+=1;filterManager=new SVGFillFilter(fil,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===22){filterManager=new SVGStrokeEffect(elem,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===23){count+=1;filterManager=new SVGTritoneFilter(fil,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===24){count+=1;filterManager=new SVGProLevelsFilter(fil,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===25){count+=1;filterManager=new SVGDropShadowEffect(fil,elem.effectsManager.effectElements[i])}else if(elem.data.ef[i].ty===28){filterManager=new SVGMatte3Effect(fil,elem.effectsManager.effectElements[i],elem)}if(filterManager){this.filters.push(filterManager)}}if(count){elem.globalData.defs.appendChild(fil);elem.layerElement.setAttribute("filter","url("+locationHref+"#"+filId+")")}if(this.filters.length){elem.addRenderableComponent(this)}}SVGEffects.prototype.renderFrame=function(_isFirstFrame){var i,len=this.filters.length;for(i=0;i<len;i+=1){this.filters[i].renderFrame(_isFirstFrame)}};function CVContextData(){this.saved=[];this.cArrPos=0;this.cTr=new Matrix;this.cO=1;var i,len=15;this.savedOp=createTypedArray("float32",len);for(i=0;i<len;i+=1){this.saved[i]=createTypedArray("float32",16)}this._length=len}CVContextData.prototype.duplicate=function(){var newLength=this._length*2;var currentSavedOp=this.savedOp;this.savedOp=createTypedArray("float32",newLength);this.savedOp.set(currentSavedOp);var i=0;for(i=this._length;i<newLength;i+=1){this.saved[i]=createTypedArray("float32",16)}this._length=newLength};CVContextData.prototype.reset=function(){this.cArrPos=0;this.cTr.reset();this.cO=1};function CVBaseElement(){}CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){this.canvasContext=this.globalData.canvasContext;this.renderableEffectsManager=new CVEffects(this)},createContent:function(){},setBlendMode:function(){var globalData=this.globalData;if(globalData.blendMode!==this.data.bm){globalData.blendMode=this.data.bm;var blendModeValue=getBlendMode(this.data.bm);globalData.canvasContext.globalCompositeOperation=blendModeValue}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this)},hideElement:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){this.hidden=true}},showElement:function(){if(this.isInRange&&!this.isTransparent){this.hidden=false;this._isFirstFrame=true;this.maskManager._isFirstFrame=true}},renderFrame:function(){if(this.hidden||this.data.hd){return}this.renderTransform();this.renderRenderable();this.setBlendMode();this.globalData.renderer.save();this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);this.renderInnerContent();this.globalData.renderer.restore();if(this.maskManager.hasMasks){this.globalData.renderer.restore(true)}if(this._isFirstFrame){this._isFirstFrame=false}},destroy:function(){this.canvasContext=null;this.data=null;this.globalData=null;this.maskManager.destroy()},mHelper:new Matrix};CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement;CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVImageElement(data,globalData,comp){this.failed=false;this.assetData=globalData.getAssetData(data.refId);this.img=globalData.imageLoader.getImage(this.assetData);this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement);CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement;CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame;CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var canvas=createTag("canvas");canvas.width=this.assetData.w;canvas.height=this.assetData.h;var ctx=canvas.getContext("2d");var imgW=this.img.width;var imgH=this.img.height;var imgRel=imgW/imgH;var canvasRel=this.assetData.w/this.assetData.h;var widthCrop,heightCrop;var par=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;if(imgRel>canvasRel&&par==="xMidYMid slice"||imgRel<canvasRel&&par!=="xMidYMid slice"){heightCrop=imgH;widthCrop=heightCrop*canvasRel}else{widthCrop=imgW;heightCrop=widthCrop/canvasRel}ctx.drawImage(this.img,(imgW-widthCrop)/2,(imgH-heightCrop)/2,widthCrop,heightCrop,0,0,this.assetData.w,this.assetData.h);this.img=canvas}};CVImageElement.prototype.renderInnerContent=function(parentMatrix){if(this.failed){return}this.canvasContext.drawImage(this.img,0,0)};CVImageElement.prototype.destroy=function(){this.img=null};function CVCompElement(data,globalData,comp){this.completeLayers=false;this.layers=data.layers;this.pendingElements=[];this.elements=createSizedArray(this.layers.length);this.initElement(data,globalData,comp);this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:true}}extendPrototype([CanvasRenderer,ICompElement,CVBaseElement],CVCompElement);CVCompElement.prototype.renderInnerContent=function(){var i,len=this.layers.length;for(i=len-1;i>=0;i-=1){if(this.completeLayers||this.elements[i]){this.elements[i].renderFrame()}}};CVCompElement.prototype.destroy=function(){var i,len=this.layers.length;for(i=len-1;i>=0;i-=1){if(this.elements[i]){this.elements[i].destroy()}}this.layers=null;this.elements=null};function CVMaskElement(data,element){this.data=data;this.element=element;this.masksProperties=this.data.masksProperties||[];this.viewData=createSizedArray(this.masksProperties.length);var i,len=this.masksProperties.length,hasMasks=false;for(i=0;i<len;i++){if(this.masksProperties[i].mode!=="n"){hasMasks=true}this.viewData[i]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[i],3)}this.hasMasks=hasMasks;if(hasMasks){this.element.addRenderableComponent(this)}}CVMaskElement.prototype.renderFrame=function(){if(!this.hasMasks){return}var transform=this.element.finalTransform.mat;var ctx=this.element.canvasContext;var i,len=this.masksProperties.length;var pt,pts,data;ctx.beginPath();for(i=0;i<len;i++){if(this.masksProperties[i].mode!=="n"){if(this.masksProperties[i].inv){ctx.moveTo(0,0);ctx.lineTo(this.element.globalData.compSize.w,0);ctx.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h);ctx.lineTo(0,this.element.globalData.compSize.h);ctx.lineTo(0,0)}data=this.viewData[i].v;pt=transform.applyToPointArray(data.v[0][0],data.v[0][1],0);ctx.moveTo(pt[0],pt[1]);var j,jLen=data._length;for(j=1;j<jLen;j++){pts=transform.applyToTriplePoints(data.o[j-1],data.i[j],data.v[j]);ctx.bezierCurveTo(pts[0],pts[1],pts[2],pts[3],pts[4],pts[5])}pts=transform.applyToTriplePoints(data.o[j-1],data.i[0],data.v[0]);ctx.bezierCurveTo(pts[0],pts[1],pts[2],pts[3],pts[4],pts[5])}}this.element.globalData.renderer.save(true);ctx.clip()};CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty;CVMaskElement.prototype.destroy=function(){this.element=null};function CVShapeElement(data,globalData,comp){this.shapes=[];this.shapesData=data.shapes;this.stylesList=[];this.itemsData=[];this.prevViewData=[];this.shapeModifiers=[];this.processedElements=[];this.transformsManager=new ShapeTransformManager;this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement);CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement;CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:false};CVShapeElement.prototype.dashResetter=[];CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,true,[])};CVShapeElement.prototype.createStyleElement=function(data,transforms){var styleElem={data:data,type:data.ty,preTransforms:this.transformsManager.addTransformSequence(transforms),transforms:[],elements:[],closed:data.hd===true};var elementData={};if(data.ty=="fl"||data.ty=="st"){elementData.c=PropertyFactory.getProp(this,data.c,1,255,this);if(!elementData.c.k){styleElem.co="rgb("+bm_floor(elementData.c.v[0])+","+bm_floor(elementData.c.v[1])+","+bm_floor(elementData.c.v[2])+")"}}else if(data.ty==="gf"||data.ty==="gs"){elementData.s=PropertyFactory.getProp(this,data.s,1,null,this);elementData.e=PropertyFactory.getProp(this,data.e,1,null,this);elementData.h=PropertyFactory.getProp(this,data.h||{k:0},0,0.01,this);elementData.a=PropertyFactory.getProp(this,data.a||{k:0},0,degToRads,this);elementData.g=new GradientProperty(this,data.g,this)}elementData.o=PropertyFactory.getProp(this,data.o,0,0.01,this);if(data.ty=="st"||data.ty=="gs"){styleElem.lc=this.lcEnum[data.lc]||"round";styleElem.lj=this.ljEnum[data.lj]||"round";if(data.lj==1){styleElem.ml=data.ml}elementData.w=PropertyFactory.getProp(this,data.w,0,null,this);if(!elementData.w.k){styleElem.wi=elementData.w.v}if(data.d){var d=new DashProperty(this,data.d,"canvas",this);elementData.d=d;if(!elementData.d.k){styleElem.da=elementData.d.dashArray;styleElem.do=elementData.d.dashoffset[0]}}}else{styleElem.r=data.r===2?"evenodd":"nonzero"}this.stylesList.push(styleElem);elementData.style=styleElem;return elementData};CVShapeElement.prototype.createGroupElement=function(data){var elementData={it:[],prevViewData:[]};return elementData};CVShapeElement.prototype.createTransformElement=function(data){var elementData={transform:{opacity:1,_opMdf:false,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,data.o,0,0.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,data,this)}};return elementData};CVShapeElement.prototype.createShapeElement=function(data){var elementData=new CVShapeData(this,data,this.stylesList,this.transformsManager);this.shapes.push(elementData);this.addShapeToModifiers(elementData);return elementData};CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=true;var i,len=this.itemsData.length;for(i=0;i<len;i+=1){this.prevViewData[i]=this.itemsData[i]}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,true,[]);len=this.dynamicProperties.length;for(i=0;i<len;i+=1){this.dynamicProperties[i].getValue()}this.renderModifiers();this.transformsManager.processSequences(this._isFirstFrame)};CVShapeElement.prototype.addTransformToStyleList=function(transform){var i,len=this.stylesList.length;for(i=0;i<len;i+=1){if(!this.stylesList[i].closed){this.stylesList[i].transforms.push(transform)}}};CVShapeElement.prototype.removeTransformFromStyleList=function(){var i,len=this.stylesList.length;for(i=0;i<len;i+=1){if(!this.stylesList[i].closed){this.stylesList[i].transforms.pop()}}};CVShapeElement.prototype.closeStyles=function(styles){var i,len=styles.length,j,jLen;for(i=0;i<len;i+=1){styles[i].closed=true}};CVShapeElement.prototype.searchShapes=function(arr,itemsData,prevViewData,shouldRender,transforms){var i,len=arr.length-1;var j,jLen;var ownStyles=[],ownModifiers=[],processedPos,modifier,currentTransform;var ownTransforms=[].concat(transforms);for(i=len;i>=0;i-=1){processedPos=this.searchProcessedElement(arr[i]);if(!processedPos){arr[i]._shouldRender=shouldRender}else{itemsData[i]=prevViewData[processedPos-1]}if(arr[i].ty=="fl"||arr[i].ty=="st"||arr[i].ty=="gf"||arr[i].ty=="gs"){if(!processedPos){itemsData[i]=this.createStyleElement(arr[i],ownTransforms)}else{itemsData[i].style.closed=false}ownStyles.push(itemsData[i].style)}else if(arr[i].ty=="gr"){if(!processedPos){itemsData[i]=this.createGroupElement(arr[i])}else{jLen=itemsData[i].it.length;for(j=0;j<jLen;j+=1){itemsData[i].prevViewData[j]=itemsData[i].it[j]}}this.searchShapes(arr[i].it,itemsData[i].it,itemsData[i].prevViewData,shouldRender,ownTransforms)}else if(arr[i].ty=="tr"){if(!processedPos){currentTransform=this.createTransformElement(arr[i]);itemsData[i]=currentTransform}ownTransforms.push(itemsData[i]);this.addTransformToStyleList(itemsData[i])}else if(arr[i].ty=="sh"||arr[i].ty=="rc"||arr[i].ty=="el"||arr[i].ty=="sr"){if(!processedPos){itemsData[i]=this.createShapeElement(arr[i])}}else if(arr[i].ty=="tm"||arr[i].ty=="rd"){if(!processedPos){modifier=ShapeModifiers.getModifier(arr[i].ty);modifier.init(this,arr[i]);itemsData[i]=modifier;this.shapeModifiers.push(modifier)}else{modifier=itemsData[i];modifier.closed=false}ownModifiers.push(modifier)}else if(arr[i].ty=="rp"){if(!processedPos){modifier=ShapeModifiers.getModifier(arr[i].ty);itemsData[i]=modifier;modifier.init(this,arr,i,itemsData);this.shapeModifiers.push(modifier);shouldRender=false}else{modifier=itemsData[i];modifier.closed=true}ownModifiers.push(modifier)}this.addProcessedElement(arr[i],i+1)}this.removeTransformFromStyleList();this.closeStyles(ownStyles);len=ownModifiers.length;for(i=0;i<len;i+=1){ownModifiers[i].closed=true}};CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1;this.transformHelper._opMdf=false;this.renderModifiers();this.transformsManager.processSequences(this._isFirstFrame);this.renderShape(this.transformHelper,this.shapesData,this.itemsData,true)};CVShapeElement.prototype.renderShapeTransform=function(parentTransform,groupTransform){var props,groupMatrix;if(parentTransform._opMdf||groupTransform.op._mdf||this._isFirstFrame){groupTransform.opacity=parentTransform.opacity;groupTransform.opacity*=groupTransform.op.v;groupTransform._opMdf=true}};CVShapeElement.prototype.drawLayer=function(){var i,len=this.stylesList.length;var j,jLen,k,kLen,elems,nodes,renderer=this.globalData.renderer,ctx=this.globalData.canvasContext,type,currentStyle;for(i=0;i<len;i+=1){currentStyle=this.stylesList[i];type=currentStyle.type;if((type==="st"||type==="gs")&&currentStyle.wi===0||!currentStyle.data._shouldRender||currentStyle.coOp===0||this.globalData.currentGlobalAlpha===0){continue}renderer.save();elems=currentStyle.elements;if(type==="st"||type==="gs"){ctx.strokeStyle=type==="st"?currentStyle.co:currentStyle.grd;ctx.lineWidth=currentStyle.wi;ctx.lineCap=currentStyle.lc;ctx.lineJoin=currentStyle.lj;ctx.miterLimit=currentStyle.ml||0}else{ctx.fillStyle=type==="fl"?currentStyle.co:currentStyle.grd}renderer.ctxOpacity(currentStyle.coOp);if(type!=="st"&&type!=="gs"){ctx.beginPath()}renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);jLen=elems.length;for(j=0;j<jLen;j+=1){if(type==="st"||type==="gs"){ctx.beginPath();if(currentStyle.da){ctx.setLineDash(currentStyle.da);ctx.lineDashOffset=currentStyle.do}}nodes=elems[j].trNodes;kLen=nodes.length;for(k=0;k<kLen;k+=1){if(nodes[k].t=="m"){ctx.moveTo(nodes[k].p[0],nodes[k].p[1])}else if(nodes[k].t=="c"){ctx.bezierCurveTo(nodes[k].pts[0],nodes[k].pts[1],nodes[k].pts[2],nodes[k].pts[3],nodes[k].pts[4],nodes[k].pts[5])}else{ctx.closePath()}}if(type==="st"||type==="gs"){ctx.stroke();if(currentStyle.da){ctx.setLineDash(this.dashResetter)}}}if(type!=="st"&&type!=="gs"){ctx.fill(currentStyle.r)}renderer.restore()}};CVShapeElement.prototype.renderShape=function(parentTransform,items,data,isMain){var i,len=items.length-1;var groupTransform;groupTransform=parentTransform;for(i=len;i>=0;i-=1){if(items[i].ty=="tr"){groupTransform=data[i].transform;this.renderShapeTransform(parentTransform,groupTransform)}else if(items[i].ty=="sh"||items[i].ty=="el"||items[i].ty=="rc"||items[i].ty=="sr"){this.renderPath(items[i],data[i])}else if(items[i].ty=="fl"){this.renderFill(items[i],data[i],groupTransform)}else if(items[i].ty=="st"){this.renderStroke(items[i],data[i],groupTransform)}else if(items[i].ty=="gf"||items[i].ty=="gs"){this.renderGradientFill(items[i],data[i],groupTransform)}else if(items[i].ty=="gr"){this.renderShape(groupTransform,items[i].it,data[i].it)}else if(items[i].ty=="tm"){}}if(isMain){this.drawLayer()}};CVShapeElement.prototype.renderStyledShape=function(styledShape,shape){if(this._isFirstFrame||shape._mdf||styledShape.transforms._mdf){var shapeNodes=styledShape.trNodes;var paths=shape.paths;var i,len,j,jLen=paths._length;shapeNodes.length=0;var groupTransformMat=styledShape.transforms.finalTransform;for(j=0;j<jLen;j+=1){var pathNodes=paths.shapes[j];if(pathNodes&&pathNodes.v){len=pathNodes._length;for(i=1;i<len;i+=1){if(i===1){shapeNodes.push({t:"m",p:groupTransformMat.applyToPointArray(pathNodes.v[0][0],pathNodes.v[0][1],0)})}shapeNodes.push({t:"c",pts:groupTransformMat.applyToTriplePoints(pathNodes.o[i-1],pathNodes.i[i],pathNodes.v[i])})}if(len===1){shapeNodes.push({t:"m",p:groupTransformMat.applyToPointArray(pathNodes.v[0][0],pathNodes.v[0][1],0)})}if(pathNodes.c&&len){shapeNodes.push({t:"c",pts:groupTransformMat.applyToTriplePoints(pathNodes.o[i-1],pathNodes.i[0],pathNodes.v[0])});shapeNodes.push({t:"z"})}}}styledShape.trNodes=shapeNodes}};CVShapeElement.prototype.renderPath=function(pathData,itemData){if(pathData.hd!==true&&pathData._shouldRender){var i,len=itemData.styledShapes.length;for(i=0;i<len;i+=1){this.renderStyledShape(itemData.styledShapes[i],itemData.sh)}}};CVShapeElement.prototype.renderFill=function(styleData,itemData,groupTransform){var styleElem=itemData.style;if(itemData.c._mdf||this._isFirstFrame){styleElem.co="rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"}if(itemData.o._mdf||groupTransform._opMdf||this._isFirstFrame){styleElem.coOp=itemData.o.v*groupTransform.opacity}};CVShapeElement.prototype.renderGradientFill=function(styleData,itemData,groupTransform){var styleElem=itemData.style;if(!styleElem.grd||itemData.g._mdf||itemData.s._mdf||itemData.e._mdf||styleData.t!==1&&(itemData.h._mdf||itemData.a._mdf)){var ctx=this.globalData.canvasContext;var grd;var pt1=itemData.s.v,pt2=itemData.e.v;if(styleData.t===1){grd=ctx.createLinearGradient(pt1[0],pt1[1],pt2[0],pt2[1])}else{var rad=Math.sqrt(Math.pow(pt1[0]-pt2[0],2)+Math.pow(pt1[1]-pt2[1],2));var ang=Math.atan2(pt2[1]-pt1[1],pt2[0]-pt1[0]);var percent=itemData.h.v>=1?0.99:itemData.h.v<=-1?-0.99:itemData.h.v;var dist=rad*percent;var x=Math.cos(ang+itemData.a.v)*dist+pt1[0];var y=Math.sin(ang+itemData.a.v)*dist+pt1[1];var grd=ctx.createRadialGradient(x,y,0,pt1[0],pt1[1],rad)}var i,len=styleData.g.p;var cValues=itemData.g.c;var opacity=1;for(i=0;i<len;i+=1){if(itemData.g._hasOpacity&&itemData.g._collapsable){opacity=itemData.g.o[i*2+1]}grd.addColorStop(cValues[i*4]/100,"rgba("+cValues[i*4+1]+","+cValues[i*4+2]+","+cValues[i*4+3]+","+opacity+")")}styleElem.grd=grd}styleElem.coOp=itemData.o.v*groupTransform.opacity};CVShapeElement.prototype.renderStroke=function(styleData,itemData,groupTransform){var styleElem=itemData.style;var d=itemData.d;if(d&&(d._mdf||this._isFirstFrame)){styleElem.da=d.dashArray;styleElem.do=d.dashoffset[0]}if(itemData.c._mdf||this._isFirstFrame){styleElem.co="rgb("+bm_floor(itemData.c.v[0])+","+bm_floor(itemData.c.v[1])+","+bm_floor(itemData.c.v[2])+")"}if(itemData.o._mdf||groupTransform._opMdf||this._isFirstFrame){styleElem.coOp=itemData.o.v*groupTransform.opacity}if(itemData.w._mdf||this._isFirstFrame){styleElem.wi=itemData.w.v}};CVShapeElement.prototype.destroy=function(){this.shapesData=null;this.globalData=null;this.canvasContext=null;this.stylesList.length=0;this.itemsData.length=0};function CVSolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement);CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement;CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame;CVSolidElement.prototype.renderInnerContent=function(){var ctx=this.canvasContext;ctx.fillStyle=this.data.sc;ctx.fillRect(0,0,this.data.sw,this.data.sh)};function CVTextElement(data,globalData,comp){this.textSpans=[];this.yOffset=0;this.fillColorAnim=false;this.strokeColorAnim=false;this.strokeWidthAnim=false;this.stroke=false;this.fill=false;this.justifyOffset=0;this.currentRender=null;this.renderType="canvas";this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""};this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement);CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d");CVTextElement.prototype.buildNewText=function(){var documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData.l?documentData.l.length:0);var hasFill=false;if(documentData.fc){hasFill=true;this.values.fill=this.buildColor(documentData.fc)}else{this.values.fill="rgba(0,0,0,0)"}this.fill=hasFill;var hasStroke=false;if(documentData.sc){hasStroke=true;this.values.stroke=this.buildColor(documentData.sc);this.values.sWidth=documentData.sw}var fontData=this.globalData.fontManager.getFontByName(documentData.f);var i,len;var letters=documentData.l;var matrixHelper=this.mHelper;this.stroke=hasStroke;this.values.fValue=documentData.finalSize+"px "+this.globalData.fontManager.getFontByName(documentData.f).fFamily;len=documentData.finalText.length;var charData,shapeData,k,kLen,shapes,j,jLen,pathNodes,commands,pathArr,singleShape=this.data.singleShape;var trackingOffset=documentData.tr/1000*documentData.finalSize;var xPos=0,yPos=0,firstLine=true;var cnt=0;for(i=0;i<len;i+=1){charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily);shapeData=charData&&charData.data||{};matrixHelper.reset();if(singleShape&&letters[i].n){xPos=-trackingOffset;yPos+=documentData.yOffset;yPos+=firstLine?1:0;firstLine=false}shapes=shapeData.shapes?shapeData.shapes[0].it:[];jLen=shapes.length;matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);if(singleShape){this.applyTextPropertiesToMatrix(documentData,matrixHelper,letters[i].line,xPos,yPos)}commands=createSizedArray(jLen);for(j=0;j<jLen;j+=1){kLen=shapes[j].ks.k.i.length;pathNodes=shapes[j].ks.k;pathArr=[];for(k=1;k<kLen;k+=1){if(k==1){pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0))}pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToY(pathNodes.i[k][0],pathNodes.i[k][1],0),matrixHelper.applyToX(pathNodes.v[k][0],pathNodes.v[k][1],0),matrixHelper.applyToY(pathNodes.v[k][0],pathNodes.v[k][1],0))}pathArr.push(matrixHelper.applyToX(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToY(pathNodes.o[k-1][0],pathNodes.o[k-1][1],0),matrixHelper.applyToX(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToY(pathNodes.i[0][0],pathNodes.i[0][1],0),matrixHelper.applyToX(pathNodes.v[0][0],pathNodes.v[0][1],0),matrixHelper.applyToY(pathNodes.v[0][0],pathNodes.v[0][1],0));commands[j]=pathArr}if(singleShape){xPos+=letters[i].l;xPos+=trackingOffset}if(this.textSpans[cnt]){this.textSpans[cnt].elem=commands}else{this.textSpans[cnt]={elem:commands}}cnt+=1}};CVTextElement.prototype.renderInnerContent=function(){var ctx=this.canvasContext;var finalMat=this.finalTransform.mat.props;ctx.font=this.values.fValue;ctx.lineCap="butt";ctx.lineJoin="miter";ctx.miterLimit=4;if(!this.data.singleShape){this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag)}var i,len,j,jLen,k,kLen;var renderedLetters=this.textAnimator.renderedLetters;var letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter;var lastFill=null,lastStroke=null,lastStrokeW=null,commands,pathArr;for(i=0;i<len;i+=1){if(letters[i].n){continue}renderedLetter=renderedLetters[i];if(renderedLetter){this.globalData.renderer.save();this.globalData.renderer.ctxTransform(renderedLetter.p);this.globalData.renderer.ctxOpacity(renderedLetter.o)}if(this.fill){if(renderedLetter&&renderedLetter.fc){if(lastFill!==renderedLetter.fc){lastFill=renderedLetter.fc;ctx.fillStyle=renderedLetter.fc}}else if(lastFill!==this.values.fill){lastFill=this.values.fill;ctx.fillStyle=this.values.fill}commands=this.textSpans[i].elem;jLen=commands.length;this.globalData.canvasContext.beginPath();for(j=0;j<jLen;j+=1){pathArr=commands[j];kLen=pathArr.length;this.globalData.canvasContext.moveTo(pathArr[0],pathArr[1]);for(k=2;k<kLen;k+=6){this.globalData.canvasContext.bezierCurveTo(pathArr[k],pathArr[k+1],pathArr[k+2],pathArr[k+3],pathArr[k+4],pathArr[k+5])}}this.globalData.canvasContext.closePath();this.globalData.canvasContext.fill()}if(this.stroke){if(renderedLetter&&renderedLetter.sw){if(lastStrokeW!==renderedLetter.sw){lastStrokeW=renderedLetter.sw;ctx.lineWidth=renderedLetter.sw}}else if(lastStrokeW!==this.values.sWidth){lastStrokeW=this.values.sWidth;ctx.lineWidth=this.values.sWidth}if(renderedLetter&&renderedLetter.sc){if(lastStroke!==renderedLetter.sc){lastStroke=renderedLetter.sc;ctx.strokeStyle=renderedLetter.sc}}else if(lastStroke!==this.values.stroke){lastStroke=this.values.stroke;ctx.strokeStyle=this.values.stroke}commands=this.textSpans[i].elem;jLen=commands.length;this.globalData.canvasContext.beginPath();for(j=0;j<jLen;j+=1){pathArr=commands[j];kLen=pathArr.length;this.globalData.canvasContext.moveTo(pathArr[0],pathArr[1]);for(k=2;k<kLen;k+=6){this.globalData.canvasContext.bezierCurveTo(pathArr[k],pathArr[k+1],pathArr[k+2],pathArr[k+3],pathArr[k+4],pathArr[k+5])}}this.globalData.canvasContext.closePath();this.globalData.canvasContext.stroke()}if(renderedLetter){this.globalData.renderer.restore()}}};function CVEffects(){}CVEffects.prototype.renderFrame=function(){};function HBaseElement(data,globalData,comp){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div");if(this.data.hasMask){this.svgElement=createNS("svg");this.layerElement=createNS("g");this.maskedElement=this.layerElement;this.svgElement.appendChild(this.layerElement);this.baseElement.appendChild(this.svgElement)}else{this.layerElement=this.baseElement}styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this);this.transformedElement=this.baseElement;this.maskedElement=this.layerElement;if(this.data.ln){this.layerElement.setAttribute("id",this.data.ln)}if(this.data.cl){this.layerElement.setAttribute("class",this.data.cl)}if(this.data.bm!==0){this.setBlendMode()}},renderElement:function(){if(this.finalTransform._matMdf){this.transformedElement.style.transform=this.transformedElement.style.webkitTransform=this.finalTransform.mat.toCSS()}if(this.finalTransform._opMdf){this.transformedElement.style.opacity=this.finalTransform.mProp.o.v}},renderFrame:function(){if(this.data.hd||this.hidden){return}this.renderTransform();this.renderRenderable();this.renderElement();this.renderInnerContent();if(this._isFirstFrame){this._isFirstFrame=false}},destroy:function(){this.layerElement=null;this.transformedElement=null;if(this.matteElement){this.matteElement=null}if(this.maskManager){this.maskManager.destroy();this.maskManager=null}},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}};HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement;HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy;HBaseElement.prototype.buildElementParenting=HybridRenderer.prototype.buildElementParenting;function HSolidElement(data,globalData,comp){this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement);HSolidElement.prototype.createContent=function(){var rect;if(this.data.hasMask){rect=createNS("rect");rect.setAttribute("width",this.data.sw);rect.setAttribute("height",this.data.sh);rect.setAttribute("fill",this.data.sc);this.svgElement.setAttribute("width",this.data.sw);this.svgElement.setAttribute("height",this.data.sh)}else{rect=createTag("div");rect.style.width=this.data.sw+"px";rect.style.height=this.data.sh+"px";rect.style.backgroundColor=this.data.sc}this.layerElement.appendChild(rect)};function HCompElement(data,globalData,comp){this.layers=data.layers;this.supports3d=!data.hasMask;this.completeLayers=false;this.pendingElements=[];this.elements=this.layers?createSizedArray(this.layers.length):[];this.initElement(data,globalData,comp);this.tm=data.tm?PropertyFactory.getProp(this,data.tm,0,globalData.frameRate,this):{_placeholder:true}}extendPrototype([HybridRenderer,ICompElement,HBaseElement],HCompElement);HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements;HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements();if(this.data.hasMask){this.svgElement.setAttribute("width",this.data.w);this.svgElement.setAttribute("height",this.data.h);this.transformedElement=this.baseElement}else{this.transformedElement=this.layerElement}};HCompElement.prototype.addTo3dContainer=function(elem,pos){var j=0;var nextElement;while(j<pos){if(this.elements[j]&&this.elements[j].getBaseElement){nextElement=this.elements[j].getBaseElement()}j+=1}if(nextElement){this.layerElement.insertBefore(elem,nextElement)}else{this.layerElement.appendChild(elem)}};function HShapeElement(data,globalData,comp){this.shapes=[];this.shapesData=data.shapes;this.stylesList=[];this.shapeModifiers=[];this.itemsData=[];this.processedElements=[];this.animatedContents=[];this.shapesContainer=createNS("g");this.initElement(data,globalData,comp);this.prevViewData=[];this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement);HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent;HShapeElement.prototype.createContent=function(){var cont;this.baseElement.style.fontSize=0;if(this.data.hasMask){this.layerElement.appendChild(this.shapesContainer);cont=this.svgElement}else{cont=createNS("svg");var size=this.comp.data?this.comp.data:this.globalData.compSize;cont.setAttribute("width",size.w);cont.setAttribute("height",size.h);cont.appendChild(this.shapesContainer);this.layerElement.appendChild(cont)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],true);this.filterUniqueShapes();this.shapeCont=cont};HShapeElement.prototype.getTransformedPoint=function(transformers,point){var i,len=transformers.length;for(i=0;i<len;i+=1){point=transformers[i].mProps.v.applyToPointArray(point[0],point[1],0)}return point};HShapeElement.prototype.calculateShapeBoundingBox=function(item,boundingBox){var shape=item.sh.v;var transformers=item.transformers;var i,len=shape._length,vPoint,oPoint,nextIPoint,nextVPoint,bounds;if(len<=1){return}for(i=0;i<len-1;i+=1){vPoint=this.getTransformedPoint(transformers,shape.v[i]);oPoint=this.getTransformedPoint(transformers,shape.o[i]);nextIPoint=this.getTransformedPoint(transformers,shape.i[i+1]);nextVPoint=this.getTransformedPoint(transformers,shape.v[i+1]);this.checkBounds(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox)}if(shape.c){vPoint=this.getTransformedPoint(transformers,shape.v[i]);oPoint=this.getTransformedPoint(transformers,shape.o[i]);nextIPoint=this.getTransformedPoint(transformers,shape.i[0]);nextVPoint=this.getTransformedPoint(transformers,shape.v[0]);this.checkBounds(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox)}};HShapeElement.prototype.checkBounds=function(vPoint,oPoint,nextIPoint,nextVPoint,boundingBox){this.getBoundsOfCurve(vPoint,oPoint,nextIPoint,nextVPoint);var bounds=this.shapeBoundingBox;boundingBox.x=bm_min(bounds.left,boundingBox.x);boundingBox.xMax=bm_max(bounds.right,boundingBox.xMax);boundingBox.y=bm_min(bounds.top,boundingBox.y);boundingBox.yMax=bm_max(bounds.bottom,boundingBox.yMax)};HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0};HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0};HShapeElement.prototype.getBoundsOfCurve=function(p0,p1,p2,p3){var bounds=[[p0[0],p3[0]],[p0[1],p3[1]]];for(var a,b,c,t,b2ac,t1,t2,i=0;i<2;++i){b=6*p0[i]-12*p1[i]+6*p2[i];a=-3*p0[i]+9*p1[i]-9*p2[i]+3*p3[i];c=3*p1[i]-3*p0[i];b=b|0;a=a|0;c=c|0;if(a===0){if(b===0){continue}t=-c/b;if(0<t&&t<1){bounds[i].push(this.calculateF(t,p0,p1,p2,p3,i))}continue}b2ac=b*b-4*c*a;if(b2ac<0){continue}t1=(-b+bm_sqrt(b2ac))/(2*a);if(0<t1&&t1<1)bounds[i].push(this.calculateF(t1,p0,p1,p2,p3,i));t2=(-b-bm_sqrt(b2ac))/(2*a);if(0<t2&&t2<1)bounds[i].push(this.calculateF(t2,p0,p1,p2,p3,i))}this.shapeBoundingBox.left=bm_min.apply(null,bounds[0]);this.shapeBoundingBox.top=bm_min.apply(null,bounds[1]);this.shapeBoundingBox.right=bm_max.apply(null,bounds[0]);this.shapeBoundingBox.bottom=bm_max.apply(null,bounds[1])};HShapeElement.prototype.calculateF=function(t,p0,p1,p2,p3,i){return bm_pow(1-t,3)*p0[i]+3*bm_pow(1-t,2)*t*p1[i]+3*(1-t)*bm_pow(t,2)*p2[i]+bm_pow(t,3)*p3[i]};HShapeElement.prototype.calculateBoundingBox=function(itemsData,boundingBox){var i,len=itemsData.length,path;for(i=0;i<len;i+=1){if(itemsData[i]&&itemsData[i].sh){this.calculateShapeBoundingBox(itemsData[i],boundingBox)}else if(itemsData[i]&&itemsData[i].it){this.calculateBoundingBox(itemsData[i].it,boundingBox)}}};HShapeElement.prototype.currentBoxContains=function(box){return this.currentBBox.x<=box.x&&this.currentBBox.y<=box.y&&this.currentBBox.width+this.currentBBox.x>=box.x+box.width&&this.currentBBox.height+this.currentBBox.y>=box.y+box.height};HShapeElement.prototype.renderInnerContent=function(){this._renderShapeFrame();if(!this.hidden&&(this._isFirstFrame||this._mdf)){var tempBoundingBox=this.tempBoundingBox;var max=999999;tempBoundingBox.x=max;tempBoundingBox.xMax=-max;tempBoundingBox.y=max;tempBoundingBox.yMax=-max;this.calculateBoundingBox(this.itemsData,tempBoundingBox);tempBoundingBox.width=tempBoundingBox.xMax<tempBoundingBox.x?0:tempBoundingBox.xMax-tempBoundingBox.x;tempBoundingBox.height=tempBoundingBox.yMax<tempBoundingBox.y?0:tempBoundingBox.yMax-tempBoundingBox.y;if(this.currentBoxContains(tempBoundingBox)){return}var changed=false;if(this.currentBBox.w!==tempBoundingBox.width){this.currentBBox.w=tempBoundingBox.width;this.shapeCont.setAttribute("width",tempBoundingBox.width);changed=true}if(this.currentBBox.h!==tempBoundingBox.height){this.currentBBox.h=tempBoundingBox.height;this.shapeCont.setAttribute("height",tempBoundingBox.height);changed=true}if(changed||this.currentBBox.x!==tempBoundingBox.x||this.currentBBox.y!==tempBoundingBox.y){this.currentBBox.w=tempBoundingBox.width;this.currentBBox.h=tempBoundingBox.height;this.currentBBox.x=tempBoundingBox.x;this.currentBBox.y=tempBoundingBox.y;this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);this.shapeCont.style.transform=this.shapeCont.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)"}}};function HTextElement(data,globalData,comp){this.textSpans=[];this.textPaths=[];this.currentBBox={x:999999,y:-999999,h:0,w:0};this.renderType="svg";this.isMasked=false;this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement);HTextElement.prototype.createContent=function(){this.isMasked=this.checkMasks();if(this.isMasked){this.renderType="svg";this.compW=this.comp.data.w;this.compH=this.comp.data.h;this.svgElement.setAttribute("width",this.compW);this.svgElement.setAttribute("height",this.compH);var g=createNS("g");this.maskedElement.appendChild(g);this.innerElem=g}else{this.renderType="html";this.innerElem=this.layerElement}this.checkParenting()};HTextElement.prototype.buildNewText=function(){var documentData=this.textProperty.currentData;this.renderedLetters=createSizedArray(documentData.l?documentData.l.length:0);var innerElemStyle=this.innerElem.style;innerElemStyle.color=innerElemStyle.fill=documentData.fc?this.buildColor(documentData.fc):"rgba(0,0,0,0)";if(documentData.sc){innerElemStyle.stroke=this.buildColor(documentData.sc);innerElemStyle.strokeWidth=documentData.sw+"px"}var fontData=this.globalData.fontManager.getFontByName(documentData.f);if(!this.globalData.fontManager.chars){innerElemStyle.fontSize=documentData.finalSize+"px";innerElemStyle.lineHeight=documentData.finalSize+"px";if(fontData.fClass){this.innerElem.className=fontData.fClass}else{innerElemStyle.fontFamily=fontData.fFamily;var fWeight=documentData.fWeight,fStyle=documentData.fStyle;innerElemStyle.fontStyle=fStyle;innerElemStyle.fontWeight=fWeight}}var i,len;var letters=documentData.l;len=letters.length;var tSpan,tParent,tCont;var matrixHelper=this.mHelper;var shapes,shapeStr="";var cnt=0;for(i=0;i<len;i+=1){if(this.globalData.fontManager.chars){if(!this.textPaths[cnt]){tSpan=createNS("path");tSpan.setAttribute("stroke-linecap","butt");tSpan.setAttribute("stroke-linejoin","round");tSpan.setAttribute("stroke-miterlimit","4")}else{tSpan=this.textPaths[cnt]}if(!this.isMasked){if(this.textSpans[cnt]){tParent=this.textSpans[cnt];tCont=tParent.children[0]}else{tParent=createTag("div");tCont=createNS("svg");tCont.appendChild(tSpan);styleDiv(tParent)}}}else{if(!this.isMasked){if(this.textSpans[cnt]){tParent=this.textSpans[cnt];tSpan=this.textPaths[cnt]}else{tParent=createTag("span");styleDiv(tParent);tSpan=createTag("span");styleDiv(tSpan);tParent.appendChild(tSpan)}}else{tSpan=this.textPaths[cnt]?this.textPaths[cnt]:createNS("text")}}if(this.globalData.fontManager.chars){var charData=this.globalData.fontManager.getCharData(documentData.finalText[i],fontData.fStyle,this.globalData.fontManager.getFontByName(documentData.f).fFamily);var shapeData;if(charData){shapeData=charData.data}else{shapeData=null}matrixHelper.reset();if(shapeData&&shapeData.shapes){shapes=shapeData.shapes[0].it;matrixHelper.scale(documentData.finalSize/100,documentData.finalSize/100);shapeStr=this.createPathShape(matrixHelper,shapes);tSpan.setAttribute("d",shapeStr)}if(!this.isMasked){this.innerElem.appendChild(tParent);if(shapeData&&shapeData.shapes){document.body.appendChild(tCont);var boundingBox=tCont.getBBox();tCont.setAttribute("width",boundingBox.width+2);tCont.setAttribute("height",boundingBox.height+2);tCont.setAttribute("viewBox",boundingBox.x-1+" "+(boundingBox.y-1)+" "+(boundingBox.width+2)+" "+(boundingBox.height+2));tCont.style.transform=tCont.style.webkitTransform="translate("+(boundingBox.x-1)+"px,"+(boundingBox.y-1)+"px)";letters[i].yOffset=boundingBox.y-1}else{tCont.setAttribute("width",1);tCont.setAttribute("height",1)}tParent.appendChild(tCont)}else{this.innerElem.appendChild(tSpan)}}else{tSpan.textContent=letters[i].val;tSpan.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve");if(!this.isMasked){this.innerElem.appendChild(tParent);tSpan.style.transform=tSpan.style.webkitTransform="translate3d(0,"+-documentData.finalSize/1.2+"px,0)"}else{this.innerElem.appendChild(tSpan)}}if(!this.isMasked){this.textSpans[cnt]=tParent}else{this.textSpans[cnt]=tSpan}this.textSpans[cnt].style.display="block";this.textPaths[cnt]=tSpan;cnt+=1}while(cnt<this.textSpans.length){this.textSpans[cnt].style.display="none";cnt+=1}};HTextElement.prototype.renderInnerContent=function(){if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag){return}else{if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH);this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)"}}}this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);if(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag){return}var i,len,count=0;var renderedLetters=this.textAnimator.renderedLetters;var letters=this.textProperty.currentData.l;len=letters.length;var renderedLetter,textSpan,textPath;for(i=0;i<len;i+=1){if(letters[i].n){count+=1;continue}textSpan=this.textSpans[i];textPath=this.textPaths[i];renderedLetter=renderedLetters[count];count+=1;if(renderedLetter._mdf.m){if(!this.isMasked){textSpan.style.transform=textSpan.style.webkitTransform=renderedLetter.m}else{textSpan.setAttribute("transform",renderedLetter.m)}}textSpan.style.opacity=renderedLetter.o;if(renderedLetter.sw&&renderedLetter._mdf.sw){textPath.setAttribute("stroke-width",renderedLetter.sw)}if(renderedLetter.sc&&renderedLetter._mdf.sc){textPath.setAttribute("stroke",renderedLetter.sc)}if(renderedLetter.fc&&renderedLetter._mdf.fc){textPath.setAttribute("fill",renderedLetter.fc);textPath.style.color=renderedLetter.fc}}if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var boundingBox=this.innerElem.getBBox();if(this.currentBBox.w!==boundingBox.width){this.currentBBox.w=boundingBox.width;this.svgElement.setAttribute("width",boundingBox.width)}if(this.currentBBox.h!==boundingBox.height){this.currentBBox.h=boundingBox.height;this.svgElement.setAttribute("height",boundingBox.height)}var margin=1;if(this.currentBBox.w!==boundingBox.width+margin*2||this.currentBBox.h!==boundingBox.height+margin*2||this.currentBBox.x!==boundingBox.x-margin||this.currentBBox.y!==boundingBox.y-margin){this.currentBBox.w=boundingBox.width+margin*2;this.currentBBox.h=boundingBox.height+margin*2;this.currentBBox.x=boundingBox.x-margin;this.currentBBox.y=boundingBox.y-margin;this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);this.svgElement.style.transform=this.svgElement.style.webkitTransform="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)"}}};function HImageElement(data,globalData,comp){this.assetData=globalData.getAssetData(data.refId);this.initElement(data,globalData,comp)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement);HImageElement.prototype.createContent=function(){var assetPath=this.globalData.getAssetsPath(this.assetData);var img=new Image;if(this.data.hasMask){this.imageElem=createNS("image");this.imageElem.setAttribute("width",this.assetData.w+"px");this.imageElem.setAttribute("height",this.assetData.h+"px");this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",assetPath);this.layerElement.appendChild(this.imageElem);this.baseElement.setAttribute("width",this.assetData.w);this.baseElement.setAttribute("height",this.assetData.h)}else{this.layerElement.appendChild(img)}img.src=assetPath;if(this.data.ln){this.baseElement.setAttribute("id",this.data.ln)}};function HCameraElement(data,globalData,comp){this.initFrame();this.initBaseData(data,globalData,comp);this.initHierarchy();var getProp=PropertyFactory.getProp;this.pe=getProp(this,data.pe,0,0,this);if(data.ks.p.s){this.px=getProp(this,data.ks.p.x,1,0,this);this.py=getProp(this,data.ks.p.y,1,0,this);this.pz=getProp(this,data.ks.p.z,1,0,this)}else{this.p=getProp(this,data.ks.p,1,0,this)}if(data.ks.a){this.a=getProp(this,data.ks.a,1,0,this)}if(data.ks.or.k.length&&data.ks.or.k[0].to){var i,len=data.ks.or.k.length;for(i=0;i<len;i+=1){data.ks.or.k[i].to=null;data.ks.or.k[i].ti=null}}this.or=getProp(this,data.ks.or,1,degToRads,this);this.or.sh=true;this.rx=getProp(this,data.ks.rx,0,degToRads,this);this.ry=getProp(this,data.ks.ry,0,degToRads,this);this.rz=getProp(this,data.ks.rz,0,degToRads,this);this.mat=new Matrix;this._prevMat=new Matrix;this._isFirstFrame=true;this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement);HCameraElement.prototype.setup=function(){var i,len=this.comp.threeDElements.length,comp;for(i=0;i<len;i+=1){comp=this.comp.threeDElements[i];if(comp.type==="3d"){comp.perspectiveElem.style.perspective=comp.perspectiveElem.style.webkitPerspective=this.pe.v+"px";comp.container.style.transformOrigin=comp.container.style.mozTransformOrigin=comp.container.style.webkitTransformOrigin="0px 0px 0px";comp.perspectiveElem.style.transform=comp.perspectiveElem.style.webkitTransform="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)"}}};HCameraElement.prototype.createElements=function(){};HCameraElement.prototype.hide=function(){};HCameraElement.prototype.renderFrame=function(){var _mdf=this._isFirstFrame;var i,len;if(this.hierarchy){len=this.hierarchy.length;for(i=0;i<len;i+=1){_mdf=this.hierarchy[i].finalTransform.mProp._mdf||_mdf}}if(_mdf||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){this.mat.reset();if(this.hierarchy){var mat;len=this.hierarchy.length-1;for(i=len;i>=0;i-=1){var mTransf=this.hierarchy[i].finalTransform.mProp;this.mat.translate(-mTransf.p.v[0],-mTransf.p.v[1],mTransf.p.v[2]);this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);this.mat.scale(1/mTransf.s.v[0],1/mTransf.s.v[1],1/mTransf.s.v[2]);this.mat.translate(mTransf.a.v[0],mTransf.a.v[1],mTransf.a.v[2])}}if(this.p){this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2])}else{this.mat.translate(-this.px.v,-this.py.v,this.pz.v)}if(this.a){var diffVector=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]];var mag=Math.sqrt(Math.pow(diffVector[0],2)+Math.pow(diffVector[1],2)+Math.pow(diffVector[2],2));var lookDir=[diffVector[0]/mag,diffVector[1]/mag,diffVector[2]/mag];var lookLengthOnXZ=Math.sqrt(lookDir[2]*lookDir[2]+lookDir[0]*lookDir[0]);var m_rotationX=Math.atan2(lookDir[1],lookLengthOnXZ);var m_rotationY=Math.atan2(lookDir[0],-lookDir[2]);this.mat.rotateY(m_rotationY).rotateX(-m_rotationX)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0);this.mat.translate(0,0,this.pe.v);var hasMatrixChanged=!this._prevMat.equals(this.mat);if((hasMatrixChanged||this.pe._mdf)&&this.comp.threeDElements){len=this.comp.threeDElements.length;var comp;for(i=0;i<len;i+=1){comp=this.comp.threeDElements[i];if(comp.type==="3d"){if(hasMatrixChanged){comp.container.style.transform=comp.container.style.webkitTransform=this.mat.toCSS()}if(this.pe._mdf){comp.perspectiveElem.style.perspective=comp.perspectiveElem.style.webkitPerspective=this.pe.v+"px"}}}this.mat.clone(this._prevMat)}}this._isFirstFrame=false};HCameraElement.prototype.prepareFrame=function(num){this.prepareProperties(num,true)};HCameraElement.prototype.destroy=function(){};HCameraElement.prototype.getBaseElement=function(){return null};function HEffects(){}HEffects.prototype.renderFrame=function(){};var animationManager=function(){var moduleOb={};var registeredAnimations=[];var initTime=0;var len=0;var playingAnimationsNum=0;var _stopped=true;var _isFrozen=false;function removeElement(ev){var i=0;var animItem=ev.target;while(i<len){if(registeredAnimations[i].animation===animItem){registeredAnimations.splice(i,1);i-=1;len-=1;if(!animItem.isPaused){subtractPlayingCount()}}i+=1}}function registerAnimation(element,animationData){if(!element){return null}var i=0;while(i<len){if(registeredAnimations[i].elem==element&&registeredAnimations[i].elem!==null){return registeredAnimations[i].animation}i+=1}var animItem=new AnimationItem;setupAnimation(animItem,element);animItem.setData(element,animationData);return animItem}function getRegisteredAnimations(){var i,len=registeredAnimations.length;var animations=[];for(i=0;i<len;i+=1){animations.push(registeredAnimations[i].animation)}return animations}function addPlayingCount(){playingAnimationsNum+=1;activate()}function subtractPlayingCount(){playingAnimationsNum-=1}function setupAnimation(animItem,element){animItem.addEventListener("destroy",removeElement);animItem.addEventListener("_active",addPlayingCount);animItem.addEventListener("_idle",subtractPlayingCount);registeredAnimations.push({elem:element,animation:animItem});len+=1}function loadAnimation(params){var animItem=new AnimationItem;setupAnimation(animItem,null);animItem.setParams(params);return animItem}function setSpeed(val,animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.setSpeed(val,animation)}}function setDirection(val,animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.setDirection(val,animation)}}function play(animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.play(animation)}}function resume(nowTime){var elapsedTime=nowTime-initTime;var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.advanceTime(elapsedTime)}initTime=nowTime;if(playingAnimationsNum&&!_isFrozen){window.requestAnimationFrame(resume)}else{_stopped=true}}function first(nowTime){initTime=nowTime;window.requestAnimationFrame(resume)}function pause(animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.pause(animation)}}function goToAndStop(value,isFrame,animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.goToAndStop(value,isFrame,animation)}}function stop(animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.stop(animation)}}function togglePause(animation){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.togglePause(animation)}}function destroy(animation){var i;for(i=len-1;i>=0;i-=1){registeredAnimations[i].animation.destroy(animation)}}function searchAnimations(animationData,standalone,renderer){var animElements=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin")));var i,len=animElements.length;for(i=0;i<len;i+=1){if(renderer){animElements[i].setAttribute("data-bm-type",renderer)}registerAnimation(animElements[i],animationData)}if(standalone&&len===0){if(!renderer){renderer="svg"}var body=document.getElementsByTagName("body")[0];body.innerHTML="";var div=createTag("div");div.style.width="100%";div.style.height="100%";div.setAttribute("data-bm-type",renderer);body.appendChild(div);registerAnimation(div,animationData)}}function resize(){var i;for(i=0;i<len;i+=1){registeredAnimations[i].animation.resize()}}function activate(){if(!_isFrozen&&playingAnimationsNum){if(_stopped){window.requestAnimationFrame(first);_stopped=false}}}function freeze(){_isFrozen=true}function unfreeze(){_isFrozen=false;activate()}moduleOb.registerAnimation=registerAnimation;moduleOb.loadAnimation=loadAnimation;moduleOb.setSpeed=setSpeed;moduleOb.setDirection=setDirection;moduleOb.play=play;moduleOb.pause=pause;moduleOb.stop=stop;moduleOb.togglePause=togglePause;moduleOb.searchAnimations=searchAnimations;moduleOb.resize=resize;moduleOb.goToAndStop=goToAndStop;moduleOb.destroy=destroy;moduleOb.freeze=freeze;moduleOb.unfreeze=unfreeze;moduleOb.getRegisteredAnimations=getRegisteredAnimations;return moduleOb}();var AnimationItem=function(){this._cbs=[];this.name="";this.path="";this.isLoaded=false;this.currentFrame=0;this.currentRawFrame=0;this.totalFrames=0;this.frameRate=0;this.frameMult=0;this.playSpeed=1;this.playDirection=1;this.playCount=0;this.animationData={};this.assets=[];this.isPaused=true;this.autoplay=false;this.loop=true;this.renderer=null;this.animationID=createElementID();this.assetsPath="";this.timeCompleted=0;this.segmentPos=0;this.subframeEnabled=subframeEnabled;this.segments=[];this._idle=true;this._completedLoop=false;this.projectInterface=ProjectInterface();this.imagePreloader=new ImagePreloader};extendPrototype([BaseEvent],AnimationItem);AnimationItem.prototype.setParams=function(params){if(params.context){this.context=params.context}if(params.wrapper||params.container){this.wrapper=params.wrapper||params.container}var animType=params.animType?params.animType:params.renderer?params.renderer:"svg";switch(animType){case"canvas":this.renderer=new CanvasRenderer(this,params.rendererSettings);break;case"svg":this.renderer=new SVGRenderer(this,params.rendererSettings);break;default:this.renderer=new HybridRenderer(this,params.rendererSettings);break;}this.renderer.setProjectInterface(this.projectInterface);this.animType=animType;if(params.loop===""||params.loop===null){}else if(params.loop===false){this.loop=false}else if(params.loop===true){this.loop=true}else{this.loop=parseInt(params.loop)}this.autoplay="autoplay"in params?params.autoplay:true;this.name=params.name?params.name:"";this.autoloadSegments=params.hasOwnProperty("autoloadSegments")?params.autoloadSegments:true;this.assetsPath=params.assetsPath;if(params.animationData){this.configAnimation(params.animationData)}else if(params.path){if(params.path.substr(-4)!="json"){if(params.path.substr(-1,1)!="/"){params.path+="/"}params.path+="data.json"}if(params.path.lastIndexOf("\\")!=-1){this.path=params.path.substr(0,params.path.lastIndexOf("\\")+1)}else{this.path=params.path.substr(0,params.path.lastIndexOf("/")+1)}this.fileName=params.path.substr(params.path.lastIndexOf("/")+1);this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json"));assetLoader.load(params.path,this.configAnimation.bind(this),function(){this.trigger("data_failed")}.bind(this))}};AnimationItem.prototype.setData=function(wrapper,animationData){var params={wrapper:wrapper,animationData:animationData?typeof animationData==="object"?animationData:JSON.parse(animationData):null};var wrapperAttributes=wrapper.attributes;params.path=wrapperAttributes.getNamedItem("data-animation-path")?wrapperAttributes.getNamedItem("data-animation-path").value:wrapperAttributes.getNamedItem("data-bm-path")?wrapperAttributes.getNamedItem("data-bm-path").value:wrapperAttributes.getNamedItem("bm-path")?wrapperAttributes.getNamedItem("bm-path").value:"";params.animType=wrapperAttributes.getNamedItem("data-anim-type")?wrapperAttributes.getNamedItem("data-anim-type").value:wrapperAttributes.getNamedItem("data-bm-type")?wrapperAttributes.getNamedItem("data-bm-type").value:wrapperAttributes.getNamedItem("bm-type")?wrapperAttributes.getNamedItem("bm-type").value:wrapperAttributes.getNamedItem("data-bm-renderer")?wrapperAttributes.getNamedItem("data-bm-renderer").value:wrapperAttributes.getNamedItem("bm-renderer")?wrapperAttributes.getNamedItem("bm-renderer").value:"canvas";var loop=wrapperAttributes.getNamedItem("data-anim-loop")?wrapperAttributes.getNamedItem("data-anim-loop").value:wrapperAttributes.getNamedItem("data-bm-loop")?wrapperAttributes.getNamedItem("data-bm-loop").value:wrapperAttributes.getNamedItem("bm-loop")?wrapperAttributes.getNamedItem("bm-loop").value:"";if(loop===""){}else if(loop==="false"){params.loop=false}else if(loop==="true"){params.loop=true}else{params.loop=parseInt(loop)}var autoplay=wrapperAttributes.getNamedItem("data-anim-autoplay")?wrapperAttributes.getNamedItem("data-anim-autoplay").value:wrapperAttributes.getNamedItem("data-bm-autoplay")?wrapperAttributes.getNamedItem("data-bm-autoplay").value:wrapperAttributes.getNamedItem("bm-autoplay")?wrapperAttributes.getNamedItem("bm-autoplay").value:true;params.autoplay=autoplay!=="false";params.name=wrapperAttributes.getNamedItem("data-name")?wrapperAttributes.getNamedItem("data-name").value:wrapperAttributes.getNamedItem("data-bm-name")?wrapperAttributes.getNamedItem("data-bm-name").value:wrapperAttributes.getNamedItem("bm-name")?wrapperAttributes.getNamedItem("bm-name").value:"";var prerender=wrapperAttributes.getNamedItem("data-anim-prerender")?wrapperAttributes.getNamedItem("data-anim-prerender").value:wrapperAttributes.getNamedItem("data-bm-prerender")?wrapperAttributes.getNamedItem("data-bm-prerender").value:wrapperAttributes.getNamedItem("bm-prerender")?wrapperAttributes.getNamedItem("bm-prerender").value:"";if(prerender==="false"){params.prerender=false}this.setParams(params)};AnimationItem.prototype.includeLayers=function(data){if(data.op>this.animationData.op){this.animationData.op=data.op;this.totalFrames=Math.floor(data.op-this.animationData.ip)}var layers=this.animationData.layers;var i,len=layers.length;var newLayers=data.layers;var j,jLen=newLayers.length;for(j=0;j<jLen;j+=1){i=0;while(i<len){if(layers[i].id==newLayers[j].id){layers[i]=newLayers[j];break}i+=1}}if(data.chars||data.fonts){this.renderer.globalData.fontManager.addChars(data.chars);this.renderer.globalData.fontManager.addFonts(data.fonts,this.renderer.globalData.defs)}if(data.assets){len=data.assets.length;for(i=0;i<len;i+=1){this.animationData.assets.push(data.assets[i])}}this.animationData.__complete=false;dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);this.renderer.includeLayers(data.layers);if(expressionsPlugin){expressionsPlugin.initExpressions(this)}this.loadNextSegment()};AnimationItem.prototype.loadNextSegment=function(){var segments=this.animationData.segments;if(!segments||segments.length===0||!this.autoloadSegments){this.trigger("data_ready");this.timeCompleted=this.totalFrames;return}var segment=segments.shift();this.timeCompleted=segment.time*this.frameRate;var segmentPath=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1;assetLoader.load(segmentPath,this.includeLayers.bind(this),function(){this.trigger("data_failed")}.bind(this))};AnimationItem.prototype.loadSegments=function(){var segments=this.animationData.segments;if(!segments){this.timeCompleted=this.totalFrames}this.loadNextSegment()};AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images");this.checkLoaded()};AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath);this.imagePreloader.setPath(this.path);this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))};AnimationItem.prototype.configAnimation=function(animData){if(!this.renderer){return}this.animationData=animData;this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip);this.renderer.configAnimation(animData);if(!animData.assets){animData.assets=[]}this.renderer.searchExtraCompositions(animData.assets);this.assets=this.animationData.assets;this.frameRate=this.animationData.fr;this.firstFrame=Math.round(this.animationData.ip);this.frameMult=this.animationData.fr/1000;this.trigger("config_ready");this.preloadImages();this.loadSegments();this.updaFrameModifier();this.waitForFontsLoaded()};AnimationItem.prototype.waitForFontsLoaded=function(){if(!this.renderer){return}if(this.renderer.globalData.fontManager.loaded()){this.checkLoaded()}else{setTimeout(this.waitForFontsLoaded.bind(this),20)}};AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.loaded()&&(this.imagePreloader.loaded()||this.renderer.rendererType!=="canvas")){this.isLoaded=true;dataManager.completeData(this.animationData,this.renderer.globalData.fontManager);if(expressionsPlugin){expressionsPlugin.initExpressions(this)}this.renderer.initItems();setTimeout(function(){this.trigger("DOMLoaded")}.bind(this),0);this.gotoFrame();if(this.autoplay){this.play()}}};AnimationItem.prototype.resize=function(){this.renderer.updateContainerSize()};AnimationItem.prototype.setSubframe=function(flag){this.subframeEnabled=flag?true:false};AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.subframeEnabled?this.currentRawFrame:~~this.currentRawFrame;if(this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted){this.currentFrame=this.timeCompleted}this.trigger("enterFrame");this.renderFrame()};AnimationItem.prototype.renderFrame=function(){if(this.isLoaded===false){return}this.renderer.renderFrame(this.currentFrame+this.firstFrame)};AnimationItem.prototype.play=function(name){if(name&&this.name!=name){return}if(this.isPaused===true){this.isPaused=false;if(this._idle){this._idle=false;this.trigger("_active")}}};AnimationItem.prototype.pause=function(name){if(name&&this.name!=name){return}if(this.isPaused===false){this.isPaused=true;this._idle=true;this.trigger("_idle")}};AnimationItem.prototype.togglePause=function(name){if(name&&this.name!=name){return}if(this.isPaused===true){this.play()}else{this.pause()}};AnimationItem.prototype.stop=function(name){if(name&&this.name!=name){return}this.pause();this.playCount=0;this._completedLoop=false;this.setCurrentRawFrameValue(0)};AnimationItem.prototype.goToAndStop=function(value,isFrame,name){if(name&&this.name!=name){return}if(isFrame){this.setCurrentRawFrameValue(value)}else{this.setCurrentRawFrameValue(value*this.frameModifier)}this.pause()};AnimationItem.prototype.goToAndPlay=function(value,isFrame,name){this.goToAndStop(value,isFrame,name);this.play()};AnimationItem.prototype.advanceTime=function(value){if(this.isPaused===true||this.isLoaded===false){return}var nextValue=this.currentRawFrame+value*this.frameModifier;var _isComplete=false;if(nextValue>=this.totalFrames-1&&this.frameModifier>0){if(!this.loop||this.playCount===this.loop){if(!this.checkSegments(nextValue>this.totalFrames?nextValue%this.totalFrames:0)){_isComplete=true;nextValue=this.totalFrames-1}}else if(nextValue>=this.totalFrames){this.playCount+=1;if(!this.checkSegments(nextValue%this.totalFrames)){this.setCurrentRawFrameValue(nextValue%this.totalFrames);this._completedLoop=true;this.trigger("loopComplete")}}else{this.setCurrentRawFrameValue(nextValue)}}else if(nextValue<0){if(!this.checkSegments(nextValue%this.totalFrames)){if(this.loop&&!(this.playCount--<=0&&this.loop!==true)){this.setCurrentRawFrameValue(this.totalFrames+nextValue%this.totalFrames);if(!this._completedLoop){this._completedLoop=true}else{this.trigger("loopComplete")}}else{_isComplete=true;nextValue=0}}}else{this.setCurrentRawFrameValue(nextValue)}if(_isComplete){this.setCurrentRawFrameValue(nextValue);this.pause();this.trigger("complete")}};AnimationItem.prototype.adjustSegment=function(arr,offset){this.playCount=0;if(arr[1]<arr[0]){if(this.frameModifier>0){if(this.playSpeed<0){this.setSpeed(-this.playSpeed)}else{this.setDirection(-1)}}this.timeCompleted=this.totalFrames=arr[0]-arr[1];this.firstFrame=arr[1];this.setCurrentRawFrameValue(this.totalFrames-0.001-offset)}else if(arr[1]>arr[0]){if(this.frameModifier<0){if(this.playSpeed<0){this.setSpeed(-this.playSpeed)}else{this.setDirection(1)}}this.timeCompleted=this.totalFrames=arr[1]-arr[0];this.firstFrame=arr[0];this.setCurrentRawFrameValue(0.001+offset)}this.trigger("segmentStart")};AnimationItem.prototype.setSegment=function(init,end){var pendingFrame=-1;if(this.isPaused){if(this.currentRawFrame+this.firstFrame<init){pendingFrame=init}else if(this.currentRawFrame+this.firstFrame>end){pendingFrame=end-init}}this.firstFrame=init;this.timeCompleted=this.totalFrames=end-init;if(pendingFrame!==-1){this.goToAndStop(pendingFrame,true)}};AnimationItem.prototype.playSegments=function(arr,forceFlag){if(forceFlag){this.segments.length=0}if(typeof arr[0]==="object"){var i,len=arr.length;for(i=0;i<len;i+=1){this.segments.push(arr[i])}}else{this.segments.push(arr)}if(this.segments.length&&forceFlag){this.adjustSegment(this.segments.shift(),0)}if(this.isPaused){this.play()}};AnimationItem.prototype.resetSegments=function(forceFlag){this.segments.length=0;this.segments.push([this.animationData.ip,this.animationData.op]);if(forceFlag){this.checkSegments(0)}};AnimationItem.prototype.checkSegments=function(offset){if(this.segments.length){this.adjustSegment(this.segments.shift(),offset);return true}return false};AnimationItem.prototype.destroy=function(name){if(name&&this.name!=name||!this.renderer){return}this.renderer.destroy();this.imagePreloader.destroy();this.trigger("destroy");this._cbs=null;this.onEnterFrame=this.onLoopComplete=this.onComplete=this.onSegmentStart=this.onDestroy=null;this.renderer=null};AnimationItem.prototype.setCurrentRawFrameValue=function(value){this.currentRawFrame=value;this.gotoFrame()};AnimationItem.prototype.setSpeed=function(val){this.playSpeed=val;this.updaFrameModifier()};AnimationItem.prototype.setDirection=function(val){this.playDirection=val<0?-1:1;this.updaFrameModifier()};AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection};AnimationItem.prototype.getPath=function(){return this.path};AnimationItem.prototype.getAssetsPath=function(assetData){var path="";if(assetData.e){path=assetData.p}else if(this.assetsPath){var imagePath=assetData.p;if(imagePath.indexOf("images/")!==-1){imagePath=imagePath.split("/")[1]}path=this.assetsPath+imagePath}else{path=this.path;path+=assetData.u?assetData.u:"";path+=assetData.p}return path};AnimationItem.prototype.getAssetData=function(id){var i=0,len=this.assets.length;while(i<len){if(id==this.assets[i].id){return this.assets[i]}i+=1}};AnimationItem.prototype.hide=function(){this.renderer.hide()};AnimationItem.prototype.show=function(){this.renderer.show()};AnimationItem.prototype.getDuration=function(isFrame){return isFrame?this.totalFrames:this.totalFrames/this.frameRate};AnimationItem.prototype.trigger=function(name){if(this._cbs&&this._cbs[name]){switch(name){case"enterFrame":this.triggerEvent(name,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameModifier));break;case"loopComplete":this.triggerEvent(name,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(name,new BMCompleteEvent(name,this.frameMult));break;case"segmentStart":this.triggerEvent(name,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(name,new BMDestroyEvent(name,this));break;default:this.triggerEvent(name);}}if(name==="enterFrame"&&this.onEnterFrame){this.onEnterFrame.call(this,new BMEnterFrameEvent(name,this.currentFrame,this.totalFrames,this.frameMult))}if(name==="loopComplete"&&this.onLoopComplete){this.onLoopComplete.call(this,new BMCompleteLoopEvent(name,this.loop,this.playCount,this.frameMult))}if(name==="complete"&&this.onComplete){this.onComplete.call(this,new BMCompleteEvent(name,this.frameMult))}if(name==="segmentStart"&&this.onSegmentStart){this.onSegmentStart.call(this,new BMSegmentStartEvent(name,this.firstFrame,this.totalFrames))}if(name==="destroy"&&this.onDestroy){this.onDestroy.call(this,new BMDestroyEvent(name,this))}};var Expressions=function(){var ob={};ob.initExpressions=initExpressions;function initExpressions(animation){var stackCount=0;var registers=[];function pushExpression(){stackCount+=1}function popExpression(){stackCount-=1;if(stackCount===0){releaseInstances()}}function registerExpressionProperty(expression){if(registers.indexOf(expression)===-1){registers.push(expression)}}function releaseInstances(){var i,len=registers.length;for(i=0;i<len;i+=1){registers[i].release()}registers.length=0}animation.renderer.compInterface=CompExpressionInterface(animation.renderer);animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);animation.renderer.globalData.pushExpression=pushExpression;animation.renderer.globalData.popExpression=popExpression;animation.renderer.globalData.registerExpressionProperty=registerExpressionProperty}return ob}();expressionsPlugin=Expressions;var ExpressionManager=function(){"use strict";var ob={};var Math=BMMath;var window=null;var document=null;function $bm_isInstanceOfArray(arr){return arr.constructor===Array||arr.constructor===Float32Array}function isNumerable(tOfV,v){return tOfV==="number"||tOfV==="boolean"||tOfV==="string"||v instanceof Number}function $bm_neg(a){var tOfA=typeof a;if(tOfA==="number"||tOfA==="boolean"||a instanceof Number){return-a}if($bm_isInstanceOfArray(a)){var i,lenA=a.length;var retArr=[];for(i=0;i<lenA;i+=1){retArr[i]=-a[i]}return retArr}if(a.propType){return a.v}}var easeInBez=BezierFactory.getBezierEasing(0.333,0,.833,.833,"easeIn").get;var easeOutBez=BezierFactory.getBezierEasing(0.167,0.167,.667,1,"easeOut").get;var easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(a,b){var tOfA=typeof a;var tOfB=typeof b;if(tOfA==="string"||tOfB==="string"){return a+b}if(isNumerable(tOfA,a)&&isNumerable(tOfB,b)){return a+b}if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){a=a.slice(0);a[0]=a[0]+b;return a}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){b=b.slice(0);b[0]=a+b[0];return b}if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){var i=0,lenA=a.length,lenB=b.length;var retArr=[];while(i<lenA||i<lenB){if((typeof a[i]==="number"||a[i]instanceof Number)&&(typeof b[i]==="number"||b[i]instanceof Number)){retArr[i]=a[i]+b[i]}else{retArr[i]=b[i]===undefined?a[i]:a[i]||b[i]}i+=1}return retArr}return 0}var add=sum;function sub(a,b){var tOfA=typeof a;var tOfB=typeof b;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b)){if(tOfA==="string"){a=parseInt(a)}if(tOfB==="string"){b=parseInt(b)}return a-b}if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){a=a.slice(0);a[0]=a[0]-b;return a}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){b=b.slice(0);b[0]=a-b[0];return b}if($bm_isInstanceOfArray(a)&&$bm_isInstanceOfArray(b)){var i=0,lenA=a.length,lenB=b.length;var retArr=[];while(i<lenA||i<lenB){if((typeof a[i]==="number"||a[i]instanceof Number)&&(typeof b[i]==="number"||b[i]instanceof Number)){retArr[i]=a[i]-b[i]}else{retArr[i]=b[i]===undefined?a[i]:a[i]||b[i]}i+=1}return retArr}return 0}function mul(a,b){var tOfA=typeof a;var tOfB=typeof b;var arr;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b)){return a*b}var i,len;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){len=a.length;arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=a[i]*b}return arr}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){len=b.length;arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=a*b[i]}return arr}return 0}function div(a,b){var tOfA=typeof a;var tOfB=typeof b;var arr;if(isNumerable(tOfA,a)&&isNumerable(tOfB,b)){return a/b}var i,len;if($bm_isInstanceOfArray(a)&&isNumerable(tOfB,b)){len=a.length;arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=a[i]/b}return arr}if(isNumerable(tOfA,a)&&$bm_isInstanceOfArray(b)){len=b.length;arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=a/b[i]}return arr}return 0}function mod(a,b){if(typeof a==="string"){a=parseInt(a)}if(typeof b==="string"){b=parseInt(b)}return a%b}var $bm_sum=sum;var $bm_sub=sub;var $bm_mul=mul;var $bm_div=div;var $bm_mod=mod;function clamp(num,min,max){if(min>max){var mm=max;max=min;min=mm}return Math.min(Math.max(num,min),max)}function radiansToDegrees(val){return val/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(val){return val*degToRads}var degrees_to_radians=radiansToDegrees;var helperLengthArray=[0,0,0,0,0,0];function length(arr1,arr2){if(typeof arr1==="number"||arr1 instanceof Number){arr2=arr2||0;return Math.abs(arr1-arr2)}if(!arr2){arr2=helperLengthArray}var i,len=Math.min(arr1.length,arr2.length);var addedLength=0;for(i=0;i<len;i+=1){addedLength+=Math.pow(arr2[i]-arr1[i],2)}return Math.sqrt(addedLength)}function normalize(vec){return div(vec,length(vec))}function rgbToHsl(val){var r=val[0];var g=val[1];var b=val[2];var max=Math.max(r,g,b),min=Math.min(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0}else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}h/=6}return[h,s,l,val[3]]}function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p}function hslToRgb(val){var h=val[0];var s=val[1];var l=val[2];var r,g,b;if(s===0){r=g=b=l}else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3)}return[r,g,b,val[3]]}function linear(t,tMin,tMax,value1,value2){if(value1===undefined||value2===undefined){value1=tMin;value2=tMax;tMin=0;tMax=1}if(tMax<tMin){var _tMin=tMax;tMax=tMin;tMin=_tMin}if(t<=tMin){return value1}else if(t>=tMax){return value2}var perc=tMax===tMin?0:(t-tMin)/(tMax-tMin);if(!value1.length){return value1+(value2-value1)*perc}var i,len=value1.length;var arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=value1[i]+(value2[i]-value1[i])*perc}return arr}function random(min,max){if(max===undefined){if(min===undefined){min=0;max=1}else{max=min;min=undefined}}if(max.length){var i,len=max.length;if(!min){min=createTypedArray("float32",len)}var arr=createTypedArray("float32",len);var rnd=BMMath.random();for(i=0;i<len;i+=1){arr[i]=min[i]+rnd*(max[i]-min[i])}return arr}if(min===undefined){min=0}var rndm=BMMath.random();return min+rndm*(max-min)}function createPath(points,inTangents,outTangents,closed){var i,len=points.length;var path=shape_pool.newElement();path.setPathData(!!closed,len);var arrPlaceholder=[0,0],inVertexPoint,outVertexPoint;for(i=0;i<len;i+=1){inVertexPoint=inTangents&&inTangents[i]?inTangents[i]:arrPlaceholder;outVertexPoint=outTangents&&outTangents[i]?outTangents[i]:arrPlaceholder;path.setTripleAt(points[i][0],points[i][1],outVertexPoint[0]+points[i][0],outVertexPoint[1]+points[i][1],inVertexPoint[0]+points[i][0],inVertexPoint[1]+points[i][1],i,true)}return path}function initiateExpression(elem,data,property){var val=data.x;var needsVelocity=/velocity(?![\w\d])/.test(val);var _needsRandom=val.indexOf("random")!==-1;var elemType=elem.data.ty;var transform,$bm_transform,content,effect;var thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime;Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}});elem.comp.frameDuration=1/elem.comp.globalData.frameRate;elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate;var outPoint=elem.data.op/elem.comp.globalData.frameRate;var width=elem.data.sw?elem.data.sw:0;var height=elem.data.sh?elem.data.sh:0;var name=elem.data.nm;var loopIn,loop_in,loopOut,loop_out,smooth;var toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime;var __expression_functions=[];if(data.xf){var i,len=data.xf.length;for(i=0;i<len;i+=1){__expression_functions[i]=eval("(function(){ return "+data.xf[i]+"}())")}}var scoped_bm_rt;var expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}"+"]")[0];var numKeys=property.kf?data.k.length:0;var active=!this.data||this.data.hd!==true;var wiggle=function wiggle(freq,amp){var i,j,len=this.pv.length?this.pv.length:1;var addedAmps=createTypedArray("float32",len);freq=5;var iterations=Math.floor(time*freq);i=0;j=0;while(i<iterations){for(j=0;j<len;j+=1){addedAmps[j]+=-amp+amp*2*BMMath.random()}i+=1}var periods=time*freq;var perc=periods-Math.floor(periods);var arr=createTypedArray("float32",len);if(len>1){for(j=0;j<len;j+=1){arr[j]=this.pv[j]+addedAmps[j]+(-amp+amp*2*BMMath.random())*perc}return arr}else{return this.pv+addedAmps[0]+(-amp+amp*2*BMMath.random())*perc}}.bind(this);if(thisProperty.loopIn){loopIn=thisProperty.loopIn.bind(thisProperty);loop_in=loopIn}if(thisProperty.loopOut){loopOut=thisProperty.loopOut.bind(thisProperty);loop_out=loopOut}if(thisProperty.smooth){smooth=thisProperty.smooth.bind(thisProperty)}function loopInDuration(type,duration){return loopIn(type,duration,true)}function loopOutDuration(type,duration){return loopOut(type,duration,true)}if(this.getValueAtTime){valueAtTime=this.getValueAtTime.bind(this)}if(this.getVelocityAtTime){velocityAtTime=this.getVelocityAtTime.bind(this)}var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(elem1,elem2){var fVec=[elem2[0]-elem1[0],elem2[1]-elem1[1],elem2[2]-elem1[2]];var pitch=Math.atan2(fVec[0],Math.sqrt(fVec[1]*fVec[1]+fVec[2]*fVec[2]))/degToRads;var yaw=-Math.atan2(fVec[1],fVec[2])/degToRads;return[yaw,pitch,0]}function easeOut(t,tMin,tMax,val1,val2){return applyEase(easeOutBez,t,tMin,tMax,val1,val2)}function easeIn(t,tMin,tMax,val1,val2){return applyEase(easeInBez,t,tMin,tMax,val1,val2)}function ease(t,tMin,tMax,val1,val2){return applyEase(easeInOutBez,t,tMin,tMax,val1,val2)}function applyEase(fn,t,tMin,tMax,val1,val2){if(val1===undefined){val1=tMin;val2=tMax}else{t=(t-tMin)/(tMax-tMin)}t=t>1?1:t<0?0:t;var mult=fn(t);if($bm_isInstanceOfArray(val1)){var i,len=val1.length;var arr=createTypedArray("float32",len);for(i=0;i<len;i+=1){arr[i]=(val2[i]-val1[i])*mult+val1[i]}return arr}else{return(val2-val1)*mult+val1}}function nearestKey(time){var i,len=data.k.length,index,keyTime;if(!data.k.length||typeof data.k[0]==="number"){index=0;keyTime=0}else{index=-1;time*=elem.comp.globalData.frameRate;if(time<data.k[0].t){index=1;keyTime=data.k[0].t}else{for(i=0;i<len-1;i+=1){if(time===data.k[i].t){index=i+1;keyTime=data.k[i].t;break}else if(time>data.k[i].t&&time<data.k[i+1].t){if(time-data.k[i].t>data.k[i+1].t-time){index=i+2;keyTime=data.k[i+1].t}else{index=i+1;keyTime=data.k[i].t}break}}if(index===-1){index=i+1;keyTime=data.k[i].t}}}var ob={};ob.index=index;ob.time=keyTime/elem.comp.globalData.frameRate;return ob}function key(ind){var ob,i,len;if(!data.k.length||typeof data.k[0]==="number"){throw new Error("The property has no keyframe at index "+ind)}ind-=1;ob={time:data.k[ind].t/elem.comp.globalData.frameRate,value:[]};var arr;if(ind===data.k.length-1&&!data.k[ind].h){arr=data.k[ind].s||data.k[ind].s===0?data.k[ind-1].s:data.k[ind].e}else{arr=data.k[ind].s}len=arr.length;for(i=0;i<len;i+=1){ob[i]=arr[i];ob.value[i]=arr[i]}return ob}function framesToTime(frames,fps){if(!fps){fps=elem.comp.globalData.frameRate}return frames/fps}function timeToFrames(t,fps){if(!t&&t!==0){t=time}if(!fps){fps=elem.comp.globalData.frameRate}return t*fps}function seedRandom(seed){BMMath.seedrandom(randSeed+seed)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(init,end){if(typeof value==="string"){if(end===undefined){return value.substring(init)}return value.substring(init,end)}return""}function substr(init,end){if(typeof value==="string"){if(end===undefined){return value.substr(init)}return value.substr(init,end)}return""}var time,velocity,value,text,textIndex,textTotal,selectorValue;var index=elem.data.ind;var hasParent=!!(elem.hierarchy&&elem.hierarchy.length);var parent;var randSeed=Math.floor(Math.random()*1000000);var globalData=elem.globalData;function executeExpression(_value){value=_value;if(_needsRandom){seedRandom(randSeed)}if(this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"){return value}if(this.propType==="textSelector"){textIndex=this.textIndex;textTotal=this.textTotal;selectorValue=this.selectorValue}if(!thisLayer){text=elem.layerInterface.text;thisLayer=elem.layerInterface;thisComp=elem.comp.compInterface;toWorld=thisLayer.toWorld.bind(thisLayer);fromWorld=thisLayer.fromWorld.bind(thisLayer);fromComp=thisLayer.fromComp.bind(thisLayer);toComp=thisLayer.toComp.bind(thisLayer);mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null;fromCompToSurface=fromComp}if(!transform){transform=elem.layerInterface("ADBE Transform Group");$bm_transform=transform;if(transform){anchorPoint=transform.anchorPoint}}if(elemType===4&&!content){content=thisLayer("ADBE Root Vectors Group")}if(!effect){effect=thisLayer(4)}hasParent=!!(elem.hierarchy&&elem.hierarchy.length);if(hasParent&&!parent){parent=elem.hierarchy[0].layerInterface}time=this.comp.renderedFrame/this.comp.globalData.frameRate;if(needsVelocity){velocity=velocityAtTime(time)}expression_function();this.frameExpressionId=elem.globalData.frameId;if(scoped_bm_rt.propType==="shape"){scoped_bm_rt=scoped_bm_rt.v}return scoped_bm_rt}return executeExpression}ob.initiateExpression=initiateExpression;return ob}();var expressionHelpers=function(){function searchExpressions(elem,data,prop){if(data.x){prop.k=true;prop.x=true;prop.initiateExpression=ExpressionManager.initiateExpression;prop.effectsSequence.push(prop.initiateExpression(elem,data,prop).bind(prop))}}function getValueAtTime(frameNum){frameNum*=this.elem.globalData.frameRate;frameNum-=this.offsetTime;if(frameNum!==this._cachingAtTime.lastFrame){this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<frameNum?this._cachingAtTime.lastIndex:0;this._cachingAtTime.value=this.interpolateValue(frameNum,this._cachingAtTime);this._cachingAtTime.lastFrame=frameNum}return this._cachingAtTime.value}function getSpeedAtTime(frameNum){var delta=-0.01;var v1=this.getValueAtTime(frameNum);var v2=this.getValueAtTime(frameNum+delta);var speed=0;if(v1.length){var i;for(i=0;i<v1.length;i+=1){speed+=Math.pow(v2[i]-v1[i],2)}speed=Math.sqrt(speed)*100}else{speed=0}return speed}function getVelocityAtTime(frameNum){if(this.vel!==undefined){return this.vel}var delta=-0.001;var v1=this.getValueAtTime(frameNum);var v2=this.getValueAtTime(frameNum+delta);var velocity;if(v1.length){velocity=createTypedArray("float32",v1.length);var i;for(i=0;i<v1.length;i+=1){velocity[i]=(v2[i]-v1[i])/delta}}else{velocity=(v2-v1)/delta}return velocity}function getStaticValueAtTime(){return this.pv}function setGroupProperty(propertyGroup){this.propertyGroup=propertyGroup}return{searchExpressions:searchExpressions,getSpeedAtTime:getSpeedAtTime,getVelocityAtTime:getVelocityAtTime,getValueAtTime:getValueAtTime,getStaticValueAtTime:getStaticValueAtTime,setGroupProperty:setGroupProperty}}();(function addPropertyDecorator(){function loopOut(type,duration,durationFlag){if(!this.k||!this.keyframes){return this.pv}type=type?type.toLowerCase():"";var currentFrame=this.comp.renderedFrame;var keyframes=this.keyframes;var lastKeyFrame=keyframes[keyframes.length-1].t;if(currentFrame<=lastKeyFrame){return this.pv}else{var cycleDuration,firstKeyFrame;if(!durationFlag){if(!duration||duration>keyframes.length-1){duration=keyframes.length-1}firstKeyFrame=keyframes[keyframes.length-1-duration].t;cycleDuration=lastKeyFrame-firstKeyFrame}else{if(!duration){cycleDuration=Math.max(0,lastKeyFrame-this.elem.data.ip)}else{cycleDuration=Math.abs(lastKeyFrame-elem.comp.globalData.frameRate*duration)}firstKeyFrame=lastKeyFrame-cycleDuration}var i,len,ret;if(type==="pingpong"){var iterations=Math.floor((currentFrame-firstKeyFrame)/cycleDuration);if(iterations%2!==0){return this.getValueAtTime((cycleDuration-(currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}}else if(type==="offset"){var initV=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0);var endV=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0);var current=this.getValueAtTime(((currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0);var repeats=Math.floor((currentFrame-firstKeyFrame)/cycleDuration);if(this.pv.length){ret=new Array(initV.length);len=ret.length;for(i=0;i<len;i+=1){ret[i]=(endV[i]-initV[i])*repeats+current[i]}return ret}return(endV-initV)*repeats+current}else if(type==="continue"){var lastValue=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0);var nextLastValue=this.getValueAtTime((lastKeyFrame-0.001)/this.comp.globalData.frameRate,0);if(this.pv.length){ret=new Array(lastValue.length);len=ret.length;for(i=0;i<len;i+=1){ret[i]=lastValue[i]+(lastValue[i]-nextLastValue[i])*((currentFrame-lastKeyFrame)/this.comp.globalData.frameRate)/0.0005}return ret}return lastValue+(lastValue-nextLastValue)*((currentFrame-lastKeyFrame)/0.001)}return this.getValueAtTime(((currentFrame-firstKeyFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}}function loopIn(type,duration,durationFlag){if(!this.k){return this.pv}type=type?type.toLowerCase():"";var currentFrame=this.comp.renderedFrame;var keyframes=this.keyframes;var firstKeyFrame=keyframes[0].t;if(currentFrame>=firstKeyFrame){return this.pv}else{var cycleDuration,lastKeyFrame;if(!durationFlag){if(!duration||duration>keyframes.length-1){duration=keyframes.length-1}lastKeyFrame=keyframes[duration].t;cycleDuration=lastKeyFrame-firstKeyFrame}else{if(!duration){cycleDuration=Math.max(0,this.elem.data.op-firstKeyFrame)}else{cycleDuration=Math.abs(elem.comp.globalData.frameRate*duration)}lastKeyFrame=firstKeyFrame+cycleDuration}var i,len,ret;if(type==="pingpong"){var iterations=Math.floor((firstKeyFrame-currentFrame)/cycleDuration);if(iterations%2===0){return this.getValueAtTime(((firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}}else if(type==="offset"){var initV=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0);var endV=this.getValueAtTime(lastKeyFrame/this.comp.globalData.frameRate,0);var current=this.getValueAtTime((cycleDuration-(firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0);var repeats=Math.floor((firstKeyFrame-currentFrame)/cycleDuration)+1;if(this.pv.length){ret=new Array(initV.length);len=ret.length;for(i=0;i<len;i+=1){ret[i]=current[i]-(endV[i]-initV[i])*repeats}return ret}return current-(endV-initV)*repeats}else if(type==="continue"){var firstValue=this.getValueAtTime(firstKeyFrame/this.comp.globalData.frameRate,0);var nextFirstValue=this.getValueAtTime((firstKeyFrame+0.001)/this.comp.globalData.frameRate,0);if(this.pv.length){ret=new Array(firstValue.length);len=ret.length;for(i=0;i<len;i+=1){ret[i]=firstValue[i]+(firstValue[i]-nextFirstValue[i])*(firstKeyFrame-currentFrame)/0.001}return ret}return firstValue+(firstValue-nextFirstValue)*(firstKeyFrame-currentFrame)/0.001}return this.getValueAtTime((cycleDuration-(firstKeyFrame-currentFrame)%cycleDuration+firstKeyFrame)/this.comp.globalData.frameRate,0)}}function smooth(width,samples){if(!this.k){return this.pv}width=(width||0.4)*0.5;samples=Math.floor(samples||5);if(samples<=1){return this.pv}var currentTime=this.comp.renderedFrame/this.comp.globalData.frameRate;var initFrame=currentTime-width;var endFrame=currentTime+width;var sampleFrequency=samples>1?(endFrame-initFrame)/(samples-1):1;var i=0,j=0;var value;if(this.pv.length){value=createTypedArray("float32",this.pv.length)}else{value=0}var sampleValue;while(i<samples){sampleValue=this.getValueAtTime(initFrame+i*sampleFrequency);if(this.pv.length){for(j=0;j<this.pv.length;j+=1){value[j]+=sampleValue[j]}}else{value+=sampleValue}i+=1}if(this.pv.length){for(j=0;j<this.pv.length;j+=1){value[j]/=samples}}else{value/=samples}return value}function getValueAtTime(frameNum){frameNum*=this.elem.globalData.frameRate;frameNum-=this.offsetTime;if(frameNum!==this._cachingAtTime.lastFrame){this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<frameNum?this._cachingAtTime.lastIndex:0;this._cachingAtTime.value=this.interpolateValue(frameNum,this._cachingAtTime);this._cachingAtTime.lastFrame=frameNum}return this._cachingAtTime.value}function getTransformValueAtTime(time){}function getTransformStaticValueAtTime(time){}var getTransformProperty=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(elem,data,container){var prop=getTransformProperty(elem,data,container);if(prop.dynamicProperties.length){prop.getValueAtTime=getTransformValueAtTime.bind(prop)}else{prop.getValueAtTime=getTransformStaticValueAtTime.bind(prop)}prop.setGroupProperty=expressionHelpers.setGroupProperty;return prop};var propertyGetProp=PropertyFactory.getProp;PropertyFactory.getProp=function(elem,data,type,mult,container){var prop=propertyGetProp(elem,data,type,mult,container);if(prop.kf){prop.getValueAtTime=expressionHelpers.getValueAtTime.bind(prop)}else{prop.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(prop)}prop.setGroupProperty=expressionHelpers.setGroupProperty;prop.loopOut=loopOut;prop.loopIn=loopIn;prop.smooth=smooth;prop.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(prop);prop.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(prop);prop.numKeys=data.a===1?data.k.length:0;prop.propertyIndex=data.ix;var value=0;if(type!==0){value=createTypedArray("float32",data.a===1?data.k[0].s.length:data.k.length)}prop._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:value};expressionHelpers.searchExpressions(elem,data,prop);if(prop.k){container.addDynamicProperty(prop)}return prop};function getShapeValueAtTime(frameNum){if(!this._cachingAtTime){this._cachingAtTime={shapeValue:shape_pool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}}frameNum*=this.elem.globalData.frameRate;frameNum-=this.offsetTime;if(frameNum!==this._cachingAtTime.lastTime){this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<frameNum?this._caching.lastIndex:0;this._cachingAtTime.lastTime=frameNum;this.interpolateShape(frameNum,this._cachingAtTime.shapeValue,this._cachingAtTime)}return this._cachingAtTime.shapeValue}var ShapePropertyConstructorFunction=ShapePropertyFactory.getConstructorFunction();var KeyframedShapePropertyConstructorFunction=ShapePropertyFactory.getKeyframedConstructorFunction();function ShapeExpressions(){}ShapeExpressions.prototype={vertices:function(prop,time){if(this.k){this.getValue()}var shapePath=this.v;if(time!==undefined){shapePath=this.getValueAtTime(time,0)}var i,len=shapePath._length;var vertices=shapePath[prop];var points=shapePath.v;var arr=createSizedArray(len);for(i=0;i<len;i+=1){if(prop==="i"||prop==="o"){arr[i]=[vertices[i][0]-points[i][0],vertices[i][1]-points[i][1]]}else{arr[i]=[vertices[i][0],vertices[i][1]]}}return arr},points:function(time){return this.vertices("v",time)},inTangents:function(time){return this.vertices("i",time)},outTangents:function(time){return this.vertices("o",time)},isClosed:function(){return this.v.c},pointOnPath:function(perc,time){var shapePath=this.v;if(time!==undefined){shapePath=this.getValueAtTime(time,0)}if(!this._segmentsLength){this._segmentsLength=bez.getSegmentsLength(shapePath)}var segmentsLength=this._segmentsLength;var lengths=segmentsLength.lengths;var lengthPos=segmentsLength.totalLength*perc;var i=0,len=lengths.length;var j=0,jLen;var accumulatedLength=0,pt;while(i<len){if(accumulatedLength+lengths[i].addedLength>lengthPos){var initIndex=i;var endIndex=shapePath.c&&i===len-1?0:i+1;var segmentPerc=(lengthPos-accumulatedLength)/lengths[i].addedLength;pt=bez.getPointInSegment(shapePath.v[initIndex],shapePath.v[endIndex],shapePath.o[initIndex],shapePath.i[endIndex],segmentPerc,lengths[i]);break}else{accumulatedLength+=lengths[i].addedLength}i+=1}if(!pt){pt=shapePath.c?[shapePath.v[0][0],shapePath.v[0][1]]:[shapePath.v[shapePath._length-1][0],shapePath.v[shapePath._length-1][1]]}return pt},vectorOnPath:function(perc,time,vectorType){perc=perc==1?this.v.c?0:0.999:perc;var pt1=this.pointOnPath(perc,time);var pt2=this.pointOnPath(perc+0.001,time);var xLength=pt2[0]-pt1[0];var yLength=pt2[1]-pt1[1];var magnitude=Math.sqrt(Math.pow(xLength,2)+Math.pow(yLength,2));var unitVector=vectorType==="tangent"?[xLength/magnitude,yLength/magnitude]:[-yLength/magnitude,xLength/magnitude];return unitVector},tangentOnPath:function(perc,time){return this.vectorOnPath(perc,time,"tangent")},normalOnPath:function(perc,time){return this.vectorOnPath(perc,time,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime};extendPrototype([ShapeExpressions],ShapePropertyConstructorFunction);extendPrototype([ShapeExpressions],KeyframedShapePropertyConstructorFunction);KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime=getShapeValueAtTime;KeyframedShapePropertyConstructorFunction.prototype.initiateExpression=ExpressionManager.initiateExpression;var propertyGetShapeProp=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(elem,data,type,arr,trims){var prop=propertyGetShapeProp(elem,data,type,arr,trims);prop.propertyIndex=data.ix;prop.lock=false;if(type===3){expressionHelpers.searchExpressions(elem,data.pt,prop)}else if(type===4){expressionHelpers.searchExpressions(elem,data.ks,prop)}if(prop.k){elem.addDynamicProperty(prop)}return prop}})();(function addDecorator(){function searchExpressions(){if(this.data.d.x){this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this);this.addEffect(this.getExpressionValue.bind(this));return true}}TextProperty.prototype.getExpressionValue=function(currentValue,text){var newValue=this.calculateExpression(text);if(currentValue.t!==newValue){var newData={};this.copyData(newData,currentValue);newData.t=newValue.toString();newData.__complete=false;return newData}return currentValue};TextProperty.prototype.searchProperty=function(){var isKeyframed=this.searchKeyframes();var hasExpressions=this.searchExpressions();this.kf=isKeyframed||hasExpressions;return this.kf};TextProperty.prototype.searchExpressions=searchExpressions})();var ShapeExpressionInterface=function(){function iterateElements(shapes,view,propertyGroup){var arr=[];var i,len=shapes?shapes.length:0;for(i=0;i<len;i+=1){if(shapes[i].ty=="gr"){arr.push(groupInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="fl"){arr.push(fillInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="st"){arr.push(strokeInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="tm"){arr.push(trimInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="tr"){}else if(shapes[i].ty=="el"){arr.push(ellipseInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="sr"){arr.push(starInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="sh"){arr.push(pathInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="rc"){arr.push(rectInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="rd"){arr.push(roundedInterfaceFactory(shapes[i],view[i],propertyGroup))}else if(shapes[i].ty=="rp"){arr.push(repeaterInterfaceFactory(shapes[i],view[i],propertyGroup))}}return arr}function contentsInterfaceFactory(shape,view,propertyGroup){var interfaces;var interfaceFunction=function _interfaceFunction(value){var i=0,len=interfaces.length;while(i<len){if(interfaces[i]._name===value||interfaces[i].mn===value||interfaces[i].propertyIndex===value||interfaces[i].ix===value||interfaces[i].ind===value){return interfaces[i]}i+=1}if(typeof value==="number"){return interfaces[value-1]}};interfaceFunction.propertyGroup=function(val){if(val===1){return interfaceFunction}else{return propertyGroup(val-1)}};interfaces=iterateElements(shape.it,view.it,interfaceFunction.propertyGroup);interfaceFunction.numProperties=interfaces.length;interfaceFunction.propertyIndex=shape.cix;interfaceFunction._name=shape.nm;return interfaceFunction}function groupInterfaceFactory(shape,view,propertyGroup){var interfaceFunction=function _interfaceFunction(value){switch(value){case"ADBE Vectors Group":case"Contents":case 2:return interfaceFunction.content;default:return interfaceFunction.transform;}};interfaceFunction.propertyGroup=function(val){if(val===1){return interfaceFunction}else{return propertyGroup(val-1)}};var content=contentsInterfaceFactory(shape,view,interfaceFunction.propertyGroup);var transformInterface=transformInterfaceFactory(shape.it[shape.it.length-1],view.it[view.it.length-1],interfaceFunction.propertyGroup);interfaceFunction.content=content;interfaceFunction.transform=transformInterface;Object.defineProperty(interfaceFunction,"_name",{get:function(){return shape.nm}});interfaceFunction.numProperties=shape.np;interfaceFunction.propertyIndex=shape.ix;interfaceFunction.nm=shape.nm;interfaceFunction.mn=shape.mn;return interfaceFunction}function fillInterfaceFactory(shape,view,propertyGroup){function interfaceFunction(val){if(val==="Color"||val==="color"){return interfaceFunction.color}else if(val==="Opacity"||val==="opacity"){return interfaceFunction.opacity}}Object.defineProperties(interfaceFunction,{"color":{get:ExpressionPropertyInterface(view.c)},"opacity":{get:ExpressionPropertyInterface(view.o)},"_name":{value:shape.nm},"mn":{value:shape.mn}});view.c.setGroupProperty(propertyGroup);view.o.setGroupProperty(propertyGroup);return interfaceFunction}function strokeInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val===1){return ob}else{return propertyGroup(val-1)}}function _dashPropertyGroup(val){if(val===1){return dashOb}else{return _propertyGroup(val-1)}}function addPropertyToDashOb(i){Object.defineProperty(dashOb,shape.d[i].nm,{get:ExpressionPropertyInterface(view.d.dataProps[i].p)})}var i,len=shape.d?shape.d.length:0;var dashOb={};for(i=0;i<len;i+=1){addPropertyToDashOb(i);view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup)}function interfaceFunction(val){if(val==="Color"||val==="color"){return interfaceFunction.color}else if(val==="Opacity"||val==="opacity"){return interfaceFunction.opacity}else if(val==="Stroke Width"||val==="stroke width"){return interfaceFunction.strokeWidth}}Object.defineProperties(interfaceFunction,{"color":{get:ExpressionPropertyInterface(view.c)},"opacity":{get:ExpressionPropertyInterface(view.o)},"strokeWidth":{get:ExpressionPropertyInterface(view.w)},"dash":{get:function(){return dashOb}},"_name":{value:shape.nm},"mn":{value:shape.mn}});view.c.setGroupProperty(_propertyGroup);view.o.setGroupProperty(_propertyGroup);view.w.setGroupProperty(_propertyGroup);return interfaceFunction}function trimInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}interfaceFunction.propertyIndex=shape.ix;view.s.setGroupProperty(_propertyGroup);view.e.setGroupProperty(_propertyGroup);view.o.setGroupProperty(_propertyGroup);function interfaceFunction(val){if(val===shape.e.ix||val==="End"||val==="end"){return interfaceFunction.end}if(val===shape.s.ix){return interfaceFunction.start}if(val===shape.o.ix){return interfaceFunction.offset}}interfaceFunction.propertyIndex=shape.ix;interfaceFunction.propertyGroup=propertyGroup;Object.defineProperties(interfaceFunction,{"start":{get:ExpressionPropertyInterface(view.s)},"end":{get:ExpressionPropertyInterface(view.e)},"offset":{get:ExpressionPropertyInterface(view.o)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function transformInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}view.transform.mProps.o.setGroupProperty(_propertyGroup);view.transform.mProps.p.setGroupProperty(_propertyGroup);view.transform.mProps.a.setGroupProperty(_propertyGroup);view.transform.mProps.s.setGroupProperty(_propertyGroup);view.transform.mProps.r.setGroupProperty(_propertyGroup);if(view.transform.mProps.sk){view.transform.mProps.sk.setGroupProperty(_propertyGroup);view.transform.mProps.sa.setGroupProperty(_propertyGroup)}view.transform.op.setGroupProperty(_propertyGroup);function interfaceFunction(value){if(shape.a.ix===value||value==="Anchor Point"){return interfaceFunction.anchorPoint}if(shape.o.ix===value||value==="Opacity"){return interfaceFunction.opacity}if(shape.p.ix===value||value==="Position"){return interfaceFunction.position}if(shape.r.ix===value||value==="Rotation"||value==="ADBE Vector Rotation"){return interfaceFunction.rotation}if(shape.s.ix===value||value==="Scale"){return interfaceFunction.scale}if(shape.sk&&shape.sk.ix===value||value==="Skew"){return interfaceFunction.skew}if(shape.sa&&shape.sa.ix===value||value==="Skew Axis"){return interfaceFunction.skewAxis}}Object.defineProperties(interfaceFunction,{"opacity":{get:ExpressionPropertyInterface(view.transform.mProps.o)},"position":{get:ExpressionPropertyInterface(view.transform.mProps.p)},"anchorPoint":{get:ExpressionPropertyInterface(view.transform.mProps.a)},"scale":{get:ExpressionPropertyInterface(view.transform.mProps.s)},"rotation":{get:ExpressionPropertyInterface(view.transform.mProps.r)},"skew":{get:ExpressionPropertyInterface(view.transform.mProps.sk)},"skewAxis":{get:ExpressionPropertyInterface(view.transform.mProps.sa)},"_name":{value:shape.nm}});interfaceFunction.ty="tr";interfaceFunction.mn=shape.mn;interfaceFunction.propertyGroup=propertyGroup;return interfaceFunction}function ellipseInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}interfaceFunction.propertyIndex=shape.ix;var prop=view.sh.ty==="tm"?view.sh.prop:view.sh;prop.s.setGroupProperty(_propertyGroup);prop.p.setGroupProperty(_propertyGroup);function interfaceFunction(value){if(shape.p.ix===value){return interfaceFunction.position}if(shape.s.ix===value){return interfaceFunction.size}}Object.defineProperties(interfaceFunction,{"size":{get:ExpressionPropertyInterface(prop.s)},"position":{get:ExpressionPropertyInterface(prop.p)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function starInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}var prop=view.sh.ty==="tm"?view.sh.prop:view.sh;interfaceFunction.propertyIndex=shape.ix;prop.or.setGroupProperty(_propertyGroup);prop.os.setGroupProperty(_propertyGroup);prop.pt.setGroupProperty(_propertyGroup);prop.p.setGroupProperty(_propertyGroup);prop.r.setGroupProperty(_propertyGroup);if(shape.ir){prop.ir.setGroupProperty(_propertyGroup);prop.is.setGroupProperty(_propertyGroup)}function interfaceFunction(value){if(shape.p.ix===value){return interfaceFunction.position}if(shape.r.ix===value){return interfaceFunction.rotation}if(shape.pt.ix===value){return interfaceFunction.points}if(shape.or.ix===value||"ADBE Vector Star Outer Radius"===value){return interfaceFunction.outerRadius}if(shape.os.ix===value){return interfaceFunction.outerRoundness}if(shape.ir&&(shape.ir.ix===value||"ADBE Vector Star Inner Radius"===value)){return interfaceFunction.innerRadius}if(shape.is&&shape.is.ix===value){return interfaceFunction.innerRoundness}}Object.defineProperties(interfaceFunction,{"position":{get:ExpressionPropertyInterface(prop.p)},"rotation":{get:ExpressionPropertyInterface(prop.r)},"points":{get:ExpressionPropertyInterface(prop.pt)},"outerRadius":{get:ExpressionPropertyInterface(prop.or)},"outerRoundness":{get:ExpressionPropertyInterface(prop.os)},"innerRadius":{get:ExpressionPropertyInterface(prop.ir)},"innerRoundness":{get:ExpressionPropertyInterface(prop.is)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function rectInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}var prop=view.sh.ty==="tm"?view.sh.prop:view.sh;interfaceFunction.propertyIndex=shape.ix;prop.p.setGroupProperty(_propertyGroup);prop.s.setGroupProperty(_propertyGroup);prop.r.setGroupProperty(_propertyGroup);function interfaceFunction(value){if(shape.p.ix===value){return interfaceFunction.position}if(shape.r.ix===value){return interfaceFunction.roundness}if(shape.s.ix===value||value==="Size"||value==="ADBE Vector Rect Size"){return interfaceFunction.size}}Object.defineProperties(interfaceFunction,{"position":{get:ExpressionPropertyInterface(prop.p)},"roundness":{get:ExpressionPropertyInterface(prop.r)},"size":{get:ExpressionPropertyInterface(prop.s)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function roundedInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}var prop=view;interfaceFunction.propertyIndex=shape.ix;prop.rd.setGroupProperty(_propertyGroup);function interfaceFunction(value){if(shape.r.ix===value||"Round Corners 1"===value){return interfaceFunction.radius}}Object.defineProperties(interfaceFunction,{"radius":{get:ExpressionPropertyInterface(prop.rd)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function repeaterInterfaceFactory(shape,view,propertyGroup){function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}var prop=view;interfaceFunction.propertyIndex=shape.ix;prop.c.setGroupProperty(_propertyGroup);prop.o.setGroupProperty(_propertyGroup);function interfaceFunction(value){if(shape.c.ix===value||"Copies"===value){return interfaceFunction.copies}else if(shape.o.ix===value||"Offset"===value){return interfaceFunction.offset}}Object.defineProperties(interfaceFunction,{"copies":{get:ExpressionPropertyInterface(prop.c)},"offset":{get:ExpressionPropertyInterface(prop.o)},"_name":{value:shape.nm}});interfaceFunction.mn=shape.mn;return interfaceFunction}function pathInterfaceFactory(shape,view,propertyGroup){var prop=view.sh;function _propertyGroup(val){if(val==1){return interfaceFunction}else{return propertyGroup(--val)}}prop.setGroupProperty(_propertyGroup);function interfaceFunction(val){if(val==="Shape"||val==="shape"||val==="Path"||val==="path"||val==="ADBE Vector Shape"||val===2){return interfaceFunction.path}}Object.defineProperties(interfaceFunction,{"path":{get:function(){if(prop.k){prop.getValue()}return prop}},"shape":{get:function(){if(prop.k){prop.getValue()}return prop}},"_name":{value:shape.nm},"ix":{value:shape.ix},"mn":{value:shape.mn}});return interfaceFunction}return function(shapes,view,propertyGroup){var interfaces;function _interfaceFunction(value){if(typeof value==="number"){return interfaces[value-1]}else{var i=0,len=interfaces.length;while(i<len){if(interfaces[i]._name===value){return interfaces[i]}i+=1}}}_interfaceFunction.propertyGroup=propertyGroup;interfaces=iterateElements(shapes,view,_interfaceFunction);_interfaceFunction.numProperties=interfaces.length;return _interfaceFunction}}();var TextExpressionInterface=function(){return function(elem){var _prevValue,_sourceText;function _thisLayerFunction(){}Object.defineProperty(_thisLayerFunction,"sourceText",{get:function(){elem.textProperty.getValue();var stringValue=elem.textProperty.currentData.t;if(stringValue!==_prevValue){elem.textProperty.currentData.t=_prevValue;_sourceText=new String(stringValue);_sourceText.value=stringValue?stringValue:new String(stringValue)}return _sourceText}});return _thisLayerFunction}}();var LayerExpressionInterface=function(){function toWorld(arr,time){var toWorldMat=new Matrix;toWorldMat.reset();var transformMat;if(time){transformMat=this._elem.finalTransform.mProp}else{transformMat=this._elem.finalTransform.mProp}transformMat.applyToMatrix(toWorldMat);if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1){this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat)}return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0)}return toWorldMat.applyToPointArray(arr[0],arr[1],arr[2]||0)}function fromWorld(arr,time){var toWorldMat=new Matrix;toWorldMat.reset();var transformMat;if(time){transformMat=this._elem.finalTransform.mProp}else{transformMat=this._elem.finalTransform.mProp}transformMat.applyToMatrix(toWorldMat);if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1){this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat)}return toWorldMat.inversePoint(arr)}return toWorldMat.inversePoint(arr)}function fromComp(arr){var toWorldMat=new Matrix;toWorldMat.reset();this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);if(this._elem.hierarchy&&this._elem.hierarchy.length){var i,len=this._elem.hierarchy.length;for(i=0;i<len;i+=1){this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat)}return toWorldMat.inversePoint(arr)}return toWorldMat.inversePoint(arr)}function sampleImage(){return[1,1,1,1]}return function(elem){var transformInterface;function _registerMaskInterface(maskManager){_thisLayerFunction.mask=new MaskManagerInterface(maskManager,elem)}function _registerEffectsInterface(effects){_thisLayerFunction.effect=effects}function _thisLayerFunction(name){switch(name){case"ADBE Root Vectors Group":case"Contents":case 2:return _thisLayerFunction.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return transformInterface;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return _thisLayerFunction.effect;}}_thisLayerFunction.toWorld=toWorld;_thisLayerFunction.fromWorld=fromWorld;_thisLayerFunction.toComp=toWorld;_thisLayerFunction.fromComp=fromComp;_thisLayerFunction.sampleImage=sampleImage;_thisLayerFunction.sourceRectAtTime=elem.sourceRectAtTime.bind(elem);_thisLayerFunction._elem=elem;transformInterface=TransformExpressionInterface(elem.finalTransform.mProp);var anchorPointDescriptor=getDescriptor(transformInterface,"anchorPoint");Object.defineProperties(_thisLayerFunction,{hasParent:{get:function(){return elem.hierarchy.length}},parent:{get:function(){return elem.hierarchy[0].layerInterface}},rotation:getDescriptor(transformInterface,"rotation"),scale:getDescriptor(transformInterface,"scale"),position:getDescriptor(transformInterface,"position"),opacity:getDescriptor(transformInterface,"opacity"),anchorPoint:anchorPointDescriptor,anchor_point:anchorPointDescriptor,transform:{get:function(){return transformInterface}},active:{get:function(){return elem.isInRange}}});_thisLayerFunction.startTime=elem.data.st;_thisLayerFunction.index=elem.data.ind;_thisLayerFunction.source=elem.data.refId;_thisLayerFunction.height=elem.data.ty===0?elem.data.h:100;_thisLayerFunction.width=elem.data.ty===0?elem.data.w:100;_thisLayerFunction.inPoint=elem.data.ip/elem.comp.globalData.frameRate;_thisLayerFunction.outPoint=elem.data.op/elem.comp.globalData.frameRate;_thisLayerFunction._name=elem.data.nm;_thisLayerFunction.registerMaskInterface=_registerMaskInterface;_thisLayerFunction.registerEffectsInterface=_registerEffectsInterface;return _thisLayerFunction}}();var CompExpressionInterface=function(){return function(comp){function _thisLayerFunction(name){var i=0,len=comp.layers.length;while(i<len){if(comp.layers[i].nm===name||comp.layers[i].ind===name){return comp.elements[i].layerInterface}i+=1}return null}Object.defineProperty(_thisLayerFunction,"_name",{value:comp.data.nm});_thisLayerFunction.layer=_thisLayerFunction;_thisLayerFunction.pixelAspect=1;_thisLayerFunction.height=comp.data.h||comp.globalData.compSize.h;_thisLayerFunction.width=comp.data.w||comp.globalData.compSize.w;_thisLayerFunction.pixelAspect=1;_thisLayerFunction.frameDuration=1/comp.globalData.frameRate;_thisLayerFunction.displayStartTime=0;_thisLayerFunction.numLayers=comp.layers.length;return _thisLayerFunction}}();var TransformExpressionInterface=function(){return function(transform){function _thisFunction(name){switch(name){case"scale":case"Scale":case"ADBE Scale":case 6:return _thisFunction.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return _thisFunction.rotation;case"ADBE Rotate X":return _thisFunction.xRotation;case"ADBE Rotate Y":return _thisFunction.yRotation;case"position":case"Position":case"ADBE Position":case 2:return _thisFunction.position;case"ADBE Position_0":return _thisFunction.xPosition;case"ADBE Position_1":return _thisFunction.yPosition;case"ADBE Position_2":return _thisFunction.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return _thisFunction.anchorPoint;case"opacity":case"Opacity":case 11:return _thisFunction.opacity;}}Object.defineProperty(_thisFunction,"rotation",{get:ExpressionPropertyInterface(transform.r||transform.rz)});Object.defineProperty(_thisFunction,"zRotation",{get:ExpressionPropertyInterface(transform.rz||transform.r)});Object.defineProperty(_thisFunction,"xRotation",{get:ExpressionPropertyInterface(transform.rx)});Object.defineProperty(_thisFunction,"yRotation",{get:ExpressionPropertyInterface(transform.ry)});Object.defineProperty(_thisFunction,"scale",{get:ExpressionPropertyInterface(transform.s)});if(transform.p){var _transformFactory=ExpressionPropertyInterface(transform.p)}Object.defineProperty(_thisFunction,"position",{get:function(){if(transform.p){return _transformFactory()}else{return[transform.px.v,transform.py.v,transform.pz?transform.pz.v:0]}}});Object.defineProperty(_thisFunction,"xPosition",{get:ExpressionPropertyInterface(transform.px)});Object.defineProperty(_thisFunction,"yPosition",{get:ExpressionPropertyInterface(transform.py)});Object.defineProperty(_thisFunction,"zPosition",{get:ExpressionPropertyInterface(transform.pz)});Object.defineProperty(_thisFunction,"anchorPoint",{get:ExpressionPropertyInterface(transform.a)});Object.defineProperty(_thisFunction,"opacity",{get:ExpressionPropertyInterface(transform.o)});Object.defineProperty(_thisFunction,"skew",{get:ExpressionPropertyInterface(transform.sk)});Object.defineProperty(_thisFunction,"skewAxis",{get:ExpressionPropertyInterface(transform.sa)});Object.defineProperty(_thisFunction,"orientation",{get:ExpressionPropertyInterface(transform.or)});return _thisFunction}}();var ProjectInterface=function(){function registerComposition(comp){this.compositions.push(comp)}return function(){function _thisProjectFunction(name){var i=0,len=this.compositions.length;while(i<len){if(this.compositions[i].data&&this.compositions[i].data.nm===name){if(this.compositions[i].prepareFrame&&this.compositions[i].data.xt){this.compositions[i].prepareFrame(this.currentFrame)}return this.compositions[i].compInterface}i+=1}}_thisProjectFunction.compositions=[];_thisProjectFunction.currentFrame=0;_thisProjectFunction.registerComposition=registerComposition;return _thisProjectFunction}}();var EffectsExpressionInterface=function(){var ob={createEffectsInterface:createEffectsInterface};function createEffectsInterface(elem,propertyGroup){if(elem.effectsManager){var effectElements=[];var effectsData=elem.data.ef;var i,len=elem.effectsManager.effectElements.length;for(i=0;i<len;i+=1){effectElements.push(createGroupInterface(effectsData[i],elem.effectsManager.effectElements[i],propertyGroup,elem))}return function(name){var effects=elem.data.ef||[],i=0,len=effects.length;while(i<len){if(name===effects[i].nm||name===effects[i].mn||name===effects[i].ix){return effectElements[i]}i+=1}}}}function createGroupInterface(data,elements,propertyGroup,elem){var effectElements=[];var i,len=data.ef.length;for(i=0;i<len;i+=1){if(data.ef[i].ty===5){effectElements.push(createGroupInterface(data.ef[i],elements.effectElements[i],elements.effectElements[i].propertyGroup,elem))}else{effectElements.push(createValueInterface(elements.effectElements[i],data.ef[i].ty,elem,_propertyGroup))}}function _propertyGroup(val){if(val===1){return groupInterface}else{return propertyGroup(val-1)}}var groupInterface=function(name){var effects=data.ef,i=0,len=effects.length;while(i<len){if(name===effects[i].nm||name===effects[i].mn||name===effects[i].ix){if(effects[i].ty===5){return effectElements[i]}else{return effectElements[i]()}}i+=1}return effectElements[0]()};groupInterface.propertyGroup=_propertyGroup;if(data.mn==="ADBE Color Control"){Object.defineProperty(groupInterface,"color",{get:function(){return effectElements[0]()}})}Object.defineProperty(groupInterface,"numProperties",{get:function(){return data.np}});groupInterface.active=groupInterface.enabled=data.en!==0;return groupInterface}function createValueInterface(element,type,elem,propertyGroup){var expressionProperty=ExpressionPropertyInterface(element.p);function interfaceFunction(){if(type===10){return elem.comp.compInterface(element.p.v)}return expressionProperty()}if(element.p.setGroupProperty){element.p.setGroupProperty(propertyGroup)}return interfaceFunction}return ob}();var MaskManagerInterface=function(){function MaskInterface(mask,data){this._mask=mask;this._data=data}Object.defineProperty(MaskInterface.prototype,"maskPath",{get:function(){if(this._mask.prop.k){this._mask.prop.getValue()}return this._mask.prop}});var MaskManager=function(maskManager,elem){var _maskManager=maskManager;var _elem=elem;var _masksInterfaces=createSizedArray(maskManager.viewData.length);var i,len=maskManager.viewData.length;for(i=0;i<len;i+=1){_masksInterfaces[i]=new MaskInterface(maskManager.viewData[i],maskManager.masksProperties[i])}var maskFunction=function(name){i=0;while(i<len){if(maskManager.masksProperties[i].nm===name){return _masksInterfaces[i]}i+=1}};return maskFunction};return MaskManager}();var ExpressionPropertyInterface=function(){var defaultUnidimensionalValue={pv:0,v:0,mult:1};var defaultMultidimensionalValue={pv:[0,0,0],v:[0,0,0],mult:1};function completeProperty(expressionValue,property,type){Object.defineProperty(expressionValue,"velocity",{get:function(){return property.getVelocityAtTime(property.comp.currentFrame)}});expressionValue.numKeys=property.keyframes?property.keyframes.length:0;expressionValue.key=function(pos){if(!expressionValue.numKeys){return 0}else{var value="";if("s"in property.keyframes[pos-1]){value=property.keyframes[pos-1].s}else if("e"in property.keyframes[pos-2]){value=property.keyframes[pos-2].e}else{value=property.keyframes[pos-2].s}var valueProp=type==="unidimensional"?new Number(value):Object.assign({},value);valueProp.time=property.keyframes[pos-1].t/property.elem.comp.globalData.frameRate;return valueProp}};expressionValue.valueAtTime=property.getValueAtTime;expressionValue.speedAtTime=property.getSpeedAtTime;expressionValue.velocityAtTime=property.getVelocityAtTime;expressionValue.propertyGroup=property.propertyGroup}function UnidimensionalPropertyInterface(property){if(!property||!("pv"in property)){property=defaultUnidimensionalValue}var mult=1/property.mult;var val=property.pv*mult;var expressionValue=new Number(val);expressionValue.value=val;completeProperty(expressionValue,property,"unidimensional");return function(){if(property.k){property.getValue()}val=property.v*mult;if(expressionValue.value!==val){expressionValue=new Number(val);expressionValue.value=val;completeProperty(expressionValue,property,"unidimensional")}return expressionValue}}function MultidimensionalPropertyInterface(property){if(!property||!("pv"in property)){property=defaultMultidimensionalValue}var mult=1/property.mult;var len=property.pv.length;var expressionValue=createTypedArray("float32",len);var arrValue=createTypedArray("float32",len);expressionValue.value=arrValue;completeProperty(expressionValue,property,"multidimensional");return function(){if(property.k){property.getValue()}for(var i=0;i<len;i+=1){expressionValue[i]=arrValue[i]=property.v[i]*mult}return expressionValue}}function defaultGetter(){return defaultUnidimensionalValue}return function(property){if(!property){return defaultGetter}else if(property.propType==="unidimensional"){return UnidimensionalPropertyInterface(property)}else{return MultidimensionalPropertyInterface(property)}}}();(function(){var TextExpressionSelectorProp=function(){function getValueProxy(index,total){this.textIndex=index+1;this.textTotal=total;this.v=this.getValue()*this.mult;return this.v}return function TextExpressionSelectorProp(elem,data){this.pv=1;this.comp=elem.comp;this.elem=elem;this.mult=0.01;this.propType="textSelector";this.textTotal=data.totalChars;this.selectorValue=100;this.lastValue=[1,1,1];this.k=true;this.x=true;this.getValue=ExpressionManager.initiateExpression.bind(this)(elem,data,this);this.getMult=getValueProxy;this.getVelocityAtTime=expressionHelpers.getVelocityAtTime;if(this.kf){this.getValueAtTime=expressionHelpers.getValueAtTime.bind(this)}else{this.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(this)}this.setGroupProperty=expressionHelpers.setGroupProperty}}();var propertyGetTextProp=TextSelectorProp.getTextSelectorProp;TextSelectorProp.getTextSelectorProp=function(elem,data,arr){if(data.t===1){return new TextExpressionSelectorProp(elem,data,arr)}else{return propertyGetTextProp(elem,data,arr)}}})();function SliderEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function AngleEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function ColorEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,1,0,container)}function PointEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,1,0,container)}function LayerIndexEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function MaskIndexEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function CheckboxEffect(data,elem,container){this.p=PropertyFactory.getProp(elem,data.v,0,0,container)}function NoValueEffect(){this.p={}}function EffectsManager(){}function EffectsManager(data,element){var effects=data.ef||[];this.effectElements=[];var i,len=effects.length;var effectItem;for(i=0;i<len;i++){effectItem=new GroupEffect(effects[i],element);this.effectElements.push(effectItem)}}function GroupEffect(data,element){this.init(data,element)}extendPrototype([DynamicPropertyContainer],GroupEffect);GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties;GroupEffect.prototype.init=function(data,element){this.data=data;this.effectElements=[];this.initDynamicPropertyContainer(element);var i,len=this.data.ef.length;var eff,effects=this.data.ef;for(i=0;i<len;i+=1){eff=null;switch(effects[i].ty){case 0:eff=new SliderEffect(effects[i],element,this);break;case 1:eff=new AngleEffect(effects[i],element,this);break;case 2:eff=new ColorEffect(effects[i],element,this);break;case 3:eff=new PointEffect(effects[i],element,this);break;case 4:case 7:eff=new CheckboxEffect(effects[i],element,this);break;case 10:eff=new LayerIndexEffect(effects[i],element,this);break;case 11:eff=new MaskIndexEffect(effects[i],element,this);break;case 5:eff=new EffectsManager(effects[i],element,this);break;default:eff=new NoValueEffect(effects[i],element,this);break;}if(eff){this.effectElements.push(eff)}}};var lottiejs={};var _isFrozen=false;function setLocationHref(href){locationHref=href}function searchAnimations(){if(standalone===true){animationManager.searchAnimations(animationData,standalone,renderer)}else{animationManager.searchAnimations()}}function setSubframeRendering(flag){subframeEnabled=flag}function loadAnimation(params){if(standalone===true){params.animationData=JSON.parse(animationData)}return animationManager.loadAnimation(params)}function setQuality(value){if(typeof value==="string"){switch(value){case"high":defaultCurveSegments=200;break;case"medium":defaultCurveSegments=50;break;case"low":defaultCurveSegments=10;break;}}else if(!isNaN(value)&&value>1){defaultCurveSegments=value}if(defaultCurveSegments>=50){roundValues(false)}else{roundValues(true)}}function inBrowser(){return typeof navigator!=="undefined"}function installPlugin(type,plugin){if(type==="expressions"){expressionsPlugin=plugin}}function getFactory(name){switch(name){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;}}lottiejs.play=animationManager.play;lottiejs.pause=animationManager.pause;lottiejs.setLocationHref=setLocationHref;lottiejs.togglePause=animationManager.togglePause;lottiejs.setSpeed=animationManager.setSpeed;lottiejs.setDirection=animationManager.setDirection;lottiejs.stop=animationManager.stop;lottiejs.searchAnimations=searchAnimations;lottiejs.registerAnimation=animationManager.registerAnimation;lottiejs.loadAnimation=loadAnimation;lottiejs.setSubframeRendering=setSubframeRendering;lottiejs.resize=animationManager.resize;lottiejs.goToAndStop=animationManager.goToAndStop;lottiejs.destroy=animationManager.destroy;lottiejs.setQuality=setQuality;lottiejs.inBrowser=inBrowser;lottiejs.installPlugin=installPlugin;lottiejs.freeze=animationManager.freeze;lottiejs.unfreeze=animationManager.unfreeze;lottiejs.getRegisteredAnimations=animationManager.getRegisteredAnimations;lottiejs.__getFactory=getFactory;lottiejs.version="5.5.2";function checkReady(){if(document.readyState==="complete"){clearInterval(readyStateCheckInterval);searchAnimations()}}function getQueryVariable(variable){var vars=queryString.split("&");for(var i=0;i<vars.length;i++){var pair=vars[i].split("=");if(decodeURIComponent(pair[0])==variable){return decodeURIComponent(pair[1])}}}var standalone="__[STANDALONE]__";var animationData="__[ANIMATIONDATA]__";var renderer="";if(standalone){var scripts=document.getElementsByTagName("script");var index=scripts.length-1;var myScript=scripts[index]||{src:""};var queryString=myScript.src.replace(/^[^\?]+\??/,"");renderer=getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);return lottiejs});

})(getCurriedBundleDefineShim('utilities/vendor/lottie-web/5.5.2/js/lottie', define));;define('utilities/vendor/nouislider/9.0.0/js/nouislider',['exports'],function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};exports.default=function noUiSlider(){function addNodeTo(target,className){var div=document.createElement('div');addClass(div,className);target.appendChild(div);return div}function unique(array){return array.filter(function(a){return!this[a]?this[a]=true:false},{})}function closest(value,to){return Math.round(value/to)*to}function offset(elem,orientation){var rect=elem.getBoundingClientRect();var doc=elem.ownerDocument;var docElem=doc.documentElement;var pageOffset=getPageOffset();if(/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)){pageOffset.x=0}return orientation?rect.top+pageOffset.y-docElem.clientTop:rect.left+pageOffset.x-docElem.clientLeft}function isNumeric(a){return typeof a==='number'&&!isNaN(a)&&isFinite(a)}function addClassFor(element,className,duration){if(duration>0){addClass(element,className);setTimeout(function(){removeClass(element,className)},duration)}}function limit(a){return Math.max(Math.min(a,100),0)}function asArray(a){return Array.isArray(a)?a:[a]}function countDecimals(numStr){numStr=String(numStr);var pieces=numStr.split('.');return pieces.length>1?pieces[1].length:0}function addClass(el,className){if(el.classList){el.classList.add(className)}else{el.className+=' '+className}}function removeClass(el,className){if(el.classList){el.classList.remove(className)}else{el.className=el.className.replace(new RegExp('(^|\\b)'+className.split(' ').join('|')+'(\\b|$)','gi'),' ')}}function hasClass(el,className){return el.classList?el.classList.contains(className):new RegExp('\\b'+className+'\\b').test(el.className)}function getPageOffset(){var supportPageOffset=window.pageXOffset!==undefined,isCSS1Compat=(document.compatMode||'')==='CSS1Compat',x=supportPageOffset?window.pageXOffset:isCSS1Compat?document.documentElement.scrollLeft:document.body.scrollLeft,y=supportPageOffset?window.pageYOffset:isCSS1Compat?document.documentElement.scrollTop:document.body.scrollTop;return{x:x,y:y}}function getActions(){return window.navigator.pointerEnabled?{start:'pointerdown',move:'pointermove',end:'pointerup'}:window.navigator.msPointerEnabled?{start:'MSPointerDown',move:'MSPointerMove',end:'MSPointerUp'}:{start:'mousedown touchstart',move:'mousemove touchmove',end:'mouseup touchend'}}function subRangeRatio(pa,pb){return 100/(pb-pa)}function fromPercentage(range,value){return value*100/(range[1]-range[0])}function toPercentage(range,value){return fromPercentage(range,range[0]<0?value+Math.abs(range[0]):value-range[0])}function isPercentage(range,value){return value*(range[1]-range[0])/100+range[0]}function getJ(value,arr){var j=1;while(value>=arr[j]){j+=1}return j}function toStepping(xVal,xPct,value){if(value>=xVal.slice(-1)[0]){return 100}var j=getJ(value,xVal),va,vb,pa,pb;va=xVal[j-1];vb=xVal[j];pa=xPct[j-1];pb=xPct[j];return pa+toPercentage([va,vb],value)/subRangeRatio(pa,pb)}function fromStepping(xVal,xPct,value){if(value>=100){return xVal.slice(-1)[0]}var j=getJ(value,xPct),va,vb,pa,pb;va=xVal[j-1];vb=xVal[j];pa=xPct[j-1];pb=xPct[j];return isPercentage([va,vb],(value-pa)*subRangeRatio(pa,pb))}function getStep(xPct,xSteps,snap,value){if(value===100){return value}var j=getJ(value,xPct),a,b;if(snap){a=xPct[j-1];b=xPct[j];if(value-a>(b-a)/2){return b}return a}if(!xSteps[j-1]){return value}return xPct[j-1]+closest(value-xPct[j-1],xSteps[j-1])}function handleEntryPoint(index,value,that){var percentage;if(typeof value==='number'){value=[value]}if(Object.prototype.toString.call(value)!=='[object Array]'){throw new Error('noUiSlider: \'range\' contains invalid value.')}if(index==='min'){percentage=0}else if(index==='max'){percentage=100}else{percentage=parseFloat(index)}if(!isNumeric(percentage)||!isNumeric(value[0])){throw new Error('noUiSlider: \'range\' value isn\'t numeric.')}that.xPct.push(percentage);that.xVal.push(value[0]);if(!percentage){if(!isNaN(value[1])){that.xSteps[0]=value[1]}}else{that.xSteps.push(isNaN(value[1])?false:value[1])}that.xHighestCompleteStep.push(0)}function handleStepPoint(i,n,that){if(!n){return true}that.xSteps[i]=fromPercentage([that.xVal[i],that.xVal[i+1]],n)/subRangeRatio(that.xPct[i],that.xPct[i+1]);var totalSteps=(that.xVal[i+1]-that.xVal[i])/that.xNumSteps[i];var highestStep=Math.ceil(Number(totalSteps.toFixed(3))-1);var step=that.xVal[i]+that.xNumSteps[i]*highestStep;that.xHighestCompleteStep[i]=step}function Spectrum(entry,snap,direction,singleStep){this.xPct=[];this.xVal=[];this.xSteps=[singleStep||false];this.xNumSteps=[false];this.xHighestCompleteStep=[];this.snap=snap;this.direction=direction;var index,ordered=[];for(index in entry){if(entry.hasOwnProperty(index)){ordered.push([entry[index],index])}}if(ordered.length&&_typeof(ordered[0][0])==='object'){ordered.sort(function(a,b){return a[0][0]-b[0][0]})}else{ordered.sort(function(a,b){return a[0]-b[0]})}for(index=0;index<ordered.length;index++){handleEntryPoint(ordered[index][1],ordered[index][0],this)}this.xNumSteps=this.xSteps.slice(0);for(index=0;index<this.xNumSteps.length;index++){handleStepPoint(index,this.xNumSteps[index],this)}}Spectrum.prototype.getMargin=function(value){var step=this.xNumSteps[0];if(step&&value%step){throw new Error('noUiSlider: \'limit\' and \'margin\' must be divisible by step.')}return this.xPct.length===2?fromPercentage(this.xVal,value):false};Spectrum.prototype.toStepping=function(value){value=toStepping(this.xVal,this.xPct,value);return value};Spectrum.prototype.fromStepping=function(value){return fromStepping(this.xVal,this.xPct,value)};Spectrum.prototype.getStep=function(value){value=getStep(this.xPct,this.xSteps,this.snap,value);return value};Spectrum.prototype.getNearbySteps=function(value){var j=getJ(value,this.xPct);return{stepBefore:{startValue:this.xVal[j-2],step:this.xNumSteps[j-2],highestStep:this.xHighestCompleteStep[j-2]},thisStep:{startValue:this.xVal[j-1],step:this.xNumSteps[j-1],highestStep:this.xHighestCompleteStep[j-1]},stepAfter:{startValue:this.xVal[j-0],step:this.xNumSteps[j-0],highestStep:this.xHighestCompleteStep[j-0]}}};Spectrum.prototype.countStepDecimals=function(){var stepDecimals=this.xNumSteps.map(countDecimals);return Math.max.apply(null,stepDecimals)};Spectrum.prototype.convert=function(value){return this.getStep(this.toStepping(value))};var defaultFormatter={'to':function to(value){return value!==undefined&&value.toFixed(2)},'from':Number};function testStep(parsed,entry){if(!isNumeric(entry)){throw new Error('noUiSlider: \'step\' is not numeric.')}parsed.singleStep=entry}function testRange(parsed,entry){if((typeof entry==='undefined'?'undefined':_typeof(entry))!=='object'||Array.isArray(entry)){throw new Error('noUiSlider: \'range\' is not an object.')}if(entry.min===undefined||entry.max===undefined){throw new Error('noUiSlider: Missing \'min\' or \'max\' in \'range\'.')}if(entry.min===entry.max){throw new Error('noUiSlider: \'range\' \'min\' and \'max\' cannot be equal.')}parsed.spectrum=new Spectrum(entry,parsed.snap,parsed.dir,parsed.singleStep)}function testStart(parsed,entry){entry=asArray(entry);if(!Array.isArray(entry)||!entry.length){throw new Error('noUiSlider: \'start\' option is incorrect.')}parsed.handles=entry.length;parsed.start=entry}function testSnap(parsed,entry){parsed.snap=entry;if(typeof entry!=='boolean'){throw new Error('noUiSlider: \'snap\' option must be a boolean.')}}function testAnimate(parsed,entry){parsed.animate=entry;if(typeof entry!=='boolean'){throw new Error('noUiSlider: \'animate\' option must be a boolean.')}}function testAnimationDuration(parsed,entry){parsed.animationDuration=entry;if(typeof entry!=='number'){throw new Error('noUiSlider: \'animationDuration\' option must be a number.')}}function testConnect(parsed,entry){var connect=[false];var i;if(entry===true||entry===false){for(i=1;i<parsed.handles;i++){connect.push(entry)}connect.push(false)}else if(!Array.isArray(entry)||!entry.length||entry.length!==parsed.handles+1){throw new Error('noUiSlider: \'connect\' option doesn\'t match handle count.')}else{connect=entry}parsed.connect=connect}function testOrientation(parsed,entry){switch(entry){case'horizontal':parsed.ort=0;break;case'vertical':parsed.ort=1;break;default:throw new Error('noUiSlider: \'orientation\' option is invalid.');}}function testMargin(parsed,entry){if(!isNumeric(entry)){throw new Error('noUiSlider: \'margin\' option must be numeric.')}if(entry===0){return}parsed.margin=parsed.spectrum.getMargin(entry);if(!parsed.margin){throw new Error('noUiSlider: \'margin\' option is only supported on linear sliders.')}}function testLimit(parsed,entry){if(!isNumeric(entry)){throw new Error('noUiSlider: \'limit\' option must be numeric.')}parsed.limit=parsed.spectrum.getMargin(entry);if(!parsed.limit||parsed.handles<2){throw new Error('noUiSlider: \'limit\' option is only supported on linear sliders with 2 or more handles.')}}function testDirection(parsed,entry){switch(entry){case'ltr':parsed.dir=0;break;case'rtl':parsed.dir=1;break;default:throw new Error('noUiSlider: \'direction\' option was not recognized.');}}function testBehaviour(parsed,entry){if(typeof entry!=='string'){throw new Error('noUiSlider: \'behaviour\' must be a string containing options.')}var tap=entry.indexOf('tap')>=0;var drag=entry.indexOf('drag')>=0;var fixed=entry.indexOf('fixed')>=0;var snap=entry.indexOf('snap')>=0;var hover=entry.indexOf('hover')>=0;if(fixed){if(parsed.handles!==2){throw new Error('noUiSlider: \'fixed\' behaviour must be used with 2 handles')}testMargin(parsed,parsed.start[1]-parsed.start[0])}parsed.events={tap:tap||snap,drag:drag,fixed:fixed,snap:snap,hover:hover}}function testTooltips(parsed,entry){if(entry===false){return}else if(entry===true){parsed.tooltips=[];for(var i=0;i<parsed.handles;i++){parsed.tooltips.push(true)}}else{parsed.tooltips=asArray(entry);if(parsed.tooltips.length!==parsed.handles){throw new Error('noUiSlider: must pass a formatter for all handles.')}parsed.tooltips.forEach(function(formatter){if(typeof formatter!=='boolean'&&((typeof formatter==='undefined'?'undefined':_typeof(formatter))!=='object'||typeof formatter.to!=='function')){throw new Error('noUiSlider: \'tooltips\' must be passed a formatter or \'false\'.')}})}}function testFormat(parsed,entry){parsed.format=entry;if(typeof entry.to==='function'&&typeof entry.from==='function'){return true}throw new Error('noUiSlider: \'format\' requires \'to\' and \'from\' methods.')}function testCssPrefix(parsed,entry){if(entry!==undefined&&typeof entry!=='string'&&entry!==false){throw new Error('noUiSlider: \'cssPrefix\' must be a string or `false`.')}parsed.cssPrefix=entry}function testCssClasses(parsed,entry){if(entry!==undefined&&(typeof entry==='undefined'?'undefined':_typeof(entry))!=='object'){throw new Error('noUiSlider: \'cssClasses\' must be an object.')}if(typeof parsed.cssPrefix==='string'){parsed.cssClasses={};for(var key in entry){if(!entry.hasOwnProperty(key)){continue}parsed.cssClasses[key]=parsed.cssPrefix+entry[key]}}else{parsed.cssClasses=entry}}function testUseRaf(parsed,entry){if(entry===true||entry===false){parsed.useRequestAnimationFrame=entry}else{throw new Error('noUiSlider: \'useRequestAnimationFrame\' option should be true (default) or false.')}}function testOptions(options){var parsed={margin:0,limit:0,animate:true,animationDuration:300,format:defaultFormatter},tests;tests={'step':{r:false,t:testStep},'start':{r:true,t:testStart},'connect':{r:true,t:testConnect},'direction':{r:true,t:testDirection},'snap':{r:false,t:testSnap},'animate':{r:false,t:testAnimate},'animationDuration':{r:false,t:testAnimationDuration},'range':{r:true,t:testRange},'orientation':{r:false,t:testOrientation},'margin':{r:false,t:testMargin},'limit':{r:false,t:testLimit},'behaviour':{r:true,t:testBehaviour},'format':{r:false,t:testFormat},'tooltips':{r:false,t:testTooltips},'cssPrefix':{r:false,t:testCssPrefix},'cssClasses':{r:false,t:testCssClasses},'useRequestAnimationFrame':{r:false,t:testUseRaf}};var defaults={'connect':false,'direction':'ltr','behaviour':'tap','orientation':'horizontal','cssPrefix':'noUi-','cssClasses':{target:'target',base:'base',origin:'origin',handle:'handle',horizontal:'horizontal',vertical:'vertical',background:'background',connect:'connect',ltr:'ltr',rtl:'rtl',draggable:'draggable',drag:'state-drag',tap:'state-tap',active:'active',tooltip:'tooltip',pips:'pips',pipsHorizontal:'pips-horizontal',pipsVertical:'pips-vertical',marker:'marker',markerHorizontal:'marker-horizontal',markerVertical:'marker-vertical',markerNormal:'marker-normal',markerLarge:'marker-large',markerSub:'marker-sub',value:'value',valueHorizontal:'value-horizontal',valueVertical:'value-vertical',valueNormal:'value-normal',valueLarge:'value-large',valueSub:'value-sub'},'useRequestAnimationFrame':true};Object.keys(tests).forEach(function(name){if(options[name]===undefined&&defaults[name]===undefined){if(tests[name].r){throw new Error('noUiSlider: \''+name+'\' is required.')}return true}tests[name].t(parsed,options[name]===undefined?defaults[name]:options[name])});parsed.pips=options.pips;var styles=[['left','top'],['right','bottom']];parsed.style=styles[parsed.dir][parsed.ort];parsed.styleOposite=styles[parsed.dir?0:1][parsed.ort];return parsed}function closure(target,options,originalOptions){var actions=getActions();var scope_Target=target;var scope_Locations=[];var scope_Base;var scope_Handles;var scope_HandleNumbers=[];var scope_Connects;var scope_Spectrum=options.spectrum;var scope_Values=[];var scope_Events={};var scope_Self;function addOrigin(base,handleNumber){var origin=addNodeTo(base,options.cssClasses.origin);var handle=addNodeTo(origin,options.cssClasses.handle);handle.setAttribute('data-handle',handleNumber);return origin}function addConnect(base,add){if(!add){return false}return addNodeTo(base,options.cssClasses.connect)}function addElements(connectOptions,base){scope_Handles=[];scope_Connects=[];scope_Connects.push(addConnect(base,connectOptions[0]));for(var i=0;i<options.handles;i++){scope_Handles.push(addOrigin(base,i));scope_HandleNumbers[i]=i;scope_Connects.push(addConnect(base,connectOptions[i+1]))}}function addSlider(target){addClass(target,options.cssClasses.target);if(options.dir===0){addClass(target,options.cssClasses.ltr)}else{addClass(target,options.cssClasses.rtl)}if(options.ort===0){addClass(target,options.cssClasses.horizontal)}else{addClass(target,options.cssClasses.vertical)}scope_Base=addNodeTo(target,options.cssClasses.base)}function addTooltip(handle,handleNumber){if(!options.tooltips[handleNumber]){return false}return addNodeTo(handle.firstChild,options.cssClasses.tooltip)}function tooltips(){var tips=scope_Handles.map(addTooltip);bindEvent('update',function(values,handleNumber,unencoded){if(!tips[handleNumber]){return}var formattedValue=values[handleNumber];if(options.tooltips[handleNumber]!==true){formattedValue=options.tooltips[handleNumber].to(unencoded[handleNumber])}tips[handleNumber].innerHTML=formattedValue})}function getGroup(mode,values,stepped){if(mode==='range'||mode==='steps'){return scope_Spectrum.xVal}if(mode==='count'){var spread=100/(values-1),v,i=0;values=[];while((v=i++*spread)<=100){values.push(v)}mode='positions'}if(mode==='positions'){return values.map(function(value){return scope_Spectrum.fromStepping(stepped?scope_Spectrum.getStep(value):value)})}if(mode==='values'){if(stepped){return values.map(function(value){return scope_Spectrum.fromStepping(scope_Spectrum.getStep(scope_Spectrum.toStepping(value)))})}return values}}function generateSpread(density,mode,group){function safeIncrement(value,increment){return(value+increment).toFixed(7)/1}var indexes={},firstInRange=scope_Spectrum.xVal[0],lastInRange=scope_Spectrum.xVal[scope_Spectrum.xVal.length-1],ignoreFirst=false,ignoreLast=false,prevPct=0;group=unique(group.slice().sort(function(a,b){return a-b}));if(group[0]!==firstInRange){group.unshift(firstInRange);ignoreFirst=true}if(group[group.length-1]!==lastInRange){group.push(lastInRange);ignoreLast=true}group.forEach(function(current,index){var step,i,q,low=current,high=group[index+1],newPct,pctDifference,pctPos,type,steps,realSteps,stepsize;if(mode==='steps'){step=scope_Spectrum.xNumSteps[index]}if(!step){step=high-low}if(low===false||high===undefined){return}step=Math.max(step,1e-7);for(i=low;i<=high;i=safeIncrement(i,step)){newPct=scope_Spectrum.toStepping(i);pctDifference=newPct-prevPct;steps=pctDifference/density;realSteps=Math.round(steps);stepsize=pctDifference/realSteps;for(q=1;q<=realSteps;q+=1){pctPos=prevPct+q*stepsize;indexes[pctPos.toFixed(5)]=['x',0]}type=group.indexOf(i)>-1?1:mode==='steps'?2:0;if(!index&&ignoreFirst){type=0}if(!(i===high&&ignoreLast)){indexes[newPct.toFixed(5)]=[i,type]}prevPct=newPct}});return indexes}function addMarking(spread,filterFunc,formatter){var element=document.createElement('div'),out='',valueSizeClasses=[options.cssClasses.valueNormal,options.cssClasses.valueLarge,options.cssClasses.valueSub],markerSizeClasses=[options.cssClasses.markerNormal,options.cssClasses.markerLarge,options.cssClasses.markerSub],valueOrientationClasses=[options.cssClasses.valueHorizontal,options.cssClasses.valueVertical],markerOrientationClasses=[options.cssClasses.markerHorizontal,options.cssClasses.markerVertical];addClass(element,options.cssClasses.pips);addClass(element,options.ort===0?options.cssClasses.pipsHorizontal:options.cssClasses.pipsVertical);function getClasses(type,source){var a=source===options.cssClasses.value,orientationClasses=a?valueOrientationClasses:markerOrientationClasses,sizeClasses=a?valueSizeClasses:markerSizeClasses;return source+' '+orientationClasses[options.ort]+' '+sizeClasses[type]}function getTags(offset,source,values){return'class="'+getClasses(values[1],source)+'" style="'+options.style+': '+offset+'%"'}function addSpread(offset,values){values[1]=values[1]&&filterFunc?filterFunc(values[0],values[1]):values[1];out+='<div '+getTags(offset,options.cssClasses.marker,values)+'></div>';if(values[1]){out+='<div '+getTags(offset,options.cssClasses.value,values)+'>'+formatter.to(values[0])+'</div>'}}Object.keys(spread).forEach(function(a){addSpread(a,spread[a])});element.innerHTML=out;return element}function pips(grid){var mode=grid.mode,density=grid.density||1,filter=grid.filter||false,values=grid.values||false,stepped=grid.stepped||false,group=getGroup(mode,values,stepped),spread=generateSpread(density,mode,group),format=grid.format||{to:Math.round};return scope_Target.appendChild(addMarking(spread,filter,format))}function baseSize(){var rect=scope_Base.getBoundingClientRect(),alt='offset'+['Width','Height'][options.ort];return options.ort===0?rect.width||scope_Base[alt]:rect.height||scope_Base[alt]}function attachEvent(events,element,callback,data){var method=function method(e){if(scope_Target.hasAttribute('disabled')){return false}if(hasClass(scope_Target,options.cssClasses.tap)){return false}e=fixEvent(e,data.pageOffset);if(events===actions.start&&e.buttons!==undefined&&e.buttons>1){return false}if(data.hover&&e.buttons){return false}e.calcPoint=e.points[options.ort];callback(e,data)};var methods=[];events.split(' ').forEach(function(eventName){element.addEventListener(eventName,method,false);methods.push([eventName,method])});return methods}function fixEvent(e,pageOffset){e.preventDefault();var touch=e.type.indexOf('touch')===0,mouse=e.type.indexOf('mouse')===0,pointer=e.type.indexOf('pointer')===0,x,y,event=e;if(e.type.indexOf('MSPointer')===0){pointer=true}if(touch){if(event.touches.length>1){return false}x=e.changedTouches[0].pageX;y=e.changedTouches[0].pageY}pageOffset=pageOffset||getPageOffset();if(mouse||pointer){x=e.clientX+pageOffset.x;y=e.clientY+pageOffset.y}event.pageOffset=pageOffset;event.points=[x,y];event.cursor=mouse||pointer;return event}function calcPointToPercentage(calcPoint){var location=calcPoint-offset(scope_Base,options.ort);var proposal=location*100/baseSize();return options.dir?100-proposal:proposal}function getClosestHandle(proposal){var closest=100;var handleNumber=false;scope_Handles.forEach(function(handle,index){if(handle.hasAttribute('disabled')){return}var pos=Math.abs(scope_Locations[index]-proposal);if(pos<closest){handleNumber=index;closest=pos}});return handleNumber}function moveHandles(upward,proposal,locations,handleNumbers){var proposals=locations.slice();var b=[!upward,upward];var f=[upward,!upward];handleNumbers=handleNumbers.slice();if(upward){handleNumbers.reverse()}if(handleNumbers.length>1){handleNumbers.forEach(function(handleNumber,o){var to=checkHandlePosition(proposals,handleNumber,proposals[handleNumber]+proposal,b[o],f[o]);if(to===false){proposal=0}else{proposal=to-proposals[handleNumber];proposals[handleNumber]=to}})}else{b=f=[true]}var state=false;handleNumbers.forEach(function(handleNumber,o){state=setHandle(handleNumber,locations[handleNumber]+proposal,b[o],f[o])||state});if(state){handleNumbers.forEach(function(handleNumber){fireEvent('update',handleNumber);fireEvent('slide',handleNumber)})}}function fireEvent(eventName,handleNumber,tap){Object.keys(scope_Events).forEach(function(targetEvent){var eventType=targetEvent.split('.')[0];if(eventName===eventType){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,scope_Values.map(options.format.to),handleNumber,scope_Values.slice(),tap||false,scope_Locations.slice())})}})}function documentLeave(event,data){if(event.type==='mouseout'&&event.target.nodeName==='HTML'&&event.relatedTarget===null){eventEnd(event,data)}}function eventMove(event,data){if(navigator.appVersion.indexOf('MSIE 9')===-1&&event.buttons===0&&data.buttonsProperty!==0){return eventEnd(event,data)}var movement=(options.dir?-1:1)*(event.calcPoint-data.startCalcPoint);var proposal=movement*100/data.baseSize;moveHandles(movement>0,proposal,data.locations,data.handleNumbers)}function eventEnd(event,data){var active=scope_Base.querySelector('.'+options.cssClasses.active);if(active!==null){removeClass(active,options.cssClasses.active)}if(event.cursor){document.body.style.cursor='';document.body.removeEventListener('selectstart',document.body.noUiListener)}document.documentElement.noUiListeners.forEach(function(c){document.documentElement.removeEventListener(c[0],c[1])});removeClass(scope_Target,options.cssClasses.drag);setZindex();data.handleNumbers.forEach(function(handleNumber){fireEvent('set',handleNumber);fireEvent('change',handleNumber);fireEvent('end',handleNumber)})}function eventStart(event,data){if(data.handleNumbers.length===1){var handle=scope_Handles[data.handleNumbers[0]];if(handle.hasAttribute('disabled')){return false}addClass(handle.children[0],options.cssClasses.active)}event.preventDefault();event.stopPropagation();var moveEvent=attachEvent(actions.move,document.documentElement,eventMove,{startCalcPoint:event.calcPoint,baseSize:baseSize(),pageOffset:event.pageOffset,handleNumbers:data.handleNumbers,buttonsProperty:event.buttons,locations:scope_Locations.slice()});var endEvent=attachEvent(actions.end,document.documentElement,eventEnd,{handleNumbers:data.handleNumbers});var outEvent=attachEvent('mouseout',document.documentElement,documentLeave,{handleNumbers:data.handleNumbers});document.documentElement.noUiListeners=moveEvent.concat(endEvent,outEvent);if(event.cursor){document.body.style.cursor=getComputedStyle(event.target).cursor;if(scope_Handles.length>1){addClass(scope_Target,options.cssClasses.drag)}var f=function f(){return false};document.body.noUiListener=f;document.body.addEventListener('selectstart',f,false)}data.handleNumbers.forEach(function(handleNumber){fireEvent('start',handleNumber)})}function eventTap(event){event.stopPropagation();var proposal=calcPointToPercentage(event.calcPoint);var handleNumber=getClosestHandle(proposal);if(handleNumber===false){return false}if(!options.events.snap){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration)}setHandle(handleNumber,proposal,true,true);setZindex();fireEvent('slide',handleNumber,true);fireEvent('set',handleNumber,true);fireEvent('change',handleNumber,true);fireEvent('update',handleNumber,true);if(options.events.snap){eventStart(event,{handleNumbers:[handleNumber]})}}function eventHover(event){var proposal=calcPointToPercentage(event.calcPoint);var to=scope_Spectrum.getStep(proposal);var value=scope_Spectrum.fromStepping(to);Object.keys(scope_Events).forEach(function(targetEvent){if('hover'===targetEvent.split('.')[0]){scope_Events[targetEvent].forEach(function(callback){callback.call(scope_Self,value)})}})}function bindSliderEvents(behaviour){if(!behaviour.fixed){scope_Handles.forEach(function(handle,index){attachEvent(actions.start,handle.children[0],eventStart,{handleNumbers:[index]})})}if(behaviour.tap){attachEvent(actions.start,scope_Base,eventTap,{})}if(behaviour.hover){attachEvent(actions.move,scope_Base,eventHover,{hover:true})}if(behaviour.drag){scope_Connects.forEach(function(connect,index){if(connect===false||index===0||index===scope_Connects.length-1){return}var handleBefore=scope_Handles[index-1];var handleAfter=scope_Handles[index];var eventHolders=[connect];addClass(connect,options.cssClasses.draggable);if(behaviour.fixed){eventHolders.push(handleBefore.children[0]);eventHolders.push(handleAfter.children[0])}eventHolders.forEach(function(eventHolder){attachEvent(actions.start,eventHolder,eventStart,{handles:[handleBefore,handleAfter],handleNumbers:[index-1,index]})})})}}function checkHandlePosition(reference,handleNumber,to,lookBackward,lookForward){if(scope_Handles.length>1){if(lookBackward&&handleNumber>0){to=Math.max(to,reference[handleNumber-1]+options.margin)}if(lookForward&&handleNumber<scope_Handles.length-1){to=Math.min(to,reference[handleNumber+1]-options.margin)}}if(scope_Handles.length>1&&options.limit){if(lookBackward&&handleNumber>0){to=Math.min(to,reference[handleNumber-1]+options.limit)}if(lookForward&&handleNumber<scope_Handles.length-1){to=Math.max(to,reference[handleNumber+1]-options.limit)}}to=scope_Spectrum.getStep(to);to=limit(to);if(to===reference[handleNumber]){return false}return to}function toPct(pct){return pct+'%'}function updateHandlePosition(handleNumber,to){scope_Locations[handleNumber]=to;scope_Values[handleNumber]=scope_Spectrum.fromStepping(to);var stateUpdate=function stateUpdate(){scope_Handles[handleNumber].style[options.style]=toPct(to);updateConnect(handleNumber);updateConnect(handleNumber+1)};if(window.requestAnimationFrame&&options.useRequestAnimationFrame){window.requestAnimationFrame(stateUpdate)}else{stateUpdate()}}function setZindex(){scope_HandleNumbers.forEach(function(handleNumber){var dir=scope_Locations[handleNumber]>50?-1:1;var zIndex=3+(scope_Handles.length+dir*handleNumber);scope_Handles[handleNumber].childNodes[0].style.zIndex=zIndex})}function setHandle(handleNumber,to,lookBackward,lookForward){to=checkHandlePosition(scope_Locations,handleNumber,to,lookBackward,lookForward);if(to===false){return false}updateHandlePosition(handleNumber,to);return true}function updateConnect(index){if(!scope_Connects[index]){return}var l=0;var h=100;if(index!==0){l=scope_Locations[index-1]}if(index!==scope_Connects.length-1){h=scope_Locations[index]}scope_Connects[index].style[options.style]=toPct(l);scope_Connects[index].style[options.styleOposite]=toPct(100-h)}function setValue(to,handleNumber){if(to===null||to===false){return}if(typeof to==='number'){to=String(to)}to=options.format.from(to);if(to!==false&&!isNaN(to)){setHandle(handleNumber,scope_Spectrum.toStepping(to),false,false)}}function valueSet(input,fireSetEvent){var values=asArray(input);var isInit=scope_Locations[0]===undefined;fireSetEvent=fireSetEvent===undefined?true:!!fireSetEvent;values.forEach(setValue);if(options.animate&&!isInit){addClassFor(scope_Target,options.cssClasses.tap,options.animationDuration)}scope_HandleNumbers.forEach(function(handleNumber){setHandle(handleNumber,scope_Locations[handleNumber],true,false)});setZindex();scope_HandleNumbers.forEach(function(handleNumber){fireEvent('update',handleNumber);if(values[handleNumber]!==null&&fireSetEvent){fireEvent('set',handleNumber)}})}function valueReset(fireSetEvent){valueSet(options.start,fireSetEvent)}function valueGet(){var values=scope_Values.map(options.format.to);if(values.length===1){return values[0]}return values}function destroy(){for(var key in options.cssClasses){if(!options.cssClasses.hasOwnProperty(key)){continue}removeClass(scope_Target,options.cssClasses[key])}while(scope_Target.firstChild){scope_Target.removeChild(scope_Target.firstChild)}delete scope_Target.noUiSlider}function getCurrentStep(){return scope_Locations.map(function(location,index){var nearbySteps=scope_Spectrum.getNearbySteps(location);var value=scope_Values[index];var increment=nearbySteps.thisStep.step;var decrement=null;if(increment!==false){if(value+increment>nearbySteps.stepAfter.startValue){increment=nearbySteps.stepAfter.startValue-value}}if(value>nearbySteps.thisStep.startValue){decrement=nearbySteps.thisStep.step}else if(nearbySteps.stepBefore.step===false){decrement=false}else{decrement=value-nearbySteps.stepBefore.highestStep}if(location===100){increment=null}else if(location===0){decrement=null}var stepDecimals=scope_Spectrum.countStepDecimals();if(increment!==null&&increment!==false){increment=Number(increment.toFixed(stepDecimals))}if(decrement!==null&&decrement!==false){decrement=Number(decrement.toFixed(stepDecimals))}return[decrement,increment]})}function bindEvent(namespacedEvent,callback){scope_Events[namespacedEvent]=scope_Events[namespacedEvent]||[];scope_Events[namespacedEvent].push(callback);if(namespacedEvent.split('.')[0]==='update'){scope_Handles.forEach(function(a,index){fireEvent('update',index)})}}function removeEvent(namespacedEvent){var event=namespacedEvent&&namespacedEvent.split('.')[0],namespace=event&&namespacedEvent.substring(event.length);Object.keys(scope_Events).forEach(function(bind){var tEvent=bind.split('.')[0],tNamespace=bind.substring(tEvent.length);if((!event||event===tEvent)&&(!namespace||namespace===tNamespace)){delete scope_Events[bind]}})}function updateOptions(optionsToUpdate,fireSetEvent){var v=valueGet();var updateAble=['margin','limit','range','animate','snap','step','format'];updateAble.forEach(function(name){if(optionsToUpdate[name]!==undefined){originalOptions[name]=optionsToUpdate[name]}});var newOptions=testOptions(originalOptions);updateAble.forEach(function(name){if(optionsToUpdate[name]!==undefined){options[name]=newOptions[name]}});newOptions.spectrum.direction=scope_Spectrum.direction;scope_Spectrum=newOptions.spectrum;options.margin=newOptions.margin;options.limit=newOptions.limit;scope_Locations=[];valueSet(optionsToUpdate.start||v,fireSetEvent)}if(scope_Target.noUiSlider){throw new Error('Slider was already initialized.')}addSlider(scope_Target);addElements(options.connect,scope_Base);scope_Self={destroy:destroy,steps:getCurrentStep,on:bindEvent,off:removeEvent,get:valueGet,set:valueSet,reset:valueReset,__moveHandles:function __moveHandles(a,b,c){moveHandles(a,b,scope_Locations,c)},options:originalOptions,updateOptions:updateOptions,target:scope_Target,pips:pips};bindSliderEvents(options.events);valueSet(options.start);if(options.pips){pips(options.pips)}if(options.tooltips){tooltips()}return scope_Self}function initialize(target,originalOptions){if(!target.nodeName){throw new Error('noUiSlider.create requires a single element.')}var options=testOptions(originalOptions,target);var api=closure(target,options,originalOptions);target.noUiSlider=api;return api}return{create:initialize}}()});
;(function(define){
!function(a){var b=navigator.userAgent;a.HTMLPictureElement&&/ecko/.test(b)&&b.match(/rv\:(\d+)/)&&RegExp.$1<45&&addEventListener("resize",function(){var b,c=document.createElement("source"),d=function(a){var b,d,e=a.parentNode;"PICTURE"===e.nodeName.toUpperCase()?(b=c.cloneNode(),e.insertBefore(b,e.firstElementChild),setTimeout(function(){e.removeChild(b)})):(!a._pfLastSize||a.offsetWidth>a._pfLastSize)&&(a._pfLastSize=a.offsetWidth,d=a.sizes,a.sizes+=",100vw",setTimeout(function(){a.sizes=d}))},e=function(){var a,b=document.querySelectorAll("picture > img, img[srcset][sizes]");for(a=0;a<b.length;a++)d(b[a])},f=function(){clearTimeout(b),b=setTimeout(e,99)},g=a.matchMedia&&matchMedia("(orientation: landscape)"),h=function(){f(),g&&g.addListener&&g.addListener(f)};return c.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?h():document.addEventListener("DOMContentLoaded",h),f}())}(window),function(a,b,c){"use strict";function d(a){return" "===a||"\t"===a||"\n"===a||"\f"===a||"\r"===a}function e(b,c){var d=new a.Image;return d.onerror=function(){A[b]=!1,ba()},d.onload=function(){A[b]=1===d.width,ba()},d.src=c,"pending"}function f(){M=!1,P=a.devicePixelRatio,N={},O={},s.DPR=P||1,Q.width=Math.max(a.innerWidth||0,z.clientWidth),Q.height=Math.max(a.innerHeight||0,z.clientHeight),Q.vw=Q.width/100,Q.vh=Q.height/100,r=[Q.height,Q.width,P].join("-"),Q.em=s.getEmValue(),Q.rem=Q.em}function g(a,b,c,d){var e,f,g,h;return"saveData"===B.algorithm?a>2.7?h=c+1:(f=b-c,e=Math.pow(a-.6,1.5),g=f*e,d&&(g+=.1*e),h=a+g):h=c>1?Math.sqrt(a*b):a,h>c}function h(a){var b,c=s.getSet(a),d=!1;"pending"!==c&&(d=r,c&&(b=s.setRes(c),s.applySetCandidate(b,a))),a[s.ns].evaled=d}function i(a,b){return a.res-b.res}function j(a,b,c){var d;return!c&&b&&(c=a[s.ns].sets,c=c&&c[c.length-1]),d=k(b,c),d&&(b=s.makeUrl(b),a[s.ns].curSrc=b,a[s.ns].curCan=d,d.res||aa(d,d.set.sizes)),d}function k(a,b){var c,d,e;if(a&&b)for(e=s.parseSet(b),a=s.makeUrl(a),c=0;c<e.length;c++)if(a===s.makeUrl(e[c].url)){d=e[c];break}return d}function l(a,b){var c,d,e,f,g=a.getElementsByTagName("source");for(c=0,d=g.length;d>c;c++)e=g[c],e[s.ns]=!0,f=e.getAttribute("srcset"),f&&b.push({srcset:f,media:e.getAttribute("media"),type:e.getAttribute("type"),sizes:e.getAttribute("sizes")})}function m(a,b){function c(b){var c,d=b.exec(a.substring(m));return d?(c=d[0],m+=c.length,c):void 0}function e(){var a,c,d,e,f,i,j,k,l,m=!1,o={};for(e=0;e<h.length;e++)f=h[e],i=f[f.length-1],j=f.substring(0,f.length-1),k=parseInt(j,10),l=parseFloat(j),X.test(j)&&"w"===i?((a||c)&&(m=!0),0===k?m=!0:a=k):Y.test(j)&&"x"===i?((a||c||d)&&(m=!0),0>l?m=!0:c=l):X.test(j)&&"h"===i?((d||c)&&(m=!0),0===k?m=!0:d=k):m=!0;m||(o.url=g,a&&(o.w=a),c&&(o.d=c),d&&(o.h=d),d||c||a||(o.d=1),1===o.d&&(b.has1x=!0),o.set=b,n.push(o))}function f(){for(c(T),i="",j="in descriptor";;){if(k=a.charAt(m),"in descriptor"===j){if(d(k))i&&(h.push(i),i="",j="after descriptor");else{if(","===k)return m+=1,i&&h.push(i),void e();if("("===k)i+=k,j="in parens";else{if(""===k)return i&&h.push(i),void e();i+=k}}}else if("in parens"===j){if(")"===k)i+=k,j="in descriptor";else{if(""===k)return h.push(i),void e();i+=k}}else if("after descriptor"===j)if(d(k));else{if(""===k)return void e();j="in descriptor",m-=1}m+=1}}for(var g,h,i,j,k,l=a.length,m=0,n=[];;){if(c(U),m>=l)return n;g=c(V),h=[],","===g.slice(-1)?(g=g.replace(W,""),e()):f()}}function n(a){function b(a){function b(){f&&(g.push(f),f="")}function c(){g[0]&&(h.push(g),g=[])}for(var e,f="",g=[],h=[],i=0,j=0,k=!1;;){if(e=a.charAt(j),""===e)return b(),c(),h;if(k){if("*"===e&&"/"===a[j+1]){k=!1,j+=2,b();continue}j+=1}else{if(d(e)){if(a.charAt(j-1)&&d(a.charAt(j-1))||!f){j+=1;continue}if(0===i){b(),j+=1;continue}e=" "}else if("("===e)i+=1;else if(")"===e)i-=1;else{if(","===e){b(),c(),j+=1;continue}if("/"===e&&"*"===a.charAt(j+1)){k=!0,j+=2;continue}}f+=e,j+=1}}}function c(a){return k.test(a)&&parseFloat(a)>=0?!0:l.test(a)?!0:"0"===a||"-0"===a||"+0"===a?!0:!1}var e,f,g,h,i,j,k=/^(?:[+-]?[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?(?:ch|cm|em|ex|in|mm|pc|pt|px|rem|vh|vmin|vmax|vw)$/i,l=/^calc\((?:[0-9a-z \.\+\-\*\/\(\)]+)\)$/i;for(f=b(a),g=f.length,e=0;g>e;e++)if(h=f[e],i=h[h.length-1],c(i)){if(j=i,h.pop(),0===h.length)return j;if(h=h.join(" "),s.matchesMedia(h))return j}return"100vw"}b.createElement("picture");var o,p,q,r,s={},t=!1,u=function(){},v=b.createElement("img"),w=v.getAttribute,x=v.setAttribute,y=v.removeAttribute,z=b.documentElement,A={},B={algorithm:""},C="data-pfsrc",D=C+"set",E=navigator.userAgent,F=/rident/.test(E)||/ecko/.test(E)&&E.match(/rv\:(\d+)/)&&RegExp.$1>35,G="currentSrc",H=/\s+\+?\d+(e\d+)?w/,I=/(\([^)]+\))?\s*(.+)/,J=a.picturefillCFG,K="position:absolute;left:0;visibility:hidden;display:block;padding:0;border:none;font-size:1em;width:1em;overflow:hidden;clip:rect(0px, 0px, 0px, 0px)",L="font-size:100%!important;",M=!0,N={},O={},P=a.devicePixelRatio,Q={px:1,"in":96},R=b.createElement("a"),S=!1,T=/^[ \t\n\r\u000c]+/,U=/^[, \t\n\r\u000c]+/,V=/^[^ \t\n\r\u000c]+/,W=/[,]+$/,X=/^\d+$/,Y=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,Z=function(a,b,c,d){a.addEventListener?a.addEventListener(b,c,d||!1):a.attachEvent&&a.attachEvent("on"+b,c)},$=function(a){var b={};return function(c){return c in b||(b[c]=a(c)),b[c]}},_=function(){var a=/^([\d\.]+)(em|vw|px)$/,b=function(){for(var a=arguments,b=0,c=a[0];++b in a;)c=c.replace(a[b],a[++b]);return c},c=$(function(a){return"return "+b((a||"").toLowerCase(),/\band\b/g,"&&",/,/g,"||",/min-([a-z-\s]+):/g,"e.$1>=",/max-([a-z-\s]+):/g,"e.$1<=",/calc([^)]+)/g,"($1)",/(\d+[\.]*[\d]*)([a-z]+)/g,"($1 * e.$2)",/^(?!(e.[a-z]|[0-9\.&=|><\+\-\*\(\)\/])).*/gi,"")+";"});return function(b,d){var e;if(!(b in N))if(N[b]=!1,d&&(e=b.match(a)))N[b]=e[1]*Q[e[2]];else try{N[b]=new Function("e",c(b))(Q)}catch(f){}return N[b]}}(),aa=function(a,b){return a.w?(a.cWidth=s.calcListLength(b||"100vw"),a.res=a.w/a.cWidth):a.res=a.d,a},ba=function(a){if(t){var c,d,e,f=a||{};if(f.elements&&1===f.elements.nodeType&&("IMG"===f.elements.nodeName.toUpperCase()?f.elements=[f.elements]:(f.context=f.elements,f.elements=null)),c=f.elements||s.qsa(f.context||b,f.reevaluate||f.reselect?s.sel:s.selShort),e=c.length){for(s.setupRun(f),S=!0,d=0;e>d;d++)s.fillImg(c[d],f);s.teardownRun(f)}}};o=a.console&&function(){}?function(a){}:u,G in v||(G="src"),A["image/jpeg"]=!0,A["image/gif"]=!0,A["image/png"]=!0,A["image/svg+xml"]=b.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"),s.ns=("pf"+new Date().getTime()).substr(0,9),s.supSrcset="srcset"in v,s.supSizes="sizes"in v,s.supPicture=!!a.HTMLPictureElement,s.supSrcset&&s.supPicture&&!s.supSizes&&!function(a){v.srcset="data:,a",a.src="data:,a",s.supSrcset=v.complete===a.complete,s.supPicture=s.supSrcset&&s.supPicture}(b.createElement("img")),s.supSrcset&&!s.supSizes?!function(){var a="data:image/gif;base64,R0lGODlhAgABAPAAAP///wAAACH5BAAAAAAALAAAAAACAAEAAAICBAoAOw==",c="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",d=b.createElement("img"),e=function(){var a=d.width;2===a&&(s.supSizes=!0),q=s.supSrcset&&!s.supSizes,t=!0,setTimeout(ba)};d.onload=e,d.onerror=e,d.setAttribute("sizes","9px"),d.srcset=c+" 1w,"+a+" 9w",d.src=c}():t=!0,s.selShort="picture>img,img[srcset]",s.sel=s.selShort,s.cfg=B,s.DPR=P||1,s.u=Q,s.types=A,s.setSize=u,s.makeUrl=$(function(a){return R.href=a,R.href}),s.qsa=function(a,b){return"querySelector"in a?a.querySelectorAll(b):[]},s.matchesMedia=function(){return a.matchMedia&&(matchMedia("(min-width: 0.1em)")||{}).matches?s.matchesMedia=function(a){return!a||matchMedia(a).matches}:s.matchesMedia=s.mMQ,s.matchesMedia.apply(this,arguments)},s.mMQ=function(a){return a?_(a):!0},s.calcLength=function(a){var b=_(a,!0)||!1;return 0>b&&(b=!1),b},s.supportsType=function(a){return a?A[a]:!0},s.parseSize=$(function(a){var b=(a||"").match(I);return{media:b&&b[1],length:b&&b[2]}}),s.parseSet=function(a){return a.cands||(a.cands=m(a.srcset,a)),a.cands},s.getEmValue=function(){var a;if(!p&&(a=b.body)){var c=b.createElement("div"),d=z.style.cssText,e=a.style.cssText;c.style.cssText=K,z.style.cssText=L,a.style.cssText=L,a.appendChild(c),p=c.offsetWidth,a.removeChild(c),p=parseFloat(p,10),z.style.cssText=d,a.style.cssText=e}return p||16},s.calcListLength=function(a){if(!(a in O)||B.uT){var b=s.calcLength(n(a));O[a]=b?b:Q.width}return O[a]},s.setRes=function(a){var b;if(a){b=s.parseSet(a);for(var c=0,d=b.length;d>c;c++)aa(b[c],a.sizes)}return b},s.setRes.res=aa,s.applySetCandidate=function(a,b){if(a.length){var c,d,e,f,h,k,l,m,n,o=b[s.ns],p=s.DPR;if(k=o.curSrc||b[G],l=o.curCan||j(b,k,a[0].set),l&&l.set===a[0].set&&(n=F&&!b.complete&&l.res-.1>p,n||(l.cached=!0,l.res>=p&&(h=l))),!h)for(a.sort(i),f=a.length,h=a[f-1],d=0;f>d;d++)if(c=a[d],c.res>=p){e=d-1,h=a[e]&&(n||k!==s.makeUrl(c.url))&&g(a[e].res,c.res,p,a[e].cached)?a[e]:c;break}h&&(m=s.makeUrl(h.url),o.curSrc=m,o.curCan=h,m!==k&&s.setSrc(b,h),s.setSize(b))}},s.setSrc=function(a,b){var c;a.src=b.url,"image/svg+xml"===b.set.type&&(c=a.style.width,a.style.width=a.offsetWidth+1+"px",a.offsetWidth+1&&(a.style.width=c))},s.getSet=function(a){var b,c,d,e=!1,f=a[s.ns].sets;for(b=0;b<f.length&&!e;b++)if(c=f[b],c.srcset&&s.matchesMedia(c.media)&&(d=s.supportsType(c.type))){"pending"===d&&(c=d),e=c;break}return e},s.parseSets=function(a,b,d){var e,f,g,h,i=b&&"PICTURE"===b.nodeName.toUpperCase(),j=a[s.ns];(j.src===c||d.src)&&(j.src=w.call(a,"src"),j.src?x.call(a,C,j.src):y.call(a,C)),(j.srcset===c||d.srcset||!s.supSrcset||a.srcset)&&(e=w.call(a,"srcset"),j.srcset=e,h=!0),j.sets=[],i&&(j.pic=!0,l(b,j.sets)),j.srcset?(f={srcset:j.srcset,sizes:w.call(a,"sizes")},j.sets.push(f),g=(q||j.src)&&H.test(j.srcset||""),g||!j.src||k(j.src,f)||f.has1x||(f.srcset+=", "+j.src,f.cands.push({url:j.src,d:1,set:f}))):j.src&&j.sets.push({srcset:j.src,sizes:null}),j.curCan=null,j.curSrc=c,j.supported=!(i||f&&!s.supSrcset||g&&!s.supSizes),h&&s.supSrcset&&!j.supported&&(e?(x.call(a,D,e),a.srcset=""):y.call(a,D)),j.supported&&!j.srcset&&(!j.src&&a.src||a.src!==s.makeUrl(j.src))&&(null===j.src?a.removeAttribute("src"):a.src=j.src),j.parsed=!0},s.fillImg=function(a,b){var c,d=b.reselect||b.reevaluate;a[s.ns]||(a[s.ns]={}),c=a[s.ns],(d||c.evaled!==r)&&((!c.parsed||b.reevaluate)&&s.parseSets(a,a.parentNode,b),c.supported?c.evaled=r:h(a))},s.setupRun=function(){(!S||M||P!==a.devicePixelRatio)&&f()},s.supPicture?(ba=u,s.fillImg=u):!function(){var c,d=a.attachEvent?/d$|^c/:/d$|^c|^i/,e=function(){var a=b.readyState||"";f=setTimeout(e,"loading"===a?200:999),b.body&&(s.fillImgs(),c=c||d.test(a),c&&clearTimeout(f))},f=setTimeout(e,b.body?9:99),g=function(a,b){var c,d,e=function(){var f=new Date-d;b>f?c=setTimeout(e,b-f):(c=null,a())};return function(){d=new Date,c||(c=setTimeout(e,b))}},h=z.clientHeight,i=function(){M=Math.max(a.innerWidth||0,z.clientWidth)!==Q.width||z.clientHeight!==h,h=z.clientHeight,M&&s.fillImgs()};Z(a,"resize",g(i,99)),Z(b,"readystatechange",e)}(),s.picturefill=ba,s.fillImgs=ba,s.teardownRun=u,ba._=s,a.picturefillCFG={pf:s,push:function(a){var b=a.shift();"function"==typeof s[b]?s[b].apply(s,a):(B[b]=a[0],S&&s.fillImgs({reselect:!0}))}};for(;J&&J.length;)a.picturefillCFG.push(J.shift());a.picturefill=ba,"object"==typeof module&&"object"==typeof module.exports?module.exports=ba:"function"==typeof define&&define.amd&&define("picturefill",function(){return ba}),s.supPicture||(A["image/webp"]=e("image/webp","data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAABBxAR/Q9ERP8DAABWUDggGAAAADABAJ0BKgEAAQADADQlpAADcAD++/1QAA=="))}(window,document);

})(getCurriedBundleDefineShim('utilities/vendor/picturefill/3.0.2/js/picturefill.min', define));;define('utilities/vendor/text-mask/2.0.0/js/addons/createAutoCorrectedDatePipe',['exports'],function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=createAutoCorrectedDatePipe;function createAutoCorrectedDatePipe(){var dateFormat=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'mm dd yyyy';return function(conformedValue){var indexesOfPipedChars=[];var dateFormatArray=dateFormat.split(/[^dmy]+/);var maxValue={'dd':31,'mm':12,'yyyy':9999};var minValue={'dd':1,'mm':1,'yyyy':1};var conformedValueArr=conformedValue.split('');dateFormatArray.forEach(function(format){var position=dateFormat.indexOf(format);var maxFirstDigit=parseInt(maxValue[format].toString().substr(0,1),10);if(parseInt(conformedValueArr[position],10)>maxFirstDigit){conformedValueArr[position+1]=conformedValueArr[position];conformedValueArr[position]=0;indexesOfPipedChars.push(position)}});var isInvalid=dateFormatArray.some(function(format){var position=dateFormat.indexOf(format);var length=format.length;var textValue=conformedValue.substr(position,length).replace(/\D/g,'');var value=parseInt(textValue,10);return value>maxValue[format]||textValue.length===length&&value<minValue[format]});if(isInvalid){return false}return{value:conformedValueArr.join(''),indexesOfPipedChars:indexesOfPipedChars}}}});
;define('utilities/vendor/text-mask/2.0.0/js/addons/createNumberMask',['exports'],function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=createNumberMask;var _typeof=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};var dollarSign='$';var emptyString='';var comma=',';var period='.';var minus='-';var minusRegExp=/-/;var nonDigitsRegExp=/\D+/g;var number='number';var digitRegExp=/\d/;var caretTrap='[]';function createNumberMask(){var _ref=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},_ref$prefix=_ref.prefix,prefix=_ref$prefix===undefined?dollarSign:_ref$prefix,_ref$suffix=_ref.suffix,suffix=_ref$suffix===undefined?emptyString:_ref$suffix,_ref$includeThousands=_ref.includeThousandsSeparator,includeThousandsSeparator=_ref$includeThousands===undefined?true:_ref$includeThousands,_ref$thousandsSeparat=_ref.thousandsSeparatorSymbol,thousandsSeparatorSymbol=_ref$thousandsSeparat===undefined?comma:_ref$thousandsSeparat,_ref$allowDecimal=_ref.allowDecimal,allowDecimal=_ref$allowDecimal===undefined?false:_ref$allowDecimal,_ref$decimalSymbol=_ref.decimalSymbol,decimalSymbol=_ref$decimalSymbol===undefined?period:_ref$decimalSymbol,_ref$decimalLimit=_ref.decimalLimit,decimalLimit=_ref$decimalLimit===undefined?2:_ref$decimalLimit,_ref$requireDecimal=_ref.requireDecimal,requireDecimal=_ref$requireDecimal===undefined?false:_ref$requireDecimal,_ref$allowNegative=_ref.allowNegative,allowNegative=_ref$allowNegative===undefined?false:_ref$allowNegative;var prefixLength=prefix.length;function numberMask(rawValue){var rawValueLength=rawValue.length;if(rawValue===emptyString||rawValue[0]===prefix[0]&&rawValueLength===1){return prefix.split(emptyString).concat([digitRegExp]).concat(suffix.split(emptyString))}var indexOfLastDecimal=rawValue.lastIndexOf(decimalSymbol);var hasDecimal=indexOfLastDecimal!==-1;var isNegative=rawValue[0]===minus&&allowNegative;var integer=void 0;var fraction=void 0;var mask=void 0;if(hasDecimal&&(allowDecimal||requireDecimal)){integer=rawValue.slice(0,indexOfLastDecimal);fraction=rawValue.slice(indexOfLastDecimal+1,rawValueLength);fraction=convertToMask(fraction.replace(nonDigitsRegExp,emptyString))}else{integer=rawValue}integer=integer.replace(nonDigitsRegExp,emptyString);integer=includeThousandsSeparator?addThousandsSeparator(integer,thousandsSeparatorSymbol):integer;mask=convertToMask(integer);if(hasDecimal&&allowDecimal||requireDecimal===true){if(rawValue[indexOfLastDecimal-1]!==decimalSymbol){mask.push(caretTrap)}mask.push(decimalSymbol,caretTrap);if(fraction){if((typeof decimalLimit==='undefined'?'undefined':_typeof(decimalLimit))===number){fraction=fraction.slice(0,decimalLimit)}mask=mask.concat(fraction)}if(requireDecimal===true&&rawValue[indexOfLastDecimal-1]===decimalSymbol){mask.push(digitRegExp)}}if(prefixLength>0){mask=prefix.split(emptyString).concat(mask)}if(isNegative){if(mask.length===prefixLength){mask.push(digitRegExp)}mask=[minusRegExp].concat(mask)}if(suffix.length>0){mask=mask.concat(suffix.split(emptyString))}return mask}numberMask.instanceOf='createNumberMask';return numberMask}function convertToMask(strNumber){return strNumber.split(emptyString).map(function(char){return digitRegExp.test(char)?digitRegExp:char})}function addThousandsSeparator(n,thousandsSeparatorSymbol){return n.replace(/\B(?=(\d{3})+(?!\d))/g,thousandsSeparatorSymbol)}});
;define('utilities/vendor/text-mask/2.0.0/js/addons/emailMask',['exports','./emailPipe'],function(exports,_emailPipe){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _emailPipe2=_interopRequireDefault(_emailPipe);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var asterisk='*';var dot='.';var emptyString='';var atSymbol='@';var caretTrap='[]';var space=' ';var g='g';var anyNonWhitespaceRegExp=/[^\s]/;var anyNonDotOrWhitespaceRegExp=/[^.\s]/;var allWhitespaceRegExp=/\s/g;function emailMask(rawValue,config){rawValue=rawValue.replace(allWhitespaceRegExp,emptyString);var placeholderChar=config.placeholderChar,currentCaretPosition=config.currentCaretPosition;var indexOfFirstAtSymbol=rawValue.indexOf(atSymbol);var indexOfLastDot=rawValue.lastIndexOf(dot);var indexOfTopLevelDomainDot=indexOfLastDot<indexOfFirstAtSymbol?-1:indexOfLastDot;var localPartToDomainConnector=getConnector(rawValue,indexOfFirstAtSymbol+1,atSymbol);var domainNameToTopLevelDomainConnector=getConnector(rawValue,indexOfTopLevelDomainDot-1,dot);var localPart=getLocalPart(rawValue,indexOfFirstAtSymbol,placeholderChar);var domainName=getDomainName(rawValue,indexOfFirstAtSymbol,indexOfTopLevelDomainDot,placeholderChar);var topLevelDomain=getTopLevelDomain(rawValue,indexOfTopLevelDomainDot,placeholderChar,currentCaretPosition);localPart=convertToMask(localPart);domainName=convertToMask(domainName);topLevelDomain=convertToMask(topLevelDomain,true);var mask=localPart.concat(localPartToDomainConnector).concat(domainName).concat(domainNameToTopLevelDomainConnector).concat(topLevelDomain);return mask}function getConnector(rawValue,indexOfConnection,connectionSymbol){var connector=[];if(rawValue[indexOfConnection]===connectionSymbol){connector.push(connectionSymbol)}else{connector.push(caretTrap,connectionSymbol)}connector.push(caretTrap);return connector}function getLocalPart(rawValue,indexOfFirstAtSymbol){if(indexOfFirstAtSymbol===-1){return rawValue}else{return rawValue.slice(0,indexOfFirstAtSymbol)}}function getDomainName(rawValue,indexOfFirstAtSymbol,indexOfTopLevelDomainDot,placeholderChar){var domainName=emptyString;if(indexOfFirstAtSymbol!==-1){if(indexOfTopLevelDomainDot===-1){domainName=rawValue.slice(indexOfFirstAtSymbol+1,rawValue.length)}else{domainName=rawValue.slice(indexOfFirstAtSymbol+1,indexOfTopLevelDomainDot)}}domainName=domainName.replace(new RegExp('[\\s'+placeholderChar+']',g),emptyString);if(domainName===atSymbol){return asterisk}else if(domainName.length<1){return space}else if(domainName[domainName.length-1]===dot){return domainName.slice(0,domainName.length-1)}else{return domainName}}function getTopLevelDomain(rawValue,indexOfTopLevelDomainDot,placeholderChar,currentCaretPosition){var topLevelDomain=emptyString;if(indexOfTopLevelDomainDot!==-1){topLevelDomain=rawValue.slice(indexOfTopLevelDomainDot+1,rawValue.length)}topLevelDomain=topLevelDomain.replace(new RegExp('[\\s'+placeholderChar+'.]',g),emptyString);if(topLevelDomain.length===0){return rawValue[indexOfTopLevelDomainDot-1]===dot&&currentCaretPosition!==rawValue.length?asterisk:emptyString}else{return topLevelDomain}}function convertToMask(str,noDots){return str.split(emptyString).map(function(char){return char===space?char:noDots?anyNonDotOrWhitespaceRegExp:anyNonWhitespaceRegExp})}exports.default={mask:emailMask,pipe:_emailPipe2.default}});
;define('utilities/vendor/text-mask/2.0.0/js/addons/emailPipe',['exports'],function(exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=emailPipe;var atSymbol='@';var allAtSymbolsRegExp=/@/g;var emptyString='';var atDot='@.';var dot='.';var dotDot='..';var emptyArray=[];var allDotsRegExp=/\./g;function emailPipe(conformedValue,config){var currentCaretPosition=config.currentCaretPosition,rawValue=config.rawValue,previousConformedValue=config.previousConformedValue,placeholderChar=config.placeholderChar;var value=conformedValue;value=removeAllAtSymbolsButFirst(value);var indexOfAtDot=value.indexOf(atDot);var emptyEmail=rawValue.match(new RegExp('[^@\\s.'+placeholderChar+']'))===null;if(emptyEmail){return emptyString}if(value.indexOf(dotDot)!==-1||indexOfAtDot!==-1&&currentCaretPosition!==indexOfAtDot+1||rawValue.indexOf(atSymbol)===-1&&previousConformedValue!==emptyString&&rawValue.indexOf(dot)!==-1){return false}var indexOfAtSymbol=value.indexOf(atSymbol);var domainPart=value.slice(indexOfAtSymbol+1,value.length);if((domainPart.match(allDotsRegExp)||emptyArray).length>1&&value.substr(-1)===dot&&currentCaretPosition!==rawValue.length){value=value.slice(0,value.length-1)}return value}function removeAllAtSymbolsButFirst(str){var atSymbolCount=0;return str.replace(allAtSymbolsRegExp,function(){atSymbolCount++;return atSymbolCount===1?atSymbol:emptyString})}});
;define("utilities/vendor/text-mask/2.0.0/js/index",["exports","utilities/vendor/text-mask/2.0.0/js/vanillaTextMask","utilities/vendor/text-mask/2.0.0/js/addons/createAutoCorrectedDatePipe","utilities/vendor/text-mask/2.0.0/js/addons/createNumberMask","utilities/vendor/text-mask/2.0.0/js/addons/emailMask","utilities/vendor/text-mask/2.0.0/js/addons/emailPipe"],function(exports,_vanillaTextMask,_createAutoCorrectedDatePipe,_createNumberMask,_emailMask,_emailPipe){"use strict";Object.defineProperty(exports,"__esModule",{value:true});var _vanillaTextMask2=_interopRequireDefault(_vanillaTextMask);var _createAutoCorrectedDatePipe2=_interopRequireDefault(_createAutoCorrectedDatePipe);var _createNumberMask2=_interopRequireDefault(_createNumberMask);var _emailMask2=_interopRequireDefault(_emailMask);var _emailPipe2=_interopRequireDefault(_emailPipe);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.default={createAutoCorrectedDatePipe:_createAutoCorrectedDatePipe2.default,createNumberMask:_createNumberMask2.default,emailMask:_emailMask2.default,emailPipe:_emailPipe2.default,vanillaTextMask:_vanillaTextMask2.default,conformToMask:_vanillaTextMask.conformToMask,maskInput:_vanillaTextMask.maskInput}});
;define('utilities/vendor/text-mask/2.0.0/js/vanillaTextMask',['module','exports'],function(module,exports){'use strict';var _typeof2=typeof Symbol==='function'&&typeof Symbol.iterator==='symbol'?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj};(function webpackUniversalModuleDefinition(root,factory){if((typeof exports==='undefined'?'undefined':_typeof2(exports))==='object'&&(typeof module==='undefined'?'undefined':_typeof2(module))==='object')module.exports=factory();else if(typeof define==='function'&&define.amd)define([],factory);else if((typeof exports==='undefined'?'undefined':_typeof2(exports))==='object')exports['vanillaTextMask']=factory();else root['vanillaTextMask']=factory()})(undefined,function(){return function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={exports:{},id:moduleId,loaded:false};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.loaded=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.p='';return __webpack_require__(0)}([function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.conformToMask=undefined;exports.maskInput=maskInput;var _conformToMask=__webpack_require__(2);Object.defineProperty(exports,'conformToMask',{enumerable:true,get:function get(){return _interopRequireDefault(_conformToMask).default}});var _createTextMaskInputElement=__webpack_require__(5);var _createTextMaskInputElement2=_interopRequireDefault(_createTextMaskInputElement);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function maskInput(textMaskConfig){var inputElement=textMaskConfig.inputElement;var textMaskInputElement=(0,_createTextMaskInputElement2.default)(textMaskConfig);var inputHandler=function inputHandler(_ref){var value=_ref.target.value;return textMaskInputElement.update(value)};inputElement.addEventListener('input',inputHandler);textMaskInputElement.update(inputElement.value);return{textMaskInputElement:textMaskInputElement,destroy:function destroy(){inputElement.removeEventListener('input',inputHandler)}}}exports.default=maskInput},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var placeholderChar=exports.placeholderChar='_'},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=conformToMask;var _utilities=__webpack_require__(3);var _constants=__webpack_require__(1);var emptyString='';function conformToMask(){var rawValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:emptyString;var mask=arguments.length>1&&arguments[1]!==undefined?arguments[1]:emptyString;var config=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var _config$guide=config.guide,guide=_config$guide===undefined?true:_config$guide,_config$previousConfo=config.previousConformedValue,previousConformedValue=_config$previousConfo===undefined?emptyString:_config$previousConfo,_config$placeholderCh=config.placeholderChar,placeholderChar=_config$placeholderCh===undefined?_constants.placeholderChar:_config$placeholderCh,_config$placeholder=config.placeholder,placeholder=_config$placeholder===undefined?(0,_utilities.convertMaskToPlaceholder)(mask,placeholderChar):_config$placeholder,currentCaretPosition=config.currentCaretPosition,keepCharPositions=config.keepCharPositions;var suppressGuide=guide===false&&previousConformedValue!==undefined;var rawValueLength=rawValue.length;var previousConformedValueLength=previousConformedValue.length;var placeholderLength=placeholder.length;var maskLength=mask.length;var editDistance=rawValueLength-previousConformedValueLength;var isAddition=editDistance>0;var indexOfFirstChange=currentCaretPosition+(isAddition?-editDistance:0);var indexOfLastChange=indexOfFirstChange+Math.abs(editDistance);if(keepCharPositions===true&&!isAddition){var compensatingPlaceholderChars=emptyString;for(var i=indexOfFirstChange;i<indexOfLastChange;i++){if(placeholder[i]===placeholderChar){compensatingPlaceholderChars+=placeholderChar}}rawValue=rawValue.slice(0,indexOfFirstChange)+compensatingPlaceholderChars+rawValue.slice(indexOfFirstChange,rawValueLength)}var rawValueArr=rawValue.split(emptyString).map(function(char,i){return{char:char,isNew:i>=indexOfFirstChange&&i<indexOfLastChange}});for(var _i=rawValueLength-1;_i>=0;_i--){var char=rawValueArr[_i].char;if(char!==placeholderChar){var shouldOffset=_i>=indexOfFirstChange&&previousConformedValueLength===maskLength;if(char===placeholder[shouldOffset?_i-editDistance:_i]){rawValueArr.splice(_i,1)}}}var conformedValue=emptyString;var someCharsRejected=false;placeholderLoop:for(var _i2=0;_i2<placeholderLength;_i2++){var charInPlaceholder=placeholder[_i2];if(charInPlaceholder===placeholderChar){if(rawValueArr.length>0){while(rawValueArr.length>0){var _rawValueArr$shift=rawValueArr.shift(),rawValueChar=_rawValueArr$shift.char,isNew=_rawValueArr$shift.isNew;if(rawValueChar===placeholderChar&&suppressGuide!==true){conformedValue+=placeholderChar;continue placeholderLoop}else if(mask[_i2].test(rawValueChar)){if(keepCharPositions!==true||isNew===false||previousConformedValue===emptyString||guide===false||!isAddition){conformedValue+=rawValueChar}else{var rawValueArrLength=rawValueArr.length;var indexOfNextAvailablePlaceholderChar=null;for(var _i3=0;_i3<rawValueArrLength;_i3++){var charData=rawValueArr[_i3];if(charData.char!==placeholderChar&&charData.isNew===false){break}if(charData.char===placeholderChar){indexOfNextAvailablePlaceholderChar=_i3;break}}if(indexOfNextAvailablePlaceholderChar!==null){conformedValue+=rawValueChar;rawValueArr.splice(indexOfNextAvailablePlaceholderChar,1)}else{_i2--}}continue placeholderLoop}else{someCharsRejected=true}}}if(suppressGuide===false){conformedValue+=placeholder.substr(_i2,placeholderLength)}break}else{conformedValue+=charInPlaceholder}}if(suppressGuide&&isAddition===false){var indexOfLastFilledPlaceholderChar=null;for(var _i4=0;_i4<conformedValue.length;_i4++){if(placeholder[_i4]===placeholderChar){indexOfLastFilledPlaceholderChar=_i4}}if(indexOfLastFilledPlaceholderChar!==null){conformedValue=conformedValue.substr(0,indexOfLastFilledPlaceholderChar+1)}else{conformedValue=emptyString}}return{conformedValue:conformedValue,meta:{someCharsRejected:someCharsRejected}}}},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.convertMaskToPlaceholder=convertMaskToPlaceholder;exports.isString=isString;exports.isNumber=isNumber;exports.processCaretTraps=processCaretTraps;var _constants=__webpack_require__(1);var emptyArray=[];function convertMaskToPlaceholder(){var mask=arguments.length>0&&arguments[0]!==undefined?arguments[0]:emptyArray;var placeholderChar=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_constants.placeholderChar;if(mask.indexOf(placeholderChar)!==-1){throw new Error('Placeholder character must not be used as part of the mask. Please specify a character '+'that is not present in your mask as your placeholder character.\n\n'+('The placeholder character that was received is: '+JSON.stringify(placeholderChar)+'\n\n')+('The mask that was received is: '+JSON.stringify(mask)))}return mask.map(function(char){return char instanceof RegExp?placeholderChar:char}).join('')}function isString(value){return typeof value==='string'||value instanceof String}function isNumber(value){return typeof value==='number'&&value.length===undefined&&!isNaN(value)}var strCaretTrap='[]';function processCaretTraps(mask){var indexes=[];var indexOfCaretTrap=void 0;while(indexOfCaretTrap=mask.indexOf(strCaretTrap),indexOfCaretTrap!==-1){indexes.push(indexOfCaretTrap);mask.splice(indexOfCaretTrap,1)}return{maskWithoutCaretTraps:mask,indexes:indexes}}},function(module,exports){'use strict';Object.defineProperty(exports,'__esModule',{value:true});exports.default=adjustCaretPosition;var defaultArray=[];var emptyString='';function adjustCaretPosition(_ref){var _ref$previousConforme=_ref.previousConformedValue,previousConformedValue=_ref$previousConforme===undefined?emptyString:_ref$previousConforme,_ref$currentCaretPosi=_ref.currentCaretPosition,currentCaretPosition=_ref$currentCaretPosi===undefined?0:_ref$currentCaretPosi,conformedValue=_ref.conformedValue,rawValue=_ref.rawValue,placeholderChar=_ref.placeholderChar,placeholder=_ref.placeholder,_ref$indexesOfPipedCh=_ref.indexesOfPipedChars,indexesOfPipedChars=_ref$indexesOfPipedCh===undefined?defaultArray:_ref$indexesOfPipedCh,_ref$caretTrapIndexes=_ref.caretTrapIndexes,caretTrapIndexes=_ref$caretTrapIndexes===undefined?defaultArray:_ref$caretTrapIndexes;if(currentCaretPosition===0){return 0}var rawValueLength=rawValue.length;var previousConformedValueLength=previousConformedValue.length;var placeholderLength=placeholder.length;var conformedValueLength=conformedValue.length;var editLength=rawValueLength-previousConformedValueLength;var isAddition=editLength>0;var isFirstRawValue=previousConformedValueLength===0;var isPartialMultiCharEdit=editLength>1&&!isAddition&&!isFirstRawValue;if(isPartialMultiCharEdit){return currentCaretPosition}var possiblyHasRejectedChar=isAddition&&(previousConformedValue===conformedValue||conformedValue===placeholder);var startingSearchIndex=0;if(possiblyHasRejectedChar){startingSearchIndex=currentCaretPosition-editLength}else{var normalizedConformedValue=conformedValue.toLowerCase();var normalizedRawValue=rawValue.toLowerCase();var leftHalfChars=normalizedRawValue.substr(0,currentCaretPosition).split(emptyString);var intersection=leftHalfChars.filter(function(char){return normalizedConformedValue.indexOf(char)!==-1});var targetChar=intersection[intersection.length-1];var pipedChars=indexesOfPipedChars.map(function(index){return normalizedConformedValue[index]});var countTargetCharInPipedChars=pipedChars.filter(function(char){return char===targetChar}).length;var countTargetCharInIntersection=intersection.filter(function(char){return char===targetChar}).length;var countTargetCharInPlaceholder=placeholder.substr(0,placeholder.indexOf(placeholderChar)).split(emptyString).filter(function(char,index){return char===targetChar&&rawValue[index]!==char}).length;var requiredNumberOfMatches=countTargetCharInPlaceholder+countTargetCharInIntersection+countTargetCharInPipedChars;var numberOfEncounteredMatches=0;for(var i=0;i<conformedValueLength;i++){var conformedValueChar=normalizedConformedValue[i];startingSearchIndex=i+1;if(conformedValueChar===targetChar){numberOfEncounteredMatches++}if(numberOfEncounteredMatches>=requiredNumberOfMatches){break}}}if(isAddition){var lastPlaceholderChar=startingSearchIndex;for(var _i=startingSearchIndex;_i<=placeholderLength;_i++){if(placeholder[_i]===placeholderChar){lastPlaceholderChar=_i}if(placeholder[_i]===placeholderChar||caretTrapIndexes.indexOf(_i)!==-1||_i===placeholderLength){return lastPlaceholderChar}}}else{for(var _i2=startingSearchIndex;_i2>=0;_i2--){if(placeholder[_i2-1]===placeholderChar||caretTrapIndexes.indexOf(_i2)!==-1||_i2===0){return _i2}}}}},function(module,exports,__webpack_require__){'use strict';Object.defineProperty(exports,'__esModule',{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key]}}}return target};var _typeof=typeof Symbol==='function'&&_typeof2(Symbol.iterator)==='symbol'?function(obj){return typeof obj==='undefined'?'undefined':_typeof2(obj)}:function(obj){return obj&&typeof Symbol==='function'&&obj.constructor===Symbol&&obj!==Symbol.prototype?'symbol':typeof obj==='undefined'?'undefined':_typeof2(obj)};exports.default=createTextMaskInputElement;var _adjustCaretPosition=__webpack_require__(4);var _adjustCaretPosition2=_interopRequireDefault(_adjustCaretPosition);var _conformToMask2=__webpack_require__(2);var _conformToMask3=_interopRequireDefault(_conformToMask2);var _utilities=__webpack_require__(3);var _constants=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var strFunction='function';var emptyString='';var strNone='none';var strObject='object';function createTextMaskInputElement(_ref){var inputElement=_ref.inputElement,providedMask=_ref.mask,guide=_ref.guide,pipe=_ref.pipe,_ref$placeholderChar=_ref.placeholderChar,placeholderChar=_ref$placeholderChar===undefined?_constants.placeholderChar:_ref$placeholderChar,onAccept=_ref.onAccept,onReject=_ref.onReject,_ref$keepCharPosition=_ref.keepCharPositions,keepCharPositions=_ref$keepCharPosition===undefined?false:_ref$keepCharPosition;if((typeof providedMask==='undefined'?'undefined':_typeof(providedMask))===strObject&&providedMask.pipe!==undefined&&providedMask.mask!==undefined){pipe=providedMask.pipe;providedMask=providedMask.mask}var state={previousConformedValue:emptyString,previousOnRejectRawValue:emptyString};var placeholder=void 0;var mask=void 0;if(providedMask instanceof Array){placeholder=(0,_utilities.convertMaskToPlaceholder)(providedMask,placeholderChar)}return{state:state,update:function update(){var rawValue=arguments.length>0&&arguments[0]!==undefined?arguments[0]:inputElement.value;if(rawValue===state.previousConformedValue){return}var safeRawValue=getSafeRawValue(rawValue);var currentCaretPosition=inputElement.selectionStart;var previousConformedValue=state.previousConformedValue;var caretTrapIndexes=void 0;if((typeof providedMask==='undefined'?'undefined':_typeof(providedMask))===strFunction){mask=providedMask(safeRawValue,{currentCaretPosition:currentCaretPosition,previousConformedValue:previousConformedValue,placeholderChar:placeholderChar});var _processCaretTraps=(0,_utilities.processCaretTraps)(mask),maskWithoutCaretTraps=_processCaretTraps.maskWithoutCaretTraps,indexes=_processCaretTraps.indexes;mask=maskWithoutCaretTraps;caretTrapIndexes=indexes;placeholder=(0,_utilities.convertMaskToPlaceholder)(mask,placeholderChar)}else{mask=providedMask}var conformToMaskConfig={previousConformedValue:previousConformedValue,guide:guide,placeholderChar:placeholderChar,pipe:pipe,placeholder:placeholder,currentCaretPosition:currentCaretPosition,keepCharPositions:keepCharPositions};var _conformToMask=(0,_conformToMask3.default)(safeRawValue,mask,conformToMaskConfig),conformedValue=_conformToMask.conformedValue,someCharsRejected=_conformToMask.meta.someCharsRejected;var piped=(typeof pipe==='undefined'?'undefined':_typeof(pipe))===strFunction;var pipeResults={};if(piped){pipeResults=pipe(conformedValue,_extends({rawValue:safeRawValue},conformToMaskConfig));if(pipeResults===false){pipeResults={value:previousConformedValue,rejected:true}}else if((0,_utilities.isString)(pipeResults)){pipeResults={value:pipeResults}}}var finalConformedValue=piped?pipeResults.value:conformedValue;var adjustedCaretPosition=(0,_adjustCaretPosition2.default)({previousConformedValue:previousConformedValue,conformedValue:finalConformedValue,placeholder:placeholder,rawValue:safeRawValue,currentCaretPosition:currentCaretPosition,placeholderChar:placeholderChar,indexesOfPipedChars:pipeResults.indexesOfPipedChars,caretTrapIndexes:caretTrapIndexes});var inputValueShouldBeEmpty=finalConformedValue===placeholder&&adjustedCaretPosition===0;var inputElementValue=inputValueShouldBeEmpty?emptyString:finalConformedValue;state.previousConformedValue=inputElementValue;if(inputElement.value===inputElementValue){return}inputElement.value=inputElementValue;safeSetSelection(inputElement,adjustedCaretPosition);if((typeof onAccept==='undefined'?'undefined':_typeof(onAccept))===strFunction&&inputElementValue!==previousConformedValue&&inputElementValue!==placeholder){state.previousOnRejectRawValue=null;onAccept()}var isDeletion=safeRawValue.length<previousConformedValue.length;if((typeof onReject==='undefined'?'undefined':_typeof(onReject))===strFunction&&(someCharsRejected||pipeResults.rejected)&&isDeletion===false&&state.previousOnRejectRawValue!==rawValue){state.previousOnRejectRawValue=rawValue;onReject({conformedValue:finalConformedValue,pipeRejection:pipeResults.rejected,maskRejection:someCharsRejected})}}}}function safeSetSelection(element,selectionPosition){if(document.activeElement===element){element.setSelectionRange(selectionPosition,selectionPosition,strNone)}}function getSafeRawValue(inputValue){if((0,_utilities.isString)(inputValue)){return inputValue}else if((0,_utilities.isNumber)(inputValue)){return String(inputValue)}else if(inputValue===undefined||inputValue===null){return emptyString}else{throw new Error('The \'value\' provided to Text Mask needs to be a string or a number. The value '+('received was:\n\n '+JSON.stringify(inputValue)))}}}])});;});
