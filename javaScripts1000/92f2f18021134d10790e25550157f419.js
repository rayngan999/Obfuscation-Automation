!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(jQuery)}(function(h){h.extend(h.fn,{validate:function(e){if(this.length){var n=h.data(this[0],"validator");return n||(this.attr("novalidate","novalidate"),n=new h.validator(e,this[0]),h.data(this[0],"validator",n),n.settings.onsubmit&&(this.on("click.validate",":submit",function(e){n.settings.submitHandler&&(n.submitButton=e.target),h(this).hasClass("cancel")&&(n.cancelSubmit=!0),void 0!==h(this).attr("formnovalidate")&&(n.cancelSubmit=!0)}),this.on("submit.validate",function(i){function e(){var e,t;return!n.settings.submitHandler||(n.submitButton&&(e=h("<input type='hidden'/>").attr("name",n.submitButton.name).val(h(n.submitButton).val()).appendTo(n.currentForm)),t=n.settings.submitHandler.call(n,n.currentForm,i),n.submitButton&&e.remove(),void 0!==t&&t)}return n.settings.debug&&i.preventDefault(),n.cancelSubmit?(n.cancelSubmit=!1,e()):n.form()?n.pendingRequest?!(n.formSubmitted=!0):e():(n.focusInvalid(),!1)})),n)}e&&e.debug&&window.console&&console.warn("Nothing selected, can't validate, returning nothing.")},valid:function(){var e,t,i;return h(this[0]).is("form")?e=this.validate().form():(i=[],e=!0,t=h(this[0].form).validate(),this.each(function(){(e=t.element(this)&&e)||(i=i.concat(t.errorList))}),t.errorList=i),e},rules:function(e,t){if(this.length){var i,n,a,s,r,o,l=this[0];if(e)switch(i=h.data(l.form,"validator").settings,n=i.rules,a=h.validator.staticRules(l),e){case"add":h.extend(a,h.validator.normalizeRule(t)),delete a.messages,n[l.name]=a,t.messages&&(i.messages[l.name]=h.extend(i.messages[l.name],t.messages));break;case"remove":return t?(o={},h.each(t.split(/\s/),function(e,t){o[t]=a[t],delete a[t],"required"===t&&h(l).removeAttr("aria-required")}),o):(delete n[l.name],a)}return(s=h.validator.normalizeRules(h.extend({},h.validator.classRules(l),h.validator.attributeRules(l),h.validator.dataRules(l),h.validator.staticRules(l)),l)).required&&(r=s.required,delete s.required,s=h.extend({required:r},s),h(l).attr("aria-required","true")),s.remote&&(r=s.remote,delete s.remote,s=h.extend(s,{remote:r})),s}}}),h.extend(h.expr[":"],{blank:function(e){return!h.trim(""+h(e).val())},filled:function(e){var t=h(e).val();return null!==t&&!!h.trim(""+t)},unchecked:function(e){return!h(e).prop("checked")}}),h.validator=function(e,t){this.settings=h.extend(!0,{},h.validator.defaults,e),this.currentForm=t,this.init()},h.validator.format=function(i,e){return 1===arguments.length?function(){var e=h.makeArray(arguments);return e.unshift(i),h.validator.format.apply(this,e)}:(void 0===e||(2<arguments.length&&e.constructor!==Array&&(e=h.makeArray(arguments).slice(1)),e.constructor!==Array&&(e=[e]),h.each(e,function(e,t){i=i.replace(new RegExp("\\{"+e+"\\}","g"),function(){return t})})),i)},h.extend(h.validator,{defaults:{messages:{},groups:{},rules:{},errorClass:"error",pendingClass:"pending",validClass:"valid",errorElement:"label",focusCleanup:!1,focusInvalid:!0,errorContainer:h([]),errorLabelContainer:h([]),onsubmit:!0,ignore:":hidden",ignoreTitle:!1,onfocusin:function(e){this.lastActive=e,this.settings.focusCleanup&&(this.settings.unhighlight&&this.settings.unhighlight.call(this,e,this.settings.errorClass,this.settings.validClass),this.hideThese(this.errorsFor(e)))},onfocusout:function(e){this.checkable(e)||!(e.name in this.submitted)&&this.optional(e)||this.element(e)},onkeyup:function(e,t){9===t.which&&""===this.elementValue(e)||-1!==h.inArray(t.keyCode,[16,17,18,20,35,36,37,38,39,40,45,144,225])||(e.name in this.submitted||e.name in this.invalid)&&this.element(e)},onclick:function(e){e.name in this.submitted?this.element(e):e.parentNode.name in this.submitted&&this.element(e.parentNode)},highlight:function(e,t,i){"radio"===e.type?this.findByName(e.name).addClass(t).removeClass(i):h(e).addClass(t).removeClass(i)},unhighlight:function(e,t,i){"radio"===e.type?this.findByName(e.name).removeClass(t).addClass(i):h(e).removeClass(t).addClass(i)}},setDefaults:function(e){h.extend(h.validator.defaults,e)},messages:{required:"This field is required.",remote:"Please fix this field.",email:"Please enter a valid email address.",url:"Please enter a valid URL.",date:"Please enter a valid date.",dateISO:"Please enter a valid date ( ISO ).",number:"Please enter a valid number.",digits:"Please enter only digits.",equalTo:"Please enter the same value again.",maxlength:h.validator.format("Please enter no more than {0} characters."),minlength:h.validator.format("Please enter at least {0} characters."),rangelength:h.validator.format("Please enter a value between {0} and {1} characters long."),range:h.validator.format("Please enter a value between {0} and {1}."),max:h.validator.format("Please enter a value less than or equal to {0}."),min:h.validator.format("Please enter a value greater than or equal to {0}."),step:h.validator.format("Please enter a multiple of {0}.")},autoCreateRanges:!1,prototype:{init:function(){function e(e){var t=h.data(this.form,"validator"),i="on"+e.type.replace(/^validate/,""),n=t.settings;n[i]&&!h(this).is(n.ignore)&&n[i].call(t,this,e)}this.labelContainer=h(this.settings.errorLabelContainer),this.errorContext=this.labelContainer.length&&this.labelContainer||h(this.currentForm),this.containers=h(this.settings.errorContainer).add(this.settings.errorLabelContainer),this.submitted={},this.valueCache={},this.pendingRequest=0,this.pending={},this.invalid={},this.reset();var i,n=this.groups={};h.each(this.settings.groups,function(i,e){"string"==typeof e&&(e=e.split(/\s/)),h.each(e,function(e,t){n[t]=i})}),i=this.settings.rules,h.each(i,function(e,t){i[e]=h.validator.normalizeRule(t)}),h(this.currentForm).on("focusin.validate focusout.validate keyup.validate",":text, [type='password'], [type='file'], select, textarea, [type='number'], [type='search'], [type='tel'], [type='url'], [type='email'], [type='datetime'], [type='date'], [type='month'], [type='week'], [type='time'], [type='datetime-local'], [type='range'], [type='color'], [type='radio'], [type='checkbox'], [contenteditable]",e).on("click.validate","select, option, [type='radio'], [type='checkbox']",e),this.settings.invalidHandler&&h(this.currentForm).on("invalid-form.validate",this.settings.invalidHandler),h(this.currentForm).find("[required], [data-rule-required], .required").attr("aria-required","true")},form:function(){return this.checkForm(),h.extend(this.submitted,this.errorMap),this.invalid=h.extend({},this.errorMap),this.valid()||h(this.currentForm).triggerHandler("invalid-form",[this]),this.showErrors(),this.valid()},checkForm:function(){this.prepareForm();for(var e=0,t=this.currentElements=this.elements();t[e];e++)this.check(t[e]);return this.valid()},element:function(e){var t,i,n=this.clean(e),a=this.validationTargetFor(n),s=this,r=!0;return void 0===a?delete this.invalid[n.name]:(this.prepareElement(a),this.currentElements=h(a),(i=this.groups[a.name])&&h.each(this.groups,function(e,t){t===i&&e!==a.name&&((n=s.validationTargetFor(s.clean(s.findByName(e))))&&n.name in s.invalid&&(s.currentElements.push(n),r=r&&s.check(n)))}),t=!1!==this.check(a),r=r&&t,this.invalid[a.name]=!t,this.numberOfInvalids()||(this.toHide=this.toHide.add(this.containers)),this.showErrors(),h(e).attr("aria-invalid",!t)),r},showErrors:function(t){if(t){var i=this;h.extend(this.errorMap,t),this.errorList=h.map(this.errorMap,function(e,t){return{message:e,element:i.findByName(t)[0]}}),this.successList=h.grep(this.successList,function(e){return!(e.name in t)})}this.settings.showErrors?this.settings.showErrors.call(this,this.errorMap,this.errorList):this.defaultShowErrors()},resetForm:function(){h.fn.resetForm&&h(this.currentForm).resetForm(),this.invalid={},this.submitted={},this.prepareForm(),this.hideErrors();var e=this.elements().removeData("previousValue").removeAttr("aria-invalid");this.resetElements(e)},resetElements:function(e){var t;if(this.settings.unhighlight)for(t=0;e[t];t++)this.settings.unhighlight.call(this,e[t],this.settings.errorClass,""),this.findByName(e[t].name).removeClass(this.settings.validClass);else e.removeClass(this.settings.errorClass).removeClass(this.settings.validClass)},numberOfInvalids:function(){return this.objectLength(this.invalid)},objectLength:function(e){var t,i=0;for(t in e)e[t]&&i++;return i},hideErrors:function(){this.hideThese(this.toHide)},hideThese:function(e){e.not(this.containers).text(""),this.addWrapper(e).hide()},valid:function(){return 0===this.size()},size:function(){return this.errorList.length},focusInvalid:function(){if(this.settings.focusInvalid)try{h(this.findLastActive()||this.errorList.length&&this.errorList[0].element||[]).filter(":visible").focus().trigger("focusin")}catch(e){}},findLastActive:function(){var t=this.lastActive;return t&&1===h.grep(this.errorList,function(e){return e.element.name===t.name}).length&&t},elements:function(){var t=this,i={};return h(this.currentForm).find("input, select, textarea, [contenteditable]").not(":submit, :reset, :image, :disabled").not(this.settings.ignore).filter(function(){var e=this.name||h(this).attr("name");return!e&&t.settings.debug&&window.console&&console.error("%o has no name assigned",this),this.hasAttribute("contenteditable")&&(this.form=h(this).closest("form")[0]),!(e in i||!t.objectLength(h(this).rules()))&&(i[e]=!0)})},clean:function(e){return h(e)[0]},errors:function(){var e=this.settings.errorClass.split(" ").join(".");return h(this.settings.errorElement+"."+e,this.errorContext)},resetInternals:function(){this.successList=[],this.errorList=[],this.errorMap={},this.toShow=h([]),this.toHide=h([])},reset:function(){this.resetInternals(),this.currentElements=h([])},prepareForm:function(){this.reset(),this.toHide=this.errors().add(this.containers)},prepareElement:function(e){this.reset(),this.toHide=this.errorsFor(e)},elementValue:function(e){var t,i,n=h(e),a=e.type;return"radio"===a||"checkbox"===a?this.findByName(e.name).filter(":checked").val():"number"===a&&void 0!==e.validity?e.validity.badInput?"NaN":n.val():(t=e.hasAttribute("contenteditable")?n.text():n.val(),"file"===a?"C:\\fakepath\\"===t.substr(0,12)?t.substr(12):0<=(i=t.lastIndexOf("/"))?t.substr(i+1):0<=(i=t.lastIndexOf("\\"))?t.substr(i+1):t:"string"==typeof t?t.replace(/\r/g,""):t)},check:function(t){t=this.validationTargetFor(this.clean(t));var e,i,n,a=h(t).rules(),s=h.map(a,function(e,t){return t}).length,r=!1,o=this.elementValue(t);if("function"==typeof a.normalizer){if("string"!=typeof(o=a.normalizer.call(t,o)))throw new TypeError("The normalizer should return a string value.");delete a.normalizer}for(i in a){n={method:i,parameters:a[i]};try{if("dependency-mismatch"===(e=h.validator.methods[i].call(this,o,t,n.parameters))&&1===s){r=!0;continue}if(r=!1,"pending"===e)return void(this.toHide=this.toHide.not(this.errorsFor(t)));if(!e)return this.formatAndAdd(t,n),!1}catch(e){throw this.settings.debug&&window.console&&console.log("Exception occurred when checking element "+t.id+", check the '"+n.method+"' method.",e),e instanceof TypeError&&(e.message+=".  Exception occurred when checking element "+t.id+", check the '"+n.method+"' method."),e}}if(!r)return this.objectLength(a)&&this.successList.push(t),!0},customDataMessage:function(e,t){return h(e).data("msg"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase())||h(e).data("msg")},customMessage:function(e,t){var i=this.settings.messages[e];return i&&(i.constructor===String?i:i[t])},findDefined:function(){for(var e=0;e<arguments.length;e++)if(void 0!==arguments[e])return arguments[e]},defaultMessage:function(e,t){var i=this.findDefined(this.customMessage(e.name,t.method),this.customDataMessage(e,t.method),!this.settings.ignoreTitle&&e.title||void 0,h.validator.messages[t.method],"<strong>Warning: No message defined for "+e.name+"</strong>"),n=/\$?\{(\d+)\}/g;return"function"==typeof i?i=i.call(this,t.parameters,e):n.test(i)&&(i=h.validator.format(i.replace(n,"{$1}"),t.parameters)),i},formatAndAdd:function(e,t){var i=this.defaultMessage(e,t);this.errorList.push({message:i,element:e,method:t.method}),this.errorMap[e.name]=i,this.submitted[e.name]=i},addWrapper:function(e){return this.settings.wrapper&&(e=e.add(e.parent(this.settings.wrapper))),e},defaultShowErrors:function(){var e,t,i;for(e=0;this.errorList[e];e++)i=this.errorList[e],this.settings.highlight&&this.settings.highlight.call(this,i.element,this.settings.errorClass,this.settings.validClass),this.showLabel(i.element,i.message);if(this.errorList.length&&(this.toShow=this.toShow.add(this.containers)),this.settings.success)for(e=0;this.successList[e];e++)this.showLabel(this.successList[e]);if(this.settings.unhighlight)for(e=0,t=this.validElements();t[e];e++)this.settings.unhighlight.call(this,t[e],this.settings.errorClass,this.settings.validClass);this.toHide=this.toHide.not(this.toShow),this.hideErrors(),this.addWrapper(this.toShow).show()},validElements:function(){return this.currentElements.not(this.invalidElements())},invalidElements:function(){return h(this.errorList).map(function(){return this.element})},showLabel:function(e,t){var i,n,a,s,r=this.errorsFor(e),o=this.idOrName(e),l=h(e).attr("aria-describedby");r.length?(r.removeClass(this.settings.validClass).addClass(this.settings.errorClass),r.html(t)):(i=r=h("<"+this.settings.errorElement+">").attr("id",o+"-error").addClass(this.settings.errorClass).html(t||""),this.settings.wrapper&&(i=r.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.length?this.labelContainer.append(i):this.settings.errorPlacement?this.settings.errorPlacement(i,h(e)):i.insertAfter(e),r.is("label")?r.attr("for",o):0===r.parents("label[for='"+this.escapeCssMeta(o)+"']").length&&(a=r.attr("id"),l?l.match(new RegExp("\\b"+this.escapeCssMeta(a)+"\\b"))||(l+=" "+a):l=a,h(e).attr("aria-describedby",l),(n=this.groups[e.name])&&(s=this,h.each(s.groups,function(e,t){t===n&&h("[name='"+s.escapeCssMeta(e)+"']",s.currentForm).attr("aria-describedby",r.attr("id"))})))),!t&&this.settings.success&&(r.text(""),"string"==typeof this.settings.success?r.addClass(this.settings.success):this.settings.success(r,e)),this.toShow=this.toShow.add(r)},errorsFor:function(e){var t=this.escapeCssMeta(this.idOrName(e)),i=h(e).attr("aria-describedby"),n="label[for='"+t+"'], label[for='"+t+"'] *";return i&&(n=n+", #"+this.escapeCssMeta(i).replace(/\s+/g,", #")),this.errors().filter(n)},escapeCssMeta:function(e){return e.replace(/([\\!"#$%&'()*+,./:;<=>?@\[\]^`{|}~])/g,"\\$1")},idOrName:function(e){return this.groups[e.name]||!this.checkable(e)&&e.id||e.name},validationTargetFor:function(e){return this.checkable(e)&&(e=this.findByName(e.name)),h(e).not(this.settings.ignore)[0]},checkable:function(e){return/radio|checkbox/i.test(e.type)},findByName:function(e){return h(this.currentForm).find("[name='"+this.escapeCssMeta(e)+"']")},getLength:function(e,t){switch(t.nodeName.toLowerCase()){case"select":return h("option:selected",t).length;case"input":if(this.checkable(t))return this.findByName(t.name).filter(":checked").length}return e.length},depend:function(e,t){return!this.dependTypes[typeof e]||this.dependTypes[typeof e](e,t)},dependTypes:{boolean:function(e){return e},string:function(e,t){return!!h(e,t.form).length},function:function(e,t){return e(t)}},optional:function(e){var t=this.elementValue(e);return!h.validator.methods.required.call(this,t,e)&&"dependency-mismatch"},startRequest:function(e){this.pending[e.name]||(this.pendingRequest++,h(e).addClass(this.settings.pendingClass),this.pending[e.name]=!0)},stopRequest:function(e,t){this.pendingRequest--,this.pendingRequest<0&&(this.pendingRequest=0),delete this.pending[e.name],h(e).removeClass(this.settings.pendingClass),t&&0===this.pendingRequest&&this.formSubmitted&&this.form()?(h(this.currentForm).submit(),this.formSubmitted=!1):!t&&0===this.pendingRequest&&this.formSubmitted&&(h(this.currentForm).triggerHandler("invalid-form",[this]),this.formSubmitted=!1)},previousValue:function(e,t){return h.data(e,"previousValue")||h.data(e,"previousValue",{old:null,valid:!0,message:this.defaultMessage(e,{method:t})})},destroy:function(){this.resetForm(),h(this.currentForm).off(".validate").removeData("validator").find(".validate-equalTo-blur").off(".validate-equalTo").removeClass("validate-equalTo-blur")}},classRuleSettings:{required:{required:!0},email:{email:!0},url:{url:!0},date:{date:!0},dateISO:{dateISO:!0},number:{number:!0},digits:{digits:!0},creditcard:{creditcard:!0}},addClassRules:function(e,t){e.constructor===String?this.classRuleSettings[e]=t:h.extend(this.classRuleSettings,e)},classRules:function(e){var t={},i=h(e).attr("class");return i&&h.each(i.split(" "),function(){this in h.validator.classRuleSettings&&h.extend(t,h.validator.classRuleSettings[this])}),t},normalizeAttributeRule:function(e,t,i,n){/min|max|step/.test(i)&&(null===t||/number|range|text/.test(t))&&(n=Number(n),isNaN(n)&&(n=void 0)),n||0===n?e[i]=n:t===i&&"range"!==t&&(e[i]=!0)},attributeRules:function(e){var t,i,n={},a=h(e),s=e.getAttribute("type");for(t in h.validator.methods)i="required"===t?(""===(i=e.getAttribute(t))&&(i=!0),!!i):a.attr(t),this.normalizeAttributeRule(n,s,t,i);return n.maxlength&&/-1|2147483647|524288/.test(n.maxlength)&&delete n.maxlength,n},dataRules:function(e){var t,i,n={},a=h(e),s=e.getAttribute("type");for(t in h.validator.methods)i=a.data("rule"+t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),this.normalizeAttributeRule(n,s,t,i);return n},staticRules:function(e){var t={},i=h.data(e.form,"validator");return i.settings.rules&&(t=h.validator.normalizeRule(i.settings.rules[e.name])||{}),t},normalizeRules:function(n,a){return h.each(n,function(e,t){if(!1!==t){if(t.param||t.depends){var i=!0;switch(typeof t.depends){case"string":i=!!h(t.depends,a.form).length;break;case"function":i=t.depends.call(a,a)}i?n[e]=void 0===t.param||t.param:(h.data(a.form,"validator").resetElements(h(a)),delete n[e])}}else delete n[e]}),h.each(n,function(e,t){n[e]=h.isFunction(t)&&"normalizer"!==e?t(a):t}),h.each(["minlength","maxlength"],function(){n[this]&&(n[this]=Number(n[this]))}),h.each(["rangelength","range"],function(){var e;n[this]&&(h.isArray(n[this])?n[this]=[Number(n[this][0]),Number(n[this][1])]:"string"==typeof n[this]&&(e=n[this].replace(/[\[\]]/g,"").split(/[\s,]+/),n[this]=[Number(e[0]),Number(e[1])]))}),h.validator.autoCreateRanges&&(null!=n.min&&null!=n.max&&(n.range=[n.min,n.max],delete n.min,delete n.max),null!=n.minlength&&null!=n.maxlength&&(n.rangelength=[n.minlength,n.maxlength],delete n.minlength,delete n.maxlength)),n},normalizeRule:function(e){if("string"==typeof e){var t={};h.each(e.split(/\s/),function(){t[this]=!0}),e=t}return e},addMethod:function(e,t,i){h.validator.methods[e]=t,h.validator.messages[e]=void 0!==i?i:h.validator.messages[e],t.length<3&&h.validator.addClassRules(e,h.validator.normalizeRule(e))},methods:{required:function(e,t,i){if(!this.depend(i,t))return"dependency-mismatch";if("select"!==t.nodeName.toLowerCase())return this.checkable(t)?0<this.getLength(e,t):0<e.length;var n=h(t).val();return n&&0<n.length},email:function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)},url:function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},date:function(e,t){return this.optional(t)||!/Invalid|NaN/.test(new Date(e).toString())},dateISO:function(e,t){return this.optional(t)||/^\d{4}[\/\-](0?[1-9]|1[012])[\/\-](0?[1-9]|[12][0-9]|3[01])$/.test(e)},number:function(e,t){return this.optional(t)||/^(?:-?\d+|-?\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(e)},digits:function(e,t){return this.optional(t)||/^\d+$/.test(e)},minlength:function(e,t,i){var n=h.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||i<=n},maxlength:function(e,t,i){var n=h.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n<=i},rangelength:function(e,t,i){var n=h.isArray(e)?e.length:this.getLength(e,t);return this.optional(t)||n>=i[0]&&n<=i[1]},min:function(e,t,i){return this.optional(t)||i<=e},max:function(e,t,i){return this.optional(t)||e<=i},range:function(e,t,i){return this.optional(t)||e>=i[0]&&e<=i[1]},step:function(e,t,i){var n=h(t).attr("type"),a="Step attribute on input type "+n+" is not supported.",s=new RegExp("\\b"+n+"\\b");if(n&&!s.test(["text","number","range"].join()))throw new Error(a);return this.optional(t)||e%i==0},equalTo:function(e,t,i){var n=h(i);return this.settings.onfocusout&&n.not(".validate-equalTo-blur").length&&n.addClass("validate-equalTo-blur").on("blur.validate-equalTo",function(){h(t).valid()}),e===n.val()},remote:function(s,r,e,o){if(this.optional(r))return"dependency-mismatch";o="string"==typeof o&&o||"remote";var l,t,i,d=this.previousValue(r,o);return this.settings.messages[r.name]||(this.settings.messages[r.name]={}),d.originalMessage=d.originalMessage||this.settings.messages[r.name][o],this.settings.messages[r.name][o]=d.message,e="string"==typeof e?{url:e}:e,i=h.param(h.extend({data:s},e.data)),d.old===i?d.valid:(d.old=i,(l=this).startRequest(r),(t={})[r.name]=s,h.ajax(h.extend(!0,{mode:"abort",port:"validate"+r.name,dataType:"json",data:t,context:l.currentForm,success:function(e){var t,i,n,a=!0===e||"true"===e;l.settings.messages[r.name][o]=d.originalMessage,a?(n=l.formSubmitted,l.resetInternals(),l.toHide=l.errorsFor(r),l.formSubmitted=n,l.successList.push(r),l.invalid[r.name]=!1,l.showErrors()):(t={},i=e||l.defaultMessage(r,{method:o,parameters:s}),t[r.name]=d.message=i,l.invalid[r.name]=!0,l.showErrors(t)),d.valid=a,l.stopRequest(r,a)}},e)),"pending")}}});var n,a={};h.ajaxPrefilter?h.ajaxPrefilter(function(e,t,i){var n=e.port;"abort"===e.mode&&(a[n]&&a[n].abort(),a[n]=i)}):(n=h.ajax,h.ajax=function(e){var t=("mode"in e?e:h.ajaxSettings).mode,i=("port"in e?e:h.ajaxSettings).port;return"abort"===t?(a[i]&&a[i].abort(),a[i]=n.apply(this,arguments),a[i]):n.apply(this,arguments)})}),window.liveChatSettings={brandCode:"RAGBONE",buttonId:"573j0000000LA6I",chatUrl:"https://use.secure.force.com/ArticleSearch/apex/RAGBONEBrandChat",deploymentId:"572j0000000L8Tv",deploymentScript:"https://c.la3-c1-phx.salesforceliveagent.com/content/g/js/40.0/deployment.js",endChat:{callback:null},inChat:{callback:null},initUrl:"https://d.la3-c1-phx.salesforceliveagent.com/chat",orgId:"00Dj0000000Jdpt",preChat:{callback:null}},window.liveChatClientSettings={endChat:{callback:null},favIcon:{type:"image/png",url:"https://rag-bone.com/on/demandware.static/Sites-ragandbone-Site/-/default/dw52939d5e/images/favicon.ico"},inChat:{callback:null,headline:"Welcome to rag & bone Live Chat",loadingText:"Please wait while you are connected with an agent...",messages:{animate:!1,animationClass:"bounceIn",animationTime:.6,customClasses:"",callback:null},subText:""},jQuery:"https://code.jquery.com/jquery-1.12.4.min.js",preChat:{callback:null,headline:"Welcome to rag & bone Live Chat",subText:"A customer service representative is standing by to provide real time assistance"},title:"rag & bone Live Chat - Customer Service",validation:{errors:{animate:!1,animationClass:"flipInX",animationTime:!1,customClasses:"",callback:null}},windowHeight:730,windowWidth:485},function(o){var e=arguments.callee;if(!window.liveChatSettings)throw new Error("Couldn't find LiveChat settings. Please make sure livechat-config.js is loaded before livechat.js");if(!window.liveChatClientSettings)throw new Error("Couldn't find LiveChat Client settings. Please make sure livechat-config-client.js is loaded before livechat.js");if(!window.jQuery){if(!liveChatClientSettings.jQuery)throw new Error("jQuery is not loaded, and liveChatClientSettings.jQuery is not defined. Please set liveChatClientSettings.jQuery to a relative or absolute URL which points to the jQuery file you wish to load.");if(!e.jQueryLoading){var t=document.createElement("script");t.type="text/javascript",t.src=liveChatClientSettings.jQuery,document.getElementsByTagName("head")[0].appendChild(t),e.jQueryLoading=!0}return setTimeout(e,10)}function a(e,t){return t=(t||"").split("-")[0],("object"==typeof e?e[t||u]:e).toString()||""}e.jQueryLoading&&(o=jQuery.noConflict(),e.jQueryLoading=!1),o.fn.scrollTo=function(e,t,i){t=t||600,"function"!=typeof i&&(i=function(){}),o(this).stop().animate({scrollTop:e},t,i)},o.fn.animateOnce=function(t,i,n){t+=" animated";var a=o(this);a.data("animate-once")&&a.off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend").removeClass(a.data("animate-once")).stop(),a.data("animate-once",t),"function"==typeof i&&(n=i,i=!1),!i||"number"!=typeof i&&/[0-9.]+m?s/i.test(i)||(i+="s");var s=a.css("animation-duration");return"0s"===s&&(s=""),a.show(),i&&a.css({animationDuration:i}),a.addClass(t).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(e){a.removeClass(t).off("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend"),a.data("animate-once",!1),i&&a.css({animationDuration:s}),"function"==typeof n&&n.call(this)}),a};var s=o(window),i=o(document),r=o("body"),n=o("head"),l=navigator.userAgent,d=/iPad|iPhone|iPod/i.test(l)&&!window.MSStream,h=/iPhone|iPod|(?=.*\bAndroid\b)(?=.*\bMobile\b)|(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)|IEMobile|BB10|NokiaN9/i.test(l),c=!h&&/iPad|Android|\bTablet\b|\b(KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b|(?=.*\bWindows\b)(?=.*\bARM\b)/i.test(l),u=liveChatClientSettings.language=(o("#livechat-language").val()||"").split("-")[0]||liveChatClientSettings.language||(document.location.search.match(/[?&]lang=(\w+)/i)||"")[1]||((document.documentElement||document).lang||"").split("-")[0]||(navigator.language||"").split("-")[0]||(navigator.userLanguage||"").split("-")[0]||"en",m=a(liveChatSettings.chatUrl),g=a(liveChatSettings.buttonId),v=0!==o(".livechat-prechat").length?"pre-chat":-1!==document.location.href.indexOf(m)?"in-chat":"client";if("pre-chat"!=v&&"in-chat"!=v||(0===n.find("meta[name=viewport]").length&&n.append('<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />'),liveChatClientSettings.favIcon&&n.append('<link rel="icon" type="'+liveChatClientSettings.favIcon.type+'" href="'+liveChatClientSettings.favIcon.url+'">'),h&&r.addClass("is-mobile"),c&&r.addClass("is-tablet"),i.on("click",".livechat-close-btn",function(){window.close()})),"in-chat"==v){var f,p=liveChatClientSettings.inChat,C=p.messages;function b(){var e=s.height(),t=e-o(".livechat-client-input").outerHeight(!0)-o(".liveAgentChatWaiting").outerHeight(!0)-5,i=o(".livechat-inchat-container").css("max-height"),n=o("#liveAgentClientChat").find(".row"),a=o("#liveAgentChatLog");i=i&&"none"!==i?parseFloat(i):e,n.each(function(){var e=o(this);e.hasClass("liveAgentChatWrap")||(t-=e.outerHeight(!0))}),a.css({height:Math.min(t,i)})}liveChatClientSettings.title&&(document.title=a(liveChatClientSettings.title)),d&&o(".liveAgentSaveButton").hide(),r.addClass("livechat-inchat livechat-lang-"+u),o(".liveAgentSendButton").addClass("livechat-send-btn btn"),o(".livechat-text").html(a(p.headline)),o("#liveAgentChatInput").attr("autocomplete","off"),p.loadingText&&o(".livechat-loading-text").html(a(p.loadingText)),p.subText?o(".livechat-subtext").html(a(p.subText)):o(".livechat-subtext").hide(),p.buttonText&&(p.buttonText.endChat&&(f=a(p.buttonText.endChat))&&o(".liveAgentEndButton").each(function(){o(this).attr("title",f).html(f)}),p.buttonText.saveChat&&(f=a(p.buttonText.saveChat))&&o(".liveAgentSaveButton").each(function(){o(this).attr("title",f).html(f)}),p.buttonText.sendMessage&&(f=a(p.buttonText.sendMessage))&&o(".liveAgentSendButton").each(function(){o(this).attr("title",f).html(f)})),s.on("resize",b),liveagent.addEventListener(liveagent.chasitor.Events.CHAT_ESTABLISHED,function(){b(),o(".livechat-loading-modal").hide(),o(".liveAgentEndButton").removeAttr("onclick").on("click",function(e){e.preventDefault();try{SfdcApp.LiveAgent.Chasitor.endChat()}catch(e){}}),window.focus()}),liveagent.addEventListener(liveagent.chasitor.Events.CHAT_REQUEST_FAILED,function(){var e=o("#liveAgentMessageContainer"),t=e.find(".btn-primary");if(0===t.length)return setTimeout(arguments.callee,100);o(".livechat-loading-text").html(e.find("div > p").html()),o(".livechat-loading-image").hide(),t.on("click",function(){window.close()})});function y(){o(".livechat-inchat-buttons").append('<div class="livechat-close-btn"></div>'),"function"==typeof liveChatSettings.endChat.callback&&liveChatSettings.endChat.callback(),"function"==typeof liveChatClientSettings.endChat.callback&&liveChatClientSettings.endChat.callback()}liveagent.addEventListener(liveagent.chasitor.Events.AGENT_CHAT_ENDED,y),liveagent.addEventListener(liveagent.chasitor.Events.CHASITOR_CHAT_ENDED,y),(C.animate||C.customClasses||C.callback)&&(liveagent.addEventListener(liveagent.chasitor.Events.AGENT_CHAT_MESSAGE,function(){var e=o(".operator").not("[id]").last();C.customClasses&&e.addClass(C.customClasses),C.animate&&e.animateOnce(C.animationClass,C.animationTime),"function"==typeof C.callback&&C.callback.apply(this,arguments)}),liveagent.addEventListener(liveagent.chasitor.Events.CHASITOR_CHAT_MESSAGE,function(){var e=o(".client").not("[id]").last();C.customClasses&&e.addClass(C.customClasses),C.animate&&e.animateOnce(C.animationClass,C.animationTime),"function"==typeof C.callback&&C.callback.apply(this,arguments)})),function(){function e(){var e=o("#liveAgentMessageContainer button");0!==e.length&&e.addClass("btn btn-primary")}var t,i=liveagent.chasitor.Events;for(t in i)liveagent.addEventListener(i[t],e)}(),liveChatSettings.inChat&&"function"==typeof liveChatSettings.inChat.callback&&liveChatSettings.inChat.callback(),liveChatClientSettings.inChat&&"function"==typeof liveChatClientSettings.inChat.callback&&liveChatClientSettings.inChat.callback(),o(function(){setTimeout(function(){window.scrollTo(0,1)},0)})}else if("pre-chat"==v){liveChatClientSettings.title&&(document.title=a(liveChatClientSettings.title));var w=o("#livechat-prechat-form"),S=o("#livechat-session-id").val()||!1;S&&!/^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$/i.test(S)&&(S=!1),w.attr("action",m+"?lang="+u+"#deployment_id="+liveChatSettings.deploymentId+"&org_id="+liveChatSettings.orgId+"&button_id="+g+(S?"&session_id="+S:"")),w.append('<input type="hidden" name="liveagent.prechat:BrandCode" value="'+liveChatSettings.brandCode+'" />'),w.append('<input type="hidden" name="liveagent.prechat:Chat_Initiated_By" value="'+(c?"tablet":h?"mobile":"desktop")+'" />'),w.append('<input type="hidden" name="liveagent.prechat.findorcreate.map:Case" value="Chat_Initiated_By__c,Chat_Initiated_By" />'),w.append('<input type="hidden" name="liveagent.prechat.findorcreate.map.doCreate:Case" value="Chat_Initiated_By__c,true" />'),w.append('<input type="hidden" name="liveagent.prechat.save:BrandCode" value="PC_Brand_Code__c" />'),o(".livechat-text").html(a(liveChatClientSettings.preChat.headline)),liveChatClientSettings.preChat.subText?o(".livechat-subtext").html(a(liveChatClientSettings.preChat.subText)):o(".livechat-subtext").hide(),o("#is-existing-case").on("change",function(e){var t=o(this),i=o(".existing-case-field"),n=t.closest("form").data("validator"),a=!!n&&n.settings;o(this).is(":checked")?(i.removeClass("hidden"),o("#case-number").select(),r.scrollTo(r.prop("scrollHeight"))):(i.addClass("hidden"),a&&(i.find(a.errorElement+"."+a.errorClass.split(" ")[0]+", .form-errors").hide(),i.find("."+a.errorClass).removeClass(a.errorClass)))}),o.validator&&(o.extend(o.validator.messages,{de:{casenumber:"Bitte geben Sie eine gÃ¼ltige Bestellnummer ein.",email:"Bitte geben Sie eine gÃ¼ltige E-Mail-Adresse ein.",required:"Dieses Feld ist erforderlich."},en:{casenumber:"Please enter a valid order number."},es:{casenumber:"Introduzca un nÃºmero de pedido vÃ¡lido.",email:"Por favor, introduce una direcciÃ³n de correo electrÃ³nico vÃ¡lida.",required:"Este campo es obligatorio."},fr:{casenumber:"Entrez un numÃ©ro de commande valide.",email:"Veuillez indiquer une adresse de courriel valide.",required:"Ce champ est obligatoire."},it:{casenumber:"Inserisci un numero d'ordine valido.",email:"Si prega di inserire un indirizzo email valido.",required:"Campo obbligatorio."},no:{casenumber:"Vennligst skriv inn et gyldig bestillingsnummer.",email:"Vennligst oppgi en gyldig epostadresse.",required:"Dette feltet er obligatorisk."}}[u]),o.validator.addMethod("email",function(e,t){return this.optional(t)||/^[a-z0-9._%'+-]+@[a-z0-9.-]+\.[a-z]{2,}$/i.test(e)},o.validator.messages.email),o.validator.addMethod("casenumber",function(e,t){return o("#is-existing-case").is(":checked")&&0!==e.length&&/^[0-9a-z]{1,30}$/i.test(e)},o.validator.messages.casenumber)),liveChatSettings.preChat&&"function"==typeof liveChatSettings.preChat.callback&&liveChatSettings.preChat.callback(),liveChatClientSettings.preChat&&"function"==typeof liveChatClientSettings.preChat.callback&&liveChatClientSettings.preChat.callback(),o(function(){setTimeout(function(){window.scrollTo(0,1)},0),o.validator&&o(".form-validation").validate({errorClass:"livechat-field-error",errorElement:"div",showErrors:function(e,t){var i=this;if(0===t.length)return o(i.settings.errorElement+"."+i.settings.errorClass.split(" ")[0]+", .form-errors").each(function(){o(this).data("animated",!1).hide()}),void i.currentElements.removeClass(i.settings.errorClass);var n=liveChatClientSettings.validation.errors,a=n.animate,s=n.callback,r=n.customClasses;o.each(t,function(){i.defaultShowErrors();var e=this.method?i.toShow:o(this.element.nextSibling);e.prepend('<span class="livechat-icon-error"></span>'),a&&!e.data("animated")&&(e.data("animated",!0),e.animateOnce(liveChatClientSettings.validation.errors.animationClass,liveChatClientSettings.validation.errors.animationTime)),r&&e.addClass(r)}),"function"==typeof s&&s.call(this,t)}})})}else{function x(){liveagent.init(liveChatSettings.initUrl,liveChatSettings.deploymentId,liveChatSettings.orgId),liveagent.setChatWindowWidth(liveChatClientSettings.windowWidth),liveagent.setChatWindowHeight(liveChatClientSettings.windowHeight),o(function(){var e=o(".livechat-online"),t=o(".livechat-offline"),i=o(".livechat-button"),n=liveChatClientSettings.windowName||!1;"self"===n&&(window.name?n=window.name:window.name=n),e.each(function(){var e=o(this).data("livechat-lang");forButtonId=e?a(liveChatSettings.buttonId,e):g,liveagent.showWhenOnline(forButtonId,this)}),t.each(function(){var e=o(this).data("livechat-lang");forButtonId=e?a(liveChatSettings.buttonId,e):g,liveagent.showWhenOffline(forButtonId,this)}),i.each(function(){var e=o(this).data("livechat-lang"),t=e?a(liveChatSettings.buttonId,e):g;liveagent.showWhenOnline(t,this),o(this).on("click",function(e){var t=o(this).data("livechat-lang"),i=t?a(liveChatSettings.buttonId,t):g;e.preventDefault(),n?liveagent.startChatWithWindow(i,n):liveagent.startChat(i)})})})}window.liveagent?x():o.getScript(liveChatSettings.deploymentScript).done(function(){x()}).fail(function(){throw new Error("Failed to load SalesForce deployment script!")})}}(window.jQuery);var heroApi=function(l,e){var d=[],i=!0,h=!1,c=!1;function u(e){if(i){var t="[hero]  "+e;[].shift.apply(arguments),[].unshift.call(arguments,t),console.log.apply(null,arguments)}}var t={enableLog:function(e){i=!!e},track:function(e){h?(hero("track",e),u("track",e)):(d.push(e),u("script not loaded yet... queueing track"))},init:function(e){var t,i,n,a,s;c?u("loading canceled... already loading"):h?u("loading canceled... already loaded"):(c=!0,window.HeroWebPluginSettings={applicationId:e,position:{left:"0",bottom:"0"}},t=window,i=document,n="hero",t.HeroObject=n,t[n]=t[n]||function(){(t[n].q=t[n].q||[]).push(arguments)},t[n].l=+new Date,a=i.createElement("script"),s=i.getElementsByTagName("script")[0],a.async=1,a.src="https://cdn.usehero.com/loader.js",a.onload=r,a.onerror=o,s.parentNode.insertBefore(a,s));function r(){c=!(h=!0),u("script loaded... flushing queue");for(var e=0;e<d.length;e++)l.track(d[e]);d=null}function o(){c=!1,console.log("failed to retrieve API script")}}};return e.extend(l,t)}(window.heroApi=window.heroApi||{},jQuery);
//# sourceMappingURL=source-maps/livechat.js.map
