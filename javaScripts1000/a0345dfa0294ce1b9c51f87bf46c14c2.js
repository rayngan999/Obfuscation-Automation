function refreshLayoutW(){function c(g,d,f,e){if(g){e.addClass(d).removeClass(f)}else{e.removeClass(d).addClass(f)}}var b=$("#maindiv");var a=b.width()+parseInt(b.css("padding-left"),10)+parseInt(b.css("padding-right"),10);c(a<1500,"w12","w12p",b);c(a<1300,"w11","w11p",b);c(a<1120,"w10","w10p",b);c(a<1000,"w9","w9p",b);c(a<860,"w8","w8p",b);c(a<780,"w7","w7p",b);c(a<650,"w6","w6p",b);c(a<520,"w5","w5p",b);c(a<370,"w4","w4p",b)}Array.prototype.forEach||(Array.prototype.forEach=function(f,c){var e=c||this,b=Object(this),a=b.length>>>0;for(var d=0;d<a;++d){(d in b)&&f.call(e,b[d],d,b)}});jQuery.fn.extend({fullPos:function(){var c=0;var b=0;if(this.length>0){var a=this[0];while(a){c+=(a.offsetLeft+a.clientLeft);b+=(a.offsetTop+a.clientTop);a=a.offsetParent}}return{x:c,y:b}},bgImageSrc:function(){if(this.length>0){return this.first().css("background-image").replace(/url\(/,"").replace(/\)|"|'/g,"")}else{return""}}});var isExplicitAboutPage=(window.isAboutPage===2);var aboutStatus="init";if(window.isAboutPage&&!isApp){documentReady(function(){$("#appTeaserStart").append("<div id='appTeaserStartBackground'>");var m=/[?&]debugAbout=1/.test(location.href);var f=new Date().getTime();if(!$("#body").hasClass("startpage")){return}var b=/[?&]alwaysChangeMinHeight=1/.test(location.href);var q=-1;function B(){if(m){console.log("fix100vhBug")}var i=document.documentElement.clientWidth;if(q==-1||i!=q||!isMobileLayout||b){var K=document.documentElement.clientHeight;if(isIE8orLower){$("#lingueecontent").css("height",Math.max(K,850)+"px")}else{$("#lingueecontent").css("min-height",K+"px")}}if(q!=i){q=i}}$(window).resize(B);B();var v=navigator.userAgent.match(/(\w+)\/([0-9.]+)/g);var p={};for(var C=0;C<v.length;++C){var a=v[C].split("/");p[a[0]]=parseFloat(a[1])}if(m){console.log(p)}var G=navigator.userAgent.indexOf("Android")>0;var d=1;var D=3;var E=false;var e=window.queryVars.parallax;if(e===undefined&&!isMobileLayout){if(G&&p.Chrome&&p.Chrome<48){e=d;E=true;if(m){console.log("hotfix_oldChromeOnAndroid")}}else{if((p.Firefox>=45&&!is_touch_device())||p.Trident>=7||p.Edge>=12||isIPhone||isIPad||$("#cookie-hint").length>0){e=D}else{if(p.Chrome>=48||p.Safari>=601){e=d}}}}var k=window.queryVars.aboutVideo||isIPhone||isIPad||p.Edge>=12||(p.Trident>=6&&!is_touch_device())||(p.Firefox>=35&&!is_touch_device())||p.Chrome>=48||(p.Safari>=601&&!is_touch_device());if(m){console.log("(About) Parallax:",e," Video:",k)}var A="#ip_content_wrapper";var J="#outer_div";var t=[];var l={x:0,y:0};var s=$();var I=$();var x=0;var w=0;var h=1;var H={};var o=$("#body");if(o.hasClass("suppress_ads")&&!/[?&]menubar=[1]/.test(location.href)&&!isMobileLayout){$("#ip_content_wrapper").prepend($("#navi_bar_o"));$("#navi_bar_o").removeClass("wide_in_main")}if(o.hasClass("suppress_ads")&&isExplicitAboutPage&&!/[?&]menubar=[1]/.test(location.href)&&!isMobileLayout){$("#ip_page_wrapper").prepend($("#navi_bar_o"));$("#navi_li_search a").click(function(){I.animate({scrollTop:0},600,"swing",function(){$("#queryinput").focus()})});o.addClass("with_fixed_navi")}s=(e==d)?$(A):$(window);I=(s.is($(window)))?$("html,body"):s;if(o.hasClass("suppress_ads")){$("html").addClass("suppress_ads")}if(e==d){var F=true;$("#body").addClass("parallax");if(window.queryVars.noscrolltrigger!=1){var n=0;s.scroll(function(K){if(e==d){var i=s.scrollLeft();if(i!=n||F){n=i;F=false;s.css("perspective-origin",(x-i)+"px "+w+"px")}}})}$(window).resize(function(){if(e==d){$(t).each(function(){this.cssTransform("").cssTransformOrigin("")});u();F=true}});u()}var y=[];$.extListenOn("SearchField/onQueryUpdated",function(){if($("#section2").length){if(m){console.log("Leaving StartPage")}for(var K=0;K<y.length;K++){y[K].src=""}y.length=0;setTimeout(function(){$("#l_page_wrapper").css("min-width",$("#outer_div").css("min-width"))},1);$("#maindiv").append($("#footer"));$("#sections,#section1,#section2,#section3,#section4,#appTeaserStart,#scrollteaser1,.next_section_img,#section_closure").remove();s.css("perspective-origin","");o.removeClass("parallax").removeClass("aboutpage");$("#lingueecontent").removeClass("wide_content").removeClass("wide_in_main");if(window.ScrollTriggers){ScrollTriggers.disable()}e=false;if(!isMobileLayout){z(0)}}});if(is_touch_device()){setTimeout(function(){$("#queryinput").blur();if(m){console.log("blurred")}},1)}if(location.href.match(/[?&]omitAbout=1/)){if(m){console.log("Omitting about content.")}aboutStatus="omitted"}else{if(isExplicitAboutPage){if(m){console.log("Explicit about page.")}aboutStatus="showingOnAbout";c();aboutStatus="shownOnAbout"}else{aboutStatus="waitOnLoad";if(m){console.log("Start page, setting onload handler.")}(function(){var K=1;function i(){(--K==0)&&M.register("about_imagesLoadedMarker",Date.now()-timestampHead)}$("#logo, #search_button, .appicon").each(function(){++K;var L=new Image();L.onload=i;L.src=$(this).css("background-image").match(/\([#"]?(.*?)[#"]?\)/)[1];if(L.complete){i();L.onload=function(){}}});i()})();M.whenAvailable("about_imagesLoadedMarker",function(K){if(m){console.log("Time to load Startpage: "+K)}if(!$("#body").hasClass("startpage")){aboutStatus="leftStartpage";return}aboutStatus="onload";if(K>3500&&!location.href.match(/[?&]omitAbout=no/)){aboutStatus="tooSlow";if(m){console.log("Will not show about content because page is loading very slow.")}return}var i=function(L,Q){var P,O,N=0;if(L.length==0){Q()}for(P=0,O=L.length;P<O;P++){(function(R,S){if(m){console.log("loading: "+S)}R.onload=function(){if(m){console.log("loaded: "+S)}if(++N==L.length&&Q){Q()}};R.onerror=function(){if(m){console.log("error: "+S)}if(++N==L.length&&Q){Q()}};R.onabort=function(){};R.src=S}(new Image(),L[P]))}};$("#aboutLazyLoad .sectionimg").each(function(){y.push($(this).attr("data-img-src"))});if(!isMobileLayout){$("#AndroidApp, .androidapp, #iPhoneGross, .laptop").each(function(){y.push($(this).bgImageSrc())})}i(y,(location.href.match(/[?&]omitAbout=2/))?function(){aboutStatus="explicitOmit"}:function(){aboutStatus="showingOnStart";c();aboutStatus="shownOnStart"})})}}function c(){if(isMobileLayout){$("#section2 h3:last").remove();$("#section2 p:last").remove()}$("#aboutLazyLoad .sectionimg").each(function(){var K=$("<img>");K.attr("id",$(this).attr("id"));K.attr("class",$(this).attr("class"));K.attr("src",$(this).attr("data-img-src"));$(this).before(K).remove()});$("#section2,#section3,#section4,#section_closure").insertBefore($("#footer"));$(".sectionimg").show();if(isMobileLayout){$("#section1 .next_section_img").prependTo($("#section2")).addClass("section2_img").removeClass("next_section_img")}$("#lingueecontent").append($("#section1").children());if(E){$("#section2img").cssTransform("translate3d(0,0,0)");$("#section2").addClass("up");$("#section3").addClass("up");$("#section4").addClass("up")}$(".section").prepend("<div class='sectionbegin'></div>");if(e==d){u()}ScrollTriggers.init(j,s);var i=getAppStoreLink();setTimeout(function(){var L=$("#iPhoneGross");if(k&&L.length&&!isMobileLayout){var N=document.createElement("video");var O=L.attr("data-video-src");if(!isMobileLayout){O=O.replace("-m.mp4","-s.mp4")}N.src=O;N.loop=true;N.id="iPhoneGrossI";if(typeof(N.canPlayType)!="undefined"&&N.canPlayType("video/mp4").length>0){if(G){var K=$("<div id='startVideoLayer'>").append($("<div>")).prependTo(L);$(N).css("visibility","hidden").appendTo(L);K.click(function(){$(N).css("visibility","visible");N.play();setTimeout(function(){K.remove()})})}else{L[0].appendChild(N);if(ScrollTriggers.getTriggerState("vidplay")){N.play()}}}else{if(m){console.log("Cannot play mp4 video.")}}}},500);setTimeout(g,6000);$(".scrollteaser").click(function(){if($(this).css("opacity")>0){if(m){console.log("Parallax.container:",I)}var K=$(this).closest(".section,#lingueecontent");do{K=K.next()}while(!K.hasClass("section"));I.animate({scrollTop:K.fullPos().y},600,"swing")}});$(".scrollteaser_up").click(function(){if($(this).css("opacity")==1){var K=$(this).closest(".section, #maindiv");if($(this).closest("next_section_img").length==0){K=K.prev()}I.animate({scrollTop:K.fullPos().y},600);return false}});if(isExplicitAboutPage){if(m){console.log("Scrolling to About section.")}I.scrollTop($("#aboutScrollpoint").fullPos().y)}if(m){console.log("Scrollable StartPage ready!")}}function r(L,X,U,S){var T=1;X*=T;var N=$(L);var i=s.scrollTop();t.push(N);if(N.length==0){return}var W=0;if(typeof(U)=="number"){W=U}else{W=$(U).offset().top+i}if(typeof(S)=="number"){W+=S}var O=(T-X)/T;var R=N.offset();var V=R.top+i-W;var K=R.left+s.scrollLeft();var P=-(V/T)*X;var Q=-(K/T)*X;Q=Math.round(Q*100)/100;P=Math.round(P*100)/100;var Z="translate3D("+(Q+l.x)+"px,"+(P+l.y)+"px,"+X+"px) scale("+O+","+O+") ";var Y="0 0";N.cssTransform(Z).cssTransformOrigin(Y)}function u(){t=[];l.x=0;l.y=0;var R=(navigator.userAgent.indexOf(" Chrome/")>-1);var N=!R&&(navigator.userAgent.indexOf("Safari/")>-1);if(N){var L=15;var P=15;var i=s[0].scrollWidth-s[0].offsetWidth+L;var Q=s[0].scrollHeight-s[0].offsetHeight+P;x=(Q>0?(L/2):0);w=(i>0?(P/2):0);var O=(x+s.scrollLeft())+"px "+w+"px";s.css("perspective-origin",O)}var K=$(J).offset().left;l.x+=((K-Math.round(K))*0.5)}function z(L){var i=$("#query_field_and_button");var K=$("#navi_li_search");if(L&&!K.is(":visible")){K.css("display","table-cell")}else{if(!L&&K.is(":visible")){K.css("display","none")}}}function j(V){if(!$("#body").hasClass("startpage")){return}var Q=0,P=0,O=0;var al=$(window).height();var ai=$("#maindiv");var R=ai.width()+parseInt(ai.css("padding-left"),10)+parseInt(ai.css("padding-right"),10);var ap=parseInt($("#section2img").css("marginTop"));var ao=parseInt($("#section3img").css("marginTop"));var am=parseInt($("#section4img").css("marginTop"));var T=R*2/3+ap;var i=R*2/3+ao;var an=R*7/12+am;var av=$("#section2 .sectioncontent");var au=$("#section3 .sectioncontent");var ar=$("#section4 .sectioncontent");var X=av.children(".sectioncontent_i").height()+av.children("h2").height();var K=av.children(".sectioncontent_i").height()+av.children("h2").height();var ah=parseInt(av.css("marginTop"),10);var ag=parseInt(au.css("marginTop"),10);var af=parseInt(ar.css("marginTop"),10);var at=$("#maindiv").hasClass("w5");var aA=parseInt(av.css("padding-top"),10);var az=parseInt(au.css("padding-top"),10);var ay=parseInt(ar.css("padding-top"),10);var ae=Math.min(aA+ah+100,X+aA+ah-$("#iPhoneGross").height()+50);var ad=Math.min(aA+ag+100,K+aA+ag-$("#AndroidApp").height()+30);var ab=aA+af+50;if(2*T-ae<al){Q=-(al-(2*T-ae))}if(2*i-ad<al){P=-(al-(2*i-ad))}if(2*an-ab<al){O=-(al-(2*an-ab))}Q-=ah;P-=ag;O-=af;if($("#section4").height()<$(window).height()){O=Math.min(O,-($(window).height()-$("#section4").height()))}if(E){}else{if(isMobileLayout&&al>$(window).width()&&(e==d||e==D)){var U=al<700?-20:-100;Q=U;var ac=$(window).height();$("#section2").cssTransform("translate3d(0,0,0)");var ak=$("#section2").fullPos().y-$("#section2img").fullPos().y;var W=T-ak;var Y=W/(ac+Q);V.addTriggerScrollListener({id:"section2",startPos:-10000,endElement:"#section2img",endElementOffset:Q,node:$("#section2")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0)*Y)+"px,0)")});P=U;var S=$("#section3").fullPos().y-$("#section3img").fullPos().y;var ax=i-S;var aw=ax/(ac+P);V.addTriggerScrollListener({id:"section3",startPos:-10000,endElement:"#section3img",endElementOffset:P,node:$("#section3")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0))*aw+"px,0)")});O=U;var aq=$("#section4").fullPos().y-$("#section4img").fullPos().y;var aa=an-aq;var Z=aa/(ac+O);V.addTriggerScrollListener({id:"section4",startPos:-10000,endElement:"#section4img",endElementOffset:O,node:$("#section4")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0))*Z+"px,0)")})}else{if(e==d){V.addTriggerClassToggle({id:"section2",startElement:"#section2",startElementOffset:Q},"#section2","up");V.addTriggerClassToggle({id:"section3",startElement:"#section3",startElementOffset:P},"#section3","up");V.addTriggerClassToggle({id:"section4",startElement:"#section4",startElementOffset:O},"#section4","up");r("#section2",0.5,"#section2",Q);r("#section3",0.5,"#section3",P);r("#section4",0.5,"#section4",O)}else{if(e==D){V.addTriggerScrollListener({id:"section2",startPos:-10000,endElement:"#section2",endElementOffset:Q,node:$("#section2")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0))+"px,0)")});V.addTriggerScrollListener({id:"section3",startPos:-10000,endElement:"#section3",endElementOffset:P,node:$("#section3")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0))+"px,0)")});V.addTriggerScrollListener({id:"section4",startPos:-10000,endElement:"#section4",endElementOffset:O,node:$("#section4")},function(aC,aB){aB.node.cssTransform("translate3d(0,"+(aC===undefined?0:Math.max(aB.endPos-aC,0))+"px,0)")})}}}}var L,N;V.addTriggerScrollListener({id:"navBar",startPos:500},function(aC){var aB=!aC||(L&&aC<L);if(aB!==N){if(aB){$("#navi_bar_o").removeClass("up")}else{$("#navi_bar_o").addClass("up")}N=aB}L=aC});if(!isMobileLayout){V.addTrigger({id:"vidplay",startElement:"#section2",startElementOffset:-310,endElement:"#section3",endElementOffset:-100},function(aC){var aB=document.getElementById("iPhoneGrossI");if(aB){if(aC){if(aB.readyState>0){aB.currentTime=0}aB.play()}else{aB.pause()}}})}else{if(!$("#AndroidApp").hasClass("L5")){if($("#appVidPlay").length==0&&$(".section2_img").length){$(".section2_img").append("<div id='appVidPlay'><div id='appVidPlayI'></div></div>");$(".section2_img").click(function(){if($("#appVid").length==0){$("#scrollteaser2up").hide();var aB=$(".section2_img");var aC=aB.attr("data-app-video-url");aB.append("<iframe id='appVid' src='"+aC+"' frameborder='0' width='100%' height='100%' allowfullscreen></iframe>");$("#section2img").css("visibility","hidden")}})}}}var aj=$("#lingueecontent").fullPos().y+$("#lingueecontent").height();if(al>aj-50){$("#scrollteaser1").addClass("on");V.addTriggerClassToggle({id:"scrollteaser1",startPos:-100,endPos:20},"#scrollteaser1","on")}else{$("#scrollteaser1").removeClass("on")}if(!$("#outer_div").hasClass("il_FR")){V.addTriggerClassToggle({id:"scrollteaser2up",startElement:"#scrollteaser2up",startElementOffset:-40,endElement:"#scrollteaser2up",endElementOffset:20},"#scrollteaser2up","on")}if(!isMobileLayout){V.addTrigger({id:"query_field_and_button",startPos:100},z)}V.addTriggerClassToggle({id:"android_visible",startElement:"#section3",startElementOffset:-310,endElement:"#section4"},"#AndroidApp","visible")}function g(){var L=$(".androidapp").last();if(L.length==0){}else{if(!L.parent().hasClass("visible")||!L.is(":visible")){setTimeout(g,4500)}else{L.prev().remove();var N=L.bgImageSrc();h++;if(h>4){h=1}N=N.replace(/[0-9]+\.png/,h+".png");function K(){L.after("<div class='androidapp' style='background-image: url("+N+");'>");setTimeout(function(){L.next().css("opacity","1");setTimeout(g,4500)},50)}if(H[N]){K()}else{var i=new Image();H[N]=N;if(i.height>0){K()}else{i.onload=K;i.onerror=function(O){console.log("error while loading image",O)};i.src=N}}}}}})}var ScrollTriggers=(function(){var g=[];var c=[];var d=$();var k=function(){};function a(q,p){q.state=undefined;q.onStateChanged=p;if(q.startElement!==undefined){q.startPos=$(q.startElement).fullPos().y+(q.startElementOffset||0)}else{if(q.startPos===undefined){q.startPos=-100000}}if(q.endElement!==undefined){q.endPos=$(q.endElement).fullPos().y+(q.endElementOffset||0)}else{if(q.endPos===undefined){q.endPos=100000}}g.push(q)}function e(t,p,r,q,s){a(t,function(u){if(u){$(p).addClass(r);if(q!==undefined){$(q).addClass(s)}}else{$(p).removeClass(r);if(q!=="undefined"){$(q).removeClass(s)}}})}function b(p,r){for(var q=p.length-1;q>=0;--q){if(p[q]===r){p.splice(q,1)}}}function l(r,q){var p=function(s){q(s,r)};a(r,function(s){if(s){c.push(p)}else{b(c,p);p(undefined)}})}function n(q){for(var p=0;p<g.length;++p){if(g[p].id==q){return g[p]}}}function j(r,p){var q=(typeof inTrigger=="string")?n(r):r;if(!q){console.log("(ScrollTriggers) Invalid trigger ",r)}else{if(q.state!==p){q.state=p;q.onStateChanged(p)}}}function o(p){$(g).each(function(){j(this,(p>this.startPos&&p<this.endPos))})}function m(){i();k.call(ScrollTriggers,ScrollTriggers);o(d.scrollTop())}function f(q){var p=n(q);return p&&p.state}function h(p){p.splice(0,p.length)}function i(){c.forEach(function(p){p(undefined)});h(c);h(g)}return{addTrigger:a,addTriggerClassToggle:e,addTriggerScrollListener:l,disable:function(){i();k=function(){}},init:function(q,p){k=q;d=p;var s=undefined;var r=false;var t=(!isIPad&&!isIPhone&&window.requestAnimationFrame)||window.setTimeout;d.scroll(function(u){if(!r){r=true;t(function(){r=false;var v=d.scrollTop();if(v!==s){c.forEach(function(w){w(v)});s=v}o(v)})}});$(window).resize(m);m()},setTriggerState:j,getTriggerState:f,_onResize:m}})();