(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"3y+j":function(e,t,n){},"4yhJ":function(e,t,n){"use strict";var c=n("QtlZ"),a=n("Wjfv"),r=n("7oto");t.a=function UseRemoveActiveCampaign(){Object(r.c)({topic:"CONDUCTOR:remove-active-campaign",handler:function handler(e){c.a.dispatch(Object(a.a)())}})}},"7HSs":function(e,t,n){"use strict";var c=n("s8DI"),a=n("nJ3u"),r=n("O94r"),o=n.n(r),i=n("nQD+"),u=n("ab+K"),s=n("7oh4"),l=n("nedb"),f=n("LVcX"),b=n("ERkP"),d=n.n(b),O=function useIsBotMessage(e){return Object(b.useMemo)(function(){return Object(f.a)(!1,["attributes","isBot"],e)},[e])},j=n("z24s"),g=n("58kB"),m=n("LaGA"),v=function useResizeObserver(){var e=Object(b.useState)(),t=Object(c.a)(e,2),n=t[0],a=t[1],r=Object(b.useState)(null),o=Object(c.a)(r,2),i=o[0],u=o[1],s=Object(b.useRef)(null),l=Object(b.useCallback)(function(){return s.current&&s.current.disconnect()},[]),f=Object(b.useCallback)(function(){i&&(s.current=new m.a(function(){return a(function getRectForRef(e){return e&&e.getBoundingClientRect()}(i))}),s.current.observe(i))},[i]);return Object(b.useLayoutEffect)(function(){return f(),function(){return l()}},[l,f]),[n,u]},p=n("lE29"),E=n("da4L"),h=n("i9gz"),w=n("DboL"),C=n("uDfI"),k=function useUnreadMessagesForActiveConversation(){var e=Object(C.c)(function(e){return e.conversations}).activeConversation,t=Object(C.c)(function(t){return Object(f.a)({},["conversations","messages",e],t)}),n=Object(C.c)(function(t){return Object(f.a)([],["conversations","unreadAgentMessages",e],t)});return Object(b.useMemo)(function(){if(Object(h.a)(t))return[];var e=Object(E.n)(Object(w.a)(t));return e.filter(function(e){return function messageHasBody(e){return!!e.body&&!!e.body.length}(e)&&function messageIsNotRatingPrompt(e){return!Object(E.e)(e,"ratingPrompt")}(e)&&function messageIsUnread(e){return n.includes(e.id)}(e)})},[t,n])},I=n("LwEI"),S=n("SsZN"),y=n("vjCh"),L=n("qixE"),R=n("xwTo"),N=n("X9/c"),A=n("g6eD"),_=n("2XY6"),T=n("RhEL"),D=n("oPI6"),M=n("vTYT"),U=n("y0on"),P=(n("pUpc"),function MessagePreview(){var e=v(),t=Object(c.a)(e,2),n=t[0],r=t[1],m=Object(C.b)(),w=Object(b.useState)(null),P=Object(c.a)(w,2),B=P[0],W=P[1],x=Object(b.useRef)(null),F=Object(j.a)(x),H=Object(C.c)(function(e){return e.conversations}).activeConversation,J=k(),z=Object(l.a)(),X=Object(p.a)(),G=Object(C.c)(_.e),V=Object(C.c)(function(e){return e.view.chatOpen}),Y=Object(I.a)(),K=Object(g.a)(B?B.authorId:null),q=Object(b.useMemo)(function(){return!(!B||!B.body||V)},[B,V]);Object(b.useEffect)(function setLatestMessageFromConvo(){if(Object(h.a)(J))W(null);else{var e=J.pop()||{};B&&Object(T.a)(e.id,B.id)||W(Object(E.q)(e,100))}},[J]),Object(b.useLayoutEffect)(function updateFrameSize(){if(q){var e=n?n.width:0,t=n?n.height:0,c=e+s.b+40,a=t+36;Object(N.c)(a,c)}},[n,q]);var Q=O(B);if(!q)return null;var Z=function dismiss(){B&&(Object(L.c)(H),W({}),Object(N.b)(),$())},$=function dismissPlaybookIfNotInteracted(){if(!Object(R.g)()){var e=Object(f.a)(null,["attributes","playbookId"],z);Object(S.o)(B),Object(y.l)(z.id,e)}},ee=Object(E.c)(B),te=Object(U.a)(K.recipient.name,ee);return d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n          .drift-widget-message-preview .drift-widget-message-preview-text p.keyboard-focused {\n            ".concat(Object(a.c)(X.activeColor),"\n          }\n        ")),G&&d.a.createElement("div",{className:"drift-widget-message-preview-wrapper",key:"".concat(B.id,"-preview-box")},d.a.createElement(D.b,{message:te,"aria-live":"polite",clearOnUnmount:!0}),d.a.createElement("div",{className:"drift-widget-message-preview drift-widget-message-preview--align-".concat(Y)},Y===M.a.RIGHT&&d.a.createElement(u.a,{onClick:Z}),d.a.createElement(i.a,{ref:x,onClick:function openChat(){if(Object(N.b)(),Q){var e=Object(f.a)(null,["attributes","playbookId"],z);Object(S.n)(B),Object(y.l)(z.id,e)}m(Object(A.e)({chatOpen:!0}))},className:"drift-widget-message-preview-text drift-widget-message-preview-text--align-".concat(Y),"aria-label":"".concat(te?te+" - ":"","Click to open chat")},d.a.createElement("p",{ref:r,className:o()({"keyboard-focused":F})},ee)),Y===M.a.LEFT&&d.a.createElement(u.a,{onClick:Z}))))}),B=n("nfbA"),W=n("+Kbs"),x=n("yEsl"),F=n("hSLT"),H=n("mZ4K"),J=n("fL0f"),z=n("6wvX"),X=n("tLIi"),G=n("o3t1"),V=function useThemeIcon(){var e=Object(C.c)(function(e){return e.embed.configuration}).theme,t=e.iconStyle,n=e.iconUrl,c=e.foregroundColor,a={SOLID1:d.a.createElement(W.h,{fill:"#".concat(c)}),SOLID2:d.a.createElement(W.g,{fill:"#".concat(c)}),OUTLINE1:d.a.createElement(W.e,{fill:"#".concat(c)}),OUTLINE2:d.a.createElement(W.f,{fill:"#".concat(c)}),BOLT:W.c};return{customIcon:n?{backgroundImage:"url(".concat(n,")"),backgroundSize:"cover",backgroundRepeat:"no-repeat"}:{},hasCustomIcon:!!n,Icon:a[t]||null}},Y=n("8saY"),K=function useWidgetIconShape(){return Object(C.c)(function(e){return e.embed.configuration.theme.widgetIconShape})||Y.b.SQUARE},q=n("0B8E"),Q=n("MFhO"),Z=n("7oto"),$=n("1kux"),ee=n("rTkt"),te=(n("3y+j"),"SENDER"),ne="MEGAPHONE",ce="THEME_ICON",ae=function WidgetIcon(){var e=Object(b.useRef)(null),t=Object(j.a)(e),n=Object(G.a)(),r=n.hoverProps,i=n.isHovered,u=Object(C.b)(),s=Object(C.c)(function(e){return e.view.chatOpen}),m=Object(C.c)(function(e){return e.session.gdpr}),v=Object(C.c)(_.e),E=Object(C.c)(function(e){return!!e.conversations.activeConversation}),h=Object(I.a)(),w=Object(l.a)(),L=Object(C.c)(function(e){return Object(f.a)(!1,["embed","configuration","theme"],e)}).unreadBadgeEnabled,R=k(),N=Object(C.c)(function(e){return e.view.isChatTakeover}),T=Object(X.a)(),D=O(T),M=Object(p.a)(),U=M.activeColor,P=M.backgroundStyles,Y=M.widgetSecondaryColor,ae=Object(b.useMemo)(function(){return i?Object(ee.c)(P.background,-35):P.background},[i,P]),re=V(),oe=re.Icon,ie=re.customIcon,ue=re.hasCustomIcon,se=Object(H.a)(),le=Object(F.a)().type,fe=se||Object(f.a)(void 0,["authorId"],T),be=Object(g.a)(fe).recipient,de=R?Object(q.a)(R).length:0,Oe=le===Q.a.SLIDER,je=fe&&(Oe||de>0),ge=Object(J.a)(["titleNotificationEnabled"]),me=Object(c.a)(ge,1)[0],ve=void 0!==me&&me,pe=Object(b.useMemo)(function(){return je?te:Oe&&!fe?ne:ce},[fe,Oe,je]),Ee=Object(z.a)(),he=K();Object(b.useEffect)(function(){ve&&Object(Z.a)({topic:"page-notification-update",message:{totalUnreadMessages:de}})},[de,ve]);Object(b.useEffect)(function(){Object(Z.a)({topic:"toggle-widget-controller",message:{isChatTakeover:N,open:s,hasActiveConversation:E&&m.hasConsent}})},[s,m,E,N]),Object(b.useEffect)(function(){R&&R.length>0&&Object($.a)()},[R]);var we=Object(b.useMemo)(function(){return je&&!s?null:{background:"".concat(ae)}},[je,s,ae]),Ce=Object(b.useMemo)(function(){return!ue||je||s?null:i?Object(B.a)({opacity:.65},ie):ie},[ie,je,s,ue,i]),ke=Object(b.useMemo)(function(){if(s)return be.name?"Click to close chat with ".concat(be.name," in the Drift Widget messenger"):"Click to close Drift Widget messenger";var e=be.name?"Click to open chat with ".concat(be.name," in the Drift Widget messenger"):"Click to open Drift Widget messenger";return L&&de>0?"".concat(e," - Unread messages: ").concat(de):e},[s,L,be.name,de]);return d.a.createElement(d.a.Fragment,null,d.a.createElement("style",null,"\n          .drift-widget-controller.keyboard-focused:before {\n            ".concat(Object(a.a)(U,64),"\n          }\n        ")),v&&d.a.createElement("button",Object.assign({className:o()("drift-widget-controller drift-widget-controller--align-".concat(h),[he],{"drift-widget-controller--closed":!Ee&&s,"drift-widget-controller--custom-icon":ue,"drift-widget-controller--avatar":je,"drift-widget-controller--hide":N,"keyboard-focused":t}),onClick:function onToggleChat(){if(!s&&de>0&&D){var e=Object(f.a)(null,["attributes","playbookId"],w);Object(y.l)(w.id,e),Object(S.n)(T)}!function toggle(e){Oe?Object(Z.a)({topic:"slider:showDetails",message:{}}):u(Object(A.e)({chatOpen:e})),e&&Object(Z.a)({topic:"reset-controller-size"})}(!s)},style:we},r,{"aria-label":ke,ref:e}),d.a.createElement("div",{className:o()("drift-widget-controller-icon",[he]),style:Ce},d.a.createElement("div",{className:"drift-controller-icon--active"},pe===ne&&d.a.createElement(W.n,{fill:Y}),pe===te&&d.a.createElement(x.a,{className:o()([he],"drift-controller-icon--avatar"),avatarClassName:o()([he],"drift-controller-icon--avatar-avatar"),id:fe}),pe===ce&&!ue&&oe),d.a.createElement("div",{className:"drift-controller-icon--close",style:{backgroundColor:Y}})),L&&de>0&&d.a.createElement("div",{className:"drift-controller-icon-unread"},Math.min(de,99))))},re=n("qATS"),oe=n("Sn8X"),ie=function ControllerLayout(){return Object(oe.a)(),d.a.createElement("main",{role:"main","aria-label":"Drift Widget messenger icon"},d.a.createElement(D.a,null,d.a.createElement(P,null),d.a.createElement(ae,null)))};t.a=function(){var e=Object(re.a)();return d.a.createElement(d.a.Fragment,null,e&&d.a.createElement(ie,null))}},LwEI:function(e,t,n){"use strict";var c=n("LVcX"),a=n("uDfI"),r=n("vTYT");t.a=function useWidgetAlignment(){return Object(a.c)(function(e){return Object(c.a)(r.a.RIGHT,["embed","configuration","theme","alignment"],e)})}},My8U:function(e,t,n){"use strict";var c=n("nfbA"),a=n("SWQ0"),r=n("wNJw"),o=n("7oto");t.a=function UseStoreSync(e){var t=e.store,n=e.syncWith,i=e.name;return Object(o.c)({topic:"CONDUCTOR:action-from-".concat(n),handler:function handler(e){t.dispatch(Object(c.a)(Object(c.a)({},e.data.action),{},{_foreignDispatch:!0}))}}),Object(r.a)(a.a["".concat(i.toUpperCase(),"_READY")]),t}},NJR1:function(e,t,n){},RKIR:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var c={googleAnalyticsSettings:!0}},Sn8X:function(e,t,n){"use strict";var c=n("LVcX"),a=n("ERkP"),r=n("Tr4L"),o=n("uDfI"),i=n("0lfv"),u=n("VpmR");t.a=function useLanguageSwitcher(){var e=Object(r.a)().i18n,t=Object(o.c)(function(e){return Object(c.a)("en",["embed","configuration","locale"],e)});Object(a.useEffect)(function(){e&&Object(i.k)(e.changeLanguage)&&e.changeLanguage(Object(u.c)(t))},[e,t])}},"ab+K":function(e,t,n){"use strict";var c=n("nJ3u"),a=n("O94r"),r=n.n(a),o=n("/UYI"),i=n("nQD+"),u=n("z24s"),s=n("lE29"),l=n("LwEI"),f=n("ERkP"),b=n.n(f);n("NJR1");t.a=function MessageCloseButton(e){var t=e.onClick,n=Object(l.a)(),a=Object(s.a)(),d=Object(f.useRef)(null),O=Object(u.a)(d);return b.a.createElement(b.a.Fragment,null,b.a.createElement("style",null,".drift-widget-message-close-button.keyboard-focused {\n          opacity: 1;\n        }\n        .drift-widget-message-close-button.keyboard-focused:before {\n          ".concat(Object(c.a)(a.activeColor,20,-3,-3),"\n        }\n        ")),b.a.createElement(i.a,{onClick:function handleOnClick(e){(null===d||void 0===d?void 0:d.current)&&(null===d||void 0===d||d.current.blur()),t(e)},ref:d,className:r()("drift-widget-message-close-button","drift-widget-close-button--align-".concat(n),{"keyboard-focused":O}),"aria-label":"Close Drift Widget messenger preview overlay"},b.a.createElement(o.a,{width:10,height:10})))}},g3yi:function(e,t,n){"use strict";var c=n("nfbA"),a=n("efbE"),r=n("LeJ0"),o=function getDefaultAuthParams(e){return{org_id:e,client_id:r.a.CLIENT_ID,consent_id:"has_consent"}};n.d(t,"b",function(){return i}),n.d(t,"a",function(){return u});var i=function executeWidgetBootstrapForMode(e,t,n){switch(e){case"LANDING_PAGE":return l(t,n);case"CHAT":default:return s(t,n)}},u=function executeBootstrapPing(e){return a.c.post("widget_bootstrap/ping",e)},s=function widgetBootstrap(e,t){var n=o(e);return a.b.post("widget_bootstrap",{data:Object(c.a)(Object(c.a)({},n),t)})},l=function landingPageBootstrap(e,t){var n=o(e);return a.b.post("widget_bootstrap/landing_page",{data:Object(c.a)(Object(c.a)({},n),t)})}},iJtH:function(e,t,n){"use strict";n.d(t,"a",function(){return c});const c="visitCounts"},"m+ej":function(e,t,n){"use strict";var c=n("nfbA"),a=n("QtlZ"),r=n("mfas"),o=n("7oto");t.a=function UseStateSnapShot(){return Object(o.c)({topic:"CONDUCTOR:request-state-from-controller",handler:function handler(e){var t=e.data,n=a.a.getState();Object(o.a)({topic:"".concat(t.name,":state-snap-shot"),message:{state:Object(c.a)(Object(c.a)({},Object(r.a)(["session"],n)),{},{session:Object(r.a)(["sockets"],n.session)})}})}}),a.a}},pUpc:function(e,t,n){},qATS:function(e,t,n){"use strict";var c=n("mj2O"),a=n.n(c),r=n("7SM1"),o=n("s8DI"),i=n("Hvhg"),u=n("2XY6"),s=n("ERkP"),l=n("uDfI"),f=n("0lfv"),b=n("VpmR");t.a=function useInitializeI18n(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],c=t[1],d=Object(l.c)(u.b),O=Object(l.c)(function(e){return Object(i.c)(e,"locale")});return Object(s.useEffect)(function(){d&&!n&&function(){var e=Object(r.a)(a.a.mark(function _callee(){return a.a.wrap(function _callee$(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(b.b)(O);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),Object(f.n)({data:["i18n failed to load - ".concat(e.t0.message),e.t0],type:"warn"});case 8:c(!0);case 9:case"end":return e.stop()}},_callee,null,[[0,5]])}));return function runAsync(){return e.apply(this,arguments)}}()()},[d,n,O]),n&&d}},quez:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var c=["BE","BG","CZ","DK","DE","EE","IE","EL","ES","FR","HR","IT","CY","LV","LT","LU","HU","MT","NL","AT","PL","PT","RO","SI","SK","FI","SE","GB"],a=["CA"],r={EU:c,CANADA:a,EU_CANADA:[].concat(a,c),NONE:"NONE",ALL:"ALL"}},xAY9:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var c=n("efbE"),a=function getEmbedConfiguration(e){return c.l.get("/embeds/".concat(e,".json"))}},xKh3:function(e,t,n){"use strict";n.d(t,"b",function(){return f}),n.d(t,"a",function(){return b});var c=n("mj2O"),a=n.n(c),r=n("7SM1"),o=n("LeJ0"),i=n("Gzp1"),u=n("0lfv"),s=n("l+Xe"),l=n("/l56"),f=function OpenSocket(e){var t=e.session_token,n=e.org_id,c=e.socketCluster,a=e.ip,r=o.a.WS_PROTOCOL,s="LOCAL"===o.a.WS_USER_ENV?"":"".concat(n,"-"),l=d(n,s,c),f="".concat(r,"://").concat(l,"/ws"),b=new i.Socket(f,{params:{session_token:t,remote_ip:a},timeout:1e4,reconnectAfterMs:function reconnectAfterMs(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},rejoinAfterMs:function rejoinAfterMs(e){return[1e3,2e3,5e3][e-1]||1e4}});return b.connect(),b.onError(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];Object(u.n)({data:["Failed to connect to socket: ".concat(f)].concat(t)})}),b.onClose(function(){return Object(u.n)({data:["socket ".concat(f," has closed")]})}),b},b=function(){var e=Object(r.a)(a.a.mark(function _callee2(e){var t,n,c,o;return a.a.wrap(function _callee2$(i){for(;;)switch(i.prev=i.next){case 0:return t=e.channelName,n=e.socket,c=e.events,o=new Promise(function(){var e=Object(r.a)(a.a.mark(function _callee(e,r){var o;return a.a.wrap(function _callee$(a){for(;;)switch(a.prev=a.next){case 0:o=n.channel(t),c.forEach(function(e){var t=e.topic,n=e.event;o.on(t,n)}),o.join().receive("ok",function(){e({channel:o})}).receive("error",function(e){Object(u.n)({data:["Error connecting to channel: ".concat(t)]}),r(e)}).receive("timeout",function(e){Object(u.n)({data:["Joining the ".concat(t," channel timed out. ")]})});case 3:case"end":return a.stop()}},_callee)}));return function(t,n){return e.apply(this,arguments)}}()),i.abrupt("return",o);case 3:case"end":return i.stop()}},_callee2)}));return function JoinChannel(t){return e.apply(this,arguments)}}(),d=function _resolveSocketBaseForType(e,t,n){switch(n){case l.c.CHAT:return"".concat(Object(s.d)(e));case l.c.USER:return o.a.WS_USER_BASE;case l.c.PRESENCE:return"".concat(t).concat(Object(s.c)(e));case l.c.VISITOR_PRESENCE:return o.a.WS_VISITOR_PRESENCE_BASE;default:return""}}}}]);