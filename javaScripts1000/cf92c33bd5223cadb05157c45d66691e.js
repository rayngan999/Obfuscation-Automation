/*! For license information please see js-plugin-payrollemployeeportalui~f6ab1b8c.js.LICENSE.txt */
(window.webpackJsonppayroll_employee_portal_ui=window.webpackJsonppayroll_employee_portal_ui||[]).push([[11],{134:function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return i})),r.d(t,"c",(function(){return c}));var o=r(183),n=r(266),a=r(37);const s={UNAUTHORIZED:"IUS_ERROR_PARSER_UNAUTHORIZED",NOTFOUND:"IUS_API_NOT_FOUND",DEFAULT:"US_ERROR_PARSER_DEFAULT"},i=e=>({error:e}),c=e=>{const t=Object(o.a)(e,"error");if(!Object(n.a)(t))switch(Object(o.a)(t,"response.status")){case a.o.UNAUTHOURIZED_ERROR_CODE:return s.UNAUTHORIZED;case a.o.NOT_FOUND_ERROR_CODE:return s.NOTFOUND;default:return s.DEFAULT}if(Object(n.a)(e))return s.DEFAULT}},136:function(e,t,r){"use strict";var o=r(35),n=r.n(o),a=r(81),s=r(183),i=r(284),c=r(79),l=r.n(c);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=class{constructor(e,t){this.sandbox=e,this.baseUrl=t.psp_endpoint,this.baseProvierUrl=t.psp_provider_endpoint,this.apiKey=t.api_key}attachConsumerRealm(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;const n={headers:u(u(u({},a.b),a.a),{},{Authorization:"Intuit_APIKey intuit_apikey=".concat(this.apiKey,",intuit_apikey_version=1.0,intuit_realmid=").concat(r)}),withCredentials:!0,credentials:"include"},s={companyRecordId:t,employeeRecordId:e};return l.a.post("".concat(this.baseUrl).concat("/v2/updateConsumerRealmId"),s,n).then(e=>e.data).catch(n=>(this.sandbox.logger.error("PSP attach_consumer_realm call failed",{error:n,retries:o}),o>0?this.attachConsumerRealm(e,t,r,o-1):{error:n}))}getDesktopEmployeePreferencesAndSetIfNotFound(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.getEmployeeEmailPreferences(e,t).then(o=>404===Object(s.a)(o,"error.response.status")?this.setEmployeeEmailPreferences(e,t,r):o)}getEmployeeEmailPreferences(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o="/v1/users/".concat(t,"/payrollemployees/").concat(e,"/preferences?app=").concat("VMP"),n={headers:Object(a.e)(this.apiKey),withCredentials:!0,credentials:"include"};return l.a.get("".concat(this.baseProvierUrl).concat(o),n).then(this.parseEmployeeEmailPreferenceResult).then(e=>({value:e})).catch(o=>(this.sandbox.logger.error("PSP getEmployeeEmailPreferences call failed",{error:o,retries:r}),r>0?this.getEmployeeEmailPreferences(e,t,r-1):{error:o}))}setEmployeeEmailPreferences(e,t,r){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const n="/v1/users/".concat(t,"/payrollemployees/").concat(e,"/preferences?app=").concat("VMP"),s={headers:Object(a.e)(this.apiKey),withCredentials:!0,credentials:"include"},i={preferenceName:"PaystubNotification",preferenceValue:r?"On":"Off"};return l.a.post("".concat(this.baseProvierUrl).concat(n),i,s).then(this.parseEmployeeEmailPreferenceResult).then(e=>({value:e})).catch(n=>(this.sandbox.logger.error("PSP setEmployeeEmailPreferences call failed",{error:n,retries:o}),o>0?this.setEmployeeEmailPreferences(e,t,r,o-1):{error:n}))}parseEmployeeEmailPreferenceResult(e){const t=Object(s.a)(e.data,"QueryResp[0].EmployeePreferences",[]),r=Object(i.a)(t,{AppName:"VMP",PreferenceName:"PaystubNotification"},{}),o=r.PreferenceValue;if(null!==r||void 0!==r){if(o.toLowerCase()==="On".toLowerCase())return Promise.resolve(!0);if(o.toLowerCase()==="Off".toLowerCase())return Promise.resolve(!1)}Promise.reject("Error in parsing employee email preference response: ".concat(JSON.stringify(e)))}}},163:function(e,t,r){"use strict";var o=r(35),n=r.n(o),a=r(79),s=r.n(a),i=r(266),c=r(183),l=r(279),m=r(258),u=r(285),p=r(37),d=r(43);function y(e){return"Intuit.ems.Employee"===Object(c.a)(e,"roleId")}function h(e){return!!e.role&&e.role.filter(y).length>0}function E(e){return!!function(e){return!!e.persona&&e.persona.filter(h).length>0}(e)&&"consumer"!==e.realmType}function O(e){const t=[];let r=Object(c.a)(e,"realm");return r?(r=r.filter(E),function(e){return-1!==Object(m.a)(e,e=>!Object(u.a)(e,"i18NAttribute.country"))}(r)||Object.keys(p.e).forEach(e=>{(function(e,t){return e.filter(e=>e.i18NAttribute.country===t).length>0})(r,e)&&t.push(p.e[e])}),t):t}function f(e){let t=Object(c.a)(e,"realm");return!!t&&(t=t.filter(E),function(e,t){return e.some(e=>Object(c.a)(e,"address",[]).some(e=>e.country===t))}(t,p.q))}function R(e,t){let r=O(e);return 0===r.length&&(r=p.f,Object(d.g)(t)&&f(e)&&(r=r.concat(p.r))),r}function b(e){return"Consumer"===Object(c.a)(e,"realmType")&&Object(u.a)(e,"realmId")}function I(e){let t=null;const r=Object(c.a)(e,"realm");return r?(t=function(e){let t=null;return(e=e.filter(b)).length>0&&(t=e[0].realmId),t}(r),t):t}var C=r(81),g=r(134);const _="admin",P="master admin",j="regular user";function S(e){if(e&&e.name)return e.name.toLowerCase().includes(_)||e.name.toLowerCase().includes(P)||e.name.toLowerCase().includes(j)}function v(e){if(e&&e.realm)for(let t=0;t<e.realm.length;t++)if("consumer"!==e.realm[t].realmType.toLowerCase()&&e.realm[t].persona&&e.realm[t].persona[0]&&e.realm[t].persona[0].role)for(let r=0;r<e.realm[t].persona[0].role.length;r++){if(S(e.realm[t].persona[0].role[r]))return!0}return!1}var x=r(107),U=r(58),w=r(46),L=r(62);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}t.a=class{constructor(e,t){this.sandbox=e,this.baseUrl=t.papi_endpoint,this.IUSBaseUrl=t.iusConfig.accountsPlatformUrl,this.apiKey=t.api_key,this.defaultRealmId=t.default_realm_id,this.workforceEndpoint=t.workforce_endpoint,this.iusHostedWidgetUrl=t.ius_hosted_widget_url,this.workforcePortalUrl=t.iusConfig.portalUrl,this.profiler=new L.a("BulkLookupRealms",e)}getConsumerRealmAndProductList(e){return this.bulkLookupRealms(e).then(e=>{if(!Object(i.a)(Object(c.a)(e,"error")))return e;const t=Object(c.a)(e,"realm"),r=Object(x.a)(t);return{productList:R(e,this.sandbox),consumerRealmId:I(e),userHasQBNEmployerRole:v(e),isRealmEmpty:Object(i.a)(t)||0===t.length,userRoles:r}})}getCFRFromBulkLookUpRealmsList(e){return this.bulkLookupRealms(e).then(t=>(Object(i.a)(Object(c.a)(t,"error"))||this.sandbox.logger.error("Event=BULK_LOOKUP_REALMS_CFR_CHECK_FAILED authID=".concat(e," error=").concat(Object(c.a)(t,"error"))),{realmId:I(t)}))}bulkLookupRealms(e){let t="/v2/users/".concat(e,"/bulk_lookup_realms?realmTypesRealmFilter=QBNCompany,Consumer"),r=this.baseUrl;Object(d.f)(this.sandbox)&&(t="/v1/users/".concat(e,"/bulk_lookup_realms?realmIdRealmFilter=ALL&realmTypesRealmFilter=QBNCompany,Consumer"),r=this.IUSBaseUrl);const o=Date.now();Object(w.b)(this.sandbox,U.a.RUM_BULK_LOOKUP_REALMS),this.profiler.start(),this.profiler.mark(U.a.RUM_BULK_LOOKUP_REALMS);const n=t,a={headers:N(N(N({},C.b),C.a),{},{Authorization:"Intuit_APIKey intuit_apikey=".concat(this.apiKey,",intuit_apikey_version=1.0,intuit_realmid=").concat(this.defaultRealmId)}),withCredentials:!0,credentials:"include"};return s.a.get("".concat(r).concat(n),a).then(e=>{const t=Date.now()-o;return Object(w.f)(U.a.RUM_BULK_LOOKUP_REALMS,t),Object(w.a)(this.sandbox,U.a.RUM_BULK_LOOKUP_REALMS),function(e){return 206===(e.status||-1)}(e)&&function(e,t,r){e&&t&&r&&(e.location.href="".concat(t,"?iux_target_aal=25&iux_sso_mfa=true&redirect_url=").concat(r))}(window,this.iusHostedWidgetUrl,encodeURIComponent("".concat(this.workforceEndpoint).concat(this.workforcePortalUrl))),e.data}).catch(e=>(this.sandbox.logger.error("PAPI bulk_lookup_realms call failed",{error:e}),Object(w.a)(this.sandbox,U.a.RUM_BULK_LOOKUP_REALMS),Object(g.b)(e))).finally(()=>{this.profiler.measure(U.a.RUM_BULK_LOOKUP_REALMS,"requestFinished"),this.profiler.end(),this.profiler.record()})}createConsumerRealm(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Consumer Finance Realm",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;return Object(d.y)(this.sandbox)?this.createConsumerRealmIUSFetch(e,t,r,o,"Consumer"):this.createConsumerRealmIUS(e,t,r,o,"Consumer")}createConsumerRealmIUS(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Consumer Finance Realm",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Consumer";this.sandbox.logger.warn('Event=IUS_CREATE_CFR info="IUS Create CFR called"');const a=Object(l.a)(),m="/v1/users/".concat(e,"/realms"),u={headers:Object(C.c)(Object(C.d)(Object(C.e)(this.apiKey),t),this.defaultRealmId),withCredentials:!0},d={displayName:r,realmType:n,realmName:a};return s.a.post("".concat(this.IUSBaseUrl).concat(m),d,u).then(e=>(this.sandbox.logger.warn('Event=IUS_CREATE_CFR info="IUS Create CFR completed with status='.concat(Object(c.a)(e,"status"),'"')),e.data)).catch(a=>(this.sandbox.logger.error("IUS create_consumer_realm call failed",{error:a,retries:o}),this.getCFRFromBulkLookUpRealmsList(e).then(s=>Object(i.a)(Object(c.a)(s,"realmId"))?o>0?this.createConsumerRealmIUS(e,t,r,o-1,n):{error:a}:(this.sandbox.logger.warn('Event=IUS_BULK_LOOKUP_REALMS_CFR_CHECK_SUCCESS info="No retry of createCFR, CFR='.concat(Object(c.a)(s,"realmId"),' already created"')),s))))}createConsumerRealmIUSFetch(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.t,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Consumer Finance Realm",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Consumer";this.sandbox.logger.warn('Event=IUS_CREATE_CFR_FETCH info="IUS Create CFR called"');const a=Object(l.a)(),s="/v1/users/".concat(e,"/realms"),m=Object(C.c)(Object(C.d)(Object(C.e)(this.apiKey),t),this.defaultRealmId),u={displayName:r,realmType:n,realmName:a};return fetch("".concat(this.IUSBaseUrl).concat(s),{headers:N({},m),referrerPolicy:"strict-origin-when-cross-origin",body:JSON.stringify(u),method:"POST",mode:"cors",credentials:"include"}).then(t=>(this.sandbox.logger.error('Event=IUS_CREATE_CFR_FETCH info="IUS Create CFR called for user with authID='.concat(e," and the response=").concat(t.status,'"')),t.json().then(e=>e.realmId?e:{error:{response:{data:{responseCode:e.responseCode}}}}))).catch(a=>(this.sandbox.logger.error("IUS create_consumer_realm call failed",{error:a,retries:o}),this.getCFRFromBulkLookUpRealmsList(e).then(s=>Object(i.a)(Object(c.a)(s,"realmId"))?o>0?this.createConsumerRealmIUSFetch(e,t,r,o-1,n):{error:a}:(this.sandbox.logger.error('Event=IUS_BULK_LOOKUP_REALMS_CFR_CHECK_SUCCESS_FETCH info="No retry of createCFR, CFR='.concat(Object(c.a)(s,"realmId"),' already created"')),s))))}}},206:function(e,t,r){"use strict";var o=r(37),n=r(81),a=r(79),s=r.n(a);const i=3,c=/[0-9]+/g;t.a=class{constructor(e,t){this.sandbox=e,this.appConfig=t,this.apiKey=t.api_key}attachConsumerRealmToEmployee(){let{employeeId:e,consumerRealmId:t,companyRealmId:r,inviteLinkCountry:n=o.t,retries:a=i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s="/v2/employees/".concat(e,"/attach-consumer-realm");return this.attachConsumerRealm({resourcePath:s,consumerRealmId:t,companyRealmId:r,inviteLinkCountry:n,retries:a,isEmployee:!0})}attachConsumerRealmToContractor(){let{contractorId:e,consumerRealmId:t,companyRealmId:r,inviteLinkCountry:n=o.t,retries:a=i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s="/v2/contractors/".concat(e,"/attach-consumer-realm");return this.attachConsumerRealm({resourcePath:s,consumerRealmId:t,companyRealmId:r,inviteLinkCountry:n,retries:a,isEmployee:!1})}attachConsumerRealm(){let e,{resourcePath:t,consumerRealmId:r,companyRealmId:o,inviteLinkCountry:a,retries:i,isEmployee:l}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o&&!o.match(c)?(this.sandbox.logger.error("PAPI ".concat(l?"employee":"contractor"," attach_consumer_realm call found qparams with invalid companyRealmId"),{companyRealmId:o,retries:i}),e=Object(n.d)(Object(n.e)(this.apiKey),a)):e=Object(n.d)(Object(n.f)(this.apiKey,o),a);const m={headers:e,withCredentials:!0,credentials:"include"};return s.a.post("".concat(this.getBaseUrl(a)).concat(t),{consumerRealmId:r},m).then(e=>e).catch(e=>(this.sandbox.logger.error("PAPI ".concat(l?"employee":"contractor"," attach_consumer_realm call failed"),{error:e,retries:i}),i>0?this.attachConsumerRealm({resourcePath:t,consumerRealmId:r,companyRealmId:o,inviteLinkCountry:a,retries:i-1,isEmployee:l}):{error:e}))}getBaseUrl(e){switch(e){case o.q:return this.appConfig.gpapi_endpoint;default:return this.appConfig.papi_endpoint}}}},260:function(e,t,r){"use strict";var o=r(41),n=r.n(o),a=r(35),s=r.n(a),i=r(6),c=r.n(i),l=r(7),m=r.n(l),u=r(183),p=r(230),d=r(37),y=r(28),h=r.n(y),E=r(285),O=r(64),f=r(43);const R=(e,t)=>e.map(e=>{const r=Object(u.a)(e,"node",{}),o=(e=>{let t="";if(e&&0!==e.length)for(let r=0;r<e.length;r++){const o=e[r];o.namespaceId!==d.u&&o.namespaceId!==d.g||(t=Object(u.a)(o,"localId",""))}return t})(r.externalIds),n=Object(u.a)(r,"employer.companyInfo.governmentIds[0].governmentId",""),a=((e,t,r)=>{if(!t)return"";const o=t.find(e=>e.namespaceId===d.i);if(!o)return"";const n=Object(u.a)(o,"localId","");if(Object(f.p)(r))return n;{const t="/Employee";return h.a.util.GlobalId.convertToGlobalId(e,t,n)}})(r.employerId,r.externalIds,t),s=(e=>e.toUpperCase().includes("PSP"))(o)?d.h:d.v,i=Object(u.a)(r,"employer.companyInfo.partner",""),c=Object(u.a)(r,"employer.companyInfo.createdDate",""),l=Object(u.a)(r,"employer.account.accountStatus","");return{label:r.employerName,value:r.employerId,data:{employerName:r.employerName,employerId:r.employerId,employerGlobalId:r.id,employeeGlobalId:o,employeeGasId:a,companyStatus:l,companyTaxId:n,sourceSystem:s,vendorContacts:Object(E.a)(r,"employer.vendorContacts.edges[0].node.id"),product:e.product,partnerId:i,companyCreationDate:c}}});function b(e){Object(E.a)(e,"data.node")&&(e.node=e.data.node,delete e.data)}const I=(e,t)=>{const r=Object(u.a)(e,"node.employers.edges",[]);for(const o of r)o.product=t};function C(e,t){const r=(e=>{let t=[];return e.forEach(e=>{Object(u.a)(e,"node.employers.edges")&&(t=t.concat(Object(u.a)(e,"node.employers.edges")))}),t})(e);return R(r,t)}function g(e){return e.every(e=>!Object(u.a)(e,"node.employers.edges"))}function _(e,t){return function(r){if(t){const t=Object(O.a)(e);Object(E.a)(r,"node.employers.edges")&&(r.node.employers.edges=r.node.employers.edges.filter(e=>Object(u.a)(e,"node.employer.companyInfo.region","US")===t))}return r}}var P=r(69);class j{constructor(e,t){s()(this,"shouldUseUserEmployerRegionFilter",()=>Object(u.a)(this.sandbox,"pluginConfig.extendedProperties.userEmployerRegionFilter",!1)),this.apolloClient=e,this.sandbox=t}generateQuery(e){return e.map(e=>({query:Object(p.a)(e,this.shouldUseUserEmployerRegionFilter(),Object(f.j)(this.sandbox),Object(f.i)(this.sandbox)),context:{headers:{intuit_country:Object(P.b)(e)}},errorPolicy:"all",product:e}))}queryForCompanies(e){const t=[],r=e?e.filter(e=>d.y.includes(e)):[],o=this.generateQuery(r);for(const n of o){const e=n.product;t.push(this.apolloClient.query({query:n.query,context:n.context,errorPolicy:n.errorPolicy}).then(t=>(b(t),I(t,e),t)).then(_(e,this.shouldUseUserEmployerRegionFilter())).catch(t=>(this.sandbox.logger.error("V4 getEmployerListById query for product ".concat(e,": ").concat(t)),t)))}return t}}var S=r(266),v=r(267),x=r(275),U=r(58),w=r(38),L=r(79),F=r.n(L),N=r(39),D=r(81);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class T{constructor(e){this.sandbox=e}queryForCompanies(e,t){const r=[],o=t.filter(e=>d.s.includes(e));if(o.length>0){const t=o[0],n=N.a.get(),a={headers:K(K({},Object(D.e)(n.api_key)),{},{"intuit-company-id":e}),withCredentials:!0,credentials:"include"};r.push(F.a.get("".concat(n.gpapi_endpoint,"/v1/employees/companies"),a).then(e=>{const r=this.generateCompaniesResponse(e.data);return I(r,t),r}).catch(e=>(this.sandbox.logger.error("Event=WORKFORCE_GPAPI_GET_EMPLOYERLIST_ERROR V4 getEmployerListById query for product ".concat(t,": ").concat(e)),e)))}return r}generateCompaniesResponse(e){return{node:{firstName:null,lastName:null,employers:K({},this.generateEmployerNode(e))}}}generateEmployerNode(e){return 0===e.length?null:{edges:e.map(e=>({node:{employerId:e.employerRealmId,externalIds:[{namespaceId:d.u,localId:e.employeeGlobalId}],employerName:e.employerName,employer:{companyInfo:{region:e.region}},id:e.employerGlobalId}}))}}}var k=r(62);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach((function(t){s()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const W="NOT_FINISHED",B="FINISHED";t.a=e=>{var t,r;return r=t=class extends c.a.Component{constructor(e){super(e),s()(this,"rumTrackingStart",e=>{this.profiler.start(),this.profiler.mark(e)}),s()(this,"rumTrackingStop",e=>{this.profiler.measure(e,"requestFinished"),this.profiler.end(),this.profiler.record()}),s()(this,"showEmployerListQueryErrorsIfNecessary",e=>{e.includes(d.x.WORKFORCE_NO_COMPANIES_FOUND)||e.includes(d.x.WORKFORCE_NO_ENTITY_FOUND)?this.props.setPluginError(!0,d.C.COMPANY_NOT_FOUND_ERROR_MESSAGE,d.C.COMPANY_NOT_FOUND_SUB_ERROR_MESSAGE):e.includes(d.x.WORKFORCE_ONLY_REV_REC)?this.props.setPluginError(!0,d.C.COMPANY_TERMINATED_REVREC_ERROR_MESSAGE,d.C.COMPANY_TERMINATED_REVREC_SUB_ERROR_MESSAGE):e.includes(d.x.WORKFORCE_EMPLOYEE_DELETED_OR_REVOKED)&&this.props.setPluginError(!0,d.C.EMPLOYEE_DELETED_OR_ACCESS_REVOKED_ERROR_MESSAGE,d.C.EMPLOYEE_DELETED_OR_ACCESS_REVOKED_SUB_ERROR_MESSAGE),this.setState({showErrorPage:!0})}),s()(this,"showErrorStateIfNecessary",()=>{this.state.showErrorPage||(Object(f.x)(this.props.sandbox)&&!this.props.consumerRealmId&&this.props.userHasQBNEmployerRole?this.props.setPluginError(!0,d.C.EMPLOYER_LOGIN_ERROR_MESSAGE,d.C.EMPLOYER_LOGIN_SUB_ERROR_MESSAGE):this.props.setPluginError(!0,d.C.CONTENT_NOT_LOADING_ERROR_MESSAGE,d.C.CONTENT_NOT_LOADING_SUB_ERROR_MESSAGE),this.setState({showErrorPage:!0}))}),s()(this,"setActiveEmployer",e=>{if(this.props.activeEmployer!==e){if(Object(f.s)(this.props.sandbox)&&e.product){const t=Object(P.b)(e.product);e.country=t}this.props.changeActiveEmployer(e)}}),s()(this,"updateEmployeeDetails",e=>{if(Object(u.a)(e,"node")){if(!(this.props.employeeDetails.firstName===e.node.firstName&&this.props.employeeDetails.lastName===e.node.lastName)){const t=q(q({},this.props.employeeDetails),{},{firstName:e.node.firstName,lastName:e.node.lastName});this.props.setEmployeeDetails(t)}}});const t=this.props.sandbox.employeePortal.apolloClient;this.employerListService=new j(t,this.props.sandbox),this.gpapiEmployerListService=new T(this.props.sandbox),this.state={employerListV4Data:[],showErrorPage:!1,isEmployerWithoutCFR:!1,companyListLoading:W}}componentDidMount(){this.profiler=new k.a("EmployerListQuery",this.props.sandbox),Object(S.a)(this.props.employerList)&&this.queryForCompanies()}queryForCompanies(){this.rumTrackingStart(U.a.RUM_EMPLOYEE_EMPLOYER_LIST);const e=this.employerListService.queryForCompanies(this.props.productList);return Object(f.e)(this.props.sandbox)&&e.push(...this.gpapiEmployerListService.queryForCompanies(this.props.employeeDetails.consumerRealmId,this.props.productList)),Promise.all(e).then(e=>{if(function(e){return e.every(e=>e instanceof Error)}(e))return void this.showErrorStateIfNecessary();const t=e.filter(e=>!(e instanceof Error));if(!Object(v.a)(t,this.state.employerListV4Data)){this.setState({employerListV4Data:t,companyListLoading:B});const r=function(e){const t=[];return e.forEach(e=>{e.errors&&e.errors.forEach(e=>{e&&e.detail&&e.$type===d.x.ERROR_TYPE&&(e.detail.includes(d.x.WORKFORCE_ONLY_REV_REC)?t.push(d.x.WORKFORCE_ONLY_REV_REC):e.detail.includes(d.x.WORKFORCE_NO_COMPANIES_FOUND)?t.push(d.x.WORKFORCE_NO_COMPANIES_FOUND):e.detail.includes(d.x.WORKFORCE_NO_ENTITY_FOUND)?t.push(d.x.WORKFORCE_NO_ENTITY_FOUND):e.detail.includes(d.x.WORKFORCE_EMPLOYEE_DELETED_OR_REVOKED)&&t.push(d.x.WORKFORCE_EMPLOYEE_DELETED_OR_REVOKED))})}),t}(e);if(r.length&&r.length===e.length)return void this.showEmployerListQueryErrorsIfNecessary(r);g(t)&&this.props.setShowZeroState(!0);const o=C(t,this.props.sandbox);if(Object(S.a)(o))this.props.sandbox.logger.warn("EmployerList Query",{errorMessage:"Employer list query returned empty employer list",consumerRealmId:this.props.employeeDetails.consumerRealmId,loginDetails:{loginName:Object(w.i)("qbn.glogin"),userIdentifier:Object(w.i)("userIdentifier")}});else{const{qParams:e}=this.props;this.props.setEmployerList(o);const t=(t,r)=>r.data.employerId===e.companyRealmId?r.data:t;this.setActiveEmployer(o.reduce(t,o[0].data)),this.rumTrackingStop(U.a.RUM_EMPLOYEE_EMPLOYER_LIST)}}this.updateEmployeeDetails(Object(x.a)(t))})}render(){const t=this.state.companyListLoading===B&&g(this.state.employerListV4Data);return c.a.createElement(e,n()({shouldRenderEmployerList:t,setActiveEmployer:this.setActiveEmployer},this.props))}},s()(t,"propTypes",{activeEmployer:m.a.object.isRequired,employerList:m.a.object.isRequired,employeeDetails:m.a.object.isRequired,setEmployerList:m.a.func.isRequired,changeActiveEmployer:m.a.func.isRequired,setEmployeeDetails:m.a.func.isRequired,setPluginError:m.a.func.isRequired,isMobile:m.a.bool,sandbox:m.a.object.isRequired,setShowZeroState:m.a.func.isRequired,productList:m.a.array.isRequired,consumerRealmId:m.a.string.isRequired,userHasQBNEmployerRole:m.a.bool.isRequired,qParams:m.a.object.isRequired}),r}},261:function(e,t,r){"use strict";var o=r(41),n=r.n(o),a=r(6),s=r.n(a),i=r(7),c=r.n(i),l=r(264),m=r(183),u=r(39),p=r(71),d=r.n(p),y=r(12);function h(){const e=d()(["\n    query eessStatus($employeeId: ID!, $employerId: ID!) {\n      company(id: $employerId) {\n        employee(id: $employeeId) {\n          taxSetups {\n            taxCodes {\n              ... on VariableStringField {\n                fieldId\n                value: value\n              }\n              ... on VariableBooleanField {\n                fieldId\n                booleanValue: value\n              }\n            }\n          }\n        }  \n      }\n    }\n"]);return h=function(){return e},e}const E=r.n(y)()(h());var O=r(37);const f={[O.R]:"TTAX_CUS_W4_SIGNATURE",[O.c]:"TTAX_CCA_EESS_SIGNATURE"},R={[f[O.R]]:e=>!!e,[f[O.c]]:e=>!0===e},b=(e,t)=>e.filter(e=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:O.R;return!!e&&f[t]===e.fieldId}(e,t)),I=e=>Object(m.a)(e,"taxCodes",[]).length>0,C=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;const r=e.filter(e=>I(e)).reduce((e,r)=>(e.push(b(r.taxCodes,t)),e),[]).flat();return Object(m.a)(r,0,{})},g=e=>{const{fieldId:t,value:r,booleanValue:o}=e||{};return!!R[t]&&(R[t](r)||R[t](o))};var _=r(107),P=r(104),j=r(43);t.a=e=>{function t(t){const r=t.sandbox,o=Object(m.a)(t,"activeEmployer.employerId"),a=Object(m.a)(t,"activeEmployer.product"),i=t.userRoles;if(Object(_.b)(t,o,i)){let o=!1;const i=Object(m.a)(r,"employeePortal.apolloClient"),c=Object(m.a)(t,"activeEmployer.employeeGasId"),p=Object(m.a)(t,"activeEmployer.employerId"),d=u.a.get().gas_url,{loading:y,error:h,data:O}=Object(l.a)(E,{client:i,variables:{employeeId:c,employerId:p},context:{uri:d},errorPolicy:"all"});if(y)return s.a.createElement(P.a,null);if(h&&r.logger.error("Error querying for tax setups"),O){o=!0;const e=Object(m.a)(O,"company.employee.taxSetups",[]);if(Object(j.c)(r)){const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(!e)return!1;const r=C(e,t);return g(r)}(e,a);t.setIsEESSFinished(r),o=!r}else for(let r=0;r<e.length;r+=1){const n=Object(m.a)(e[r],"taxCodes",[]);for(let e=0;e<n.length;e+=1){const r=Object(m.a)(n[e],"fieldId"),a=Object(m.a)(n[e],"value");"TTAX_CUS_W4_SIGNATURE"===r&&a&&(t.setIsEESSFinished(!0),o=!1)}}}return s.a.createElement(e,n()({},t,{displayEESS:o}))}return s.a.createElement(e,t)}return t.propTypes={sandbox:c.a.shape({logger:c.a.shape({error:c.a.func.isRequired}),employeePortal:c.a.shape({apolloClient:c.a.object.isRequired})}),activeEmployer:c.a.shape({employeeGasId:c.a.string.isRequired,employerId:c.a.string.isRequired})},t}},262:function(e,t,r){"use strict";r.d(t,"a",(function(){return I}));var o=r(41),n=r.n(o),a=r(6),s=r.n(a),i=r(7),c=r.n(i),l=r(183),m=r(39),u=r(43);const p={w2HubUrlChange:{experimentId:m.a.get().ixpExperimentIds.w2HubUrlChangeExperimentId,treatment:m.a.get().ixpExperimentIds.w2HubUrlChangeBucketId,featureFlagFunction:u.h},hidePCRW2:{experimentId:m.a.get().ixpExperimentIds.hidePCRW2ExperimentId,treatment:m.a.get().ixpExperimentIds.hidePCRW2BucketId,featureFlagFunction:u.shouldRenderHidePCRW2Exp},ewaAccessPoint:{experimentId:m.a.get().ixpExperimentIds.ewaAccessPointExperimentId,treatment:m.a.get().ixpExperimentIds.ewaAccessPointBucketId,featureFlagFunction:u.b}},d={loadWalletPayDistributionWidget:{experimentId:m.a.get().ixpExperimentIds.walletExperimentId,treatment:m.a.get().ixpExperimentIds.walletVariantBucketId,featureFlagFunction:u.n},workforceCreditKarmaPlacementCard:{experimentId:m.a.get().ixpExperimentIds.workforceCreditKarmaPlacementCardExperimentId,freeTreatment:m.a.get().ixpExperimentIds.workforceCreditKarmaPlacementCardFreeBucketId,freeGetStartedTreatment:m.a.get().ixpExperimentIds.workforceCreditKarmaPlacementCardFreeGetStartedBucketId,instantKarmaTreatment:m.a.get().ixpExperimentIds.workforceCreditKarmaPlacementCardInstantKarmaBucketId,featureFlagFunction:u.l}};var y=r(14),h=r.n(y),E=r(108);function O(e){let{sandbox:t,useCompanyRealm:r}=e;const o=r?function(e){return Object.values(d).filter(t=>t.featureFlagFunction&&t.featureFlagFunction(e))}(t):function(e){return Object.values(p).filter(t=>t.featureFlagFunction&&t.featureFlagFunction(e))}(t),n=[];for(let a=0;a<o.length;a++)n.push(o[a].experimentId);return n}function f(e){const t={};return t.companyCreationDate=h()(e.companyCreationDate).format("YYYYMMDD"),t.isQboPartner=Object(E.d)(e.partnerId),t.country=e.country,t}function R(e){let{activeEmployer:t,consumerRealmOrActiveEmployerId:r,sandbox:o,useCompanyRealm:n}=e;const a="".concat(m.a.get().ixp_endpoint).concat(r),s={assignmentFilter:{experimentIds:O({sandbox:o,useCompanyRealm:n})},context:f(t)};return fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json())}var b=r(62);function I(e){function t(t){const[r,o]=Object(a.useState)(!1),[i,c]=Object(a.useState)(!1),{sandbox:m,employeeDetails:u,activeEmployer:y}=t,[h]=Object(a.useState)(new b.a("IXP",m)),[E]=Object(a.useState)(new b.a("IXP",m));return Object(a.useEffect)(()=>{Object(l.a)(u,"consumerRealmId")&&(E.start(),R({activeEmployer:y,consumerRealmOrActiveEmployerId:u.consumerRealmId,sandbox:m,useCompanyRealm:!1}).then(e=>{e.forEach(e=>{e.experimentId===p.hidePCRW2.experimentId&&e.treatmentId===p.hidePCRW2.treatment&&(o(!0),m.logger.error("Event=HIDE_PCR_W2_EXP_SUCCESS ConsumerRealmId=".concat(u.consumerRealmId," treatmentId=").concat(e.treatmentId))),e.experimentId===p.w2HubUrlChange.experimentId&&e.treatmentId===p.w2HubUrlChange.treatment&&(c(!0),m.logger.error("Event=USE_NEW_W2_URL ConsumerRealmId=".concat(u.consumerRealmId," treatmentId=").concat(e.treatmentId))),e.experimentId===p.ewaAccessPoint.experimentId&&e.treatmentId===p.ewaAccessPoint.treatment&&(m.employeePortal.ewaIXP=!0,m.logger.error("Event=SHOW_EWA_ACCESS_POINT ConsumerRealmId=".concat(u.consumerRealmId," treatmentId=").concat(e.treatmentId)))})}).catch(e=>{m.logger.error("Event=WORKFORCE_IXP_ASSIGNMENT_ERROR ConsumerRealmId=".concat(u.consumerRealmId," Error=").concat(e))}).finally(()=>{E.end(),E.record()})),Object(l.a)(y,"employerId")&&(h.start(),m.employeePortal.loadWalletPayDistribution=!1,m.employeePortal.workforceCKPlacementCardFree=!1,m.employeePortal.workforceCKPlacementCardInstantKarma=!1,m.employeePortal.workforceCKPlacementCardFreeGetStarted=!1,R({activeEmployer:y,consumerRealmOrActiveEmployerId:y.employerId,sandbox:m,useCompanyRealm:!0}).then(e=>{e.forEach(e=>{e.experimentId===d.loadWalletPayDistributionWidget.experimentId&&e.treatmentId===d.loadWalletPayDistributionWidget.treatment&&(m.employeePortal.loadWalletPayDistribution=!0,m.logger.error("Event=LOAD_WALLET_IXP_SUCCESS ConsumerRealmId=".concat(u.consumerRealmId," CompanyRealmId=").concat(y.employerId," treatmentId=").concat(e.treatmentId))),e.experimentId===d.workforceCreditKarmaPlacementCard.experimentId&&(e.treatmentId===d.workforceCreditKarmaPlacementCard.freeTreatment&&(m.employeePortal.workforceCKPlacementCardFree=!0,m.logger.error("Event=WORKFORCE_CK_PLACEMENTCARD_IXP_SUCCESS ConsumerRealmId=".concat(u.consumerRealmId," CompanyRealmId=").concat(y.employerId," treatmentId=").concat(e.treatmentId))),e.treatmentId===d.workforceCreditKarmaPlacementCard.freeGetStartedTreatment&&(m.employeePortal.workforceCKPlacementCardFreeGetStarted=!0,m.logger.error("Event=WORKFORCE_CK_PLACEMENTCARD_IXP_SUCCESS ConsumerRealmId=".concat(u.consumerRealmId," CompanyRealmId=").concat(y.employerId," treatmentId=").concat(e.treatmentId))),e.treatmentId===d.workforceCreditKarmaPlacementCard.instantKarmaTreatment&&(m.employeePortal.workforceCKPlacementCardInstantKarma=!0,m.logger.error("Event=WORKFORCE_CK_PLACEMENTCARD_IXP_SUCCESS ConsumerRealmId=".concat(u.consumerRealmId," CompanyRealmId=").concat(y.employerId," treatmentId=").concat(e.treatmentId))))}),m.employeePortal.workforceCKPlacementCardFree=m.employeePortal.loadWalletPayDistribution&&m.employeePortal.workforceCKPlacementCardFree,m.employeePortal.workforceCKPlacementCardFreeGetStarted=m.employeePortal.loadWalletPayDistribution&&m.employeePortal.workforceCKPlacementCardFreeGetStarted,m.employeePortal.workforceCKPlacementCardInstantKarma=m.employeePortal.loadWalletPayDistribution&&m.employeePortal.workforceCKPlacementCardInstantKarma,m.logger.warn("Event=EXP_BUCKET_STATUS \n                            ConsumerRealmId=".concat(u.consumerRealmId," \n                            CompanyRealmId=").concat(y.employerId," \n                            WalletExp=").concat(m.employeePortal.loadWalletPayDistribution," \n                            CKPlacementFreeLearnMore=").concat(m.employeePortal.workforceCKPlacementCardFree,"\n                            CKPlacementFreeGetStarted=").concat(m.employeePortal.workforceCKPlacementCardFreeGetStarted,"\n                            CKPlacementInstantKarma=").concat(m.employeePortal.workforceCKPlacementCardInstantKarma,"\n                            "))}).catch(e=>{m.logger.error("Event=WORKFORCE_COMPANYREALMID_IXP_ASSIGNMENT_ERROR ConsumerRealmId=".concat(u.consumerRealmId," Error=").concat(e))}).finally(()=>{h.end(),h.record()}))},[u.consumerRealmId,y.employerId]),s.a.createElement(e,n()({},t,{hideW2ForPCRUser:r,useNewW2URL:i}))}return t.propTypes={sandbox:c.a.shape({logger:c.a.shape({error:c.a.func.isRequired,warn:c.a.func.isRequired}),employeePortal:c.a.object.isRequired,pluginConfig:c.a.shape({extendedProperties:c.a.shape({hidePCRW2ExperimentProperties:c.a.shape({experimentId:c.a.string.isRequired,hidePCRW2ExperimentAssignmentName:c.a.string.isRequired}).isRequired}).isRequired}).isRequired}).isRequired,employeeDetails:c.a.shape({consumerRealmId:c.a.string.isRequired}).isRequired,activeEmployer:c.a.shape({employerId:c.a.string.isRequired}).isRequired},t}},69:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"a",(function(){return a}));var o=r(37);function n(e){let t="";return o.D[e]&&(t=o.D[e]),t}function a(){const e={},t=localStorage.getItem("inviteQueryParams"),r=t?t.split(","):null;return null!==r&&7===r.length&&(e.authId=r[0],e.employeeRecordId=r[1],e.companyRecordId=r[2],e.companyRealmId=r[3],e.inviteLinkCountry=r[4],e.type=r[5],e.userType=r[6]),e}},81:function(e,t,r){"use strict";r.d(t,"d",(function(){return d})),r.d(t,"c",(function(){return y})),r.d(t,"b",(function(){return l})),r.d(t,"a",(function(){return u})),r.d(t,"e",(function(){return h})),r.d(t,"f",(function(){return E}));var o=r(35),n=r.n(o),a=r(37),s=r(279);function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){n()(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const l={"Content-Type":"application/json;version=2.2.7;charset=utf-8"},m={intuit_tid:Object(s.a)()},u={Accept:"application/json;version=2.2.7;charset=utf-8"},p=e=>({Authorization:"Intuit_APIKey intuit_apikey=".concat(e,",intuit_apikey_version=1.0")});function d(e,t){return Object.assign(e,a.G[t])}function y(e,t){if(e.Authorization){const r=Object.assign({},e,m);return r.Authorization+=",intuit_realmid=".concat(t),r}return e}const h=e=>c(c(c({},l),u),p(e)),E=(e,t)=>c(c(c(c({},l),u),(e=>({"intuit-company-id":"".concat(e)}))(t)),p(e))}}]);
//# sourceMappingURL=js-plugin-payrollemployeeportalui~f6ab1b8c.js.map