(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"+4EM":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){this.sizes=[]};a.prototype=new n.a,a.prototype.color="",a.prototype.colorCode="",a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},a.fromColorPair=function(e){var t=new a;return t.colorCode=e.colorCode,t.color=e.colorName,t},window&&((globalThis||{}).PFItemsGeneratorColorItem=a)},"+I3z":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("n6mh"),r=i("+erO"),a=i("X5Ic"),o=i("nF4n"),s=i("JogF"),l=i("mrkb"),c=i("wo5H"),u=Class({fileItem:null,temporaryFileItem:null,shouldUseTempFile:!1,overrideColors:null,isCustomizable:!1,embroideryType:"",isEmbroideryAfterMigration:null,migratedToNewPicker:null,isUpscaled:null,isRemovedBg:null,isCropState:!1,removeBgPreview:null,cropPosition:null,cropShape:null,getType:function(){return u.TYPE},_getNewLayer:function(){return new u},isImageLayer:function(){return!0},getOriginalClone:function(e){var t,i=this._getNewLayer();return e||(i.uniqueId=this.uniqueId),i.fileItem=this.fileItem,i.temporaryFileItem=this.temporaryFileItem,i.overrideImage=this.overrideImage,i.overrideImagePulse=this.overrideImagePulse,i.position=this.position.getFromOriginalRatio(),i.originalPosition=this.originalPosition.getClone(),i.cropPosition=null===(t=this.cropPosition)||void 0===t?void 0:t.getFromOriginalRatio(),i.parentLayerUniqueId=this.parentLayerUniqueId,i.shouldUseTempFile=this.shouldUseTempFile,i.customizeKey=this.customizeKey,i.generatorOptions=this.generatorOptions,i.isCustomizable=this.isCustomizable,i.embroideryType=this.embroideryType,i.isEmbroideryAfterMigration=this.isEmbroideryAfterMigration,i.migratedToNewPicker=this.migratedToNewPicker,i.patternType=this.patternType,i.patternSpacing=this.patternSpacing,i.flipX=this.flipX,i.flipY=this.flipY,i.isUpscaled=this.isUpscaled,i.isRemovedBg=this.isRemovedBg,i.isCropState=this.isCropState,i.removeBgPreview=this.removeBgPreview,i.isExisting=this.isExisting,i.quickDesignId=this.quickDesignId,i.groupId=this.groupId,i.groupType=this.groupType,i.disableCentering=Object(l.f)(),this.overrideColors&&(i.overrideColors={},o.a.O2O(i.overrideColors,this.overrideColors)),i},getDPI:function(e,t){if(this.isVector())return 600;var i=this.cropPosition?this.cropPosition.width/this.position.width:1,n=this.getFileItem().width*i,r=this.cropPosition||this.position,a=Math.round(n/r.getFromOriginalRatio().width);if(e&&null!=t&&t.getQualityPercent){var o=t.getQualityPercent(this),l=t.shouldSkipUpscale(this);this.isUpscaled=t.isQualityBadUpscale(o,l),this.isUpscaled&&(a*=s.k)}return a},getFileItem:function(){return this.shouldUseTempFile&&this.temporaryFileItem?this.temporaryFileItem:this.fileItem},getSourceWidth:function(){return this.fileItem.width},getSourceHeight:function(){return this.fileItem.height},getSourceDpi:function(){return this.fileItem.dpi},matchesAdvancedTemplate:function(e){var t=e.width/e.height,i=this.getSourceWidth()/this.getSourceHeight();return Math.abs(t-i)<=.01},isVector:function(){return this.fileItem?this.fileItem.isVector:this.temporaryFileItem.isVector},hasNaturalSize:function(){return!!this.fileItem.dpi},hasTransparencyIssues:function(){var e=this.fileItem&&this.fileItem.extra?this.fileItem.extra.transparency:this.temporaryFileItem&&this.temporaryFileItem.extra&&this.temporaryFileItem.extra.transparency;return!!e&&e.prediction>0},toArray:function(e){return{type:u.TYPE,fileId:this.fileItem?this.fileItem.fileId:null,url:this._getUrl(e),position:this.position?this.position.toArray():{},cropPosition:this.cropPosition?this.cropPosition.toArray():null,overrideColors:this.overrideColors,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,embroideryType:this.embroideryType,isEmbroideryAfterMigration:this.isEmbroideryAfterMigration,migratedToNewPicker:this.migratedToNewPicker,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isUpscaled:this.isUpscaled,isRemovedBg:this.isRemovedBg,isCropState:this.isCropState,removeBgPreview:this.removeBgPreview,shouldUseTempFile:this.shouldUseTempFile,isExisting:this.isExisting,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId,disableCentering:Object(l.f)()}},_getUrl:function(e){var t;return t=this.temporaryFileItem&&this.shouldUseTempFile?this.temporaryFileItem.urlLarge:this.fileItem.urlPreview,e&&this.fileItem&&(t=this.fileItem.urlThumb),e&&this.temporaryFileItem&&this.shouldUseTempFile&&(t=this.temporaryFileItem.urlThumb),t},isConfigurationSame:function(e){var t=e.migratedToNewPicker!==this.migratedToNewPicker,i=this.fileItem&&e.fileItem&&this.fileItem.fileId===e.fileItem.fileId,n=JSON.stringify(e.overrideColors)===JSON.stringify(this.overrideColors),r=this.removeBgPreview===e.removeBgPreview&&this.isRemovedBg===e.isRemovedBg;return i&&n&&!t&&r},isValidForTechnique:function(e){return e!==a.a.TECHNIQUE_ENGRAVING},isPartiallyOutOfBounds:function(){return this.cropPosition?this.cropPosition.isPartiallyOutOfBounds():this.position.isPartiallyOutOfBounds()},isCropPositionUpdateNeeded:function(){return!!this.cropPosition}},n.a);u.TYPE=c.l.FILE,u.fromFileItem=function(e){var t=new u;return t.fileItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupImageLayer=u)},"+XVp":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"f",(function(){return r})),i.d(t,"e",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return l}));var n="designer",r="m_setDesignerType",a="m_setDesignerFeatureFlag",o="g_designerType",s="g_designerFeatureFlag";function l(e){return n+"/"+e}},"+tIB":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ohgv"),r=i("nF4n"),a=function(e,t,i){for(var n in e=e||[],this.orders=e.reverse(),this.isHomepage=t,this.wrapperClass=i||!1,this.interval=2,this.orders)("string"==typeof this.orders[n].timestamp||this.orders[n].timestamp instanceof String)&&(this.orders[n].timestamp=parseInt(this.orders[n].timestamp)),this.orders[n].age=moment().unix()-this.orders[n].timestamp;this.node=tag("div","row"),setInterval($.proxy(this.updateAge,this),1e3*this.interval),this.render()};a.prototype=new r.a.Base,a.prototype.render=function(e){e=e||!1,r.a.clearNode(this.node);var t=this.wrapperClass||(this.isHomepage?"col-4 col-md-6 col-xl-4":"col-4");for(var i in this.orders){var a=2==i&&this.isHomepage?" pf-d-md-none pf-d-xl-flex":"",o=this.orders[i].location.toLowerCase().split(", "),s=[n.a.ucFirst(o[0]),o[1].toUpperCase()].join(", "),l=tag("div",t+a,[tag("div","pf-latest-orders__item"+(this.isHomepage?" pf-justify-content-start":""),[tag("img",{className:"img-responsive",src:"/static/images/layout/lord.png",attr:{"aria-hidden":"true",alt:dlang("site","shipment location")}}),tag("div","text-center-xs pf-mt-8 pf-ml-sm-16 pf-mt-sm-0",[tag("span","pf-h5 location",s),tag(this.wrapperClass?"":"br"),this.orders[i].ageNode=tag("span","pf-ui-body text-muted")])])]).append(this.node);e&&0==i&&($(l).css("opacity",0),$(l).animate({opacity:1},600))}this.updateAge()},a.prototype.updateAge=function(){for(var e in this.orders){this.orders[e].age=this.orders[e].age+this.interval;var t=this.orders[e].age;if(t<2)t=" "+lang("just now");else if(t<60)t=lang("{count} sec ago").replace("{count}",t);else if(t<3600)t=lang("{count} min ago").replace("{count}",Math.round(t/60));else if(t<216e3){var i=Math.round(t/60/60);t=1===i?lang("hour ago"):lang("{count} hours ago").replace("{count}",i)}else t=lang("a while ago");$(this.orders[e].ageNode).text(t)}},a.prototype.isHomepage=!1,a.prototype.wrapperClass=void 0,(globalThis||{}).PFLatestOrders=a},"/Z5U":function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=null;function r(e){n=e}function a(){return!!n}function o(){return n}},"/w+P":function(e,t,i){"use strict";i.d(t,"a",(function(){return F})),i.d(t,"b",(function(){return W}));var n=i("0Dcb"),r=i("ehgC"),a=i("xeH2"),o=i.n(a),s=i("SBaP"),l=i("GCEm"),c=i("XLZy"),u=i("nF4n"),d=i("97Au"),h=i("Xapb");function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function g(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){f(a,n,r,o,s,"next",e)}function s(e){f(a,n,r,o,s,"throw",e)}o(void 0)}))}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=C(e);if(t){var r=C(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return b(this,i)}}function b(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function w(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,S(e,t,"get"))}function I(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,S(e,t,"set"),i),i}function S(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var E=new WeakMap,O=new WeakMap,k=new WeakSet,L=new WeakSet,A=new WeakSet,R=new WeakSet,N=new WeakSet,D=new WeakSet,x=new WeakSet,F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,i,n,r=y(a);function a(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return m(this,a),e=r.call(this),x.add(P(e)),D.add(P(e)),N.add(P(e)),R.add(P(e)),A.add(P(e)),L.add(P(e)),k.add(P(e)),E.set(P(e),{writable:!0,value:null}),O.set(P(e),{writable:!0,value:[]}),I(P(e),E,new W(t)),e.node=tag("div","store-picker"),w(P(e),E).forceCreate?(T(P(e),R,z).call(P(e)),b(e)):PF.EMBED_STORE?(l.f(PF.EMBED_STORE),w(P(e),E).callback(PF.EMBED_STORE.storeId,PF.EMBED_STORE),b(e)):(T(P(e),k,M).call(P(e)),e)}return t=a,n=[{key:"popup",value:function(e,t){var i=new d.a.Par;i.title=t,i.modalDialogClass="modal-lg",i.closeOnClick=e.closeOnClick;var n=new d.a(i),r=e.callback;return e.callback=function(e,t,i,n){e.remove(),t(i,n)}.bind(null,n,r),n.setContent(new a(e)),n.show(),n}}],(i=null)&&_(t.prototype,i),n&&_(t,n),a}(s.a);function M(){return B.apply(this,arguments)}function B(){return(B=g(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.a.show(this.node,{minHeight:200}),e.next=3,l.k(w(this,E));case 3:t=e.sent,T(this,L,V).call(this,t);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function V(e){return j.apply(this,arguments)}function j(){return(j=g(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(I(this,O,t),0!==w(this,O).length){e.next=7;break}return e.next=4,l.g(l.b,!0,r.a.TYPE_NATIVE);case 4:return i=e.sent,T(this,D,q).call(this,i),e.abrupt("return");case 7:if(1!==w(this,O).length){e.next=10;break}return w(this,E).callback(w(this,O)[0].storeId,w(this,O)[0]),e.abrupt("return");case 10:c.a.hide(this.node),T(this,A,U).call(this);case 12:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function U(){u.a.clearNode(this.node);for(var e=[],t=0,i=w(this,O).length;t<i;t++){var r=w(this,O)[t],a="";r.hasPersonalLogo&&(a=r.isNative()?tag("span",null,dclang("dashboard","store","Manual orders only")):tag("div",null,[tag("span","pf-text-muted",[dclang("dashboard","store","Integration")+": "]),tag("div","store-logo pf-d-inline-block pf-mr-4",[new n.a({urlImage:r.urlTypeLogo})]),r.integrationName?r.integrationName:""]));var o=r.hasFlag(h.a.FLAG_IS_LIMITED_BY_DSR_SETTINGS),s=langUrl("/dashboard/settings/".concat(r.storeId,"/store"));e.push(tag("li",{attr:{role:"button",tabindex:"0","data-test":"store-picker-item"},onclick:T(this,x,Y).bind(this,r.storeId,r),className:"pf-keydown-click"},[tag("div","pf-border pf-hover-shadow pf-rounded",[tag("div","wrapper"+(o?" wrapper--extended":""),[tag("div","store-name data-hj-suppress",r.name),tag("div","logo-container",[new n.a({urlImage:r.urlLogo})]),tag("div","store-type pf-ui-caption",[a]),tag("div","pf-ui-caption",[tag("span","pf-text-muted",dlang("dashboard","Printful billing currency")),[": ",r.currency]]),o?tag("div","pf-banner pf-banner-warning",[tag("p",{innerHTML:dlang("dashboard","Adjust the store's {linkBegin}default selling preferences{linkEnd} to choose this variant").replace("{linkBegin}",'<a href="'.concat(s,'" class="pf-link pf-pointer pf-d-inline pf-p-0">')).replace("{linkEnd}","</a>")})]):""])])]))}tag("div",null,[tag("h6","pf-mt-0 margin-bottom-20",lang("Select store")),tag("ul","list-unstyled list-inline storeList",e),tag("div","clearfix")]).append(this.node)}function z(){var e=this;u.a.clearNode(this.node);var t=dlang("dashboard","custom"),i=dlang("dashboard","{firstName}'s Store").replace("{firstName}",PF.Customer.firstName);w(this,E).createStoreType!==r.a.TYPE_NATIVE&&(t=w(this,E).createStoreType,i=w(this,E).createStoreType+" store"),this.errorBlock=tag("div"),this.nodeCreateInput=tag("input",{type:"text",value:i,className:"form-control pf-mr-12 pf-w-sm-50 pf-d-inline",prop:{onkeyup:function(t){13==t.keyCode&&T(e,N,G).call(e)}},attr:{"data-test":"store-name-I4Tuawr8ZNxKBxQ"}}),tag("div",{className:"row",style:{minHeight:"200px"}},[tag("div","col-12 text-center form-inline",[tag("h3","pf-h3 pf-mt-32 pf-mb-12","custom"===t?dlang("dashboard","Create a custom store"):dlang("dashboard","Create a {type} store").replace("{type}",t)),this.nodeCreateInput,tag("a",{className:"pf-btn pf-btn-primary pf-d-block pf-d-sm-inline-block pf-mt-12 pf-mt-sm-0",prop:{onclick:T(this,N,G).bind(this)},attr:{"data-test":"create-btn-NajZJtoN8EzoBK4"}},dclang("dashboard","store","Create")),this.errorBlock])]).append(this.node),setTimeout(function(){o()(this.nodeCreateInput).focus()}.bind(this),400)}function G(){return H.apply(this,arguments)}function H(){return(H=g(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=String(this.nodeCreateInput.value).trim()).length>0)){e.next=9;break}return c.a.show(this.node),e.next=5,l.g(t,!1,w(this,E).createStoreType);case 5:i=e.sent,T(this,D,q).call(this,i),e.next=11;break;case 9:tag("div","pf-mt-12 pf-text-red",dlang("dashboard","Please check the name and try again")).append(this.errorBlock);case 11:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function q(e){c.a.hide(this.node),I(this,O,w(this,O)||[]),w(this,O).push(e),e.storeId?T(this,x,Y).call(this,e.storeId,e):alert(dlang("dashboard","Please check the name and try again"))}function Y(e,t){t.hasFlag(h.a.FLAG_IS_LIMITED_BY_DSR_SETTINGS)||w(this,E).callback(e,t)}var W=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(this,e),this.callback=t.callback||null,this.forceCreate=t.forceCreate||!1,this.type=t.type||"all",this.createStoreType=t.createStoreType||"native",this.closeOnClick=t.closeOnClick||!0,this.withAvailableProductId=t.withAvailableProductId||null,this.withAvailableVariantId=t.withAvailableVariantId||null,this.getCacheKey=function(){return this.type+"|"+(this.withAvailableProductId||"")}}},"0Dcb":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(e,t){t=t||{};var i={tag:"div",className:"square-box pf-rounded",els:[{tag:"div",className:"square-content",els:[{tag:"div",els:[{tag:"span",els:(e=e||{}).nodeContent instanceof Array?e.nodeContent:[e.nodeContent?e.nodeContent:""]}]}]}]};e.urlImage&&(i.style={backgroundImage:'url("'+encodeURI(e.urlImage)+'")'}),n.a.O2O(i,t),this.node=Object(n.a)(i)};r.prototype=new n.a.Base,window&&((globalThis||{}).PFComponentsSquareBox=r)},"0Dko":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={MAX_EMBROIDERY_PREVIEW_AREA:30,EMBROIDERY_MAX_IMAGE_COLORS:8,EMBROIDERY_MAX_SELECTED_THREAD_COLORS:6,EMBROIDERY_IMAGE_COLOR_COUNT_LIMIT:32,EMBROIDERY_NONE_COLOR_BE_LCASE_VALUE:"transparent"};(globalThis||{}).PFProductPushEmbroideryCommon=n},"0YfL":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Sucz"),r={getInsideLabelTemplate:function(e,t,i,r,a){Object(n.a)("product-generator/get-native-inside-label",{variantId:e,fileId:t,templateId:r,position:a?a.toArray():null},i)}};(globalThis||{}).PFRepositoriesGeneratorSimpleRepository=r},"0nZy":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r})),i.d(t,"l",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"h",(function(){return d})),i.d(t,"i",(function(){return h})),i.d(t,"j",(function(){return p})),i.d(t,"c",(function(){return f})),i.d(t,"m",(function(){return g}));var n="chooserOptions",r=Object.freeze({IS_PROMO_MOCKUP_PICKER_AVAILABLE:"IS_PROMO_MOCKUP_PICKER_AVAILABLE",IS_QUICK_DESIGNS_PICKER_AVAILABLE:"IS_QUICK_DESIGNS_PICKER_AVAILABLE",IS_LICENSED_ASSET_PICKER_AVAILABLE:"IS_LICENSED_ASSET_PICKER_AVAILABLE",IS_TITLE_HIDDEN:"IS_TITLE_HIDDEN",IS_MOCKUP_MAKER_MODE:"IS_MOCKUP_MAKER_MODE",OPEN_DESIGNER_TAB:"OPEN_DESIGNER_TAB"}),a="validation",o=Object.freeze({FILES_UNAVAILABLE:"FILES_UNAVAILABLE",FILES_COUNT_RESTRICTION:"FILES_COUNT_RESTRICTION",CLIPARTS_UNAVAILABLE:"CLIPARTS_UNAVAILABLE",TEXTBOX_UNAVAILABLE:"TEXTBOX_UNAVAILABLE",TEXTBOX_EMBROIDERY:"TEXTBOX_EMBROIDERY",TEXTBOX_COUNT_RESTRICTION:"TEXTBOX_COUNT_RESTRICTION",LICENSED_ASSET_COUNT_RESTRICTION:"LICENSED_ASSET_COUNT_RESTRICTION",QUICKDESIGN_COUNT_RESTRICTION:"QUICKDESIGN_COUNT_RESTRICTION"}),s="mockup_prop",l="mockup_scene",c=[s,l],u="default_view",d="mockup_props",h="mockup_scenes",p="text",f="clipart",g=[d,h]},"0rxu":function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));var n=i("n5ho"),r={relevant:function(){return 1},fastestDelivery:function(e,t){var i,r;if(e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t,null===(i=e.estimateDelivery)||void 0===i||!i.fromDays||null===(r=t.estimateDelivery)||void 0===r||!r.fromDays)return 0;var a=(e.estimateDelivery.fromDays<t.estimateDelivery.fromDays?1:0)+(t.estimateDelivery.fromDays>e.estimateDelivery.fromDays?1:0)+(e.estimateDelivery.toDays-e.estimateDelivery.fromDays<t.estimateDelivery.toDays-t.estimateDelivery.fromDays?1:0);return(e.estimateDelivery.fromDays>t.estimateDelivery.fromDays?1:0)+(t.estimateDelivery.fromDays<e.estimateDelivery.fromDays?1:0)+(t.estimateDelivery.toDays-t.estimateDelivery.fromDays<e.estimateDelivery.toDays-e.estimateDelivery.fromDays?1:0)-a},is_new:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=(e.isNew?1e8:0)+(e.isPopular?1e7:0)+(e.hasBetaAccess?1e6:0)+(e.isSuggested?1e5:0)+(e.hasClearance?-1e5:0)+e.rating;return(t.isNew?1e8:0)+(t.isPopular?1e7:0)+(t.hasBetaAccess?1e6:0)+(t.isSuggested?1e5:0)+(t.hasClearance?-1e5:0)+t.rating-i},popular:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=(e.isPopular?1e8:0)+(e.hasBetaAccess?1e7:0)+(e.isNew?1e6:0)+(e.isSuggested?1e5:0)+(e.hasClearance?-1e5:0)+e.rating;return(t.isPopular?1e8:0)+(t.hasBetaAccess?1e7:0)+(t.isNew?1e6:0)+(t.isSuggested?1e5:0)+(t.hasClearance?-1e5:0)+t.rating-i},review:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=0,r=0,a=0,o=0;return e.reviewRating&&(i=e.reviewRating.rating||0,a=e.reviewRating.reviewCount||0),t.reviewRating&&(r=t.reviewRating.rating||0,o=t.reviewRating.reviewCount||0),i-r==0?o-a:r-i},priceLow:function(e,t){return(e instanceof n.a?e.priceData.price:e.priceRange.minPrice)-(t instanceof n.a?t.priceData.price:t.priceRange.minPrice)},priceHigh:function(e,t){return-1*r.priceLow(e,t)},retailPriceLow:function(e,t){return(e instanceof n.a?e.priceData.retailPrice:e.priceRange.minRetailPrice)-(t instanceof n.a?t.priceData.retailPrice:t.priceRange.minRetailPrice)},retailPriceHigh:function(e,t){return-1*r.retailPriceLow(e,t)},profitLow:function(e,t){var i=e instanceof n.a?e.priceData.retailPrice:e.priceRange.minRetailPrice,r=t instanceof n.a?t.priceData.retailPrice:t.priceRange.minRetailPrice;return i-(e instanceof n.a?e.priceData.price:e.priceRange.minPrice)-(r-(t instanceof n.a?t.priceData.price:t.priceRange.minPrice))},profitHigh:function(e,t){return-1*r.profitLow(e,t)},favoritesAsc:function(e,t){return-1*this._sortFavorite(e,t)},favoritesDesc:function(e,t){return this._sortFavorite(e,t)},_sortFavorite:function(e,t){e=e instanceof n.a?e.getCachedProduct():e,t=t instanceof n.a?t.getCachedProduct():t;var i=0,r=0;return e.addedToFavoritesAt&&(i=e.addedToFavoritesAt||0),t.addedToFavoritesAt&&(r=t.addedToFavoritesAt||0),i-r}},a={retailPriceLow:function(e,t,i,r){var a=e instanceof n.a?e.priceData.price:e.priceRange.minPrice,o=t instanceof n.a?t.priceData.price:t.priceRange.minPrice;return(a+=i)-(o+=r)},retailPriceHigh:function(e,t,i,n){return-1*a.retailPriceLow(e,t,i,n)},profitLow:function(e,t,i,n){return i-n},profitHigh:function(e,t,i,n){return-1*a.profitLow(e,t,i,n)}};window&&((globalThis||{}).PFProductsPricingSortingMethods=r,(globalThis||{}).PFProductsPricingRetailSortMethods=a)},"0sIF":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={_previewStringCache:{},getPreviewString:function(e){return n._previewStringCache.hasOwnProperty(e)?n._previewStringCache[e]:""},setPreviewString:function(e,t){return n._previewStringCache[e]=t},clearPreviewStrings:function(){n._previewStringCache={}}};(globalThis||{}).PFComponentsGeneratorMockupPreviewCommon=n},"1Juc":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("bUho"),r=i("nF4n"),a=Class({_nodesByItem:{},_par:null,__construct:function(e){this._par=e,this._onValueChangedCallback=this._par.onChanged,this._nodeItems=tag("div",{className:"button-picker__list",attr:{role:"list","aria-label":this._par.ariaLabel}}),this._renderItems()},_onItemClick:function(e){this._popover&&this._popover.destroy(),this._par.sampleValuesDisabled.indexOf(e)>-1||this._par.valuesInactive.indexOf(e)>-1||this._par.valuesHidden.indexOf(e)>-1||this._par.valuesDisabled.indexOf(e)>-1?this._onValueChangedCallback(e):(this._par.activeValue=e,this._onValueChangedCallback(e),this._renderState())},setActiveValue:function(e){this._par.activeValue=e,this._renderState()},getActiveValue:function(){return this._par.activeValue},_renderItems:function(){for(var e in r.a.clearNode(this._nodeItems),this._nodesByItem={},this._par.values){var t=this._par.values[e].title,i=this._par.values[e].value,n=this._par.singleAriaLabel.replace("{title}",t),a=tag("a",{className:"pf-btn pf-btn-square pf-btn-outline pf-w-auto pf-mb-4 pf-mr-4 pf-px-4",text:t,onclick:this._onItemClick.bind(this,i),attr:{"data-original-title":t,role:"button","aria-label":n},data:{label:n}});this._nodesByItem[i]=a,a.append(this._nodeItems)}this._renderState()},_renderState:function(){for(var e in this._nodesByItem){var t=this._nodesByItem[e];r.a.removeClassName(t,"active"),r.a.removeClassName(t,"disabled"),t.setAttribute("aria-label",t.dataset.label),(this._par.valuesDisabled.indexOf(e)>-1||this._par.sampleValuesDisabled.indexOf(e)>-1||this._par.valuesHidden.indexOf(e)>-1||this._par.valuesInactive.indexOf(e)>-1)&&(r.a.addClassName(t,"pf-border--dashed disabled"),r.a.removeClassName(t,"active"),t.setAttribute("aria-label",dlang("site","{buttonLabel} is not available").replace("{buttonLabel}",t.dataset.label))),this._par.activeValue&&this._par.activeValue===e&&r.a.addClassName(t,"active")}},setUnavailableItems:function(e){this._par.valuesDisabled=e,this._renderState()},setHiddenItems:function(e){this._par.valuesHidden=e,this._renderState()},togglePopover:function(e,t,i){e&&(this.getInactiveItems().indexOf(e)>-1||this.getUnavailableItems().indexOf(e)>-1)&&this._showPopover(e,t,i)},_showPopover:function(e,t,i){this._popover&&this._popover.destroy();var r=$(this._nodeItems).closest(".dynamic-sticky-footer").get(0);this._popover=new n.a(this._nodesByItem[e],t,i,{modalCompatible:!0,closeOnResize:!0,placement:"bottom",container:r?$(r).find(".dynamic-sticky-footer__drawer").get(0):"body"})},getUnavailableItems:function(){return this._par.valuesDisabled},getHiddenItems:function(){return this._par.valuesHidden},getValue:function(){return this._par.activeValue},getInactiveItems:function(){return this._par.valuesInactive},setInactiveItems:function(e){this._par.valuesInactive=e,this._renderState()},setDisabledSampleSizes:function(e){this._par.sampleValuesDisabled=e,this._renderState()},getDisabledSampleSizes:function(){return this._par.sampleValuesDisabled}},r.a.Base);window&&((globalThis||{}).PFComponentsButtonPicker=a)},"1mG2":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("g357"),r=i("YBfo"),a={toggleLock:function(e){n.a.createAndDispatch(r.a.EVENT_TOGGLE_LOCK,{isLocked:e})}};(globalThis||{}).PFProductsCatalogUtilsStateHelpers=a},"1tjy":function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"f",(function(){return h}));var n=i("KLvT"),r=i("FpxJ");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))}}var s=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.d(r.a),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return Object(n.a)().getters[r.d(r.c)]([e])[0]},c=function(e){return Object(n.a)().getters[r.d(r.b)](e)},u=function(e){return Object(n.a)().commit(r.d(r.h),e)},d=function(e,t){return Object(n.a)().commit(r.d(r.k),{clipartItemId:e,technique:t})},h=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.d(r.e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"1yDH":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){this.items=[]};n.prototype.page=0,n.prototype.pages=0,n.prototype.total=0,n.prototype.items=null,window&&((globalThis||{}).PFItemsFileList=n)},"1yrs":function(e,t,i){"use strict";i.d(t,"d",(function(){return hasCustomizableCropImageError})),i.d(t,"g",(function(){return hasCustomizableTextLayerGraphicError})),i.d(t,"e",(function(){return hasCustomizableTextLayerArcError})),i.d(t,"f",(function(){return hasCustomizableTextLayerError})),i.d(t,"h",(function(){return p})),i.d(t,"c",(function(){return f})),i.d(t,"a",(function(){return g})),i.d(t,"b",(function(){return m}));var n=i("X5Ic"),r=i("7QI8"),a=i("rF+z"),o=i("rFrQ"),s=i("pWIn"),l=i("7h5t"),c=i("tx4t"),u=i("gQ2J");function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function hasCustomizableCropImageError(e,t){return null==t?void 0:t.map((function(t){return f(e,t)})).some((function(e){return e.hasCustomizableLayersWithCropImage()}))}function hasCustomizableTextLayerGraphicError(e,t){return null==t?void 0:t.map((function(t){return f(e,t)})).some((function(e){return e.hasCustomizableLayersWithColorGraphicText()}))}function hasCustomizableTextLayerArcError(e,t){return null==t?void 0:t.map((function(t){return f(e,t)})).some((function(e){return e.hasCustomizableLayersWithArcText()}))}function hasCustomizableTextLayerError(e,t){return null==t?void 0:t.map((function(t){return f(e,t)})).some((function(e){return e.hasCustomizableLayersWithMultiLineText()}))}function p(e,t,i){var n=e.getPlacementIdsHavingFiles().concat(t.getPlacementIdsWithDesign());n=n.filter((function(e,t,i){return i.indexOf(e)===t}));var a=[r.a.TYPE_HANG_TAG,r.a.TYPE_BACKGROUND];for(var o in i&&(a=[].concat(d(a),[r.a.TYPE_LABEL_INSIDE,r.a.TYPE_LABEL_OUTSIDE])),n)if(n.hasOwnProperty(o)&&-1===a.indexOf(n[o]))return!1;return!0}function f(e,t){return null==e?void 0:e.getUserTemplate(null==t?void 0:t.placementId,null==t?void 0:t.templateId)}function g(e,t,i,r){var c=new a.a,u={};if(u[o.a.EMBROIDERY_LAYERS_OVERLAPPING]=!1,u[o.a.EMBROIDERY_OUT_OF_BOUNDS]=!1,u[o.a.EMBROIDERY_TEXT_TOO_SMALL]=!1,u[o.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]=!1,r!==n.a.TYPE_EMBROIDERY)return!1;for(var d in i){var h=f(t,i[d]);if(h.technique===n.a.TECHNIQUE_EMBROIDERY)for(var p in c.setActivePlacement(h.placementId),h.areLayersOverlapping({layerTypeInstances:[s.a,l.a]})&&(u[o.a.EMBROIDERY_LAYERS_OVERLAPPING]=!0),h.layers){var g=h.layers[p];g.isTextLayerPartiallyOutOfBounds()&&(u[o.a.EMBROIDERY_OUT_OF_BOUNDS]=!0),c.setActiveLayer(g).isTextSizeValid()||(u[o.a.EMBROIDERY_TEXT_TOO_SMALL]=!0),c.setActiveLayer(g).isTextHeightOverUpperLimit()&&(u[o.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]=!0)}}return!!u.hasOwnProperty(e)&&u[e]}function m(e,t,i,n){if(void 0===c.a.TECHNIQUE_DEPENDENT_VALIDATION[n]||-1===c.a.TECHNIQUE_DEPENDENT_VALIDATION[n].indexOf(e))return!1;var r=new a.a,s={};for(var l in i){var d=f(t,i[l]);for(var h in Object(u.a)(d)&&(s[o.a.ENGRAVING_LAYERS_OVERLAPPING]=!0),d.layers){var p=d.layers[h];p.isPartiallyOutOfBounds()&&(s[o.a.LAYER_OUT_OF_BOUNDS]=!0),r.setActiveLayer(p).isTextSizeValid()||(s[o.a.LAYER_TEXT_TOO_SMALL]=!0),r.setActiveLayer(p).isClipartSizeValid()||(s[o.a.LAYER_CLIPART_TOO_SMALL]=!0)}}return!!s.hasOwnProperty(e)&&s[e]}},"1z/T":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("nF4n"),r=i("wo5H"),a=Class({fontKey:"",name:"",options:{},getOptions:function(e){return this.options.hasOwnProperty(e)?this.options[e]:null},getMaxHeight:function(e,t){var i,n,r,o=this.getOptions(e);return o&&null!==(i=null===(n=o.placementSpecificOptions)||void 0===n||null===(r=n[t])||void 0===r?void 0:r.maxHeight)&&void 0!==i?i:a.MAX_HEIGHT_DEFAULT},getResizedTextHeight:function(e,t){return this.getMaxHeight(e,t)*a.RESIZED_TEXT_SCALE}});a.fromArray=function(e){var t=new a;return n.a.O2O(t,e),e.options&&Object.keys(e.options).length>0&&(t.options=a.Options.fromArray(e.options)),t},a.Options=Class({isAvailable:!1,maxCharacters:r.s,placementSpecificOptions:{},minSize:.05}),a.Options.fromArray=function(e){var t={};for(var i in e){var r=new a.Options;n.a.O2O(r,e[i]),t[i]=r}return t},a.MAX_HEIGHT_DEFAULT=0,a.RESIZED_TEXT_SCALE=.99,window&&((globalThis||{}).PFItemsGeneratorFontItem=a)},"2+PC":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({values:[],allValues:[],selectedValues:[],selectedLimit:0,canDeselectLast:!0,pickerTitle:"",onChangedCallback:null,isPopoverEnabled:!1,getSelectedSizes:null,productId:null,isSizeGuideVisible:!1,designData:null,isSizeNodeTitleVisible:!0,disabledSizes:[],translatedSizes:null});n.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this size and color combination is discontinued. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose a different size."),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is discontinued. Please choose a different color.")},REGION:{TITLE:dlang("site","Fulfilled in {region}"),DESC:dlang("generator","Ships to locations worldwide")},UNAVAILABLE:{TITLE:lang("Out of stock"),DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size"),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is out of stock. Please choose a different color.")},SAMPLE:{TITLE:dlang("generator","Not available as sample"),DESC:dlang("generator","You can place it as a basic order")},DSR_LIMITED:{DESC_COLOR:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this color"),DESC_SIZE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this size")}},window&&((globalThis||{}).PFProductPushPickersParams=n)},"21+U":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Oc5s"),r=function(){};r.prototype=new n.a,window&&((globalThis||{}).PFFormsTextareaPar=r)},"2BaQ":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("n5ho"),r=Class({_variants:[],_availableVariantIds:[],__construct:function(e,t){this._availableVariantIds=e,this._variants=t},getUnavailableSampleSizes:function(){var e=[];if(0===this._availableVariantIds.length)return e;for(var t in this._variants)this._availableVariantIds.indexOf(this._variants[t].variantId)>-1||e.push(this._variants[t].size);return e},isAvailableVariant:function(e){return 0===this._availableVariantIds.length||this._availableVariantIds.indexOf(e.variantId)>-1}});r.isAvailableSyncVariant=function(e,t,i){return!i||t!==n.a.ID_CUSTOM_PRODUCT&&(0===e.length||e.indexOf(t)>-1)},r.containsDisallowedVariants=function(e,t){var i=e.product.availableSampleVariants;if(0===i.length)return!1;var n=t.variantMapping,r=e.sizes,a=[];for(var o in n)r.indexOf(n[o].size)>-1&&a.push(n[o].variantId);for(var s in a)if(!(i.indexOf(a[s])>-1))return!0;return!1},r.canBeSampleOrder=function(e){return e.generatorVariants.length<=PF.Customer.sampleItems||PF.Customer.sampleOrdersTotal<=0},(globalThis||{}).PFVariantPickerSampleVariantAvailability=r},"2Zm2":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("6JZw"),r=function(){};r.prototype=new n.a,r.prototype.toArrayKeys=["priceKey","retailPrice","title"],r.prototype.priceKey=null,r.prototype.retailPrice=null,r.prototype.title=null,window&&((globalThis||{}).PFItemsBaseGeneratorPriceItem=r)},"2dYE":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({all:0,notAdded:0,added:0,failed:0});r.fromArray=function(e){var t=r;return n.a.O2O(t,e),t},r.TYPE_ALL="all",r.TYPE_NOT_ADDED="notAdded",r.TYPE_ADDED="added",r.TYPE_FAILED="failed",r.types={},r.types[r.TYPE_ALL]=lang("All"),r.types[r.TYPE_NOT_ADDED]=lang("Not added"),r.types[r.TYPE_ADDED]=lang("Added"),r.types[r.TYPE_FAILED]=lang("Failed"),r.COUNT_PUSHABLE=100,r.AMOUNT_UNKNOWN=-1,window&&((globalThis||{}).PFProductPushSyncedProductCounts=r)},"2el7":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(){};n.prototype.storeId=null,n.prototype.orderType=null,n.prototype.categoryId=null,n.prototype.productId=null,n.prototype.productTemplateId=null,n.prototype.productSize=null,n.prototype.productColor=!1,n.prototype.productTechnique="",n.prototype.productRegion=null,n.prototype.requireLogin=!1,n.prototype.ref="",n.prototype.allowStoresWithAvailableProductId=null,n.prototype.allowStoresWithAvailableVariantId=null,(globalThis||{}).PFOrderBeginPar=n},"2ovl":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("edgZ"),r=Class({_filesByPlacement:{},addFile:function(e,t){var i=this.getFiles(e);i.push(t),this._filesByPlacement[e.id]=i},removeFile:function(e,t){var i=this.getFiles(e);for(var n in i)if(i[n].fileId==t.fileId)return i.splice(n,1),void(this._filesByPlacement[e.id]=i)},getFiles:function(e){return this._filesByPlacement[e.id]||[]},getFileIdsByPlacement:function(){var e={};for(var t in this._filesByPlacement){e[t]=e[t]||[];var i=this.getFiles({id:t});for(var n in i)e[t].push(i[n].fileId)}return e},hasFiles:function(e){return console.error("Should switch to template usage in hasFiles()"),this.getFiles(e).length>0}});window&&((globalThis||{}).PFProductPushPlacementFiles=r);var a=i("Ii6r"),o=i("bRD6"),s=i("Jkv8");function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var c=Class({placementFiles:{},_templates:{},productId:0,_storageTemplatesKey:"mockupGeneratorTemplates",_storagePlacementFilesKey:"mockupGeneratorPlacementFiles",_storage:null,__construct:function(e){this._productId=e;try{this._storage=window.sessionStorage}catch(e){console.log("Session storage not supported!")}},loadFromStorage:function(e){var t=this._storage.getItem(this._storageTemplatesKey);if(this._storage.removeItem(this._storageTemplatesKey),t){var i=JSON.parse(t);if(i=i[this._productId]){var r={};for(var a in i){var o=i[a];for(var s in o.layers){var l=o.layers[s];r[l.fileId]=l.fileId}}(new n.a).getByIds(Object.keys(r),this._onFilesLoaded.bind(this,i,e),!1)}}},_onFilesLoaded:function(e,t){var i,n=this;return(i=regeneratorRuntime.mark((function i(){var r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(s.setPFCanvasFonts)();case 2:for(r in n._templates={},e)n._templates[r]=o.a.fromArray(e[r]);a=n._getPlacementFiles(),n._storage.removeItem(n._storagePlacementFilesKey),t(n._templates,a);case 7:case"end":return i.stop()}}),i)})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=i.apply(e,t);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))})()},rememberTemplates:function(e){this._templates=e.templates,this._placementFiles=e.filesIdsByPlacement,this._savePlacementFilesToStorage(),this._saveTemplatesToStorage()},_savePlacementFilesToStorage:function(){var e={};if(e[this._productId]=[],this._placementFiles){e[this._productId]=this._placementFiles;try{this._storage.setItem(this._storagePlacementFilesKey,JSON.stringify(e))}catch(e){this._showAlert()}}},_saveTemplatesToStorage:function(){var e=[],t={};if(t[this._productId]=[],!$.isEmptyObject(this._templates)){for(var i in this._templates)e.push(this._templates[i].toArray());t[this._productId]=e;try{this._storage.setItem(this._storageTemplatesKey,JSON.stringify(t))}catch(e){this._showAlert()}}},_getPlacementFiles:function(){var e=new r,t=this._storage.getItem(this._storagePlacementFilesKey),i=(JSON.parse(t)||{})[this._productId];for(var o in i)for(var s in i[o]){var l=new a.a;l.id=o,e.addFile(l,(new n.a).getCachedFile(i[o][s]))}return e},_clearStorage:function(){try{this._storage.setItem(this._storageTemplatesKey,JSON.stringify({})),this._storage.setItem(this._storagePlacementFilesKey,JSON.stringify({}))}catch(e){this._showAlert()}},hasPositions:function(){var e=this._storage.getItem(this._storageTemplatesKey);if(e&&JSON.parse(e)[this._productId])return!0;return!1},_showAlert:function(){alert(dlang("generator","You are in a Private/Incognito Mode. It does not support storing settings locally."))}});c._KEY_DESIGN_CACHED_IN_SESSION="designCachedInSession",c.setDesignCachedInSession=function(){try{window.sessionStorage.setItem(c._KEY_DESIGN_CACHED_IN_SESSION,"true")}catch(e){console.log("Session storage not supported!")}},c.isDesignCachedInSession=function(){try{return!!PF.Customer.isLogged()&&window.sessionStorage.getItem(c._KEY_DESIGN_CACHED_IN_SESSION)}catch(e){return console.log("Session storage not supported!"),!1}},c.unsetDesignCachedInSession=function(){try{c.isDesignCachedInSession()&&window.sessionStorage.removeItem(c._KEY_DESIGN_CACHED_IN_SESSION)}catch(e){console.log("Session storage not supported!")}},(globalThis||{}).PFMockupGeneratorMemory=c},"3Dht":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({title:"",value:"",className:"",isVisible:!0,onValueChanged:null,onSlide:null,minValue:null,maxValue:null,incrementStep:.01,defaultValue:0,fractionDigits:2,hasNumberInput:null,showNewBadge:null});window&&((globalThis||{}).PFFormsRangePar=n)},"3R2j":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("nF4n"),r=i("s6Su"),a=i("cKxm"),o=function(e){var t;if(this.selected={},this.par=e,e.selectedValues)for(t in e.selectedValues)this.selected[e.selectedValues[t]]=e.selectedValues[t];this.enableSearchAt=e.enableSearchAt||12,this.searchItemBuffer=void 0!==e.searchItemBuffer?e.searchItemBuffer:4,this.onChangeCallback=e.onChange,this.node=Object(n.a)({tag:"div",className:"checkbox-list",els:[{tag:"div",className:"checkbox-list__header",onclick:$.proxy(this.toggleItems,this),els:[{tag:"b",text:e.header||" "},this.nodeClear=Object(n.a)({tag:"a",className:"pf-link pull-right",text:clang("clear checkbox filters","Clear"),onclick:$.proxy(this.clear,this)})]},this.nodeSearch=tag("div","pf-my-8 pf-pb-2 hidden"),this.nodeItems=Object(n.a)({tag:"div",className:"checkbox-list__items"})]}),this.nodeSearchValue="",this.nodeSearchInput=new a.a({onKeyUp:this.onSearchKeyUp.bind(this),onKeyUpEvent:this.onSearchKeyUpEvent.bind(this),value:"",type:"text",placeholder:lang("Searchâ¦"),className:"tt-input",name:"CheckboxListSearch"}),this.nodeSearchInput.append(this.nodeSearch);var i=[];for(t in e.items){var r=e.items[t];r&&("string"==typeof r&&(r={value:r,text:r}),i.push(r))}this.setItems(i)};o.prototype=new n.a.Base,o.prototype.items=null,o.prototype.selected=null,o.prototype.toggleItems=function(){$(this.node).toggleClass("checkbox-list--expanded")},o.prototype.renderItems=function(){n.a.clearNode(this.nodeItems);var e=this.items.slice();if(this.nodeSearchValue){var t=$.trim(this.nodeSearchValue.toLowerCase());e=e.filter((function(e){return e.text.toLowerCase().indexOf(t)>-1}))}for(var i in e){var a=e[i],o=!1;void 0===a.isActive||a.isActive||this.selected[a.value]||(o=!0);var s=!!this.selected[a.value],l=a.text.replaceAll(" ","-").replaceAll('"',"")+"-"+i;new r.a(new r.b({type:"checkbox",value:s,isReadOnly:o,wrapperClass:"pf-mt-6",label:'<span class="pf-ui-caption">'+a.text+"</span>",name:l,onChange:this.selectValue.bind(this,a.value)})).append(this.nodeItems)}this.checkUI(e.length)},o.prototype.checkUI=function(e){n.a.addClassName(this.nodeClear,"hidden"),n.a.addClassName(this.nodeSearch,"hidden"),this.enableSearchAt>0&&this.items.length>this.enableSearchAt&&(n.a.removeClassName(this.nodeSearch,"hidden"),this.nodeItems.style.height="auto",e>this.enableSearchAt+this.searchItemBuffer&&(this.nodeItems.style.height=25*this.enableSearchAt+"px")),this.getSelected().length&&n.a.removeClassName(this.nodeClear,"hidden")},o.prototype.setItems=function(e){this.items=e.filter((function(e){return null!==e.text&&void 0!==e.text})).map((function(e){var t=e.text.replace(/\s?\/\s?/g," / ").split(" ");return"Bulk discount"===e.text?e.text=t.map((function(e){return e.charAt(0)+e.substring(1)})).join(" "):e.text.includes("cm")?e.text=t.map((function(e){return e.charAt(0).toLowerCase()+e.substring(1).toLowerCase()})).join(" "):"shouldCapitalize"in e&&!e.shouldCapitalize||(e.text=t.map((function(e){return e.charAt(0).toUpperCase()+e.substring(1)})).join(" ")),e})),this.renderItems()},o.prototype.getSelected=function(){var e=[];for(var t in this.items){var i=this.items[t];this.selected[i.value]&&e.push(i.value)}return e},o.prototype.getSelectedItems=function(){return this.items.filter((function(e){return this.selected[e.value]}),this)},o.prototype.selectValue=function(e){this.selected[e]?delete this.selected[e]:this.par.isSingleSelect?(this.selected={},this.selected[e]=e):this.selected[e]=e,this.renderItems(),this.onChanged()},o.prototype.clear=function(e){return this.selected={},this.nodeSearchValue="",this.renderItems(),this.onChanged(),e.preventDefault(),e.stopImmediatePropagation(),!1},o.prototype.onChanged=function(){this.onChangeCallback?this.onChangeCallback(this.getSelected()):console.info("No onChangeCallback defined for checkbox list! ",this.getSelected())},o.prototype.onSearchKeyUp=function(e){this.nodeSearchValue=e,this.nodeSearchInput.setValue(e),this.renderItems()},o.prototype.onSearchKeyUpEvent=function(e){"Escape"===e.key&&(this.nodeSearchValue="",this.nodeSearchInput.setValue(""),this.renderItems())},o.prototype.disableItem=function(e){var t=[];this.items.map((function(i){i.value===e&&(i.isInactive=!0),t.push(i)})),this.items=t,this.renderItems()},window&&((globalThis||{}).PFComponentsCheckboxList=o)},"3Vk9":function(e,t,i){"use strict";i.d(t,"h",(function(){return a})),i.d(t,"i",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"d",(function(){return p}));var n=i("Zwo4"),r="".concat(n.a,"/colorGraphics"),a="m_putColorGraphicItemsIntoRepo",o="m_setHasLoadedAllColorGraphics",s="g_hasLoadedAllColorGraphics",l="g_getColorGraphicItems",c="g_activeTextColorGraphicItems",u="g_activeBgColorGraphicItems",d="a_loadAllActiveColorGraphicItems",h="a_loadColorGraphics",p=function(e){return"".concat(r,"/").concat(e)}},"3oUi":function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"d",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"l",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"m",(function(){return g})),i.d(t,"i",(function(){return m})),i.d(t,"f",(function(){return _})),i.d(t,"k",(function(){return v}));var n=i("ehgC"),r=i("LvDl"),a=i.n(r),o="option_gender_unisex",s=Object.freeze([{value:o,title:clang("Gender picker","Unisex")},{value:"option_gender_male",title:clang("Gender picker","Men")},{value:"option_gender_female",title:clang("Gender picker","Women")}]),l=Object.freeze([n.a.TYPE_EBAY,n.a.TYPE_BONANZA,n.a.TYPE_ETSY]);function c(e){var t=a.a.includes([n.a.TYPE_AMAZON,n.a.TYPE_WEEBLY,n.a.TYPE_NATIVE,n.a.TYPE_API_3DCART,n.a.TYPE_API_LAUNCHCART,n.a.TYPE_WISH,n.a.TYPE_WIX,n.a.TYPE_WEBFLOW,n.a.TYPE_BIGCARTEL,n.a.TYPE_SQUARESPACE,n.a.TYPE_NUVEMSHOP,n.a.TYPE_TIENDANUBE],e.store.type);return e.product&&e.product.sizeGuide&&(null==e?void 0:e.product.hasSizeGuide)&&!t}function u(e){return c(e)&&(null==e?void 0:e.product.newSizeGuide)&&(null==e?void 0:e.store.supportsAdvancedSizeGuide())}var d="metric",h="imperial";function p(e){if(localStorage&&!a.a.isEmpty(e))try{localStorage.setItem("pushGeneratorTags",e)}catch(e){console.log("Local storage not supported")}}function f(){try{return localStorage.getItem("pushGeneratorTags")}catch(e){return null}}function g(e){try{localStorage.setItem("sizeGuideSettings",JSON.stringify(e))}catch(e){console.log("Local storage not supported")}}function m(){try{var e=localStorage.getItem("sizeGuideSettings");if(e)return JSON.parse(e)}catch(e){console.log("Local storage not supported")}return null}function _(e){return a.a.includes(Object.freeze([n.a.TYPE_ETSY,n.a.TYPE_SHOPIFY]),e)}function v(e){return[n.a.TYPE_BIGCOMMERCE,n.a.TYPE_SHOPIFY,n.a.TYPE_ETSY].includes(e)}},45:function(e,t){},"46ud":function(e,t,i){"use strict";var n;function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"f",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"e",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"h",(function(){return h}));var a=Object.freeze({generator:1,library:2,embedded:3}),o=Object.freeze({default:1,small:2}),s=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",NAME_DESC:"NAME_DESC",NAME_ASC:"NAME_ASC",SEARCH_RELEVANCE_DESC:"SEARCH_RELEVANCE_DESC",SEARCH_RELEVANCE_DIGITIZED_DESC:"SEARCH_RELEVANCE_DIGITIZED_DESC"}),l=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",NAME_DESC:"NAME_DESC",NAME_ASC:"NAME_ASC",SEARCH_RELEVANCE_DIGITIZED_DESC:"SEARCH_RELEVANCE_DIGITIZED_DESC"}),c=Object.freeze((r(n={},s.CREATED_DATE_DESC,dclang("dashboard","sort type","Created: newest first")),r(n,s.CREATED_DATE_ASC,dclang("dashboard","sort type","Created: oldest first")),r(n,s.NAME_ASC,dclang("dashboard","sort type","Name: A to Z")),r(n,s.NAME_DESC,dclang("dashboard","sort type","Name: Z to A")),r(n,s.SEARCH_RELEVANCE_DESC,dclang("dashboard","sort type","Relevance: higher")),r(n,s.SEARCH_RELEVANCE_DIGITIZED_DESC,dclang("dashboard","sort type","Relevance: digitized first")),n)),u=7,d={custom:{"folder-name":{required:dlang("library","The {field} is required").replace("{field}",dlang("library","Folder name")),min:dlang("library","The {field} must be at least {count} characters").replace("{field}",dlang("library","Folder name")).replace("{count}",3),max:dlang("library","The {field} may not be greater than {count} characters").replace("{field}",dlang("library","Folder name")).replace("{count}",64)}}};function h(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i={colSize:"col-12 col-sm-6 col-md-4 col-lg-3",innerColumns:[{height:t,colSize:"col-12"}]},n=e||1,r=[],a=0;a<n;a++)r.push(i);return{rows:[{columns:r}]}}},"4CFC":function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=i("4Ru2");function r(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function a(e){var t;return(r(t={},n.a.REGION_EUROPE,lang("Europe")),r(t,n.a.REGION_MEXICO,lang("Mexico")),r(t,n.a.REGION_USA,lang("USA")),r(t,n.a.REGION_JAPAN,lang("Japan")),r(t,n.a.REGION_EUROPE_SPAIN,lang("Europe/Spain")),r(t,n.a.REGION_EUROPE_LATVIA,lang("Europe/Latvia")),r(t,n.a.REGION_AUSTRALIA,lang("Australia")),r(t,n.a.REGION_CANADA,lang("Canada")),t)[e]||e}function o(e){var t;return(r(t={},n.a.REGION_EUROPE_ABBREVIATION,clang("European Union","EU")),r(t,n.a.REGION_MEXICO_ABBREVIATION,clang("Mexico","MEX")),r(t,n.a.REGION_USA_ABBREVIATION,lang("USA")),r(t,n.a.REGION_AUSTRALIA_ABBREVIATION,clang("Australia","AU")),r(t,n.a.REGION_JAPAN_ABBREVIATION,lang("JP")),r(t,n.a.REGION_CANADA_ABBREVIATION,clang("Canada","CA")),t)[e]||e}},"4Vs6":function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return r}));var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"techniques",[]),n(this,"hasNewPlacement",!1),n(this,"activeValue",""),n(this,"callback",null),n(this,"isGenerator",!1),n(this,"isMockupGenerator",!1),n(this,"isPolyPro",!1),n(this,"regions",[]),n(this,"useStrictRegionCheck",!0),n(this,"isRegionalTechniqueOverrideAvailable",!1)};window&&((globalThis||{}).PFVariantPickerTechniquePickerPar=r)},"5B9T":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={colorOrder:["#FFFFFF","#F1F0F5","#E5E6E1","#F8F8F8","#EAEAEA","#D9DAD5","#E2E3DE","#EBE8E3","#E5E6E1","#F1F0F5"],blackColors:["#27262B"],luminosity:"luminosity",sort:function(e){return e.sort((function(e,t){var i=e.codes,r=t.codes;return i.length>1||r.length>1?1===i.length?-1:1===r.length?1:0:n.compareColorsCallback(i[0],r[0])}))},compareColorsCallback:function(e,t){e=(e||"").toUpperCase(),t=(t||"").toUpperCase();var i=n.colorOrder.indexOf(e),r=n.colorOrder.indexOf(t);return(i=i<0?1e3:i)-(r=r<0?1e3:r)},fetchColorsFromVariants:function(e){var t={},i=[];for(var n in e){var r=e[n];if(r.color&&!(i.indexOf(r.color)>=0)){var a=[];r.colorCode&&a.push(r.colorCode),r.colorCode2&&a.push(r.colorCode2),t[r.color]=a}}return t},convertColorObjToArray:function(e){var t=[];for(var i in e)t.push({name:i,codes:e[i]});return t},swap:function(e){var t={};for(var i in e)t[e[i]]=i;return t},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}};n.Color=Class({r:0,g:0,b:0,__construct:function(e,t,i){this.r=e,this.g=t,this.b=i},toArray:function(){return[this.r,this.g,this.b]},toHex:function(){return"#"+(16777216+(this.b|this.g<<8|this.r<<16)).toString(16).slice(1)},isContainedBy:function(e){return!!e&&e.some(function(e){return e instanceof n.Color&&(e.r===this.r&&e.g===this.g&&e.b===this.b)}.bind(this))},distanceTo:function(e){var t=Math.sqrt(195075);return Math.sqrt(Math.pow(this.r-e.r,2)+Math.pow(this.g-e.g,2)+Math.pow(this.b-e.b,2))/t}}),n.Color.fromArray=function(e){return new n.Color(e[0],e[1],e[2])},n.Color.fromHex=function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(e,t,i,n){return t+t+i+i+n+n}));var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?new n.Color(parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)):null},window&&((globalThis||{}).PFUtilsColors=n)},"5OoY":function(e,t,i){"use strict";i.d(t,"a",(function(){return Li}));var n=i("TbQS"),r=i("A9n+"),a=i("2el7"),o=i("bXkz"),s=i("+tIB"),l=i("8qnk"),c=i("HmCv"),u=i("L8zU"),d=i("ZPm7"),h=i("bGr9"),p=i("o0qH"),f={fetchSizesFromVariants:function(e){var t=[];for(var i in e){var n=e[i];n.size&&-1===t.indexOf(n.size)&&t.push(n.size)}return t}};(globalThis||{}).PFUtilsSizes=f;var g=i("md/F"),m=i("vUhP"),_=i("g357"),v=i("AUjr"),y=i("oi7h"),b=i("X5Ic"),P=i("4Vs6"),C=i("sjGI"),T=i("4Ru2"),w=i("83UL"),I=i("6t3j"),S=i("SBaP"),E=i("Yh49"),O=i("cCrT");function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=F(e);if(t){var r=F(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return D(this,i)}}function D(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function B(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,j(e,t,"get"))}function V(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,j(e,t,"set"),i),i}function j(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var U=new WeakMap,z=new WeakMap,G=new WeakMap,H=new WeakMap,q=new WeakMap,Y=new WeakMap,W=new WeakMap,K=new WeakMap,Z=new WeakSet,X=new WeakSet,Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,i,n,r=N(a);function a(e){var t;return L(this,a),t=r.call(this),X.add(x(t)),Z.add(x(t)),U.set(x(t),{writable:!0,value:null}),z.set(x(t),{writable:!0,value:null}),G.set(x(t),{writable:!0,value:null}),H.set(x(t),{writable:!0,value:null}),q.set(x(t),{writable:!0,value:null}),Y.set(x(t),{writable:!0,value:null}),W.set(x(t),{writable:!0,value:null}),K.set(x(t),{writable:!0,value:!0}),t.node=tag("div"),V(x(t),U,e),V(x(t),G,w.a.getFilteredAvailableRegions(B(x(t),U).regionData)),V(x(t),z,B(x(t),U).variants),V(x(t),H,B(x(t),U).onChanged),V(x(t),Y,new O.a),V(x(t),K,B(x(t),U).shouldShowAvailabilityInfo),M(x(t),Z,J).call(x(t)),t}return t=a,(i=[{key:"setActiveRegion",value:function(e,t){B(this,q).isVariantAvailableInRegion(t,e)||(e=T.a.DEFAULT_REGION),-1===B(this,q).getActiveItems().indexOf(e)&&(e=B(this,q).getFirstActiveItem()),B(this,q).setRegion(e),V(this,W,e)}},{key:"getValueCount",value:function(){return B(this,q).getSelectedRegionsCount()}},{key:"isValuePicked",value:function(){return!!this.getRegion()}},{key:"getRegion",value:function(){return B(this,q).getActiveValue()}},{key:"getMatchingVariants",value:function(){if(!this.getRegion())return B(this,z);for(var e=[],t=0;t<B(this,z).length;t++){var i=B(this,z)[t];B(this,q).isVariantAvailableInSelectedRegions(i.variantId)&&e.push(i)}return e&&e.sort(g.a.variantSortingBySizeCallback),e||[]}},{key:"getAllVariants",value:function(){return B(this,z).slice()}}])&&A(t.prototype,i),n&&A(t,n),a}(S.a);function J(){var e=null;B(this,G).allowedSellingRegions&&(e=B(this,G).allowedSellingRegions.slice()),V(this,q,new E.a(new E.b({regionData:B(this,G),activeValue:e,onChanged:M(this,X,ee).bind(this),shouldShowAvailabilityInfo:B(this,K),shouldLimitPickableRegionCount:B(this,U).shouldLimitPickableRegionCount}))),B(this,q).node.append(this.node)}function ee(e){B(this,q).getInactiveItems().indexOf(e)>-1&&(e=B(this,q).getFirstActiveRegion()),V(this,W,e),(new I.a).setLastActiveRegion(e),B(this,q).hasSelectedValuesHaveInactiveRegions()||B(this,H).call(this,e)}var te=function e(t){var i=t.variants,n=void 0===i?null:i,r=t.regionData,a=void 0===r?null:r,o=t.onChanged,s=void 0===o?null:o,l=t.shouldShowAvailabilityInfo,c=void 0===l||l,u=t.shouldLimitPickableRegionCount,d=void 0===u||u;L(this,e),this.variants=n,this.regionData=a,this.onChanged=s,this.shouldShowAvailabilityInfo=c,this.shouldLimitPickableRegionCount=d},ie=i("VpOd"),ne=i("9eNC"),re=i("nF4n"),ae=i("wy2R"),oe=i.n(ae),se=i("sEfC"),le=i.n(se),ce=i("9Nv7"),ue="Pack-in",de=i("YBfo"),he=i("SaSb"),pe=i("Op/+"),fe=i("N6Gp"),ge=i("GGNF"),me=i("NhST"),_e=i("Kiz0"),ve=i("D5LZ"),ye=i("x0He");function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ce(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Pe(a,n,r,o,s,"next",e)}function s(e){Pe(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ke(e);if(t){var r=ke(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ee(this,i)}}function Ee(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Re(e,t,"get"))}function Ae(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Re(e,t,"set"),i),i}function Re(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Ne=new WeakMap,De=new WeakMap,xe=new WeakSet,Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(a,e);var t,i,n,r=Se(a);function a(e){var t;return Te(this,a),t=r.call(this),xe.add(Oe(t)),Ne.set(Oe(t),{writable:!0,value:void 0}),De.set(Oe(t),{writable:!0,value:void 0}),t.node=tag("div","favorites-button-mke"),Ae(Oe(t),Ne,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Oe(t),xe,Me).call(Oe(t)),t}return t=a,(i=[{key:"destroy",value:function(){Le(this,De).destroy(),Ae(this,De,null)}}])&&we(t.prototype,i),n&&we(t,n),a}(S.a);function Me(){return Be.apply(this,arguments)}function Be(){return(Be=Ce(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"favorites-button":function(){return i.e(208).then(i.bind(null,"gMDh"))}},t.template='\n            <favorites-button\n                :is-favorite="isFavorite"\n                :is-text="isText"\n                @on-click="emitEvent(\'onClick\', $event)"\n            />\n        ',t.initialData={isFavorite:Le(this,Ne).isFavorite,isText:Le(this,Ne).isText},t.emitEvent=function(e,t){"onClick"===e&&(Le(n,Ne).onClick&&Le(n,Ne).onClick(),Le(n,De).updateData({isFavorite:t}))},Ae(this,De,new ye.a(t)),Le(this,De).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Ve=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Te(this,e),this.isFavorite=t.isFavorite||!1,this.isText=t.isText||!1,this.onClick=t.onClick||void 0};function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ze(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ue(a,n,r,o,s,"next",e)}function s(e){Ue(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ge(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ke(e);if(t){var r=Ke(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ye(this,i)}}function Ye(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?We(e):t}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ze(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Qe(e,t,"get"))}function Xe(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Qe(e,t,"set"),i),i}function Qe(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var $e=new WeakMap,Je=new WeakSet,et=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(a,e);var t,i,n,r=qe(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),Je.add(We(e)),$e.set(We(e),{writable:!0,value:void 0}),e.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(We(e),Je,tt).call(We(e)),e}return t=a,(i=[{key:"destroy",value:function(){Ze(this,$e).destroy(),Xe(this,$e,null)}}])&&Ge(t.prototype,i),n&&Ge(t,n),a}(S.a);function tt(){return it.apply(this,arguments)}function it(){return(it=ze(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"brazil-prices-info-banner":function(){return i.e(151).then(i.bind(null,"zPnD"))}},t.template="<brazil-prices-info-banner/>",Xe(this,$e,new ye.a(t)),Ze(this,$e).append(this.node);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function nt(e){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function at(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){rt(a,n,r,o,s,"next",e)}function s(e){rt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ot(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=dt(e);if(t){var r=dt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ct(this,i)}}function ct(e,t){return!t||"object"!==nt(t)&&"function"!=typeof t?ut(e):t}function ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ft(e,t,"get"))}function pt(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ft(e,t,"set"),i),i}function ft(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var gt=new WeakMap,mt=new WeakSet,_t=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(a,e);var t,i,n,r=lt(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),mt.add(ut(e)),gt.set(ut(e),{writable:!0,value:void 0}),e.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(ut(e),mt,vt).call(ut(e)),e}return t=a,(i=[{key:"destroy",value:function(){ht(this,gt).destroy(),pt(this,gt,null)}}])&&ot(t.prototype,i),n&&ot(t,n),a}(S.a);function vt(){return yt.apply(this,arguments)}function yt(){return(yt=at(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"canada-prices-info-banner":function(){return i.e(155).then(i.bind(null,"GU16"))}},t.template="<canada-prices-info-banner/>",pt(this,gt,new ye.a(t)),ht(this,gt).append(this.node);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ct(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Pt(a,n,r,o,s,"next",e)}function s(e){Pt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Tt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ot(e);if(t){var r=Ot(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return St(this,i)}}function St(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,At(e,t,"get"))}function Lt(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,At(e,t,"set"),i),i}function At(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Rt=new WeakMap,Nt=new WeakSet,Dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(a,e);var t,i,n,r=It(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),Nt.add(Et(e)),Rt.set(Et(e),{writable:!0,value:void 0}),e.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Et(e),Nt,xt).call(Et(e)),e}return t=a,(i=[{key:"destroy",value:function(){kt(this,Rt).destroy(),Lt(this,Rt,null)}}])&&Tt(t.prototype,i),n&&Tt(t,n),a}(S.a);function xt(){return Ft.apply(this,arguments)}function Ft(){return(Ft=Ct(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"australian-prices-info-banner":function(){return i.e(143).then(i.bind(null,"6t1B"))}},t.template="<australian-prices-info-banner/>",Lt(this,Rt,new ye.a(t)),kt(this,Rt).append(this.node);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Mt=i("x722"),Bt=i("Y6pR"),Vt=i("BkRI"),jt=i.n(Vt),Ut=i("A+LN");function zt(e){return(zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ht(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Gt(a,n,r,o,s,"next",e)}function s(e){Gt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Xt(e);if(t){var r=Xt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Kt(this,i)}}function Kt(e,t){return!t||"object"!==zt(t)&&"function"!=typeof t?Zt(e):t}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Jt(e,t,"get"))}function $t(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Jt(e,t,"set"),i),i}function Jt(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var ei=new WeakMap,ti=new WeakMap,ii=new WeakSet,ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(i,e);var t=Wt(i);function i(e){var n;return qt(this,i),n=t.call(this),ii.add(Zt(n)),ei.set(Zt(n),{writable:!0,value:void 0}),ti.set(Zt(n),{writable:!0,value:void 0}),n.node=tag("div"),$t(Zt(n),ti,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Zt(n),ii,ri).call(Zt(n)),n}return i}(S.a);function ri(){return ai.apply(this,arguments)}function ai(){return(ai=Ht(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"bulk-discount-slider":function(){return i.e(154).then(i.bind(null,"uPcM"))}},t.template='\n            <bulk-discount-slider\n                :bulk-discount-tier-list="bulkDiscountTierList"\n                :currency="currency"\n                :current-price="currentPrice"\n                :allow-tax-inclusion="allowTaxInclusion"\n            />\n        ',t.initialData={bulkDiscountTierList:Qt(this,ti).bulkDiscountTierList,currency:Qt(this,ti).currency,currentPrice:Qt(this,ti).currentPrice,allowTaxInclusion:Qt(this,ti).allowTaxInclusion},$t(this,ei,new ye.a(t)),Qt(this,ei).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var oi=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qt(this,e),this.bulkDiscountTierList=t.bulkDiscountTierList||null,this.currency=t.currency,this.currentPrice=t.currentPrice,this.allowTaxInclusion=t.allowTaxInclusion},si=i("97Rx");function li(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var ci=function(){return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(Ut.x)(Ut.t).then((function(e){return e&&PF.Customer.isLogged()})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){li(a,n,r,o,s,"next",e)}function s(e){li(a,n,r,o,s,"throw",e)}o(void 0)}))})();var e};function ui(e){return(ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function hi(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){di(a,n,r,o,s,"next",e)}function s(e){di(a,n,r,o,s,"throw",e)}o(void 0)}))}}function pi(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function fi(e,t){return(fi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=vi(e);if(t){var r=vi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return mi(this,i)}}function mi(e,t){return!t||"object"!==ui(t)&&"function"!=typeof t?_i(e):t}function _i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yi(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Pi(e,t,"get"))}function bi(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Pi(e,t,"set"),i),i}function Pi(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Ci=new WeakMap,Ti=new WeakSet,wi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fi(e,t)}(a,e);var t,i,n,r=gi(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),Ti.add(_i(e)),Ci.set(_i(e),{writable:!0,value:void 0}),e.node=tag("div","sample-order-offer-mke"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(_i(e),Ti,Ii).call(_i(e)),e}return t=a,(i=[{key:"destroy",value:function(){yi(this,Ci).destroy(),bi(this,Ci,null)}}])&&pi(t.prototype,i),n&&pi(t,n),a}(S.a);function Ii(){return Si.apply(this,arguments)}function Si(){return(Si=hi(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"sample-order-offer":function(){return i.e(317).then(i.bind(null,"NFJI"))}},t.template='\n            <sample-order-offer\n                :show-border="false"\n            />\n        ',bi(this,Ci,new ye.a(t)),yi(this,Ci).append(this.node);case 5:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ei(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var Oi,ki,Li=Class({productData:null,variant:null,_sizePicker:null,_regionPicker:null,_techniquePicker:null,_latestOrderNode:null,regionData:null,_colorPicker:null,_variantAvailability:null,_isRegionUnavailable:!1,_isUpdatingPickers:!1,_estimatedDeliveryNode:null,_correspondingProductNode:"",_topOffset:0,sellingRegionSettings:null,_getTechniqueFromMemory:!1,_debounceVisibilityChangesCallback:function(){},_bulkDiscountSlider:null,__construct:function(e,t,i,a,o){var s,l,u,p,f,g=this;this.productData=e,this.regionData=e.regions,this.sellingRegionSettings=null,this.productData.sellingRegionSettings&&(this.sellingRegionSettings=ve.c.fromArray(this.productData.sellingRegionSettings)),this._onVariantChanged=t,this._onTechniqueChanged=i,this._variantAvailability=new h.a(this.productData.variants);var _=null;this.productData.product.fulfillmentDays&&(_=Math.round(10*this.productData.product.fulfillmentDays)/10),this._nodePriceList=new v.a(this.productData.product),this._colorPicker=new d.a(this.productData.variants,this._onColorPicked,this.productData.product.productId,"pf-mb-24"),this._productFeatureNode=this.productData.product.isSterlingSilver?Object(re.b)("div","products-pricing-info__feature-tag pf-h5",[dclang("products","Product feature","Sterling Silver")]):"";var y=this.productData.product.availableTechniques||[];this._regionPicker=new Q(new te({variants:this.productData.variants,regionData:this.productData.getRegionVariants(),onChanged:this._onRegionChanged.bind(this),shouldShowAvailabilityInfo:!this.productData.product.isAdidas(),shouldLimitPickableRegionCount:!y.includes(b.a.TYPE_EMBROIDERY)}));var C,T,w,I,S,E,k=Object(re.b)("div");if(this.node=Object(re.b)("div","pf-ui-body",[this._mobileReferenceNode=Object(re.b)("div","catalog__product__sticky-reference"),this._productFeatureNode,this._fullTitleNode=Object(re.b)("div","pf-mb-8 pf-d-flex pf-flex-column pf-flex-xs-row",[Object(re.b)("h1","pf-h3 pf-my-0 pf-mr-16",[this.productData.product.getFullTitle()])]),this._badgeNode=Object(re.b)("div"),m.a.createPeriodicPriceDiscountAnnouncement(this.productData.product.priceRange,!0,"pf-mb-16 pf-mt-8"),Object(re.b)("div","pf-mb-16",[new r.a.getReviewRatingNode(new n.a(this.productData.product),!1,a,o)]),Object(Mt.a)(this.productData.product.canHaveOnlyLabel()),this.productData.product.isPersonalUseBrand()?Object(re.b)("div","pf-mb-24",[Object(re.b)("strong",null,lang("Availability")+":"),Object(re.b)("p",{className:"pf-text-muted pf-ui-caption",innerHTML:dclang("products","availability","This product can only be ordered for personal use in the US. You can't resell it because of brand restrictions.")})]):"",Object(re.b)("div","pf-mb-8 pf-border-bottom"),this.productData.isFulfilledAtPartnerFacility?Object(re.b)("div","pf-mt-16 pf-mb-24",[Object(re.b)("img",{src:"/static/images/custom-products/cardbox-checkbox.svg",style:{width:"36px",height:"36px"}}),Object(re.b)("span","pf-ml-8",clang("partner facility note","Fulfilled at our partner facility"))]):"",this._getPackinsBadge(),k,this.polyProInfoNode=this.productData.product.isPolyPro?this._getPolyProInfoNode():"",Object(re.b)("div","",[this._colorPicker]),this._nodeSizePicker=Object(re.b)("div","",[this._sizePicker=this._getSizePicker()]),Object(re.b)("div","row pf-bg-lighter no-gutters pf-mb-12",[Object(re.b)("div","col-6 pf-p-12",[Object(re.b)("div","",[Object(re.b)("div","pf-h5 pf-mb-2",[dlang("products","Price"),Object(re.b)("b","products-pricing-info__red",["*"])]),Object(re.b)("div","pf-d-inline-block"),this._originalPriceNode=Object(re.b)("div","pf-mt-16",[this._nodePrice=Object(re.b)("div","pf-mb-sm-16 pf-mb-24 pf-h3")])])]),this._estimatedDeliveryNode=Object(re.b)("div","col-6 pf-p-12"),this._bulkDiscountSlider=Object(re.b)("div","col-md-12 pf-border-top bulk-discount-slider")]),(S=this.productData.product.hasDifferentPriceInBrazil(),E=this.productData.isLocationBrazil||(null===(s=this.sellingRegionSettings)||void 0===s?void 0:s.isBrazil()),S&&E?new et:tag("div")),(w=this.productData.product.hasDifferentPriceInCanada(),I=this.productData.isLocationCanada||(null===(l=this.sellingRegionSettings)||void 0===l?void 0:l.isNorthAmericaOrCanada()),w&&I?new _t:tag("div")),(C=this.productData.product.hasDifferentPriceInAustralia(),T=this.productData.isLocationAustraliaOrNewZealand||(null===(u=this.sellingRegionSettings)||void 0===u?void 0:u.isAustraliaOrNewZealand()),C&&T?new Dt:tag("div")),this._promoNode=Object(re.b)("div"),this._referenceNode=Object(re.b)("div","catalog__product__sticky-reference"),this._originalNode=Object(re.b)("div"),this._nodeWarning=Object(re.b)("div"),ie.a.getPeriodicPriceCountdownFromPriceRange({priceRange:this.productData.product.priceRange,showTopTriangle:!0,customBlockClass:"pf-py-12",containerClass:"pf-mb-16 products-pricing-info__discount-countdown"}),this._buttonNode=Object(re.b)("div","row pf-mb-24 pf-p-12 pf-p-sm-0 catalog__product__buttons catalog__product__sticky-button-hidden",[this._orderButtons=this._getOrderButtons()]),this._stickyBlock=Object(re.b)("div","pf-d-flex catalog__product__sticky-bottom"),null!==_?Object(re.b)("div","catalog__product__shipping-container pf-mb-24",[Object(re.b)("div","pf-text-muted",[Object(re.b)("span",{innerHTML:dclang("products","fulfillment","Ready in")+" ({url})".replace("{url}",Object(re.b)("a",{className:"pf-link",href:langUrl("/faq/shipping-packaging-fulfillment/192-how-long-is-fulfillment-time-"),text:dclang("products","fulfillment","avg fulfillment"),attr:{target:"_blank"}}).outerHTML)+": "}),Object(re.b)("strong","",dnclang("products","fulfillment","{days} business day","{days} business days",Math.floor(_)).replace("{days}",_))])]):"",this._latestOrderNode=Object(re.b)("div"),this._nodePriceList,this._correspondingProductNode=null!==(p=this.productData)&&void 0!==p&&null!==(f=p.correspondingProduct)&&void 0!==f&&f.productImage?this._renderCorrespondingProductNode(this.productData.correspondingProduct):""]),ge.a.isFavoriteProductsEnabled().then((function(e){if(e){var t=new Ve;t.isFavorite=g.productData.isFavorite,t.isText=!1,t.onClick=g.openFavoritesLink;var i=new Fe(t);Object(re.b)("div","pf-d-none pf-d-sm-flex pf-justify-content-center pf-flex-column",[i]).append(g._fullTitleNode)}})),ci().then((function(e){if(e&&!(1e3*(PF.Customer.environmentCreatedAt+86400)<Date.now()||PF.Customer.sampleOrdersLeft<1)&&g.productData.canHaveSampleOrderOffer){var t=new wi;Object(re.b)("div","pf-text-center pf-badge pf-rounded pf-badge-offer pf-badge--primary pf-px-8 pf-mb-8 pf-bold pf-i-14",[dlang("orders","First Order Offer").toUpperCase()]).append(g._badgeNode),Object(re.b)("div","pf-d-none pf-d-sm-flex pf-justify-content-center pf-flex-column",[t]).append(g._promoNode)}})),$("i",this.node).tooltip(),this.productData.activeVariant&&!this.productData.activeVariant.isTemporaryOutOfStock)this._setVariant(this.productData.activeVariant);else{var L=null,A=new O.a;(A.query.color||A.query.size)&&(L=this._findVariant(A.query.color,A.query.size)),L||(L=this._getVariantForPreSelect()),L&&this._setVariant(L)}if(this._setUnavailableSizes(),this._setUnavailableColors(),this._getLatestOrderFrom(),this._onSomethingChanged(!1),this._handleStickyElements(),this._getTechniques().length>1){var R=new P.a;R.techniques=this._getTechniques(),R.hasNewPlacement=this.productData.product.hasNewPlacement,R.activeValue=this.getActiveTechnique(),R.callback=this._onTechniquePicked,R.isPolyPro=this.productData.product.isPolyPro,R.regions=this._regionPicker.getRegion(),R.useStrictRegionCheck=!this.regionData.allowedSellingRegions,R.isRegionalTechniqueOverrideAvailable=this.productData.isRegionalTechniqueOverrideAvailable,this._techniquePicker=new c.a(R),this._techniquePicker.append(k)}ne.q(Li.EVENT_VARIANT_COLOR_CHANGED,this._onVariantPickerVariantChanged),ne.q(Li.EVENT_PRODUCT_TECHNIQUE_CHANGED,this._onTechniquePicked)},_handleStickyElements:function(){this._isMobileWidth()?(this._changeStickyMobileButton(),this._debounceVisibilityChanges(this._mobileReferenceNode,this._changeStickyMobileButton)):(this._attachStickyPriceNode(),this._debounceVisibilityChanges(this._referenceNode,this._attachStickyPriceNode),this._topOffset=62)},_debounceVisibilityChanges:function(e,t){var i=this;this._debounceVisibilityChangesCallback=le()((function(){return i.onVisibilityChange(e,t)()}),50),["DOMContentLoaded","load ","resize","scroll"].forEach((function(e){return window.addEventListener(e,i._debounceVisibilityChangesCallback)})),ne.p(ne.a,this._removeDebounceVisibilityChanges),ne.q(ne.a,this._removeDebounceVisibilityChanges)},_removeDebounceVisibilityChanges:function(){var e=this,t=document.querySelector(".catalog__product__sticky-top");t&&t.remove(),["DOMContentLoaded","load ","resize","scroll"].forEach((function(t){return window.removeEventListener(t,e._debounceVisibilityChangesCallback)}))},_changeStickyMobileButton:function(){var e="catalog__product__sticky-button-hidden";this.isElementAboveOrInViewport(this._mobileReferenceNode)?re.a.removeClassName(this._buttonNode,e):re.a.hasClassName(this._buttonNode,e)||re.a.addClassName(this._buttonNode,e)},_attachStickyPriceNode:function(){var e=this,t="",i="";this._isTopSticky()?this._attachStickyButtonToTop():this._isBottomSticky()?(i=this._buttonNode.className,t=this._nodePrice.className,this._attachStickyButtonToBottom()):re.a.hasClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden")?this._resetStickyButtonToOriginal(t,i):(re.a.addClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden"),setTimeout((function(){e._resetStickyButtonToOriginal(t,i)}),200))},_attachStickyButtonToTop:function(){var e=document.querySelector(".pf-breadcrumbs");re.a.addClassName(e,"pf-d-flex");var t=e.querySelector(".catalog__product__sticky-top");t&&t.remove(),re.a.addClassName(this._buttonNode,"catalog__product__sticky-top"),re.a.removeClassName(this._buttonNode,"pf-mb-24"),re.a.addClassName(this._orderButton,"pf-btn-sm"),re.a.removeClassName(this._orderButton,"pf-btn-lg"),e.appendChild(this._buttonNode)},_attachStickyButtonToBottom:function(){this._buttonNode.className="row pf-my-16 catalog__product__buttons",this._buttonNode.append(this._stickyBlock),this._nodePrice.className="pf-h3 pf-ml-16 pf-mb-sm-16 pf-my-16",this._nodePrice.append(this._stickyBlock),re.a.removeClassName(this._stickyBlock,"catalog__product__sticky-bottom-hidden"),re.a.removeClassName(this._orderButton,"pf-btn-sm"),re.a.addClassName(this._orderButton,"pf-btn-lg")},_resetStickyButtonToOriginal:function(e,t){this._nodePrice.append(this._originalPriceNode),this._buttonNode.append(this._originalNode),this._nodePrice.className=e||this._nodePrice.className,this._buttonNode.className=t||this._buttonNode.className,re.a.removeClassName(this._orderButton,"pf-btn-sm"),re.a.addClassName(this._orderButton,"pf-btn-lg"),re.a.removeClassName(this._buttonNode,"catalog__product__sticky-top"),re.a.addClassName(this._buttonNode,"pf-mb-24"),re.a.removeClassName(this._nodePrice,"pf-ml-16")},_isTopSticky:function(){return this.isElementAboveViewport(this._referenceNode)&&!this._isMobileWidth()},_isBottomSticky:function(){return!this.isElementInViewport(this._referenceNode)&&!this._isMobileWidth()},_isMobileWidth:function(){return window.innerWidth<he.a.SIZES.SM},onVisibilityChange:function(e,t){var i,n=this;return function(){var r=n.isElementInViewport(e);r!==i&&(i=r,"function"==typeof t&&t())}},isElementInViewport:function(e){var t=e.getBoundingClientRect();return t.top>=this._topOffset&&t.bottom<=window.innerHeight},isElementAboveViewport:function(e){return e.getBoundingClientRect().bottom<this._topOffset},isElementAboveOrInViewport:function(e){return e.getBoundingClientRect().bottom<=window.innerHeight},openFavoritesLink:function(){var e=this,t=(new pe.a).categories.getActiveCategoryId(),i=this.productData.product.favoriteCatalogCategoryId;t&&t!==fe.a.ID_FAKE_FAVORITES||(t=i||this.productData.product.mainCatalogCategoryId),Object(ce.a)("favorite-product/update-favorite-product",{productId:this.productId||this.productData.product.productId,catalogCategoryId:t}).then((function(t){t&&(e.productData.isFavorite=!e.productData.isFavorite,e.productData.product.isFavorite=e.productData.isFavorite,(new I.a).cacheProduct(e.productData.product))}))},openPriceList:function(){this._nodePriceList._showModal("bulk")},getColorPicker:function(){return this._colorPicker},_setVariant:function(e){this._sizePicker.setVariant(e),this._colorPicker.setVariant(e)},_getVariantForPreSelect:function(){var e,t=this.productData.variants.filter((function(e){return!e.isTemporaryOutOfStock})),i=f.fetchSizesFromVariants(t),n=-1!==i.indexOf("M")?"M":i.sort(g.a.sizeSortingCallback)[0];return null!==(e=t[t.length-1])&&void 0!==e&&e.color?this._findVariant(t[t.length-1].color,n):this._findVariant(!1,n)},_findVariant:function(e,t){var i=null,n=this._regionPicker.getMatchingVariants();for(var r in n){var a=n[r],o=!t||a.size===t,s=!e||a.color===e;if(o&&s&&!a.isTemporaryOutOfStock){i=a;break}}return i},_getTechniques:function(){return this.productData.product.hasMultipleTechniques()?this.productData.product.availableTechniques.map((function(e){return{type:e,label:b.a.LABELS[e]}})):[]},getActiveTechnique:function(){var e=this.productData.product,t=e.availableTechniques?e.availableTechniques:[];if(!this._getTechniqueFromMemory){var i,n=new O.a;if(t.includes(null===(i=n.query)||void 0===i?void 0:i.technique))return n.query.technique}var r=Object(p.a)(e.productId).getTechniqueFromMemory();return r&&t.indexOf(r)>-1?r:t.length?t.slice().shift():e.type},_onTechniquePicked:function(e){new p.a(this.productData.product.productId).rememberLastUsedTechnique(e),this._getTechniqueFromMemory=!0,this._onSomethingChanged(),this._onTechniqueChanged&&this._onTechniqueChanged(e)},_getSizePicker:function(){return new u.a(this.productData.variants,this._onSizeChanged,"pf-mb-24")},_getOrderButtons:function(){var e=this.productData.product.isStockProduct()?lang("Get yours"):lang("Start designing"),t=this.productData.product.isTemporaryOutOfStock?" disabled":"";return[Object(re.b)("div","col-12",[this._orderButton=Object(re.b)("a",{className:"pf-btn pf-btn-primary pf-btn-lg pf-btn-block pf-px-0"+t,attr:{dusk:"products-pricing-order-button"},onclick:function(){if(beginOrderTracking("catalog"),PF.Customer.isLogged()&&!PF.Customer.isB2cStarter())return this.orderProduct.call(this),!0;this._onProductChosen()}.bind(this)},[e])])]},_onProductChosen:function(){ne.o(l.a.EVENT_OPEN_DESIGNER,{productData:this.productData,variant:this.variant,node:this._orderButton})},_getLatestOrderFrom:function(){var e=this;Object(ce.a)("product-catalog/get-latest-order",{productId:this.productData.product.productId}).then((function(t){return e._getLatestOrdersFromRe(t)}))},getEstimate:(Oi=regeneratorRuntime.mark((function e(t,i,n){var r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ut.x)(Ut.u);case 2:if((r=e.sent)||!this._renderEstimateRegionDisclaimer()){e.next=5;break}return e.abrupt("return");case 5:if(this._colorPicker.hasAvailableColorsInSellingRegion()||this._sizePicker.hasAvailableSizesInSellingRegion()){e.next=8;break}return this._renderSellingRegionDisclaimer(r),e.abrupt("return",!0);case 8:Object(ce.a)("estimated-delivery-time/get",{variant:t,technique:i,region:n}).then((function(e){return a._renderEstimate(e)}));case 9:case"end":return e.stop()}}),e,this)})),ki=function(){var e=this,t=arguments;return new Promise((function(i,n){var r=Oi.apply(e,t);function a(e){Ei(r,i,n,a,o,"next",e)}function o(e){Ei(r,i,n,a,o,"throw",e)}a(void 0)}))},function(e,t,i){return ki.apply(this,arguments)}),_getDateRangeEstimateNode:function(e){var t=oe()(e.from),i=oe()(e.to),n=new me.a,r=n.format(t,i,!0),a=t.isSame(i)?"{from}":clang("estimate delivery","{from}{rangeSymbol}{to}"),o=n.shortMonthDay;return Object(re.b)("span",null,a.replace("{from}",t.format(o)).replace("{rangeSymbol}",n.symbolRange).replace("{to}",i.format(r)))},_getDayRangeEstimateNode:function(e){var t=e.fromDays===e.toDays?e.fromDays:"".concat(e.fromDays).concat((new me.a).symbolRange).concat(e.toDays);return Object(re.b)("span",null,[dclang("products",'day or days range, e.g. "2-6 days"',"{daysFromTo} days").replace("{daysFromTo}",t)])},_renderEstimate:function(e){if(re.a.clearNode(this._estimatedDeliveryNode),e.success&&e.country&&e.estimate){re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left");var t,i=e.estimate,n=dlang("products","Delivery times are approximate and may vary. {linkStart}Learn more{linkEnd}"),r=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter();r&&(n=dlang("products","Estimated delivery is calculated in business days. Delivery times are approximate and may vary. {linkStart}Learn more{linkEnd}.")),n=n.replace("{linkStart}",'<a class="pf-link-white js-open-shipping-tab" href="javascript:">').replace("{linkEnd}","</a>");var a=[Object(re.b)("div","pf-h5 pf-mb-2",dlang("products","Estimated delivery to")),Object(re.b)("div","catalog__product__estimated-delivery-container",[Object(re.b)("span","pf-ui-body",[Object(re.b)("span",{className:"flag pf-mr-4",style:{backgroundImage:"url(".concat(e.country.flag,")")}}),Object(re.b)("span","",e.country.name)])])];C.a.isJp()&&(a=a.reverse()),Object(re.b)("div",null,[Object(re.b)("div",null,a),Object(re.b)("div","pf-h3 pf-mt-16 pf-mb-2",[r?this._getDayRangeEstimateNode(i):this._getDateRangeEstimateNode(i),t=Object(re.b)("span",{className:"pf-i pf-i-information pf-pointer pf-i-18 pf-text-gray pf-ml-8 pf-mb-4",attr:{title:n,"data-toggle":"tooltip"}})]),null!=i&&i.price?Object(re.b)("span","pf-text-muted","".concat(lang("Shipping"),": ").concat(si.a.getDisplayAmount(i.price.base_price))):""]).append(this._estimatedDeliveryNode),$(t).tooltip({html:!0,delay:{hide:2e3}}).on("shown.bs.tooltip",(function(){document.querySelector(".js-open-shipping-tab").addEventListener("click",(function(){$("html, body").animate({scrollTop:$(".catalog__product__tabs").offset().top},1e3),setTimeout((function(){$(".catalog__product__tabs li#tab-shipping a").click().focus()}),1e3)}))}))}},_renderSellingRegionDisclaimer:function(e){var t=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()?dlang("products","Adjust your {linkBegin}default selling preferences{linkEnd} to select this product"):dlang("products","Adjust your {linkBegin}default catalog and delivery preferences{linkEnd} to select this product");t=t.replace("{linkBegin}",'<a id="dsr-disclaimer" class="pf-link pf-pointer" onclick="">').replace("{linkEnd}","</a>"),re.a.clearNode(this._estimatedDeliveryNode),re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left"),Object(re.b)("div",null,[Object(re.b)("span","pf-text-bold",[Object(re.b)("strong",null,e?dlang("products","Product unavailable"):dlang("products","This product is unavailable in your region"))]),Object(re.b)("p",{innerHTML:t,className:"pf-text-muted"})]).append(this._estimatedDeliveryNode),document.querySelector("#dsr-disclaimer").addEventListener("click",(function(){Object(_e.b)()}))},_renderEstimateRegionDisclaimer:function(){var e;if(this.sellingRegionSettings&&this._isRegionUnavailable)return this._renderSellingRegionDisclaimer(!1),!0;if(!1===(null===(e=this.sellingRegionSettings)||void 0===e?void 0:e.isSingleCountry())){re.a.clearNode(this._estimatedDeliveryNode),re.a.addClassName(this._estimatedDeliveryNode,"pf-border-left");var t=lang("When selling worldwide, delivery time is based on your end-customer's location and the selected product. See delivery times {linkStart}here{linkEnd}.");this.sellingRegionSettings.isWorldwide()||(t=lang("When selling in {region}, delivery time is based on your end-customer's location and the selected product. See delivery times {linkStart}here{linkEnd}."));var i=langUrl("/shipping"),n=t.replace("{linkStart}",'<a class="pf-link" href="'.concat(i,'">')).replace("{linkEnd}","</a>").replace("{region}",this.sellingRegionSettings.getName());return Object(re.b)("p",{innerHTML:n,className:"pf-ui-body"}).append(this._estimatedDeliveryNode),!0}return!1},_getLatestOrdersFromRe:function(e){if(e&&e.length>0){var t=new s.a(e,!1,"col-12");re.a.clearNode(this._latestOrderNode),Object(re.b)("div","product-item__latest-order",[Object(re.b)("span","pf-mr-12",lang("Latest orders from:")+" "),t]).append(this._latestOrderNode)}},_getPriceElementData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",i=this.productData.product.priceRange.getAdjustmentPrice(),n=this.productData.product.shouldShowTaxInclusion();if(this.variant)if(this.productData.product.useNewPricing){var r=new Bt.b(this.productData.product,new Bt.c),a=jt()(this.variant.priceData),o=r.getTotal(this.variant),s=r.getTotal(this.variant,!0);a.price=o,a.originalPrice=o,a.discountedPrice=s,t=m.a.createDiscountElementFromPriceData({priceData:a,basePriceAdjustment:0,showTaxInclusion:n,returnRaw:e})}else t=m.a.createDiscountElementFromPriceData({priceData:this.variant.priceData,basePriceAdjustment:i,showTaxInclusion:n,returnRaw:e});else t=m.a.createDiscountElementFromPriceRange(this.productData.product.priceRange,i,n,e);return t},_renderPriceNode:function(){var e=this._getPriceElementData();re.a.clearNode(this._nodePrice),e.append(this._nodePrice),this.productData.product.hasFreeShipping&&Object(re.b)("span","product-item__detail__free-shipping",dclang("products","badge"," + free shipping")).append(this._nodePrice)},_updateShippingInfo:function(){var e=this;Object(ce.a)("product-catalog/get-shipping-info",{region:this._regionPicker.getRegion(),productId:this.productData.product.productId}).then((function(t){return e._updateShippingInfoRe(t)}))},_updateShippingInfoRe:function(e){re.a.clearNode(this._nodeShippingInfo),Object(re.b)("div",{innerHTML:e}).append(this._nodeShippingInfo)},updatePickers:function(e){re.a.clearNode(this._nodeSizePicker),this._sizePicker=this._getSizePicker(),this._sizePicker.append(this._nodeSizePicker),this._isUpdatingPickers=!0,this._setUnavailableSizes(),this._setUnavailableColors(),y.a.pushProductDataLayer(this.variant,e)},orderProduct:function(){var e,t=new a.a;t.productId=this.productData.product.productId,t.productColor=this.getSelectedColorName(),t.productTechnique=this.getActiveTechnique(),t.productRegion=this.getSelectedRegion(),t.allowStoresWithAvailableProductId=this.productData.product.productId,t.allowStoresWithAvailableVariantId=(null===(e=this.variant)||void 0===e?void 0:e.variantId)||null,this._sizePicker?t.productSize=this._sizePicker.getSize():1===this.productData.product.sizes.length&&(t.productSize=this.productData.product.sizes[0]),new o.a(t);for(var i=[this.productData.product.brand,this.productData.product.model],n="",r=0;r<i.length;r++)null!==i[r]&&(n+=i[r]+" ");(n=n.slice(0,-1))||(n=this.productData.product.title),ga("send","event","Button Clicks","Order Product Button",n)},getSelectedColorName:function(){return!!this._colorPicker&&this._colorPicker.getColor()},getSelectedRegion:function(){return!!this._regionPicker&&this._regionPicker.getRegion()},getSelectedSize:function(){return!!this._sizePicker&&this._sizePicker.getSize()},getSelectedRegionDisabledValues:function(e){return this._colorPicker.setSelectedRegionDisabledValues(this._regionPicker.getMatchingVariants(),this.productData.variants,e,this.regionData),this._colorPicker.getValueCount()>0?this._colorPicker.getSelectedRegionDisabledValues(e):[]},_onRegionChanged:function(){this._colorPicker&&this._regionPicker&&(this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(this._regionPicker.getRegion()),this._colorPicker.getValueCount()>0&&this._colorPicker.setVariantsAndDisabledRegionColors(this._regionPicker.getMatchingVariants(),this.productData.variants,this.regionData),(new I.a).setActiveStockedInRegion(this._regionPicker.getRegion(),this.variant.productId),this._onSomethingChanged())},_onColorPicked:function(){this._onSomethingChanged(!0,!0,!0)},_onSizeChanged:function(){this._onSomethingChanged()},_onVariantPickerVariantChanged:function(e){var t=e.color,i=e.size,n=this._findVariant(t,i);n&&(this._setVariant(n),this._onColorPicked())},_setUnavailableSizes:function(){var e=this.getSelectedColorName(),t=this._regionPicker.getMatchingVariants().filter((function(t){return!e||e===t.color})),i=this.productData.variants.filter((function(t){return!e||e===t.color}));if(this._sizePicker||e||0===this._colorPicker.getValueCount()){var n=this._variantAvailability.getUnavailableSizes(e||"",this._sizePicker.getSizes()),r=this._variantAvailability.getNonExistentSizes(e||"",this._sizePicker.getSizes());this._sizePicker.setSelectedRegionDisabledValues(t,i,"size",this.regionData);var a=this._sizePicker.getSelectedRegionDisabledValues("size");this._dsrSettingsApplied()?this._sizePicker.setSellingRegionLimitedSizes(a):this._sizePicker.setInactiveSizes(a),this._sizePicker.setUnavailableSizes(n),this._sizePicker.setHiddenSizes(r.concat(this._variantAvailability.getDiscontinuedSizes(e)))}},_setUnavailableColors:function(){var e=this._sizePicker.getValueCount()>0&&this._sizePicker.getSize(),t=this._regionPicker.getMatchingVariants().filter((function(t){return!e||e===t.size})),i=this.productData.variants.filter((function(t){return!e||e===t.size}));if((0!==this._sizePicker.getValueCount()&&this._sizePicker.hasAtLeastOneValue()||this.productData.product.type===b.a.TYPE_EMBROIDERY)&&this._colorPicker.hasAtLeastOneValue()){this._colorPicker.setSelectedRegionDisabledValues(t,i,"color",this.regionData);var n=this._colorPicker.getSelectedRegionDisabledValues("color"),r=this._variantAvailability.getDiscontinuedColors(e||"").concat(this._variantAvailability.getNonExistentColors(e,this._colorPicker.getAllColors()));this._colorPicker.setUnavailableColors(this._variantAvailability.getUnAvailableColors(e||"")),this._colorPicker.setDiscontinuedColors(r),this._dsrSettingsApplied()?this._colorPicker.setSellingRegionLimitedColors(n):this._colorPicker.setDisabledRegionColors(n),this._colorPicker.render()}},_onSomethingChanged:function(e,t,i){var n=this;this.variant=this._regionPicker.getMatchingVariants().filter(this._filterVariant.bind(this,this.getSelectedColorName(),this.getSelectedSize())).shift(),this._isRegionUnavailable=!1,this.variant||(this.variant=this._regionPicker.getAllVariants().filter(this._filterVariant.bind(this,this.getSelectedColorName(),this.getSelectedSize())).shift(),this._isRegionUnavailable=!0),this._toggleOrderAvailability(),this._renderPriceNode(),Li.isVariantChanged=!this._isUpdatingPickers,this._isUpdatingPickers=!1,this._shouldDispatchEvent(e)&&_.a.createAndDispatch(de.a.EVENT_VARIANT_CHANGED,{productTechnique:this.getActiveTechnique(),productColor:this.getSelectedColorName(),productSize:this.getSelectedSize(),activeProductId:this.productData.product.productId}),this._shouldCallback(t)&&this._onVariantChanged(this.variant,i),this._nodePriceList.variantChanged(this.variant,this.getActiveTechnique()),this.polyProInfoNode&&(this.polyProInfoNode.classList.add("hidden"),this.getActiveTechnique()===b.a.TYPE_T_SHIRT&&this.polyProInfoNode.classList.remove("hidden")),this._nodePriceList.variantChanged(this.variant,this.getActiveTechnique()),this.variant&&setTimeout((function(){n.getEstimate(n.variant.variantId,n.getActiveTechnique(),n.getSelectedRegion())}),1),this._renderBulkDiscountSlider()},_filterColor:function(e,t){return t===e},_mapInactiveColorDisabledSizes:function(e,t){return t.color===e&&t.size},_filterVariant:function(e,t,i){return(!e||i.color===e)&&(!t||i.size===t)},_hasValidVariant:function(){return this.variant&&!this.variant.isDisabledInPush&&this.variant.hasStock},_toggleOrderAvailability:function(){this._isOrderAvailable=this._isOrderingAvailable(),this._enableOrderButton(this._isOrderAvailable)},_isOrderingAvailable:function(){var e,t;return!(!this.variant||this._isRegionUnavailable||this.productData.product.isTemporaryOutOfStock||null!==(e=this.variant)&&void 0!==e&&e.isTemporaryOutOfStock||null!==(t=this.variant)&&void 0!==t&&t.isDisabledInPush&&!this.variant.hasStock)},_enableOrderButton:function(e){this._addOrRemoveClass("disabled",e,this._orderButton)},_shouldCallback:function(e){return!(void 0!==e&&!e)&&(this._onVariantChanged&&this.variant)},_shouldDispatchEvent:function(e){return!(void 0!==e&&!e)&&(this._isOrderAvailable&&(this.getSelectedColorName()||this.getSelectedSize()))},_addOrRemoveClass:function(e,t,i){re.a[t?"removeClassName":"addClassName"](i,e)},_getPackinsBadge:function(){var e=this.productData.warehouseItemTypes.find((function(e){return e.name===ue})),t=langUrl("/branded-packaging-inserts"),i=dlang("products","{linkStart}Pack-ins{linkEnd} are promotional materials that can be added to your customersâ orders").replace("{linkStart}",'<a href="'.concat(t,'" target="_blank">')).replace("{linkEnd}","</a>"),n="",r=e?Object(re.b)("div","pf-mt-16 pf-mb-16 pf-d-flex pf-align-items-center",[Object(re.b)("img",{src:"/static/images/custom-products/warehouse-packins.svg",style:{width:"36px",height:"36px"}}),Object(re.b)("span","pf-ml-8",[dlang("products","Can be stored in warehouse and used as a pack-in"),n=Object(re.b)("span",{className:"pf-i pf-i-information pf-pointer pf-i-18 pf-text-gray pf-ml-8 pf-mb-4",attr:{title:i,"data-toggle":"tooltip","data-html":!0}})])]):"";return!PFUtilsIsTouch()&&n&&$(n).tooltip({delay:{hide:2e3}}),r},_getPolyProInfoNode:function(){return Object(re.b)("div","pf-mb-24 row no-gutters",[Object(re.b)("div","col-12",[this._getTechniques().length>1?"":Object(re.b)("div","row pf-my-8",[Object(re.b)("div","col-6",[Object(re.b)("p","pf-h5 pf-my-0",[dlang("products","Technique"),Object(re.b)("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary pf-text-white",[lang("New")])])])]),Object(re.b)("div","pf-d-flex",[Object(re.b)("div","poly-pro pf-mr-8",[Object(re.b)("img",{className:"poly-pro__icon",src:"/static/images/products-catalog/poly-pro.svg"})]),Object(re.b)("div","pf-py-4 pf-pl-8",[Object(re.b)("p",{className:"pf-my-0",innerHTML:dlang("products","Printed with the innovative NeoPoly tech that offers the <b>highest possible print quality</b> on polyester")})])])])])},_dsrSettingsApplied:function(){return!!this.regionData.allowedSellingRegions},_renderBulkDiscountSlider:function(){var e=this._getPriceElementData(!0),t=new oi,i=this.productData.product.priceRange.bulkDiscountTiers;i&&(re.a.clearNode(this._bulkDiscountSlider),t.bulkDiscountTierList=i,t.currency=e.currency,t.currentPrice=e.originalPrice?e.originalPrice:e.currentPrice,t.allowTaxInclusion=e.allowTaxInclusion,new ni(t).append(this._bulkDiscountSlider))},_renderCorrespondingProductNode:function(e){var t=Object.keys(e.fulfillmentCountries).includes(T.a.REGION_EUROPE);return Object(re.b)("div","",[Object(re.b)("hr","pf-mt-24 pf-mb-16"),Object(re.b)("div",{id:"corresponding-product"},[Object(re.b)("p","pf-h5 pf-mb-8",e.title),Object(re.b)("div",{className:"pf-border pf-rounded pf-hover-shadow pf-mb-16 catalog__product__corresponding-product",style:{overflow:"hidden"}},[Object(re.b)("a",{className:"pf-link-none pf-text-dark",href:e.productUrl},[Object(re.b)("div","row pf-align-items-sm-center",[Object(re.b)("div","col-auto col-md-3",[Object(re.b)("img",{src:e.productImage})]),Object(re.b)("div","col col-xs-8 col-md-9",[Object(re.b)("div","pf-pr-12",[Object(re.b)("p","pf-ui-body pf-mb-8",e.productTitle),Object(re.b)("div","pf-d-flex",[m.a.createDiscountElementFromPriceRange(e.priceRange,0,t)])])])])])])])])}},re.a.Base);Li.isVariantChanged=!1,Li.EVENT_VARIANT_COLOR_CHANGED="variantColorChanged",Li.EVENT_PRODUCT_TECHNIQUE_CHANGED="productTechniqueChanged",window&&((globalThis||{}).PFProductsCatalogProductInfo=Li)},"5qBa":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("qs6/"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).priceData=null,o.prototype.uniqueId="",o.prototype.thumbUrl="",o.prototype.productName="",o.prototype.quantity=0,o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),e.priceData&&(t.priceData=n.a.fromArray(e.priceData)),t},o.fromOrderLineItem=function(e){var t=new o;return t.uniqueId=e.uniqueId,t.priceData=e.priceData,t.quantity=e.quantity,t.thumbUrl=e.getImageUrl(),t.productName=e.displayName,t},window&&((globalThis||{}).PFItemsCartOrderItem=o);var s=function(){};s.prototype=new r.a,s.prototype.items=null,s.prototype.totalProductCount=null,s.prototype.isShippingAvailable=!1,s.prototype.estimatedShippingCosts=null,s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),t.items=[],e.orderItems.map((function(e){t.items.push(o.fromArray(e))})),t},s.fromOrderItem=function(e){var t=new s;return t.items=[],e.items.map((function(e){t.items.push(o.fromOrderLineItem(e))})),t},window&&((globalThis||{}).PFItemsCartItem=s)},"5sNq":function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("Ii6r"),r=i("FxE2"),a=i("Vx67"),o=i("+4EM"),s=(i("X5Ic"),i("tw/D")),l=i("nF4n"),c=function(){this.colors=[],this.sizes=[],this.availablePlacements=[],this.generatorVariants={},this.variantMapping=[],this.calculatedPositions=[],this.conflictingTypes={},this.availableOrientations=[],this.orientation=[],this.regions={},this.preselectedData={},this.pushableVideos=[]};c.prototype.pushableVideos=null,c.prototype.colors=null,c.prototype.sizes=null,c.prototype.translatedSizes=null,c.prototype.variantLimit=null,c.prototype.requiredDPI=null,c.prototype.designData=null,c.prototype.availablePlacements=null,c.prototype.variantMapping=null,c.prototype.generatorVariants=null,c.prototype.calculatedPositions=null,c.prototype.conflictingTypes=null,c.prototype.placementsWithOnlyBackgroundColor=null,c.prototype.regions=null,c.prototype.availableOrientations=null,c.prototype.isCustomizerEnabled=!1,c.prototype.orientation="",c.prototype.availableTechniques=null,c.prototype.hasNewPlacement=null,c.prototype.allLabelTypesAvailable=!1,c.prototype.forceTemplateType="",c.prototype.preselectedData={},c.prototype.isAdditionalMockupPushEnabled=!1,c.prototype.areQuickDesignsAvailable=!1,c.prototype.getGeneratorVariant=function(e){for(var t in this.generatorVariants)if(this.generatorVariants[t].generatorVariantId==e)return this.generatorVariants[t];PF.DEV&&console.log("Generator variant not found: "+e)},c.prototype.getGeneratorVariantsArray=function(){return Object.values(this.generatorVariants||{})},c.prototype.layerMatchesAdvancedTemplate=function(e,t){return this.variantMapping.some((function(i){return!(!i.advancedTemplateSize||!i.advancedTemplateSize.hasOwnProperty(e))&&t.matchesAdvancedTemplate(i.advancedTemplateSize[e])}))},c.duplicateFrom=function(e){var t=new c;l.a.O2O(t,e);var i=function(e){return JSON.parse(JSON.stringify(e))};if(t.placementOptions&&(t.placementOptions=s.a.duplicateFrom(t.placementOptions)),t.colors&&(t.colors=t.colors.map((function(e){return o.a.fromArray(e)}))),t.regions&&(t.regions=i(t.regions)),t.preselectedData&&(t.preselectedData=i(t.preselectedData)),t.availablePlacements&&(t.availablePlacements=t.availablePlacements.map((function(e){return n.a.fromArray(e)}))),t.variantMapping&&(t.variantMapping=t.variantMapping.map((function(e){return r.a.fromArray(e)}))),t.generatorVariants){var u={};Object.keys(t.generatorVariants).forEach((function(e){var i=t.generatorVariants[e];i=a.a.fromArray(i),u[e]=i})),t.generatorVariants=u}if(t.conflictingTypes){var d={};Object.keys(t.conflictingTypes).forEach((function(e){var i=t.conflictingTypes[e];d[e]={placementId:i.placementId,conflictsWith:i.conflictsWith.map((function(e){return n.a.fromArray(e)}))}})),t.conflictingTypes=d}return["sizes","availableOrientations","availableTechniques"].forEach((function(e){t[e]&&t[e].length&&(t[e]=t[e].slice())})),t},c.ORIENTATION_VERTICAL="vertical",c.ORIENTATION_HORIZONTAL="horizontal",c.TEMPLATE_TYPE_SIMPLE="simple",c.TEMPLATE_TYPE_ADVANCED="advanced",(globalThis||{}).PFRepositoriesGeneratorRepositoryGeneratorParameters=c},"6B/H":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({id:0,name:"",type:"",mainHeader:"",pageTitle:"",metaDescription:"",position:0,active:!1});r.fromArray=function(e){var t=new r;return n.a.O2O(t,e),t},window&&((globalThis||{}).PFProductsCatalogItemsCategoryTabItem=r)},"7+jv":function(e,t,i){"use strict";i.d(t,"d",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return f}));var n=i("xyjD"),r=i("VxIk"),a=i("TKTR"),o=i("96ed"),s=i("LvDl"),l=i.n(s);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var u=function(e){return e.map((function(e){return new a.a(e)}))},d=function(){try{var e=g();return e?u(JSON.parse(e)):null}catch(e){return null}},h=function(e,t){o.a.subscribe(e.pusherKey,"onSuccess",m.bind(null,e,t))},p=function(e){var t=g();if(t){var i=JSON.parse(t).filter((function(t){return t.id!==e}));Object(n.i)(r.b,i)}},f=function(e,t){if(!(e.designData.length===t.designData.length))return!1;var i=function(i){var n,r,a,o,s,c,u,d,h,p,f,g=Object.assign({},e.designData[i]),m=Object.assign({},t.designData[i]);(delete g.uniqueId,delete m.uniqueId,delete g.url,delete m.url,delete g.designFillUrls,delete m.designFillUrls,g.designFillItem=null===(n=g.designFillItem)||void 0===n?void 0:n.id,m.designFillItem=null===(r=m.designFillItem)||void 0===r?void 0:r.id,g.originalWidth=parseFloat(null===(a=g.originalWidth)||void 0===a?void 0:a.toFixed(4)),g.position)&&(g.position.height=parseFloat(null===(o=g.position.height)||void 0===o?void 0:o.toFixed(4)),g.position.width=parseFloat(null===(s=g.position.width)||void 0===s?void 0:s.toFixed(4)),g.position.top=parseFloat(null===(c=g.position.top)||void 0===c?void 0:c.toFixed(4)),g.position.left=parseFloat(null===(u=g.position.left)||void 0===u?void 0:u.toFixed(4)));m.position&&(m.position.height=parseFloat(null===(d=m.position.height)||void 0===d?void 0:d.toFixed(4)),m.position.width=parseFloat(null===(h=m.position.width)||void 0===h?void 0:h.toFixed(4)),m.position.top=parseFloat(null===(p=m.position.top)||void 0===p?void 0:p.toFixed(4)),m.position.left=parseFloat(null===(f=m.position.left)||void 0===f?void 0:f.toFixed(4)));if(Object.keys(g).forEach((function(e){return!g[e]&&delete g[e]})),Object.keys(m).forEach((function(e){return!m[e]&&delete m[e]})),!l.a.isEqual(l.a.sortBy(g),l.a.sortBy(m)))return{v:!1}};for(var n in e.designData){var r=i(n);if("object"===c(r))return r.v}return!0},g=function(){return window.localStorage.getItem(Object(n.d)(r.b))},m=function(e,t,i){var a=i.urlThumb;t(a),function(e,t){var i=g();if(i){var a=JSON.parse(i),o=Object.assign({},e);o.image.urlThumb=t,delete o.pusherKey,a.push(o),Object(n.i)(r.b,a)}}(e,a),_(e,t)},_=function(e,t){o.a.unbind(e.pusherKey,"onSuccess",m.bind(null,e,t))}},"7OPZ":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"J",(function(){return r})),i.d(t,"P",(function(){return a})),i.d(t,"R",(function(){return o})),i.d(t,"X",(function(){return s})),i.d(t,"U",(function(){return l})),i.d(t,"mb",(function(){return c})),i.d(t,"cb",(function(){return u})),i.d(t,"T",(function(){return d})),i.d(t,"V",(function(){return h})),i.d(t,"bb",(function(){return p})),i.d(t,"Q",(function(){return f})),i.d(t,"S",(function(){return g})),i.d(t,"Z",(function(){return m})),i.d(t,"lb",(function(){return _})),i.d(t,"ib",(function(){return v})),i.d(t,"db",(function(){return y})),i.d(t,"eb",(function(){return b})),i.d(t,"gb",(function(){return P})),i.d(t,"fb",(function(){return C})),i.d(t,"ab",(function(){return T})),i.d(t,"hb",(function(){return w})),i.d(t,"W",(function(){return I})),i.d(t,"Y",(function(){return S})),i.d(t,"jb",(function(){return E})),i.d(t,"kb",(function(){return O})),i.d(t,"D",(function(){return k})),i.d(t,"E",(function(){return L})),i.d(t,"M",(function(){return A})),i.d(t,"d",(function(){return R})),i.d(t,"e",(function(){return N})),i.d(t,"f",(function(){return D})),i.d(t,"K",(function(){return x})),i.d(t,"L",(function(){return F})),i.d(t,"c",(function(){return M})),i.d(t,"ob",(function(){return B})),i.d(t,"pb",(function(){return V})),i.d(t,"G",(function(){return j})),i.d(t,"H",(function(){return U})),i.d(t,"nb",(function(){return z})),i.d(t,"C",(function(){return G})),i.d(t,"N",(function(){return H})),i.d(t,"O",(function(){return q})),i.d(t,"F",(function(){return Y})),i.d(t,"I",(function(){return W})),i.d(t,"g",(function(){return K})),i.d(t,"h",(function(){return Z})),i.d(t,"l",(function(){return X})),i.d(t,"j",(function(){return Q})),i.d(t,"B",(function(){return $})),i.d(t,"r",(function(){return J})),i.d(t,"i",(function(){return ee})),i.d(t,"p",(function(){return te})),i.d(t,"x",(function(){return ie})),i.d(t,"y",(function(){return ne})),i.d(t,"s",(function(){return re})),i.d(t,"t",(function(){return ae})),i.d(t,"v",(function(){return oe})),i.d(t,"u",(function(){return se})),i.d(t,"q",(function(){return le})),i.d(t,"w",(function(){return ce})),i.d(t,"A",(function(){return ue})),i.d(t,"k",(function(){return de})),i.d(t,"z",(function(){return he})),i.d(t,"b",(function(){return pe})),i.d(t,"m",(function(){return fe})),i.d(t,"n",(function(){return ge})),i.d(t,"o",(function(){return me}));var n="fileLibrary",r="mutation/resetState",a="mutation/setCurrentDirectory",o="mutation/setDirectories",s="mutation/setFiles",l="mutation/setEditDirectory",c="mutation/setShowMore",u="mutation/setModal",d="mutation/setDirectoryLimit",h="mutation/setError",p="mutation/setMessage",f="mutation/setCurrentDirectoryOverrides",g="mutation/setDirectoriesOverrides",m="mutation/setIsSearch",_="mutation/setSearchQuery",v="mutation/setNavigationTotalFilesCount",y="mutation/setNavigationCurrentPage",b="mutation/setNavigationPageItemsLimit",P="mutation/setNavigationPageSwitchCallback",C="mutation/setNavigationPageItemsSort",T="mutation/setItemToMove",w="mutation/setNavigationShouldUseRouter",I="mutation/setFileSelectionData",S="mutation/setFlowData",E="mutation/setRecentlyUsedFiles",O="mutation/setRpcInProgress",k="action/loadDirectory",L="action/loadDirectoryFiles",A="action/searchFiles",R="action/deleteDirectory",N="action/deleteFile",D="action/editDirector",x="action/saveDirectory",F="action/saveEditDirectory",M="action/cancelEditDirectory",B="action/updateEditDirectoryAvatar",V="action/updateShowMore",j="action/moveDirectory",U="action/moveFile",z="action/showModal",G="action/hideModal",H="action/selectAllItems",q="action/selectSingleItem",Y="action/loadRecentlyUsedFiles",W="action/refreshDirectoriesAndFiles",K="getter/getCurrentDirectory",Z="getter/getDirectories",X="getter/getFiles",Q="getter/getEditDirectory",$="getter/getShowMore",J="getter/getModal",ee="getter/getDirectoryLimit",te="getter/getIsSearch",ie="getter/getNavigationTotalFilesCount",ne="getter/getNavigationTotalPagesCount",re="getter/getNavigationCurrentPage",ae="getter/getNavigationPageItemsLimit",oe="getter/getNavigationPageSwitchCallback",se="getter/getNavigationPageItemsSort",le="getter/getItemToMove",ce="getter/getNavigationShouldUseRouter",ue="getter/getSelectedFiles",de="getter/getFileSelectionData",he="getter/getRecentlyUsedFiles",pe="getter/breadcrumbs",fe="getter/getIsAnonymousFlow",ge="getter/getIsGeneratorFlow",me="getter/getIsLibraryFlow"},"7XA3":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({__construct:function(){this.node=tag("span",{className:"pf-d-inline-block pf-text-white pf-bg-cyan pf-ui-legal pf-bold pf-px-4 pf-mb-4",title:lang("Let your customers create personalized versions of your design in real-time on your store")},[lang("For personalization")])},show:function(){n.a.removeClassName(this.node,"pf-d-none"),n.a.addClassName(this.node,"pf-d-inline-block")},hide:function(){n.a.removeClassName(this.node,"pf-d-inline-block"),n.a.addClassName(this.node,"pf-d-none")}},n.a.Base);window&&((globalThis||{}).PFProductPushCustomizableLabel=r)},"7h5t":function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("pWIn"),r=i("n6mh"),a=i("PSt6"),o=i("X5Ic"),s=i("9Vz/"),l=i("Jkv8"),c=i("GyOi"),u=i("mrkb"),d=i("wo5H");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=Class({text:"",size:0,font:null,color:"",strokeColor:null,strokeWeight:0,strokeOffset:0,shadowColor:null,shadowDistance:0,shadowAngle:0,arcAngle:0,alignment:"",lineHeight:1,letterSpacing:0,engravingStyle:null,isCustomizable:!1,resizeToPercent:null,hasMultipleLines:!1,embroideryType:"",migratedToNewPicker:null,colorGraphic:null,isGeneratorMockupTextBoxLayerInstance:!0,isTemporary:!1,_getNewLayer:function(){return new p},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.text=this.text,t.size=this.size,t.font=this.font,t.color=this.color,t.strokeColor=this.strokeColor,t.strokeWeight=this.strokeWeight,t.strokeOffset=this.strokeOffset,t.shadowColor=this.shadowColor,t.shadowDistance=this.shadowDistance,t.shadowAngle=this.shadowAngle,t.alignment=this.alignment,t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.engravingStyle=this.engravingStyle,t.customizeKey=this.customizeKey,t.generatorOptions=this.generatorOptions,t.isCustomizable=this.isCustomizable,t.resizeToPercent=this.resizeToPercent,t.hasMultipleLines=this.hasMultipleLines,t.overrideImage=this.overrideImage,t.overrideImagePulse=this.overrideImagePulse,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.embroideryType=this.embroideryType,t.migratedToNewPicker=this.migratedToNewPicker,t.arcAngle=this.arcAngle,t.colorGraphic=this.colorGraphic,t.quickDesignId=this.quickDesignId,t.groupType=this.groupType,t.groupId=this.groupId,t.disableCentering=Object(u.f)(),t},getType:function(){return p.TYPE},getDPI:function(){return 600},isVector:function(){return!0},toArray:function(e){var t="object"===h(e)&&(null==e?void 0:e.forRpc),i={type:p.TYPE,text:this.text,size:this.size,font:this.font.fontKey,fontName:this.getFontName(),fontPath:this.font["path-ttf"],color:this.color,strokeColor:this.strokeColor,strokeWeight:this.strokeWeight,strokeOffset:this.strokeOffset,shadowColor:this.shadowColor,shadowDistance:this.shadowDistance,shadowAngle:this.shadowAngle,alignment:this.alignment,lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,engravingStyle:this.engravingStyle,resizeToPercent:this.resizeToPercent,hasMultipleLines:this.hasMultipleLines?1:0,position:this.position?this.position.toArray(e):{},embroideryType:this.embroideryType,migratedToNewPicker:this.migratedToNewPicker,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,originalWidth:this.originalPosition.width,arcAngle:this.arcAngle,colorGraphic:this.colorGraphic?t?{id:this.colorGraphic.id,scale:this.colorGraphic.scale}:this.colorGraphic.toArray(e):null,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId,disableCentering:Object(u.f)()};for(var n in i)null!==i[n]&&""!==i[n]||delete i[n];return i},isTextLayer:function(){return!0},isAlignedLeft:function(){return this.alignment===n.a.ALIGN_LEFT},isAlignedRight:function(){return this.alignment===n.a.ALIGN_RIGHT},isAlignedCenter:function(){return this.alignment===n.a.ALIGN_CENTER},getFontName:function(){var e;return(null===(e=this.font)||void 0===e?void 0:e.name)||""},isSimple:function(){return!1},copyValues:function(e){this.text=e.text,this.size=e.size,this.font=e.font,this.color=e.color,this.strokeColor=e.strokeColor,this.strokeWeight=e.strokeWeight,this.strokeOffset=e.strokeOffset,this.shadowColor=e.shadowColor,this.shadowDistance=e.shadowDistance,this.shadowAngle=e.shadowAngle,this.alignment=e.alignment,this.lineHeight=e.lineHeight,this.letterSpacing=e.letterSpacing,this.engravingStyle=e.engravingStyle,this.customizeKey=e.customizeKey,this.resizeToPercent=e.resizeToPercent,this.isCustomizable=e.isCustomizable,this.generatorOptions=e.generatorOptions,this.hasMultipleLines=e.hasMultipleLines,this.overrideImage=e.overrideImage,this.overrideImagePulse=e.overrideImagePulse,this.arcAngle=e.arcAngle,this.colorGraphic=e.colorGraphic,this.quickDesignId=e.quickDesignId,this.groupType=e.groupType},isConfigurationSame:function(e){return this.isWidthHeightRatioSame(e)&&Math.abs(this.size-e.size)<.001&&this.color===e.color&&this.strokeColor===e.strokeColor&&this.strokeWeight===e.strokeWeight&&this.strokeOffset===e.strokeOffset&&this.shadowColor===e.shadowColor&&this.shadowDistance===e.shadowDistance&&this.shadowAngle===e.shadowAngle&&this.alignment===e.alignment&&this.arcAngle===e.arcAngle&&this.migratedToNewPicker===e.migratedToNewPicker},isWidthHeightRatioSame:function(e){return this.text===e.text&&this.getFontName()===e.getFontName()&&this.alignment===e.alignment&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001},isValid:function(){return(new a.a).setActiveLayer(this).setText(this.text).isTextValid()},getUpdateDelay:function(){return 10},setWidthInPercent:function(e){this.resizeToPercent=e},isPartiallyOutOfBounds:function(){var e=parseFloat(this.position.rotation-parseFloat(this.shadowAngle)).toFixed(2),t=Math.cos(-e*Math.PI/180)*this.shadowDistance*this.size/2,i=Math.sin(-e*Math.PI/180)*this.shadowDistance*this.size/2,n=this.position.getClone();return n.top-=i,n.left+=t,this.position.isPartiallyOutOfBounds()||n.isPartiallyOutOfBounds()},hasFillImage:function(){var e;return(null===(e=this.colorGraphic)||void 0===e?void 0:e.id)&&this.colorGraphic.scale},isValidForTechnique:function(e){return e!==o.a.TECHNIQUE_EMBROIDERY&&e!==o.a.TECHNIQUE_ENGRAVING||!this.hasFillImage()}},r.a);p.fromArray=function(e){var t=new p;if(t.text=e.text,t.font=Object(l.getPFCanvasFonts)().FONTS[e.font],t.color=e.color,t.strokeColor=e.strokeColor,t.strokeWeight=parseFloat(e.strokeWeight),t.strokeOffset=parseFloat(e.strokeOffset),t.shadowColor=e.shadowColor,t.shadowDistance=parseFloat(e.shadowDistance),t.shadowAngle=parseFloat(e.shadowAngle),t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=parseFloat(e.size),t.engravingStyle=parseInt(e.engravingStyle),t.arcAngle=parseFloat(e.arcAngle),t.hasMultipleLines="true"===e.hasMultipleLines||!0===e.hasMultipleLines,e.colorGraphic){var i=parseInt(e.colorGraphic.id),n=Object(s.e)(i),r=null;n?r=Object(s.d)(i):!n&&e.colorGraphicItem&&(r=c.a.fromArray(e.colorGraphicItem),Object(s.a)([r])),r?(t.colorGraphic=r,t.colorGraphic.scale=parseFloat(e.colorGraphic.scale)):console.error("Could not read graphic info data")}return t},p.fromTextLayer=function(e){var t=new p;return t.text=e.text,t.font=e.font,t.color=e.color,t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=e.size,t.engravingStyle=e.engravingStyle,t.position=e.position.getFromOriginalRatio(),t.originalPosition=e.originalPosition,t.isCustomizable=e.isCustomizable,t.resizeToPercent=e.resizeToPercent,t},p.TYPE=d.l.TEXTBOX,window&&((globalThis||{}).PFComponentsGeneratorMockupTextboxLayer=p)},"7pSD":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("nF4n"),r=i("4CFC");function a(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var s=Class({_afterShow:null,nodeError:null,_isVisible:!1,_disabledRegionValueVariants:{},regionData:{},currentDisabledVariants:[],updateErrorStatus:function(e){return e&&(this.nodeError.innerText=e),!(this.nodeError&&!n.a.hasClassName(this.node,"hidden"))||(this.isValuePicked()?(n.a.addClassName(this.nodeError,"hidden"),!0):(n.a.removeClassName(this.nodeError,"hidden"),!1))},hideError:function hideError(){n.a.addClassName(this.nodeError,"hidden")},showError:function showError(){n.a.removeClassName(this.nodeError,"hidden")},hasAtLeastOneValue:function(){return!0},isValuePicked:function(){},getValueCount:function(){},showPicker:function(){n.a.removeClassName(this.node,"hidden"),n.a.addClassName(this.node,"picker-animation--hidden"),this._isVisible=!0,setTimeout(function(){n.a.addClassName(this.node,"picker-animation"),n.a.removeClassName(this.node,"picker-animation--hidden")}.bind(this),10),setTimeout(this._afterShow,400)},hidePicker:function(){this._isVisible=!1,n.a.addClassName(this.node,"hidden")},isVisible:function(){return this._isVisible},_setAfterShow:function(e){this._afterShow=e},getVariantClicked:function(e,t){return this.currentDisabledVariants.filter((function(i){return i[t]===e}))},getAvailableAttributeRegion:function(e,t,i,n){var a=this.getVariantClicked(e,t);if(i&&n&&a.length>1){var o=this.getVariantClicked(i,n);a=a.filter((function(e){return o.indexOf(e)>-1}))}var s=this.regionData.variantsByRegion,l=Object.entries(s),c=[];return l.forEach((function(e){var t=e[0],i=e[1];a.forEach((function(e){i.indexOf(e.variantId)>-1&&c.push(Object(r.b)(t))}))})),(c=c.filter((function(e,t){return c.indexOf(e)===t}))).join(", ")},_filterValues:function(e,t){return e.filter((function(e){return null!==e[t]}))},setSelectedRegionDisabledValues:function(e,t,i,n){if(n&&(this.regionData=n),e&&t&&i){this.currentDisabledVariants=t.filter((function(t){return 0===e.filter((function(e){return e&&e.variantId==t.variantId})).length})),t=this._filterValues(t,i),e=this._filterValues(e,i);var r=t.filter((function(t){return!e.some((function(e){return t[i]==e[i]}))})),o=e.filter((function(e){return!t.some((function(t){return e[i]==t[i]}))})),s=[].concat(a(r),a(o)),l={},c={};s.forEach((function(e){l[e[i]]||(c[e[i]]=e.availability,l[e[i]]=!0)})),this._disabledRegionValueVariants[i]=c}},getSelectedRegionDisabledValues:function(e){return Object.keys(this._disabledRegionValueVariants[e])},scrollToNodeError:function scrollToNodeError(e){if(this.nodeError){var t,i=$(this.node).closest(".dynamic-sticky-footer").get(0),n=$(this.nodeError).closest(".modal-content").get(0),r=0;if(i)null==e||null===(t=e.getDynamicStickyFooter())||void 0===t||t.showTab(),r=(n=$(this.nodeError).closest(".dynamic-sticky-footer__drawer").get(0)).getBoundingClientRect().top;n||(n=document.documentElement||document.body);var a,o=this.nodeError.getBoundingClientRect().top-r+n.scrollTop-(i?n.offsetHeight:window.innerHeight)/2+this.nodeError.offsetHeight/2;if(i)null==e||null===(a=e.getDynamicStickyFooter())||void 0===a||a.setScrollTop(o);else $(n).animate({scrollTop:o},200)}}},n.a.Base);s.POPOVER={REGION:{TITLE:dlang("site","Fulfilled in {region}"),DESC:lang("Ships to locations worldwide")},UNAVAILABLE:{TITLE:lang("Out of stock"),DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size")},SAMPLE:{TITLE:lang("Not available as sample"),DESC:lang("You can place it as a basic order")},DSR_LIMITED:{DESC_SIZE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this size"),DESC_COLOR:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this color"),DESC_TECHNIQUE:dlang("products","Adjust your {linkStart} default selling preferences {linkEnd} to choose this technique")}},(globalThis||{}).PFVariantPickerBasePicker=s},"86cz":function(e,t,i){"use strict";i.d(t,"a",(function(){return Ze}));var n=i("xeH2"),r=i.n(n),a=i("edgZ"),o=i("nF4n"),s=i("97Au"),l=i("sjGI"),c=function(e){this.guidelineLink=langUrl("/custom/embroidered/hats/yupoong-6245cm-unstructured-classic-dad-cap#guidelines"),this.node=tag("div",null,[tag("div","pf-p-16",[tag("div","alert alert-warning",[tag("p",{className:"pf-mb-0",innerHTML:dlang("library",'<strong>Please format your files according to the information below and on</strong> <a href="{url}" class="text-bold" target="_blank"> our guidelines </a> to make sure we can have them embroidered as quickly as possible.').replace("{url}",this.guidelineLink)}),tag("p","pf-mb-18",[tag("strong",null,dlang("library","If your graphic doesnât meet our requirements, we canât guarantee the quality of the end product."))]),tag("div","pf-mb-18",[tag("p","pf-mb-0",[tag("strong",null,dlang("library","Please note:"))]),tag("p",{className:"pf-mb-0",innerHTML:dlang("library","1. Highly <strong>detailed graphics </strong>that ignore our guidelines <strong>may be run stitched </strong> (see #8 below)")}),tag("p",{className:"pf-mb-0",innerHTML:dlang("library","2. Orders made with embroidery files that are otherwise defective <strong>will be put on hold</strong>")})]),tag("p",{className:"pf-mb-0",innerHTML:dlang("library",'To create more accurate designs and visualize the outcome of your product, order our <a href="{url}" class="text-bold" target="_blank">embroidery sample</a>.').replace("{url}",langUrl("/custom/hats-embroidery/231/embroidery-sample?tab=Info"))})]),tag("div","pf-mb-0",[tag("img",{className:"embroidery-image",src:"/static/images/embroidery/embroidery-warning.png"})]),tag("ol","emb-list emb-list-modal",[tag("li","",[tag("div","emb-title color_dark-red",[tag("span","number","1."),dlang("library","High profile template")])]),tag("li","",[tag("div","emb-title color_soft-green",[tag("span","number","2."),dlang("library","Low profile template")])]),tag("li","",[tag("div","emb-title color_medium-blue",[tag("span","number","3."),dlang("library","Side logo template")])]),tag("li","",[tag("div","emb-title color_soft-blue",[tag("span","number","4."),dlang("library","Flat embroidery")])]),tag("li","",[tag("div","emb-title color_black",[tag("span","number","5."),dlang("library","3D Puff embroidery")]),tag("div","emb-desc",[dlang("library","A technique where embroidery is raised. Used mostly for big shapes.")])]),tag("li","",[tag("div","emb-title color_soft-yellow",[tag("span","number","6."),dlang("library","Partial 3D Puff")]),tag("div","emb-desc",[dlang("library","A technique where both Flat embroidery and 3D Puff used in the same graphic.")])]),tag("li","",[tag("div","emb-title color_soft-brown",[tag("span","number","7."),dlang("library","Satin stitch outline")]),tag("div","emb-desc",[dlang("library","Used to outline an object or to cap a 3D Puff design. Itâs a long, straight embroidery stitch that looks like satin.")])]),tag("li","",[tag("div","emb-title color_soft-grey",[tag("span","number","8."),dclang("library","The running stitch","Run stitch")]),tag("div","emb-desc",[dlang("library","The running stitch is the basic stitch embroidery. The stitch is worked by passing the needle in and out of the fabric going straight forward in a line.")])]),tag("li","",[tag("div","emb-title color_soft-pink",[tag("span","number","9."),dlang("library","Tatami fill")]),tag("div","emb-desc",[dclang("library","Tatami fill description","Used to fill large areas.")])])]),tag("h4","pf-mt-32",dlang("library","Donât skip our video tutorial")),this._videoEmbed=tag("div",{className:"video-embed pf-py-12",style:{maxWidth:"600px",marginLeft:"auto",marginRight:"auto"}},[tag("iframe",{src:l.a.isES()?"https://www.youtube.com/embed/ArcUo2jTd3U":"https://www.youtube.com/embed/aEfsyYe26Zg",attr:{width:560,height:315,frameborder:0,allowfullscreen:""}})])]),tag("label","pf-p-16 popup-label",[this.nodeCheckbox=tag("input",{type:"checkbox"})," ",dlang("library","I have reviewed the requirements, donât show this again.")]),tag("div","pf-p-16 border-top",[this.nodeAccept=tag("a",{className:"pf-btn pf-btn-primary",onclick:function(){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"Accept copyright warning"}),this.nodeCheckbox.checked&&((new a.a).confirmEmbroidery(),this.rememberShown()),e()}.bind(this)},dlang("library","I accept"))])]),$([this._videoEmbed]).fitVids()};(c.prototype=new o.a.Base).storageKey="embroideryWarningSeen3",c.prototype.shouldShow=function(){return PF.Customer.isLogged()?!PF.Customer.embroidery_seen:localStorage&&"seen"!==localStorage.getItem(this.storageKey)},c.prototype.rememberShown=function(){try{PF.Customer.embroidery_seen=1,localStorage.setItem(this.storageKey,"seen")}catch(e){alert(dlang("library",'Your web browser does not support storing settings locally. In Safari, the most common cause of this is using "Private Browsing Mode". Some settings may not save or some features may not work properly for you.'))}},c.showPopup=function(e){var t,i=new c((function(){t.remove()}));if(i.shouldShow()){ga("send",{hitType:"event",eventCategory:"FileLibrary",eventAction:"See embroidery warning"});var n=new s.a.Par;n.modalDialogClass="modal-dialog__embroidery-info",n.title=dlang("library","Please double check your embroidery file"),n.onClose=e,(t=new s.a(n)).setContent(i.node),t.show()}else e()},(globalThis||{}).PFFileLibraryEmbroideryWarning=c;var u=i("dJr+"),d=i("oixo"),h=i("Gv5l"),p=i("o0qH"),f=i("E17x"),g=i("SaSb"),m=i("gqyd"),_=i("+I3z"),v=Class({groupType:null,quickDesignId:null,uniqueId:null,onClicked:null,onRequestRemoval:null,onRequestAlign:null,mirroredGroupUniqueId:null});window&&((globalThis||{}).PFProductPushLayerPickerGroupPar=v);var y=i("h4ts"),b=Class({templates:null,placements:[],activePlacementId:"",layer:null,onRequestRemoval:null,onRequestAlign:null,onRequestFlipHorizontally:null,onRequestFlipVertically:null,onRequestCropRectangle:null,onRequestPositionReset:null,onRequestRotate:null,onColorChanged:null,onClicked:null,onChangeIsCustomizable:null,onDuplicate:null,enableRemoveBg:null,onRequestRemoveBg:null,onActive:null,onEdit:null,allowCustomizableLayers:null,onRequestFilePicking:null,isAllOver:null,validateAddingLayer:null,showPatternPicker:null,fileCountLimit:null,openQualityTagPopoverOnRender:null,isActive:null,onSelectQualityTag:null,updateGroupDimensions:null,hideQualityNode:!1,showSizesInPx:!1});window&&((globalThis||{}).PFProductPushLayerPickerItemPar=b);var P=i("bvdp"),C=i("ohgv"),T=i("7h5t"),w=i("pWIn"),I=i("cVO5"),S=i("7XA3"),E=i("ka4h"),O=i("MW8O"),k=i("zfrb"),L=i("iQ/s"),A=i("JA1v"),R=i("3Dht"),N=i("dqhU"),D=i("up3R"),x=i("bUho"),F=i("7QI8"),M=i("+erO"),B=i("X5Ic"),V=i("qqZP"),j=i("A+LN"),U=i("TOJy"),z=i("GCEm"),G=i("boP+"),H=i("tTqN"),q=i.n(H),Y=i("dzpP"),W=i("bWRx"),K=i("wo5H"),Z=i("mrkb"),X=i("YNgQ"),Q=i("EQTS"),J=i("v217"),ee=i("rDYR");function te(e){return function(e){if(Array.isArray(e))return ie(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ie(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ie(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ie(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function ne(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function re(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){ne(a,n,r,o,s,"next",e)}function s(e){ne(a,n,r,o,s,"throw",e)}o(void 0)}))}}var ae,oe=Class({_layer:null,_customizableLabel:null,_par:null,_placementsWithMaxImages:null,_isActive:null,_colorDropdown:null,_removeBgButtonNode:null,_cropButtonNode:null,_lockButtonNode:null,_canAccessNewToolbar:!1,__construct:function(e){var t,i=this;this._par=e,this._layer=this._par.layer,this._canAccessNewToolbar=Object(Z.a)();var n=null===(t=Object(G.a)())||void 0===t?void 0:t.isEmbroidery();this.isClipartLayer()&&(this._needsDefaultColor()&&(this._layer.fillColor=this._layer.getDefaultColor()),this._needsColorUpdate()&&this._par.onColorChanged(this._layer),this._colorDropdown=new Q.a(new Q.b({activeValue:{type:J.l,value:this._layer.fillColor,getElements:function(){return Object.values(i._getColors())}},onActiveColorChanged:this._onColorChanged}))),this._customizableLabel=new S.a,this._layer.isCustomizable&&e.allowCustomizableLayers||this._customizableLabel.hide();var r="";if(this._isAddingLayerCustomizationAllowed(this._layer)){var a=new I.a;a.isChecked=this._layer.isCustomizable,a.onChange=this._onChangeIsCustomizable,a.layerType=this._layer instanceof w.a?w.a.TYPE:this._layer instanceof T.a?T.a.TYPE:_.a.TYPE,r=new E.a(a)}this._layer.isMockupLayer()&&(null===sessionStorage.getItem("layerIsLocked")?this._layer.isLocked=!0:this._layer.isLocked="true"===sessionStorage.getItem("layerIsLocked"));var s=new R.a;s.title=dlang("dashboard","Rotate:"),s.className="",s.value=this._layer.position.rotation>180?this._layer.position.rotation-360:this._layer.position.rotation,s.minValue=-180,s.maxValue=180,s.fractionDigits=0,s.incrementStep=1,s.hasNumberInput=!0,s.onValueChanged=this._par.onRequestRotate,s.onSlide=this._par.onRequestRotate,s.isVisible=!this._layer.isCropState,this._rotationInput=Object(N.a)(s);var l=this._layer.isCropPositionUpdateNeeded()?this._layer.cropPosition:this._layer.position,c=new Y.a;c.className="col-5 col-sm-5 pf-mb-0 pf-pr-0 pf-mr-auto",c.title=dlang("dashboard","Width:"),c.value=this._par.showSizesInPx?parseInt(l.width):l.width.toFixed(2),c.defaultValue=1,c.minValue=1,c.maxValue=100,c.incrementStep=.1,c.requiredErrorMessage=dlang("dashboard","Max. value is 100"),[B.a.TECHNIQUE_PROMO,K.n].includes(this._par.templates.getTechnique())&&(c.maxValue=null,c.incrementStep=1),c.onValueChanged=this._onLayerWidthChanged,this._widthInput=Object(W.a)(c);var u=new Y.a;u.className="col-5 col-sm-5 pf-mb-0 pf-pl-0 pf-ml-auto",u.title=dlang("dashboard","Height:"),u.value=this._par.showSizesInPx?parseInt(l.height):l.height.toFixed(2),u.defaultValue=1,u.minValue=1,u.maxValue=100,u.incrementStep=.1,[B.a.TECHNIQUE_PROMO,K.n].includes(this._par.templates.getTechnique())&&(u.maxValue=null,u.incrementStep=1),u.onValueChanged=this._onLayerHeightChanged,this._heightInput=Object(W.a)(u),this.node=Object(o.b)("div",{className:this._layer.parentLayerUniqueId?"pf-d-none":"layer-picker__item pf-border-bottom "+(this._layer.isMockupLayer()&&this._layer.isLocked?"pf-bg-lighter":""),onclick:this._par.onClicked.bind(null,this),attr:{"data-layer-id":this.getLayer().uniqueId,"data-layer-group-id":this.getLayer().groupId}},[Object(o.b)("div","row no-gutters",[Object(o.b)("div","col-auto",[Object(o.b)("div","layer-picker__item__inside",[Object(o.b)("i","pf-i pf-i-subdirectory-arrow-left pf-i-24 pf-text-gray pf-pr-8")])]),Object(o.b)("div","col-auto",[Object(o.b)("div","layer-picker__item__handle-wrap pf-py-16 pf-pr-12",[Object(o.b)("span",{className:"pf-i pf-i pf-i-lock-outline pf-bg-white pf-rounded-circle "+(this._layer.isMockupLayer()&&this._layer.isLocked?"":"pf-d-none"),style:{position:"absolute",right:"5px",top:"14px","z-index":1},attr:{title:dlang("generator","Unlock to move around"),"data-toggle":"tooltip"}}),Object(o.b)("div","layer-picker__item__thumb pf-border pf-position-relative",[this._thumbNode=this._getThumbNode(),this._proIndicatorNode=this._getProIndicatorNode()])])]),Object(o.b)("div","col pf-ui-caption "+(this._layer.isMockupLayer()||this._layer.isPropLayer()?"pf-my-auto":""),[Object(o.b)("div","layer-picker__item__handle-wrap pf-py-8",[this._customizableLabel,this._titleNode=this._getTitleNode(),this._printQualityNode=this._par.hideQualityNode?"":this._getPrintQualityNode(),this._selectedEmbroideryColorsNode=n?this._getSelectedEmbroideryColors():"",this._sizeNode=this._hideSizeNode()&&!this._canAccessNewToolbar?"":this._getSizeNode(),this._par.showSizesInPx||!this._sizeNode?"":Object(o.b)("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-4",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}}),this._lockedCaptionNode=Object(o.b)("span","pf-pt-2 pf-text-muted "+(this._layer.isMockupLayer()&&this._layer.isLocked?"":"pf-d-none"),dlang("generator","Locked"))])])]),Object(o.b)("div","pf-pl-24",[Object(o.b)("div","layer-picker__item__controls row",[this._sizeInputNode=Object(o.b)("div","col-12 pf-mt-12 "+(this._canAccessNewToolbar?"pf-d-none ":"")+((this._layer.isClipartLayer()||this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()||this._layer.isPropLayer())&&!this._layer.isCropState?"":"pf-d-none"),[Object(o.b)("div","row row-flex no-gutters ",[this._widthInput,this._linkNode=Object(o.b)("i",{className:"pf-i pf-pointer pf-i-20 pf-pt-20 pf-mt-20 pf-hover-background-dark "+(this._layer.lockUniScaling?"pf-i-link pf-text-dark ":"pf-i-link-off pf-text-gray ")+(this._layer.isClipartLayer()?"":"pf-d-none"),onclick:this._onLockUniScalingClicked.bind(this)}),Object(o.b)("i",{className:"pf-i pf-pointer pf-i-20 pf-pt-20 pf-mt-20 pf-i-link pf-text-light pf-hover-background-dark "+(this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()||this._layer.isPropLayer()?"":"pf-d-none"),attr:{title:dlang("generator","Width and height ratio for this design element is locked"),"data-toggle":"tooltip"}}),this._heightInput,Object(o.b)("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-mb-4 pf-mr-20",style:{position:"absolute",right:0,"z-index":1},attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip","data-placement":"left"}})])]),this._inputWarningNode=Object(o.b)("div","col-12 pf-d-none "+(this._layer.isClipartLayer()||this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()?"":"pf-d-none"),[Object(o.b)("div","row pf-mb-8",[this._widthInputWarningNode=Object(o.b)("div","col-6 col-sm-6 pf-mb-0 pf-text-red pf-d-none",[lang("Max. value is 100")]),this._heightInputWarningNode=Object(o.b)("div",{className:"col-6 col-sm-6 pf-mb-8 pf-text-red pf-d-none",style:{position:"absolute",right:0}},[lang("Max. value is 100")])])]),this._renderEditButton()&&!this._canAccessNewToolbar?Object(o.b)("div","col-12 pf-mt-12",[Object(o.b)("button",{className:"pf-btn pf-btn-secondary pf-btn-block",onclick:this._par.onEdit.bind(null,this)},dlang("generator","Edit"))]):"",Object(o.b)("div","col-12 pf-mt-12 "+(this._layer.isMockupLayer()||this._canAccessNewToolbar?" pf-d-none":""),[this._rotationInput]),Object(o.b)("div",(this._layer.isMockupLayer()?"pf-d-inline-block pf-w-auto pf-mt-4 pf-pl-8 pf-pr-12 ":"col-12 pf-mt-12 ")+(this._layer.isCropState||this._canAccessNewToolbar?"pf-d-none":""),[Object(o.b)("div","pf-bold pf-mb-8",lang("Align")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-d-none":""),attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.VERTICAL)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-mr-8 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-px-8 pf-border-gray pf-btn-square pf-pr-1 ":"pf-px-12 ")+(this._layer.isMockupLayer()&&this._layer.isLocked?"disabled":""),attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._layer.isLocked?"":this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.HORIZONTAL)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-center "+(this._layer.isMockupLayer()?"pf-i-24":"pf-i-18"))]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-d-none":""),attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.LEFT)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-d-none":""),attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.RIGHT)},[Object(o.b)("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-d-none":""),attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.TOP)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mb-8 pf-rounded pf-hover-shadow "+(this._layer.isMockupLayer()?"pf-d-none":""),attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,M.a.ALIGNMENT.BOTTOM)},[Object(o.b)("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])]),this._lockButtonNode=Object(o.b)("span",this._canAccessNewToolbar?"pf-d-none ":""),this._showFlipControls()&&!this._canAccessNewToolbar?Object(o.b)("div","pf-d-inline-block pf-w-auto pf-mt-4 pf-px-8 pf-px-sm-12 pf-pl-lg-16",[Object(o.b)("div","pf-bold pf-mb-8",dlang("generator","Flip")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-rounded pf-hover-shadow",attr:{title:dlang("generator","Flip horizontally"),"data-toggle":"tooltip"},onclick:this._par.onRequestFlipHorizontally},[Object(o.b)("i","pf-i pf-i-reflect-horizontal pf-i-18")]),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-rounded pf-hover-shadow",attr:{title:dlang("generator","Flip vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestFlipVertically},[Object(o.b)("i","pf-i pf-i-reflect-horizontal pf-i-rotate-90 pf-i-18")])]):"",this._cropButtonNode=Object(o.b)("span",this._canAccessNewToolbar?"pf-d-none ":""),r&&!this._canAccessNewToolbar?Object(o.b)("div","col-12 pf-mt-12",[r]):"",this._colorDropdown&&!this._canAccessNewToolbar?Object(o.b)("div","col-12 pf-mt-12 "+(this._needsColorDropdown()?"":"pf-d-none"),[Object(o.b)("div","pf-bold pf-mb-8",lang("Choose art color")+":"),this._colorDropdown]):"",this._renderPatternButton()&&!this._canAccessNewToolbar?this._patternButtonNode=Object(o.b)("div","col-12 pf-mt-12",[this._patternButtonAnchorNode=Object(o.b)("a",{className:"btn btn-block btn-empty pf-rounded pf-hover-shadow pf-px-8",onclick:this._par.onEdit.bind(null,this)},[Object(o.b)("img",{className:"pf-d-inline-block",src:PF.ASSETS_URL+"/generator/pattern-halfdrop.svg",style:{height:"24px"}}),Object(o.b)("span","pf-px-4 pf-px-xs-12 pf-px-md-8 pf-px-lg-12",this._layer.patternType?dlang("generator","Edit pattern"):dlang("generator","Make a pattern"))])]):"",this._removeBgButtonNode=Object(o.b)("div","col-12"+(this._canAccessNewToolbar?" pf-d-none ":"")),Object(o.b)("div","col-12 pf-my-12",[this._getPlacementDropdown()])]),Object(o.b)("span","layer-picker__item__handle",[Object(o.b)("i","pf-i pf-i-drag pf-i-18")]),Object(o.b)("span",{className:"layer-picker__item__delete "+(this._layer.isMockupLayer()?"pf-d-none":""),onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestRemoval(e)}.bind(this),attr:{title:lang("Delete"),"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'}},[Object(o.b)("i","pf-i pf-i-trash-can-outline pf-i-18")]),Object(o.b)("span",{className:"layer-picker__item__reset "+(this._layer.isCropState||this._layer.isMockupLayer()?"pf-d-none":""),onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestPositionReset(e),P.a._track("Reset position button",P.a._getCustomerLabel(),this._getType()),this._onResetButtonClicked()}.bind(this),attr:{title:dlang("dashboard","Reset"),"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'}},[Object(o.b)("i","pf-i pf-i-restore pf-i-18")])])]),this._isActive=this._par.isActive,this._par.openQualityTagPopoverOnRender&&(this.updateLayer(this._layer),this._par.openQualityTagPopoverOnRender=!1),this._renderRemoveBgButton(),this._renderCropButton(),this._renderLockButton()},_renderRemoveBgButton:function(){var e=this;return re(regeneratorRuntime.mark((function t(){var i,n,r,a,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.a.clearNode(e._removeBgButtonNode),t.next=3,e._canRenderRemoveBgButton();case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(U.d)(U.b);case 7:n=t.sent,r=!(null===(i=e._layer.fileItem.extra)||void 0===i||!i.usedRemoveBgBeta),a=PF.EMBED_STORE||PF.WEBVIEW?"":' <a id="getProVersionTooltip" href="javascript:;">'+dlang("generator","Try for free now")+"</a>",s=dlang("generator","Unlock with Printful Pro")+"."+a,l=n||e._layer.isRemovedBg||r?e._getRemoveBgButtonErrors():[s],Object(o.b)("div","pf-mt-12 remove-background-tooltip",[Object(o.b)("a",{className:"btn btn-empty btn-block pf-rounded pf-hover-shadow pf-px-8 "+(l.length?"disabled":""),onclick:l.length?null:e._par.onRequestRemoveBg,style:"pointer-events:all;",attr:{"data-toggle":"tooltip"}},[Object(o.b)("i",{className:"pf-i pf-i-auto-fix pf-i-24",style:{"vertical-align":"sub"}}),Object(o.b)("span","pf-px-4 pf-px-xs-12 pf-px-md-8 pf-px-lg-12",e._layer.isRemovedBg?dlang("generator","Cancel background removal"):dlang("generator","Remove background")),e._layer.isRemovedBg||r?"":Object(o.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro",style:{"vertical-align":"text-bottom"}})])]).append(e._removeBgButtonNode),l.length&&window.$(e._removeBgButtonNode).find('[data-toggle="tooltip"]').tooltip({title:l.join("<br>"),html:!0,placement:"top",container:e.node.parent,delay:{hide:1200}}).on("click",(function(e){e.preventDefault(),$(this).tooltip("show")})).on("shown.bs.tooltip",(function(){var e=document.getElementById("getProVersionTooltip");if(e){var t=function(e){e.preventDefault();var t=window.location.protocol+"//"+window.location.hostname;window.open(t+langUrl("/dashboard/settings/account-subscription-plan"),"_blank")};e.addEventListener("click",t),e.addEventListener("touchend",t)}}));case 14:case"end":return t.stop()}}),t)})))()},_renderCropButton:function(){var e=this;return re(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.a.clearNode(e._cropButtonNode),t.next=3,e._canRenderCropButton();case 3:if(t.sent){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,Object(j.x)(j.e);case 7:return n=t.sent,Object(Z.m)(j.e,n),t.next=11,e._manageCropTooltipDisplay(n);case 11:Object(o.b)("div","pf-d-inline-block pf-w-auto pf-mt-4 "+(e._showFlipControls()?"":"pf-px-8 pf-px-sm-12 pf-px-lg-16"),[Object(o.b)("div","pf-bold pf-mb-8",dlang("generator","Crop")+":"),Object(o.b)("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-rounded pf-hover-shadow "+(null!==(i=e.getLayer())&&void 0!==i&&i.isCropState?"pf-border-dark ":"")+(e._layer.patternType&&!n||e._layer.isRemovedBg?"disabled ":""),attr:{title:dlang("generator","Toggle crop"),"data-toggle":"tooltip"},onclick:e._par.onRequestCropRectangle},[Object(o.b)("i","pf-i pf-i-crop pf-i-18")])]).append(e._cropButtonNode);case 12:case"end":return t.stop()}}),t)})))()},_renderLockButton:function(){o.a.clearNode(this._lockButtonNode),this._layer.isMockupLayer()&&Object(o.b)("div","pf-d-inline-block pf-w-auto pf-mt-4",[Object(o.b)("div","pf-bold pf-mb-8",dlang("generator","Lock")+":"),this._lockBtnNode=Object(o.b)("a",{className:"btn btn-empty pf-btn-square pf-px-8 pf-mr-12 pf-rounded pf-hover-shadow pf-border-gray "+(this._layer.isLocked?"pf-border pf-border-dark pf-btn-outline active btn-white ":""),onclick:this._onMockupLockedClicked.bind(this)},[this._lockBtnIconNode=Object(o.b)("i","pf-i pf-i-24 pf-pr-1 "+(this._layer.isLocked?"pf-i-lock-outline":"pf-i-lock-open-outline"))])]).append(this._lockButtonNode)},_manageCropTooltipDisplay:function(e){if(this._layer.cropPosition||this._layer.patternType||this._layer.isRemovedBg){var t={"data-toggle":"tooltip","data-trigger":"hover","data-delay":'{"show": 100, "hide": 200}'};if(this._layer.isRemovedBg){var i=Object.assign({title:dclang("generator","background removal","Background Removal Tool currently doesn't work with the Crop Tool")},t);$(this._cropButtonNode).attr(i)}if(!e&&(this._layer.cropPosition||this._layer.patternType)){var n=Object.assign({title:dlang("generator","Patterns currently don't work with the Crop Tool")},t);this._layer.cropPosition&&$(this._patternButtonNode).attr(n),this._layer.patternType&&$(this._cropButtonNode).attr(n)}this._patternButtonAnchorNode&&this._layer.cropPosition&&!e&&o.a.addClassName(this._patternButtonAnchorNode,"disabled")}},hasLayer:function(e){return!!this._layer&&this._layer.uniqueId===e.uniqueId},updateRotationInput:function(e){this._rotationInput&&(e>180&&(e-=360),this._rotationInput.setValue(e))},_hideSizeNode:function(){var e,t=!!this._layer.isMockupLayer()||(null===(e=this._par.templates.getActiveLayer())||void 0===e?void 0:e.uniqueId)===this._layer.uniqueId;return(this._layer.isClipartLayer()||this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()||this._layer.isMockupLayer()||this._layer.isPropLayer())&&t},updateWidthHeightInput:function(e){this._widthInput&&this._widthInput.setValue(e.cropPosition?e.cropPosition.width:e.position.width),this._heightInput&&this._heightInput.setValue(e.cropPosition?e.cropPosition.height:e.position.height)},_renderEditButton:function(){var e;return this._par.onEdit&&(this.isTextLayer()||this.isImageLayer()&&((null===(e=Object(G.a)())||void 0===e?void 0:e.isEmbroidery())||this._par.templates.getTechnique()===B.a.TECHNIQUE_EMBROIDERY))},_renderPatternButton:function(){var e,t=null===(e=this._par.templates.getActiveTemplate(this._par.activePlacementId))||void 0===e?void 0:e.getMirroredLayer(this._layer),i=[F.a.TYPE_LABEL_INSIDE,F.a.TYPE_LABEL_OUTSIDE,F.a.TYPE_HANG_TAG].indexOf(this._par.activePlacementId)<0;return this._par.onEdit&&this._par.showPatternPicker&&!t&&i&&!this.isTextLayer()&&(this.isImageLayer()||this.isClipartLayer()||this.isLicensedAssetLayer()||this._layer.isPropLayer())&&!this._layer.isCropState&&!this._layer.isMockupLayer()},_renderPlacementDropdown:function(){var e,t=this._par.templates.getActiveTemplate(this._par.activePlacementId).getMirroredLayer(this._layer),i=[F.a.TYPE_LABEL_INSIDE,F.a.TYPE_LABEL_OUTSIDE,F.a.TYPE_HANG_TAG].indexOf(this._par.activePlacementId)<0;return(this._par.isAllOver(!0)||(null===(e=Object(G.a)())||void 0===e?void 0:e.canDublicatePlacementLayers()))&&!t&&i},_canRenderRemoveBgButton:function(){var e=this;return re(regeneratorRuntime.mark((function t(){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e._layer.fileItem,t.next=3,Object(j.x)(j.k);case 3:return r=t.sent,Object(Z.m)(j.k,r),t.abrupt("return",n&&!n.isSample&&e.isImageLayer()&&e._par.enableRemoveBg&&e._par.onRequestRemoveBg&&(r||(null===(i=n.extra)||void 0===i?void 0:i.usedRemoveBgBeta))&&n.storeId!==z.c&&!e._layer.isCropState&&!e._layer.isMockupLayer()&&!e._layer.isPropLayer());case 6:case"end":return t.stop()}}),t)})))()},_canRenderCropButton:(ae=re(regeneratorRuntime.mark((function e(){var t,i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._layer.fileItem||this._layer.licensedAssetItem,e.next=3,Object(j.x)(j.f);case 3:return i=e.sent,n=!this._isEmbroideryTechnique(),r=this._layer.patternType===q.a.PATTERN_TYPE.REFLECT,e.abrupt("return",i&&t&&(this.isImageLayer()||this.isLicensedAssetLayer())&&n&&!r&&!this._layer.isMockupLayer()&&!this._layer.isPropLayer());case 7:case"end":return e.stop()}}),e,this)}))),function(){return ae.apply(this,arguments)}),_getRemoveBgButtonErrors:function(){var e,t=[],i=this._layer.fileItem;return this._layer.cropPosition&&t.push(dclang("generator","background removal","Background Removal Tool currently doesn't work with the Crop Tool")),i?null!==(e=i.extra)&&void 0!==e&&e.noBackgroundFound?(t.push(dclang("generator","background removal","Background canât be removed. Please adjust the image and re-upload it or upload a different one.")),t):(i.width*i.height>=5e7&&t.push(dclang("generator","background removal","Image resolution too large. Please upload a smaller image.")),["image/png","image/jpeg"].includes(i.type)||t.push(dclang("generator","background removal","Unsupported file format. Please upload JPEG or PNG.")),i.filesize>=12e6&&t.push(dclang("generator","background removal","Your file can't be more than {maxFileSize}. Please upload a smaller file.").replace("{maxFileSize}","12&nbsp;MB")),t):t},_showFlipControls:function(){var e;return(this.isImageLayer()||this.isClipartLayer()||this.isLicensedAssetLayer()||this.isPropLayer())&&!(null!==(e=Object(G.a)())&&void 0!==e&&e.isEmbroidery())&&!this._layer.isCropState&&!this._layer.isMockupLayer()},_showCropControls:function(){var e;return(this.isImageLayer()||this.isLicensedAssetLayer())&&!(null!==(e=Object(G.a)())&&void 0!==e&&e.isEmbroidery())&&Object(j.x)(j.f)},updateLayer:function(e){var t=this;if(this._layer=e,o.a.clearNode(this._sizeNode),this._sizeNode&&this._getSizeNode().append(this._sizeNode),this._par.updateGroupDimensions&&this._par.updateGroupDimensions(),!this._par.hideQualityNode)if(this.isImageLayer()||this.isLicensedAssetLayer()){o.a.clearNode(this._printQualityNode),this._getPrintQualityNode().append(this._printQualityNode),this._selectedEmbroideryColorsNode&&(o.a.clearNode(this._selectedEmbroideryColorsNode),this._getSelectedEmbroideryColors().append(this._selectedEmbroideryColorsNode));var i=this._currentQualityKey+"_"+this._layer.uniqueId;O.a.TagPopoverClosed[i],e.isExisting;this._par.openQualityTagPopoverOnRender&&setTimeout((function(){t._showQualityTagTooltip(),t._par.onSelectQualityTag(null),t._par.openQualityTagPopoverOnRender=null}),0)}else this.isClipartLayer()&&(o.a.clearNode(this._thumbNode),this._getThumbNode().append(this._thumbNode))},_requestFilePicking:function(e){var t=Object(G.a)();t&&!e&&t.isEmbroidery()?c.showPopup(this._requestFilePicking.bind(this,!0)):this._par.onRequestFilePicking()},getLayer:function(){return this._par.layer},setActive:function(e){e?(this._par.onActive&&this._par.onActive(),o.a.addClassName(this.node,"active")):o.a.removeClassName(this.node,"active"),this._isActive=e},_onChangeIsCustomizable:function(e){e?this._customizableLabel.show():this._customizableLabel.hide(),this._par.onChangeIsCustomizable&&this._par.onChangeIsCustomizable()},isImageLayer:function(){return this._layer.isImageLayer()},isTextLayer:function(){return this._layer.isTextLayer()},isClipartLayer:function(){return this._layer.isClipartLayer()},isLicensedAssetLayer:function(){return this._layer.isLicensedAssetLayer()},isPropLayer:function(){return this._layer.isPropLayer()},isMockupLayer:function(){return this._layer.isMockupLayer()},hasLayerSizeInput:function(){return o.a.hasClassName(this._sizeInputNode,"pf-d-none")},_getThumbNode:function(){if(this.isTextLayer())return Object(o.b)("i",{className:"pf-i pf-i-format-font pf-i-24 pf-p-12",style:{color:this._layer.color||"#000"}});var e=null;if(this.isImageLayer())e=(this._par.layer.shouldUseTempFile?this._par.layer.temporaryFileItem:this._par.layer.fileItem).urlThumb;else if(this.isClipartLayer())e=this._layer.overrideImage||this._layer.clipartItem.image.urlThumb;else if(this.isLicensedAssetLayer())e=this._par.layer.licensedAssetItem.previewUrl;else if(this.isPropLayer())e=this._par.layer.propItem.image.urlThumb;else if(this.isMockupLayer()){var t;e=null===(t=Object(X.b)())||void 0===t?void 0:t.downloadUrl}return e?Object(o.b)("img",{className:"layer-picker__item__image",src:e}):Object(o.b)("div")},_getProIndicatorNode:function(){var e,t,i,n,r=this.isClipartLayer()&&(null===(e=this._layer.clipartItem)||void 0===e||null===(t=e.extra)||void 0===t?void 0:t.premium),a=!(null===(i=this._layer.fileItem)||void 0===i||null===(n=i.extra)||void 0===n||!n.usedRemoveBgBeta),s=this._layer.isRemovedBg&&!a;return r||s?Object(o.b)("div",{className:"pf-position-absolute pf-bg-white pf-rounded-circle",style:{top:"-10px",right:"-10px",padding:"1px",height:"20px",width:"20px"}},[Object(o.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro",attr:{"data-toggle":"tooltip","data-container":"body",title:dlang("generator","Printful Pro feature")},style:{"vertical-align":"top"}})]):""},_getTitleNode:function(){var e="";if(this.isImageLayer())e=(this._par.layer.shouldUseTempFile?this._par.layer.temporaryFileItem:this._par.layer.fileItem).filename;else if(this.isTextLayer())e=C.a.shortenString(this._layer.text,50);else if(this.isClipartLayer())e=this._layer.clipartItem.name;else if(this.isLicensedAssetLayer())e="";else if(this.isPropLayer())e=this._layer.propItem.name;else if(this.isMockupLayer()){var t;e=null===(t=Object(X.c)())||void 0===t?void 0:t.name}return Object(o.b)("div","layer-picker__item__title pf-pr-40",[Object(o.b)("span","layer-picker__item__badge",this._getType()),e])},_getPrintQualityNode:function(){var e=k.a.QUALITY_GOOD,t=dlang("generator","Vector");if(this.isImageLayer()||this.isLicensedAssetLayer()){var i=this._par.templates.getQuality();e=i.getQualityKey(i.getQualityPercent(this._layer),this._layer,this._isEmbroideryTechnique(),!1),t=this._layer.isVector()?dlang("generator","Vector"):this._layer.getDPI()+lang(" DPI")}var n=O.a.qualityMap[e];return Object(o.b)("div","layer-picker__item__quality pf-bold pf-mt-2",[Object(o.b)("span","",[dlang("generator","Print quality")+": ",Object(o.b)("span",n[0],n[1]+" / "+t)]),this._getTagByQualityKey(e),this._shouldShowTransparencyInfo()?Object(o.b)("div",{className:"pf-text-yellow-dark",innerHTML:dlang("generator",'File contains <a href="{url}" target="_blank">semi-transparent elements</a>').replace("{url}",langUrl("/transparency-in-dtg-files"))}):""])},_isEmbroideryTechnique:function(){var e;return!!(null!==(e=Object(G.a)())&&void 0!==e&&e.isEmbroidery()||this._par.templates.getTechnique()===B.a.TECHNIQUE_EMBROIDERY)},_getTagByQualityKey:function(e){return this._tagNode="",this._isEmbroideryTechnique()||(e===k.a.QUALITY_BAD_UPSCALE&&(this._tagNode=Object(o.b)("span",{className:"popover-trigger-manual layer-picker__item__tag pf-ml-4 pf-mr-12",onclick:this._beforeShowQualityTagTooltip,attr:{"data-toggle":"popover","data-content":"1"}},[Object(o.b)("i","pf-i pf-i-star-four-points pf-mx-2"),Object(o.b)("span","pf-ui-legal pf-normal pf-mr-4",dlang("generator","Adjusted"))])),this._currentQualityKey!==e&&this._tagPopover&&(this._tagPopover.destroy(),this._tagPopover=null,this._setQualityTagActive()),this._currentQualityKey=e,this._setQualityTagActive(!0)),this._tagNode},_beforeShowQualityTagTooltip:function(){this._isActive?this._showQualityTagTooltip():this._par.onSelectQualityTag&&this._par.onSelectQualityTag(this._layer.uniqueId)},_showQualityTagTooltip:function(){var e=this;if(this._tagNode&&!this._tagPopover){var t=O.a.qualityTagTextMap[this._currentQualityKey];if(t){var i=l.a.isJp()?"https://faq.printful.com/article/124":langUrl("/faq/design-tips-mockups/470-how-does-the-smart-image-tool-work-");this._tagPopover=new x.a(this._tagNode,"","",{container:"#js--product-push-designer",placement:g.a.isWindowSmallerThan(g.a.SIZES.MD)?"bottom":"right",trigger:"manual",closeOnResize:!0,template:Object(o.b)("div","popover popover--quality-tag",[Object(o.b)("div","arrow"),Object(o.b)("div","row no-gutters",[Object(o.b)("div","col-3 pf-text-center",[Object(o.b)("img",{className:"img-responsive pf-pr-12",src:PF.ASSETS_URL+"generator/upscale-image.gif"})]),Object(o.b)("div","col-8",[Object(o.b)("div","popover-header pf-h5",t.header||""),Object(o.b)("div","popover-body pf-ui-caption pf-text-muted pf-mt-16",[Object(o.b)("p","",t.content||""),Object(o.b)("a",{href:i,target:"_blank"},dlang("generator","More info"))])]),Object(o.b)("div","col-1 pf-text-center",[Object(o.b)("i",{className:"pf-i pf-i-close pf-i-18 popover__close-quality-tag",onclick:function(){return e._tagPopover.destroy(!0)}})])])])},this._onQualityTagPopoverClose)}this._tagPopover.show(),O.a.TagCurrOpenPopover=this._tagPopover,this._setQualityTagActive(!0)}},_onQualityTagPopoverClose:function(e){if(e){var t=this._currentQualityKey+"_"+this._layer.uniqueId;O.a.TagPopoverClosed[t]=!0}this._tagPopover=null,this._setQualityTagActive()},_setQualityTagActive:function(e){if(this._tagNode&&(!e||this._tagPopover)){var t=this._currentQualityKey===k.a.QUALITY_BAD_UPSCALE?"layer-picker__item__tag--active":"";t&&(e?o.a.addClassName(this._tagNode,t):o.a.removeClassName(this._tagNode,t))}},_shouldShowTransparencyInfo:function(){var e=Object(G.a)();return e&&(e.isDtgShirt()||e.isDtgTote())&&this.isImageLayer()&&this._par.templates&&this._par.templates.getTechnique()!==B.a.TECHNIQUE_EMBROIDERY&&this._layer.hasTransparencyIssues()},_getSelectedEmbroideryColors:function(){var e=[];if(this._layer&&this._layer.overrideColors){var t=Object.values(this._layer.overrideColors);e=t.filter((function(e,i){return e&&t.indexOf(e)==i}))}else this._layer&&this._layer.color&&e.push(this._layer.color);var i=new L.a;i.colors=e,i.nodeClass="pf-d-inline-block pf-pl-2";var n=new A.a(i);return Object(o.b)("div","pf-bold pf-mt-2",[dlang("generator","Thread colors")+": ",n])},_getSizeNode:function(){var e=this._layer.isCropPositionUpdateNeeded()?this._layer.cropPosition:this._layer.position,t=this._par.showSizesInPx?parseInt(e.width):e.width.toFixed(2),i=this._par.showSizesInPx?parseInt(e.height):e.height.toFixed(2);return Object(o.b)("div","pf-mt-2 pf-d-inline-block",[Object(o.b)("span","pf-bold",dlang("generator","Width:"))," "+t+" ",Object(o.b)("span","pf-bold",dlang("dashboard","Height:"))," "+i])},_getPlacementDropdown:function(){var e=this;if(this._layer.isCropState||this._layer.isMockupLayer())return"";var t=this._renderPlacementDropdown(),i=this._getAvailablePlacementsForCopy();this._placementsWithMaxImages=[],this.isImageLayer()&&i.forEach((function(t){e._par.templates.getLayersByType(_.a,t.id,!1).length>=e._par.fileCountLimit&&e._placementsWithMaxImages.push(t)})),this.isLicensedAssetLayer()&&i.forEach((function(t){e._par.templates.getLayersByType(V.a,t.id,!1).length>=e._par.fileCountLimit&&e._placementsWithMaxImages.push(t)}));var n=i.map(function(e){return this._placementsWithMaxImages.filter((function(t){return t.id===e.id})).length?Object(o.b)("li","",[Object(o.b)("div",{className:"pf-pl-40 pf-py-12 pf-ui-body pf-text-muted"},[e.title,Object(o.b)("div","pf-ui-caption",dlang("generator","The limit is {number} File layers per placement.").replace("{number}",this._par.fileCountLimit))])]):Object(o.b)("li","",[Object(o.b)("a",{className:"pf-pl-40 pf-py-12 pf-ui-body",onclick:function(e,t){t.stopPropagation(),this._copyLayerToPlacements([e])}.bind(this,e)},e.title)])}.bind(this));return n.length<1&&(t=!1),Object(o.b)("div","row no-gutters dropdown",[Object(o.b)("a",{className:"btn "+(t?"col-10 pf-rounded-left":"col-12 pf-rounded")+" btn-block btn-empty pf-hover-shadow "+(this._par.validateAddingLayer(this._layer)?"":"disabled"),onclick:function(e){e.stopPropagation(),this._par.onDuplicate(e)}.bind(this)},[Object(o.b)("i","pf-i pf-i-content-copy pf-i-18 pf-text-gray pf-mb-2"),Object(o.b)("span","pf-pl-4",dlang("dashboard","Duplicate"))]),t?Object(o.b)("a",{className:"btn col-2 pf-px-4 btn-empty pf-rounded-right pf-hover-shadow dropdown-toggle "+(this._par.validateAddingLayer(this._layer)?"":"disabled"),onclick:function(e){e.stopPropagation()},attr:{"data-toggle":"dropdown"}},[Object(o.b)("i","pf-i pf-i-chevron-down pf-i-24 pf-text-gray")]):"",t?Object(o.b)("ul","dropdown-menu dropdown-menu-right pf-border pf-p-0 pf-m-0",[Object(o.b)("li","",[Object(o.b)("div","pf-p-12 pf-ui-caption pf-bg-lighter pf-text-muted",[Object(o.b)("span","pf-i pf-i-content-duplicate pf-i-18 pf-pr-8"),Object(o.b)("span","",dlang("generator","Duplicate onâ¦"))])]),n.length>1?Object(o.b)("li","",[Object(o.b)(this._placementsWithMaxImages.length?"div":"a",{className:"pf-pl-40 pf-py-12 pf-ui-body"+(this._placementsWithMaxImages.length?" pf-text-muted":""),onclick:function(e){e.stopPropagation(),this._placementsWithMaxImages.length||this._copyLayerToPlacements(this._getAvailablePlacementsForCopy())}.bind(this)},[dlang("generator","All placements"),this._placementsWithMaxImages.length?Object(o.b)("div","pf-ui-caption",dlang("generator","The limit is {number} File layers per placement.").replace("{number}",this._par.fileCountLimit)):""])]):""].concat(n)):""])},_getAvailablePlacementsForCopy:function(){var e=[F.a.TYPE_LABEL_INSIDE,F.a.TYPE_LABEL_OUTSIDE,F.a.TYPE_HANG_TAG].concat(te(Object(G.b)()));return e.indexOf(this._par.activePlacementId)<0?this._par.placements.filter(function(t){return e.concat([this._par.activePlacementId]).indexOf(t.id)<0}.bind(this)):[]},_copyLayerToPlacements:function(e){this._placementsWithMaxImages.length&&(this.isImageLayer()||this.isLicensedAssetLayer())&&(e=e.filter(function(e){return 0===this._placementsWithMaxImages.filter((function(t){return t.id===e.id})).length}.bind(this))),this._par.templates.copyLayerToPlacementTemplates(this._layer,e);var t=$(".modal-content").length?$(".modal-content"):$("body"),i=dlang("generator","Layer duplicated on {placements}").replace("{placements}",e.map((function(e){return e.title})).join(", "));new D.a(i,D.a.TYPE_SUCCESS,3e3).append(t[0])},_onColorChanged:function(e){var t=e.type,i=e.value;this._layer.clipartItem.customizable&&t===F.a.DESIGN_FILL_TYPE_COLOR&&(this._layer.fillColor=i,this._par.onColorChanged&&this._par.onColorChanged(this._layer))},_onLayerWidthChanged:function(e){[B.a.TECHNIQUE_PROMO,K.n].includes(this._par.templates.getTechnique())||this._validateWidthHeightInput(event.target.value,this._widthInputWarningNode,this._widthInput);var t=this._layer.isCropPositionUpdateNeeded(),i=t?this._layer.cropPosition:this._layer.position,n=i.getClone().copyPositions(i),r=i.width/i.height;n.width=parseFloat(e),(this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()||this._layer.isPropLayer()||this._layer.lockUniScaling)&&(n.height=n.width/r,n.height<this._heightInput._params.minValue&&(n.height=this._heightInput._params.minValue,n.width=n.height*r,this._widthInput.setValue(n.width)),this._heightInput.setValue(n.height)),n.left+=(i.width-n.width)/2,n.top+=(i.height-n.height)/2,t?this._par.templates.updateCropLayerPosition(this._layer,n,this,K.d):this._par.templates.updateLayerPosition(this._layer,n,this,!0),this._par.templates.getChangeListener().notifyLayerConfigurationChanged(this._layer,this)},_onLayerHeightChanged:function(e){[B.a.TECHNIQUE_PROMO,K.n].includes(this._par.templates.getTechnique())||this._validateWidthHeightInput(event.target.value,this._heightInputWarningNode,this._heightInput);var t=this._layer.isCropPositionUpdateNeeded(),i=t?this._layer.cropPosition:this._layer.position,n=i.getClone().copyPositions(i),r=i.width/i.height;n.height=parseFloat(e),(this._layer.isImageLayer()||this._layer.isLicensedAssetLayer()||this._layer.isPropLayer()||this._layer.lockUniScaling)&&(n.width=n.height*r,n.width<this._widthInput._params.minValue&&(n.width=this._widthInput._params.minValue,n.height=n.width/r,this._heightInput.setValue(n.height)),this._widthInput.setValue(n.width)),n.left+=(i.width-n.width)/2,n.top+=(i.height-n.height)/2,t?this._par.templates.updateCropLayerPosition(this._layer,n,this,K.d):this._par.templates.updateLayerPosition(this._layer,n,this,!0),this._par.templates.getChangeListener().notifyLayerConfigurationChanged(this._layer,this)},_validateWidthHeightInput:function(e,t,i){parseFloat(e)>i._params.maxValue?(o.a.removeClassName(t,"pf-d-none"),o.a.removeClassName(this._inputWarningNode,"pf-d-none"),o.a.addClassName(i.nodeInputGroup,"pf-border pf-border-red"),i.setValue(i._params.maxValue)):(o.a.addClassName(t,"pf-d-none"),o.a.addClassName(this._inputWarningNode,"pf-d-none"),o.a.removeClassName(i.nodeInputGroup,"pf-border"),o.a.removeClassName(i.nodeInputGroup,"pf-border-red"))},_onLockUniScalingClicked:function(){this._layer.lockUniScaling=!this._layer.lockUniScaling,this._layer.lockUniScaling?(o.a.removeClassName(this._linkNode,"pf-i-link-off"),o.a.removeClassName(this._linkNode,"pf-text-gray"),o.a.addClassName(this._linkNode,"pf-i-link pf-text-dark")):(o.a.removeClassName(this._linkNode,"pf-i-link"),o.a.removeClassName(this._linkNode,"pf-text-dark"),o.a.addClassName(this._linkNode,"pf-i-link-off pf-text-gray")),this._par.templates.getChangeListener().notifyLayerConfigurationChanged(this._layer,this),this._par.templates.silentlySetActiveLayer(this.layer)},_onMockupLockedClicked:function(){this._layer.isLocked=!this._layer.isLocked,sessionStorage.setItem("layerIsLocked",this._layer.isLocked),this._layer.isLocked?(o.a.removeClassName(this._lockedCaptionNode,"pf-d-none"),o.a.removeClassName(this._lockBtnNode,"pf-i-lock-outline"),o.a.addClassName(this._lockBtnNode,"pf-i-lock-open-outline"),o.a.addClassName(this._lockBtnIconNode,"pf-border-dark")):(o.a.removeClassName(this._lockBtnIconNode,"pf-border-dark"),o.a.removeClassName(this._lockBtnNode,"pf-i-lock-open-outline"),o.a.addClassName(this._lockBtnNode,"pf-i-lock-outline"),o.a.addClassName(this._lockedCaptionNode,"pf-d-none")),this._par.templates.getChangeListener().notifyLayerConfigurationChanged(this._layer,this),this._par.templates.silentlySetActiveLayer(this.layer)},_onResetButtonClicked:function(){this._layer.isMockupLayer()?(o.a.removeClassName(this._lockBtnNode,"pf-border-dark"),o.a.removeClassName(this._lockBtnIconNode,"pf-i-lock-open-outline"),o.a.addClassName(this._lockBtnIconNode,"pf-i-lock-outline"),o.a.addClassName(this._lockedCaptionNode,"pf-d-none"),this._layer.isLocked=!0,sessionStorage.removeItem("layerIsLocked")):(o.a.removeClassName(this._linkNode,"pf-i-link-off"),o.a.removeClassName(this._linkNode,"pf-text-gray"),o.a.addClassName(this._linkNode,"pf-i-link pf-text-dark"),this._layer.lockUniScaling=!0),this._par.templates.getChangeListener().notifyLayerConfigurationChanged(this._layer,this)},_needsColorDropdown:function(){var e;return this._layer.clipartItem.customizable&&!(null!==(e=Object(G.a)())&&void 0!==e&&e.isJewelry())},_needsDefaultColor:function(){return!(this._layer.fillColor&&!(this._layer.fillColor.length<1)||!this._layer.clipartItem.customizable)},_needsColorUpdate:function(){return!(this._layer.fillColor&&!(this._layer.fillColor.length<1)||this._layer.overrideImage||this._layer.overrideImagePulse||!this._par.onColorChanged||!this._layer.clipartItem.customizable)},_getColors:function(){var e,t;return Object(ee.c)(this._isEmbroideryTechnique(),this._par.activePlacementId,null===(e=(t=this._par).isAllOver)||void 0===e?void 0:e.call(t),!0)},_getType:function(){switch(!0){case this.isClipartLayer():return dlang("generator","Clipart");case this.isTextLayer():return dlang("generator","Text");case this.isImageLayer():return dlang("generator","File");case this.isLicensedAssetLayer():return dlang("generator","Premium");case this.isPropLayer():return dlang("generator","Prop");case this.isMockupLayer():return dlang("generator","Mockup");default:return""}},_isAddingLayerCustomizationAllowed:function(e){return!(!this._par.allowCustomizableLayers||this.isClipartLayer()||this.isLicensedAssetLayer()||this._layer.isCropState)&&(this._par.templates.getTemplateByLayer(e).technique!==B.a.TECHNIQUE_EMBROIDERY||this.isTextLayer())},append:function(e){var t=this;return this.node.append(e),setTimeout((function(){$(t.node).find('[data-toggle="tooltip"]').tooltip({trigger:"hover",container:document.body}).on("click",(function(e){document.querySelector(".remove-background-tooltip")||$(document.body).hasClass("is-touch")||$(t.node).find('[data-toggle="tooltip"]').tooltip("hide")})),$(t.node).find('[data-toggle="dropdown"]').dropdown()}),0),this}},o.a.Base);window&&((globalThis||{}).PFProductPushLayerPickerItem=oe);var se=Class({callback:null,_placementTitle:"",__construct:function(e,t){this._placementTitle=t,this.callback=e,this._render()},_render:function(){var e=new s.a.Par;e.modalDialogClass="modal-md",this._modal=new s.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",dlang("generator","Are you sure?")),tag("p","",dlang("generator","The {placement_title} youâre copying the design to already has a design. Do you wish to replace the existing design with the new one?").replace("{placement_title}",this._placementTitle))])]);this._modal.setContent(t);var i=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._callback.bind(this)},dlang("generator","Yes, replace")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:this._modal.remove.bind(this._modal)},dlang("generator","Cancel"))]);this._modal.setFooterContent(i),this._modal.show()},_callback:function(){this._modal.remove(),this.callback()}});window&&((globalThis||{}).PFProductPushCopyWarningPopup=se);var le=i("JQxb"),ce=i("CvqS"),ue=i("Ii6r"),de=i("Kblr"),he=i("qkdH"),pe=i("7pSD"),fe=(i("n6mh"),i("x0He")),ge=i("46ud"),me=i("KLvT"),_e=i("v4sp"),ve=i("/w+P"),ye=i("YvQZ"),be=i("0nZy"),Pe=i("Iy0a"),Ce=i("mBxu"),Te=i("NCUI"),we=i("stj/"),Ie=i("SBaP");function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Oe(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ee(a,n,r,o,s,"next",e)}function s(e){Ee(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ke(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Le(e,t){return(Le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=De(e);if(t){var r=De(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Re(this,i)}}function Re(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?Ne(e):t}function Ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xe(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Me(e,t,"get"))}function Fe(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Me(e,t,"set"),i),i}function Me(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Be="EmbroiderySoccoDisclaimerStorageKey";var Ve=new WeakMap,je=new WeakSet,Ue=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Le(e,t)}(a,e);var t,i,n,r=Ae(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),je.add(Ne(e)),Ve.set(Ne(e),{writable:!0,value:void 0}),e.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Ne(e),je,ze).call(Ne(e)),e}return t=a,(i=[{key:"destroy",value:function(){xe(this,Ve).destroy(),Fe(this,Ve,null)}}])&&ke(t.prototype,i),n&&ke(t,n),a}(Ie.a);function ze(){return Ge.apply(this,arguments)}function Ge(){return(Ge=Oe(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new fe.b).components={"embroidery-socco-disclaimer":function(){return i.e(203).then(i.bind(null,"JKL8"))}},t.template="<embroidery-socco-disclaimer @close=\"emitEvent('onClosed')\"/>",t.emitEvent=function(e){"onClosed"===e&&(localStorage.setItem(Be,"1"),n.destroy())},Fe(this,Ve,new fe.a(t)),xe(this,Ve).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function He(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qe(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return qe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qe(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ye(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function We(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ye(a,n,r,o,s,"next",e)}function s(e){Ye(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ke,Ze=Class({fileCountLimit:5,licensedAssetCountLimit:10,groupLimit:2,_pickerItems:{},nodeError:null,_par:null,_productOptionsPicker:null,_productOptions:null,_productOptionsValues:null,_forceDisableCustomizer:!1,_templatesAvailableForLayerCopy:[],_unsubscribedFromEvents:!1,_isPopupBusy:!1,_placementLimiter:null,_isAllHidden:!1,__construct:function(e){this._par=e,this._par.fileCountLimit&&(this.fileCountLimit=this._par.fileCountLimit),this._par.licensedAssetCountLimit&&(this.licensedAssetCountLimit=this._par.licensedAssetCountLimit),this._productOptions={},this._productOptionsValues={},o.a.O2O(this._productOptions,this._par.productOptions),this.setProductOptionsValues(this._par.productOptionsValues),this._setTemplatesAvailableForLayerCopy(),this._nodeTemplateInfo=new le.a,this.node=tag("div","",[this._nodeTemplateInfo.node,this._nodePicker=tag("div"),Object(Z.f)()?tag("div","pf-my-12 pf-pb-12",[e.designFillColorPicker]):"",this._nodeLayersTitle=tag("div","pf-position-relative pf-d-none",[tag("h6","pf-border-top pf-h6 pf-mt-12 pf-mb-12 pf-pt-16 pf-h5",dlang("generator","Layers"))]),this._nodeLayersCopy=tag("div"),this._nodeLayers=tag("div","nested-sortable"),this.nodeError=tag("div","alert alert-danger text-center hidden pf-p-12 pf-mt-16",lang("Please add a design!")),this._nodePlacementOptions=tag("div","layer-picker__item__options-picker pf-mt-16")]),this._placementLimiter=new de.a(this._par.templates,this._par.placementSelector),this._subscribeTemplateEvents(),this.render()},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerRemoved).unsubscribe(this._updateLayers).unsubscribe(this._renderCurrentPlacement).unsubscribe(this._updateRotationInput)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerRemovedListener(this._onLayerRemoved).addOnTemplateResizedListener(this._updateLayers).addOnActiveLayerChanged(this._renderCurrentPlacement).addOnLayerConfigurationChanged(this._renderCurrentPlacement).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerOrderChangedListener(this._renderCurrentPlacement)},_unsubscribeTemplateEventsIfNeeded:function(){return!(Object(f.a)(this.node)&&!this._unsubscribedFromEvents)&&(this._unsubscribeTemplateEvents(),this._unsubscribedFromEvents=!0,!0)},resubscribeToEvents:function(){this._unsubscribedFromEvents&&Object(f.a)(this.node)&&this._par.templates&&(this._unsubscribeTemplateEvents(),this._subscribeTemplateEvents(),this.render())},_setTemplatesAvailableForLayerCopy:function(){if(this._canCopyLayers(this._par.activePlacementId)){var e=this._par.templates.getActiveTemplate(this._par.activePlacementId),t=this._par.templates.getTemplates(),i=[];for(var n in t)for(var r in t[n])i.push(t[n][r]);this._templatesAvailableForLayerCopy=i.filter(function(t){if(e&&this._templatesMatchForCopy(e,t)&&this._canCopyLayers(t.placementId))return t.placement_title=this._par.placements.filter((function(e){if(e.id===t.placementId)return e.title})).shift().title,t}.bind(this))}},_templatesMatchForCopy:function(e,t){return e.placementId!==t.placementId&&e.width===t.width&&e.height===t.height},_canCopyLayers:function(e){var t=[F.a.TYPE_SLEEVE_LEFT,F.a.TYPE_SLEEVE_RIGHT,F.a.TYPE_LEG_LEFT,F.a.TYPE_LEG_RIGHT];return!this._par.templates.isCoverMode()&&t.indexOf(e)>-1},_onLayerRemoved:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=this._par.getSelectedMockupVariant(),n=i?i.templateId:null,r=this._par.templates.getActiveLayer()||this._par.templates.getFirstLayer(this._par.activePlacementId,n);if(r){var a=this._par.templates.getTemplateByLayer(r);a&&a.layers.length?this._par.templates.silentlySetActiveLayer(r):o.a.clearNode(this._nodePlacementOptions)}this._renderFiles()}},_renderCurrentPlacement:function(e,t){if(!(this._unsubscribeTemplateEventsIfNeeded()||this===t||t instanceof N.a)){var i=this._getAllPickerItemsInPlacement();for(var n in i)if(!i[n].hasLayerSizeInput())return;this._renderFiles()}},_getAllPickerItemsInPlacement:function(e){var t;e||(e=this._par.activePlacementId);var i=[];return null===(t=this._pickerItems[e])||void 0===t||t.forEach((function(e){e.items?e.items.forEach((function(e){return i.push(e)})):i.push(e)})),i},_updateRotationInput:function(e,t){if(!(this._unsubscribeTemplateEventsIfNeeded()||t instanceof N.a)){var i=this._getAllPickerItemsInPlacement();if(i.length){var n=e.position.rotation>180?e.position.rotation-360:e.position.rotation;i.filter((function(t){return t.hasLayer(e)})).forEach((function(e){e.updateRotationInput(n)}))}}},_updateWidthHeightInput:function(e,t){if(!(this._unsubscribeTemplateEventsIfNeeded()||t instanceof W.a)){var i=this._getAllPickerItemsInPlacement();i.length&&i.filter((function(t){return t.hasLayer(e)})).forEach((function(t){return t.updateWidthHeightInput(e)}))}},render:function(){var e=this;return We(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._par.waitInitialDesignerRender();case 2:e._renderFiles(),e._renderCopyLayersTool();case 4:case"end":return t.stop()}}),t)})))()},_createSortableList:function(e,t){var i=this,n=g.a.isWindowBiggerThan(g.a.SIZES.SM);new he.a(e,{handle:".layer-picker__item__handle, .layer-picker__group__handle"+(n?", .layer-picker__item__handle-wrap, .layer-picker__group__handle-wrap":""),group:"nested",fallbackOnBody:!0,swapThreshold:.65,onStart:function(e){var t=r()(e.item);e.item.classList.add("layer-picker__item--ghost"),t.find('[data-toggle="popover"]').popover("hide"),t.find('[data-toggle="tooltip"]').tooltip("hide")},onEnd:function(e){e.item.classList.remove("layer-picker__item--ghost")},onAdd:function(e){if(e.item.getAttribute("data-group-id"))i._renderFiles();else{var n=parseInt(e.from.getAttribute("data-layer-group-id")||0),r=parseInt(e.to.getAttribute("data-layer-group-id")||0),a=parseInt(e.item.getAttribute("data-layer-id")||0),o=i._pickerItems[i._par.activePlacementId],s=0;if(n>0&&r>0){var l=o.findIndex((function(e){return e.uniqueId===n})),c=o[l],u=o.findIndex((function(e){return e.uniqueId===r})),d=o[u],h=c.items.splice(e.oldIndex,1)[0];d.items.splice(e.newIndex,0,h);for(var p=0,f=o.length;p<f;p++)if(o[p].group){if(o[p].uniqueId===r){s+=e.newIndex;break}s+=o[p].items.length}else s++;var g=t.length-s-1,m=h.getLayer();m.addToGroupType(d.getGroupTypeItem(),d.uniqueId),i._par.templates.reorderLayer(m,g)}else if(n){var _=o.findIndex((function(e){return e.uniqueId===n})),v=o[_].items.splice(e.oldIndex,1)[0];o.splice(e.newIndex,0,v);for(var y=0,b=o.length;y<b;y++)if(o[y].group)s+=o[y].items.length;else{var P=o[y].node.getAttribute("data-layer-id");if(a&&a===parseInt(P))break;s++}var C=t.length-s-1,T=v.getLayer();T.removeFromGroupType(),i._par.templates.reorderLayer(T,C)}else if(r){var w=o.findIndex((function(e){return e.uniqueId===r})),I=o[w],S=o.splice(e.oldIndex,1)[0];I.items.splice(e.newIndex,0,S);for(var E=0,O=o.length;E<O;E++)if(o[E].group){if(o[E].uniqueId===r){s+=e.newIndex;break}s+=o[E].items.length}else s++;var k=t.length-s-1,L=S.getLayer();L.addToGroupType(I.getGroupTypeItem(),I.uniqueId),i._par.templates.reorderLayer(L,k)}}},onSort:function(e){var n=parseInt(e.from.getAttribute("data-layer-group-id")||0),r=parseInt(e.to.getAttribute("data-layer-group-id")||0),a=parseInt(e.item.getAttribute("data-layer-id")||0),o=parseInt(e.item.getAttribute("data-group-id")||0),s=i._pickerItems[i._par.activePlacementId];if(n===r){var l=0;if(n){var c=s.find((function(e){return e.uniqueId===n})),u=c.items.splice(e.oldIndex,1)[0];c.items.splice(e.newIndex,0,u);for(var d=0,h=s.length;d<h;d++)if(s[d].group){if(s[d].uniqueId===n){l+=e.newIndex;break}l+=s[d].items.length}else l++;var p=t.length-l-1,f=u.getLayer();i._par.templates.reorderLayer(f,p)}else{var g=s.splice(e.oldIndex,1)[0];s.splice(e.newIndex,0,g);for(var m=0,_=s.length;m<_;m++)if(s[m].group){if(o&&o===s[m].uniqueId)break;l+=s[m].items.length}else{var v=s[m].node.getAttribute("data-layer-id");if(a&&a===parseInt(v))break;l++}if(g.group){var y=t.length-g.items.length-l,b=g.items[g.items.length-1].getLayer();i._par.templates.reorderLayerGroup(b,y,g.items.length)}else{var P=t.length-l-1,C=g.getLayer();i._par.templates.reorderLayer(C,P)}}}}})},_removeTooltips:function(){r()(this._nodeLayers).find('[data-toggle="tooltip"]').tooltip("destroy")},_renderFiles:function(){var e;O.a.TagPopoverRemove(),this._forceDisableCustomizer=this._par.activePlacementId===F.a.TYPE_LABEL_INSIDE;var t=this._par.templates.getActiveTemplate(this._par.activePlacementId);this._removeTooltips(),o.a.clearNode(this._nodeLayers);var i,n=[],r={};Object(Z.f)()&&!t?(i=this._par.templates.getLayersByType(Pe.a,this._par.activePlacementId),this._par.templates.silentlySetActiveLayer(i[0])):i=t?t.layers:[];for(var a=this._par.templates.getActiveLayer(),s=this._par.templates.getActiveGroupLayers(),l=i.length,c=null;l--;){var u=i[l];if(u.groupId)if(u.groupId in r)c&&c.updateDimensions(),c=r[u.groupId];else{var d=new v;d.quickDesignId=u.quickDesignId,d.groupType=u.groupType,d.uniqueId=u.groupId,d.onClicked=this._onGroupClicked.bind(this),d.onRequestRemoval=this._removeGroup.bind(this,t,u.groupId),d.onRequestPositionReset=this._resetGroupPositions.bind(this,u.groupId),d.onRequestAlign=this._alignGroup.bind(this,u.groupId),d.mirroredGroupUniqueId=u.parentLayerUniqueId?u.groupId:null,c=new y.a(d),r[u.groupId]=c,null!=s&&s.length&&s[0].groupId===u.groupId&&(c.setActive(!0),Object(Ce.a)(c)),c.append(this._nodeLayers),n.push(c)}else c=null;var h=new b;h.templates=this._par.templates,h.placements=this._par.placements,h.activePlacementId=this._par.activePlacementId,h.layer=u,h.onRequestRemoval=this._removeFile.bind(this,t,u),h.onRequestAlign=this.alignLayer.bind(this,u),h.onRequestFlipHorizontally=this._flipHorizontally.bind(this,u),h.onRequestFlipVertically=this._flipVertically.bind(this,u),h.onRequestCropRectangle=this._cropRectangle.bind(this,u),h.onRequestRotate=this.onRotate.bind(this,u),h.onRequestPositionReset=this._resetPositions.bind(this,u),h.onDuplicate=this._par.onDuplicate.bind(this,u),h.onColorChanged=this._colorChanged.bind(this,u),h.onClicked=this._onItemClicked.bind(this,u),h.onEdit=this._par.onItemEdit?this._par.onItemEdit.bind(this,u):null,h.onChangeIsCustomizable=this._onChangeIsCustomizable.bind(this,u),h.onRequestRemoveBg=this._par.onRequestRemoveBg.bind(null,u),h.enableRemoveBg=this._par.enableRemoveBg,h.allowCustomizableLayers=!this._forceDisableCustomizer&&this._par.allowCustomizableLayers,h.isAllOver=this._par.isAllOver,h.validateAddingLayer=this._par.validateAddingLayer,h.showPatternPicker=this._par.showPatternPicker,h.fileCountLimit=this._par.fileCountLimit,h.licensedAssetCountLimit=this._par.licensedAssetCountLimit,h.openQualityTagPopoverOnRender=u.uniqueId===this._par.openQTagPopoverLayerId,h.onSelectQualityTag=this._par.onSelectQualityTag.bind(this),h.updateGroupDimensions=c?c.updateDimensions:null,h.hideQualityNode=this._par.hideQualityNode,h.showSizesInPx=this._par.showSizesInPx;var p=new oe(h);a&&a.uniqueId===u.uniqueId&&(c&&c.activateList(),p.setActive(!0),Object(Te.c)()&&Object(Te.b)()!==u.uniqueId&&"text"===Object(Te.d)()||Object(Ce.a)(u)),c?(p.append(c.itemList),c.items.push(p)):(p.append(this._nodeLayers),n.push(p)),c&&c.updateDimensions()}var f=[].slice.call(this.node.querySelectorAll(".nested-sortable"));for(l=0;l<f.length;l++)this._createSortableList(f[l],i);n.length>0&&!this._isAllHidden?o.a.removeClassName(this._nodeLayersTitle,"pf-d-none"):o.a.addClassName(this._nodeLayersTitle,"pf-d-none"),this._pickerItems[this._par.activePlacementId]=n;var g,m=this._par.conflictCalculator.getConflictingPlacementTitles(this._par.activePlacementId),_=this._getAllPickerItemsInPlacement().filter((function(e){return!e.group&&e.isImageLayer()})),P=this._getAllPickerItemsInPlacement().filter((function(e){return e.isLicensedAssetLayer()}));if(null===(e=this._par.getLayerPickerChooser())||void 0===e||e.detach(),o.a.clearNode(this._nodePicker),m.length)tag("div",{className:"alert alert-warning",innerHTML:lang("Can't be combined with {tiles}").replace("{tiles}",m.join(", "))}).append(this._nodePicker);else if(this._placementLimiter.isLimitReached())this._renderPlacementLimitWarning();else{var C;this._par.getLayerPickerChooser().append(this._nodePicker),Object(ye.e)({key:be.b.IS_TITLE_HIDDEN,value:!0}),(g=null===(C=Object(G.a)())||void 0===C?void 0:C.isEmbroideredCrewSocks(),!g||localStorage.getItem(Be)?tag("div"):new Ue).append(this._nodePicker),this._par.nodeTemplateTypePicker&&(this._par.nodeTemplateTypePicker.append(this._nodePicker),0===i.length&&tag("hr").append(this._nodePicker));var T=_.length<this.fileCountLimit,w=dlang("dashboard","Max limit is {number} image layers. Please delete a layer if you want to add another one.").replace("{number}",String(this.fileCountLimit));Object(ye.f)({key:be.k.FILES_COUNT_RESTRICTION,value:w,shouldUnset:T}),T=P.length<this.licensedAssetCountLimit,w=dlang("dashboard","Max limit is {number} Premium image layers. Please delete a layer if you want to add another one.").replace("{number}",String(this.licensedAssetCountLimit)),Object(ye.f)({key:be.k.LICENSED_ASSET_COUNT_RESTRICTION,value:w,shouldUnset:T}),T=Object.keys(r).length<this.groupLimit,w=dlang("generator","The limit is {number} quick design groups. Please delete a group if you want to add another one.").replace("{number}",String(this.groupLimit)),Object(ye.f)({key:be.k.QUICKDESIGN_COUNT_RESTRICTION,value:w,shouldUnset:T})}n.length?Object(G.a)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo():(Object(Te.d)()===we.b.TEXT&&Object(Te.c)()||Object(Ce.a)(null),this.clearGuidelineIfo()),this._par.nodeVideoTutorial&&this._par.nodeVideoTutorial.append(this._nodePicker),this._renderQuickDesignOnboarding(),n.length&&this.renderOptions()},_renderQuickDesignOnboarding:function(){var e,t=this,n=PF.Customer.environmentId;if(!(n>0&&n%2!=0)&&Object(ye.b)(be.b.IS_QUICK_DESIGNS_PICKER_AVAILABLE)){var r=(null===(e=this._par.templates.getActiveTemplate(this._par.activePlacementId))||void 0===e?void 0:e.layers)||[];if(r.length){if(r.some((function(e){return e.quickDesignId||e.groupId})))try{window.localStorage.setItem("quick-design-onboarding-closed","1")}catch(e){}}else{try{if("1"===window.localStorage.getItem("quick-design-onboarding-closed"))return}catch(e){}var a=new fe.b;a.components={"quick-design-onboarding":function(){return i.e(303).then(i.bind(null,"Ah2i"))}},a.template="<quick-design-onboarding @close=\"emitEvent('close', $event)\"/>",a.emitEvent=function(e,i){if("close"===e){null==o||o.remove();try{window.localStorage.setItem("quick-design-onboarding-closed","1")}catch(e){}var n;if(!i)null===(n=t._par.getLayerPickerChooser())||void 0===n||n.callEvent("onQuickDesignsPickerChosen")}};var o=new fe.a(a);o.append(this._nodePicker)}}},_renderPlacementLimitWarning:function(){var e;tag("div",{className:"alert alert-warning",innerHTML:dlang("generator","You can choose max {limit} print placements for this product").replace("{limit}",this._placementLimiter.getProductPlacementLimit(null===(e=Object(G.a)())||void 0===e?void 0:e.productId))}).append(this._nodePicker)},clearGuidelineIfo:function(){this._nodeTemplateInfo.clearGuidelineInfo()},setProductOptionsValues:function(e){return this._productOptionsValues||(this._productOptionsValues={}),o.a.O2O(this._productOptionsValues,e),this},renderOptions:function(){if(o.a.clearNode(this._nodePlacementOptions),this._par.onProductOptionsChanged){var e=new ce.a;e.inputNamePrefix="gp-",e.optionItems=this._productOptions,e.values=this._productOptionsValues,e.onChange=this._onProductOptionsChanged,this._productOptionsPicker=new d.a(e),this._productOptionsPicker.setFileTypesWithFiles(this._par.templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._par.templates.getPlacementIdsHavingFiles(_.a)),this._productOptionsPicker.setPickerGeneratorPlacements(this._par.productOptionsPlacements),this._productOptionsPicker.setSelectedPlacementId(this._par.activePlacementId),this._productOptionsPicker.append(this._nodePlacementOptions)}},_onProductOptionsChanged:function(e){var t=this._productOptionsPicker.getValues();return t.hasOwnProperty(e.getName())||(t[e.getName()]=e.getValue()),this.setProductOptionsValues(t),this._par.onProductOptionsChanged(t)},_renderCopyLayersTool:function(){if(!(this._pickerItems[this._par.activePlacementId].length<=0||this._templatesAvailableForLayerCopy.length<=0)){for(var e in o.a.addClassName(this._nodeLayersCopy,"pf-my-24"),this._templatesAvailableForLayerCopy)tag("a",{className:"pf-link-block col-12 pf-mb-8",onclick:this._onClickCopyLayers.bind(this,e)},[tag("i","pf-i pf-i-content-duplicate pf-i-18 pf-text-gray pf-mb-2"),tag("span","pf-pl-4",dlang("generator","Copy this design on the {placement_title}").replace("{placement_title}",this._templatesAvailableForLayerCopy[e].placement_title))]).append(this._nodeLayersCopy);tag("div","pf-my-24 pf-border-bottom").append(this._nodeLayersCopy)}},_onClickCopyLayers:function(e){this._templatesAvailableForLayerCopy[e].hasLayers()?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new se(this._copyLayersAndShowMessage.bind(this,e),this._templatesAvailableForLayerCopy[e].placement_title)):this._copyLayersAndShowMessage(e)},_copyLayersAndShowMessage:function(e){var t=this._templatesAvailableForLayerCopy[e];this._par.templates.copyLayersBetweenTemplates(this._par.activePlacementId,t.placementId,t.templateId),this._showSuccsessMessage(dlang("generator","Layers are duplicated on the {placement_title}").replace("{placement_title}",t.placement_title))},_showSuccsessMessage:function(e){var t=r()(".modal-content");t.length<=0&&(t=r()("body")),new D.a(e,D.a.TYPE_SUCCESS,3e3).append(t[0])},_onItemClicked:function(e,t,i){i&&i.stopPropagation();var n=this._getAllPickerItemsInPlacement();for(var r in n){var a=n[r];a.setActive(t===a)}this._par.templates.setActiveLayer(e,this,!1)},_onGroupClicked:function(e,t){var i,n;if(!(null!==(i=t.target)&&void 0!==i&&i.classList.contains("layer-toggle")||null!==(n=t.target)&&void 0!==n&&n.parentElement.classList.contains("layer-toggle"))){t&&t.stopPropagation();var r=this._getAllPickerItemsInPlacement();for(var a in r){r[a].setActive(!1)}var o=e.items.map((function(e){return e.getLayer()}));this._par.templates.setActiveGroup(o,this,!1)}},_removeGroup:function(e,t){var i=new ue.a;i.id=e.placementId,i.title="";var n=[];for(var r in this._pickerItems[this._par.activePlacementId]){var a,o=this._pickerItems[this._par.activePlacementId][r];if(null!==(a=o.items)&&void 0!==a&&a.length&&o.uniqueId===t){n=o.items.map((function(e){return e.getLayer()}));break}}this._par.templates.removeGroup(e,n)},_removeFile:function(e,t){var i=new ue.a;i.id=e.placementId,i.title="",this._par.templates.removeLayer(e,t)},requestFilePicking:(Ke=We(regeneratorRuntime.mark((function e(t){var i,n,r,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((n=new u.a).onPickCallback=this._onFilePicked.bind(this,t),(r=null===(i=Object(G.a)())||void 0===i?void 0:i.productId)&&(n.productId=r,n.technique=Object(p.a)(r).getTechniqueFromMemory()),PF.Customer.customerId?(n.storeId=this._par.storeId,n.includeSwatches=this._par.includeSamples):(n.showSearch=!1,n.allowStoreChange=!1,n.storeId=z.a),n.storeId!==z.a){e.next=8;break}return this.initFileLibraryModal(t,n),e.abrupt("return");case 8:(new h.a).getStoresWithPrintFiles((function(e){if(e.length)a.initFileLibraryModal(t,n);else{var i=new ve.b;i.callback=a.initFileLibraryModal.bind(a,t,n),ve.a.popup(i,dlang("library","Create a store for storing files")).hide()}}));case 9:case"end":return e.stop()}}),e,this)}))),function(e){return Ke.apply(this,arguments)}),registerFileLibraryState:function(){return We(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return Promise.all([i.e(13),i.e(1),i.e(2),i.e(16),i.e(211)]).then(i.bind(null,"JR7u"))},e.next=3,Promise.all([t]);case 3:return n=e.sent,r=He(n,1),a=r[0],Object(me.e)("fileLibrary",_e.a,{skipIfAlreadyRegistered:!0}),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})))()},initFileLibrary:function(e,t,i){var n=this;return We(regeneratorRuntime.mark((function r(){var a,o,s;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return a=null,o=new fe.b,r.next=4,n.registerFileLibraryState();case 4:return s=r.sent,o.components={"file-library":s},o.template='\n                <file-library\n                    :directory-limit="directoryLimit"\n                    :flow-data="flowData"\n                    @place-item="emitEvent(\'place-item\', $event)"\n                />\n            ',o.initialData={directoryLimit:999,flowData:{id:ge.f.generator,isAnonymous:t.storeId===z.a,productId:t.productId,technique:t.technique}},o.emitEvent=function(t,r){"place-item"===t&&(n._onFilePicked(e,r),i.remove())},o.plugins={store:Object(me.a)()},a=new fe.a(o),r.abrupt("return",a);case 12:case"end":return r.stop()}}),r)})))()},initFileLibraryModal:function(e,t){var i=this;return We(regeneratorRuntime.mark((function n(){var r,a,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new s.a.Par).title=PF.Customer.customerId?dlang("library","Store's file library"):dlang("library","File library"),r.nodeClass="file-library-modal",r.modalDialogClass="modal-lg bs-modal-lx",r.deleteOnHide=!0,a=new s.a(r),n.next=8,i.initFileLibrary(e,t,a);case 8:return o=n.sent,a.setContent(o),a.show(),n.abrupt("return",a);case 12:case"end":return n.stop()}}),n)})))()},_alignGroup:function(e,t,i){var n=this;i&&i.stopPropagation();var r=null;this._pickerItems[this._par.activePlacementId].forEach((function(t){t.group&&t.uniqueId===e&&(r=t)}));var a=r.getGroupBBox(),o=a.getClone().align(t),s=a.top-o.top,l=a.left-o.left,c=r.items.map((function(e){return e.getLayer()}));c.forEach((function(e){var t=n._par.templates.getFreshLayer(e).position.getClone();t.top-=s,t.left-=l,t.canMoveOutOfBounds=!0,n._par.templates.updateLayerPosition(e,t,Ze.GROUP_UPDATE)})),this._par.templates.setActiveGroup(c,this,!0)},alignLayer:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&i.stopPropagation();var n=e.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(e),a=n?r.cropPosition:r.position,o=a.getClone(),s=o.align(t);n?this._par.templates.updateCropLayerPosition(e,s,this,K.b):this._par.templates.updateLayerPosition(e,s,this)},_flipHorizontally:function(e,t){t&&t.stopPropagation(),e.flipX=!e.flipX,this.notifyLayerFlipChanged(e,!0,!1)},_flipVertically:function(e,t){t&&t.stopPropagation(),e.flipY=!e.flipY,this.notifyLayerFlipChanged(e,!1,!0)},_cropRectangle:function(e,t){null==t||t.stopPropagation(),r()(".tooltip").tooltip("hide"),e.isCropState=!e.isCropState,this._par.templates.getChangeListener().notifyLayerConfigurationChanged(e,this)},notifyLayerFlipChanged:function(e,t,i){var n={flippedX:t,flippedY:i};if(e instanceof _.a?this._par.templates.updateImageLayer(e,this,!1,n):e instanceof m.a?this._par.templates.updateClipartLayer(e,this,n):e instanceof V.a?this._par.templates.updateLicensedAssetLayer(e,this,n):console.log("Cannot update layer flip settings!",e),e.isCropPositionUpdateNeeded()){var r=this._par.templates.recalculateBasePositionsOnFlip(e,t,i);this._par.templates.updateLayerPosition(e,r,this,!0,n)}else this._par.templates.updateLayerPosition(e,e.position,this,!0)},_resetPositions:function(e,t){t&&t.stopPropagation(),this._par.templates.resetLayer(e)},_resetGroupPositions:function(e,t){t&&t.stopPropagation(),this._alignGroup(e,M.a.ALIGNMENT.CENTER)},onRotate:function(e,t,i){var n=e.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(e),a=(n?r.cropPosition:r.position).getClone();a.rotation=parseFloat(t),n?this._par.templates.updateCropLayerPosition(e,a,i,K.c):this._par.templates.updateLayerPosition(e,a,i)},updateLayer:function(e){var t=this._getAllPickerItemsInPlacement();for(var i in t){var n=t[i];if(n.getLayer().uniqueId===e.uniqueId){n.updateLayer(e);break}}},_updateLayers:function(e,t,i){var n=this;if(!this._unsubscribeTemplateEventsIfNeeded()){if(!Object(f.a)(this.node))return!1;this._updateWidthHeightInput(t,i),this._getAllPickerItemsInPlacement().forEach((function(e){t&&e.getLayer().uniqueId===t.uniqueId&&e.updateLayer(n._par.templates.getFreshLayer(e.getLayer()))}))}},getLayerIndexInPicker:function(e,t,i){var n=this._getAllPickerItemsInPlacement(e);for(var r in n){if(n[r].getLayer().uniqueId===t)return i?n.length-r-1:r}return-1},_colorChanged:function(e){this._par.onColorChanged&&this._par.onColorChanged(e)},_onFilePicked:function(e,t){if(!t.width||!t.height)return console.error(lang("Cannot use this file, because width or height is not known")),void this.requestFilePicking(e);this._par.onPicked&&this._par.onPicked(e,t)},getValueCount:function(){return 1},isValuePicked:function(){return this._par.templates.getPlacementIdsHavingFiles().length>0||this._par.hasAtLeastOneDesignFill()},hasSameProductOptionValues:function(e,t){return!this._productOptionsPicker||this._productOptionsPicker.hasSameValues(e,t)},checkProductOptionsStatus:function(){return!this._productOptionsPicker||(this._productOptionsPicker.hasValidOptions(),this._productOptionsPicker.updateErrorStatus())},getProductOptionsPicker:function(){return this._productOptionsPicker},_onChangeIsCustomizable:function(e){if(e.isCustomizable=!e.isCustomizable,this._par.templates){var t=this._par.templates.getTemplateByLayer(e);this._par.templates.changeCustomizableState(t,e,e.isCustomizable),this._par.templates.getChangeListener().notifyLayerCustomizableStateChanged([t])}this._par.onCustomizableChanged&&this._par.onCustomizableChanged(e)},hideAllExceptVuePicker:function(){this._isAllHidden=!0,o.a.addClassName(this._nodeTemplateInfo.node,"pf-d-none"),this._nodeDesignFillPicker&&o.a.addClassName(this._nodeDesignFillPicker,"pf-d-none"),o.a.addClassName(this._nodeLayersTitle,"pf-d-none"),o.a.addClassName(this._nodeLayersCopy,"pf-d-none"),o.a.addClassName(this._nodeLayers,"pf-d-none"),o.a.addClassName(this.nodeError,"pf-d-none"),o.a.addClassName(this._nodePlacementOptions,"pf-d-none")}},pe.a);Ze.checkForWarnings=function(e,t){var i=Object(G.a)();i&&!e&&i.isEmbroidery()?c.showPopup(Ze.checkForWarnings.bind(this,!0,t)):t()},Ze.TYPE_FILE="file",Ze.TYPE_TEXT="text",Ze.TYPE_TEXTBOX="textbox",Ze.TYPE_CLIPART="clipart",Ze.TYPE_MOCKUP="mockup",Ze.TYPE_QUICKDESIGN="quick_design",Ze.GROUP_UPDATE="group_update",Ze.LICENSED_ASSET="licensed_asset",window&&((globalThis||{}).PFProductPushLayerPicker=Ze)},"8POG":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("l99J"),r=i("dJr+"),a=i("edgZ"),o=i("xB0w"),s=i("XLZy"),l=i("nF4n"),c=i("slIU"),u=i("y70k"),d=Class({_par:null,_library:null,_uploader:null,_dragCounter:0,_dragCounterElement:0,_countUploading:0,_enabled:!0,_enabledBeforeElementDrag:!0,__construct:function(e){d.instanceCounter+=1,this._instanceCounter=d.instanceCounter,this._par=e||new o.a,this._par.targetNode?(this.node=this._par.targetNode,this._library=new a.a,this.fileInputNode=tag("input",{tag:"input",type:"file",className:"hidden",attr:{name:"file",multiple:"multiple"}}).append(this.node),l.a.addClassName(this.node,"dropzone"),l.a.addClassName(this.node,this._getEventNamespace()),this._setupUploaderPar(),this._initUploader(),this.node.ondragleave=this._onDragLeave,this.node.ondrop=this._onDrop,this.node.removeEventListener("dragenter",this._onDragEnter),this.node.addEventListener("dragenter",this._onDragEnter),this._par.elementDropNode&&(this.nodeElementDrop=this._par.elementDropNode,this.nodeElementDrop.ondragenter=this._onDragEnterElement,this.nodeElementDrop.ondragover=this._onDragOverElement,this.nodeElementDrop.ondragleave=this._onDragLeaveElement,this.nodeElementDrop.ondrop=this._onDropElement)):console.error("DropZone doesnt have a target node!")},_getEventNamespace:function(){return"dropzone-"+this._instanceCounter},_setupUploaderPar:function(){this._par.uploaderPar||(this._par.uploaderPar=new c.a.Par),this._par.uploaderPar.uploadDataUrl||(this._par.uploaderPar.uploadDataUrl=(new r.a).uploadDataUrl),this._par.uploaderPar.uploadCallbackUrl||(this._par.uploaderPar.uploadCallbackUrl=(new r.a).uploadCallbackUrl)},_initUploader:function(){var e=this._par.uploaderPar||new c.a.Par;e.nodeDropZone=this.node,e.node=this.fileInputNode,e.onDone=this._onDone,e.onStart=this._onStart,e.onFail=this._onFail,e.getUploadExtra=this._par.getUploadExtra,e.getMaxFileLayerCount=this._par.getMaxFileLayerCount,e.validateAddingLayer=this._par.validateAddingLayer,e.enableTransparencyValidation=!0,this._uploader=new c.a(e)},_onStart:function(){if(this._enabled){var e=this.node;this._par.isPushGenerator&&(e=document.getElementsByClassName("product-push")[0]),s.a.show(e)}},_onDone:function(e){var t=this;this._par.onDone&&e.id&&this._library.getByIds([e.id],(function(e){if(e&&e.length)for(var i in e)e[i].isProcessing()?n.a.listen(e[i],t._onPostDone):t._handleProcessedFile(e[i])}))},_onFail:function(e){this._par.onFail(e)},_onPostDone:function(e){var t=u.a.fromArray(e);this._handleProcessedFile(t)},_handleProcessedFile:function(e){this._countUploading-=1,this._library.cacheFile(e),this._countUploading<1&&s.a.hide(this.node),this._par.onDone&&this._par.onDone(e,this._countUploading,this._onPostDone)},_preventDefault:function(e){e.preventDefault()},_hide:function(){this._enabled&&this._dragCounter<1&&(l.a.removeClassName(this.node,"dropzone--hover"),this._par.onDragLeave&&this._par.onDragLeave())},_show:function(){this._enabled&&1===this._dragCounter&&(l.a.addClassName(this.node,"dropzone--hover"),this._par.onDragEnter&&this._par.onDragEnter())},_onDrop:function(e){if(this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")){this._dragCounter=0,this._dragCounterElement=0,this._preventDefault(e),this._hide(e);var t=e.dataTransfer.files.length||0;this._par.onDrop&&this._par.onDrop(t),this._countUploading=t}},_onDragEnter:function(e){this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")&&(this._dragCounter++,this._show(e))},_onDragLeave:function(e){this._enabled&&-1!==e.dataTransfer.types.indexOf("Files")&&(this._dragCounter--,this._hide(e))},_onDragEnterElement:function(e){if(this._dragCounterElement++,1===this._dragCounterElement&&e.dataTransfer.types.indexOf("domelement")>-1){var t=this.nodeElementDrop.classList.item(0)?this.nodeElementDrop.classList.item(0):"";tag("div",t+"__dropzone-overlay").prepend(this.nodeElementDrop)}},_onDragOverElement:function(e){this._preventDefault(e)},_onDragLeaveElement:function(e){if(this._dragCounterElement>0&&this._dragCounterElement--,this._dragCounterElement<1&&e.dataTransfer.types.indexOf("domelement")>-1){var t=this.nodeElementDrop.classList.item(0)?this.nodeElementDrop.classList.item(0):"";$("."+t+"__dropzone-overlay").remove()}},_onDropElement:function(e){this._dragCounter=0,this._dragCounterElement=0,this._preventDefault(e),this._onDragLeaveElement(e),this._par.onDropElement&&this._par.onDropElement(e)},isEnabled:function(){return this._enabled},enable:function(){this._enabled=!0,this._uploader.enable()},disable:function(){this._enabled=!1,this._uploader.disable()},disableBeforeElementDrag:function(){this._enabledBeforeElementDrag=this._enabled,this.disable()},enableAfterElementDrag:function(){this._enabledBeforeElementDrag&&this.enable()}},l.a.Base);d.instanceCounter=0,window&&((globalThis||{}).PFComponentsDropZone=d)},"8l0M":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={lowestRetailPrice:.99};(globalThis||{}).PFOrderProductsRowCommon=n},"8qnk":function(e,t,i){"use strict";i.d(t,"a",(function(){return ne}));var n=i("bXkz"),r=(i("llTG"),i("Lipf"),i("8vlB"),i("C00j")),a=i("vUhP"),o=i("mw8R"),s=i("FKE6"),l=i("VpOd"),c=i("9eNC"),u=i("XLZy"),d=i("nF4n"),h=i("97Au"),p=i("YBfo"),f=i("0sIF"),g=i("GCEm"),m=i("yA1d"),_=i("ehgC"),v=i("5qBa"),y=i("Q1Td"),b=i("qs6/"),P=i("SBaP"),C=i("x0He");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function I(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){w(a,n,r,o,s,"next",e)}function s(e){w(a,n,r,o,s,"throw",e)}o(void 0)}))}}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=A(e);if(t){var r=A(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return k(this,i)}}function k(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,D(e,t,"get"))}function N(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,D(e,t,"set"),i),i}function D(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var x=new WeakMap,F=new WeakMap,M=new WeakSet,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t=O(i);function i(e){var n;return S(this,i),n=t.call(this),M.add(L(n)),x.set(L(n),{writable:!0,value:void 0}),F.set(L(n),{writable:!0,value:void 0}),n.node=tag("div","input-bulk-discount-mke"),N(L(n),x,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(L(n),M,V).call(L(n)),n}return i}(P.a);function V(){return j.apply(this,arguments)}function j(){return(j=I(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new C.b).components={"input-bulk-discount":function(){return i.e(219).then(i.bind(null,"6GHJ"))}},t.template='\n            <input-bulk-discount\n                @onChange="emitEvent(\'onChange\', $event)"\n                :value="value"\n                :id="id"\n                :bulk-discount-tier-list="bulkDiscountTierList"\n                :with-static-position="withStaticPosition"\n            />\n        ',t.initialData={value:R(this,x).value,id:R(this,x).id,bulkDiscountTierList:R(this,x).bulkDiscountTiers,withStaticPosition:R(this,x).withStaticPosition},t.emitEvent=function(e,t){switch(e){case"onChange":R(n,x).onChange(t)}},N(this,F,new C.a(t)),R(this,F).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var U=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(this,e),this.onChange=t.onChange||void 0,this.value=t.value||"",this.id=t.id||"",this.bulkDiscountTierList=t.bulkDiscountTiers||null,this.withStaticPosition=t.withStaticPosition||!1},z=i("NXHT");function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function q(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Y(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){q(a,n,r,o,s,"next",e)}function s(e){q(a,n,r,o,s,"throw",e)}o(void 0)}))}}var W,K,Z,X,Q,J,ee,te,ie,ne=Class({orderRepository:null,productData:null,variant:null,_productCount:"200+",_cartItem:null,_cartTotal:null,_cartItemCount:0,_contentNode:null,_headerIconNode:null,_dropdownNode:null,_titleNode:null,_notificationNode:null,_itemsNode:null,_subtotalNode:null,_buttonNode:null,_estimatedShippingNode:null,_estimatedShippingCostsNode:null,_isOpen:null,_shoppingCartNodeId:"js--shopping-cart",_lastProductId:null,_lastProductTechnique:null,_storeId:null,__construct:function(e,t,i){t&&(this._shoppingCartNodeId=t),this._initializeCart(e),this._addClickListener(),c.q(ne.EVENT_ITEM_ADD,this._onVariantSelected,this),c.q(ne.EVENT_OPEN_DESIGNER,this._openDesigner,this),c.q(ne.EVENT_PREPARE_CART,this._prepareCart,this),c.q(ne.EVENT_ITEM_GENERATED,this._onVariantItemsGenerated,this),c.o(ne.EVENT_CART_CREATED)},_initializeCart:function(e){this._cartItem=v.a.fromArray(e),this._contentNode=document.getElementById(this._shoppingCartNodeId),this._contentNode.innerHTML="",this._cartTotal=this._getDiscountedTotal(),this._cartItemCount=this._cartItem.items.length,this._cartItem.totalProductCount&&(this._productCount=this._cartItem.totalProductCount),this._renderHeaderNode(),this._renderDropdownNode(),this._addFileGenerationWatcher()},_addFileGenerationWatcher:function(){var e=this._cartItem.items.find((function(e){return!e.thumbUrl.includes("_thumb")}));e&&((new y.a).afterReloadDuringGeneration(e.uniqueId,{onCompleted:this._onVariantItemsGenerated}),setTimeout(this._onVariantItemsGenerated,5e3))},_prepareCart:(ie=Y(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.m)({productId:t});case 2:if(i=e.sent,!G(i,1)[0]){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,Object(g.g)(g.b,!0,_.a.TYPE_NATIVE);case 9:return e.t0=this,e.next=12,Object(m.d)();case 12:e.t1=e.sent,e.t0._initializeCart.call(e.t0,e.t1);case 14:case"end":return e.stop()}}),e,this)}))),function(e){return ie.apply(this,arguments)}),_renderHeaderNode:function(){this._headerIconNode=tag("div","pf-d-md-flex pf-mx-8 pf-flex-column pf-flex-md-row pf-align-items-center pf-position-relative",[this._renderCartIcon()]).append(this._contentNode)},_renderCartIcon:function(){return tag("a",{onclick:this._toggleDropdown.bind(this),className:""},[tag("i","header__link__icon pf-i pf-i-cart pf-i-24"),0!==this._cartItemCount?tag("span","pf-d-flex pf-align-items-center pf-justify-content-center header__link--badge text-center",this._cartItemCount):"",tag("span","pf-d-none pf-d-md-inline-block pf-ml-sm-4 header__link__text",dlang("site","My cart"))])},_renderDropdownNode:function(){this._dropdownNode=tag("div","pf-cart__menu pf-w-100 pf-w-md-auto pf-d-none",[tag("div","pf-border-bottom-0",[this._titleNode=this._renderTitleNode(),this._notificationNode=tag("div"),this._itemsNode=this._renderCartItemsNode()]),this._subtotalNode=tag("div","",[this._renderCartTotalNode()]),tag("div",{id:"estimated-shipping",className:"pf-d-none"},[this._estimatedShippingNode=tag("div","",[this._renderEstimatedShippingNode()])]),tag("div","pf-pt-12 pf-bg-gray-lighter"),this._buttonNode=tag("div","pf-p-16 pf-border-top",[this._renderButtonNode()])]).append(this._contentNode)},_openDesigner:(te=Y(regeneratorRuntime.mark((function e(t){var i,n,r,a,o,s,l,c,d,h,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.productData.product.getFullTitle(),n=tag("div"),this.showModal(i,n,t.node),u.a.show(n,{minHeight:225}),e.next=6,ne._loadOrderAndDesignerTypes(this);case 6:return r=e.sent,a=r.picker,o=r.pickerPar,s=r.orderLineItem,(l=new s).productId=t.productData.product.productId,l.variantId=t.variant.variantId,e.next=15,Object(g.m)({productId:t.productData.product.productId});case 15:c=e.sent,d=G(c,1),h=d[0],this._storeId=null==h?void 0:h.storeId,(f=new o).lastProductId=this._lastProductId,f.lastProductTechnique=this._lastProductTechnique,f.productId=t.productData.product.productId,f.isProductCatalog=!0,f.storeId=this._storeId,f.currency=h.currency,f.isModalDesigner=!0,f.flow=p.a.TYPE_OF,f.orderLineItem=l,f.callbackWithGeneratingFiles=this.onVariantItemsGenerating.bind(this),f.setModalFooterContentCallback=this.setModalFooterContent.bind(this),f.isShoppingCart=!0,f.onFileGenerationStartedForVariantCallback=this._onVariantSelected.bind(this),this._variantPickerNode=new a(f),this.updateModalContents(this._variantPickerNode);case 35:case"end":return e.stop()}}),e,this)}))),function(e){return te.apply(this,arguments)}),setModalFooterContent:function(e){return!!this.modal&&(this.modal.setFooterContent(e),!0)},showModal:function(e,t,i){var n=new h.a.Par;n.title=e,n.accessibility=!0,n.closeOnClick=!1,n.allowEsc=!1,n.nodeClass="order-flow mg-designer-modal",n.onClose=function(){c.o(c.c),f.a.clearPreviewStrings(),i&&"function"==typeof i.focus&&i.focus()},this.modal=new h.a(n),this.modal.setContent(t),this.modal.show()},updateModalContents:function(e){this.modal&&this.modal.setContent(e)},_initOrderRepository:(ee=Y(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.orderRepository){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ne._loadOrderAndDesignerTypes(this);case 4:t=e.sent,i=t.orderRepo,this.orderRepository=new i;case 7:case"end":return e.stop()}}),e,this)}))),function(){return ee.apply(this,arguments)}),_onVariantSelected:(J=Y(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.quantity=1,e.next=3,this._initOrderRepository();case 3:return this.orderRepository.URL_REF=n.a.B2C_FLOW_KEY,e.next=6,this._onItemAdd(t);case 6:i&&i();case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return J.apply(this,arguments)}),onVariantItemsGenerating:function(){this.modal&&this.modal.remove(),setTimeout(this._showDropdown,0),u.a.show(this._dropdownNode,{zIndex:11})},_showLoadingOverlay:function(){u.a.show(this._dropdownNode,{zIndex:11})},_hideLoadingOverlay:function(){u.a.hide(this._dropdownNode)},_onItemAdd:(Q=Y(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initOrderRepository();case 2:this._sendAddToCartEvent(t),this._lastProductId=null==t?void 0:t.productId,this._lastProductTechnique=null==t?void 0:t.technique,this.orderRepository.saveItemToAnonymousOrder({orderItem:o.a.fromArray({storeId:this._storeId||(null===(i=this._variantPickerNode)||void 0===i||null===(n=i._par)||void 0===n?void 0:n.storeId)||-1}),items:[t],callback:this._onDraftSaved.bind(this)});case 6:case"end":return e.stop()}}),e,this)}))),function(e){return Q.apply(this,arguments)}),_onVariantItemsGenerated:(X=Y(regeneratorRuntime.mark((function e(){var t,i,n,r,a=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.length>0&&void 0!==a[0]?a[0]:null,i=a.length>1&&void 0!==a[1]&&a[1],this._cartItem.items.find((function(e){return!e.thumbUrl.includes("_thumb")}))){e.next=4;break}return e.abrupt("return");case 4:if(!t||!i){e.next=8;break}this._cartItem.items.forEach((function(e){var i=t.find((function(t){return t.uniqueId===e.uniqueId}));i&&(e.thumbUrl=i.thumbUrl)})),e.next=15;break;case 8:return e.next=10,Object(m.d)();case 10:n=e.sent,r=v.a.fromArray(n),this._cartItem=r,this._cartItemCount=r.items.length,this._cartTotal=this._getDiscountedTotal();case 15:this._renderCart(this._isOpen);case 16:case"end":return e.stop()}}),e,this)}))),function(){return X.apply(this,arguments)}),_onItemDelete:(Z=Y(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._initOrderRepository();case 2:this.orderRepository.deleteItemFromAnonymousOrder({uniqueId:t,callback:this._afterDeleteUpdate.bind(this,t)});case 3:case"end":return e.stop()}}),e,this)}))),function(e){return Z.apply(this,arguments)}),_afterDeleteUpdate:function(e,t){if(t){for(var i in this._cartItem.items=this._cartItem.items.filter((function(t,i){return t.uniqueId!==e})),this._cartItemCount=this._cartItem.items.length,t.orderData.orderItems){var n=t.orderData.orderItems[i];this._getItemByUniqueId(n.uniqueId).priceData=b.a.fromArray(n.priceData)}this._rerenderCartItems()}},_rerenderCartItems:function(){this._cartTotal=this._getDiscountedTotal(),d.a.clearNode(this._itemsNode),this._renderCartItemsNode().append(this._itemsNode),d.a.clearNode(this._headerIconNode),d.a.clearNode(this._subtotalNode),d.a.clearNode(this._buttonNode),this._renderCartIcon().append(this._headerIconNode),this._renderCartTotalNode().append(this._subtotalNode),this._renderEstimatedShippingNode().append(this._estimatedShippingNode),this._renderButtonNode().append(this._buttonNode),this._cartItemCount>0&&this._getEstimatedShippingCosts()},_onItemQuantityChange:(K=Y(regeneratorRuntime.mark((function e(t,i){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._showLoadingOverlay(),n=parseInt(i),e.next=4,this._initOrderRepository();case 4:this.orderRepository.changeAnonymousOrderItemQuantity({uniqueId:t,quantity:n,callback:this._afterQuantityChangeUpdate.bind(this,t,n)});case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return K.apply(this,arguments)}),_onKeyUp:function(e){var t=e.target.valueAsNumber;t=t>1e3?1e3:t,e.target.value=t},_afterQuantityChangeUpdate:function(e,t,i){if(i){for(var n in i.orderData.orderItems){var r=i.orderData.orderItems[n];this._getItemByUniqueId(r.uniqueId).priceData=b.a.fromArray(r.priceData)}this._getItemByUniqueId(e).quantity=t,this._rerenderCartItems(),this._hideLoadingOverlay()}},_getDiscountBadge:function(e){return e.priceData.discountType===b.a.DISCOUNT_TYPE_BULK?tag("div","clearfix",[tag("div",{className:"pf-badge pf-badge-small pf-badge--info pull-right"},lang("Bulk discount"))]):""},_checkQuantity:function(e){return!!Number.isInteger(e)&&e>0},_getItemByUniqueId:function(e){return this._cartItem.items.find((function(t){return t.uniqueId===e}))},_renderCart:function(e){this._contentNode&&d.a.clearNode(this._contentNode),this._renderHeaderNode(),this._renderDropdownNode(),this._appendNotification(),e&&this._showDropdown()},_onDraftSaved:function(e){this._cartItem=e,this._cartItemCount=e.items.length,this._cartTotal=this._getDiscountedTotal(),this._renderCart(!0),this._getEstimatedShippingCosts(),ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Add to Cart Button",eventLabel:"Product added to cart"}),c.o(ne.EVENT_ITEM_ADD_SUCCESSFUL)},_getEstimatedShippingCosts:(W=Y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._cartItem.isShippingAvailable){e.next=2;break}return e.abrupt("return");case 2:return u.a.show(this._estimatedShippingCostsNode,{zIndex:11}),document.getElementById("cart-shipping-costs").classList.add("pf-d-none"),e.next=6,this._initOrderRepository();case 6:this.orderRepository.calculateEstimatedShippingCostsForShoppingCart({callback:this._onShippingCostsCalculated.bind(this)});case 7:case"end":return e.stop()}}),e,this)}))),function(){return W.apply(this,arguments)}),_onShippingCostsCalculated:function(e){this._cartItem.estimatedShippingCosts=e,d.a.clearNode(this._estimatedShippingCostsNode),this._renderEstimatedShippingCostNode().append(this._estimatedShippingCostsNode),u.a.hide(this._estimatedShippingCostsNode)},_appendNotification:function(){d.a.clearNode(this._notificationNode),tag("div","pf-p-16 pf-bg-light-green pf-border-bottom",[tag("i","pf-i pf-i-check pf-i-20 pf-text-dark-green"),tag("span","pf-ui-caption pf-text-dark-green pf-pl-8",dlang("site","Product added to your cart!"))]).append(this._notificationNode)},_showDropdown:function(){$("html, body").animate({scrollTop:0},300),this._onOpen()},_renderTitleNode:function(){return tag("div","pf-p-16 pf-w-100 pf-border-bottom",[tag("span","pf-h4 pf-pr-8",dlang("site","My cart")),tag("a",{className:"pf-i pf-i-close pf-i-24 pf-text-gray pull-right",onclick:this._onClose.bind(this)})])},_onOpen:function(){d.a.addClassName(this._dropdownNode,"pf-cart__menu--open"),d.a.removeClassName(this._dropdownNode,"pf-d-none"),this._isOpen=!0},_onClose:function(){d.a.removeClassName(this._dropdownNode,"pf-cart__menu--open"),d.a.addClassName(this._dropdownNode,"pf-d-none"),this._isOpen=!1},_toggleDropdown:function(){this._isOpen?this._onClose():this._onOpen()},_onOutsideClicked:function(e){document.getElementById(this._shoppingCartNodeId).contains(e.target)&&"js--cart-close"!==e.target.id||"string"!=typeof e.target.className||e.target.className.includes("pf-i-trash-can-outline")||this._onClose()},_addClickListener:function(){document.body.addEventListener("click",this._onOutsideClicked)},_renderCartItemsNode:function(){var e=tag("div","pf-cart__product-wrapper");return this._cartItemCount<1?tag("div","pf-bg-gray-lighter pf-p-16",[tag("img",{className:"pf-mx-auto pf-d-block pf-py-8",loading:"lazy",height:64,src:PF.ASSETS_URL+"images/products-catalog/empty-cart.svg",attr:{alt:dlang("site","empty cart")}}),tag("p","pf-h4 pf-mb-4 text-center",dlang("site","Your shopping cart is empty")),tag("p","pf-text-muted pf-ui-caption pf-mb-0 text-center",dlang("site","Check out more than {productCount} premium products in our catalog and find something amazing").replace("{productCount}",this._productCount))]):(this._cartItem.items.forEach(function(t,i){var n=i===this._cartItemCount-1;this._buildItemNode(t,n).append(e)}.bind(this)),e)},_buildItemNode:function(e,t){var i=this,n="pf-pt-16 pf-pb-12 pf-px-16 pf-m-0"+(t?"":" pf-border-bottom"),r=new U;r.value=e.quantity,r.id=e.uniqueId,r.bulkDiscountTiers=e.priceData.bulkDiscountTiers,r.onChange=function(e){return i._onItemQuantityChange(e.id,e.value)},r.withStaticPosition=!0;var o=new B(r),s=tag("div","pf-input-group pf-d-inline-block");return o.append(s),tag("div","",[l.a.getPeriodicPriceCountdownFromCartOrderItem({cartOrderItem:e,showBottomTriangle:!0,customBlockClass:"pf-py-8",justifyContentEndOnXxs:!0,containerClass:"pf-cart__discount-countdown pf-ml-xs-0 pf-px-16 pf-mt-12"}),tag("div",n,[this._getDiscountBadge(e),tag("div","pf-d-flex clearfix",[tag("div","pf-bg-white pf-cart__thumb-wrapper pf-mr-12 pf-p-0",[tag("img",{className:"pf-cart__thumb pf-d-block pf-mx-auto",prop:{src:e.thumbUrl,loading:"lazy",height:92,alt:e.productName}})]),tag("div","pf-w-100 pf-p-0",[tag("div","flex-row pf-justify-content-between pf-mb-8",[tag("div","pf-cart__product-name",[tag("span","pf-ui-caption",e.productName)]),tag("div","",[tag("div","pf-cart__item-price",[a.a.createDiscountElementFromPriceData({priceData:e.priceData,splitLines:!0,allowTaxInclusion:!0,flipLines:!0,tooltipPlacement:"left"})])])]),tag("div","flex-row pf-justify-content-between",[tag("div","pf-cart__item-count pf-d-flex",[tag("span","pf-ui-caption pf-text-muted pf-mr-8 pf-my-auto text-nowrap",dlang("site","Qty:")),s]),tag("div","pf-cart__item-delete pf-align-items-center pf-d-flex",[tag("a",{onclick:this._onItemDelete.bind(this,e.uniqueId)},[tag("i","pf-i pf-i-trash-can-outline pf-i-24 pf-text-gray")])])])])])])])},_renderCartTotalNode:function(){return this._subtotalNode&&d.a.clearNode(this._subtotalNode),this._cartItemCount<1?tag("div"):tag("div","pf-border-top",[tag("div","pf-px-16 pf-pt-16 pf-pb-4 pf-bg-gray-lighter",[tag("div","pf-d-flex pf-justify-content-between pf-align-items-center",[tag("div","",[tag("span","pf-ui-caption",dlang("site","Subtotal")),this._getTaxStatus(),tag("span","pf-ui-caption",":")]),tag("div","",[tag("span","pf-ui-caption pf-bold pf-flex-end",[prettyMoney(this._cartTotal,this._cartItem.currency)])])])])])},_renderEstimatedShippingNode:function(){return this._estimatedShippingNode&&d.a.clearNode(this._estimatedShippingNode),!this._cartItem.isShippingAvailable||this._cartItemCount<1?tag("div"):tag("div","pf-px-16 pf-bg-gray-lighter",[tag("div","pf-d-flex pf-justify-content-between pf-align-items-center",[tag("span","pf-ui-caption pf-py-4","Estimated shipping:"),this._estimatedShippingCostsNode=tag("div",{className:"pf-d-flex pf-align-items-center",style:"min-height: 32px; min-width: 32px;"},[this._renderEstimatedShippingCostNode()])])])},_renderEstimatedShippingCostNode:function(){this._estimatedShippingCostsNode&&d.a.clearNode(this._estimatedShippingCostsNode);var e=prettyMoney(this._cartItem.estimatedShippingCosts,this._cartItem.currency);return this._cartItem.estimatedShippingCosts||(e="Calculated at checkout"),tag("span",{id:"cart-shipping-costs",className:"pf-ui-caption pf-bold pf-flex-end"},[e])},_getTaxStatus:function(){return this._cartItem.currency===s.a.CURRENCY_EUR?tag("span","pf-ui-caption pf-text-muted"," ("+(r.a.isTaxIncluded(this._cartItem.currency)?dlang("site","incl. VAT"):dlang("site","excl. VAT"))+")"):""},_renderButtonNode:function(){return this._cartItemCount?tag("a",{className:"pf-btn pf-btn-primary pf-btn-block pf-text-white",href:PF.Customer.leadScoringProfile?langUrl("/dashboard/order/update"):langUrl("/dashboard/order/update?ref=b2c")},dlang("site","Continue to checkout")):tag("a",{className:"pf-btn pf-btn-primary pf-btn-block pf-text-white",href:langUrl("/custom-products")},dlang("site","Explore products"))},_getDiscountedTotal:function(){var e=this._cartItem.items.reduce((function(e,t){return e+t.priceData.discountedPrice*t.quantity}),0);return r.a.addTax(this._cartItem.currency,e)},_sendAddToCartEvent:function(){var e,t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i instanceof z.PFItemsOrderLineItem&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"add-to-cart",product_id:String(null==i?void 0:i.productId),variant_id:null==i?void 0:i.variantId,variant_price:null==i||null===(e=i.priceData)||void 0===e?void 0:e.price.toFixed(2),variant_price_currency:null==i||null===(t=i.priceData)||void 0===t?void 0:t.currency,quantity:null==i?void 0:i.quantity}))}},d.a.Base);ne._loadOrderAndDesignerTypes=function(){var e=Y(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0===window.PFVariantPickerPar?Promise.resolve().then(i.bind(null,"llTG")):Promise.resolve({PFVariantPickerPar:window.PFVariantPickerPar}),r=void 0===window.PFVariantPicker?Promise.resolve().then(i.bind(null,"Lipf")):Promise.resolve({PFVariantPicker:window.PFVariantPicker}),a=void 0===window.PFRepositoriesOrderRepository?Promise.resolve().then(i.bind(null,"8vlB")):Promise.resolve({PFRepositoriesOrderRepository:window.PFRepositoriesOrderRepository}),o=void 0===window.PFItemsOrderLineItem?Promise.resolve().then(i.bind(null,"NXHT")):Promise.resolve({PFItemsOrderLineItem:window.PFItemsOrderLineItem}),e.next=6,Promise.all([n,r,a,o]);case 6:return s=e.sent,l=G(s,4),c=l[0],u=l[1],d=l[2],h=l[3],p={pickerPar:null==c?void 0:c.PFVariantPickerPar,picker:null==u?void 0:u.PFVariantPicker,orderRepo:null==d?void 0:d.PFRepositoriesOrderRepository,orderLineItem:null==h?void 0:h.PFItemsOrderLineItem},ne._loadOrderAndDesignerTypes=Y(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p);case 1:case"end":return e.stop()}}),e)}))),e.abrupt("return",p);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne.EVENT_ITEM_ADD="shoppingCartItemAdd",ne.EVENT_ITEM_ADD_SUCCESSFUL="shoppingCartItemAddSuccessful",ne.EVENT_OPEN_DESIGNER="shoppingCartOpenDesigner",ne.EVENT_PREPARE_CART="shoppingCartPrepare",ne.EVENT_CART_CREATED="shoppingCartCreated",ne.EVENT_ITEM_GENERATED="shoppingCartItemGenerated",(globalThis||{}).PFShoppingCart=ne},"8vlB":function(e,t,i){"use strict";i.r(t),i.d(t,"PFRepositoriesOrderRepository",(function(){return u}));var n=i("6t3j"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).method="",o.prototype.price=0,o.prototype.currency="",o.prototype.disabled=!1,o.prototype.name="",o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsShippingMethodItem=o);var s=i("FKE6"),l=i("yA1d"),c=i("Sucz"),u=function(){this.productRepository=new n.a};u.PRICE_DIGITIZATION={},u.PRICE_DIGITIZATION[s.a.CURRENCY_USD]=6.5,u.PRICE_DIGITIZATION[s.a.CURRENCY_EUR]=5.75,u.PRICE_DIGITIZATION[s.a.CURRENCY_JPY]=700,u.PRICE_DIGITIZATION[s.a.CURRENCY_GBP]=4.95,u.PRICE_DIGITIZATION[s.a.CURRENCY_CAD]=9.6,u.PRICE_DIGITIZATION[s.a.CURRENCY_AUD]=11.5,u.PRICE_DIGITIZATION[s.a.CURRENCY_SEK]=58,u.PRICE_DIGITIZATION[s.a.CURRENCY_DKK]=41.5,u.PRICE_DIGITIZATION[s.a.CURRENCY_NZD]=9.95,u.PRICE_DIGITIZATION[s.a.CURRENCY_CHF]=6,u.PRICE_DIGITIZATION[s.a.CURRENCY_MXN]=130,u.PRICE_DIGITIZATION[s.a.CURRENCY_HKD]=50,u.PRICE_DIGITIZATION[s.a.CURRENCY_SGD]=8.95,u.PRICE_DIGITIZATION[s.a.CURRENCY_NOK]=59.95,u.PRICE_DIGITIZATION[s.a.CURRENCY_PLN]=25,u.PRICE_DIGITIZATION[s.a.CURRENCY_KRW]=7150,u.PRICE_DIGITIZATION[s.a.CURRENCY_BRL]=35,u.PRICE_DIGITIZATION_ADJUSTMENT={},u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_USD]=2.95,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_EUR]=2.5,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_JPY]=350,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_GBP]=2.25,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_CAD]=4.4,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_AUD]=5.2,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_SEK]=26.5,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_DKK]=18.95,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_NZD]=4.5,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_CHF]=2.75,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_MXN]=60,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_HKD]=23,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_SGD]=3.95,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_NOK]=26,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_PLN]=11,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_KRW]=3250,u.PRICE_DIGITIZATION_ADJUSTMENT[s.a.CURRENCY_BRL]=15.5,u.PRICE_DIGITIZATION_TEXT_ONLY={},u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_USD]=3.95,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_EUR]=3.7,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_JPY]=450,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_GBP]=3,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_CAD]=5.85,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_AUD]=6.95,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_SEK]=35,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_DKK]=25.5,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_NZD]=5.95,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_CHF]=3.7,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_MXN]=80,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_HKD]=31,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_SGD]=5.5,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_NOK]=35,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_PLN]=15,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_KRW]=4350,u.PRICE_DIGITIZATION_TEXT_ONLY[s.a.CURRENCY_BRL]=20.95,u.URL_REF=null,u.getRef=function(e){var t=u.URL_REF;return null===t?"":(e=e||"?")+"ref="+t},u.prototype.getById=function(e,t){Object(c.a)("order/get"+u.getRef(),{orderId:e},$.proxy(this._getByIdRe,this,t))},u.prototype._getByIdRe=function(e,t){e(this.parseOrderResponseAndReturnOrder(t))},u.prototype.parseOrderResponseAndReturnOrder=function(e){return l.e(e)},u.prototype.saveDraft=function(e){l.f(e).then(e.callback)},u.prototype.saveItemToAnonymousOrder=function(e){l.g(e).then((function(t){return e.callback(t)}))},u.prototype.deleteItemFromAnonymousOrder=function(e){l.c(e).then((function(t){return e.callback(t)}))},u.prototype.changeAnonymousOrderItemQuantity=function(e){l.b(e).then((function(t){return e.callback(t)}))},u.prototype.calculateEstimatedShippingCostsForShoppingCart=function(e){l.a().then((function(t){return e.callback(t.estimatedShippingCosts)}))},u.prototype.calculateOrderEstimatedShippingCosts=function(){Object(c.a)("order/calculate-estimated-shipping-costs")},u.prototype.saveRecipientAndGetRates=function(e){var t=e.orderItem;Object(c.a)("order/save-recipient-get-rates"+u.getRef(),{orderId:t.orderId,displayShipping:t.displayShipping,identity:t.identity,saveRecipient:e.saveRecipient?1:0,recipient:t.recipient.toArray()},this._saveRecipientAndGetRatesRe.bind(this,e.callback))},u.prototype.saveOnlyRecipient=function(e){var t=e.orderItem;Object(c.a)("order/save-only-recipient"+u.getRef(),{orderId:t.orderId,recipient:t.recipient.toArray()})},u.prototype._saveRecipientAndGetRatesRe=function(e,t){var i=[];for(var n in t.rates)i.push(o.fromArray(t.rates[n]));e(i,t.errors,t.baseBreakdownData,t.handling,t.hasCatalogPriceDiff,t.customsNotificationText,t.hasOutsourcedBranch,t.showShippingWarning,t.ukVatCustomsWarning,t.showAddressValidationWarning)},u.prototype.removeIncompleteItem=function(e,t){t=t||function(){},Object(c.a)("order/remove-incomplete"+u.getRef(),{incompleteItemId:e.incompleteItemId,orderId:e.orderId},t)},u.prototype.setShippingMethod=function(e,t,i){Object(c.a)("order/set-handling"+u.getRef(),{orderId:e,handling:t},$.proxy(this._setShippingMethodRe,this,i))},u.prototype._setShippingMethodRe=function(e,t){t.success?e(t.baseBreakdownData,t.hasCatalogPriceDiff):alert("Sorry, error occurred, please try again!")},u.prototype.prepareForReview=function(e,t,i,n){Object(c.a)("order/prepare-for-review",{orderId:e.orderId,isAnonymous:t?1:0},$.proxy(this._prepareForReviewRe,this,i,n))},u.prototype._prepareForReviewRe=function(e,t,i){i.error?t(i.error):e(i.redirectUrl)},u.prototype.toggleSample=function(e,t,i){Object(c.a)("order/set-sample",{orderId:e.orderId,setSample:e.isSample?0:1},$.proxy(this._setSampleRe,this,t,i))},u.prototype._setSampleRe=function(e,t,i){!i.error&&i.success?e(i.isSample):t(t(i.error||"Failed to change order to sample order"))},u.prototype.forceBranchForWarehouse=function(e,t,i,n){Object(c.a)("order/force-branch-for-warehouse",{orderId:e.orderId,branchId:t.id},$.proxy(this._forceBranchForWarehouseRe,this,i,n))},u.prototype._forceBranchForWarehouseRe=function(e,t,i){i.error?t(i.error||dlang("warehouse","Failed to select location for storing order in warehouse")):e(i)},u.prototype.saveAddressesFlag=function(e){var t=e.orderItem;Object(c.a)("order/save-address-flag"+u.getRef(),{orderId:t.orderId,saveAddress:e.saveAddress?1:0})},(globalThis||{}).PFRepositoriesOrderRepository=u},"96ed":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={};function r(){var e,t;return(null===(e=PF)||void 0===e||null===(t=e.Config)||void 0===t?void 0:t.PUSHER_CONFIG)||{APP_KEY:null,APP_CLUSTER:null,AUTH_ENDPOINT:null,CSRF_TOKEN:null,CHANNEL_SUFFIX:null}}n.subscribe=function(e,t,i){var r=n.getChannel(e);r.callbacks.get(t)&&r.unbind(t);var a=r.bind(t,i);return a.subscribed||(console.log("Failed to subscribe","channel:",e,"eventName:",t,"callback:",i),console.log(a)),a},n.subscribeAnonymousUpload=function(e,t,i){return e||console.error("Subscribing to a anonymous file upload channel, but no fileId is given"),n.subscribe(this.CHANNEL_ANONYMOUS_UPLOAD+"-"+e,t,i)},n.subscribeStore=function(e,t,i,r){return e||console.error("Subscribing to a store channel, but no storeId is given"),n.subscribe(n._getFormattedStoreChannel(e,t),i,r)},n.unbind=function(e,t,i){var r=n._channels[e];r?r.unbind(t,i):console.error("Trying to unbind "+e+" channel "+t+" event, but no channel exists")},n.unbindStore=function(e,t,i,r){n.unbind(n._getFormattedStoreChannel(e,t),i,r)},n.unbindEnvironment=function(e,t,i,r){n.unbind(n._getFormattedEnvironmentChannel(e,t),i,r)},n.subscribeEnvironment=function(e,t,i,r){return e||console.error("Subscribing to a environment channel, but no id is given"),n.subscribe(n._getFormattedEnvironmentChannel(e,t),i,r)},n.unbindTransaction=function(e,t,i,r,a){n.unbind(n._getFormattedTransactionChannel(e,t,i),r,a)},n.subscribeTransaction=function(e,t,i,r,a){return e||console.error("Subscribing to a transaction channel, but no id is given"),n.subscribe(n._getFormattedTransactionChannel(e,t,i),r,a)},n._getFormattedStoreChannel=function(e,t){return"private-store-"+e+"-"+t},n._getFormattedEnvironmentChannel=function(e,t){return"private-environment-"+e+"-"+t},n._getFormattedTransactionChannel=function(e,t,i){return"private-transaction-"+e+"-"+t+"-"+i},n.getChannel=function(e){if(!n._channels[e]){var t=e+n.CHANNEL_SUFFIX();n._channels[e]=n._getInstance().subscribe(t)}return n._channels[e]},n._getInstance=function(){return n._instance||(n._instance=new window.Pusher(n.APP_KEY(),{authEndpoint:n.AUTH_ENDPOINT(),cluster:n.APP_CLUSTER(),auth:{headers:{"X-CSRF-Token":n.CSRF_TOKEN()}}}),PF.DEV&&(window.Pusher.log=window.console.log)),n._instance},n.APP_KEY=function(){return r().APP_KEY},n.APP_CLUSTER=function(){return r().APP_CLUSTER},n.AUTH_ENDPOINT=function(){return r().AUTH_ENDPOINT},n.CSRF_TOKEN=function(){return r().CSRF_TOKEN},n.CHANNEL_SUFFIX=function(){return r().CHANNEL_SUFFIX},n._instance=null,n._channels={},n.CHANNEL_SYNC="sync",n.CHANNEL_LIBRARY="library",n.CHANEL_STATUS="status",n.CHANNEL_ANONYMOUS_UPLOAD="anonymous-upload",n.EVENT_PRODUCT_PUSHED="productPushed",n.EVENT_UPDATE="update",n.EVENT_SUCCESS="onSuccess",n.EVENT_COMPLETED="completed",window&&((globalThis||{}).PFPusher=n)},"9Vz/":function(e,t,i){"use strict";i.d(t,"f",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"a",(function(){return u})),i.d(t,"e",(function(){return d}));var n=i("KLvT"),r=i("3Vk9");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var o=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.d(r.f));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),s=function(){return Object(n.a)().getters[r.d(r.b)]},l=function(){return Object(n.a)().getters[r.d(r.a)]},c=function(e){return Object(n.a)().getters[r.d(r.c)]([e])[0]},u=function(e){return Object(n.a)().commit(r.d(r.h),e)},d=function(e){return!!c(e)}},"9Y8y":function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n,r=i("u8P0"),a=i("how4"),o=i("K45J"),s=i("6JZw"),l=i("nF4n");function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var u=Class((c(n={id:0,customProductId:0,customProduct:null,stockProductId:0,name:"",sku:"",length:0,width:0,height:0,weight:0,originalLength:0,originalWidth:0,originalHeight:0,originalWeight:0,quantity:0,availableQuantity:0,urlImage:"",isPackaged:!1,retailCurrency:null,syncVariantRetailPriceData:null,additionalFee:0,retailPrice:0,originalRetailPrice:0,currentMonthStorageFee:0,temporaryFileKey:"",hsCode:0,tempSyncVariantId:0},"hsCode",""),c(n,"optionValues",[]),c(n,"locations",[]),c(n,"canDelete",null),c(n,"toArrayKeys",["id","customProductId","sku","length","width","height","weight","originalLength","originalWidth","originalHeight","originalWeight","optionValues","isPackaged","additionalFee","retailPrice","originalRetailPrice","temporaryFileKey","hsCode","urlImage","tempSyncVariantId","hsCode"]),c(n,"getDimensions",(function(){var e=new a.a;return e.length=this.length,e.width=this.width,e.height=this.height,e.weight=this.weight,e})),c(n,"getOriginalDimensions",(function(){var e=new a.a;return e.length=this.originalLength,e.width=this.originalWidth,e.height=this.originalHeight,e.weight=this.originalWeight,e})),c(n,"getKey",(function(){var e=[];for(var t in this.optionValues){var i=this.optionValues[t];e.push([i.optionName.replace(" ","_"),i.value.replace(" ","_")].join("_"))}return e.join("__")})),n),s.a);u.fromArray=function(e){var t=new u;if(l.a.O2O(t,e),e.customProduct&&(t.customProduct=o.a.fromArray(e.customProduct)),e.optionValues)for(var i in t.optionValues=[],e.optionValues)t.optionValues.push(r.a.fromArray(e.optionValues[i]));return t},window&&((globalThis||{}).PFItemsCustomProductVariant=u)},"9bv1":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Sx+Y"),r=i("LAWH"),a=i("6JZw"),o=i("nF4n"),s=function(){};s.prototype=new a.a,s.prototype.toArrayKeys=["syncProductId","isIgnored"],s.prototype.syncProductId=null,s.prototype.urlImage="",s.prototype.name="",s.prototype.externalId="",s.prototype.isIgnored=!1,s.prototype.syncedAt=null,s.prototype.counts=null,s.prototype.variantCounts=null,s.prototype.storeId=null,s.prototype.syncChangeInfo=null,s.prototype.hasUnsupportedTechnique=!1,s.prototype.isSoldOut=function(){if(!this.variantCounts)return!1;var e=0,t=this.variantCounts||{};for(var i in t){var n=t[i];e+=parseInt(n.quantity)}return e<1},s.prototype.hasLowQty=function(){if(!this.variantCounts)return!1;var e=!1,t=this.variantCounts||{};for(var i in t){var n=t[i];parseInt(n.quantity)<=1&&(e=!0)}return e},s.fromArray=function(e){var t=new s;if(o.a.O2O(t,e),e.counts&&(t.counts=n.a.fromArray(e.counts)),e.variantCounts){var i={};for(var a in e.variantCounts){var l=e.variantCounts[a];i[a]=r.a.fromArray(l)}t.variantCounts=i}return t},window&&((globalThis||{}).PFItemsSyncProductItem=s)},"9eNC":function(e,t,i){"use strict";function n(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"q",(function(){return o})),i.d(t,"p",(function(){return s})),i.d(t,"o",(function(){return l})),i.d(t,"h",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"j",(function(){return h})),i.d(t,"f",(function(){return p})),i.d(t,"c",(function(){return f})),i.d(t,"d",(function(){return g})),i.d(t,"g",(function(){return m})),i.d(t,"e",(function(){return _})),i.d(t,"a",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"m",(function(){return b})),i.d(t,"l",(function(){return P})),i.d(t,"b",(function(){return C})),i.d(t,"i",(function(){return T}));var a={};function o(e,t,i){a[e]||(a[e]=[]),a[e].push({func:t,ctx:i})}function s(e,t){if(c(e))if(t)for(var i=a[e],n=i.length;n-- >0;){t===i[n].func&&i.splice(n,1)}else a[e]=[]}function l(e){if(c(e)){for(var t=a[e],i=arguments.length,r=new Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];var s,l=n(t);try{for(l.s();!(s=l.n()).done;){var u=s.value,d=u.func,h=u.ctx;d.apply(h,r)}}catch(e){l.e(e)}finally{l.f()}}}function c(e){return e&&a[e]&&a[e].length>0}var u="orderupdate",d="productPushStarted",h="productPushModalClosed",p="designUpdate",f="designerRemoveWarning",g="designerShowWarning",m="logoSaved",_="designerStickyFooterBack",v="breadcrumbsChanged",y="sellingRegionOpenSettings",b="productVariantSelected",P="productTechniqueSelected",C="browserBackRemoveWarning",T={on:o,off:s,emit:l,has:c,ORDER_UPDATE:u,PRODUCT_PUSH_STARTED:d,PRODUCT_PUSH_COMPLETE:"productPushed",PRODUCT_PUSH_MODAL_CLOSED:h,DESIGN_UPDATE:p,DESIGNER_REMOVE_LEAVE_WARNING:f,DESIGNER_SHOW_WARNING:g,LOGO_SAVED:m,DESIGNER_STICKY_FOOTER_BACK:_,SELLING_REGION_UPDATE:"sellingRegionUpdate",SELLING_REGION_OPEN_SETTINGS:y,PRODUCT_CATALOG_DELIVERY_ESTIMATED:"productCatalogDeliveryEstimated",PRODUCT_VARIANT_SELECTED:b,PRODUCT_TECHNIQUE_SELECTED:P,BROWSER_BACK_REMOVE_LEAVE_WARNING:C}},"A+LN":function(e,t,i){"use strict";i.d(t,"k",(function(){return p})),i.d(t,"i",(function(){return f})),i.d(t,"d",(function(){return g})),i.d(t,"a",(function(){return m})),i.d(t,"c",(function(){return _})),i.d(t,"b",(function(){return v})),i.d(t,"f",(function(){return y})),i.d(t,"e",(function(){return b})),i.d(t,"t",(function(){return P})),i.d(t,"m",(function(){return C})),i.d(t,"h",(function(){return T})),i.d(t,"o",(function(){return w})),i.d(t,"n",(function(){return I})),i.d(t,"p",(function(){return S})),i.d(t,"u",(function(){return E})),i.d(t,"r",(function(){return O})),i.d(t,"g",(function(){return k})),i.d(t,"v",(function(){return L})),i.d(t,"j",(function(){return A})),i.d(t,"l",(function(){return R})),i.d(t,"s",(function(){return N})),i.d(t,"q",(function(){return D})),i.d(t,"w",(function(){return B})),i.d(t,"x",(function(){return q})),i.d(t,"y",(function(){return W})),i.d(t,"z",(function(){return Z}));var n=i("9Nv7"),r=i("LvDl"),a=i.n(r),o=i("GSnq"),s=i("DD1l"),l=i("YbPo");function c(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function d(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function h(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){d(a,n,r,o,s,"next",e)}function s(e){d(a,n,r,o,s,"throw",e)}o(void 0)}))}}var p="image_remove_bg",f="generator_sass_features",g="adyen_drop_in_unconfirmed",m="adyen_drop_in_add_billing_method",_="adyen_drop_in_order_flow",v="adyen_drop_in_gift_flow",y="crop_tool",b="crop_pattern",P="sample_orders",C="lifelike",T="designer_tools_section",w="new_address_form_payments",I="new_address_form_legal",S="new_shipping_table",E="show_non_single_country_region_edt",O="order_csv_access",k="custom_mockup_maker",L="sync_variant_dual_sync",A="generator_toolbar",R="large_embroidery_file_upload",N="pro_trends_graph",D="only_label_allowed",x=!1,F={},M={},B=Object.freeze({ENVIRONMENT:"environment",STORE:"store",CUSTOMER:"customer"});function V(e){return a.a.reduce(e,(function(e,t){return e[t.cacheKey]=t,e}),{})}function j(e){var t={results:{},missingRequests:[]};if(!a.a.isArray(e))return t;x||function(){for(var e=globalThis.PreloadedFeatureFlagResults||{},t=a.a.mapValues(e,(function(e){return new o.b(e)})),i=0,n=Object.values(t);i<n.length;i++){var r=n[i];F[r.cacheKey]=r}x=!0}();var i=function(e){return V(e.map((function(e){return new o.a(e||{})})).filter((function(e){return e.isValid()})))}(e),n=a.a.keys(i);if(!n.length)return t;var r=a.a.pick(F,n),s=a.a.keys(r);if(t.results=a.a.cloneDeep(r),n.length===s.length)return t;var l=a.a.difference(n,s);return t.missingRequests=Object.values(a.a.pick(i,l)),t}function U(e){return z.apply(this,arguments)}function z(){return(z=h(regeneratorRuntime.mark((function e(t){var i,r,c,u,d;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n.a)("feature-flag/check-flags",{flagRequests:t});case 3:i=e.sent,e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),Object(s.a)(new l.a("Feature flag RPC call failed",{cause:e.t0})),i=[];case 10:return r=V(t),c=i.map((function(e){return new o.b(e)})).filter((function(e){return e.isValid()})),u=V(c),d=a.a.mapValues(r,(function(e){if(a.a.has(u,e.cacheKey))return u[e.cacheKey];var t=new o.b(e||{});return t.canAccessFeature=!1,t})),a.a.forIn(d,(function(e,t){F[t]=e})),e.abrupt("return",d);case 16:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function G(e){return H.apply(this,arguments)}function H(){return(H=h(regeneratorRuntime.mark((function e(t){var i,n,r,o,s,l,u,d,h,p,f,g,m,_,v,y;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.map((function(e){return e.cacheKey})),n=a.a.pick(M,i),r=t.filter((function(e){return!a.a.has(n,e.cacheKey)})),o=a.a.uniq(Object.values(n)),r.length>0){s=U(r),l=c(r);try{for(l.s();!(u=l.n()).done;)d=u.value,M[d.cacheKey]=s}catch(e){l.e(e)}finally{l.f()}o.push(s)}return e.next=7,Promise.all(o);case 7:h=e.sent,p={},f=c(h);try{for(f.s();!(g=f.n()).done;)for(m=g.value,_=0,v=Object.values(m);_<v.length;_++)y=v[_],p[y.cacheKey]=y,delete M[y.cacheKey]}catch(e){f.e(e)}finally{f.f()}return e.abrupt("return",p);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(e){return Y.apply(this,arguments)}function Y(){return(Y=h(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z([new o.a({targetType:B.ENVIRONMENT,flagName:t})]);case 2:return i=e.sent,n=a.a.first(a.a.values(i)),e.abrupt("return",!(null==n||!n.canAccessFeature));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){var t=K([new o.a({targetType:B.ENVIRONMENT,flagName:e})]),i=a.a.first(a.a.values(t));return!(null==i||!i.canAccessFeature)}function K(e){var t=j(e),i=t.missingRequests,n=t.results;if(i.length>0){Object(s.a)(new l.a("Attempted to synchronously retrieve feature flag values not found in cache",{info:{missingFlags:i.map((function(e){return e.flagName}))}}));var r,a=c(i);try{for(a.s();!(r=a.n()).done;){var u=r.value;n[u.cacheKey]=new o.b(u)}}catch(e){a.e(e)}finally{a.f()}}return n}function Z(e){return X.apply(this,arguments)}function X(){return(X=h(regeneratorRuntime.mark((function e(t){var i,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=j(t),n=i.missingRequests,r=i.results,!(n.length<1)){e.next=3;break}return e.abrupt("return",r);case 3:return e.next=5,G(n);case 5:return o=e.sent,e.abrupt("return",a.a.cloneDeep(a.a.assign(r,o)));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},A8Hf:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(e){if(e&&!e._autoResize){var t=function(e,t){return document.defaultView&&document.defaultView.getComputedStyle?document.defaultView.getComputedStyle(e,null)[t]:e.currentStyle?e.currentStyle[t]:e.style[t]};e._autoResize=!0;var i,r=Object(n.a)({tag:"div",els:[i=Object(n.a)({tag:"div",style:{position:"absolute",wordWrap:"break-word",visibility:"hidden",fontSize:t(e,"fontSize"),maxHeight:t(e,"maxHeight")}})]});try{i.style.whiteSpace="pre-wrap"}catch(e){}e.style.overflow="hidden",function(e,t){if(t.nextSibling){var i=t.nextSibling;i.parentNode.insertBefore(e,i)}else t.parentNode.appendChild(e)}(r,e),r.appendChild(e);var a,o=$(e),s=function(n){["lineHeight","paddingLeft","paddingTop","paddingRight","paddingBottom"].forEach((function(n){i.style[n]=t(e,n)}));var a=parseInt(i.style.maxHeight);a||(i.style.maxHeight=t(e,"maxHeight"),a=parseInt(i.style.maxHeight));var o,s=t(e,"position");s&&"static"!=s||(s="relative",e.style.position="relative"),r.style.position=s,i.style.width=e.offsetWidth+"px",i._offsetHeight=i.offsetHeight,i.innerHTML=(o=e.value||e.placeholder,String(o).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")+(n?"\n":"")+"_"),i._offsetHeight!=i.offsetHeight&&(e.style.overflow=a==i.offsetHeight?"":"hidden"),i.offsetHeight&&(i.style.minHeight||(i.style.minHeight=e.offsetHeight+"px"),e.style.height=i.offsetHeight+"px")};s();var l=0;o.on("keydown",(function(e){10!=e.keyCode&&13!=e.keyCode||s(!0)})),o.on("keyup paste",(function(e){if(clearTimeout(a),10==++l||10==e.keyCode||13==e.keyCode||8==e.keyCode||46==e.keyCode)return l=0,void s();a=setTimeout(s,150)}));var c=setInterval((function(){i.offsetHeight&&(clearInterval(c),s())}),100)}};(globalThis||{}).PFUtilsTextareaAutoHeight=r},"A9n+":function(e,t,i){"use strict";i.d(t,"a",(function(){return A}));var n=i("D/Ov"),r=i("xeH2"),a=i.n(r),o=i("I/qX"),s=i("zorP"),l=i("L8zU"),c=i("ZPm7"),u=i("6t3j"),d=i("A8Hf"),h=i("X5Ic"),p=i("XLZy"),f=i("nF4n"),g=i("Sucz"),m=i("Pxqf");function _(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function v(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}}var y=function(e,t,i,n){this.isEditing=!1,this.oldReviewId=null,this.reviewableItem=e,this.modal=t,this.onSubmittedCallback=i,this.starRating=new s.a,this.techniqueInputs=[];var r=this.reviewableItem.getTechniques(),a=r.length<=1;a||(this.techniqueSelector=r.map(function(e){var t=tag("input",{type:"checkbox",attr:{value:e},className:"pf-mr-8"});return this.techniqueInputs.push(t),tag("label","review-form__technique pf-ui-body pf-mr-16",[t,h.a.LABELS[e]])}.bind(this))),this.featuredReviewStatus=tag("label","review-form__featured pf-ui-body pf-mr-16 pf-mt-12 pf-mb-8",[this.featuredReviewCheckBox=tag("input",{type:"checkbox",attr:{value:0},prop:{onchange:this.renderDetails.bind(this)},className:"pf-mr-8",style:{marginTop:"6px"}}),tag("span",{innerHTML:dlang("reviews","I want my review to be considered as a {linkStart}featured review{linkEnd} on Printful's website").replace("{linkStart}",'<a class="pf-link" target="_blank" href="'.concat(langUrl("/faq/products/478-how-can-i-get-featured-on-printful-s-website-"),'">')).replace("{linkEnd}","</a>")})]),this.featuredReviewDetails=tag("div","hidden",[tag("label",{className:"pf-text-muted pf-ui-body pf-mb-16",innerHTML:dlang("reviews","Weâll approve your submission if the content follows our {linkStart}featured reviews policy{linkEnd}, and display it with a link to your product on your storefront").replace("{linkStart}",'<a class="pf-link" target="_blank" href="'.concat(langUrl("/faq/products/478-how-can-i-get-featured-on-printful-s-website-"),'">')).replace("{linkEnd}","</a>")}),tag("label","pf-h5",[dlang("reviews","Link to an Instagram post showcasing the product")]),this.instagramUrl=tag("input",{type:"text",className:"form-control"}),this.urlErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Please provide a valid link")])]);var u="",p="",f=dlang("reviews","We'd love to hear what you thinkâwrite your thoughts on the product's fit, feel, style, etc.");this.reviewableItem.isTypeProduct()?(this.nodeRatingTitle=tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Overall rating")),u=tag("table","table pf-m-0",[tag("tr","",[tag("td",{attr:{width:90}},[tag("img",{className:"img-responsive center-block",src:this.reviewableItem.getImageUrl()})]),tag("td","pf-h5 pf-pl-24",this.reviewableItem.getTitle())])]),p=tag("div","review-variant-selector",[tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Pick a variant to review")),this.colorPicker=new c.a(this.reviewableItem.getVariants(),this.setSelectedColor,this.reviewableItem.getId(),"pf-ui-body pf-mr-16 pf-mb-16"),this.sizePicker=new l.a(this.reviewableItem.getVariants(),this.setSelectedSize,"pf-mr-16",!0)]),this.setActiveSelections(this.colorPicker,this.sizePicker)):(this.nodeRatingTitle=tag("h4","pf-h4 pf-mt-0 pf-mb-8",dlang("reviews","How do you rate your experience with Design Services?")),f=lang("Please share a few details describing your experience")),n&&(this.isEditing=!0,this.oldReviewId=n.reviewId,this.setValuesForExistingReview(n)),this.node=tag("div","review-form",[u,this.nodeRatingTitle,this.starRating,a||tag("h4","pf-h4 pf-mt-24 pf-mb-4",lang("Technique")),a||this.techniqueSelector,p,this.formNode=new o.a(f,this.uploadCallback.bind(this),n),this.featuredReviewStatus,this.featuredReviewDetails,tag("div","pf-mt-24 pf-pb-16 pf-text-muted pf-ui-caption review-disclaimer",[tag("span",{className:"pf-text-red pf-mr-2",innerHTML:"&#42;"}),dlang("reviews","Your review might be used for Printful's marketing purposes")]),tag("div","review-divider"),tag("div","pf-mt-16",[this.nodeSubmit=tag("a",{className:"pf-btn pf-btn-primary",onclick:this.onSubmit.bind(this)},dlang("reviews","Add review"))])]),Object(d.a)(this.nodeTextarea)};(y.prototype=new f.a.Base).selectedColor="",y.prototype.selectedSize="",y.prototype.setActiveSelections=function(e,t){this.setSelectedColor(e.getColor()),this.setSelectedSize(t.getSize())},y.prototype.uploadCallback=function(e){this.nodeSubmit&&(this.nodeSubmit.classList.remove("disabled"),this.nodeSubmit.innerText=dlang("reviews","Add review"),e||(this.nodeSubmit.classList.add("disabled"),this.nodeSubmit.innerText=lang("Waiting for imagesâ¦")))},y.prototype.setSelectedColor=function(e){y.prototype.selectedColor=e},y.prototype.setSelectedSize=function(e){y.prototype.selectedSize=e},y.prototype.getSelectedVariantId=function(){var e=this.reviewableItem.getVariants().filter((function(e){return e.color===this.selectedColor&&e.size===this.selectedSize}),this);return e.length?e[0].variantId:null},y.prototype.getVariantDetails=function(e){return e?this.reviewableItem.getVariants().find((function(t){return t.variantId===e})):null},y.prototype.uploadedImages=null,y.prototype.getSelectedTechniques=function(){var e=[];return this.techniqueInputs.forEach((function(t){t.checked&&e.push(t.value)})),e},y.prototype.onSubmit=function(){var e=this,t=!1;if(this.starRating.getStars()||(t=!0,this.nodeRatingTitle.style.color="red",this.nodeRatingTitle.scrollIntoView(),setTimeout(function(){this.nodeRatingTitle.style.color=""}.bind(this),1500)),!this.featuredReviewCheckBox.checked)return this.submitReview(t);this.formNode.nodeTextarea.value?this.formNode.textAreaErrorMessage.classList.add("hidden"):(this.formNode.textAreaErrorMessage.classList.remove("hidden"),t=!0),this.validateInstagramUrl(this.instagramUrl.value).then((function(i){i?e.urlErrorMessage.classList.add("hidden"):(t=!0,e.urlErrorMessage.classList.remove("hidden")),e.formNode.images&&2===Object.keys(e.formNode.images).length?e.formNode.imageErrorMessage.classList.add("hidden"):(t=!0,e.formNode.imageErrorMessage.classList.remove("hidden")),p.a.hide(e.node),e.submitReview(t)}))},y.prototype.onSubmitRe=function(e,t){f.a.clearNode(this.node);var i=tag("div","pf-ui-body",[tag("p","",[dlang("reviews","Your review has been submitted for approval. For now only you can see it. If you change your mind, you can remove your review anytime.")])]);if(this.starRating.getStars()>3&&tag("p",{innerHTML:lang('Let others know what you think by adding your <a href="https://search.google.com/local/writereview?placeid=ChIJKYH-rR6aVogR22ERfPPF0t4" target="_blank" rel="nofollow noopener" class="pf-link">review here.</a>')}).append(i),e){var n=this.reviewableItem.isTypeProduct()?dlang("reviews","Product review submitted"):dlang("reviews","Design services review submitted");this.modal.setTitle(n)}else this.modal.setTitle(dlang("reviews","Error submitting the review"));tag("div","pf-mb-32",[e?i:t]).append(this.node);var r=tag("a",{className:"pf-btn pf-btn-secondary",onclick:this.reviewableItem.isTypeProduct()||this.starRating.getStars()<4?v(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(g.a)("products/should-ask-for-review");case 2:if(e.sent.success){e.next=5;break}return e.abrupt("return",this.modal.remove());case 5:f.a.clearNode(a),this.getExternalReviewRequest("trustpilot").append(this.node),this.modal.setFooterContent(tag("a",{text:lang("Review us"),title:lang("Review us"),href:"https://www.trustpilot.com/review/printful.com",className:"pf-btn pf-btn-primary float-left",target:"_blank",attr:{rel:"nofollow"}}));case 8:case"end":return e.stop()}}),e,this)}))).bind(this):function(){this.modal.remove()}.bind(this)},this.reviewableItem.isTypeProduct()?lang("Ok"):lang("Close")),a=tag("div","",[r]).append(this.node);this.onSubmittedCallback&&this.onSubmittedCallback()},y.prototype.renderDetails=function(e){var t=e.target;t.checked?(t.value=1,this.featuredReviewDetails.classList.remove("hidden")):(t.value=0,this.featuredReviewDetails.classList.add("hidden"))},y.prototype.getExternalReviewRequest=function(e){var t="trustpilot"===e?PF.ASSETS_URL+"images/products-catalog/trustpilot-review.svg":PF.ASSETS_URL+"images/products-catalog/yelp-review.svg",i="trustpilot"===e?dclang("products","trustpilot review request","Weâre so glad youâre loving Printful products! Would you consider <strong>reviewing us on Trustpilot?</strong> Sharing your experience and help others find Printful."):dclang("products","yelp review request","Weâre so glad youâre loving Printful products! Would you consider <strong>reviewing us on Yelp?</strong> Sharing your experience and help others find Printful.");return tag("div","pf-border-top pf-pt-32 pf-pb-16",[tag("p","pf-h3 pf-m-0",dlang("","Thanks for the positive reviews!")),tag("img",{className:"img-responsive pf-mx-auto pf-my-24",src:t,attr:{alt:"collect reviews "+e}}),tag("p",{className:"pf-m-0",innerHTML:i})])},y.prototype.validateInstagramUrl=function(e){return Object(g.a)("products/validate-instagram-url",{instagramUrl:e}).then((function(e){return e.success}))},y.prototype.submitReview=function(e){if(!e){p.a.show(this.node);var t=[];for(var i in this.formNode.images){var n={key:this.formNode.images[i].temporaryFileKey,isTemporaryFile:!0};!this.formNode.images[i].key||this.formNode.images[i]instanceof m.a||(n.key=this.formNode.images[i].key,n.isTemporaryFile=!1),t.push(n)}var r={reviewableItemId:this.reviewableItem.getId(),reviewableItemType:this.reviewableItem.getType(),rating:this.starRating.getStars(),review:this.formNode.nodeTextarea.value,images:t,printTechniques:this.getSelectedTechniques(),selectedVariant:this.getSelectedVariantId(),isForFeatured:this.featuredReviewCheckBox.checked,instagramUrl:this.instagramUrl.value,isEditing:this.isEditing,oldReviewId:this.oldReviewId};(new u.a).submitProductReview(r,this.onSubmitRe.bind(this))}},y.prototype.setValuesForExistingReview=function(e){this.starRating.setStars(e.rating),this.featuredReviewCheckBox.checked=e.isFeatured,e.featuredReviewData.instagramUrl&&(this.instagramUrl.value=e.featuredReviewData.instagramUrl),e.isFeatured&&this.featuredReviewDetails.classList.remove("hidden");var t=this.getVariantDetails(e.variantId);for(var i in this.colorPicker.setVariant(t),this.sizePicker.setVariant(t),e.printTechniques)for(var n in this.techniqueInputs)e.printTechniques[i]===this.techniqueInputs[n].value&&(this.techniqueInputs[n].checked=!0)},(globalThis||{}).PFProductReviewForm=y;var b=i("V5mN"),P=i("cCrT"),C=i("97Au"),T=i("UIgN"),w=function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this._reviewableItem=e,PF.Customer.customerId){this.onSubmittedCallback=t;var a=tag("div");p.a.show(a,{minHeight:120});var o=e.isTypeProduct()?dlang("reviews","Review this product"):dlang("reviews","Tell us what you think"),s=new C.a.Par;s.accessibility=!0,s.onShown=function(e){Object(T.b)(e.target.querySelector(".modal-body"))},r&&(s.onClose=function(){Object(T.a)(r)}),this.modal=new C.a(s),this.modal.setTitle(o),this.modal.setContent(a),this.modal.show();var l=!!i;(new u.a).canSubmitAReview(e,l,(function(e,t){e?i?n.editReview(i):n.beginReviewing():n.onNotAllowedToSubmit(t)}))}else this.signupPopUp()};w.prototype.onNotAllowedToSubmit=function(e){this.modal.setTitle("Oops!"),this.modal.setContent(tag("div","",[tag("p","pf-mb-32",e),tag("a",{className:"pf-btn pf-btn-primary",onclick:function(){this.modal.remove()}.bind(this)},lang("Got it"))]))},w.prototype.beginReviewing=function(){this.modal.setContent(new y(this._reviewableItem,this.modal,this.onSubmittedCallback))},w.prototype.editReview=function(e){this.modal.setContent(new y(this._reviewableItem,this.modal,this.onSubmittedCallback,e))},w.prototype.signupPopUp=function(){var e=new P.a,t=b.a.Par;t.returnUrl=e.path+(e.query.toString()?"?"+e.query.toString():""),t.signUpContent=[[tag("span",{innerHTML:lang("<strong>Automatic</strong> order fulfillment")})],[tag("span",{innerHTML:lang("Download free print file <strong>templates</strong> and <strong>mockups</strong>")})],lang("No upfront or monthly fees")],t.signInContent=this._reviewableItem.isTypeProduct()?[dlang("reviews","Please sign in to review products.")]:[dlang("reviews","Please sign in to review design services.")],new b.a(t)},(globalThis||{}).PFProductReview=w;var I=i("fQ40"),S=i("L5Qw"),E=i("mGLc"),O=i("YBfo");function k(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return L(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return L(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function L(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var A=function(e,t,i,n){this.reviewableItem=e,this.page=1,this.stars=t||0,this.withPictures=!1,this.locale=null,this.sortBy=null,this.shouldScrollToNode=void 0===i||i,this.node=tag("div"),this.reloadFilters=n};A.prototype=new f.a.Base,A.prototype.append=function(e){return this.node.append(e),this},A.prototype.shouldScrollToNode=!0,A.prototype.load=function(e,t,i,n,r,a){p.a.show(this.node,{minHeight:150}),e&&(this.page=e),null!=t&&(this.stars=t),null!=i&&(this.locale=i),null!=n&&(this.withPictures=n),null!=r&&(this.sortBy=r),null!=a&&(this.shouldScrollToNode=a),(new u.a).getReviews({reviewableItemId:this.reviewableItem.getId(),reviewableItemType:this.reviewableItem.getType(),page:this.page,stars:this.stars,locale:this.locale,withPictures:this.withPictures,sortBy:this.sortBy,perPage:4,callback:this.render.bind(this)})},A.prototype.render=function(e){p.a.hide(this.node);var t=tag("div","text-center",[tag("a",{className:"pf-btn pf-btn-lg pf-btn-primary pf-mt-24",onclick:function(e){new w(this.reviewableItem,this.load.bind(this,1),null,e.target)}.bind(this)},dlang("reviews","Add a review"))]);f.a.clearNode(this.node);var i=(this.reviewableItem.isTypeProduct()?dlang("reviews","There are no submitted reviews for this product right now."):dlang("reviews","There are no submitted reviews for this service right now."))+" "+dlang("reviews","Would you like to leave one?"),r=this.reviewableItem.getReviewRating().reviewCount;if(r){if(this.reviewableItem.isTypeProduct()){tag("div","col-12",[tag("div","row",[tag("div","col-12 col-sm-3 margin-top-10 product-reviews__overview",[A.getReviewRatingNode(this.reviewableItem,!0),A.getReviewOverview(this.reviewableItem,this.reloadFilters)]),tag("div","col-12 col-sm-9 pf-mt-40 margin-top-25 product-reviews__reviews-list",[this._review=tag("div"),this._paging=tag("div","reviews-paging"),tag("div","",[t])])])]).append(this.node);var o=document.getElementById("mobileOverview");o&&(o.innerHTML="",A.getReviewRatingNode(this.reviewableItem,!0).append(o),A.getReviewOverview(this.reviewableItem,this.reloadFilters).append(o));for(var s=a()(".pro-star-text"),l=[],c=0;c<s.length;c++)l.push(a()(s[c]).outerWidth());var u=l.reduce((function(e,t){return e>t?e:t}),0);if(a()(".pro-star-text").css({minWidth:u}),!e.total&&r)return void A.renderNoResult(dlang("reviews","There are no reviews matching selected criteria, would you like to leave one?"),t,this._review)}var d,h=k(e.items);try{for(h.s();!(d=h.n()).done;){var g=d.value;new n.a(g,this.onRequestDelete.bind(this,g),this.onRequestEdit.bind(this),this.load.bind(this)).append(this._review)}}catch(e){h.e(e)}finally{h.f()}var m=new I.a;m.page=e.page,m.pages=e.pages,m.callback=function(e){this.load(e)}.bind(this),new S.a(m).append(this._paging),this.shouldScrollToNode?this.scrollToNode():this.shouldScrollToNode=!0}else A.renderNoResult(i,t,this.node)},A.renderNoResult=function(e,t,i){tag("div","col-12 pf-mt-24 pf-mb-48 pf-bg-lighter pf-py-64 text-center",[tag("img",{className:"img-responsive center-block",src:"/static/images/products-catalog/no-ratings-illustration.svg"}),tag("p","pf-mt-24 pf-mb-0",e),t]).append(i)},A.getReviewOverview=function(e,t,i,n){var r=e.getReviewOverview();if(0===r.length||!e.isTypeProduct())return tag("div");for(var a={tag:"div",className:"products-review-overview",els:[]},o=1;o<=5;o++){var s=0===r[o]||i,l=tag("");l=s?tag("span","pro-star-text pf-pr-16",dnlang("products","{count} star","{count} stars",o).replace("{count}",o)):tag("a",{className:"pro-star-text pf-pr-16 pf-link",href:n?n+"_"+o:null,target:O.a.isOrderFlow()||O.a.isProductPush()||O.a.isGenerator()?"_blank":"_self",attr:{"aria-label":dlang("products","See {count} star reviews").replace("{count}",o)}},dnlang("products","{count} star","{count} stars",o).replace("{count}",o)),a.els.unshift(tag("div",{className:"pf-mt-8",onclick:s?null:function(e){t&&t(e)}.bind(null,o)},[l,tag("span","pro-progress-base",[tag("span",{className:"pro-progress pf-bg-brown",style:{width:r[o]+"%"}})]),tag("span","pf-pl-12",r[o]+"%")]))}if(t){var c=e.getReviewRating().reviewCount;a.els.unshift(tag("div","pf-mt-8 pf-mb-40",[tag("a",{className:"pf-link",onclick:t.bind(null,0)},dnlang("reviews","{count} review","{count} reviews",c).replace("{count}",c))]))}return Object(f.a)(a)},A.prototype.onRequestDelete=function(e){confirm(lang("Are you sure? This cannot be undone!"))&&(p.a.show(this.node,{minHeight:150}),(new u.a).deleteReview(e.reviewId,a.a.proxy((function(){this.page=1,this.load()}),this)))},A.prototype.onRequestEdit=function(e){new w(this.reviewableItem,this.load.bind(this,1),e)},A.getReviewRatingStarNode=function(e){for(var t=e.getReviewRating(),i=[],n=1;n<=5;n++){var r=t.rating,a="";a=parseInt(r)!==r&&Math.round(r)===n?"-half":n>r?"-outline":"",i.push(tag("span","pf-i pf-i-18 pf-i-star"+a+" pf-mr-6 pf-text-brown"))}return i},A.getReviewRatingNode=function(e,t,i,n){if(!e.isTypeProduct())return tag("div");t=t||0;var r=e.getReviewRating();if(!r.reviewCount)return{tag:"a",className:"pf-link",text:dlang("reviews","Review product"),onclick:function(){new w(e,n)}};var a,o=E.a.getReviewRatingStarNode(e),s=r.reviewCount;return t?(this.reviewCount=s,a=tag("div","",[tag("div",{className:"pf-h2 pf-normal",attr:{"aria-hidden":"true"}},parseFloat(r.rating).toFixed(1)),tag("div",{className:"pf-mt-8 star-rating__stars star-rating__stars--inline",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",r.rating)}},o)])):a=tag("a",{className:"pf-link",onclick:i.bind(this,parseFloat(r.rating).toFixed(1)),data:{toggle:"tooltip",placement:"bottom"}},[tag("div",{className:"star-rating__stars star-rating__stars--inline",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",r.rating)}},o),nlang("%d Review","%d Reviews",s)]),a},A.prototype.scrollToNode=function(){var e=a()(".catalog__product__tabs"),t=a()(window).width()<768?e.height():e.outerHeight();a()("html, body").animate({scrollTop:e.offset().top+t},1e3)},(globalThis||{}).PFProductReviewList=A},AUjr:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("6t3j"),r=i("vUhP"),a=i("eYhR"),o=i("nwx2"),s=i("X5Ic"),l=i("nF4n"),c=i("97Au"),u=i("UIgN"),d=Class({_product:null,_variant:null,_priceListItems:null,_asteriskNode:null,displayAsterisk:!0,_detailedInfoModalTrigger:null,__construct:function(e,t){this._product=e,this.node=tag("span"),t?this._render(t):(new n.a).getBrandingOptionsPriceList(this._product,this._render)},_render:function(e){l.a.clearNode(this.node),this._priceListItems=e,tag("div","products-pricing-info__muted text-muted",[tag("span","products-pricing-info__red",["* "]),tag("span","pf-text-muted",[dlang("products","Price varies depending on the production technique, print placement, product color and size, taxes, and shipping. See")," "]),this._detailedInfoModalTrigger=tag("a",{className:"pf-link",onclick:this._showModal.bind(this)},[dlang("products","detailed info")])]).append(this.node)},_showModal:function(e){var t=this;e=e||"";var i=new c.a.Par;i.title=dlang("products","Product extras and costs"),i.modalDialogClass="modal-lg",i.accessibility=!0,i.onShown=function(e){Object(u.b)(e.target.querySelector(".modal-body"))},i.onClose=function(){t.modal.remove(),Object(u.a)(t._detailedInfoModalTrigger)},this.modal=new c.a(i),this.modal.setContent(this.getContent(e)),this.modal.show()},_getBrandingItem:function(e){var t=this._getBrandingItemId(e.brandingOption);return tag("div","branding-options__category pf-px-12 pf-py-16",[tag("a",{className:"category",href:"#"+t,data:{toggle:"collapse"},attr:{role:"button","aria-expanded":!1,"aria-controls":t}},[tag("div","",[tag("span","arrow"),tag("span","branding-options__category__item-title",[e.title])]),tag("div","branding-options__category__price-wrapper",[tag("p","branding-options__category__item-price",[r.a.createDiscountElementFromPrices(e.price,e.discountedPrice,e.currency)]),tag("span","pf-text-muted text-right",[e.unit?" / "+e.unit:""])]),tag("div",{className:"collapse info-text",id:t},[tag("p","branding-options__category__item-content margin-bottom-20",[e.content])])])])},variantChanged:function(e,t){this._variant=e,this._technique=t,this._priceListItems?this._render(this._priceListItems):(new n.a).getBrandingOptionsPriceList(this._product,this._render)},getContent:function(e){var t=new o.a("secondary"),i=[],n=this._getTabCaptions();for(var r in n){var s=new a.a,c=n[r];s.caption=c.title,e&&n.some((function(t){return t.id==e}))?s.isActive=c.id==e:s.isActive=0==r;var u=tag("div",s.isActive?"":"hidden");"technique"===c.id&&this._getTechniqueContent().append(u),"location"===c.id&&this._getFulfillmentLocationContent().append(u),i.push(u),s.onclick=function(e,t){for(var n in i)if(i.hasOwnProperty(n)){var r=i[n];n===t?l.a.removeClassName(r,"hidden"):l.a.addClassName(r,"hidden")}}.bind(this,c,r),t.add(s)}l.a.addClassName(t.node,"pf-mb-24");var d=dlang("products","The product <b>price depends on</b> factors like production <b>technique, print placement, product color, size</b> and <b>fulfillment location.</b> You also have to take into account that shipping and taxes are extra.")+" ";return tag("div","branding-options",[tag("div","",[tag("p",{className:"pf-m-0 pf-pb-16 text-muted",innerHTML:d}),t,tag("div","",i)])])},_getTabCaptions:function(){var e=[];return Object.keys(this._priceListItems).length&&e.push({id:"technique",title:clang("printing","Technique")}),e.push({id:"location",title:lang("Fulfillment location")}),e},_getTechniqueContent:function(){var e=this._product.availableTechniques||[this._product.type],t=tag("div",""),i=0;for(var n in e)if(e.hasOwnProperty(n)){i++;var r=e[n],a=s.a.LABELS[r],o=tag("div","pf-mt-32",[tag("div","pf-h4 pf-mb-12",[i+". "+a])]),l=this.getTechniqueTabContent(r);l&&l.append(o);var c=this._priceListItems[r];for(var u in c)this._getBrandingItem(c[u]).append(o);o.append(t)}return t},getTechniqueTabContent:function(e){return e==s.a.TYPE_EMBROIDERY?tag("p",{className:"pf-mt-0 pf-mb-32 text-muted"},[tag("div",{innerHTML:dlang("products","Your design will be machine-embroidered on the product. <b>Embroidery costs more than printed clothing because it takes more time and has higher production costs.</b> <br/><br/>Embroidery also comes with <b>digitization</b> and <b>adjustment costs</b>. We don't accept files that have been digitized elsewhere and we only charge files that are part of an order.")}),tag("div",{className:"pf-mt-16",innerHTML:dlang("products","<b>Order 25+ embroidery products in a single order, and we'll digitize all your embroidery designs for free.</b> You can choose different products and add as many designs as you like.")}),tag("div",{className:"pf-mt-16",innerHTML:dlang("products","Free digitization is also available as part of {hl}Printful Pro{/hl}. With the subscription plan, youâll skip the fee for every new embroidery design you add.").replace("{hl}",'<a href="'+langUrl("/printful-pro")+'" class="pf-link text-nowrap" target="_blank">').replace("{/hl}","</a>")})]):e===s.a.TYPE_T_SHIRT?tag("p",{className:"pf-mt-0 pf-mb-32 text-muted",innerHTML:dlang("products","Your design will be printed directly on the product with the DTG (direct-to-garment) technique that yields bold and vibrant prints. Our base price <b>includes one print</b>, these are the extras you can get.")}):null},_getFulfillmentLocationContent:function(){var e=dlang("products","Our product prices can change depending on where an order is fulfilled and which currency you use to pay for it."),t=dlang("products","Each product has a <b>fixed price</b> for each location. Our North American products have a fixed USD price, and our products in Europe have a fixed EUR price."),i=dlang("products","Products fulfilled in one location but charged in a different currency have a <b>floating price</b>."),n=dlang("products","For example, let's say you're ordering a t-shirt that we only fulfill in the US and you're paying for it in EUR. The price you pay would be our USD price converted to EUR. The end price would also depend on that month's exchange rate, which is what makes it a floating price."),r=dlang("products","If you're ordering a product that we fulfill in Europe and you're paying for it in EUR, you would pay our fixed EUR price.");return tag("div","pf-text-muted",[tag("p","",e),tag("p",{innerHTML:t}),tag("p",{innerHTML:i}),tag("p","",n),tag("p","",r)])},setAsterisk:function(e){this._asteriskNode=e},_getBrandingItemId:function(e){return"sub_"+ ++d._brandingItemId+"_"+e}},l.a.Base);d._brandingItemId=0,window&&((globalThis||{}).PFProductsCatalogProductBrandingOptionPriceList=d)},B5vy:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Iarc"),r=i.n(n);function a(e,t,i){var n=e.position.areaWidth,a=e.position.areaHeight,o=t/n,s=i/a,l=Math.min(o,s),c=n/2,u=a/2,d=t/2,h=i/2,p=(e.position.left+e.position.width/2-c)*l,f=(e.position.top+e.position.height/2-u)*l;e.isTextLayer()?(e.size*=l,r.a.calculateTextboxPositions(e)):(e.position.width*=l,e.position.height*=l),e.position.left=d+p-e.position.width/2,e.position.top=h+f-e.position.height/2,e.position.areaWidth=t,e.position.areaHeight=i,e.originalPosition=e.position.getClone()}},B8kU:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"k",(function(){return r})),i.d(t,"n",(function(){return a})),i.d(t,"l",(function(){return o})),i.d(t,"m",(function(){return s})),i.d(t,"o",(function(){return l})),i.d(t,"j",(function(){return c})),i.d(t,"p",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"e",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"f",(function(){return f})),i.d(t,"d",(function(){return g})),i.d(t,"g",(function(){return m})),i.d(t,"h",(function(){return _})),i.d(t,"c",(function(){return v}));var n="designer/mockupModule/",r="m_setFlag",a="m_setMockupType",o="m_setMockupProduct",s="m_setMockupProductDesign",l="m_setSelectedVariants",c="m_resetState",u="m_setUsedDesignPlacementIds",d="g_getFlag",h="g_hasCustomMockupAccess",p="g_mockupProduct",f="g_hasSizesSelected",g="g_hasColorsSelected",m="g_isCustomMockupType",_="a_loadCustomMockupAccessFlag";function v(e){return n+e}},BVsF:function(e,t,i){"use strict";i.d(t,"g",(function(){return a})),i.d(t,"h",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"c",(function(){return h}));var n=i("Zwo4"),r="".concat(n.a,"/gradients"),a="m_putGradientItemsIntoRepo",o="m_setHasLoadedAllGradients",s="g_hasLoadedAllGradients",l="g_activeGradientItems",c="g_getGradientItems",u="a_loadAllActiveGradientItems",d="a_loadGradients",h=function(e){return"".concat(r,"/").concat(e)}},Bxww:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"h",(function(){return a})),i.d(t,"g",(function(){return o})),i.d(t,"j",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"b",(function(){return h}));var n="designer/productModule",r="m_setProductItem",a="m_setPlacementsWithOnlyBackgroundColor",o="m_setOptionGroupTagInfo",s="m_setProductTechnique",l="g_productItem",c="g_placementsWithOnlyBackgroundColor",u="g_optionGroupTagInfo",d="g_productTechnique";function h(e){return n+"/"+e}},CDME:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("2Zm2"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.originalPrice=null,a.prototype.minOriginalPrice=null,a.prototype.originalPriceVD=null,a.prototype.minOriginalPriceVD=null,a.prototype.isOriginalPriceDiscounted=!1,a.prototype.isMinOriginalPriceDiscounted=!1,a.prototype.originalLaunchPrice=null,a.prototype.minOriginalLaunchPrice=null,a.prototype.launchPriceExpiryTime=null,a.prototype.getProfit=function(e){return this.retailPrice-(e?this.originalPriceVD:this.originalPrice)},a.prototype.hasVolumeDiscountAvailable=function(){return this.originalPrice>this.originalPriceVD||this.minOriginalPrice>this.minOriginalPriceVD},a.prototype.getMaximumProfit=function(e){return this.retailPrice-(e?this.minOriginalPriceVD:this.minOriginalPrice)},a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t.originalPrice=parseFloat(t.originalPrice)||0,t.originalPriceVD=parseFloat(t.originalPriceVD)||0,t.minOriginalPrice=parseFloat(t.minOriginalPrice)||0,t.minOriginalPriceVD=parseFloat(t.minOriginalPriceVD)||0,t.retailPrice=parseFloat(t.retailPrice)||0,t},window&&((globalThis||{}).PFItemsGeneratorPriceItem=a)},CXOy:function(e,t,i){"use strict";i.d(t,"f",(function(){return P})),i.d(t,"e",(function(){return C})),i.d(t,"d",(function(){return T})),i.d(t,"a",(function(){return I})),i.d(t,"i",(function(){return S})),i.d(t,"h",(function(){return E})),i.d(t,"g",(function(){return O})),i.d(t,"c",(function(){return k})),i.d(t,"b",(function(){return L}));var n,r=i("gWUq"),a=i("X5Ic"),o=i("MSZa"),s=i("mTkf"),l=i("wy2R"),c=i.n(l),u=i("LvDl"),d=i.n(u),h=i("Jkv8");function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function f(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function g(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_(e,t,"set"),i),i}function m(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,_(e,t,"get"))}function _(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function y(e,t,i){return t&&v(e.prototype,t),i&&v(e,i),e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var P=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.itemRepository=t.itemRepository||{},this.viewType=t.viewType||S.LIST,this.filter=t.filter?new T(t.filter):null,this.currentItemsResponseMetadata=t.currentItemsResponseMetadata?new C(t.currentItemsResponseMetadata):null,this.selectedItemIds=t.selectedItemIds||[],this.flags=t.flags||{}};P.FLAG_KEYS=Object.freeze({IS_LOADING:"IS_LOADING",SHOW_DELETE_MODAL:"SHOW_DELETE_MODAL",JUST_CREATED_FIRST_TEMPLATE:"JUST_CREATED_FIRST_TEMPLATE",HAS_NOT_CREATED_ANY_TEMPLATES:"HAS_NOT_CREATED_ANY_TEMPLATES",HAS_NO_PUSH_STORES:"HAS_NO_PUSH_STORES",HAS_NOT_CLOSED_INTRO:"HAS_NOT_CLOSED_INTRO",IS_LOADING_ASYNC_DEPS:"IS_LOADING_ASYNC_DEPS",SHOW_MOCKUP_DOWNLOAD_MODAL:"SHOW_MOCKUP_DOWNLOAD_MODAL",HAS_CREATE_ORDER_PERMISSION:"HAS_CREATE_ORDER_PERMISSION",SHOW_PRODUCT_SWAP_INFORMATION:"SHOW_PRODUCT_SWAP_INFORMATION"});var C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.itemIds=t.itemIds||[],this.page=parseInt(t.page||0),this.itemsPerPage=parseInt(t.itemsPerPage||0),this.totalPages=parseInt(t.totalPages||0),this.totalItems=parseInt(t.totalItems||0),this.totalTemplateCount=parseInt(t.totalTemplateCount||0),this.filter=t.filter?new T(t.filter):null}return y(e,[{key:"isLastPage",get:function(){return this.page===this.totalPages}}]),e}(),T=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),this.search=t.search||null,this.sortBy=t.sortBy||k.CREATED_DATE,this.sortDir=t.sortDir||L.DESC,this.page=parseInt(t.page||1),this.perPage=parseInt(t.perPage||11)}return y(e,[{key:"isDifferentThan",value:function(t){return!(t&&t instanceof e)||Object.keys(this).some(function(e){return this[e]!=t[e]}.bind(this))}},{key:"toQueryParams",value:function(){var e={};return this.search&&this.search.length&&(e.search=this.search+""),this.sortBy&&this.sortBy.length&&(e.sortBy=this.sortBy+""),this.sortDir&&this.sortDir.length&&(e.sortDir=this.sortDir+""),this.page&&(e.page=this.page+""),e}}]),e}(),w=new WeakMap,I=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};b(this,e),w.set(this,{writable:!0,value:null}),this.id=t.id||null,this.title=t.title||null,this.templateStatus=t.templateStatus||null,this.productStatus=t.productStatus||null,this.productData=t.productData?t.productData instanceof a.a?a.a.duplicateFrom(t.productData):a.a.fromArray(t.productData):null,this.mainImage=t.mainImage?new o.a(t.mainImage):null,this.designRaw=t.design||t.designRaw||null,this.colors=0!==t.colors.length&&t.colors?t.colors:{},this.stitchColor=t.stitchColor||null,this.sizes=t.sizes||null,this.technique=t.technique||null,this.placementNames=t.placementNames||{},this.placementSVGs=t.placementSVGs||{},this.containsLicensedAsset=t.containsLicensedAsset||!1,this.containsProContent=t.containsProContent||!1,this.requiresSubscription=t.requiresSubscription||!1,this.hasUnsupportedTechnique=t.hasUnsupportedTechnique||!1,this.optionData=t.optionData||{},this.createdAt=t.createdAt?t.createdAt instanceof c.a?c.a.utc(t.createdAt.toISOString()):c.a.utc(t.createdAt):null,this.updatedAt=t.updatedAt?t.updatedAt instanceof c.a?c.a.utc(t.updatedAt.toISOString()):c.a.utc(t.updatedAt):null,this.storeData=t.storeData?d.a.cloneDeep(t.storeData):null,this.swapCategories=t.swapCategories||[]}var t,i;return y(e,[{key:"shouldShowTechnique",get:function(){var e;return!(null===(e=this.productData)||void 0===e||!e.hasMultipleTechniques())&&this.technique}},{key:"shouldShowThreadColors",get:function(){return this.technique===a.a.TECHNIQUE_EMBROIDERY}},{key:"shouldShowStitchColors",get:function(){return this.technique===a.a.TECHNIQUE_CUT_SEW}},{key:"isDraft",get:function(){return this.templateStatus===e.TEMPLATE_STATUSES.DRAFT}},{key:"isActive",get:function(){return this.templateStatus===e.TEMPLATE_STATUSES.ACTIVE}},{key:"displaySizes",get:function(){return(this.sizes||[]).map((function(e){return a.a.LABELS[e]||e})).filter((function(e){return!!e}))}},{key:"displayColors",get:function(){var e=Object.keys(d.a.pickBy(this.colors||{},(function(e){return!!e})));return this.productData.colors.filter((function(t){return d.a.includes(e,t.colorName)}))}},{key:"techniqueDisplayName",get:function(){return this.technique?a.a.LABELS[this.technique]||this.technique:""}},{key:"getPlacementSVG",value:(t=regeneratorRuntime.mark((function e(t){var i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.setPFCanvasFonts)();case 2:return e.abrupt("return",new Promise((function(e,n){i.getDesign()&&t?i.placementSVGs&&i.placementSVGs[t]?e(i.placementSVGs[t]):Object(s.e)(i.getDesign(),t).then((function(n){i.placementSVGs||(i.placementSVGs={}),i.placementSVGs[t]=n,e(n)})).catch((function(e){return n(e)})):n(new Error("Design or placement type missing!"))})));case 3:case"end":return e.stop()}}),e)})),i=function(){var e=this,i=arguments;return new Promise((function(n,r){var a=t.apply(e,i);function o(e){f(a,n,r,o,s,"next",e)}function s(e){f(a,n,r,o,s,"throw",e)}o(void 0)}))},function(e){return i.apply(this,arguments)})},{key:"getDesign",value:function(){return m(this,w)||g(this,w,this.designRaw?this.designRaw instanceof r.a?r.a.duplicateFrom(this.designRaw):r.a.fromArray(this.designRaw):null),m(this,w)}}]),e}();I.TEMPLATE_STATUSES=Object.freeze({DRAFT:"draft",ACTIVE:"active",REMOVED:"removed"}),I.PRODUCT_STATUSES=Object.freeze({ACTIVE:"active",INACTIVE:"inactive",DISABLED_IN_PUSH:"disabled_in_push",BROKEN:"broken"});var S=Object.freeze({GRID:"GRID",LIST:"LIST"}),E=Object.freeze({CREATED_DATE_DESC:"CREATED_DATE_DESC",CREATED_DATE_ASC:"CREATED_DATE_ASC",UPDATED_DATE_DESC:"UPDATED_DATE_DESC",UPDATED_DATE_ASC:"UPDATED_DATE_ASC",TITLE_ASC:"TITLE_ASC",TITLE_DESC:"TITLE_DESC"}),O=Object.freeze((p(n={},E.CREATED_DATE_DESC,dclang("dashboard","sort type","Created: newest first")),p(n,E.CREATED_DATE_ASC,dclang("dashboard","sort type","Created: oldest first")),p(n,E.UPDATED_DATE_DESC,dclang("dashboard","sort type","Updated: newest first")),p(n,E.UPDATED_DATE_ASC,dclang("dashboard","sort type","Updated: oldest first")),p(n,E.TITLE_ASC,dclang("dashboard","sort type","Title: A to Z")),p(n,E.TITLE_DESC,dclang("dashboard","sort type","Title: Z to A")),n)),k=Object.freeze({CREATED_DATE:"created",UPDATED_DATE:"updated",TITLE:"title"}),L=Object.freeze({ASC:"asc",DESC:"desc"})},Cc5H:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"t",(function(){return r})),i.d(t,"o",(function(){return a})),i.d(t,"s",(function(){return o})),i.d(t,"u",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"p",(function(){return c})),i.d(t,"z",(function(){return u})),i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"w",(function(){return p})),i.d(t,"e",(function(){return f})),i.d(t,"x",(function(){return g})),i.d(t,"i",(function(){return m})),i.d(t,"n",(function(){return _})),i.d(t,"j",(function(){return v})),i.d(t,"k",(function(){return y})),i.d(t,"y",(function(){return b})),i.d(t,"r",(function(){return P})),i.d(t,"q",(function(){return C})),i.d(t,"h",(function(){return T})),i.d(t,"g",(function(){return w})),i.d(t,"f",(function(){return I})),i.d(t,"v",(function(){return S})),i.d(t,"m",(function(){return E})),i.d(t,"l",(function(){return O}));var n="productTemplates/index",r="m_setFlag",a="m_loadItemsIntoRepo",o="m_removeItemsFromRepo",s="m_setItemsResponseMetadata",l="m_changeViewType",c="m_loadSavedItem",u="m_updateItemFiles",d="m_changeItemCheckedState",h="m_changePageCheckedState",p="m_toggleDeleteModal",f="m_cleanupDeletedItemData",g="m_toggleMockupDownloadModal",m="g_getFlag",_="g_getPageItems",v="g_getItem",y="g_getItemCheckedState",b="a_updateFilterAndLoad",P="a_loadUsingFilter",C="a_loadSingleItem",T="a_duplicateItem",w="a_deleteItems",I="a_closeIntro",S="a_swapProduct";function E(e){return e.productTemplates.index}function O(e){return n+"/"+e}},Cj9M:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Oc5s"),r=function(){};r.prototype=new n.a,r.prototype.isChecked=!1,r.prototype.type="checkbox",r.prototype.wrapperClass="",r.prototype.labelClass="",n.a.prototype.dataTestTag="",window&&((globalThis||{}).PFFormsCheckboxPar=r)},CvqS:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({optionItems:[],values:null,onChange:null,inputNamePrefix:""});window&&((globalThis||{}).PFComponentsProductOptionsPar=n)},"D/Ov":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("xeH2"),r=i.n(n),a=i("6t3j"),o=i("E17x"),s=i("X5Ic"),l=i("XLZy"),c=i("97Au"),u=i("nF4n"),d=i("x0He");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=v(e);if(t){var r=v(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return m(this,i)}}function m(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(o,e);var t,n,r,a=g(o);function o(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),i=_(t),r=void 0,(n="review")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,t.review=e,t}return t=o,(n=[{key:"render",value:function(e){var t=new d.b;t.components={"helpful-review-button":function(){return i.e(216).then(i.bind(null,"Nib9"))}},t.template='<helpful-review-button :review="review" :parent="parent"/>',t.initialData={review:this.review,parent:e},new d.a(t).prepend(e)}}])&&p(t.prototype,n),r&&p(t,r),o}(i("SBaP").a),b=Class({review:null,modal:null,variant:null,expanded:!1,eventNamespace:".reviewGalleryKeyup",_editReviewCallback:null,__construct:function(e,t,i,n){this.review=e,this._editReviewCallback=i;for(var r=[],a=1;a<=5;a++){var o=a>e.rating?"-outline":"";r.push(tag("span",{className:"pf-i pf-i-18 pf-i-star"+o+" pf-mr-6 pf-text-brown",attr:{"aria-hidden":!0}}))}e.variantId&&this._setReviewVariant();var l=String(e.review).trim().replace(/(?:\r\n|\r|\n)/g,"<br />");this.node=tag("div","pf-ui-body review-item pf-border-bottom pf-py-24",[tag("div","",[tag("div",{className:"star-rating__stars",attr:{"aria-label":lang("{rating} out of 5 stars").replace("{rating}",e.rating)}},r),e.isApproved&&e.isOwn?tag("span","pf-badge pf-badge-small pf-badge--primary pf-mr-8",[lang("You")]):"",e.isApproved?"":tag("span","pf-badge pf-badge-small pf-badge--info pf-mr-8",[dlang("reviews","Waiting approval")]),tag("strong","pf-mr-16 data-hj-suppress",[clang("person","By")," ",e.name||tag("i","",[dlang("reviews","Anonymous")])]),tag("span","pf-mr-16",[moment.unix(e.createdAt).fromNow(),e.fromCountry?" "+dlang("reviews","from {country}").replace("{country}",e.fromCountry):""]),e.printTechniques.map((function(e){return tag("span","pf-badge pf-badge-small pf-badge--default pf-mr-8",s.a.LABELS[e])})),this.variant&&this.variant.size?tag("span","pf-badge pf-badge-small pf-badge--default pf-mr-8",this._getVariantSize()):"",tag("span","pf-mr-8",this._getBackgroundColor()),e.canDelete&&t?tag("a",{className:"pf-link float-none"+(e.printTechniques.length?" pf-ml-8":""),onclick:t},[lang("Remove")]):"",e.isApproved?"":tag("a",{className:"pf-link pf-ml-8 float-none",onclick:this._editReview},[lang("Edit")]),tag("div",{className:"pf-mt-16",prop:{innerHTML:l},style:{"word-break":"break-word"}}),this._getImageNode(),this._reviewActionNode=tag("div","pf-text-md-right pf-mt-24 review-actions clearfix",[e.customerReviews.length?tag("span",{className:"pf-link pf-pointer more-reviews-link",onclick:this._toggleCustomerReviews.bind(this)},[1===e.customerReviews.length?dlang("reviews","1 more review for other variants"):dlang("reviews","{count} more reviews for other variants").replace("{count}",e.customerReviews.length),this.chervron=tag("i","pf-i pf-i-chevron-down pf-ml-8")]):"",this.childReviewContainer=tag("div","pf-text-left hidden child-container")])])]),new y(e).render(this._reviewActionNode),this._buildCustomerReviewsNode(e.customerReviews||[],n,i)},_buildCustomerReviewsNode:function(e,t,i){if(e.length)for(var n in e){var r=b(e[n],this._deleteChildReview.bind(this,e[n],t),i).append(this.childReviewContainer);r.node.className=Number(n)+1===e.length?"pf-ui-body review-item pf-pt-16":r.node.className}},_deleteChildReview:function(e,t){confirm(lang("Are you sure? This cannot be undone!"))&&(l.a.show(this.node,{minHeight:150}),(new a.a).deleteReview(e.reviewId,r.a.proxy((function(){t()}),this)))},_toggleCustomerReviews:function(){this.expanded=!this.expanded,this.expanded?(u.a.removeClassName(this.chervron,"pf-i-chevron-down"),u.a.addClassName(this.chervron,"pf-i-chevron-up"),u.a.removeClassName(this.childReviewContainer,"hidden")):(u.a.addClassName(this.chervron,"pf-i-chevron-down"),u.a.removeClassName(this.chervron,"pf-i-chevron-up"),u.a.addClassName(this.childReviewContainer,"hidden"))},_setReviewVariant:function(){var e=new a.a;this.variant=e.getCachedVariantById(this.review.variantId)},_getVariantColor:function(){return this.variant?this.variant.color:""},_getVariantSize:function(){return this.variant?this.variant.size:""},_getBackgroundColor:function(){var e=[];if(this.variant){var t=this.variant.color&&this.variant.colorCode?this.variant.color+" "+this.variant.colorCode:"",i=[{tag:"span",className:"review-item__swatch-item",style:{backgroundColor:this.variant.colorCode?this.variant.colorCode:this.variant.colorCode2}}],n=tag("a",{className:"swatches__item",title:this.variant.colorCode2?t+"/"+this.variant.colorCode2:t,attr:{role:"complementary","aria-label":this.variant.name?dlang("reviews","Review for color {color}").replace("{color}",this.variant.name):dlang("reviews","Review for specific color")}},i);r()(n).tooltip({container:"body",trigger:Object(o.b)()?"manual":"hover"}),e.push(n)}return e},_getImageNode:function(){if(!this.review.images.length)return"";for(var e=tag("div","review-item__image-block pf-mt-8"),t=0,i=this.review.images.length;t<i;t++){var n=this.review.images[t];tag("a",{href:n.urlLarge,className:"review-item__image pf-p-0 pf-mx-2 pf-mt-4 pf-mb-0",onclick:this._showImage.bind(this,t),style:{backgroundImage:"url("+encodeURI(n.urlThumb)+")"},attr:{"aria-label":dnlang("reviews","Photo by {username}","Photo by {username}, {current} out of {total}",i).replace("{username}",this.review.name).replace("{current}",t+1).replace("{total}",i)}}).append(e)}return e},_showImage:function(e,t){t&&t.preventDefault();var i=this.review.images[e];this._modalGallery=tag("div",{className:"review-gallery"},[e>0?this._getNavButton(!0,this._showImage.bind(this,e-1)):"",e+1<this.review.images.length?this._getNavButton(!1,this._showImage.bind(this,e+1)):"",this._modalImage=tag("img",{className:"review-gallery__img img-responsive center-block",src:i.urlLarge,prop:{onload:function(){l.a.hide(this._modalGallery)}.bind(this)}})]);var n=this._getModal();n.setTitle(lang("Photo by {username}").replace("{username}",this.review.name)),n.setContent(this._modalGallery),n.show(),l.a.show(this._modalGallery)},_getModal:function(){if(this.modal)return this.modal;var e=new c.a.Par;return e.modalDialogClass="modal-lg",e.onShown=function(){},e.onClose=function(){r()(document).unbind(this.eventNamespace)}.bind(this),this.modal=new c.a(e),this.modal},_getNavButton:function(e,t){var i=tag("a",{className:"review-gallery__nav review-gallery__nav--"+(e?"left":"right")+" icon-arrow-down",onclick:t,attr:{target:"_blank"}}),n=this.eventNamespace,a=this._getModal();return r()(document).bind("keyup"+n,(function(t){return e&&37===t.keyCode||!e&&39===t.keyCode?(r()(document).unbind(n),i.onclick(),!1):27===t.keyCode?(r()(document).unbind(n),a.hide(),!1):void 0})),i},_editReview:function(){this._editReviewCallback(this.review)}},u.a.Base);(globalThis||{}).PFProductReviewListRow=b},DUxB:function(e,t,i){"use strict";i.d(t,"a",(function(){return A})),i.d(t,"b",(function(){return x}));var n=i("N6Gp"),r=i("X5Ic"),a=i("xeH2"),o=i.n(a),s=i("SBaP"),l=i("nF4n"),c=i("YBfo"),u=i("I/MA"),d=i("JIEg");function h(e){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function g(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),e}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=b(e);if(t){var r=b(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v(this,i)}}function v(e,t){return!t||"object"!==h(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,i){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),i}function C(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,I(e,t,"get"))}function T(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function w(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,I(e,t,"set"),i),i}function I(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function S(){return void 0!==c.a&&c.a.isInitialized()}var E=new WeakMap,O=new WeakMap,k=new WeakMap,L=new WeakSet,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(i,e);var t=_(i);function i(){var e,n,r,a;return p(this,i),e=t.call(this),L.add(y(e)),n=y(e),a=[],(r="items")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,E.set(y(e),{writable:!0,value:null}),O.set(y(e),{writable:!0,value:!0}),k.set(y(e),{writable:!0,value:void 0}),e.node=tag("ul","pf-breadcrumbs hide-only",[w(y(e),k,tag("div")),tag("span","nav-arrow left"),tag("span","nav-arrow right")]),setTimeout((function(){T(y(e),L,N).call(y(e))}),500),window.removeEventListener("resize",T(y(e),L,N).bind(y(e))),window.addEventListener("resize",T(y(e),L,N).bind(y(e))),C(y(e),k).removeEventListener("scroll",P(i,i,R)),C(y(e),k).addEventListener("scroll",P(i,i,R)),e}return g(i,[{key:"clone",value:function(){var e=new i;return this.exportItems().forEach((function(t){e.add(t)})),e}},{key:"exportItems",value:function(){var e=[];return(this.items||[]).forEach((function(t){e.push({title:t.getTitle(),href:t.getHref(),onclick:t.getOnClickHandler()})})),e}},{key:"append",value:function(e){this.node.append(e),this.render()}},{key:"render",value:function(){var e=this;l.a.clearNode(C(this,k));var t=this.items.slice();C(this,O)&&C(this,E)&&t.unshift(C(this,E));var i,n=t.pop();for(var r in t)if(t.hasOwnProperty(r)&&t[r]){var a=t[r];i=a.getHref()||a.hasClick()?tag("a",{href:a.getHref()||"javascript:;",onclick:a.hasClick()?a.getOnclick.bind(a):null},a.getTitle()):tag("span","",a.getTitle()),tag("li","",[i]).append(C(this,k))}n&&(i=tag("span","",n.getTitle()),tag("li","",[i]).append(C(this,k))),setTimeout((function(){C(e,k).scrollLeft=C(e,k).scrollWidth-C(e,k).offsetWidth}),100),T(this,L,N).call(this)}},{key:"add",value:function(e){if(e instanceof Array){for(var t in e)e.hasOwnProperty(t)&&this.add(e[t]);return this}return this.items.push(new x(e)),this.render(),this}},{key:"set",value:function(e){return this.clear(),this.add(e),this}},{key:"clear",value:function(){this.items=[],this.render()}},{key:"addIndex",value:function(e){if(S()){var t=new n.a;t.title=e,t.id=0,w(this,E,new x(t)),this.render()}}},{key:"setShouldRenderIndex",value:function(e){w(this,O,e)}}]),i}(s.a);function R(e){var t=o()(e.target).siblings(".nav-arrow.left"),i=o()(e.target).siblings(".nav-arrow.right");e.target.scrollLeft<1?t.addClass("hidden"):t.removeClass("hidden"),Math.ceil(e.target.scrollLeft)>=e.target.scrollWidth-e.target.offsetWidth?i.addClass("hidden"):i.removeClass("hidden")}function N(){C(this,k).scrollWidth<=C(this,k).offsetWidth?o()(C(this,k)).siblings(".nav-arrow").addClass("hidden"):P(A,A,R).call(A,{target:C(this,k)})}var D=new WeakMap,x=function(){function e(t){p(this,e),D.set(this,{writable:!0,value:void 0}),w(this,D,t)}return g(e,[{key:"getTitle",value:function(){return C(this,D)instanceof r.a?C(this,D).getFullTitle():S()&&C(this,D)instanceof n.a?C(this,D).getBreadcrumbName():C(this,D).title}},{key:"getHref",value:function(){return S()&&C(this,D)instanceof n.a?C(this,D).getUrl():C(this,D).href}},{key:"hasClick",value:function(){return!(C(this,D)instanceof r.a)&&(S()&&C(this,D)instanceof n.a||!!C(this,D).onclick)}},{key:"getOnclick",value:function(e){d.a.isClicked=!0,e.preventDefault();var t=this.getOnClickHandler();t&&t()}},{key:"getOnClickHandler",value:function(){var e=this;if(C(this,D)instanceof r.a)return null;if(C(this,D).onclick)return C(this,D).onclick;if(C(this,D).href)return function(){window.location.href=C(e,D).href};if(S()&&c.c.createAndDispatchEvent){var t=void 0!==u.a&&u.a.isOrderFlowInitialized&&u.a.instance||c.a.isGenerator()||c.a.isProductsPricing()||c.a.isProductPush()?c.a.EVENT_NAME:c.a.EVENT_CATEGORY_CHOOSE;return function(){c.c.createAndDispatchEvent(t,{scrollToTop:c.a.isProductsPricing(),category:C(e,D)instanceof n.a&&C(e,D)})}}}}]),e}()},DceF:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("NXHT"),r=i("6JZw"),a=i("nF4n"),o=function(){this.activeMarketplaces=[],this.inactiveMarketplaces=[]};o.prototype=new r.a,o.prototype.toArrayKeys=["syncVariantId","variantId","isIgnored","orderLineItem","customProductId","designId","customProductVariantId"],o.prototype.syncProductId=null,o.prototype.syncVariantId=null,o.prototype.storeId=null,o.prototype.syncVariantRetailPriceData=null,o.prototype.variantId=null,o.prototype.customProductId=null,o.prototype.customProductVariantId=null,o.prototype.name="",o.prototype.retailPrice=null,o.prototype.urlImage=null,o.prototype.isIgnored=null,o.prototype.externalId="",o.prototype.syncedAt=null,o.prototype.orderLineItem=null,o.prototype.isSynced=function(){return this.variantId>0},o.prototype.isClientStockSyncing=null,o.prototype.isDisabledInClientStock=null,o.prototype.customProduct=null,o.prototype.customProductVariant=null,o.prototype.designId=null,o.prototype.quantity=null,o.prototype.activeMarketplaces=null,o.prototype.inactiveMarketplaces=null,o.fromArray=function(e){var t=new o,i=new n.PFItemsOrderLineItem;return e.orderLineItem&&(i=n.PFItemsOrderLineItem.fromArray(e.orderLineItem),delete e.orderLineItem),a.a.O2O(t,e),t.orderLineItem=i,t},window&&((globalThis||{}).PFItemsSyncVariantItem=o)},E17x:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o})),i.d(t,"c",(function(){return s}));var n=i("xeH2"),r=i.n(n),a=function(){return"ontouchstart"in document.documentElement};a()&&r()("body").addClass("is-touch");var o=function(e){return!!document.body.contains(e)},s={_getAgent:function(){return navigator&&navigator.userAgent?navigator.userAgent:""},isAndroid:function(){return null!==this._getAgent().match(/Android/i)},isBlackBerry:function(){return null!==this._getAgent().match(/BlackBerry/i)},isIOS:function(){return null!==this._getAgent().match(/iPhone|iPad|iPod/i)},isOpera:function(){return null!==this._getAgent().match(/Opera Mini/i)},isWindows:function(){return null!==this._getAgent().match(/IEMobile/i)||null!==this._getAgent().match(/WPDesktop/i)},isAny:function(){return this.isAndroid()||this.isIOS()||this.isBlackBerry()||this.isOpera()||this.isWindows()}};(globalThis||{}).PFUtilsIsTouch=a,(globalThis||{}).PFUtilsIsInDocument=o,(globalThis||{}).PFUtilsMobile=s},E7gQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"m",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"n",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"d",(function(){return d})),i.d(t,"e",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"l",(function(){return f})),i.d(t,"h",(function(){return g})),i.d(t,"i",(function(){return m})),i.d(t,"c",(function(){return _}));var n=i("Zwo4"),r="".concat(n.a,"/props"),a="m_updatePropItemsIntoRepo",o="m_setHasLoadedAllProps",s="m_updateRecentProps",l="g_hasLoadedAllProps",c="g_activePropGroups",u="g_recentPropGroups",d="g_getPropGroup",h="g_getPropItems",p="a_loadAllActivePropGroups",f="a_updatePropGroupsIntoRepo",g="a_loadProps",m="a_loadRecentProps",_=function(e){return"".concat(r,"/").concat(e)}},EQTS:function(e,t,i){"use strict";i.d(t,"a",(function(){return C})),i.d(t,"b",(function(){return I}));var n=i("SBaP"),r=i("x0He"),a=i("KLvT");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){s(a,n,r,o,l,"next",e)}function l(e){s(a,n,r,o,l,"throw",e)}o(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,v(e,t,"get"))}function _(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,v(e,t,"set"),i),i}function v(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var y=new WeakMap,b=new WeakMap,P=new WeakSet,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(a,e);var t,i,n,r=h(a);function a(e){var t;return c(this,a),t=r.call(this),P.add(f(t)),y.set(f(t),{writable:!0,value:void 0}),b.set(f(t),{writable:!0,value:void 0}),_(f(t),b,e),t.node=tag("div","designer-color-dropdown"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(f(t),P,T).call(f(t)),t}return t=a,(i=[{key:"callEvent",value:function(e,t){m(this,b)[e]&&m(this,b)[e](t)}},{key:"updateActiveColor",value:function(e){var t;null===(t=m(this,y))||void 0===t||t.updateData({activeValue:e})}},{key:"updateHighlightedColors",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;null===(t=m(this,y))||void 0===t||t.updateData({highlightedColors:e,highlightErrorMessage:i})}},{key:"updateInputOne",value:function(e){var t;null===(t=m(this,y))||void 0===t||t.updateData({footerRangeInputOneValue:e})}},{key:"updateInputTwo",value:function(e){var t;null===(t=m(this,y))||void 0===t||t.updateData({footerRangeInputTwoValue:e})}},{key:"updateTabConfig",value:function(e){var t;null===(t=m(this,y))||void 0===t||t.updateData({tabConfig:e})}},{key:"destroy",value:function(){var e;null===(e=m(this,y))||void 0===e||e.destroy(),_(this,y,null)}}])&&u(t.prototype,i),n&&u(t,n),a}(n.a);function T(){return w.apply(this,arguments)}function w(){return(w=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new r.b).components={"color-dropdown":function(){return i.e(157).then(i.bind(null,"ii4k"))}},t.template='<color-dropdown\n            :title="title"\n            :active-value="activeValue"\n            :hide-rgb="hideRgb"\n            :has-new-badge="hasNewBadge"\n            :has-clear-active-color="hasClearActiveColor"\n            :has-none-color="hasNoneColor"\n            :show-color-in-header="showColorInHeader"\n            :is-disabled="isDisabled"\n            :tab-config="tabConfig"\n            :hide-graphic-dpi-scale="hideGraphicDpiScale"\n            :has-to-scroll-to-dropdown="hasToScrollToDropdown"\n            :has-hex-color-input="hasHexColorInput"\n            :get-area-width-for-graphics="getAreaWidthForGraphics"\n            :get-dpi-for-graphics="getDpiForGraphics"\n            :footer-range-input-one-params="footerRangeInputOneParams"\n            :footer-range-input-one-value="footerRangeInputOneValue"\n            :footer-range-input-two-params="footerRangeInputTwoParams"\n            :footer-range-input-two-value="footerRangeInputTwoValue"\n            :highlighted-colors="highlightedColors"\n            :highlight-error-message="highlightErrorMessage"\n            :disabled-colors="disabledColors"\n            \n            @on-active-color-changed="emitEvent(\'onActiveColorChanged\', $event)"\n        />',t.initialData={title:m(this,b).title,activeValue:m(this,b).activeValue,hideRgb:m(this,b).hideRgb,hasNewBadge:m(this,b).hasNewBadge,hasClearActiveColor:m(this,b).hasClearActiveColor,hasNoneColor:m(this,b).hasNoneColor,showColorInHeader:m(this,b).showColorInHeader,isDisabled:m(this,b).isDisabled,tabConfig:m(this,b).tabConfig,hideGraphicDpiScale:m(this,b).hideGraphicDpiScale,hasToScrollToDropdown:m(this,b).hasToScrollToDropdown,hasHexColorInput:m(this,b).hasHexColorInput,getAreaWidthForGraphics:m(this,b).getAreaWidthForGraphics,getDpiForGraphics:m(this,b).getDpiForGraphics,footerRangeInputOneParams:m(this,b).footerRangeInputOneParams,footerRangeInputOneValue:m(this,b).footerRangeInputOneValue,footerRangeInputTwoParams:m(this,b).footerRangeInputTwoParams,footerRangeInputTwoValue:m(this,b).footerRangeInputTwoValue,highlightedColors:m(this,b).highlightedColors,highlightErrorMessage:m(this,b).highlightErrorMessage,disabledColors:m(this,b).disabledColors},t.emitEvent=this.callEvent.bind(this),t.plugins={store:Object(a.a)()},_(this,y,new r.a(t)),m(this,y).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.disabledColors=t.disabledColors,this.highlightedColors=t.highlightedColors,this.highlightErrorMessage=t.highlightErrorMessage,this.activeValue=t.activeValue,this.title=t.title||null,this.onActiveColorChanged=t.onActiveColorChanged,this.hideRgb=t.hideRgb||!1,this.hasNewBadge=t.hasNewBadge||!1,this.hasClearActiveColor=t.hasClearActiveColor||!1,this.hasToScrollToDropdown=t.hasToScrollToDropdown||!1,this.isDisabled=t.isDisabled||!1,this.hasNoneColor=t.hasNoneColor||!1,this.showColorInHeader=t.showColorInHeader||!1,this.hasHexColorInput=t.hasHexColorInput||!1,this.getAreaWidthForGraphics=t.getAreaWidthForGraphics,this.getDpiForGraphics=t.getDpiForGraphics,this.hideGraphicDpiScale=t.hideGraphicDpiScale||!1,this.tabConfig=t.tabConfig,this.footerRangeInputOneParams=t.footerRangeInputOneParams||null,this.footerRangeInputOneValue=t.footerRangeInputOneValue||null,this.footerRangeInputTwoParams=t.footerRangeInputTwoParams||null,this.footerRangeInputTwoValue=t.footerRangeInputTwoValue||null}},EqHI:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_par:null,__construct:function(e){this._par=e,this.node=tag("div","label-template-picker"),this._render()},_render:function(){var e=dlang("dashboard","Must include {split}mandatory label info").split("{split}");this.nodeBody=tag("div",null,[tag("h3","pf-my-24 pf-p-0",[dlang("dashboard","Choose inside label type")]),tag("div","row",[tag("div","col-sm-6 switcher-block pf-pl-sm-40 pf-pl-xl-0",[tag("div",{className:"panel panel-default pf-mb-0 pf-rounded pf-hover-shadow pf-h-100 pf-mx-auto",onclick:this._par.customTemplateSelected.bind(this)},[tag("div","panel-heading text-center pf-rounded-top",[tag("div","panel-title pf-ui-subheading",[dlang("dashboard","Custom Label Template")])]),tag("div","panel-body pf-p-24",[tag("ul","list-unstyled pf-ui-body pf-mb-64",[tag("li","pf-mt-0",[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),dlang("dashboard","No pre-set fields")]),tag("li",null,[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),dlang("dashboard","Completely customizable")]),tag("li",null,[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),tag("span",null,[e[0]]),tag("a",{text:e[1],prop:{target:"_blank"},href:"/files/pdf/inside_label_guide.pdf"})])]),tag("div","text-center switcher-btn pf-w-100 pf-px-24",[tag("a",{className:"pf-btn pf-btn-secondary pf-btn-block--mobile",text:dlang("dashboard","Create your own"),onclick:this._par.customTemplateSelected.bind(this)})])])])]),tag("div","col-sm-6 switcher-block pf-pr-sm-40 pf-pr-xl-0 pf-pt-24 pf-pt-sm-0",[tag("div",{className:"panel panel-default pf-mb-0 pf-rounded pf-hover-shadow pf-h-100 pf-mx-auto",onclick:this._par.nativeTemplateSelected.bind(this)},[tag("div","panel-heading text-center pf-rounded-top",[tag("div",{className:"panel-title pf-h4",text:dlang("dashboard","Label Template"),style:{fontWeight:"bold"}})]),tag("div","panel-body pf-p-24",[tag("ul","list-unstyled pf-ui-body pf-mb-64",[tag("li","pf-mt-0",[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),dlang("dashboard","All the mandatory info included")]),tag("li",null,[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),dlang("dashboard","Pre-made label designs")]),tag("li",null,[tag("i","pf-i pf-i-check pf-i-24 pf-text-dark-green pf-pr-8"),dlang("dashboard","Space for a custom logo")])]),tag("div","text-center switcher-btn pf-w-100 pf-px-24",[tag("a",{className:"pf-btn pf-btn-primary pf-btn-block--mobile",text:dlang("dashboard","Use label template"),onclick:this._par.nativeTemplateSelected.bind(this)})])])])])])]).append(this.node)}},n.a.Base);r.Par=Class({nativeTemplateSelected:null,customTemplateSelected:null}),r.LABEL_CUSTOM="custom",r.LABEL_NATIVE="native",r.NATIVE_TEMPLATE_OFFSET=2.83,window&&((globalThis||{}).PFComponentsInsideLabelTemplate=r)},F5uq:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("rwWB");function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l="collections_category_history",c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,o=[{key:"track",value:function(e){if(116===e.id||116===e.parentId){var t=n.a.get(l);(t=t?JSON.parse(t):[]).push(e.id),t=r(new Set(t)),n.a.set(l,JSON.stringify(t),1)}}},{key:"getCategories",value:function(){var e=n.a.get(l);return e?JSON.parse(e):[]}},{key:"orderDataLayer",value:function(e){var t,i;if(null!==(t=e.products)&&void 0!==t&&t.length&&null!==(i=e.categories)&&void 0!==i&&i.length){var n=e.categories,r=e.currency,a=e.order_id,o=e.order_quantity,s=e.products,l=e.value,c=e.line_items;window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventCategory:"ProductCategoryPerformance",eventAction:"Order: "+s.join(", "),eventLabel:n.join(", "),currency:r,order_id:a,order_quantity:o,products:s,value:l,line_items:c})}}},{key:"pushDataLayer",value:function(e){if(this.getCategories()){var t=_.intersection(e.catalogCategoryIds,this.getCategories());if(t.length){var i,n=[],r=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=a(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;n.push(e.catalogCategoryNames[o])}}catch(e){r.e(e)}finally{r.f()}window.dataLayer=window.dataLayer||[],window.dataLayer.push({eventCategory:"ProductCategoryPerformance",eventAction:"Push: "+(e.customTitle||e.displayName),eventLabel:n.join(", ")})}}}}],(i=null)&&s(t.prototype,i),o&&s(t,o),e}()},"Fpf/":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return a}));var n="MOCKUP_TYPE_BASIC",r="MOCKUP_TYPE_CUSTOM",a="mockupMaker"},FpxJ:function(e,t,i){"use strict";i.d(t,"h",(function(){return a})),i.d(t,"j",(function(){return o})),i.d(t,"k",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"i",(function(){return p})),i.d(t,"e",(function(){return f})),i.d(t,"d",(function(){return g}));var n=i("Zwo4"),r="".concat(n.a,"/cliparts"),a="m_loadClipartItemsIntoRepo",o="m_setHasLoadedAllCliparts",s="m_updateRecentCliparts",l="g_hasLoadedAllCliparts",c="g_getClipartGroup",u="g_getClipartItems",d="a_allActiveClipartGroups",h="a_loadClipartGroupsIntoRepo",p="a_loadCliparts",f="a_getRecentCliparts",g=function(e){return"".concat(r,"/").concat(e)}},FxE2:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({variantId:null,color:null,size:null,templateIds:{},mockupIds:{},extraIds:{},advancedTemplateSize:null,discontinued:!1});r.fromArray=function(e){var t=new r;return n.a.O2O(t,e),t.mockupIds=e.mockupIds||{},t.templateIds=e.templateIds||{},t.extraIds=e.extraIds||{},t.advancedTemplateSize=e.advancedTemplateSize||null,t},window&&((globalThis||{}).PFItemsGeneratorMappingItem=r)},GCEm:function(e,t,i){"use strict";i.d(t,"e",(function(){return h})),i.d(t,"d",(function(){return p})),i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return g})),i.d(t,"c",(function(){return m})),i.d(t,"f",(function(){return _})),i.d(t,"m",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"k",(function(){return P})),i.d(t,"j",(function(){return T})),i.d(t,"g",(function(){return I})),i.d(t,"h",(function(){return E})),i.d(t,"l",(function(){return k})),i.d(t,"i",(function(){return L}));var n=i("Gv5l"),r=i("ehgC"),a=i("9Nv7");function o(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?o(Object(i),!0).forEach((function(t){l(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function u(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){c(a,n,r,o,s,"next",e)}function s(e){c(a,n,r,o,s,"throw",e)}o(void 0)}))}}var d="all",h={},p={},f="Personal orders",g=-1,m=1;function _(e){p[e.storeId]=e}function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return y(d,e)}function y(e){return b.apply(this,arguments)}function b(){return(b=u(regeneratorRuntime.mark((function e(t){var i,n,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=r.length>1&&void 0!==r[1]?r[1]:{},!t||!h[t]){e.next=3;break}return e.abrupt("return",h[t].slice());case 3:return e.next=5,Object(a.a)("store/get",s({type:t},i));case 5:return n=e.sent,e.abrupt("return",R(t,n));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return C.apply(this,arguments)}function C(){return(C=u(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!h[t.getCacheKey()]){e.next=2;break}return e.abrupt("return",h[t.getCacheKey()].slice());case 2:return e.next=4,Object(a.a)("store/get",{type:t.type,productId:t.withAvailableProductId,variantId:t.withAvailableVariantId});case 4:return i=e.sent,e.abrupt("return",R(t.getCacheKey(),i));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return w.apply(this,arguments)}function w(){return(w=u(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/get",{sourceStoreId:t,type:n.a.CACHE_KEY_SYNCED_FOR_INCOMPLETE_ITEM_SYNC});case 2:return i=e.sent,e.abrupt("return",R(null,i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(e,t,i){return S.apply(this,arguments)}function S(){return(S=u(regeneratorRuntime.mark((function e(t,i,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/create",{storeName:t,isAutoCreated:i?1:0,type:n});case 2:return r=e.sent,e.abrupt("return",A(r));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(e){return O.apply(this,arguments)}function O(){return(O=u(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.a)("store/create",{storeName:t,type:r.a.TYPE_ANONYMOUS});case 2:return i=e.sent,e.abrupt("return",A(i));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return Object(a.a)("store-settings/should-show-popovers",{storeId:e,popoverIds:t})}function L(e){return Object(a.a)("store-settings/dismiss-intro-popover",{popoverId:e})}function A(e){return Object.keys(h).forEach((function(e){return delete h[e]})),e.success?r.a.fromArray(e.store):new r.a}function R(e,t){return e?(h[e]=[],t.stores.forEach((function(t){var i=r.a.fromArray(t);h[e].push(i),p[i.storeId]=i})),h[e].slice()):t.stores.map((function(e){return r.a.fromArray(e)}))}},GGNF:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("A+LN");function r(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var a={isFavoriteProductsEnabled:function(){return(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Object(n.x)("favorite_products").then((function(e){return e&&PF.Customer.isLogged()})));case 1:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,a){var o=e.apply(t,i);function s(e){r(o,n,a,s,l,"next",e)}function l(e){r(o,n,a,s,l,"throw",e)}s(void 0)}))})();var e}}},GSnq:function(e,t,i){"use strict";i.d(t,"a",(function(){return p})),i.d(t,"b",(function(){return f}));var n=i("LvDl"),r=i.n(n),a=i("A+LN");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var p=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.flagName=!r.a.isEmpty(t.flagName)&&r.a.isString(t.flagName)?t.flagName.trim():null,this.targetType=!r.a.isEmpty(t.targetType)&&r.a.isString(t.targetType)?t.targetType.trim():null,this.targetId=t.targetId&&!r.a.isNaN(r.a.toNumber(t.targetId))?r.a.toNumber(t.targetId):null}var t,i,n;return t=e,(i=[{key:"cacheKey",get:function(){var e=this.flagName,t=this.targetType,i=this.targetId;return"feature-flag--".concat(e||"","_").concat(t||"","_").concat(i||"")}},{key:"isValid",value:function(){return!r.a.isEmpty(this.flagName)&&!r.a.isEmpty(this.targetType)&&Object.values(a.w).includes(this.targetType)}}])&&h(t.prototype,i),n&&h(t,n),e}(),f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t=l(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return d(this,i),(e=t.call(this,n)).canAccessFeature=!!r.a.has(n,"canAccessFeature")&&!!n.canAccessFeature,e}return i}(p)},Gv5l:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("ycMH"),r=i("6JZw"),a=i("nF4n"),o=function(){};(o.prototype=new r.a).id=null,o.prototype.title=null,o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsIntegrationStoreTaxRule=o);var s=function(){};(s.prototype=new r.a).categoryId=null,s.prototype.title=null,s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsIntegrationCategoryItem=s);var l=i("ehgC"),c=i("GCEm"),u=i("Sucz"),d=function(){};d.ANONYMOUS_STORE_ID=-1,d.callbacksQueue=[],d.isLoading=!1,d.processQueue=function(e){return d.isLoading=!1,d.callbacksQueue.forEach(function(t){t(e)}.bind(this))},d.prototype.cacheStore=function(e){c.d[e.storeId]=e},d.prototype.getCachedStore=function(e){return c.d[e]?c.d[e]:(console.error("Store not cached: "+e),new l.a)},d.prototype.getFirstCachedStoreId=function(){return Object.keys(c.d).slice().shift()},d.prototype.get=function(e){Object(c.m)().then(e)},d.prototype.getFirstId=function(e){var t=this.getFirstCachedStoreId();t?e(t):d.isLoading?this.addToQueue(e):(d.isLoading=!0,this.search(!1,function(t){var i=d.ANONYMOUS_STORE_ID;if(t.length){var n=t.slice().shift();this.cacheStore(n),i=n.id?n.id:n.storeId}e(i),d.processQueue(i)}.bind(this)))},d.prototype.addToQueue=function(e){d.callbacksQueue.push(e)},d.prototype.getStoresWithPrintFiles=function(e){this.search(d.CACHE_KEY_WITH_PRINT_FILES,e)},d.prototype.getForIncompleteItemSync=function(e,t){Object(c.j)(e).then(t)},d.prototype.search=function(e,t){Object(c.n)(e).then(t)},d.prototype.getById=function(e,t){this.get($.proxy((function(i){for(var n in i){var r=i[n];if(r.storeId===e)return void t(r)}t(null)}),this))},d.prototype.createAnonymous=function(e,t){Object(c.h)(e).then(t)},d.prototype.create=function(e,t,i,n){Object(c.g)(e,t,i).then(n)},d.prototype.cacheStoresByKey=function(e,t){for(var i in c.e[e]=[],t){var n=l.a.fromArray(t[i]);c.e[e].push(n),c.d[n.storeId]=n}},d.prototype.hasProductPushPermission=function(e,t){null===d.pushPermissionCacheResponse?Object(u.a)("store/get-product-push-permission",{storeId:e},$.proxy(this.hasProductPushPermissionRe,this,t)):this.hasProductPushPermissionRe(t,d.pushPermissionCacheResponse)},d.prototype.hasProductPushPermissionRe=function(e,t){d.pushPermissionCacheResponse=t,e(t.hasProductPushPermission,t.authorizationUrl)},d.prototype.getProductPushCategories=function(e,t,i){d.pushCategoryCacheResponse[e]?t(d.pushCategoryCacheResponse[e]):Object(u.a)("store/get-product-push-categories",{storeId:e},$.proxy(this.getProductPushCategoriesRe,this,e,t),{error:i})},d.prototype.getTaxRules=function(e,t,i){d.taxRuleCacheResponse[e]?t(d.taxRuleCacheResponse[e]):Object(u.a)("store/get-tax-rules",{storeId:e},this.getTaxRulesRe.bind(this,e,t),{error:i})},d.prototype.getProductPushCategoriesRe=function(e,t,i){var n=[];for(var r in i.categories)n.push(s.fromArray(i.categories[r]));d.pushCategoryCacheResponse[e]=n,t(n)},d.prototype.getTaxRulesRe=function(e,t,i){var n=[];for(var r in i.rules)n.push(o.fromArray(i.rules[r]));d.taxRuleCacheResponse[e]=n,t(n)},d.prototype.getSelectedShippingCost=function(e,t,i){var r=e.storeId;if(d.storeShippingCostCacheResponse[r])t(d.storeShippingCostCacheResponse[r]);else{var a={sizes:e.sizes,colors:e.colors,productId:e.productId,customProductId:e.customProductId};Object(u.a)("store/get-selected-shipping-cost",{storeId:e.storeId,params:{usedVariantData:a}},(function(e){var i=e.cost,r=i?n.a.fromArray(i):null;t(r)}),{error:i})}},d.prototype.getStoreShippingProfiles=function(e,t,i){var n=e.storeId;if(d.storeShippingProfileCacheResponse[n])t(d.storeShippingProfileCacheResponse[n]);else{var r={sizes:e.sizes,colors:e.colors,productId:e.productId,customProductId:e.customProductId};Object(u.a)("store/get-store-shipping-profiles",{storeId:e.storeId,params:{usedVariantData:r}},t,{error:i})}},d.prototype.dismissPopover=function(e,t){Object(u.a)("store-settings/dismiss-intro-popover",{popoverId:t}),e&&a.a.removeNode(e)},d.pushPermissionCacheResponse=null,d.pushCategoryCacheResponse={},d.taxRuleCacheResponse={},d.storeShippingProfileCacheResponse={},d.storeShippingCostCacheResponse={},d.CACHE_KEY_ALL="all",d.CACHE_KEY_WITH_PRINT_FILES="withPrintFiles",d.CACHE_KEY_WITH_ENABLED_PRINTFUL_PUSH="withEnabledPrintfulPush",d.CACHE_KEY_SYNCED_INTEGRATIONS="syncedIntegrations",d.CACHE_KEY_SYNCED_OUT_OF_STOCK="syncedOutOfStock",d.CACHE_KEY_SYNCED_FOR_INCOMPLETE_ITEM_SYNC="forIncompleteItemSync",d.CACHE_KEY_ORDER_FLOW="forOrderFlow",(globalThis||{}).PFRepositoriesStoreRepository=d},GyOi:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=Class({id:null,name:"",index:0,extra:{},isActive:!0,image:{},scale:0,toArrayKeys:["id","name","extra","image","scale"]},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorColorGraphicItem=a)},HSPo:function(e,t,i){"use strict";i.d(t,"f",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"g",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return h})),i.d(t,"h",(function(){return p}));var n=i("9Nv7"),r=i("CXOy"),a=i("PwNb");function o(e){var t=e.filter,i=e.storeId,r=void 0===i?null:i,a=e.forPushFlow,o=void 0!==a&&a,s=e.forOrderFlow,l=void 0!==s&&s;return new Promise((function(e,i){t?Object(n.a)("product-templates/get-templates",{filter:Object.assign({},t),storeId:r||null,forPushFlow:!!o,forOrderFlow:!!l}).then((function(t){t?(f(t),e(t)):i(new Error("Malformed getTemplatesResponse data!"))})).catch((function(e){return i(e)})):i(new Error("Missing filter parameters!"))}))}function s(e){var t=e.id,i=e.storeId,o=void 0===i?null:i;return new Promise((function(e,i){t?Object(n.a)("product-templates/get-template",{id:t,storeId:o}).then((function(t){t.item?(t.item=new r.a(t.item),e(t)):i(new a.a("Item wasn't found!"))})).catch((function(e){return i(e)})):i(new Error("Missing template id!"))}))}function l(e){return new Promise((function(t,i){e?Object(n.a)("product-templates/duplicate-template",{id:e}).then((function(e){g(e),e.item?t(e.item):i(new Error("Template duplication failed!"))})).catch((function(e){return i(e)})):i(new Error("Missing template id!"))}))}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new Promise((function(i,r){e&&Array.isArray(e)&&e.length?Object(n.a)("product-templates/delete-templates",{ids:e,filter:t}).then((function(e){e&&e.hasOwnProperty("deletedRows")?(f(e.newResponse),i(e)):r(new Error("Malformed deleteTemplatesResponse data!"))})):r(new Error("Missing deletable template ID array!"))}))}function u(e){return new Promise((function(t,i){if(e.designData){var r=e.designData.toArray({forRpc:!0,withoutSyncData:!0});Object(n.a)("product-templates/save",{designData:r,existingTemplateId:e.existingTemplateId||null,isDraftSave:!!e.forceDraft,isFinalSubmit:!!e.forceActive,saveFlowType:e.saveFlowType||d.DEFAULT}).then((function(e){g(e),e.item?t(e.item):i(new Error("Template save failed!"))})).catch((function(e){return i(e)}))}else i(new Error("Missing design data for template save!"))}))}var d={DEFAULT:"DEFAULT",SYNC_PRODUCT_DRAFT:"SYNC_PRODUCT_DRAFT"};function h(){return Object(n.a)("product-templates/close-intro")}function p(e,t){return new Promise((function(i,r){e&&t?Object(n.a)("product-templates/swap-template-product",{templateId:e,productId:t}).then((function(e){g(e),e.item?i(e.item):r(e.error)})).catch((function(e){return r(e.error)})):r(new Error("Missing template id or new product id!"))}))}function f(e){e&&(e.items&&(e.items=e.items.map((function(e){return new r.a(e)}))),e.usedFilter&&(e.usedFilter=new r.d(e.usedFilter)))}function g(e){e&&e.item&&(e.item=new r.a(e.item))}},HmCv:function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("97Au"),r=i("2ovl"),a=Class({callback:null,__construct:function(e){this.callback=e,this._render()},_render:function(){var e=new n.a.Par;e.modalDialogClass="modal-md",this._modal=new n.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",lang("Are you sure?")),tag("p","",lang("None of your changes will be saved. Are you sure you want to continue switching techniques?"))])]);this._modal.setContent(t);var i=tag("div",{style:{textAlign:"left"}},[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._callback},lang("Yes, continue")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:function(){this._modal.remove()}.bind(this)},lang("No, go back"))]);this._modal.setFooterContent(i),this._modal.show()},_callback:function(){this._modal.remove(),r.a.unsetDesignCachedInSession(),this.callback()}});(globalThis||{}).PFVariantPickerTechniquePickerPopup=a;var o=i("7pSD"),s=i("X5Ic"),l=i("nF4n"),c=i("4Ru2"),u=i("LvDl"),d=i.n(u),h=i("sjGI"),p=i("4CFC"),f=i("9eNC"),g=Class({_showWarningPopup:!1,_isPopupBusy:!1,_itemsNode:null,__construct:function(e){this._par=e,this.node=tag("div","row no-gutters"),this._render(),this._scrollToAvailability(),f.i.on(f.i.PRODUCT_TECHNIQUE_SELECTED,this._onTechniqueChanged)},_render:function(){l.a.clearNode(this.node),tag("div","col-12",[tag("div","row pf-my-8",[tag("div",this._par.isPolyPro||this._par.isGenerator?"col-12":"col-6",[tag("h6","pf-h5 pf-m-0",[lang("Choose technique"),this._getTagNew()])]),this._par.isPolyPro?"":tag("div","col-6 "+(this._par.isGenerator?"pf-d-none":"pf-d-inline-block"),[tag("a",{className:"pf-link pf-m-0 float-right",onclick:this._scrollToGuidelines.bind(this),id:"fileGuidelinesButton"},dlang("products","File guidelines"))])]),tag("div","row pf-d-flex technique-picker pf-p-0 text-center "+(this._par.isPolyPro?"pf-mb-16":"pf-mb-24"),[this._itemsNode=tag("div")])]).append(this.node),this.updateTechniqueAvailability(this._par.regions)},_renderItems:function(){l.a.clearNode(this._itemsNode),tag("div",{className:"col-12 pf-d-flex",attr:{role:"list","aria-label":lang("Choose technique")}},this._par.techniques.map(this._renderItem)).append(this._itemsNode)},_renderItem:function(e){var t=this._isTechniqueDisabled(e.type),i={className:"pf-btn pf-btn-text-center-only-md pf-btn-outline pf-width-max pf-mr-4 "+(t&&!this._par.isMockupGenerator?"disabled disabled-technique ":"")+(this._isActive(e.type)?"active ":""),onclick:this._onTechniquePicked.bind(this,e.type),attr:{role:"button"}};if(t&&!this._par.isMockupGenerator){var n=g.EMBROIDERY_DISABLED_REGIONS.map((function(e){return Object(p.b)(e)})).join(h.a.isJp()?"ã":", ");i.title=clang("technique availability","Embroidery products are fulfilled and shipped from facilities outside {region}").replace("{region}",n),this._par.useStrictRegionCheck||(i.title=o.a.POPOVER.DSR_LIMITED.DESC_TECHNIQUE.replace("{linkStart}","").replace("{linkEnd}","")),i.data={toggle:"tooltip",placement:"top",container:"body"}}var r=tag("a",i,e.label);return $(r).tooltip(),r},_getTagNew:function(){var e=["pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary pf-text-white"],t="";return this._par.hasNewPlacement&&(t=tag("span",e.join(" "),lang("New"))),this._par.isPolyPro&&!t&&(e.push(this._par.activeValue===s.a.TYPE_T_SHIRT?null:"hidden"),t=tag("span",e.join(" "),lang("New"))),t},_isActive:function(e){return this._par.activeValue===e},_onTechniqueChanged:function(e){e===this._par.activeValue||this._isTechniqueDisabled(e)||(this._isPopupBusy=!1,this._par.activeValue=e,this._render())},_onTechniquePicked:function(e){e===this._par.activeValue||this._isTechniqueDisabled(e)||(this._showWarningPopup?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new a(this._onTechniquePickedRe.bind(this,e))):this._onTechniquePickedRe(e))},_onTechniquePickedRe:function(e){this._isPopupBusy=!1,this._par.activeValue=e,this._render(),this._par.callback&&this._par.callback(e)},toggleChangeTechniquePopup:function(e){this._showWarningPopup=e},_scrollToAvailability:function(){$(window).load((function(){"#availability"===window.location.hash&&($("html, body").animate({scrollTop:$(".catalog__product__tabs").offset().top},1e3),$(".catalog__product__tabs li#availability a").trigger("click"))}))},_scrollToGuidelines:function(){$("html, body").animate({scrollTop:$(".catalog__product__tabs").offset().top-$(".catalog__product__tabs .pf-tabs").outerHeight()},1e3),$(".catalog__product__tabs li#tab-guidelines a").trigger("click").focus()},updateTechniqueAvailability:function(e){if(this._par.regions=e,this._par.activeValue===s.a.TECHNIQUE_EMBROIDERY&&this._isTechniqueDisabled(this._par.activeValue)&&!this._par.isMockupGenerator){var t=this._par.techniques.filter((function(e){return e.type!==s.a.TECHNIQUE_EMBROIDERY}));if(t)return void this._onTechniquePickedRe(t[0].type)}this._renderItems()},_isTechniqueDisabled:function(e){if(e!==s.a.TECHNIQUE_EMBROIDERY)return!1;if(this._par.isRegionalTechniqueOverrideAvailable)return!1;var t=this._par.regions,i=g.EMBROIDERY_DISABLED_REGIONS;return this._par.useStrictRegionCheck?d.a.intersection(t,i).length>0:!(!t||t.length<1)&&!d.a.some(t,(function(e){return!i.includes(e)}))}},o.a);g.EMBROIDERY_DISABLED_REGIONS=[c.a.REGION_AUSTRALIA,c.a.REGION_JAPAN,c.a.REGION_BRAZIL],(globalThis||{}).PFVariantPickerTechniquePicker=g},HxWG:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r})),i.d(t,"e",(function(){return a})),i.d(t,"f",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"c",(function(){return l}));var n="MOCKUP_FLOW_PUSH",r="MOCKUP_FLOW_DOWNLOAD",a="MOCKUP_STEP_DESIGN",o="MOCKUP_STEP_DOWNLOAD",s=400,l=Object.freeze({IS_LOADED:"IS_LOADED",IS_LOADING:"IS_LOADING",IS_SCENE_SAVED:"IS_SCENE_SAVED",HAS_PUSH_FLOW_SAVE:"HAS_PUSH_FLOW_SAVE",IS_CMM_FIRST_OPEN:"IS_CMM_FIRST_OPEN",HAS_ADVANCED_TEMPLATE:"HAS_ADVANCED_TEMPLATE",CUSTOM_MOCKUP_FLOW:"CUSTOM_MOCKUP_FLOW",CUSTOM_MOCKUP_STEP:"CUSTOM_MOCKUP_STEP",HAS_SCENE_DESIGN:"HAS_SCENE_DESIGN",PREVIOUS_PRODUCT_OPTIONS:"PREVIOUS_PRODUCT_OPTIONS"})},"I/MA":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={ORDER_UPDATE_URL:langUrl("/dashboard/order/update"),isOrderFlowInitialized:!1,instance:void 0,getActiveInstance:function(){return n.instance}};(globalThis||{}).PFOrderFlowCommon=n},"I/qX":function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("xeH2"),r=i.n(n),a=i("0Dcb"),o=i("nF4n"),s=i("Pxqf"),l=function(e,t){var i;this.file=e;var n=this.file.isReady||(null===(i=this.file)||void 0===i?void 0:i.key)&&!(this.file instanceof s.a);if(this.onRemoveCallback=t,this.node=Object(o.a)({tag:"div",className:"review-upload review-upload--loading"}),this.addOverlayNode(),n){var a=new Image;a.onload=r.a.proxy(this.onImageLoaded,this),a.src=this.file.urlThumb}};(l.prototype=new o.a.Base).onImageLoaded=function(){o.a.removeClassName(this.node,"review-upload--loading"),o.a.clearNode(this.node),new a.a({urlImage:this.file.urlThumb}).append(this.node),this.addOverlayNode()},l.prototype.addOverlayNode=function(){Object(o.a)({tag:"div",className:"review-upload__overlay",els:[{tag:"a",className:"pf-btn pf-btn-secondary",text:"Remove",onclick:r.a.proxy((function(){this.onRemoveCallback&&this.onRemoveCallback(this.file)}),this)}]}).append(this.node)},(globalThis||{}).PFProductReviewFormFileThumb=l;var c=i("XcIk"),u=i("iBt0");function d(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?d(Object(i),!0).forEach((function(t){p(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):d(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(e,t,i){this.uploader=new c.a({onUploaded:this.onFileUploaded.bind(this),onProcessed:this.onFileProcessed.bind(this),onProcessingFailed:this.onFileFailed.bind(this),caption:lang("Upload images"),uploadType:"review",allowMultiple:!0}),this.textAreaErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Text field can't be emptyâplease add your thoughts about the product in the text field")]),this.imageErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Upload 2 high-quality images that have the product displayed in the center")]),this.callbackButtonFunction=t,this.textAreaPlaceholder=e||dlang("reviews","We'd love to hear what you thinkâwrite your thoughts on the product's fit, feel, style, etc."),this.node=Object(o.a)({tag:"div",className:"review-form-submit",els:[tag("h4","pf-h4 pf-mt-24 pf-mb-8",[dlang("reviews","Your review"),tag("span",{className:"pf-text-red pf-ml-2",innerHTML:"&#42;"})]),this.nodeTextarea=tag("textarea",{className:"form-control pf-mb-12",style:{height:"112px"},attr:{placeholder:this.textAreaPlaceholder}}),this.textAreaErrorMessage,tag("div","pf-mb-12",[this.nodeUploadedFiles=tag("div"),this.imageErrorMessage,this.uploader])]}),i&&(this.nodeTextarea.value=i.review,this.existingImages=i.images,this.renderUploadedFiles())};f.prototype=new o.a.Base,f.prototype.constructor=f,f.prototype.onFileUploaded=function(e){this.uploadedImages=this.uploadedImages||{},this.uploadedImages[e.temporaryFileKey]=e,this.renderUploadedFiles()},f.prototype.onFileProcessed=function(e){this.uploadedImages[e.temporaryFileKey]&&(this.uploadedImages[e.temporaryFileKey]=e,this.renderUploadedFiles())},f.prototype.onFileFailed=function(e){var t=new u.a('"'+e.filename+'" failed to process: '+e.reasonFailed,"danger",4e3);$(tag("div","",[t])).insertAfter(this.nodeTextarea),this.onFileRemove(e)},f.prototype.renderUploadedFiles=function(){o.a.clearNode(this.nodeUploadedFiles),this.images=h(h({},this.uploadedImages),this.existingImages);var e,t=!0;for(var i in this.images){var n=this.images[i];n.isReady||(t=!1),e=new l(n,this.onFileRemove.bind(this)),!n.key||n instanceof s.a||(e=new l(n,this.onRemoveExistingFile.bind(this)),t=!0),e.append(this.nodeUploadedFiles)}this.callbackButtonFunction(t)},f.prototype.onFileRemove=function(e){delete this.uploadedImages[e.temporaryFileKey],this.renderUploadedFiles()},f.prototype.onRemoveExistingFile=function(e){this.existingImages=this.existingImages.filter((function(t){return t.key!==e.key})),this.renderUploadedFiles()},(globalThis||{}).PFProductReviewFormSubmitArea=f},IA60:function(e,t){e.exports="https://static.cdn.printful.com/dist-pf/image-assets/no-results-found.1f8358662c748464373038fdd773275a.svg"},IAu2:function(e,t,i){"use strict";i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"d",(function(){return f})),i.d(t,"a",(function(){return g}));var n=i("CDME"),r=i("9Nv7"),a=i("vYHe"),o=i("boP+");function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function l(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){c(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function u(e){return new Promise((function(t,i){e?Object(r.a)("product-generator/hide-push-task",{taskId:parseInt(e)}).then((function(e){null!=e&&e.success?t(!0):i(new Error("Push task hiding failed!"))})).catch((function(e){return i(e)})):i(new Error("Invalid push task ID!"))}))}function d(e,t){return new Promise((function(i,n){t&&e?(e=parseInt(e),t=parseInt(t),Object(r.a)("product-generator/retry-task",{storeId:e,taskId:t}).then((function(e){i(!!e)})).catch((function(e){return n(e)}))):n(new Error("Either store or task ID is undefined!"))}))}function h(e){return new Promise((function(t,i){e?Object(r.a)("product-generator/get-available-marketplace-manifests",{storeId:e}).then((function(e){var i=(e.manifests||[]).map((function(e){return new a.c(e)}));t(i)})).catch((function(e){return i(e)})):i(new Error("Store ID is undefined!"))}))}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(i,a){var o=e.productId,s=void 0===o?null:o;if(!e||!s)return a(new Error("Missing designData!"));var c=l({designData:e.toArray()},t);Object(r.a)("product-generator/calculate-prices",c).then((function(e){var t=e.prices,r=(JSON.parse(localStorage.getItem(g))||{})[s]||{},a=t.map((function(e){var t=n.a.fromArray(e),i=r[t.priceKey];return i&&(t.retailPrice=i),t}));i(a)})).catch(a)}))}function f(e){return new Promise((function(t,i){var n,a={placementArray:e,currencyCode:null===(n=Object(o.a)())||void 0===n?void 0:n.priceRange.currency};Object(r.a)("product-generator/get-licensed-asset-pricing",a).then((function(e){return t(e)})).catch(i)}))}var g="userPrices"},IGMQ:function(e,t){e.exports="https://static.cdn.printful.com/dist-pf/image-assets/warning.4d4371ed98da6fcd445eb2afe3324835.svg"},IbzY:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("Iarc"),r=i.n(n),a=i("nF4n"),o=i("0sIF"),s=i("X5Ic"),l=i("wo5H"),c=i("Jkv8"),u=i("A+LN"),d=i("boP+"),h=i("7QI8"),p=i("mrkb");function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function _(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function v(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){_(a,n,r,o,s,"next",e)}function s(e){_(a,n,r,o,s,"throw",e)}o(void 0)}))}}var y=Class({_par:null,_mockupPosition:null,_previewString:null,_currentAttempt:0,_maxAttempts:2,_lifelikeVariants:{},__construct:function(e){this._par=e,this._lifelikeVariants=this._par.lifelikeVariants||{},this._currentAttempt=0,this._mockupPosition=this._par.generatorVariant.mockupPosition.getScaledPosition(this._par.maxWidth,this._par.maxHeight),this.node=tag("div","generator-mockup-preview pf-mx-auto",[this._nodeBackground=tag("div"),this._nodeBase=tag("div"),this._nodeDesign=tag("div")]),this._par.maxHeight&&(this.node.style.minHeight=this._par.maxHeight+"px"),this._par.maxWidth&&(this.node.style.width=this._par.maxWidth+"px"),this.render()},render:function(){if(this.node.style.width=this._mockupPosition.areaWidth+"px",this.node.style.minHeight=this._mockupPosition.areaHeight+"px",this._par.isPrintfile)a.a.addClassName(this._nodeBackground,"generator-mockup-preview__printfile");else{a.a.removeClassName(this._nodeBackground,"generator-mockup-preview__printfile");var e=Math.min(this._par.maxWidth,this._par.maxHeight)>300,t={image:e?this._par.generatorVariant.backgroundImageUrl:this._par.generatorVariant.backgroundThumbnailUrl,shadow:e?this._par.generatorVariant.backgroundShadowUrl:this._par.generatorVariant.backgroundShadowThumbnailUrl,base:e?this._par.generatorVariant.generatorImageUrl:this._par.generatorVariant.generatorThumbnailUrl};this._nodeBackground.style.backgroundColor=this._par.generatorVariant.backgroundColor;var i=[];t.shadow&&i.push("url("+t.shadow+")"),t.image&&i.push("url("+t.image+")"),this._nodeBackground.style.backgroundImage=i.length?i.join(", "):null,this._nodeBase.style.backgroundImage=t.base?"url("+t.base+")":null,this._nodeBase.style.zIndex=0===this._par.generatorVariant.mockupPrintZIndex?2:null}this.renderPreviewString()},renderPreviewString:function(e){var t=arguments,i=this;return v(regeneratorRuntime.mark((function n(){var r,c,u,h,p,g,_,v,b,P,C,T,w,I,S,E,O,k,L,A,R,N,D,x,F,M;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(_=t.length>1&&void 0!==t[1]?t[1]:{},t.length>2&&void 0!==t[2]?t[2]:"",v=t.length>3&&void 0!==t[3]?t[3]:[],b=i._par.isPrintfile&&i._par.template.technique===s.a.TYPE_EMBROIDERY,P=i._par.generatorVariant.getColorData(),C=(null===(r=i._par.template)||void 0===r?void 0:r.placementId)||i._par.generatorVariant.placementId,i._lifelikeVariants[C]||(i._lifelikeVariants[C]=[]),_[C]&&_[C].forEach((function(e){i._lifelikeVariants[C].indexOf(e)<0&&i._lifelikeVariants[C].push(e)})),null!=v&&v.length&&(i._lifelikeVariants[C]=i._lifelikeVariants[C].concat(v).filter((function(e,t,i){return i.indexOf(e)===t}))),i._par.designData&&(null!==(T=i._par.designData)&&void 0!==T&&T.lifelikeVariants||(i._par.designData.lifelikeVariants=m({},C,[])),i._lifelikeVariants[C].forEach((function(e){i._par.designData.lifelikeVariants[C].indexOf(e)<0&&i._par.designData.lifelikeVariants[C].push(e)})),i._lifelikeVariants=i._par.designData.lifelikeVariants),w=!i._par.isPrintfile&&(null===(c=i._lifelikeVariants[C])||void 0===c?void 0:c.find((function(e){var t=f(e.split("__"),2),i=t[0],n=t[1];return i===P.hex||!i&&n===P.name}))),I="",w?I=l.t:b&&(I=l.u),S=(i._par.template?i._par.template.getKey():i._par.generatorVariant.getKey())+I,E=o.a.getPreviewString(S)||"",O=(null===(u=y.getPreviewString((null===(h=i._par)||void 0===h||null===(p=h.generatorVariant)||void 0===p?void 0:p.getKey())+l.t))||void 0===u?void 0:u.length)&&(null===(g=i._par)||void 0===g?void 0:g.designData),!i._previewString||String(i._previewString)!==String(E)){n.next=18;break}return n.abrupt("return");case 18:if((k=!e&&!i._par.isPrintfile&&i._par.generatorVariant.hideDesignPreview)?(E="",a.a.addClassName(i._nodeDesign,"pf-d-none")):a.a.removeClassName(i._nodeDesign,"pf-d-none"),L=i._mockupPosition.width>0,(k||E||i._previewString||!i._par.template||!L)&&!O){n.next=32;break}if(D=(null===(A=Object(d.a)())||void 0===A?void 0:A.colors)||[],x=i._par.variantArea?(null===(R=i._par.variantArea)||void 0===R?void 0:R.getGeneratorVariants().map((function(e){return e.getColorData(D)})).filter((function(e){return null==e?void 0:e.hex})))||[]:(null===(N=i._lifelikeVariants[C])||void 0===N?void 0:N.map((function(e){var t=f(e.split("__"),2);return{hex:t[0],name:t[1]}}),{}))||[],F=i._par.generatorVariant.getColorData(D),M={fill:i._par.getDesignFill(C),productColors:x,productColor:F},!(i._currentAttempt++<i._maxAttempts)){n.next=32;break}return n.next=29,y.setPreviewStringFromTemplate(i._par.template,i._mockupPosition,M,i.renderPreviewString.bind(i,e,i._lifelikeVariants),I);case 29:return n.abrupt("return");case 32:i._previewString=String(E),i._nodeDesign.style.background=null,i._nodeDesign.style.top=null,i._nodeDesign.style.left=null,i._nodeDesign.style.width=null,i._nodeDesign.style.height=null,i._nodeDesign.innerHTML="","<svg"===i._previewString.substring(0,4)?(i._nodeDesign.style.top=i._mockupPosition.top+"px",i._nodeDesign.style.left=i._mockupPosition.left+"px",i._nodeDesign.style.width=i._mockupPosition.width+"px",i._nodeDesign.style.height=i._mockupPosition.height+"px",i._nodeDesign.innerHTML=i._previewString):"data:"===i._previewString.substring(0,5)&&(i._nodeDesign.style.background='transparent url("'+i._previewString+'") '+i._mockupPosition.left+"px "+i._mockupPosition.top+"px / "+i._mockupPosition.width+"px "+i._mockupPosition.height+"px no-repeat"),i._currentAttempt=0,i._previewString="";case 42:case"end":return n.stop()}}),n)})))()}},a.a.Base);y.getPreviewString=function(e){return o.a.getPreviewString(e)},y.setPreviewString=function(e,t){return o.a.setPreviewString(e,t)},y.clearPreviewStrings=function(){o.a.clearPreviewStrings()},y.shouldUseLifelike=function(){var e=v(regeneratorRuntime.mark((function e(t){var i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=[h.a.TYPE_LABEL_INSIDE,h.a.TYPE_LABEL_OUTSIDE,h.a.TYPE_HANG_TAG],n=[s.a.TYPE_T_SHIRT],!(i.indexOf(t.placementId)>-1)){e.next=4;break}return e.abrupt("return",!1);case 4:return e.next=6,Object(u.x)(u.m);case 6:return r=e.sent,e.abrupt("return",r&&n.indexOf(t.technique)>-1);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y.setPreviewStringFromTemplate=function(){var e=v(regeneratorRuntime.mark((function e(t,i,n,a){var o,s,d,h,f,g=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=g.length>4&&void 0!==g[4]?g[4]:"",e.next=3,Object(u.x)(u.f);case 3:return s=e.sent,e.next=6,Object(u.x)(u.e);case 6:return d=e.sent,Object(p.m)(u.f,s),Object(p.m)(u.e,d),e.next=11,y.shouldUseLifelike(t);case 11:h=e.sent,f=[],n=Object.assign({},{productColors:[],productColor:{},isReadOnly:!0,textToPng:!0,readyCallback:function(e){setTimeout((function(){var i=!!o,n=null;h?(e.opts.useLifelike=!0,e.opts.productColors=[e.opts.productColor],e._detectPrintColorMode(),e.shouldShowLiveLifelike()?(n=e.convertToLifelike(),o=l.t,f=e.getLifelikeColors()):n=e.convertToPreview({multiplier:2},i)):n=e.convertToPreview({multiplier:2},i),null!==n&&y.setPreviewString(t.getKey()+o,n),"function"==typeof a&&a(n,f)}),0)},canvasParams:{useAntiAliasing:!1,useLifelike:h},canvasFontsObject:Object(c.getPFCanvasFonts)(),isCropPatternAvailable:function(){return s&&d}},n||{}),new r.a(i,null,{},n).setLayers(t.layersToArray(!0,!1));case 16:case"end":return e.stop()}}),e)})));return function(t,i,n,r){return e.apply(this,arguments)}}()},Iy0a:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("n6mh"),r=i("+erO"),a=i("Fpf/"),o=i("mrkb"),s=i("YNgQ"),l=Class({mockupFile:null,isLocked:!0,getType:function(){return l.TYPE},_getNewLayer:function(){return new l},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.mockupFile=this.mockupFile,t.flipX=this.flipX,t.flipY=this.flipY,t.overrideImage=this.overrideImage,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition.getClone(),t},getSourceWidth:function(){return this.mockupFile.mockupWidth},getSourceHeight:function(){return this.mockupFile.mockupHeight},getSourceDpi:function(){return this.getDPI()},isConfigurationSame:function(e){var t;return e.mockupFile.downloadUrl===(null===(t=this.mockupFile)||void 0===t?void 0:t.downloadUrl)},toArray:function(){var e;return e=null===sessionStorage.getItem("layerIsLocked")||"true"===sessionStorage.getItem("layerIsLocked"),{type:a.a,object:l.BE_OBJECT,id:this._getId(),url:this._getUrl(),position:this.position?this.position.toArray():{},flipX:this.flipX,flipY:this.flipY,uniqueId:this.uniqueId,isLocked:e,disableCentering:Object(o.f)()}},_getUrl:function(){var e;return null===(e=this.mockupFile)||void 0===e?void 0:e.downloadUrl},_getId:function(){return 1},getDPI:function(){return 600},isVector:function(){return!1},isSimple:function(){return!1},isMockupLayer:function(){return!0}},n.a);l.TYPE="mockup",l.BE_OBJECT="mockupMakerMockup",l.fromObject=function(){var e=new l;return e.mockupFile=Object(s.b)(),e.originalPosition=new r.a,e.position=e.originalPosition.getClone(),e}},JA1v:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("E17x"),r=i("5B9T"),a=i("iQ/s"),o=i("bUho"),s=i("nF4n"),l=i("wDP+"),c=Class({_par:null,_selectedColors:null,_colors:null,_colorNodes:null,_maxCount:0,_canDeselectLast:!0,_errorNode:null,_onError:null,_unavailableColors:null,_discontinuedColors:null,_disabledRegionColors:null,__construct:function(e){e=e||new a.a,this._par=e,this.onChangeCallback=e.onChange,this._canDeselectLast=e.canDeselectLast,this._onError=e.onError;var t=e.nodeClass||"",i=[],n=!Array.isArray(e.colors);for(var r in e.colors){var o=n?r:"",l=e.colors[r]instanceof Array?e.colors[r]:[e.colors[r]];0!==(l=l.filter((function(e){return!!e&&"transparent"!==e.toLowerCase()}))).length&&i.push({name:o,codes:l})}for(r in this._selectedColors=e.selectedColors||[],this._unavailableColors=e.unavailableColors||[],this._discontinuedColors=e.discontinuedColors||[],this._disabledRegionColors=e.disabledRegionColors||[],this._disabledColors=e.disabledColors||[],this._selectedColors)void 0===this._selectedColors[r]&&this._selectedColors.splice(r,1);t+=e.showBig?" swatches--big":"",t+=e.showHuge?" swatches--huge":"",t+=e.showInline?" swatches--inline":"",t+=e.showTextSwatches?" swatches--for-text":"",this._maxCount=e.maxCount||i.length,this.node=tag("div",{className:"swatches pf-m-0 pf-mb-12 "+t,attr:{role:"list","aria-label":lang("Choose color")}}),this.onChangeCallback&&e.isColorClickable&&s.a.addClassName(this.node,"swatches--click"),this._colors=i,e.preSelectFirst&&i.length&&this.setSelectedColor(i[0].name),this.render()},render:function(){s.a.clearNode(this.node),this._colorNodes={};var e=[],t=[],i=[],a=[];for(var o in this._colors){var u=this._colors[o];this._discontinuedColors.indexOf(u.name)>-1?i.push(u):this._unavailableColors.indexOf(u.name)>-1?t.push(u):this._disabledRegionColors.indexOf(u.name)>-1?a.push(u):e.push(u)}for(var d in e=e.concat(t,i,a)){for(var h=e[d],p=h.name,f=lang("Color {color}").replace("{color}",p),g=[],m=this._unavailableColors.indexOf(p)>-1,_=this._discontinuedColors.indexOf(p)>-1,v=this._disabledRegionColors.indexOf(p)>-1,y=this._disabledColors.indexOf(p)>-1,b=0;b<h.codes.length;b++){var P=Object(l.a)(b,this._par.showHuge),C={tag:"span",className:"".concat(P," pf-border-transparent pf-hover-shadow"),style:{backgroundColor:h.codes[b]}};this._par.showTextSwatches&&(C=tag("span",{className:"".concat(P," pf-border-transparent pf-hover-shadow"),innerHTML:c.getTextSwatchNode(h.codes[b])})),g.push(C)}var T="";T+=m||v?" swatches__item--unavailable":"",T+=_||y?" swatches__item--discontinued":"",T+=this._par.showTextSwatches?" swatches__item--text":"";var w,I=y&&this._par.disabledText?this._par.disabledText:p;if(this._par.showRgbTooltip){var S=r.a.hexToRgb(h.codes[0]);w=I+" (R:"+S.r+" G:"+S.g+" B:"+S.b+")"}else w=I+" "+h.codes.join("/");m||v?f=dlang("site","Color {color} is not available").replace("{color}",p):(_||y)&&(f=dlang("site","Color {color} is discontinued").replace("{color}",p));var E=tag("a",{className:"swatches__item pf-rounded pf-hover-shadow"+T,title:w,attr:{"aria-label":f},data:{label:f}},g);this._par.isColorClickable||y||(E.style.cursor="default"),I&&$(E).tooltip({container:"body",trigger:Object(n.b)()?"manual":"hover"}),this.onChangeCallback&&!y&&(E.setAttribute("role","button"),E.onclick=this._onColorClick.bind(this,E,p)),this._colorNodes[p]=E,this._selectedColors.indexOf(p)>-1&&this._setItemActiveState(E,!0),E.append(this.node)}this._par.showEmptyGraphic&&(this._emptyNode=tag("div","swatches__empty "+(this._selectedColors.length>0?"hidden":""),[tag("img",{className:"swatches__empty__mobile hidden-sm hidden-md hidden-lg",src:langImage("generator/choose-color-mobile.png")}),tag("img",{className:"swatches__empty__desktop hidden-xs",src:langImage("generator/choose-color-desktop.png")})]).prepend(this.node),setTimeout(function(){this._selectedColors.length>0?$(this.node).closest(".product-option").removeClass("pf-mt-sm-24 pf-mt-md-0"):$(this.node).closest(".product-option").addClass("pf-mt-sm-24 pf-mt-md-0")}.bind(this),1))},_renderState:function(){for(var e in this._colorNodes){var t=this._colorNodes[e];this._setItemActiveState(t,!1),s.a.removeClassName(t,"swatches__item--discontinued"),s.a.removeClassName(t,"swatches__item--unavailable");var i=this._unavailableColors.indexOf(e)>-1,n=this._discontinuedColors.indexOf(e)>-1,r=this._disabledRegionColors.indexOf(e)>-1;(i||r)&&s.a.addClassName(t,"swatches__item--unavailable"),n&&s.a.addClassName(t,"swatches__item--discontinued"),this._selectedColors.indexOf(e)>-1&&this._setItemActiveState(t,!0)}},_setItemActiveState:function(e,t){t?s.a.addClassName(e,"swatches__item--active"):s.a.removeClassName(e,"swatches__item--active")},_onColorClick:function(e,t){Object(n.b)()||$(".tooltip").tooltip("hide");var i=this._selectedColors.indexOf(t);if(Object(n.b)()&&($(".swatches__item").each((function(t,i){e!=i&&$(i).tooltip("hide")})),$(e).tooltip("show"),setTimeout((function(){$(e).tooltip("hide")}),2e3)),this._par.isColorClickable){var r=!this.isColorUnavailable(t)&&!this.isColorDiscontinued(t)&&!this.isColorDisabledRegion(t);if(i>-1){if(!this._canDeselectLast&&1===this._selectedColors.length)return;this._selectedColors.splice(i,1),this._setItemActiveState(e,!1)}else if(1===this._maxCount)r&&(this._selectedColors=[t],this._renderState());else{if(!(this._selectedColors.length<this._maxCount))return this.addError("You can choose up to "+this._maxCount+" colors"),!1;this._selectedColors.push(t),this._setItemActiveState(e,!0)}this.onChangeCallback&&this.onChangeCallback(1===this._maxCount?[t]:this.getSelectedColors()),this._checkEmpty()}},getSelectedColors:function(){return this._selectedColors.slice()},addError:function addError(e){"function"==typeof this._onError&&this._onError(e)},setUnavailableColors:function(e){return this._unavailableColors=e,this},setDiscontinuedColors:function(e){return this._discontinuedColors=e,this},setDisabledRegionColors:function(e){return this._disabledRegionColors=e,this},getUnavailableColors:function(){return this._unavailableColors},getDiscontinuedColors:function(){return this._discontinuedColors},getDisabledRegionColors:function(){return this._disabledRegionColors},isColorUnavailable:function(e){return this.getUnavailableColors().indexOf(e)>-1},isColorDiscontinued:function(e){return this.getDiscontinuedColors().indexOf(e)>-1},isColorDisabledRegion:function(e){return this.getDisabledRegionColors().indexOf(e)>-1},getColors:function(){return this._colors},showPopover:function(e,t,i,n){this._popover&&(this._popover.onCloseCallback=null,this._popover.destroy());var r=$(this.node).closest(".dynamic-sticky-footer").get(0);this._popover=new o.a(this._colorNodes[e],t,i,{modalCompatible:!0,closeOnResize:!0,placement:"bottom",container:r?$(r).find(".dynamic-sticky-footer__drawer").get(0):"body"},n)},setSelectedColor:function(e){this._selectedColors=e?[e]:[],this._renderState()},_checkEmpty:function(){this._par.showEmptyGraphic&&this._emptyNode&&(this._selectedColors.length>0?(s.a.addClassName(this._emptyNode,"hidden"),$(this.node).closest(".product-option").removeClass("pf-mt-48 pf-mt-sm-24 pf-mt-md-0")):(s.a.removeClassName(this._emptyNode,"hidden"),$(this.node).closest(".product-option").addClass("pf-mt-48 pf-mt-sm-24 pf-mt-md-0")))}},s.a.Base);c.getTextSwatchNode=function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="12" height="13" viewBox="0 0 15 16"><g fill="none"><g style="fill:'+e+';stroke:#d5d5d5"><path d="M8.8 4.1L8.8 12C8.8 12.4 8.8 12.6 8.9 12.6 9 12.7 9.3 12.7 9.9 12.7L10.4 12.7 10.4 14.5 4.6 14.5 4.6 12.7 5.1 12.7C5.7 12.7 6 12.7 6.1 12.6 6.2 12.6 6.2 12.4 6.2 12L6.2 4.1 4.7 4.1C4.6 4.1 4.6 4.1 4.5 4.1 4 4.1 3.8 4.2 3.5 4.3 3.3 4.6 3 5 2.5 5.9L2.3 6.3 0.7 5.8 1.8 1.5 13.2 1.5 14.3 5.8 12.7 6.3 12.5 5.9C12 5 11.7 4.6 11.5 4.3 11.2 4.2 11 4.1 10.5 4.1 10.4 4.1 10.4 4.1 10.3 4.1L8.8 4.1Z"/></g></g></svg>'},window&&((globalThis||{}).PFComponentsColorPicker=c)},JIEg:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={isClicked:!1}},JQxb:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("X5Ic"),r=i("nF4n"),a=i("boP+"),o=Class({__construct:function(){this.node=Object(r.a)({tag:"div",className:"layer-picker__item__guideline-info"})},renderGuidelineInfo:function(){if(this.clearGuidelineInfo(this.node),this._showGuidelineInfo()){var e=Object(a.a)().productId;localStorage.getItem("mockup-generator-guideline-info-"+e)||Object(r.a)({tag:"div",className:"alert alert-warning",els:[{tag:"button",text:"Ã",className:"close",attr:{"aria-label":lang("Close")},data:{dismiss:"alert"},onclick:this._setStorageItem.bind(this,"mockup-generator-guideline-info-"+e)},{tag:"span",innerHTML:dlang("generator","Looks great! Your design will be printed on both sides of the product. If you want to customize each side separately, select Advanced print file template in the Design tab.")}]}).append(this.node)}},clearGuidelineInfo:function(){r.a.clearNode(this.node)},_showGuidelineInfo:function(){return[n.a.ID_ALL_OVER_TOTE,n.a.ID_SOCKS,n.a.ID_ALL_OVER_DRAWSTRING_BAG].indexOf(Object(a.a)().productId)>-1},_setStorageItem:function(e){try{localStorage.setItem(e,1)}catch(e){console.log("Local storage not supported")}}});window&&((globalThis||{}).PFProductPushGuidelineInfo=o)},Jkv8:function(e,t,i){"use strict";i.r(t),i.d(t,"setPFCanvasFonts",(function(){return u})),i.d(t,"loadJSFontFrontend",(function(){return h})),i.d(t,"getPFCanvasFonts",(function(){return f}));var n=i("AoK4"),r=i.n(n),a=i("KLvT"),o=i("Z4u1"),s=i("mrkb");function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(){return d.apply(this,arguments)}function d(){return(d=c(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(s.k)(),e.next=3,Object(a.a)().dispatch(o.a(o.c));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){return p.apply(this,arguments)}function p(){return(p=c(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:return e.abrupt("return",r.a.loadJSFontFrontend(t,i));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var f=function(){return r.a}},JogF:function(e,t,i){"use strict";i.d(t,"g",(function(){return n})),i.d(t,"h",(function(){return r})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"f",(function(){return s})),i.d(t,"i",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"b",(function(){return h})),i.d(t,"k",(function(){return p}));var n="good",r="medium",a="bad",o="badUpscale",s="embroidery",l="transparencyWarning",c="embroideryTextTooBig",u="textSmall",d="embroideryTextSmall",h="embroideryTextOverlapping",p=2},K45J:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("hdE6"),r=i("ZtlV"),a=i("9Y8y"),o=i("how4"),s=i("6JZw"),l=i("nF4n"),c=function(){this.productCategories=[],this.variants=[],this.options=[]};c.prototype=new s.a,c.prototype.id=0,c.prototype.environmentId=0,c.prototype.name="",c.prototype.sku="",c.prototype.price=0,c.prototype.fulfillmentFeeForItem=0,c.prototype.fulfillmentFee=0,c.prototype.displayStatus="",c.prototype.variantId=0,c.prototype.productId=0,c.prototype.stockProductId=0,c.prototype.stockQuantity=0,c.prototype.stockAvailableQuantity=0,c.prototype.urlImage="",c.prototype.dimensions=null,c.prototype.originalDimensions=null,c.prototype.status=0,c.prototype.statusName="",c.prototype.statusClassname="",c.prototype.displayStatus=0,c.prototype.displayStatusName="",c.prototype.displayStatusClassname="",c.prototype.hsCode="",c.prototype.createdAt="",c.prototype.updatedAt="",c.prototype.isPackaged=!1,c.prototype.shippingType="",c.prototype.unitOfMeasure=1,c.prototype.currency="USD",c.prototype.retailPrice=0,c.prototype.originalRetailPrice=0,c.prototype.type=0,c.prototype.isProductMergedWithVariant=!0,c.prototype.tempSyncProductId=0,c.prototype.tempSyncVariantId=0,c.prototype.productCategories=[],c.prototype.variants=[],c.prototype.options=[],c.prototype.getReadablePrice=function(){return prettyMoney(this.price)},c.prototype.isDraft=function(){return this.status===c.STATUS_DRAFT},c.prototype.isActive=function(){return this.status===c.STATUS_ACTIVE},c.prototype.isSuspended=function(){return this.status===c.STATUS_SUSPENDED},c.prototype.canEdit=function(){return!0},c.prototype.isInTemporaryStock=function(){return this.type===c.TYPE_TEMPORARY_RETURNED_ITEMS},c.prototype.isInPermanentStock=function(){return(this.type===c.TYPE_RETURNED_ITEMS||this.type===c.TYPE_OUTSIDE_STOCK)&&this.displayStatus===c.DISPLAY_STATUS_IN_STOCK},c.prototype.canAddToShipment=function(){return this.isActive()&&this.type===c.TYPE_OUTSIDE_STOCK},c.prototype.getProductCategoryIdList=function(){return this.productCategories.map((function(e){return e.id}))},c.prototype.fromArray=function(e){var t=new c;return l.a.O2O(t,e),t},c.prototype.toArrayKeys=["id","name","sku","dimensions","originalDimensions","variants","isPackaged","shippingType","unitOfMeasure","currency","type","retailPrice","originalRetailPrice","isProductMergedWithVariant","productCategories","urlImage","tempSyncProductId","tempSyncVariantId","hsCode"],c.fromArray=function(e){var t=new c;if(l.a.O2O(t,e),e.dimensions&&(t.dimensions=o.a.fromArray(e.dimensions)),e.originalDimensions&&(t.originalDimensions=o.a.fromArray(e.originalDimensions)),e.variants)for(var i in t.variants=[],e.variants){var s=a.a.fromArray(e.variants[i]);s.customProduct=t,t.variants.push(s)}if(e.options)for(var u in t.options=[],e.options)t.options.push(r.a.fromArray(e.options[u]));if(e.productCategories)for(var d in t.productCategories=[],e.productCategories)t.productCategories.push(n.a.fromArray(e.productCategories[d]));return t},c.TYPE_BRANDING_ITEM="branding",c.TYPE_CUSTOM_PRODUCT="customProduct",c.TYPE_KEY_PRODUCT="product",c.TYPE_KEY_PACK_IN="pack-in",c.TYPE_KEY_CUSTOMER_PACKAGING="packaging",c.TYPE_OUTSIDE_STOCK=2,c.TYPE_RETURNED_ITEMS=3,c.TYPE_TEMPORARY_RETURNED_ITEMS=4,c.TYPE_PACK_IN=6,c.TYPE_CUSTOMER_PACKAGING=7,c.STATUS_CREATED=0,c.STATUS_PENDING=1,c.STATUS_ACTIVE=2,c.STATUS_DISABLED=3,c.STATUS_SUSPENDED=4,c.STATUS_DISAPPROVED=5,c.STATUS_DRAFT=6,c.DISPLAY_STATUS_IN_STOCK=6,c.UNIT_OF_MEASURE_IMPERIAL=1,c.UNIT_OF_MEASURE_METRIC=2,c.OrderableStates=[c.STATUS_ACTIVE],c.MINIMUM_RETAIL_PRICE=.9,c.MAX_LENGTH_NAME=52,window&&((globalThis||{}).PFItemsCustomProduct=c)},KWDz:function(e,t){e.exports="https://static.cdn.printful.com/dist-pf/image-assets/favorites.b9d921109178a0754969e89018a4949c.svg"},Kblr:function(e,t,i){"use strict";var n,r=i("X5Ic"),a=i("boP+");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"templates",void 0),s(this,"placementSelector",void 0),this.templates=t,this.placementSelector=i}var t,i,n;return t=e,(i=[{key:"isLimitReached",value:function(){var e=Object(a.a)();if(!this.templates||!this.placementSelector||!e)return!1;var t=this.templates.getPlacementCountHavingFiles(),i=this.templates.getPlacementIdsHavingFiles(),n=this.placementSelector.getSelectedPlacementId(),r=e.productId,o=this.getProductPlacementLimit(r),s=t===o&&!i.includes(n);return s||t>o}},{key:"getProductPlacementLimit",value:function(t){return e.placementLimitConfig[t]}}])&&o(t.prototype,i),n&&o(t,n),e}();s(l,"placementLimitConfig",(s(n={},r.a.ID_IND20SRT_SHORTS,3),s(n,r.a.ID_CH_M7580,3),s(n,r.a.ID_KK_KK933,3),n)),window&&((globalThis||{}).ProductPushPlacementLimiter=l),t.a=l},Kiz0:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=i("SaSb"),r=i("9eNC");function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(e)location.href=langUrl("/dashboard/settings/".concat(e,"/store"));else if(n.a.isWindowSmallerThan(n.a.SIZES.MD)){if(document.querySelector(".navbar-toggle").click(),document.querySelector(".js-env-selling-region").classList.contains("open"))return;document.querySelector("#selling-region-menu-toggle").click()}else window.scrollTo(0,0),setTimeout((function(){r.o(r.n)}),0)}function o(e){var t="PFCatalog:productEdt:"+e;try{sessionStorage.removeItem(t)}catch(e){}}},"Kv+z":function(e,t,i){"use strict";i.d(t,"i",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"l",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"j",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"e",(function(){return g})),i.d(t,"b",(function(){return m}));var n=i("Zwo4"),r="".concat(n.a,"/quickDesigns"),a="m_loadQuickDesignItemsIntoRepo",o="m_setHasLoadedAllDesigns",s="m_updateRecentQuickDesigns",l="g_hasLoadedAllQuickDesigns",c="g_getQuickDesignGroup",u="g_getQuickDesignItems",d="a_allActiveQuickDesignGroups",h="a_loadQuickDesignGroupsIntoRepo",p="a_loadQuickDesigns",f="a_loadQuickDesignItems",g="a_getRecentQuickDesigns",m=function(e){return"".concat(r,"/").concat(e)}},L5Qw:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("nF4n"),r=i("qURr"),a=i("xeH2"),o=i.n(a),s=i("LvDl"),l=i.n(s),c=Class({__construct:function(e){if(this._par=e,this.node=tag("div",this._par.className?this._par.className:"pf-my-24"),!l.a.isNumber(l.a.toNumber(this._par.page))||!l.a.isNumber(l.a.toNumber(this._par.pages)))throw new Error("Invalid parameters!");if(!(this._par.pages<2)){var t=new r.b;t.pages=this._par.pages,t.currentPage=this._par.page,t.onChange=this._onPageClick.bind(this),this._pagingNode=new r.a(t),this._pagingNode.append(this.node)}},_onPageClick:function(e){this._currentPage=parseInt(e,10),this._par.scrollNode&&o()("html, body").animate({scrollTop:o()(this._par.scrollNode).offset().top+this._par.scrollOffset},300),null!=this._par.callback&&this._par.callback(this._currentPage)}},n.a.Base);window&&((globalThis||{}).PFComponentsPaging=c)},L8zU:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("7pSD"),r=i("md/F"),a=i("jI2M"),o=i("1Juc"),s=i("X5Ic"),l=i("cCrT"),c=i("97Au"),u=i("UIgN");function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var p=Class({_sizes:[],_translatedSizes:[],_unavailableSizes:[],_sellingRegionLimitedSizes:[],_variants:[],ONE_SIZE:"One Size",ONE_SIZE_TRANSLATED:dlang("products","One Size"),nodeError:null,sizeGuideModal:null,_marginClass:"margin-bottom-30",_shouldDisplayInline:!0,_sizeGuideModalTrigger:null,__construct:function(e,t,i,n){this._onSizeChangedCallback=t;var s=d(this._getUniqueSizes(e),2);this._sizes=s[0],this._translatedSizes=s[1],this._sizes.sort(r.a.sizeSortingCallback),this._variants=e,this._shouldDisplayInline=void 0===n||n;var c=[];for(var u in this._sizes){var h=this._sizes[u],p=h.toLowerCase()===this.ONE_SIZE.toLowerCase()?this.ONE_SIZE_TRANSLATED:this._getTranslatedSize(h);c.push({value:h,title:p})}var f=new a.a;f.values=c,f.valuesDisabled=this._unavailableSizes,f.onChanged=this._onSizeClick,f.ariaLabel=lang("Choose size"),f.singleAriaLabel=lang("Size {title}"),this.buttonPicker=new o.a(f),i&&(this._marginClass=i);var g=this._shouldRenderOneSizeText();if(this._sizes.length||g){var m=new l.a;if(m.query.size&&this._sizes.indexOf(m.query.size)>-1&&this.buttonPicker.setActiveValue(m.query.size),1===this._sizes.length)for(var _ in e){this._variant=e[_],this.buttonPicker.setActiveValue(this._variant.size);break}var v=g?tag("div","pf-mt-16",dlang("products","One size fits all")):this.buttonPicker._nodeItems;this.node=tag("div",{className:this._marginClass+" button-picker"+(g?" pf-w-100":""),style:this._shouldDisplayInline?{display:"inline-block"}:{}},[tag("div","pf-mb-8",[tag("b","",[lang("Choose size")]),this._canHaveSizeGuide()?this._sizeGuideModalTrigger=tag("a",{className:"pull-right pf-mr-4 pf-ml-32 pf-link ".concat(this._getNewSizeGuideClass()),onclick:this._showSizeGuide},[lang("Size guide")]):""]),v,this.nodeError=tag("div","alert alert-danger text-center hidden pf-mt-16",dlang("products","Please choose a size!"))])}else this.node=tag("div")},_showSizeGuide:function(){if(null==this.sizeGuideModal){var e=new c.a.Par;for(var t in e.title=lang("Size guide"),e.modalDialogClass="modal-lg",e.onClose=$.proxy(this._removeSizeGuide,this),e.accessibility=!0,e.onShown=function(e){Object(u.b)(e.target.querySelector(".modal-body"))},this._variants){e.url=s.a.getSizeChartUrl(this._variants[t].productId);break}this.sizeGuideModal=new c.a(e)}this.sizeGuideModal.show()},_removeSizeGuide:function(){this.sizeGuideModal&&(this.sizeGuideModal.remove(),this.sizeGuideModal=null,this._sizeGuideModalTrigger&&Object(u.a)(this._sizeGuideModalTrigger))},_canHaveSizeGuide:function(){var e;return(null===(e=this._getProduct())||void 0===e?void 0:e.canHaveSizeGuide)||!1},_getNewSizeGuideClass:function(){var e;return null!==(e=this._getProduct())&&void 0!==e&&e.newSizeGuide?"pf-new-size-guide":""},_shouldRenderOneSizeText:function(){var e,t=this._getProduct(),i=!this._sizes.length&&(null==t?void 0:t.isEmbroidery())&&!t.isEmbroiderySample(),n=1===this._sizes.length&&"one size"===(null===(e=this._sizes[0])||void 0===e?void 0:e.toLowerCase());return i||n},_getProduct:function(){return this._variants.length?this._variants[0].getCachedProduct():null},hasAvailableSizesInSellingRegion:function(){var e=this;return this._sizes.filter((function(t){return!(e.isSizeDiscontinued(t)||e.isSizeUnavailable(t)||e.isSizeInactive(t)||e._sellingRegionLimitedSizes.includes(t))})).length>0},_onSizeClick:function(e){var t=this.isSizeInactive(e)?this.getAvailableAttributeRegion(e,"size"):"",i=!0,r="",a="";this.isSizeDiscontinued(e)?(r=p.POPOVER.DISCONTINUED.TITLE,a=p.POPOVER.DISCONTINUED.DESC,this._variants[0].color||(a=p.POPOVER.DISCONTINUED.DESC_SIZE_ONLY),i=!1):this._sellingRegionLimitedSizes.includes(e)?(r=this.hasAvailableSizesInSellingRegion()?n.a.POPOVER.DSR_LIMITED.DESC_SIZE.replace("{linkStart}","").replace("{linkEnd}",""):"",i=!1):this.buttonPicker.getDisabledSampleSizes().indexOf(e)>-1?(r=n.a.POPOVER.SAMPLE.TITLE,a=n.a.POPOVER.SAMPLE.DESC,i=!1):this.isSizeUnavailable(e)||this.isSizeInactive(e)&&!t?(r=n.a.POPOVER.UNAVAILABLE.TITLE,a=n.a.POPOVER.UNAVAILABLE.DESC,this._variants[0].color||(a=n.a.POPOVER.UNAVAILABLE.DESC_SIZE_ONLY),i=!1):this.isSizeInactive(e)&&!p.SIZES_WITHOUT_REGION_POPOVER.includes(e)&&(r=n.a.POPOVER.REGION.TITLE.replace("{region}",t),a=n.a.POPOVER.REGION.DESC,i=!1),this.buttonPicker&&(r||a)&&this.buttonPicker.togglePopover(e,r,a),i&&(this._onSizeChangedCallback(e),this.buttonPicker.setActiveValue(e))},isSizeInactive:function(e){return!!this.buttonPicker&&this.buttonPicker.getInactiveItems().includes(e)},isSizeUnavailable:function(e){return!!this.buttonPicker&&this.buttonPicker.getUnavailableItems().includes(e)},isSizeDiscontinued:function(e){return!!this.buttonPicker&&this.buttonPicker.getHiddenItems().includes(e)},getSize:function(){return this.buttonPicker?this.buttonPicker.getValue():null},_getUniqueSizes:function(e){return e.reduce((function(e,t){var i=t.size,n=t.translatedSize,r=t.isDisabledInPush,a=t.hasStock;return!i||e[0].includes(i)||r&&!a||(e[0].push(i),e[1][i]=n),e}),[[],{}])},setUnavailableSizes:function(e){this.buttonPicker&&this.buttonPicker.setUnavailableItems(e)},setHiddenSizes:function(e){this.buttonPicker&&this.buttonPicker.setHiddenItems(e)},setInactiveSizes:function(e){this.buttonPicker&&this.buttonPicker.setInactiveItems(e)},setUnavailableSampleSizes:function(e){this.buttonPicker&&this.buttonPicker.setDisabledSampleSizes(e)},setSellingRegionLimitedSizes:function(e){this._sellingRegionLimitedSizes=e,this.setInactiveSizes(e)},setVariant:function(e){if(this.buttonPicker.setActiveValue(""),e&&e.size&&this._sizes.indexOf(e.size)>-1&&(this.buttonPicker.setActiveValue(e.size),this._variant=e),!this.buttonPicker.getActiveValue()&&1==this._sizes.length)for(var t in this._variants){this._variant=this._variants[t],this.buttonPicker.setActiveValue(this._variant.size);break}},getVariant:function(){return this._variant},hasAtLeastOneValue:function(){return!!this._sizes.length},isValuePicked:function(){return!!this.getSize()},getValueCount:function(){return this._sizes.length},getSizes:function(){return this._sizes.slice()},_getTranslatedSize:function(e){var t;return null!==(t=this._translatedSizes[e])&&void 0!==t?t:e}},n.a);p.SIZES_WITHOUT_REGION_POPOVER=["Samsung Galaxy S10","Samsung Galaxy S10e","Samsung Galaxy S10+"],p.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this color and size combination is discontinued. Please choose another color or size."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose another size.")}},(globalThis||{}).PFVariantPickerSizePicker=p},LAWH:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.quantity=null,a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsSyncVariantCountsItem=a)},Lipf:function(e,t,i){"use strict";i.r(t),i.d(t,"PFVariantPicker",(function(){return ei}));var n=i("WLCh"),r=i("Y6pR"),a=i("bGr9"),o=i("2BaQ"),s=Class({_storage:null,_availableStorageKeys:[],__construct:function(){this._storage=s._staticStorage,this._availableStorageKeys=[s.KEY_COLOR,s.KEY_SIZE,s.KEY_REGION,s.KEY_OPTIONS,s.KEY_GENERATOR_DESIGN,s.KEY_DESIGN_DATA]},getSize:function(){return this._get(s.KEY_SIZE)},rememberSize:function(e){return this._set(s.KEY_SIZE,e)},getColor:function(){return this._get(s.KEY_COLOR)},rememberColor:function(e){return this._set(s.KEY_COLOR,e)},getRegion:function(){return this._get(s.KEY_REGION)},rememberRegion:function(e){return this._set(s.KEY_REGION,e)},getOptions:function(){return this._get(s.KEY_OPTIONS)},rememberOptions:function(e){return this._set(s.KEY_OPTIONS,e)},rememberGeneratorDesignId:function(e){this._set(s.KEY_GENERATOR_DESIGN,e)},getGeneratorDesignId:function(){return this._get(s.KEY_GENERATOR_DESIGN)},getDesignData:function(){return this._get(s.KEY_DESIGN_DATA)},rememberDesignData:function(e){return this._set(s.KEY_DESIGN_DATA,e)},rememberItemFile:function(e){e.exists()?(this._storage.fileIdsByType[e.type]=e.fileId,e.position&&(this._storage.positionsByType[e.type]=e.position.getClone())):(delete this._storage.fileIdsByType[e.type],delete this._storage.positionsByType[e.type])},getFileIdForType:function(e){return this._storage.fileIdsByType[e]||0},getPositionsForType:function(e){return this._storage.positionsByType[e]||null},remember:function(e){for(var t in e)this._set(t,e[t])},forget:function(){s._staticStorage=new s.Storage,this._storage=s._staticStorage},forgetDesignData:function(){s._staticStorage[s.KEY_DESIGN_DATA]=null},get:function(e){return this._get(e)},_get:function(e){return this._isKeyAllowed(e)&&this._storage[e]?this._storage[e]:null},_set:function(e,t){this._isKeyAllowed(e)&&t&&(this._storage[e]=t)},_isKeyAllowed:function(e){return this._availableStorageKeys.indexOf(e)>-1}});s.KEY_COLOR="color",s.KEY_SIZE="size",s.KEY_REGION="region",s.KEY_OPTIONS="options",s.KEY_DESIGN_DATA="designData",s.KEY_GENERATOR_DESIGN="generatorDesign",s.Storage=function(){this.options={},this.fileIdsByType={},this.positionsByType={}},s.Storage.prototype.color="",s.Storage.prototype.size="",s.Storage.prototype.region="",s.Storage.prototype.options=null,s.Storage.prototype.fileIdsByType=null,s._staticStorage=new s.Storage,(globalThis||{}).PFVariantPickerMemory=s;var l=Class({store:null,product:null,itemFiles:null,isProductPushMode:!1,pickerConfig:null,isDesignerSupported:!0,generatorDesignId:null,orderLineItem:null,isModalDesigner:!1,productChanged:!1,enableCustomizableLayers:!1,productTemplateEditorState:null,generatorParameters:null,onLoaderToggle:null,onProductLoaded:null,onFooterVisibilityChange:null});(globalThis||{}).PFVariantPickerDesignerPar=l;var c=i("XLZy"),u=i("nF4n"),d=Class({_lastUrl:"",_currentUrl:"",__construct:function(e){this.node=Object(u.a)({tag:"div",style:{textAlign:"right"},els:[this._nodeWrap=Object(u.a)({tag:"div",style:{display:"inline-block",width:"auto",minWidth:"100px"}})]}),this.setImage(e)},setImage:function(e){if(e){if(e!=this._currentUrl){c.a.show(this._nodeWrap,{minHeight:200}),this._lastUrl=e;var t=new Image;t.onload=$.proxy(this._onLoaded,this,e),t.src=e}}else this._clear()},_onLoaded:function(e){e===this._lastUrl&&(this._clear(),this._currentUrl=e,Object(u.a)({tag:"img",src:e,className:"img-responsive pull-right"}).append(this._nodeWrap))},_clear:function(){c.a.hide(this._nodeWrap),u.a.clearNode(this._nodeWrap),this._lastUrl=""}},u.a.Base);(globalThis||{}).PFVariantPickerProductImage=d;var h=i("edgZ"),p=i("MMbA"),f=i("XPj6"),g=i("tx4t"),m=i("7QI8"),_=i("bRD6"),v=i("tw/D"),y=i("boP+"),b=Class({_par:null,_designer:null,isReady:!1,_shouldRegeneratePreview:!0,__construct:function(e){this.node=tag("div"),this._par=e;var t=new f.a;t.store=e.store,t.product=e.product,t.ctaText=lang("Generate files"),t.isOrderFlowMode=!0,t.designerState=this._getDesignerLayerState(e.itemFiles,e.generatorDesignId),t.orderLineItem=e.orderLineItem,t.isProductPushMode=e.isProductPushMode,t.pickerConfig=e.pickerConfig,t.isFooterVisible=!1,t.isCustomizerEnabledJS=e.enableCustomizableLayers,t.autoLoad=e.isDesignerSupported,t.isModalDesigner=e.isModalDesigner,t.productTemplateEditorState=e.productTemplateEditorState,t.generatorParameters=e.generatorParameters,t.onLoaderToggle=e.onLoaderToggle,t.onProductLoaded=e.onProductLoaded,t.onFooterVisibilityChange=e.onFooterVisibilityChange,t.isProductPreloaded=!0,t.productChanged=e.productChanged,t.onActiveDesignerTabChanged=this._onActiveDesignerTabChanged.bind(this),this._designer=new g.a(t),e.isDesignerSupported?this._designer.append(this.node):(tag("div","clearfix",[tag("div","col-md-8",[tag("h5","",[e.product.getFullTitle()])]),tag("div","col-md-4",[d(e.product.urlImage)])]).append(this.node),this.isReady=!0),this.getObserver().onDesignerReady(this._onDesignerReady).onDesignerDisabled(this._onDesignerDisabled)},getPushDesigner:function(){return this._designer},getDesignData:function(){return this._par.isDesignerSupported&&this._designer.getSelectedGeneratorVariants(!1).variantCount?this._designer.getDesignData():this._designer.designData},getObserver:function(){return this._designer.observer},getColorPicker:function(){return this._designer.getColorPicker()},getSizePicker:function(){return this._designer.getSizePicker()},getLayerPicker:function(){return this._designer.getLayerPicker()},getProductOptionsPicker:function(){return this._designer.getProductOptionsPicker()},getColor:function(){var e=[].concat(this._designer.getColors()).shift();return e?e.color:""},getSize:function(){var e=[].concat(this._designer.getSizes()).shift();return e||""},getRegion:function(){return this._designer.getRegion()},hasValidProductOptions:function(){return this._designer.getProductOptionsPicker()&&this._designer.getProductOptionsPicker().hasValidOptions()},getExtraPrice:function(){return this._designer.getProductOptionsPicker().getExtraPrice()},getProductOptions:function(){return this._designer.getProductOptionsValues(!0,this._designer.shouldIncludeTextThreadColors())},haveProductOptionsChanged:function(e,t){var i;return e||(e=(new s).getOptions()),null!==(i=Object(y.a)())&&void 0!==i&&i.isCutSew()&&this._designer.getProductOptionsPicker()?!this._designer.getProductOptionsPicker().hasSameValues(e):(!this._par.productTemplateEditorState||!this._par.productTemplateEditorState.useSimpleDesigner)&&!this._designer.getLayerPicker().hasSameProductOptionValues(e,t)},isDesignSimple:function(e){var t=this.getDesignData();return!t.templates||0===Object.values(t.templates).filter((function(t){return!e||t.placementId===e})).filter(this._isTemplateSimple).length},_isTemplateSimple:function(e){return e.layers.length>1||e.layers.filter((function(e){return e.isTextLayer()||e.isClipartLayer()})).length>0},getDefaultPlacementPosition:function(e){return e===m.a.TYPE_MOCKUP?null:this._designer._getTemplate(e).getDefaultPositions()},hasDesignChanged:function(e){var t=this.getChangedPlacementIds();return e?t.indexOf(e)>-1:!!t.length},hasOnlyInsideOrOutsideLabelOrHangTagOrBackground:function(){var e,t=this._par.isDesignerSupported,i=null===(e=Object(y.a)())||void 0===e?void 0:e.canHaveOnlyLabelPlacement;return!!t&&0===this._getPlacementIdsWithDesign().filter((function(e){var t=new r.a(e),n=!t.isInsideLabel()&&!t.isOutsideLabel();return!t.isHangTag()&&!t.isBackground()&&(i||n)})).length},hasPlacementWithDesignFill:function(){return!!this._par.isDesignerSupported&&v.a.fromArray(this._designer.designData.rawPlacementOptions).hasPlacementWithFill()},hasValidColor:function(){return!this.getColorPicker()||!!this.getColor()},hasValidSize:function(){var e=this.getSizePicker();return!e||e.hasNoSizes()||!!this.getSize()},getChangedPlacementIds:function(){var e=this,t=(new s).getDesignData(),i=this.getDesignData();if(!t||t.forceOrientation!==i.forceOrientation)return i.getPlacementIdsWithDesign();var n=v.a.fromArray(t.rawPlacementOptions),r=v.a.fromArray(i.rawPlacementOptions),a=Object.values(i.templates).filter((function(a,o){if(e.haveProductOptionsChanged(t.productOptions,a.placementId))return!0;var s=n.getPlacementFill(a.placementId),l=r.getPlacementFill(a.placementId);if((null==s?void 0:s.designFillValue)!==(null==l?void 0:l.designFillValue))return!0;if(!t.templates)return!0;var c=Object.keys(i.templates)[o];if(!c||!t.templates[c])return!0;var u=_.a.fromArray(t.templates[c]);return u.layers.length!==a.layers.length||a.layers.some((function(e,t){var i=u.layers[t];return!i||e.isChanged(i)}))})).map((function(e){return e.placementId}));if(t.templates&&Object.keys(i.templates).length!==Object.keys(t.templates).length)for(var o in t.templates)i.templates[o]||a.push(o);return a},getFilesTypesToGenerate:function(e){if(!this._par.isDesignerSupported)return[];if(!this.hasDesignChanged())return[m.a.TYPE_MOCKUP];var t=this.getChangedPlacementIds();if(!t.length)return[m.a.TYPE_MOCKUP];var i=this.getDesignData().product.isEmbroidery(),n=t.filter((function(t){var n=this.getPushDesigner().isPlacementSimple(t);return(!i||t===m.a.TYPE_LABEL_INSIDE&&this._designer.designData.hasLabelNative()||!e)&&!n}),this);return n.push(m.a.TYPE_MOCKUP),n},getTechnique:function(){return this._designer.getTechnique()},canContinue:function(){return this.isReady&&this.hasValidColor()&&this.hasValidSize()&&this._hasValidFiles()&&!this._designer.exceededTextLayerCharacterLimit()&&this._designer.areEmbroideryThreadColorsValid()&&!this._designer.hasEmbroideryNotesError()&&this._designer.hasNeededQuality()&&this._designer.getProductOptionsPicker().hasValidOptions()&&this._designer.isDesignValid()},updateErrors:function(){return this.getColorPicker()&&!this.getColorPicker().updateErrorStatus()?(this._designer.showProductTab(),void this.getColorPicker().scrollToNodeError(this._designer)):this.getSizePicker()&&!this.getSizePicker().updateErrorStatus(lang("Please choose a size"))?(this._designer.showProductTab(),void this.getSizePicker().scrollToNodeError(this._designer)):this.getLayerPicker()&&!this.getLayerPicker().checkProductOptionsStatus()?(this._designer.showDesignTab(),void this.getLayerPicker().getProductOptionsPicker().scrollToNodeError(this._designer)):this.getLayerPicker()&&!this.getLayerPicker().updateErrorStatus()?(this._designer.showDesignTab(),this.getLayerPicker().showError(),void this.getLayerPicker().scrollToNodeError(this._designer)):this.getProductOptionsPicker()&&!this.getProductOptionsPicker().updateErrorStatus()?(this._designer.showProductTab(),void this.getProductOptionsPicker().scrollToNodeError(this._designer)):!this._designer.isFilePickerDisabled()||this.getDesignData().hasTextLayers()||this.getDesignData().hasClipartLayers()?void(this.hasOnlyInsideOrOutsideLabelOrHangTagOrBackground()&&this._designer.gotoFirstPlacementAndDisplayNoRealDesignMsg()):(this._designer.showDesignTab(),void this._designer.getLayerPicker().showError())},setFileTypesWithFiles:function(e){if(!this._designer)return[];this._designer.getProductOptionsPicker().setFileTypesWithFiles(e)},_getDesignerLayerState:function(e,t){var i=new h.a,n=new p.a;return n.generatorDesignId=t,e.filter((function(e){return e.exists()&&!e.isMockup()})).forEach((function(e){n.addPlacementFileLayer(e.type,i.getCachedFile(e.fileId),e.position)})),n},_onDesignerReady:function(){this.isReady=!0},_onDesignerDisabled:function(){this.isReady=!1},_onActiveDesignerTabChanged:function(e){var t=document.getElementById("js--back-to-catalog-link");t&&(e===g.a.TAB_3D?(u.a.removeClassName(t,"pf-d-inline-block"),u.a.addClassName(t,"pf-d-none")):(u.a.removeClassName(t,"pf-d-none"),u.a.addClassName(t,"pf-d-inline-block")))},_getPlacementIdsWithDesign:function(){return this.getDesignData().getPlacementIdsWithDesign()},getItemFilePosition:function(e,t){return this._designer.getPlacementFilePosition(e,t)},_hasValidFiles:function(){return!this._par.isDesignerSupported||!this.hasOnlyInsideOrOutsideLabelOrHangTagOrBackground()},getGeneratorParams:function(){return this._designer.getGeneratorParams()}},u.a.Base);(globalThis||{}).PFVariantPickerDesigner=b;var P=i("rFrQ"),C=i("6t3j"),T=i("Q1Td"),w=i("o0qH"),I=i("oclZ"),S=i("uGFp"),E=i("UzRV"),O=i("EqHI"),k=i("gWUq"),L=i("ehgC"),A=i("X5Ic"),R=i("qs6/"),N=i("y70k"),D=i("0Dko"),x=i("0YfL"),F=i("+4EM"),M=i("qqZP"),B=i("+I3z"),V=i("SBaP"),j=i("mrkb"),U=i("9eNC"),z=i("8qnk"),G=i("bvdp"),H=i("nrfP"),q=i("2+Fj");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return K(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return K(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Z(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function X(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Z(a,n,r,o,s,"next",e)}function s(e){Z(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ne(e);if(t){var r=ne(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return te(this,i)}}function te(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ne(e){return(ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function re(e,t,i){return function(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}(e,t),function(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}(i,"get"),se(e,i)}function ae(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function oe(e,t){return se(e,ce(e,t,"get"))}function se(e,t){return t.get?t.get.call(e):t.value}function le(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ce(e,t,"set"),i),i}function ce(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var ue=new WeakMap,de=new WeakMap,he=new WeakMap,pe=new WeakMap,fe=new WeakMap,ge=new WeakMap,me=new WeakMap,_e=new WeakMap,ve=new WeakMap,ye=new WeakMap,be=new WeakMap,Pe=new WeakMap,Ce=new WeakMap,Te=new WeakMap,we=new WeakMap,Ie=new WeakMap,Se=new WeakMap,Ee=new WeakMap,Oe=new WeakMap,ke=new WeakMap,Le=new WeakSet,Ae=new WeakSet,Re=new WeakSet,Ne=new WeakSet,De=new WeakSet,xe=new WeakSet,Fe=new WeakSet,Me=new WeakSet,Be=new WeakSet,Ve=new WeakSet,je=new WeakSet,Ue=new WeakSet,ze=new WeakSet,Ge=new WeakSet,He=new WeakSet,qe=new WeakSet,Ye=new WeakSet,We=new WeakSet,Ke=new WeakSet,Ze=new WeakSet,Xe=new WeakSet,Qe=new WeakSet,$e=new WeakSet,Je=new WeakSet,et=new WeakSet,tt=new WeakSet,it=new WeakSet,nt=new WeakSet,rt=new WeakSet,at=new WeakSet,ot=new WeakSet,st=new WeakSet,lt=new WeakSet,ct=new WeakSet,ut=new WeakSet,dt=new WeakSet,ht=new WeakSet,pt=new WeakSet,ft=new WeakSet,gt=new WeakSet,mt=new WeakSet,_t=new WeakSet,vt=new WeakSet,yt=new WeakSet,bt=new WeakSet,Pt=new WeakSet,Ct=new WeakSet,Tt=new WeakSet,wt=new WeakSet,It=new WeakSet,St=new WeakSet,Et=new WeakSet,Ot=new WeakSet,kt=new WeakSet,Lt=new WeakSet,At=new WeakSet,Rt=new WeakSet,Nt=new WeakSet,Dt=new WeakSet,xt=new WeakSet,Ft=new WeakSet,Mt=new WeakSet,Bt=new WeakSet,Vt=new WeakSet,jt=new WeakSet,Ut=new WeakSet,zt=new WeakSet,Gt=new WeakSet,Ht=new WeakSet,qt=new WeakSet,Yt=new WeakSet,Wt=new WeakSet,Kt=new WeakSet,Zt=new WeakSet,Xt=new WeakSet,Qt=new WeakSet,$t=new WeakSet,Jt=new WeakSet,ei=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,i,n,r=ee(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=r.call(this),Jt.add(ie(t)),$t.add(ie(t)),Qt.add(ie(t)),Xt.add(ie(t)),Zt.add(ie(t)),Kt.add(ie(t)),Wt.add(ie(t)),Yt.add(ie(t)),qt.add(ie(t)),Ht.add(ie(t)),Gt.add(ie(t)),zt.add(ie(t)),Ut.add(ie(t)),jt.add(ie(t)),Vt.add(ie(t)),Bt.add(ie(t)),Mt.add(ie(t)),Ft.add(ie(t)),xt.add(ie(t)),Dt.add(ie(t)),Nt.add(ie(t)),Rt.add(ie(t)),At.add(ie(t)),Lt.add(ie(t)),kt.add(ie(t)),Ot.add(ie(t)),Et.add(ie(t)),St.add(ie(t)),It.add(ie(t)),wt.add(ie(t)),Tt.add(ie(t)),Ct.add(ie(t)),Pt.add(ie(t)),bt.add(ie(t)),yt.add(ie(t)),vt.add(ie(t)),_t.add(ie(t)),mt.add(ie(t)),gt.add(ie(t)),ft.add(ie(t)),pt.add(ie(t)),ht.add(ie(t)),dt.add(ie(t)),ut.add(ie(t)),ct.add(ie(t)),lt.add(ie(t)),st.add(ie(t)),ot.add(ie(t)),at.add(ie(t)),rt.add(ie(t)),nt.add(ie(t)),it.add(ie(t)),tt.add(ie(t)),et.add(ie(t)),Je.add(ie(t)),$e.add(ie(t)),Qe.add(ie(t)),Xe.add(ie(t)),Ze.add(ie(t)),Ke.add(ie(t)),We.add(ie(t)),Ye.add(ie(t)),qe.add(ie(t)),He.add(ie(t)),Ge.add(ie(t)),ze.add(ie(t)),Ue.add(ie(t)),je.add(ie(t)),Ve.add(ie(t)),Be.add(ie(t)),Me.add(ie(t)),Fe.add(ie(t)),xe.add(ie(t)),De.add(ie(t)),Ne.add(ie(t)),Re.add(ie(t)),Ae.add(ie(t)),Le.add(ie(t)),ue.set(ie(t),{writable:!0,value:null}),de.set(ie(t),{writable:!0,value:null}),he.set(ie(t),{writable:!0,value:[]}),pe.set(ie(t),{writable:!0,value:null}),fe.set(ie(t),{writable:!0,value:null}),ge.set(ie(t),{writable:!0,value:null}),me.set(ie(t),{writable:!0,value:null}),_e.set(ie(t),{writable:!0,value:!1}),ve.set(ie(t),{writable:!0,value:null}),ye.set(ie(t),{writable:!0,value:null}),be.set(ie(t),{writable:!0,value:null}),Pe.set(ie(t),{writable:!0,value:null}),Ce.set(ie(t),{writable:!0,value:!0}),Te.set(ie(t),{writable:!0,value:[]}),we.set(ie(t),{writable:!0,value:""}),Ie.set(ie(t),{writable:!0,value:void 0}),Se.set(ie(t),{writable:!0,value:null}),Ee.set(ie(t),{writable:!0,value:null}),Oe.set(ie(t),{writable:!0,value:null}),ke.set(ie(t),{writable:!0,value:!1}),le(ie(t),me,e),le(ie(t),Pe,new s),oe(ie(t),me).skipMemory&&oe(ie(t),Pe).forget(),le(ie(t),ue,new C.a),oe(ie(t),ue).setCurrency(oe(ie(t),me).currency),oe(ie(t),ue).setStoreId(oe(ie(t),me).storeId),t.node=tag("div","variant-picker"),ae(ie(t),Le,ti).call(ie(t),{minHeight:400});var i=new T.a,n=oe(ie(t),me).productId||oe(ie(t),me).orderLineItem.productId,o=oe(ie(t),me).orderLineItem.technique||Object(w.a)(n).getTechniqueFromMemory();le(ie(t),ke,oe(ie(t),me).lastProductTechnique&&oe(ie(t),me).lastProductTechnique!==o);var l,c=oe(ie(t),me).productId!==oe(ie(t),me).orderLineItem.productId||oe(ie(t),me).lastProductId&&oe(ie(t),me).lastProductId!==oe(ie(t),me).productId||oe(ie(t),ke);ae(ie(t),Zt,wn).call(ie(t))&&(l=oe(ie(t),me).orderLineItem.designId?oe(ie(t),me).orderLineItem.designId:oe(ie(t),Pe).getGeneratorDesignId());var u=p.a.initialize(oe(ie(t),me).orderLineItem.itemFiles,l);return oe(ie(t),Pe).forgetDesignData(),oe(ie(t),me).productTemplateEditorState&&(o=null),i.loadGeneratorProduct({productId:n,productChanged:c,flow:oe(ie(t),me).flow,currency:oe(ie(t),me).currency,storeId:oe(ie(t),me).storeId,generatorDesignId:l,isProductPushMode:oe(ie(t),me).isVariantSyncFlow,isOrderFlowMode:!0,designerState:u,productTemplateEditorState:oe(ie(t),me).productTemplateEditorState,technique:o,variantCallback:ae(ie(t),je,pi).bind(ie(t)),hasExtraGeneratorVariants:!1}),t}return t=a,(i=[{key:"getDesigner",value:function(){return oe(this,be)}},{key:"getPushDesigner",value:function(){var e;return null===(e=oe(this,be))||void 0===e?void 0:e.getPushDesigner()}},{key:"getFooter",value:function(){return oe(this,Ie)}},{key:"getDynamicStickyFooter",value:function(){var e;return null===(e=this.getPushDesigner())||void 0===e?void 0:e.getDynamicStickyFooter()}},{key:"triggerContinueClick",value:function(){ae(this,_t,qi).call(this)}}])&&Q(t.prototype,i),n&&Q(t,n),a}(V.a);function ti(e){oe(this,me).onLoaderToggle?oe(this,me).onLoaderToggle(this.node,e,!0):c.a.show(this.node,e)}function ii(){oe(this,me).onLoaderToggle?oe(this,me).onLoaderToggle(this.node,null,!1):c.a.hide(this.node)}function ni(){return ri.apply(this,arguments)}function ri(){return(ri=X(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ae(this,Ae,ii).call(this),u.a.clearNode(this.node),e.t0=tag,e.t1=le,e.t2=this,e.t3=be,e.next=8,ae(this,Ne,ai).call(this);case 8:e.t4=e.sent,e.t5=(0,e.t1)(e.t2,e.t3,e.t4),e.t6=[e.t5],(0,e.t0)("div","variant-picker__body",e.t6).append(this.node),t=oe(this,pe).map((function(e){return e.exists()?e.type:null})).filter((function(e){return!!e})),oe(this,be).setFileTypesWithFiles(t),oe(this,me).selectedSize&&oe(this,me).productTemplateEditorState&&oe(this,be).getPushDesigner().setSizes([oe(this,me).selectedSize]),oe(this,me).selectedColor&&oe(this,me).productTemplateEditorState&&((i=new F.a).color=oe(this,me).selectedColor,oe(this,be).getPushDesigner().setColors([i]),oe(this,be).getPushDesigner().lastSelectedColor=oe(this,me).selectedColor),ae(this,De,si).call(this),ae(this,Wt,Cn).call(this);case 18:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ai(){return oi.apply(this,arguments)}function oi(){return(oi=X(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=new l).store=L.a.fromArray({storeId:oe(this,me).storeId}),t.product=Object(y.a)(),t.itemFiles=oe(this,pe),t.isProductPushMode=oe(this,me).isVariantSyncFlow,t.generatorDesignId=oe(this,me).orderLineItem.designId,t.orderLineItem=oe(this,me).orderLineItem,t.enableCustomizableLayers=oe(this,me).enableCustomizableLayers,t.pickerConfig=ae(this,xe,li).call(this),t.isDesignerSupported=oe(this,_e),t.isModalDesigner=oe(this,me).isModalDesigner,t.productTemplateEditorState=oe(this,me).productTemplateEditorState,t.generatorParameters=oe(this,me).generatorParameters,t.onLoaderToggle=oe(this,me).onLoaderToggle,t.onProductLoaded=oe(this,me).onProductLoaded,t.onFooterVisibilityChange=oe(this,me).onFooterVisibilityChange,t.productChanged=!!oe(this,me).lastProductId&&oe(this,me).lastProductId!==oe(this,me).productId,"order_flow"===oe(this,me).flow&&ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Designer pop-up appeared - signed-in users":"Designer pop-up appeared - anonymous users"}),ae(this,Zt,wn).call(this)&&(t.generatorDesignId=oe(this,me).orderLineItem.designId?oe(this,me).orderLineItem.designId:oe(this,Pe).getGeneratorDesignId()),i=new b(t),e.next=22,i.getPushDesigner().waitInitialRender();case 22:return i.getObserver().onDesignerReady(ae(this,Ge,mi).bind(this)).onRegionChanged(ae(this,Ye,yi).bind(this)).onMockupReady(ae(this,it,Li).bind(this)).onMockupReady(ae(this,Rt,sn).bind(this)).onAfterSizesChanged(ae(this,He,_i).bind(this)).onAfterColorsChanged(ae(this,qe,vi).bind(this)).onProductOptionsChanged(ae(this,We,bi).bind(this)).onPlacementPositionsChanged(I.a.delay.bind(this,"layerPositionsChanged",ae(this,Rt,sn).bind(this))).onPlacementLayersChanged(ae(this,st,xi).bind(this)).onEmbroideryNotesChanged(ae(this,Nt,ln).bind(this)).onDesignFillChanged(ae(this,lt,Fi).bind(this)),e.abrupt("return",i);case 24:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function si(){var e,t,i;(le(this,Ie,new P.a(oe(this,me),ae(this,_t,qi).bind(this))),null===(e=this.getDynamicStickyFooter())||void 0===e||e.setSecondFooter(oe(this,Ie)),oe(this,me).setModalFooterContentCallback)&&(oe(this,me).setModalFooterContentCallback(oe(this,Ie)),null===(i=this.getDynamicStickyFooter())||void 0===i||i.setSecondFooter(oe(this,Ie)));null!==(t=Object(y.a)())&&void 0!==t&&t.isTemporaryOutOfStock&&(oe(this,Ie).setError(P.a.PRODUCT_OUT_OF_STOCK),oe(this,Ie).disableContinue())}function li(){return(new n.a).setSizeConfig(new n.a.ConfigBlueprint(1,ae(this,nt,Ai).call(this,"size"),!0)).setColorConfig(new n.a.ConfigBlueprint(1,ae(this,nt,Ai).call(this,"color"),!0)).setOptionsValues(ae(this,Me,ui).call(this)).setPlacementPrices(ae(this,Be,di).call(this)).setSampleOrderStatus(oe(this,me).isSampleOrder).setFileTags(ae(this,Fe,ci).call(this),oe(this,ye)).setActiveRegion(oe(this,we)||oe(this,ue).getLastActiveRegion()||oe(this,Pe).getRegion())}function ci(){var e={};return oe(this,pe).forEach((function(t){e[t.type]=t.group})),e}function ui(){var e={};return u.a.O2O(e,oe(this,me).orderLineItem.options),e}function di(){var e=this,t=new r.c;return oe(this,pe).forEach((function(i){t.add(i.price,ae(e,Ve,hi).call(e,i.type),i.type,i.discountedPrice,i.priceData)})),t}function hi(e){var t,i;if(!oe(this,Te).length)return null===(i=Object(y.a)())||void 0===i?void 0:i.type;var n=oe(this,Te).filter((function(t){return t.id===e})).slice().shift();return n?n.technique:null===(t=Object(y.a)())||void 0===t?void 0:t.type}function pi(e,t,i,n,s){if(Object(j.j)(),Object(y.e)(e),le(this,he,t),le(this,pe,i),le(this,fe,new a.a(t)),le(this,ge,new o.a(e.availableSampleVariants,t)),le(this,_e,s.isGeneratorAvailable),le(this,Te,n),le(this,ve,new r.b(e,ae(this,Be,di).call(this))),le(this,ye,s.fileTags),oe(this,Pe).rememberOptions(oe(this,me).orderLineItem.options),oe(this,ue).setLastActiveRegion(s.regions.selectedRegions[0]),oe(this,me).orderLineItem.design)try{var l,c,u=null===(l=window)||void 0===l||null===(c=l.localStorage)||void 0===c?void 0:c.getItem(re(ei,ei,kn).call(ei,oe(this,me).orderLineItem.design.designId));u&&le(this,we,u)}catch(e){}ae(this,Ue,fi).call(this),ae(this,Re,ni).call(this)}function fi(){var e,t=!oe(this,me).orderLineItem.hasAnyFile()&&!oe(this,ke),i=oe(this,me).orderLineItem.getProduct(!0);if(ae(this,Yt,Pn).call(this,null===(e=Object(y.a)())||void 0===e?void 0:e.categoryIds,(null==i?void 0:i.categoryIds)||[]))for(var n in oe(this,pe)){var r=oe(this,pe)[n],a=oe(this,me).orderLineItem.itemFiles;if(!ae(this,ze,gi).call(this,r.type))if(oe(this,ke)||a&&0!==a.length)for(var o in a){var s=a[o];s.type===r.type&&(t?(r.fileId=oe(this,Pe).getFileIdForType(r.type),r.position=oe(this,Pe).getPositionsForType(r.type)):(r.fileId=s.fileId,r.position=s.position))}else r.fileId=oe(this,Pe).getFileIdForType(r.type),r.position=oe(this,Pe).getPositionsForType(r.type)}}function gi(e){for(var t in oe(this,pe))if(oe(this,pe)[t].willConflictWith(e))return!0;return!1}function mi(){oe(this,be).isReady=!0,oe(this,Ce)&&oe(this,me).orderLineItem.hasPrintFiles()&&oe(this,Pe).rememberDesignData(oe(this,be).getDesignData().toArray()),ae(this,Ye,yi).call(this),ae(this,Kt,Tn).call(this),oe(this,me).activePlacementId&&this.getPushDesigner().setActivePlacement(oe(this,me).activePlacementId),ae(this,ut,Bi).call(this),le(this,Ce,!1),oe(this,me).onDesignerLoaded&&oe(this,me).onDesignerLoaded(),setTimeout(ae(this,dt,Vi).bind(this),0)}function _i(){var e;oe(this,Oe)&&u.a.removeNode(oe(this,Oe)),ae(e=ae(this,Ke,Ci).call(this),it,Li).call(e)}function vi(){var e;ae(e=ae(this,Ze,Ti).call(this),it,Li).call(e)}function yi(){var e,t;return ae(t=ae(e=ae(this,Ke,Ci).call(this),Ze,Ti).call(e),it,Li).call(t),(new C.a).setLastActiveRegion(oe(this,be).getRegion()),!1}function bi(){return Pi.apply(this,arguments)}function Pi(){return(Pi=X(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,oe(this,be).getPushDesigner().waitInitialRender();case 2:oe(this,be).getLayerPicker().checkProductOptionsStatus(),(t=oe(this,be).getProductOptionsPicker()).isValuePicked()&&t.updateErrorStatus(),ae(this,ct,Mi).call(this);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ci(){if(!oe(this,be).getColorPicker())return this;var e=ae(this,Qe,Ii).call(this);return oe(this,be).getColorPicker().setUnavailableColors(e.unavailable).setDiscontinuedColors(e.discontinued).setDisabledRegionColors(e.regionDisabled).selectAtLeastOneColorAndRender(),this}function Ti(){if(!oe(this,be).getSizePicker())return this;var e=ae(this,et,Oi).call(this);return oe(this,be).getSizePicker().setUnavailableSizes(e.unavailable).setUnavailableSampleSizes(e.unavailableSample).setInactiveSizes(e.regionDisabled).setHiddenSizes(e.inactive).render(),this}function wi(e){var t={color:oe(this,be).getColor(),size:oe(this,be).getSize()},i="size"===e?"color":"size",n=ae(this,$e,Si).call(this).filter((function(e){return!t[i]||t[i]===e[i]})),r=oe(this,he),a=r.filter((function(t){return!n.some((function(i){return t[e]===i[e]}))})),o=n.filter((function(t){return!r.some((function(i){return t[e]===i[e]}))})),s=a.concat(o),l={},c=[];return s.forEach((function(t){l[t[e]]||(c.push(t[e]),l[t[e]]=!0)})),c}function Ii(){var e=oe(this,be).getSize(),t=this.getPushDesigner().allColors.map((function(e){return e.color}));return{unavailable:oe(this,fe).getUnAvailableColors(e),discontinued:oe(this,fe).getDiscontinuedColors(e).concat(oe(this,fe).getNonExistentColors(e,t)),regionDisabled:ae(this,Xe,wi).call(this,"color")}}function Si(){var e=this.getPushDesigner().getSelectedRegionVariants();return e.length||oe(this,_e)?e:oe(this,he)}function Ei(){var e=this;return oe(this,he).filter((function(t){return(t.color||"")===oe(e,be).getColor()})).map((function(e){return e.size}))}function Oi(){var e=oe(this,me).isSampleOrder?oe(this,ge).getUnavailableSampleSizes():[],t=ae(this,mt,Hi).call(this),i=ae(this,Xe,wi).call(this,"size"),n=i.filter((function(e){return-1!==t.indexOf(e)}));return{unavailable:ae(this,gt,Gi).call(this),unavailableSample:e,regionDisabled:i,inactive:[].concat(W(n),W(i),W(e))}}function ki(){var e=oe(this,be).getColor(),t=oe(this,be).getSize(),i=ae(this,$e,Si).call(this);for(var n in i){var r=i[n];if(!r.size&&!t&&e&&r.color===e)return r;if(!r.color&&!e&&t&&r.size===t)return r;if(r.size===t&&r.color===e)return r;if(!(r.size||t||r.color||e))return r;if(!t&&e&&r.color===e)return r}return t||e||!i.length?null:i[0]}function Li(){ae(this,Wt,Cn).call(this),ae(this,ct,Mi).call(this)}function Ai(e){var t=ae(this,rt,Ri).call(this,e);if(t)return t;var i=oe(this,Pe).get(e);return i&&ae(this,at,Ni).call(this,e,i)?i:null}function Ri(e){if(ae(this,ot,Di).call(this,oe(this,me).orderLineItem.variantId)){var t=oe(this,me).orderLineItem.getVariant();return t[e]?t[e]:""}return""}function Ni(e,t){return oe(this,he).some((function(i){return i[e]&&i[e]===t}))}function Di(e){return oe(this,he).some((function(t){return t.variantId===e}))}function xi(){var e=ae(this,Ot,nn).call(this).filter((function(e){return e.exists()})).map((function(e){return e.type}));oe(this,be).setFileTypesWithFiles(e),oe(this,be).getLayerPicker().updateErrorStatus(),ae(this,ct,Mi).call(this),ae(this,Rt,sn).call(this)}function Fi(e){e&&oe(this,Ie).disableContinue(),ae(this,dt,Vi).call(this)}function Mi(){ae(this,ut,Bi).call(this),ae(this,dt,Vi).call(this),oe(this,Pe).remember(this.getPushDesigner().getValuesToRemember())}function Bi(){if(oe(this,be).isReady){var e=this.getPushDesigner();oe(this,ve).setLicensedAssetsPrice(e.getLicensedAssetsPrice()).updatePlacementPrices(ae(this,Be,di).call(this)).setAvailablePlacements(e.getAvailablePlacements()).updatePlacementsWithLayers(oe(this,be).getDesignData().getPlacementIdsWithDesign()),e.updatePlacementPrices(oe(this,ve).getFormattedPlacementPrices())}}function Vi(){var e=this;if(oe(this,Ie))if(document.body.contains(oe(this,Ie).node)){var t=ae(this,ft,zi).call(this);oe(this,me).onPriceUpdate&&oe(this,me).onPriceUpdate(t),oe(this,Ie).setPrice(t),ae(this,pt,Ui).call(this)?(oe(this,Ie).setError(""),oe(this,Ie).enableContinue()):(ae(this,ht,ji).call(this),oe(this,Ie).disableContinue())}else setTimeout((function(){ae(e,De,si).call(e),ae(e,dt,Vi).call(e)}),200)}function ji(){oe(this,Ie).setError(ae(this,tt,ki).call(this)?"":lang("This variant is not stocked in the selected regions"))}function Ui(){var e;return ae(this,tt,ki).call(this)&&oe(this,be).canContinue()&&oe(this,de)&&!oe(this,fe).isVariantDiscontinued(oe(this,de))&&oe(this,de)&&ae(this,Xt,In).call(this)&&oe(this,de)&&!oe(this,de).isTemporaryOutOfStock&&!(null!==(e=Object(y.a)())&&void 0!==e&&e.isTemporaryOutOfStock)}function zi(){var e,t=ae(this,tt,ki).call(this);if(!t)return new R.a;var i=R.a.fromArray(t.priceData),n=oe(this,ve).getTotal(t)+oe(this,be).getExtraPrice(),r=n-t.priceData.price,a=oe(this,ve).getTotal(t,!0)+oe(this,be).getExtraPrice()-t.priceData.discountedPrice;return a>0&&(i.discountType=R.a.DISCOUNT_TYPE_CUSTOM),i.price=n,i.originalPrice=t.priceData.originalPrice+r,i.discountedPrice=t.priceData.discountedPrice+a,i.bulkDiscountTiers=null===(e=Object(y.a)())||void 0===e?void 0:e.priceRange.bulkDiscountTiers,i}function Gi(){var e=oe(this,be).getColor(),t=this.getPushDesigner().allColors||[],i=W(this.getPushDesigner().allSizes||[]);if(!e&&t.length>0)return[];var n=oe(this,fe).getUnavailableSizes(e,i),r=ae(this,Je,Ei).call(this);return i.filter((function(e){return-1===r.indexOf(e)})).concat(n)}function Hi(){var e=ae(this,Xe,wi).call(this,"color"),t=[];for(var i in e)e[i]===oe(this,be).getColor()&&(t=t.concat(ae(this,Je,Ei).call(this)));return t}function qi(){if(!oe(this,Ie).isContinueJsEventDisabled()){if(oe(this,Ie).isContinueButtonDisable()||"order_flow"!==oe(this,me).flow||G.a.trackClickedOnContinueInPopup(oe(this,be)),oe(this,Ie).disableContinueJsEvent(),!ae(this,pt,Ui).call(this)||!oe(this,be).hasValidProductOptions())return oe(this,be).updateErrors(),ae(this,Nt,ln).call(this),void oe(this,Ie).enableContinueJsEvent();if(!this.getPushDesigner()._productOptionsPicker.getValues().stitch_color&&q.a.OPTION_STITCH_COLOR in this.getPushDesigner()._productOptionsPicker.getValues())return new H.a,void oe(this,Ie).enableContinueJsEvent();var e=this.getPushDesigner().getMissingUploadPrintFiles();if(e.length)return new E.a(e,ae(this,vt,Yi).bind(this)),void oe(this,Ie).enableContinueJsEvent();ae(this,vt,Yi).call(this)}}function Yi(){var e,t,i;if(oe(this,me).orderLineItem.design&&window.localStorage&&window.localStorage.setItem(re(ei,ei,kn).call(ei,oe(this,me).orderLineItem.design.designId),oe(this,be).getRegion()),null===(e=this.getPushDesigner())||void 0===e||e.trackTransparencyWarningContinueClick(),null===(t=this.getPushDesigner())||void 0===t||null===(i=t._mockup)||void 0===i||i.applyCropIfNeeded(),oe(this,Ie).disableContinue(),oe(this,Ie).disableContinueJsEvent(),ae(this,Dt,cn).call(this)){oe(this,me).orderLineItem.design&&oe(this,me).orderLineItem.design.forgetSvgItems();var n=oe(this,be).getFilesTypesToGenerate(!oe(this,me).isVariantSyncFlow);return ae(this,Et,tn).call(this,n),void ae(this,Mt,hn).call(this,n)}var r=ae(this,Pt,Zi).call(this);r?ae(this,bt,Ki).call(this,r,ae(this,Tt,Qi).bind(this)):oe(this,me).isVariantSyncFlow&&ae(this,xt,un).call(this)?ae(this,Ft,dn).call(this,ae(this,Tt,Qi).bind(this)):ae(this,Tt,Qi).call(this)}function Wi(e){return e.isInsideLabel()&&(e.insideLabelTemplate||oe(this,me).orderLineItem.designData&&oe(this,me).orderLineItem.designData.hasLabelNative())}function Ki(e,t){x.a.getInsideLabelTemplate(oe(this,de).variantId,e.nativeInsideLabelItemFileId,ae(this,Ct,Xi).bind(this,t),e.insideLabelTemplateId,e.position)}function Zi(){var e,t,i,n=oe(this,be).getDesignData();if(n.labelTemplateType!==O.a.LABEL_NATIVE)return!1;for(var r in oe(this,pe))if(oe(this,pe)[r].isInsideLabel()&&oe(this,pe)[r].fileId){if(oe(this,pe)[r].insideLabelTemplate)return!1;e=oe(this,pe)[r].fileId,i=oe(this,pe)[r].position;break}var a=n.generatorVariants;for(var o in a)if(a[o].isInsideLabel()){if(!a[o].templateType===O.a.LABEL_NATIVE)return!1;t=a[o].templateId}return{nativeInsideLabelItemFileId:e,insideLabelTemplateId:t,position:i}}function Xi(e,t){if(t)for(var i in oe(this,pe))oe(this,pe)[i].type===m.a.TYPE_LABEL_INSIDE&&(oe(this,pe)[i].insideLabelTemplate=t);e()}function Qi(){ae(this,It,Ji).call(this),oe(this,me).callback&&oe(this,me).callback(oe(this,me).orderLineItem,oe(this,me).externalId,!0)}function $i(){var e;if(ae(this,jt,gn).call(this),ae(this,It,Ji).call(this),null!==(e=oe(this,me).orderLineItem)&&void 0!==e&&e.design)try{var t,i;null===(t=window)||void 0===t||null===(i=t.localStorage)||void 0===i||i.setItem(re(ei,ei,kn).call(ei,oe(this,me).orderLineItem.design.designId),oe(this,be).getRegion())}catch(e){}oe(this,me).callback&&oe(this,me).callback(oe(this,me).orderLineItem,oe(this,me).externalId,!1),PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()||U.i.emit(z.a.EVENT_ITEM_GENERATED)}function Ji(){var e=ae(this,tt,ki).call(this),t=ae(this,Lt,an).call(this);for(var i in t)oe(this,Pe).rememberItemFile(t[i]);oe(this,me).orderLineItem.variantId=e.variantId,oe(this,me).orderLineItem.productId=e.productId,oe(this,me).orderLineItem.itemFiles=t,oe(this,me).orderLineItem.options=oe(this,be).getProductOptions(),oe(this,me).orderLineItem.designData=oe(this,be).getDesignData(),oe(this,me).orderLineItem.technique=oe(this,be).getTechnique(),oe(this,me).orderLineItem.shouldCreateNewDesign&&(oe(this,me).orderLineItem.designId=null,oe(this,me).orderLineItem.shouldCreateNewDesign=!1);var n=ae(this,ft,zi).call(this);oe(this,me).orderLineItem.priceData=n,oe(this,me).orderLineItem.price=n.price,oe(this,me).orderLineItem.unavailableInSelectedBranches=!ae(this,St,en).call(this,e.productId,e.variantId),delete oe(this,me).orderLineItem.fileTypesBeingGenerated}function en(e,t){var i=oe(this,ue).getCachedProductVariantRegions(e);if(!i)return!0;if(0===i.selectedRegions.length)return!0;for(var n in i.selectedRegions){var r=i.selectedRegions[n];if(i.variantsByRegion[r]&&-1!==i.variantsByRegion[r].indexOf(t))return!0}return!1}function tn(e){ae(this,It,Ji).call(this),oe(this,me).orderLineItem.fileTypesBeingGenerated=e,oe(this,me).orderLineItem.isGeneratingFilesFromDesign=!0;var t=k.a.fromDesignData(oe(this,be).getDesignData());oe(this,me).orderLineItem.design&&!oe(this,me).orderLineItem.isCopy&&(t.designId=oe(this,me).orderLineItem.design.designId),ae(this,qt,bn).call(this,t),oe(this,me).callbackWithGeneratingFiles&&oe(this,me).callbackWithGeneratingFiles(oe(this,me).orderLineItem)}function nn(){var e=this,t=oe(this,be).getDesignData().filesIdsByPlacement||[],i=oe(this,be).getDesignData().getPlacementIdsWithDesign();return oe(this,me).isVariantSyncFlow?ae(this,kt,rn).call(this,t,i,oe(this,pe).slice()):oe(this,pe).slice().map((function(n){if(-1===i.indexOf(n.type)&&!n.isMockup()&&!e.getPushDesigner().hasDesignFill(n.type))return n.fileId=0,n.position=null,n;if(e.getPushDesigner().hasDesignFill(n.type)&&0===n.fileId&&(n.fileId=N.a.ID_TEMP_GENERATOR_FILE),ae(e,yt,Wi).call(e,n)?n.options={templateType:O.a.LABEL_NATIVE}:n.isInsideLabel()&&(n.options={templateType:O.a.LABEL_CUSTOM}),n.isMockup()||ae(e,yt,Wi).call(e,n)||!oe(e,be).hasDesignChanged(n.type)||oe(e,me).isVariantSyncFlow)return n;if(!e.getPushDesigner().hasDesignForPlacement(n.type))return n.fileId=0,n.position=null,n;var r=e.getPushDesigner().isPlacementSimple(n.type);return r||oe(e,me).isVariantSyncFlow||!n.isEmbroideryFile()?(t[n.type]&&r&&(n.fileId=t[n.type].slice().shift()),n.position=oe(e,be).getItemFilePosition(n.type,n.fileId),n):(n.fileId=N.a.ID_TEMP_GENERATOR_FILE,n.position=null,n)}))}function rn(e,t,i){var n=this,r=oe(this,be).isDesignSimple();return i.map((function(i){var a=e[i.type];if(-1===t.indexOf(i.type)&&!i.isMockup()||!1===oe(n,Ee)&&(!a||!a.length||!r))return i.fileId=0,i.position=null,i.options=null,i;if(ae(n,yt,Wi).call(n,i)?i.options={templateType:O.a.LABEL_NATIVE}:i.isInsideLabel()&&(i.options={templateType:O.a.LABEL_CUSTOM}),!1!==oe(n,Ee)&&(!n.getPushDesigner().isPlacementSimple(i.type)||!a||a.length>1))return i.position=oe(n,be).getDefaultPlacementPosition(i.type),i;var o=[].concat(a).shift();return i.fileId=o,i.position=oe(n,be).getItemFilePosition(i.type,o),i}))}function an(){var e=this;return ae(this,Ot,nn).call(this).filter((function(t){return ae(e,At,on).call(e,t)}))}function on(e){var t;if(e.isMockup())return!0;var i=oe(this,be).getTechnique(),n=((null===(t=Object(y.a)())||void 0===t?void 0:t.availableTechniques)||[]).slice();return oe(this,Te).some((function(t){return t.id===e.type&&(t.technique===i||n.indexOf(t.technique)>-1)||(i===A.a.TYPE_SCREENPRINT&&t.technique===A.a.TYPE_T_SHIRT||t.technique===A.a.TECHNIQUE_HANG_TAG)}))}function sn(){ae(this,Nt,ln).call(this)}function ln(){var e;if(oe(this,Ie).setError(""),null!==(e=Object(y.a)())&&void 0!==e&&e.isTemporaryOutOfStock)return oe(this,Ie).setError(P.a.PRODUCT_OUT_OF_STOCK),void oe(this,Ie).disableContinue();if(this.getPushDesigner().hasLayersPositionError())return oe(this,Ie).setError(P.a.LAYER_OUT_OF_BOUNDS),void oe(this,Ie).disableContinue();if(this.getPushDesigner().hasLayersOverlapError())return oe(this,Ie).setError(P.a.ENGRAVING_LAYERS_OVERLAPPING),void oe(this,Ie).disableContinue();if(this.getPushDesigner().hasTextSizeError())return oe(this,Ie).setError(P.a.LAYER_TEXT_TOO_SMALL),void oe(this,Ie).disableContinue();if(this.getPushDesigner().hasClipartSizeError())return oe(this,Ie).setError(P.a.LAYER_CLIPART_TOO_SMALL),void oe(this,Ie).disableContinue();if(oe(this,be).hasValidSize()&&oe(this,be).hasValidColor()){if(ae(this,Qt,Sn).call(this))return oe(this,Ie).disableContinue(),void oe(this,Ie).disableContinueJsEvent();var t=this.getPushDesigner().exceededTextLayerCharacterLimit();return t?(oe(this,Ie).setError(P.a.TEXT_TOO_LONG.replace("{limit}",t)),void oe(this,Ie).disableContinue()):this.getPushDesigner().areEmbroideryThreadColorsValid()?this.getPushDesigner().hasEmbroideryNotesError()?(oe(this,Ie).setError(P.a.EMBROIDERY_NOTES_MISSING),void oe(this,Ie).disableContinue()):void ae(this,dt,Vi).call(this):(oe(this,Ie).setError(P.a.EMBROIDERY_THREAD_COLOR_LIMIT.replace("{limit}",D.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS)),void oe(this,Ie).disableContinue())}}function cn(){var e=ae(this,tt,ki).call(this);return!!oe(this,_e)&&(e&&oe(this,me).orderLineItem.variantId!==e.variantId||oe(this,me).orderLineItem.shouldCreateNewDesign||oe(this,be).haveProductOptionsChanged(oe(this,me).orderLineItem.options)||oe(this,be).hasDesignChanged())}function un(){var e=this.getPushDesigner().getDesignData().hasCustomizableLayers(),t=oe(this,Pe).getDesignData(),i=new S.a;return i.templates=t.templates,e!==i.hasCustomizableLayers()}function dn(e){ae(this,Le,ti).call(this);var t=oe(this,be).getDesignData();t.generatorDesignId=oe(this,me).orderLineItem.designId,(new T.a).updateCustomizer(t,e)}function hn(e){var t=oe(this,be).getDesignData();t.arePrintfilesHidden=!0,t.orderId=oe(this,me).orderLineItem.orderId,t.itemUniqueId=oe(this,me).isLandingPage?null:oe(this,me).orderLineItem.uniqueId,oe(this,Pe).rememberDesignData(t.toArray({forRpc:!0})),oe(this,me).isVariantSyncFlow||oe(this,me).orderLineItem.shouldCreateNewDesign||(t.generatorDesignId=oe(this,me).orderLineItem.designId),(new T.a).generateLibraryFiles(t,e,!1,oe(this,me).isVariantSyncFlow,!0,{onStarted:ae(this,Bt,pn).bind(this),onProgress:ae(this,Ut,mn).bind(this),onFailed:ae(this,zt,_n).bind(this),onCompleted:ae(this,Ht,yn).bind(this)}),le(this,Se,setTimeout(ae(this,Gt,vn).bind(this),1e5))}function pn(e,t,i,n,r){ae(this,Vt,fn).call(this),i&&(oe(this,me).orderLineItem.design=k.a.fromDesignData(oe(this,be).getDesignData(),i),oe(this,me).orderLineItem.designId=i,oe(this,me).orderLineItem.shouldCreateNewDesign=!1,oe(this,me).orderLineItem.uniqueId=r,oe(this,me).orderLineItem.isCopy=!1,oe(this,pe).forEach((function(e){n[e.type]&&(e.fileId=n[e.type].fileId,e.group=n[e.type].fileGroup,e.position=null,(new h.a).cacheFile(N.a.fromArray(e)))})),oe(this,Pe).rememberGeneratorDesignId(i),oe(this,me).onGeneratorDesignIdChanged&&oe(this,me).onGeneratorDesignIdChanged(i),oe(this,me).onFileGenerationStartedSaveAndRenderCallback&&oe(this,me).onFileGenerationStartedSaveAndRenderCallback(!0),oe(this,me).onFileGenerationStartedForVariantCallback&&oe(this,me).onFileGenerationStartedForVariantCallback(oe(this,me).orderLineItem))}function fn(){this.node.style.pointerEvents="none"}function gn(){this.node.style.pointerEvents="auto"}function mn(e){}function _n(){clearTimeout(oe(this,Se)),oe(this,me).orderLineItem.isGeneratingFilesFromDesign=!1,le(this,Ee,!1),oe(this,Pe).forgetDesignData(),ae(this,wt,$i).call(this)}function vn(){ae(this,zt,_n).call(this)}function yn(e){clearTimeout(oe(this,Se)),oe(this,me).orderLineItem.isGeneratingFilesFromDesign=!1,le(this,Ee,!0);var t=ae(this,Ot,nn).call(this);for(var i in e){var n=e[i];for(var r in n){var a=n[r];for(var o in t){var s=t[o];if(s.type===i){var l=s.getClone();l.fileErrors=[],l.fileStatus=l.isMockup()?m.a.STATUS_UNKNOWN:m.a.STATUS_OK,l.fileId=a.fileId,l.group=a.group,l.position=null,ae(this,Jt,On).call(this,l,a),t[o]=l}}}}le(this,pe,[].concat(t));var c=ae(this,Pt,Zi).call(this);c?ae(this,bt,Ki).call(this,c,ae(this,wt,$i).bind(this)):ae(this,wt,$i).call(this)}function bn(e){oe(this,me).orderLineItem.design=e}function Pn(e,t){for(var i in e)if(t.indexOf(e[i])<0)return!1;return!0}function Cn(){var e,t;le(this,de,ae(this,tt,ki).call(this)),ae(t=ae(e=ae(this,Ke,Ci).call(this),Ze,Ti).call(e),$t,En).call(t)}function Tn(){le(this,Oe,oe(this,me).detailedPicker&&!oe(this,be).hasValidSize()?tag("div",{className:"tooltip face bottom in",prop:{role:"tooltip"},style:{left:"100px"}},[tag("div",{className:"tooltip-arrow",style:{left:"50%"}}),tag("div","tooltip-inner",lang("Choose size"))]).append(oe(this,be).getSizePicker().node):"")}function wn(){var e;if(oe(this,me).orderLineItem.shouldCreateNewDesign||oe(this,ke))return!1;var t=oe(this,Pe).getDesignData();if(!t)return!0;var i=(new C.a).getCachedProductById(t.productId);return!i||i.type===(null===(e=Object(y.a)())||void 0===e?void 0:e.type)}function In(){return!oe(this,me).isSampleOrder||oe(this,ge).isAvailableVariant(oe(this,de))}function Sn(){var e=[];return this.getPushDesigner().hasEmbroideryTextSizeError()&&e.push(P.a.EMBROIDERY_TEXT_TOO_SMALL),this.getPushDesigner().hasEmbroideryTextTooBigError()&&e.push(P.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT),this.getPushDesigner().hasEmbroideryTextOverlapError()&&e.push(P.a.EMBROIDERY_LAYERS_OVERLAPPING),this.getPushDesigner().hasEmbroideryPositionError()&&e.push(P.a.EMBROIDERY_OUT_OF_BOUNDS),this.getPushDesigner().hasNeededQuality()||e.push(P.a.PRINTFILE_TOO_SMALL),(this.getPushDesigner().isFileLimitExceeded(B.a)||this.getPushDesigner().isFileLimitExceeded(M.a))&&e.push(this.getPushDesigner().getFileLimitExceededText()),oe(this,Ie).setError(e),e.length>0}function En(){oe(this,de)&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dynamicRemarketing",ecomm_prodid:oe(this,de).variantId,ecomm_pagetype:"product",ecomm_totalvalue:oe(this,de).price}))}function On(e,t){if(t.containsLicensedAssets){e.isLicensedAsset=t.containsLicensedAssets;var i=!1;if(e.isLicensedAsset){var n,r,a=(null===(n=oe(this,me).orderLineItem)||void 0===n||null===(r=n.design)||void 0===r?void 0:r.templates)||[];i=Object.values(a).some((function(e){return e.layers.some((function(e){return e.isLicensedAssetLayer()&&e.licensedAssetItem&&e.licensedAssetItem.status===M.a.STATUS_REMOVED}))}))}i&&(e.fileErrors=["Print file contains Premium Images that have been removed from the database by their owner. Please add a different image."],e.fileStatus=m.a.STATUS_INVALID)}}var kn={writable:!0,value:function(e){return"selected-region-"+e}}},M3Ia:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("SpuH"),r=i("nF4n"),a=Class({_par:null,_getNewInput:function(){var e={checked:!!this._par.isChecked,onchange:this._onchange};return this._par.prop&&r.a.O2O(e,this._par.prop),tag("input",{type:this._par.type||"checkbox",className:"pf-custom-control-input",value:this._par.value||1,name:this._par.name,prop:e,attr:this._par.dataTestTag?{"data-test":this._par.dataTestTag}:{}})},_getWrapper:function(e){e||console.error("No input node specified!"),e.id=e.id||this._par.id||this._getId();var t=tag("label",{className:"pf-custom-control-label pf-ui-body "+(this._par.labelClass?this._par.labelClass:""),attr:{for:e.id}},[this._par.label]);this._par.infoIcon&&this.getInfoIcon().append(t);var i=tag("div","pf-custom-control pf-custom-"+(this._par.type?this._par.type:"checkbox"),[e,t]);return tag("div","pf-form-group "+(this._par.wrapperClass?this._par.wrapperClass:""),[i,this._nodeHelpBlock=this._getNewHelpBlock()])},setReadOnly:function(e){this._nodeInput.disabled=!!e},setChecked:function(e){this._nodeInput.checked=!!e},isChecked:function(){return this._nodeInput.checked}},n.a);window&&((globalThis||{}).PFFormsCheckbox=a)},MMbA:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("edgZ"),r=i("gqyd"),a=i("+I3z"),o=i("qqZP"),s=i("boP+"),l=i("gQ2J"),c=Class({_placementLayers:{},_templateLayers:{},generatorDesignId:null,__construct:function(){},addPlacementFileLayer:function(e,t,i){if(!t.isTempGeneratorFile()&&!t.containsLicensedAssets){var n=this._placementLayers[e]||[],r=new a.a;i&&(r.originalPosition=i.getClone(),r.position=i.getClone()),r.fileItem=t,n.push(r),this._placementLayers[e]=n}},addPlacementLicensedAssetLayer:function(e,t,i){var n=this._placementLayers[e]||[],r=new o.a;i&&(r.originalPosition=i.getClone(),r.position=i.getClone()),r.licensedAssetItem=t,n.push(r),this._placementLayers[e]=n},addPlacementClipartLayer:function(e,t,i){var n=this._placementLayers[e]||[],a=new r.a;i&&(a.originalPosition=i.getClone(),a.position=i.getClone()),a.clipartItem=t,Object(s.c)()&&Object(l.b)(a),n.push(a),this._placementLayers[e]=n},getLayersByPlacement:function(){return this._placementLayers},hasLayersByPlacement:function(){return Object.keys(this._placementLayers).length>0},hasTemplates:function(){return Object.keys(this._templateLayers).length>0},addFromTemplates:function(e){var t=e.getTemplates();for(var i in t)for(var n in t[i]){var r=t[i][n];this._templateLayers[r.getKey()]=r.getCloneWithLayers()}},getTemplates:function(){return this._templateLayers},getTemplateByKey:function(e){return this._templateLayers[e]||null},getTemplatesBestMatchingLayers:function(e){var t,i,n=(e.width/e.height).toFixed(2);for(var r in this._templateLayers){var a=this._templateLayers[r];if(a.placementId===e.placementId){var o=(a.height/a.width).toFixed(2),s=(a.width/a.height).toFixed(2);if(t=a.layers.slice(0),n==s||n==o){if(a.width===e.height&&a.height===e.width)return t;i=t}}}return i||t||[]}});c.initialize=function(e,t){var i=new n.a,r=new c;for(var a in r.generatorDesignId=t,e){var o=e[a];o.exists()&&!o.isMockup()&&r.addPlacementFileLayer(o.type,i.getCachedFile(o.fileId),o.position)}return r},window&&((globalThis||{}).PFProductPushDesignerState=c)},MSZa:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return o}));var o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.status=t.status||e.STATUSES.STATUS_BROKEN,this.imageURL=t.imageURL||null,this.thumbnailURL=t.thumbnailURL||null,this.imageDownloadURL=t.imageDownloadURL||null,this.imageSVG=t.imageSVG||null,this.pusherKey=t.pusherKey||null}var t,i,a;return t=e,(i=[{key:"isDone",get:function(){return this.status===e.STATUSES.STATUS_DONE}},{key:"isLoading",get:function(){return this.status===e.STATUSES.STATUS_LOADING}},{key:"isBroken",get:function(){return this.status===e.STATUSES.STATUS_BROKEN}},{key:"loadResults",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.imageURL,n=void 0===i?null:i,r=t.thumbnailURL,a=void 0===r?null:r,o=t.imageSVG,s=void 0===o?null:o;if(this.pusherKey=null,!n&&!a&&!s)return this.imageURL=this.thumbnailURL=this.imageSVG=null,void(this.status=e.STATUSES.STATUS_BROKEN);n&&(this.imageURL=n),a&&(this.thumbnailURL=a),s&&(this.imageSVG=s),this.status=e.STATUSES.STATUS_DONE}}])&&r(t.prototype,i),a&&r(t,a),e}();a(o,"IMAGE_LOADING_URL","/static/images/layout/spinner.svg"),a(o,"IMAGE_BROKEN_URL","/static/images/retina/invalid-file.svg"),o.STATUSES=Object.freeze({STATUS_BROKEN:"broken",STATUS_LOADING:"loading",STATUS_DONE:"done"})},MW8O:function(e,t,i){"use strict";i.d(t,"a",(function(){return H}));var n=i("rFrQ"),r=i("bvdp"),a=i("E17x"),o=i("gqyd"),s=i("nF4n"),l=Class({_nameToggledOn:"",_nameToggledOff:"",_iconClassName:{on:"",off:""},_imgSrc:null,_onClickCallback:null,_isActive:!1,_isIndicator:!1,_nodeBadge:null,__construct:function(){this.node=tag("a",{className:"pf-mb-8 generator-mockup__actions__container pf-hover-shadow pf-rounded",onclick:this._onClick.bind(this)})},setName:function(e,t){return this._nameToggledOn=e,this._nameToggledOff=t,this},setIconClass:function(e,t){return this._iconClassName.on=e,this._iconClassName.off=t||e,this},setImgSrc:function(e,t){return this._imgSrc||(this._imgSrc={on:"",off:""}),this._imgSrc.on=e,this._imgSrc.off=t,this},setCallback:function(e){return this._onClickCallback=e,this},setActive:function(e){return this._isActive=e,this._isActive?s.a.addClassName(this.node,"active"):s.a.removeClassName(this.node,"active"),this.render(),this},setIsIndicator:function(e){return this._isIndicator=e,this._isIndicator?(s.a.addClassName(this.node,"generator-mockup__actions__container--indicator"),s.a.removeClassName(this.node,"pf-rounded")):(s.a.removeClassName(this.node,"generator-mockup__actions__container--indicator"),s.a.addClassName(this.node,"pf-rounded")),this},setBadge:function(e,t){return this._nodeBadge=tag("span","badge "+t,e),this},render:function(){return s.a.clearNode(this.node),tag("div","generator-mockup__actions__button",[this._imgSrc&&(this._isActive?this._imgSrc.on:this._imgSrc.off)?tag("img",{className:this._isActive?this._iconClassName.off:this._iconClassName.on,src:this._isActive?this._imgSrc.on:this._imgSrc.off}):tag("i","pf-i  pf-i-24 "+(this._isActive?this._iconClassName.off:this._iconClassName.on)),this._isActive?this._nameToggledOff:this._nameToggledOn,this._nodeBadge?this._nodeBadge:""]).append(this.node),this},_onClick:function(e){e.preventDefault(),this._isActive=!this._isActive,this._onClickCallback&&this._onClickCallback(this._isActive,e)}},s.a.Base),c=Class({_buttons:[],__construct:function(){this.node=tag("div","generator-mockup__actions generator-mockup__actions--zoom-measure")},addButton:function(){var e=new l;return this._buttons.push(e),e},addDivider:function(){var e=tag("hr");return this._buttons.push(e),e},hasButtons:function(){return!!this._buttons.length},render:function(){var e=this;return s.a.clearNode(this.node),this._buttons.forEach((function(t){return(t.render?t.render():t).append(e.node)})),this}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupActions=c);var u=i("UYP3"),d=i("+erO"),h=Class({_sizeSlider:null,_par:null,__construct:function(e){this._par=e;var t=new u.a.Par;t.min=20,t.max=100,t.onSlide=this._par.onScale,t.onSlideEnded=this._par.onScale,this._sizeSlider=new u.a(t),this.node=tag("div","pf-d-block pf-mb-12 "+(this._par.showButtons?"":"pf-d-md-none"),[tag("div","row no-gutters pf-my-12 pf-justify-content-center",[tag("div",this._par.showFit?"col-6 col-xs-7":"col-10 col-md-8",[this._sizeSlider]),tag("div",this._par.showFit?"col-auto col-xs-3 pf-pl-8 pf-pl-xs-12":"pf-d-none",[tag("button",{className:"pf-btn pf-btn-secondary pf-d-block pf-w-100 pf-d-xs-inline-block pf-w-xs-auto",onclick:this._par.onFit},dlang("generator","Scale to fit"))])]),tag("div",{className:"pf-d-block pf-d-md-none pf-mt-12",style:{whiteSpace:"nowrap"}},[tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,-1,0)},[tag("i","pf-i pf-i-chevron-left pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,1,0)},[tag("i","pf-i pf-i-chevron-right pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,0,-1)},[tag("i","pf-i pf-i-chevron-up pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8 pf-mb-8",onclick:this._move.bind(this,0,1)},[tag("i","pf-i pf-i-chevron-down pf-i-18")]),tag("button",{className:"pf-btn pf-btn-secondary pf-mb-8",onclick:this._par.onReset,attr:{title:lang("Undo all changes"),"data-toggle":"tooltip"}},clang("action (to reset something)","Reset"))]),tag("div",{className:"pf-d-block pf-d-md-none pf-mt-4 pf-mb-12",style:{whiteSpace:"nowrap"}},[tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.VERTICAL)},[tag("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.HORIZONTAL)},[tag("i","pf-i pf-i-format-horizontal-align-center pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.LEFT)},[tag("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.RIGHT)},[tag("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square pf-mr-8",attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.TOP)},[tag("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),tag("a",{className:"pf-btn pf-btn-secondary pf-btn-square",attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onAlign.bind(null,d.a.ALIGNMENT.BOTTOM)},[tag("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])])])},show:function(){s.a.removeClassName(this.node,"pf-d-md-none")},hide:function(){s.a.addClassName(this.node,"pf-d-md-none")},_move:function(e,t,i){i.preventDefault(),this._par.onMove(e,t)},setSliderValue:function(e){this._sizeSlider&&this._sizeSlider.setValue(e)},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({trigger:"hover",container:document.body}).on("click",(function(e){$(this).tooltip("hide")})),this}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupControls=h);var p=Class({mockupPosition:null,templates:null,onPositionChanged:null,onTextChanged:null,onLayerSelected:null,onGroupSelected:null,onLayerRemoved:null,onPreview:null,onCropStateChanged:null,onLifelikeChanged:null,technique:null,isCustomizingMode:!1,opts:null});window&&((globalThis||{}).PFComponentsGeneratorMockupCanvasPar=p);var f=i("oclZ"),g=i("7h5t"),m=i("86cz"),_=i("X5Ic"),v=i("Iarc"),y=i.n(v),b=i("tTqN"),P=i.n(b),C=i("wo5H"),T=i("lPT7"),w=i.n(T),I=i("Iy0a"),S=i("XsTE"),E=Class({_par:null,_canvasNode:null,_canvas:null,_activeCropLayer:null,_isLifelike:null,_lifelikeColors:null,__construct:function(e){this._par=e,this.node=tag("div",{className:"canvas-wrapper",style:{width:this._par.mockupPosition.areaWidth+"px",height:this._par.mockupPosition.areaHeight+"px",top:0,marginLeft:-this._par.mockupPosition.areaWidth/2+"px",left:"50%",pointerEvents:this._par.isReadOnly?"none":""}},[this._canvasNode=tag("canvas")]),$(".modal-dialog").length>0&&$(document).off("focusin.modal"),this._canvas=new y.a(this._par.mockupPosition,this._canvasNode,this._par.isReadOnly?null:{onLayerSelected:this._onCanvasLayerSelected.bind(this),onGroupSelected:this._onCanvasGroupSelected.bind(this),onLayerChanged:this._onCanvasLayerChanged.bind(this),onLayerRemoved:this._onCanvasLayerRemoved.bind(this),onLayerScaled:this._onLayerScaled.bind(this),onRotationShadowChanged:this._onRotationShadowChanged.bind(this),onCropStateChanged:this._onCropStateChanged.bind(this),onLifelikeChanged:this._onLifelikeChanged.bind(this)},this._par.opts),this._manageTouchEvents(),this._subscribeTemplateEvents()},isEventOrigin:function(e){return e&&(e===this||e===this._getUid())},_getUid:function(){return"canvas-"+this._canvas.uid},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerAddedListener(this._onLayerAddedFromCanvas).addOnLayerRemovedListener(this._onLayerRemovedFromCanvas).addOnLayerOrderChangedListener(this._onLayerOrderChangedFromCanvas).addOnTemplatePositionsChangedListener(this._onTemplatePositionsChangedFromCanvas).addOnLayerConfigurationChanged(this._onLayerConfigurationChangedFromCanvas).addOnActiveLayerChanged(this._onActiveLayerChangedFromCanvas).addOnTemplateResizedListener(this._onTemplateResizedFromCanvas)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerAddedFromCanvas).unsubscribe(this._onLayerRemovedFromCanvas).unsubscribe(this._onLayerOrderChangedFromCanvas).unsubscribe(this._onLayerConfigurationChangedFromCanvas).unsubscribe(this._onTemplatePositionsChangedFromCanvas).unsubscribe(this._onActiveLayerChangedFromCanvas).unsubscribe(this._onTemplateResizedFromCanvas)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(a.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_manageTouchEvents:function(){Object(a.b)()&&this.node.addEventListener("touchstart",this._tapHandler.bind(this,this._onDoubleTap.bind(this)))},_tapHandler:function(e,t){var i=this;if(!this._tapOnce)return this._tapOnce=!0,void setTimeout((function(){return i._tapOnce=!1}),300);t.preventDefault(),e&&e(),this._tapOnce=!1},_onDoubleTap:function(){var e,t=null===(e=this.getActiveLayer())||void 0===e?void 0:e.toArray();t&&w.a.checkLayerTypeForCrop(t.type)&&this._canvas.onMouseDoubleClick()},_onLifelikeChanged:function(e,t){this._isLifelike=e,this._lifelikeColors=t,this.notifyPreview()},setLayers:function(e){this._canvas.setLayers(e)},setLayer:function(e){this._canvas.setPosition(e.uniqueId,e.toArray(this._canUseThumbnail(e),!0),this.notifyPreview.bind(this))},showActiveLayer:function(e){this._canvas.showActiveLayer(e)},showActiveGroup:function(e){this._canvas.showActiveGroup(e)},getActiveLayer:function(){var e=this._canvas.getActiveLayerId();return this._par.templates.getLayerById(e)},getActiveGroupLayers:function(){var e=this._canvas.getActiveGroupId();return this._par.templates.getGroupLayersById(e)},notifyPreview:function(){var e;if(null===(e=this._canvas)||void 0===e||!e.isCropState()){var t=!1;f.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-preview-"+this._getUid(),this._par.onPreview.bind(null,this._canvas.convertToPreview.bind(this._canvas,null,t),this._getUid(),t),100),this._par.technique===_.a.TYPE_EMBROIDERY&&(t=!0,f.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-preview-"+this._getUid()+C.u,this._par.onPreview.bind(null,this._canvas.convertToPreview.bind(this._canvas,null,t),this._getUid(),t),100)),f.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-lifelike-changed-"+this._getUid(),this._par.onLifelikeChanged.bind(null,this._isLifelike,this._lifelikeColors),50),this._isLifelike&&f.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-lifelike-"+this._getUid(),this._par.onPreview.bind(null,this._canvas.convertToLifelike.bind(this._canvas),this._getUid(),t,this._isLifelike),100)}},toggleGuidelines:function(e,t){this._canvas.toggleGuidelines(e,t)},toggleZoom:function(e){this._canvas.toggleZoom(e),this.notifyPreview()},_onCanvasLayerSelected:function(e,t){if(this._par.templates&&e){var i=this._par.templates.getLayerById(e.id),n=this._par.templates.getActiveLayer();if(!n||i){e&&i&&i.patternType&&t&&this._onCanvasLayerChanged(!1,!0,t);var r=n&&i&&n.uniqueId===i.uniqueId;this._par.onLayerSelected(i,r,this)}}},_onCanvasGroupSelected:function(e){if(this._par.templates&&e){var t=this._par.templates.getGroupLayersById(e.groupId),i=this._par.templates.getActiveGroupLayers();if(t.length||null==i||!i.length){var n=(null==i?void 0:i.length)&&t.length&&i[0].groupId===t[0].groupId;this._par.onGroupSelected(t,n,this)}}},_onCanvasLayerChanged:function(e,t,i){var n,r=this;if(((null==i||null===(n=i.transform)||void 0===n?void 0:n.action)!==P.a.COLOR_GRAPHIC_IMAGE_LOAD||!0!==i.transform.actionPerformed)&&this._par.templates){var a=i.target||i.transform.target;if(a){var o=function(n,a){var o=r._par.templates.getLayerById(n.id);if(o){var s,l,c=!1;if(n.type===P.a.LAYER_TYPE.CROP){var u=r._canvas.getImgElementBeingCroppedById(n.id);if(u){var d,h,p=!(null===(d=i.transform)||void 0===d||!d.isPatternSwitch)&&i.transform.flippedX,g=!(null===(h=i.transform)||void 0===h||!h.isPatternSwitch)&&i.transform.flippedY;if(r._canvas.restrictCropLayerMoving(n,u,i,t),!r._canvas.isCropState(n.id)){s=r._getLayerPosition(o,!0);var m=r._getFabricPosition(n),_=r._normalizeLayerPosition(s,m);l=r._getLayerPosition(o),l=r._canvas.updateLinkedBaseLayerPosition(i.transform.action,u,n,l,s,_,r,p,g),(p||g)&&(p&&(u.flipX=!u.flipX),g&&(u.flipY=!u.flipY),o.flipX=u.flipX,o.flipY=u.flipY,l=r._canvas.updateLinkedBaseLayerPosition("flip",u,n,l,s,_,r,p,g),c=!0),r._getCropChangeType(i.transform.action)}}}else{l=r._getLayerPosition(o);var v=r._getFabricPosition(n);r._normalizeLayerPosition(l,v),l.canMoveOutOfBounds=a,o.flipX=n.flipX,o.flipY=n.flipY}e?f.a.delay("PFComponentsGeneratorMockupCanvas._onCanvasLayerChanged-position-"+r._getUid()+"-"+n.id,r._updateLayerDataPositions.bind(r,o,l,s,c),100):r._updateLayerDataPositions(o,l,s,c)}};(null==a?void 0:a.subType)===P.a.LAYER_TYPE.QUICK_DESIGN?a.forEachObject((function(e){return o(e,!0)})):o(a),this.notifyPreview()}}},_getCropChangeType:function(e){return{drag:C.b,rotate:C.c,scale:C.d}[e]||C.d},_updateLayerDataPositions:function(e,t,i,n,r){var a=n?"crop-flip":"";t&&this._par.onPositionChanged(e,t,this._getUid()+a),i&&this._par.onPositionChanged(e,i,this._getUid()+a,!0,r)},_getLayerPosition:function(e,t){return(e[t?"cropPosition":"position"]||e.originalPosition).getFromOriginalRatio().getScaledPosition(this._par.mockupPosition.width,this._par.mockupPosition.height)},_getFabricPosition:function(e){var t,i=e.getPointByOrigin("center","center"),n=i.x-e.getScaledWidth()/2,r=i.y-e.getScaledHeight()/2,a=e.angle,o=e.getScaledWidth(),s=e.getScaledHeight();if((null===(t=e.group)||void 0===t?void 0:t.subType)===P.a.LAYER_TYPE.QUICK_DESIGN){var l=e.group.getPointByOrigin("center","center"),c=e.group.angle*Math.PI/180,u=e.group.scaleX,d=i.x*Math.cos(c)-i.y*Math.sin(c),h=i.x*Math.sin(c)+i.y*Math.cos(c);n=l.x+(d-e.getScaledWidth()/2)*u,r=l.y+(h-e.getScaledHeight()/2)*u,a+=e.group.angle,o*=u,s*=u}return{width:o,height:s,top:r-this._par.mockupPosition.top,left:n-this._par.mockupPosition.left,rotation:a}},_normalizeLayerPosition:function(e,t){var i=new d.a,n=e.left,r=e.top,a=e.width,o=e.height,s=e.rotation;return e.left=this._normalizePosition(t.left,n),e.top=this._normalizePosition(t.top,r),e.width=this._normalizePosition(t.width,a),e.height=this._normalizePosition(t.height,o),e.rotation=this._normalizePosition(t.rotation,s,!0),i.left=e.left-n,i.top=e.top-r,i.width=e.width-a,i.height=e.height-o,i.rotation=e.rotation-s,i.scale=e.width/a,i},_addDiffPosition:function(e,t){e.left+=t.left,e.top+=t.top,e.width+=t.width,e.height+=t.height},_onLayerScaled:function(e,t){var i=this;if(this._par.templates){var n=t.target||t.transform.target;n&&(n.subType===P.a.LAYER_TYPE.QUICK_DESIGN?n.forEachObject((function(t){return i._processScaledLayer(e,t)})):this._processScaledLayer(e,n))}},_processScaledLayer:function(e,t){var i,n=this._par.templates.getLayerById(t.id);n&&n instanceof g.a&&!n.overrideImagePulse&&(null!=t&&t.getObjects&&null!==(i=t.getObjects("color-graphic"))&&void 0!==i&&i.length&&(t.scaledGraphic=!0),e?f.a.delay("PFComponentsGeneratorMockupCanvas._onLayerScaled-"+this._getUid(),function(){y.a.calculateTextboxPositions(n),this._canvas.setPosition(n.uniqueId,n.toArray(this._canUseThumbnail(n),!0))}.bind(this),100):(y.a.calculateTextboxPositions(n),this._canvas.setPosition(n.uniqueId,n.toArray(this._canUseThumbnail(n),!0))))},_onRotationShadowChanged:function(e){if(this._par.templates){var t=e.target||e.transform.target;if(t){var i=this._par.templates.getLayerById(t.id);y.a.setObjectShadow(i.toArray(this._canUseThumbnail(i)),t)}}},_normalizePosition:function(e,t,i){e=parseFloat(Number(e).toFixed(4));var n=i?0:.9;return y.a.NUMDIFF(e,t)>n?e:t},_onCanvasLayerRemoved:function(e){var t=this;if(this._par.templates&&e)if(this._canvas.removeLayer(e),e.subType!==P.a.LAYER_TYPE.QUICK_DESIGN){var i=this._par.templates.getLayerById(e.id);this._par.onLayerRemoved(i)}else{this._par.templates.getGroupLayersById(e.groupId).forEach((function(e){return t._par.onLayerRemoved(e)}))}},_onLayerAddedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e.length?e[0]:null;if(i)if(t)this._canvas.drawLayer(t.toArray(this._canUseThumbnail(t)));else{var n=i.layersToArray();this.setLayers(n)}}},_onLayerRemovedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e.length?e[0]:null;if(i)if(t)this._canvas.removeLayerById(t.uniqueId);else{var n=i.layersToArray();this.setLayers(n)}}},_onLayerOrderChangedFromCanvas:function(){this._unsubscribeTemplateEventsIfNeeded()||this._canvas.sortLayers(!0)},_onTemplatePositionsChangedFromCanvas:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(i))if(i!==m.a.GROUP_UPDATE){if(this._canvas.setPosition(t.uniqueId,t.toArray(this._canUseThumbnail(t),!0)),!(e.length<=1)){var n=this._par.templates.getTemplateByLayer(t);if(n)if(!(n.getLayerIndex(t)<0)){for(var r in e){var a=e[r],o=a.getLayerIndex(t);if(a.layers[o]){var s=a.layers[o].getOriginalClone();this._canvas.setPosition(s.uniqueId,s.toArray(this._canUseThumbnail(s),!0))}}this.notifyPreview()}}}else this._canvas.clearActiveGroup()},_onActiveLayerChangedFromCanvas:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(t))if(null!=e&&e.length){var i=e[0].groupId;this.showActiveGroup(i)}else this.showActiveLayer(e?e.uniqueId:null)},_onTemplateResizedFromCanvas:function(e,t,i){this._unsubscribeTemplateEventsIfNeeded()||this.isEventOrigin(i)||this._canvas.setPosition(t.uniqueId,t.toArray(this._canUseThumbnail(t),!0))},_onLayerConfigurationChangedFromCanvas:function(e,t){var i;if(!this._unsubscribeTemplateEventsIfNeeded()&&!this.isEventOrigin(t)){var n;if(null!==(i=this._par.templates.getLayersByType(I.a,S.MOCKUP_PLACEMENT_ID)[0])&&void 0!==i&&i.isMockupLayer()&&(n=this._par.templates.getLayersByType(I.a,S.MOCKUP_PLACEMENT_ID)[0].isLocked),e.isCropState&&!this._canvas.isCropState()||!e.isCropState&&this._canvas.isCropState())return this._canvas.toggleCropState(e.uniqueId,!1,n);this._canvas.updateLayer(e.toArray(this._canUseThumbnail(e),!0),this.notifyPreview.bind(this))}},getPreviewImageString:function(){return this._canvas.convertToPreview(null,!1)},_canUseThumbnail:function(e){return!w.a.isCropElementNeeded(e)},_onCropStateChanged:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._par.templates){var r=this._par.templates.getLayerById(e);if(r){if(this._canvas.isCropState()||!t)this.setLayer(r);else{if(!n){var a=this._getLayerPosition(r,!0),o=this._getFabricPosition(t);this._normalizeLayerPosition(a,o),this._updateLayerDataPositions(r,null,a),r=this._par.templates.getFreshLayer(r)}this.setLayer(r)}r.isCropState=this._canvas.isCropState();var s={skipSwitchToDesignerTab:!0};this._par.templates.getChangeListener().notifyLayerCropStateChanged(r,this,s),this._activeCropLayer=this._canvas.isCropState()?r:null,this._par.onCropStateChanged&&this._par.onCropStateChanged(this._canvas.isCropState())}}},applyCrop:function(){this._activeCropLayer&&this._canvas.toggleCropState(this._activeCropLayer.uniqueId)},cancelCrop:function(){if(this._activeCropLayer){var e=this._par.templates.getLayerById(this._activeCropLayer.uniqueId);e=this._par.templates.getFreshLayer(e),this._canvas.updateLayer(e.toArray(this._canUseThumbnail(e),!0),this._canvas.toggleCropState.bind(this._canvas,e.uniqueId,!0))}},getCanvas:function(){return this._canvas}},s.a.Base);window&&((globalThis||{}).PFComponentsGeneratorMockupCanvas=E);var O,k=i("zfrb"),L=i("tx4t"),A=i("jhOU"),R=i("XJFE"),N=i("7QI8"),D=i("sjGI"),x=i("osBa"),F=i("A+LN"),M=i("vfQf"),B=i("boP+"),V=i("Jkv8"),j=i("mrkb");function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function z(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function G(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){z(a,n,r,o,s,"next",e)}function s(e){z(a,n,r,o,s,"throw",e)}o(void 0)}))}}var H=Class({_lastActiveLayer:null,_lastActiveLayerGroup:null,_isGridVisible:!1,_isZoomedIn:!1,_hasLifelikeBeta:!1,_isLifelike:!1,_lifelikeButton:null,_unrelatedTemplatesWarningButton:null,_stickerLayerMergingWarningButton:null,_unrelatedTemplatesPopover:null,_stickerLayerMergingPopover:null,_gridButton:null,_zoomButton:null,_canvas:null,_qualityMessageClosedManually:null,_par:null,_mockupPosition:null,_lastPreviewString:null,_nodeCropActions:null,_hasCropToolBeta:null,hasCropPatternBeta:null,__construct:function(e){var t,i,n;this._par=e,this._mockupPosition=this._par.generatorVariant.mockupPosition.getScaledPosition(this._par.maxWidth,this._par.maxHeight);var r=this._par.generatorVariant.mockupPosition.getRatioToScaleTo(this._par.maxWidth,this._par.maxHeight),a=this._par.generatorVariant.dynamicTexts.map((function(e){return e.getScaledItem(r)})),o=(null===(t=Object(B.a)())||void 0===t?void 0:t.colors)||[],l=this._par.variantArea&&(null===(i=this._par.variantArea)||void 0===i?void 0:i.getGeneratorVariants().map((function(e){return e.getColorData(o)})).filter((function(e){return null==e?void 0:e.hex})))||[],c=this._par.generatorVariant.getColorData(o);this._par.maxHeight=Math.floor(this._par.maxHeight),this._par.maxWidth=Math.floor(this._par.maxWidth),this._mockupPosition.areaWidth=Math.round(this._mockupPosition.areaWidth),this._mockupPosition.areaHeight=Math.round(this._mockupPosition.areaHeight),this._mockupPosition.height=Math.round(this._mockupPosition.height),this._mockupPosition.width=Math.round(this._mockupPosition.width),this._mockupPosition.top=Math.round(this._mockupPosition.top),this._mockupPosition.left=Math.round(this._mockupPosition.left),this.node=Object(s.b)("div","generator-mockup pf-mx-auto",[this._nodeCanvasHolder=Object(s.b)("div"),this._nodeCropActionsHolder=Object(s.b)("div"),this._nodePrintQualityHolder=Object(s.b)("div"),this._nodeControlsHolder=Object(s.b)("div")]),this._par.maxHeight&&(this.node.style.minHeight=this._par.maxHeight+"px",this.node.style.paddingTop=this._par.maxHeight+"px"),this._par.maxWidth&&(this.node.style.width=this._par.maxWidth+"px");var u=new p;if(u.mockupPosition=this._mockupPosition,u.templates=this._par.templates,u.onPositionChanged=this._onPositionChanged.bind(this),u.onLayerSelected=this.setActiveLayer.bind(this),u.onGroupSelected=this.setActiveGroup.bind(this),u.onLayerRemoved=this._onLayerRemoved.bind(this),u.onTextChanged=this._onTextChanged.bind(this),u.onPreview=this._onPreview.bind(this),u.onCropStateChanged=this._onCropStateChanged.bind(this),u.onLifelikeChanged=this._onLifelikeChanged.bind(this),u.technique=this._par.template.technique,u.opts={productColors:l,productColor:c,backgroundColor:this._par.generatorVariant.backgroundColor,backgroundImage:this._par.generatorVariant.backgroundImageUrl,backgroundShadow:this._par.generatorVariant.backgroundShadowUrl,baseImageUrl:this._par.generatorVariant.generatorImageUrl,overlayColor:null,fill:this._par.placementOptions?this._par.placementOptions.getPlacementFill(this._par.generatorVariant.placementId):null,mockupPrintZIndex:this._par.generatorVariant.mockupPrintZIndex,isReadOnly:this._par.disableLayerManipulations||!this._par.isResizable,readyCallback:this._readyCallback,disablePulseImageOverride:this._par.disablePulseImageOverride,disableScaling:null===(n=Object(B.a)())||void 0===n?void 0:n.isJewelry(),labelText:this._labelText(),isCustomizingMode:this._par.isCustomizingMode,templateDynamicTexts:a,isCropToolAvailable:this._isCropToolBeta.bind(this),isCropPatternAvailable:this._isCropPatternBeta.bind(this),canvasParams:{useAntiAliasing:!1,useLifelike:this._shouldUseLifelike.bind(this)},textToPng:!1,canvasFontsObject:Object(V.getPFCanvasFonts)()},this._canvas=new E(u),this._canvas.setLayers(this._par.template?this._par.template.layersToArray():[]),this._canvas.append(this._nodeCanvasHolder),this._drawDebugTools(),e.isResizable&&(this.nodePrintQuality=Object(s.b)("div","print-quality "+(e.isOrderFlow?"":"pf-d-none"))),this._resetZoomState(),this._par.isResizable&&!this._par.disableLayerManipulations){var d=this._par.templates.getActiveLayer()||this._lastActiveLayer;d||(d=this._par.templates.getFirstLayer(this._par.generatorVariant.placementId,this._par.generatorVariant.templateId)),this.setActiveLayer(d,!0)}},_drawDebugTools:function(){var e,t,i,n=this;if(PF.DEV&&(null===(e=this._canvas)||void 0===e||null===(t=e._par)||void 0===t||null===(i=t.opts)||void 0===i||!i.isReadOnly)){var r='display:block;position:relative;top:0;left:0;width:200px;height:200px;background:transparent url("/static/images/layout/trasnparent-pattern.png") center center;border:solid 1px gray;text:black;font-weight:bolder;';$(Object(s.b)("div",{id:"mockup-generator-mockup-debug",style:"position:absolute;top:0;left:0;z-index:4;left:-200px;display:none;"},[Object(s.b)("div","pf-bold pf-bg-white","mockupPrintZIndex: "+this._par.generatorVariant.mockupPrintZIndex),Object(s.b)("div","pf-bold pf-bg-white","colorCode: "+this._par.generatorVariant.colorCode),Object(s.b)("div",{style:r+"background:"+this._par.generatorVariant.colorCode}),Object(s.b)("div","pf-bold pf-bg-white","backgroundColor: "+this._par.generatorVariant.backgroundColor),Object(s.b)("div",{style:r+"background:"+this._par.generatorVariant.backgroundColor}),Object(s.b)("div","pf-bold pf-bg-white","backgroundImage:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.backgroundImageUrl||""}),Object(s.b)("div","pf-bold pf-bg-white","backgroundShadow:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.backgroundShadowUrl||""}),Object(s.b)("div","pf-bold pf-bg-white","baseImageUrl:"),Object(s.b)("img",{style:r,src:this._par.generatorVariant.generatorImageUrl||""})]).append(this._nodeCanvasHolder)).draggable(),Object(s.b)("div",{style:"position:absolute;top:0;left:0;z-index:4;left:0px;text-align:left;"},[Object(s.b)("button",{className:"pf-bg-transparent pf-border-0 small",onclick:function(e){var t=document.getElementById("mockup-generator-mockup-debug");t.style.display="block"===t.style.display?"none":"block"}},"Mockup Debug"),Object(s.b)("button",{className:"pf-bg-transparent pf-border-0 small",onclick:function(e){var t,i,r=document.getElementById("mockup-generator-color-debug");r.style.display="block"===r.style.display?"none":"block",null===(t=n._canvas)||void 0===t||null===(i=t._canvas)||void 0===i||i._debounceDetectPrintColorMode()}},"Color Debug"),Object(s.b)("pre",{id:"mockup-generator-color-debug",style:"text-align:left;margin:0;padding:3px;background:rgba(255,255,255,0.7);border:0;display:none;font-size:80%;"},"-")]).append(this._nodeCanvasHolder)}},_isCropToolBeta:function(){var e;return this._hasCropToolBeta&&!(null!==(e=Object(B.a)())&&void 0!==e&&e.isEmbroidery())},_isCropPatternBeta:function(){return this._hasCropPatternBeta&&this._isCropToolBeta()},_resetZoomState:function(){var e=this;this._shouldCanvasBeZoomedIn()&&(this._toggleZoom(!1,!0),this._canvas._canvas._fabric.on("background:changed",(function(){e._shouldCanvasBeZoomedIn()&&(e._toggleZoom(!1,!1),e._toggleZoom(!1,!0))})))},isEventOrigin:function(e){return e&&(e===this||this._canvas.isEventOrigin(e))},_labelText:function(){var e=Object(B.a)();if(!e)return null;var t=[N.a.TYPE_EMBROIDERY_FRONT,N.a.TYPE_FRONT,N.a.TYPE_BACK,N.a.TYPE_EMBROIDERY_BACK,N.a.TYPE_EMBROIDERY_LEFT,N.a.TYPE_EMBROIDERY_RIGHT].indexOf(this._par.generatorVariant.placementId)>-1,i=e.isDtgTote()||e.isEmbroidery()||e.isDtgShirt();return t&&i?e.isEmbroidery()?lang("Embroidery area"):lang("Print area"):null},_readyCallback:function(e){var t=this;this._canvas.notifyPreview(),this._par.onReady&&setTimeout((function(){return t._par.onReady()}),100)},_shouldGridBeVisible:function(){return null!==H.isGridVisible&&this._par.isResizable?H.isGridVisible:this._shouldShowGridButton()},_shouldCanvasBeZoomedIn:function(){return!!(Object(B.c)()&&this._shouldShowZoomIn()&&null!==H.isZoomedIn&&this._par.isResizable)&&H.isZoomedIn},_toggleGrid:function(e,t,i){this._gridButton&&(void 0!==t&&"boolean"==typeof t||(t=e,e=!1),this._isGridVisible=t,this._gridButton.setActive(this._isGridVisible),e&&(H.isGridVisible=this._isGridVisible),this._par.template&&this._canvas.toggleGuidelines(this._isGridVisible,{center:this._shouldShowCenterLine(),sideCenter:this._shouldShowSideCenterLines(),sideCenterRatio:this._par.template.getSideCenterDistanceRatio()}))},_toggleZoom:function(e,t,i){this._zoomButton&&(void 0!==t&&"boolean"==typeof t||(t=e,e=!1),this._isZoomedIn=t,this._zoomButton.setActive(this._isZoomedIn),e&&(H.isZoomedIn=this._isZoomedIn),this._canvas.toggleZoom(this._isZoomedIn),this._par.templates&&this._par.templates.getChangeListener().notifyZoomChanged(this._isZoomedIn))},render:function(){var e,t;if(this.node.style.width=this._mockupPosition.areaWidth+"px",this.node.style.minHeight=this._mockupPosition.areaHeight+"px",this.node.style.paddingTop=this.node.style.minHeight,this._nodeViewActions=Object(s.b)("div").append(this.node),this._par.isResizable&&!this._par.disableLayerManipulations&&(null===(e=this._getSelectedLayer())||void 0===e||!e.isMockupLayer())){this._initGuidelines(),this._renderViewActions(),s.a.clearNode(this._nodePrintQualityHolder),this.nodePrintQuality.append(this._nodePrintQualityHolder);var i={maxDPI:600,requiredDPI:this._par.templates.getRequiredDpi(),onAlign:this._onAlign,onReset:this._onReset,onFit:this._onFit,onMove:this._onMove,onScale:this._onScale,showButtons:this._par.isOrderFlow,showFit:this._isAllOverProduct()};this._controls=new h(i),s.a.clearNode(this._nodeControlsHolder),this._controls.append(this._nodeControlsHolder),this._updateSliderState()}null!==(t=this._getSelectedLayer())&&void 0!==t&&t.isMockupLayer()&&s.a.clearNode(this._nodeControlsHolder),Object(j.g)()&&(this.displayOutOfBoundsIndicator(),this.displayQualityIndicators(),this.displayCustomizableTextLayerError()),this._calculateWarningMessagePosition(),this._renderCropActions()},_initGuidelines:function(){this._hasGuidelines||(this._canvas.toggleGuidelines(this._isGridVisible,{center:this._shouldShowCenterLine(),sideCenter:this._shouldShowSideCenterLines(),sideCenterRatio:this._par.template.getSideCenterDistanceRatio()}),this._hasGuidelines=!0)},_renderViewActions:function(){var e=this;return G(regeneratorRuntime.mark((function t(){var i,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(B.c)()){t.next=2;break}return t.abrupt("return");case 2:return s.a.clearNode(e._nodeViewActions),r=new c,e._shouldShowGridButton()&&(e._gridButton=r.addButton().setName(dlang("dashboard","Grid off"),dlang("dashboard","Grid on")).setIconClass("pf-i-grid-large").setActive(e._isGridVisible).setCallback(e._toggleGrid.bind(e))),e._shouldShowZoomIn()&&(e._zoomButton=r.addButton().setName(lang("Zoom in"),lang("Zoom out")).setImgSrc(null,PF.ASSETS_URL+"generator/zoom-in-icon.svg").setIconClass("action-zoom","pf-i pf-i-fullscreen-exit").setActive(e._isZoomedIn).setCallback(e._toggleZoom.bind(e))),t.next=8,Object(F.x)(F.m);case 8:e._hasLifelikeBeta=t.sent,e._shouldUseLifelike()&&(r.addDivider(),e._lifelikeButton=r.addButton().setIconClass("pf-i pf-i-close","pf-i pf-i-water-plus").setIsIndicator(!0).setActive(!0).setCallback(e._showLifelikePopover.bind(e,!0)),e._isLifelike?s.a.removeClassName(e._lifelikeButton.node,"pf-d-none"):s.a.addClassName(e._lifelikeButton.node,"pf-d-none")),null!==(i=e._par.variantArea)&&void 0!==i&&i.hasUnrelatedTemplates()&&(e._unrelatedTemplatesWarningButton=r.addButton().setIconClass("pf-i pf-i-close","pf-i pf-i-alert").setIsIndicator(!0).setActive(!0).setCallback(e._toggleUnrelatedTemplatesPopover.bind(e)),$(e._unrelatedTemplatesWarningButton.node).off("blur").on("blur",e._closeOnBlurUnrelatedTemplatesPopover.bind(e)),e._par.shouldShowUnrelatedTemplatesPopover&&e._par.shouldShowUnrelatedTemplatesPopover()&&e._showUnrelatedTemplatesPopover()),null!==(n=Object(B.a)())&&void 0!==n&&n.isStickerSheet()&&(e._stickerLayerMergingWarningButton=r.addButton().setIconClass("pf-i pf-i-close","pf-i pf-i-group").setIsIndicator(!0).setActive(!0).setCallback(e._toggleStickerLayerMergingPopover.bind(e)),$(e._stickerLayerMergingWarningButton.node).off("blur").on("blur",e._closeOnBlurStickerLayerMergingPopover.bind(e)),e._stickerLayerMergingPopover=null,e._par.shouldShowStickerLayerMergingPopover&&e._par.shouldShowStickerLayerMergingPopover()&&e._renderStickerLayerMergingPopover()),r.hasButtons()&&r.render().append(e._nodeViewActions);case 13:case"end":return t.stop()}}),t)})))()},_renderCropActions:function(){var e=this;return G(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(F.x)(F.f);case 2:return e._hasCropToolBeta=t.sent,t.next=5,Object(F.x)(F.e);case 5:e._hasCropPatternBeta=t.sent,Object(j.m)(F.f,e._hasCropToolBeta),Object(j.m)(F.e,e._hasCropPatternBeta),s.a.clearNode(e._nodeCropActionsHolder),e._nodeCropActions=Object(s.b)("div","generator-mockup__actions generator-mockup__crop-actions pf-position-static pf-position-md-absolute pf-d-none pf-d-md-block",[Object(s.b)("div","pf-d-flex pf-my-8 pf-my-md-0",[Object(s.b)("a",{className:"crop-action-btn pf-btn pf-btn-secondary pf-mr-8",onclick:function(){var t;null===(t=e._canvas)||void 0===t||t.cancelCrop()}},[Object(s.b)("i","pf-i pf-i-24 pf-i-close pf-mr-8"),dclang("generator","Cancel crop modification to image","Cancel")]),Object(s.b)("a",{className:"crop-action-btn pf-btn pf-btn-primary pf-mb-12",onclick:function(){var t;null===(t=e._canvas)||void 0===t||t.applyCrop()}},[Object(s.b)("i","pf-i pf-i-24 pf-i-check pf-mr-8"),dclang("generator","Apply crop modification to image","Apply")])])]),e._nodeCropActions.append(e._nodeCropActionsHolder),(i=e._getSelectedLayer())&&i.isCropState&&e._onCropStateChanged(i.isCropState);case 13:case"end":return t.stop()}}),t)})))()},_showLifelikePopover:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=!1;try{r="1"===window.sessionStorage.getItem("lifelikePopoverShown")}catch(e){}var a=n.target&&n.target===window.document.activeElement,o=t&&i;if(!o||a){if(o&&a&&$(this._lifelikeButton.node).trigger("click"),(!r||t)&&this._lifelikeButton&&!this._lifelikePopover){$(".lifelike-popover").length&&$(".lifelike-popover").remove();try{window.sessionStorage.setItem("lifelikePopoverShown","1")}catch(e){}this._lifelikePopover=new M.a(this._lifelikeButton.node,"","",{container:"#js--product-push-designer",trigger:"focus manual",placement:"left",closeOnResize:!0,html:!0,delay:{show:0,hide:100},template:Object(s.b)("div","popover popover--quality-tag lifelike-popover",[Object(s.b)("div","arrow"),Object(s.b)("div","row no-gutters",[Object(s.b)("div","col-3 pf-text-center",[Object(s.b)("img",{className:"img-responsive pf-pr-12",src:PF.ASSETS_URL+"generator/ill-white-underbase.svg"})]),Object(s.b)("div","col-8",[Object(s.b)("div","popover-header pf-h5",dlang("generator","This will be your print result")),Object(s.b)("div","popover-body pf-ui-caption pf-text-muted pf-mt-16",[Object(s.b)("p",{innerHTML:dlang("generator","You're now seeing your design as close as it gets to the real outcome. Learn more in our FAQ about {linkStart}why your design looks different{linkEnd} from what you expected it to be.").replace("{linkStart}",'<a class="pf-link" href="'+this._lifelikePopoverUrl()+'" target="_blank">').replace("{linkEnd}","</a>")})])]),Object(s.b)("div","col-1 pf-text-center",[Object(s.b)("i","pf-i pf-i-close pf-i-18 popover__close-quality-tag")])])])}),$(this._lifelikeButton.node).on("hide.bs.popover",(function(t){e._lifelikeButton.setActive(!0)})),$(this._lifelikeButton.node).on("show.bs.popover",(function(t){e._lifelikeButton.setActive(!1)})),setTimeout((function(){["textarea","input","select"].indexOf(String(window.document.activeElement.tagName).toLowerCase())<0&&$(e._lifelikeButton.node).trigger("focus"),$(e._lifelikeButton.node).popover("show"),$(document).find(".lifelike-popover .popover__close-quality-tag").on("click",(function(t){$(e._lifelikeButton.node).popover("hide")}))}),t?10:500)}}else $(this._lifelikeButton.node).trigger("blur").popover("hide")},_lifelikePopoverUrl:function(){var e,t={en_US:"https://help.printful.com/hc/en-us/articles/360019930999",es_ES:"https://help.printful.com/hc/es/articles/360019930999",fr_FR:"https://help.printful.com/hc/fr/articles/360019930999",de_DE:"https://help.printful.com/hc/de/articles/360019930999",ja_JP:"https://help.printful.com/hc/ja/articles/360019930999"};return null!==(e=null==t?void 0:t[D.a.locale])&&void 0!==e?e:t.en_US},_showUnrelatedTemplatesPopover:function(){var e=this;this._unrelatedTemplatesWarningButton&&!this._unrelatedTemplatesPopover&&(this._unrelatedTemplatesWarningButton.setActive(!1),this._unrelatedTemplatesPopover=new M.a(this._unrelatedTemplatesWarningButton.node,"","",{container:"#js--product-push-designer",trigger:"focus",placement:"left",closeOnResize:!0,template:Object(s.b)("div","popover popover--unrelated-templates popover--extended",[Object(s.b)("div","arrow"),Object(s.b)("div","row no-gutters",[Object(s.b)("div","col-12 col-xs-3",[Object(s.b)("img",{className:"img-responsive pf-mr-auto",src:PF.ASSETS_URL+"generator/ill-sizes.svg"})]),Object(s.b)("div","col-12 col-xs-9",[Object(s.b)("div","popover-header pf-h5 pf-mb-8",dlang("generator","Designs for each product size need to be adjusted separately!")),Object(s.b)("p","pf-ui-caption pf-text-muted pf-mb-0",dlang("generator","The scale and placement of your design need to be adjusted for each product size separately"))])])])},(function(){e._unrelatedTemplatesPopover=null})),setTimeout((function(){$(e._unrelatedTemplatesWarningButton.node).trigger("focus")}),1e3))},_renderStickerLayerMergingPopover:function(){var e=this;this._stickerLayerMergingWarningButton&&!this._stickerLayerMergingPopover&&(this._stickerLayerMergingWarningButton.setActive(!1),this._stickerLayerMergingPopover=new M.a(this._stickerLayerMergingWarningButton.node,"","",{container:"#js--product-push-designer",trigger:"focus manual",placement:"left",closeOnResize:!0,template:Object(s.b)("div","popover popover--sticker-layer-merging popover--extended",[Object(s.b)("div","arrow"),Object(s.b)("div","row no-gutters",[Object(s.b)("div","col-12 col-xs-3",[Object(s.b)("img",{className:"img-responsive pf-mr-auto",src:PF.ASSETS_URL+"generator/2x-layer-merge.gif"})]),Object(s.b)("div","col-12 col-xs-9",[Object(s.b)("h5","popover-header pf-h5 pf-mb-8",dlang("generator","Stickers will merge if placed too close")),Object(s.b)("p","pf-ui-caption pf-text-muted pf-mb-0",[dlang("generator","Elements placed close to each other will merge into one layer and get printed as a single sticker. Open "),Object(s.b)("i",null,dlang("generator","Mockup view")),dlang("generator"," to see the "),Object(s.b)("b",null,dlang("generator","design outcome."))])])])])},(function(){e._stickerLayerMergingPopover=null})),setTimeout((function(){$(e._stickerLayerMergingWarningButton.node).trigger("focus")}),1e3))},_toggleUnrelatedTemplatesPopover:function(e){this._unrelatedTemplatesPopover?(this._unrelatedTemplatesPopover._destroy(),this._unrelatedTemplatesWarningButton.setActive(!0)):this._showUnrelatedTemplatesPopover()},_toggleStickerLayerMergingPopover:function(){if(this._stickerLayerMergingPopover)return this._stickerLayerMergingPopover._destroy(),void this._stickerLayerMergingWarningButton.setActive(!0);this._renderStickerLayerMergingPopover()},_closeOnBlurUnrelatedTemplatesPopover:function(){this._unrelatedTemplatesPopover&&this._toggleUnrelatedTemplatesPopover()},_closeOnBlurStickerLayerMergingPopover:function(){this._stickerLayerMergingPopover&&this._toggleStickerLayerMergingPopover()},setControlsVisibility:function(e){this._controls&&(e?(this._controls.show(),this.displayQualityIndicators()):(this._controls.hide(),s.a.addClassName(this.nodePrintQuality,"pf-d-none")))},_updateSliderState:function(){if(this._controls){var e=this._getSelectedGroupLayers(),t=e.length?e[0]:this._getSelectedLayer();if(t&&this._par&&this._par.template&&this._par.template.fillMode){var i=t.isCropPositionUpdateNeeded()?t.cropPosition:t.position,n="w"===i.getScaleDimensionByFillMode(this._par.template.fillMode)?i.width/i.areaWidth*100:i.height/i.areaHeight*100;this._controls.setSliderValue(n)}}},_shouldShowGridButton:function(){var e=Object(B.a)();return this._par.isResizable&&!this._par.disableLayerManipulations&&e&&(e.isDtgShirt()||e.isDtgTote()||e.isJewelry())&&this._shouldShowZoomIn()},_shouldShowZoomIn:function(){var e;if(this._par.hideZoomButton)return!1;var t=[N.a.TYPE_LABEL_INSIDE,N.a.TYPE_LABEL_OUTSIDE,N.a.TYPE_HANG_TAG],i=[_.a.TYPE_EMBROIDERY,_.a.TYPE_JEWELRY,_.a.TYPE_T_SHIRT];return!(t.indexOf(this._par.generatorVariant.placementId)>-1)&&i.indexOf(null===(e=Object(B.a)())||void 0===e?void 0:e.type)>-1},_shouldUseLifelike:function(){var e,t=[N.a.TYPE_LABEL_INSIDE,N.a.TYPE_LABEL_OUTSIDE,N.a.TYPE_HANG_TAG],i=[_.a.TYPE_T_SHIRT];return!(t.indexOf(this._par.generatorVariant.placementId)>-1)&&(this._hasLifelikeBeta&&i.indexOf(null===(e=Object(B.a)())||void 0===e?void 0:e.type)>-1)},_shouldShowCenterLine:function(){var e=Object(B.a)();return e&&(!e.isCutSew()||[N.a.TYPE_FRONT,N.a.TYPE_BACK].indexOf(this._par.template.placementId)>-1)},_shouldShowSideCenterLines:function(){var e;return!(null===(e=Object(B.a)())||void 0===e||!e.isMug())},_onPositionChanged:function(e,t,i,n,r){i||(i=this),e=this._par.templates.getFreshLayer(e),n?this._par.templates.updateCropLayerPosition(e,t,i,r):(e=this._par.templates.updateLayerPosition(e,t,i),t.canMoveOutOfBounds||(this._lastActiveLayer=e))},_onTextChanged:function(e,t){t||(t=this),e=this._par.templates.getFreshLayer(e),e=this._par.templates.updateLayerText(e,t),this._lastActiveLayer=e},_onPreview:function(e,t,i,n){var r=e();if(i){if(String(this._lastPreviewStringWoPulse)===String(r))return;this._lastPreviewStringWoPulse=r}else{if(String(this._lastPreviewString)===String(r))return;this._lastPreviewString=r}t||(t=this),this._par.templates&&this._par.templates.getChangeListener().notifyPreviewChanged(r,this._par.template,t,i,n)},_onCropStateChanged:function(e){e?(s.a.addClassName(this._nodeCropActions,"generator-mockup__crop-actions--active"),s.a.removeClassName(this._nodeCropActions,"pf-d-none")):(s.a.removeClassName(this._nodeCropActions,"generator-mockup__crop-actions--active"),s.a.addClassName(this._nodeCropActions,"pf-d-none"),this._calculateWarningMessagePosition()),this._toggleAllWarningBanners(e)},_onLifelikeChanged:function(e,t){var i=this._isLifelike===e;this._isLifelike=e,this._lifelikeButton&&(this._isLifelike?s.a.removeClassName(this._lifelikeButton.node,"pf-d-none"):s.a.addClassName(this._lifelikeButton.node,"pf-d-none"),i||this._showLifelikePopover()),this._par.templates.getChangeListener().notifyLifelikeChanged(this._par.generatorVariant,this._isLifelike,t)},_onAlign:function(e,t){t&&t.stopPropagation();var i=this._getSelectedLayer();if(i){var n=i.isCropPositionUpdateNeeded(),r=(n?i.cropPosition:i.position).getClone().align(e);n?this._par.templates.updateCropLayerPosition(i,r,this,C.b):this._par.templates.updateLayerPosition(i,r)}},_onMove:function(e,t,i){var n=this._getSelectedLayer();if(n){var r=n.isCropPositionUpdateNeeded(),a=(r?n.cropPosition:n.position).getClone();a.left+=e,a.top+=t,r?this._par.templates.updateCropLayerPosition(n,a,i,C.b):this._par.templates.updateLayerPosition(n,a,i)}},_onScale:function(e,t){var i=this._getSelectedLayer();if(i&&this._par&&this._par.template&&this._par.template.fillMode){var n=i.isCropPositionUpdateNeeded(),r=this._par.templates.getFreshLayer(i),a=(n?r.cropPosition:r.position).getClone();"w"===a.getScaleDimensionByFillMode(this._par.template.fillMode)?a.setWidthScale(e/100):a.setHeightScale(e/100),n?this._par.templates.updateCropLayerPosition(i,a,t,C.d):this._par.templates.updateLayerPosition(i,a,t)}},_onReset:function(e){e&&e.stopPropagation();var t=this._getSelectedLayer();t&&this._par.templates.resetLayer(t)},_onFit:function(e){e&&e.stopPropagation();var t=this._getSelectedLayer();t&&this._par.templates.fitLayerSize(t)},updateLayersPositions:function(e,t,i){this.isEventOrigin(i)||(t?this._canvas.setLayer(t):this._canvas.setLayers(e?e.layersToArray():[]),this._updateSliderState())},showActiveLayer:function(e){if(e){var t=this._getSelectedLayer(),i=this._canvas.getActiveLayer();(t||i)&&(t&&t.uniqueId===e.uniqueId&&i&&i.uniqueId===e.uniqueId||this._canvas.showActiveLayer(e.uniqueId))}},showActiveGroup:function(e){if(e){var t=this._getSelectedGroupLayers(),i=this._canvas.getActiveGroupLayers();(null!=t&&t.length||i.length)&&(null!=t&&t.length&&t[0].groupId===e&&null!=i&&i.length&&i[0].groupId===e||this._canvas.showActiveGroup(e))}},setActiveLayer:function(e,t,i){var n=e&&this._lastActiveLayer&&this._lastActiveLayer.uniqueId===e.uniqueId;this._lastActiveLayer=e,this._lastActiveLayerGroup=null,this._bindKeypressEvents(),this._controls&&(this.showActiveLayer(e),this._updateSliderState()),n||this._clearAllWarningBanners(),i&&!n&&this._lastActiveLayer&&r.a.unblockEvent("transparency-warning-show"),t||this._par.templates.setActiveLayer(e,i)},_clearAllWarningBanners:function(){this._removeQualityAlert(!1),this._removeCustomizableTextLayerError(),this._removeRemoveBgBanner(!0),this._removeOutOfBoundsAlert(!0)},_toggleAllWarningBanners:function(e){var t,i,n;[this._nodeImageQualityMessage,null===(t=this._nodeCustomizableTextLayerError)||void 0===t?void 0:t.node,null===(i=this._nodeRemoveBackgroundMessage)||void 0===i?void 0:i.node,null===(n=this._nodeLayerOutOfBounds)||void 0===n?void 0:n.node].forEach((function(t){t&&(e?s.a.addClassName(t,"pf-d-none"):s.a.removeClassName(t,"pf-d-none"))}))},setActiveGroup:function(e,t,i){var n,a=(null==e?void 0:e.length)&&(null===(n=this._lastActiveLayerGroup)||void 0===n?void 0:n.length)&&this._lastActiveLayerGroup[0].groupId===e[0].groupId;if(this._lastActiveLayerGroup=e,this._lastActiveLayer=null,this._bindKeypressEvents(),this._controls){var o=e[0].groupId;this.showActiveGroup(o),this._updateSliderState()}a||this._clearAllWarningBanners(),i&&!a&&this._lastActiveLayerGroup&&r.a.unblockEvent("transparency-warning-show"),t||this._par.templates.setActiveGroup(e,i)},_onArrowKeyPress:function(e){var t,i=this;if(this._par.disableLayerManipulations||!this._par.isResizable||null!==(t=this._par.templates.getActiveLayer())&&void 0!==t&&t.isMockupLayer())this._unbindKeypressEvents();else if(Object(a.a)(this.node)){if(e.target.getAttribute("data-prevent"))if(e.target.getAttribute("data-prevent").split(", ").indexOf(e.key)>-1)return;this._getSelectedLayers().forEach((function(t){return i._onArrowKeyPressProcessLayer(e,t)}))}else this._unbindKeypressEvents()},_onArrowKeyPressProcessLayer:function(e,t){if(t&&!t.isCropState){var i=t.isCropPositionUpdateNeeded(),n=i?t.cropPosition.getClone():t.position.getClone(),r=Object(j.h)()||Object(j.f)()?10:.1,a=["TEXTAREA","INPUT"],o=document.activeElement.className.split(" "),s=["font-dropdown__font"].some((function(e){return o.indexOf(e)>-1}));switch(e.which){case $.ui.keyCode.LEFT:n.left-=r;break;case $.ui.keyCode.UP:s||(n.top-=r);break;case $.ui.keyCode.RIGHT:n.left+=r;break;case $.ui.keyCode.DOWN:s||(n.top+=r);break;case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:var l;if(!this._par.isCustomizingMode&&a.indexOf(document.activeElement.tagName)<0)null!==(l=this._lastActiveLayerGroup)&&void 0!==l&&l.length?this._onGroupRemoved():this._onLayerRemoved(this._lastActiveLayer)}switch(e.which){case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:e.preventDefault(),i?this._par.templates.updateCropLayerPosition(t,n,this,C.b):this._par.templates.updateLayerPosition(t,n,this);break;case $.ui.keyCode.BACKSPACE:case $.ui.keyCode.DELETE:a.indexOf(document.activeElement.tagName)<0&&e.preventDefault()}}},_onLayerRemoved:function(e){if(this._par.onLayerRemoved)return this._par.onLayerRemoved(e)},_onGroupRemoved:function(){var e=this;this._getSelectedGroupLayers().forEach((function(t){return e._onLayerRemoved(t)}))},displayQualityIndicators:function(){if(this._par.templates){var e=this._getSelectedLayer();if(e){var t=this._par.templates.getTemplateByLayer(e),i=this._par.templates.getQuality(),n=i.getQualityPercent(e),r=t&&t.technique===_.a.TECHNIQUE_EMBROIDERY,a=t?t.placementId:"",o=i.getQualityKey(n,e,r,this._par.isCustomizingMode,null,a);this._showQualityAlert(o),this._updateQualityText(o,e)}}},displayOutOfBoundsIndicator:function(){var e=this;if(this._par.templates&&!this._par.disableOutOfBoundsErrorMessages){var t=this._getSelectedGroupLayers(),i=this._getSelectedLayer();if(i||t.length){var n=!1,r=t.length?t:[i],a=this._par.templates.getTemplateByLayer(r[0]),o=this._par.templates.getQuality(),s=this._isAllOverProduct(),l=r.map((function(e){var t;return e.percent=o.getQualityPercent(e),e.qualityKey=k.a.QUALITY_GOOD,!s&&e.isPartiallyOutOfBounds()&&(e.qualityKey=k.a.QUALITY_MEDIUM),null!==(t=Object(B.a)())&&void 0!==t&&t.isEmbroidery()&&a&&a.technique===_.a.TECHNIQUE_EMBROIDERY&&e.isTextLayerPartiallyOutOfBounds()&&(e.qualityKey=k.a.QUALITY_EMBROIDERY,n=!0),e})),c=l.filter((function(e){return e.qualityKey!==k.a.QUALITY_GOOD}));(c.length?c:l).forEach((function(t){!e._par.showImageQualityWarning||n||t.patternType||e._showOutOfBoundsAlert(t.qualityKey,t.isCustomizable)}));var u=a&&a.technique===_.a.TECHNIQUE_EMBROIDERY;l.forEach((function(t){o.getQualityKey(t.percent,t,u,e._par.isCustomizingMode)!==k.a.QUALITY_GOOD?e.displayQualityIndicators():e._removeQualityAlert(!1)}))}}},displayOutOfBoundsIndicatorForMockupLayer:function(){this._par.templates.getActiveLayer().isMockupLayer()&&this._showOutOfBoundsAlertForMockupLayer()},displayCustomizableTextLayerError:function displayCustomizableTextLayerError(){var e=this;if(this._par.templates&&this._par.showImageQualityWarning){var t=this._getSelectedLayer(),i=t?[t]:this._getSelectedGroupLayers();i.length&&(this._nodeCustomizableTextLayerError&&this._removeCustomizableTextLayerError(),i.forEach((function(t){t.isCustomizable&&(t.hasMultipleLines||t.arcAngle?e._nodeCustomizableTextLayerError=new A.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support text arcs or multiple lines")}):t.colorGraphic?e._nodeCustomizableTextLayerError=new A.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support graphic colors")}):t.cropPosition&&(e._nodeCustomizableTextLayerError=new A.a({className:"customizable-warning-banner",type:"danger",content:dlang("generator","Personalization tool doesn't support cropped images")})),e._nodeCustomizableTextLayerError&&e._nodeCustomizableTextLayerError.append(e.node))})))}},_removeCustomizableTextLayerError:function _removeCustomizableTextLayerError(){var e;null===(e=this._nodeCustomizableTextLayerError)||void 0===e||e.remove(),this._nodeCustomizableTextLayerError=null},displayRemoveBackgroundMessage:function(e){var t;this._nodeRemoveBackgroundMessage&&this._removeRemoveBgBanner();var i=(U(t={},L.a.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND,{type:"danger",heading:dclang("generator","background removal","Please review your image"),content:dclang("generator","background removal","The background can't be removed because it either doesn't have enough contrast, isn't a solid color, or is too detailed. Please adjust the image and re-upload it or upload a different one.")}),U(t,L.a.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK,{type:"danger",content:dclang("generator","background removal","Another process is currently active. Please close any other open tabs of this page and try again.")}),U(t,L.a.REMOVE_BG_MESSAGE_LIMIT_REACHED,{type:"danger",heading:dclang("generator","background removal","Uh-oh! Our background cutting robot needs a break!"),content:dclang("generator","background removal","Currently, our AI can't process more images. Please try again in a minute.")}),U(t,L.a.REMOVE_BG_MESSAGE_ERROR,{type:"danger",content:dlang("site","Something went wrong, please try again!")}),t),n=U({},L.a.REMOVE_BG_MESSAGE_OK,{type:"success",content:dclang("generator","background removal","Success, background removed!"),duration:1e3});if(i[e]){var r={className:"remove-bg-banner",closable:!0,onAfterElementRemoved:this._removeRemoveBgBanner.bind(this)},a=Object.assign({},r,i[e]);this._nodeRemoveBackgroundMessage=new A.a(a),this._nodeRemoveBackgroundMessage.append(this.node),this._calculateWarningMessagePosition()}else n[e]&&new R.a(n[e])},_getRemoveBgMessageHeight:function(){return this._nodeRemoveBackgroundMessage?$(this._nodeRemoveBackgroundMessage.node).height()+40:0},_getQualityMessageHeight:function(){return $(".mockup-quality-banner").length?$(".mockup-quality-banner").height()+40:0},_getCustomizableMessageHeight:function(){return this._nodeCustomizableTextLayerError?$(this._nodeCustomizableTextLayerError.node).height()+40:0},_getOutOfBoundsMessageHeight:function(){return this._nodeLayerOutOfBounds?$(this._nodeLayerOutOfBounds.node).height()+40:0},_getEmbroideryMessageHeight:function(){return $(".embroidery-image-quality-banner").length?$(".embroidery-image-quality-banner").height()-42:0},_getLayersRepositionedWarningHeight:function(){var e=document.getElementsByClassName(x.a);return e.length?e[0].clientHeight+40:0},_calculateWarningMessagePosition:function(){var e=this._getCustomizableMessageHeight();if(this._nodeImageQualityMessage&&$(".mockup-quality-banner").css({top:e,transition:"all 0.2s ease-in"}),e+=this._getQualityMessageHeight(),this._nodeRemoveBackgroundMessage&&$(this._nodeRemoveBackgroundMessage.node).css({top:e,transition:"all 0.2s ease-in"}),e+=this._getRemoveBgMessageHeight(),$(".embroidery-image-quality-banner").length&&$(".embroidery-image-quality-banner").css({top:e,transition:"all 0.2s ease-in"}),e+=this._getEmbroideryMessageHeight(),document.getElementsByClassName(x.a).length){var t=document.getElementsByClassName(x.a)[0];t.style.top=e+"px",t.style.transition="all 0.2s ease-in"}e+=this._getLayersRepositionedWarningHeight(),this._nodeLayerOutOfBounds&&$(this._nodeLayerOutOfBounds.node).css({top:e,transition:"all 0.2s ease-in"})},_getSelectedLayer:function(){var e=this._par.templates.getActiveLayer()||this._lastActiveLayer;return e?this._par.templates.getFreshLayer(e):null},_getSelectedGroupLayers:function(){var e=this,t=this._par.templates.getActiveGroupLayers()||this._lastActiveLayerGroup;return null!=t&&t.length?t.map((function(t){return e._par.templates.getFreshLayer(t)})).filter((function(e){return null==e?void 0:e.groupId})):[]},_getSelectedLayers:function(){var e=this._getSelectedLayer();return e?[e]:this._getSelectedGroupLayers()},_removeOutOfBoundsAlert:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this._nodeLayerOutOfBounds)||void 0===e||e.remove(),this._nodeLayerOutOfBounds=null,t||this._calculateWarningMessagePosition()},_removeRemoveBgBanner:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=this._nodeRemoveBackgroundMessage)||void 0===e||e.remove(),this._nodeRemoveBackgroundMessage=null,t||this._calculateWarningMessagePosition()},_removeQualityAlert:function(e){this._nodeImageQualityMessage&&(this._qualityMessageClosedManually=e,this._nodeImageQualityMessage.remove(),this._nodeImageQualityMessage=null,this._qualityKey===k.a.QUALITY_TRANSPARENCY&&this._qualityMessageClosedManually&&(r.a.trackEvent("transparency-warning-hide",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Message pop-up closed",eventLabel:this._getActiveLayerFileId()}),this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]=!0,r.a.unblockEvent("transparency-warning-show"),this._onMouseOutQualityAlert()),this._qualityKey=null,this._calculateWarningMessagePosition())},_onMouseOverQualityAlert:function(){var e=this;this._qualityKey===k.a.QUALITY_TRANSPARENCY&&(this._transparencyWarningHoverTimeout||(this._transparencyWarningHoverTimeout=[]),this._transparencyWarningHoverTimeout.push(setTimeout((function(){r.a.trackEvent("transparency-warning-hover",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Customer hovered over the message",eventLabel:e._getActiveLayerFileId()},!0)}),4e3)))},_onMouseOutQualityAlert:function(){this._qualityKey===k.a.QUALITY_TRANSPARENCY&&(this._transparencyWarningHoverTimeout&&(this._transparencyWarningHoverTimeout.forEach((function(e){return clearTimeout(e)})),this._transparencyWarningHoverTimeout=[]),r.a.unblockEvent("transparency-warning-hover"))},_getActiveLayerFileId:function(){var e=this._par.templates?this._par.templates.getActiveLayer():null;return e.fileItem?e.fileItem.fileId:null},_showQualityAlert:function(e){if(this._par.showImageQualityWarning){var t=e===k.a.QUALITY_GOOD,i=e===k.a.QUALITY_MEDIUM,n=this._qualityMessageClosedManually;t||i&&n?this._nodeImageQualityMessage&&this._removeQualityAlert(!1):(this._nodeImageQualityMessage||(this._nodeImageQualityMessage=Object(s.b)("div",{prop:{onmouseover:this._onMouseOverQualityAlert.bind(this),onmouseleave:this._onMouseOutQualityAlert.bind(this)}})),this._nodeImageQualityMessage.append(this.node),this._updateQualityAlertText(e),e===k.a.QUALITY_TRANSPARENCY&&this._nodeImageQualityMessage.className&&this._lastActiveLayer&&!this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]&&r.a.trackEvent("transparency-warning-show",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Message appeared",eventLabel:this._getActiveLayerFileId()},!0),this._qualityKey=e)}},_showOutOfBoundsAlert:function(e,t){e===k.a.QUALITY_GOOD?this._nodeLayerOutOfBounds&&this._removeOutOfBoundsAlert():(this._nodeLayerOutOfBounds||(this._nodeLayerOutOfBounds=new A.a({className:"out-of-bounds-banner",type:"warning",content:t?lang("Make sure all design elements fit inside the print area"):lang("Part of your design layer is outside the print area."),closable:!0,onCloseClick:this._removeOutOfBoundsAlert.bind(this)})),this._nodeLayerOutOfBounds.append(this.node),this._calculateWarningMessagePosition())},_showOutOfBoundsAlertForMockupLayer:function(){var e;this._nodeLayerOutOfBounds&&this._removeOutOfBoundsAlert(),!this._nodeLayerOutOfBounds&&this._par.templates.getActiveLayer().isMockupLayerPartiallyOutOfBounds()&&(this._nodeLayerOutOfBounds=new A.a({className:"out-of-bounds-banner pf-text-left",type:"warning",heading:dlang("generator","Please don't hide the model"),content:dlang("generator","People will probably want to see your design"),closable:!0,onCloseClick:this._removeOutOfBoundsAlert.bind(this)})),null===(e=this._nodeLayerOutOfBounds)||void 0===e||e.append(this.node),this._calculateWarningMessagePosition()},_updateQualityAlertText:function(e){var t,i=e===k.a.QUALITY_MEDIUM,r=e===k.a.QUALITY_BAD_UPSCALE,a=e===k.a.QUALITY_TRANSPARENCY,o=e===k.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,l=this._qualityMessageClosedManually,c=null===(t=Object(B.a)())||void 0===t?void 0:t.isEmbroidery(),u=this._par.isCustomizingMode;if(!(l&&(i||r)||u&&r||a&&this._lastActiveLayer&&this._par.templates.closedTransparencyWarnigns[this._lastActiveLayer.uniqueId]||c&&!o)){var d={};if(d[k.a.QUALITY_GOOD]=null,d[k.a.QUALITY_MEDIUM]={type:"warning",heading:dlang("generator","We recommend using a larger image"),content:dlang("generator","A larger image will give you better print results"),closable:!0},d[k.a.QUALITY_EMBROIDERY]={type:"danger",content:n.a.EMBROIDERY_OUT_OF_BOUNDS},d[k.a.QUALITY_BAD]=this._par.isCustomizingMode||this._getSelectedLayer().isLicensedAssetLayer()?{type:"danger",heading:dlang("generator","This file is too small to generate print files"),content:dlang("generator","Please upload a new file")}:c?{type:"danger",heading:dlang("generator","Your image doesn't meet our print requirements"),content:dlang("generator","Scale down the image to meet the minimum requirements or upload a new image")}:{type:"danger",heading:dlang("generator","Your image doesn't meet our print requirements"),content:dlang("generator","Scale down the image to meet the minimum requirements or upload a new image"),buttonText:dlang("generator","Scale down"),onButtonClick:this._scaleDownToUpscale.bind(this)},d[k.a.QUALITY_BAD_UPSCALE]={type:"warning",heading:dlang("generator","We made your image larger"),content:dlang("generator","If you want even better print quality, please upload a larger image"),closable:!0},d[k.a.TEXT_TOO_SMALL]={type:"warning",content:dlang("dashboard","Minimum recommended font size is 0.275 â smaller text may not be easily readable."),closable:!0},d[k.a.EMBROIDERY_TEXT_TOO_SMALL]={type:"danger",content:n.a.EMBROIDERY_TEXT_TOO_SMALL},d[k.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT]={type:"danger",heading:n.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,content:dlang("generator","Please scale down your text or pick a different font"),buttonText:dlang("generator","Scale down"),onButtonClick:this._scaleDownText.bind(this)},d[k.a.EMBROIDERY_TEXT_OVERLAPPING]={type:"danger",content:n.a.EMBROIDERY_LAYERS_OVERLAPPING},d[k.a.QUALITY_TRANSPARENCY]={type:"warning",heading:dlang("generator","Your file contains semi-transparent elements"),content:dlang("generator","This could affect print quality. We suggest creating a graphic with solid colors only."),buttonText:dlang("generator","More info"),onButtonClick:function(e){window.open(langUrl("/transparency-in-dtg-files"),"_blank")},closable:!0},d[e]){var h={className:"mockup-quality-banner",onCloseClick:this._removeQualityAlert.bind(this,!0)},p=Object.assign({},h,d[e]),f=new A.a(p);s.a.clearNode(this._nodeImageQualityMessage),f.append(this._nodeImageQualityMessage),this._calculateWarningMessagePosition()}}},_scaleDownToUpscale:function(){var e=this._par.templates.getRequiredDpi(),t=this._par.templates.getQuality().shouldSkipUpscale(this._getSelectedLayer())?e:Math.round(e/k.a.UPSCALE_MULTIPLIER);this._par.templates.resizeImageLayerToDPI(this._getSelectedLayer(),t)},_scaleDownText:function(){if(this._lastActiveLayer.font){var e=this._par.templates.getTemplateByLayer(this._lastActiveLayer),t=e.technique,i=e.placementId,n=this._lastActiveLayer.font.getResizedTextHeight(t,i);this._par.templates.resizeTextLayerToHeight(this._lastActiveLayer,n)}},_updateQualityText:function(e,t){if(this._par.isResizable&&!this._par.disableLayerManipulations){s.a.clearNode(this.nodePrintQuality);var i=H.qualityMap;Object(s.b)("span","pf-pr-12",[t instanceof o.a?dlang("generator","Clipart width"):dlang("generator","File width"),": ",Object(s.b)("span","pf-bold",t.position.width.toFixed(2))," ",dlang("generator","Height"),": ",Object(s.b)("span","pf-bold",t.position.height.toFixed(2)),Object(s.b)("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-2",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}})]).append(this.nodePrintQuality),Object(s.b)("span",{innerHTML:t.isVector()?dlang("generator",'Print quality: <span class="pf-bold {0}">{1} / vector graphics</span>').format(i[e][0],i[e][1]):dlang("generator",'Print quality: <span class="pf-bold {0}">{1} / {2} DPI</span>').format(i[e][0],i[e][1],t.getDPI())}).append(this.nodePrintQuality),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}).on("click",(function(e){$(this).tooltip("hide")}))}},_bindKeypressEvents:function(){this._unbindKeypressEvents(),document.body.addEventListener("keydown",this._onArrowKeyPress)},_unbindKeypressEvents:function(){document.body.removeEventListener("keydown",this._onArrowKeyPress)},getPreviewImageEncodedString:function(){return this._canvas.getPreviewImageString()},getCanvas:function(){return this._canvas},hideNodeControlsHolder:function(){s.a.addClassName(this._nodeControlsHolder,"pf-d-none")},showNodeControlsHolder:function(){s.a.removeClassName(this._nodeControlsHolder,"pf-d-none")},_isAllOverProduct:function(){var e=Object(B.a)();return this._par.templates.isCoverMode()&&e&&!(e.isPhoneCase()||e.isPoster()||e.isCanvas()||e.isFramedPoster())}},s.a.Base);H.qualityMap=(U(O={},k.a.QUALITY_GOOD,["pf-text-green",clang("quality rating","Good")]),U(O,k.a.QUALITY_MEDIUM,["pf-text-yellow-dark",clang("quality rating","Average")]),U(O,k.a.QUALITY_BAD,["pf-text-red",clang("quality rating","Poor")]),U(O,k.a.QUALITY_BAD_UPSCALE,["pf-text-yellow-dark",clang("quality rating","Average")]),U(O,k.a.QUALITY_EMBROIDERY,["pf-text-red",clang("quality rating","Poor")]),U(O,k.a.QUALITY_TRANSPARENCY,["pf-text-yellow-dark",clang("quality rating","Average")]),U(O,k.a.TEXT_TOO_SMALL,["pf-text-yellow-dark",clang("quality rating","Average")]),U(O,k.a.EMBROIDERY_TEXT_TOO_SMALL,["pf-text-red",clang("quality rating","Poor")]),U(O,k.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,["pf-text-red",clang("quality rating","Poor")]),U(O,k.a.EMBROIDERY_TEXT_OVERLAPPING,["pf-text-red",clang("quality rating","Poor")]),O),H.qualityTagTextMap=U({},k.a.QUALITY_BAD_UPSCALE,{header:dlang("generator","Our AI adjusted your image"),content:dlang("generator","It now meets our print requirements")}),H.TagPopoverClosed={},H.TagCurrOpenPopover=null,H.TagPopoverRemove=function(){H.TagCurrOpenPopover&&(H.TagCurrOpenPopover.destroy(),H.TagCurrOpenPopover=null)},H.isGridVisible=null,H.isZoomedIn=null,H.resetGrid=function(){H.isGridVisible=null},H.resetZoom=function(){H.isZoomedIn=null},window&&((globalThis||{}).PFComponentsGeneratorMockup=H)},N6Gp:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("Tt8e"),r=i("nF4n"),a=Class({headerDropDownTitle:"",headerDropDownPosition:1,sidebarNavTitle:"",showNewSidebarSetAt:null,sidebarNavPosition:1,thumbnailTitle:"",breadcrumbName:"",updateRegionProductsAutomatically:!1,productsRegion:""});a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFProductsCatalogItemsCategorySettings=a);var o=Class({page:"",name:"",mainHeading:"",pageTitle:"",metaDescription:"",markupItemName:""});o.fromArray=function(e){var t=new o;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFProductsCatalogItemsCategorySeoItem=o);var s=i("6B/H"),l=i("cCrT"),c=i("YBfo"),u=i("sjGI"),d=Class({id:null,key:"",title:"",parentId:0,slug:"",search:"",urlImage:"",children:[],tabs:[],seo:{},settings:null,thumbSize:4,hiddenInCatalog:0,hiddenInOrderFlow:0,catalogPosition:1,description:"",isActive:!1,isBeta:!1,isClone:!1,temporaryFileKey:"",textBlock:{title:{value:""},columns:[]},editShippingUrl:"",editGalleryUrl:"",isNew:!1,isNewSetAt:"",relevantSortingRegions:null,localizedSettings:{},getUrl:function(e){var t,i;e||(e=c.b.urlPrefix);var n=new l.a;return n.path=e+(this.slug?"/"+this.slug:""),e!==(null===(t=c.a.PRODUCT_CATALOG_INDEX_SLUG_CHANGES)||void 0===t||null===(i=t[u.a.locale])||void 0===i?void 0:i.old)||this.slug||(n.path=c.a.PRODUCT_CATALOG_INDEX_SLUG_CHANGES[u.a.locale].new),n.toString()},getBreadcrumbName:function(){return this.settings&&""!==this.settings.breadcrumbName?this.settings.breadcrumbName:this.title},getSidebarTitle:function(){return this.settings&&this.settings.sidebarNavTitle?this.settings.sidebarNavTitle:this.title},isEmbroideryShirts:function(){return this.id===d.ID_EMBROIDERY_SHIRTS}});d.fromArray=function(e){var t=new d;if(r.a.O2O(t,e),t.children=n.a.convertToArray(e.children).map(d.fromArray),e.tabs&&(t.tabs=n.a.convertToArray(e.tabs).map(s.a.fromArray)),e.seo)for(var i in e.seo)for(var l in e.seo[i])t.seo[i][l]=o.fromArray(e.seo[i][l]);return e.settings?t.settings=a.fromArray(e.settings):t.settings=new a,t},d.ID_EMBROIDERY_SHIRTS=85,d.ID_FACE_MASKS=126,d.ID_FAKE_FAVORITES=-1,d.getTemporaryFavoritesCategory=function(e){var t=new d;return t.id=d.ID_FAKE_FAVORITES,t.title=dlang("products","Favorites"),t.slug="favorites/products",t.isActive=!0,t.parentId=e,t.enableTitle=!1,t},window&&((globalThis||{}).PFProductsCatalogItemsCategoryItem=d)},NCUI:function(e,t,i){"use strict";i.d(t,"a",(function(){return ce})),i.d(t,"d",(function(){return ue})),i.d(t,"b",(function(){return de})),i.d(t,"c",(function(){return he}));var n=i("KLvT"),r=i("nF4n"),a=i("SBaP"),o=i("x0He");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),v(g(t),P,e),t.node=tag("span","designer-toolbar"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"callEvent",value:function(e,t){_(this,P)[e]?_(this,P)[e](t):"onDestroy"===e&&this.destroy()}},{key:"destroy",value:function(){var e;null===(e=_(this,b))||void 0===e||e.destroy(),v(this,b,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(a.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new o.b).components={"designer-toolbar":function(){return i.e(195).then(i.bind(null,"vqGV"))}},t.template='\n            <designer-toolbar\n                :designer="designer"\n                @showToolbarDetailsContainer="emitEvent(\'showToolbarDetailsContainer\', $event)"\n                @showLayerPicker="emitEvent(\'showLayerPicker\', $event)"\n                @onDestroy="emitEvent(\'onDestroy\', $event)"\n            />\n        ',t.emitEvent=this.callEvent.bind(this),t.plugins={store:Object(n.a)()},t.initialData={designer:{getActiveTemplate:_(this,P).designer.getTemplates().getActiveTemplate,shouldEnablePatternPicker:_(this,P).designer.shouldEnablePatternPicker,isRemoveBgEnabled:_(this,P).designer.shouldEnableRemoveBg(),onRequestRemoveBg:_(this,P).designer.onRequestRemoveBg,notifyLayerConfigurationChanged:_(this,P).designer.getTemplates().getChangeListener().notifyLayerConfigurationChanged,isAllOverProduct:_(this,P).designer.isAllOverProduct}},v(this,b,new o.a(t)),_(this,b).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.showToolbarDetailsContainer=t.showToolbarDetailsContainer,this.showLayerPicker=t.showLayerPicker,this.designer=t.designer},E=i("tx4t");function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function L(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){k(a,n,r,o,s,"next",e)}function s(e){k(a,n,r,o,s,"throw",e)}o(void 0)}))}}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=M(e);if(t){var r=M(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return x(this,i)}}function x(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,j(e,t,"get"))}function V(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,j(e,t,"set"),i),i}function j(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var U=new WeakMap,z=new WeakMap,G=new WeakSet,H=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(a,e);var t,i,n,r=D(a);function a(e){var t;return A(this,a),t=r.call(this),G.add(F(t)),U.set(F(t),{writable:!0,value:void 0}),z.set(F(t),{writable:!0,value:void 0}),V(F(t),z,e),t.node=tag("span","designer-toolbar-picker"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(F(t),G,q).call(F(t)),t}return t=a,(i=[{key:"callEvent",value:function(e,t){B(this,z)[e]?B(this,z)[e](t):"onDestroy"===e&&this.destroy()}},{key:"destroy",value:function(){var e;null===(e=B(this,U))||void 0===e||e.destroy(),V(this,U,null)}}])&&R(t.prototype,i),n&&R(t,n),a}(a.a);function q(){return Y.apply(this,arguments)}function Y(){return(Y=L(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new o.b).components={"sidebar-container":function(){return i.e(331).then(i.bind(null,"qgKu"))}},t.template='\n            <sidebar-container\n                :designer="designer"\n                @backToLayerPicker="emitEvent(\'backToLayerPicker\', $event)"\n                @align="emitEvent(\'align\', $event)"\n                @onArcAngleChanged="emitEvent(\'onArcAngleChanged\', $event)"\n                @onRotationAngleChanged="emitEvent(\'onRotationAngleChanged\', $event)"\n                @flip="emitEvent(\'flip\', $event)"\n                @onTextChange="emitEvent(\'onTextChange\', $event)"\n                @onDestroy="emitEvent(\'onDestroy\', $event)"\n                @onWidthChanged="emitEvent(\'onWidthChanged\', $event)"\n                @onHeightChanged="emitEvent(\'onHeightChanged\', $event)"\n                @onLockUniScalingClicked="emitEvent(\'onLockUniScalingClicked\', $event)"\n            />\n        ',t.emitEvent=this.callEvent.bind(this),t.plugins={store:Object(n.a)()},t.initialData={designer:{isToolbarPickerTabVisible:function(){var e;return!(null!==(e=B(r,z).designer.getPickerTabContents()[E.a.TAB_TOOLBAR])&&void 0!==e&&e.classList.length)},showDesignTab:B(this,z).designer.showDesignTab,showSizesInPx:1===B(this,z).designer.getTemplates().getRequiredDpi(),updateImageLayer:B(this,z).designer.getTemplates().updateImageLayer,updateClipartLayer:B(this,z).designer.getTemplates().updateClipartLayer,updateLicensedAssetLayer:B(this,z).designer.getTemplates().updateLicensedAssetLayer,onTextLayerChanged:B(this,z).designer.onTextLayerChanged}},V(this,U,new o.a(t)),B(this,U).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var W=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};A(this,e),this.designer=t.designer,this.backToLayerPicker=t.backToLayerPicker,this.align=t.align,this.onArcAngleChanged=t.onArcAngleChanged,this.onRotationAngleChanged=t.onRotationAngleChanged,this.flip=t.flip,this.onWidthChanged=t.onWidthChanged,this.onHeightChanged=t.onHeightChanged,this.onWidthHeightChanged=t.onWidthHeightChanged,this.onLockUniScalingClicked=t.onLockUniScalingClicked,this.onTextChange=t.onTextChange},K=i("pWIn"),Z=(i("7h5t"),i("mrkb")),X=i("stj/"),Q=i("sWGB"),$=i("wo5H");function J(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ee(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function te(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ne(e,t,"get"))}function ie(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ne(e,t,"set"),i),i}function ne(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var re=new WeakMap,ae=new WeakMap,oe=new WeakMap,se=new WeakMap,le=new WeakMap,ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),re.set(this,{writable:!0,value:null}),ae.set(this,{writable:!0,value:null}),oe.set(this,{writable:!0,value:null}),se.set(this,{writable:!0,value:null}),le.set(this,{writable:!0,value:null}),ie(this,re,t),ie(this,ae,tag("div","designer-toolbar-wrapper")),ie(this,se,tag("div","designer-toolbar-picker-wrapper pf-mt-12"))}var t,i,a,o,s;return t=e,(i=[{key:"getNodeToolbarPicker",value:function(){return te(this,se)}},{key:"renderToolbar",value:function(){var e,t=te(this,re)&&te(this,re).call(this),i=null===(e=te(this,oe))||void 0===e?void 0:e.node.childNodes[0].hasChildNodes();if(!t||!Object(Z.a)()||i)return te(this,ae);r.a.clearNode(te(this,ae));var n=new S({showToolbarDetailsContainer:function(){t.showPickerTab(E.a.TAB_TOOLBAR)},showLayerPicker:function(){t.showDesignTab()},designer:t});return ie(this,oe,new T(n)),te(this,oe).append(te(this,ae)),te(this,ae)}},{key:"renderSidebar",value:function(){var e,t=te(this,re)&&te(this,re).call(this),i=null===(e=te(this,le))||void 0===e?void 0:e.node.childNodes[0].hasChildNodes();if(t&&Object(Z.a)()&&!i)if(t.arePickersVisible()){r.a.clearNode(te(this,se));var n=new W({backToLayerPicker:function(){t.showDesignTab()},align:function(e){var i=t.getLayerPicker();null==i||i.alignLayer(e.layer,e.value)},onArcAngleChanged:function(e){var i=e.layer;i&&(i.arcAngle=parseFloat(e.value),i.alignment,K.a.ALIGN_CENTER,t.onTextLayerChanged(i))},onRotationAngleChanged:function(e){var i=e.layer;if(i)if(i.getType()===$.l.TEXTBOX)i.position.rotation=parseFloat(e.value),t.onTextLayerChanged(i);else{var n=t.getLayerPicker();null==n||n.onRotate(i,e.value,this)}},flip:function(e){var i=e.layer,n=t.getLayerPicker();if(i&&n){var r="X"===e.value,a="Y"===e.value;r&&(i.flipX=!i.flipX),a&&(i.flipY=!i.flipY),n.notifyLayerFlipChanged(i,r,a)}},onWidthChanged:function(e){this.onWidthHeightChanged("width",e)},onHeightChanged:function(e){this.onWidthHeightChanged("height",e)},onWidthHeightChanged:function(e,i){var n=i.layer;if(n&&("width"===e||"height"===e)){var r=n.isCropPositionUpdateNeeded(),a=r?n.cropPosition:n.position,o=a.getClone().copyPositions(a),s=a.width/a.height,l="width"===e?"height":"width";o[e]=parseFloat(i.value),(n.isImageLayer()||n.isLicensedAssetLayer()||n.isPropLayer()||n.lockUniScaling)&&(o[l]="width"===e?o[e]/s:o[e]*s,o[l]<1&&(o[l]=1,o[e]="width"===e?o[l]*s:o[l]/s)),o.left+=(a.width-o.width)/2,o.top+=(a.height-o.height)/2,r?t.getTemplates().updateCropLayerPosition(n,o,this,$.d):t.getTemplates().updateLayerPosition(n,o,this,!0),t.getTemplates().getChangeListener().notifyLayerConfigurationChanged(n,this)}},onLockUniScalingClicked:function(e){var i=e.layer;i&&(i.lockUniScaling=!i.lockUniScaling,t.getTemplates().getChangeListener().notifyLayerConfigurationChanged(i,this),t.getTemplates().silentlySetActiveLayer(i))},onTextChange:function(e){var i=e.layer;if(i){var n=e.value.trim();if(!n){var r=t.getTemplates().getTemplateByLayer(i);return t.getTemplates().removeLayer(r,i),void t.getDesignerToolbarService().setVirtualTextLayer(t._technique,i)}i.text=n,i.isTemporary?(i.setUniqueId(),t.onTextLayerCreated(i)):t.onTextLayerChanged(i)}},designer:t});ie(this,le,new H(n)),te(this,le).append(te(this,se))}else r.a.clearNode(te(this,se))}},{key:"setActiveToolbarView",value:function(e){Object(n.a)().commit(X.e(X.h),e)}},{key:"setVirtualTextLayer",value:(o=regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(Q.g(Q.k),{technique:t,fromLayer:i});case 2:case"end":return e.stop()}}),e)})),s=function(){var e=this,t=arguments;return new Promise((function(i,n){var r=o.apply(e,t);function a(e){J(r,i,n,a,s,"next",e)}function s(e){J(r,i,n,a,s,"throw",e)}a(void 0)}))},function(e,t){return s.apply(this,arguments)})},{key:"removeToolbar",value:function(){r.a.clearNode(te(this,ae))}}])&&ee(t.prototype,i),a&&ee(t,a),e}();function ue(){return Object(n.a)().getters[X.e(X.c)]}function de(){return Object(n.a)().getters[Q.g(Q.c)]}function he(){return Object(n.a)().getters[Q.g(Q.d)]}},NLc6:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({language:"",type:"",value:"",toArray:function(){return{type:this.type,language:this.language,value:this.value}}});n.fromArray=function(e){var t=new n;return t.language=e.language||"",t.type=e.type||"",t.value=e.value||"",t},n.TYPE_TITLE="title",n.TYPE_DESCRIPTION="description",n.TYPES=[n.TYPE_TITLE,n.TYPE_DESCRIPTION],window&&((globalThis||{}).PFItemsProductDetailTranslation=n)},NXHT:function(e,t,i){"use strict";i.r(t),i.d(t,"PFItemsOrderLineItem",(function(){return v}));var n=i("6t3j"),r=i("EqHI"),a=i("7QI8"),o=i("gWUq"),s=i("9Y8y"),l=(i("X5Ic"),i("qs6/")),c=i("how4"),u=i("K45J"),d=i("6JZw"),h=i("nF4n"),p=i("8l0M"),f=i("LvDl"),g=i.n(f);function m(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){m(a,n,r,o,s,"next",e)}function s(e){m(a,n,r,o,s,"throw",e)}o(void 0)}))}}var v=function(){this.options={},this.itemFiles=[]};v.prototype=new d.a,v.prototype.toArrayKeys=["itemId","uniqueId","orderId","quantity","price","priceRetail","syncVariantId","productTemplateId","externalId","name","technique","variantId","options","itemFiles","childItems","shouldCreateNewDesign","isCopy","design","designId","linkedCustomProductVariant"],v.prototype.itemId=0,v.prototype.uniqueId="",v.prototype.isReplacementFor=null,v.prototype.orderId=0,v.prototype.quantity=0,v.prototype.price=0,v.prototype.priceData=null,v.prototype.priceRetail=null,v.prototype.incompleteItem=null,v.prototype.externalId=null,v.prototype.syncVariantId=null,v.prototype.name="",v.prototype.retailPriceData=null,v.prototype.displayName="",v.prototype.storeProductName="",v.prototype.unavailableInSelectedBranches=!1,v.prototype.technique="",v.prototype.variantId=0,v.prototype.productId=0,v.prototype.isBrandingItem=null,v.prototype.isCustomProduct=!1,v.prototype.customProductTypes=[],v.prototype.customProductVariant=null,v.prototype.options=null,v.prototype.itemFiles=null,v.prototype.isLocked=null,v.prototype.itemHash=null,v.prototype.fileTypesBeingGenerated=null,v.prototype.filesBeingGenerated=!1,v.prototype.dimensions=null,v.prototype.childItems=[],v.prototype.designId=null,v.prototype.linkedCustomProductVariant=null,v.prototype.rawDesign=null,v.prototype.shouldCreateNewDesign=!1,v.prototype.isCopy=!1,v.prototype.isGeneratingFilesFromDesign=!1,v.prototype.originalRetailValue=null,v.prototype.lowestRetailPrice=null,v.prototype.productTemplateId=null,v.prototype.hasUnsupportedTechnique=!1,v.prototype.isEditable=function(){return!this.isLocked},v.prototype.setEditable=function(e){this.isLocked=null!==e?!e:null},v.prototype.getProduct=function(e){return(new n.a).getCachedProductById(this.productId,e)},v.prototype.getVariant=function(){return(new n.a).getCachedVariantById(this.variantId)},v.prototype.getNotes=function(){return this.options&&this.options.notes?this.options.notes:""},v.prototype.hasPrintFiles=function(){for(var e in this.itemFiles){var t=this.itemFiles[e];if(t.exists()&&t.type!=a.a.TYPE_MOCKUP)return!0}return!1},v.prototype.hasValidDesign=function(){return this.design&&this.design.isValid()},v.prototype.hasInvalidFileCount=function(){return!this.isCustomProductItem()&&this.itemFiles.some((function(e){var t=this.design&&this.design.hasPlacement(e.type);return e.exists()||e.isMockup()?e.hasTemporaryGeneratorFile()&&!t:t}),this)},v.prototype.isMissingPrintFiles=function(){return!!this.hasInvalidFileCount()||this.itemFiles.length>0&&!this.hasPrintFiles()&&!this.hasValidDesign()&&!this.isCustomProductItem()&&!this.hasGeneratorDesign()},v.prototype.hasAnyFile=function(){for(var e in this.itemFiles)if(this.itemFiles[e].exists())return!0;return!1},v.prototype.isFileTypeBeingGenerated=function(e){return this.fileTypesBeingGenerated&&this.fileTypesBeingGenerated.indexOf(e)>-1},v.prototype.getImageUrl=function(){return this.isCustomProduct?this.customProductVariant.urlImage:this.getVariant().urlImage},v.prototype.isCustomProductItem=function(){return this.isBrandingItem||this.isCustomProduct},v.prototype.isNonEditable=function(){return this.isCustomProductItem()||this.fileTypesBeingGenerated||this.filesBeingGenerated||this.hasUnsupportedTechnique},v.prototype.setFilesBeingGenerated=function(){this.filesBeingGenerated=!0},v.prototype.unsetFilesBeingGenerated=function(){this.filesBeingGenerated=!1},v.prototype.hasGeneratorDesign=function(){return!!this.isGeneratingFilesFromDesign||this.designId&&this.hasPrintFiles()},v.prototype.getCustomProductName=function(){return this.isCustomProduct?this.customProductVariant.name:this.getVariant().name},v.prototype.cacheItem=function(){(new n.a).getVariants(this.productId,(function(){}))},v.prototype.hasNativeLabel=function(){return void 0!==this.designData&&this.designData.labelTemplateType===r.a.LABEL_NATIVE},v.fromArray=function(e){var t=new v;for(var i in e.itemFiles){var n=a.a.fromArray(e.itemFiles[i]);t.itemFiles.push(n)}if(delete e.itemFiles,h.a.O2O(t,e),e.customProduct&&(t.customProduct=u.a.fromArray(e.customProduct)),e.priceData&&(t.priceData=l.a.fromArray(e.priceData)),e.customProductVariant&&(t.customProductVariant=s.a.fromArray(e.customProductVariant)),e.childItems)for(var r in e.childItems)t.childItems.push(v.fromArray(e.childItems[r]));return e.dimensions&&(t.dimensions=c.a.fromArray(e.dimensions)),e.design&&(t.rawDesign=e.design,t.design=null),t},v.prototype.getDesign=function(){return!this.design&&this.rawDesign&&(this.design=o.a.fromArray(this.rawDesign)),this.design},v.prototype.fetchFontsBeforeDesign=_(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(i.bind(null,"Jkv8"));case 2:return t=e.sent,n=t.setPFCanvasFonts,e.next=6,n();case 6:case"end":return e.stop()}}),e)}))),v.prototype.updateRetailPriceData=function(e){!this.originalRetailValue&&this.retailPriceData.currencyRate&&this.priceRetail&&(this.originalRetailValue={currency:this.retailPriceData.retailCurrency,value:this.priceRetail,valueInternalCurrency:this.retailPriceData.currencyRate*this.priceRetail}),this.lowestRetailPrice=prettyNumber(p.a.lowestRetailPrice*e.currencyRateUsd),this.retailPriceData=e,this.originalRetailValue?this.priceRetail=e.retailCurrency!==this.originalRetailValue.currency?Math.round(100*this.originalRetailValue.valueInternalCurrency/e.currencyRate)/100:this.originalRetailValue.value:this.priceRetail=null},v.prototype.hasLicensedAssetIssues=function(){return this.itemFiles.some((function(e){return e.isLicensedAsset&&!g.a.isEmpty(e.fileErrors)}))},v.prototype.containsProContent=function(){return this.itemFiles.some((function(e){return e.containsProContent}))},v.prototype.containsLicensedAssets=function(){return this.itemFiles.some((function(e){return e.containsLicensedAssets}))},window&&((globalThis||{}).PFItemsOrderLineItem=v)},NhST:function(e,t,i){"use strict";i.d(t,"a",(function(){return te}));var n=i("wy2R"),r=i.n(n);function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o(this,"symbolRange","â"),o(this,"time","HH:mm"),o(this,"day","D"),o(this,"month","MMMM"),o(this,"shortMonth","MMM"),o(this,"year","YYYY"),o(this,"monthDay","".concat(this.month," ").concat(this.day)),o(this,"monthYear","".concat(this.month,", ").concat(this.year)),o(this,"shortMonthDay","".concat(this.shortMonth," ").concat(this.day)),o(this,"shortMonthDayTime","".concat(this.shortMonthDay,", ").concat(this.time)),o(this,"shortMonthDayYear","".concat(this.shortMonthDay,", ").concat(this.year)),o(this,"monthDayYear","".concat(this.monthDay,", ").concat(this.year)),o(this,"shortMonthYear","".concat(this.shortMonth,", ").concat(this.year)),o(this,"shortMonthDayYearTime","".concat(this.shortMonthDay,", ").concat(this.year,", ").concat(this.time)),o(this,"monthNameArray",r.a.months()),o(this,"legacyShortMonthYear","M, yyyy")}var t,i,n;return t=e,(i=[{key:"format",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=r()(e),a=r()(t),o=i?this.shortMonthDay:this.month;return n.isSame(a,"month")?this.day:o}},{key:"formatWithTime",value:function(e){return r()(e).format(this.time)}},{key:"formatWithMonth",value:function(e){return r()(e).format(this.month)}},{key:"formatWithYear",value:function(e){return r()(e).format(this.year)}},{key:"formatWithMonthYear",value:function(e){return r()(e).format(this.monthYear)}},{key:"formatWithShortMonthDay",value:function(e){return r()(e).format(this.shortMonthDay)}},{key:"formatWithShortMonthDayTime",value:function(e){return r()(e).format(this.shortMonthDayTime)}},{key:"formatWithShortMonthDayYear",value:function(e){return r()(e).format(this.shortMonthDayYear)}},{key:"formatWithMonthDayYear",value:function(e){return r()(e).format(this.monthDayYear)}},{key:"formatWithShortMonthDayYearTime",value:function(e){return r()(e).format(this.shortMonthDayYearTime)}},{key:"getMonthNames",value:function(){return this.monthNameArray}}])&&a(t.prototype,i),n&&a(t,n),e}();function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(i,e);var t=d(i);function i(){var e;c(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return g(p(e=t.call.apply(t,[this].concat(r))),"time","h:ma"),g(p(e),"shortMonthDayTime","MMM D, "+e.time),g(p(e),"shortMonthDayYearTime","".concat(e.shortMonthDay,", ").concat(e.year,", ").concat(e.time)),e}return i}(s);function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=T(e);if(t){var r=T(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P(this,i)}}function P(e,t){return!t||"object"!==_(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(i,e);var t=b(i);function i(){var e;v(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return w(C(e=t.call.apply(t,[this].concat(r))),"symbolHour","æ"),w(C(e),"symbolMinute","å"),w(C(e),"symbolDay","æ¥"),w(C(e),"symbolMonth","æ"),w(C(e),"symbolYear","å¹´"),w(C(e),"symbolRange","ï½"),w(C(e),"time","h[".concat(e.symbolHour,"]m[").concat(e.symbolMinute,"]")),w(C(e),"day","D[".concat(e.symbolDay,"]")),w(C(e),"month","M[".concat(e.symbolMonth,"]")),w(C(e),"year","YYYY[".concat(e.symbolYear,"]")),w(C(e),"monthDay","".concat(e.month).concat(e.day)),w(C(e),"monthYear","".concat(e.year).concat(e.month)),w(C(e),"shortMonthDay",e.monthDay),w(C(e),"shortMonthDayYear","".concat(e.year).concat(e.monthDay)),w(C(e),"shortMonthDayYearTime","".concat(e.shortMonthDayYear," ").concat(e.time)),w(C(e),"shortMonthDayTime","".concat(e.shortMonthDayYear," ").concat(e.time)),w(C(e),"monthNameArray",Array.from({length:12},(function(t,i){return i+1+e.symbolMonth}))),w(C(e),"legacyShortMonthYear","m".concat(e.symbolMonth,"yyyy").concat(e.symbolYear)),e}return i}(s);function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R(e);if(t){var r=R(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return L(this,i)}}function L(e,t){return!t||"object"!==S(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function N(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t=k(i);function i(){var e;E(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return N(A(e=t.call.apply(t,[this].concat(r))),"monthDay","".concat(e.day," ").concat(e.month)),N(A(e),"monthYear","".concat(e.month," ").concat(e.year)),N(A(e),"shortMonthDay"," ".concat(e.day," ").concat(e.shortMonth)),N(A(e),"shortMonthDayTime","".concat(e.shortMonthDay," ").concat(e.time)),N(A(e),"shortMonthDayYear","".concat(e.shortMonthDay," ").concat(e.year)),N(A(e),"shortMonthYear","".concat(e.shortMonth," ").concat(e.year)),N(A(e),"shortMonthDayYearTime","".concat(e.shortMonthDay," ").concat(e.year," ").concat(e.time)),N(A(e),"legacyShortMonthYear","M yyyy"),e}return i}(s);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=U(e);if(t){var r=U(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return V(this,i)}}function V(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function z(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t=B(i);function i(){var e;F(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return z(j(e=t.call.apply(t,[this].concat(r))),"monthDay","D [de] MMMM"),z(j(e),"shortMonthDayYear","".concat(e.day," ").concat(e.shortMonth," ").concat(e.year)),z(j(e),"monthDayYear","".concat(e.monthDay," [de] ").concat(e.year)),e}return i}(s);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y(e,t){return(Y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=X(e);if(t){var r=X(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return K(this,i)}}function K(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e){return(X=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Y(e,t)}(i,e);var t=W(i);function i(){var e;q(this,i);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return Q(Z(e=t.call.apply(t,[this].concat(r))),"shortMonthDayYear","".concat(e.day," ").concat(e.shortMonth," ").concat(e.year)),e}return i}(s),J=i("sjGI");function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var te=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J.a.locale;switch(ee(this,e),t){case"en_US":return new m;case"es_ES":return new G;case"it_IT":return new D;case"fr_FR":return new $;case"ja_JP":return new I;default:return new s}}},OVdC:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("97Rx"),r=i("cvaF"),a=i("n5ho"),o=i("cCrT"),s=i("nF4n"),l=i("FHCs"),c=i("md/F"),u=function(e,t,i){var u,d;this._variantId=null,e instanceof a.a?(d=e.getCachedProduct(),u=e,this._variantId=u.variantId):d=e,this._onProfitChangeCallback=i,this._price=u?u.priceData.price:d.priceRange.minPrice,this._currency=u?u.priceData.currency:d.priceRange.currency,this._productId=d.productId;var h=new o.a(d.catalogPageUrl);u&&(h.query.variantId=u.variantId),this._nodeInputPrice=Object(s.a)({tag:"input",type:"number",className:"products-pricing__profit-input",value:n.a.getDecimal(this._price+parseFloat(t)),attr:{step:"0.5"},prop:{onkeyup:$.proxy(this._onPriceKeyUp,this),onchange:$.proxy(this._onPriceOnChange,this)}});var p=c.a.getProductImageByType(d.images,d.mainCatalogCategoryId),f=(null==p?void 0:p.primary)||d.urlImage;this.node=Object(s.a)({tag:"tr",els:[{tag:"td",attr:{width:"110px"},style:{minWidth:"80px"},els:[{tag:"a",href:h,els:[{tag:"img",src:l.a,data:{src:f},className:"img-responsive",title:u?u.name:d.getFullTitle()}]}]},{tag:"td",style:{verticalAlign:"middle"},els:[{tag:"a",href:h,text:u?u.name:d.getFullTitle(),style:{color:"#626262"}}]},{tag:"td",style:{verticalAlign:"middle",textAlign:"center"},text:prettyMoney(this._price,this._currency)},{tag:"td",style:{verticalAlign:"middle",paddingRight:0},els:[r.a.getCurrencySymbol(this._currency)+" ",this._nodeInputPrice]},{tag:"td",className:"text-center",style:{verticalAlign:"middle"},els:[this.nodeProfit=Object(s.a)({tag:"b"})]}]}),this._renderProfit()};(u.prototype=new s.a.Base)._renderProfit=function(){var e=parseFloat(this._nodeInputPrice.value);e=isNaN(e)?this._price:e,this.nodeProfit.textContent=prettyMoney(e-this._price,this._currency),this._onProfitChangeCallback&&this._onProfitChangeCallback(e-this._price)},u.prototype._onPriceKeyUp=function(){var e=parseFloat(this._nodeInputPrice.value);isNaN(e)||this._renderProfit()},u.prototype._onPriceOnChange=function(){var e=parseFloat(this._nodeInputPrice.value);e=isNaN(e)||e<this._price?this._price:e,this._nodeInputPrice.value=n.a.getDisplayValue(e),this._renderProfit()},u.prototype.getProfit=function(){return parseFloat(this._nodeInputPrice.value)-this._price},u.prototype.setUserProfit=function(e){e=parseFloat(e),isNaN(e)&&(e=0),this._nodeInputPrice.value=n.a.getDisplayValue(e+this._price),this._renderProfit()},(globalThis||{}).PFProductsPricingRetailPriceViewRow=u;var d=function(e,t){this._userProfit=t||10,this.productsOrVariants=e,this._lastProfit={},this._rows=[],this.node=Object(s.a)({tag:"table",className:"table",els:[{tag:"thead",els:[{tag:"tr",els:[{tag:"th",text:dlang("site","Product"),attr:{colspan:2}},{tag:"th",style:{width:"135px"},els:[dclang("site","You buy at [price]","You buy at")+" ",{tag:"span",style:{color:"#f0473d"},text:"*"}]},{tag:"th",style:{width:"135px"},els:[dclang("site","You sell at [price]","You sell at")+" ",{tag:"span",style:{color:"#f0473d"},text:"**"}]},{tag:"th",style:{width:"135px"},text:dlang("site","Your profit")}]}]},this.nodeBody=Object(s.a)({tag:"tbody"})]})};d.prototype=new s.a.Base,d.prototype.append=function(e){return this._render(this.productsOrVariants),this.node.append(e),this},d.prototype.setItems=function(e){this._render(e)},d.prototype._render=function(e){s.a.clearNode(this.nodeBody);var t=[];for(var i in e){var n,r=e[i],a=this._lastProfit[r.productId||r.variantId];n=a||(r.priceRange?r.priceRange.minRetailPrice-r.priceRange.minPrice:r.priceData?r.priceData.retailPrice-r.priceData.price:this._userProfit),t.push(new u(r,n,$.proxy(this._onProfitChanged,this,r))),this._lastProfit[r.productId||r.variantId]=n,t[i].append(this.nodeBody)}this._rows=t,this.productsOrVariants=e},d.prototype.getProfit=function(){return this._userProfit},d.prototype._onProfitChanged=function(e,t){this._lastProfit[e.productId||e.variantId]=parseFloat(t)},d.prototype.getProductOrVariantProfit=function(e){return this._lastProfit[e.productId||e.variantId]||this._userProfit},d.prototype.setUserProfit=function(e){for(var t in this._userProfit=parseFloat(e),this._rows)this._rows[t].setUserProfit(e)},(globalThis||{}).PFProductsPricingRetailPriceView=d},OmXI:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("rKkW");function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a(this,"id",null),a(this,"name",""),a(this,"items",[]),a(this,"unavailableTechniques",[]),a(this,"index",0),a(this,"extra",{}),a(this,"image",{}),a(this,"isActive",!1)}var t,i,n;return t=e,n=[{key:"isShapeSymbolGroup",value:function(t){return t===e.GROUP_SHAPES_SYMBOLS}}],(i=null)&&r(t.prototype,i),n&&r(t,n),e}();a(o,"GROUP_SHAPES_SYMBOLS",2),a(o,"fromArray",(function(e){var t=Object.assign(new o,e);return e.items&&(t.items=e.items.map((function(e){return n.a.fromArray(e)}))),t}))},"Op/+":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Rsrl"),r=i("ji4W"),a=i("X5Ic"),o=i("t8U3"),s=Class({products:null,categories:null,__construct:function(){this.categories=new r.a,this.products=new n.a(this.categories),this._initConfigureStore(this)},cacheCategories:function(e){return this.categories.cache(e),this},setActiveCategoryId:function(e){return void 0===e||this.categories.setActiveCategoryId(e),this},setActiveProductId:function(e){return null!==e&&this.products.setActiveId(e),this},setCurrency:function(e){return this.products.setCurrency(e),this},setActiveFilters:function(e){return e.length?(s.activeFiltersCache=e.map((function(e){return{type:e.type,title:e.title,orderIndex:e.orderIndex}})),this):this},getActiveFilters:function(){return s.activeFiltersCache},cacheProductFromArray:function(e,t){if(!e)return this;var i=a.a.fromArray(e);return this.products.cacheById(i),t&&this.products.cacheData(i.productId,null,t),this},isRootCategory:function(){return 0===this.categories.getActiveCategoryId()},_initConfigureStore:function(){if(!s._storeInitCallbackExecuted){s._storeInitCallbackExecuted=!0;var e=o.a.getMainStoreInitCallback();e&&e(this)}}});s.activeFiltersCache=[],s._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStore=s)},PMDB:function(e,t,i){"use strict";function n(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function r(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?n(Object(i),!0).forEach((function(t){s(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function l(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,u(e,t,"get"))}function c(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,u(e,t,"set"),i),i}function u(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function d(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}i.d(t,"b",(function(){return f})),i.d(t,"a",(function(){return g})),i.d(t,"c",(function(){return v}));var h=2,p=4,f=5,g=["pf-i-folder","pf-i-tshirt-crew","pf-i-hat-fedora","pf-i-bag-personal","pf-i-currency-eur","pf-i-coffee","pf-i-necklace","pf-i-cellphone","pf-i-drawing-box","pf-i-palette","pf-i-city","pf-i-duck","pf-i-cupcake","pf-i-cat","pf-i-barley","pf-i-dog","pf-i-flower","pf-i-candle","pf-i-jellyfish","pf-i-badminton","pf-i-trumpet","pf-i-pirate","pf-i-sheep"],m=new WeakMap,_=new WeakSet,v=function(){function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),_.add(this),s(this,"id",void 0),s(this,"parentId",void 0),s(this,"type",void 0),s(this,"storeId",void 0),s(this,"name",void 0),s(this,"filesCount",0),s(this,"directFilesCount",0),s(this,"directoriesCount",0),s(this,"metadata",void 0),s(this,"pathDirectories",[]),m.set(this,{writable:!0,value:{canMove:!1,canDelete:!1,canModify:!1,canMoveInChild:!1,canMoveOutChild:!1,canDeleteChild:!1,canModifyChild:!1}}),this.id=i.id,this.parentId=i.parentId,this.type=i.type,this.storeId=i.storeId,this.name=d(this,_,y).call(this,i.name),this.filesCount=i.filesCount,this.directFilesCount=i.directFilesCount,this.directoriesCount=i.directoriesCount,this.metadata=(null==i?void 0:i.metadata)||{},this.pathDirectories=null==i||null===(t=i.pathDirectories)||void 0===t?void 0:t.map((function(t){return t instanceof e?t:new e(t)})),c(this,m,r(r({},l(this,m)),i.capabilities))}var t,i,n;return t=e,(i=[{key:"getCapabilities",value:function(){return l(this,m)}},{key:"isSystem",value:function(){return[h,p,f].includes(this.type)}},{key:"isSampleFiles",value:function(){return this.type===f}},{key:"isRoot",value:function(){return!this.parentId}},{key:"isAnonymous",value:function(){return 6===this.type}},{key:"getAvatar",value:function(){var e;return(null===(e=this.metadata)||void 0===e?void 0:e.avatar)||(this.isSystem()?"pf-i-folder-image":"pf-i-folder")}},{key:"setAvatar",value:function(e){this.metadata=r(r({},this.metadata),{avatar:e})}},{key:"getInteractionMenuRefName",value:function(){return"file-library__directory-menu-".concat(this.id)}},{key:"toArray",value:function(){return{id:this.id,name:this.name,metadata:this.metadata}}},{key:"clone",value:function(){return new e(r(r({},JSON.parse(JSON.stringify(this))),{capabilities:this.getCapabilities()}))}}])&&o(t.prototype,i),n&&o(t,n),e}();function y(e){var t=null;switch(this.type){case h:case 6:null===this.parentId&&(t=dlang("library","File library"));break;case f:t=dlang("dashboard",dlang("dashboard","Sample files"))}return t||e}},PSt6:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("o0qH"),r=i("1z/T"),a=i("OmXI"),o=i("X5Ic"),s=i("boP+"),l=Class({DEFAULT_LIMIT_KEY:"DEFAULT",DEFAULT_CHAR_LIMITS:{},_activeLayer:null,_text:null,_techniqueMemory:null,isCharLimitEnabled:!0,_activePlacement:"",__construct:function(){this._initCharLimits(),this.setProductFromDesignerState()},_initCharLimits:function(){this.DEFAULT_CHAR_LIMITS[this.DEFAULT_LIMIT_KEY]=50,this.DEFAULT_CHAR_LIMITS[o.a.TYPE_EMBROIDERY]=25},reset:function(){return this._activeLayer=null,this._techniqueMemory=null,this._text=null,this},setProductFromDesignerState:function(){var e=Object(s.a)();return e&&(this._techniqueMemory=new n.a(e.productId)),this},setActiveLayer:function(e){return this._activeLayer=e,this},setText:function(e){return this._text=e,this},setActivePlacement:function(e){return this._activePlacement=e,this},isValid:function(){return this._activeLayer&&this.isTextValid()},isClipartSizeValid:function(){var e=this._getTechnique();if(!e||[o.a.TECHNIQUE_ENGRAVING].indexOf(e)<0||!this._activeLayer.clipartItem)return!0;var t=.2,i=.2;return a.a.isShapeSymbolGroup(this._activeLayer.clipartItem.groupId)&&(t=.12,i=.06),this._activeLayer.position.height>t&&this._activeLayer.position.width>i},isTextValid:function(){var e=this._getFontOptions();if(!this.isCharLimitEnabled||!e||!this._text)return!0;var t=String(this._text||"").replace(/[\r\n]+/gm,"");return e.maxCharacters>=t.length},getValidText:function(){var e=this._getFontOptions();return e&&this._text?this._text.substr(0,e.maxCharacters):""},getCharLimit:function(){var e=this._getTechnique()||"DEFAULT",t=this.DEFAULT_CHAR_LIMITS.hasOwnProperty(e)?this.DEFAULT_CHAR_LIMITS[e]:this.DEFAULT_CHAR_LIMITS.DEFAULT,i=this._getFontOptions();return i&&i.maxCharacters?i.maxCharacters:t},_getFontOptions:function(){var e=this._getTechnique();return this._activeLayer.font?(this._activeLayer.font.options.hasOwnProperty(e)?this._activeLayer.font.options[e]:null)||new r.a.Options:null},_getFontMaxHeight:function(){var e=this._getTechnique(),t=this._activeLayer.font;return t?t.getMaxHeight(e,this._activePlacement):null},_getTechnique:function(){var e,t=this._techniqueMemory?this._techniqueMemory.getTechniqueFromMemory():null;null!==(e=this._activeLayer)&&void 0!==e&&e.embroideryType&&(t=o.a.TYPE_EMBROIDERY);var i=Object(s.a)();return!t&&i&&(t=i.availableTechniques?i.availableTechniques.slice().shift():i.type),t}});l.LAYER_LIMIT_TYPE_DEFAULT="LAYER_LIMITS",l.LAYER_LIMIT_TYPE_TEXT="LAYER_LIMITS_TEXT",l.LAYER_LIMITS={},l.LAYER_LIMITS[o.a.TYPE_EMBROIDERY]=2,l.LAYER_LIMITS_TEXT={},l.LAYER_LIMITS_TEXT[o.a.TYPE_STICKER]=50,l.LAYER_LIMITS_TEXT[o.a.TYPE_EMBROIDERY]=2,l.getLayerLimit=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:l.LAYER_LIMIT_TYPE_DEFAULT;return l[t].hasOwnProperty(e)?l[t][e]:null},window&&((globalThis||{}).PFComponentsGeneratorMockupValidator=l)},Pack:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}i.d(t,"a",(function(){return r}));var r=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.id=t.id||null,this.title=t.title||null,this.thumbUrl=t.thumbUrl||null,this.width=t.width||null,this.height=t.height||null,this.size=t.size||null,this.youtubeId=t.youtubeId||null,this.mediaType=t.mediaType||null,this.fileUrl=t.fileUrl||null}},Ptwn:function(e,t,i){"use strict";i.d(t,"g",(function(){return a})),i.d(t,"h",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"c",(function(){return h}));var n=i("Zwo4"),r="".concat(n.a,"/backgrounds"),a="m_putBackgroundItemsIntoRepo",o="m_setHasLoadedAllBackgrounds",s="g_hasLoadedAllBackgrounds",l="g_getBackgroundItems",c="g_activeBackgroundItems",u="a_allActiveBackgroundItems",d="a_loadBackgrounds",h=function(e){return"".concat(r,"/").concat(e)}},PwNb:function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a(e){var t="function"==typeof Map?new Map:void 0;return(a=function(e){if(null===e||(i=e,-1===Function.toString.call(i).indexOf("[native code]")))return e;var i;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return o(e,arguments,c(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)})(e)}function o(e,t,i){return(o=s()?Reflect.construct:function(e,t,i){var n=[null];n.push.apply(n,t);var r=new(Function.bind.apply(e,n));return i&&l(r,i.prototype),r}).apply(null,arguments)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}i.d(t,"a",(function(){return u}));var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(ResultsNotFoundError,e);var t,i,n=(t=ResultsNotFoundError,i=s(),function(){var e,n=c(t);if(i){var a=c(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return r(this,e)});function ResultsNotFoundError(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,ResultsNotFoundError),n.call(this,e)}return ResultsNotFoundError}(a(Error))},Pxqf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.fileId=0,a.prototype.temporaryFileKey=null,a.prototype.filename=null,a.prototype.size=null,a.prototype.type=null,a.prototype.isImage=null,a.prototype.urlThumb=null,a.prototype.urlLarge=null,a.prototype.width=null,a.prototype.height=null,a.prototype.isVector=null,a.prototype.isReady=null,a.prototype.isProcessing=null,a.prototype.reasonFailed=null,a.prototype.metaData=null,a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsTemporaryFileItem=a)},Q1Td:function(e,t,i){"use strict";i.d(t,"a",(function(){return z}));var n=i("Y6pR"),r=i("6t3j"),a=i("edgZ"),o=i("5sNq"),s=i("nF4n"),l=Class({translations:[],_defaultLanguageName:"English (EN)",_defaultLanguageLocale:"en_US",selectedLanguage:"en_US",lastSelectedLanguage:null,_laguageValues:[{name:"English (EN)",value:"en_US"},{name:"English (GB)",value:"en_GB"},{name:"EspaÃ±ol (ES)",value:"es_ES"},{name:"Deutsch (DE)",value:"de_DE"},{name:"æ¥æ¬èª (JP)",value:"ja_JP"},{name:"FranÃ§ais (FR)",value:"fr_FR"},{name:"Italiano (IT)",value:"it_IT"},{name:"LatvieÅ¡u (LV)",value:"lv_LV"},{name:"Nederlands (NL)",value:"nl_NL"},{name:"PortuguÃªs (BR)",value:"pt_BR"},{name:"Svenska (SE)",value:"sv_SE"},{name:"íêµ­ì´ (KR)",value:"ko_KR"},{name:"ä¸­æ(æ±è¯­)",value:"zh_SG"},{name:"ä¸­æ(ç¹é«)",value:"zh_HK"}],getDefaultLanguage:function(){return this._defaultLanguageName},getDefaultLanguageLocale:function(){return this._defaultLanguageLocale},getProductTranslationOptions:function(){return this._laguageValues},getProductTranslationOptionNameByValue:function(e){var t=this._laguageValues.filter((function(t){return t.value===e}));return t.length?t[0]:null},getLastSelectedLanguage:function(){return this.lastSelectedLanguage},setLastSelectedLanguage:function(e){this.lastSelectedLanguage=e},setLanguage:function(e){this.selectedLanguage=e},getLanguageData:function(){return this.translations?this.translations[this.selectedLanguage]:void 0},getLanguageDataByLocale:function(e){return this.translations?this.translations[e]:void 0},getLanguage:function(){return this.selectedLanguage}});l.fromArray=function(e){var t=new l,i=e.translations;return delete e.translations,t.translations=i,Object(s.a)(t,e),t},window&&((globalThis||{}).PFProductPushProductTranslations=l);var c=i("uGFp"),u=i("NLc6"),d=i("Ii6r"),h=i("FxE2"),p=i("Vx67"),f=i("bRD6"),g=i("CDME"),m=i("aUd0"),_=i("+4EM"),v=i("rKkW"),y=i("n5ho"),b=i("tw/D"),P=i("1yDH"),C=i("V+k9"),T=i("y70k"),w=i("Pack"),I=i("IAu2"),S=i("96ed"),E=i("Sucz"),O=i("9Nv7"),k=i("/Z5U"),L=i("Svo9"),A=i("1tjy"),R=i("sXh8"),N=i("9Vz/"),D=i("v217"),x=i("GyOi");function F(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function M(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return B(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function V(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function j(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?V(Object(i),!0).forEach((function(t){U(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):V(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function U(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var z=function(){};z.defaultProductPriceCache={},z.generatorProductCache={},z.generatorVariantCache={},z.prototype.loadProduct=function(e){var t=this._getRawLayersByPlacement(e.designerState),i="product-generator/get-product";if(e.useGeneratedDesignRpcUrl){if(Object(k.b)())return void this.loadProductRe(e.callback,Object(k.a)());i="product-generator/get-customizable-product"}var n={storeId:e.storeId,isMockupGeneratorMode:e.isMockupGeneratorMode?1:0,productId:e.productId,layersByPlacement:t,generatorDesignId:e.designerState?e.designerState.generatorDesignId:null,excludedPlacements:e.excludedPlacements||[],forceOrientation:e.forceOrientation||"",isProductPushMode:e.isProductPushMode?1:0,generatorDesignKey:e.generatorDesignKey,isOrderFlowMode:e.isOrderFlowMode?1:0,technique:e.technique||null,forceTechnique:e.forceTechnique||null,forceTemplateType:e.forceTemplateType,productOptions:e.productOptions||null,variantId:e.generatorVariant?e.generatorVariant.variantId:null};e.similarProductPushState&&(n.similarProductPushInfo=e.similarProductPushState.toRPCData()),e.productTemplateEditorState&&(n.productTemplateEditorState=e.productTemplateEditorState.toRPCData()),Object(E.a)(i,n,this.loadProductRe.bind(this,e.callback))},z.prototype.getLayersByPlacementWithoutUniqueIdHash=function(e){var t={};for(var i in e)for(var n in t[i]={},e[i])t[i][n]=j(j({},e[i][n]),{uniqueId:null});for(var r=0,a=JSON.stringify(t),o=0;o<a.length;o++)r=Math.imul(31,r)+a.charCodeAt(o)|0;return r},z.prototype.loadGeneratorProduct=function(e){var t,i,n=this,a=e.designerState?e.designerState.generatorDesignId:e.generatorDesignId||null,o=this._getRawLayersByPlacement(e.designerState),s=e.productTemplateEditorState&&(e.productTemplateEditorState.sourceProductTemplate&&e.productTemplateEditorState.sourceProductTemplate.id||e.productTemplateEditorState.isNewTemplateEditor()),l={productId:e.productId,storeId:e.storeId,technique:e.technique,currency:e.currency,forceOrientation:e.forceOrientation,forceTemplateType:e.forceTemplateType,designId:a,rawLayersByPlacementWithoutUniqueIdHash:a?null:this.getLayersByPlacementWithoutUniqueIdHash(o),productTemplateId:null===(t=e.productTemplateEditorState)||void 0===t||null===(i=t.sourceProductTemplate)||void 0===i?void 0:i.id},c=function(t){e.variantCallback&&(new r.a).getVariantsRe(e.variantCallback,t),e.callback&&n.loadProductRe(e.callback,t)};if(!e.forceRequest&&(e.isOrderFlowMode||!s)){var u=this.getCachedGeneratorProductResponse(l);if(u)return void c(u)}var d={productId:e.productId,productChanged:e.productChanged?1:0,catalogCategoryId:r.a.prototype.getLastActiveCatalogCategory(e.productId),storeId:e.storeId,generatorDesignId:a,variantId:e.generatorVariant?e.generatorVariant.variantId:null,hasExtraGeneratorVariants:e.hasExtraGeneratorVariants?1:0,isMockupGeneratorMode:e.isMockupGeneratorMode?1:0,isProductPushMode:e.isProductPushMode?1:0,isOrderFlowMode:e.isOrderFlowMode?1:0,layersByPlacement:o,excludedPlacements:e.excludedPlacements||[],forceOrientation:e.forceOrientation||"",generatorDesignKey:e.generatorDesignKey,technique:e.technique?e.technique:null,forceTemplateType:e.forceTemplateType,productOptions:e.productOptions||null,currency:e.currency,flow:e.flow};e.similarProductPushState&&(d.similarProductPushInfo=e.similarProductPushState.toRPCData()),e.productTemplateEditorState&&(d.productTemplateEditorState=e.productTemplateEditorState.toRPCData()),Object(E.a)("product-generator/get-generator-product",d,(function(e){var t;n.cacheGeneratorProductResponse(e,l),!l.technique&&null!=e&&null!==(t=e.product)&&void 0!==t&&t.type&&(l.technique=e.product.type,n.cacheGeneratorProductResponse(e,l)),c(e)}))},z.prototype.cacheGeneratorProductResponse=function(e,t){var i=this.getCacheKeyForGeneratorProduct(t);z.generatorProductCache[i]=JSON.stringify(e),(new r.a).getVariantsRe((function(){}),e)},z.prototype.getCachedGeneratorProductResponse=function(e){var t=this.getCacheKeyForGeneratorProduct(e),i=z.generatorProductCache[t];return i?JSON.parse(i):null},z.prototype.getCacheKeyForGeneratorProduct=function(e){return"prod"+e.productId+(e.storeId?"--store"+e.storeId:"")+(e.technique?"--tec"+e.technique:"")+(e.currency?"--cur"+e.currency:"")+(e.forceOrientation?"--orient"+e.forceOrientation:"")+(e.forceTemplateType?"--type"+e.forceTemplateType:"")+(e.designId?"--design"+e.designId:"")+(e.rawLayersByPlacementWithoutUniqueIdHash?"--layers"+e.rawLayersByPlacementWithoutUniqueIdHash:"")+(e.productTemplateId?"--ptId"+e.productTemplateId:"")},z.prototype.deleteDesignFromCache=function(e){var t="--design"+e;Object.keys(z.generatorProductCache).forEach((function(e){e.endsWith(t)&&delete z.generatorProductCache[e]}))},z.prototype.getGeneratorVariants=function(e,t,i){var n=this,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=[];i||(e=e.filter((function(e){var t=n.getCachedGeneratorVariants(e.variantId);if(!t)return!0;a=Object.assign(a,t)}))),e.length?Object(E.a)("product-generator/get-generator-variants",{variantIds:e.map((function(e){return e.variantId})),reduced:r},(function(e){for(var i in e.variantMapping)for(var r in e.variantMapping[i]){var o=e.variantMapping[i][r],s=p.a.fromArray(e.generatorVariants[o]);a[s.generatorVariantId]=s,n.cacheGeneratorVariant(i,e.generatorVariants[o])}t&&t(a)})):t&&t(a)},z.prototype.cacheGeneratorVariant=function(e,t){z.generatorVariantCache[e]||(z.generatorVariantCache[e]=[]),z.generatorVariantCache[e].push(t)},z.prototype.getCachedGeneratorVariants=function(e){if(!z.generatorVariantCache[e])return null;var t={};return z.generatorVariantCache[e].forEach((function(e){var i=p.a.fromArray(e);t[i.generatorVariantId]=i})),t},z.prototype.calculatePrices=function(e,t,i){Object(I.b)(e,i).then(t)},z.prototype.loadProductRe=function(e,t){var i,r=new o.a;for(C in t.colors)r.colors.push(_.a.fromArray(t.colors[C]));if(r.variantLimit=t.variantLimit,r.requiredDPI=t.requiredDPI,r.sizes=t.sizes,r.translatedSizes=t.translatedSizes,r.availableOrientations=t.availableOrientations,r.orientation=t.orientation,r.regions=t.regions,r.availableTechniques=t.availableTechniques,r.hasNewPlacement=t.hasNewPlacement,r.isCustomizerEnabled=t.isCustomizerEnabled,r.allLabelTypesAvailable=t.allLabelTypesAvailable,r.isAdditionalMockupPushEnabled=t.isAdditionalMockupPushEnabled,r.pushableVideos=(t.pushableVideos||[]).map((function(e){return new w.a(e)})),r.areQuickDesignsAvailable=t.areQuickDesignsAvailable,r.availablePlacements=[],r.placementsWithOnlyBackgroundColor=t.placementsWithOnlyBackgroundColor,r.placementOptions=b.a.fromArray(t.placementOptions),null!==(i=t.placementOptions)&&void 0!==i&&i.length){var s,g=M(t.placementOptions);try{for(g.s();!(s=g.n()).done;){var m=s.value;m.options.designFillType===D.i&&Object(N.a)([x.a.fromArray(m.options.designFillItem)])}}catch(e){g.e(e)}finally{g.f()}}for(C in Object(R.f)(R.a.fromArray(t.optionGroupsWithTags)),t.clipartItems&&Object(A.b)(t.clipartItems.map((function(e){return v.a.fromArray(e)}))),t.usedQuickDesignItems&&Object(L.b)(t.usedQuickDesignItems),t.availablePlacements)r.availablePlacements.push(d.a.fromArray(t.availablePlacements[C]));for(C in t.variantMapping)r.variantMapping.push(h.a.fromArray(t.variantMapping[C]));for(C in t.generatorVariants){var P=p.a.fromArray(t.generatorVariants[C]);r.generatorVariants[P.generatorVariantId]=P}for(var C in t.files)(new a.a).cacheFile(T.a.fromArray(t.files[C]));var I=new n.c,S=function(e){var i=t.availablePlacements.find((function(i){return i.id===t.itemFiles[e].type}));i&&I.add(t.itemFiles[e].price,i.technique,t.itemFiles[e].type,t.itemFiles[e].discountedPrice)};for(var E in t.itemFiles)S(E);for(var O in r.pricesCollection=I,r.allAvailableVariants=t.variants?t.variants.map((function(e){return y.a.fromArray(e)})):[],r.designData=new c.a,r.designData.isTransparent=!t.isTransparent&&null,r.designData.isVisible=t.isVisible,r.designData.description=t.info.description,r.designData.labelTemplateType=t.labelTemplateType,r.designData.designMeta=t.designMeta,r.designData.multiLanguageDetails=[],t.multiLanguageDetails){var k=t.multiLanguageDetails[O];for(C in k)for(var F in u.a.TYPES){var B=u.a.TYPES[F];r.designData.multiLanguageDetails.push(u.a.fromArray({language:O,type:B,value:k[B]}))}}for(C in t.productTranslations&&(r.designData.productTranslations=l.fromArray(t.productTranslations)),t.translationLanguage&&(r.designData.translationLanguage=t.translationLanguage),r.calculatedPositions=[],t.calculatedPositions){var V=f.a.fromArray(t.calculatedPositions[C]);r.calculatedPositions.push(V)}for(C in r.conflictingTypes={},t.conflictingTypes)r.conflictingTypes[C]={placementId:t.conflictingTypes[C].placementId,conflictsWith:t.conflictingTypes[C].conflictsWith.map((function(e){return d.a.fromArray(e)}))};if(r.preselectedData={},t.preselectedData)for(C in t.preselectedData)if("colors"===C){var j=t.preselectedData[C]||[],U=[];for(var F in j){var z=j[F],G=new _.a.fromArray(z);G&&U.push(G)}U&&U.length&&(r.preselectedData.colors=U)}else if("sizes"===C){var H=t.preselectedData[C]||[];H&&H.length&&(r.preselectedData.sizes=H)}else{var q=t.preselectedData[C]||null;q&&(r.preselectedData[C]=q)}r.designData.title=r.preselectedData.title||t.info.title,e(r),this.cacheDefaultPrices(t.productId,r.designData.prices)},z.prototype.pushProduct=function(e){var t=e.designData,i=e.callback,n=e.pushContext,r=void 0===n?{}:n,a=e.customMockupData,o=e.shouldSaveScene,s={designData:t.toArray({forRpc:!0}),pushContext:r};a&&(s.customMockupData=a,s.saveScene=o||!1),Object(E.a)("product-generator/push-product",s,this._pushProductRe.bind(this,i)),this.rememberModifiedPrices(t.productId,t.prices)},z.prototype.pushCustomProduct=function(e,t){Object(E.a)("product-generator/push-custom-product",{designData:e.toArray({forRpc:!0})},$.proxy(this._pushProductRe,this,t))},z.prototype._pushProductRe=function(e,t){t.error?alert(t.error):e(t.taskId,t.taskPusherKey)},z.prototype.generateMockups=function(e,t,i,n){Object(E.a)("product-generator/generate-mockups",{forLiveMockup:i?1:0,forPublicGenerator:n?1:0,designData:e.toArray({forRpc:!0,withoutSyncData:!0})},this._generateMockupsRe.bind(this,this._generateMockupsOnCompleted,t))},z.prototype._generateMockupsRe=function(e,t,i){if(i.error)alert(i.error);else{var n=i.taskPusherKey;if(t.onStarted){var r=i.taskId,a=i.designId,o=i.unprocessedFiles,s=i.itemUniqueId;t.onStarted(r,n,a,o,s)}S.a.subscribe(n,"onSuccess",this._getGeneratedFiles.bind(this,t.onCompleted,e)),t.onProgress&&S.a.subscribe(n,"onProgress",t.onProgress),t.onFailed&&S.a.subscribe(n,"onFailed",t.onFailed)}},z.prototype._generateMockupsOnCompleted=function(e,t){if(t.files){var i=[];for(var n in t.files)i.push(m.a.fromArray(t.files[n]));e(i)}else e([])},z.prototype.getDownloadUrl=function(e,t){Object(E.a)("product-generator/get-download-url",{temporaryFileId:e.temporaryFileId,fileType:e.fileType,filename:e.filename},(function(e){t(e.url)}))},z.prototype.getPushStatuses=function(e,t){Object(E.a)("product-generator/get-push-statuses",{storeId:e},(function(e){t(e)}))},z.prototype.retryTask=function(e,t,i){Object(E.a)("product-generator/retry-task",{storeId:e,taskId:t},(function(e){i(e)}))},z.prototype.hidePushTask=function(e){Object(E.a)("product-generator/hide-push-task",{taskId:e})},z.prototype.cacheDefaultPrices=function(e,t){for(var i in t){var n=this.getCacheKeyForDefaultPrice(e,t[i].priceKey);z.defaultProductPriceCache[n]=JSON.stringify(t[i])}},z.prototype.getCachedDefaultPrice=function(e,t){var i=this.getCacheKeyForDefaultPrice(e,t),n=z.defaultProductPriceCache[i];return n?g.a.fromArray(JSON.parse(n)):null},z.prototype.getCacheKeyForDefaultPrice=function(e,t){return e+":"+t},z.prototype.isPriceModified=function(e,t){var i=this.getCachedDefaultPrice(e,t.priceKey);return i&&i.retailPrice.toFixed(2)!==t.retailPrice.toFixed(2)},z.prototype.rememberModifiedPrices=function(e,t){if(localStorage){var i=JSON.parse(localStorage.getItem(this.getUserPriceStorageKey()))||{},n=i[e]||{};for(var r in t){var a=t[r],o=this.isPriceModified(e,a);(o||n[a.priceKey])&&(o?n[a.priceKey]=a.retailPrice:delete n[a.priceKey])}i[e]=n;try{localStorage.setItem(this.getUserPriceStorageKey(),JSON.stringify(i))}catch(e){alert("You are in a Private/Incognito Mode. It does not support storing settings locally.")}}},z.prototype.getUserPriceStorageKey=function(){return I.a},z.prototype.getTaskMockupFiles=function(e,t){Object(E.a)("product-generator/get-mockup-files",{syncProductId:e},$.proxy(this._getTaskMockupFilesRe,this,t))},z.prototype._getTaskMockupFilesRe=function(e,t){var i=t.files,n=new P.a;for(var r in n.page=i.page,n.pages=i.pages,n.total=i.total,i.items){var o=T.a.fromArray(i.items[r]);n.items.push(o),(new a.a).cacheFile(o)}e(n)},z.prototype.saveToLibrary=function(e,t,i,n){var r=[];for(var a in e)r.push(e[a].toArray());Object(E.a)("product-generator/save-to-library",{files:r,storeId:t,productType:i},(function(e){n&&n(e.pusherKey)}))},z.prototype.transferAnonymousFilesToStore=function(e,t){Object(E.a)("product-generator/transfer-files-to-store",{storeId:e},t)},z.prototype.generateLibraryFiles=function(e,t,i,n,r,a){this.deleteDesignFromCache(e.generatorDesignId),Object(E.a)("product-generator/generate-and-save-to-library",{designData:e.toArray({forRpc:!0,withoutSyncData:!0}),fileTypes:t,forLiveMockup:i?1:0,isVariantSyncFlow:n?1:0,isVariantPicker:r?1:0},this._generateMockupsRe.bind(this,this._generateLibraryFilesRe,a))},z.prototype.afterReloadDuringGeneration=function(e,t){this._generateMockupsRe(this._generateLibraryFilesRe,t,{taskPusherKey:"generator-task-".concat(e)})},z.prototype._getGeneratedFiles=function(e,t,i){Object(E.a)("product-generator/get-generated-files",{cacheKey:i},t.bind(this,e))},z.prototype._generateLibraryFilesRe=function(e,t){var i,n={},r=new a.a;for(var o in t.files)i=C.a.fromArray(t.files[o]),n.hasOwnProperty(i.placementId)||(n[i.placementId]=[]),n[i.placementId].push(i),r.cacheFile(i);e(n)},z.prototype.updateCustomizer=function(e,t){Object(E.a)("product-generator/update-customizer",{designData:e.toArray({forRpc:!0,withoutSyncData:!0})},t)},z.prototype.pushVariantsToProduct=function(e,t,i){Object(E.a)("product-generator/push-variants-to-product",{designData:e.toArray({forRpc:!0}),syncProductId:t},i)},z.prototype.changePrintFile=function(e,t,i,n){Object(E.a)("product-generator/change-print-file",{designData:e.toArray({forRpc:!0,withoutSyncData:!0}),syncVariantIds:t,shouldPushMockups:i?1:0},n)},z.prototype.getInsideLabelTemplate=function(e,t,i,n,r){Object(E.a)("product-generator/get-native-inside-label",{variantId:e,fileId:t,templateId:n,position:r?r.toArray():null},i)},z.prototype.getRemoveBg=function(){var e,t=(e=regeneratorRuntime.mark((function e(t,i,n,r,a){var o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(O.a)("product-generator/get-remove-bg",{layer:t.toArray(),templateId:null==i?void 0:i.templateId,fullSize:n?1:0});case 3:return(o=e.sent).taskPusherKey?(r&&S.a.subscribe(o.taskPusherKey,"onSuccess",r),a&&S.a.subscribe(o.taskPusherKey,"onFail",a)):r&&r(o),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0),a&&a(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,8]])})),function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){F(a,n,r,o,s,"next",e)}function s(e){F(a,n,r,o,s,"throw",e)}o(void 0)}))});return function(e,i,n,r,a){return t.apply(this,arguments)}}(),z.prototype.generateEmbroideryPreview=function(e,t,i,n){Object(E.a)("product-generator/embroidery-preview",{layer:e.toArray(),colors:t,generatorDesignKey:i},this._renderEmbroideryImageRe.bind(this,n))},z.prototype._renderEmbroideryImageRe=function(e,t){t.image?e(t):t.taskPusherKey&&S.a.subscribe(t.taskPusherKey,"onSuccess",e)},z.prototype._getRawLayersByPlacement=function(e){var t={};if(!e)return t;var i=e.getLayersByPlacement();for(var n in i)for(var r in t[n]=t[n]||[],i[n]){var a=i[n][r];t[n].push(a.toArray())}return t},(globalThis||{}).PFRepositoriesGeneratorRepository=z},QUqn:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("7QI8"),r={getCommonEmbrType:function(e,t){return e&&e!==t?n.a.DIGITIZATION_BOTH:t},getEmbrTypeForPlacement:function(e,t){var i;if(e)for(var n in e){var a=e[n];if(a&&a.placementId===t){for(var o in a.layers){var s=a.layers[o];i=r.getCommonEmbrType(i,s.embroideryType)}return i}}}};(globalThis||{}).PFProductPushOrdersEmbroideryHelper=r},R7ut:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={getConfig:function(){var e;return(null===(e=PF)||void 0===e?void 0:e.ProductsPricingConfig)||{expandTypes:[]}}}},"RW1+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({template:null,title:"",titleTag:"div",titleClass:"printfile-thumb__title",innerNodeClass:"printfile-thumb__wrap",width:124,height:143,isFixedHeightWrapper:!1,itemFile:null,fileItem:null,puffType:null,forceDigitizedBadge:!1,showDigitizationBadge:!1,isLargeDigitization:!1,className:"printfile-thumb",backgroundColor:"",onEditCallback:null,onPreviewCallback:null,onThumbClickCallback:null,onSvgProcessedCallback:null,svgString:"",placementOptions:null,getRatio:function(){var e=this.width/this.template.width,t=this.height/this.template.height;return Math.min(e,t)},shouldUseSvg:function(){return!this.template.isSimple()||this.placementOptions&&this.placementOptions.designFillValue}});window&&((globalThis||{}).PFComponentsSvgThumbPar=n)},Rq5c:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));var n=i("oCYn");function r(e,t){var i=t.key,r=t.value,a=t.shouldUnset,o=t.stateFlagProp,s=void 0===o?"flags":o;i&&e&&(e[s]||n.default.set(e,s,{}),a?n.default.delete(e[s],i):n.default.set(e[s],i,r))}function a(e,t){var i,n=t.key,r=t.stateFlagProp;return null==e||null===(i=e[void 0===r?"flags":r])||void 0===i?void 0:i[n]}},Rsrl:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("6t3j"),r=i("Tt8e"),a=i("g357"),o=i("83UL"),s=i("n5ho"),l=i("X5Ic"),c=i("nF4n"),u=Class({product:null,activeVariant:null,variants:[],descriptionTitle:"",isLogged:!1,printCareInstructionsHtml:"",productDescription:"",productsPricingInfoHtml:"",printInfo:{},guidelines:"",templates:{},guidelinesAndTemplates:null,regions:null,insideLabel:"",shippingReturns:"",tabSizing:"",tabUsingTips:"",images:[],shipping:"",isFeaturedReviews:!1,isFavorite:!1,addedToFavoritesAt:null,productSpecs:{},productSource:{},isFulfilledAtPartnerFacility:!1,favoriteCatalogCategoryId:null,sellingRegionSettings:null,isLocationBrazil:!1,isLocationCanada:!1,correspondingProduct:[],isLocationAustraliaOrNewZealand:!1,canHaveSampleOrderOffer:!0,setActiveVariantById:function(e){this.activeVariant=e?this.variants.filter((function(t){return t.variantId===e})).shift():null},hasPriceEstimator:function(){return this.product.type===l.a.TYPE_T_SHIRT},getRegionVariants:function(){var e=new o.a;return e.availableRegions=this.regions.availableRegions,e.variantsByRegion=this.regions.variantsByRegion,e.allowedSellingRegions=this.regions.allowedSellingRegions,e},getPrintInfo:function(e,t){return this.printInfo[e]?t?this.printInfo[e][t]?this.printInfo[e][t]:"":this.printInfo[e]:""}});u.fromArray=function(e){var t=new u;return c.a.O2O(t,e),t.product=l.a.fromArray(e.product),t.variants=e.variants.map(s.a.fromArray),t},window&&((globalThis||{}).PFProductsCatalogProductData=u);var d=Class({variantImageId:0,thumbUrl:"",useVariantColor:!1,order:0,largeUrl:"",variantMaps:[],useGeneratorColor:!0,backgroundOverride:[]});d.fromArray=function(e){var t=new d;return c.a.O2O(t,e),t},window&&((globalThis||{}).PFProductsCatalogItemsProductImageItem=d);var h=i("Sucz"),p=i("YBfo"),f=i("1mG2"),g=i("N6Gp"),m=i("t8U3"),_=i("D5LZ"),v=i("o0qH"),y=Class({_categoryProducts:{},_repo:null,_currency:"",__construct:function(e){this.categories=e,this._repo=new n.a,this._initConfigureStore(this)},getByParams:function(e){"function"==typeof e.actionBefore&&e.actionBefore(),this._params=e,f.a.toggleLock(!0);var t=Number(e.categoryId)!==g.a.ID_FAKE_FAVORITES?this.getCachedProducts(e.categoryId):[];if(t.products)return this._dispatchEvents(t.products,t.totalCount);this._requestProductsData(e,1)},getAllProductsList:function(e){var t=this.getCachedProducts(this._params.categoryId);t.products&&t.products.length===Number(t.totalCount)||this._requestProductsData(this._params,!1,e)},getSellingRegionNotMatchedProducts:function(e){Object(h.a)("product-catalog/get-category-product-data",Object.assign(this._getRequestParams(this._params),{matchSellingRegion:0,doesNotMatchSellingRegion:1}),(function(t){var i=r.a.convertToArray(t.products).map((function(e){return e.variants.map((function(e){return n.a.prototype.cacheVariant(s.a.fromArray(e))})),l.a.fromArray(Object.assign(e.product,{doesNotMatchSellingRegion:!0}))}));t.sellingRegion&&(y.sellingRegion=_.c.fromArray(t.sellingRegion)),e({products:i,totalCount:t.totalCount})}))},_getRequestParams:function(e){return{activeCategoryId:e.categoryId,categoryIds:e.favorites?[]:this.categories.getCategoryChildIds(this.categories.getById(e.categoryId)),forMockupGenerator:e.forMockupGenerator?1:0,forProductPush:e.forProductPush?1:0,forOrderFlow:e.forOrderFlow?1:0,forProductTemplate:e.forProductTemplate?1:0,currency:this._currency,storeId:e.storeId,favorites:e.favorites,limitUsingDefaultCount:0,matchSellingRegion:e.matchSellingRegion?1:0,doesNotMatchSellingRegion:e.doesNotMatchSellingRegion?1:0,allowedType:e.allowedType||null,requiredPlacements:e.requiredPlacements||[]}},_requestProductsData:function(e,t,i){Object(h.a)("product-catalog/get-category-product-data",Object.assign(this._getRequestParams(e),{limitUsingDefaultCount:t?1:0}),this._cacheProducts.bind(this,{categoryId:this._params.categoryId,initialLoad:t,callBackFunction:i}))},getDataByProductId:function(e,t){var i=this._getCachedProductData(e);$.isEmptyObject(i)?Object(h.a)("product-catalog/get-product-data",{productId:e,categoryId:this._params.categoryId,currency:this._currency},this.cacheData.bind(this,e,t)):t(i)},getActive:function(){var e=y.activeProductId;return e?y.cacheById[e]:null},setActiveId:function(e){y.activeProductId=e},setCurrency:function(e){this._currency=e},cacheById:function(e){return e instanceof l.a||(e=l.a.fromArray(e)),this._repo.cacheProduct(e),y.cacheById[e.productId]=e,e},getCachedProducts:function(e){var t=y.tempDisabledProductsLimit,i=y.tempDisabledProductsPushed;return this._params.swapTemplateId?this._categoryProducts[this._getSwapCacheKey(e)]||[]:t&&i>=t?[]:this._categoryProducts[e]||[]},_cacheProducts:function(e,t){var i=e.categoryId,n=e.initialLoad,a=e.callBackFunction;for(var o in t.products=r.a.convertToArray(t.products).map(this._getProductItem.bind(this)),t.products.map(this.cacheById),t.tempDisabledProductsLimit&&(y.tempDisabledProductsLimit=t.tempDisabledProductsLimit,y.tempDisabledProductsPushed=t.tempDisabledProductsPushed,y.tempDisabledProductTypes=t.tempDisabledProductTypes,y.tempDisabledProductIds=t.tempDisabledProductIds),t.sellingRegion&&this._useSellingRegion(t.sellingRegion),this._params.swapTemplateId?this._categoryProducts[this._getSwapCacheKey(i)]=t:this._categoryProducts[i]=t,t.products){if(t.products[o].variantRegions){var c=t.products[o].variants;for(var u in this._repo.cacheProductVariantRegions(t.products[o].product.productId,t.products[o].variantRegions),c)this._repo.cacheVariant(s.a.fromArray(c[u]))}var d=t.products[o];l.a.PRODUCT_IDS_WITH_DTG_DISABLED.includes(d.productId)&&!d.availableTechniques.includes(Object(v.a)(d.productId).getTechniqueFromMemory())&&Object(v.a)(d.productId).rememberLastUsedTechnique(l.a.TYPE_EMBROIDERY)}if(n)return this._dispatchEvents(t.products,t.totalCount);a&&a(!n)},_getSwapCacheKey:function(e){return"swap-"+e+"-"+this._params.swapTemplateId},_useSellingRegion:function(e){y.sellingRegion=_.c.fromArray(e)},_getCachedProductData:function(e){return y.cachedData[e]?y.cachedData[e]:[]},cacheData:function(e,t,i){y.cachedData[e]=u.fromArray(i);var n=this._getCachedProductData(e);n.variants.map(function(e){this._repo.cacheVariant(e)}.bind(this)),n.similarProducts=i.similarProducts.map((function(e){return l.a.fromArray(e)})),i.sellingRegionSettings&&this._useSellingRegion(i.sellingRegionSettings),n.images=i.images.map((function(e){return d.fromArray(e)})),t&&t(n)},_getProductItem:function(e){return e.variants.map(function(e){this._repo.cacheVariant(s.a.fromArray(e))}.bind(this)),l.a.fromArray(e.product)},_dispatchEvents:function(e,t){f.a.toggleLock(!1),a.a.createAndDispatch(p.a.EVENT_PRODUCTS_LOADED,{productsOrVariants:e,totalCount:t})},_initConfigureStore:function(){if(!y._storeInitCallbackExecuted){y._storeInitCallbackExecuted=!0;var e=m.a.getProductsStoreInitCallback();e&&e(this)}}});y.cacheById={},y.cachedData={},y.activeProductId=0,y.sellingRegion=null,y.tempDisabledProductsPushed=0,y.tempDisabledProductsLimit=void 0,y.tempDisabledProductTypes=[],y.tempDisabledProductIds=[],y._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStoreProducts=y)},S7uB:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({productId:0,categoryId:0,storeId:null,search:"",brand:"",isForGenerator:!1,isForProductTemplates:!1,isSync:!1,callback:null,includeDisabledInPush:!1,shouldSaveState:!1,showFulfillmentCountries:!1,showSizes:!0});(globalThis||{}).PFProductPickerPar=n},SGrL:function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var n=i("bXkz"),r=i("nF4n"),a=i("SBaP"),o=i("x0He");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","order-type-picker-mke"),v(g(t),b,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,P).destroy(),v(this,P,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(a.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new o.b).components={"order-type-picker":function(){return i.e(261).then(i.bind(null,"nbu3"))}},t.template='\n            <order-type-picker\n                :order-types="orderTypes"\n                :store-id="storeId"\n                @on-type-chosen="emitEvent(\'onTypeChosen\', $event)"\n            />\n        ',t.initialData={orderTypes:_(this,b).orderTypes,storeId:_(this,b).storeId},t.emitEvent=function(e,t){switch(e){case"onTypeChosen":_(n,b).onTypeChosen&&_(n,b).onTypeChosen(t)}},v(this,P,new o.a(t)),_(this,P).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.orderTypes=t.orderTypes||[],this.storeId=t.storeId||0,this.onTypeChosen=t.onTypeChosen||void 0},E=function(e,t){this.callback=e.callback||function(){},this.types=e.types||[n.a.ORDER_TYPE_BASIC,n.a.ORDER_TYPE_SAMPLE],t&&this.types.length<3&&$(t._nodeDialog).removeClass("modal-lg").addClass("modal-md");var i=this.callback.bind(window,n.a.ORDER_TYPE_BASIC),r=function(){};PF.Customer.sampleOrdersLeft>0&&(r=this.callback.bind(window,n.a.ORDER_TYPE_SAMPLE));var a=new S;a.orderTypes=this.types,a.storeId=e.storeId,a.onTypeChosen=function(e){switch(e){case n.a.ORDER_TYPE_BASIC:i();break;case n.a.ORDER_TYPE_SAMPLE:r();break;default:i()}};var o=new T(a);this.node=tag("div","order-type-picker",[o])};E.prototype=new r.a.Base,(globalThis||{}).PFOrderTypePicker=E},Svo9:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"f",(function(){return u})),i.d(t,"g",(function(){return d})),i.d(t,"h",(function(){return h})),i.d(t,"a",(function(){return p})),i.d(t,"e",(function(){return f}));var n=i("KLvT"),r=i("Kv+z");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function o(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))}}var s=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.a),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(e){return Object(n.a)().commit(r.b(r.i),e)},c=function(e){return Object(n.a)().getters[r.b(r.d)]([e])[0]},u=function(e){return!!c(e)},d=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.h),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=o(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.j));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=o(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(i);case 2:return e.abrupt("return",Object(n.a)().commit(r.b(r.l),{quickDesignItemId:t,technique:i}));case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),f=function(){var e=o(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.b(r.e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},"Sx+Y":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){};a.prototype=new n.a,a.prototype.all=0,a.prototype.total=0,a.prototype.synced=0,a.prototype.notSynced=0,a.prototype.discontinued=0,a.prototype.outOfStock=0,a.prototype.woocommerceVariantWarning=0,a.prototype.removedLicensedAssets=0,a.prototype.ignored=0,a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},a.TYPE_ALL="all",a.TYPE_SYNCED="synced",a.TYPE_NOT_SYNCED="notSynced",a.TYPE_IGNORED="ignored",a.TYPE_DISCONTINUED="discontinued",a.TYPE_OUT_OF_STOCK="outOfStock",a.types={},a.types[a.TYPE_ALL]=dclang("dashboard","sync products","All"),a.types[a.TYPE_SYNCED]=dclang("dashboard","sync products","Synced"),a.types[a.TYPE_NOT_SYNCED]=dclang("dashboard","sync products","Not synced"),a.types[a.TYPE_IGNORED]=dclang("dashboard","sync products","Ignored"),a.types[a.TYPE_DISCONTINUED]=dclang("dashboard","sync products","Discontinued"),a.types[a.TYPE_OUT_OF_STOCK]=dclang("dashboard","sync products","Out of stock"),window&&((globalThis||{}).PFItemsSyncCountsItem=a)},TC9n:function(e,t,i){"use strict";i.d(t,"a",(function(){return f}));var n=i("TbQS"),r=i("ohgv"),a=i("E17x"),o=Class({isActive:!1,title:"",items:[],total:"",categoryItemsNodeClassName:"",itemRenderer:null,viewAllButtonRenderer:null});window&&((globalThis||{}).PFComponentsSitewideSearchCategoryPar=o);var s=i("nF4n"),l=Class({isActive:!1,title:"",items:[],total:0,categoryItemsNodeClassName:"",_itemRenderer:null,_viewAllButtonRenderer:null,__construct:function(e){this.isActive=e.isActive||!1,this.title=e.title,this.items=e.items,this.total=e.total,this.categoryItemsNodeClassName=e.categoryItemsNodeClassName,this._itemRenderer=e.itemRenderer||null,this._viewAllButtonRenderer=e.viewAllButtonRenderer||null},renderItem:function(e){if(this._itemRenderer)return this._itemRenderer(e)},renderViewAllButton:function(){if(this._viewAllButtonRenderer)return this._viewAllButtonRenderer(this)}},s.a.Base);window&&((globalThis||{}).PFComponentsSitewideSearchCategoryBase=l);var c=i("X5Ic"),u=i("9eNC"),d=i("mGLc"),h=i("XLZy"),p=i("kn6O"),f=Class({_headerMainNode:document.querySelector(".header__main")||null,_widgetContainerMobileNode:document.querySelector(".sitewide-search__menu-bar")||null,_inputContainerNode:null,_inputNode:null,_resultContainerNode:null,_categoriesNode:null,_categoryItemsNode:null,_specialKeyCodeMap:{27:"esc"},_eventTimeout:null,_hoverTimeout:null,_smallScreenBreakpoint:992,_isSmallScreen:!1,_source:null,_loadingContainerNode:null,_loadingNode:null,_inputCloseNode:null,_mobileEmptyResultsNode:null,_data:null,_categories:[],_activeCategory:null,_isFocused:!1,_preventClick:!1,_isOpened:!1,_scroll:{isInitial:!0,position:null,offset:0,hideOffset:300,showDelayOffset:100},__construct:function(e){this._inputContainerNode=e.inputContainerNode,this._inputNode=e.inputNode,tag("input",{style:{opacity:0,position:"absolute",left:0,"z-index":-1}}).append(this._inputContainerNode),this._inputNode.setAttribute("id","sitewide-search-input"),this._inputNode.setAttribute("name","sitewide-search-input"),this._inputNode.setAttribute("autocomplete","off"),this._inputNode.setAttribute("style","text-overflow: ellipsis;"),this._source=$.extend({},e.source,{search:function(e,t,i){var n=this.sorter(this.index.search(e));return t(this.remote?n.slice():n),this.remote&&(this.stop(),n.length<this.sufficient&&this.remote.get(e,(function(e){i&&i(e)}))),this},stop:function(){this.remote.cancelLastRequest()}}),this._close(),this._renderInputNodeControls(),this._bindEvents(),this.onResize()},_bindEvents:function(){var e=this;for(var t in window.addEventListener("resize",function(){this.onResize(),this._fixIeFlexWidth()}.bind(this)),document.body.addEventListener("mousedown",this.onOutsideClick),$(this._inputNode).on("focus",this.onFocus),$(this._inputNode).on("blur",this.onBlur),$(this._inputNode).on("keydown",this.onKeyDown),$(this._inputNode).on("keyup",this.onKeyUp),this._specialKeyCodeMap)if(this._specialKeyCodeMap.hasOwnProperty(t)){var i=this._specialKeyCodeMap[t];$(this._inputNode).on("sitewide-search:"+i,this["on"+i[0].toUpperCase()+i.slice(1)+"Key"])}$(document.body).bind({"mousewheel DOMMouseScroll scroll":this.onScroll}),$(document.body).on("touchmove",(function(t){var i=$(document).scrollTop(),n=setInterval((function(){var r=$(document).scrollTop();i===r&&clearInterval(n),e.onScroll(t),i=r}),500)})),u.q(f.EVENT_SHOULD_RECALCULATE,this.onScroll,this)},_open:function(){this._isOpened=!0,h.a.hide(this._loadingNode),this._loadingContainerNode&&s.a.addClassName(this._loadingContainerNode,"pf-d-none"),this._resultContainerNode&&s.a.removeClassName(this._resultContainerNode,"pf-d-none"),this._inputContainerNode&&(s.a.addClassName(document.body,"sitewide-search--opened"),s.a.addClassName(this._inputContainerNode,"sitewide-search--opened"),s.a.removeClassName(this._inputContainerNode,"sitewide-search--closed")),this._renderCategories()},onOutsideClick:function(e){this._isOpened&&e.target!==this._inputCloseNode&&(e.target===this._inputNode||this._resultContainerNode&&this._resultContainerNode.contains(e.target)||this._close())},_close:function(){this._isOpened=!1,this._resultContainerNode&&s.a.addClassName(this._resultContainerNode,"pf-d-none"),this._inputContainerNode&&(s.a.removeClassName(document.body,"sitewide-search--opened"),s.a.removeClassName(this._inputContainerNode,"sitewide-search--opened"),s.a.addClassName(this._inputContainerNode,"sitewide-search--closed")),h.a.hide(this._loadingNode),this._loadingContainerNode&&s.a.addClassName(this._loadingContainerNode,"pf-d-none"),setTimeout((function(){var e=window.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(e)}),1)},_hoverDelay:function(e){clearTimeout(this._hoverTimeout),this._hoverTimeout=setTimeout(e,50)},onResize:function(){this._hideHeaderForMockupGeneratorMobileView()||(this._isSmallScreen=window.innerWidth<this._smallScreenBreakpoint,this._setContentNodeMarginTop(this._isSmallScreen))},onScroll:function(e){if(!this._hideHeaderForMockupGeneratorMobileView())if(a.c.isAny()){var t=$(document).scrollTop();if(this._scroll.position=null===this._scroll.position?t:this._scroll.position,t>this._scroll.hideOffset){var i=t-this._scroll.position;this._scroll.position=t,(this._scroll.offset>0&&i<0||this._scroll.offset<0&&i>0)&&(this._scroll.offset=0),this._scroll.offset+=i,Math.abs(this._scroll.offset)>this._scroll.hideOffset?(this._scroll.isInitial=!1,this._hideHeaderUserbarOnScroll()):(this._scroll.isInitial||!this._scroll.isInitial&&this._scroll.offset<0&&Math.abs(this._scroll.offset)>this._scroll.showDelayOffset)&&this._showHeaderUserbarOnScroll()}else this._scroll.position=t,this._scroll.offset=t,this._showHeaderUserbarOnScroll()}else this._showHeaderUserbarOnScroll()},_hideHeaderUserbarOnScroll:function(){this._widgetContainerMobileNode&&s.a.addClassName(this._widgetContainerMobileNode,"pf-d-none"),this._headerMainNode&&s.a.addClassName(this._headerMainNode,"pf-border-bottom-0")},_showHeaderUserbarOnScroll:function(){this._widgetContainerMobileNode&&s.a.removeClassName(this._widgetContainerMobileNode,"pf-d-none"),this._headerMainNode&&s.a.removeClassName(this._headerMainNode,"pf-border-bottom-0")},_hideHeaderForMockupGeneratorMobileView:function(){return!!$(".dynamic-sticky-footer--attached").length&&(this._hideHeaderUserbarOnScroll(),this._setContentNodeMarginTop(this._isSmallScreen),!0)},onFocus:function(){this._isFocused=!0,this._search(),this._fixIosVh(),this._hideOnScreenKeyboardOnFirstClick()},onBlur:function(){this._isFocused=!1,this._fixIosVh()},onKeyDown:function(){this._source.stop(),this._eventTimeout&&clearTimeout(this._eventTimeout),this._renderLoadingNode()},onKeyUp:function(e){var t=this._specialKeyCodeMap[e.which||e.keyCode];t?$(this._inputNode).trigger("sitewide-search:"+t):this._eventTimeout=setTimeout(function(){this._search()}.bind(this),500)},onEscKey:function(){$(this._inputNode).trigger("blur"),this._close()},_getQuery:function(){return this._inputNode.value},sync:function(e){},async:function(e){$(this._inputNode).trigger("typeahead:asyncreceive"),this._renderResults(e)},_search:function(){$(this._inputNode).trigger("typeahead:asyncrequest"),this._source.ttAdapter()(this._getQuery(),this.sync,this.async)},_renderResults:function(e){if(this._data=e,this._categories=[],this._activeCategory=null,!this._resultContainerNode){this._resultContainerNode=tag("div",["sitewide-search__result-container","pf-border","pf-border-top-0","pf-border-muted","pf-rounded-bottom"].join(" "),[tag("div","pf-pb-8 pf-py-sm-16",[tag("h3","pf-p-0 pf-m-0 pf-mx-16 pf-mb-16 pf-i-18 pf-d-none pf-d-sm-block",dlang("site","I'm looking for...")),this._categoriesNode=tag("ul")]),this._categoryItemsNode=tag("div","pf-px-16 pf-px-sm-32 pf-pb-12 pf-py-sm-16 pf-d-flex pf-flex-column")]).append(this._inputNode.parentNode)}this._open(),this._hideOnScreenKeyboardOnFirstClick()},_renderCategories:function(){if(this._categoriesNode&&s.a.clearNode(this._categoriesNode),this._categoryItemsNode&&s.a.clearNode(this._categoryItemsNode),this._data){var e=this._data;if(!this._categories.length){if(e.orders&&parseInt(e.orders.total)){var t=new o;t.title=e.orders.title,t.items=e.orders.items,t.total=e.orders.total,t.itemRenderer=this.renderCategoryItemOrder,t.viewAllButtonRenderer=this.renderViewAllButtonOrders,t.categoryItemsNodeClassName="sitewide-search__orders",this._categories.push(new l(t))}if(e.products&&parseInt(e.products.total)){var i=new o;i.title=e.products.title,i.items=e.products.items,i.total=e.products.total,i.itemRenderer=this.renderCategoryItemProduct,i.viewAllButtonRenderer=this.renderViewAllButtonProducts,i.categoryItemsNodeClassName="sitewide-search__products",this._categories.push(new l(i))}if(e.mockups&&parseInt(e.mockups.total)){var n=new o;n.title=e.mockups.title,n.items=e.mockups.items,n.total=e.mockups.total,n.itemRenderer=this.renderCategoryItemMockup,n.viewAllButtonRenderer=this.renderViewAllButtonMockups,n.categoryItemsNodeClassName="sitewide-search__products",this._categories.push(new l(n))}if(e.landingPages)for(var r in e.landingPages.items){var a=e.landingPages.items[r],c=new o;c.title=a.title,c.items=a.items,c.total=a.total,c.itemRenderer=this.renderCategoryItemArticle,c.viewAllButtonRenderer=this.renderViewAllButtonArticle,c.categoryItemsNodeClassName="sitewide-search__articles",this._categories.push(new l(c))}if(e.faqPages)for(var u in e.faqPages.items){var d=e.faqPages.items[u],h=new o;h.title=d.title,h.items=d.items,h.total=d.total,h.itemRenderer=this.renderCategoryItemArticle,h.viewAllButtonRenderer=this.renderViewAllButtonArticle,h.categoryItemsNodeClassName="sitewide-search__articles",this._categories.push(new l(h))}}if(this._categories.length){for(r in this._categories){var p=this._categories[r];this._renderCategory(p)}this._triggerGAEvent(!1)}else this._getQuery().length?(this._renderEmptyResultsNode(),this._triggerGAEvent(!0)):this._close();this._fixIeFlexWidth()}},_renderInputNodeControls:function(){s.a.addClassName(this._inputNode,"pf-px-48"),tag("span","pf-i pf-i-24 pf-i-magnify pf-position-absolute pf-mx-12 pf-my-8 pf-text-muted-light").append(this._inputContainerNode),this._inputCloseNode=tag("a",{className:"pf-i pf-i-24 pf-i-close pf-position-absolute pf-px-12 pf-py-8 pf-text-muted-light",onclick:function(e){this._inputNode.value="",this._close(),$(e.target).trigger("blur")}.bind(this)}).append(this._inputContainerNode)},_renderEmptyResultsNode:function(){if(tag("div","pf-d-none pf-d-sm-block pf-text-center pf-border-bottom pf-border-gray-light pf-pb-48 pf-pt-32 pf-mb-8 pf-mb-sm-12",[tag("i","pf-i pf-i-magnify-plus-outline pf-i-36 pf-text-gray pf-mb-4"),tag("p","pf-ui-body pf-m-0 pf-pb-8 pf-bold",[dlang("site","No results found!")]),tag("p","pf-ui-body pf-m-0 pf-text-muted",[dlang("site","Try another keyword or check out products that might interest you below...")])]).append(this._categoryItemsNode),this._mobileEmptyResultsNode=tag("div","pf-d-sm-none pf-text-center pf-border-bottom pf-border-gray-light pf-pb-48 pf-pt-32 pf-mb-8 pf-mb-sm-12",[tag("i","pf-i pf-i-magnify-plus-outline pf-i-36 pf-text-gray pf-mb-4"),tag("p","pf-ui-body pf-m-0 pf-pb-8 pf-bold",[dlang("site","No results found!")]),tag("p","pf-ui-body pf-m-0 pf-text-muted",[dlang("site","Try another keyword or check out products that might interest you below...")])]).append(this._categoryItemsNode),this._data.suggestedProducts&&parseInt(this._data.suggestedProducts.total)){var e=new o;e.isActive=!0,e.title=this._data.suggestedProducts.title,e.items=this._data.suggestedProducts.items,e.total=this._data.suggestedProducts.total,e.itemRenderer=this.renderCategoryItemProduct,e.viewAllButtonRenderer=this.renderViewAllButtonTrending,e.categoryItemsNodeClassName="sitewide-search__products";var t=new l(e);this._renderCategoryItems(t)}},_renderCategory:function(e){this._activeCategory||(this._activeCategory=e),e.isActive=e===this._activeCategory,this._mobileEmptyResultsNode=tag("div");var t=["pf-px-16","pf-py-8","sitewide-search__category"];e.isActive&&t.push("sitewide-search__category--active");var i=tag("li",t.join(" "),[tag("span",null,e.title),tag("span","pf-ml-4","("+e.total+")")]).append(this._categoriesNode),n=this._renderCategoryItems(e);$(i).on("click",$.proxy(this.onCategorySelect,this,i,n)).on("mouseover",function(){!this._isSmallScreen&&this._hoverDelay($.proxy(this.onCategorySelect,this,i,n))}.bind(this)).on("mouseout",function(){clearTimeout(this._hoverTimeout)}.bind(this))},_renderLoadingNode:function(){if(this._resultContainerNode&&s.a.addClassName(this._resultContainerNode,"pf-d-none"),this._loadingContainerNode&&s.a.removeClassName(this._loadingContainerNode,"pf-d-none"),!this._loadingContainerNode){this._loadingContainerNode=tag("div",["sitewide-search__search-container","pf-border","pf-border-top-0","pf-border-muted","pf-rounded-bottom","pf-pt-8"].join(" "),[this._loadingNode=tag("div","pf-h-100 pf-mx-8")]).append(this._inputNode.parentNode)}s.a.addClassName(document.body,"sitewide-search--opened"),s.a.addClassName(this._inputContainerNode,"sitewide-search--opened"),s.a.removeClassName(this._inputContainerNode,"sitewide-search--closed"),h.a.show(this._loadingNode)},onCategorySelect:function(e,t){var i,n=this._categoriesNode.querySelectorAll(".sitewide-search__category");for(i=0;i<n.length;i++)s.a.removeClassName(n[i],"sitewide-search__category--active");s.a.addClassName(e,"sitewide-search__category--active");var r=this._categoryItemsNode.querySelectorAll(".sitewide-search__category-items");for(i=0;i<r.length;i++)s.a.addClassName(r[i],"pf-d-none");s.a.removeClassName(t,"pf-d-none"),this._fixIeFlexWidth()},_renderCategoryItems:function(e){var t,i,n=tag("div","row pf-align-content-start"),r=[e.categoryItemsNodeClassName,e.isActive?"":"pf-d-none","sitewide-search__category-items"],a=tag("div",r.join(" "),[n]);for(var o in this._mobileEmptyResultsNode.append(n),e.items){var s=e.items[o];e.renderItem(s).append(n)}null!==(t=this._data.products)&&void 0!==t&&t.totalNotInRegion&&(new p.a).render(this._data.products.totalNotInRegion,a,null,"pf-mt-8 pf-mb-4 pf-banner pf-banner-gray pf-bold mobile-blacklist-banner");var l=e.renderViewAllButton();return l&&l.append(a),null!==(i=this._data.products)&&void 0!==i&&i.totalNotInRegion&&(new p.a).render(this._data.products.totalNotInRegion,a,null,"pf-mt-24 pf-banner pf-banner-gray pf-bold blacklist-banner"),a.append(this._categoryItemsNode),a},renderCategoryItemOrder:function(e){return tag("div",{className:"col-12 col-md-6"},[tag("a",{className:"sitewide-search__item sitewide-search__item--order pf-d-flex pf-position-relative",href:e.dashboardLink},[tag("div","sitewide-search__item-image pf-mr-16",[tag("img",{className:"img-responsive",src:e.store.urlLogo,alt:e.store.integrationName})]),tag("div","sitewide-search__item-info",[tag("div","sitewide-search__info--title",e.number+" "+e.created),tag("div",null,e.recipient.name),tag("div","pf-d-inline-block float-none status-label "+e.status[0],e.status[1]),tag("div","pf-bold pf-mt-8",prettyMoney(e.grandTotal,e.currency))])])])},renderCategoryItemProduct:function(e){return this._renderCategoryItemProductOrMockup(e,(function(e){return e.autoCompleteUrl}))},renderCategoryItemMockup:function(e){return this._renderCategoryItemProductOrMockup(e,(function(e){return e.mockupGeneratorPageUrl}))},_renderCategoryItemProductOrMockup:function(e,t){var i=c.a.fromArray(e),r=new n.a(i);return tag("div",{className:"col-12 col-md-6"},[tag("a",{className:"sitewide-search__item sitewide-search__item--product pf-d-flex pf-position-relative",href:t(i)},[tag("div","sitewide-search__item-image pf-mr-16",[tag("img",{className:"img-responsive",src:i.urlImage,alt:i.getFullTitle()})]),tag("div","sitewide-search__item-info",[tag("div","sitewide-search__info--title",i.getFullTitle()),tag("div","sitewide-search__info--rating",r.getReviewRating().reviewCount?[tag("span",null,d.a.getReviewRatingStarNode(r)),tag("span","pf-ml-4",r.getReviewRating().rating+" ("+r.getReviewRating().reviewCount+")")]:[]),tag("div","pf-bold pf-mt-8",i.getDisplayPriceString())])])])},renderCategoryItemArticle:function(e){return tag("div","col-12 pf-mb-16",[tag("a",{className:"sitewide-search__item sitewide-search__item--article pf-position-relative",href:e.url},[tag("h4","pf-link pf-normal pf-mb-0",e.title),tag("span",null,e.description)])])},renderViewAllButtonOrders:function(e){var t=dlang("site","Go to {categoryTitle}").replace("{categoryTitle}",e.title),i=langUrl("/dashboard/default/orders");return this._renderViewAllButton(t,i)},renderViewAllButtonProducts:function(e){var t=dlang("site","See matching {categoryTitle} ({count})").replace("{categoryTitle}",e.title).replace("{count}",e.total.toString()),i=langUrl("/search")+"?q="+this._getQuery();return this._renderViewAllButton(t,i)},renderViewAllButtonMockups:function(e){return tag("div")},renderViewAllButtonArticle:function(e){if(e.title===dlang("site","FAQ")){var t=dlang("site","Go to {categoryTitle}").replace("{categoryTitle}",e.title),i=langUrl("/search/search-faq")+"?q="+this._getQuery();return this._renderViewAllButton(t,i)}return tag("div")},renderViewAllButtonTrending:function(e){var t=dlang("site","Go to {categoryTitle}").replace("{categoryTitle}",dlang("site","Product catalog")),i=langUrl("/custom-products");return this._renderViewAllButton(t,i)},_renderViewAllButton:function(e,t){return tag("div","pf-text-center",[tag("a",{href:t,className:"pf-btn pf-btn-secondary pf-mt-12 pf-w-100 pf-w-sm-auto"},e)])},_triggerGAEvent:function(e){if(this._getQuery().length>=3){var t="PF_Components_SitewideSearch:"+r.a.slug(this._getQuery());try{if(!sessionStorage.getItem(t)){var i=this._getQuery().match(/[^/]{4}(@|%40)(?!printful\.com)[^/]{4}/gi)?this._getQuery().replace(/[^\\/]{4}(@|%40)[^\\/]{4}/gi,"[REDACTED_EMAIL]"):this._getQuery();ga("send","event","Sitewide Search",e?"Empty Response":"Succeeded Search",i),sessionStorage.setItem(t,"1")}}catch(e){}}},_fixIeFlexWidth:function(){var e=this;/Trident\/|MSIE/.test(window.navigator.userAgent)&&this._categoryItemsNode&&setTimeout((function(){e._categoryItemsNode.style.marginLeft=".0{rand}%".replace("{rand}",Math.floor(99*Math.random()+1))}),25)},_fixIosVh:function(){a.c.isIOS()&&(this._isFocused?(s.a.addClassName(document.body,"sitewide-search--ios"),s.a.addClassName(document.body,"sitewide-search--focused")):s.a.removeClassName(document.body,"sitewide-search--focused"))},_hideOnScreenKeyboardOnFirstClick:function(){var e=this;(a.c.isIOS()||a.c.isAndroid())&&(this._isFocused&&(this._preventClick=!0),this._categoryItemsNode&&$(this._categoryItemsNode).on("click",(function(t){e._preventClick&&(t.preventDefault(),t.stopPropagation(),e._preventClick=!1)})))},_setContentNodeMarginTop:function(e){var t="";if(e){var i=document.getElementById("app-header").offsetHeight;t="".concat(i,"px")}document.getElementById("content").style.marginTop=t}},s.a.Base);f.EVENT_SHOULD_RECALCULATE="SitewideSearch:EVENT_SHOULD_RECALCULATE",window&&((globalThis||{}).PFComponentsSitewideSearch=f)},TJkW:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("6t3j"),r=i("edgZ"),a=i("NLc6"),o=function(){this.productTitle="",this.descriptionChunks=[],this.descriptionChunkCount=0,this.translationLanguageCount=null,this.translations={},this.sizeGuideExists=!1,this.addTranslationChunk=function(e,t,i,n){void 0===this.translations[e]&&(this.translations[e]=this._createLocaleObject()),this.translations[e].descriptionChunks[t]=i,this.translations[e].descriptionChunkCount=n},this._createLocaleObject=function(){return{title:"",descriptionChunks:[],descriptionChunkCount:0}},this.addTranslationTitle=function(e,t){void 0===this.translations[e]&&(this.translations[e]=this._createLocaleObject()),this.translations[e].title=t},this.isAllTranslationsLoaded=function(){if(0===this.translationLanguageCount)return!0;if(this.translationLanguageCount!==Object.keys(this.translations).length)return!1;var e=!0;for(var t in this.translations){var i=this.translations[t];if(i.descriptionChunks.length!==i.descriptionChunkCount){e=!1;break}}return e},this.isAllDescriptionChunksLoaded=function(){return this.descriptionChunkCount&&this.loadedChunkCount()===this.descriptionChunkCount},this.loadedChunkCount=function(){return this.descriptionChunks.filter((function(e){return null!=e})).length},this.getDescription=function(){return this.descriptionChunks.join("")},this.getTranslations=function(){var e=[];for(var t in this.translations){var i=this.translations[t];e.push(a.a.fromArray({language:t,type:a.a.TYPE_TITLE,value:i.title})),e.push(a.a.fromArray({language:t,type:a.a.TYPE_DESCRIPTION,value:i.descriptionChunks.join("")}))}return e}};(globalThis||{}).PFRepositoriesSyncRepositoryLoadState=o;var s=i("nF4n"),l=Class({added:[],failed:[]});l.fromArray=function(e){var t=l;return s.a.O2O(t,e),t},window&&((globalThis||{}).PFProductPushSyncedProductIds=l);var c=i("2dYE"),u=i("DceF"),d=i("6JZw"),h=function(){this.items=[]};(h.prototype=new d.a).page=0,h.prototype.pages=0,h.prototype.total=0,h.prototype.items=null,h.fromArray=function(e){var t=new h;return s.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsSyncProductList=h);var p=i("9bv1"),f=i("Sx+Y"),g=i("7QI8"),m=Class({toArrayKeys:["generatorDesignId","newItemFile","oldItemFile"],syncVariants:[],newItemFile:null,oldItemFile:null,generatorDesignId:null,toArray:function(){return{newItemFile:this.newItemFile.toArray(),oldItemFile:this.oldItemFile.toArray(),generatorDesignId:this.generatorDesignId,syncVariantIds:this.syncVariants.map((function(e){return e.syncVariantId}))}}},d.a);m.fromArray=function(e){var t=new m,i=e.syncVariants;for(var n in delete e.syncVariants,s.a.O2O(t,e),i)t.syncVariants.push(u.a.fromArray(i[n]));return t.newItemFile=g.a.fromArray(e.newItemFile),t.oldItemFile=g.a.fromArray(e.oldItemFile),t},window&&((globalThis||{}).PFItemsSyncBatchUpdatePair=m);var _=i("LAWH"),v=i("rKkW"),y=i("n5ho"),b=i("X5Ic"),P=i("y70k"),C=i("96ed"),T=i("Sucz"),w=i("1tjy"),I=i("mrkb"),S=function(){};S._syncVariantCache={},S.LOAD_FAILED=0,S.LOAD_SUCCESSFUL=1,S.LOAD_IN_PROGRESS=2,S._syncProductCache={},S._descriptionLoadState=null,S.prototype._currency=null,S.prototype.getCounts=function(e,t){S.INITIAL_REQUEST=S.INITIAL_REQUEST||(new Date).getTime(),Object(T.a)("sync/counts?firstReqTime="+S.INITIAL_REQUEST,{storeId:e},$.proxy(this.getCountsRe,this,t))},S.prototype.getCountsRe=function(e,t){e(f.a.fromArray(t.counts))},S.prototype.getSyncedCounts=function(e,t,i){Object(T.a)("sync/synced-product-counts",{sourceStoreId:e,targetStoreId:t},this._getSyncedCountsRe.bind(this,i))},S.prototype._getSyncedCountsRe=function(e,t){e(c.a.fromArray(t.counts),l.fromArray(t.products))},S.prototype.getSyncProducts=function(e){Object(T.a)("sync/products",{storeId:e.storeId,syncProductType:e.syncProductType,search:e.search,page:e.page,perPage:e.perPage,searchInAll:e.searchInAll,isSampleOrder:e.isSampleOrder||!1},$.proxy(this.getSyncProductsRe,this,e.callback))},S.prototype.getSyncedProducts=function(e){Object(T.a)("sync/synced-products",{storeId:e.storeId,targetStoreId:e.targetStoreId,syncedProductType:e.syncedProductType,search:e.search,page:e.page,perPage:e.perPage},$.proxy(this.getSyncProductsRe,this,e.callback))},S.prototype.getSyncProductsRe=function(e,t){var i=t.syncProducts,n=t.syncProductCounts,r=t.syncProductVariantCounts,a=new h;for(var o in a.page=i.page,a.pages=i.pages,a.total=i.total,i.items){var s=p.a.fromArray(i.items[o]),l=s.syncProductId;s.counts=f.a.fromArray(n[l]);var c={};for(var u in r[l]){var d=r[l][u];c[u]=_.a.fromArray(d)}s.variantCounts=c,a.items.push(s),this.cacheSyncProduct(s)}e(a)},S.prototype.getSyncVariants=function(e,t,i,n){Object(T.a)("sync/variants",{syncProductId:e,syncedOnly:i?1:0,currency:this._currency,currentPage:n||null},$.proxy(this.getSyncVariantsRe,this,t))},S.prototype.setCurrency=function(e){this._currency=e},S.prototype.getSyncVariantsRe=function(e,t){var i,a=[];for(i in t.syncVariants){var o=u.a.fromArray(t.syncVariants[i]);a.push(o),this.cacheSyncVariant(o)}var s=new r.a;for(i in t.files)s.cacheFile(P.a.fromArray(t.files[i]));t.clipartItems.length&&(Object(I.k)(),Object(w.b)(t.clipartItems.map((function(e){return v.a.fromArray(e)}))));var l=new n.a;for(i in t.variants)l.cacheVariant(y.a.fromArray(t.variants[i]));for(i in t.products)l.cacheProduct(b.a.fromArray(t.products[i]));e({syncVariants:a,pagination:t.pagination})},S.prototype.saveSyncVariant=function(e,t){Object(T.a)("sync/save-variant",{syncVariant:e.toArray()},this.saveSyncVariantRe.bind(this,t)),e.syncedAt=moment().unix(),this.cacheSyncVariant(e)},S.prototype.batchSaveSyncVariants=function(e,t){var i=[];e.forEach(function(e){i.push(e.toArray()),e.syncedAt=moment().unix(),this.cacheSyncVariant(e)}.bind(this)),Object(T.a)("sync/batch-save-variants",{syncVariantsList:i},this.batchSaveSyncVariantsRe.bind(this,t))},S.prototype.batchSaveSyncVariantsRe=function(e,t){if(t.error)alert(t.error);else{var i=new r.a,n=[];for(var a in t.variants)if(t.variants.hasOwnProperty(a)){var o=t.variants[a];for(var s in o.fileItems)if(o.fileItems.hasOwnProperty(s)){var l=o.fileItems[s];i.cacheFile(P.a.fromArray(l))}var c=[];for(var u in o.syncBatchUpdatePairs)if(o.syncBatchUpdatePairs.hasOwnProperty(u)){var d=o.syncBatchUpdatePairs[u];c.push(m.fromArray(d))}n.push(c)}e&&e(n)}},S.prototype.saveSyncVariantRe=function(e,t){if(t&&t.error)alert(t.error);else{var i,n=new r.a;for(i in t.fileItems)n.cacheFile(P.a.fromArray(t.fileItems[i]));var a=[];for(i in t.syncBatchUpdatePairs)a.push(m.fromArray(t.syncBatchUpdatePairs[i]));e&&e(a)}},S.prototype.updateSyncUsedFiles=function(e,t){var i=[];for(var n in e)i.push(e[n].toArray());Object(T.a)("sync/update-used-files",{syncBatchUpdatePairs:i},$.proxy(this.updateSyncUsedFilesRe,this,t))},S.prototype.updateSyncUsedFilesRe=function(e,t){e(t.filesReplaced)},S.prototype.saveSyncProduct=function(e,t){Object(T.a)("sync/save-product",{syncProduct:e.toArray()},this.saveSyncProductRe.bind(this,t)),e.syncedAt=moment().unix(),this.cacheSyncProduct(e)},S.prototype.saveSyncProductRe=function(e,t){if(t.error)alert(t.error);else{var i=p.a.fromArray(t.syncProduct);i.counts=f.a.fromArray(t.syncProductCounts);var n={};for(var r in t.syncProductVariantCounts){var a=t.syncProductVariantCounts[r];n[r]=_.a.fromArray(a)}i.variantCounts=n,this.cacheSyncProduct(i),e&&e(i)}},S.prototype.getCachedSyncVariant=function(e){return S._syncVariantCache[e]?S._syncVariantCache[e]:(console.error("Sync variant "+e+" was not cached"),new u.a)},S.prototype.getCachedSyncProduct=function(e){return S._syncProductCache[e]?S._syncProductCache[e]:(console.error("Sync product "+e+" was not cached"),new p.a)},S.prototype.cacheSyncVariant=function(e){S._syncVariantCache[e.syncVariantId]=e},S.prototype.cacheSyncProduct=function(e){S._syncProductCache[e.syncProductId]=e},S.prototype.saveAlternatives=function(e,t){Object(T.a)("sync/save-alternatives",e,t)},S.prototype.requestDescription=function(e,t){var i=S.LOAD_SUCCESSFUL,n=setTimeout((function(){i=S.LOAD_FAILED,t(i)}),3e4);this._editDescriptionPopupCallback&&(C.a.unbindStore(e.storeId,"sync","onDescriptionLoaded",this._editDescriptionPopupCallback),delete this._editDescriptionPopupCallback),this._editDescriptionPopupCallback||(this._editDescriptionPopupCallback=this._requestDescriptionRe.bind(this,i,n,e,t),C.a.subscribeStore(e.storeId,C.a.CHANNEL_SYNC,"onDescriptionLoaded",this._editDescriptionPopupCallback)),Object(T.a)("sync/queue-description-retrieval",{syncProductId:e.syncProductId},(function(e){e||(clearTimeout(n),i=S.LOAD_IN_PROGRESS,t(i))}))},S.prototype._requestDescriptionRe=function(e,t,i,n,r){if(clearTimeout(t),r.syncProductId==i.syncProductId){S._descriptionLoadState||(S._descriptionLoadState=new o),!0===r.isTranslationChunk?(S._descriptionLoadState.addTranslationChunk(r.locale,r.chunkNumber,r.description,r.chunkCount),S._descriptionLoadState.addTranslationTitle(r.locale,r.title),S._descriptionLoadState.translationLanguageCount=r.translationCount):(S._descriptionLoadState.descriptionChunks[r.chunkNumber]=r.description,S._descriptionLoadState.descriptionChunkCount=r.chunkCount,S._descriptionLoadState.productTitle=r.title,S._descriptionLoadState.translationLanguageCount=r.translationCount,S._descriptionLoadState.sizeGuideExists=r.sizeGuideExists);var a=S._descriptionLoadState.isAllTranslationsLoaded(),s=S._descriptionLoadState.isAllDescriptionChunksLoaded();if(a&&s){var l=S._descriptionLoadState.productTitle,c=S._descriptionLoadState.getDescription(),u=S._descriptionLoadState.getTranslations(),d=S._descriptionLoadState.sizeGuideExists;S._descriptionLoadState=null,n(e,i,l,c,d,r.hasImperialSizeGuide,r.hasMetricSizeGuide,r.canEditDescription,u)}}},S.prototype.requestNativeDescription=function(e,t){var i=S.LOAD_SUCCESSFUL;Object(T.a)("sync/queue-native-description-retrieval",{syncProductId:e.syncProductId},this._requestNativeDescriptionRe.bind(this,i,e,t))},S.prototype._requestNativeDescriptionRe=function(e,t,i,n){if(!n)return i(e=S.LOAD_IN_PROGRESS);i(e,t,n.title,n.description,n.sizeGuideExists,n.hasImperialSizeGuide,n.hasMetricSizeGuide,n.canEditDescription)},S.prototype.queueDescriptionEditing=function(e,t){Object(T.a)("sync/queue-description-editing",{data:e},t)},S.GetPar=function(){},S.GetPar.prototype.storeId=null,S.GetPar.prototype.targetStoreId=null,S.GetPar.prototype.syncProductType=null,S.GetPar.prototype.syncedProductType=null,S.GetPar.prototype.search="",S.GetPar.prototype.page=null,S.GetPar.prototype.perPage=null,S.GetPar.prototype.callback=null,S.GetPar.prototype.searchInAll=!0,S.GetPar.prototype.isSampleOrder=!1,(globalThis||{}).PFRepositoriesSyncRepository=S},TKTR:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c}));var n=i("y70k"),r=i("Iy0a"),a=i("n6mh");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.id=parseInt(t.id),this.name=t.name,this.index=parseInt(t.index),this.extra=t.extra?t.extra:{},this.isActive=!!t.isActive,this.image=t.image?n.a.fromArray(t.image):null,this.isTemplate=!!t.isTemplate,this.pusherKey=t.pusherKey||null},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e),this.designData=t.designData}var t,i,n;return t=e,(i=[{key:"getMockupPositionObject",value:function(){var e;return null===(e=this.designData.find((function(e){return e.object===r.a.BE_OBJECT})))||void 0===e?void 0:e.position}},{key:"getMockupOrderIndex",value:function(){return this.designData.filter((function(e){return e.type!==a.a.TYPE_FILL})).findIndex((function(e){return e.object===r.a.BE_OBJECT}))}}])&&o(t.prototype,i),n&&o(t,n),e}()},TOJy:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"d",(function(){return _}));var n=i("9Nv7");function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Object(n.a)("pro-subscription/check-features",{features:e})}var a=i("LvDl");function o(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function s(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function s(e){o(a,n,r,s,l,"next",e)}function l(e){o(a,n,r,s,l,"throw",e)}s(void 0)}))}}var l="background-removal-tool",c="additional-clipart-content",u="getty-images",d={};function h(e,t){var i;return null==t||null===(i=t.features)||void 0===i?void 0:i[e]}function p(){return f.apply(this,arguments)}function f(){return(f=s(regeneratorRuntime.mark((function e(){var t,i,n,r,o,s,l=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=l.length>0&&void 0!==l[0]?l[0]:[],i=Object(a.pick)(d,t),n={},r=0;case 4:if(!(r<Object.keys(i).length)){e.next=13;break}return o=Object.keys(i)[r],e.next=8,i[t];case 8:s=e.sent,n[o]=!!h(o,s);case 10:r++,e.next=4;break;case 13:return e.abrupt("return",n);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(){return m.apply(this,arguments)}function m(){return(m=s(regeneratorRuntime.mark((function e(){var t,i,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:[],i={},t.forEach((function(e){e in d&&(i[e]=d[e])})),(n=t.filter((function(e){return!(e in i)}))).length&&(a=r(n),n.forEach((function(e){d[e]=a}))),e.next=7,p(t);case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return v.apply(this,arguments)}function v(){return(v=s(regeneratorRuntime.mark((function e(){var t,i,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"",e.next=3,g([t]);case 3:return i=e.sent,e.abrupt("return",!(null==i||!i[t]));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},Tt8e:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={convertToArray:function(e){var t=[];for(var i in e)t.push(e[i]);return t},convertToBreak:function(e){return e.split("\r\n").join("<br />")},rememberDsrOnboardingBannerVisibility:function(e){try{sessionStorage.setItem("PFCatalog:dsrBannerState",e?"1":"0")}catch(e){}},getDsrOnboardingBannerVisibility:function(){try{var e=sessionStorage.getItem("PFCatalog:dsrBannerState");return"1"!==e&&"0"!==e?null:"1"===e}catch(e){return null}}};window&&((globalThis||{}).PFProductsCatalogUtilsHelpers=n)},UIgN:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("xeH2"),r=i.n(n);function a(e){return!!function(e){if(e.disabled)return!1;if(e.tabIndex>=0)return!0;switch(e.nodeName.toLowerCase()){case"a":return!!e.href&&"ignore"!==e.rel;case"input":return"hidden"!==e.type&&"file"!==e.type;case"button":case"select":case"textarea":return!0;default:return!1}}(e)&&("function"==typeof e.focus?e.focus():r()(e).focus(),document.activeElement===e)}function o(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];if(a(i)||o(i))return!0}return!1}},UYP3:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("3Dht"),r=i("dqhU"),a=i("nF4n"),o=Class({par:null,__construct:function(e){this.par=new o.Par,a.a.O2O(this.par,e);var t=new n.a;t.minValue=this.par.min,t.maxValue=this.par.max,t.value=this.par.value,t.incrementStep=this.par.step,t.className="pf-mb-8",t.onSlide=this.par.onSlide,t.onValueChanged=this.par.onSlideEnded,this._range=new r.a(t),this.node=tag("div","slider-component",[tag("span",{className:"icon-minus",onclick:this._onClick.bind(this,-1)}),this._range=new r.a(t),tag("span",{className:"icon-plus",onclick:this._onClick.bind(this,1)})])},_onClick:function(e){this.setValue(this.getValue()+15*e),this.par.onSlide(this.getValue(),this)},getValue:function(){return parseFloat(this._range.value)},setValue:function(e){e=Math.max(Math.min(e,this.par.max),this.par.min),this._range.setValue(e)}},a.a.Base);o.Par=Class({min:0,max:100,value:0,step:1,onSlide:null,onSlideEnded:null}),window&&((globalThis||{}).PFComponentsSlider=o)},UzRV:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("97Au"),r=Class({__construct:function(e,t,i){var r=new n.a.Par;r.modalDialogClass="modal-md",r.onClose="function"==typeof i?i:function(){return{}};var a=new n.a(r);a.setHeaderContent("");var o=dnlang("generator","You haven't uploaded <strong>{files}</strong> file","You haven't uploaded <strong>{files}</strong> files",e.length).replace("{files}",e.join(", ")),s=tag("div","",[tag("h4","",dlang("generator","Yikes! Missing files")),tag("div","pf-text-muted pf-ui-body",[tag("span",{innerHTML:o}),tag("br"),dnlang("generator","Proceed without it?","Proceed without them?",e.length)])]);a.setContent(s);var l=tag("div","container-fluid pf-d-block pf-d-md-flex pf-align-items-stretch",[tag("a",{className:"pf-btn pf-btn-secondary pf-mr-0 pf-mr-md-12 pf-mb-12 pf-mb-md-0 pf-w-100 pf-w-md-auto",onclick:function(e){a.remove(),r.onClose()}},lang("No, I'll fix it")),tag("a",{className:"pf-btn pf-btn-primary pf-w-100 pf-w-md-auto",onclick:function(e){a.remove(),t()}},lang("Yes, continue"))]);a.setFooterContent(l),a.show()}});window&&((globalThis||{}).PFComponentsMissingPrintfilesPopup=r)},"V+k9":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("i0Kg"),r=i("y70k"),a=i("nF4n"),o=function(){};o.prototype=new r.a,o.prototype.generatorVariantId=null,o.prototype.templateId=null,o.prototype.placementId=null,r.a.prototype.digitizedItems=null,o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),t.digitizedItems=new n.a,t},window&&((globalThis||{}).PFItemsSavedGeneratorFileItem=o)},V5mN:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("nBn9"),r=i("nF4n"),a=Class({_bulletPoint:{tag:"img",src:"/static/images/icons/bullet-point-green.svg",style:{width:"17px",height:"15px",position:"absolute",marginTop:"3px"}},_headerContent:tag("div","col-sm-12"),__construct:function(e){this._par=e||new a.Par;var t=this._getSignUpContent(this._par.signUpContent),i=this._getSignUpContent(this._par.signInContent),o=this._par.returnUrl?"?returnUrl="+encodeURIComponent(this._par.returnUrl):"",s=langUrl("/auth/register")+o,l=langUrl("/auth")+o,c=window.location.pathname;ga("send","event","Sign up to continue pop-up","Banner appeared",c),null!=this._par.signUpInHeader&&(r.a.clearNode(this._headerContent),this._par.signUpInHeader.append(this._headerContent)),new n.a({title:lang("Sign up with Printful to continue"),bodyContent:tag("div","sign-up-popup-container",[tag("div","row",[this._headerContent,tag("div","col-sm-6",[tag("div",{className:"sign-up-popup-container__box sign-up-popup-container__box--thick",prop:{onclick:function(){ga("send","event","Sign up to continue pop-up","Sign up clicked",c),window.location=s}}},[tag("div","sign-up-popup-container__header",[tag("strong",null,lang("Sign up to Printful"))]),tag("div","sign-up-popup-container__content",[tag("ul","pf-p-0",[this._getContent(t,!0)])]),tag("a",{className:"pf-btn pf-btn-primary sign-up-popup-container__btn",href:s},[lang("Sign up")])])]),tag("div","col-sm-6",[tag("div",{className:"sign-up-popup-container__box",prop:{onclick:function(){ga("send","event","Sign up to continue pop-up","Sign in clicked",c),window.location=l}}},[tag("div","sign-up-popup-container__header",[lang("Already Printful user?")]),tag("div","text-center sign-up-popup-container__content",[this._getContent(i,!1)]),tag("a",{className:"pf-btn pf-btn-secondary sign-up-popup-container__btn",href:l},[lang("Sign in")])])])])]),showFooterContent:!1})},_getSignUpContent:function(e){return"string"==typeof e?JSON.parse(e):e},_getContent:function(e,t){var i=[];for(var n in e){var r=e[n];t?i.push(this._getListElement(r)):i.push(r)}return i},_getListElement:function(e){return{tag:"li",els:[this._bulletPoint,{tag:"div",els:[e]}]}}});a.Par=Class({returnUrl:"",signUpContent:null,signInContent:null,signUpInHeader:null}),window&&((globalThis||{}).PFComponentsSignUpPopup=a)},VpOd:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("qs6/"),r=i("x0He"),a=i("SBaP");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){s(a,n,r,o,l,"next",e)}function l(e){s(a,n,r,o,l,"throw",e)}o(void 0)}))}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return p(this,i)}}function p(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,v(e,t,"get"))}function _(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,v(e,t,"set"),i),i}function v(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var y=new WeakMap,b=new WeakMap,P=new WeakSet,C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(o,e);var t,i,r,a=h(o);function o(e){var t;return c(this,o),t=a.call(this),P.add(f(t)),y.set(f(t),{writable:!0,value:void 0}),b.set(f(t),{writable:!0,value:void 0}),t.node=tag("div","discount-countdown-mke"),_(f(t),y,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(f(t),P,T).call(f(t)),t}return t=o,r=[{key:"createDiscountCountdown",value:function(e){var t=e.countdownText,i=void 0===t?"":t,n=e.endTime,r=e.showTopTriangle,a=void 0!==r&&r,o=e.showBottomTriangle,s=void 0!==o&&o,l=e.justifyContentEndOnXxs,c=void 0!==l&&l,u=e.customBlockClass,d=void 0===u?"":u,h=new I;return h.endTime=1e3*n,h.text=i,h.showTopTriangle=a,h.showBottomTriangle=s,h.justifyContentEndOnXxs=c,h.customBlockClass=d,new this(h)}},{key:"getPeriodicPriceCountdownFromCartOrderItem",value:function(e){var t=e.cartOrderItem,i=e.showTopTriangle,r=void 0!==i&&i,a=e.showBottomTriangle,o=void 0!==a&&a,s=e.customBlockClass,l=void 0===s?"":s,c=e.justifyContentEndOnXxs,u=void 0!==c&&c,d=e.containerClass,h=void 0===d?"":d;if(e.tooltipPlacement,t&&t.priceData.discountedPrice&&n.a.DISCOUNT_PERIODIC_TYPES.includes(t.priceData.discountType)){var p=this.createDiscountCountdown({countdownText:n.a.DISCOUNT_COUNTDOWN_TEXT_MAP[t.priceData.discountType],endTime:t.priceData.getPeriodicPriceExpiryTime(),showTopTriangle:r,showBottomTriangle:o,justifyContentEndOnXxs:u,customBlockClass:l});return tag("div",h,[p])}return""}},{key:"getPeriodicPriceCountdownFromPriceRange",value:function(e){var t,i=e.priceRange,r=e.showTopTriangle,a=void 0!==r&&r,o=e.showBottomTriangle,s=void 0!==o&&o,l=e.customBlockClass,c=void 0===l?"":l,u=e.justifyContentEndOnXxs,d=void 0!==u&&u,h=e.containerClass,p=void 0===h?"":h,f=null===(t=i.minPriceDiscount)||void 0===t?void 0:t.discountType;if(i.minPriceDiscount&&n.a.DISCOUNT_PERIODIC_TYPES.includes(f)&&i.minPriceDiscount.discountExpiryDate&&1e3*i.minPriceDiscount.discountExpiryDate>=Date.now()){var g=this.createDiscountCountdown({countdownText:n.a.DISCOUNT_COUNTDOWN_TEXT_MAP[f],endTime:i.minPriceDiscount.discountExpiryDate,showTopTriangle:a,showBottomTriangle:s,justifyContentEndOnXxs:d,customBlockClass:c});return tag("div",p,[g])}return""}}],(i=null)&&u(t.prototype,i),r&&u(t,r),o}(a.a);function T(){return w.apply(this,arguments)}function w(){return(w=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new r.b).components={"discount-countdown":function(){return i.e(197).then(i.bind(null,"2YnG"))}},t.template='\n            <discount-countdown\n                :end-time="endTime"\n                :show-top-triangle="showTopTriangle"\n                :show-bottom-triangle="showBottomTriangle"\n                :custom-block-class="customBlockClass"\n                :justify-content-end-on-xxs="justifyContentEndOnXxs"\n                :text="text"\n            />\n        ',t.initialData={endTime:m(this,y).endTime,text:m(this,y).text,showTopTriangle:m(this,y).showTopTriangle,showBottomTriangle:m(this,y).showBottomTriangle,justifyContentEndOnXxs:m(this,y).justifyContentEndOnXxs,customBlockClass:m(this,y).customBlockClass},_(this,b,new r.a(t)),m(this,b).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var I=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this.endTime=t.endTime,this.text=t.text,this.showBottomTriangle=t.showBottomTriangle,this.showTopTriangle=t.showTopTriangle,this.customBlockClass=t.customBlockClass,this.justifyContentEndOnXxs=t.justifyContentEndOnXxs}},VxIk:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return r}));var n=Object.freeze({STORAGE_KEY:"generatorScenes",CACHE_VERSION:1}),r=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"})},WLCh:function(e,t,i){"use strict";function n(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return r(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,s=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return s=e.done,e},e:function(e){l=!0,o=e},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw o}}}}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}i.d(t,"a",(function(){return a}));var a=Class({sizeConfig:null,colorConfig:null,activeRegion:[],isSampleOrder:!1,productOptionsValues:null,placementPrices:{},fileTags:{},__construct:function(){this.setSizeConfig(new a.ConfigBlueprint).setColorConfig(new a.ConfigBlueprint)},setSizeConfig:function(e){return this.sizeConfig=e,this},setColorConfig:function(e){return this.colorConfig=e,this},setActiveRegion:function(e){"string"==typeof e&&(e=[e]);var t,i=n(e);try{for(i.s();!(t=i.n()).done;){var r=t.value;-1===this.activeRegion.indexOf(r)&&this.activeRegion.push(r)}}catch(e){i.e(e)}finally{i.f()}return this},setPlacementPrices:function(e){return this.placementPrices=e,this},setSampleOrderStatus:function(e){return this.isSampleOrder=e,this},setFileTags:function(e,t){return this.placementGroups=e,this.fileTags=t,this},getFileTag:function(e,t){if(!this.placementGroups||!this.fileTags)return"";var i=t+"_"+this.placementGroups[e];return this.fileTags[i]?"tag: "+this.fileTags[i]:""},setOptionsValues:function(e){return this.productOptionsValues=e,this}});a.TYPE_SIZE="size",a.TYPE_COLOR="color",a.TYPE_PRODUCT_OPTIONS="productOptions",a.ConfigBlueprint=Class({maxValues:0,defaultValue:null,isPopoverEnabled:!1,__construct:function(e,t,i){void 0!==e&&(this.maxValues=e),void 0!==t&&(this.defaultValue=t),void 0!==i&&(this.isPopoverEnabled=i)}}),window&&((globalThis||{}).PFVariantPickerPickersConfig=a)},XPj6:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("WLCh"),r=i("wo5H"),a=Class({store:null,product:null,ctaText:lang("Proceed"),onProductDesigned:null,onBack:null,onFooterRender:null,isOrderFlowMode:!1,isFooterVisible:!0,isMockupGeneratorMode:!1,arePickersVisible:!0,isProductPushMode:!1,isChangePrintfileMode:!1,onReady:null,designerState:null,orderLineItem:null,onFileRemoved:null,onPositionsChanged:null,onPickerChanged:null,placementDependentOptions:!1,withGlobalDropZone:!0,mockupMainMaxWidth:800,mockupMainMaxHeight:800,pushMockupMainMaxWidth:561,pushMockupMainMaxHeight:561,mockupZoomMaxWidth:1e3,observer:null,generatorParameters:null,generatorDesignKey:"",useGeneratedDesignRpcUrl:!1,disableLayerManipulations:!1,hideZoomButton:!1,hideEmptyPlacements:!1,onActiveLayerChanged:null,disableOutOfBoundsErrorMessages:!1,existingVariants:null,autoLoad:!0,pickerConfig:new n.a,isCustomizerEnabled:!1,forceOrientation:"",previewMockupVariant:null,isCustomizingMode:!1,isModalDesigner:!1,isCustomizerEnabledJS:!1,defaultPlacementId:null,productTemplateEditorState:null,onLoaderToggle:null,onProductLoaded:null,onCanContinueChange:null,onFooterVisibilityChange:null,shouldShowPrice:!0,disableDesignerLeaveWarning:!1,isProductPreloaded:!1,onDisabledSizesWarn:null,onActiveDesignerTabChanged:null,initDesignerTechnique:null,productChanged:!1,keepDesignerModules:!1,designerType:r.o,isTechniquePickerEnabled:!0});a.UNAVAILABLE={DESC:dlang("generator","Sorry, this size and color combination is out of stock. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is out of stock. Please choose a different size"),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is out of stock. Please choose a different color.")},window&&((globalThis||{}).PFProductPushDesignerPar=a)},XcIk:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("tJty"),r=i("Pxqf"),a=i("nF4n"),o=i("96ed"),s=i("slIU"),l=function(e){var t=this;if(this.par=new n.a,a.a.O2O(this.par,e),this.par.uploadType){var i=this.par.extensions.length>0?"."+this.par.extensions.join(",."):"*";this.node=Object(a.a)({tag:"span",els:[this.nodeButton=Object(a.a)({tag:this.par.buttonTag,className:this.par.buttonClassName,text:this.par.caption,onclick:$.proxy((function(){if(this.par.onClick&&!1===this.par.onClick())return!1;$(this.node).find("input[type=file]").click()}),this)}),this.nodeFileInput=Object(a.a)({tag:"input",type:"file",name:"file",className:"hidden",attr:{accept:i}})]}),this.nodeFileInput.multiple=this.par.allowMultiple;var r=new s.a.Par;r.uploadType=this.par.uploadType,r.node=this.nodeFileInput,r.allowedExtensionRegex=new RegExp("(.|/)("+this.par.extensions.join("|")+")$","i"),r.uploadCallbackUrl=this.par.uploadCallbackUrl,r.uploadDataUrl=this.par.uploadDataUrl,r.maxUploadSize=this.par.maxUploadSize,r.nodeDropZone=this.par.nodeDropZone||!1,r.onDone=this.onFileUploaded.bind(this),r.onFileSelected=this.onFileSelected.bind(this),r.getUploadExtra=function(){return t.par.extraData},r.onProgress=function(e){$(this.nodeButton).text(this.par.getProgressText(e))}.bind(this),r.onStart=function(){a.a.addClassName(this.nodeButton,"disabled"),this.nodeButton.blur(),$(this.nodeButton).text(this.par.getStartText()),this.onFileStarted()}.bind(this),r.onProcessFail=function(e,t){a.a.removeClassName(this.nodeButton,"disabled"),$(this.nodeButton).text(this.par.caption),alert("Sorry, upload failed, please try again!\nError: "+t)}.bind(this),r.onFail=function(e){a.a.removeClassName(this.nodeButton,"disabled"),this.par.onFail?this.par.onFail(e):alert("Sorry, upload failed, please try again!\nReason: "+e),$(this.nodeButton).text(this.par.caption)}.bind(this),r.onSubmit=function(e){o.a.subscribe(e.temporaryFilePusherKey,"processed",this.onFileProcessed.bind(this)),o.a.subscribe(e.temporaryFilePusherKey,"failed",this.onFileProcessingFailed.bind(this))}.bind(this),this.uploader=new s.a(r)}else console.error("No upload type specified!")};l.prototype=new a.a.Base,l.prototype.setUploadType=function(e){this.par.uploadType=e,this.uploader.setUploadType(e)},l.prototype.onFileUploaded=function(e){var t=r.a.fromArray(e);this.nodeButton.innerText=this.par.getProcessingText(),a.a.addClassName(this.nodeButton,"disabled"),this.par.onUploaded?this.par.onUploaded(t):console.error("Callback not defined for temporary file upload")},l.prototype.onFileStarted=function(){this.par.onStarted?this.par.onStarted():console.log("File started")},l.prototype.onFileSelected=function(e){var t=e.files[e.index];this.par.onSelected?this.par.onSelected(t):console.log("File selected",t)},l.prototype.onFileProcessed=function(e){var t=r.a.fromArray(e);this.nodeButton.innerText=this.par.caption,a.a.removeClassName(this.nodeButton,"disabled"),this.par.onProcessed?this.par.onProcessed(t):console.log("File processed",t)},l.prototype.onFileProcessingFailed=function(e){var t=r.a.fromArray(e);this.par.onProcessingFailed?this.par.onProcessingFailed(t):console.log("File processing failed",t)},l.prototype.click=function(){this.nodeButton.click()},l.prototype.hide=function(){a.a.addClassName(this.nodeButton,"hidden")},l.prototype.show=function(){a.a.removeClassName(this.nodeButton,"hidden")},window&&((globalThis||{}).PFComponentsBasicUploadButton=l)},XsTE:function(e,t,i){"use strict";i.r(t),i.d(t,"MOCKUP_VARIANT_ID",(function(){return m})),i.d(t,"MOCKUP_GENERATOR_VARIANT_ID",(function(){return _})),i.d(t,"MOCKUP_TEMPLATE_ID",(function(){return v})),i.d(t,"MOCKUP_PLACEMENT_ID",(function(){return y})),i.d(t,"MOCKUP_PLACEMENT_NAME",(function(){return b})),i.d(t,"MOCKUP_REQUIRED_DPI",(function(){return P})),i.d(t,"MOCKUP_DESIGN_AREA_WIDTH",(function(){return C})),i.d(t,"MOCKUP_DESIGN_AREA_HEIGHT",(function(){return T})),i.d(t,"getMockupPlacementOptions",(function(){return w})),i.d(t,"createMockupDesigner",(function(){return I}));var n=i("tx4t"),r=i("XPj6"),a=i("uGFp"),o=i("MMbA"),s=i("tw/D"),l=i("FxE2"),c=i("bRD6"),u=i("Vx67"),d=i("Q1Td"),h=i("5sNq"),p=i("ehgC"),f=i("wo5H");function g(e,t){return c.a.fromArray({fillMode:"fit",height:e,width:t,layers:[],parentTemplateId:null,placementId:y,placementName:b,technique:f.n,templateId:v,centerDefaultYPosition:!0})}var m=77777,_=88888,v=99999,y="mockup",b="Mockup",P=1,C=1e3,T=1e3;function w(){return s.a.fromArray([{options:{},placement:y}])}function I(){var e={templateGroupName:b,templateHeight:T/P,templateWidth:C/P,generatorVariant:{generatorVariantId:_,templateId:v,placementId:y,generatorImageUrl:"",generatorThumbnailUrl:"",mockupPosition:{areaWidth:C,areaHeight:T,left:0,top:0,width:C,height:T,rotation:0}}},t=e.templateWidth,i=e.templateHeight,s=e.generatorVariant;if(!t||!i||!s)return console.error("Failed to initialize generator"),null;var c=new r.a;c.store=new p.a,c.initDesignerTechnique=f.n,c.designerType=f.n,c.generatorParameters=new h.a,c.generatorParameters.designData=new a.a,c.generatorParameters.placementOptions=w(),c.generatorParameters.availablePlacements=[{id:y,isNew:!1,technique:f.n,title:b}],c.generatorParameters.calculatedPositions=[g(i,t)];var I=[];I[y]=v,c.generatorParameters.variantMapping=[l.a.fromArray({color:"",discontinued:0,mockupIds:{},size:"",templateIds:I,variantId:m})];var S=new d.a;return S.getCachedGeneratorVariants(m)&&delete d.a.generatorVariantCache[m],S.cacheGeneratorVariant(m,s),c.generatorParameters.generatorVariants[v]=u.a.fromArray(s),c.generatorParameters.requiredDPI=P,c.previewMockupVariant=s,c.designerState=new o.a,c.shouldShowPrice=!1,c.disableOutOfBoundsErrorMessages=!0,c.isModalDesigner=!0,c.keepDesignerModules=!0,new n.a(c)}},Y6pR:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return u})),i.d(t,"c",(function(){return d}));var n=i("o0qH"),r=i("7QI8"),a=i("LvDl"),o=i.n(a);function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var l=function(){function e(t){var i,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=null,(n="productPrintPrices")in(i=this)?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,this.productPrintPrices=t}var t,i,n;return t=e,(i=[{key:"getPrintPrice",value:function(e,t,i){var n=this._getPrintPrices(e,i);return o.a.find(n,["placementName",t])}},{key:"getPlacementPickerPrintPrice",value:function(e,t,i){var n=this._getPlacementPickerPrintPrices(e,i);return o.a.find(n,["placementName",t])}},{key:"getMinPrintPriceByTechnique",value:function(e){return e||(e=this._getFallbackTechnique()),this._findByTechnique(e).minPrintPrice}},{key:"_getPrintPrices",value:function(e,t){var i=this._findByTechnique(e),n=this._findByPlacementNames(i,t),r=o.a.cloneDeep(n);if(this._hasPriceEqualToPrice(n,i.minPrintPrice.discountedPrice))return r;var a=this._getHighestCostPrintPrice(n);if(!a)return r;for(var s in r){var l=r[s],c=l.discountedPrice==a.discountedPrice,u=l.discountedPrice<i.minPrintPrice.discountedPrice;if(c&&u)return r[s].price=i.minPrintPrice.price,r[s].discountedPrice=i.minPrintPrice.discountedPrice,r}return r}},{key:"_getPlacementPickerPrintPrices",value:function(e,t){var i=this._findByTechnique(e),n=this._findByPlacementNames(i,t),r=o.a.cloneDeep(n);if(this._hasPriceEqualToPrice(n,i.minPrintPrice.discountedPrice)){for(var a in r)if(r[a].discountedPrice==i.minPrintPrice.discountedPrice){r[a].price=0,r[a].discountedPrice=0;break}return r}var s=this._getHighestCostPrintPrice(n);if(!s)return r;for(var l in r){var c=r[l],u=c.discountedPrice==s.discountedPrice,d=c.discountedPrice>=i.minPrintPrice.discountedPrice;if(u)return d?(r[l].discountedPrice=n[l].discountedPrice-i.minPrintPrice.discountedPrice,r[l].price=n[l].price-i.minPrintPrice.price):(r[l].price=0,r[l].discountedPrice=0),r}return r}},{key:"_getHighestCostPrintPrice",value:function(e){return o.a.maxBy(e,"discountedPrice")}},{key:"_hasPriceEqualToPrice",value:function(e,t){return!!o.a.find(e,["discountedPrice",t])}},{key:"_findByTechnique",value:function(e){return o.a.find(this.productPrintPrices.techniquePrices,["technique",e])}},{key:"_findByPlacementNames",value:function(e,t){return o.a.filter(e.defaultPrintPrices,(function(e){return t.includes(e.placementName)}))}},{key:"_getFallbackTechnique",value:function(){return o.a.first(this.productPrintPrices.techniquePrices).technique}}])&&s(t.prototype,i),n&&s(t,n),e}(),c=Class({_placementPrices:null,_placementIdsWithLayers:[],_availablePlacements:[],_product:null,_licensedAssetsPrice:0,_printPriceCalculator:null,__construct:function(e,t){this._product=e,t&&this.updatePlacementPrices(t),this._printPriceCalculator=new l(null==e?void 0:e.productPrintPrices)},updatePlacementPrices:function(e){return this._placementPrices=e,this},updatePlacementsWithLayers:function(e){return this._placementIdsWithLayers=e,this},setAvailablePlacements:function(e){return this._availablePlacements=e.map((function(e){return e.id})),this},getFormattedPlacementPrices:function(){var e={};return this._placementIdsWithLayers.length<=1&&!this._hasOnlyInsideLabel()&&!this.shouldUseNewPricing()||this._availablePlacements.filter((function(e){return this._placementIdsWithLayers.indexOf(e)>-1}),this).forEach((function(t){e[t]=this.getPlacementPriceData(new u(t))}),this),e},getPlacementPriceData:function(e){if(this.shouldUseNewPricing())return this.getNewPlacementPriceData(e);var t=!!this._getFirstPlacementWithLayers(),i=this._isLabelAvailable(),n=t&&this._hasFrontOrBack(),a=this._getPlacementPrice([r.a.TYPE_BACK,r.a.TYPE_EMBROIDERY_BACK]),o=null,s=this._getFirstPlacementWithLayers();return(this._hasLayers(e.getId())||(e.isFront()||e.isBack())&&!n&&i)&&(t=!1),this._hasLayers(e.getId())&&!e.isLabel()&&e.getId()!==s&&(t=!0),e.isLabel()&&(t=!0),t&&(e.isFront()||e.isEmbroideryFront())&&(o=a),{canDisplayPrice:t,basePrice:this._placementPrices.getDiscountedPrice(e.getId()),finalPrice:o,currency:this._product.priceRange.currency}},getTotal:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.shouldUseNewPricing())return this.getNewTotal(e,t);var i=!0,n=!0,r=!0,a=this._adjustBasePrice(e.priceData.price);return t&&(a=this._adjustBasePrice(e.priceData.discountedPrice)),a+=this.getLicensedAssetsPrice(),this._placementIdsWithLayers.forEach((function(e){var o=new u(e);(!o.isBack()&&!o.isOutsideLabel()||this._hasFront())&&(this._shouldIgnoreExtraSleevePrice(n)?n=!1:this._shouldIgnoreExtraLegPrice(r)?r=!1:!o.isEmbroiderySide()&&!o.isEmbroideryBack()||this._hasFrontEmbroidery()||!i?a+=t?this._placementPrices.getDiscountedPrice(o.getId()):this._placementPrices.getPrice(o.getId()):i=!1)}),this),a},shouldUseNewPricing:function(){return this._product.useNewPricing&&null!=this._product.productPrintPrices},getNewTotal:function(e,t){var i=t?e.priceData.discountedPrice:e.priceData.price,n=this._getCurrentTechnique();i+=this.getLicensedAssetsPrice();var r=e.priceData.includedPrintPriceItem;if(!this._hasPlacementsWithLayers()){var a=this._printPriceCalculator.getMinPrintPriceByTechnique(n);return i+=t?a.discountedPrice-r.discountedPrice:a.price-r.price}return i-=t?r.discountedPrice:r.price,this._placementIdsWithLayers.forEach((function(e){var r=this._printPriceCalculator.getPrintPrice(n,e,this._placementIdsWithLayers),a=t?r.discountedPrice:r.price;i+=a}),this),i},getNewPlacementPriceData:function(e){var t=this._printPriceCalculator.getPlacementPickerPrintPrice(this._getCurrentTechnique(),e.getId(),this._placementIdsWithLayers);return{canDisplayPrice:!(0==t.price),basePrice:t.discountedPrice,finalPrice:t.discountedPrice,currency:this._product.priceRange.currency}},setLicensedAssetsPrice:function(e){return this._licensedAssetsPrice=e,this},getLicensedAssetsPrice:function(){return this._licensedAssetsPrice},_adjustBasePrice:function(e){var t=this._getActiveTechnique();if(this._product.type!==t&&!this._hasPlacementsWithLayers()){var i=this._placementPrices.getPlacementsByTechnique(t);i.length&&(e+=this._placementPrices.getPrice(i[0]))}return e},_hasLayers:function(e){return this._placementIdsWithLayers.indexOf(e)>-1},_getFirstPlacementWithLayers:function(){return this._hasPlacementsWithLayers()?this._placementIdsWithLayers.slice().shift():null},_getPlacementPrice:function(e){for(var t in e){var i=this._placementPrices.getDiscountedPrice(e[t]);if(i)return i}return null},_isLabelAvailable:function(){return this._availablePlacements.filter((function(e){return new u(e).isLabel()})).length>0},_hasOnlyInsideLabel:function(){return 1===this._placementIdsWithLayers.length&&1===this._placementIdsWithLayers.filter((function(e){return new u(e).isInsideLabel()})).length},_hasFrontOrBack:function(){return this._placementIdsWithLayers.filter((function(e){var t=new u(e);return t.isFront()||t.isBack()})).length>0},_hasFront:function(){return this._placementIdsWithLayers.filter((function(e){return new u(e).isFront()})).length>0},_shouldIgnoreExtraSleevePrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new u(e).isSleeve()&&!this._hasFrontOrBack()}),this).length>0},_shouldIgnoreExtraLegPrice:function(e){return!!(this._product&&this._product.isDtgShirt()&&e)&&this._placementIdsWithLayers.filter((function(e){return new u(e).isLeg(this._product)}),this).length>0},_hasPlacementsWithLayers:function(e){return e||(e=0),this._placementIdsWithLayers.length>e},_getActiveTechnique:function(){return Object(n.a)(this._product.productId).getTechniqueFromMemory()},_getCurrentTechnique:function(){var e;return null!==(e=this._getActiveTechnique())&&void 0!==e?e:this._product.type},_hasFrontEmbroidery:function(){return this._placementIdsWithLayers.filter((function(e){return new u(e).isEmbroideryFront()})).length>0}}),u=Class({_placementId:"",__construct:function(e){this._placementId=e},getId:function(){return this._placementId},isMockup:function(){return this._is([r.a.TYPE_MOCKUP])},isFront:function(){return this._is([r.a.TYPE_FRONT,r.a.TYPE_POCKET,r.a.TYPE_DEFAULT])},isBack:function(){return this._is([r.a.TYPE_BACK])},isLabel:function(){return this._is([r.a.TYPE_LABEL_OUTSIDE,r.a.TYPE_LABEL_INSIDE])},isInsideLabel:function(){return this._is([r.a.TYPE_LABEL_INSIDE])},isOutsideLabel:function(){return this._is([r.a.TYPE_LABEL_OUTSIDE])},isSleeve:function(){return this._is([r.a.TYPE_SLEEVE_LEFT,r.a.TYPE_SLEEVE_RIGHT])},isLeg:function(e){var t=[r.a.TYPE_LEG_LEFT,r.a.TYPE_LEG_RIGHT,r.a.TYPE_LEG_FRONT_LEFT,r.a.TYPE_LEG_FRONT_RIGHT,r.a.TYPE_LEG_BACK_LEFT,r.a.TYPE_LEG_BACK_RIGHT];return e.isJoggerWithPocket()&&t.push(r.a.TYPE_POCKET),this._is(t)},isEmbroideryFront:function(){return this._is([r.a.TYPE_EMBROIDERY_FRONT])},isEmbroideryBack:function(){return this._is([r.a.TYPE_EMBROIDERY_BACK])},isEmbroiderySide:function(){return this._is([r.a.TYPE_EMBROIDERY_LEFT,r.a.TYPE_EMBROIDERY_RIGHT])},isHangTag:function(){return this._is([r.a.TYPE_HANG_TAG])},isBackground:function(){return this._is([r.a.TYPE_BACKGROUND])},_is:function(e){return e.indexOf(this._placementId)>-1}}),d=Class({items:[],add:function(e,t,i,n){this.items.push({placementId:i,discountedPrice:n,price:e,technique:t})},getPrice:function(e){var t=this._findItem(e);return t?t.price:null},getDiscountedPrice:function(e){var t=this._findItem(e);return t?t.discountedPrice:null},getTechnique:function(e){var t=this._findItem(e);return t?t.technique:null},getPlacementsByTechnique:function(e){return this.items.filter((function(t){return t.technique===e})).map((function(e){return e.placementId}))},_findItem:function(e){return this.items.filter((function(t){return t.placementId===e})).slice().shift()}});(globalThis||{}).PFVariantPickerPriceCalculator=c,(globalThis||{}).PFVariantPickerPlacementChecker=u,(globalThis||{}).PFVariantPickerPricesCollection=d},YBfo:function(e,t,i){"use strict";var n,r;function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u}));var o="products_pricing",s="mockup_generator",l={BREAKPOINT_DOTS:767,EVENT_NAME:"productCatalogNavigate",EVENT_ALL_LOADED:"productCatalogAllLoaded",EVENT_PRODUCTS_LOADED:"productCatalogProductsLoaded",EVENT_PRODUCTS_FILTER:"productCatalogProductsFiltered",EVENT_TOGGLE_LOCK:"productCatalogLock",EVENT_PRODUCT_CHOOSE:"productCatalogProductChosen",EVENT_CATEGORY_CHOOSE:"productCatalogCategoryChosen",EVENT_TAB_CHOOSE:"productCatalogTabChosen",EVENT_VARIANT_CHANGED:"productCatalogVariantChanged",PRODUCT_CATALOG_INDEX_SLUG_CHANGES:{en_US:{old:"/custom",new:"/custom-products"},de_DE:{old:"/de/individualisierte",new:"/de/individualisierte-produkte"},ja_JP:{old:"/jp/custom",new:"/jp/custom-products"}},TYPE_PP:o,TYPE_MG:s,TYPE_OF:"order_flow",TYPE_PUSH:"product_push",TYPE_SYNC:"flow_sync",RECENT_MOCKUP_CACHE_KEY:"products-recent-mockups",BASE_TITLES:{},TITLES:(n={},a(n,o,dlang("site","Product catalog")),a(n,s,dlang("products","Mockup and print file generator")),a(n,"order_flow",dlang("products","Create an order | Printful")),n),PAGE_TITLES:(r={},a(r,o,dlang("products","We print on these products")),a(r,s,dlang("products","Design maker with a built-in mockup generator")),r),PAGE_SUBTITLES:a({},o,dlang("products","Here you'll find details about all the products we print on")),FILTER_TYPES:{},is:function(e){return c.catalogType===e},isProductsPricing:function(){return l.is(l.TYPE_PP)},isProductPush:function(){return l.is(l.TYPE_PUSH)},isOrderFlow:function(){return l.is(l.TYPE_OF)},isGenerator:function(){return l.is(l.TYPE_MG)},isInitialized:function(){var e;return(null===(e=c.catalogType)||void 0===e?void 0:e.length)>0||c.isCatalogLoadedIn},getRecentMockups:function(){if(!window.localStorage)return[];var e=JSON.parse(window.localStorage.getItem(l.RECENT_MOCKUP_CACHE_KEY+"-"+PF.LOCALE));return e&&e.length?e.slice(0,4):[]},addRecentMockup:function(e){if(window.localStorage){var t=l.getRecentMockups(),i=t.findIndex((function(t){return t.url===e.url}));i>-1&&t.splice(i,1),t.unshift(e),t.slice(0,24),window.localStorage.setItem(l.RECENT_MOCKUP_CACHE_KEY+"-"+PF.LOCALE,JSON.stringify(t))}},setCatalogType:function(e){c.catalogType=e},setPageSubtitle:function(e,t){l.PAGE_SUBTITLES[e]=t},setPageTitle:function(e,t){l.PAGE_TITLES[e]=t},setBaseTitle:function(e,t){l.BASE_TITLES[e]=t}},c={catalogType:"",urlPrefix:"",isCatalogLoadedIn:!1},u={createAndDispatchEvent:void 0};(globalThis||{}).PFProductsCatalogGlobalState=c,(globalThis||{}).PFProductsCatalogCommon=l,(globalThis||{}).PFProductsCatalogRuntimeHelpers=u},YNgQ:function(e,t,i){"use strict";i.d(t,"e",(function(){return _})),i.d(t,"b",(function(){return v})),i.d(t,"c",(function(){return y})),i.d(t,"m",(function(){return b})),i.d(t,"n",(function(){return P})),i.d(t,"f",(function(){return C})),i.d(t,"g",(function(){return T})),i.d(t,"l",(function(){return w})),i.d(t,"d",(function(){return I})),i.d(t,"o",(function(){return S})),i.d(t,"a",(function(){return E})),i.d(t,"i",(function(){return O})),i.d(t,"h",(function(){return k})),i.d(t,"k",(function(){return L})),i.d(t,"j",(function(){return A}));var n=i("KLvT"),r=i("ocsD"),a=i("HxWG"),o=i("e7dE"),s=i("Iy0a"),l=i("Fpf/"),c=i("n6mh"),u=i("LvDl"),d=i("mrkb"),h=i("+XVp"),p=i("dxVt"),f=i("v217");function g(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(e){return Object(n.a)().getters[r.i(r.h)](e)}function v(){return Object(n.a)().getters[r.i(r.d)]}function y(){return Object(n.a)().getters[r.i(r.c)]}function b(e){Object(n.a)().commit(r.i(r.C),e)}function P(e){Object(n.a)().commit(r.i(r.F),e)}function C(){return Object(p.b)()&&Object(n.a)().getters[r.i(r.h)](a.c.CUSTOM_MOCKUP_STEP)===a.e}function T(){return Object(n.a)().getters[r.i(r.h)](a.c.CUSTOM_MOCKUP_STEP)===a.f}function w(){Object(n.a)().commit(r.i(r.B),!0)}function I(){return Object(n.a)().getters[r.i(r.n)]||""}function S(){return Object(n.a)().getters[r.i(r.h)](a.c.HAS_PUSH_FLOW_SAVE)||null}function E(){var e=Object(n.a)().getters[o.b(o.c)],t=e.isTransparent?"png":"jpg",i=Object(n.a)().getters[r.i(r.r)];if(!i)return null;var a,c=Object(n.a)().getters[r.i(r.m)],u=[],d=g(Object(n.a)().getters[r.i(r.I)].filter((function(t){return!e.excludedPlacements.includes(t.placement)})));try{for(d.s();!(a=d.n()).done;){var h=a.value;u.push({object:s.a.BE_OBJECT,position:i.getMockupPositionObject(),type:l.a,generatorMockupVariantId:h.id,placementId:h.placement,url:c[h.id].downloadUrl})}}catch(e){d.e(e)}finally{d.f()}return{sceneData:k(i.designData),mockupOrderIndex:i.getMockupOrderIndex(),format:t,mockupData:u}}function O(e){return e.map((function(e){var t,i;return e.type!==c.a.TYPE_FILL||e.designFillType!==f.i&&e.designFillType!==f.h||null===(t=e.designFillItem)||void 0===t||null===(i=t.image)||void 0===i||!i.toArray||(e.designFillItem.image=e.designFillItem.image.toArray()),e}))}function k(e){var t=Object(u.cloneDeep)(e),i=t.find((function(e){return Object(d.d)(e)}));return i&&Object(d.i)(i),t}function L(){Object(n.d)(h.a)&&(Object(n.a)().commit(r.i(r.q)),Object(n.a)().commit(r.i(r.z),{key:a.c.HAS_SCENE_DESIGN,shouldUnset:!0}),Object(n.a)().commit(r.i(r.z),{key:a.c.PREVIOUS_PRODUCT_OPTIONS,shouldUnset:!0}))}function A(){Object(n.d)(h.a)&&(Object(n.a)().commit(r.i(r.p)),Object(n.a)().commit(r.i(r.o)))}},YbPo:function(e,t,i){"use strict";function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=l(e);if(t){var r=l(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return s(this,i)}}function s(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return u}));var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(FeatureFlagError,e);var t=o(FeatureFlagError);function FeatureFlagError(){return r(this,FeatureFlagError),t.apply(this,arguments)}return FeatureFlagError}(i("xVVd").a);c(u,"code","FEATURE_FLAG_ERROR"),c(u,"defaultMessage","Unexpected Feature Flag issue!")},Yh49:function(e,t,i){"use strict";i.d(t,"a",(function(){return U})),i.d(t,"b",(function(){return Y}));i("4Ru2");var n=i("V5mN"),r=i("SBaP"),a=i("nuUa"),o=i("LvDl"),s=i.n(o),l=i("cCrT"),c=i("9eNC"),u=i("4CFC");function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return p(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=b(e);if(t){var r=b(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return v(this,i)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function C(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,w(e,t,"get"))}function T(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,w(e,t,"set"),i),i}function w(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var I=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,k=new WeakMap,L=new WeakMap,A=new WeakMap,R=new WeakMap,N=new WeakMap,D=new WeakMap,x=new WeakMap,F=new WeakMap,M=new WeakSet,B=new WeakSet,V=new WeakSet,j=new WeakSet,U=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var t,i,n,r=_(a);function a(e){var t;return f(this,a),t=r.call(this),j.add(y(t)),V.add(y(t)),B.add(y(t)),M.add(y(t)),I.set(y(t),{writable:!0,value:null}),S.set(y(t),{writable:!0,value:null}),E.set(y(t),{writable:!0,value:null}),O.set(y(t),{writable:!0,value:[]}),k.set(y(t),{writable:!0,value:[]}),L.set(y(t),{writable:!0,value:[]}),A.set(y(t),{writable:!0,value:[]}),R.set(y(t),{writable:!0,value:null}),N.set(y(t),{writable:!0,value:null}),D.set(y(t),{writable:!0,value:!1}),x.set(y(t),{writable:!0,value:null}),F.set(y(t),{writable:!0,value:!0}),t.node=tag("div",null,[tag("div","pf-mb-8",[tag("h6",null,lang("Stocked in"))]),t.dropdownNode=tag("div","pf-mb-8"),t.availabilityNode=tag("div","regions-dropdown__sub--description text-muted")]),T(y(t),I,e),T(y(t),E,C(y(t),I).onChanged),T(y(t),R,C(y(t),I).regionData),T(y(t),O,C(y(t),R).availableRegions),T(y(t),L,("string"==typeof C(y(t),I).activeValue?[C(y(t),I).activeValue]:C(y(t),I).activeValue)||[]),T(y(t),x,new l.a),T(y(t),F,C(y(t),I).shouldShowAvailabilityInfo),P(y(t),M,z).call(y(t)),t}return t=a,(i=[{key:"getLastSelectedRegion",value:function(){return C(this,S)}},{key:"setRegion",value:function(e){var t=this;if(!C(this,D)){"string"==typeof e&&(e=[e]);var i=e.filter((function(e){return C(t,O).indexOf(e)>-1}));if(i.length){var n=i.map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}}));T(this,L,i),C(this,N).setActiveItems(n),P(this,V,H).call(this,n)}}}},{key:"getFirstActiveRegion",value:function(){return C(this,L).length?C(this,L)[0]:C(this,R).availableRegions[0]}},{key:"getSelectedRegionsCount",value:function(){return C(this,L).length}},{key:"isRegionInactive",value:function(e){return this.getInactiveItems().indexOf(e)>-1}},{key:"setActiveValue",value:function(e){this.setRegion(e)}},{key:"getActiveValue",value:function(){return C(this,L)}},{key:"isRegionSelected",value:function(e){return C(this,L).indexOf(e)>-1}},{key:"getActiveItems",value:function(){return C(this,O)}},{key:"getFirstActiveItem",value:function(){return this.getSelectedRegionsCount()?C(this,L)[0]:C(this,R).availableRegions[0]}},{key:"isVariantAvailableInRegion",value:function(e,t){return!(!e||!C(this,R).variantsByRegion[t])&&-1!==C(this,R).variantsByRegion[t].indexOf(e)}},{key:"isVariantAvailableInSelectedRegions",value:function(e){var t=C(this,L),i=!0;if(!e)return!1;if(C(this,R).allowedSellingRegions){for(var n in t){var r=t[n];if(C(this,R).variantsByRegion[r]&&C(this,R).variantsByRegion[r].includes(e))return!0}return!1}for(var a in t){var o=t[a];C(this,R).variantsByRegion[o]&&-1===C(this,R).variantsByRegion[o].indexOf(e)&&(i=!1)}return i}},{key:"getInactiveItems",value:function(){return C(this,k)}},{key:"hasSelectedValuesHaveInactiveRegions",value:function(){var e=this.getInactiveItems();return!!this.getActiveValue().filter((function(t){return e.indexOf(t)>-1})).length}},{key:"setInactiveItems",value:function(e){T(this,k,e)}}])&&g(t.prototype,i),n&&g(t,n),a}(r.a);function z(){var e=this;for(var t in C(this,R).variantsByRegion)0===C(this,R).variantsByRegion[t].length&&C(this,k).push(t);var i=C(this,R).allowedSellingRegions;i&&(i.length>0?T(this,k,C(this,k).concat(C(this,R).availableRegions.filter((function(e){return!i.includes(e)})))):T(this,k,C(this,R).availableRegions.slice())),C(this,k)&&T(this,O,C(this,R).availableRegions.filter((function(t){return-1===C(e,k).indexOf(t)}))),T(this,A,C(this,O).map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}})));var n=1;T(this,D,h(C(this,O)).every((function(t){return s.a.isEqual(C(e,R).variantsByRegion[t].sort(),C(e,R).variantsByRegion[C(e,O)[0]].sort())}))),C(this,D)&&(T(this,L,C(this,O)),C(this,I).shouldLimitPickableRegionCount&&(n=C(this,L).length));var r=C(this,L).map((function(e){return{name:Object(u.b)(e),value:e,id:btoa(e)}}));(T(this,N,new a.a(new a.b({activeItems:r,items:[{items:C(this,A)}],isMultiselectable:!0,minimumSelectedValues:n,showValuesInline:!0,onChange:P(this,V,H).bind(this)}))),C(this,N).append(this.dropdownNode),1===C(this,A).length)&&(tag("div","regions-dropdown__region-picker pf-px-12 pf-py-8 pf-mb-8 single",[C(this,A)[0].name]).append(this.dropdownNode),C(this,N).node.classList.add("hidden"));C(this,F)&&P(this,B,G).call(this)}function G(){var e,t=(new l.a).path.indexOf("custom/")>-1,i=PF.Customer.isLogged(),r=lang("Fulfillment location is set based on shipping destination, routing preferences and {linkStart}stock availability{linkEnd}.");(t||i)&&(e=r.replace("{linkStart}",'<a class="pf-link" href="#">').replace("{linkEnd}","</a>")),t||i||(e=r.replace("{linkStart}","").replace("{linkEnd}",""));var a=tag("div","",[lang("All products ship worldwide.")," ",tag("span",{innerHTML:e,onclick:function(e){var r=(new l.a).toString()+"#availability",a=[lang("Please sign in to check product availability.")],o=[[tag("span",{innerHTML:lang("<strong>Automatic</strong> order fulfillment")})],[tag("span",{innerHTML:lang("Download free print file <strong>templates</strong> and <strong>mockups</strong>")})],lang("No upfront or monthly fees")];if("A"===e.target.nodeName){if(i)c.o("showProductAvailability");else if(t){var s=n.a.Par;s.returnUrl=r,s.signUpContent=o,s.signInContent=a,new n.a(s)}e.preventDefault()}}})]);this.availabilityNode.appendChild(a)}function H(e){var t=e.map((function(e){return e.value}));P(this,j,q).call(this,t),T(this,S,t.pop()),C(this,E).call(this,t)}function q(e){T(this,L,h(new Set(e.filter(Boolean))))}var Y=function e(t){var i=t.regionData,n=void 0===i?null:i,r=t.onChanged,a=void 0===r?null:r,o=t.activeValue,s=void 0===o?null:o,l=t.shouldShowAvailabilityInfo,c=void 0===l||l,u=t.shouldLimitPickableRegionCount,d=void 0!==u&&u;f(this,e),this.regionData=n,this.onChanged=a,this.activeValue=s,this.shouldShowAvailabilityInfo=c,this.shouldLimitPickableRegionCount=d}},YvQZ:function(e,t,i){"use strict";i.d(t,"e",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return d}));var n=i("KLvT"),r=i("t8qe"),a=i("0nZy");function o(e){Object(n.a)().commit(r.e(r.j),e)}function s(e){return Object(n.a)().getters[r.e(r.d)](e)}function l(){Object(n.a)().commit(r.e(r.h),a.d)}function c(e){Object(n.a)().commit(r.e(r.k),e)}function u(){Object(n.a)().commit(r.e(r.g))}function d(){return Object(n.a)().getters[r.e(r.c)]}},Z4u1:function(e,t,i){"use strict";i.d(t,"d",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return l}));var n=i("Zwo4"),r="".concat(n.a,"/fonts"),a="m_setHasLoadedAllFonts",o="g_hasLoadedAllFonts",s="a_loadFonts",l=function(e){return"".concat(r,"/").concat(e)}},ZPm7:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("7pSD"),r=i("6t3j"),a=i("QLN8"),o=i("5B9T"),s=i("iQ/s"),l=i("JA1v"),c=i("cCrT"),u=i("nF4n");function d(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return h(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var p=Class({_PRODUCTS_WITHOUT_REGION_POPOVER:[],_variants:[],_variant:null,_availableColors:null,_discontinuedColors:[],_disabledRegionColors:[],_unavailableColors:[],_sellingRegionLimitedColors:[],_selectedColor:null,_isHats:!1,nodeError:null,__construct:function(e,t,i,n){this.setVariants(e),this._allColors=this._getUniquePushableColors(e),this._productId=i,n&&(this._marginClass=n);var o=this._getColorCount();if(0!==o){if(1===o)for(var s in e){this._variant=e[s],this._setSelectedColor(this._variant.color);break}var l=(new r.a).getCachedProductById(i);l.isInCategory(a.a.CATEGORY_HATS)&&(this._isHats=!0),this.node=Object(u.a)({tag:"div",className:this._marginClass||"margin-bottom-30",els:[{tag:"div",className:"margin-bottom-5",els:[{tag:"b",text:l.getColorPickerTitle(1)}]},this._nodePicker=Object(u.a)({tag:"div"}),this.nodeError=Object(u.a)({tag:"div",className:"alert alert-danger text-center hidden padding-10 margin-top-15",text:lang("Please choose a color!")})]}),this._onColorChangedCallback=t,this.render()}else this.node=Object(u.a)({tag:"div"})},_render:function(){var e;if(u.a.clearNode(this._nodePicker),this._isButtonPicker())for(var t in this._availableColors){e=this._availableColors[t];var i="btn btn-empty btn-sm pf-mb-4 pf-mr-4 color-picker__item";this._selectedColor===t&&(i+=" color-picker__item--active"),this._unavailableColors.indexOf(t)>-1&&(i+=" btn-default"),this._discontinuedColors.indexOf(t)>-1&&(i+=" color-picker__item--disabled"),Object(u.a)({tag:"a",className:i,text:t,onclick:this._onButtonSelectorPicked.bind(this,t)}).append(this._nodePicker)}else{var n=new s.a;n.maxCount=1,n.showHuge=!0,n.preSelectFirst=!0,n.canDeselectLast=!1,n.colors=this._availableColors,n.onChange=this._onColorPicked,this._variant&&(n.selectedColors=[this._variant.color]),this._picker=new l.a(n),this._picker.append(this._nodePicker);var r=this._picker.getSelectedColors();if(r){var a=this.getAvailableVariantByColor(r[0]);a&&this.setVariant(a)}var o=new c.a;if(o.query.color)for(e in this._availableColors)e===o.query.color&&this._setSelectedColor(o.query.color)}},render:function(){this._picker?(this._picker.render(),this.togglePopover()):this._render()},_getColorCount:function(){return Object.keys(this._availableColors).length},getValueCount:function(){return this._getColorCount()},_onColorPicked:function(e){this._selectedColor=this._picker?this._picker.getSelectedColors()[0]:null,e[0]===this._selectedColor&&this._onColorChangedCallback(this._selectedColor),this.togglePopover(e[0])},_onButtonSelectorPicked:function(e){this._selectedColor=e,this._onColorChangedCallback(this._selectedColor),this._render()},setVariants:function(e){this._variants=e,this._availableColors=o.a.fetchColorsFromVariants(this._variants)},getAvailableVariantByColor:function(e){for(var t in this._variants){var i=this._variants[t];if(i.color===e)return i}return null},getColor:function(){return this._selectedColor},setVariant:function(e){var t=this._getColorCount();if(this._variant=e,this._variant)this._setSelectedColor(this._variant.color);else if(1===t)for(var i in this._variants){this._variant=this._variants[i],this._setSelectedColor(this._variant.color);break}},setUnavailableColors:function(e){this._unavailableColors=e,this._isColorsAvailable()&&this._picker.setUnavailableColors(e)},setDiscontinuedColors:function(e){this._discontinuedColors=e,this._isColorsAvailable()&&this._picker.setDiscontinuedColors(e)},setDisabledRegionColors:function(e){this._disabledRegionColors=e,this._isColorsAvailable()&&this._picker.setDisabledRegionColors(e)},setSellingRegionLimitedColors:function(e){this._sellingRegionLimitedColors=e,this._isColorsAvailable()&&this._picker.setDisabledRegionColors(e)},setVariantsAndDisabledRegionColors:function(e,t,i){this.getAvailableColors()&&(this.setVariants(e),this.setSelectedRegionDisabledValues(e,t,"color",i),this.setDisabledRegionColors(this.getSelectedRegionDisabledValues("color")),this.render())},_isColorsAvailable:function(){return!(!this._getColorCount()||0===this._getColorCount())&&(!!this._picker||(this._render(),!1))},_isButtonPicker:function(){for(var e in this._variants){var t=this._variants[e];if(t.color&&!t.colorCode)return!0}return!1},isValuePicked:function(){return!!this.getColor()},hasAtLeastOneValue:function(){return!!this._getColorCount()},hasAvailableColorsInSellingRegion:function(){var e=this;return Object.keys(this._availableColors).filter((function(t){var i,n;return!(e.isColorDiscontinued(t)||e._sellingRegionLimitedColors.includes(t)||null!==(i=e._picker)&&void 0!==i&&i.getDisabledRegionColors().includes(t)||null!==(n=e._picker)&&void 0!==n&&n.getUnavailableColors().includes(t))})).length>0},togglePopover:function(e){if((e=e||this._selectedColor)&&this._picker){var t="",i="",r=this.getAvailableAttributeRegion(e,"color");this.isColorDiscontinued(e)?(t=p.POPOVER.DISCONTINUED.TITLE,i=p.POPOVER.DISCONTINUED.DESC,this._variants[0].size||(i=p.POPOVER.DISCONTINUED.DESC_COLOR_ONLY)):this._sellingRegionLimitedColors.includes(e)?t=this.hasAvailableColorsInSellingRegion()?n.a.POPOVER.DSR_LIMITED.DESC_COLOR.replace("{linkStart}","").replace("{linkEnd}",""):"":this._picker.getUnavailableColors().indexOf(e)>-1||!r&&this._picker.getDisabledRegionColors().indexOf(e)>-1?(t=n.a.POPOVER.UNAVAILABLE.TITLE,i=n.a.POPOVER.UNAVAILABLE.DESC,this._variants[0].size||(i=n.a.POPOVER.UNAVAILABLE.DESC_COLOR_ONLY)):this._picker.getDisabledRegionColors().indexOf(e)>-1&&!this._PRODUCTS_WITHOUT_REGION_POPOVER.includes(this._productId)&&(t=n.a.POPOVER.REGION.TITLE.replace("{region}",r),i=n.a.POPOVER.REGION.DESC),(t||i)&&this._picker.showPopover(e,t,i)}},isColorDiscontinued:function(e){return!!this._picker&&this._picker.getDiscontinuedColors().includes(e)},getAvailableColors:function(){var e=[];for(var t in this._availableColors)-1===e.indexOf(t)&&e.push(t);return e},getAllColors:function(){return d(this._allColors)},_setSelectedColor:function(e){this._selectedColor=e,this._picker&&this._picker.setSelectedColor(e)},_getUniquePushableColors:function(e){return e.reduce((function(e,t){var i=t.color,n=t.isDisabledInPush,r=t.hasStock;return!i||e.includes(i)||n&&!r||e.push(i),e}),[])}},n.a);p.POPOVER={DISCONTINUED:{TITLE:lang("Discontinued"),DESC:dlang("generator","Sorry, this size and color combination is discontinued. Please choose a different size and color combination."),DESC_SIZE_ONLY:dlang("generator","Sorry, this size is discontinued. Please choose a different size."),DESC_COLOR_ONLY:dlang("generator","Sorry, this color is discontinued. Please choose a different color.")}},(globalThis||{}).PFVariantPickerColorPicker=p},ZjJM:function(e,t,i){"use strict";function n(e,t){return!!Object.prototype.hasOwnProperty.call(e,t)}function r(e){return e?JSON.parse(JSON.stringify(e)):e}i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return o}));var a=1,o=function(){return a++}},ZtlV:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("u8P0"),r=i("6JZw"),a=i("nF4n"),o=Class({optionId:0,customProductId:0,name:"",optionValuesString:"",optionValues:[],toArrayKeys:["optionId","customProductId","name","optionValues"],buildOptionValuesFromString:function(){if(this.optionValues=[],this.optionValuesString.indexOf(",")){var e=this.optionValuesString.split(",");for(var t in e)this.optionValues.push(n.a.fromArray({optionId:this.optionId,option:{optionId:this.optionId,customProductId:this.customProductId,name:this.name},optionName:this.name,value:e[t]}))}}},r.a);o.fromArray=function(e){var t=new o;if(a.a.O2O(t,e),e.optionValues){var i=[];for(var r in t.optionValues=[],e.optionValues){var s=n.a.fromArray(e.optionValues[r]);i.push(s.value),s.option=this,t.optionValues.push(s)}t.optionValuesString=i.join(",")}return t},window&&((globalThis||{}).PFItemsCustomProductVariantOption=o)},a3yQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("nF4n"),r=Class({rowspans:{},__construct:function(e,t,i){for(var r in this.rowspans=t,this.activeColumns=i,this.node=Object(n.a)({tag:"tr"}),e){var a=e[r];null!==a.value&&this._isCellVisible(a.key)&&this._renderCell(a,parseInt(r)).append(this.node)}},_isCellVisible:function(e){return this.activeColumns.indexOf(e)>-1},_renderCell:function(e,t){var i=this.rowspans[t]?this.rowspans[t]:1,r=Object(n.a)({tag:"td",attr:{rowspan:i}});return"title"===e.type?(Object(n.a)({tag:"strong",innerHTML:e.value}).append(r),r):"link"===e.type?(Object(n.a)({tag:"a",className:"pf-link",text:lang("Download"),href:e.value}).append(r),r):(r.innerHTML=e.value,r)}},n.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsSizingTableRow=r);var a=i("X5Ic"),o=Class({dataRows:[],allowedColumns:["description","type","size","printArea","printFileSize","recommendedSize","downloadUrl"],activeColumns:[],columnTitles:{},columnTypes:{description:"title",type:"value",size:"value",printArea:"value",printFileSize:"value",recommendedSize:"value",downloadUrl:"link"},disclaimers:{},__construct:function(e,t){this.dataRows=e.sort(this._sortRows).map(this._filterData),this.columnTitles=this._getColumnTitles(t),this.node=tag("div",{className:this.dataRows.length<1?"hidden":"",id:"guidelines"},[tag("div","table-responsive",[tag("table","table table-bordered catalog__guidelines__table",[tag("thead","",[tag("tr","",this.allowedColumns.filter(this._filterColumn).map(this._getHeader))]),tag("tbody","",this.dataRows.map(this._getBodyRow))])])]),this._getDisclaimers()},_filterColumn:function(e){return this.activeColumns.indexOf("string"==typeof e?e:e.key)>-1},_sortRows:function(e,t){return e.isBrandingTemplate>t.isBrandingTemplate},_getColumnTitles:function(e){return{description:dlang("products","Placement"),type:dlang("products","Type"),size:dlang("products","Sizes"),printArea:this._getPrintAreaText(e),printFileSize:this._getPrintFileSizeText(e),recommendedSize:this._getRecommendedSizeText(e),downloadUrl:this._getDownloadUrlText(e)}},_getRecommendedSizeText:function(e){return this._isTechniqueEngraving(e)?dlang("products","Engraving file template"):this._isTypeEmbroidery(e)?dlang("products","Recommended embroidery file size"):dlang("products","Recommended print file size")},_getPrintAreaText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Max embroidery area"):dlang("products","Max print area")},_getPrintFileSizeText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Embroidery file size"):dlang("products","Print file size")},_getDownloadUrlText:function(e){return this._isTypeEmbroidery(e)?dlang("products","Embroidery file template"):dlang("products","Print file template")},_isTypeEmbroidery:function(e){return e===a.a.TYPE_EMBROIDERY},_isTechniqueEngraving:function(e){return e===a.a.TECHNIQUE_ENGRAVING},_getPrintOrEmbroidery:function(e,t){var i=e?dclang("products","Technique","embroidery"):dclang("products","Technique","print");return t?i.charAt(0).toUpperCase()+i.slice(1):i},_getHeader:function(e){var t=this.columnTitles[e];return this.disclaimers[e]&&(t+=Array(Object.keys(this.disclaimers).indexOf(e)+2).join("*")),tag("th","",[t])},_getBodyRow:function(e){return e.map(function(t,i){return new r(t,this._getRowSpanValues(t,e,i),this.activeColumns)}.bind(this))},_getDisclaimers:function(){var e=[];for(var t in this.disclaimers){var i=Array(Object.keys(this.disclaimers).indexOf(t)+2).join("*")+" "+this.disclaimers[t];e.push(tag("div","",[i]))}e.length&&tag("div",{className:"margin-bottom-25 padding-bottom-15 disclaimer-text",style:{fontStyle:"italic",borderBottom:"1px solid #ddd"}},e).append(this.node)},_getRowSpanValues:function(e,t,i){var n={},r={};for(var a in e)for(var o in t)parseInt(o)<=i||(t[o][a].value?r[a]=!0:r[a]||(n[a]||(n[a]=1),n[a]+=1));return n},_filterData:function(e){var t=[];for(var i in this.allowedColumns){var n=this.allowedColumns[i];e[n]&&this.activeColumns.indexOf(n)<0&&this.activeColumns.push(n);var r=e[n]?e[n]:"";t.push({key:n,type:this.columnTypes[n],value:this._hasNewline(r)?r.split("\n"):r}),e.disclaimers[n]&&!this.disclaimers[n]&&(this.disclaimers[n]=e.disclaimers[n])}return this._parseRows(t)},_parseRows:function(e){for(var t=this._getLongestArray(e),i=[],n=0;n<t;n++)i.push(e.map(this._normalize.bind(this,t,n)));return i},_normalize:function(e,t,i){var n="string"==typeof i.value?0===t?i.value:null:i.value[t]?i.value[t]:null;return{key:i.key,type:i.type,value:n}},_getLongestArray:function(e){var t=1;for(var i in e)e[i].value instanceof Array&&e[i].value.length>t&&(t=e[i].value.length);return t},_hasNewline:function(e){return e.indexOf("\n")>-1}},n.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsSizingTable=o)},aRUU:function(e,t,i){"use strict";i.d(t,"a",(function(){return V}));var n=i("SGrL"),r=i("bXkz"),a=i("2BaQ"),o=i("Gv5l"),s=i("oixo"),l=i("6t3j"),c=i("8vlB"),u=i("Q1Td"),d=Class({title:null,color:null,size:null,generatorVariant:null,designData:null,variants:[],selectedVariant:null,onVariantSelected:null});(globalThis||{}).PFMockupGeneratorOrderPreviewRowPar=d;var h=i("L8zU"),p=i("oAts"),f=i("nF4n"),g=Class({_sizePicker:null,__construct:function(e){this._par=e,this.node=tag("div","order-preview__row row"),this._initSizePicker(),this.render()},render:function(){f.a.clearNode(this.node),tag("div","col-xs-12 col-sm-4",[this._getImage(this._par.generatorVariant)]).append(this.node),tag("div","col-xs-12 col-sm-8",[tag("div","order-preview__title pf-mb-8",[tag("b","",this._par.title)]),tag("div","order-preview__additional-info",[this._getColorInfo(),this._getSizeInfo()])]).append(this.node)},_getImage:function(e){return this._par.designData.getMockupPreview(e,150,160)},_getColorInfo:function(){return this._par.color?tag("p",{innerHTML:p.a.getColorTitle(this._par.designData.product)+": {color}".replace("{color}",this._par.color)}):""},_initSizePicker:function(){this._sizePicker=Object(h.a)(this._par.variants,this._onSizeChanged.bind(this),""),this._par.selectedVariant&&this._sizePicker.setVariant(this._par.selectedVariant)},_getSizeInfo:function(){return this._par.size?tag("p",{innerHTML:lang("Size: {size}").replace("{size}",this._par.size)}):this._sizePicker},_onSizeChanged:function(e){this._sizePicker.updateErrorStatus();var t=this._getVariantBySize(e);console.log("Variant selected: ",t),console.log("Size selected: ",e),this._par.onVariantSelected&&this._par.onVariantSelected(t)},_getVariantBySize:function(e){return this._par.variants.filter((function(t){return t.size===e})).pop()},checkErrorState:function(){this._sizePicker.updateErrorStatus()}},f.a.Base);(globalThis||{}).PFMockupGeneratorOrderPreviewRow=g;var m=i("o0qH"),_=i("CvqS"),v=i("7QI8"),y=i("NXHT"),b=i("mw8R"),P=i("Vx67"),C=i("2+Fj"),T=i("X5Ic"),w=(i("cCrT"),i("XLZy")),I=i("Sucz"),S=i("QUqn"),E=i("2ovl"),O=i("mJTt"),k=i("9eNC"),L=i("8qnk");function A(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return R(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var N=Class({_selectedVariantIds:[],_par:null,footerNode:null,_state:0,_isInProcess:!1,_rows:[],_data:{},_optionsPicker:null,__construct:function(e){this._par=e,this._repo=new l.a,this._storeId=this._par.storeId||o.a.ANONYMOUS_STORE_ID,this._data.options=$.extend({},this._par.designData.productOptions),this.node=tag("div","order-preview"),this._par.contentScrollable&&(this.node.style.overflowX="hidden",this.node.style.overflowY="auto",this.node.style.maxHeight="500px"),this._selectedVariantIds=this._restoreSelectedVariantIdsFromStorage(),this._shouldShowOptions()&&this._initOptionsPicker(),this.render()},render:function(){f.a.clearNode(this.node);var e=this._getVariantsGrouped();e.forEach(function(e){var t=new d;t.title=this._par.designData.product.getFullTitle(),t.color=e.color,t.size=e.size,t.generatorVariant=e.generatorVariants.slice().shift(),t.variants=e.variants,t.designData=this._par.designData,t.selectedVariant=this._getSelectedVariant(e.variants.map((function(e){return e.variantId}))),t.onVariantSelected=this._onVariantSelected.bind(this,e.variants),1===t.variants.length&&(this._getSelectedVariant([t.variants[0].variantId])||this._selectedVariantIds.push(t.variants[0].variantId));var i=new g(t);i.append(this.node),this._rows.push(i)}.bind(this)),this._cleanUpSelectedVariantIds(e),console.log(this._selectedVariantIds),this._shouldShowOptions()&&tag("div","row",[tag("div","col-xs-12 col-sm-8 offset-sm-4",[this._getOptionsInfo()])]).append(this.node)},getFooterNode:function(){if(this.footerNode)return this.footerNode;var e=this._isProceedToPricingDisabled()?" disabled":"";return this.footerNode=tag("div","row",[tag("div","col-md-12",[this.ctaButtonNode=tag("a",{className:"pf-btn pf-btn-primary pull-left"+e,onclick:this._onProceedToPricing.bind(this),style:{pointerEvents:"auto"}},this._storeId===o.a.ANONYMOUS_STORE_ID?dlang("site","Add to cart"):dlang("generator","Proceed to pricing")),tag("a",{className:"pf-link pull-left margin-left-20 pf-py-0",style:{lineHeight:"39px"},onclick:this._onEditDesign},dlang("generator","Edit design"))]),this._footerErrorNode=tag("div","pf-text-red pf-bold text-center")])},_onEditDesign:function(){this._state+=1,this._saveSelectedVariantIdsToStorage(this._selectedVariantIds),this._par.onEditDesign&&this._par.onEditDesign()},_hasPartial3dPuffEmbroideryType:function(){if(!this._par.designData||!this._par.designData.templates)return!1;var e=this._par.generatorParams.availablePlacements.map((function(e){return e.id}));for(var t in e){if(S.a.getEmbrTypeForPlacement(this._par.designData.templates,e[t])===v.a.DIGITIZATION_BOTH)return!0}return!1},_isEmbroideryNotesEmpty:function(){return!this._data.options[C.a.NAME_NOTES]},_shouldShowEmbrNotesMissingError:function _shouldShowEmbrNotesMissingError(){return this._hasPartial3dPuffEmbroideryType()&&this._isEmbroideryNotesEmpty()},_isProceedToPricingDisabled:function(){return this._getVariantsGrouped().length!==this._selectedVariantIds.length||this._shouldShowOptions()&&!this._optionsPicker.isValuePicked()||this._shouldShowEmbrNotesMissingError()},_onProceedToPricing:function(){var e=this;if(this._isProceedToPricingDisabled())this._renderRowErrors();else if(this._isInProcess)console.error("One request is already in process");else{this._storeId===o.a.ANONYMOUS_STORE_ID?(ga("send","event","MockupGenerator","Clicked Add to cart","Confirm variations view"),ga("send","event","Button Clicks","Add to Cart Button","Mockup generator confirm variations view")):ga("send","event","MockupGenerator","Clicked proceed to pricing",this._par.viewName),this._clearSelectedVariantIdsFromStorage(),E.a.isDesignCachedInSession()?(E.a.unsetDesignCachedInSession(),(new u.a).transferAnonymousFilesToStore(this._storeId,(function(){return w.a.show(e.node)}))):w.a.show(this.node),this._isInProcess=!0,this.node.style.overflowY="hidden",f.a.addClassName(this.ctaButtonNode,"disabled");var t=this._buildDesignDataForOrderPreview(),i=t.isEmbroidery()?[v.a.TYPE_MOCKUP]:[v.a.TYPE_MOCKUP].concat(A(this._getPlacementIdsToSave()));(new u.a).generateLibraryFiles(t,i,!1,this._par.isVariantSyncFlow,!1,{onProgress:this._onMockupGenerationInProgress,onCompleted:this._onMockupGenerationCompleted.bind(this,this._state),onFailed:this._onMockupGenerationFailed,onStarted:this._onMockupGenerationStarted})}},_renderRowErrors:function(){this._rows.forEach((function(e){e.checkErrorState()})),this._shouldShowOptions()&&this._optionsPicker.updateErrorStatus(),this._setFooterErroMsgIfNeeded()},_cleanUpSelectedVariantIds:function(e){for(var t=e.reduce((function(e,t){var i=t.variants.map((function(e){return e.variantId}));return e.concat(i)}),[]),i=this._selectedVariantIds.length-1;i>=0;i--)-1===t.indexOf(this._selectedVariantIds[i])&&this._selectedVariantIds.splice(i,1)},_getTemplateKeysToSave:function(){var e=[];for(var t in this._par.designData.templates)e.push(t);return e},_getPlacementIdsToSave:function(){return this._par.designData.getPlacementIdsWithDesign()},_onMockupGenerationInProgress:function(e){this.ctaButtonNode&&(this.ctaButtonNode.textContent=dlang("generator","In progress - {status}").replace("{status}",e))},_onMockupGenerationCompleted:function(e,t){var i=this;this._stateCheck(e)&&(this.ctaButtonNode&&(this.ctaButtonNode.textContent=lang("Completed")),console.log(t),this._storeId===o.a.ANONYMOUS_STORE_ID?this._getItems(t).forEach((function(e,t){return setTimeout((function(){return i._addToShoppingCart(e)}),750*t)})):this._newOrder(t))},_onMockupGenerationFailed:function(){this.ctaButtonNode&&(this.ctaButtonNode.textContent=dlang("generator","Generating failed. Please try again."),f.a.removeClassName(this.ctaButtonNode,"disabled")),this._isInProcess=!1},_onMockupGenerationStarted:function(e,t,i){this.ctaButtonNode.textContent=lang("Processing files..."),i&&(this._par.generatorDesignId=i)},_getLocalStorage:function(){try{return window.localStorage}catch(e){return null}},_restoreSelectedVariantIdsFromStorage:function(){var e,t=this._getLocalStorage();if(null===t)return[];try{e=t.getItem(N.STORAGE_KEY)}catch(e){console.error("Order preview - could not get selected variant ids")}if(!e)return[];var i=JSON.parse(e);return Array.isArray(i)?i:[]},_saveSelectedVariantIdsToStorage:function(e){var t=this._getLocalStorage();if(null===t)return!1;try{t.setItem(N.STORAGE_KEY,JSON.stringify(e))}catch(e){console.error("Order preview - Could not save selected variant ids")}return!0},_clearSelectedVariantIdsFromStorage:function(){this._saveSelectedVariantIdsToStorage([])},_getSelectedVariant:function(e){for(var t in e)if(-1!==this._selectedVariantIds.indexOf(e[t]))return this._repo.getCachedVariantById(e[t]);return null},_onVariantSelected:function(e,t){e&&e.forEach(function(e){-1!==this._selectedVariantIds.indexOf(e.variantId)&&this._selectedVariantIds.splice(this._selectedVariantIds.indexOf(e.variantId),1)}.bind(this)),t&&!this._getSelectedVariant([t.variantId])&&this._selectedVariantIds.push(t.variantId),this.ctaButtonNode&&!this._isProceedToPricingDisabled()&&f.a.removeClassName(this.ctaButtonNode,"disabled"),console.log(this._selectedVariantIds)},_getVariantsGrouped:function(){var e=this._par.generatorParams.colors.length>0,t=-1!==[T.a.TYPE_T_SHIRT,T.a.TYPE_CUT_SEW,T.a.TYPE_SHOES,T.a.TYPE_JEWELRY,T.a.TYPE_SUBLIMATION].indexOf(this._par.designData.product.type),i=[T.a.TYPE_MUG],n=[T.a.ID_COLOR_MUG],r=-1!==i.indexOf(this._par.designData.product.type)&&-1===n.indexOf(this._par.designData.product.productId),a=(e||t)&&!r&&!this._par.designData.product.isPillow()&&!this._par.designData.product.isLaptopSleeve();return this._getGroupedVariantsBy(a?"color":"size")},_getGroupedVariantsBy:function(e){var t=[null];return this._par.designData[e+"s"]&&this._par.designData[e+"s"].length&&(t=this._par.designData[e+"s"]),t.map(function(t){var i=this._getMappedVariantsByType(e,t);return{color:"color"===e?t:null,size:"size"===e?t:null,mappedVariants:i,variants:i.filter(function(e){return-1!==this._par.designData.sizes.indexOf(e.size)||null===e.size}.bind(this)).map(function(e){return this._repo.getCachedVariantById(e.variantId)}.bind(this)),generatorVariants:this._getGeneratorVariantsFromMapping(i)}}.bind(this))},_getMappedVariantsByType:function(e,t){return this._par.generatorParams.variantMapping.filter((function(i){return i[e]===t}))},_getGeneratorVariantsFromMapping:function(e){return e.reduce(function(e,t){var i;for(i in t.mockupIds)e=e.concat(this._par.designData.generatorVariants.filter((function(e){return t.mockupIds[i]===e.generatorVariantId})));for(i in t.templateIds)e=e.concat(this._par.designData.generatorVariants.filter((function(e){return t.templateIds[i]===e.generatorVariantId})));return e}.bind(this),[])},_buildDesignDataForOrderPreview:function(){var e=this._par.designData.cloneDesignData();e.templateKeysToSave=this._getTemplateKeysToSave();var t=[];for(var i in this._selectedVariantIds){var n=this._filterVariantMappingByVariantId(this._selectedVariantIds[i]),r=this._getDefaultGeneratorVariantId(n);null!==r&&t.push(r)}return e.generatorVariantsIdsToSave=t.filter((function(e,t,i){return i.indexOf(e)===t})),e.multipleMockups=!0,e.storeId=this._storeId,e.productOptions=this._data.options,e},_includesMockupGeneratorVariantIds:function(){return this._par.designData.generatorVariants.reduce((function(e,t){return-1===[P.a.ROLE_TEMPLATE,P.a.ROLE_ADVANCED_TEMPLATE].indexOf(t.role)||e}),!1)},_newOrder:function(e){Object(I.a)("order/new-order",{storeId:this._storeId,isSampleOrder:this._par.orderType===r.a.ORDER_TYPE_SAMPLE?1:0},this._newOrderRe.bind(this,this._state,e))},_newOrderRe:function(e,t,i){if(this._stateCheck(e)){var n=this._getItems(t),r=new c.PFRepositoriesOrderRepository;if(i.success){var a={orderItem:b.a.fromArray({storeId:this._storeId}),items:n,itemsToRemove:[],callback:this._calculateEstimatedShippingCostsIfNecessary.bind(this,this._state)};r.saveDraft(a)}else alert("Could not create new order")}},_calculateEstimatedShippingCostsIfNecessary:function(e,t){PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()?this._saveDraftRe(e,t):(new c.PFRepositoriesOrderRepository).calculateEstimatedShippingCostsForShoppingCart({callback:this._saveDraftRe.bind(this,e,t)})},_saveDraftRe:function(e,t){if(this._stateCheck(e)){w.a.hide(this.node),this._isInProcess=!1,this.node.style.overflowY="auto",this.ctaButtonNode&&f.a.removeClassName(this.ctaButtonNode,"disabled"),console.log("Order 'created'"),console.log(t);var i=langUrl("/dashboard/order/update");ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Continue Button",eventLabel:"Continue to checkout (step 1) button clicked"}),console.log("Order saved. Redirecting..."),console.log(i),O.a.isDisabled=!0;try{location.assign(i)}catch(e){location.href=i}}},_addToShoppingCart:function(e){var t=this;k.o(L.a.EVENT_ITEM_ADD,e,(function(){return t._par.parentModal.modalNode.hide()}))},_getItems:function(e){var t=[];return this._selectedVariantIds.forEach(function(i){var n=new y.PFItemsOrderLineItem;n.options=this._data.options,n.variantId=i,n.quantity=1,n.itemFiles=this._filterFilesForOrderLineItem(i,e),n.designId=this._par.generatorDesignId?this._par.generatorDesignId:null;var r=this._repo.getCachedVariantById(i);r&&(n.technique=new m.a(r.productId).getTechniqueFromMemory()),t.push(n)}.bind(this)),t},_filterFilesForOrderLineItem:function(e,t){var i=this._filterVariantMappingByVariantId(e);console.log(i);var n=this._getPossibleGeneratorVariantIds(i);console.log(n);var r=this._getGeneratorVariantsByIds(n),a=r.map((function(e){return e.generatorVariantId})),o=r.map((function(e){return e.templateId})),s=this._getRelatedTemplateIds(o);console.log(r);var l=[],c=[];for(var u in t){t[u].filter(this._filterVariantPlacementFilesFunction.bind(this,a,o,s)).forEach(function(e,t){-1!==c.indexOf(e)&&e===v.a.TYPE_MOCKUP||(e===v.a.TYPE_MOCKUP&&c.push(e),l.push(this._fileToItemFile(t)))}.bind(this,u))}for(var d in this._par.designData.templates){var h=this._par.designData.templates[d];if(0!==h.layers.length&&(this._isTemplateSimpleDesign(h)&&(-1!==s.indexOf(h.templateId)||-1!==o.indexOf(h.templateId))&&-1===c.indexOf(h.placementId))){var p=h.layers.slice(0,1).pop(),f=new v.a;f.type=h.placementId,f.fileId=p.isLicensedAssetLayer()?p.licensedAssetItem.licensedAssetId:p.fileItem.fileId,f.position=p.position,l.push(f),c.push(h.placementId)}}return l},_fileToItemFile:function(e){var t=new v.a;return t.type=e.placementId,t.status=e.status,t.fileId=e.fileId,t.group=e.group,t.fileErrors=[],t},_filterVariantMappingByVariantId:function(e){return this._par.generatorParams.variantMapping.filter((function(t){return t.variantId===e}))},_getPossibleGeneratorVariantIds:function(e){return e.reduce((function(e,t){var i;for(i in t.templateIds)e.push(t.templateIds[i]);for(i in t.mockupIds)e.push(t.mockupIds[i]);for(i in t.extraIds)e=e.concat(t.extraIds[i]);return e}),[])},_getDefaultGeneratorVariantId:function(e){var t=this._getPlacementIdsToSave();for(var i in e){var n=e[i];for(var r in t){var a=t[r];if(n.mockupIds[a])return n.mockupIds[a];if(n.extraIds[a])return n.extraIds[a][0]}}return null},_getGeneratorVariantsByIds:function(e){var t=Object.keys(this._par.generatorParams.generatorVariants).filter(function(t){return!e||-1!==e.indexOf(this._par.generatorParams.generatorVariants[t].generatorVariantId)}.bind(this)).map(function(e){return this._par.generatorParams.generatorVariants[e]}.bind(this));if(this._includesMockupGeneratorVariantIds())return t;var i=[];for(var n in this._par.generatorParams.generatorVariants){var r=this._par.generatorParams.generatorVariants[n];e&&-1===e.indexOf(r.generatorVariantId)||-1===this._par.designData.generatorVariantsIdsToSave.indexOf(r.generatorVariantId)||i.push(r)}return t.concat(i)},_getRelatedTemplateIds:function(e){var t,i,n=[];for(i in this._par.designData.templates)(t=this._par.designData.templates[i]).parentTemplateId&&-1!==e.indexOf(t.templateId)&&n.push(t.parentTemplateId);var r=[];for(i in this._par.designData.templates)t=this._par.designData.templates[i],-1===n.indexOf(t.parentTemplateId)&&-1===n.indexOf(t.templateId)||r.push(t.templateId);return r},_filterVariantPlacementFilesFunction:function(e,t,i,n){var r=null===n.generatorVariantId||-1!==e.indexOf(n.generatorVariantId),a=-1!==t.concat(i).indexOf(n.templateId);return r&&a},raiseState:function(){this._state+=1,console.log(this._state)},_stateCheck:function(e){return e!==this._state&&console.log("States didn't match, skipping...",this._state,e),e===this._state},_shouldShowOptions:function(){return-1!==[T.a.TYPE_CUT_SEW,T.a.TYPE_SUBLIMATION,T.a.TYPE_EMBROIDERY].indexOf(this._par.designData.product.type)},_initOptionsPicker:function(){var e=new _.a;e.values=this._data.options,e.onChange=this._onOptionPickedCallback,e.inputNamePrefix="op_",e.optionItems=this._par.designData.product.getOptionItems(this._par.designData.product.getOptionExceptions().concat([C.a.NAME_THREAD_COLORS,C.a.NAME_THREAD_COLORS_3D,C.a.NAME_THREAD_COLORS_LEFT,C.a.NAME_THREAD_COLORS_RIGHT,C.a.NAME_THREAD_COLORS_BACK,C.a.NAME_THREAD_COLORS_APPAREL,C.a.NAME_THREAD_COLORS_APPAREL_BACK,C.a.NAME_THREAD_COLORS_CHEST_CENTER,C.a.NAME_THREAD_COLORS_LARGE_CENTER,C.a.NAME_THREAD_COLORS_CHEST_LEFT,C.a.NAME_THREAD_COLORS_CORNER_LEFT,C.a.NAME_THREAD_COLORS_CORNER_RIGHT,C.a.NAME_THREAD_COLORS_INSIDE_LEFT,C.a.NAME_THREAD_COLORS_INSIDE_RIGHT,C.a.NAME_THREAD_COLORS_OUTSIDE_LEFT,C.a.NAME_THREAD_COLORS_OUTSIDE_RIGHT])).map((function(e){return e.isEmbroideryType()&&(e.visible=!1),e})),this._optionsPicker=new s.a(e),this._optionsPicker.setFileTypesWithFiles(this._getPlacementsWithFiles())},_getPlacementsWithFiles:function(){var e=[];for(var t in this._par.designData.filesIdsByPlacement)e.push(t);return e},_onOptionPickedCallback:function(e){this._data.options[e.getName()]=e.getValue(),this._optionsPicker.hideError(),this.ctaButtonNode&&(this._isProceedToPricingDisabled()?f.a.addClassName(this.ctaButtonNode,"disabled"):f.a.removeClassName(this.ctaButtonNode,"disabled"),this._setFooterErroMsgIfNeeded()),this._par.onProductOptionsChanged&&this._par.onProductOptionsChanged(this._data.options)},_setFooterErroMsgIfNeeded:function(){this._footerErrorNode.innerHTML=this._shouldShowEmbrNotesMissingError()?dlang("dashboard","To continue, please specify which parts of your design are Flat and which 3D in the Embroidery notes"):""},_getOptionsInfo:function(){return!!this._optionsPicker&&this._optionsPicker},_isTemplateSimpleDesign:function(e){return!this._par.designData.hasPlacementDesignFillSet(e.placementId)&&e.isSimple()}},f.a.Base);N.STORAGE_KEY="mockupGeneratorSelectedVariants",(globalThis||{}).PFMockupGeneratorOrderPreview=N;var D=i("pnlN"),x=i("nBn9"),F=Class({__construct:function(e,t){var i=new Url;i.query.transferFiles=1;var n=i.path+(i.query.toString()?"?"+i.query.toString():""),r="/auth/?returnUrl="+encodeURIComponent(n),a=new x.a({title:"How would you like to continue",bodyContent:Object(f.a)({tag:"div",className:"sign-up-popup-container",els:[{tag:"div",className:"row",els:[{tag:"div",className:"col-sm-6",els:[{tag:"div",className:"sign-up-popup-container__box sign-up-popup-container__box--thick",onclick:function(){t&&t(),window.location=r},els:[{tag:"div",className:"sign-up-popup-container__header",els:[{tag:"strong",text:"Already Printful user?"}]},{tag:"div",className:"sign-up-popup-container__content",els:[{tag:"div",className:"col-sm-10 col-xs-12 text-center",els:["Sign in to your existing Printful account"]}]},{tag:"a",className:"pf-btn pf-btn-primary sign-up-popup-container__btn",text:"Sign in",href:r,onclick:function(e){e.stopPropagation(),t&&t()}}]}]},{tag:"div",className:"col-sm-6",els:[{tag:"div",className:"sign-up-popup-container__box",onclick:function(e){this._onProceedClicked()}.bind(this),els:[{tag:"div",className:"sign-up-popup-container__header",text:"Don't have an account?"},{tag:"div",className:"text-center sign-up-popup-container__content",els:[{tag:"div",className:"col-xs-12 text-center",els:["Continue without signing in"]}]},{tag:"a",className:"pf-btn pf-btn-secondary sign-up-popup-container__btn",text:"Continue",onclick:function(e){e.stopPropagation(),this._onProceedClicked()}.bind(this)}]}]}]}]}),showFooterContent:!1});this._modal=a.getModalInstance(),this._onProceedCallback=e},_onProceedClicked:function(){this._modal&&this._modal.remove(),this._onProceedCallback&&this._onProceedCallback()}});window&&((globalThis||{}).PFComponentsGeneratorLoginPopup=F);var M=i("/w+P"),B=i("97Au"),V=Class({__construct:function(e){this._par=e||new D.a,beginOrderTracking("generator",this._par.designData.hasTextLayers()?" with text":""),this._shouldShowPopup(),this._proceedWithOrderPreview()},_shouldShowPopup:function(){return!PF.Customer.isLogged()},_showLoginPopup:function(){new F(this._proceedWithOrderPreview,this._onSignInCallback)},_proceedWithOrderPreview:function(){this._pickStore()},_pickStore:function(){if(PF.Customer.isLogged()){var e=new M.b;e.callback=this._pickOrderType,M.a.popup(e,dlang("generator","Choose store to save toâ¦"))}else this._pickOrderType(o.a.ANONYMOUS_STORE_ID)},_pickOrderType:function(e){console.log("Store ID: ",e);var t=a.a;if(e!==o.a.ANONYMOUS_STORE_ID&&!t.containsDisallowedVariants(this._par.designData,this._par.generatorParams)&&t.canBeSampleOrder(this._par.designData)){var i=new B.a,s=new n.a({types:[r.a.ORDER_TYPE_SAMPLE,r.a.ORDER_TYPE_BASIC],isSimpleBasicPanel:!0,callback:function(t,i){t.remove(),this._showOrderPreview(e,i)}.bind(this,i)});i.setTitle(lang("Start new order")),i.setContent(s),i.show()}else this._showOrderPreview(e,r.a.ORDER_TYPE_BASIC)},_showOrderPreview:function(e,t){PF.Customer.isLogged()?ga("send","event","MockupGenerator","Clicked order","Product view"):ga("send","event","MockupGenerator","Clicked Add to cart","Product view");var i={modalNode:null},n=new N({designData:this._par.designData,generatorParams:this._par.generatorParams,onEditDesign:this._editDesign.bind(this,i),storeId:e,contentScrollable:!0,viewName:"Product view",onProductOptionsChanged:this._par.onChildComponentProductOptionsChanged,orderType:t,parentModal:i});i.modalNode=new B.a({closeOnClick:!1,onClose:n.raiseState.bind(n)}),i.modalNode.setFooterContent(n.getFooterNode()),i.modalNode.setTitle(dlang("generator","Confirm variations")),i.modalNode.setContent(n.node),i.modalNode.show()},_editDesign:function(e){e.modalNode&&e.modalNode.remove(),this._par.editDesignCallback&&this._par.editDesignCallback()},_onSignInCallback:function(){new E.a(this._par.designData.productId).rememberTemplates(this._par.designData)}});(globalThis||{}).PFMockupGeneratorBundleOrderPreview=V},aUd0:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=Class({temporaryFileId:"",fileType:"",isPrintfile:!1,downloadUrl:"",generatorVariantId:0,placementId:"",filename:"",templateId:0,generatedSuffix:"",toArrayKeys:["temporaryFileId","fileType","isPrintfile","filename"]},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorDownloadItem=a)},atGO:function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return s}));var o=new WeakMap,s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),a(this,"sourceFile",void 0),o.set(this,{writable:!0,value:{canDelete:!1,canMove:!1,canRename:!1}}),this.sourceFile=t.sourceFile}var t,i,s;return t=e,(i=[{key:"id",get:function(){return this.sourceFile.fileId}},{key:"getCapabilities",value:function(){return[]}},{key:"getInteractionMenuRefName",value:function(){return"file-library__file-menu-".concat(this.id)}},{key:"isCopyrighted",value:function(){return this.sourceFile.isCopyrighted}},{key:"isSelectable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this.sourceFile.isSelectable(e)}}])&&r(t.prototype,i),s&&r(t,s),e}()},bGr9:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("cCrT"),r=Class({_availability:{},_variants:[],__construct:function(e){this._variants=e,this._availability=this._getSortedByAvailability()},_getMatchingColors:function(e,t){var i=[];for(var n in e){var r=e[n];(r.size||"")===t&&i.push(r.color)}return i},_getMatchingSizes:function(e,t){var i=[];for(var n in e){var r=e[n];(r.color||"")===t&&i.push(r.size)}return i},getUnAvailableColors:function(e){var t=this._availability.outOfStock;return this._getMatchingColors(t,e)},getDiscontinuedColors:function(e){var t=this._availability.discontinued;return this._getMatchingColors(t,e)},getDiscontinuedSizes:function(e){var t=this._availability.discontinued;return this._getMatchingSizes(t,e)},getUnavailableSizes:function(e,t){var i=this._availability.outOfStock,n=[];for(var r in i){var a=i[r];(a.color||"")===e&&n.push(a.size)}return n},getNonExistentColors:function(e,t){if(!e)return[];for(var i in this._variants){var n=this._variants[i],r=t.indexOf(n.color);n.size===e&&-1!==r&&t.splice(r,1)}return t},getNonExistentSizes:function(e,t){if(!e)return[];for(var i in this._variants){var n=this._variants[i],r=t.indexOf(n.size);(n.color||"")===e&&-1!==r&&t.splice(r,1)}return t},_getSortedByAvailability:function(){var e={available:[],outOfStock:[],discontinued:[]},t=(new n.a).path.indexOf("/dashboard/sync")>-1;for(var i in this._variants){var r=this._variants[i];r.isTemporaryOutOfStock?e.outOfStock.push(r):r.hasStock&&!t?e.available.push(r):r.hasStock&&!t||!r.isDisabledInPush?r.hasStock||e.outOfStock.push(r):e.discontinued.push(r)}return e},isVariantDiscontinued:function(e){for(var t in this._availability.discontinued){var i=this._availability.discontinued[t];if(e.variantId===i.variantId)return!0}return!1},areAllVariantsDiscontinued:function(){return this._availability.discontinued.length===this._variants.length}});(globalThis||{}).PFVariantPickerVariantAvailability=r},bRD6:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("edgZ"),r=i("7h5t"),a=i("+erO"),o=Class({originalPosition:null,shouldUseOriginalAreaSize:!1});o.fromArray=function(e){var t=new o;return t.originalPosition=a.a.fromArray(e.originalPosition),t.shouldUseOriginalAreaSize=e.shouldUseOriginalAreaSize,t},window&&((globalThis||{}).PFComponentsGeneratorMockupGeneratorOptions=o);var s=i("gqyd"),l=i("pWIn"),c=i("+I3z"),u=i("y70k"),d=i("6JZw"),h=i("qqZP"),p=i("0Dko"),f=i("n6mh"),g=i("wo5H"),m=i("1tjy"),_=i("boP+"),v=i("gQ2J"),y=i("vUaG"),b=i("cd9T"),P=i("Fpf/"),C=i("Iy0a");function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return I(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var S=function(){this.layers=[]};S.prototype=new d.a,S.prototype.toArrayKeys=["templateId","placementId","layers","technique","placementName"],S.prototype.templateId=null,S.prototype.placementId=null,S.prototype.parentTemplateId=null,S.prototype.layers=null,S.prototype.width=0,S.prototype.height=0,S.prototype.fillMode="",S.prototype.technique="",S.prototype.placementName="",S.prototype.centerDefaultYPosition=!0,S.prototype.getKey=function(){return this.placementId+"_"+this.templateId},S.prototype.getLowestDPI=function(e){var t=0;for(var i in this.layers){var n=this.layers[i].getDPI(!0,e);(0===t||n<t)&&(t=n)}return t},S.prototype.hasCustomizableLayersWithMultiLineText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.hasMultipleLines}))},S.prototype.hasCustomizableLayersWithArcText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.arcAngle}))},S.prototype.hasCustomizableLayersWithColorGraphicText=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.colorGraphic}))},S.prototype.hasCustomizableLayersWithCropImage=function(){var e;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return e.isCustomizable&&e.cropPosition}))},S.prototype.hasLayers=function(e){return e?this.layers.filter((function(t){return t instanceof e})).length>0:this.layers.length>0},S.prototype.hasLayer=function(e){var t;return null===(t=this.layers)||void 0===t?void 0:t.some((function(t){return t.uniqueId===e}))},S.prototype.getLayerByCustomizeKey=function(e){for(var t in this.layers)if(this.layers[t].customizeKey===e)return this.layers[t];return!1},S.prototype.getMirroredLayers=function(){return this.layers.filter((function(e){return e.parentLayerUniqueId}))},S.prototype.hasUnmirroredLayers=function(){var e,t=this;return null===(e=this.layers)||void 0===e?void 0:e.some((function(e){return!t.getMirroredLayer(e)}))},S.prototype.getMirroredLayer=function(e){var t,i=w(this.layers);try{for(i.s();!(t=i.n()).done;){var n=t.value;if(e){if(e.uniqueId==n.parentLayerUniqueId||e.parentLayerUniqueId==n.uniqueId)return n}else if(n.parentLayerUniqueId)return n}}catch(e){i.e(e)}finally{i.f()}return null},S.prototype.getLayerIndex=function(e){for(var t=0,i=this.layers.length;t<i;t++)if(this.layers[t].uniqueId===e.uniqueId)return t;return-1},S.prototype.getCloneWithLayers=function(e){var t=new S;return t.templateId=this.templateId,t.placementId=this.placementId,t.parentTemplateId=this.parentTemplateId,t.width=this.width,t.height=this.height,t.fillMode=this.fillMode,t.technique=this.technique,t.placementName=this.placementName,t.centerDefaultYPosition=this.centerDefaultYPosition,t.layers=this.layers.filter((function(t){return t.isValidForTechnique(e)})).map((function(e){return e.getOriginalClone(!0)})),t},S.prototype.isRelated=function(e){var t=this.placementId===e.placementId,i=this.templateId===e.templateId,n=this.parentTemplateId===e.templateId,r=e.parentTemplateId&&e.parentTemplateId===this.templateId,a=e.parentTemplateId&&e.parentTemplateId===this.parentTemplateId&&e.templateId!==this.templateId;return t&&(r||n||a||i)},S.prototype.isSimple=function(){return!this.layers.length||1===this.layers.length&&this.layers[0].isSimple()},S.prototype.isCover=function(){return"cover"===this.fillMode},S.prototype.layersToArray=function(e,t){return this.layers.map((function(i){return i.toArray(e,t)}))},S.prototype.areLayersOverlapping=function(e){var t=this,i=e.layerTypeInstances,n=e.allowedExceptions,r=function(e){var r=t.layers[e],a=r.position;if(i&&!i.filter((function(e){return r instanceof e})).length)return"continue";var o=function(e){var o=t.layers[e],s=o.position;return i&&!i.filter((function(e){return o instanceof e})).length||o.uniqueId===r.uniqueId||null!=n&&n.some((function(e){return e.layerPropertyValues.includes(r[e.layerProperty])&&e.layerPropertyValues.includes(o[e.layerProperty])}))?"continue":a.hasIntersectionWith(s)?{v:{v:!0}}:void 0};for(var s in t.layers){var l=o(s);if("continue"!==l&&"object"===T(l))return l.v}};for(var a in this.layers){var o=r(a);if("continue"!==o&&"object"===T(o))return o.v}return!1},S.prototype.exceededTextLayerCharacterLimit=function(){var e,t,i,n=this.layers.find((function(e){return e.isTextLayer()&&!e.isValid()}));return n?(null==n||null===(e=n.font)||void 0===e||null===(t=e.options)||void 0===t||null===(i=t[this.technique])||void 0===i?void 0:i.maxCharacters)||g.s:null},S.prototype.getDefaultPositions=function(){return a.a.fromArray({areaWidth:this.width,areaHeight:this.height,width:this.width,height:this.height,top:0,left:0})},S.prototype.getFileId=function(){return 1!==this.layers.length||this.hasTextLayersOnly()?u.a.ID_TEMP_GENERATOR_FILE:this.layers.filter((function(e){return e instanceof c.a})).map((function(e){return e.fileItem.fileId})).shift()},S.MUG_V1_11_OZ_TEMPLATE_ID=43,S.MUG_V1_15_OZ_TEMPLATE_ID=44,S.MUG_V1_SIDE_CENTER_DIST_RATIO=293/1352,S.MUG_V2_11_OZ_TEMPLATE_ID=140,S.MUG_V2_15_OZ_TEMPLATE_ID=141,S.MUG_V2_SIDE_CENTER_DIST_RATIO=208.5/1258,S.prototype.getSideCenterDistanceRatio=function(){switch(this.templateId){case S.MUG_V1_11_OZ_TEMPLATE_ID:case S.MUG_V1_15_OZ_TEMPLATE_ID:return S.MUG_V1_SIDE_CENTER_DIST_RATIO;case S.MUG_V2_11_OZ_TEMPLATE_ID:case S.MUG_V2_15_OZ_TEMPLATE_ID:return S.MUG_V2_SIDE_CENTER_DIST_RATIO}},S.layerFromArray=function(e){var t;switch(e.type){case c.a.TYPE:if(t=new c.a,(new n.a).hasCachedFile(e.fileId)||(new n.a).cacheFile(u.a.fromArray(e.fileItem)),t.fileItem=(new n.a).getCachedFile(e.fileId),t.overrideColors=null,e.overrideColors){for(var i=0,d=Object.keys(e.overrideColors);i<d.length;i++){var g=d[i];e.overrideColors[g]===p.a.EMBROIDERY_NONE_COLOR_BE_LCASE_VALUE&&(e.overrideColors[g]=null)}t.overrideColors=e.overrideColors}t.embroideryType=e.embroideryType||null,t.isUpscaled=e.isUpscaled||!1,t.isRemovedBg=e.isRemovedBg||!1,t.removeBgPreview=e.removeBgPreview||null;break;case s.a.TYPE:t=new s.a,e.clipartItem&&!Object(m.e)(e.clipartItemId)&&Object(m.b)([e.clipartItem]),t.clipartItem=Object(m.e)(e.clipartItemId),e.svg&&t.clipartItem&&(t.clipartItem.svg=e.svg),t.fillColor=e.fillColor;break;case l.a.TYPE:(t=l.a.fromArray(e.textInput||e)).embroideryType=e.embroideryType||null;break;case r.a.TYPE:(t=r.a.fromArray(e.textInput||e)).embroideryType=e.embroideryType||null;break;case h.a.TYPE:t=h.a.fromLicensedAssetItem(e.licensedAssetItem||e);break;case P.a:if(e.object===y.a.BE_OBJECT){var T=e[y.a.BE_OBJECT];T&&!Object(b.b)(e.id)&&Object(b.a)([T]),t=y.a.fromObject(T||e)}else e.object===C.a.BE_OBJECT?t=C.a.fromObject():console.error("Unknown mockup layer type");break;default:console.error("Unknown layer data type",e)}return t?(t.position=a.a.fromArray(e.position),e.cropPosition&&(t.cropPosition=a.a.fromArray(e.cropPosition),t.cropPosition.areaWidth=t.position.areaWidth,t.cropPosition.areaHeight=t.position.areaHeight,t.cropPosition.rotation=t.position.rotation),t.originalPosition=a.a.fromArray(e.position),t.isCustomizable=e.isCustomizable,t.customizeKey=e.customizeKey,t.patternType=e.patternType||null,t.patternSpacing=e.patternSpacing||null,t.flipX=e.flipX||!1,t.flipY=e.flipY||!1,t.quickDesignId=e.quickDesignId||null,t.groupType=(null==e?void 0:e.groupType)||(e.quickDesignId?f.a.GROUP_QUICK_DESIGN:null),t.groupId=e.groupId||null,t.isExisting=!0,e.generatorOptions&&Object.keys(e.generatorOptions).length>0&&(t.generatorOptions=o.fromArray(e.generatorOptions)),Object(_.c)()&&Object(v.b)(t),t):null},S.fromArray=function(e){var t=new S;for(var i in t.templateId=e.templateId,t.placementId=e.placementId,t.parentTemplateId=e.parentTemplateId,t.width=e.width,t.height=e.height,t.fillMode=e.fillMode,t.technique=e.technique,t.placementName=e.placementName,t.centerDefaultYPosition=e.centerDefaultYPosition,e.layers){var n=this.layerFromArray(e.layers[i]);n&&t.layers.push(n)}return t},S.getCustomizableLayersCount=function(e){var t=0;for(var i in e.layers)e.layers[i].isCustomizable&&t++;return t},S.prototype.hasTextLayersOnly=function(){for(var e in this.layers)if(!this.layers[e].isTextLayer())return!1;return!0},S.prototype.getMergedLayerBoundingBoxSize=function(){var e={left:0,right:0,top:0,bottom:0,width:0,height:0};for(var t in this.layers){var i=this.layers[t].position.getBoundingBox();e.left=Math.min(0===e.left?i.left:e.left,i.left),e.right=Math.max(0===e.right?i.right:e.right,i.right),e.top=Math.min(0===e.top?i.top:e.top,i.top),e.bottom=Math.max(0===e.bottom?i.bottom:e.bottom,i.bottom)}return e.width=e.right-e.left,e.height=e.bottom-e.top,e},S.prototype.isTouchToolPrintFile=function(){return this.templateId===S.ID_TOUCH_TOOL_PRINT_FILE},S.prototype.getLayerCount=function(){return this.layers.length},S.ID_TOUCH_TOOL_PRINT_FILE=233,window&&((globalThis||{}).PFItemsGeneratorTemplateItem=S)},bUho:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({_$node:null,_onShow:null,onCloseCallback:null,__construct:function(e,t,i,n,r){var a=this,o={html:!0,placement:"top",trigger:"focus",animation:!1,modalCompatible:!1,template:tag("div",{className:"popover text-center popover-warning",attr:{"aria-live":"polite"}},[tag("button",{className:"popover__close close",attr:{"aria-hidden":"true"},onclick:function(e){a._$node.popover("hide")}},"x"),tag("div","popover__arrow arrow"),tag("div","popover__title title pf-mr-16",t),tag("div","popover__content content",i)])};if(this.onCloseCallback=r,n)for(var s in n)o[s]=n[s];var l=$("body").hasClass("modal-open")&&o.modalCompatible;l&&(o.container="body"),this._$node=$(e).popover(o),"manual"!==o.trigger&&this._$node.popover("show"),this._$node.on("hidden.bs.popover",(function(){a.onCloseCallback&&a.onCloseCallback(a._destroyInfo)})),l&&$(".modal-content").on("scroll",(function(){a._$node.popover("hide")})),n.closeOnResize&&window.addEventListener("resize",(function(){a._$node.popover("hide")}))},destroy:function(e){this._destroyInfo=e,this._$node.popover("destroy")},show:function(){this._$node.popover("show")}});window&&((globalThis||{}).PFComponentsPopover=n)},bWRx:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_params:null,value:"",_focus:!1,_nodeInput:null,__construct:function(e){this._params=e,this.node=tag("div",(this._params.className?this._params.className:"")+" "+(this._params.isVisible?"":"hidden")),this.value=this._getFormattedValue(e.value),this.render()},render:function(){n.a.clearNode(this.node),tag("label","pf-h5",[this._params.title]).append(this.node),this.nodeInputGroup=tag("div","pf-input-group "+(this._params.inputSize?"pf-input-group-"+this._params.inputSize:""),[tag("span","pf-input-group-prepend",[tag("a",{className:"pf-btn pf-h-100 pf-border pf-px-8 pf-ui-caption pf-align-items-center pf-d-flex",onclick:this._onIncrement.bind(this,-1)},[tag("i","pf-i pf-i-window-minimize pf-text-gray pf-i-18")])]),this._nodeInput=tag("input",{type:"text",className:"pf-form-control text-center pf-px-4",value:this.value,data:{prevent:"Delete, Backspace, ArrowLeft, ArrowRight, ArrowUp, ArrowDown"},prop:{onkeypress:this._cleanupInput.bind(this),onchange:this._onValueChanged.bind(this,!0),onblur:this._onValueChanged.bind(this,!0),onkeyup:this._onValueChanged.bind(this,!1)}}),tag("span","pf-input-group-append",[tag("a",{className:"pf-btn pf-h-100 pf-border pf-px-8 pf-ui-caption pf-align-items-center pf-d-flex",onclick:this._onIncrement.bind(this,1)},[tag("i","pf-i pf-i-plus-thick pf-text-gray pf-i-18")])])]).append(this.node),this._focus&&(this._nodeInput.focus(),this._focus=!1)},show:function(){n.a.removeClassName(this.node,"hidden")},hide:function(){n.a.addClassName(this.node,"hidden")},setValue:function(e){this.value=this._validateValue(e),this._nodeInput.value=this.value},_getFormattedValue:function(e){return parseFloat(e).toFixed(this._params.fractionDigits).toString()},_cleanupInput:function(e){var t=e.key,i=null;isNaN(t)&&-1===[".",",","-","+","Backspace","Delete"].indexOf(t)&&(i=e.target.value),null!==i&&(e.target.value=i,e.preventDefault())},_onIncrement:function(e,t){t&&t.stopPropagation(),e*=this._params.incrementStep,this.value=this._validateValue(parseFloat(this.value)+e),this._afterValueChanged()},_onValueChanged:function(e,t){this._adjustInputValue(t,1)||(this.value=this._validateValue(t.target.value),e&&(t.target.value=this.value),this._afterValueChanged(!0))},_adjustInputValue:function(e,t){var i=null;return"ArrowUp"===e.key?i=t:"ArrowDown"===e.key&&(i=-t),null!==i&&(this._focus=!0,this._onIncrement(i),e.target.value=parseFloat(parseFloat(e.target.value)+i).toFixed(2),!0)},_validateValue:function(e){if(e=parseFloat(e),isNaN(e)&&(e=this._params.defaultValue),null!==this._params.minValue&&e<this._params.minValue||null!==this._params.maxValue&&e>this._params.maxValue){if((null==this._params.minValue||this.value>this._params.minValue)&&(null==this._params.maxValue||this.value<=this._params.maxValue))return this.value;e=this._params.defaultValue}return e.toFixed(this._params.fractionDigits)},_afterValueChanged:function(e){e||this.render(),this._params.onValueChanged&&this._params.onValueChanged(this.value,this)}},n.a.Base);window&&((globalThis||{}).PFFormsNumber=r)},bXkz:function(e,t,i){"use strict";i.d(t,"a",(function(){return u}));var n=i("SGrL"),r=i("2el7"),a=i("Gv5l"),o=i("/w+P"),s=i("cCrT"),l=i("nF4n"),c=i("97Au"),u=Class({_par:null,__construct:function(e){this.par=new r.a,l.a.O2O(this.par,e||{}),this._process()},_process:function(){var e=PF.Customer.customerId;if(e||this.par.orderType!=u.ORDER_TYPE_SAMPLE||(this.par.requireLogin=!0),!e&&!this.par.requireLogin)return this.par.orderType=u.ORDER_TYPE_ANONYMOUS,void this._goToOrder();this.par.storeId||!e?this.par.orderType||!e?this._goToOrder():this._selectOrderType():this._selectStore()},_selectStore:function(){var e=new o.b;e.callback=this._selectStoreCallback,e.type=a.a.CACHE_KEY_ORDER_FLOW,e.withAvailableProductId=this.par.allowStoresWithAvailableProductId||null,e.withAvailableVariantId=this.par.allowStoresWithAvailableVariantId||null;var t=new o.a(e);setTimeout(function(){this.par.storeId||this._popup(t)}.bind(this),10)},_selectStoreCallback:function(e){this.par.storeId=e,this._process()},_selectOrderType:function(){var e={callback:this._selectOrderTypeCallback,storeId:this.par.storeId};if(this.par.storeId){var t=(new a.a).getCachedStore(this.par.storeId);t&&!t.isNative()&&!t.supportsPrintfulProducts&&t.supportsCustomProducts&&(e.types=[u.ORDER_TYPE_BASIC],e.storeId=t.storeId)}this.par.productTemplateId&&(e.types=[u.ORDER_TYPE_BASIC,u.ORDER_TYPE_SAMPLE]),this._popup(new n.a(e,this.modal))},_selectOrderTypeCallback:function(e){this.par.orderType=e,ga("send",{hitType:"event",eventCategory:"Button Clicks",eventAction:"Order Type Button",eventLabel:"Create "+e+" order button clicked"}),this._process()},_popup:function(e){var t=new c.a.Par;t.title=lang("Start new order"),t.modalDialogClass=this.par.storeId?"modal-md":"modal-lg",t.closeOnClick=!1,t.dataTestTag="new-order-modal",this.modal?this.modal.swapBody(e,!0):(this.modal=new c.a(t),this.modal.setContent(e),this.modal.show())},_goToOrder:function(){var e=new s.a(u.NEW_ORDER_URL);switch(this.par.storeId&&(e.query.storeId=this.par.storeId),this.par.categoryId&&(e.query.categoryId=this.par.categoryId),this.par.productId&&(e.query.productId=this.par.productId),this.par.productTemplateId&&(e.query.productTemplateId=this.par.productTemplateId),this.par.productSize&&(e.query.size=this.par.productSize),this.par.productColor&&(e.query.color=this.par.productColor),this.par.productTechnique&&(e.query.technique=this.par.productTechnique),this.par.ref&&(e.query.ref=this.par.ref),this.par.orderType){case u.ORDER_TYPE_ANONYMOUS:e.query.ref=u.B2C_FLOW_KEY;break;case u.ORDER_TYPE_BASIC:break;case u.ORDER_TYPE_SAMPLE:e.query.isSample=1;break;default:return void this._process()}location.href=e.toString()}},l.a.Base);u.ORDER_TYPE_ANONYMOUS="anonymous",u.ORDER_TYPE_BASIC="basic",u.ORDER_TYPE_SAMPLE="sample",u.NEW_ORDER_URL=langUrl("/dashboard/order/add-product"),u.REF_LANDING="landing",u.B2C_FLOW_KEY="b2c",(globalThis||{}).PFOrderBegin=u},"boP+":function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"e",(function(){return o})),i.d(t,"g",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"f",(function(){return u})),i.d(t,"d",(function(){return d}));var n=i("KLvT"),r=i("Bxww");function a(){return Object(n.a)().getters[r.b(r.e)]}function o(e){Object(n.a)().commit(r.b(r.i),{productItem:e})}function s(e){Object(n.a)().commit(r.b(r.j),e)}function l(){return!!Object(n.a)().getters[r.b(r.e)]}function c(){return Object(n.a)().getters[r.b(r.d)]}function u(e){Object(n.a)().commit(r.b(r.h),{placements:e})}function d(e){return Object(n.a)().getters[r.b(r.d)].includes(e)}},bvdp:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={_track:function(e,t,i){var n={hitType:"event",eventCategory:"MockupGenerator",eventAction:e};if(void 0!==t&&(n.eventLabel=t),void 0!==i&&(n.eventValue=i),PF.DEV){var r='Track MockupGenerator action "'+n.eventAction+'"';n.eventLabel&&(r+=" (label: "+n.eventLabel+")"),void 0!==n.eventValue&&(r+=" with value "+n.eventValue),console.log(r)}else ga("send",n)},_getCustomerLabel:function(){return PF.Customer.customerId>0?PF.Customer.createdAt+1800>moment().unix()?"Just registered":PF.Customer.createdAt+2592e3>moment().unix()?"New user":"Old user":"Anonymous"},trackEvent:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.BLOCKED_LABELS[e]||(i&&(this.BLOCKED_LABELS[e]=!0),PF.DEV&&console.log('Track GA Event "'+e+'": '+JSON.stringify(t)),window.dataLayer=window.dataLayer||[],dataLayer.push(t))},unblockEvent:function(e){delete this.BLOCKED_LABELS[e]},trackTransparencyWarningContinue:function(e){this.trackEvent("transparency-warning-continue",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Continue button clicked",eventLabel:e||null})},trackViewDesigner:function(){n._track("View designer",n._getCustomerLabel()),ga("send",{hitType:"event",eventCategory:(PF.Customer.isLogged(),"Generator interactions in Mockup generator"),eventAction:PF.Customer.isLogged()?"Product opened in Mockup generator - signed-in users":"Product opened in Mockup generator - anonymous users"})},trackViewDownloadPage:function(){n._track("View download page",n._getCustomerLabel())},trackGenerateClick:function(e){n._track("Clicked generate",n._getCustomerLabel(),e)},trackGeneratePercentClick:function(e){n._track("Percent of files generated",n._getCustomerLabel(),e)},trackDownloadClick:function(e){n._track("Clicked download",n._getCustomerLabel(),e)},trackSaveToLibrary:function(e){n._track("Save to library",n._getCustomerLabel(),e)},trackSingleFileCheckToggle:function(e,t){n._track(t?"Check one file to generate":"Un-check one file to generate",e)},trackFileRowCheckToggle:function(e,t){n._track(t?"Check row to generate":"Un-check row to generate",e)},trackFilenameChanged:function(){n._track("Filename changed",n._getCustomerLabel())},trackCompleteFileSavingAfterLogin:function(){n._track("Finish file saving after login",n._getCustomerLabel())},_getEventCategory:function(e){var t="";return e?t=PF.Customer.isLogged()?"in Order flow":"in Product catalog":e||(t="in Mockup generator"),"Generator interactions "+t},_getEventLabel:function(e,t){var i=0,n="";for(var r in e.getTemplates())for(var a in e.getTemplates()[r])i+=e.getTemplates()[r][a].layers.length;return 1===i?n="".concat(t," - 1"):2===i?n="".concat(t," - 2"):i>2&&(n="".concat(t," 3+")),"Clicked "+n+" layer/s"},trackDesignTabsInProductOrDesignTab:function(e,t,i,n){if(n.isMockupGeneratorMode||n.isOrderFlowMode){var r="";"product"===t?r=PF.Customer.isLogged()?"Next steps designing options clicked - signed-in users":"Next steps designing options clicked - anonymous users":"design"===t&&(r=PF.Customer.isLogged()?"Designing options clicked in design tab - signed-in users":"Designing options clicked in design tab - anonymous users"),ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:r,eventLabel:i})}},trackAddFirstLayer:function(e,t,i){var n,r=!1;if((i.isMockupGeneratorMode||i.isOrderFlowMode)&&((1===t[0].layers.length||"QUICK_DESIGN"===(null===(n=t[0].layers[0])||void 0===n?void 0:n.groupType))&&!r)){r=!0;var a="";"QUICK_DESIGN"===t[0].layers[0].groupType?a="Quick design layer":t[0].layers[0].isImageLayer()?a="File layer":t[0].layers[0].isTextLayer()?a="Text layer":t[0].layers[0].isClipartLayer()?a="Clipart layer":t[0].layers[0].isLicensedAssetLayer()&&(a="Premium images layer"),ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:PF.Customer.isLogged()?"First design layer added - signed-in users":"First design layer added - anonymous users",eventLabel:a})}},trackClickedOnFinish:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:PF.Customer.isLogged()?this._getEventLabel(e,"order"):this._getEventLabel(e,"add to cart")})},trackClickedOnContinue:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:PF.Customer.isLogged()?this._getEventLabel(e,"generate files"):this._getEventLabel(e,"continue")})},trackClickedOnContinueInPopup:function(e){var t=0,i="",n=e.getDesignData().templates;for(var r in n)t+=n[r].layers.length;1===t?i="Continue clicked - 1 layer":2===t?i="Continue clicked - 2 layers":t>2&&(i="Continue clicked 3+ layers"),ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Continue with design clicked - signed-in users":"Continue with design clicked - anonymous users",eventLabel:i})},trackClickedOnSaveToTemplates:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:"Continue with design clicked - signed-in users",eventLabel:this._getEventLabel(e,"Save to templates")})},trackClickedOnDesignTab:function(e,t){(t.isMockupGeneratorMode||t.isOrderFlowMode)&&ga("send",{hitType:"event",eventCategory:this._getEventCategory(e),eventAction:PF.Customer.isLogged()?"Design tab opened - signed-in users":"Design tab opened - anonymous users"})},BLOCKED_LABELS:{}};(globalThis||{}).PFMockupGeneratorTracking=n},c4GQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("TbQS"),r=i("D/Ov"),a=i("6t3j"),o=i("o0qH"),s=i("AUjr"),l=i("a3yQ"),c=i("eYhR"),u=i("nwx2"),d=i("fQ40"),h=i("L5Qw"),p=i("nF4n"),f=Class({_product:null,_productRepository:null,__construct:function(e,t,i){this._product=e,this._productRepository=new a.a,this._productRepository.setCurrency(this._product.priceRange.currency);var n=new u.a("primary"),r=new c.a;return r.caption=lang("Info"),r.onclick=this._onInfoClicked,r.isActive=t===f.TAB_INFO,n.add(r),(e.isDtgShirt()||e.isEmbroidery())&&((r=new c.a).caption=lang("Pricing"),r.onclick=this._onPricingClicked,r.isActive=t===f.TAB_PRICING,n.add(r)),(r=new c.a).caption=lang("Print file templates"),r.onclick=this._onTemplatesClicked,r.isActive=t===f.TAB_TEMPLATES,n.add(r),i&&((r=new c.a).caption=lang("Reviews"),r.onclick=this._onReviewsClicked.bind(this,1),r.isActive=t===f.TAB_REVIEWS,n.add(r)),this.node=Object(p.a)({tag:"div",className:"row",els:[{tag:"div",className:"col-md-12 pf-m-0",els:[n,this.nodeContainer=Object(p.a)({tag:"div",className:"col-md-12 pf-p-0"+(i?" margin-top-20":""),els:[{tag:"div"}]})]}]}),"info"==t?this._onInfoClicked():this._onReviewsClicked(1),this.node},_onTemplatesClicked:function(){this._productRepository.getDetails(this._product.productId,this._onTemplatesLoaded)},_onTemplatesLoaded:function(e){var t=Object(o.a)(this._product.productId).getTechniqueFromMemory()||this._product.type;p.a.clearNode(this.nodeContainer),tag("div","",[new l.a(e.templates,t),{tag:"a",href:this._product.getGuidelinesTabUrl(),target:"_blank",className:"pf-link bold",style:{fontWeight:"bold"},text:dlang("products","See full guidelines, tips, and video tutorials")}]).append(this.nodeContainer)},_onInfoClicked:function(){this._productRepository.getDetails(this._product.productId,this._onInfoLoaded)},_onPricingClicked:function(){this._productRepository.getDetails(this._product.productId,this._onPricingLoaded)},_onInfoLoaded:function(e){p.a.clearNode(this.nodeContainer),Object(p.a)({tag:"div",els:[{tag:"h6",text:lang("Price")},{tag:"h4",className:"client",innerHTML:this._setPrice(e.product)},{tag:"h6",className:"margin-top-30",text:lang("Description")},{tag:"div",className:"pf-text-muted",innerHTML:e.description}]}).append(this.nodeContainer)},_onPricingLoaded:function(e){if(p.a.clearNode(this.nodeContainer),!$.isEmptyObject(e.pricing)){var t=new s.a(e.product,e.pricing);tag("div",null,[t.getContent()]).append(this.nodeContainer)}},_setPrice:function(e){return e.getDisplayPriceString()},_onReviewsClicked:function(e){var t=new n.a(this._product);(new a.a).getReviews({reviewableItemId:t.getId(),reviewableItemType:t.getType(),page:e,stars:0,locale:null,withPictures:!1,sortBy:null,perPage:3,callback:this._onReviewsLoaded})},_onReviewsLoaded:function(e){if(p.a.clearNode(this.nodeContainer),e.items.length){for(var t in e.items)new r.a(e.items[t]).append(this.nodeContainer);var i=new d.a;i.page=e.page,i.pages=e.pages,i.callback=this._onReviewsClicked,new h.a(i).append(this.nodeContainer)}else Object(p.a)({tag:"div",className:"text-center",text:dlang("products","This product doesnât have any reviews yet.")}).append(this.nodeContainer)}},p.a.Base);f.TAB_INFO="info",f.TAB_REVIEWS="reviews",f.TAB_TEMPLATES="templates",f.TAB_PRICING="pricing",(globalThis||{}).PFProductInfo=f;var g=i("97Au"),m=Class({_par:void 0,_modal:void 0,_productInfo:void 0,__construct:function(e){e.activeTab=e.activeTab||f.TAB_INFO,this._par=e,this._init()},_init:function(){var e=new g.a.Par;e.title=this._par.product.getFullTitle(),e.modalDialogClass="modal-lg",this._productInfo=new f(this._par.product,this._par.activeTab,!!this._par.showReviews);var t=new g.a(e);t.setContent(this._productInfo),t.show(),this._modal=t},getModal:function(){return this._modal},getProductInfo:function(){return this._productInfo}});(globalThis||{}).PFProductInfoModal=m},cKxm:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return S}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","form-input-field-mke "+(null==e?void 0:e.containerClassName)||!1),v(g(t),b,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,P).destroy(),v(this,P,null)}},{key:"setValue",value:function(e){_(this,P).setDataProp("value",e)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"input-field":function(){return i.e(221).then(i.bind(null,"/CSp"))}},t.template='\n            <input-field\n                :name="name"\n                :placeholder="placeholder"\n                :id="id"\n                :value="value"\n                :label="label"\n                :type="type"\n                :labelHelpText="labelHelpText"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :isReadOnly="isReadOnly"\n                :tooltip="tooltip"\n                :prefix="prefix"\n                :prefixClass="prefixClass"\n                :suffix="suffix"\n                :suffixClass="suffixClass"\n                :prefixSwitcher="prefixSwitcher"\n                :suffixSwitcher="suffixSwitcher"\n                :className="className"\n                :inputSize="inputSize"\n                :validation="validation"\n                :switcherOptions="switcherOptions"\n                :activeSwitcherOption="activeSwitcherOption"\n                :showClearButton="showClearButton"\n                :autocomplete="autoComplete"\n                :data-test="dataTest"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onKeyUp="emitEvent(\'onKeyUp\', $event)"\n                @onKeyUpEvent="emitEvent(\'onKeyUpEvent\', $event)"\n                @onFocus="emitEvent(\'onFocus\', $event)"\n                @onBlur="emitEvent(\'onBlur\', $event)"\n                @onSwitcherValueChange="emitEvent(\'onSwitcherValueChange\', $event)"\n                @onValidated="emitEvent(\'onValidated\', $event)"\n            />\n        ',t.initialData={name:_(this,b).name,placeholder:_(this,b).placeholder,id:_(this,b).id,value:_(this,b).value,label:_(this,b).label,type:_(this,b).type,labelHelpText:_(this,b).labelHelpText,infoIcon:_(this,b).infoIcon,infoIconDelay:_(this,b).infoIconDelay,infoIconName:_(this,b).infoIconName,isReadOnly:_(this,b).isReadOnly,tooltip:_(this,b).tooltip,prefix:_(this,b).prefix,prefixClass:_(this,b).prefixClass,suffix:_(this,b).suffix,suffixClass:_(this,b).suffixClass,prefixSwitcher:_(this,b).prefixSwitcher,suffixSwitcher:_(this,b).suffixSwitcher,className:_(this,b).className,inputSize:_(this,b).inputSize,validation:_(this,b).validation,switcherOptions:_(this,b).switcherOptions,activeSwitcherOption:_(this,b).activeSwitcherOption,showClearButton:_(this,b).showClearButton,autoComplete:_(this,b).autoComplete,dataTest:_(this,b).dataTest},t.emitEvent=function(e,t){switch(e){case"onChange":_(r,b).onChange&&_(r,b).onChange(t);break;case"onKeyUp":_(r,b).onKeyUp&&_(r,b).onKeyUp(t);break;case"onKeyUpEvent":_(r,b).onKeyUpEvent&&_(r,b).onKeyUpEvent(t);break;case"onFocus":_(r,b).onFocus&&_(r,b).onFocus(t);break;case"onBlur":_(r,b).onBlur&&_(r,b).onBlur(t);break;case"onSwitcherValueChange":_(r,b).onSwitcherValueChange&&_(r,b).onSwitcherValueChange(t);break;case"onValidated":_(r,b).onValidated&&_(r,b).onValidated(t)}},v(this,P,new n.a(t)),_(this,P).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.name=t.name||"default Name",this.placeholder=t.placeholder||void 0,this.id=t.id||void 0,this.value=t.value||void 0,this.label=t.label||void 0,this.type=t.type||void 0,this.labelHelpText=t.labelHelpText||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.isReadOnly=t.isReadOnly||void 0,this.tooltip=t.tooltip||void 0,this.prefix=t.prefix||void 0,this.prefixClass=t.prefixClass||void 0,this.suffix=t.suffix||void 0,this.suffixClass=t.suffixClass||void 0,this.prefixSwitcher=t.prefixSwitcher||void 0,this.suffixSwitcher=t.suffixSwitcher||void 0,this.className=t.className||void 0,this.containerClassName=t.containerClassName||void 0,this.inputSize=t.inputSize||void 0,this.validation=t.validation||void 0,this.switcherOptions=t.switcherOptions||void 0,this.activeswitcherOption=t.activeswitcherOption||void 0,this.onChange=t.onChange||void 0,this.onKeyUp=t.onKeyUp||void 0,this.onKeyUpEvent=t.onKeyUpEvent||void 0,this.onFocus=t.onFocus||void 0,this.onBlur=t.onBlur||void 0,this.onSwitcherValueChange=t.onSwitcherValueChange||void 0,this.activeSwitcherOption=t.activeSwitcherOption||void 0,this.showClearButton=t.showClearButton||void 0,this.onValidated=t.onValidated||void 0,this.autoComplete=t.autoComplete||void 0,this.dataTest=t.dataTest||void 0}},cVO5:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({isChecked:null,onChange:null,showSlider:null,onSliderChange:null,layerType:null});window&&((globalThis||{}).PFProductPushCanCustomizeCheckboxPar=n)},cd9T:function(e,t,i){"use strict";i.d(t,"b",(function(){return a})),i.d(t,"a",(function(){return o}));var n=i("KLvT"),r=i("E7gQ"),a=function(e){return Object(n.a)().getters[r.c(r.e)]([e])[0]},o=function(e){return Object(n.a)().commit(r.c(r.m),e)}},cejl:function(e,t,i){"use strict";i.d(t,"a",(function(){return O}));var n=i("QLN8"),r=i("E17x"),a=i("vUhP"),o=i("5B9T"),s=i("X5Ic"),l=i("nF4n"),c=function e(t){var i;this.par=new e.Par,l.a.O2O(this.par,t||{}),this.par.showBig&&(this.par.nodeClass+=" swatches--big"),this.par.showInline&&(this.par.nodeClass+=" swatches--inline"),this.par.onColorChange&&null===this.par.maxCount&&(this.par.maxCount=this.par.colors.length),this.allColors=this.normalizeColorArray(this.par.colors),this.selectedColorHashes=[];var n=this.normalizeColorArray(this.par.activeColors);for(i in n)this.selectedColorHashes.push(this.getHashFromColors(n[i]));if(this.par.activeColorNames)for(i in this.par.activeColorNames){var r=this.par.activeColorNames[i],a=this.getHashFromColors(this.par.colorNames[r]);a?this.selectedColorHashes.push(a):console.error("Cannot find color for "+r+". Probably a duplicate")}this.node=Object(l.a)({tag:"div",className:"swatches",attr:{"aria-hidden":"true"}}),this.par.maxCount&&l.a.addClassName(this.node,"swatches--click"),this.par.nodeClass&&l.a.addClassName(this.node,this.par.nodeClass),this.render()};(c.prototype=new l.a.Base).allColors=null,c.prototype.selectedColorHashes=null,c.prototype.render=function(){for(var e in l.a.clearNode(this.node),this.allColors){var t=this.allColors[e],i=[],n=this.getHashFromColors(t);for(var r in t)if(r!==o.a.luminosity){var a=tag("span",{style:{backgroundColor:t[r]}});i.push(a)}var s=tag("span",{className:"swatches__item",title:this.getColorName(t)+" "+t.join("/")},i);this.par.maxCount&&(s.onclick=$.proxy(this.onColorClick,this,n)),-1!==this.selectedColorHashes.indexOf(n)&&l.a.addClassName(s,"swatches__item--active"),s.append(this.node)}},c.prototype.onColorClick=function(e){var t=this.selectedColorHashes.indexOf(e);-1===t?1==this.par.maxCount?this.selectedColorHashes=[e]:this.selectedColorHashes.length<this.par.maxCount&&this.selectedColorHashes.push(e):this.selectedColorHashes.splice(t,1),this.render(),null!==this.par.onColorChange&&this.par.onColorChange(this.getSelectedColors())},c.prototype.getSelectedColors=function(){var e=[];for(var t in this.allColors){var i=this.allColors[t],n=this.getHashFromColors(i);this.selectedColorHashes.indexOf(n)>-1&&e.push(i)}return e},c.prototype.getHashFromColors=function(e){return!!e&&e.join(":").toUpperCase()},c.prototype.normalizeColorArray=function(e){var t=[],i={};for(var n in e){var r=e[n];if(r){r instanceof Array||(r=[r]);var a=this.getHashFromColors(r);i[a]||(t.push(r),i[a]=!0)}}return t},c.prototype.getColorName=function(e){if(e instanceof Array==0&&(e=[e]),!this.par.colorNames)return e.join(" ");var t=this.getHashFromColors(e);for(var i in this.par.colorNames)if(t===this.getHashFromColors(this.par.colorNames[i]))return i;return e.join(" ")},c.fromProduct=function(e,t){for(var i in(t=t||new c.Par).colorNames={},t.colors=[],e.colors){var n=e.colors[i],r=new s.a.ColorPair;if(r.colorName=null==n?void 0:n.colorName,r.colorCode=null==n?void 0:n.colorCode,r.colorCode2=null==n?void 0:n.colorCode2,r.colorCode){var a=[r.colorCode.toUpperCase()];r.colorCode2&&a.push(r.colorCode2.toUpperCase()),t.colors.push(a),t.colorNames[r.colorName]=r.getColorCodes()}}return new c(t)},c._colorOrder=o.a.colorOrder,c._sortColors=function(e,t){var i=e.length>1,n=t.length>1;if(i||n)return i&&!n?1:!i&&n?-1:0;var r=e[0].toUpperCase(),a=t[0].toUpperCase();return o.a.compareColorsCallback(r,a)},(c.Par=function(){}).prototype.onColorChange=null,c.Par.prototype.colors=null,c.Par.prototype.nodeClass="",c.Par.prototype.activeColors=null,c.Par.prototype.activeColorNames=null,c.Par.prototype.maxCount=null,c.Par.prototype.colorNames=null,c.Par.prototype.showBig=!1,c.Par.prototype.showInline=!1,c.Par.prototype.shouldSortByLuminosity=!0,window&&((globalThis||{}).PFComponentsSwatches=c);var u=i("sjGI"),d=i("TbQS"),h=i("A9n+"),p=i("FHCs"),f=i("9Nv7"),g=i("YBfo"),m=i("4Ru2"),v=i("4CFC"),y=i("Op/+"),b=i("N6Gp"),P=i("GGNF"),C=i("Rsrl"),T=i("Kiz0"),w=i("wy2R"),I=i.n(w),S=i("NhST"),E=i("md/F"),O=function(e){var t,i,o=this;this.product=e.product,this.variant=e.variant,this.showFulfillmentCountries=e.showFulfillmentCountries,this.technique=e.technique,this.chooseButtonTitle=e.chooseButtonTitle||lang("Choose"),this.productUrl=e.url,this.isModal=e.isModal,this.sellingRegion=(null==e?void 0:e.sellingRegion)||null,this.disableEdt=(null==e?void 0:e.disableEdt)||!1;var s=e.callback;e.className=e.className||"col-md-3 col-xs-6";var u=[],d=e.isSampleOrderContext&&this.product.isDisabledInSample,h=this.product.isPersonalUseBrand()&&!g.a.isProductsPricing()&&!g.a.isOrderFlow(),f="";this.product.isSterlingSilver&&(f=tag("span","pf-ui-legal pf-bold",dclang("products","Product feature","Sterling Silver")));var m=this._getFirstLevelBadge();m&&u.push(m),null!==(t=this.product)&&void 0!==t&&t.isEcoFriendly?u.push(tag("span",{className:"product-item__badge product-item__badge--eco pf-p-4",attr:{title:dclang("products","badge","Eco-friendly")}},[tag("span",{className:"pf-d-flex pf-h-100 pf-align-items-center",innerHTML:'<img src="/static/images/layout/eco-friendly-icon.svg" class="pf-ml-0 pf-mr-4" alt="'.concat(dclang("products","badge","Eco-friendly"),'">\n                            <p class="pf-m-0">').concat(dclang("products","badge","Eco-friendly"),"</p>")})])):this._showMadeInUsBadge()&&u.push(tag("span",{className:"product-item__badge  product-item__badge--usa pf-p-4",attr:{title:dclang("products","badge","Made in USA")}},[tag("span",{className:"pf-d-flex pf-h-100 pf-align-items-center",innerHTML:'<p class="pf-m-0 pf-uppercase">'.concat(dclang("products","badge","Made in"),'</p>\n                        <img src="/static/images/layout/usa-flag.png" class="pf-ml-8 pf-mr-0 pf-h-100" alt="').concat(dclang("products","badge","Made in USA"),'">')})])),d&&(u=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Not available for sample orders")])]),e.isUnavailable&&(u=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Temporarily unavailable")])]),this.product.isTemporaryOutOfStock&&(u=[tag("span","product-item__badge product-item__badge--out-of-stock",[lang("Out of stock")])]),h&&(u=[tag("span","product-item__badge product-item__badge--disabled",[dclang("products","Product is","Only available for personal orders")])]),u.length&&u[0].setAttribute("tabindex","0");var _={};this.product.isInCategory(n.a.CATEGORY_HATS)&&(_.backgroundSize="contain",_.backgroundColor="white"),_.width="100%";var v="";(this.product.isTemporaryOutOfStock||d||e.isUnavailable||h)&&(v=" square-box--out-of-stock"),this.product.doesNotMatchSellingRegion&&(_.opacity="0.5");var w=E.a.getProductImageByType(this.product.images,this.product.mainCatalogCategoryId),I=(null==w?void 0:w.primary)||this.product.urlImage,S=(null==w?void 0:w.hover)||null,O=tag("div","square-box pf-rounded-top"+v,[this._squareContent=tag("div","square-content",[tag("img",{className:S?"square-box__img":"",prop:{width:"254",src:e.skipLazyLoad?I:p.a,loading:e.skipLazyLoad?"eager":"lazy",alt:this.product?this.product.customTitle:""},data:{src:I},style:_}),S?tag("img",{className:"square-box__hover-img",prop:{width:"254",src:S,alt:this.product?this.product.customTitle:""},style:_}):"",tag("span","product-item__empty-content",u)])]);P.a.isFavoriteProductsEnabled().then((function(t){var i=(new y.a).categories.getActiveCategoryId();!t||(o.product.isTemporaryOutOfStock||e.isUnavailable)&&i!==b.a.ID_FAKE_FAVORITES||null!=e&&e.hideFavorites||(tag("span",{className:"pf-d-flex pf-justify-content-center pf-align-items-center product-item__favorites-icon pf-mx-8 pf-mb-8",attr:{"data-toggle":"tooltip","data-container":"body",title:o._getFavoritesNodeHoverTitle()},style:{zIndex:1}},[o._favoritesNode=tag("i",{className:o._getFavoritesNodeClassName(),onclick:o._openFavoritesLink.bind(o),prop:{onmouseover:o._onMouseoverFavorite.bind(o),onmouseout:o._onMouseoutFavorite.bind(o)},attr:{"data-toggle":"tooltip","data-container":"body",title:o._getFavoritesNodeHoverTitle()}}),o._favoritesOverlay=tag("span")]).prepend(o._squareContent),Object(r.b)()||$(o._favoritesNode).tooltip())}));var k=c.fromProduct(this.product);l.a.addClassName(k.node,"detail pf-m-0 pf-mb-12");var L=this.variant?this.variant.name:this.product.model||this.product.title;this.product.brand&&(L=this.product.brand+" "+L),this.product.displayName&&(L=this.product.displayName);var A=this.product.reviewRating;if(A&&A.reviewCount)for(var R=[],N=1;N<=5;N++){var D=this.product.reviewRating.rating,x="";parseInt(D)!==D&&Math.round(D)===N?x="-half":N>D&&(x="-empty"),R.push(tag("span","icon-star"+x+" star-rating__star"))}var F,M=e.url&&!e.isUnavailable,B=e.overrideTitle||L,V=this.product.isTemporaryOutOfStock||e.isUnavailable||this.product.doesNotMatchSellingRegion?" product-item--disabled":"",j=this.sellingRegion||C.a.sellingRegion;j?(F=[this._averageDeliveryNode=tag("div")],this._renderAverageDelivery(j)):F=[this._getFulfillmentDaysNode(),this._getFulfillmentCountries(),this._getBrandingOptionsNode()],this.product.doesNotMatchSellingRegion&&(M=!1);var U=tag(M?"a":"div",{className:"product-item pf-mb-16 pf-mb-md-24 pf-mb-lg-32 pf-rounded"+V,attr:{"aria-label":B,role:"button",target:e.isNewTab?"_blank":"_self",draggable:!1}},[O,tag("div","pf-pt-12 pf-px-12 pf-pb-8",[f,this._getFastShippingNode(),tag("div",{className:"product-item__detail pf-mb-12 pf-ui-body",attr:{"aria-hidden":"true"}},B),a.a.createPeriodicPriceDiscountAnnouncement(this.product.priceRange,!1,"pf-mb-16"),!e.hideRating&&A&&A.reviewCount?this._getProductReviewNode(A,R):"",tag("div","product-item__detail__price pf-my-12",[this._getProductPriceNode(),this.product.hasFreeShipping?tag("span","product-item__detail__free-shipping",dclang("products","badge"," + free shipping")):""]),e.hideColors?"":k,e.showSizes||!e.hideProfile&&this.product.isEmbroidery()&&!this.product.hasEmbroideryProfile()?tag("div","product-item__sizes pf-pb-8 pf-text-muted pf-ui-caption pf-bold",[this._getSizeText()]):"",!e.hideProfile&&this.product.isEmbroidery()&&this.product.hasEmbroideryProfile()?tag("div","product-item__embroidery-profile pf-my-12",[dclang("products","low/high/beanie profile","{type} profile").replace("{type}",this.product.getEmbroideryProfile())]):"",e.hideAdditionalInfo?"":F,!this.variant&&this.product.extraDescription?tag("div",{innerHTML:this.product.extraDescription}):"",e.showChooseButton?tag("div","product-item__choose-button",[tag("div","pf-p-12",[tag("span","pf-btn pf-btn-primary pf-btn-block",[this.chooseButtonTitle])])]):""])]),z=!this.product.isTemporaryOutOfStock&&!d;(z||(null===(i=this.category)||void 0===i?void 0:i.id)===b.a.ID_FAKE_FAVORITES)&&(e.callback&&(U.onclick=function(t){if(z&&!t.target.classList.contains("product-item__favorite")){if(document.querySelector("#review-tooltip-".concat(o.product.productId)))return!!t.target.matches(".pf-link")&&t.target.click();if(window.getSelection().toString())return!1;if(e.url===e.product.getMockupGeneratorUrl()&&g.a.addRecentMockup({title:B,url:e.url,image:I}),!((2==t.which||4==t.button||t.metaKey||t.ctrlKey)&&M)){var i=t.defaultPrevented,n=window.location.href;s(o.product,t);var r=i!==t.defaultPrevented,a=n!==window.location.href;t.preventDefault(),!M||r||a||(window.location.href=e.url)}}}),z&&M&&(U.href=e.url),this.product.doesNotMatchSellingRegion&&(U.onclick=function(e){document.querySelectorAll(".does-not-match-selling-region-tooltip-container").forEach((function(e){$(e).tooltip("destroy"),e.remove()}));var t=tag("span",{className:"pf-position-absolute pf-d-block does-not-match-selling-region-tooltip-container",style:{top:"".concat(e.pageY,"px"),left:"".concat(e.pageX,"px")},attr:{tabindex:0}});t.append(document.body);var i=dlang("sellingRegion","Adjust your {linkStart}default catalog and delivery preferences{linkEnd} to select this product");PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()&&(i=dlang("products","Adjust your {linkStart}default selling preferences{linkEnd} to select this product")),$(t).tooltip({template:'<div class="tooltip does-not-match-selling-region-tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"focus",placement:"top",html:!0,title:i.replace("{linkStart}",'<a href="javascript:">').replace("{linkEnd}","</a>")}),$(t).focus(),$(t).on("shown.bs.tooltip",(function(){document.querySelector(".does-not-match-selling-region-tooltip a").addEventListener("click",(function(){Object(T.b)()}))}))})),this.node=tag("div",e.className,[U])};O.prototype=new l.a.Base,O.prototype._openFavoritesLink=function(){var e=this,t=(new y.a).categories.getActiveCategoryId(),i=this.product.favoriteCatalogCategoryId;return t&&t!==b.a.ID_FAKE_FAVORITES||(t=i||this.product.mainCatalogCategoryId),Object(f.a)("favorite-product/update-favorite-product",{productId:this.productId||this.product.productId,catalogCategoryId:t}).then((function(t){t&&(e.product.isFavorite=!e.product.isFavorite,e._favoritesNode.className=e._getFavoritesNodeClassName(),e._favoritesNode.setAttribute("data-original-title",e._getFavoritesNodeHoverTitle()),e._favoritesNode.classList.add("product-item__favorites-icon--bouncy"),e.product.isFavorite&&e._favoritesOverlay.classList.add("product-item__favorites-icon--ripple"),setTimeout((function(){e._favoritesNode.classList.remove("product-item__favorites-icon--bouncy"),e._favoritesOverlay.classList.remove("product-item__favorites-icon--ripple")}),450),delete C.a.cachedData[e.product.productId])})),!1},O.prototype._getFavoritesNodeClassName=function(){return(this.product.isFavorite?"pf-i-heart pf-text-red":"pf-i-heart-outline pf-i-dark")+" pf-i pf-i-24 pf-pointer product-item__favorite"},O.prototype._onMouseoverFavorite=function(){this.product.isFavorite?(l.a.removeClassName(this._favoritesNode,"pf-text-red"),l.a.addClassName(this._favoritesNode,"pf-text-dark-red")):l.a.removeClassName(this._favoritesNode,"pf-i-dark")},O.prototype._onMouseoutFavorite=function(){this.product.isFavorite?(l.a.addClassName(this._favoritesNode,"pf-text-red"),l.a.removeClassName(this._favoritesNode,"pf-text-dark-red")):l.a.addClassName(this._favoritesNode,"pf-i-dark")},O.prototype._getBrandingOptionsNode=function(){var e="";return this.product.hasTearAwayLabel()&&(e=tag("span",{className:"product-item__label product-item__label--branding",attr:{"data-toggle":"tooltip",title:dlang("products","Tear-away label"),tabindex:"0","aria-label":dlang("products","Tear-away label")}},[tag("i",{className:"pf-i pf-i-tag pf-i-18",attr:{"aria-hidden":"true"}})]),Object(r.b)()||$(e).tooltip({html:!0})),e},O.prototype._getFulfillmentDaysNode=function(){var e="";if(null!==this.product.fulfillmentDays){var t=Math.round(10*this.product.fulfillmentDays)/10,i=langUrl("/faq/shipping-packaging-fulfillment/192-how-long-is-fulfillment-time-");e=tag("div","pf-mb-12 product-item__fulfilment-days",[this.moreInfoSpan=tag("span",{className:"pf-link",text:dclang("products","fulfillment","Ready in"),onclick:function(e){e.stopPropagation(),e.preventDefault(),window.open(i,"_blank")}}),tag("strong","",[tag("span","product-item__fulfilment-days__tilde"," ~ "),dnclang("products","fulfillment","{days} business day","{days} business days",Math.floor(t)).replace("{days}",t)])]),this.moreInfoSpan.addEventListener("mousedown",(function(e){4===e.buttons&&(e.stopPropagation(),e.preventDefault(),window.open(i,"_blank"))}))}return e},O.prototype._getSizeText=function(){var e=this.variant&&this.variant.size?[this.variant.size]:this.product.sizes.slice(0);if(0===e.length)return"";if(1===e.length){var t=e.pop();return t===O.ONE_SIZE&&(t=O.ONE_SIZE_TRANSLATED),t}var i=e.shift(),n=e.pop();return i.indexOf("yrs")&&(i=i.replace("yrs",dclang("products","Product size (human years)","yrs"))),i.indexOf("in")&&(i=i.replace("in",dclang("products","Product size (inches)","in"))),n.indexOf("yrs")&&(n=n.replace("yrs",dclang("products","Product size (human years)","yrs"))),n.indexOf("in")&&(n=n.replace("in",dclang("products","Product size (inches)","in"))),i+" - "+n},O.ONE_SIZE="One Size",O.ONE_SIZE_TRANSLATED=dlang("products","One Size"),O.prototype._getProductPriceNode=function(){var e=0;this.technique&&(e=this.product.priceRange.getAdjustmentPrice(this.technique));var t=this.product.shouldShowTaxInclusion();return this.variant?a.a.createDiscountElementFromPriceData({priceData:this.variant.priceData,basePriceAdjustment:e,showTaxInclusion:t}):a.a.createDiscountElementFromPriceRange(this.product.priceRange,e,t)},O.prototype._getFastShippingNode=function(){var e;if(this.sellingRegion||C.a.sellingRegion)return"";if(null===(e=PF.Customer)||void 0===e||!e.location)return"";var t={ES:{region:m.a.REGION_EUROPE_SPAIN,label:clang("fast shipping label","Fast delivery in Spain")},JP:{region:m.a.REGION_JAPAN,label:clang("fast shipping label","Fast delivery in Japan")},CA:{region:m.a.REGION_CANADA,label:clang("fast shipping label","Quick delivery to Canada"),class:"ca-fs"}},i=PF.Customer.location.country,n=t[i];return n&&Object.values(this.product.fulfillmentCountriesMap).indexOf(n.region)>-1?tag("div","pf-ui-caption product-item__fast-shipping-container",[tag("span","flag ".concat(n.class||i.toLowerCase())),tag("strong","pf-text-dark",n.label)]):""},O.prototype._getFulfillmentCountries=function(){if(!this.showFulfillmentCountries)return!1;var e=this.variant?this.variant.getFulfillmentCountries():this.product.fulfillmentCountries,t=Object.keys(e).map((function(e){return Object(v.b)(e)})).join(u.a.isJp()?"ã":", "),i=dlang("products","Ships worldwide, stocked in the {regions}").replace("{regions}",t),n=tag("span",{className:"fulfillmentLabelContainer",attr:{"data-toggle":"tooltip",tabindex:"0","aria-label":i,title:i}},[Object.keys(e).map((function(t){return tag("span",{className:"pf-badge pf-badge-location pf-mr-4 pf-mb-4",style:{"background-color":e[t].color},attr:{"aria-hidden":"true"}},Object(v.a)(e[t].title))}))]);return Object(r.b)()||$(n).tooltip({html:!0}),n},O.prototype._getProductReviewNode=function(e,t){var i=this,n=tag("span","",[tag("span","star-rating__stars star-rating__stars--inline pf-mr-0",t),tag("i",{className:"pf-i pf-i-18 pf-i-chevron-down pf-text-muted product-item__review-arrow",id:"review-arrow-".concat(this.product.productId)})]),r=tag("span",{className:"product-item__review no-outline",attr:{tabindex:0,"aria-label":lang("{rating} out of 5 stars").replace("{rating}",e.rating),"data-toggle":"tooltip","data-placement":"bottom","data-container":this.isModal?"":"body","data-html":"true","data-trigger":"focus"},innerHTML:n.outerHTML});return $(r).tooltip({html:!0,template:'\n                <div class="tooltip product-item__review-tooltip '.concat(this.isModal?"":"catalog",'">\n                     <div id="review-tooltip-arrow" class="tooltip-arrow"></div>\n                     <div id="review-tooltip-').concat(this.product.productId,'" class="pf-mx-8 tooltip-inner pf-ui-caption product-item__review-tooltip-content pf-border"></div>\n                </div>\n            ')}),document.addEventListener("click",this._resetReviewArrow),r.addEventListener("mousedown",(function(){i._resetReviewArrow(),r.classList.add("no-outline");var e=r.querySelector("#review-arrow-".concat(i.product.productId));if(document.querySelector("#review-tooltip-".concat(i.product.productId)))$(r).tooltip("hide");else{e.classList.add("product-item__review-arrow--open"),e.classList.remove("product-item__review-arrow--close"),$(r).tooltip("show");var t=document.querySelector("#review-tooltip-".concat(i.product.productId));if(t){var n=t.querySelectorAll(".pro-star-text"),a=Math.max.apply(Math,Object.values(n).map((function(e){return e.offsetWidth})));n.forEach((function(e){return e.style.minWidth="".concat(a,"px")}))}}})),r.addEventListener("focus",(function(){window.addEventListener("keyup",(function(e){"Tab"===e.key&&r.classList.remove("no-outline")}))})),r.addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault()})),this._getProductReviewOverview(r,e,t),tag("div","product-item__rating pf-ui-caption",[tag("div","product-item__rating-stars star-rating__stars star-rating__stars--inline pf-d-none",t),tag("span","review-tooltip pf-mr-8 collapsed",[r]),tag("span","pf-m-0 pf-mt-4 pf-d-inline-block",nlang("%d review","%d reviews",e.reviewCount))])},O.prototype._getProductReviewOverview=function(e,t,i){var n=new d.a(this.product),r=this.productUrl+"#reviews",a=tag("div","",[tag("div","star-rating__stars star-rating__stars--inline",[tag("div","pf-mt-16",[i,tag("span","pf-ml-8 pf-bold",dlang("products","{rating} out of 5").replace("{rating}",t.rating))]),tag("span","pf-m-0 pf-mt-4 pf-d-inline-block",nlang("%d review","%d reviews",t.reviewCount))]),h.a.getReviewOverview(n,null,!1,r),tag("div","pf-mb-4 pf-mt-8 text-center",[tag("a",{target:this.isModal||g.a.isGenerator()?"_blank":"_self",className:"pf-link",href:r},[dlang("products","See all reviews")])])]);e.setAttribute("data-original-title",a.outerHTML)},O.prototype._resetReviewArrow=function(){var e=document.querySelector(".product-item__review-arrow--open");e&&(e.classList.add("product-item__review-arrow--close"),e.classList.remove("product-item__review-arrow--open"))},O.prototype._getFavoritesNodeHoverTitle=function(){return this.product.isFavorite?dlang("products","Remove from favorites"):dlang("products","Add to favorites")},O.prototype._renderAverageDelivery=function(e){this._averageDeliveryNode&&l.a.clearNode(this._averageDeliveryNode);var t=this.product;if(!t.doesNotMatchSellingRegion&&!this.disableEdt)if(e.isSingleCountry()){if(t.estimateDelivery){var i,n,r,a=new S.a(u.a.locale);if(PF.Customer.isLogged()&&!PF.Customer.isB2cStarter())i=t.estimateDelivery.fromDays,n=t.estimateDelivery.toDays,r=dclang("products",'A range of days, E.g. "2-3"',"Average delivery in {daysFromTo} days");else{var o=I()(t.estimateDelivery.from),s=I()(t.estimateDelivery.to),c=a.shortMonthDay,d=a.format(t.estimateDelivery.from,t.estimateDelivery.to,!0);i=o.format(c),n=o.isSame(s)?s.format(c):s.format(d),r=dclang("products",'A range of dates, E.g. "Nov 19-Nov 23"',"Estimated delivery {datesFromTo}")}if(!r||!i||!n)return;var h=i===n?i:"".concat(i).concat(a.symbolRange).concat(n);r=r.replace("{daysFromTo}",h).replace("{datesFromTo}",h),tag("div","",[tag("img",{src:e.getIcon(),className:"pf-mr-4",style:{width:"24px",marginTop:"-4px"}}),r]).append(this._averageDeliveryNode)}}else{var p=(e.isNorthAmerica()||e.isEurope())&&e.isTypeSlow(),f=Object.keys(t.fulfillmentLocationsMap).map((function(e){return Number(e)})),g=e.isWorldwide()||p?f:_.intersection(f,e.getFulfilmentLocationIds()),m=_.filter(t.fulfillmentLocationsMap,(function(e,t){return g.includes(Number(t))})).map((function(e){return e.localizedName})).filter((function(e,t,i){return i.indexOf(e)===t})).sort(),v=m.length,y=dnlang("products","Fulfilled in {count} country","Fulfilled in {count} countries",v),b=dnlang("products","Fulfilled in {count} country worldwide","Fulfilled in {count} countries worldwide",v);e.isWorldwide()&&(y=b),e.isNorthAmerica()&&(y=e.isTypeSlow()?b:dnlang("products","Fulfilled in {count} country in North America","Fulfilled in {count} countries in North America",v)),e.isEurope()&&(y=e.isTypeSlow()?b:dnlang("products","Fulfilled in {count} country in Europe","Fulfilled in {count} countries in Europe",v));var P=dlang("products","Fulfilled In: {countryNameList}").replace("{countryNameList}",m.join("; "));if(v){var C=tag("p",{innerHTML:y.replace("{count}","<strong>"+v.toString()+"</strong>"),title:P,attr:{"data-toggle":"tooltip","data-placement":"top"}});$(C).tooltip(),C.append(this._averageDeliveryNode)}}},O.prototype._showMadeInUsBadge=function(){var e=this.sellingRegion||C.a.sellingRegion,t=this.product.isMadeInUSA();return e?e.isNorthAmerica()&&t:t},O.prototype._getFirstLevelBadge=function(){return this.product.hasClearance?tag("span","pf-badge pf-badge-rect pf-badge--primary pf-badge-position-card",dclang("products","badge","clearance")):this.product.isPopular?tag("span","pf-badge pf-badge-rect pf-badge--primary pf-badge-position-card",dclang("products","badge","bestseller")):this.product.hasBetaAccess?tag("span","pf-badge pf-badge-rect pf-badge--beta pf-badge-position-card",dclang("products","badge","beta")):this.product.isNew?tag("span","pf-badge pf-badge-rect pf-badge--new pf-badge-position-card",dclang("products","badge","new")):this.product.isSuggested?tag("span",{className:"pf-badge pf-badge-rect pf-badge--info pf-badge-position-card",style:"text-transform: none"},dclang("products","badge","Printful suggests")):""},window&&((globalThis||{}).PFComponentsProductListItem=O)},"dJr+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({storeId:null,allowStoreChange:!0,includeSwatches:!1,productId:null,technique:null,productType:null,showSearch:!0,showTabSelector:!0,search:"",fileGroup:"",perPage:24,onPickCallback:null,onPickMultipleCallback:null,uploadUrl:null,uploadCallbackUrl:"library/upload-callback",uploadDataUrl:"library/retrieve-upload-data",uploadButtonClasses:null,loadFileList:!0,withDropZone:!0,onDoneCallback:null,withInstructions:!0,activeTab:null,isModal:!1,hideSampleFiles:!1,sampleBannerImage:"",__construct:function(){var e=Math.round(5*Math.random())+1;this.sampleBannerImage="/static/images/library/quotes-design-services-"+e+"_image.png?v=2"}});(globalThis||{}).PFFileLibraryPar=n},dVbR:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return s})),i.d(t,"a",(function(){return l}));var n=i("y70k"),r=i("MSZa");i("gWUq");function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||0===t.id?parseInt(t.id):null,this.name=t.name||null,this.index=t.index||0===t.index?parseInt(t.index):null,this.image=t.image?n.a.fromArray(t.image):null,this.extra=t.extra?t.extra:{},this.height=t.height?parseInt(t.height):null,this.width=t.width?parseInt(t.width):null,this.type=t.type||null,this.previewHeight=t.previewHeight?parseInt(t.previewHeight):null,this.previewWidth=t.previewWidth?parseInt(t.previewWidth):null,this.previewPrintareaHeight=t.previewPrintareaHeight?parseInt(t.previewPrintareaHeight):null,this.previewPrintareaLeft=t.previewPrintareaLeft?parseInt(t.previewPrintareaLeft):null,this.previewPrintareaTop=t.previewPrintareaTop?parseInt(t.previewPrintareaTop):null,this.previewPrintareaWidth=t.previewPrintareaWidth?parseInt(t.previewPrintareaWidth):null,this.isActive=t.isActive||!1},s=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||0===t.id?parseInt(t.id):null,this.name=t.name||null,this.index=t.index||0===t.index?parseInt(t.index):null,this.image=t.image?n.a.fromArray(t.image):null,this.extra=t.extra?t.extra:{},this.designData=t.designData||[],this.groupId=t.groupId||t.groupId?parseInt(t.groupId):null,this.width=t.width?parseInt(t.width):null,this.height=t.height?parseInt(t.height):null},l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,e),this.id=t.id||null,this.mainImage=t.mainImage?new r.a(t.mainImage):null,this.rawDesign=t.rawDesign||t.design,this.templateId=t.templateId||null,this.groupId=t.groupId||null,this.updatedAt=t.updatedAt||null,this.height=t.height?parseInt(t.height):null,this.width=t.width?parseInt(t.width):null,this.height||this.width||!t.parent||(this.height=t.parent.height,this.width=t.parent.width)}},dqhU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_params:null,value:"",_nodeInput:null,_nodeInputManually:null,__construct:function(e){this._params=e,this.node=tag("div",this._params.className+" "+(this._params.isVisible?"":"hidden")),this.value=this._getFormattedValue(e.value),this.render()},render:function(){n.a.clearNode(this.node),this._nodeInputManually=this._params.hasNumberInput?tag("input",{type:"text",className:"text-center pf-px-4 col-3",value:this.value,data:{prevent:"Delete, Backspace, ArrowLeft, ArrowRight, ArrowUp, ArrowDown"},prop:{onkeypress:this._cleanupInput.bind(this),onchange:this._onValueChangedManually.bind(this,!0),onblur:this._onValueChangedManually.bind(this,!0),onkeyup:this._onValueChangedManually.bind(this,!1)}}):"",tag("div","pf-bold pf-mb-8",[this._params.title,this._params.showNewBadge?tag("span","pf-badge pf-badge-small pf-badge-new pf-badge--primary pf-ml-8",clang("Badge","New")):""]).append(this.node),tag("div","input-group input-group__range",[this._nodeInput=tag("input",{type:"range",className:this._params.hasNumberInput?"pf-px-4 col-9 pf-p-0 pf-pr-12":"pf-px-4",value:this.value,data:{prevent:"Delete, Backspace, ArrowLeft, ArrowRight, ArrowUp, ArrowDown"},prop:{min:this._params.minValue,max:this._params.maxValue,step:this._params.incrementStep,onchange:this._onValueChanged.bind(this),oninput:this._onSlide.bind(this)}}),this._nodeInputManually]).append(this.node)},show:function(){n.a.removeClassName(this.node,"hidden")},hide:function(){n.a.addClassName(this.node,"hidden")},setValue:function(e){this.value=this._validateValue(e),this._nodeInput.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value)},setMinValue:function(e){this._params.minValue!==e&&(this._params.minValue=e,this._nodeInput.min=e)},_getFormattedValue:function(e){return parseFloat(e).toFixed(this._params.fractionDigits).toString()},_cleanupInput:function(e){var t=e.key,i=null;isNaN(t)&&-1===[".",",","-","+","Backspace","Delete"].indexOf(t)&&(i=e.target.value),null!==i&&(e.target.value=i,e.preventDefault())},_onSlide:function(e){this.value=this._validateValue(e.target.value),e.target.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value),this._params.onSlide(this.value,this)},_onValueChanged:function(e){this.value=this._validateValue(e.target.value),e.target.value=this.value,this._params.hasNumberInput&&(this._nodeInputManually.value=this.value),this._afterValueChanged()},_onValueChangedManually:function(e,t){this._adjustInputValue(t,this._params.incrementStep)||(this.value=this._validateValue(t.target.value),this._nodeInput.value=this.value,e&&(this._nodeInputManually.value=this.value),this._afterValueChanged())},_adjustInputValue:function(e,t){var i=null;return"ArrowUp"===e.key?i=t:"ArrowDown"===e.key&&(i=-t),null!==i&&(this._onIncrement(i),e.target.value=parseFloat(parseFloat(e.target.value)+i).toFixed(this._params.fractionDigits),this._nodeInput.focus(),!0)},_onIncrement:function(e,t){t&&t.stopPropagation(),e*=this._params.incrementStep,this.value=this._validateValue(parseFloat(this.value)+e),this._afterValueChanged()},_validateValue:function(e){if(e=parseFloat(e),isNaN(e)&&(e=this._params.defaultValue),null!==this._params.minValue&&e<this._params.minValue||null!==this._params.maxValue&&e>this._params.maxValue){if((null==this._params.minValue||this.value>=this._params.minValue)&&(null==this._params.maxValue||this.value<=this._params.maxValue))return this.value;e=this._params.defaultValue}return e.toFixed(this._params.fractionDigits)},_afterValueChanged:function(){this._params.onValueChanged(this.value,this)}},n.a.Base);window&&((globalThis||{}).PFFormsRange=r)},dxVt:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("KLvT"),r=i("B8kU");function a(){return Object(n.a)().getters[r.c(r.i)]}function o(){return Object(n.a)().getters[r.c(r.g)]}},dzpP:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({title:"",value:"",className:"col-sm-6 pf-mb-8",isVisible:!0,onValueChanged:null,minValue:null,maxValue:null,incrementStep:1,defaultValue:0,fractionDigits:2});window&&((globalThis||{}).PFFormsNumberPar=n)},e7dE:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"d",(function(){return r})),i.d(t,"l",(function(){return a})),i.d(t,"j",(function(){return o})),i.d(t,"i",(function(){return s})),i.d(t,"h",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"m",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"f",(function(){return h})),i.d(t,"e",(function(){return p})),i.d(t,"c",(function(){return f})),i.d(t,"b",(function(){return g}));var n="push/media",r="m_resetState",a="m_updateState",o="m_updateSelectedOptionGroup",s="m_updateSelectedMainMockupVariant",l="m_updateSelectedFilterAttribute",c="m_updateSelectedAdditionalMockups",u="m_updateTransparency",d="m_updateSelectedVideoIds",h="m_updateExcludedPlacement",p="m_updateAdditionalBlockOpen",f="g_mediaData";function g(e){return n+"/"+e}},eYhR:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function e(){this.uniqueId=++e.counter};n.prototype.uniqueId=0,n.prototype.customId=null,n.prototype.icon="",n.prototype.badge="",n.prototype.caption="",n.prototype.subtitle="",n.prototype.onclick=null,n.prototype.href="javascript:",n.prototype.isActive=!1,n.prototype.isDisabled=!1,n.counter=0,n.prototype.tooltipTitle=null,n.prototype.tooltipAutoShowDuration=null,n.prototype.dataTestTag="",window&&((globalThis||{}).PFComponentsTabsItem=n)},edgZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("7QI8"),r=i("1yDH"),a=i("y70k"),o=i("9eNC"),s=i("Sucz"),l=function e(){this.fileCache=e.fileCache,this.tagCache=e.tagCache};l.EVENT_FILE_DELETED="libraryFileDeleted",l.prototype.tagCache=null,l.prototype.fileCache=null,l.prototype.getTags=function(e){null===this.tagCache?Object(s.a)("library/get-file-tags",{},$.proxy(this._getTagsRe,this,e)):e(this.tagCache)},l.prototype._getTagsRe=function(e,t){for(var i in l.tagCache={},this.tagCache=l.tagCache,t.tags)this.tagCache[i]=t.tags[i];e(this.tagCache)},l.prototype.deleteFile=function(e,t){Object(s.a)("library/delete",{fileId:e.fileId},(function(){o.o(l.EVENT_FILE_DELETED,e),t&&t()})),delete this.fileCache[e]},l.prototype.renameFile=function(e,t,i){Object(s.a)("library/rename",{fileId:e.fileId,fileName:t},$.proxy(this.renameFileRe,this,i))},l.prototype.renameFileRe=function(e,t){var i=a.a.fromArray(t.file);this.cacheFile(i),e&&e(i)},l.prototype.moveFiles=function(e,t,i){Object(s.a)("library/move",{fileIds:e,storeId:t},$.proxy(this._moveFilesRe,this,i))},l.prototype._moveFilesRe=function(e,t){"function"==typeof e&&e(t.files)},l.prototype.getFiles=function(e,t){Object(s.a)("library/get",{storeId:e.storeId,page:e.page,search:e.search,fileIds:e.fileIds,perPage:e.perPage,productId:e.productId},this._getFilesRe.bind(this,t))},l.prototype.getSampleFiles=function(e,t){Object(s.a)("library/get-samples",{page:e.page,fileIds:e.fileIds,perPage:e.perPage,includeSwatches:e.includeSwatches?1:0,productId:e.productId,technique:e.technique},this._getFilesRe.bind(this,t))},l.prototype._getFilesRe=function(e,t){var i=t.files,n=new r.a;for(var o in n.page=i.page,n.pages=i.pages,n.total=i.total,i.items){var s=a.a.fromArray(i.items[o]);n.items.push(s),this.cacheFile(s)}e(n)},l.prototype.getByIds=function(e,t,i){if(!i){var n=[];for(var r in e){var a=this.fileCache[e[r]];if(!a)break;n.push(a)}if(n.length===e.length)return void t(n)}Object(s.a)("library/get-by-ids",{fileIds:e},this._getByIdsRe.bind(this,t))},l.prototype._getByIdsRe=function(e,t){var i=[];for(var n in t.files){var r=a.a.fromArray(t.files[n]);i.push(r),this.cacheFile(r)}e(i)},l.prototype.cacheFile=function(e){this.fileCache[e.fileId]=e},l.prototype.hasCachedFile=function(e){return!!this.fileCache[e]},l.prototype.getCachedFile=function(e){var t=this.fileCache[e];return t||console.error("FileItem as not found in cache: "+e),t||new a.a},l.prototype.createFromGoogleDrive=function(e,t,i,n,r,a,o,l){Object(s.a)("library/google-drive-upload",{googleFileId:a,oAuthToken:o,group:e,storeId:i,directoryId:n,filename:r,tags:t},this._fileCreated.bind(this,l))},l.prototype._fileCreated=function(e,t){e(a.a.fromArray(t.file))},l.prototype.createFromUrl=function(e,t,i,n,r,a,o){Object(s.a)("library/url-upload",{group:e,storeId:i,directoryId:n,filename:r,tags:t,url:a},$.proxy(this._fileCreated,this,o))},l.prototype.confirmCopyrights=function(e){Object(s.a)("library/confirm-copyrights",{},e)},l.prototype.confirmEmbroidery=function(e){Object(s.a)("embroidery/confirm",{},e)},l.prototype.confirmInsideLabel=function(e){Object(s.a)("library/confirm-inside-label",{},e)},l.prototype.validateItemFiles=function(e,t,i){var n=[];for(var r in t)n.push(t[r].toArray());Object(s.a)("library/validate-item-files",{variantId:e,itemFiles:n},$.proxy(this._validateFilesRe,this,t,i))},l.prototype._validateFilesRe=function(e,t,i){var r=[],a={};for(var o in e)a[e[o].type]=e[o].price;for(var o in i.itemFiles){var s=n.a.fromArray(i.itemFiles[o]);a[s.type]&&(s.price=a[s.type]),r.push(s)}t(r)},l.tagCache=null,l.fileCache={},l._instance=null,l.getInstance=function(){return l._instance||(l._instance=new l),l._instance},l.SearchPar=function(){},l.SearchPar.prototype.storeId=null,l.SearchPar.prototype.page=null,l.SearchPar.prototype.perPage=null,l.SearchPar.prototype.fileIds=null,l.SearchPar.prototype.includeSwatches=null,l.SearchPar.prototype.onlySampleFiles=null,l.SearchPar.prototype.search="",(globalThis||{}).PFRepositoriesLibraryRepository=l},"fM+x":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Object.freeze({HAS_CUSTOM_MOCKUP_ACCESS:"HAS_CUSTOM_MOCKUP_ACCESS",IS_IN_MODAL:"IS_IN_MODAL",HAS_DOWNLOAD_RESTRICTIONS:"HAS_DOWNLOAD_RESTRICTIONS"})},fQ40:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({page:1,pages:1,callback:null,scrollNode:null,scrollOffset:0,className:""});window&&((globalThis||{}).PFComponentsPagingPar=n)},fhxg:function(e,t,i){"use strict";i.d(t,"b",(function(){return h})),i.d(t,"a",(function(){return p}));var n=i("y70k");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var r=c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var d=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.id=parseInt(t.id),this.name=t.name,this.index=parseInt(t.index),this.extra=t.extra?t.extra:{},this.isActive=t.isActive},h=function(e){a(i,e);var t=s(i);function i(){var e,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,i),(a=t.call(this,o)).groupId=parseInt(o.groupId),a.image=o.image?n.a.fromArray(o.image):null,a.width=(null===(e=a.image)||void 0===e?void 0:e.width)||1e3,a.height=(null===(r=a.image)||void 0===r?void 0:r.height)||1e3,a}return i}(d),p=function(e){a(i,e);var t=s(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return u(this,i),(e=t.call(this,n)).items=n.items?n.items.map((function(e){return new h(e)})):[],e}return i}(d)},g357:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("6t3j"),r=i("Op/+"),a=i("5OoY"),o=i("n5ho"),s=i("cCrT"),l=i("YBfo"),c=i("JIEg"),u=i("R7ut"),d=i("sjGI"),h=Class({prefix:"",category:null,products:[],totalProductCount:null,variantIds:[],activeProductId:null,activeVariantId:null,filter:null,skipHistory:!1,openedFirstTime:!1,productSearchKeywords:null,activeTab:"",customMainHeader:"",documentTitle:"",action:l.a.EVENT_NAME,catalogType:"",productsViewPage:1,productColor:null,productSize:null,isOnPopstate:!1,scrollToTop:!1,geoElementId:"",__construct:function(){this.catalogType=l.b.catalogType||l.a.TYPE_PP},getCategoryId:function(){return this.category?this.category.id:0},getObject:function(){return{action:this.action,activeProductId:this.activeProductId,category:this.category?JSON.stringify(this.category):null,products:this.products?JSON.stringify(this.products):null,activeTab:this.activeTab,filter:this.filter?JSON.stringify(this.filter):null}},getTitle:function(){if(this.customMainHeader)return this.customMainHeader;if(!this.category||!this.category.id)return l.a.PAGE_TITLES[this.catalogType];if(this.category.seo[this.catalogType]){var e=this.category.seo[this.catalogType],t=Object.values(e).pop();if(t&&t.mainHeading)return t.mainHeading}return this.category.settings&&this.category.settings.thumbnailTitle?this.category.settings.thumbnailTitle:this.category.title},getSubtitle:function(){return this.category&&this.category.id?"":l.a.PAGE_SUBTITLES[this.catalogType]?l.a.PAGE_SUBTITLES[this.catalogType]:""},getDocumentTitle:function(){var e=l.a.TITLES[this.catalogType];if(this.documentTitle)return this.documentTitle;if(this.activeProductId){e=this.catalogType===l.a.TYPE_PP?" | Printful":" | "+e;var t=this.getActiveProduct().getFullTitle();return this.getActiveProduct().customTitle&&(t=this.getActiveProduct().customTitle),t+e}if(!this.category||!this.category.id)return l.a.BASE_TITLES[this.catalogType]||e;if(this.category.seo[this.catalogType]){var i=this.category.seo[this.catalogType],n=Object.values(i).pop();if(n&&n.pageTitle)return n.pageTitle}return e},getUrl:function(){var e,t,i=new s.a;if(i.path=this.prefix+"/",i.query.clear(),!this.category)return i.toString();if(i.path+=this.category.slug,i.hash=this.activeTab?this.activeTab:"",this.activeProductId)return i.path+="/"+this.getActiveProduct().slug,this.productColor&&(i.query.color=this.productColor),this.productTechnique&&(i.query.technique=this.productTechnique),this.productSize&&(i.query.size=this.productSize),this.activeVariantId&&(i.query.variant=this.activeVariantId),i.toString();if(0===this.category.id&&this.prefix===(null===(e=l.a.PRODUCT_CATALOG_INDEX_SLUG_CHANGES)||void 0===e||null===(t=e[d.a.locale])||void 0===t?void 0:t.old)&&(i.path=l.a.PRODUCT_CATALOG_INDEX_SLUG_CHANGES[d.a.locale].new),!this._hasUrlParams())return i.hash="",i.path=i.path.replace(/\/$/,""),i.toString();for(var n in this.filter){var r=this.filter[n].join("!");r&&(i.query[n]=r)}return this.productSearchKeywords&&(i.query.search=this.productSearchKeywords),this.productsViewPage>1&&(i.query.page=this.productsViewPage),i.toString()},getProducts:function(){var e=new n.a,t=this.products?this.products.map(e.getCachedProductById.bind(e)):[],i=this.variantIds?this.variantIds.map(e.getCachedVariantById.bind(e)):[];return[].concat.apply(i,t.map((function(t){return-1===u.a.getConfig().expandTypes.indexOf(t.type)?t:e.getCachedVariantsByProductId(t.productId)})))},getActiveProduct:function(){return this.activeProductId?(new n.a).getCachedProductById(this.activeProductId):null},pushToHistory:function(){if(this.getDocumentTitle()&&(document.title=this.getDocumentTitle()),this._shouldPushToHistory()){var e=this.getObject(),t=this.getTitle(),i=this.getUrl();this.openedFirstTime||a.a.isVariantChanged&&!c.a.isClicked?(a.a.isVariantChanged&&(e.action=l.a.EVENT_PRODUCT_CHOOSE),window.history.replaceState(e,t,i)):window.history.pushState(e,t,i)}a.a.isVariantChanged=!1,c.a.isClicked=!1},_shouldPushToHistory:function(){var e=[l.a.EVENT_PRODUCTS_LOADED,l.a.EVENT_TOGGLE_LOCK];return!this.skipHistory&&!this.geoElementId&&-1===e.indexOf(this.action)},_hasUrlParams:function(){return this._hasFilter()||this.productSearchKeywords||this.activeTab||this.productsViewPage>1},_hasFilter:function(){return this.filter||!$.isEmptyObject(this.filter)}});h.createFromObject=function(e,t){var i=new h;if(!e)return i;for(var n in e)i[n]=e[n];var a=e.category?JSON.parse(e.category):null;return i.products=e.products?JSON.parse(e.products):[],i.category=a?(new r.a).categories.getById(a.id):null,i.filter=e.filter?JSON.parse(e.filter):{},i.isOnPopstate=void 0!==t&&t,i},h.clone=function(e,t){!e instanceof h&&(e=h.createFromObject(e));var i=new h;for(var n in e)if("function"!=typeof e[n]){var r=e[n];r&&!$.isEmptyObject(r)||!t[n]||(r=t[n]),i[n]=r}return i},h.createAndDispatch=function(e,t){var i=new h;for(var n in i.action=e,t)"productsOrVariants"!==n&&(i[n]=t[n]);if(t.productsOrVariants)for(var r in i.totalProductCount=t.totalCount||null,t.productsOrVariants){var a=t.productsOrVariants[r];a instanceof o.a?i.variantIds.push(a.variantId):i.products.push(a.productId)}var s=document.createEvent("CustomEvent");s.initCustomEvent(e,!1,!0,i),document.dispatchEvent(s)},l.c.createAndDispatchEvent=h.createAndDispatch,window&&((globalThis||{}).PFProductsCatalogUtilsState=h)},gQ2J:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("r4HB"),r=i("boP+");function a(e){return e.areLayersOverlapping({allowedExceptions:[{layerProperty:"engravingStyle",layerPropertyValues:[n.a.ENGRAVING_FILLED]},{layerProperty:"engravingStyle",layerPropertyValues:[n.a.ENGRAVING_OUTLINE]}]})}function o(e){var t;Object(r.a)().isJewelry()&&function(e){if(e.isTextLayer())e.engravingStyle=e.engravingStyle?n.a.ENGRAVING_OUTLINE:n.a.ENGRAVING_FILLED;else if(e.isClipartLayer()){var t;e.engravingStyle=null!==(t=e.clipartItem.extra)&&void 0!==t&&t.engravingStyle?n.a.ENGRAVING_OUTLINE:n.a.ENGRAVING_FILLED,e.fillColor=e.getDefaultColor()}}(e),!e.fillColor&&null!==(t=e.clipartItem)&&void 0!==t&&t.customizable&&(e.fillColor=e.getDefaultColor())}},gWUq:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("bRD6"),r=i("tw/D"),a=i("y70k"),o=i("6JZw"),s=i("nF4n"),l=Class({designId:null,isCustomizable:!1,templates:[],placementOptions:null,placementSvgItems:{},toArrayKeys:["designId","isCustomizable","templates"],isValid:function(){return this.templates.length&&this.templates.filter((function(e){return e.hasLayers()})).length>0},getSvg:function(e){var t=l.svgCache;return this.designId&&t.hasOwnProperty(this.designId)&&t[this.designId].hasOwnProperty(e)?t[this.designId][e]:""},forgetSvgItems:function(e){var t=l.svgCache;return this.designId&&!e&&t.hasOwnProperty(this.designId)&&(t[this.designId]={}),t.hasOwnProperty(this.designId)&&t[this.designId].hasOwnProperty(e)&&(t[this.designId][e]={}),this},hasAnyLayerWithEmbroideryType:function(){return this.templates.some((function(e){return e.layers.some((function(e){return!!e.embroideryType}))}))},getTemplate:function(e){return this.templates.filter((function(t){return t.placementId===e}))},getTemplateTypes:function(){var e=[];return(this.templates||[]).forEach((function(t){-1===e.indexOf(t.placementId)&&e.push(t.placementId)})),e},getFileId:function(e){var t=this.getTemplate(e).shift();return t?t.getFileId():a.a.ID_TEMP_GENERATOR_FILE},hasPlacement:function(e){return this.getTemplate(e).length>0},hasTextLayersOnly:function(){for(var e in this.templates){var t=this.templates[e];if(0===t.layers.length)return!1;for(var i in t.layers)if(!t.layers[i].isTextLayer())return!1}return!0}},o.a);l.fromArray=function(e){var t=new l;for(var i in t.designId=e.designId,t.isCustomizable=e.isCustomizable,e.placements)for(var a in e.placements[i])t.templates.push(n.a.fromArray(e.placements[i][a]));return t.placementOptions=r.a.fromArray(e.placementOptions),t},l.duplicateFrom=function(e){var t=new l;return s.a.O2O(t,e),t},l.fromDesignData=function(e,t){var i=new l;for(var a in i.designId=t||e.generatorDesignId,e.templates){var o=new n.a;s.a.O2O(o,e.templates[a]),i.templates.push(o)}return i.placementOptions=r.a.fromArray(e.rawPlacementOptions),i},l.svgCache={},l.rememberSvg=function(e,t,i){var n=l.svgCache;e&&(n.hasOwnProperty(e)||(n[e]={}),n[e][t]=i)},window&&((globalThis||{}).PFItemsGeneratorDesign=l)},gY30:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("md/F"),r=i("6t3j"),a=i("xeH2"),o=i.n(a),s=i("X5Ic"),l=i("nF4n"),c=i("97Au"),u=Class({_product:null,_isVisible:!1,__construct:function(e,t){this._product=(new r.a).getCachedProductById(e),this._isVisible=t},getButton:function(){return this.canHaveSizeGuide()?Object(l.a)({tag:"a",className:"pull-right margin-right-5 margin-left-30 pf-link",text:dlang("products","See size guide"),onclick:this.show}):""},canHaveSizeGuide:function(){return this._isVisible&&this._product.canHaveSizeGuide},show:function(e){var t=new c.a.Par;t.title=lang("Size guide"),t.modalDialogClass="modal-lg",t.onClose=this.hide.bind(this),t.url=s.a.getSizeChartUrl(this._product.productId),this.sizeGuideModal=new c.a(t),o()(e.target).css("pointer-events","none"),this.sizeGuideModal.show(),o()(this.sizeGuideModal._node).on("hidden.bs.modal",(function(){o()(e.target).css("pointer-events","all")}))},hide:function(){this.sizeGuideModal&&(this.sizeGuideModal.remove(),this.sizeGuideModal=null)}},l.a.Base);window&&((globalThis||{}).PFProductPushSizeGuide=u);var d=i("jI2M"),h=i("1Juc"),p=i("ehgC"),f=i("7pSD"),g=i("2+PC");function m(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return _(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var v=Class({_params:null,callback:null,sizes:[],_translatedSizes:[],_unavailableSizes:[],_unavailableSampleSizes:[],_inactiveSizes:[],selectedSizes:[],node:null,nodeCheckboxes:null,buttonPicker:null,_nodeCheckboxCheckAll:null,nodeError:null,_sizeGuide:null,__construct:function(e,t){this._params=e,this._additionalPar=t||{},this.callback=e.onChangedCallback,this.designData=e.designData,this.selectedSizes=e.selectedValues.length>0?e.selectedValues.slice():[],this._sizeGuide=new u(e.productId,this._params.isSizeGuideVisible);var i=this._canHaveMultipleSizes();this.sizes=i?e.values.slice().sort(n.a.sizeSortingCallback):e.allValues.slice().sort(n.a.sizeSortingCallback),this._translatedSizes=e.translatedSizes||{};var r=lang("Select size(s):");this.designData.product.isPhoneCase()&&(r=lang("Select model(s):")),i||(this.selectedSizes=e.selectedValues.length?[e.selectedValues[0]]:[],r=lang("Select size:"),this.designData.product.isPhoneCase()&&(r=lang("Select model:"))),this.node=tag("div","generator-size-picker");var a="";if(this.sizes.length>3&&i){var o=Object(l.a)({tag:"input",type:"checkbox",prop:{checked:this.sizes.length===this.selectedSizes.length}});o.onchange=this._onToggleAll.bind(this,o),a={tag:"label",className:"margin-bottom-5",style:{fontWeight:"normal"},els:[o,{tag:"span",className:"margin-left-10",text:lang("Select all sizes")}]},this._nodeCheckboxCheckAll=o}this.nodeSelector=tag("div"),this.sizeNodeTitle=tag("div"),this._params.isSizeNodeTitleVisible&&(this.sizeNodeTitle=tag("div",{className:"margin-vertical-10",style:{lineHeight:"20px"}},[tag("h6","pf-d-inline",r),this._sizeGuide.getButton()])),tag("div","",[this.sizeNodeTitle,this.sizeCheckboxSelector=tag("div","",[a,this.nodeSelector,this.nodeError=tag("div","alert alert-danger text-center hidden padding-10",lang("Please select at least one size!"))])]).append(this.node),this._render()},_render:function(){if(l.a.clearNode(this.nodeSelector),!this._canHaveMultipleSizes())return this._shouldRenderOneSizeText()?void this._renderOneSizeText():void this._renderButtonPicker();var e,t=m(this.sizes);try{for(t.s();!(e=t.n()).done;){var i=e.value,n=this._getTranslatedSize(i),r=this.isSizeDisabled(i),a=Object(l.a)({tag:"input",type:"checkbox",className:"margin-right-5",prop:{disabled:r,checked:this.selectedSizes.includes(i),name:"size",value:i},style:{verticalAlign:"text-top"}});a.onchange=this._onSizeChanged.bind(this,i,a),Object(l.a)({tag:"label",className:["one-size",r?"disabled":""].join(" "),els:[a,{tag:"span",text:n}]}).append(this.nodeSelector)}}catch(e){t.e(e)}finally{t.f()}},_renderButtonPicker:function(){var e=this;l.a.addClassName(this.nodeSelector,"button-picker");var t=this.selectedSizes.length>0?this.selectedSizes[0]:null,i=new d.a;i.values=this.sizes.map((function(t){return{value:t,title:e._getTranslatedSize(t)}})),i.onChanged=this._onSizeChanged,i.activeValue=t,i.valuesDisabled=this._unavailableSizes,i.valuesHidden=this._hiddenSizes||[],i.sampleValuesDisabled=this._unavailableSampleSizes,i.valuesInactive=this._params.disabledSizes.concat(this._inactiveSizes||[]),this.buttonPicker=new h.a(i),this.buttonPicker._nodeItems.append(this.nodeSelector)},_renderOneSizeText:function(){tag("div","pf-mt-16",dlang("products","One size fits all")).append(this.nodeSelector)},_shouldRenderOneSizeText:function(){var e,t,i=this.designData.product,n=(null===(e=this._params)||void 0===e?void 0:e.values)||[],r=!n.length&&(null==i?void 0:i.isEmbroidery())&&!i.isEmbroiderySample(),a=1===n.length&&"one size"===(null===(t=n[0])||void 0===t?void 0:t.toLowerCase());return r||a},_onSizeChanged:function(e,t){if(this._canHaveMultipleSizes()){var i=this.selectedSizes.indexOf(e);i>-1&&this.selectedSizes.splice(i,1)}else this.selectedSizes=[],this.designData.title=this.designData.product.title+" - "+e;this.isSizeDisabled(e)?null!=t&&t.checked&&(t.checked=!1):((!t||null!=t&&t.checked)&&(this.selectedSizes.push(e),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check one size",eventLabel:e})),this._nodeCheckboxCheckAll&&(this._nodeCheckboxCheckAll.checked=this.selectedSizes.length===this.sizes.length),this.updateErrorStatus(),this.callback(this.selectedSizes.slice()))},_onToggleAll:function(e){var t=this;this.selectedSizes=[],e.checked&&(this.selectedSizes=this.sizes.filter((function(e){return!t.isSizeDisabled(e)})),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check all sizes"})),this._render(),this.callback(this.selectedSizes.slice())},_canHaveMultipleSizes:function(){var e=this.designData.store,t=this.designData.product;return 1!==this._params.selectedLimit&&(e.type!==p.a.TYPE_AMAZON||t.type!==s.a.TYPE_PHONE_CASE)},validateSelectedSize:function(e,t,i,n,r){if(!this._params.isPopoverEnabled)return!0;t&&this.setSelectedRegionDisabledValues(i,n,"size",e);var a="",o="",s=!0,l=this.getAvailableAttributeRegion(t,"size");return this._isSizeUnavailable(t)||this._isSizeInactive(t)&&!l?(a=g.a.POPOVER.UNAVAILABLE.TITLE,o=g.a.POPOVER.UNAVAILABLE.DESC,this._params.designData.product.colors.length||(o=g.a.POPOVER.UNAVAILABLE.DESC_SIZE_ONLY),s=!1):this.isSizeDiscontinued(t)?(a=g.a.POPOVER.DISCONTINUED.TITLE,o=g.a.POPOVER.DISCONTINUED.DESC,this._params.designData.product.colors.length||(o=g.a.POPOVER.DISCONTINUED.DESC_SIZE_ONLY),s=!1):this._isSizeSampleDisabled(t)?(a=g.a.POPOVER.SAMPLE.TITLE,o=g.a.POPOVER.SAMPLE.DESC,s=!1):this._isSizeInactive(t)&&(a=g.a.POPOVER.REGION.TITLE.replace("{region}",l),o=g.a.POPOVER.REGION.DESC,e.allowedSellingRegions&&(a=g.a.POPOVER.DSR_LIMITED.DESC_SIZE.replace("{linkStart}","").replace("{linkEnd}",""),o=""),s=!1),this.buttonPicker&&(a||o)&&this.buttonPicker.togglePopover(t,a,o),s&&this.buttonPicker.setActiveValue(t),s},_getCurrentlySettableSizes:function(){var e=(this.sizes||[]).slice();if(!e||!e.length)return e;var t=this.buttonPicker?this.buttonPicker.getUnavailableItems()||[]:this._unavailableSizes||[],i=[];return e.forEach((function(e){t.indexOf(e)>-1||i.push(e)})),i},_isSizeUnavailable:function(e){return!!this.buttonPicker&&this.buttonPicker.getUnavailableItems().includes(e)},getValueCount:function(){return this.sizes.length},isSelectAllChecked:function(){return this._nodeCheckboxCheckAll&&this._nodeCheckboxCheckAll.checked},isValuePicked:function(){return this.hasNoSizes()||this.selectedSizes.length||this._additionalPar.allowNoSelectedSizes},hasNoSizes:function(){var e,t;return!(null!==(e=this._params)&&void 0!==e&&null!==(t=e.values)&&void 0!==t&&t.length)},hasAtLeastOneValue:function(){return!!this.getValueCount()},setSizes:function(e){return this.selectedSizes=e.slice(),this},setUnavailableSizes:function(e){return this.buttonPicker&&this.buttonPicker.setUnavailableItems(e),this._unavailableSizes=e,this},setHiddenSizes:function(e){return this.buttonPicker&&this.buttonPicker.setHiddenItems(e),this._hiddenSizes=e,this},setInactiveSizes:function(e){return this.buttonPicker&&this.buttonPicker.setInactiveItems(e),this._inactiveSizes=e,this},setUnavailableSampleSizes:function(e){return this.buttonPicker&&this.buttonPicker.setDisabledSampleSizes(e),this._unavailableSampleSizes=e,this},render:function(){return this._render(),this},_isSizeInactive:function(e){return!!this.buttonPicker&&this.buttonPicker.getInactiveItems().includes(e)},isSizeDisabled:function(e){return this._params.disabledSizes.includes(e)},isSizeDiscontinued:function(e){return!!this.buttonPicker&&this.buttonPicker.getHiddenItems().includes(e)},_isSizeSampleDisabled:function(e){return!!this.buttonPicker&&this.buttonPicker.getDisabledSampleSizes().includes(e)},_getTranslatedSize:function(e){var t;return null!==(t=this._translatedSizes[e])&&void 0!==t?t:e}},f.a);window&&((globalThis||{}).PFProductPushSizePicker=v)},gYZI:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var n=i("+I3z"),r=i("E17x"),a=i("nF4n"),o=i("2+Fj"),s=Class({_option:null,_inputNamePrefix:"",onChange:null,hasError:!1,_expandable:!1,_errorMessage:clang("alternative","Please choose options!"),__construct:function(e,t){this._option=e,this._inputNamePrefix=t,this.node=Object(a.a)({tag:"div",className:"margin-bottom-10"}),this._render()},_render:function(){a.a.clearNode(this.node),Object(a.b)("label","picker-option-label "+this._option.name===o.a.OPTION_STITCH_COLOR?"pf-sm-pt-0":"",[{tag:this._option.name===o.a.OPTION_STITCH_COLOR?"h6":"span",text:this._option.title+(this._option.maxCount?" (max "+this._option.maxCount+")":"")+(this._option.name===o.a.OPTION_STITCH_COLOR?":":"")},this._getTooltipNode()]).append(this.node),this._getNode().append(this.node)},_getTooltipNode:function(){if(this._option.labelTooltipText){var e=Object(a.a)({tag:"span",className:"glyphicon glyphicon-info-sign option-label-sign",attr:{title:this._option.labelTooltipText}});$(e).tooltip({html:!0,delay:{hide:450},container:"body"})}else e=Object(a.a)({});return e},_getNode:function(){throw"_getNode() not implemented for "+this._option.type},getValue:function(){throw"getValue() not implemented for "+this._option.type},validate:function(){return!0},getName:function(){return this._option.name},_onChange:function(){this.onChange&&this.onChange(this)},_addError:function _addError(e){this.hasError||(this.hasError=!0,this._errorNode=Object(a.a)({tag:"div",className:"alert alert-warning margin-vertical-10 padding-10",style:{fontSize:"14px"},els:[{tag:"a",className:"close",text:"Ã",onclick:this.clearError,style:{color:"#8a6d3b",opacity:.8}},{tag:"span",text:e}]}).append(this.node))},getErrorMessage:function(){return this._errorMessage},clearError:function clearError(){this.hasError=!1,this._errorNode&&(this._errorNode.remove(),this._errorNode=null)},isExpandable:function(){return this._expandable},getOption:function(){return this._option}},a.a.Base);window&&((globalThis||{}).PFComponentsProductOptionsBaseOption=s);var l=i("21+U"),c=i("q+2S"),u=Class({_previousValue:"",_expandable:!0,_errorMessage:lang("Please add notes"),_getNode:function(){var e=new l.a;return e.autoHeight=!0,e.placeholder=this._option.placeholder,e.value=this._option.defaultValue||"",e.onchange=this._onChange,e.prop={},Object(r.b)()&&(e.prop.style={fontSize:"16px"}),this._input=new c.a(e),this._input},_render:function(){a.a.clearNode(this.node);var e=this._getNode();this._nodeToggle=Object(a.a)({tag:"a",className:"pf-link",style:{marginLeft:"20px",fontWeight:"normal"}}),this._input.getValue()?this._showField():this._hideField(),Object(a.a)({tag:"label",els:[this._option.title," ",this._nodeToggle]}).append(this.node),e.append(this.node)},_showField:function(){!this.getValue()&&this._previousValue&&(this._input.setValue(this._previousValue),this._onChange()),this._input.show(),this._nodeToggle.textContent=lang("Remove"),this._nodeToggle.onclick=this._hideField},_hideField:function(){this._previousValue=this._input.getValue(),this._input.setValue(""),this._previousValue&&this._onChange(),this._input.hide(),this._nodeToggle.textContent=lang("Add"),this._nodeToggle.onclick=this._showField},expand:function(){a.a.addClassName(this._nodeToggle,"hidden"),this._showField()},collapse:function(){a.a.removeClassName(this._nodeToggle,"hidden"),this._hideField()},validate:function(){return!this._option.required||""!==this.getValue()},getValue:function(){return this._input.getValue()}},s);window&&((globalThis||{}).PFComponentsProductOptionsTextOption=u);var d=i("taz2"),h=i("Oc5s"),p=Class({_getNode:function(){var e=new h.a;return e.placeholder=this._option.placeholder,e.value=this._option.defaultValue||"",e.onchange=this._onChange,this._input=new d.a(e),this._input},getValue:function(){return this._input.getValue()}},s);window&&((globalThis||{}).PFComponentsProductOptionsSingleLineTextOption=p);var f=Class({_inputs:[],_getNode:function(){var e=this,t=Object(a.b)("div",this._option.name===o.a.OPTION_STITCH_COLOR?"col-12 row row-flex pf-px-0 pf-mx-0":"");this._inputs=[];var i=function(i){var n=e._option.disabledValues.indexOf(i)>-1,r=n&&e._option.disabledValuesLabelText,s=Object(a.b)("input",{name:e._inputNamePrefix+e._option.name,className:"pf-mr-6",value:i,id:i,type:"radio",prop:{disabled:n,checked:e._option.defaultValue===i,onchange:e._onChange}});s.value=i,e._inputs.push(s);var l=Object(a.b)("label",{className:"row "+(e._option.name===o.a.OPTION_STITCH_COLOR?"pf-ml-2 pf-mt-4 pf-h6":"pf-ml-0 "+(n?"pf-text-muted":"")),attr:{title:r?+e._option.disabledValuesLabelText:""}},[s," ",Object(a.b)("p","",e._option.values[i])]).append(t);e._option.name===o.a.OPTION_STITCH_COLOR&&Object(a.b)("div",{className:"col pf-pl-16 pf-p-12 row row-flex btn btn-empty pf-btn-lg pf-rounded stitch-color-picker__type pf-border-light pf-border-2 text-left "+("white"===s.value?"pf-mr-24 pf-ml-0":""),onclick:function(){s.checked=!0}},[l,Object(a.b)("i","pf-i pf-i-drag-vertical pf-i-rotate-45 pf-i-32 pf-rounded pf-bg-light pf-border-light pf-mb-auto pf-ml-auto "+("white"===s.value?"pf-i-light":""))]).append(t),r&&$(l).tooltip()};for(var n in this._option.values)i(n);return Object(a.b)("div","clearfix").append(t),t},getValue:function(){for(var e in this._inputs)if(this._inputs[e].checked)return this._inputs[e].value;return null},getPrice:function(){return this._option.prices||null},setValue:function(e){for(var t in this._inputs)this._inputs[t].value===e?(this._inputs[t].checked=!0,this._onChange()):this._inputs[t].checked=!1},validate:function(){return this.getValue()&&this.getValue().length>0}},s);window&&((globalThis||{}).PFComponentsProductOptionsRadioOption=f);var g=i("iQ/s"),m=i("JA1v"),_=Class({_picker:null,_colorsByName:{},_errorMessage:"Please choose required colors",_getNode:function(){var e=new g.a;for(var t in e.maxCount=this._option.maxCount,e.onChange=this._onChange,e.onError=this._addError,e.showBig=!0,e.colors={},e.selectedColors=[],e.showEmptyGraphic=!0,this._option.values){var i=t,n=this._option.values[t];e.colors[n]=[i],this._colorsByName[n]=i,this._option.defaultValue.indexOf(i)>-1&&e.selectedColors.push(n)}return this._picker=new m.a(e),this._picker},validate:function(){return this.getValue().length>0},getValue:function(){var e=this._picker.getSelectedColors(),t=[];for(var i in e){var n=e[i];t.push(this._colorsByName[n])}return t},setValue:function(e){this._picker.setSelectedColor(e)}},s);window&&((globalThis||{}).PFComponentsProductOptionsColorOption=_);var v=i("Cj9M"),y=i("M3Ia"),b=Class({_getNode:function(){var e=new v.a;return e.value="1",e.isChecked=!!this._option.defaultValue,e.label=this._option.title,e.onchange=this._onChange,this._input=new y.a(e),this._input},getValue:function(){return this._input.isChecked()},_render:function(){a.a.clearNode(this.node),this._getNode().append(this.node)}},s);window&&((globalThis||{}).PFComponentsProductOptionsCheckboxOption=b);var P=i("7QI8"),C=Class({_onChange:null,_optionNodes:[],_placementIdsWithLayers:[],_placementIdsWithImageLayers:[],_generatorPlacements:null,_selectedPlacementId:null,errorMessage:"Please choose options!",__construct:function(e){this._par=e,this._onChange=this._par.onChange;var t=this._par.values||{};for(var i in this.node=tag("div"),this._optionNodes=[],this._par.optionItems){var n=this._par.optionItems[i];void 0!==t[n.name]&&(n.defaultValue=t[n.name]);var r=this._getBaseOptionFromType(n.type);if(r){var s=new r(n,this._par.inputNamePrefix);s.onChange=this._onOptionChanged.bind(this,s),n.name===o.a.OPTION_STITCH_COLOR&&(a.a.addClassName(this.node,"col-12 row row-flex pf-mr-0 pf-pr-0"),a.a.addClassName(s.node,"pf-mx-0")),a.a.addClassName(s.node,"product-option"),this._optionNodes.push(s)}else console.error("Option component unknown for",n)}this.renderOptions()},renderOptions:function(){for(var e in a.a.clearNode(this.node),this._optionNodes){var t=this._optionNodes[e],i=t.getOption();this._shouldOptionBeVisible(i)&&this._isPlacementConditionPassing(i)&&(o.a.CUT_SEW_OPTIONS.indexOf(i.name)>-1&&a.a.addClassName(t.node,"product-option--compact-column"),t.append(this.node),t.isExpandable()&&(this._shouldOptionBeExpanded(t.getOption())?t.expand():t.getValue()||t.collapse()))}},setGeneratorPlacements:function(e){this._generatorPlacements=e},_getBaseOptionFromType:function(e){return this._getTypeMap()[e]||null},_getTypeMap:function(){var e={};return e[o.a.TYPE_RADIO]=f,e[o.a.TYPE_TEXT]=u,e[o.a.TYPE_SINGLE_LINE_TEXT]=p,e[o.a.TYPE_COLOR]=_,e[o.a.TYPE_CHECKBOX]=b,e[o.a.TYPE_DATA]=C.DataOption,e},_onOptionChanged:function(e){this._onChange&&this._onChange(e),this._clearErrors(e),this.renderOptions()},getValues:function(){var e={};for(var t in this._optionNodes){var i=this._optionNodes[t],n=i.getOption();if(this._shouldOptionBeVisible(n)||!n.isVisible()){var r=i.getValue();if(!r&&(n.isTypeText()||n.isTypeBoolean()))continue;if(n.isTypeColor()&&0==r.length)continue;e[i.getName()]=r}}return e},getPrices:function(){var e={};for(var t in this._optionNodes){var i=this._optionNodes[t];if(i.getPrice){var n=i.getPrice();n&&(e[i.getName()]=n)}}return e},setValue:function(e,t){for(var i in this._optionNodes)if(this._optionNodes[i].getName()===e){this._optionNodes[i].setValue&&this._optionNodes[i].setValue(t);break}return!1},_shouldOptionBeVisible:function(e){return(e.isStitchColors()||this._isFileConditionPassing(e))&&this._isLayerTypesConditionPassing(e)&&this._isOptionConditionPassing(e)&&e.isVisible()},_isLayerTypesConditionPassing:function(e){return!e.condition||!e.condition.layerTypes||e.condition.layerTypes.filter((function(t){return t===n.a.TYPE&&e.condition.fileTypes.filter((function(e){return this._placementIdsWithImageLayers.indexOf(e)>-1}),this).length>0}),this).length>0},_shouldOptionBeExpanded:function(e){return this._isExpandedFileConditionPassing(e)&&this._isExpandedOptionConditionPassing(e)},_shouldOptionBeValidated:function(e){return this._isRequiredFileConditionPassing(e)&&this._isRequiredOptionConditionPassing(e)},_isOptionConditionPassing:function(e){if(!e.hasOptionCondition())return!0;var t=e.getConditionOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())<0)return!1}}return!0},_isFileConditionPassing:function(e){if(!e.hasFileCondition())return!0;var t=e.getConditionFilesTypes();if(!this._placementIdsWithLayers.length)return!1;for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},_isPlacementConditionPassing:function(e){if(null==this._selectedPlacementId||""==this._selectedPlacementId)return!0;var t=e.getConditionFilesTypes();if(0==t.length)return!0;for(var i in t)if(t[i]==this._selectedPlacementId)return!0;return!1},_isExpandedFileConditionPassing:function(e){if(!e.hasExpandedFileCondition())return!0;var t=e.getExpandedConditionFilesTypes();if(!this._placementIdsWithLayers.length)return!1;for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},_isExpandedOptionConditionPassing:function(e){if(!e.hasExpandedCondition())return!1;var t=e.getExpandedConditionOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())>-1)return!0}}return!1},_isRequiredOptionConditionPassing:function(e){if(!e.hasRequiredOptions())return!0;var t=e.getRequiredOptions();for(var i in t){var n=i,r=t[i];for(var a in this._optionNodes){var o=this._optionNodes[a];if(o.getOption().name==n&&r.indexOf(o.getValue())<0)return!1}}return!0},_isRequiredFileConditionPassing:function(e){if(!e.hasRequiredFileCondition())return!0;if(!this._placementIdsWithLayers.length)return!1;var t=e.getRequiredConditionFilesTypes();for(var i in t)if(this._placementIdsWithLayers.indexOf(t[i])<0)return!1;return!0},setPlacementIdsWithLayers:function(e){return this._placementIdsWithLayers=e,this},setPlacementIdsWithFiles:function(e){return this._placementIdsWithImageLayers=e,this},getExtraPrice:function(){var e=this.getValues(),t=0;for(var i in this._optionNodes){var n=this._optionNodes[i].getOption(),r=e[n.name];t+=n.getPrice(r)}return t},hasValidOptions:function(){var e=this._optionNodes;for(var t in this._selectedPlacementId&&(e=e.sort(function(e,t){var i=this._getOptionItemLocation(e.getOption());return i&&i.id===this._selectedPlacementId?-1:1}.bind(this))),e){var i=e[t],n=i.getOption();if(this._shouldOptionBeVisible(n)&&(this._shouldOptionBeValidated(n)&&!i.validate()&&!n.name===o.a.OPTION_STITCH_COLOR)){var r=i.getErrorMessage(),a=this._getOptionItemLocation(n);return a&&(r=r+" ("+a.title+")"),this.errorMessage=r,!1}}return!0},hasOption:function(e){for(var t in this._optionNodes)if(this._optionNodes[t].getName()==e)return!0;return!1},_getOptionItemLocation:function(e){var t=e.getConditionFilesTypes();if(!this._generatorPlacements||!t)return null;for(var i=0;i<t.length;i++)for(var n=t[i],r=0;r<this._generatorPlacements.length;r++){var a=this._generatorPlacements[r];if(a.id===n)return a}return null},_clearErrors:function(e){for(var t in this._optionNodes){var i=this._optionNodes[t];i.hasError&&i!==e&&this._optionNodes[t].clearError()}},hasSameValues:function(e,t){var i=this.getValues();if(Object.keys(i).length!==Object.keys(e).length)return!1;for(var n in i){if(!t||!P.a.PLACEMENT_COLOR_MAP[t]||P.a.getThreadNameByPlacement(t)===n)if(JSON.stringify(i[n])!==JSON.stringify(e[n]))return!1}return!0},hasVisibleOptions:function(){for(var e in this._optionNodes){var t=this._optionNodes[e].getOption();if(this._shouldOptionBeVisible(t))return!0}return!1},setSelectedPlacementId:function(e){this._selectedPlacementId=e,this.renderOptions()}},a.a.Base);window&&((globalThis||{}).PFComponentsProductOptions=C)},gqiv:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"o",(function(){return r})),i.d(t,"j",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"q",(function(){return s})),i.d(t,"l",(function(){return l})),i.d(t,"u",(function(){return c})),i.d(t,"r",(function(){return u})),i.d(t,"s",(function(){return d})),i.d(t,"p",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"e",(function(){return f})),i.d(t,"h",(function(){return g})),i.d(t,"f",(function(){return m})),i.d(t,"i",(function(){return _})),i.d(t,"t",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"m",(function(){return b})),i.d(t,"d",(function(){return P})),i.d(t,"c",(function(){return C})),i.d(t,"g",(function(){return T}));var n="logoMaker/index/",r="m_setFlag",a="m_loadItemsIntoRepo",o="m_loadLogoTemplatesIntoRepo",s="m_setItemsResponseMetadata",l="m_loadSavedItem",c="m_updateItemFiles",u="m_toggleDeleteModal",d="m_toggleEditorModal",h="m_setGeneratorParams",p="m_cleanupDeletedItemData",f="g_getFlag",g="g_getPageItems",m="g_getItem",_="g_getTemplateItem",v="a_updateFilterAndLoad",y="a_loadUsingFilter",b="a_loadSingleItem",P="a_duplicateItem",C="a_deleteItems";function T(e){return e.logoMaker.index}},gqyd:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("n6mh"),r=i("+erO"),a=i("X5Ic"),o=i("1tjy"),s=i("mrkb"),l=i("wo5H"),c=Class({fillColor:"",clipartItem:null,lockUniScaling:!0,_getNewLayer:function(){return new c},getType:function(){return c.TYPE},isClipartLayer:function(){return!0},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.fillColor=this.fillColor,t.clipartItem=this.clipartItem,t.overrideImage=this.overrideImage,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.patternType=this.patternType,t.patternSpacing=this.patternSpacing,t.flipX=this.flipX,t.flipY=this.flipY,t.isExisting=this.isExisting,t.quickDesignId=this.quickDesignId,t.groupType=this.groupType,t.groupId=this.groupId,t.engravingStyle=this.engravingStyle,t.disableCentering=Object(s.f)(),t},getSourceWidth:function(){return this.clipartItem.width},getSourceHeight:function(){return this.clipartItem.height},isVector:function(){return!0},isSimple:function(){return!1},toArray:function(e,t){return{type:c.TYPE,fillColor:this.fillColor,clipartItemId:this.clipartItem?this.clipartItem.id:null,url:this._getUrl(e),svg:t&&this.clipartItem?this.clipartItem.svg:null,position:this.position?this.position.toArray():{},isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isExisting:this.isExisting,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId,engravingStyle:this.engravingStyle,lockUniScaling:this.lockUniScaling,disableCentering:Object(s.f)()}},_getUrl:function(e){var t=null;return this.clipartItem&&this.clipartItem.image&&(t=this.clipartItem.image.urlLarge),e&&this.clipartItem&&this.clipartItem.image&&(t=this.clipartItem.image.urlThumb),t},getInitialScale:function(e){return e.technique===a.a.TECHNIQUE_ENGRAVING?e.isTouchToolPrintFile()?5:1.08:4},isValidForTechnique:function(e){var t=Object(o.e)(this.clipartItem.id),i=Object(o.d)(this.clipartItem.groupId);return!((null==i?void 0:i.unavailableTechniques.indexOf(e))>-1||(null==t?void 0:t.unavailableTechniques.indexOf(e))>-1)}},n.a);c.TYPE=l.l.CLIPART,c.fromClipartItem=function(e){var t=new c;return t.clipartItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupClipartLayer=c)},h4ts:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("bvdp"),r=i("86cz"),a=i("+erO"),o=i("nF4n"),s=i("n6mh"),l=i("KLvT"),c=i("gqiv"),u=i("Svo9"),d=i("mrkb"),h=Class({_par:null,_groupTypeItem:null,uniqueId:null,group:!0,items:[],_canAccessNewToolbar:!1,__construct:function(e){var t=this;this._par=e,this.uniqueId=this._par.uniqueId,this._canAccessNewToolbar=Object(d.a)(),this.isQuickDesign()?(Object(u.h)(),Object(u.f)(this._par.quickDesignId)?this._groupTypeItem=Object(u.d)(this._par.quickDesignId):console.error("Quick design not cached, start panic!!!")):this.isLogoTemplate()&&(this._groupTypeItem=Object(l.a)().getters[c.a+c.i](this._par.quickDesignId)),this.node=tag("div",{className:this._par.mirroredGroupUniqueId?"pf-d-none":"layer-picker__group pf-border-bottom",onclick:this._par.onClicked.bind(null,this),attr:{"data-group-id":this._par.uniqueId}},[tag("div","layer-picker__group__details row no-gutters",[tag("div","col-auto",[tag("div","layer-picker__group__handle-wrap pf-py-16 pf-pl-24 pf-pr-12",[tag("div","layer-picker__group__thumb pf-border",[this._thumbNode=this._getThumbNode()])])]),tag("div","col pf-ui-caption",[tag("div","layer-picker__group__handle-wrap pf-pt-16",[this._titleNode=this._getTitleNode(),this._sizeNode=this._getSizeNode(),tag("span",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-2 pf-mb-4",attr:{title:dlang("generator","These units aren't inches or cm! Use them as a reference point for your design size."),"data-toggle":"tooltip"}})]),tag("div","layer-picker__group__controls row"+(this._canAccessNewToolbar?" pf-d-none":""),[tag("div","col-12 pf-mt-12",[tag("div","pf-bold pf-mb-8",lang("Align")+":"),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center vertically"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.VERTICAL)},[tag("i","pf-i pf-i-format-vertical-align-center pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Center horizontally"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.HORIZONTAL)},[tag("i","pf-i pf-i-format-horizontal-align-center pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Left"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.LEFT)},[tag("i","pf-i pf-i-format-horizontal-align-left pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Right"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.RIGHT)},[tag("i","pf-i pf-i-format-horizontal-align-right pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mr-8 pf-mb-8",attr:{title:dlang("generator","Top"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.TOP)},[tag("i","pf-i pf-i-format-vertical-align-top pf-i-18")]),tag("a",{className:"btn btn-empty pf-px-12 pf-mb-8",attr:{title:dlang("generator","Bottom"),"data-toggle":"tooltip"},onclick:this._par.onRequestAlign.bind(null,a.a.ALIGNMENT.BOTTOM)},[tag("i","pf-i pf-i-format-vertical-align-bottom pf-i-18")])])])]),tag("span","layer-picker__group__handle",[tag("i","pf-i pf-i-drag pf-i-18")]),tag("span",{className:"layer-picker__group__delete",onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestRemoval(e)}.bind(this),attr:{title:lang("Delete"),"data-toggle":"tooltip"}},[tag("i","pf-i pf-i-trash-can-outline pf-i-18")]),tag("span",{className:"layer-picker__group__reset",onclick:function(e){e.stopPropagation(),$(this.node).find('[data-toggle="tooltip"]').tooltip("hide"),this._par.onRequestPositionReset(e),n.a._track("Reset position button",n.a._getCustomerLabel(),r.a.TYPE_QUICKDESIGN)}.bind(this),attr:{title:dlang("dashboard","Reset"),"data-toggle":"tooltip"}},[tag("i","pf-i pf-i-restore pf-i-18")])]),tag("div","row no-gutters",[tag("div",{className:"layer-toggle col-12 pf-pt-8 pf-pb-8 accordion__header",onclick:function(e){t._accordionIcon.classList.contains("opened")?t._accordionIcon.classList.remove("opened"):t._accordionIcon.classList.add("opened")},data:{toggle:"collapse",target:"#layer-group-"+this._par.uniqueId}},[tag("div","layer-toggle__icon pf-d-inline-block text-right",[this._accordionIcon=tag("i","pf-i pf-i-menu-down pf-i-24 pf-text-gray pf-mr-8 accordion__icon")]),tag("span","pf-h5",this.isQuickDesign()?dlang("generator","Quick design layers"):dlang("generator","Logo layers"))])]),this.itemList=tag("div",{className:"nested-sortable accordion__content collapse",id:"layer-group-"+this._par.uniqueId,data:{"layer-group-id":this._par.uniqueId}})])},_getThumbNode:function(){var e=tag("div");if(this._groupTypeItem){var t=this._groupTypeItem.image;e=tag("img",{className:"layer-picker__group__image",src:t.urlThumb})}return e},_getTitleNode:function(){var e=this.isQuickDesign()?dlang("generator","Quick design"):dlang("generator","Logo");return tag("div","layer-picker__group__title pf-pr-40",[tag("span","layer-picker__group__badge",e),this._groupTypeItem.name])},isQuickDesign:function(){return this._par.groupType===s.a.GROUP_QUICK_DESIGN},isLogoTemplate:function(){return this._par.groupType===s.a.GROUP_LOGO_TEMPLATE},getGroupType:function(){return this._par.groupType},getGroupBBox:function(){var e=this.items.map((function(e){return e.getLayer()}));if(null!=e&&e.length){var t,i,n,r;e.forEach((function(e){var a=e.position.getBoundingBox();t=null!==t&&t<a.left?t:a.left,n=null!==n&&n>a.right?n:a.right,i=null!==i&&i<a.top?i:a.top,r=null!==r&&r>a.bottom?r:a.bottom}));var o=new a.a;return o.areaHeight=e[0].position.areaHeight,o.areaWidth=e[0].position.areaWidth,o.height=r-i,o.width=n-t,o.top=i,o.left=t,o}},_getSizeNode:function(){var e={width:0,height:0};return this.items.length&&(e=this.getGroupBBox()),tag("div","pf-mt-2 pf-d-inline-block",[tag("span","pf-bold",dlang("generator","Width:"))," "+e.width.toFixed(2)+" ",tag("span","pf-bold",dlang("dashboard","Height:"))," "+e.height.toFixed(2)])},updateDimensions:function(){o.a.clearNode(this._sizeNode),this._getSizeNode().append(this._sizeNode)},getGroupTypeItem:function(){return this._groupTypeItem},activateList:function(){this.node.classList.add("activated"),this.itemList.classList.add("in")},disableList:function(){this.node.classList.remove("activated"),this.itemList.classList.remove("in")},setActive:function(e){e?(o.a.addClassName(this.node,"active"),this.activateList()):(o.a.removeClassName(this.node,"active"),this.disableList()),this._isActive=e},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}).on("click",(function(e){$(this).tooltip("hide")})),$(this.node).find('[data-toggle="dropdown"]').dropdown(),this}},o.a.Base);window&&((globalThis||{}).PFProductPushLayerPickerGroup=h)},hdE6:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("6JZw"),r=i("nF4n"),a=function(){this.childCategories=[]};a.prototype=new n.a,a.prototype.id=0,a.prototype.key="",a.prototype.name="",a.prototype.readableName="",a.prototype.nameWithBreadcrumbs="",a.prototype.parentCategoryId=0,a.prototype.parentCategory=null,a.prototype.childCategories=[],a.prototype.childCategoryCount=0,a.prototype.relationId=0,a.prototype.relationType=0,a.prototype.toArrayKeys=["id","key","name","readableName","parentCategoryId"],a.prototype.hasChildren=function(){return this.childCategoryCount>0},a.prototype.isLastChild=function(){return 0===this.childCategoryCount},a.fromArray=function(e){var t=new a;if(r.a.O2O(t,e),e.parentCategory&&(t.parentCategory=a.fromArray(e.parentCategory)),e.childCategories)for(var i in t.childCategories=[],e.childCategories)t.childCategories.push(a.fromArray(e.childCategories[i]));return t},window&&((globalThis||{}).PFItemsProductCategory=a)},hwSo:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Iy0a"),r=i("XsTE"),a=function(e){var t=e.templates,i=n.a.fromObject(),a=t.getLayersByType(n.a,r.MOCKUP_PLACEMENT_ID)[0];if(a){var o=t.getTemplatesByPlacement(r.MOCKUP_PLACEMENT_ID)[0],s=o.getLayerIndex(a);i.originalPosition=a.originalPosition.getClone(),i.position=a.position.getClone(),t.removeLayer(o,a),t.addLayerToPlacementTemplates(o.placementId,i,!0),t.reorderLayer(i,s)}else t.addLayerToPlacementTemplates(r.MOCKUP_PLACEMENT_ID,i)}},iKM3:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({id:null,name:"",groupId:null,index:0,designData:null,extra:{},unavailableTechniques:[],isActive:!0,image:{}});r.fromArray=function(e){var t=new r;return n.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsGeneratorQuickDesignItem=r)},"iQ/s":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({colors:{},selectedColors:[],unavailableColors:[],maxCount:null,canDeselectLast:!0,onChange:null,showBig:!1,showHuge:!1,showInline:!1,showTextSwatches:!1,shouldSortColors:!0,preSelectFirst:!1,nodeClass:"",discontinuedColors:null,disabledRegionColors:null,isColorClickable:!0,disabledColors:[],disabledText:null,showRgbTooltip:!1,showEmptyGraphic:null,__construct:function(){},gatherColorsFromProduct:function(e){for(var t in e.colors){var i=e.colors[t];if(i.colorCode){var n=[i.colorCode.toUpperCase()];i.colorCode2&&n.push(i.colorCode2.toUpperCase()),this.colors[i.colorName]=n}}}});window&&((globalThis||{}).PFComponentsColorPickerPar=n)},"iiV/":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("o0qH"),r=i("ji4W"),a=i("X5Ic"),o=Class({_state:null,_categoriesStore:null,__construct:function(){this._categoriesStore=new r.a},apply:function(e){return this._state=e,this[e.action]&&this[e.action](),this},continue:function(e){return e&&e(this._state),this},productCatalogProductChosen:function(){this._categoriesStore.getPath().filter((function(e){return e.isEmbroideryShirts()})).length>0&&Object(n.a)(this._state.activeProductId).rememberLastUsedTechnique(a.a.TYPE_EMBROIDERY)}});window&&((globalThis||{}).PFProductsCatalogUtilsMiddleware=o);var s=i("g357"),l=i("N6Gp"),c=(i("v49Q"),i("cCrT")),u=i("YBfo"),d=Class({events:[u.a.EVENT_NAME,u.a.EVENT_ALL_LOADED,u.a.EVENT_PRODUCTS_FILTER,u.a.EVENT_PRODUCTS_LOADED,u.a.EVENT_PRODUCT_CHOOSE,u.a.EVENT_TAB_CHOOSE,u.a.EVENT_VARIANT_CHANGED,u.a.EVENT_TOGGLE_LOCK],params:null,state:null,middleware:null,__construct:function(e){this.params=e,this.state=new s.a,this.middleware=new o,this._initEventHandler(),this._initEventListeners()},goTo:function(e,t){var i={category:e&&e,activeProductId:t&&t.productId,productSearchKeywords:this._getFromUrl("search"),activeTab:(new c.a).hash,filter:d.getFiltersFromUrl(),productColor:this._getFromUrl("color"),productSize:this._getFromUrl("size"),activeVariantId:parseInt(this._getFromUrl("variant")),skipHistory:!e,openedFirstTime:!0,productsViewPage:parseInt(this._getFromUrl("page")),productTechnique:this._getFromUrl("technique"),geoElementId:this._getFromUrl("geoElementId")};s.a.createAndDispatch(t?u.a.EVENT_PRODUCT_CHOOSE:u.a.EVENT_NAME,i)},goToIndex:function(){s.a.createAndDispatch(u.a.EVENT_NAME,{category:new l.a})},getCatalogType:function(){return this.params.catalogType},popState:function(e){this.state=s.a.createFromObject(e.state,!0),this.update()},addState:function(e){this.state=e,!this.params.skipHistory&&e.pushToHistory()},update:function(){this.params.onUpdate&&this.middleware.apply(this.state).continue(this.params.onUpdate)},updateParams:function(e){this._destroyEventListeners(),this.params=e,this._initEventHandler(),this._initEventListeners()},_getFromUrl:function(e){var t=new c.a;return t.query[e]?t.query[e]:null},_initEventHandler:function(){this._changeHandlerObject={handleEvent:d.onChange.bind(this,this.params)}},_initEventListeners:function(){window.onpopstate=this.popState,this.events.map(this._addListener)},_destroyEventListeners:function(){this.events.map(this._removeListener)},_addListener:function(e){document.addEventListener(e,this._changeHandlerObject,!0)},_removeListener:function(e){document.removeEventListener(e,this._changeHandlerObject,!0)}});d.instance=null,d.getInstance=function(e){return d.instance||(d.instance=new d(e)),d.instance},d.onChange=function(e,t){var i=d.getInstance(e),n=s.a.clone(t.detail,{category:i.state.category,prefix:i.params.prefix});n.catalogType=i.getCatalogType(),i.addState(n),i.update()},d.getFiltersFromUrl=function(){var e=new c.a,t={};for(var i in u.a.FILTER_TYPES){var n=(e.query[i]||"").split("!")||[];n=n.filter((function(e){return!!e})),t[u.a.FILTER_TYPES[i]]=n}return t},d.Par=Class({productsCatalog:null,prefix:"",onUpdate:null,skipHistory:!1,catalogType:u.a.TYPE_PP}),window&&((globalThis||{}).PFProductsCatalogUtilsRouter=d)},jI2M:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({values:[],valuesDisabled:[],valuesHidden:[],valuesInactive:[],sampleValuesDisabled:[],onChanged:null,activeValue:null,ariaLabel:"",singleAriaLabel:"{title}"});window&&((globalThis||{}).PFComponentsButtonPickerPar=n)},jhOU:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_par:null,__construct:function(e){this._par=e,this.node=tag("div",{className:"pf-banner pf-banner-"+this._par.type+" "+(this._par.className||""),attr:{"data-test":this._par.dataTest}},[this._par.closable?tag("i",{className:"pf-banner__close-icon pf-i pf-i-close pf-i-20 pf-text-gray pf-cursor-pointer pf-position-absolute",prop:{onclick:function(){if(!this._par.onCloseClick)return this._prettyRemove(),!1;this._par.onCloseClick()}.bind(this)}}):"",tag("div","pf-banner__content row",[tag("div","col-sm",[tag("div","row no-gutters",[this._par.icon?tag("div","col-auto",[tag("img",{className:"pf-banner__logo pf-mr-24",src:this._par.icon})]):"",tag("div","col",[tag("div","row",[tag("div","col pf-ui-body",[this._par.heading?tag("div","pf-bold",this._par.heading):"",tag("div",{innerHTML:this._par.content}),this._par.linkText?tag("a",{className:"pf-d-inline-block pf-mt-2",onclick:this._par.onLinkClick},this._par.linkText):""]),this._par.buttonText?tag("div","col-sm-auto pf-mt-8 pf-my-sm-auto",[tag("a",{className:"pf-btn pf-btn-outline",onclick:this._par.onButtonClick},this._par.buttonText)]):""])])])])])])},_prettyRemove:function(){var e=this;n.a.removeClassName(this.node,"pf-banner pf-banner-"+this._par.type),setTimeout((function(){n.a.removeNode(e.node),e._par.onAfterElementRemoved&&e._par.onAfterElementRemoved()}),300)}},n.a.Base);r.show=function(e,t){new r(t).append(e)},window&&((globalThis||{}).PFComponentsBanner=r)},ji4W:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("Tt8e"),r=i("N6Gp"),a=i("YBfo"),o=i("t8U3"),s=Class({__construct:function(){this._initConfigureStore(this)},_categories:[],getAll:function(e){return this._getSubCategories(e)},getAllWithInactive:function(e){return this._getSubCategories(e,!0)},getById:function(e,t,i){t||(t=s.cache[a.b.catalogType]),void 0===i&&(i=!0);var n=this._findCategoryById(e,t);if(n||!i)return n;for(var r in t){var o=this.getById(e,t[r].children);if(o){n=o;break}}return n},getPath:function(e){void 0===e&&(e=this.getActiveCategoryId());var t=[],i=this.getById(e);if(!i)return[];for(t.push(i);i.parentId&&(i=this.getById(i.parentId));)t.push(i);return t.reverse()},getTopLevelCategory:function(){var e=this.getPath();return e.length?e[0]:this.getActiveCategory()},setActiveCategoryId:function(e){s.activeCategoryId=e},getActiveCategoryId:function(){return s.activeCategoryId},getActiveCategory:function(){return-1===this.getActiveCategoryId()?r.a.getTemporaryFavoritesCategory():this.getById(this.getActiveCategoryId())},getCategoryChildIds:function(e){var t=[e.id];for(var i in e.children)t.push(e.children[i].id);return t},cache:function(e){"Array"!=typeof e&&(e=n.a.convertToArray(e)),s.cache[a.b.catalogType]=e.map(this._getCategoryItem)},_getSubCategories:function(e,t,i){var n=s.cache[a.b.catalogType];if(!n.length)return console.log("Categories not found"),[];e||(e=0);var r=i&&i.length?i:n;return r=r.filter(this._filterCategoryByParentId.bind(this,e)),t||(r=r.filter(this._filterActiveCategory.bind(this))),r.length||(!i&&n&&(i=n),i.map(function(i){r=r.concat(this._getSubCategories(e,t,i.children))}.bind(this))),r},_findCategoryById:function(e,t){var i=null;return t.map(function(t){if(t.id===e)return i=t,!1}.bind(this)),i},_filterCategoryByParentId:function(e,t){return t.parentId===e},_filterActiveCategory:function(e){return e.isActive},_getCategoryItem:function(e){return r.a.fromArray(e)},_initConfigureStore:function(){if(!s._storeInitCallbackExecuted){s._storeInitCallbackExecuted=!0;var e=o.a.getCategoriesStoreInitCallback();e&&e(this)}}});s.cache={},s.activeCategoryId=0,s._storeInitCallbackExecuted=!1,window&&((globalThis||{}).PFProductsCatalogUtilsStoreCategories=s)},jorx:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("Q1Td"),r=i("nF4n"),a=Class({_timeStarted:0,_timeEnded:0,__construct:function(e,t){this._designData=e,this.node=Object(r.a)({tag:"div",className:"live-mockups",els:[this._nodeStatus=Object(r.a)({tag:"div"}),this._nodeMain=Object(r.a)({tag:"div",className:"live-mockups__main"}),this._nodeThumbs=Object(r.a)({tag:"div",className:"live-mockups__thumbs"})]}),t?this._onProgress(t,!0):this._generate()},_generate:function(){this._onProgress(lang("Waiting for magic to happenâ¦")),this._timeStarted=(new Date).getTime(),(new n.a).generateMockups(this._designData,{onProgress:this._onProgress,onCompleted:this._onGenerated,onFailed:this._onFailed,onStarted:this._onStarted},!0)},_onStarted:function(){this._onProgress(a.PROCESSING_FILES_STATE)},_onFailed:function(){this._nodeStatus.textContent=lang("Generating failed. Please")+" ",Object(r.a)({tag:"a",text:clang("action","try again"),className:"pf-link",onclick:this._generate}).append(this._nodeStatus),this._nodeStatus.appendChild(document.createTextNode("!"))},_onProgress:function(e,t){this._nodeStatus.textContent=a.getStatusMessage(e),t||Object(r.a)({tag:"div",className:"margin-top-10 text-center",els:[{tag:"img",src:"/static/images/layout/spinner.svg"}]}).append(this._nodeStatus)},_onGenerated:function(e){if(this._nodeStatus.textContent="",this._timeEnded=(new Date).getTime(),console.log("Generation took "+(this._timeEnded-this._timeStarted)/1e3+" seconds"),this.files=e,this.files.length>1)for(var t in this.files){var i=this.files[t];this.files[t].node=tag("div",{className:"live-mockups__thumb pf-p-4 pf-hover-shadow pf-rounded",onclick:$.proxy(this._showMain,this,i.downloadUrl)},[tag("img",{src:i.downloadUrl})]).append(this._nodeThumbs)}e.length&&this._showMain(e[0].downloadUrl)},_showMain:function(e){if(r.a.clearNode(this._nodeMain),Object(r.a)({tag:"img",src:e}).append(this._nodeMain),this.files.length>1)for(var t in this.files)r.a.removeClassName(this.files[t].node,"live-mockups__thumb-active"),this.files[t].downloadUrl===e&&r.a.addClassName(this.files[t].node,"live-mockups__thumb-active")}},r.a.Base);a.getStatusMessage=function(e){switch(e){case a.GENERATING_MOCKUPS_STATE:return dlang("generator","Generating mockupsâ¦");case a.GENERATING_PRINTFILES_STATE:return dlang("generator","Generating printfilesâ¦");case a.PROCESSING_FILES_STATE:return lang("Processing filesâ¦");default:return e}},a.getShortStatusMessage=function(e){switch(e){case a.GENERATING_MOCKUPS_STATE:case a.GENERATING_PRINTFILES_STATE:return dlang("generator","Generating");case a.PROCESSING_FILES_STATE:return lang("Processing");default:return e}},a.GENERATING_MOCKUPS_STATE="generating_mockups",a.GENERATING_PRINTFILES_STATE="generating_printfiles",a.PROCESSING_FILES_STATE="processing_files",window&&((globalThis||{}).PFProductPushLiveMockups=a)},kLof:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({type:[],className:null,heading:"",content:"",linkText:"",onLinkClick:null,buttonText:"",onButtonClick:null,onCloseClick:null,onAfterElementRemoved:null,closable:!1,icon:""});n.fromArray=function(e){return Object.assign(new n,e||{})},window&&((globalThis||{}).PFComponentsBannerPar=n)},kT3P:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("iiV/"),r=i("g357"),a=i("Op/+"),o=i("yDyG"),s=Class({store:null,activeCategoryId:0,activeStoreId:null,enableSidebar:!0,enableCategoriesSidebar:!0,enableProductsSidebar:!0,enableTabs:!0,enableTitle:!0,enableStickyHeader:!0,enableProductBanners:!1,customTitle:"",enableSearch:!1,searchType:o.a.SEARCH_TYPE_PRODUCTS,enableBreadcrumbs:!0,breadcrumbsIndexCategoryTitle:dlang("products","Products"),isOrderFlow:!1,isMockupGenerator:!1,isPush:!1,isClean:!1,onProductChoose:null,onCategoryChoose:null,containerClass:"",productCatalogClass:"",textBlockData:{},banners:[],bannersPerPage:null,headingNode:null,breadcrumbsNode:null,allowedFulfillmentRegions:[],isRenderRequired:!0,pagNumber:null,isProductTemplate:!1,isFeaturedReviews:!1,featuredReviews:{},sellingRegion:null,enableFilterHeader:!1,isEmbedded:!1,__construct:function(){this.store=new a.a},isStickyHeaderEnabled:function(){return this.enableBreadcrumbs&&!this.isClean&&!this.isOrderFlow&&PF.Cookies.arePreferencesSet()},isEmbeddedView:function(){return this.isPush||this.isEmbedded}});window&&((globalThis||{}).PFProductsCatalogPar=s);var l=i("oi7h"),c=i("N6Gp"),u=i("YBfo"),d=Class({params:null,catalogParams:null,productsCatalog:null,router:null,__construct:function(e){this.params=e,this._initCatalogParams(),this.catalogParams.isRenderRequired=!1,this.params.productCatalogClass&&(this.catalogParams.productCatalogClass=this.params.productCatalogClass),this.productsCatalog=new l.a(this.catalogParams),this.catalogParams.isRenderRequired=!0,this._initRouter(this.getActiveCategory(),this.getActiveProduct())},updateParams:function(e){this.params.activeCategoryId=e.activeCategoryId||null},_initCatalogParams:function(){var e=new s;this.params.store&&(e.store=this.params.store),e.store.setActiveCategoryId(this.params.activeCategoryId),e.activeStoreId=this.params.storeId,e.store.setCurrency(this.params.currency),e.allowedFulfillmentRegions=this.params.allowedFulfillmentRegions,e.onProductChoose=this.params.onProductChoose,e.onCategoryChoose=this.params.onCategoryChoose,e.isOrderFlow=this.params.isOrderFlow,e.isPush=this.params.isPush,e.customTitle=this.params.title,e.isClean=this.params.isClean,e.storeProductLimitations=this.params.storeProductLimitations,e.isProductTemplate=this.params.isProductTemplate,e.isEmbedded=this.params.isEmbedded,e.banners=this.params.banners,e.bannersPerPage=this.params.bannersPerPage,e.headingNode=this.params.headingNode,e.breadcrumbsNode=this.params.breadcrumbsNode,e.isFeaturedReviews=this.params.isFeaturedReviews,e.sellingRegion=this.params.sellingRegion,e.searchBox=this.params.searchBox,this.params.isOrderFlow&&(e.enableTabs=!1,e.enableCategoriesSidebar=!0,e.enableTitle=!1,e.enableSearch=!0,e.enableFilterHeader=!0,e.breadcrumbsIndexCategoryTitle=dclang("products","Root category name","All departments"),this.params.isAnonymousOrderFlow&&(e.enableBreadcrumbs=!1)),this.params.isMockupGenerator&&(e.isMockupGenerator=this.params.isMockupGenerator,e.enableSearch=!1,e.enableTabs=!1,e.searchType=o.a.SEARCH_TYPE_PRODUCTS_GENERATOR,e.breadcrumbsIndexCategoryTitle=dclang("products","Root category name","All departments")),this.params.isOrderFlow||this.params.isMockupGenerator||(e.enableProductBanners=!0),this.params.isClean&&(e.enableCategoriesSidebar=!!this.params.enableCategoriesSidebar,e.enableProductsSidebar=!1,e.enableTabs=!1,e.enableSearch=!1,e.enableTitle=!1),this.params.isProductTemplate&&(e.enableTitle=!1,e.enableProductBanners=!1,e.enableTabs=!1,e.enableSearch=!0,e.enableFilterHeader=!0),this.params.isOrderFlow||this.params.isAnonymousOrderFlow||this.params.isMockupGenerator||(e.containerClass="container"),this.params.isProductSwap&&(e.isProductSwap=this.params.isProductSwap,e.originalProductType=this.params.originalProductType,e.originalPlacements=this.params.originalPlacements,e.swapCategories=this.params.swapCategories,e.swapTemplateId=this.params.swapTemplateId),this.catalogParams=e,u.b.urlPrefix=this.params.urlPrefix},_initRouter:function(e,t){var i=new n.a.Par;i.productsCatalog=this.productsCatalog,i.onUpdate=this.productsCatalog.updateFromState,i.skipHistory=this.params.shouldSkipHistory(),i.prefix=this.params.urlPrefix,this.params.isMockupGenerator?i.catalogType=u.a.TYPE_MG:this.params.isPush||this.params.isProductTemplate?i.catalogType=u.a.TYPE_PUSH:this.params.isOrderFlow?i.catalogType=u.a.TYPE_OF:i.catalogType=u.a.TYPE_PP;var a=!!n.a.instance;this.router=n.a.getInstance(i),a&&(this.router.updateParams(i),this.router.state=new r.a),this.router.goTo(e,t)},getActiveCategory:function(){return this.catalogParams.store.categories.getActiveCategoryId()===c.a.ID_FAKE_FAVORITES?c.a.getTemporaryFavoritesCategory():this.catalogParams.store.categories.getActiveCategory()},getActiveProduct:function(){return this.catalogParams.store.products.getActive()},append:function(e){this.productsCatalog.node.append(e)}});d.instance=null,d.getInstance=function(e,t){if(!d.instance||t){var i=d.instance;!e.store&&i&&i.catalogParams.store&&(e.store=i.catalogParams.store),d.instance=new d(e)}else if(null!=e&&e.activeCategoryId){var n=(new a.a).categories.getById(e.activeCategoryId);d.instance.router.goTo(n)}else d.instance.router.goToIndex();return d.instance},window&&((globalThis||{}).PFProductsCatalogInitializer=d)},ka4h:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7h5t"),r=i("pWIn"),a=i("UYP3"),o=i("nF4n"),s=Class({_par:null,_checkbox:null,_titleNode:null,_labelNode:null,_infoButton:null,_slider:null,_sliderComponent:null,__construct:function(e){var t;this._par=e,this._checkbox=tag("input",{type:"checkbox",className:"product-push-customizer-options__checkbox",prop:{checked:this._par.isChecked,onchange:this._changeCheckboxState}}),t=this._par.layerType===r.a.TYPE||this._par.layerType===n.a.TYPE?dlang("dashboard","Allow text personalization"):dlang("dashboard","Allow image personalization"),this._titleNode=tag("h6",{className:"product-push-customizer-options__title "+(this._par.layerType===r.a.TYPE||this._par.layerType===n.a.TYPE?"product-push-customizer-options__title--text-layer":""),prop:{onclick:this._changeCheckboxState}},[t]),this._labelNode=tag("span",{className:"margin-left-10 product-push-customizer-options__label",prop:{onclick:this._changeCheckboxState}},[dlang("dashboard","Let your customers create personalized versions of your design in real-time on your store")]),this.node=tag("div",null,[tag("div","product-push-customizer-options",[this._titleNode,tag("div","product-push-customizer-options__checkbox-wrapper",[this._checkbox,this._labelNode])])]),this._renderSlider(),this._initTooltip()},_changeCheckboxState:function(){this._par.isChecked=!this._par.isChecked,this._checkbox.checked=this._par.isChecked,this._checkbox.setAttribute("checked",this._par.isChecked?"checked":""),this._renderSlider(),this._par.onChange&&this._par.onChange(this._par.isChecked)},_initTooltip:function(){setTimeout((function(){$(".text-picker__can-customize-tooltip").tooltip()}),10)},setSliderValue:function(e){this._sliderComponent&&this._sliderComponent.setValue(e)},_renderSlider:function(){this._par.showSlider&&(this._par.isChecked?this._addSlider():this._removeSlider())},_addSlider:function(){var e=new a.a.Par;e.onSlide=this._par.onSliderChange,e.max=99,e.onSlideEnded=function(){},this._infoButton=tag("a",{className:"margin-left-5"},[tag("img",{src:"/static/images/layout/icons/info.png",alt:lang("Info"),data:{toggle:"tooltip",html:!0},className:"text-picker__can-customize-tooltip",title:dlang("dashboard","Set an area size that's wide enough for longer words")})]),this._slider=tag("div","row",[tag("div","col-xs-12 margin-top-20",[tag("strong",null,[dlang("dashboard","Customizable text area"),this._infoButton])]),tag("div","col-xs-12 margin-top-10 text-picker__can-customize-slider",[this._sliderComponent=new a.a(e)])]),this._slider.append(this.node)},_removeSlider:function(){this._slider&&(o.a.removeNode(this._slider),this._sliderComponent=null,this._slider=null)}},o.a.Base);window&&((globalThis||{}).PFProductPushCanCustomizeCheckbox=s)},kn6O:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("x0He");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=u(e);if(t){var r=u(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return c(this,i)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(d,e);var t,r,c,u=l(d);function d(){return a(this,d),u.apply(this,arguments)}return t=d,(r=[{key:"render",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=new n.b;o.components={SellingRegionSearchInfoBanner:function(){return i.e(218).then(i.bind(null,"LlLQ"))}},o.template='<selling-region-search-info-banner :item-count="count" :classOverride="classOverride" :storeId="storeId"/>',o.initialData={count:e,storeId:r,classOverride:a},new n.a(o).append(t)}}])&&o(t.prototype,r),c&&o(t,c),d}(i("SBaP").a)},l99J:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("96ed"),r=i("GCEm"),a=i("edgZ");function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e,t,i,n){return h(e,t),d(i,"set"),function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,i,n),n}function u(e,t,i){return h(e,t),d(i,"get"),function(e,t){if(t.get)return t.get.call(e);return t.value}(e,i)}function d(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function h(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,s;return t=e,s=[{key:"listen",value:function(t,i){var o,s=(t=(new a.a).getCachedFile(t.fileId)).storeId!==r.a&&t.storeId>0;if(t.isProcessing()&&!u(e,e,f)[t.fileId]){var l,c,d,h=(o=s?n.a.subscribeStore(t.storeId,n.a.CHANNEL_LIBRARY,n.a.EVENT_COMPLETED,i):n.a.subscribeAnonymousUpload(t.fileId,n.a.EVENT_COMPLETED,i)).subscribed&&(null===(l=o.callbacks)||void 0===l||null===(c=l._callbacks)||void 0===c||null===(d=c.completed)||void 0===d?void 0:d.length);u(e,e,f)[t.fileId]=o,h||(console.warn("".concat(s?"Store":"Anonymous"," file event listener FAILED to subscribe, starting delayed manual check!")),e.DelayedCheck())}}},{key:"unbind",value:function(t,i){var a=t.storeId!==r.a&&t.storeId>0;u(e,e,f)[t.fileId]&&(delete u(e,e,f)[t.fileId],a&&(n.a.unbindStore(t.storeId,n.a.CHANNEL_LIBRARY,n.a.EVENT_COMPLETED,i),console.log("Store event listener un-registered")))}},{key:"DelayedCheck",value:function(){Object.keys(u(e,e,f)).length&&!u(e,e,g)&&c(e,e,g,setTimeout((function(){var t=Object.keys(u(e,e,f))||[];(new a.a).getByIds(t,(function(t){if(t&&t.length){var i,n=o(t);try{for(n.s();!(i=n.n()).done;){var r,a,s=i.value;if(!s.isProcessing()){if(!u(e,e,f)[s.fileId])return;var l,c=o((null===(r=u(e,e,f)[s.fileId].callbacks)||void 0===r||null===(a=r._callbacks)||void 0===a?void 0:a.completed)||[]);try{for(c.s();!(l=c.n()).done;)(0,l.value)(s)}catch(e){c.e(e)}finally{c.f()}delete u(e,e,f)[s.fileId]}}}catch(e){n.e(e)}finally{n.f()}}clearTimeout(u(e,e,g)),e.DelayedCheck()}),!0)}),u(e,e,m)))}}],(i=null)&&l(t.prototype,i),s&&l(t,s),e}(),f={writable:!0,value:{}},g={writable:!0,value:null},m={writable:!0,value:2e3}},llTG:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.r(t),i.d(t,"PFVariantPickerPar",(function(){return r}));var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"orderLineItem",null),n(this,"productId",null),n(this,"storeId",null),n(this,"currency",null),n(this,"callback",null),n(this,"onFileGenerationStartedSaveAndRenderCallback",null),n(this,"onFileGenerationStartedForVariantCallback",null),n(this,"callbackWithGeneratingFiles",null),n(this,"onGeneratorDesignIdChanged",null),n(this,"skipMemory",null),n(this,"productTemplateEditorState",null),n(this,"selectedSize",null),n(this,"selectedColor",null),n(this,"onBack",null),n(this,"externalId",""),n(this,"detailedPicker",!1),n(this,"isVariantSyncFlow",!1),n(this,"flow",""),n(this,"isSampleOrder",!1),n(this,"setModalFooterContentCallback",null),n(this,"isModalOrder",!1),n(this,"activePlacementId",null),n(this,"enableCustomizableLayers",!1),n(this,"isModalDesigner",!1),n(this,"generatorParameters",null),n(this,"onDesignerLoaded",null),n(this,"onLoaderToggle",null),n(this,"onProductLoaded",null),n(this,"onCanContinueChange",null),n(this,"onFooterVisibilityChange",null),n(this,"isShoppingCart",!1),n(this,"onPriceUpdate",null),n(this,"isLandingPage",!1),n(this,"lastProductId",null),n(this,"lastProductTechnique",null)}},mBxu:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return o}));var n=i("KLvT"),r=i("sWGB");function a(e){Object(n.a)().commit(r.g(r.i),e)}function o(e){Object(n.a)().commit(r.g(r.j),e)}},mJTt:function(e,t,i){"use strict";i.d(t,"a",(function(){return W}));var n=i("9eNC"),r=i("97Au"),a=i("2ovl"),o=i("YNgQ");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function c(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,h(e,t,"get"))}function u(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function d(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,h(e,t,"set"),i),i}function h(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var p=new WeakMap,f=new WeakMap,g=new WeakMap,m=new WeakMap,_=new WeakMap,v=new WeakMap,y=new WeakMap,b=new WeakMap,P=new WeakMap,C=new WeakMap,T=new WeakMap,w=new WeakMap,I=new WeakMap,S=new WeakMap,E=new WeakMap,O=new WeakMap,k=new WeakSet,L=new WeakMap,A=new WeakSet,R=new WeakSet,N=new WeakSet,D=new WeakMap,x=new WeakSet,F=new WeakSet,M=new WeakMap,B=new WeakSet,V=new WeakSet,j=new WeakSet,U=new WeakSet,z=new WeakSet,G=new WeakSet,H=new WeakSet,q=new WeakSet,Y=new WeakSet,W=function e(t,i,s){var h=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y.add(this),q.add(this),H.add(this),G.add(this),z.add(this),U.add(this),j.add(this),V.add(this),B.add(this),F.add(this),x.add(this),N.add(this),R.add(this),A.add(this),k.add(this),p.set(this,{writable:!0,value:"js--product-push-designer"}),f.set(this,{writable:!0,value:"js--has-before-close"}),g.set(this,{writable:!0,value:"js--variant-picker-continue-button"}),m.set(this,{writable:!0,value:"js--back-to-catalog-link"}),_.set(this,{writable:!0,value:"js--back"}),v.set(this,{writable:!0,value:"js--continue"}),y.set(this,{writable:!0,value:"dynamic-sticky-footer"}),b.set(this,{writable:!0,value:"pf-steps__item"}),P.set(this,{writable:!0,value:!1}),C.set(this,{writable:!0,value:!1}),T.set(this,{writable:!0,value:null}),w.set(this,{writable:!0,value:null}),I.set(this,{writable:!0,value:null}),S.set(this,{writable:!0,value:null}),E.set(this,{writable:!0,value:null}),O.set(this,{writable:!0,value:function(){document.removeEventListener("click",c(h,M),!0),window.removeEventListener("beforeunload",c(h,D)),window.removeEventListener("unload",u(h,k,K)),n.p(n.f,c(h,L)),n.p(n.c,c(h,O)),n.p(n.d,h.showModal),e.isInitialised=!1}}),L.set(this,{writable:!0,value:function(){var t,i,n=u(h,R,X).call(h),r=c(h,S).getData();if(e.isForceUpdateRequired&&(e.isForceUpdateRequired=null),e.updateInitialStateLayers&&(d(h,w,e.updateInitialStateLayers),d(h,C,!1),e.updateInitialStateLayers=null),e.updateInitialStateOptions&&(d(h,E,e.updateInitialStateOptions),d(h,C,!1),e.updateInitialStateOptions=null),a.a.isDesignCachedInSession())d(h,C,!!n.length);else if(n.length===c(h,w).length&&r.length===c(h,E).length){for(var o=0;o<c(h,w).length;o++)if(i=n[o],t=c(h,w)[o],u(h,N,Q).call(h,[i,t]),Object.entries(i).toString()!==Object.entries(t).toString()||Object.entries(i.position).toString()!==Object.entries(t.position).toString())return void d(h,C,!0);var s=u(h,A,Z).call(h,r);d(h,C,!!s)}else d(h,C,!0)}}),D.set(this,{writable:!0,value:function(t){c(h,C)&&(e.isDisabled||c(h,P)||!u(h,Y,le).call(h)||(t.preventDefault(),t.returnValue=""))}}),M.set(this,{writable:!0,value:function(t){if((e.isForceUpdateRequired||e.updateInitialStateLayers||e.updateInitialStateOptions)&&c(h,L).call(h),!e.isDisabled)if(u(h,Y,le).call(h)){if(c(h,C)&&!c(h,P)){for(var i=document.querySelectorAll("#"+c(h,p)),n=0;n<i.length;n++){var r=t.target.closest(".modal-dialog")&&!t.target.closest(".modal-dialog").contains(i[n]);if(i[n].contains(t.target)&&!u(h,B,ee).call(h,t.target)&&!u(h,G,ae).call(h,t.target)||r)return}u(h,B,ee).call(h,t.target)?d(h,C,!1):u(h,V,te).call(h,t.target)||u(h,H,oe).call(h,t)}}else c(h,I)&&u(h,G,ae).call(h,t.target)&&(e.isForceUpdateRequired=!0)}}),l(this,"showModal",(function(e){if(u(h,Y,le).call(h)||Object(o.g)()){var t=tag("button",{className:"pf-i pf-i-close pf-d-none",onclick:e});document.body.appendChild(t),t.click(),t.remove()}else e()})),n.o(n.c),d(this,P,!1),d(this,C,!1),d(this,T,t),d(this,w,u(this,R,X).call(this)),d(this,I,i),d(this,S,s),d(this,E,c(this,S).getData());var W=new r.a.Par;W.modalDialogClass="modal-md",W.nodeClass="pf-p-0",W.closeOnClick=!1,W.allowEsc=!1,W.deleteOnHide=!0,this.modal=new r.a(W);var ie=tag("div","pf-d-flex pf-flex-column pf-flex-xs-row",[tag("a",{onclick:u(this,x,$).bind(this),className:"pf-btn pf-btn-primary pf-mb-12 pf-mb-xs-0 pf-mr-xs-12",text:dlang("generator","Stay")}),tag("a",{onclick:u(this,F,J).bind(this),className:"pf-btn pf-btn-secondary",text:dlang("generator","Leave")})]);this.modal.setFooterContent(ie),d(this,M,c(this,M).bind(this)),d(this,D,c(this,D).bind(this)),d(this,L,c(this,L).bind(this)),d(this,O,c(this,O).bind(this)),document.addEventListener("click",c(this,M),!0),window.addEventListener("unload",u(this,k,K)),n.q(n.f,c(this,L)),n.q(n.c,c(this,O)),n.q(n.d,this.showModal),e.isInitialised=!0};function K(){a.a.unsetDesignCachedInSession()}function Z(e){var t,i,n,r=this,a=function(){if(i=e[t],n=c(r,E)[t],i.placement!==n.placement)return{v:!0};if(Object.keys(i.options).length!==Object.keys(n.options).length)return{v:!0};var a=!1,o=void 0,s=void 0;return Object.keys(i.options).forEach((function(e){a||(o=i.options[e],s=n.options[e],o!==s&&(a=!0))})),a?{v:a}:void 0};for(t=0;t<c(this,E).length;t++){var o=a();if("object"===s(o))return o.v}return!1}function X(){var e=[],t=c(this,T).getTemplates();for(var i in t)for(var n in t[i])for(var r in t[i][n].layers){var a=t[i][n].layers[r],o=Object.assign({},a.toArray());e.push(o)}return e}function Q(e){e.forEach((function(e){delete e.overrideImagePulse,delete e.overrideImage,e.position.top=parseFloat(parseFloat(e.position.top).toFixed(4)),e.position.left=parseFloat(parseFloat(e.position.left).toFixed(4)),e.position.width=parseFloat(parseFloat(e.position.width).toFixed(4)),e.position.height=parseFloat(parseFloat(e.position.height).toFixed(4))}))}function $(){this.modal.hide()}function J(){d(this,P,!0),this.modal.remove(),this.target.click()}function ee(e){if(e.id===c(this,g)&&e.className.indexOf("disabled")<0)return!0;if("A"!==e.nodeName||u(this,G,ae).call(this,e))return!1;if("A"===e.nodeName&&e.id===c(this,v))return!0;for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(c(this,y)))return!0;return!1}function te(e){return!(u(this,j,ie).call(this,e)||u(this,U,ne).call(this,e)||u(this,z,re).call(this,e)||u(this,G,ae).call(this,e))}function ie(e){if(e.classList.contains("pf-i-close")){for(;e&&e!==document;e=e.parentNode)if(e.classList.contains(c(this,f)))return!1;return!0}}function ne(e){var t=e.parentNode;return"A"===e.nodeName&&e.href.indexOf("javascript")<0||"A"===t.nodeName&&t.href.indexOf("javascript")<0}function re(e){if(Object(o.f)())return!1;for(var t=0;e&&e!==document&&t<3;){if("A"===e.nodeName&&e.classList.contains(c(this,b))&&(-1!==e.innerText.indexOf(lang("Product"))||-1!==e.innerText.indexOf(lang("Design"))))return!0;e=e.parentNode,t++}}function ae(e){return!Object(o.f)()&&"A"===e.nodeName&&(e.id===c(this,m)||e.id===c(this,_))}function oe(e){e.stopImmediatePropagation(),e.preventDefault(),this.target=e.target,u(this,q,se).call(this),d(this,P,!1),this.modal.show()}function se(){this.modal.setTitle(W.customPopupHeading||dlang("generator","Are you sure?"));var e=W.customPopupContent||dlang("generator","If you leave, your changes won't be saved.");this.modal.setContent(tag("div","pf-ui-body",e))}function le(){return document.querySelectorAll("#"+c(this,p)).length>0}l(W,"isDisabled",!1),l(W,"updateInitialStateLayers",null),l(W,"updateInitialStateOptions",null),l(W,"isForceUpdateRequired",!1),l(W,"customPopupHeading",null),l(W,"customPopupContent",null),l(W,"isInitialised",!1),(globalThis||{}).PFPopupDesignerLeaveWarning=W},mTkf:function(e,t,i){"use strict";i.d(t,"d",(function(){return v})),i.d(t,"f",(function(){return y})),i.d(t,"c",(function(){return b})),i.d(t,"e",(function(){return P})),i.d(t,"g",(function(){return T})),i.d(t,"b",(function(){return w})),i.d(t,"a",(function(){return I})),i.d(t,"h",(function(){return S}));var n=i("RW1+"),r=i("CXOy"),a=i("LvDl"),o=i.n(a),s=i("Cc5H"),l=i("oCYn"),c=i("vCXY");function u(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function d(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){u(a,n,r,o,s,"next",e)}function s(e){u(a,n,r,o,s,"throw",e)}o(void 0)}))}}function h(e){return p.apply(this,arguments)}function p(){return(p=d(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.a)(null,(function(){return i.e(137).then(i.bind(null,"+zYX"))}));case 2:return n=e.sent,r=n.deps.PFComponentsSvgThumb,e.abrupt("return",new r(t));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return g(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function m(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){m(a,n,r,o,s,"next",e)}function s(e){m(a,n,r,o,s,"throw",e)}o(void 0)}))}}function v(e){switch(e){case r.h.CREATED_DATE_ASC:return{type:r.c.CREATED_DATE,dir:r.b.ASC};case r.h.CREATED_DATE_DESC:return{type:r.c.CREATED_DATE,dir:r.b.DESC};case r.h.UPDATED_DATE_ASC:return{type:r.c.UPDATED_DATE,dir:r.b.ASC};case r.h.UPDATED_DATE_DESC:return{type:r.c.UPDATED_DATE,dir:r.b.DESC};case r.h.TITLE_ASC:return{type:r.c.TITLE,dir:r.b.ASC};case r.h.TITLE_DESC:return{type:r.c.TITLE,dir:r.b.DESC}}return null}function y(e,t){if(t===r.b.ASC)switch(e){case r.c.CREATED_DATE:return r.h.CREATED_DATE_ASC;case r.c.UPDATED_DATE:return r.h.UPDATED_DATE_ASC;case r.c.TITLE:return r.h.TITLE_ASC}else if(t===r.b.DESC)switch(e){case r.c.CREATED_DATE:return r.h.CREATED_DATE_DESC;case r.c.UPDATED_DATE:return r.h.UPDATED_DATE_DESC;case r.c.TITLE:return r.h.TITLE_DESC}return null}function b(e,t){if(!t)return e;if(t.sortBy&&(Object.values(r.c).includes(t.sortBy)||(t.sortBy=r.c.CREATED_DATE)),t.sortDir&&(Object.values(r.b).includes(t.sortDir)||(t.sortDir=r.b.DESC)),t.page){var i=parseInt(t.page+"");(!i||i<0)&&(i=1),t.page=i}return new r.d(o.a.merge({},e||{},t))}function P(e,t){return C.apply(this,arguments)}function C(){return(C=_(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,r){var a=new n.a;a.template=t.getTemplate(i).shift(),a.async=!0,t.placementOptions&&(a.placementOptions=t.placementOptions.getOptionsForPlacement(i)),a.onSvgProcessedCallback=function(t){e(t)};try{h(a).catch(r)}catch(e){r(e)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){return!e.getters[s.i](r.f.FLAG_KEYS.IS_LOADING)&&(e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,value:!0}),!0)}function w(e,t){t&&t.responseFlags&&Object.keys(t.responseFlags).forEach((function(i){e.commit(s.t,{key:i,value:t.responseFlags[i]})}))}function I(e,t){if(t){e.commit(s.o,{items:t.items});var i=(t.items||[]).map((function(e){return e.id})),n=new r.e({itemIds:f(i),page:t.page,totalPages:t.pages,totalItems:t.total,totalTemplateCount:t.totalTemplateCount,filter:t.usedFilter,itemsPerPage:t.itemsPerPage});t.responseFlags&&w(e,t),e.commit(s.u,{metadata:n}),e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,shouldUnset:!0})}else e.commit(s.t,{key:r.f.FLAG_KEYS.IS_LOADING,shouldUnset:!0})}function S(e,t){var i,n;if(null!==(i=e.currentItemsResponseMetadata)&&void 0!==i&&i.itemIds&&null!==(n=e.filter)&&void 0!==n&&n.sortBy&&e.itemRepository&&t){var a=e.currentItemsResponseMetadata.itemIds;if(-1===a.indexOf(t.id)){var o=a.map((function(t){return e.itemRepository[t]})).filter((function(e){return!!e}));if(a.length!==o.length)throw new Error("ItemRepository and current itemIds mismatch!");o.push(t);var s=e.filter;switch(s.sortBy){case r.c.CREATED_DATE:case r.c.UPDATED_DATE:var c=s.sortBy===r.c.CREATED_DATE?"createdAt":"updatedAt";o.sort((function(e,t){return e[c]||t[c]?e[c]&&t[c]?e[c].isSame(t[c])?0:s.sortDir===r.b.ASC?e[c].isBefore(t[c])?-1:1:e[c].isBefore(t[c])?1:-1:e[c]?s.sortDir===r.b.ASC?-1:1:s.sortDir===r.b.ASC?1:-1:0}));break;case r.c.TITLE:o.sort((function(e,t){if(!e.title&&!t.title)return 0;if(!e.title||!t.title)return e.title?s.sortDir===r.b.ASC?-1:1:s.sortDir===r.b.ASC?1:-1;var i=e.title.localeCompare(t.title);return 0===i?0:s.sortDir===r.b.ASC?i<0?-1:1:i<0?1:-1}))}var u=e.currentItemsResponseMetadata.itemsPerPage,d=o.slice(0,u).map((function(e){return e.id}));l.default.set(e.currentItemsResponseMetadata,"itemIds",d)}}}},"md/F":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n={SIZE_ORDER:["NB","0-3M","3-6m","3-6M","6M","6-12M","6-12m","12M","12-18M","12-18m","18M","18-24m","24M","2T (1-2yr)","2T","2","2yrs","Toddlers","3","3T","4T (2-3yr)","2-3y","3-4","4T","4yrs","4Y","4","5","5 (3-4yr)","4-5y","5/6","5T","5-6","6 (5-6yr)","6yrs","6Y","6","6X","6X (6-7yr)","7","7-8","Kids","8yrs","8Y","9-11","10yrs","10Y","12yrs","12Y","12-14","XXS","XS","XS/SM","S","S/M","P","M","M/L","L/XL","L","G","XL","GG","2XL","XGG","XXL","3XL","4XL","5XL","6XL","iPhone 7/8","iPhone 7/8/SE","iPhone 7 Plus/8 Plus","iPhone X/XS","iPhone XS Max","iPhone XR","iPhone 11","iPhone 11 Pro","iPhone 11 Pro Max","iPhone SE","iPhone 12 mini","iPhone 12","iPhone 12 Pro","iPhone 12 Pro Max","50 x 100 cm","70 x 140 cm","100 x 210 cm"],sizeSortingCallback:function(e,t){var i=function(e){e&&e.toString().indexOf(" (")&&(e=e.toString().split(" (")[0]);var t=n.SIZE_ORDER.indexOf(e);if(-1===t&&e){var i=e.match(/([0-9\.]+)(x|Ã)([0-9\.]+)\s*(cm|in)?/);if(i)return parseFloat(i[1])*parseFloat(i[3])/("cm"===i[4]?Math.pow(2.54,2):1)}return t},r=i(e),a=i(t);return r>-1&&a>-1?r-a:e-t},variantSortingBySizeCallback:function(e,t){return n.sizeSortingCallback(e.size,t.size)},getProductImageByType:function(e,t){var i=e.filter((function(e){return e.categoryId===t}));if(i.length)return i.pop();var n=e.filter((function(e){return 0===e.categoryId}));return n.length?n.pop():null}};(globalThis||{}).PFUtilsProduct=n},mrkb:function(e,t,i){"use strict";i.d(t,"j",(function(){return mn})),i.d(t,"k",(function(){return _n})),i.d(t,"l",(function(){return vn})),i.d(t,"o",(function(){return bn})),i.d(t,"b",(function(){return Cn})),i.d(t,"d",(function(){return Tn})),i.d(t,"i",(function(){return wn})),i.d(t,"n",(function(){return In})),i.d(t,"m",(function(){return Sn})),i.d(t,"c",(function(){return En})),i.d(t,"a",(function(){return On})),i.d(t,"f",(function(){return kn})),i.d(t,"g",(function(){return Ln})),i.d(t,"h",(function(){return An})),i.d(t,"e",(function(){return Rn}));var n,r,a=i("KLvT"),o=i("Bxww"),s=i("X5Ic");function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c,u,d={state:{productItem:null,placementsWithOnlyBackgroundColor:[],optionGroupTagInfo:i("sXh8").a,productTechnique:null},namespaced:!0,mutations:(n={},l(n,o.i,(function(e,t){var i=t.productItem;e.productItem=i?i instanceof s.a?i:s.a.fromArray(i):null})),l(n,o.h,(function(e,t){var i=t.placements;e.placementsWithOnlyBackgroundColor=null!=i?i:[]})),l(n,o.g,(function(e,t){e.optionGroupTagInfo=t})),l(n,o.j,(function(e,t){e.productTechnique=t})),n),getters:(r={},l(r,o.e,(function(e){return e.productItem})),l(r,o.d,(function(e){return e.placementsWithOnlyBackgroundColor})),l(r,o.c,(function(e){return e.optionGroupTagInfo})),l(r,o.f,(function(e){return e.productTechnique})),r)},h=i("sWGB"),p=i("h4ts"),f=i("7h5t"),g=i("+erO"),m=i("sjGI"),_=i("Jkv8"),v=i("o5cA"),y=i("pWIn"),b=i("n6mh");function P(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var C,T,w,I={state:{activeLayer:null,activePlacementId:null},namespaced:!0,mutations:(c={},P(c,h.i,(function(e,t){e.activeLayer=t})),P(c,h.j,(function(e,t){e.activePlacementId=t})),c),getters:(u={},P(u,h.b,(function(e){return null==e?void 0:e.activeLayer})),P(u,h.f,(function(e){return null==e?void 0:e.activePlacementId})),P(u,h.e,(function(e){var t,i,n,r;return null!=e&&null!==(t=e.activeLayer)&&void 0!==t&&t.getType?null==e||null===(i=e.activeLayer)||void 0===i?void 0:i.getType():null!=e&&null!==(n=e.activeLayer)&&void 0!==n&&n.getGroupType?null==e||null===(r=e.activeLayer)||void 0===r?void 0:r.getGroupType():null})),P(u,h.c,(function(e){var t;return null==e||null===(t=e.activeLayer)||void 0===t?void 0:t.uniqueId})),P(u,h.d,(function(e){var t;return null==e||null===(t=e.activeLayer)||void 0===t?void 0:t.isTemporary})),P(u,h.h,(function(e){return(null==e?void 0:e.activeLayer)instanceof p.a})),u),actions:P({},h.k,(function(e,t){var i=t.technique,n=t.fromLayer,r=new f.a;if(n)r.copyValues(n),r.originalPosition=n.originalPosition.getClone(),r.position=n.position.getClone();else{var a=e.getters[h.f];r.originalPosition=new g.a,r.position=r.originalPosition.getClone(),r.font=m.a.isJp()?Object(_.getPFCanvasFonts)().FONTS["noto-sans-jp"]:Object(_.getPFCanvasFonts)().FONTS["open-sans-b"],r.size=v.a.getDefaultFontSize(a,i),r.color=r.getDefaultColor(),r.alignment=y.a.ALIGN_CENTER}r.uniqueId=b.a._instanceCounter+1,r.text="",r.isTemporary=!0,e.commit(h.i,r)}))},S=Object.freeze({IS_LOADING_QUICK_DESIGNS:"IS_LOADING_QUICK_DESIGNS"}),E=i("oCYn"),O=i("Rq5c"),k=i("DD1l"),L=i("xyjD"),A=i("FpxJ"),R=i("OmXI"),N=i("xRbm"),D=function(e){return Object.values(e).map((function(e){return R.a.fromArray(e)}))},x=function(e,t){var i=e.filter((function(e){return!F(e,t)&&e.isActive&&e.items.length}));return i.forEach((function(e){var i;e.items=null===(i=e.items)||void 0===i?void 0:i.filter((function(e){return!F(e,t)}))})),i},F=function(e,t){var i;return null===(i=e.unavailableTechniques)||void 0===i?void 0:i.includes(t)},M=function(){try{var e=window.localStorage.getItem(Object(L.d)(N.b));return e&&"[]"!==e?D(JSON.parse(e)):null}catch(e){return null}},B=function(){try{return JSON.parse(window.localStorage.getItem(Object(L.e)(N.b)))||{}}catch(e){return{}}},V=i("9Nv7"),j=function(){return Object(V.a)("designer/get-quick-designs")},U=function(e){return Object(V.a)("designer/get-quick-design-items",e)},z=function(){return Object(V.a)("designer/get-fonts")},G=function(){return Object(V.a)("designer/get-color-graphics")},H=function(){return Object(V.a)("designer/get-cliparts")},q=function(){return Object(V.a)("mockup-maker/get-props")},Y=function(){return Object(V.a)("mockup-maker/get-scenes")},W=function(){return Object(V.a)("mockup-maker/get-backgrounds")},K=function(){return Object(V.a)("mockup-maker/get-gradients")};function Z(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function X(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Z(a,n,r,o,s,"next",e)}function s(e){Z(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Q(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var $,J,ee,te={state:{clipartGroupRepository:{},clipartRepository:{},recentCache:{},loadingPromise:null},namespaced:!0,mutations:(C={},Q(C,A.j,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:N.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),Q(C,A.h,(function(e,t){t.forEach((function(t){E.default.set(e.clipartRepository,t.id,t)}))})),Q(C,A.k,(function(e,t){var i=t.clipartItemId,n=t.technique;Object.values(e.recentCache).length||(e.recentCache=B());var r=e.recentCache[n];r||(r=[]);var a=r.indexOf(i);a>-1&&r.splice(a,1),r.unshift(i),e.recentCache[n]=r.slice(0,N.b.MAX_RECENT_CACHE);try{window.localStorage.setItem(Object(L.e)(N.b),JSON.stringify(e.recentCache))}catch(e){console.warn("Could not save recent clipart items in local storage!")}})),C),actions:(T={},Q(T,A.a,(function(e,t){return X(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.state,r=Object(L.g)(L.a.UPDATE_CLIPARTS),e.getters[A.f]&&!r){i.next=5;break}return i.next=5,e.dispatch(A.i,r);case 5:return i.abrupt("return",x(Object.values(n.clipartGroupRepository),t).map((function(e){return e.items=e.items.filter((function(e){return e.isActive})),e})).sort((function(e,t){return e.index-t.index})));case 6:case"end":return i.stop()}}),i)})))()})),Q(T,A.g,(function(e,t){t.forEach((function(t){E.default.set(e.state.clipartGroupRepository,t.id,t),e.commit(A.h,t.items)}))})),Q(T,A.i,(function(e){var t=arguments;return X(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!e.getters[A.f]||r){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||r){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(a=M(),null===(n=a)||void 0===n||!n.length||r){i.next=15;break}return i.next=13,e.dispatch(A.g,D(a));case 13:return e.commit(A.j,{hasLoaded:!0}),i.abrupt("return");case 15:return i.prev=15,e.state.loadingPromise=H().then(function(){var t=X(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(L.i)(N.b,i),Object(L.k)(L.a.UPDATE_CLIPARTS,!1),a=D(i),t.next=5,e.dispatch(A.g,a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=19,e.state.loadingPromise;case 19:e.commit(A.j,{hasLoaded:!0}),i.next=25;break;case 22:i.prev=22,i.t0=i.catch(15),Object(k.a)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[15,22]])})))()})),Q(T,A.e,(function(e,t){return X(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.state.recentCache,Object.keys(r).length<1&&(r=B()),null!==(n=r[t])&&void 0!==n&&n.length){i.next=4;break}return i.abrupt("return",[]);case 4:if(a=Object(L.g)(L.a.UPDATE_CLIPARTS),e.getters[A.f]&&!a){i.next=8;break}return i.next=8,e.dispatch(A.i,a);case 8:return i.abrupt("return",e.getters[A.c](r[t]).filter((function(e){return e&&!F(e,t)})).slice(0,N.b.MAX_RECENT_SHOW));case 9:case"end":return i.stop()}}),i)})))()})),T),getters:(w={},Q(w,A.f,(function(e){return Object(O.a)(e,{key:N.a.HAS_LOADED_ALL})})),Q(w,A.b,(function(e){return function(t){var i;return null===(i=e.clipartGroupRepository)||void 0===i?void 0:i[t]}})),Q(w,A.c,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.clipartRepository)||void 0===i?void 0:i[t]}))}})),w)},ie=i("xTp9"),ne=i("3Vk9"),re=i("GyOi"),ae=function(e){return Object.values(e).map((function(e){return re.a.fromArray(e)}))},oe=function(){try{var e=window.localStorage.getItem(Object(L.d)(ie.b));return e&&"[]"!==e?ae(JSON.parse(e)):null}catch(e){return null}};function se(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function le(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){se(a,n,r,o,s,"next",e)}function s(e){se(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ce(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var ue={state:{colorGraphicRepository:{},loadingPromise:null},namespaced:!0,mutations:($={},ce($,ne.i,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:ie.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),ce($,ne.h,(function(e,t){t.forEach((function(t){return E.default.set(e.colorGraphicRepository,t.id,t)}))})),$),actions:(J={},ce(J,ne.f,(function(e){return le(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(L.g)(L.a.UPDATE_COLOR_GRAPHICS),e.getters[ne.e]&&!i){t.next=4;break}return t.next=4,e.dispatch(ne.g,i);case 4:case"end":return t.stop()}}),t)})))()})),ce(J,ne.g,(function(e){var t=arguments;return le(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[ne.e]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(null==(r=oe())||!r.length||n){i.next=14;break}return e.commit(ne.h,r),e.commit(ne.i,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=G().then((function(t){Object(L.i)(ie.b,t),Object(L.k)(L.a.UPDATE_COLOR_GRAPHICS,!1),e.commit(ne.h,ae(t))})),i.next=18,e.state.loadingPromise;case 18:e.commit(ne.i,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(k.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),J),getters:(ee={},ce(ee,ne.e,(function(e){return Object(O.a)(e,{key:ie.a.HAS_LOADED_ALL})})),ce(ee,ne.b,(function(e){return Object.values(e.colorGraphicRepository).filter((function(e){return e.isActive&&e.extra.textFill})).sort((function(e,t){return e.index-t.index}))})),ce(ee,ne.a,(function(e){return Object.values(e.colorGraphicRepository).filter((function(e){return e.isActive&&e.extra.bgFill})).sort((function(e,t){return e.index-t.index}))})),ce(ee,ne.c,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.colorGraphicRepository)||void 0===i?void 0:i[t]}))}})),ee)},de=i("Kv+z"),he=i("iKM3"),pe=i("nF4n"),fe=Class({id:null,name:"",items:[],unavailableTechniques:[],index:0,extra:{},image:{},isActive:!1});fe.fromArray=function(e){var t=new fe;return pe.a.O2O(t,e),e.items&&(t.items=e.items.map((function(e){return he.a.fromArray(e)}))),t},window&&((globalThis||{}).PFItemsGeneratorQuickDesignGroup=fe);var ge,me,_e,ve=i("ezUM"),ye=function(e){return Object.values(e).map((function(e){return fe.fromArray(e)}))},be=function(){try{var e=window.localStorage.getItem(Object(L.d)(ve.b));return e&&"[]"!==e?ye(JSON.parse(e)):null}catch(e){return null}},Pe=function(){try{return JSON.parse(window.localStorage.getItem(Object(L.e)(ve.b)))||{}}catch(e){return{}}},Ce=function(e,t){var i=e.filter((function(e){return!Te(e,t)&&e.isActive&&e.items.length}));return i.forEach((function(e){var i;e.items=null===(i=e.items)||void 0===i?void 0:i.filter((function(e){return!Te(e,t)}))})),i},Te=function(e,t){var i;return null===(i=e.unavailableTechniques)||void 0===i?void 0:i.includes(t)};function we(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ie(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){we(a,n,r,o,s,"next",e)}function s(e){we(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Se(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ee={state:{quickDesignGroupRepository:{},quickDesignRepository:{},recentCache:{},loadingPromise:null},namespaced:!0,mutations:(ge={},Se(ge,de.k,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:ve.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),Se(ge,de.i,(function(e,t){t.forEach((function(t){E.default.set(e.quickDesignRepository,t.id,t)}))})),Se(ge,de.l,(function(e,t){var i=t.quickDesignItemId,n=t.technique;Object.values(e.recentCache).length||(e.recentCache=Pe());var r=e.recentCache[n];r||(r=[]);var a=r.indexOf(i);a>-1&&r.splice(a,1),r.unshift(i),e.recentCache[n]=r.slice(0,ve.b.MAX_RECENT_CACHE);try{window.localStorage.setItem(Object(L.e)(ve.b),JSON.stringify(e.recentCache))}catch(e){console.warn("Could not save recent quick design items in local storage!")}})),ge),actions:(me={},Se(me,de.a,(function(e,t){return Ie(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.state,r=Object(L.g)(L.a.UPDATE_QUICK_DESIGNS),e.getters[de.f]&&!r){i.next=5;break}return i.next=5,e.dispatch(de.j,r);case 5:return a=Ce(Object.values(n.quickDesignGroupRepository),t),i.abrupt("return",a.filter((function(e){return e.isActive})).map((function(e){return e.items=e.items.filter((function(e){return e.isActive})),e})).sort((function(e,t){return e.index-t.index})));case 7:case"end":return i.stop()}}),i)})))()})),Se(me,de.g,(function(e,t){t.forEach((function(t){E.default.set(e.state.quickDesignGroupRepository,t.id,t),e.commit(de.i,t.items)}))})),Se(me,de.j,(function(e){var t=arguments;return Ie(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!e.getters[de.f]||r){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||r){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(a=be(),null===(n=a)||void 0===n||!n.length||r){i.next=15;break}return i.next=13,e.dispatch(de.g,ye(a));case 13:return e.commit(de.k,{hasLoaded:!0}),i.abrupt("return");case 15:return i.prev=15,e.state.loadingPromise=j().then(function(){var t=Ie(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(L.i)(ve.b,i),Object(L.k)(L.a.UPDATE_QUICK_DESIGNS,!1),a=ye(i),t.next=5,e.dispatch(de.g,a);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=19,e.state.loadingPromise;case 19:e.commit(de.k,{hasLoaded:!0}),i.next=25;break;case 22:i.prev=22,i.t0=i.catch(15),Object(k.a)(i.t0);case 25:case"end":return i.stop()}}),i,null,[[15,22]])})))()})),Se(me,de.h,(function(e,t){return Ie(regeneratorRuntime.mark((function i(){var n,r,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.itemIds,r=t.forTechnique,a=e.getters[de.d](n),n.filter((function(e){var t=a.find((function(t){return(null==t?void 0:t.id)===e}));if(!t)return!0;var i=t.designData.length>0,n=t.unavailableTechniques.includes(r);return!i||n})).length){i.next=5;break}return i.abrupt("return",a);case 5:return i.prev=5,i.next=8,U(t);case 8:if((o=i.sent).length){i.next=11;break}return i.abrupt("return",[]);case 11:return e.commit(de.i,(s=o,Object.values(s).map((function(e){return he.a.fromArray(e)})))),i.abrupt("return",e.getters[de.d](n));case 15:return i.prev=15,i.t0=i.catch(5),Object(k.a)(i.t0),i.abrupt("return",[]);case 19:case"end":return i.stop()}var s}),i,null,[[5,15]])})))()})),Se(me,de.e,(function(e,t){return Ie(regeneratorRuntime.mark((function i(){var n,r,a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=e.state.recentCache,Object.keys(r).length<1&&(r=Pe()),Array.isArray(r)){a=r,(r={})[t]=a;try{window.localStorage.setItem(Object(L.e)(ve.b),JSON.stringify(r))}catch(e){console.warn("Could not save recent quick design items in local storage!")}}if(null!==(n=r[t])&&void 0!==n&&n.length){i.next=5;break}return i.abrupt("return",[]);case 5:if(o=Object(L.g)(L.a.UPDATE_QUICK_DESIGNS),e.getters[de.f]&&!o){i.next=9;break}return i.next=9,e.dispatch(de.j,o);case 9:return i.abrupt("return",e.getters[de.d](r[t]).filter((function(e){return e&&!Te(e,t)})).slice(0,ve.b.MAX_RECENT_SHOW));case 10:case"end":return i.stop()}}),i)})))()})),me),getters:(_e={},Se(_e,de.f,(function(e){return Object(O.a)(e,{key:ve.a.HAS_LOADED_ALL})})),Se(_e,de.c,(function(e){return function(t){var i;return null===(i=e.quickDesignGroupRepository)||void 0===i?void 0:i[t]}})),Se(_e,de.d,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.quickDesignRepository)||void 0===i?void 0:i[t]}))}})),_e)},Oe=i("8GdZ"),ke=i("Z4u1"),Le=i("nvjV");function Ae(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Re(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ae(a,n,r,o,s,"next",e)}function s(e){Ae(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ne(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var De,xe,Fe,Me={state:{loadingPromise:null},namespaced:!0,mutations:Ne({},ke.d,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:Oe.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),actions:Ne({},ke.c,(function(e){var t=arguments;return Re(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[ke.b]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(r=Object(Le.a)(),!Object(Le.c)(r)||n){i.next=14;break}return Object(Le.e)(r),e.commit(ke.d,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=z().then((function(e){var t=Object(Le.d)(e);Object(L.i)(Oe.b,t),Object(Le.e)(t)})),i.next=18,e.state.loadingPromise;case 18:e.commit(ke.d,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(k.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),getters:Ne({},ke.b,(function(e){return Object(O.a)(e,{key:Oe.a.HAS_LOADED_ALL})}))},Be=i("E7gQ"),Ve=i("ZkSU"),je=i("fhxg"),Ue=function(e){return Object.values(e).map((function(e){return new je.a(e)}))},ze=function(){try{var e=window.localStorage.getItem(Object(L.d)(Ve.b));return e&&"[]"!==e?Ue(JSON.parse(e)):null}catch(e){return null}},Ge=function(){try{return JSON.parse(window.localStorage.getItem(Object(L.e)(Ve.b)))||[]}catch(e){return{}}};function He(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function qe(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){He(a,n,r,o,s,"next",e)}function s(e){He(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ye(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var We,Ke,Ze,Xe={state:{propGroupRepository:{},propRepository:{},recentCache:[],loadingPromise:null},namespaced:!0,mutations:(De={},Ye(De,Be.k,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:Ve.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),Ye(De,Be.m,(function(e,t){t.forEach((function(t){E.default.set(e.propRepository,t.id,t)}))})),Ye(De,Be.n,(function(e,t){var i=t.propItemId;e.recentCache.length||(e.recentCache=Ge());var n=e.recentCache;n||(n=[]);var r=n.indexOf(i);r>-1&&n.splice(r,1),n.unshift(i),e.recentCache=n.slice(0,Ve.b.MAX_RECENT_CACHE);try{window.localStorage.setItem(Object(L.e)(Ve.b),JSON.stringify(e.recentCache))}catch(e){console.warn("Could not save recent prop items in local storage!")}})),De),actions:(xe={},Ye(xe,Be.g,(function(e){return qe(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(L.g)(L.a.UPDATE_PROPS),e.getters[Be.f]&&!i){t.next=4;break}return t.next=4,e.dispatch(Be.h,i);case 4:case"end":return t.stop()}}),t)})))()})),Ye(xe,Be.l,(function(e,t){t.forEach((function(t){E.default.set(e.state.propGroupRepository,t.id,t),e.commit(Be.m,t.items)}))})),Ye(xe,Be.h,(function(e){var t=arguments;return qe(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=t.length>1&&void 0!==t[1]&&t[1],!e.getters[Be.f]||r){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||r){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(a=ze(),null===(n=a)||void 0===n||!n.length||r){i.next=14;break}return e.dispatch(Be.l,Ue(a)),e.commit(Be.k,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=q().then(function(){var t=qe(regeneratorRuntime.mark((function t(i){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:Object(L.i)(Ve.b,i),Object(L.k)(L.a.UPDATE_PROPS,!1),a=Ue(i),e.dispatch(Be.l,a);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.next=18,e.state.loadingPromise;case 18:e.commit(Be.k,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(k.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),Ye(xe,Be.i,(function(e){return qe(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.state.recentCache.length||(e.state.recentCache=Ge()),null!==(i=e.state.recentCache)&&void 0!==i&&i.length){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,e.dispatch(Be.g);case 5:case"end":return t.stop()}}),t)})))()})),xe),getters:(Fe={},Ye(Fe,Be.f,(function(e){return Object(O.a)(e,{key:Ve.a.HAS_LOADED_ALL})})),Ye(Fe,Be.b,(function(e){return Object.values(e.propGroupRepository).map((function(e){return e.items=e.items.filter((function(e){return e.isActive})),e})).sort((function(e,t){return e.index-t.index}))})),Ye(Fe,Be.j,(function(e,t){return t[Be.e](e.recentCache).filter((function(e){return e&&e.isActive})).slice(0,Ve.b.MAX_RECENT_SHOW)})),Ye(Fe,Be.d,(function(e){return function(t){var i;return null===(i=e.propGroupRepository)||void 0===i?void 0:i[t]}})),Ye(Fe,Be.e,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.propRepository)||void 0===i?void 0:i[t]}))}})),Fe)},Qe=i("uTcR"),$e=i("7+jv"),Je=i("VxIk"),et=i("TKTR"),tt=i("YNgQ");function it(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function nt(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){it(a,n,r,o,s,"next",e)}function s(e){it(a,n,r,o,s,"throw",e)}o(void 0)}))}}function rt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var at={state:{sceneRepository:{},sceneDesignRepository:{},userSceneIds:[],templateSceneIds:[],loadingPromise:null},namespaced:!0,mutations:(We={},rt(We,Qe.i,(function(e){e.sceneRepository={},e.userSceneIds=[],e.templateSceneIds=[]})),rt(We,Qe.k,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:Je.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),rt(We,Qe.m,(function(e,t){t.forEach((function(t){E.default.set(e.sceneRepository,t.id,t),t.isTemplate?e.templateSceneIds.push(t.id):e.userSceneIds.push(t.id),E.default.set(e.sceneRepository,t.id,t)}))})),We),actions:(Ke={},rt(Ke,Qe.f,(function(e){return nt(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(L.g)(L.a.UPDATE_SCENES),e.getters[Qe.e]&&!i){t.next=4;break}return t.next=4,e.dispatch(Qe.h,i);case 4:case"end":return t.stop()}}),t)})))()})),rt(Ke,Qe.h,(function(e){var t=arguments;return nt(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[Qe.e]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(!(r=Object($e.c)())||n){i.next=14;break}return e.commit(Qe.m,r),e.commit(Qe.k,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise||(e.state.loadingPromise=Y().then((function(t){Object(L.i)(Je.b,t),Object(L.k)(L.a.UPDATE_SCENES,!1),e.commit(Qe.i),e.commit(Qe.m,Object($e.d)(t)),e.commit(Qe.k,{hasLoaded:!0}),e.state.loadingPromise=null}))),i.next=18,e.state.loadingPromise;case 18:i.next=23;break;case 20:i.prev=20,i.t0=i.catch(14),Object(k.a)(i.t0);case 23:case"end":return i.stop()}}),i,null,[[14,20]])})))()})),rt(Ke,Qe.g,(function(e,t){return nt(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=e.getters[Qe.d](t)){i.next=12;break}return i.next=4,a={sceneId:t},Object(V.a)("mockup-maker/get-scene-design",a);case 4:if(!(r=i.sent).success){i.next=10;break}n=new et.b(r),E.default.set(e.state.sceneDesignRepository,t,n),i.next=12;break;case 10:throw Object(k.a)(r.error),new Error(r.error);case 12:case"end":return i.stop()}var a}),i)})))()})),rt(Ke,Qe.j,(function(e,t){return nt(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=Object(tt.h)(Object(tt.i)(t.designData)),i.next=3,o={designData:n},Object(V.a)("mockup-maker/save-scene",o);case 3:if((r=i.sent).success){i.next=6;break}throw new Error;case 6:a=r.scene,e.commit(Qe.m,Object($e.d)([a])),Object($e.e)(a,(function(t){e.state.sceneRepository[a.id].image.urlThumb=t}));case 9:case"end":return i.stop()}var o}),i)})))()})),rt(Ke,Qe.b,(function(e,t){return nt(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,n={sceneId:t},Object(V.a)("mockup-maker/delete-scene",n);case 2:if(i.sent.success){i.next=5;break}throw new Error(dlang("generator","Error while deleting mockup scene"));case 5:e.state.userSceneIds=e.state.userSceneIds.filter((function(e){return e!==t})),delete e.state.sceneRepository[t],Object($e.b)(t);case 8:case"end":return i.stop()}var n}),i)})))()})),Ke),getters:(Ze={},rt(Ze,Qe.e,(function(e){return Object(O.a)(e,{key:Je.a.HAS_LOADED_ALL})})),rt(Ze,Qe.c,(function(e){return function(t){var i;return null===(i=e.sceneRepository)||void 0===i?void 0:i[t]}})),rt(Ze,Qe.d,(function(e){return function(t){var i;return null===(i=e.sceneDesignRepository)||void 0===i?void 0:i[t]}})),rt(Ze,Qe.l,(function(e,t){return e.templateSceneIds.map((function(e){return t[Qe.c](e)})).sort((function(e,t){return e.index-t.index}))})),rt(Ze,Qe.n,(function(e,t){return e.userSceneIds.map((function(e){return t[Qe.c](e)})).sort((function(e,t){return t.id-e.id}))})),Ze)},ot=i("BVsF"),st=i("qB9u"),lt=i("y70k");function ct(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ut,dt,ht,pt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ct(this,e),this.id=parseInt(t.id),this.name=t.name,this.index=parseInt(t.index),this.extra=t.extra?t.extra:{},this.isActive=!!t.isActive,this.image=t.image?lt.a.fromArray(t.image):null,this.pusherKey=t.pusherKey||null},ft=function(e){return e.map((function(e){return new pt(e)}))},gt=function(){try{var e=window.localStorage.getItem(Object(L.d)(st.b));return e&&"[]"!==e?ft(JSON.parse(e)):null}catch(e){return null}};function mt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function _t(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){mt(a,n,r,o,s,"next",e)}function s(e){mt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function vt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var yt={state:{gradientRepository:{},loadingPromise:null},namespaced:!0,mutations:(ut={},vt(ut,ot.h,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:st.a.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),vt(ut,ot.g,(function(e,t){t.forEach((function(t){return E.default.set(e.gradientRepository,t.id,t)}))})),ut),actions:(dt={},vt(dt,ot.e,(function(e){return _t(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(L.g)(L.a.UPDATE_GRADIENTS),e.getters[ot.d]&&!i){t.next=4;break}return t.next=4,e.dispatch(ot.f,i);case 4:case"end":return t.stop()}}),t)})))()})),vt(dt,ot.f,(function(e){var t=arguments;return _t(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[ot.d]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(null==(r=gt())||!r.length||n){i.next=14;break}return e.commit(ot.g,r),e.commit(ot.h,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=K().then((function(t){Object(L.i)(st.b,t.gradients),Object(L.k)(L.a.UPDATE_GRADIENTS,!1),e.commit(ot.g,ft(t.gradients))})),i.next=18,e.state.loadingPromise;case 18:e.commit(ot.h,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(k.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),dt),getters:(ht={},vt(ht,ot.d,(function(e){return Object(O.a)(e,{key:st.a.HAS_LOADED_ALL})})),vt(ht,ot.a,(function(e){return Object.values(e.gradientRepository).filter((function(e){return e.isActive})).sort((function(e,t){return e.index-t.index}))})),vt(ht,ot.b,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.gradientRepository)||void 0===i?void 0:i[t]}))}})),ht)},bt=i("Ptwn"),Pt=Object.freeze({STORAGE_KEY:"generatorBackgrounds",CACHE_VERSION:1}),Ct=Object.freeze({HAS_LOADED_ALL:"HAS_LOADED_ALL"});function Tt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var wt,It,St,Et=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Tt(this,e),this.id=parseInt(t.id),this.name=t.name,this.index=parseInt(t.index),this.extra=t.extra?t.extra:{},this.isActive=!!t.isActive,this.image=t.image?lt.a.fromArray(t.image):null,this.pusherKey=t.pusherKey||null},Ot=function(e){return e.map((function(e){return new Et(e)}))},kt=function(){try{var e=window.localStorage.getItem(Object(L.d)(Pt));return e&&"[]"!==e?Ot(JSON.parse(e)):null}catch(e){return null}};function Lt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function At(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Lt(a,n,r,o,s,"next",e)}function s(e){Lt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Rt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Nt,Dt,xt,Ft={state:{backgroundRepository:{},loadingPromise:null},namespaced:!0,mutations:(wt={},Rt(wt,bt.h,(function(e,t){var i=t.hasLoaded,n=void 0!==i&&i;Object(O.b)(e,{key:Ct.HAS_LOADED_ALL,value:n,shouldUnset:!n})})),Rt(wt,bt.g,(function(e,t){t.forEach((function(t){return E.default.set(e.backgroundRepository,t.id,t)}))})),wt),actions:(It={},Rt(It,bt.e,(function(e){return At(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=Object(L.g)(L.a.UPDATE_BACKGROUNDS),e.getters[bt.d]&&!i){t.next=4;break}return t.next=4,e.dispatch(bt.f,i);case 4:case"end":return t.stop()}}),t)})))()})),Rt(It,bt.f,(function(e){var t=arguments;return At(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.getters[bt.d]||n){i.next=5;break}return i.abrupt("return");case 5:if(!e.state.loadingPromise||n){i.next=9;break}return i.next=8,e.state.loadingPromise;case 8:return i.abrupt("return",i.sent);case 9:if(null==(r=kt())||!r.length||n){i.next=14;break}return e.commit(bt.g,r),e.commit(bt.h,{hasLoaded:!0}),i.abrupt("return");case 14:return i.prev=14,e.state.loadingPromise=W().then((function(t){Object(L.i)(Pt,t.backgrounds),Object(L.k)(L.a.UPDATE_BACKGROUNDS,!1),e.commit(bt.g,Ot(t.backgrounds))})),i.next=18,e.state.loadingPromise;case 18:e.commit(bt.h,{hasLoaded:!0}),i.next=24;break;case 21:i.prev=21,i.t0=i.catch(14),Object(k.a)(i.t0);case 24:case"end":return i.stop()}}),i,null,[[14,21]])})))()})),It),getters:(St={},Rt(St,bt.d,(function(e){return Object(O.a)(e,{key:Ct.HAS_LOADED_ALL})})),Rt(St,bt.a,(function(e){return Object.values(e.backgroundRepository).filter((function(e){return e.isActive})).sort((function(e,t){return e.index-t.index}))})),Rt(St,bt.b,(function(e){return function(t){return t.map((function(t){var i;return null===(i=e.backgroundRepository)||void 0===i?void 0:i[t]}))}})),St)},Mt=i("Zwo4");function Bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vt(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Vt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function jt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ut(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){jt(a,n,r,o,s,"next",e)}function s(e){jt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function zt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Gt={state:{flags:S,loadingValues:null,shouldUpdateStorage:{},versionMeta:null},modules:{cliparts:te,colorGraphics:ue,quickDesigns:Ee,fonts:Me,props:Xe,scenes:at,gradients:yt,backgrounds:Ft},namespaced:!0,mutations:(Nt={},zt(Nt,Mt.j,(function(e,t){var i=t.flag,n=t.value;Object(L.h)(i)&&(e.shouldUpdateStorage[i]=n)})),zt(Nt,Mt.k,(function(e,t){e.versionMeta=t})),Nt),actions:(Dt={},zt(Dt,Mt.d,(function(e){return Ut(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.state.loadingValues){t.next=4;break}return t.next=3,e.state.loadingValues;case 3:return t.abrupt("return",t.sent);case 4:return e.state.loadingValues=Object(V.a)("designer/get-designer-asset-state").then((function(t){if(!t)throw new Error("Malformed designer assets data!");for(var i=0,n=Object.entries(t);i<n.length;i++){var r=Bt(n[i],2),a=r[0],o=r[1];e.commit(Mt.j,{flag:a,value:o})}})),t.next=7,e.state.loadingValues;case 7:return t.abrupt("return",t.sent);case 8:case"end":return t.stop()}}),t)})))()})),zt(Dt,Mt.c,(function(e,t){return Ut(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(Mt.d);case 2:if(!Object(L.h)(t)){i.next=4;break}return i.abrupt("return",!!e.state.shouldUpdateStorage[t]);case 4:return i.abrupt("return",!1);case 5:case"end":return i.stop()}}),i)})))()})),zt(Dt,Mt.h,(function(e){null===e.state.versionMeta&&e.commit(Mt.k,Object(L.f)())})),zt(Dt,Mt.b,(function(e,t){return Ut(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(Mt.h);case 2:e.state.versionMeta.includes(t)||(e.state.versionMeta.push(t),Object(L.j)(e.state.versionMeta));case 3:case"end":return i.stop()}}),i)})))()})),zt(Dt,Mt.i,(function(e,t){return Ut(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.dispatch(Mt.h);case 2:e.state.versionMeta.includes(t)&&(e.state.versionMeta.splice(e.state.versionMeta.indexOf(t),1),Object(L.j)(e.state.versionMeta));case 3:case"end":return i.stop()}}),i)})))()})),Dt),getters:(xt={},zt(xt,Mt.g,(function(e){return function(t){return e.shouldUpdateStorage[t]||!1}})),zt(xt,Mt.f,(function(e){return e.versionMeta})),xt)},Ht=i("fM+x"),qt=i("B8kU"),Yt=function(){return Object(V.a)("designer/has-custom-mockup-access")},Wt=i("7QI8"),Kt=i("HxWG"),Zt=i("ocsD"),Xt=i("Vx67");function Qt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var $t=function e(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Qt(this,e),this.id=i.id,this.image=i.url||i.image,this.name=i.name,this.generatorVariants=null===(t=i.generatorVariants)||void 0===t?void 0:t.map((function(e){return e instanceof Xt.a?e:Xt.a.fromArray(e)}))},Jt=function(e){var t=e.designData;return Object(V.a)("product-generator/generate-mockups",{designData:t,forCustomMockupMaker:1})},ei=function(e){var t=e.cacheKey;return Object(V.a)("product-generator/get-generated-files",{cacheKey:t})},ti=i("96ed"),ii=function(e,t,i){ti.a.subscribe(e.taskPusherKey,"onSuccess",ni.bind(null,e,t,i)),ti.a.subscribe(e.taskPusherKey,"onFailed",ri.bind(null,e,t,i))},ni=function(e,t,i,n){t(n),ai(e,t,i)},ri=function(e,t,i,n){i(n),ai(e,t,i)},ai=function(e,t,i){ti.a.unbind(e.taskPusherKey,"onSuccess",ni.bind(null,e,t,i)),ti.a.unbind(e.taskPusherKey,"onFailed",ri.bind(null,e,t,i))},oi=i("uGFp"),si=i("ehgC"),li=i("5sNq");function ci(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return ui(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ui(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function ui(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var di,hi,pi,fi=function(e){var t=e.mockupProductDesign,i=e.mockupProduct,n=e.usedDesignPlacements,r=e.selectedSizes,a=e.selectedColors,o=e.generatorVariants,s=e.isAdvanced,l=new oi.a;l.store=new si.a,l.templates={},l.filesIdsByPlacement={};var c,u=1,d=ci(t.templates);try{for(d.s();!(c=d.n()).done;){var h=c.value;h.technique=i.type,h.placementName=n[h.placementId],l.templates["".concat(h.placementId,"_").concat(u++)]=h,l.filesIdsByPlacement[h.placementId]=[];var p,f=ci(h.layers);try{for(f.s();!(p=f.n()).done;){var g=p.value;g.fileItem&&l.filesIdsByPlacement[h.placementId].push(g.fileItem.fileId)}}catch(e){f.e(e)}finally{f.f()}}}catch(e){d.e(e)}finally{d.f()}return l.sizes=r,l.colors=Object.keys(a),l.productId=i.productId,l.product=i,l.generatorVariantsIdsToSave=o.map((function(e){return e.id})),l.generatorVariants=o,l.isTransparent=!0,l.rawPlacementOptions=t.placementOptions.getData(),l.forceTemplateType=s?li.a.TEMPLATE_TYPE_ADVANCED:null,l},gi=i("V+k9"),mi=function(e){var t=e.sceneData,i=e.mockupOrderIndex,n=e.format,r=e.mockupData,a=e.storeId;return Object(V.a)("mockup-maker/generate-mockups",{sceneData:t,mockupOrderIndex:i,format:n,mockupData:r,storeId:a})},_i=function(e){var t=e.cacheKey;return Object(V.a)("mockup-maker/get-generated-custom-mockups",{cacheKey:t})},vi=i("aUd0"),yi=i("LvDl");function bi(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return Pi(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Pi(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function Pi(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Ci(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ti(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ci(a,n,r,o,s,"next",e)}function s(e){Ci(a,n,r,o,s,"throw",e)}o(void 0)}))}}function wi(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function Ii(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?wi(Object(i),!0).forEach((function(t){Si(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):wi(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Si(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ei,Oi,ki=function(e){var t={groups:[],usedDesignPlacementNames:{},productMockupFiles:{},downloadableMockups:{},downloadablePrintfiles:{},activeGroupId:null,activePlacement:null,activeSize:null,activeColor:null,sceneDesign:null,activeSceneId:null};return e?t:Ii(Ii({},t),{pushFlowFooterUpdateFunction:null,pushFlowTitleUpdateFunction:null,pushFlowParams:null,pushFlowContinue:null,pushFlowMainImageSrc:null})},Li={state:ki(),namespaced:!0,mutations:(di={},Si(di,Zt.q,(function(e){Object.assign(e,ki(!0))})),Si(di,Zt.o,(function(e){e.downloadableMockups={}})),Si(di,Zt.p,(function(e){e.productMockupFiles={}})),Si(di,Zt.z,(function(e,t){var i=t.key,n=t.value,r=t.shouldUnset;Object(O.b)(e,{key:i,value:n,shouldUnset:r})})),Si(di,Zt.A,(function(e,t){E.default.set(e.productMockupFiles,t.generatorVariantId,t)})),Si(di,Zt.x,(function(e,t){var i=t.mockupFile,n=t.format,r=void 0===n?"png":n;e.downloadableMockups[r]||(e.downloadableMockups[r]={}),E.default.set(e.downloadableMockups[r],i.generatorVariantId,i)})),Si(di,Zt.y,(function(e,t){var i=t.printfileFile,n=t.format,r=void 0===n?"png":n;e.downloadablePrintfiles[r]||(e.downloadablePrintfiles[r]={}),E.default.set(e.downloadablePrintfiles[r],i.placementId,i)})),Si(di,Zt.H,(function(e,t){e.usedDesignPlacementNames=t})),Si(di,Zt.C,(function(e,t){e.pushFlowFooterUpdateFunction=t})),Si(di,Zt.F,(function(e,t){e.pushFlowTitleUpdateFunction=t})),Si(di,Zt.E,(function(e,t){e.pushFlowParams=t})),Si(di,Zt.B,(function(e,t){e.pushFlowContinue=t})),Si(di,Zt.D,(function(e,t){e.pushFlowMainImageSrc=t})),Si(di,Zt.G,(function(e,t){e.sceneDesign=t})),Si(di,Zt.t,(function(e,t){e.activeGroupId=t})),Si(di,Zt.u,(function(e,t){e.activePlacement=t})),Si(di,Zt.w,(function(e,t){e.activeSize=t})),Si(di,Zt.s,(function(e,t){e.activeColor=t})),Si(di,Zt.v,(function(e,t){e.activeSceneId=t})),di),getters:(hi={},Si(hi,Zt.h,(function(e){return function(t){return Object(O.a)(e,{key:t})}})),Si(hi,Zt.c,(function(e){return e.groups.find((function(t){return t.id===e.activeGroupId}))})),Si(hi,Zt.r,(function(e){return e.sceneDesign})),Si(hi,Zt.n,(function(e){return e.pushFlowMainImageSrc})),Si(hi,Zt.m,(function(e){return e.productMockupFiles})),Si(hi,Zt.I,(function(e,t,i){var n,r,a=i.designer.mockupModule;return null!==(n=null===(r=t[Zt.c])||void 0===r?void 0:r.generatorVariants.filter((function(t){var i=!e.activeColor||!t.color||!Object.keys(a.selectedColors).length||Object.keys(a.selectedColors).includes(t.color),n=!e.activeSize||!t.size||!a.selectedSizes.length||a.selectedSizes.includes(t.size);return i&&n&&t.active&&a.usedDesignPlacementIds.includes(t.placement)})))&&void 0!==n?n:[]})),Si(hi,Zt.b,(function(e,t){var i,n;if(!e.groups.length)return null;if(!e.activePlacement)return null;var r=null!==(i=null===(n=t[Zt.I])||void 0===n?void 0:n.filter((function(t){var i=!t.color||!e.activeColor||e.activeColor===t.color,n=!t.size||!e.activeSize||e.activeSize===t.size;return i&&n&&t.active&&e.activePlacement===t.placement})))&&void 0!==i?i:[];return PF.DEV&&1!==(null==r?void 0:r.length)&&console.error("activeGeneratorVariant should be 1",r),r[0]})),Si(hi,Zt.d,(function(e,t){var i;if(!e.groups.length||!Object.keys(e.productMockupFiles).length)return null;var n=null===(i=t[Zt.b])||void 0===i?void 0:i.id;return n?e.productMockupFiles[n]:null})),Si(hi,Zt.f,(function(e){return function(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";return null!==(t=e.downloadableMockups[i])&&void 0!==t?t:{}}})),Si(hi,Zt.g,(function(e){return function(){var t,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"png";return null!==(t=e.downloadablePrintfiles[i])&&void 0!==t?t:{}}})),Si(hi,Zt.j,(function(e,t,i){var n=t[Zt.h](Kt.c.PREVIOUS_PRODUCT_OPTIONS);if(!n)return!1;var r=i.designer.mockupModule;return!(Object(yi.isEqual)(Object(yi.sortBy)(r.mockupProduct.productId),Object(yi.sortBy)(n.productId))&&Object(yi.isEqual)(Object(yi.sortBy)(r.usedDesignPlacementIds),Object(yi.sortBy)(n.placements))&&Object(yi.isEqual)(Object(yi.sortBy)(Object.keys(r.selectedColors)),Object(yi.sortBy)(n.colorNames))&&Object(yi.isEqual)(Object(yi.sortBy)(r.selectedSizes),Object(yi.sortBy)(n.sizeNames))&&Object(yi.isEqual)(Object(yi.sortBy)(r.usedTemplateIds),Object(yi.sortBy)(n.templateIds)))})),hi),actions:(pi={},Si(pi,Zt.l,(function(e){return Ti(regeneratorRuntime.mark((function t(){var i,n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state,n=e.rootState.designer.mockupModule,!i.groups.length||e.getters[Zt.j]){t.next=6;break}return t.next=5,e.dispatch(Zt.k);case 5:return t.abrupt("return");case 6:return a={productId:n.mockupProduct.productId,placements:n.usedDesignPlacementIds,colorNames:Object.keys(n.selectedColors),sizeNames:n.selectedSizes,templateIds:n.usedTemplateIds},t.prev=7,t.next=10,c=void 0,u=void 0,d=void 0,h=void 0,p=void 0,c=(l=a).productId,u=l.placements,d=l.colorNames,h=l.sizeNames,p=l.templateIds,Object(V.a)("mockup-maker/get-generator-mockup-groups",{productId:c,placements:u,colorNames:d,sizeNames:h,templateIds:p});case 10:r=t.sent,t.next=16;break;case 13:t.prev=13,t.t0=t.catch(7),Object(k.a)(t.t0);case 16:if(r.groups.length){t.next=20;break}throw o="Product does not have transparent mockups",console.error(o),o;case 20:return e.commit(Zt.z,{key:Kt.c.PREVIOUS_PRODUCT_OPTIONS,value:a}),e.commit(Zt.z,{key:Kt.c.HAS_ADVANCED_TEMPLATE,value:r.isAdvanced}),i.usedDesignPlacementNames=r.placementNames,i.groups=r.groups.map((function(e){return r.isAdvanced&&(e.name="".concat(e.name," - ").concat(e.generatorVariants[0].option)),n.mockupProduct.type===s.a.TYPE_MUG&&(e.name="".concat(e.name," - ").concat(e.generatorVariants[0].option," - ").concat(e.generatorVariants[0].size)),new $t(e)})),i.activeGroupId=i.groups[0].id,n.mockupProduct.type!==s.a.TYPE_MUG&&(i.activeSize=n.selectedSizes[0]),i.activeColor=Object.keys(n.selectedColors)[0],i.activePlacement=n.usedDesignPlacementIds[0],t.next=30,e.dispatch(Zt.k);case 30:case"end":return t.stop()}var l,c,u,d,h,p}),t,null,[[7,13]])})))()})),Si(pi,Zt.k,(function(e){return Ti(regeneratorRuntime.mark((function t(){var i,n,r,a,o,s,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state,n=e.rootState.designer.mockupModule,r=e.getters[Zt.I].map((function(e){return e.id})),a=Object.keys(i.productMockupFiles).map((function(e){return parseInt(e)})),!(r.length&&a.length&&r.every((function(e){return a.includes(e)})))){t.next=6;break}return t.abrupt("return");case 6:return(o=function(t){return e.commit(Zt.z,{key:Kt.c.IS_LOADING,value:t})})(!0),s=fi({mockupProductDesign:n.mockupProductDesign,mockupProduct:n.mockupProduct,usedDesignPlacements:i.usedDesignPlacementNames,selectedSizes:n.selectedSizes,selectedColors:n.selectedColors,generatorVariants:e.getters[Zt.I],isAdvanced:e.getters[Zt.h](Kt.c.HAS_ADVANCED_TEMPLATE)}).toArray({forRpc:!0,withoutSyncData:!0}),t.next=11,Jt({designData:s});case 11:return l=t.sent,t.next=14,new Promise((function(t,i){var n=function(i){var n,r=bi(i);try{for(r.s();!(n=r.n()).done;){var a=n.value;e.commit(Zt.A,gi.a.fromArray(a))}}catch(e){r.e(e)}finally{r.f()}t()};l.files?n(l.files):ii(l,(function(e){return ei({cacheKey:e}).then((function(e){var t=e.files;return n(t)}))}),(function(e){Object(k.a)(e),i(e)}))})).finally((function(){return o(!1)}));case 14:case"end":return t.stop()}}),t)})))()})),Si(pi,Zt.e,(function(e,t){return Ti(regeneratorRuntime.mark((function i(){var n,r,a,o,s,l;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.format,r=t.mockupData,a=e.state,o=r.map((function(e){return e.generatorMockupVariantId})),!a.downloadableMockups[n]){i.next=7;break}if(s=Object.keys(a.downloadableMockups[n]).map((function(e){return parseInt(e)})),!o.every((function(e){return s.includes(e)}))){i.next=7;break}return i.abrupt("return");case 7:return i.prev=7,i.next=10,mi({sceneData:Object(tt.i)(a.sceneDesign.designData),mockupOrderIndex:a.sceneDesign.getMockupOrderIndex(),format:n,mockupData:r});case 10:return l=i.sent,i.next=13,new Promise((function(t,i){ii(l,function(){var i=Ti(regeneratorRuntime.mark((function i(r){var a,o,s,l,c;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,_i({cacheKey:r});case 2:a=i.sent,o=a.files,s=bi(o);try{for(s.s();!(l=s.n()).done;)c=l.value,e.commit(Zt.x,{mockupFile:vi.a.fromArray(c),format:n})}catch(e){s.e(e)}finally{s.f()}t();case 7:case"end":return i.stop()}}),i)})));return function(e){return i.apply(this,arguments)}}(),(function(e){Object(k.a)(e),i()}))}));case 13:i.next=18;break;case 15:i.prev=15,i.t0=i.catch(7),Object(k.a)(i.t0);case 18:case"end":return i.stop()}}),i,null,[[7,15]])})))()})),pi)},Ai=i("Fpf/");function Ri(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ni(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ri(a,n,r,o,s,"next",e)}function s(e){Ri(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Di(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function xi(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?Di(Object(i),!0).forEach((function(t){Fi(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):Di(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function Fi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Mi,Bi,Vi=function(e){var t={mockupType:null,mockupProduct:null,mockupProductDesign:null,selectedSizes:null,selectedColors:null,usedDesignPlacementIds:[],usedTemplateIds:null};return e?t:xi(xi({},t),{accessPromise:null})},ji={state:Vi(),namespaced:!0,modules:{mockupMaker:Li},mutations:(Ei={},Fi(Ei,qt.j,(function(e){Object.assign(e,Vi(!0))})),Fi(Ei,qt.k,(function(e,t){var i=t.key,n=t.value,r=t.shouldUnset;Object(O.b)(e,{key:i,value:n,shouldUnset:r})})),Fi(Ei,qt.n,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.mockupType=t})),Fi(Ei,qt.l,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.mockupProduct=t})),Fi(Ei,qt.o,(function(e,t){var i=t.selectedSizes,n=t.selectedColors,r=t.usedTemplateIds;e.selectedSizes=i||[],e.selectedColors=n||{},e.usedTemplateIds=r})),Fi(Ei,qt.m,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e.mockupProductDesign=t})),Fi(Ei,qt.p,(function(e,t){e.usedDesignPlacementIds=t.filter((function(e){return![Wt.a.TYPE_LABEL_INSIDE,Wt.a.TYPE_LABEL_OUTSIDE,Wt.a.TYPE_HANG_TAG].includes(e)}))})),Ei),getters:(Oi={},Fi(Oi,qt.b,(function(e){return function(t){return Object(O.a)(e,{key:t})}})),Fi(Oi,qt.e,(function(e){return Object(O.a)(e,{key:Ht.a.HAS_CUSTOM_MOCKUP_ACCESS})||!1})),Fi(Oi,qt.i,(function(e){return e.mockupProduct})),Fi(Oi,qt.f,(function(e){var t;return(null===(t=e.selectedSizes)||void 0===t?void 0:t.length)>0})),Fi(Oi,qt.d,(function(e){return e.selectedColors&&Object.keys(e.selectedColors).length>0})),Fi(Oi,qt.g,(function(e){return e.mockupType===Ai.c})),Oi),actions:Fi({},qt.h,(function(e){var t=arguments;return Ni(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=t.length>1&&void 0!==t[1]&&t[1],!e.state.accessPromise||n){i.next=5;break}return i.next=4,e.state.accessPromise;case 4:return i.abrupt("return",i.sent);case 5:return i.prev=5,r=Yt(),e.state.accessPromise=r.then((function(e){return e.hasAccess})),i.next=10,r;case 10:return(a=i.sent).success||console.error("Something went wrong retrieving mockup access!"),e.commit(qt.k,{key:Ht.a.HAS_CUSTOM_MOCKUP_ACCESS,value:a.hasAccess||!1}),i.next=15,e.state.accessPromise;case 15:return i.abrupt("return",i.sent);case 18:i.prev=18,i.t0=i.catch(5),Object(k.a)(i.t0);case 21:case"end":return i.stop()}}),i,null,[[5,18]])})))()}))},Ui=i("t8qe"),zi=i("0nZy"),Gi=i("86cz");function Hi(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var qi,Yi,Wi,Ki,Zi,Xi={state:{chooserElements:[],activeView:zi.d},namespaced:!0,mutations:(Mi={},Hi(Mi,Ui.i,(function(e,t){e.chooserElements=t})),Hi(Mi,Ui.h,(function(e,t){e.activeView=t})),Hi(Mi,Ui.j,(function(e,t){var i=t.key,n=t.value;Object(O.b)(e,{key:i,value:n,shouldUnset:!n,stateFlagProp:zi.a})})),Hi(Mi,Ui.k,(function(e,t){var i=t.key,n=t.value,r=t.shouldUnset;Object(O.b)(e,{key:i,value:n,shouldUnset:r,stateFlagProp:zi.l})})),Hi(Mi,Ui.g,(function(e){e[zi.l]={}})),Mi),getters:(Bi={},Hi(Bi,Ui.d,(function(e){return function(t){return Object(O.a)(e,{key:t,stateFlagProp:zi.a})}})),Hi(Bi,Ui.b,(function(e){return e.chooserElements.filter((function(t){var i,n,r,a;return t.id===Gi.a.TYPE_MOCKUP?null==e||null===(i=e[zi.a])||void 0===i?void 0:i[zi.b.IS_PROMO_MOCKUP_PICKER_AVAILABLE]:t.id===Gi.a.TYPE_QUICKDESIGN?null==e||null===(n=e[zi.a])||void 0===n?void 0:n[zi.b.IS_QUICK_DESIGNS_PICKER_AVAILABLE]:t.id===Gi.a.LICENSED_ASSET?null==e||null===(r=e[zi.a])||void 0===r?void 0:r[zi.b.IS_LICENSED_ASSET_PICKER_AVAILABLE]:!zi.g.includes(t.id)||(null==e||null===(a=e[zi.a])||void 0===a?void 0:a[zi.b.IS_MOCKUP_MAKER_MODE])}))})),Hi(Bi,Ui.f,(function(e){return function(t){return Object(O.a)(e,{key:t,stateFlagProp:zi.l})}})),Hi(Bi,Ui.c,(function(e){return e.activeView})),Bi)},Qi=i("stj/"),$i=i("wo5H");function Ji(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var en,tn,nn={state:{activeView:null,buttons:[{type:Qi.b.TEXT,title:dlang("generator","Text"),iconClass:"pf-i-square-edit-outline",width:null},{type:Qi.b.COLOR,title:dlang("generator","Color"),iconClass:"pf-i-bugle",width:null},{type:Qi.b.FONT,title:dlang("generator","Font"),iconClass:"pf-i-format-size",width:null},{type:Qi.b.TRANSFORM,title:dlang("generator","Transform"),iconClass:"pf-i-vector-square",width:null},{type:Qi.b.POSITION,title:dlang("generator","Position"),iconClass:"pf-i-fit-to-page-outline",width:null},{type:Qi.b.OUTLINE,title:dlang("generator","Outline"),iconClass:"outline-icon",width:null},{type:Qi.b.SHADOW,title:dlang("generator","Shadow"),iconClass:"pf-i-text-shadow",width:null},{type:Qi.b.CROP,title:dlang("generator","Crop"),iconClass:"pf-i-crop",width:null},{type:Qi.b.REMOVE_BACKGROUND,title:dlang("generator","Remove background"),iconClass:"pf-i-auto-fix",width:null},{type:Qi.b.EMBROIDERY_DETAILS,title:dlang("generator","Embroidery details"),iconClass:"embroidery-details-icon",width:null},{type:Qi.b.PATTERN,title:dlang("generator","Pattern"),iconClass:"pf-i-texture",width:null}],layerTypes:(Ji(Wi={},$i.l.TEXTBOX,[Qi.b.TEXT,Qi.b.COLOR,Qi.b.FONT,Qi.b.TRANSFORM,Qi.b.POSITION,Qi.b.OUTLINE,Qi.b.SHADOW]),Ji(Wi,$i.l.CLIPART,[Qi.b.COLOR,Qi.b.TRANSFORM,Qi.b.POSITION]),Ji(Wi,$i.l.FILE,[Qi.b.TRANSFORM,Qi.b.POSITION,Qi.b.CROP,Qi.b.REMOVE_BACKGROUND]),Ji(Wi,s.a.TECHNIQUE_EMBROIDERY,(Ji(qi={},$i.l.TEXTBOX,[Qi.b.TEXT,Qi.b.FONT,Qi.b.EMBROIDERY_DETAILS,Qi.b.TRANSFORM,Qi.b.POSITION]),Ji(qi,$i.l.FILE,[Qi.b.EMBROIDERY_DETAILS,Qi.b.TRANSFORM,Qi.b.POSITION]),qi)),Ji(Wi,$i.a,(Ji(Yi={},$i.l.CLIPART,[Qi.b.COLOR,Qi.b.TRANSFORM,Qi.b.POSITION,Qi.b.PATTERN]),Ji(Yi,$i.l.FILE,[Qi.b.TRANSFORM,Qi.b.POSITION,Qi.b.CROP,Qi.b.PATTERN,Qi.b.REMOVE_BACKGROUND]),Yi)),Ji(Wi,$i.l.GROUP_QUICK_DESIGN,[Qi.b.POSITION]),Ji(Wi,$i.l.GROUP_LOGO_TEMPLATE,[Qi.b.POSITION]),Wi)},namespaced:!0,mutations:(Ki={},Ji(Ki,Qi.h,(function(e,t){e.activeView=t})),Ji(Ki,Qi.i,(function(e,t){var i=t.type,n=t.width;if(i&&n){var r=Object(yi.findIndex)(e.buttons,(function(e){return e.type===i}));Object.assign(e.buttons[r],{width:n})}})),Ki),actions:Ji({},Qi.g,(function(e,t){e.commit(Qi.h,t)})),getters:(Zi={},Ji(Zi,Qi.c,(function(e){return e.activeView})),Ji(Zi,Qi.d,(function(e){return e.buttons})),Ji(Zi,Qi.f,(function(e){return e.layerTypes})),Zi)},rn=i("+XVp");function an(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var on={state:{type:null,featureFlags:{}},modules:{productModule:d,assetsModule:Gt,mockupModule:ji,layerPickerModule:Xi,toolbarModule:nn,layersModule:I},namespaced:!0,mutations:(en={},an(en,rn.f,(function(e,t){e.type=t})),an(en,rn.e,(function(e,t){var i=t.featureFlagName,n=t.featureFlagValue;e.featureFlags[i]=n})),en),getters:(tn={},an(tn,rn.c,(function(e){return e.type})),an(tn,rn.b,(function(e){return function(t){return e.featureFlags[t]||!1}})),tn)},sn=(i("NhST"),i("wy2R"),i("gqyd")),ln=i("Iy0a"),cn=i("A+LN"),un=i("GSnq"),dn=i("SaSb");function hn(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function pn(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function fn(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function gn(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){fn(a,n,r,o,s,"next",e)}function s(e){fn(a,n,r,o,s,"throw",e)}o(void 0)}))}}function mn(){Object(a.d)(rn.a)&&Object(a.f)(rn.a),_n()}function _n(){Object(a.d)(rn.a)||Object(a.e)(rn.a,on,{skipIfAlreadyRegistered:!0})}function vn(){return yn.apply(this,arguments)}function yn(){return(yn=gn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[cn.h,cn.f,cn.e,cn.m,cn.i,cn.k,cn.g,cn.l].map((function(e){return new un.a({flagName:e,targetType:cn.w.ENVIRONMENT})})),e.next=3,cn.z(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function bn(e){return Pn.apply(this,arguments)}function Pn(){return(Pn=gn(regeneratorRuntime.mark((function e(t){var i,n=this,r=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.length>1&&void 0!==r[1]?r[1]:100,e.abrupt("return",new Promise((function(e){(function i(n){var r=this;t()?e():setTimeout((function(){return i.call(r,n)}),n)}).call(n,i)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Cn(e,t){var i,n=e.getTemplates(),r=e.getDesignData(),a=n.getSelectedTemplate().getKey(),o=null===(i=r.templates[a])||void 0===i?void 0:i.toArray({forRpc:!0}).layers;o=Object.values(o).map((function(e){return e.type===sn.a.TYPE&&(delete e.url,delete e.svg),e.type===Ai.a&&e.object===ln.a.BE_OBJECT&&delete e.url,delete e.quickDesignId,delete e.groupId,delete e.groupType,e}));var s=e.getDesignFill(e.getSelectedPlacementId());return s&&(t&&wn(s),o.unshift(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(i),!0).forEach((function(t){pn(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):hn(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({type:b.a.TYPE_FILL},s))),o}function Tn(e){return[Wt.a.DESIGN_FILL_TYPE_COLOR,Wt.a.DESIGN_FILL_TYPE_GRAPHIC,Wt.a.DESIGN_FILL_TYPE_GRADIENT].includes(null==e?void 0:e.designFillType)}function wn(e){e.designFillType===Wt.a.DESIGN_FILL_TYPE_GRAPHIC&&(e.isForCustomMockup=!0),delete e.designFillItem,delete e.designFillUrls}function In(e){Object(a.a)().commit(rn.d(rn.f),e)}function Sn(e,t){Object(a.a)().commit(rn.d(rn.e),{featureFlagName:e,featureFlagValue:t})}function En(e){return Object(a.a)().getters[rn.d(rn.b)](e)}function On(){return En(cn.j)&&Ln()&&!dn.a.isWindowSmallerThan(dn.a.MD)}function kn(){return Object(a.a)().getters[rn.d(rn.c)]===$i.n}function Ln(){return Object(a.a)().getters[rn.d(rn.c)]===$i.o}function An(){return Object(a.a)().getters[rn.d(rn.c)]===$i.p}function Rn(){return Object(a.a)().getters[rn.d(rn.c)]===$i.m}},mw8R:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("wRc6"),r=i("6JZw"),a=i("nF4n"),o=i("SvWC"),s=function(){this.items=[],this.sampleItems=[],this.incompleteItems=[],this.gift=null,this.recipient=new o.a};s.prototype=new r.a,s.prototype.toArrayKeys=["orderId","storeId","status","currency","isSample","sampleErrorType","sampleLogEntry","identity","displayShipping","handling","grandTotal","storeInWarehouse","forcedBranch","retailPriceData","allowedFulfillmentRegions","requiresSubscription"],s.prototype.lowestRetailPrice=.99,s.prototype.orderId=0,s.prototype.storeId=0,s.prototype.store=null,s.prototype.status="",s.prototype.currency="",s.prototype.discountPercent=0,s.prototype.isSample=null,s.prototype.sampleErrorType=null,s.prototype.sampleLogEntry=null,s.prototype.retailPriceData=null,s.prototype.allowedFulfillmentRegions=null,s.prototype.isCharged=null,s.prototype.identity="",s.prototype.displayShipping="",s.prototype.items=null,s.prototype.sampleItems=null,s.prototype.incompleteItems=null,s.prototype.recipient=null,s.prototype.handling=null,s.prototype.canHaveDuplicateBrandingItems=!1,s.prototype.couponCode="",s.prototype.isExemptDigitizationFee=!1,s.prototype.grandTotal=0,s.prototype.storeInWarehouse=!1,s.prototype.forcedBranch=null,s.prototype.requiresSubscription=!1,s.prototype.isEmpty=function(){return 0==this.items.length},s.prototype.getUrlShipping=function(e){var t="";return e&&(t="?ref="+e),this.getBaseUrl()+"shipping"+t},s.prototype.getUrlReview=function(e){var t="";return e&&(t="?ref="+e),this.getBaseUrl()+"review"+t},s.prototype.getUrlChangeSample=function(){return this.getBaseUrl()+"sample"},s.prototype.getBaseUrl=function(){return langUrl("/dashboard/order/")+(this.orderId>0?this.orderId+"/":"")},s.fromArray=function(e){var t=new s;return a.a.O2O(t,e),e.forcedBranch&&(t.forcedBranch=n.a.fromArray(e.forcedBranch)),t},s.STATUS_DRAFT="draft",s.STATUS_PENDING="pending",s.SAMPLE_ORDER_ERROR_TYPE_ITEM_LIMIT_EXCEEDED=1,s.SAMPLE_ORDER_ERROR_TYPE_AMOUNT_EXCEEDED=2,s.prototype.isManualOrder=null,window&&((globalThis||{}).PFItemsOrderItem=s)},n6mh:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6JZw"),r=i("wo5H"),a=i("boP+"),o=Class({__construct:function(){this.setUniqueId()},position:null,uniqueId:0,customizeKey:null,isCustomizable:!1,originalPosition:null,overrideImage:null,overrideImagePulse:null,parentLayerUniqueId:null,patternType:null,patternSpacing:null,flipX:null,flipY:null,generatorOptions:null,isExisting:null,quickDesignId:null,groupType:null,groupId:null,engravingStyle:null,disableCentering:!1,setUniqueId:function(){this.uniqueId=++o._instanceCounter},isOutOfBounds:function(){return this.position.isOutOfBounds()},isPartiallyOutOfBounds:function(){return this.position.isPartiallyOutOfBounds()},isHalfLayerOutOfBounds:function(){return this.position.isHalfLayerOutOfBounds()},getDefaultColor:function(){var e=Object(a.a)();switch(!0){case null==e?void 0:e.isBlackMug():return r.i;case null==e?void 0:e.isTouchTool():return r.g;case null==e?void 0:e.isJewelry():return r.h;default:return r.f}},getType:function(){},isSimple:function(){return!(this.position.rotation||this.patternType||this.flipX||this.flipY||this.isUpscaled||this.isRemovedBg||this.cropPosition)},isTextLayer:function(){return!1},isClipartLayer:function(){return!1},isLicensedAssetLayer:function(){return!1},isImageLayer:function(){return!1},isPropLayer:function(){return!1},isMockupLayer:function(){return!1},isTextLayerPartiallyOutOfBounds:function(){return this.isTextLayer()&&this.isPartiallyOutOfBounds()},isMockupLayerPartiallyOutOfBounds:function(){return this.isMockupLayer()&&this.isHalfLayerOutOfBounds()},isChanged:function(e){return!this.isConfigurationSame(e)||this.position.isDifferent(e.position)},wasMirrored:function(){return void 0===this.parentLayerUniqueId},toArray:function(){},getDPI:function(){},isVector:function(){},getOriginalClone:function(e){},getSourceWidth:function(){},getSourceHeight:function(){},getSourceDpi:function(){},getDefaultSize:function(e){var t=this.hasNaturalSize()?this.getSourceDpi():e,i=parseFloat((this.getSourceWidth()/t).toFixed(4)),n=parseFloat((this.getSourceHeight()/t).toFixed(4)),r=n<.75?.75/n:1,a=i<.75?.75/i:1,o=Math.max(a,r);return{width:i*o,height:n*o}},isConfigurationSame:function(e){},hasNaturalSize:function(){return!1},isValidForTechnique:function(e){return!0},getInitialScale:function(e){return 1},removeFromGroupType:function(){this.groupType=null,this.quickDesignId=null,this.groupId=null},addToGroupType:function(e,t){if("unavailableTechniques"in e)this.groupType=o.GROUP_QUICK_DESIGN;else{if(!("isSelected"in e))return void console.error("Unknown group type");this.groupType=o.GROUP_LOGO_TEMPLATE}this.quickDesignId=e.id,this.groupId=t},isCropPositionUpdateNeeded:function(){return!1}},n.a);o._instanceCounter=0,o.GROUP_QUICK_DESIGN=r.l.GROUP_QUICK_DESIGN,o.GROUP_LOGO_TEMPLATE=r.l.GROUP_LOGO_TEMPLATE,o.TYPE_FILL="designFill",window&&((globalThis||{}).PFComponentsGeneratorMockupLayer=o)},nBn9:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("cCrT"),r=i("nF4n"),a=i("97Au"),o=Class({__construct:function(e){var t={title:"Sign in",bodyContent:"You need to sign in to perform this action.",signInText:"Sign in",signUpText:"Sign up",signUpCallback:function(){return!0},showFooterContent:!0,pullLeftFooter:!1,extraButtons:!1,onClose:function(){ga("send","event","Sign up to continue pop-up","Exit clicked",window.location.pathname)}};r.a.O2O(t,e||{});var i=new a.a(t);i.setContent(Object(r.a)({tag:"div",els:[t.bodyContent]}));var n=this._getValidatedReturnUrl(t.returnUrl);t.showFooterContent&&i.setFooterContent(Object(r.a)({tag:"div",els:[!!t.signInText&&{tag:"a",className:"pf-btn pf-btn-secondary"+(t.pullLeftFooter?" pull-left":""),text:t.signInText,href:"/auth/?returnUrl="+encodeURIComponent(n)},!!t.signUpText&&{tag:"a",className:"pf-btn pf-btn-primary"+(t.pullLeftFooter?" pull-left":""),text:t.signUpText,href:"/auth/register/?returnUrl="+encodeURIComponent(n),onclick:t.signUpCallback},!!t.extraButtons&&t.extraButtons]})),i.show(),this._modal=i},_getValidatedReturnUrl:function(e){var t=new n.a(e||null);return t.path+(t.query.toString()&&"?"+t.query.toString())},getModalInstance:function(){return this._modal}});window&&((globalThis||{}).PFComponentsLoginPopup=o)},nrfP:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("97Au"),r=i("nF4n"),a=Class({_STITCH_COLORS:{white:dlang("generator","White"),black:dlang("generator","Black")},_DEFAULT_COLOR:"white",__construct:function(){var e=this,t=[],i=new n.a.Par;i.modalDialogClass="modal-stitch-color missing-stitch-color-popup";var a=new n.a(i);a.setHeaderContent(Object(r.b)("div","row pf-d-flex pf-pl-16 pf-mr-2 pf-mt-4",[Object(r.b)("h4","pf-my-0 pf-pl-2 pf-w-75",dlang("generator","Select a stitch color")),Object(r.b)("i",{className:"pf-i pf-i-close pf-i-32 pf-pointer pf-text-gray pf-ml-auto",onclick:function(e){a.remove(),i.onClose()}})]));var o,s=Object(r.b)("div","col-12 row row-flex pf-flex-wrap pf-pt-24 pf-mr-5 pf-sm-pl-24 pf-md-ml-16 pf-ml-0"),l=function(i){var n=Object(r.b)("input",{name:"stitchColor",className:"pf-mr-6",value:i,id:i+"1",type:"radio"});n.value=i,t.push(n);var a=Object(r.b)("label","row pf-ml-2 pf-mt-4 pf-h6",[n," ",Object(r.b)("p","",e._STITCH_COLORS[i])]).append(s);Object(r.b)("div",{className:"col pf-pl-16 pf-p-12 row row-flex btn btn-empty pf-btn-lg pf-rounded stitch-color-picker__type pf-border-light pf-border-2 text-left "+("white"===n.value?"pf-mr-24":""),onclick:function(){n.checked=!0,r.a.removeClassName(o,"disabled")}},[a,Object(r.b)("i","pf-i pf-i-drag-vertical pf-i-rotate-45 pf-i-32 pf-rounded pf-bg-light pf-border-light pf-mb-auto pf-ml-auto "+("white"===n.value?"pf-i-light":""))]).append(s)};for(var c in this._STITCH_COLORS)l(c);a.setContent(Object(r.b)("div","",[Object(r.b)("span",{className:"pf-ui-body",innerHTML:dlang("generator","<strong>Tip:</strong> Pick white for lighter designs and black for darker to make the stitches blend in. Do the opposite to make the stitch color pop.")}),s]));var u=Object(r.b)("div","container-fluid pf-d-block pf-d-flex pf-align-items-stretch pf-px-0 pf-pb-0",[o=Object(r.b)("a",{className:"pf-btn pf-btn-primary pf-ml-0 pf-mr-12 pf-mb-0 pf-w-auto disabled",onclick:function(e){for(var i in t)t[i].checked&&(document.getElementById(t[i].value).checked=!0);a.remove()}},lang("Select")),Object(r.b)("a",{className:"pf-btn pf-btn-secondary pf-w-auto",onclick:function(e){a.remove(),i.onClose()}},lang("Cancel"))]);a.setFooterContent(u),a.show()}});window&&((globalThis||{}).PFComponentsMissingStitchColorPopup=a)},nuUa:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return S}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),t.node=tag("div"),v(g(t),b,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,P).destroy(),v(this,P,null)}},{key:"setNewSearchedProps",value:function(e,t){_(this,P).setDataProp("items",e),_(this,P).setDataProp("showCtaButton",t)}},{key:"setActiveItems",value:function(e){_(this,P).setDataProp("activeItems",e)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"dropdown-input":function(){return Promise.all([i.e(1),i.e(200)]).then(i.bind(null,"MMOI"))}},t.template='\n            <dropdown-input\n                :items="items"\n                :placeholder="placeholder"\n                :hasInlineSearch="hasInlineSearch"\n                :inlineSearchPlaceholder="inlineSearchPlaceholder"\n                :isMultiselectable="isMultiselectable"\n                :showTags="showTags"\n                :activeItems="activeItems"\n                :imageWidth="imageWidth"\n                :imageHeight="imageHeight"\n                :inputSearch="inputSearch"\n                :searchPlaceholder="searchPlaceholder"\n                :showCtaButton="showCtaButton"\n                :ctaButtonText="ctaButtonText"\n                :label="label"\n                :labelHelpText="labelHelpText"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :inputSize="inputSize"\n                :isRequired="isRequired"\n                :requiredErrorMessage="requiredErrorMessage"\n                :showValuesInline="showValuesInline"\n                :inlineValuesSeparator="inlineValuesSeparator"\n                :minimumSelectedValues="minimumSelectedValues"\n                :disabled="disabled"\n                :value="value"\n                :openDropdownUp="openDropdownUp"\n                :data-test="dataTest"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onSearchChange="emitEvent(\'onSearchChange\', $event)"\n                @onCtaButtonClick="emitEvent(\'onCtaButtonClick\', $event)"\n            />\n        ',t.initialData={items:_(this,b).items,placeholder:_(this,b).placeholder,hasInlineSearch:_(this,b).hasInlineSearch,inlineSearchPlaceholder:_(this,b).inlineSearchPlaceholder,isMultiselectable:_(this,b).isMultiselectable,showTags:_(this,b).showTags,activeItems:_(this,b).activeItems,imageWidth:_(this,b).imageWidth,imageHeight:_(this,b).imageHeight,inputSearch:_(this,b).inputSearch,searchPlaceholder:_(this,b).searchPlaceholder,showCtaButton:_(this,b).showCtaButton,ctaButtonText:_(this,b).ctaButtonText,label:_(this,b).label,labelHelpText:_(this,b).labelHelpText,infoIcon:_(this,b).infoIcon,infoIconDelay:_(this,b).infoIconDelay,infoIconName:_(this,b).infoIconName,inputSize:_(this,b).inputSize,isRequired:_(this,b).isRequired,requiredErrorMessage:_(this,b).requiredErrorMessage,showValuesInline:_(this,b).showValuesInline,inlineValuesSeparator:_(this,b).inlineValuesSeparator,minimumSelectedValues:_(this,b).minimumSelectedValues,disabled:_(this,b).disabled,value:_(this,b).value,openDropdownUp:_(this,b).openDropdownUp,dataTest:_(this,b).dataTest},t.emitEvent=function(e,t){_(r,b)[e]&&_(r,b)[e](t)},v(this,P,new n.a(t)),_(this,P).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.items=t.items||void 0,this.placeholder=t.placeholder||void 0,this.hasInlineSearch=t.hasInlineSearch||void 0,this.inlineSearchPlaceholder=t.inlineSearchPlaceholder||void 0,this.isMultiselectable=t.isMultiselectable||void 0,this.showTags=t.showTags||void 0,this.activeItems=t.activeItems||void 0,this.imageWidth=t.imageWidth||void 0,this.imageHeight=t.imageHeight||void 0,this.inputSearch=t.inputSearch||void 0,this.searchPlaceholder=t.searchPlaceholder||void 0,this.showCtaButton=t.showCtaButton||void 0,this.ctaButtonText=t.ctaButtonText||void 0,this.label=t.label||void 0,this.labelHelpText=t.labelHelpText||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.inputSize=t.inputSize||void 0,this.isRequired=t.isRequired||void 0,this.requiredErrorMessage=t.requiredErrorMessage||void 0,this.onChange=t.onChange||void 0,this.onSearchChange=t.onSearchChange||void 0,this.onCtaButtonClick=t.onCtaButtonClick||void 0,this.showValuesInline=t.showValuesInline||void 0,this.inlineValuesSeparator=t.inlineValuesSeparator||void 0,this.minimumSelectedValues=t.minimumSelectedValues||void 0,this.disabled=t.disabled||void 0,this.value=t.value||void 0,this.openDropdownUp=t.openDropdownUp||void 0,this.dataTest=t.dataTest||void 0}},nvjV:function(e,t,i){"use strict";i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return p})),i.d(t,"d",(function(){return f}));var n=i("xyjD"),r=i("1z/T"),a=i("8GdZ"),o=i("AoK4"),s=i.n(o);function l(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var c=function(){try{var e=window.localStorage.getItem(Object(n.d)(a.b));return e&&"[]"!==e?JSON.parse(e):null}catch(e){return null}},u=function(e){try{return JSON.parse(window.localStorage.getItem(Object(n.e)(a.b)))[e]||[]}catch(e){return[]}},d=function(e,t){var i=function(){try{return JSON.parse(window.localStorage.getItem(Object(n.e)(a.b)))||{}}catch(e){return{}}}(),r=i[t];r||(r=[]);var o=r.indexOf(e);o>-1&&r.splice(o,1),r.unshift(e),i[t]=r.slice(0,a.b.MAX_RECENT_SHOW);try{window.localStorage.setItem(Object(n.e)(a.b),JSON.stringify(i))}catch(e){console.warn("Could not save recent font in local storage!")}},h=function(e){return s.a.setInitialFonts(function(e){for(var t={},i=0,n=Object.values(e);i<n.length;i++){var a=n[i];(!window._USE_OLD_TEXT_LAYERS||window._USE_OLD_TEXT_LAYERS&&a["path-js"])&&(t[a.fontKey]=r.a.fromArray(a))}return t}(e[a.c.FONTS]),e[a.c.FONTS_JS_URLS],e[a.c.FONTS_TTF_URLS])},p=function(e){return e&&e[a.c.FONTS]&&e[a.c.FONTS_JS_URLS]&&e[a.c.FONTS_TTF_URLS]},f=function(e){var t;if(!p(e))throw new Error("Malformed fonts data!");return l(t={},a.c.FONTS,JSON.parse(e[a.c.FONTS])),l(t,a.c.FONTS_JS_URLS,JSON.parse(e[a.c.FONTS_JS_URLS])),l(t,a.c.FONTS_TTF_URLS,JSON.parse(e[a.c.FONTS_TTF_URLS])),t}},nvph:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({maxWidth:null,maxHeight:null,generatorVariant:null,template:null,isPrintfile:null,getDesignFill:null,lifelikeVariants:{},variantArea:null,designData:null});window&&((globalThis||{}).PFComponentsGeneratorMockupPreviewPar=n)},nwx2:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("E17x"),r=i("SaSb"),a=i("eYhR"),o=i("nF4n"),s=Class({items:null,tabNodes:null,_fixed:null,__construct:function(e,t){var i=this;this.items=[],this.tabNodes=[],this._fixed=t;var r=[];r.push("pf-tabs "+e),Object(n.b)()&&r.push("touch"),PF.WEBVIEW&&r.push("webview"),this.node=tag("ul",r.join(" ")),this._fixed&&(document.removeEventListener("scroll",this._scrollEvent),document.addEventListener("scroll",this._scrollEvent)),this._nodeWrap=tag("div","tab-wrap"),setTimeout((function(){i._resizeTabCheck(),i._scrollCheck()}),100),window.removeEventListener("resize",this._resizeTabCheck.bind(this)),window.addEventListener("resize",this._resizeTabCheck.bind(this)),this._nodeWrap.removeEventListener("scroll",this._scrollWrapEvent),this._nodeWrap.addEventListener("scroll",this._scrollWrapEvent)},_scrollEvent:function(e){var t=this,i=$(this.node).find(".nav-arrow.right"),n=$(this.node).find(".nav-arrow.left"),a=this.node.getBoundingClientRect().height+2*parseInt(this.node.style.borderWidth||0);if(this._nodeHolder||(this._nodeHolder=tag("div",{className:"pf-tabs-holder",style:{height:a+"px",marginTop:-a+"px"}}),this.node.parentNode.insertBefore(this._nodeHolder,this.node.nextSibling)),"none"!==window.getComputedStyle(this._nodeHolder).display){var o=this._nodeHolder.getBoundingClientRect(),s=$(".header").outerHeight(),l=$(".header .navigation-wrap").outerHeight(),c=o.top-a-(s-l)<0;if(document.querySelector(".catalog__product__tabs"))new IntersectionObserver((function(e){e[0].isIntersecting&&c?t._makeTabsSticky(s,i):t._makeTabsStatic(a,n,i)})).observe(document.querySelector(".catalog__product__tabs"));else c?this._makeTabsSticky(s,i):this._makeTabsStatic(a,n,i)}else r.a.isWindowBiggerThan(r.a.SIZES.XS)&&r.a.isWindowSmallerThan(r.a.SIZES.SM)&&n.hasClass("hidden")&&this.items.length>3&&i.removeClass("hidden")},_makeTabsSticky:function(e,t){this._nodeHolder.style.marginTop=0,o.a.addClassName(this.node,"fixed"),this.node.style.top=e+"px",window.innerWidth>580&&t.addClass("hidden")},_makeTabsStatic:function(e,t,i){this._nodeHolder.style.marginTop=-e+"px",o.a.removeClassName(this.node,"fixed"),this.node.style.top=0,t.hasClass("hidden")&&this.items.length>3&&i.removeClass("hidden")},_resizeTabCheck:function(){"fixed"!==window.getComputedStyle(this.node).position&&(this._nodeHolder&&(this._nodeHolder.style.marginTop=0),o.a.removeClassName(this.node,"fixed"),this.node.style.top=0),this._nodeWrap.scrollWidth<=this._nodeWrap.offsetWidth?$(this._nodeWrap).siblings(".nav-arrow").addClass("hidden"):this._scrollWrapEvent({target:this._nodeWrap})},_scrollCheck:function(){var e=!!$(this.node).find(".tab.active").length&&$(this.node).find(".tab.active")[0];if(e){var t=e.getBoundingClientRect().left,i=e.getBoundingClientRect().right,n=$(this._nodeWrap).siblings(".nav-arrow.left")[0].getBoundingClientRect().right-t,r=i-$(this._nodeWrap).siblings(".nav-arrow.right")[0].getBoundingClientRect().left,a=n>0?-n:r>0?r:0,o=Math.min(this._getMaxScroll(),this._nodeWrap.scrollLeft+a);$(this._nodeWrap).animate({scrollLeft:o},$(this.node).hasClass("webview")?0:200)}},_scrollWrapEvent:function(e){var t=$(e.target).siblings(".nav-arrow.left"),i=$(e.target).siblings(".nav-arrow.right");e.target.scrollLeft<1?t.addClass("hidden"):t.removeClass("hidden"),Math.ceil(e.target.scrollLeft)>=e.target.scrollWidth-e.target.clientWidth?i.addClass("hidden"):i.removeClass("hidden")},append:function(e){this.node.append(e),this.render()},render:function(){var e=this,t=this._nodeWrap?this._nodeWrap.scrollLeft:0;o.a.clearNode(this.node),o.a.clearNode(this._nodeWrap),this._nodeWrap.append(this.node),this.tabNodes=[];var i=function(t){var i=e.items[t],n=[],r=[i.caption];i.isActive&&n.push("active"),i.isDisabled&&n.push("disabled"),i.badge&&r.push(i.badge);var a=tag("li",{className:"tab "+n.join(" "),id:i.customId?"tab-"+i.customId:"",attr:i.dataTestTag?{"data-test":i.dataTestTag}:{}},[tag("a",{href:i.href},[i.icon?tag("span","",[i.icon]):"",tag("span","",r),i.subtitle?tag("span","",[i.subtitle]):""])]);if(a.onclick=e._nodeOnClick.bind(e,a,i),a._tabItem=i,i.tooltipTitle){a.title=i.tooltipTitle;var o={html:!0,trigger:"hover",placement:"top",animate:!0,delay:0,container:"body"};i.tooltipAutoShowDuration&&(o.trigger="manual"),$(a).tooltip(o),i.tooltipAutoShowDuration&&(setTimeout((function(){$(a).tooltip("show")}),1500),setTimeout((function(){$(a).tooltip("hide")}),i.tooltipAutoShowDuration))}e.tabNodes.push(a),a.append(e._nodeWrap)};for(var n in this.items)i(n);var r=tag("span","nav-arrow left hidden",[tag("i","pf-i pf-i-chevron-left pf-i-24")]);r.onclick=this._scrollLeft.bind(this),r.append(this.node);var a=tag("span","nav-arrow right hidden",[tag("i","pf-i pf-i-chevron-right pf-i-24")]);a.onclick=this._scrollRight.bind(this),a.append(this.node),this._nodeWrap.scrollLeft=t,this._resizeTabCheck(),this._scrollCheck()},_scrollLeft:function(){$(this._nodeWrap).animate({scrollLeft:Math.max(0,this._nodeWrap.scrollLeft-this._getScrollStep())},300)},_scrollRight:function(){$(this._nodeWrap).animate({scrollLeft:Math.min(this._getMaxScroll(),this._nodeWrap.scrollLeft+this._getScrollStep())},300)},_getScrollStep:function(){return this._nodeWrap.clientWidth/3},_getMaxScroll:function(){return this._nodeWrap.scrollWidth-this._nodeWrap.clientWidth},_nodeOnClick:function(e,t){if(t.isDisabled||this.markTabAsSelected(t),this._fixed&&this._nodeHolder&&"none"!==window.getComputedStyle(this._nodeHolder).display&&Math.abs(parseInt(this.node.style.top))>0){var i=this._nodeHolder.offsetTop-Math.abs(parseInt(this._nodeHolder.style.marginTop))-Math.abs(parseInt(this.node.style.top));$("html, body").animate({scrollTop:i},300)}return this._scrollCheck(),!t.onclick||t.onclick()},markTabAsSelected:function(e){for(var t in this.items)this.items[t].isActive=!1,o.a.removeClassName(this.tabNodes[t],"active");e&&(e.isActive=!0,o.a.addClassName(this._getTabNodeFromTabItem(e),"active"))},markTabAsSelectedById:function(e){for(var t in this.items){var i=this.items[t];if(i.customId===e)return void this.markTabAsSelected(i)}},_getTabNodeFromTabItem:function(e){for(var t in this.tabNodes){var i=this.tabNodes[t];if(i._tabItem.uniqueId===e.uniqueId)return i}return null},add:function(e){var t=new a.a;return o.a.O2O(t,e),this.items.push(t),this.render(),this},clear:function(){this.items=[],this.render()},setActiveTab:function(e){for(var t in this.tabNodes){if(this.tabNodes[t]._tabItem.uniqueId===e.uniqueId)return void this._nodeOnClick(this.tabNodes[t],e)}},getTabById:function(e){for(var t in this.items)if(this.items[t].customId===e)return this.items[t];return null},getActiveTab:function(){for(var e in this.items)if(this.items.hasOwnProperty(e)&&this.items[e].isActive)return this.items[e];return null}},o.a.Base);window&&((globalThis||{}).PFComponentsTabs=s)},o5cA:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("7QI8"),r=i("X5Ic"),a=i("wo5H"),o=i("boP+"),s={getDefaultFontSize:function(e,t){var i=Object(o.a)();return[r.a.TECHNIQUE_PROMO,a.n].includes(t)?a.k:i?i.isPhoneCase()||i.isSocks()||i.isEmbroidery()?.5:i.isMug()?1:i.isSticker()||e&&-1!==[n.a.TYPE_LABEL_OUTSIDE,n.a.TYPE_LABEL_INSIDE,n.a.TYPE_SLEEVE_LEFT,n.a.TYPE_SLEEVE_RIGHT,n.a.TYPE_HANG_TAG,n.a.TYPE_POCKET].indexOf(e)?.5:i.isJewelry()?.2:a.j:a.j}};(globalThis||{}).PFProductPushTextPickerHelpers=s},oAts:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ohgv"),r=i("iQ/s"),a=i("JA1v"),o=i("2+Fj"),s=i("nF4n"),l=Class({__construct:function(e){var t=e.productItem,i=e.variantItem,n=e.orderLineItem,r=e.extra||{},a=[];this._addProductDetailsToAttributes(a,t,i),a.push(this._buildAttribute(l.TYPE_SIZE,i.translatedSize));var o=this._createOptionsColorPickers(n,t);this._addColorPickersToAttributes(a,o),o=n.options,this._addStitchColorToAttributes(a,o,t),this._addInsidePocketOptionToAttributes(a,o,t.options),this._addNotesToAttributes(a,n.getNotes()),this._addExtrasToAttributes(a,r);var s=this._buildAttributeNodes(a);this.node=tag("div","product-detail-widget",s)},_addProductDetailsToAttributes:function(e,t,i){e.push(this._buildAttribute(l.TYPE_BRAND,t.brand)),i.color&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","",[l.getColorTitle(t)+": ",this._getColorSwatch(i),i.color])))},_addExtrasToAttributes:function(e,t){var i;for(i in t)e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","",[i?i+": ":"",t[i]])))},_addNotesToAttributes:function(e,t){t&&e.push(this._buildAttribute(o.a.NAME_NOTES,tag("i","",[t])))},_addColorPickersToAttributes:function(e,t){var i;for(i in 0!==Object.keys(t).length&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","pf-my-8 pf-pt-8 pf-border-top",dlang("dashboard","Thread colors")))),t){var n,r=!0;for(n in e)e[n][i]&&(e[n][i].push(t[i]),r=!1);r&&e.push(this._buildAttribute(i,[t[i]]))}0!==Object.keys(t).length&&e.push(this._buildAttribute(l.TYPE_BUILT,tag("div","pf-mb-8")))},_addStitchColorToAttributes:function(e,t,i){var r;if(t[o.a.OPTION_STITCH_COLOR]){var a=t[o.a.OPTION_STITCH_COLOR],s=null==i||null===(r=i.options[o.a.OPTION_STITCH_COLOR])||void 0===r?void 0:r.values[a],c=n.a.ucFirst(null!=s?s:a),u=i.isPillow()?l.TYPE_ZIPPER_STITCH_COLOR:o.a.OPTION_STITCH_COLOR;e.push(this._buildAttribute(u,c))}},_addInsidePocketOptionToAttributes:function(e,t,i){if(t[o.a.OPTION_INSIDE_POCKET]){var n=t[o.a.OPTION_INSIDE_POCKET];i[o.a.OPTION_INSIDE_POCKET].values[n]&&e.push(this._buildAttribute(o.a.OPTION_INSIDE_POCKET,i[o.a.OPTION_INSIDE_POCKET].values[n]))}},_buildAttributeNodes:function(e){var t,i=[];for(t in e)for(var n in e[t])if(n!==l.TYPE_BUILT){var r=e[t][n];r&&i.push(tag("div","",[this._getTranslation(n)+": ",r]))}else i.push(e[t][n]);return i},_getColorPicker:function(e,t){var i=new r.a;return i.colors=e,i.showTextSwatches=t,new a.a(i)},_getColorSwatch:function(e){return tag("span","swatches detail",[tag("span","swatches__item",[tag("span",{style:{background:e.colorCode}}),e.colorCode2?tag("span",{style:{background:e.colorCode2}}):""])])},_buildAttribute:function(e,t){var i={};return i[e]=t,i},_getTranslation:function(e){switch(e){case l.TYPE_BRAND:return dlang("products","Brand");case l.TYPE_SIZE:return dlang("products","Size");case o.a.NAME_THREAD_COLORS:case o.a.NAME_TEXT_THREAD_COLORS_APPAREL:case o.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK:case o.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER:case o.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER:case o.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS_INSIDE_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_INSIDE_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS:case o.a.NAME_THREAD_COLORS_APPAREL:case o.a.NAME_THREAD_COLORS_APPAREL_BACK:case o.a.NAME_THREAD_COLORS_CHEST_LEFT:case o.a.NAME_THREAD_COLORS_CHEST_CENTER:case o.a.NAME_THREAD_COLORS_LARGE_CENTER:case o.a.NAME_THREAD_COLORS_CORNER_LEFT:case o.a.NAME_THREAD_COLORS_CORNER_RIGHT:case o.a.NAME_THREAD_COLORS_INSIDE_LEFT:case o.a.NAME_THREAD_COLORS_INSIDE_RIGHT:case o.a.NAME_THREAD_COLORS_OUTSIDE_LEFT:case o.a.NAME_THREAD_COLORS_OUTSIDE_RIGHT:return clang("Thread colors","Flat");case o.a.NAME_THREAD_COLORS_3D:return clang("Thread colors","3D Puff");case o.a.NAME_THREAD_COLORS_LEFT:case o.a.NAME_TEXT_THREAD_COLORS_LEFT:return clang("Thread colors","Left");case o.a.NAME_THREAD_COLORS_RIGHT:case o.a.NAME_TEXT_THREAD_COLORS_RIGHT:return clang("Thread colors","Right");case o.a.NAME_THREAD_COLORS_BACK:case o.a.NAME_TEXT_THREAD_COLORS_BACK:return clang("Back of an object","Back");case o.a.OPTION_STITCH_COLOR:return dlang("products","Stitch color");case l.TYPE_ZIPPER_STITCH_COLOR:return dlang("products","Zipper & Stitch color");case o.a.NAME_NOTES:return dlang("products","Notes");case o.a.NAME_EMBROIDERY_FONT:return dlang("products","Font");case o.a.OPTION_INSIDE_POCKET:return dlang("products","Inside pocket");default:return""}},_isColor:function(e){return[o.a.NAME_THREAD_COLORS_3D,o.a.NAME_THREAD_COLORS_LEFT,o.a.NAME_THREAD_COLORS_RIGHT,o.a.NAME_THREAD_COLORS_BACK,o.a.NAME_THREAD_COLORS,o.a.NAME_THREAD_COLORS_APPAREL,o.a.NAME_THREAD_COLORS_APPAREL_BACK,o.a.NAME_THREAD_COLORS_CHEST_CENTER,o.a.NAME_THREAD_COLORS_LARGE_CENTER,o.a.NAME_THREAD_COLORS_CHEST_LEFT,o.a.NAME_THREAD_COLORS_CORNER_LEFT,o.a.NAME_THREAD_COLORS_CORNER_RIGHT,o.a.NAME_THREAD_COLORS_INSIDE_LEFT,o.a.NAME_THREAD_COLORS_INSIDE_RIGHT,o.a.NAME_THREAD_COLORS_OUTSIDE_LEFT,o.a.NAME_THREAD_COLORS_OUTSIDE_RIGHT].indexOf(e)>=0||this._isTextColor(e)},_isTextColor:function(e){return[o.a.NAME_TEXT_THREAD_COLORS,o.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT,o.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER,o.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER,o.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT,o.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_INSIDE_LEFT,o.a.NAME_TEXT_THREAD_COLORS_INSIDE_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_LEFT,o.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_LEFT,o.a.NAME_TEXT_THREAD_COLORS_RIGHT,o.a.NAME_TEXT_THREAD_COLORS_BACK,o.a.NAME_TEXT_THREAD_COLORS_APPAREL,o.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK].indexOf(e)>=0},_createOptionsColorPickers:function(e,t){var i={},n=null;for(var r in e.options)if(r in t.options){if(n=e.options[r],!(this._isColor(r)&&n&&n.length>0))continue;i[r]=this._getColorPicker(n,this._isTextColor(r))}return i}},s.a.Base);l.TYPE_BRAND="brand",l.TYPE_SIZE="size",l.TYPE_ZIPPER_STITCH_COLOR="zipper_stitch_color",l.TYPE_BUILT="built",l.getColorTitle=function(e){return e.isFramedPoster()?dlang("products","Frame color"):e.hasHandleColor()?dlang("products","Handle color"):e.hasPipingColor()?dlang("products","Piping color"):dlang("products","Color")},window&&((globalThis||{}).PFComponentsProductDetails=l)},oclZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({key:"",_timeouts:{},setKey:function(e){this.key=e},clearTimeout:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){this._timeouts[this.key]&&clearTimeout(this._timeouts[this.key])})),schedule:function(e,t){this._timeouts[this.key]=setTimeout(e,t||200)}});n.instance=null,n.getInstance=function(){return n.instance||(n.instance=new n),n.instance},n.delay=function(e,t,i){var r=n.getInstance();r.setKey(e),r.clearTimeout(),r.schedule(t,i)},(globalThis||{}).PFUtilsDelayer=n},ocsD:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"z",(function(){return r})),i.d(t,"q",(function(){return a})),i.d(t,"o",(function(){return o})),i.d(t,"p",(function(){return s})),i.d(t,"A",(function(){return l})),i.d(t,"x",(function(){return c})),i.d(t,"y",(function(){return u})),i.d(t,"H",(function(){return d})),i.d(t,"C",(function(){return h})),i.d(t,"F",(function(){return p})),i.d(t,"E",(function(){return f})),i.d(t,"B",(function(){return g})),i.d(t,"D",(function(){return m})),i.d(t,"G",(function(){return _})),i.d(t,"t",(function(){return v})),i.d(t,"u",(function(){return y})),i.d(t,"w",(function(){return b})),i.d(t,"s",(function(){return P})),i.d(t,"v",(function(){return C})),i.d(t,"h",(function(){return T})),i.d(t,"c",(function(){return w})),i.d(t,"r",(function(){return I})),i.d(t,"n",(function(){return S})),i.d(t,"m",(function(){return E})),i.d(t,"I",(function(){return O})),i.d(t,"b",(function(){return k})),i.d(t,"d",(function(){return L})),i.d(t,"f",(function(){return A})),i.d(t,"g",(function(){return R})),i.d(t,"j",(function(){return N})),i.d(t,"l",(function(){return D})),i.d(t,"k",(function(){return x})),i.d(t,"e",(function(){return F})),i.d(t,"i",(function(){return M}));var n="designer/mockupModule/mockupMaker/",r="m_setMockupMakerFlag",a="m_resetState",o="m_resetDownloadFiles",s="m_resetProductMockupFiles",l="m_setProductMockupFile",c="m_setDownloadableMockupFile",u="m_setDownloadablePrintfileFile",d="m_setUsedDesignPlacementNames",h="m_setPushFlowFooterUpdateFunction",p="m_setPushFlowTitleUpdateFunction",f="m_setPushFlowParams",g="m_setPushFlowContinue",m="m_setPushFlowMainImageSrc",_="m_setSceneDesign",v="m_setActiveGroupId",y="m_setActivePlacement",b="m_setActiveSize",P="m_setActiveColor",C="m_setActiveSceneId",T="g_getMockupMakerFlag",w="g_activeGroup",I="g_sceneDesign",S="g_pushFlowMainImageSrc",E="g_productMockupFiles",O="g_validGeneratorVariants",k="g_activeGeneratorVariant",L="g_activeProductMockup",A="g_getDownloadableMockupFiles",R="g_getDownloadablePrintfileFiles",N="g_hasProductOptionsChanged",D="a_loadGeneratorMockupGroups",x="a_loadCustomMockupGroup",F="a_createMockupGenerationTask";function M(e){return n+e}},oi7h:function(e,t,i){"use strict";i.d(t,"a",(function(){return Qn}));var n=i("6t3j"),r=i("QLN8"),a=Class({variableProductId:"dimension2",variablePageType:"dimension3",variableTotalValue:"dimension4",_setVariable:function(e,t){PF.DEV?console.log("GA variable set. "+e+" => "+t):ga("set",e,t)},trackProductView:function(e){var t,i=(new n.a).getCachedProductById(e.productId),a=new r.a;t=i.mainCategoryId&&a.getById(i.mainCategoryId)?a.getById(i.mainCategoryId).name:a.getById(i.categoryIds[0]).name,this._setVariable(this.variableProductId,e.productId+"_"+e.variantId),this._setVariable(this.variablePageType,"product"),this._setVariable(this.variableTotalValue,""+e.priceData.price.toFixed(2)),PF.DEV||ga("send","event","Variant clicked",t,e.name)},trackPageView:function(e){e=e||window.location.pathname,this._setVariable("page",e),ga("send","pageview")}});(globalThis||{}).PFMarketingGoogleAnalytics=a;var o=i("oclZ"),s=i("SaSb"),l=i("nF4n"),c=i("Sucz"),u=i("YBfo"),d=Class({_maximumColumnCount:12,_slideHeight:0,_columnTitleHeight:0,_categoryId:0,_activeData:null,_columns:[],_columnSwitcher:[],_slickOptions:{arrows:!1,dots:!0,fade:!1,lazyLoad:"ondemand",infinite:!1,swipeToSlide:!0,responsive:[{breakpoint:u.a.BREAKPOINT_DOTS,settings:{dots:!0}}]},__construct:function(e,t){this._categoryId=t,this._data=e,this.node=tag("div"),this._getCachedData()?this._render():this._getData()},_getCachedData:function(){return this._data[this._categoryId]||null},_render:function(){this._activeData=this._getCachedData(),this._columns=this._activeData.columns.map(this._setColumns),l.a.clearNode(this.node),this.contentNode=tag("div","pf-pt-24 pf-pb-64",[tag("hr",{className:"pf-my-0 pf-mb-64",attr:{"aria-hidden":"true"}}),this._getTitle(),this.columnsNode=tag("div","row",[this._columns])]),this._renderTextSwitcher(),this.contentNode.append(this.node)},_renderTextSwitcher:function(){1!==this._columns.length&&setTimeout(function(){this._initSlider(),window.addEventListener("resize",this._reInitColumns,!0)}.bind(this))},removeResizeEvent:function(){window.removeEventListener("resize",this._reInitColumns,!0)},_filterEmptyColumns:function(e){return!!e.column.value.length&&e},_cacheData:function(e,t){t.columns=t.columns.filter(this._filterEmptyColumns),(t.title.value.length||t.columns.length)&&(this._data[this._categoryId]=t,e())},_getData:function(){Object(c.a)("product-catalog/get-category-text-block-info",{categoryId:null!==this._categoryId&&-1!==Number(this._categoryId)?this._categoryId:null},this._cacheData.bind(this,this._render))},_getColumnClass:function(e){return" col-sm-"+(1===e?6:this._maximumColumnCount/e)},_reInitColumns:function(){l.a.hasClassName(this.node,"text-block-initialized")&&(this._resetHeightValues(),l.a.removeClassName(this.node,"text-block-initialized"),this._initSlider())},_resetHeightValues:function(){this._slideHeight=0,this._columnTitleHeight=0},_initSlider:function(){if(this._columns.map(this._setTitleHeightValues),this._columns=this._columns.map(this._mapColumnTitles),this._columns.map(this._setColumnHeightValues),this._columns=this._columns.map(this._mapColumns),l.a.addClassName(this.node,"text-block-initialized"),window.innerWidth>u.a.BREAKPOINT_DOTS&&l.a.hasClassName(this.columnsNode,"slick-initialized"))return $(this.columnsNode).slick("destroy");window.innerWidth<=u.a.BREAKPOINT_DOTS&&!l.a.hasClassName(this.columnsNode,"slick-initialized")&&$(this.columnsNode).slick(this._slickOptions)},_setTitleHeightValues:function(e){var t=e.querySelector(".pf-h3");return t.style.minHeight="",this._columnTitleHeight=this._columnTitleHeight<t.offsetHeight?t.offsetHeight:this._columnTitleHeight,e},_setColumnHeightValues:function(e){return e.style.minHeight="",this._slideHeight=this._slideHeight<e.offsetHeight?e.offsetHeight:this._slideHeight,e},_mapColumnTitles:function(e){return e.querySelector(".pf-h3").style.minHeight=this._columnTitleHeight+"px",e},_mapColumns:function(e,t){return e.style.minHeight=this._slideHeight+"px",e},_setColumns:function(e,t){return Object(l.a)({tag:"div",className:this._getColumnClass(this._activeData.columns.length),els:[tag("h3",{className:this._getColumnTitleClass(e),innerHTML:e.title.value}),tag("div",{className:"pf-ui-body",innerHTML:e.column.value})],data:{columnId:"column-"+t}})},_getColumnTitleClass:function(e){return"pf-h3 "+(this._activeData.title.value.length?"":"pf-mt-0 pf-mb-8")+(1!==this._activeData.columns.length||e.title.value.length?"":" pf-my-0")},_getTitle:function(){return this._activeData.title.value.length?tag("div",{className:"col-md-12 pf-my-0 pf-h2 pf-mb-16",innerHTML:this._activeData.title.value}):""}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogViewsTextBlock=d);var h=i("cejl"),p=i("jhOU"),f=i("Kiz0"),g=Class({_type:"",_productItems:null,_productsNode:null,_sellingRegion:null,_data:{},__construct:function(e,t,i,r){if(this._type=e,this._productItems=t,this._sellingRegion=i,this._data=r||{},this._shouldNotDisplayBlock())return this.node=tag("div");this.node=tag("div","row",[tag("div",this._isTypeSimilar()||this._data.fullWidth?"col-12":"offset-xs-12 offset-sm-4 offset-md-3 offset-lg-3 offset-xl-2 col-12 col-sm-8 col-md-9 col-lg-9 col-xl-10",[this._getHeader(),this._productsNode=tag("div",{className:"row pf-mb-40 products-pricing-other",attr:{"aria-label":this._getHeaderText(),role:"list"}})])]),(this._isTypeSimilar()||this._isTypeDoesNotMatchSellingRegion())&&this._render(t),this._isTypeRecentlyViewed()&&(new n.a).getRecentlyViewedProducts(this._render)},_render:function(e){for(var t=0,i=e.length;t<i;t++){var n=e[t];new h.a({product:n,className:(this._isTypeSimilar()?"col-6 col-md-4 col-lg-3":"col-6 col-md-4 col-xl-3")+" pf-mt-2 pf-mb-24 pf-pb-2",showSizes:!n.isEmbroidery()||n.isApparelEmbroidery(),showFulfillmentCountries:!0,url:n.catalogPageUrl,sellingRegion:this._sellingRegion,disableEdt:this._isTypeRecentlyViewed()}).append(this._productsNode)}setTimeout(function(){this._initSlick()}.bind(this),50)},_initSlick:function(){var e=$(this._productsNode);e.hasClass("slick-initialized")&&e.slick("unslick"),e.not(".slick-initialized").slick({arrows:!1,infinite:!1,accessibility:!0,dots:!0,focusOnChange:!0,slidesToShow:4,slidesToScroll:4,rows:0,responsive:[{breakpoint:1600,settings:{slidesToShow:this._isTypeSimilar()?4:3,slidesToScroll:this._isTypeSimilar()?4:3}},{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}}]})},_getHeader:function(){var e=this;if(this._isTypeSimilar()||this._isTypeRecentlyViewed()){var t="";return this._isTypeSimilar()?t=dlang("products","You might also like"):this._isTypeRecentlyViewed()&&(t=dlang("products","Recently viewed")),tag("h3","pf-h3 pf-mt-24 pf-mb-16",t)}if(this._isTypeDoesNotMatchSellingRegion()){var i=dlang("products","{count} products don't match your current default catalog and delivery preferences.");PF.Customer.isLogged()&&!PF.Customer.isB2cStarter()&&(i=dlang("products","{count} products don't match your current default selling preferences."));var n=tag("i",{className:"pf-i pf-i-information pf-i-18 pf-text-gray pf-ml-4",style:{outline:"none"},attr:{tabindex:0,title:dlang("sellingRegion","{linkStart}Adjust your preferences{linkEnd} to select them").replace("{linkStart}",'<a class="pf-link dsr-does-not-match-settings-tooltip-link">').replace("{linkEnd}","</a>"),"data-toggle":"tooltip","data-container":"body","data-trigger":"hover","data-delay":'{"hide": 700}',"data-html":!0}});return $(n).tooltip(),$(n).on("shown.bs.tooltip",(function(){document.querySelector(".dsr-does-not-match-settings-tooltip-link").addEventListener("click",(function(){Object(f.b)(e._data.activeStoreId||null)}))})),new p.a({id:"does-not-match-selling-region-products-block",type:"gray",heading:[tag("span","",i.replace("{count}",this._data.productCount)),n],className:"pf-mb-16"})}return""},_getHeaderText:function(){return this._isTypeSimilar()?dlang("products","You might also like"):this._isTypeRecentlyViewed()?dlang("products","Recently viewed"):this._isTypeDoesNotMatchSellingRegion()?dlang("products","Not matching selling region products"):void 0},_isTypeSimilar:function(){return this._type===g.TYPE_SIMILAR},_isTypeRecentlyViewed:function(){return this._type===g.TYPE_RECENTLY_VIEWED},_isTypeDoesNotMatchSellingRegion:function(){return this._type===g.TYPE_DOES_NOT_MATCH_SELLING_REGION},_shouldNotDisplayBlock:function(){return!(!this._isTypeSimilar()||this._productItems&&0!==this._productItems.length)||this._isTypeRecentlyViewed()&&0===(new n.a).getRecentlyViewedProductIds().length}},l.a.Base);g.TYPE_SIMILAR="SIMILAR_PRODUCTS",g.TYPE_RECENTLY_VIEWED="RECENTLY_VIEWED",g.TYPE_DOES_NOT_MATCH_SELLING_REGION="DOES_NOT_MATCH_SELLING_REGION",window&&((globalThis||{}).PFProductsCatalogViewsOtherProducts=g);var m=i("iiV/"),_=i("g357"),v=i("v49Q"),y=Class({_productItems:[],_filters:null,_nodeClearAll:null,_sellingRegionSetting:null,__construct:function(e){this.node=tag("div"),this._sellingRegionSetting=e},render:function(e,t,i,n){l.a.clearNode(this.node),e&&e.length&&(this._productItems=e,this._filters=new v.a(this._productItems,this._onFilter,t||[],i,this._sellingRegionSetting,n),e.length<2||!this._filters._filters.length||(tag("div","catalog__sidebar-filter",[tag("div","catalog__sidebar-filter__title clearfix hidden-xs",[tag("span","clearfix catalog__sidebar-filter__title__toggle",[tag("strong","hidden-xs",[lang("Filter by"),":"]),this._getCollapseNode()]),this._nodeClearAll=tag("a",{className:"catalog__sidebar-filter__clear pf-link hidden",onclick:this.clearAll},[lang("Clear all")])]),tag("div",{className:"navbar-collapse collapse filters-wrap pf-p-0",style:{maxHeight:"none"}},[this._filters])]).append(this.node),this._onFilter()))},clearAll:function(){_.a.createAndDispatch(u.a.EVENT_PRODUCTS_FILTER,{filter:null,productsOrVariants:this._productItems,isOnPopstate:!0})},_getCollapseNode:function(){return Object(l.a)({tag:"a",className:"navbar-toggle collapsed clearfix visible-xs",style:{padding:0,margin:0,display:"block",float:"none",width:"100%"},data:{toggle:"collapse",target:".filters-wrap"},els:[{tag:"strong",text:lang("Filter by")},{tag:"img",className:"pull-right",src:"/static/images/products-catalog/filter.svg",style:{width:"20px",height:"20px"}}]})},_onFilter:function(){this._filters&&this._nodeClearAll&&(this._filters.getAllSelectedValues().length?l.a.removeClassName(this._nodeClearAll,"hidden"):l.a.addClassName(this._nodeClearAll,"hidden"))}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebarFilter=y);var b=Class({categories:[],activeTopLevelCategory:null,activeCategoryId:null,shouldShowNew:!1,isTopLevel:!1,swapCategories:null});window&&((globalThis||{}).PFProductsCatalogSidebarMenuPar=b);var P=i("Op/+"),C={getItemParent:function(e){return(new P.a).categories.getById(e.parentId)}};(globalThis||{}).PFProductsCatalogItemsCategoryItemHelpers=C;var T=Class({_category:null,_classActive:"catalog__sidebar-menu__item--active",_menuNode:null,__construct:function(e,t,i,n,r,a){this._category=e,this._activeCategoryId=t,this._forceActive=i,this._callback=n;var o=new b;o.categories=e.children,o.activeCategoryId=t,o.shouldShowNew=r,o.swapCategories=a,this._menuNode=this.hasChildren()&&new O(o),this.node=Object(l.a)({tag:"li",className:this._getClassName(),els:[{tag:"a",onclick:this._callback.bind(this,this),href:this._category.getUrl(),els:[this.getTitle(),!!r&&this._category.isNew&&tag("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New in Sidebar")),!!r&&this.shouldShowNewSidebar()&&tag("span","pf-ml-4 pf-py-2 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New in Sidebar")),!r&&this.shouldShowNewSidebar()&&tag("span","pf-ml-4 pf-badge pf-badge-small pf-badge--primary",clang("Badge","New")),this.isTopLevel()&&tag("span","catalog__sidebar-menu__item__arrow")]},this._menuNode]})},isTopLevel:function(){return 0===this._category.parentId},hasChildren:function(){return this._category.children.length>0},shouldShowNewSidebar:function(){var e=moment(this._category.settings.showNewSidebarSetAt),t=e?e.clone().add(30,"days"):null;return e<t},setAsActive:function(){l.a.addClassName(this.node,this._classActive),this._menuNode&&this._menuNode.setHeight()},removeActive:function(){this._menuNode&&this._menuNode.setHeight(0),l.a.removeClassName(this.node,this._classActive)},getCategory:function(){return this._category.isClone?C.getItemParent(this._category):this._category},getCategoryId:function(){return this._category?this._category.id:0},getTitle:function(){return this._category.settings.sidebarNavTitle?this._category.settings.sidebarNavTitle:this._category.title},getActiveCategory:function(){return this._category.id===this._activeCategoryId?this._category:!!this._menuNode&&this._menuNode._items.map(function(e){return e.getActiveCategory()}.bind(this)).filter(Boolean).shift()},_getClassName:function(){var e="catalog__sidebar-menu__item pf-py-4";return this._isActive()?e+" catalog__sidebar-menu__item--active":e},_isActive:function(){return this._category[this._category.isClone?"parentId":"id"]===this._activeCategoryId||this._forceActive}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebarMenuItem=T);var w=i("cCrT"),I=i("N6Gp"),S=i("GGNF"),E=i("ojff"),O=Class({_params:null,_focus:null,_items:[],_activeItem:null,_nodeActiveSubItem:null,__construct:function(e){var t=this;this._params=e,this._items=this._params.activeCategoryId!==I.a.ID_FAKE_FAVORITES?this._getCategories().sort(this._sort).map(this._renderItem):[],this.node=tag("ul",this._getClassName(),[this._items]),this._nodeActiveSubItem=tag("div","catalog__sidebar-menu__current-item").append(this.node),S.a.isFavoriteProductsEnabled().then((function(e){e&&t._shouldRenderFavorites()&&t._getFavoritesNode().prepend(t.node)})),setTimeout(function(){!this._params.isTopLevel&&this._params.activeCategoryId&&(this.setHeight(),window.onresize=function(){this.setHeight()}.bind(this)),this._params.isTopLevel&&!this._params.activeCategoryId&&this._items[0]&&this._toggleActive(this._items[0])}.bind(this),this._getMenuTimeout())},_shouldRenderFavorites:function(){var e=0;return this._params.categories.forEach((function(t){e+=t.parentId})),this._isActiveTopLevel()||-1===this._params.activeCategoryId||(0===this._params.activeCategoryId||null===this._params.activeCategoryId)&&!Number(e)},_getFavoritesNode:function(){return tag("li",{className:"catalog__sidebar-menu__item pf-py-4"},[tag("a",{onclick:this.openFavoritesLink.bind(this),text:lang("My favorites"),href:"javascript:;"})])},openFavoritesLink:function(){_.a.createAndDispatch(u.a.EVENT_NAME,{category:I.a.getTemporaryFavoritesCategory(0===this._params.activeCategoryId?null:this._params.activeCategoryId)})},_renderItem:function(e){return new T(e,this._params.activeCategoryId,this._isActiveTopLevel(),this._onclick,this._params.shouldShowNew,this._params.swapCategories)},_getClassName:function(){var e="catalog__sidebar-menu";return this._params.isTopLevel&&!this._params.activeCategoryId&&(e+=" catalog__sidebar-menu--hide-children"),this._params.isTopLevel&&(e+=" catalog__sidebar-menu--top-level hidden-xs"),e},_onclick:function(e,t){t.preventDefault(),this._params.isTopLevel?this._toggleActive(e):this._setActiveItem(e)},_setActiveItem:function(e){_.a.createAndDispatch(u.a.EVENT_NAME,{category:e.getCategory(),activeTab:(new w.a).hash})},_getCategories:function(){var e=this;return this._isActiveTopLevel()?(this._focus=this._params.activeTopLevelCategory.id,[this._params.activeTopLevelCategory]):this._params.swapCategories&&this._params.swapCategories.length?this._params.categories.filter((function(t){return Object(E.b)(t,e._params.swapCategories)})):this._params.categories},_toggleActive:function(e){if(void 0!==e.getCategoryId){this._focus=e.getCategoryId()!==this._focus?e.getCategoryId():null;var t=!0;for(var i in this._items){var n=this._items[i];if("function"==typeof n.getCategoryId){if(n.getCategoryId()===this._focus){n.setAsActive(),t=!1;continue}n.removeActive()}}var r=e.getActiveCategory();t&&r?mkE({tag:"span",text:r.getSidebarTitle()}).append(this._nodeActiveSubItem):mkE.clearNode(this._nodeActiveSubItem)}},_isActiveTopLevel:function(){return this._params.isTopLevel&&this._params.activeTopLevelCategory},_sort:function(e,t){return e.settings.sidebarNavPosition-t.settings.sidebarNavPosition},_getMenuTimeout:function(){var e=0;return(u.a.isProductPush()||u.a.is(u.a.TYPE_OF))&&(e=300),e},setHeight:function(e){void 0===e&&(mkE.addClassName(this.node,"for-height"),e=this.node.offsetHeight,mkE.removeClassName(this.node,"for-height")),setTimeout(function(){this.node.style.height=e>0?"auto":0}.bind(this),0)}},mkE.Base);window&&((globalThis||{}).PFProductsCatalogSidebarMenu=O);var k=Class({_store:null,_isCategoriesMenuEnabled:!0,_sellingRegionSetting:null,filters:null,swapCategories:null,__construct:function(e,t,i,n){this._store=e,this._isCategoriesMenuEnabled=t,this._sellingRegionSetting=i,this.swapCategories=n,this.node=tag("div","catalog__sidebar-content"),this._renderCategoriesMenu()._renderFilters()},_renderCategoriesMenu:function(){if(!this._isCategoriesMenuEnabled)return this;var e=new b;return e.categories=this._store.categories.getAll(),e.activeTopLevelCategory=this._store.categories.getTopLevelCategory(),e.activeCategoryId=this._store.categories.getActiveCategoryId(),e.isTopLevel=!0,e.swapCategories=this.swapCategories,new O(e).append(this.node),this},_renderFilters:function(){return this.filters=new y(this._sellingRegionSetting),this.filters.append(this.node),this}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogSidebar=k);var L=i("TbQS"),A=i("A9n+"),R=i("X5Ic"),N=Class({_containerNode:null,_tableNode:null,_loadMoreNode:null,_sizeCheckboxNodes:[],_selectedSizes:[],_visibleColors:[],_productData:null,_regions:[],_oneSize:dlang("products","One Size"),_oneColor:dlang("products","One Color"),_colorCount:20,_inStockLabel:dlang("products","In Stock"),_onDemandLabel:dlang("products","Stocked on Demand"),_supplierOutOfStockLabel:dlang("products","Supplier out of stock"),_discontinuedLabel:dlang("products","Discontinued"),initAndGetContainerNode:function(e){this._productData=e,this._selectedSizes=this._getAvailableSizes().slice(),this._visibleColors=this._sortColorsByAvailability(this._getAvailableColors()).slice(0,this._colorCount),this._containerNode=this._getContainerNode();var t=this._onWindowResized;return $(window).on("load resize",(function(){t()})),document.addEventListener("scroll",(function(e){$(e.target).hasClass("color-availability")&&t()}),!0),this._containerNode},_getContainerNode:function(){this._regions=this._getRegions();var e=this._getLegendText(),t=this._getLegendColors(),i=this._getFilters();this._tableNode=this._getTableNode();var n=[];return this._visibleColors.length<this._getAvailableColors().length&&(this._loadMoreNode=this._getLoadMoreNode(),n.push(this._loadMoreNode)),tag("div","availability",[e,t,i,this._tableNode,n])},_getTableNode:function(){var e=this._visibleColors,t=this._selectedSizes,i=this,n=[],r=[],a=[];t.forEach(function(e){a.push({tag:"div",text:this._productData.product.isPhoneCase()?this._getVariantDisplayName(e):e,className:"region-size-header"})}.bind(this)),this._regions.forEach((function(e){1===e.display&&n.push({tag:"div",className:"region",abbreviation:e.abbreviation,regionName:e.regionName,els:[{tag:"div",text:e.regionNameTranslated,className:"region-name"},{tag:"div",className:"region-size-headers",els:a}]})})),e.forEach((function(e){var a={};a=e.colorCode2?tag("div","color-preview-multi-color",[tag("div",{style:{backgroundColor:e.colorCode}}),tag("div",{style:{backgroundColor:e.colorCode2}})]):tag("div",{className:"color-preview",style:{backgroundColor:e.colorCode}}),r.push(tag("div",{className:"color-option",text:e.colorName},[a])),n.forEach((function(n){var r=[];t.forEach((function(t){var a=i._findVariantByColorAndSize(e,t),o=i._getClassNameForVariant(a,n),s=tag("div","region-color-size-availability "+o);$(s).tooltip({html:!0,placement:"top",title:i._getTooltipByClassName(o,a),container:".availability"}),r.push(s)}));var a=tag("div","region-color-row",r);n.els.push(a)}))}));var o=tag("div","color-column",[this._scrollLeft=tag("div",{className:"scroll-left hide-scroll-arrows",onclick:this._scrollTableLeft}),tag("div","color-name-header",clang("noun","Color")),r]);return this._colorAvailability=tag("div","color-availability",n),this._scrollRight=tag("div",{className:"scroll-right hide-scroll-arrows",onclick:this._scrollTableRight}),tag("div","stock-availability-table",[this._colorDivNode=o,this._colorAvailability,this._scrollRight])},_getTooltipByClassName:function(e,t){return e===N.AVAILABILITY_IN_STOCK?this._inStockLabel:e===N.AVAILABILITY_ON_DEMAND?this._onDemandLabel:e===N.AVAILABILITY_SUPPLIER_OUT_OF_STOCK?this._supplierOutOfStockLabel:e===N.AVAILABILITY_DISCONTINUED?this._discontinuedLabel:e===N.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY?this._getAvailableInDifferentCountryTooltip(t):void 0},_getAvailableInDifferentCountryTooltip:function(e){if(!this._getWhereVariantIsAvailable(e))return this._supplierOutOfStockLabel;var t=this._getWhereVariantIsAvailable(e);return dlang("products","Fulfilled in {country}. Ships to locations worldwide.").replace("{country}",t.regionNameTranslated)},_scrollTable:function(e){var t="left"===e?-1:1,i=$(".region-color-size-availability").width()+2,n=$(this._colorAvailability).prop("scrollLeft"),r=this;$(this._colorAvailability).animate({scrollLeft:n+t*i+"px"},"fast",(function(){r.adjustScrollButtons()}))},adjustScrollButtons:function(){var e=$(this._colorAvailability).prop("clientWidth"),t=$(this._colorAvailability).prop("scrollWidth"),i=$(this._colorAvailability).prop("scrollLeft");t>e?(0!==i?l.a.addClassName(this._colorDivNode,"has-shadow"):(l.a.removeClassName(this._colorDivNode,"has-shadow"),l.a.addClassName(this._scrollLeft,"hide-scroll-arrows")),l.a.removeClassName(this._scrollLeft,"hide-scroll-arrows"),l.a.removeClassName(this._scrollRight,"hide-scroll-arrows"),l.a.addClassName(this._colorAvailability,"wide-table"),i+e>=t&&l.a.addClassName(this._scrollRight,"hide-scroll-arrows"),0===i&&l.a.addClassName(this._scrollLeft,"hide-scroll-arrows")):(l.a.addClassName(this._scrollLeft,"hide-scroll-arrows"),l.a.addClassName(this._scrollRight,"hide-scroll-arrows"),l.a.removeClassName(this._colorDivNode,"has-shadow"),l.a.removeClassName(this._colorAvailability,"wide-table"))},_scrollTableLeft:function(){this._scrollTable("left")},_scrollTableRight:function(){this._scrollTable("right")},_getLoadMoreNode:function(){return tag("div",{className:"col-12 col-lg-11 col-xl-8 text-center",onclick:this._onLoadMoreClicked},[tag("button","pf-btn pf-btn-secondary pf-mt-32",lang("Load more"))])},_getLegendText:function(){return tag("div","row",[tag("div","col-md-9 availability-legend-text",[dlang("products","Make sure your product variants are always in stock by checking their availability. There's always stock in our warehouses for the most popular colors and sizes, but others are ordered on demand. Restocking time is included in our estimated delivery times. If a product variant is not available from our supplier, it'll show up here as \"Supplier out of stock\".")])])},_getLegendColors:function(){var e=[],t=[],i=this._getLegendsToShow();if(i.availableInDifferentCountry){var n=i.countriesToDisplay.join(" "+lang("or")+" "),r=dlang("products","Fulfilled only in {countries}.").replace("{countries}",n);t=tag("div","availability-legend",[tag("div","availability-legend-color fulfilledOnlyInOneCountry availability-out-of-stock-background"),tag("div","availability-legend-color-label",r)])}return i.discontinued&&(e=tag("div","availability-legend",[tag("div","availability-legend-color discontinued availability-out-of-stock-background"),tag("div","availability-legend-color-label",this._discontinuedLabel)])),tag("div","pf-my-24",[tag("div","availability-legend",[tag("div","availability-legend-color availability-in-stock-background"),tag("div","availability-legend-color-label",this._inStockLabel)]),tag("div","availability-legend",[tag("div","availability-legend-color availability-on-demand-background"),tag("div","availability-legend-color-label",this._onDemandLabel)]),tag("div","availability-legend",[tag("div","availability-legend-color availability-out-of-stock-background"),tag("div","availability-legend-color-label",this._supplierOutOfStockLabel)]),e,t])},_getFilters:function(){var e=this._getAvailableSizes(),t=[];return e.length<=1?{tag:"div"}:(e.forEach((function(e,i){var n=tag("input",{type:"checkbox",attr:{id:"size-checkbox-"+i,checked:!0},data:{size:e},onclick:this._onSizeClicked});this._sizeCheckboxNodes.push(n);var r=tag("label",{className:"noselect pf-mr-32",style:{display:"inline-block",cursor:"pointer",height:"16px"},attr:{for:"size-checkbox-"+i}},[tag("div","fake-checkbox"),tag("span",{style:{fontWeight:"normal",fontSize:"15px",display:"inline-block",position:"relative",top:"1px",left:"5px"},text:e})]);t.push(tag("div","size-selector",[n,r]))}),this),tag("div","pf-mb-24",[tag("div","pf-mt-24 availability-about-sizes",dlang("products","Filter by size")+":"),t]))},_getRegions:function(){var e=this._productData.regions.regionsMap;return Object.keys(e).map((function(t){var i=e[t];return{name:i,abbreviation:t,regionName:i,regionNameTranslated:lang(i),display:0}}))},_getClassNameForVariant:function(e,t){if(this._productData.product.isTemporaryOutOfStock)return N.AVAILABILITY_SUPPLIER_OUT_OF_STOCK;if(!e)return N.AVAILABILITY_DISCONTINUED;if(-1===this._productData.regions.variantsByRegion[t.regionName].indexOf(e.variantId))return this._getWhereVariantIsAvailable(e)?N.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY:N.AVAILABILITY_SUPPLIER_OUT_OF_STOCK;var i=e.availability;return i?i[t.abbreviation]:""},_getWhereVariantIsAvailable:function(e){for(var t=0;t<this._regions.length;t++){var i=this._regions[t];if(-1!==this._productData.regions.variantsByRegion[i.regionName].indexOf(e.variantId))return i}return!1},_onSizeClicked:function(){var e=[];if(this._sizeCheckboxNodes.forEach((function(t){if(t.checked){var i=t.dataset.size;e.push(i)}})),!e.length&&this._sizeCheckboxNodes.length){var t=this._sizeCheckboxNodes[0];return t.click(),void(t.checked=!0)}this._selectedSizes=e,this._visibleColors=this._sortColorsByAvailability(this._visibleColors),this._refreshTableNode()},_onLoadMoreClicked:function(){var e=this._visibleColors.length,t=this._getAvailableColors().length,i=t-e,n=i>=this._colorCount?this._colorCount:i;this._visibleColors=this._sortColorsByAvailability(this._getAvailableColors()).slice(0,e+n),this._refreshTableNode(),e+n===t&&l.a.clearNode(this._loadMoreNode)},_onWindowResized:function(){this.adjustScrollButtons()},_refreshTableNode:function(){var e=this._getTableNode();$(this._tableNode).replaceWith(e),this._tableNode=e,this.adjustScrollButtons()},_sortColorsByAvailability:function(e){var t=[];return e.forEach((function(e){var i=0,n=0;this._getRegions().forEach((function(t){this._selectedSizes.forEach((function(r){var a=this._findVariantByColorAndSize(e,r);if(!a)return!0;var o=a.availability;if(!o)return!0;var s=o[t.abbreviation];s===N.AVAILABILITY_IN_STOCK&&i++,s===N.AVAILABILITY_ON_DEMAND&&n++}),this)}),this),t.push({color:e,colorName:e.colorName,inStockCount:i,onDemandCount:n})}),this),t.sort((function(e,t){return t.inStockCount-e.inStockCount||t.onDemandCount-e.onDemandCount||t.colorName<e.colorName})).map((function(e){return e.color}))},_getAvailableSizes:function(){var e=this._productData.product.sizes;return e.length||(e=[this._oneSize]),e},_getVariantDisplayName:function(e){return e.replace(/iPhone\s|Samsung\s/g,"").split("/").join(" / ")},_getAvailableColors:function(){var e=this._productData.product.colors;if(e.length)return e;var t=new R.a.ColorPair;return t.colorCode=null,t.colorCode2=null,t.colorName=this._oneColor,[t]},_getLegendsToShow:function(){var e=this,t={countriesToDisplay:[],discontinued:null,availableInDifferentCountry:null};return this._regions.forEach((function(i,n){var r=[],a=!1;e._visibleColors.forEach((function(o){e._getAvailableSizes().forEach((function(s){var l=e._findVariantByColorAndSize(o,s),c=e._getClassNameForVariant(l,i);if(c===N.AVAILABILITY_DISCONTINUED&&(t.discontinued=1),c!==N.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY&&c!==N.AVAILABILITY_DISCONTINUED&&(e._regions[n].display=1),c===N.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY){a=!0;var u=e._getWhereVariantIsAvailable(l);if(u){var d=u.regionNameTranslated||u.regionName;r.push(d)}}}))})),a&&1===e._regions[n].display&&(t.countriesToDisplay=t.countriesToDisplay.concat(r),t.availableInDifferentCountry=1)})),t.countriesToDisplay=t.countriesToDisplay.filter((function(e,i){return t.countriesToDisplay.indexOf(e)===i})),t},_findVariantByColorAndSize:function(e,t){var i=this._productData.variants,n=this._findFirstInArray(i,(function(i){return i.size===t&&i.color===e.colorName})),r=e.colorName===this._oneColor,a=t===this._oneSize;return!n&&r&&(n=this._findFirstInArray(i,(function(e){return e.size===t&&null===e.color}))),!n&&a&&(n=this._findFirstInArray(i,(function(t){return null===t.size&&t.color===e.colorName}))),!n&&r&&a&&(n=this._findFirstInArray(i,(function(e){return null===e.size&&null===e.color}))),n},_findFirstInArray:function(e,t){var i;for(i=0;i<e.length;++i)if(t(e[i],i))return e[i]}});N.AVAILABILITY_FULLFILLED_ONLY_IN_ONE_COUNTRY="fulfilledOnlyInOneCountry",N.AVAILABILITY_SUPPLIER_OUT_OF_STOCK="supplierOutOfStock",N.AVAILABILITY_DISCONTINUED="discontinued",N.AVAILABILITY_ON_DEMAND="onDemand",N.AVAILABILITY_IN_STOCK="inStock",(globalThis||{}).PFProductsPricingAvailability=N;var D=i("o0qH"),x=i("a3yQ"),F=i("eYhR"),M=i("nwx2"),B=Class({__construct:function(e){if(e.guidelinesAndTemplates&&Object.keys(e.guidelinesAndTemplates).length>0){var t=new M.a("secondary"),i=[],n=Object.keys(e.guidelinesAndTemplates),r=Object(D.a)(e.product.productId).getTechniqueFromMemory()||n[0];for(var a in e.guidelinesAndTemplates)if(e.guidelinesAndTemplates.hasOwnProperty(a)){var o=e.guidelinesAndTemplates[a],s=new F.a;s.caption=R.a.LABELS[a],s.isActive=a===r,s.customId=a;var c=tag("div",s.isActive?"":"hidden",[new x.a(o.templates,a),tag("div",{style:{wordWrap:"break-word"},innerHTML:o.guidelines})]);i.push(c),s.onclick=function(t){for(var n=Object.keys(e.guidelinesAndTemplates).indexOf(t),r=0,a=i.length;r<a;r++)if(i.hasOwnProperty(r)){var o=i[r];r===n?l.a.removeClassName(o,"hidden"):l.a.addClassName(o,"hidden")}}.bind(this,a),t.add(s)}n.length<2&&l.a.addClassName(t.node,"hidden"),this.node=tag("div","",[t,tag("div","pf-mt-24",i)])}else{var u=Object(D.a)(e.product.productId).getTechniqueFromMemory()||e.product.type;this.node=tag("div","",[new x.a(e.templates,u),tag("div",{style:{wordWrap:"break-word"},innerHTML:e.guidelines})])}}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductTabsGuidelines=B);var V=i("xeH2"),j=i.n(V),U=i("97Au"),z=Class({__construct:function(e){var t=new U.a.Par,i=new U.a(t);i.setTitle(dlang("products","Print care instructions")),i.setContent(this._getContent(e)),i.show()},_getContent:function(e){return tag("div","",[tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/01-wash-cold.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[0])]),tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/02-thubmle-low.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[1])]),tag("div","pf-d-flex pf-mb-12",[tag("img",{src:"/static/images/icons/03-iron-cool.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[2])]),tag("div","pf-d-flex",[tag("img",{src:"/static/images/icons/04-no-dry-clean.svg",className:"pf-mr-12",style:{height:"45px"}}),tag("p","pf-m-0",e.careInstructions[3])])])}});window&&((globalThis||{}).PFProductsCatalogProductPrintCare=z);var G=i("9eNC"),H=i("SBaP"),q=i("x0He");function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function W(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function K(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){W(a,n,r,o,s,"next",e)}function s(e){W(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ee(e);if(t){var r=ee(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Q(this,i)}}function Q(e,t){return!t||"object"!==Y(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ee(e){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function te(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ne(e,t,"get"))}function ie(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ne(e,t,"set"),i),i}function ne(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var re=new WeakMap,ae=new WeakSet,oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t=X(i);function i(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=t.call(this),ae.add(J(n)),re.set(J(n),{writable:!0,value:void 0}),n.node=tag("div","product-source-map-details"),n.par=e,function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(J(n),ae,se).call(J(n)),n}return i}(H.a);function se(){return le.apply(this,arguments)}function le(){return(le=K(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new q.b).components={"product-source-map-details-vue":function(){return i.e(293).then(i.bind(null,"O+Lg"))}},t.template='\n            <product-source-map-details-vue :source-data="sourceData"/>\n        ',t.initialData={sourceData:this.par},ie(this,re,new q.a(t)),te(this,re).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ce(e){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=fe(e);if(t){var r=fe(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return he(this,i)}}function he(e,t){return!t||"object"!==ce(t)&&"function"!=typeof t?pe(e):t}function pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function me(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_e(e,t,"set"),i),i}function _e(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var ve=new WeakMap,ye=new WeakSet,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(i,e);var t=de(i);function i(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),ye.add(pe(r)),ve.set(pe(r),{writable:!0,value:void 0}),ge(pe(r),"variantId",void 0),ge(pe(r),"technique",void 0),r.variantId=e,r.technique=n,r.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(pe(r),ye,Pe).call(pe(r)),r}return i}(H.a);function Pe(){var e,t,n=new q.b;n.components={"product-shipping-table":function(){return Promise.all([i.e(1),i.e(292)]).then(i.bind(null,"OQPw"))}},n.template='<product-shipping-table\n            :initial-variant-id="variantId" \n            :initial-technique="technique" />',n.initialData={variantId:this.variantId,technique:this.technique},me(this,ve,new q.a(n)),(e=this,t=ve,function(e,t){return t.get?t.get.call(e):t.value}(e,_e(e,t,"get"))).append(this.node)}var Ce=i("A+LN"),Te=Class({_tabItems:[],productData:null,productInfo:null,_onVariantPicked:null,isTabEventDispatching:!0,_availability:null,__construct:function(e,t,i){var n=this;this._tabItems=[{id:"description",title:lang("Description"),callback:this._renderDescription}],this.productData=e,this.productInfo=t,this.node=tag("div","catalog__product__tabs pf-pt-48 pf-mb-64",[this._tabs=new M.a("primary center-fixed",!0),this._tabContent=tag("div","pf-text-muted")]),Object(Ce.x)(Ce.p).then((function(t){t?n._tabItems.push({id:"shipping",title:lang("Shipping"),callback:n._renderNewShipping.bind(n)}):e.shipping&&n._tabItems.push({id:"shipping",title:lang("Shipping"),callback:n._renderShipping.bind(n)})})).finally((function(){var t;if(e.product.shouldShowFileGuidelineTab()&&n._tabItems.push({id:"guidelines",title:lang("File guidelines"),callback:n._renderGuidelines.bind(n)}),e.product.shouldShowAvailabilityTab()){n._tabItems.push({id:"availability",title:lang("Availability"),callback:n._renderAvailability}),G.q("showProductAvailability",function(){this.setActive("availability"),j()("html, body").animate({scrollTop:j()(this.node).offset().top-j()(".catalog__product__tabs .pf-tabs").outerHeight()},1e3)}.bind(n))}e.product.shouldShowSizingTab()&&(n._tabItems.push({id:"sizing",title:lang("Sizing"),callback:n._renderSizing}),n._tabItems.push({id:"using-tips",title:lang("Using tips"),callback:n._renderUsingTips})),null!=e&&null!==(t=e.productSource)&&void 0!==t&&t.source&&n._tabItems.push({id:"source",title:lang("Source"),callback:n._renderSource}),n.productData=e,n._onVariantPicked=i,n._renderTabs()}))},setActive:function(e){this._tabs.setActiveTab(this.getTab(e))},getActiveTab:function(){return this.getTab((new w.a).hash)},getTab:function(e){var t=this._tabs.items.slice();if(e){var i=t.filter((function(t){return t.customId===e}));if(i.length)return i.shift()}return t.shift()},_renderTabs:function(){this._tabs.items=this._tabItems.map(this._renderTab),this._tabs.render(),this.isTabEventDispatching=!1,this._tabs.setActiveTab(this.getActiveTab())},_renderTab:function(e){var t=new F.a;return t.caption=e.title,t.customId=e.id,this._isTestingProduct()?(this._renderTabContentTest(this._getContent(e),e.id),t.onclick=this._showTabContent.bind(this,e.id)):t.onclick=this._renderTabContent.bind(this,this._getContent.bind(this,e),e.id),t},_getContent:function(e){var t="col-md-9 col-xl-7";return["availability","shipping","source"].includes(e.id)&&(t="col-md-12"),tag("div","clearfix row",[e.key?tag("div",{className:t,innerHTML:e.key.split(":").map(this._getProductDataValue.bind(this)).join("")}):"",e.callback?tag("div",t,[e.callback()]):""])},_getProductDataValue:function(e){return this.productData[e]?this.productData[e]:""},_renderTabContent:function(e,t){var i="tabContentItem-".concat(t),n=this._tabContent.querySelector("#".concat(i));this._tabContent.querySelectorAll(".tab-content-item").forEach((function(e){return e.classList.add("hidden")})),n||(n=tag("div",{className:"tab-content-item pf-pt-24 hidden",id:"tabContentItem-".concat(t)},[e()]).append(this._tabContent)),n.classList.remove("hidden"),this._shouldDispatchTabEvent()&&_.a.createAndDispatch(u.a.EVENT_TAB_CHOOSE,{activeTab:"description"!==t?t:"",activeProductId:this.productData.product.productId}),j()('[data-toggle="tooltip"]').tooltip(),null!==this._availability&&this._availability.adjustScrollButtons()},_isTestingProduct:function(){return 308===this.productData.product.productId},_renderTabContentTest:function(e,t){tag("div",{className:"pf-pt-24 hidden",id:t},[e]).append(this._tabContent),null!==this._availability&&this._availability.adjustScrollButtons()},_showTabContent:function(e){this._shouldDispatchTabEvent()&&_.a.createAndDispatch(u.a.EVENT_TAB_CHOOSE,{activeTab:"description"!==e?e:"",activeProductId:this.productData.product.productId}),j()(this._tabContent).find("#"+this.activeTab).addClass("hidden"),j()(this._tabContent).find("#"+e).removeClass("hidden"),this.activeTab=e},_renderDescription:function(){var e=tag("div",{className:"pf-mb-24",innerHTML:this._getProductDataValue("productDescription")});return this.productData.product.careInstructions.length&&tag("div",{className:"pf-mb-24",innerHTML:this._getProductDataValue("printCareInstructionsHtml")}).append(e),this.productData.warnings&&this.productData.warnings.length&&tag("div",null,this.productData.warnings.map(this._renderWarning)).append(e),j()(e).find('a[href="#care-instructions"]').on("click",function(e){e.preventDefault(),new z(this.productData.product)}.bind(this)),e},_renderWarning:function(e){return tag("div",{className:"pf-mb-24 pf-alert pf-alert--warning-gray",id:e.htmlId},[tag("span","pf-text-brown pf-alert__icon icon-warning-triangle"),tag("div",{innerHTML:e.htmlDescription})])},_renderGuidelines:function(){return this.productData.guidelines.length?new B(this.productData):""},_renderAvailability:function(){return this._availability=new N,this._availability.initAndGetContainerNode(this.productData)},_renderSizing:function(){return tag("div",{innerHTML:this._getProductDataValue("tabSizing")})},_renderShipping:function(){return tag("div",{innerHTML:this.productData.shipping})},_renderNewShipping:function(){return tag("div","",[new be(this.productData.activeVariant.variantId,this.productInfo.getActiveTechnique())])},_renderUsingTips:function(){return tag("div",{innerHTML:this._getProductDataValue("tabUsingTips")})},_renderSource:function(){return new oe(this.productData.productSource.source.items)},_shouldDispatchTabEvent:function(){return!!this.isTabEventDispatching||(this.isTabEventDispatching=!0,!1)}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductTabs=Te);var we=Class({_productData:null,columnTypes:["technique","printArea","branding","features"],__construct:function(e,t){this._productData=e;var i=!!this._productData.getPrintInfo("branding"),n=this._productData.getPrintInfo("features").length>0,r=this._productData.getPrintInfo("printArea").length>0,a=this._productData.getPrintInfo("technique").length>0&&(!this._productData.product.isStockProduct()||this._productData.product.isEmbroiderySample());if(r||i||n||a){var o=[lang("Branding options")];i&&this._isDTGAndMultiTechnique()&&o.push(lang("(DTG only)")),this.node=tag("div","whitesmoke pf-pt-32 pf-pb-4",[tag("div","container catalog__product__print-techniques__container",[r&&this._getColumn("printArea",tag("div","",[tag("p","",[lang("File size")]),tag("div","",this._productData.getPrintInfo("printArea").map(function(e){return tag("div","pf-mb-16",[tag("h3","",[e.label+this._getTechniqueLabel(e)]),e.downloadUrl?tag("a",{className:"pf-link",href:e.downloadUrl},[dlang("products","Get print file template")]):""])}.bind(this)))])),i&&this._getColumn("branding",tag("div","",[tag("p","",o.join(" ")),tag("h3",{innerHTML:this._productData.getPrintInfo("branding")}),tag("a",{className:"pf-link",onclick:t},[dlang("products","See guidelines")])])),a&&this._getColumn("technique",tag("div","",[tag("p","",[dlang("products","Technique")]),tag("div","",this._productData.getPrintInfo("technique").map((function(e,t,i){return tag("span","",[tag("h3",{innerHTML:e}),t<i.length-1?tag("div","pf-text-muted",[lang("or")]):""])}))),this._productData.isLogged?"":tag("span",{innerHTML:"&nbsp;"})])),n&&this._getColumn("features",tag("div","",[tag("p","",[dlang("products","Features")]),tag("div","",this._productData.getPrintInfo("features").map((function(e){return tag("span","",[tag("h3",{innerHTML:e})])})))]))])])}else this.node=tag("div")},_getTechniqueLabel:function(e){var t="";return e.techniqueLabel&&(t=" ("+e.techniqueLabel+")"),t},_getColumn:function(e,t){var i="catalog__product__print-techniques";return tag("div",i,[tag("div",i+"__image "+i+"__"+e+"__image"),tag("div",i+"__text",[t])])},_isDTGAndMultiTechnique:function(){var e=this._productData.product.availableTechniques;return-1!==e.indexOf(R.a.TYPE_T_SHIRT)&&e.length>1}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductPrintInfo=we);var Ie=Class({images:[],videos:[],productTitle:"",onVideoClick:null,onImageClick:null,currentSlide:0});window&&((globalThis||{}).PFProductsCatalogProductMediaGalleryPar=Ie);var Se=i("FHCs"),Ee=i("E17x"),Oe=i("sEfC"),ke=i.n(Oe);function Le(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ae=Class({images:[],videos:[],_onVideoClick:null,_onImageClick:null,currentSlide:0,productTitle:"",emptyImage:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",__construct:function(e){this._onVideoClick=e.onVideoClick,this._onImageClick=e.onImageClick,this.currentSlide=e.currentSlide,this.productTitle=e.productTitle,this.original=null,this.canClick=!1,this.node=tag("div","row catalog__slick",[this._thumbContainer=tag("div","col-sm-2 col-md-3 col-lg-2 hidden-xs",[this._nodeThumbnails=tag("div"),this._nodeVideo=tag("div")]),this._imgContainer=tag("div","col-sm-10 col-md-9 col-lg-10",[this._tooltipNode=this._renderTooltip(),this._nodeImages=tag("div")])]),e.images.length&&this.render(e.images,e.videos),$(this._nodeThumbnails).on("mouseenter",".slick-slide",function(e){var t=$(e.currentTarget);if(!t.find("video")){var i=$(t).data("slick-index");if(!$(t).hasClass("slick-current")){var n;this.original=$(this._nodeImages).find(".slick-current img");var r=$(this.original).clone(),a=$(this._nodeImages).find("[data-slick-index="+i+"] img"),o=null!==(n=a[0])&&void 0!==n&&n.hasAttribute("data-lazy")?a.attr("data-lazy"):a.attr("src"),s=r.attr("src",o);$(s).addClass("cloned-image");var l=$(this._nodeImages).find(".slick-current div div");$(l).append(s),$(this.original).addClass("pf-d-none")}this._updateTooltipInfo(this._nodeImages.slick.$slides[i])}}.bind(this)),$(this._nodeThumbnails).on("mouseleave",".slick-slide",function(){$(".cloned-image").remove(),$(this.original).removeClass("pf-d-none");var e=$(this._nodeImages).find(".slick-current div div")[0];this._updateTooltipInfo(e)}.bind(this)),window.addEventListener("keyup",this._onKeyUp.bind(this))},render:function(e,t){this.imagesToLazyLoad=0,this.images=this._setFilteredImages(e),this.videos=this._setVideos(e,t),this._setThumbs(),this._setImages(),this._initSlickSliders(),this._updateTooltipInfo(this._nodeImages.slick.$slides[0]),this.hasFitVideo()&&(this.setSlickDots(),window.addEventListener("resize",ke()(this.setSlickDots.bind(this),300)))},_updateBackgroundColor:function(e){$(this._nodeImages).find("img").css("background","0% 0% / contain "+e),$(this._nodeThumbnails).find("img").css("background",e)},_updateBackgroundImage:function(e){$(this._nodeImages).find("img").css("background","url("+e+") 0% 0% / contain"),$(this._nodeThumbnails).find("img").css("background","url("+e+")").css("background-size","100%")},_updateImgUrl:function(e,t){var i=this;["src","data-lazy"].forEach((function(n){$(i._nodeImages).find("img[".concat(n,'*="').concat(e,'"]')).attr(n,t);var r=e.replace("_l","_t"),a=t.replace("_l","_t");$(i._nodeThumbnails).find("img[".concat(n,'*="').concat(r,'"]')).attr(n,a)}))},_updateImgFromVideo:function(e){this._nodeImages.querySelectorAll('img[src="'+e+'"]').forEach((function(e){e.classList.remove("hidden");var t=e.previousElementSibling;t&&t.remove()}))},_updateVideoFromImg:function(e,t,i){this._nodeImages.querySelectorAll('img[src="'+e+'"]').forEach(function(n){n.classList.add("hidden");var r=n.previousElementSibling;r?r.classList.remove("hidden"):(r=this._renderVideoNode(t,e,this._onImageClick&&this._onImageClick.bind(this,i)),n.parentElement.insertBefore(r,n),r.load())}.bind(this))},_updateVideoFromVideo:function(e,t,i,n){this._nodeImages.querySelectorAll('video source[src="'+t+'"]').forEach(function(t){var r=this._renderVideoNode(e,i,this._onImageClick&&this._onImageClick.bind(this,n));t.parentElement.replaceWith(r),r.load()}.bind(this))},_setImages:function(){l.a.hasClassName(this._nodeImages,"slick-initialized")&&$(this._nodeImages).slick("destroy"),l.a.clearNode(this._nodeImages),this.images.concat(this.videos).map(this._renderImage);for(var e=0;e<this.images.length;e++)this.images[e].forceBackgroundColor&&this._updateBackgroundColor(this.images[e].forceBackgroundColor),this.images[e].forceBackgroundImage&&this._updateBackgroundImage(this.images[e].forceBackgroundImage)},_setThumbs:function(){l.a.hasClassName(this._nodeThumbnails,"slick-initialized")&&$(this._nodeThumbnails).slick("destroy"),l.a.clearNode(this._nodeThumbnails),this.images.concat(this.videos).map(this._renderThumbnail),this.images.length<6&&!this.images.length>4&&this.hasFitVideo()&&$(this._thumbContainer).addClass("catalog__slick-thumbnail")},_adjustThumbnailHeight:function(){var e=this._nodeThumbnails.querySelectorAll(".slick-slide"),t=-1;e.forEach((function(e){var i=e.getBoundingClientRect().height;i>t&&(t=i)})),e.forEach((function(e){e.style.minHeight=t+"px"}))},_initSlickSliders:function(){var e=this;$(this._nodeThumbnails).off("lazyLoaded").on("lazyLoaded",function(e,t){t.setDimensions(),this._adjustThumbnailHeight(),t.setPosition()}.bind(this)).slick({slidesToShow:5,slidesToScroll:1,asNavFor:this._nodeImages,lazyLoad:"ondemand",dots:!1,vertical:!0,arrows:!0,verticalSwiping:!1,speed:300,focusOnSelect:!0,accessibility:!0,focusOnChange:!1,adaptiveHeight:!1,prevArrow:'<div role="button" class="catalog__slick__arrow catalog__slick__arrow--vertical catalog__slick__arrow--top"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-up"></span></div></div>',nextArrow:'<div role="button" class="catalog__slick__arrow catalog__slick__arrow--vertical catalog__slick__arrow--bottom"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-down"></span></div></div>'}).on("keyup",".slick-slide",(function(t){"enter"===t.key.toLowerCase()&&$(e._nodeImages).slick("slickGoTo",$(t.target).data("slick-index"))})),setTimeout((function(){$(e._nodeThumbnails).find(".slick-slide").attr({role:"button",tabindex:"0"})}),0),$(this._nodeImages).off("beforeChange").on("beforeChange",function(e,t,i,n){this.canClick=!1,this.currentSlide=n;var r=$(t.$slides[n]).find("video");r.length&&(r[0].autoplay=!0,r[0].load())}.bind(this)).on("afterChange",function(e,t,i,n){this._updateTooltipInfo(t.$slides[i]),this.canClick=!0,$(this._nodeThumbnails).find(".slick-slide").attr({role:"button",tabindex:"0"})}.bind(this)).off("lazyLoaded").on("lazyLoaded",(function(e,t){this.imagesToLazyLoad<1&&t.animateHeight(),this.imagesToLazyLoad++})).slick({slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!1,asNavFor:this._nodeThumbnails,lazyLoad:"ondemand",swipeToSlide:!0,speed:300,prevArrow:'<div role="button" aria-label="'+lang("Navigate to previous image")+'" class="catalog__slick__arrow catalog__slick__arrow--horizontal catalog__slick__arrow--left"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-left"></span></div></div>',nextArrow:'<div role="button" aria-label="'+lang("Navigate to next image")+'" class="catalog__slick__arrow catalog__slick__arrow--horizontal catalog__slick__arrow--right"><div class="catalog__slick__arrow-bg"><span class="pf-i pf-i-chevron-right"></span></div></div>',dots:!1,responsive:[{breakpoint:u.a.BREAKPOINT_DOTS,settings:{dots:!0}}]}).find(".catalog__slick__arrow").attr("tabindex","0").on("keyup",(function(e){"enter"===e.key.toLowerCase()&&e.target.click()})),$(this._nodeImages).slick("slickSetOption","speed",0).slick("slickGoTo",this.currentSlide).slick("slickSetOption","speed",300),1===this.images.length&&$(this._nodeImages).addClass("one-image");var t=this.hasFitVideo()?1:0;this.images.length+t<=5&&$(this._nodeThumbnails).find(".slick-list").addClass("not-sliding")},_getThumb:function(e,t){return e.originalLink?e.originalLink:e.actualThumbLink&&!t?e.actualThumbLink:e.thumbLink},_getProductAltText:function(e){return this.productTitle+" thumbnail "+(parseInt(e)+1)},_renderVideoNode:function(e,t,i){i instanceof Function||(i=function(){});var n=tag("video",{className:"img-responsive",onclick:i,attr:{poster:t,preload:"true",playsinline:"true","webkit-playsinline":"true",muted:!0}},[tag("source",{attr:{src:e,type:"video/mp4"}})]);return n.muted=!0,n.loop=!0,n.autoplay=!1,n.playsinline=!0,n.controls=!1,n.preload=!1,n},_renderImage:function(e,t){var i=!1;!e.videoLink||e.videoId||e.videoThumbnail||(i=!0),this._imageModelInfo=tag("div",{id:"model-info-"+e.variantImageId,className:"catalog__product__model-info pf-d-none text-left"}),this._getModelInfo(e.modelInfo),this.isYoutubeVideo(null==e?void 0:e.videoLink)||(e.videoLink?tag("div","",[this._imageModelInfo,this._renderVideoNode(e.videoLink,this._getThumb(e,!0),this._onImageClick&&this._onImageClick.bind(this,t))]).append(this._nodeImages):tag("div","",[i?this._renderVideoNode(e.videoLink,this._getThumb(e,!0),this._onImageClick&&this._onImageClick.bind(this,t)):"",this._imageModelInfo,tag("img",{className:"img-responsive "+(i?"hidden":""),onclick:this._onImageClick&&this._onImageClick.bind(this,t),attr:{"data-lazy":this._getThumb(e,!0),src:this.emptyImage,alt:this._getProductAltText(t)}})]).append(this._nodeImages))},_updateTooltipInfo:function(e){if(e){var t=e.querySelector('[id^="model-info-"]'),i=t.querySelector(".model-info-content");if(this._tooltipNode.classList.add("pf-d-none"),t.childElementCount){var n=t.cloneNode(!0);n.classList.remove("pf-d-none"),i&&this._tooltipNode.classList.remove("pf-d-none"),this._tooltipNode.setAttribute("data-original-title",n.outerHTML),this._tooltipNode.setAttribute("aria-labeledby",t.id)}}},_renderTooltip:function(){var e=tag("span",{className:"catalog__product__model-badge pf-d-none",attr:{"data-toggle":"tooltip","data-placement":"bottom","data-container":"body","data-html":"true",tabindex:"0"},els:[tag("span",{className:"pf-badge pf-badge-location pf-bg-dark catalog__product__model-tooltip",attr:{"aria-hidden":"true"}},[tag("img",{src:"/static/images/products-catalog/ruler.svg",alt:"Ruler"})])]});return $(e).tooltip({html:!0,template:'\n                    <div class="tooltip catalog__product__tooltip" style="z-index: 99;">\n                         <div class="tooltip-arrow"></div>\n                         <div class="tooltip-inner catalog__product__tooltip-content"></div>\n                    </div>\n                '}),e},_getModelInfo:function(e){if(e)for(var t=JSON.parse(e),i=0;i<t.length;i++)this._getModelInfoText(t[i],t.length,i).append(this._imageModelInfo)},_getModelInfoText:function(e,t,i){for(var n=tag("div","model-info-content"+(i+1<t?" pf-mb-16":""),[]),r=0;r<e.length;r++)if("Gender"!==e[r].key){var a=void 0;(a="Comment"===e[r].key?this._getCommentText(e):"Size"===e[r].key?this._getSizeText(e):tag("p","",[this._getModelKeyText(e,e[r].key),e[r].value]))&&a.append(n)}return n},_getModelKeyText:function(e,t){var i,n=(Le(i={},"Waist circumference",dclang("products","tooltip","Waist circumference")),Le(i,"Chest circumference",dclang("products","tooltip","Chest circumference")),Le(i,"Height",dclang("products","tooltip","Height")),Le(i,"Hips",dclang("products","tooltip","Hips")),i);return tag("b","",[n[t]+": "])},_getCommentText:function(e){var t=e.find((function(e){return"Comment"===e.key}));return t?tag("p",{className:"pf-mt-16 pf-italic",style:{"white-space":"normal"}},t.value):null},_getSizeText:function(e){var t=e.find((function(e){return"Size"===e.key})),i="";return i="Female"===e.find((function(e){return"Gender"===e.key})).value?dclang("products","tooltip","Female model is wearing <b>size {size}</b>").replace("{size}",t.value):dclang("products","tooltip","Male model is wearing <b>size {size}</b>").replace("{size}",t.value),tag("p",{innerHTML:i})},_renderThumbnail:function(e,t){e.videoLink&&(e.videoId||e.videoThumbnail)?this._renderVideoThumbnail(e):tag("div","pf-mt-8 img-holder "+(this.currentSlide===t?" slick-current":""),[tag("img",{className:"img-responsive",onclick:function(){$(this._nodeImages).slick("slickGoTo",t,!0)}.bind(this),attr:{"data-lazy":this._getThumb(e),src:Se.a,alt:this._getProductAltText(t)}})]).append(this._nodeThumbnails)},_renderVideoThumbnail:function(e){this._nodeVideoButton&&(l.a.clearNode(this._nodeVideoButton),l.a.clearNode(this._nodeVideo)),this._nodeVideoButton=document.querySelector(".single-product-view__video-button");var t=tag("img",{className:"img-responsive center-block",src:this._getThumb(e)}),i=e.extension?"video/"+e.extension:e.type,n={loop:!0};Ee.c.isIOS()||(n.autoplay=!0),["video/mp4","video/webm"].includes(i)&&!this.isYoutubeVideo(e.videoLink)&&(t=tag("video",{className:"img-responsive center-block",width:"80px",height:"100px",prop:n},[tag("source",{attr:{src:this._getThumb(e),type:i}})]));var r=tag("div",{className:"pf-mt-8 img-holder video-gif pf-d-none pf-d-sm-block",attr:{role:"button",tabindex:"0","aria-label":lang("Watch product showcase")}},[t,this.isYoutubeVideo(e.videoLink)?tag("div",{className:"pf-d-flex pf-align-items-center pf-flex-column pf-justify-content-center video-gif__wrapper",onclick:this._onVideoClick.bind(this,e.videoLink)},[tag("div","video-gif__overlay pf-position-absolute pf-w-100 pf-h-100"),tag("img",{src:"".concat(PF.ASSETS_URL,"images/landing/youtube/youtube-icon.svg"),className:"pf-w-50 pf-bg-transparent video-gif__on-top"})]):tag("div","pf-d-flex pf-align-items-center pf-flex-column pf-justify-content-center video-gif__wrapper",[tag("div","video-gif__overlay pf-position-absolute pf-w-100 pf-h-100 pf-z"),tag("i","pf-i pf-i-play pf-i-36 video-gif__on-top")])]);this.isYoutubeVideo(e.videoLink)?r.append(this._nodeVideo):r.append(this._nodeThumbnails)},_setVideos:function(e,t){var i=e.filter((function(e){if(e.videoThumbnail)return!0}));return i.length>0?i:t},_setFilteredImages:function(e){return e.filter((function(e){if(!e.videoThumbnail)return!0}))},_onKeyUp:function(e){"keyup"===e.type&&(e.keyCode===$.ui.keyCode.RIGHT&&$(this._nodeImages).slick("slickNext"),e.keyCode===$.ui.keyCode.LEFT&&$(this._nodeImages).slick("slickPrev"))},isYoutubeVideo:function(e){return(null==e?void 0:e.search("youtube"))>=0},hasFitVideo:function(){var e=this;return this.videos.find((function(t){return!e.isYoutubeVideo(null==t?void 0:t.videoLink)}))},setSlickDots:function(){if(window.innerWidth<=u.a.BREAKPOINT_DOTS){var e=$(this._nodeImages).find(".slick-dots li").last();e.empty();var t='<a href="javascript:" class="pf-h-100 pf-d-flex pf-align-items-center pf-fit-video-button">\n                                    <img src="'.concat(PF.ASSETS_URL,'images/products-catalog/play-dot.svg" class="pf-fit-video-button__default">\n                                    <img src="').concat(PF.ASSETS_URL,'images/products-catalog/play-dot-active.svg" class="pf-fit-video-button__active">\n                                </a>');e.html(t)}},getYoutubeVideoLink:function(){var e,t=this;return null===(e=this.videos.filter((function(e){return t.isYoutubeVideo(null==e?void 0:e.videoLink)})))||void 0===e?void 0:e[0]}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductMediaGallery=Ae);var Re=Class({product:null,images:[],_tempImages:[],activeSlideIndex:0,__construct:function(e,t){this.productData=e,this._colorPicker=t,this._colorPickerNode=t.node.parentNode,this.product=e.product;var i=new Ie;i.onVideoClick=this._openVideoModal,i.productTitle=this.product.getFullTitle(),i.onImageClick=this._openImageModal,this._tempImages=e.images,this.node=tag("div","",[this.gallery=new Ae(i)]),window.addEventListener("keyup",this._onCloseModal.bind(this))},_getMatchingImages:function(e,t){return this._tempImages.filter(function(i){if(!i.variantMaps.length)return i.active;if(!i.active)return!1;var n=(new P.a).categories.getPath();for(var r in!n.length&&t&&((n=(new P.a).categories).setActiveCategoryId(t),n=n.getPath()),i.variantMaps)if(this._doesMapMatchVariant(i.variantMaps[r],e,n))return!0;return!1}.bind(this)).sort((function(e,t){return e.order-t.order}))},_doesMapMatchVariant:function(e,t,i){var n=i.some((function(t){return e.categoryId==t.id}));if(e.categoryId&&!n)return!1;var r=!e.color||e.color==t.color,a=!e.size||e.size==t.size;return r&&a},setVariantImage:function(e){var t=[{thumbLink:e.urlImage}],i=this._getMatchingImages(e,this.product.favoriteCatalogCategoryId);if(i.length){var n=i.map((function(t){var i;for(var n in t.backgroundOverride)n==e.color&&(i=t.backgroundOverride[n]);var r=null,a=null,o=null;return t.useGeneratorColor&&i?(r=i.colorCode,a=i.image,o=i.type):t.useVariantColor&&(r=t.useVariantColor?e.colorCode:null),{thumbLink:t.largeUrl,actualThumbLink:t.thumbUrl,originalLink:t.originalUrl,forceBackgroundImage:a,forceBackgroundColor:r,videoLink:t.videoUrl,videoThumbnail:t.videoThumbnail,type:o,extension:t.extension,modelInfo:t.modelInfo,variantImageId:t.variantImageId}})),r=!1,a=n.filter((function(e){return!!e.videoThumbnail||(r=!0,!1)}));t=!r&&a.length>0?t.concat(a):n}this._updateGallery(t)},_updateGallery:function(e){if(0===this.images.length)return this.images=e,void this.gallery.render(this.images,this.product.productVideoData);var t=this.images.map((function(e){return e.thumbLink})),i=e.map((function(e){return e.thumbLink}));if(t.length!==i.length)return this.images=e,void this.gallery.render(this.images,this.product.productVideoData);for(var n=0;n<e.length;n++)this.images[n].thumbLink!==e[n].thumbLink&&this.gallery._updateImgUrl(this.images[n].thumbLink,e[n].thumbLink),this.images[n].forceBackgroundColor!==e[n].forceBackgroundColor&&this.gallery._updateBackgroundColor(e[n].forceBackgroundColor),this.images[n].forceBackgroundImage!==e[n].forceBackgroundImage&&e[n].forceBackgroundImage&&this.gallery._updateBackgroundImage(e[n].forceBackgroundImage),!this.images[n].videoLink&&e[n].videoLink&&this.gallery._updateVideoFromImg(e[n].thumbLink,e[n].videoLink,n),this.images[n].videoLink&&!e[n].videoLink&&this.gallery._updateImgFromVideo(e[n].thumbLink),this.images[n].videoLink&&e[n].videoLink&&this.images[n].videoLink!==e[n].videoLink&&this.gallery._updateVideoFromVideo(e[n].videoLink,this.images[n].videoLink,e[n].thumbLink,n);this.images=e},_openVideoModal:function(e){var t,i=new U.a.Par;i.title=this.product.getFullTitle(),i.modalDialogClass="modal-lg",i.onClose=function(){t.remove()},(t=new U.a(i)).setContent(this._getVideoNode(e)),t.show()},_getVideoNode:function(e){return e.includes("youtube.com")?this._prepareYoutubeIframe(e):this._prepareHtmlVideo(e)},_prepareYoutubeIframe:function(e){return tag("iframe",{src:e,attr:{width:"100%",height:"480px",frameborder:"0"}})},_prepareHtmlVideo:function(e){return tag("video",{attr:{controls:!0,width:"100%",height:"480px"}},[tag("source",{attr:{src:e}})])},_openImageModal:function(e){if(window.innerWidth<u.a.BREAKPOINT_DOTS||!this.gallery.canClick)return!1;this.gallery.isModal?this._onCloseModal():($(this.gallery._thumbContainer).removeClass("col-md-3 col-lg-2").addClass("col-md-2 col-lg-1"),$(this.gallery._imgContainer).removeClass("col-md-9 col-lg-10").addClass("col-md-10 col-lg-11"),$(document.body).addClass("modal-open"),this._galleryModal=tag("div","catalog__slick__modal",[tag("div","container",[tag("div","modal-header",[tag("button",{className:"close",onclick:function(e,t){this._onCloseModal(t)}.bind(this),innerHTML:"&times;"})]),this.gallery,tag("div","modal-footer catalog__color-picker",[this._colorPicker])])]).append(this.node),$(this.gallery._nodeImages).slick("setPosition"),$(this.gallery._nodeThumbnails).slick("setPosition"),$(this.gallery.node).css("padding-bottom",$(".catalog__color-picker").outerHeight()),this.gallery.isModal=!0)},_onCloseModal:function(e){e&&"keyup"===e.type&&27!==e.keyCode||this._galleryModal&&($(this.gallery._thumbContainer).addClass("col-md-3 col-lg-2").removeClass("col-md-2 col-lg-1"),$(this.gallery._imgContainer).addClass("col-md-9 col-lg-10").removeClass("col-md-10 col-lg-11"),$(document.body).removeClass("modal-open"),this._galleryModal.remove(),this._colorPicker.append(this._colorPickerNode),this.gallery.append(this.node),$(this.gallery._nodeImages).slick("setPosition"),$(this.gallery._nodeThumbnails).slick("setPosition"),this.gallery.isModal=!1)}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductMedia=Re);var Ne=i("5OoY");function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fe(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Me=function(){function e(t){De(this,e),Fe(this,"columns",0),Fe(this,"htmlId",""),Fe(this,"reviews",[]),Fe(this,"isStatic",!1),this.columns=t.columns,this.htmlId=t.htmlId,this.reviews=t.reviews,this.isStatic=t.isStatic}var t,i,n;return t=e,(i=[{key:"render",value:function(){var e=12!==this.columns?"col-lg-4":"",t="reviews-landing"===this.htmlId?"pf-mb-40":"";return this.reviews.forEach((function(i){i.columnsClass=e,i.className=t})),this.reviews}}])&&xe(t.prototype,i),n&&xe(t,n),e}(),Be=function e(t){De(this,e),this.columns=t.columns||0,this.htmlId=t.htmlId||"",this.reviews=t.reviews||[],this.isStatic=t.isStatic||!1};function Ve(e){return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ue(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){je(a,n,r,o,s,"next",e)}function s(e){je(a,n,r,o,s,"throw",e)}o(void 0)}))}}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ge(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ye(e);if(t){var r=Ye(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return He(this,i)}}function He(e,t){return!t||"object"!==Ve(t)&&"function"!=typeof t?qe(e):t}function qe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function We(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Xe(e,t,"get"))}function Ke(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function Ze(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Xe(e,t,"set"),i),i}function Xe(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Qe=new WeakMap,$e=new WeakMap,Je=new WeakMap,et=new WeakMap,tt=new WeakMap,it=new WeakMap,nt=new WeakMap,rt=new WeakMap,at=new WeakMap,ot=new WeakMap,st=new WeakMap,lt=new WeakSet,ct=new WeakSet,ut=new WeakSet,dt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(i,e);var t=Ge(i);function i(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),ut.add(qe(r)),ct.add(qe(r)),lt.add(qe(r)),Qe.set(qe(r),{writable:!0,value:void 0}),$e.set(qe(r),{writable:!0,value:!1}),Je.set(qe(r),{writable:!0,value:""}),et.set(qe(r),{writable:!0,value:""}),tt.set(qe(r),{writable:!0,value:!1}),it.set(qe(r),{writable:!0,value:!1}),nt.set(qe(r),{writable:!0,value:!1}),rt.set(qe(r),{writable:!0,value:!1}),at.set(qe(r),{writable:!0,value:""}),ot.set(qe(r),{writable:!0,value:0}),st.set(qe(r),{writable:!0,value:!1}),Ze(qe(r),ot,e),Ze(qe(r),st,n),r.node=tag("div","row featured-items"),window.addEventListener("resize",Ke(qe(r),ct,ft).bind(qe(r))),Ke(qe(r),ut,gt).call(qe(r)),r}return i}(H.a);function ht(e){return pt.apply(this,arguments)}function pt(){return(pt=Ue(regeneratorRuntime.mark((function e(t){var n,r,a,o,s,l,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.success){e.next=2;break}return e.abrupt("return");case 2:Ke(this,ct,ft).call(this),Ze(this,$e,t.addBorderAroundImage),Ze(this,Je,t.blockTitle),Ze(this,et,t.htmlId),Ze(this,tt,!!t.isSlider),Ze(this,it,!!t.isCenter),Ze(this,nt,!!t.isStatic),Ze(this,rt,!!t.isWhiteSmoke),Ze(this,at,t.subtitle),n=new Be({columns:t.columns,htmlId:t.htmlId,reviews:t.reviews,isStatic:t.isStatic}),r=new Me(n),a="reviews-landing"===We(this,et)?"pf-pt-64 pf-pb-24":"pf-py-64",o=We(this,rt)?"pf-bg-lighter":"",s=We(this,at)?"pf-mb-24":"pf-mb-40",l={addBorderAroundImage:We(this,$e),blockTitle:We(this,Je),htmlId:We(this,et),isSlider:We(this,tt),isCenter:We(this,it),subtitle:We(this,at)},(c=new q.b).components={"featured-reviews":function(){return i.e(210).then(i.bind(null,"s/Bh"))}},c.template='\n            <featured-reviews\n                :items="items"\n                :className="className"\n                :whiteSmokeClass="whiteSmokeClass"\n                :blockTitleClass="blockTitleClass"\n                :templateData="templateData"\n            />\n        ',c.initialData={className:a,whiteSmokeClass:o,blockTitleClass:s,templateData:l},c.initialData.items=r.render(),Ze(this,Qe,new q.a(c)),We(this,Qe).append(this.node);case 24:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ft(){var e=(window.innerWidth-document.body.getBoundingClientRect().width)/2;this.node.style.marginLeft="calc(50% - 50vw + ".concat(e,"px)"),this.node.style.marginRight="calc(50% - 50vw + ".concat(e,"px)")}function gt(){Object(c.a)("product-catalog/get-featured-reviews-data",{productOrCategoryId:We(this,ot),isCatalog:We(this,st)},Ke(this,lt,ht).bind(this))}function mt(e){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Pt(e);if(t){var r=Pt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return yt(this,i)}}function yt(e,t){return!t||"object"!==mt(t)&&"function"!=typeof t?bt(e):t}function bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Pt(e){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ct(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,wt(e,t,"get"))}function Tt(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,wt(e,t,"set"),i),i}function wt(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var It=new WeakMap,St=new WeakMap,Et=new WeakMap,Ot=new WeakSet,kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(i,e);var t=vt(i);function i(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=t.call(this),Ot.add(bt(n)),It.set(bt(n),{writable:!0,value:{}}),St.set(bt(n),{writable:!0,value:!1}),Et.set(bt(n),{writable:!0,value:void 0}),Tt(bt(n),It,e.productSpecs),Tt(bt(n),St,e.product.shouldShowFileGuidelineTab()),n.node=Object(l.b)("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(bt(n),Ot,Lt).call(bt(n)),n}return i}(H.a);function Lt(){var e=new q.b;e.components={"product-specs":function(){return i.e(294).then(i.bind(null,"uP+a"))}},e.template='<product-specs :specs="specs" :show-file-guidelines="showFileGuidelines"/>',e.initialData={specs:Ct(this,It),showFileGuidelines:Ct(this,St)},Tt(this,Et,new q.a(e)),Ct(this,Et).append(this.node)}function At(e){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Mt(e);if(t){var r=Mt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return xt(this,i)}}function xt(e,t){return!t||"object"!==At(t)&&"function"!=typeof t?Ft(e):t}function Ft(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bt(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Vt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(o,e);var t,n,r,a=Dt(o);function o(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),Bt(Ft(t=a.call(this)),"reviewableList",void 0),Bt(Ft(t),"wrapper",void 0),t.reviewableList=e,t}return t=o,(n=[{key:"setList",value:function(e){this.reviewableList=e}},{key:"render",value:function(e,t){var n=new q.b;n.components={"review-filters":function(){return Promise.all([i.e(1),i.e(313)]).then(i.bind(null,"hbaK"))}},n.template='<review-filters :reviewableList="reviewableList" :initialStars="stars"/>',n.initialData={reviewableList:this.reviewableList,stars:t||0},this.wrapper=new q.a(n),this.wrapper.prepend(e)}},{key:"reRender",value:function(e,t){this.wrapper.destroy(),this.wrapper.remove(),this.render(e,t||0)}}])&&Rt(t.prototype,n),r&&Rt(t,r),o}(H.a),jt=i("D5LZ");function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Gt(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){zt(a,n,r,o,s,"next",e)}function s(e){zt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Xt(e);if(t){var r=Xt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Kt(this,i)}}function Kt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?Zt(e):t}function Zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Jt(e,t,"get"))}function $t(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Jt(e,t,"set"),i),i}function Jt(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var ei=new WeakMap,ti=new WeakMap,ii=new WeakSet,ni=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(a,e);var t,i,n,r=Wt(a);function a(e){var t;return Ht(this,a),t=r.call(this),ii.add(Zt(t)),ei.set(Zt(t),{writable:!0,value:void 0}),ti.set(Zt(t),{writable:!0,value:void 0}),t.node=tag("div","single-product-view__product-actions-mke"),$t(Zt(t),ei,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Zt(t),ii,ri).call(Zt(t)),t}return t=a,(i=[{key:"destroy",value:function(){Qt(this,ti).destroy(),$t(this,ti,null)}}])&&qt(t.prototype,i),n&&qt(t,n),a}(H.a);function ri(){return ai.apply(this,arguments)}function ai(){return(ai=Gt(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new q.b).components={"product-actions":function(){return i.e(283).then(i.bind(null,"qMjw"))}},t.template='\n            <product-actions\n                :is-product-video="isProductVideo"\n                :is-favorite-products-enabled="isFavoriteProductsEnabled"\n                :is-product-favorite="isProductFavorite"\n                @on-video-button-click="emitEvent(\'onVideoButtonClick\')"\n                @on-favorite-button-click="emitEvent(\'onFavoriteButtonClick\', $event)"\n            />\n        ',t.initialData={isProductVideo:Qt(this,ei).isProductVideo,isFavoriteProductsEnabled:Qt(this,ei).isFavoriteProductsEnabled,isProductFavorite:Qt(this,ei).isProductFavorite},t.emitEvent=function(e,t){switch(e){case"onVideoButtonClick":Qt(n,ei).onVideoButtonClick&&Qt(n,ei).onVideoButtonClick();break;case"onFavoriteButtonClick":Qt(n,ei).onFavoriteButtonClick&&Qt(n,ei).onFavoriteButtonClick(),Qt(n,ti).updateData({isProductFavorite:t})}},$t(this,ti,new q.a(t)),Qt(this,ti).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var oi=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ht(this,e),this.isProductVideo=t.isProductVideo||!1,this.isFavoriteProductsEnabled=t.isFavoriteProductsEnabled||!1,this.isProductFavorite=t.isProductFavorite||!1,this.onVideoButtonClick=t.onVideoButtonClick||void 0,this.onFavoriteButtonClick=t.onFavoriteButtonClick||void 0};function si(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var li,ci,ui=Class({productData:null,_tabs:null,_isProductVideo:null,_isFavoriteProductsEnabled:null,__construct:function(e){G.o(PFShoppingCart.EVENT_PREPARE_CART),G.q(PFShoppingCart.EVENT_CART_CREATED,(function(){return G.o(PFShoppingCart.EVENT_PREPARE_CART)})),this.productData=e,this.node=tag("div"),(new n.a).saveRecentlyViewedProduct(this.productData.product.productId)},init:(li=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.a.isFavoriteProductsEnabled();case 2:this._isFavoriteProductsEnabled=e.sent,this.render();case 4:case"end":return e.stop()}}),e,this)})),ci=function(){var e=this,t=arguments;return new Promise((function(i,n){var r=li.apply(e,t);function a(e){si(r,i,n,a,o,"next",e)}function o(e){si(r,i,n,a,o,"throw",e)}a(void 0)}))},function(){return ci.apply(this,arguments)}),render:function(){var e=this;l.a.clearNode(this.node);var t=0,i=!1;/^#reviews_[1-5]$/.test(window.location.hash)&&(t=window.location.hash.slice(-1),i=!0),this.reviewsList=new A.a(new L.a(this.productData.product),t,i,(function(t){e.reviewFilters.reRender(e.reviewNode,t)})),this.reviewFilters=new Vt(this.reviewsList),this.productInfo=new Ne.a(this.productData,this.onVariantChanged,this.onTechniqueChanged,this.onReviewsOpen,this.reviewsList.load.bind(this.reviewsList)),this.productMedia=new Re(this.productData,this.productInfo.getColorPicker()),this.productMedia.setVariantImage(this.productData.activeVariant);var n=this.productMedia.gallery.getYoutubeVideoLink();this._isProductVideo=!(null==n||!n.videoLink);var r=null;this.productData.sellingRegionSettings&&(r=jt.c.fromArray(this.productData.sellingRegionSettings));var a=new oi;a.isProductVideo=this._isProductVideo,a.isFavoriteProductsEnabled=this._isFavoriteProductsEnabled,a.isProductFavorite=this.productData.isFavorite,a.onFavoriteButtonClick=this.productInfo.openFavoritesLink,a.onVideoButtonClick=this._isProductVideo?this.productMedia.gallery._onVideoClick.bind(this,null==n?void 0:n.videoLink):null;var o=new ni(a);tag("div","",[tag("div","container",[tag("div","row",[tag("div","col-md-6 col-lg-7 offset-xl-1 col-xl-5",[this.productMedia]),this._isProductVideo||this._isFavoriteProductsEnabled?tag("div","pf-d-sm-none pf-mt-16",[o]):"",tag("div","col-md-6 col-lg-5 offset-xl-1 col-xl-4 pf-mt-32 pf-mt-md-0 pf-mb-24",[this.productInfo])])]),Object.keys(this.productData.productSpecs).length?new kt(this.productData):new we(this.productData,this.onOpenTemplatesTab),tag("div","container",[this._tabs=new Te(this.productData,this.productInfo,this.onVariantChanged)]),tag("hr","pf-my-0 pf-border-light"),this.productData.isFeaturedReviews?new dt(this.productData.product.productId,!1):"",tag("div","container pf-ui-body pf-mb-48 pf-mt-48",[this.reviewNode=tag("div",{className:"row",id:"reviews"},[this.reviewsList])]),tag("div","container",[tag("div","row",[tag("div","col-sm-12",[new g(g.TYPE_SIMILAR,this.productData.similarProducts,r)])])])]).append(this.node),this.reviewFilters.render(this.reviewNode)},setActiveTab:function(e,t){this._tabs.isTabEventDispatching=t,this._tabs.setActive(e)},onOpenTemplatesTab:function(){this._tabs.setActive("guidelines"),$("html, body").animate({scrollTop:$(this._tabs.node).offset().top},1e3)},onVariantChanged:function(e){G.o(G.m,null==e?void 0:e.variantId),this.productData.activeVariant=e,this.productMedia&&this.productMedia.setVariantImage(e)},onTechniqueChanged:function(e){G.o(G.l,e)},onReviewsOpen:function(){history.pushState(null,null,"#reviews"),this.reviewsList.scrollToNode(),this.reviewsList.node.querySelector("a, select, input, button").focus()}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProduct=ui);var di=Class({categoryId:null,actionBefore:null,forMockupGenerator:!1,forProductPush:!1,forOrderFlow:!1,forProductTemplate:!1,storeId:null,productTotalCount:null,matchSellingRegion:!1,doesNotMatchSellingRegion:!1,allowedType:null,requiredPlacements:[]});window&&((globalThis||{}).PFProductsCatalogItemsGetProductParams=di);var hi=Class({bannerId:"",buttonText:"",imgSrc:"",imgSrcMobile:"",url:"",title:"",columns:[]});window&&((globalThis||{}).PFProductsCatalogComponentsProductsBannerPar=hi);var pi=Class({__construct:function(e){this._par=e,this.node=tag("a",{className:"pf-px-16 pf-mb-sm-24 bubble pf-pt-2",onclick:this._onBannerClicked.bind(this)},[tag("div","pf-product-banner-block pf-border pf-rounded pf-hover-shadow",[tag("picture","pf-product-banner-block__item",[tag("source",{attr:{srcset:this._par.imgSrc,media:"(min-width: 767px)"}}),tag("source",{attr:{srcset:this._par.imgSrcMobile}}),tag("img",{src:this._par.imgSrc})]),tag("div",this._getColumns()+" pf-p-16 pf-p-lg-24 pf-product-banner-block__info",[tag("h2","pf-h3 pf-m-0",this._par.title),this._par.buttonText?tag("a","pf-mt-16 pf-btn pf-btn-primary",this._par.buttonText):""])])])},_getColumns:function(){return this._par.columns.join(" ")},_onBannerClicked:function(){location.href=this._par.url,ga("send","event","Banner Clicks","PnP Banner",this._par.bannerId+" clicked")}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogComponentsProductsBanner=pi);var fi=i("0rxu"),gi=i("OVdC"),mi=i("fQ40"),_i=i("L5Qw"),vi=i("n5ho"),yi=i("IGMQ"),bi=i.n(yi),Pi=i("KWDz"),Ci=i.n(Pi),Ti=i("LvDl"),wi=i.n(Ti),Ii=i("I/MA"),Si=i("Rsrl"),Ei=i("nuUa");function Oi(e){return(Oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ki(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Li(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ai(e,t){return(Ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ri(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=xi(e);if(t){var r=xi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ni(this,i)}}function Ni(e,t){return!t||"object"!==Oi(t)&&"function"!=typeof t?Di(e):t}function Di(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xi(e){return(xi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fi(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function Mi(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Vi(e,t,"get"))}function Bi(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Vi(e,t,"set"),i),i}function Vi(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var ji=new WeakMap,Ui=new WeakMap,zi=new WeakMap,Gi=new WeakMap,Hi=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Wi=new WeakMap,Ki=new WeakSet,Zi=new WeakSet,Xi=new WeakSet,Qi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ai(e,t)}(a,e);var t,i,n,r=Ri(a);function a(e){var t;return ki(this,a),t=r.call(this),Xi.add(Di(t)),Zi.add(Di(t)),Ki.add(Di(t)),ji.set(Di(t),{writable:!0,value:null}),Ui.set(Di(t),{writable:!0,value:[]}),zi.set(Di(t),{writable:!0,value:null}),Gi.set(Di(t),{writable:!0,value:null}),Hi.set(Di(t),{writable:!0,value:[]}),qi.set(Di(t),{writable:!0,value:null}),Yi.set(Di(t),{writable:!0,value:null}),Wi.set(Di(t),{writable:!0,value:null}),t.node=tag("div","",[t.dropdownNode=tag("div")]),Bi(Di(t),ji,e),Bi(Di(t),Gi,Mi(Di(t),ji).onChanged),Bi(Di(t),Hi,Mi(Di(t),ji).activeValue),Bi(Di(t),qi,Mi(Di(t),ji).products),Bi(Di(t),Yi,Mi(Di(t),ji).productCategory),Fi(Di(t),Ki,$i).call(Di(t)),t}return t=a,(i=[{key:"setActiveCategory",value:function(e){"string"==typeof e&&(e=[e]),Bi(this,Hi,e)}},{key:"getActiveValue",value:function(){return Mi(this,Hi)}}])&&Li(t.prototype,i),n&&Li(t,n),a}(H.a);function $i(){Bi(this,Ui,[{id:"popular",items:[{id:"popular",value:"popular",name:dlang("products","Most popular")}]},{id:"relevant",items:[{id:"relevant",value:"relevant",name:dlang("products","Relevance")}]},{id:"fastestDelivery",items:[{id:"fastestDelivery",value:"fastestDelivery",name:dlang("products","Fastest delivery")}]},{id:"is_new",items:[{id:"is_new",value:"is_new",name:dlang("products","New")}]},{id:"review",items:[{id:"review",value:"review",name:dlang("products","Highest rated")}]},{id:"price",name:dlang("products","Price"),items:[{id:"priceLow",value:"priceLow",name:dlang("products","Low - High")},{id:"priceHigh",value:"priceHigh",name:dlang("products","High - Low")}]},{id:"favorites",name:dlang("products","Date saved as favorite"),items:[{id:"favoritesAsc",value:"favoritesAsc",name:dlang("products","Newest - Oldest")},{id:"favoritesDesc",value:"favoritesDesc",name:dlang("products","Oldest - Newest")}]}]),Bi(this,Wi,Fi(this,Xi,en).call(this)),Bi(this,zi,new Ei.a(new Ei.b({activeItems:[Mi(this,Wi)[0].items[0].id],items:Mi(this,Wi),onChange:Fi(this,Zi,Ji).bind(this)}))),Mi(this,zi).append(this.dropdownNode),this.setActiveCategory([Mi(this,Wi)[0].items[0].id])}function Ji(e){var t=e.id;"string"==typeof t&&(t=[t]),this.setActiveCategory(t),Mi(this,Gi).call(this,t)}function en(){var e=Mi(this,Ui),t=Mi(this,qi),i=Mi(this,Yi);if(i&&i.relevantSortingRegions&&PF.Customer.location){var n=["WORLDWIDE",PF.Customer.location.country];"europe"===PF.Customer.location.region&&n.push("EU"),[i.relevantSortingRegions,n].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))})).length||(e=e.filter((function(e){return"relevant"!==e.id})))}else e=e.filter((function(e){return"relevant"!==e.id}));var r=Si.a.sellingRegion||PF.Customer.sellingRegionSetting;if(r&&null!=r&&r.isSingleCountry()||(e=e.filter((function(e){return"fastestDelivery"!==e.id}))),t){var a=[];for(var o in t){var s=t[o];s instanceof vi.a&&(s=s.getCachedProduct()),a.push(s)}(t=a||t).some((function(e){return null==e?void 0:e.isNew}))&&e.filter((function(e){return"is_new"!==e.id})),t.every((function(e){var t;return null!==(t=null==e?void 0:e.isFavorite)&&void 0!==t?t:null}))||(e=e.filter((function(e){return"favorites"!==e.id}))),t.some((function(e){return null==e?void 0:e.reviewRating}))||(e=e.filter((function(e){return"review"!==e.id}))),t.some((function(e){return null==e?void 0:e.isPopular}))||(e=e.filter((function(e){return"popular"!==e.id})))}return e}var tn=function e(t){var i=t.onChanged,n=void 0===i?null:i,r=t.activeValue,a=void 0===r?null:r,o=t.products,s=void 0===o?null:o,l=t.productCategory,c=void 0===l?null:l;ki(this,e),this.onChanged=n,this.activeValue=a,this.products=s,this.productCategory=c},nn=Class({id:"models",filters:null,_searchKeywords:"",_products:null,_filters:null,_warningTexts:null,_category:null,page:1,productsPerPage:24,url:new w.a,showFulfillmentCountries:!0,isTabAlwaysVisible:!0,sortMethods:fi.b,_totalProductCount:0,_maxCountPerPage:0,_minCountPerPage:0,isSampleOrder:!1,activeStoreId:null,__construct:function(){var e=this;this._searchKeywords=this.url.query.search||"",this.page=this.url.query.page?parseInt(this.url.query.page):1,this.node=tag("div","",[this._filtersNode=tag("div","",[tag("div","row pf-mt-16 hidden-xs",[this._beforeFilterNode=tag("div","pf-d-flex pf-align-items-center col-xs-12 col-sm-8",[this._resultsPerPageNode=tag("span"),this._nodeClearFilters=tag("a",{className:"pf-link pf-d-none pf-ml-24",onclick:this._clearFilters.bind(this)},dlang("products","Clear filters"))]),this._productFilterNode=tag("div","col-sm-4",[this._productFilterDropdown=tag("div")])]),tag("div","row pf-mt-16 hidden-sm hidden-md hidden-lg products-pricing",[this._nodeMobileFilters=tag("div","products-pricing__mobile-filters "+(Object(Ee.b)()?"touch":""),[tag("div",{className:"products-pricing__mobile-filters__filter pf-px-16 pf-py-8 pull-left",prop:{onclick:this._onMobileFilter}},[tag("div","pf-text-muted small",[lang("Filter by")]),this._nodeMobileFilterTitle=tag("div","bold")]),tag("div","products-pricing__mobile-filters__filter pf-px-16 pf-py-8 pull-left",[tag("div","pf-text-muted small",[lang("Sort by")]),this._nodeMobileSortTitle=tag("div","bold",[dlang("products","Most popular")]),this._sortBox=tag("select",{prop:{onchange:this._changeMobileSort}}),tag("div","dropdown",[tag("div",{className:"dropdown-toggle",attr:{"data-toggle":"dropdown"}}),this._mobileSortDropdown=tag("ul","dropdown-menu pf-p-0")])]),tag("div","col-6 pf-mt-16 pf-px-8 pull-right",[this._nodeMobileClearFilters=tag("a",{className:"catalog__sidebar-filter__clear pf-link pf-d-none pull-right",onclick:this._clearFilters.bind(this)},dlang("products","Clear filters"))]),tag("div","col-12 pf-mt-16 pf-px-8 pull-left",[this._mobileResultsPerPageNode=tag("div")]),tag("div","clearfix")])])]),this._nodeWarning=tag("div"),this._productsNode=tag("div","clearfix"),this._nodeFooter=tag("div")]),S.a.isFavoriteProductsEnabled().then((function(t){t&&(e._favoritesNode=tag("div",{className:"products-pricing__mobile-filters touch "+(s.a.isWindowSmallerThan(s.a.XS)?"pf-border-top":"")},[tag("div",{onclick:e.openFavoritesLink.bind(e),className:"pf-pb-xs-16 pf-pt-xs-0 pf-px-16 pf-py-16 pf-bold",text:lang("My favorites"),href:"javascript:;"},[tag("i","pf-i pf-i-heart pf-i-18 pf-text-muted pull-right")])]),e._nodeMobileFilters.parentNode.insertBefore(e._favoritesNode,e._nodeMobileFilters),window.addEventListener("resize",wi.a.debounce(e._changeFavoritesNodeBorder.bind(e),100)))}))},render:function(e){var t,i;null!=e&&e.activeStoreId&&(this.activeStoreId=e.activeStoreId),null!=e&&e.category&&(this._category=e.category),e&&e.products&&(this._products=e.products,this._filters=e.filters,this._renderSortOptions(this._products,this._category)),e&&null!==e.keywords&&(this._searchKeywords=e.keywords),e&&void 0!==e.showFulfillmentCountries&&(this.showFulfillmentCountries=e.showFulfillmentCountries),null!=e&&e.isFilterOutside&&this._renderFilterOutside(),e&&e.page&&(this.page=e.page),e&&e.categoryTexts&&(this._warningTexts=e.categoryTexts),this.renderSortDropdown();var n=this._productDropdown.getActiveValue(),r=null===(t=this._products)||void 0===t?void 0:t.filter(this._isProductMatchingKeywords).sort(this.sortProducts.bind(this,n));if(e&&e.totalProductCount){var a=Object.values(e.filters).some((function(e){return e.length}));this._totalProductCount=a?r.length:e.totalProductCount,this._renderResultsPerPage()}var o=Math.ceil(Number(this._totalProductCount)/this.productsPerPage);if(o>0&&this.page>o)return this._onPaginate(o),this;if((null==e||!e.skipProductsRendering)&&(this.renderProducts(r),this._totalProductCount>this.productsPerPage)){var s=new mi.a;s.page=this.page,s.pages=o,s.callback=this._onPaginate,s.scrollNode=this.node,s.scrollOffset=-100,s.className="pf-mt-16",tag("div","clearfix",[new _i.a(s)]).append(this._productsNode)}return null!==(i=this._warningTexts)&&void 0!==i&&i.shouldRender&&this._renderWarning(),this._renderFilterTitles(),this._onFilter(),this},renderSortDropdown:function(){l.a.clearNode(this._productFilterDropdown),this._productDropdown=new Qi(new tn({onChanged:this.sortProductsByCategory.bind(this),products:this._products,productCategory:this._category})).append(this._productFilterDropdown)},_renderFilterTitles:function(){var e="",t=$(this._sortBox).find("option:selected").text();this._filters&&(e=Object.values(this._filters).filter((function(e){return e&&e.length>0})).join(", ")),e||(e=lang("No filters")),l.a.setNodeText(this._nodeMobileFilterTitle,e),l.a.setNodeText(this._nodeMobileSortTitle,t)},getProductFilterDropdown:function(){return this._productFilterDropdown},sortProducts:function(e,t,i){return this.sortMethods[e](t,i)},sortProductsByCategory:function(e){var t,i=null===(t=this._products)||void 0===t?void 0:t.filter(this._isProductMatchingKeywords).sort(this.sortProducts.bind(this,e));this.renderProducts(i)},renderProducts:function(e){var t;l.a.clearNode(this._productsNode);var i=null==e?void 0:e.filter(this._limitProducts),n=tag("div","row row-flex pf-mt-16",[(null==i?void 0:i.length)<1?tag("div","col-12",[tag("div","alert alert-warning text-center",[dlang("products","Sorry, couldn't find any products")])]):""]);if(0===(null==i?void 0:i.length)&&(null===(t=this._category)||void 0===t?void 0:t.id)===I.a.ID_FAKE_FAVORITES)n=tag("div","pf-d-flex pf-align-items-center pf-flex-column pf-align-items-center pf-justify-content-center",[tag("img",{className:"favorites-image",src:Ci.a}),tag("div","pf-pt-40",dlang("products","Pick your favorite products and weâll list them here"))]);else for(var r in i){this._getProductListItem(i[r]).append(n)}n.append(this._productsNode)},_getProductListItem:function(e){var t,i,n=null,r=e;return e instanceof vi.a&&(n=e,r=e.getCachedProduct()),new h.a({product:r,variant:n,className:"col-6 col-md-4 col-xl-3 pf-mb-0 pf-mb-md-8 pf-mb-lg-16",showSizes:!r.isEmbroidery()||r.isApparelEmbroidery(),showFulfillmentCountries:this.showFulfillmentCountries,isUnavailable:this._isUnavailable(r),url:u.a.isGenerator()?r.getMockupGeneratorUrl():r.catalogPageUrl,callback:this._onClickProduct.bind(this,r,n),technique:this._getCategoryTechnique(r),isSampleOrderContext:this._isSampleOrderFlow(),isModal:u.a.isOrderFlow()||u.a.isProductPush(),disableEdt:Boolean(null===(t=this._category)||void 0===t||null===(i=t.settings)||void 0===i?void 0:i.productsRegion)})},_getCategoryTechnique:function(e){var t=this._getFirstTechnique(e);return this._category&&this._category.isEmbroideryShirts()&&e.hasTechnique(R.a.TYPE_EMBROIDERY)?R.a.TYPE_EMBROIDERY:t},_onClickProduct:function(e,t,i,n){n&&n.preventDefault(),this._isUnavailable(e)||_.a.createAndDispatch(u.a.EVENT_PRODUCT_CHOOSE,{skipHistory:u.b.catalogType===u.a.TYPE_MG,scrollToTop:u.a.isProductsPricing(),activeProductId:e.productId,activeVariantId:t?t.variantId:null})},_getFirstTechnique:function(e){var t=this._filters.availableTechniques;return t.length?t[0]:e.type},_isProductMatchingKeywords:function(e){if(!this._searchKeywords)return!0;var t=this._searchKeywords.toLowerCase().split(" "),i=0,n=e.colors?e.colors.map((function(e){return e.colorName})).join(" "):e.color,r=e.sizes?e.sizes.join(" "):e.size;for(var a in t){var o=e.model&&e.model.toLowerCase().indexOf(t[a])>-1,s=e.brand&&e.brand.toLowerCase().indexOf(t[a])>-1,l=e.title&&e.title.toLowerCase().indexOf(t[a])>-1,c=e.name&&e.name.toLowerCase().indexOf(t[a])>-1,u=r&&r.replace(/Ã/g,"x").toLowerCase().indexOf(t[a])>-1,d=n&&n.toLowerCase().indexOf(t[a])>-1;(o||s||l||c||u||d)&&i++}return i===t.length},_renderSortOptions:function(e,t){var i="";this._sortBox.value&&(i=this._sortBox.value),l.a.clearNode(this._sortBox),l.a.clearNode(this._mobileSortDropdown);var n=this._getSortingOptions(e,t,!0,!1,i);for(var r in n){var a=n[r];this._sortBox.appendChild(a)}var o=this._getSortingOptions(e,t,!1,!0,i);for(var r in o)this._mobileSortDropdown.appendChild(o[r])},_renderResultsPerPage:function(){var e,t,i=this;if(null!==(e=this._category)&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.productsRegion)return"";this._minCountPerPage=this.page*this.productsPerPage-(this.productsPerPage-1),this._maxCountPerPage=Math.min(this._minCountPerPage+this.productsPerPage-1,this._totalProductCount),l.a.clearNode(this._resultsPerPageNode),l.a.clearNode(this._mobileResultsPerPageNode);var n=tag("span"),r=Si.a.sellingRegion;if(r){var a=PF.Customer.isLogged()&&!PF.Customer.isB2cStarter(),o=tag("span","pf-ui-body"),s=dlang("products","Showing {total} results that deliver to {icon} {region} and match your current delivery preferences");a&&(s=dlang("products","Showing {total} results that deliver to {icon} {region} and match your current selling preferences")),r.isWorldwide()&&(s=dlang("products","Showing full product catalog for {icon} {region} delivery"));var c="";c=a?dlang("products","You can change the Global default selling preferences {linkStart}here{linkEnd}"):dlang("products","You can change the Default catalog and delivery preferences {linkStart}here{linkEnd}"),o.innerHTML=s.replace("{total}",this._totalProductCount.toString()).replace("{region}",r.getName()).replace("{icon}",tag("img",{src:r.getIcon(),style:{width:"24px",marginTop:"-4px"}}).outerHTML);var u=tag("i",{className:"pf-i pf-pointer pf-i-information pf-i-18 pf-text-gray pf-ml-4",style:{marginTop:"-2px",outline:"none"},attr:{tabindex:0,title:c.replace("{linkStart}",'<a class="pf-link-white pf-pointer dsr-settings-tooltip-link">').replace("{linkEnd}","</a>"),"data-toggle":"tooltip","data-container":"body","data-trigger":"hover","data-delay":'{"hide": 700}',"data-html":!0}});n=tag("div","",[o,u]),$(u).tooltip(),$(u).on("shown.bs.tooltip",(function(){document.querySelector(".dsr-settings-tooltip-link").addEventListener("click",(function(){Object(f.b)(i.activeStoreId)}))}))}else n=tag("span","",dlang("products","{minPerPage} - {perPage} of {total} results").replace("{minPerPage}",this._minCountPerPage.toString()).replace("{perPage}",this._maxCountPerPage.toString()).replace("{total}",this._totalProductCount.toString()));this._addResultsPerPageNode(n),window.addEventListener("resize",wi.a.debounce((function(){return i._addResultsPerPageNode(n)}),100))},_addResultsPerPageNode:function(e){var t=s.a.isWindowSmallerThan(s.a.SIZES.SM)?this._mobileResultsPerPageNode:this._resultsPerPageNode;t.hasChildNodes()||t.appendChild(e)},_clearFilters:function(){this.filters&&this.filters.clearAll()},_onFilter:function(){this.filters&&this.filters._filters&&(this.filters._filters.getAllSelectedValues().length?(l.a.removeClassName(this._nodeClearFilters,"pf-d-none"),l.a.removeClassName(this._nodeMobileClearFilters,"pf-d-none")):(l.a.addClassName(this._nodeClearFilters,"pf-d-none"),l.a.addClassName(this._nodeMobileClearFilters,"pf-d-none")))},_renderFilterOutside:function(){l.a.removeClassName(this._beforeFilterNode,"col-sm-8"),l.a.addClassName(this._productFilterNode,"pf-d-none")},_getSortingOptions:function(e,t,i,n,r){var a={popular:dlang("products","Most popular"),fastestDelivery:dlang("products","Fastest delivery"),relevant:dlang("products","Relevance"),is_new:dlang("products","New"),review:dlang("products","Highest rated"),price:[dlang("products","Price"),{priceLow:dlang("products","Low - High"),priceHigh:dlang("products","High - Low")}],favorites:[dlang("products","Date saved as favorite"),{favoritesAsc:dlang("products","Newest - Oldest"),favoritesDesc:dlang("products","Oldest - Newest")}]};if(t&&t.relevantSortingRegions&&PF.Customer.location){var o=["WORLDWIDE",PF.Customer.location.country];"europe"===PF.Customer.location.region&&o.push("EU"),wi.a.intersection(t.relevantSortingRegions,o).length||delete a.relevant}else delete a.relevant;var s=Si.a.sellingRegion||PF.Customer.sellingRegionSetting;if(s&&null!=s&&s.isSingleCountry()||delete a.fastestDelivery,e){var l=[];for(var c in e){var u=e[c];u instanceof vi.a&&(u=u.getCachedProduct()),l.push(u)}(e=l||e).some((function(e){if(e.hasOwnProperty("isNew"))return e.isNew}))||delete a.is_new,e.every((function(e){return e.hasOwnProperty("isFavorite")?e.isFavorite:null}))||delete a.favorites,e.some((function(e){if(e.hasOwnProperty("reviewRating"))return e.reviewRating.reviewCount>0}))||delete a.review,e.some((function(e){if(e.hasOwnProperty("isPopular"))return e.isPopular}))||delete a.popular}return this._getSortingOptionsDOM(a,i,n,r)},_getSortingOptionsDOM:function(e,t,i,n){if(t){var r=[];for(var a in e){if("string"==typeof(h=e[a]))r.push(tag("option",{value:a,prop:{selected:a===n}},[h]));else{var o=[],s=h[0],l=h[1];for(var c in l){var u=l[c];o.push(tag("option",{value:c,prop:{selected:c===n}},[u]))}r.push(tag("optgroup",{attr:{label:s}},[o]))}}return r}if(i){var d=[];for(var a in e){var h;if("string"==typeof(h=e[a]))d.push(tag("li",{className:"pf-p-12 pf-ui-body",value:a,onclick:this._changeMobileSort.bind(this,{target:{value:a}})},[h]));else{var p=[];s=h[0],l=h[1];for(var c in p.push(tag("li","pf-px-8 pf-py-4 pf-ui-body pf-bold",[s])),l){u=l[c];p.push(tag("li",{className:"pf-p-12 pf-pl-16 pf-ui-body",value:c,onclick:this._changeMobileSort.bind(this,{target:{value:c}})},[u]))}d.push(tag("ul","pf-p-0",[p]))}}return d}return e},_isUnavailable:function(e){return e.isDisabledInPush&&(u.a.isProductPush()||u.a.isGenerator())&&!(e.hasBetaAccess&&u.a.isGenerator())},_isSampleOrderFlow:function(){return u.a.isOrderFlow()&&(this.order=Ii.a.getActiveInstance(),this.isSampleOrder=this.order.isSampleOrder),this.isSampleOrder},_onSearch:function(){_.a.createAndDispatch(u.a.EVENT_PRODUCTS_FILTER,{productSearchKeywords:this._searchBox.getValue(),productsOrVariants:this._products})},_limitProducts:function(e,t){var i=(this.page-1)*this.productsPerPage,n=i+this.productsPerPage;return t>=i&&t<n},_onPaginate:function(e){this.page=e,_.a.createAndDispatch(u.a.EVENT_PRODUCTS_FILTER,{productsViewPage:this.page,productsOrVariants:this._products}),this._renderResultsPerPage()},_changeMobileSort:function(e){this._sortBox.value=e.target.value,this.sortProductsByCategory(this._sortBox.value),this._renderFilterTitles()},_onMobileFilter:function(e){e.preventDefault(),$("html, body").css("overflow","pf-d-none"),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","pf-d-none"),$(document).find(".catalog__sidebar-floating").addClass("open")},_renderWarning:function(){u.b.catalogType!==u.a.TYPE_MG&&(l.a.clearNode(this._nodeWarning),tag("div","pf-pb-8 pf-pt-24",[new p.a({id:"product-selector-banner",type:"gray",heading:this._warningTexts.heading,content:this._warningTexts.content,linkText:this._warningTexts.linkText,icon:bi.a,closable:!0,onLinkClick:function(){window.open(langUrl("/covid-19"),"_blank")}})]).append(this._nodeWarning))},openFavoritesLink:function(){_.a.createAndDispatch(u.a.EVENT_NAME,{category:I.a.getTemporaryFavoritesCategory()})},_changeFavoritesNodeBorder:function(){this._favoritesNode.className="products-pricing__mobile-filters touch "+(s.a.isWindowSmallerThan(s.a.XS)?"pf-border-top":"")}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogViewsProductsSelector=nn);var rn=Class({id:"retail-prices",_products:[],renderProducts:function(e){if(!e)return this;var t=e.filter(this._limitProducts);return this.retailPriceView?this.retailPriceView.setItems(t):this.retailPriceView=new gi.a(t),l.a.clearNode(this._productsNode),Object(l.a)({tag:"div",className:"table-responsive",els:[this.retailPriceView]}).append(this._productsNode),l.a.clearNode(this._nodeFooter),Object(l.a)({tag:"div",className:"margin-bottom-40",els:[this._hasLargeSize()?{tag:"p",els:[{tag:"span",className:"pf-mr-4 pf-text-red",text:"*"},dlang("products","Sizes 2XL and larger can be up to $1.50 extra per item.")]}:"",{tag:"p",els:[{tag:"span",className:"pf-mr-4 pf-text-red",text:"**"},dlang("products","The price you sell at is up to you. Want more profit? Sell at a higher price!")]}]}).append(this._nodeFooter),this},_getSortingOptions:function(e,t){var i={popular:dlang("products","Popular"),price:[dlang("products","Price"),{priceLow:dlang("products","Low - High"),priceHigh:dlang("products","High - Low")}],retailPrice:[dlang("products","Retail price"),{retailPriceLow:dlang("products","Low - High"),retailPriceHigh:dlang("products","High - Low")}],profit:[dlang("products","Profit"),{profitLow:dlang("products","Low - High"),profitHigh:dlang("products","High - Low")}]};return this._getSortingOptionsDOM(i,e,t)},_hasLargeSize:function(){var e=!1;for(var t in this._products){var i=this._products[t];for(var n in i.sizes){"2XL"===i.sizes[n]&&(e=!0)}}return e},sortProducts:function(e,t,i){if(!fi.a[e])return this.sortMethods[e](t,i);var n=this.retailPriceView.getProductOrVariantProfit(t),r=this.retailPriceView.getProductOrVariantProfit(i);return fi.a[e](t,i,n,r)}},nn);window&&((globalThis||{}).PFProductsCatalogViewsRetailPrices=rn);var an=Class({defaultCaption:"",caption:"",content:null,isActive:!1,isDisabled:!1,tooltipText:"",__construct:function(e,t,i){this.defaultCaption=e,this.content=t,this.isDisabled=!t,this.isActive=void 0!==i&&i},getTabItem:function(e){var t=new F.a;return t.caption=this.getCaption(),t.onclick=e.bind(this,this,!0),t.isActive=this.isActive,t.isDisabled=this.isDisabled,t.tooltipTitle=this.tooltipText,t},render:function(e){return"function"!=typeof this.content.render?this:this.content.render(e)},setCaption:function(e){this.caption=e},getProductFilterDropdown:function(){return this.content.getProductFilterDropdown()},getCaption:function(){return this.caption?this.caption:this.defaultCaption},isTabAlwaysVisible:function(){return this.content&&this.content.isTabAlwaysVisible||this.isDisabled},append:function(e){this.content.append(e)}});window&&((globalThis||{}).PFProductsCatalogViewsWrap=an);var on=i("Tt8e"),sn=(i("6B/H"),i("XJFE")),ln=i("cKxm"),cn=i("s6Su"),un=i("sjGI"),dn=i("XLZy"),hn=Class({filters:null,views:{},_tabs:null,_tabItems:{},_products:[],_category:null,isTabEventDispatching:!0,__construct:function(){this.views={models:new an(dclang("products","Product models","Models"),new nn,!0),retail_prices:new an(dlang("products","Retail prices"),new rn)},this.node=tag("div","catalog__products-selector",[this._nodeTabsRow=tag("div","row pf-mt-16 pf-mt-sm-8 pf-mt-md-0 pf-mb-16",[tag("div","col-md-12",[this._tabs=new M.a("primary center-fixed pf-mb-16",!0),un.a.isUs()?tag("span","large-volume pf-mr-lg-16 pf-mr-md-12 pf-mr-sm-8",[tag("img",{src:"/static/images/products-catalog/menu-mockup.svg"}),tag("a",{className:"pf-link pf-ml-8",onclick:this._openLargeClientForm},dlang("products","Doing large volume?"))]):""])]),this._contentNode=tag("div"),this.recentlyViewedBlock=tag("div"),this.doesNotMatchSellingRegionProductsBlock=tag("div")]),l.a.addClassName(this._nodeTabsRow,"hidden")},renderModelsView:function(e,t){this.views.models.render({showFulfillmentCountries:e.catalogType!==u.a.TYPE_MG,isFilterOutside:t}).append(this._contentNode)},getProductFilterDropdown:function(){return this.views.models.getProductFilterDropdown()},renderProducts:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.views.models.content.filters=this.filters,this._products=e.getProducts(),this._category=e.category;var r=new w.a,a={products:this._products,category:this._category,keywords:e.productSearchKeywords,totalProductCount:e.totalProductCount,categoryTexts:e.categoryTexts,page:this._resolvePageNumber(e.productsViewPage,r.query.page,t),showFulfillmentCountries:e.catalogType!==u.a.TYPE_MG,filters:$.extend({},m.a.getFiltersFromUrl(),e.filter),skipProductsRendering:i,activeStoreId:n};this.views.models.render(a),this.views.retail_prices.render(a);var o=e.activeTab?e.activeTab:(new w.a).hash;o&&this.setActiveTab(o)},renderTabs:function(e){l.a.removeClassName(this._nodeTabsRow,"hidden"),this._setTabItems(e),this._tabs.render()},hideTabs:function(){l.a.addClassName(this._nodeTabsRow,"hidden")},setActiveTab:function(e){l.a.removeClassName(this._nodeTabsRow,"hidden");var t=this._findViewById(e),i=this._tabItems[e];t&&i&&this._tabs.setActiveTab(i)},_setTabItems:function(e){for(var t in this.views){var i=this.views[t],n=i.content?this._findTab(e,t):null,r=i.content?i.content.id:t;(n&&n.active||i.isTabAlwaysVisible())&&(this._isTestingCategory()?this._tabItems[r]=this._renderTabTest(n,i):this._tabItems[r]=this._renderTab(n,i))}var a=[];for(var o in this._tabItems)a.push(this._tabItems[o]);this._tabs.items=on.a.convertToArray(this._tabItems)},_isTestingCategory:function(){var e;return 14===(null===(e=this._category)||void 0===e?void 0:e.id)},_findViewById:function(e){for(var t in this.views){var i=this.views[t];if(i.content&&i.content.id===e)return i}return null},_renderTab:function(e,t){var i={mainHeader:"",documentTitle:""};return t.setCaption(""),e&&(t.setCaption(e.name),i.mainHeader=e.mainHeader,i.documentTitle=e.pageTitle),t.isActive&&(l.a.clearNode(this._contentNode),this.renderContent(i,t)),t.getTabItem(this.renderContent.bind(this,i))},_renderTabTest:function(e,t){var i={mainHeader:"",documentTitle:""};return t.setCaption(""),e&&(t.setCaption(e.name),i.mainHeader=e.mainHeader,i.documentTitle=e.pageTitle),t.isActive?this.activeTabId=this._tabItems[t.content.id]?t.content.id:"models":l.a.addClassName(t.content.node,"hidden"),this.renderContentTest(t),t.getTabItem(this.showTabContent.bind(this,t,i))},renderContentTest:function(e){if(!e||!e instanceof an||e.isDisabled)return!1;e.render().append(this._contentNode)},showTabContent:function(e,t,i){var n=this._findViewById(this.activeTabId);l.a.addClassName(n.content.node,"hidden"),l.a.removeClassName(e.content.node,"hidden"),this.activeTabId=e.content.id,this._shouldDispatchTabEvent(i)&&_.a.createAndDispatch(u.a.EVENT_TAB_CHOOSE,{activeTab:"models"!==this.activeTabId?this.activeTabId:"",productsOrVariants:this._products,filter:m.a.getFiltersFromUrl(),customMainHeader:t.mainHeader,documentTitle:t.documentTitle})},_findTab:function(e,t){for(var i in e){var n=e[i];if(n.type===t)return n}return null},_resolvePageNumber:function(e,t,i){if(e>1)return e;if(i)return 1;if(!t)return 1;var n=parseInt(t);return n>1?n:1},renderContent:function(e,t,i){if(!t||!t instanceof an)return!1;if(t.isDisabled)return!1;var n=this._tabItems[t.content.id]&&"models"!==t.content.id?t.content.id:"";l.a.clearNode(this._contentNode),t.render().append(this._contentNode),this._shouldDispatchTabEvent(i)&&_.a.createAndDispatch(u.a.EVENT_TAB_CHOOSE,{activeTab:n,productsOrVariants:this._products,filter:m.a.getFiltersFromUrl(),customMainHeader:e.mainHeader,documentTitle:e.documentTitle})},_shouldDispatchTabEvent:function(e){return!!e&&(!!this.isTabEventDispatching||(this.isTabEventDispatching=!0,!1))},clear:function(){return l.a.clearNode(this._contentNode),this},hide:function(){return l.a.addClassName(this.node,"hidden"),this},show:function(){return l.a.removeClassName(this.node,"hidden"),this},_openLargeClientForm:function(){this._buildModal()},_buildModal:function(){var e=new U.a.Par;e.title=dlang("products","Contact our sales team"),e.modalDialogClass="modal-md",this.modal=new U.a(e),this.modal.setContent(this._getMainContent()),this.modal.setFooterContent(this._getFooterContent()),this.modal.show()},_getMainContent:function(){return tag("div","",[tag("p","pf-h4 pf-mb-4",dlang("products","Want to talk to our sales rep?")),tag("p","pf-ui-body pf-text-muted pf-mb-16",dlang("products","Leave your email and they'll be in touch.")),new ln.a(new ln.b({type:"text",inputSize:"lg",placeholder:"name@mail.com",name:"customer-email",id:"customer-email",className:"pf-mb-16"})),new cn.a(new cn.b({type:"checkbox",value:!1,label:dlang("products","I agree to my data being processed in accordance with {linkStart}Printful's Privacy Policy{linkEnd}").replace("{linkStart}",'<a class="pf-link" href="'+langUrl("/policies/privacy")+'" target="_blank">').replace("{linkEnd}","</a>"),labelClass:"pf-ui-caption pf-text-muted pf-mb-12",wrapperClass:"pf-ml-4",name:"privacy-checkbox",id:"privacy-checkbox"})),this.emailErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","Please enter your email")]),this.checkboxErrorMessage=tag("label","pf-text-red hidden",[dlang("reviews","You must agree to our Terms of Service and Privacy Policy")])])},_getFooterContent:function(){return tag("div","text-left",[tag("a",{className:"pf-btn pf-btn-primary pf-mr-8",onclick:this._send,attr:{role:"button"}},dlang("products","Submit")),tag("a",{className:"pf-btn pf-btn-secondary pf-mr-8",onclick:this._closeModal,attr:{role:"button"}},dlang("products","Cancel"))])},_send:function(){var e=this,t=document.getElementById("customer-email").value,i=document.getElementById("privacy-checkbox").checked,n=!1;dn.a.show(this.modal._nodeContent),t?this.emailErrorMessage.classList.add("hidden"):(this.emailErrorMessage.classList.remove("hidden"),n=!0),i?this.checkboxErrorMessage.classList.add("hidden"):(this.checkboxErrorMessage.classList.remove("hidden"),n=!0),n?dn.a.hide(this.modal._nodeContent):Object(c.a)("customer/potential-client",{email:t}).then((function(t){if(!t.success)return dn.a.hide(e.modal._nodeContent),void e.emailErrorMessage.classList.remove("hidden");new sn.a({type:sn.a.TYPE_SUCCESS,content:dlang("dashboard","Got it"),duration:3e3}),e.modal.hide()}))},_closeModal:function(){this.modal&&this.modal.hide()}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogProductsView=hn);var pn=Class({_categoryItem:null,isActive:!1,hiddenInOrderFlow:0,hiddenInCatalog:0,__construct:function(e,t){this._categoryItem=e,this.isActive=e.isActive,this.hiddenInOrderFlow=e.hiddenInOrderFlow,this.hiddenInCatalog=e.hiddenInCatalog,this.node=tag("a",{className:this.getSize()+" catalog__category pf-mb-16 pf-mb-md-24 pf-mb-lg-32 pf-text-decoration-none",href:this._categoryItem.getUrl(),onclick:t.bind(this,this._categoryItem)},[tag("div","catalog__category__card pf-border pf-rounded pf-hover-shadow pf-h-100 pf-position-relative",[this._categoryItem.isNew&&tag("span","pf-badge pf-badge-rect pf-badge--new pf-badge-position-card",dclang("products","Category badge title","New")),tag("img",{className:"catalog__category__thumbnail pf-w-100 pf-bg-lighter",src:Se.a,data:{src:this._categoryItem.urlImage},attr:{alt:this.getTitle(),"aria-hidden":"true"}}),tag("h3","pf-h5 pf-p-12 pf-m-0 pf-py-0",[this.getTitle()])])])},getSize:function(){return{3:"col-xl-3 col-md-3 col-6",4:"col-xl-3 col-md-4 col-6",6:"col-xl-4 col-md-6 col-12",8:"col-xl-6 col-md-8 col-12"}[this._categoryItem.thumbSize]},getTitle:function(){return this._categoryItem.settings.thumbnailTitle?this._categoryItem.settings.thumbnailTitle:this._categoryItem.title},getCategoryItem:function(){return this._categoryItem}},l.a.Base);window&&((globalThis||{}).PFProductsCatalogCategory=pn);var fn=i("F5uq"),gn=Class({_isTopLevel:!1,resizeTimeout:null,swapCategories:[],__construct:function(){this.node=tag("div","catalog clearfix"),window.addEventListener("resize",this._setTimeout.bind(this,this._onResize,300))},render:function(e,t,i){this.swapCategories=null!=i?i:[],this._isTopLevel=!t,this.clear().renderCategories(e).show()},renderCategories:function(e){return tag("div","row row-flex pf-mt-16",this._getCategories(e)).append(this.node),this},clear:function(){return l.a.clearNode(this.node),this},hide:function(){return l.a.addClassName(this.node,"hidden"),this},show:function(){return l.a.removeClassName(this.node,"hidden"),setTimeout(this._afterAppend.bind(this),0),this},_afterAppend:function(){},_setTimeout:function(e,t){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(e.bind(this),t)},_onResize:function(){},_getCategories:function(e){return[].concat.apply([],e.map(this._renderCategory)).filter(Boolean).sort(this._sort)},_renderCategory:function(e){var t=[];return this.swapCategories.length&&!Object(E.b)(e,this.swapCategories)?t.shift():(gn.filterCategories(e)&&t.push(new pn(e,this._onClick)),e.children.length&&!this._isTopLevel?t.concat(e.children.map(this._renderCategory)):t.shift())},_sort:function(e,t){return e.getCategoryItem().catalogPosition-t.getCategoryItem().catalogPosition},_onClick:function(e,t){fn.a.track(e),2==t.which||4==t.button||t.metaKey||t.ctrlKey||(t.preventDefault(),_.a.createAndDispatch(u.a.EVENT_NAME,{scrollToTop:!0,category:e}))}},l.a.Base);gn.filterCategories=function(e){return!e.isClone&&!e.hiddenInCatalog},window&&((globalThis||{}).PFProductsCatalogCategoriesSelector=gn);var mn=i("DUxB"),_n=i("yDyG"),vn=i("1mG2"),yn=i("ji4W"),bn=i("9Nv7");function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cn(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Tn(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Cn(a,n,r,o,s,"next",e)}function s(e){Cn(a,n,r,o,s,"throw",e)}o(void 0)}))}}function wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function In(e,t){return(In=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=kn(e);if(t){var r=kn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return En(this,i)}}function En(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?On(e):t}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kn(e){return(kn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ln(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Rn(e,t,"get"))}function An(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Rn(e,t,"set"),i),i}function Rn(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Nn=new WeakMap,Dn=new WeakMap,xn=new WeakSet,Fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&In(e,t)}(i,e);var t=Sn(i);function i(e){var n;return wn(this,i),n=t.call(this),xn.add(On(n)),Nn.set(On(n),{writable:!0,value:void 0}),Dn.set(On(n),{writable:!0,value:void 0}),n.node=tag("div","product-catalog-subheadline-mke"),An(On(n),Nn,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(On(n),xn,Mn).call(On(n)),n}return i}(H.a);function Mn(){return Bn.apply(this,arguments)}function Bn(){return(Bn=Tn(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new q.b).components={"subheadline-cards":function(){return Promise.all([i.e(15),i.e(345)]).then(i.bind(null,"d/n/"))}},t.template='\n            <subheadline-cards\n                :variant-id="variantId"\n            />\n        ',t.initialData={variantId:Ln(this,Nn).variantId},An(this,Dn,new q.a(t)),Ln(this,Dn).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Vn=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wn(this,e),this.variantId=t.variantId},jn=i("KLvT");function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Hn(e,t){return(Hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Wn(e);if(t){var r=Wn(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Yn(this,i)}}function Yn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hn(e,t)}(o,e);var t,n,r,a=qn(o);function o(){return zn(this,o),a.apply(this,arguments)}return t=o,(n=[{key:"render",value:function(e){var t=new q.b;t.components={"product-template-swap-product-banner":function(){return i.e(295).then(i.bind(null,"KhGS"))}},t.template="<product-template-swap-product-banner/>",t.plugins={store:Object(jn.a)()},new q.a(t).append(e)}}])&&Gn(t.prototype,n),r&&Gn(t,r),o}(H.a);function Zn(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var Xn,Qn=Class({_params:null,_state:null,_productView:null,__construct:function(e){var t;this._params=e,this._params.pageNumber=(e.isEmbeddedView()?this._params.pageNumber:(new w.a).query.page)||1,this._isHeadingSet=this._params.headingNode&&this._params.breadcrumbsNode,this._breadcrumbs=this._renderBreadcrumbs(),this._isHeadingSet&&(this._titleNode=this._params.headingNode,this._breadcrumbsNode=this._params.breadcrumbsNode,this._breadcrumbs.append(this._breadcrumbsNode)),this._productFilterDropdown=tag("div"),this._state=new _.a,this.node=tag("div",this._params.productCatalogClass,[tag("div",this._params.containerClass,[this._nodeSticky=tag("div","catalog__header",[this.container=tag("div",this._params.isStickyHeaderEnabled()?"pf-px-0":"",[tag("div","row row-flex pf-flex-md-row-reverse",[this._params.enableSearch?tag("div","col-sm-12 col-md-3 catalog__header__search-container",[tag("div","catalog__header__search pf-pb-16",[this._inputSearch=null!==(t=this._params.searchBox)&&void 0!==t?t:this._renderSearch()])]):"",tag("div","col-12 "+(this._params.enableSearch?"col-md-9 catalog__header__heading-container":""),[tag("div","row",[this._headerWrapper=this._isHeadingSet?this._breadcrumbsWrapper=tag("div","col-12 col-md-8 catalog__header__breadcrumbs-container"):tag("div","text-left col-12 col-md-8 catalog__header__breadcrumbs-container "+(this._params.enableSearch?"pf-pb-16":"pf-py-16"),[this._breadcrumbs]),this._params.enableFilterHeader?tag("div","col-12 col-md-4 catalog__header__filter-container pf-pb-32 pf-pb-md-16 pf-d-none pf-d-sm-block",[this._productFilterDropdown]):""])])])])]),this._titleWrapNode=this._params.enableTitle?tag("div","row pf-mb-24",[tag("div","col-md-12",[this._isHeadingSet?this._titleWrapper=tag("div"):this._titleNode=tag("h1","pf-h2 text-center pf-my-8 pf-my-sm-0"),this._subtitleNode=tag("h2","pf-ui-subheading-lg text-muted text-center pf-mt-8 pf-mb-0 pf-d-none")])]):"",this._productBannerNode=tag("div","row slick-slider slick-dotted product-banner-slider"),this.productSwapBanner=tag("div"),this._recentMockupsNode=tag("div","recent-mockups pf-pt-40 pf-pb-24 pf-mb-40 pf-d-none pf-bg-lighter"),this._mainContentNode=tag("div")]),this._productNode=tag("div")]),this._isHeadingSet&&(this._titleWrapper.appendChild(this._titleNode),this._breadcrumbsWrapper.appendChild(this._breadcrumbsNode)),this._params.isProductSwap&&(this.productSwapBanner.className="pf-mb-24 pf-mt-6",(new Kn).render(this.productSwapBanner),this._headerTitle=tag("div","text-left pf-h4 pf-pl-0 pf-py-7 col-12 col-md-8",dlang("products","Available products")),this._headerWrapper.appendChild(this._headerTitle),G.q(G.a,this._renderSwapProductTitle)),this._renderMainContent(),this._params.isStickyHeaderEnabled()&&this._attachStickyHeader(),window.addEventListener("resize",this._closeMobileSidebar.bind(this,null)),window.addEventListener("resize",this._resizeInitRecentMockupsSlider.bind(this))},_renderSwapProductTitle:function(){this._breadcrumbs.items.length?l.a.addClassName(this._headerTitle,"hidden"):l.a.removeClassName(this._headerTitle,"hidden")},updateFromState:function(e){this._state=e,u.b.catalogType=e.catalogType,this._params.store.setActiveCategoryId(e.getCategoryId()),this._state.scrollToTop&&setTimeout(function(){this._scrollViewToTop()}.bind(this),100),this[e.action]&&this[e.action]()},productCatalogProductsLoaded:function(){var e=this._state.categoryTexts||null;this._renderMainContent(),this._state.categoryTexts=this._state.categoryTexts||e,this._params.enableTabs?this._productsSelector.renderTabs(this._state.category.tabs):this._productsSelector.hideTabs(),this._productsSelector.renderProducts(this._state,this._params.isEmbeddedView(),!1,this._params.activeStoreId),!this._params.enableTabs&&this._productsSelector.renderModelsView(this._state,this._params.enableFilterHeader),this._updateFilterDropdown(!0),this.productCatalogLoadAllProductData(this.reRenderSideBar)},reRenderSideBar:function(e){if(this._sidebar){var t=this._params.store.products.getCachedProducts(this._state.getCategoryId());this._sidebar.filters.render(t.products,this._params.allowedFulfillmentRegions,t.products?t.products.length:0,e)}},productCatalogLock:function(){this._state.isLocked?dn.a.show(this._mainContentNode):dn.a.hide(this._mainContentNode)},productCatalogNavigate:function(){var e=this._state.getCategoryId();if(this._renderMainContent(),this._updateBreadcrumbs(),this._updateFilterDropdown(!1),this._clearBannerNode(),this._renderProductBanner(),this._renderRecentMockups(),this._initSlider(),this._params.onCategoryChoose&&e&&this._params.onCategoryChoose(e),this._shouldShowCategories())this._categoriesSelector.render(this._params.store.categories.getAll(e),e,this._params.isProductSwap?this._params.swapCategories:[]);else{var t=new di;t.categoryId=e,t.favorites=this._isFavoriteCategory(e),t.actionBefore=this._productsSelector.show,t.forMockupGenerator=this._params.isMockupGenerator,t.forProductPush=u.a.isProductPush(),t.forOrderFlow=u.a.isOrderFlow(),t.forProductTemplate=this._params.isProductTemplate,t.storeId=this._params.activeStoreId,t.pageNumber=this._params.pageNumber,t.matchSellingRegion=!0,this._params.isProductSwap&&(t.allowedType=this._params.originalProductType,t.requiredPlacements=this._params.originalPlacements,t.swapTemplateId=this._params.swapTemplateId),setTimeout(function(){this._params.store.products.getByParams(t)}.bind(this),1)}this._trackProductPageView()},productCatalogLoadAllProductData:function(e){this._params.store.products.getAllProductsList(e)},productCatalogProductsFiltered:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._hasSelectedFilters()?(l.a.removeClassName(this._nodeClearFilters,"hidden"),this._pushCategoryDataLayer()):this._nodeClearFilters&&l.a.addClassName(this._nodeClearFilters,"hidden"),this._buttonTitle&&l.a.setNodeText(this._buttonTitle,dlang("products","See {productCount} products").replace("{productCount}",this._state.getProducts().length)),l.a.hasClassName(this._mainContentNode,"hidden")||this._state.isOnPopstate?e||this.productCatalogNavigate():this._productsSelector.renderProducts(this._state,this._params.isEmbeddedView(),t,this._params.activeStoreId)},productCatalogAllLoaded:function(){var e=!((new w.a).query.page>1);this.productCatalogProductsFiltered(!0,e)},_hasSelectedFilters:function(){return Object.values($.extend({},m.a.getFiltersFromUrl(),this._state.filter)).filter((function(e){return e&&e.length>0})).length>0},productCatalogProductChosen:function(){var e=this._state.getActiveProduct();if(n.a.prototype.setLastActiveCatalogCategory(e.productId,e.mainCatalogCategoryId),this._params.onProductChoose)return this._params.onProductChoose(e),void this._trackProductPageView();this._updateTitle(!1),this._updateBreadcrumbs(e),this.hideMainContent(),dn.a.show(this._productNode,{minHeight:300}),this._params.store.products.getDataByProductId(this._state.activeProductId,this._renderProduct),this._trackProductPageView()},productCatalogVariantChanged:function(){this._productView.productInfo.updatePickers(this._params.store.categories.getActiveCategory())},hideMainContent:function(){l.a.addClassName(this._mainContentNode,"hidden")},isMainContentHidden:function(){return l.a.hasClassName(this._mainContentNode,"hidden")},productCatalogTabChosen:function(){this._state.activeProductId?this._state.isOnPopstate&&this._productView.setActiveTab(this._state.activeTab,!1):this.isMainContentHidden()||this._state.isOnPopstate?this.isMainContentHidden()?this.productCatalogNavigate():(this._productsSelector.isTabEventDispatching=!1,this._productsSelector.setActiveTab(this._state.activeTab),this._trackProductPageView()):this._updateTitle(this._state.getTitle())},_renderBreadcrumbs:function(){if(!this._params.enableBreadcrumbs)return"";var e=new mn.a;return e.addIndex(this._params.breadcrumbsIndexCategoryTitle),e},_updateBreadcrumbs:function(e){if(this._breadcrumbs){var t=this._params.store.categories.getActiveCategory();if(this._isFavoriteCategory(null==t?void 0:t.id)){var i="â "+(e?dlang("products","Back to favorites"):dlang("products","Back to all products"));this._breadcrumbs.setShouldRenderIndex(!1),this._breadcrumbs.set([{title:i,onclick:this._returnToPrevious},{title:""}]),this._breadcrumbs.node.classList.add("hide-last"),this._breadcrumbs.node.classList.add("hide-after")}else this._breadcrumbs.setShouldRenderIndex(!0),this._breadcrumbs.node.classList.remove("hide-last"),this._breadcrumbs.node.classList.remove("hide-after"),this._breadcrumbs.set(this._params.store.categories.getPath()),e&&this._breadcrumbs.add(e);G.o(G.a)}},_updateFilterDropdown:function(e){this._params.enableFilterHeader&&(l.a.clearNode(this._productFilterDropdown),e&&this._productsSelector.getProductFilterDropdown().append(this._productFilterDropdown))},_returnToPrevious:function(){this._state.action===u.a.EVENT_PRODUCT_CHOOSE?_.a.createAndDispatch(u.a.EVENT_NAME,{category:this._state.category}):_.a.createAndDispatch(u.a.EVENT_NAME,{category:(new yn.a).getById(this._state.category.parentId)||new I.a})},_updateTitle:function(e){if(this._params.enableTitle)if(e){this._titleNode.innerHTML=e;var t=this._state.getSubtitle();t?(this._subtitleNode.innerHTML=t,l.a.removeClassName(this._subtitleNode,"pf-d-none")):l.a.addClassName(this._subtitleNode,"pf-d-none"),l.a.insertBefore(this._titleWrapNode,this._productBannerNode)}else l.a.removeNode(this._titleWrapNode)},_clearBannerNode:function(){this._productBannerNode.classList.contains("slick-initialized")&&this._productBannerNode.slick.destroy(),l.a.clearNode(this._productBannerNode)},_renderMainContent:function(){var e,t,i=this;if(this._params.isProductSwap&&dn.a.show(this.node),!1!==this._params.isRenderRequired){l.a.clearNode(this._mainContentNode),l.a.clearNode(this._productNode),l.a.removeClassName(this._mainContentNode,"hidden"),this._updateTitle(this._state.getTitle());var n=this._state.getProducts(),r=this._params.enableCategoriesSidebar||n.length&&this._params.enableProductsSidebar,a=this._params.store.categories.getActiveCategory();this._params.store.allowedFulfillmentRegions=this._params.allowedFulfillmentRegions,this._productsSelector=new hn;var o=this._getEmptyFavoriteProductNode(null==a?void 0:a.id,n);o?o.append(this._mainContentNode):(this._pushCategoryDataLayer(),tag("div","row",[this._subHeadlineNode=tag("div"),r?tag("div","col-xs-12 col-sm-4 col-md-3 col-lg-3 col-xl-2 hidden-xs catalog__sidebar-floating",[tag("div","catalog__sidebar-header row hidden-sm hidden-md hidden-lg",[tag("div","pf-p-16",[tag("h5","pf-ui-subheading text-center pf-m-0",[dlang("products","Filters")]),tag("a",{className:"close",prop:{onclick:this._closeMobileSidebar}})]),tag("div","pf-px-16 pf-py-8 bordered",[tag("img",{className:"category-thumb pf-mr-16",prop:{src:a?a.urlImage:""}}),tag("h6","pf-h6 category-title",[a?a.getSidebarTitle():""]),this._nodeClearFilters=tag("a",{className:"pf-link pull-right pf-mt-8 hidden",onclick:this._clearFilters},[dlang("products","Clear filters")])])]),this._sidebar=new k(this._params.store,this._params.enableCategoriesSidebar,this._params.sellingRegion||Si.a.sellingRegion,this._params.isProductSwap?this._params.swapCategories:null),tag("div","catalog__sidebar-footer row pf-p-16 hidden-sm hidden-md hidden-lg",[tag("a",{className:"pf-btn pf-btn-primary btn-block",prop:{onclick:this._closeMobileSidebar}},[this._buttonTitle=tag("span","",[dlang("products","See {productCount} products").replace("{productCount}",n.length)])])])]):"",tag("div",r?"col-xs-12 col-sm-8 col-md-9 col-lg-9 col-xl-10":"col-xs-12",[this._sellingRegionCatalogOnboardingNode=tag("div"),this._categoriesSelector=new gn,this._productsSelector])]).append(this._mainContentNode)),this._sidebar&&this._productsSelector&&(this._productsSelector.filters=this._sidebar.filters);var s=this._params.sellingRegion||Si.a.sellingRegion,c=null;u.a.isProductsPricing()&&(c=new g(g.TYPE_RECENTLY_VIEWED,[],s,{fullWidth:!this._shouldShowCategories()}),this._shouldShowCategories()?c.append(this._mainContentNode):(l.a.clearNode(this._productsSelector.recentlyViewedBlock),c.append(this._productsSelector.recentlyViewedBlock)),this._params.isFeaturedReviews&&(this._params.featuredReviews=new dt(this._params.store.categories.getActiveCategoryId(),!0),this._params.featuredReviews.append(this._mainContentNode))),!s||s.isWorldwide()||this._shouldShowCategories()||null!==(e=this._state.category)&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.productsRegion||!this._params.store.products._params?l.a.clearNode(this._productsSelector.doesNotMatchSellingRegionProductsBlock):this._params.store.products.getSellingRegionNotMatchedProducts((function(e){if(e.products&&e.products.length){var t=new g(g.TYPE_DOES_NOT_MATCH_SELLING_REGION,e.products,s,{productCount:e.totalCount,activeStoreId:i._params.activeStoreId||null,fullWidth:!0});l.a.clearNode(i._productsSelector.doesNotMatchSellingRegionProductsBlock),t.append(i._productsSelector.doesNotMatchSellingRegionProductsBlock)}})),this._isTextBlockVisible()&&(void 0!==this._params.textBlockData.currentActiveBlock&&this._params.textBlockData.currentActiveBlock.removeResizeEvent(),this._params.textBlockData.currentActiveBlock=new d(this._params.textBlockData,this._params.store.categories.getActiveCategoryId()),this._params.textBlockData.currentActiveBlock.append(this._mainContentNode));var h=this._state.totalProductCount||null;r&&n.length&&h&&this._sidebar.filters.render(n,this._params.allowedFulfillmentRegions,h,parseInt(h)===n.length),this._params.store.categories.getActiveCategoryId()||this.node.classList.remove("catalog__sticky"),s&&this._getSellingRegionCatalogOnboarding(),this._renderSubheadline("ab-test-catalog-text"),this._renderSubheadline("ab-test-catalog-cards"),dn.a.hide(this.node)}},_getSellingRegionCatalogOnboarding:function(){var e=this,t=on.a.getDsrOnboardingBannerVisibility();null===t?Object(bn.a)("selling-region/get-catalog-onboarding-status").then((function(t){t&&(t.status&&e._renderDsrOnboardingBanner(),on.a.rememberDsrOnboardingBannerVisibility(t.status))})):!0===t&&this._renderDsrOnboardingBanner()},_renderSubheadline:function(e){var t=new Vn;t.variantId=e,new Fn(t).append(this._subHeadlineNode)},_renderDsrOnboardingBanner:function(){var e,t,i,n=this;if(l.a.clearNode(this._sellingRegionCatalogOnboardingNode),!(!PF.Customer.isLogged()||PF.Customer.isB2cStarter()||null!==(e=this._state.category)&&void 0!==e&&null!==(t=e.settings)&&void 0!==t&&t.productsRegion)){var r=dlang("sellingRegion","Global default selling preferences applied!"),a=dlang("sellingRegion","We'll only display the products and product variants that correspond to your preferences. You can always update your global default selling preferences anytime from the Preferences menu at the top of the page.");this._state.catalogType!==u.a.TYPE_OF&&this._state.catalogType!==u.a.TYPE_PUSH||(r=dlang("sellingRegion","Store default selling preferences applied!"),a=dlang("sellingRegion","We'll only display the products and product variants that correspond to your individual store preferences. You can always update your store default selling preferences in Dashboard > Settings > Stores.")),new p.a({id:"selling-region-catalog-information-block",type:"success",icon:"/static/images/products-catalog/world.svg",heading:r,content:a,linkText:dlang("sellingRegion","Change settings"),closable:!0,onCloseClick:function(){Object(bn.a)("selling-region/dismiss-onboarding",{type:"selling_regions_catalog_information_block"}),l.a.clearNode(n._sellingRegionCatalogOnboardingNode),on.a.rememberDsrOnboardingBannerVisibility(!1)},onLinkClick:function(){Object(f.b)(n._params.activeStoreId)}}).append(this._sellingRegionCatalogOnboardingNode),null!==(i=this._state.category)&&void 0!==i&&i.parentId&&this._sellingRegionCatalogOnboardingNode.classList.add("pf-mb-16")}},_clearFilters:function(e){_.a.createAndDispatch(u.a.EVENT_PRODUCTS_FILTER,{filter:null,productsOrVariants:this._productItems,isOnPopstate:!0}),this._openMobileSidebar(e)},_closeMobileSidebar:function(e){e&&e.preventDefault(),$("html, body").css("overflow",""),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","auto"),$(document).find(".catalog__sidebar-floating").removeClass("open")},_openMobileSidebar:function(e){e.preventDefault(),$("html, body").css("overflow","hidden"),$(document).find(".catalog__sidebar-floating").closest(".modal").scrollTop(0).css("overflow-y","hidden"),$(document).find(".catalog__sidebar-floating").addClass("open")},_renderSearch:function(){return new _n.a({placeholder:dlang("products","Search products..."),type:this._params.searchType,urlQuery:this._params.isProductSwap?{allowedProductType:this._params.originalProductType,requiredPlacements:this._params.originalPlacements.join()}:{},onEnterPressed:function(){$(this.nodeInput).parent().find(".tt-selectable:first").addClass("tt-cursor").click()},onSelected:function(e){this._params.isProductTemplate?this._params.onProductChoose(R.a.fromArray(e)):location.href=e.autoCompleteUrl}.bind(this)})},_renderProduct:(Xn=function(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Zn(a,n,r,o,s,"next",e)}function s(e){Zn(a,n,r,o,s,"throw",e)}o(void 0)}))}}(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._clearBannerNode(),l.a.clearNode(this._productNode),dn.a.hide(this._productNode),t.isFeaturedReviews=this._params.isFeaturedReviews,this._state.activeVariantId&&t.setActiveVariantById(this._state.activeVariantId),this._productView=new ui(t),e.next=8,this._productView.init();case 8:this._productView.append(this._productNode),Qn.pushProductDataLayer(t.activeVariant,this._params.store.categories.getActiveCategory());case 10:case"end":return e.stop()}}),e,this)}))),function(e){return Xn.apply(this,arguments)}),_attachStickyHeader:function(){var e=0,t=0;window.addEventListener("scroll",function(){e||(e=$(this._nodeSticky).offset().top),e+100<=window.pageYOffset&&this._params.store.categories.getActiveCategoryId()?(l.a.addClassName(this.node,"catalog__sticky"),l.a.removeClassName(this.container,"pf-px-0"),l.a.removeClassName(this._nodeSticky,"catalog__header--visible"),this._nodeSticky.style.top=""):e>=window.pageYOffset&&(l.a.removeClassName(this.node,"catalog__sticky"),l.a.addClassName(this.container,"pf-px-0"),l.a.removeClassName(this._nodeSticky,"catalog__header--visible"),this._nodeSticky.style.top=""),window.pageYOffset>t&&this._inputSearch&&!this._inputSearch.getValue()?l.a.removeClassName(this._nodeSticky,"catalog__header--visible"):l.a.addClassName(this._nodeSticky,"catalog__header--visible"),t=window.pageYOffset}.bind(this))},_scrollViewToTop:function(){var e=this.isMainContentHidden()?this._productNode:this._mainContentNode;$(e).offset().top>window.pageYOffset||$("html, body").animate({scrollTop:$(e).offset().top-100},300)},_shouldShowCategories:function(){return!this._state.category||0===this._state.category.parentId},_isTextBlockVisible:function(){return this._isTextBlockVisibleInLocale()&&u.a.isProductsPricing()&&(this._params.store.isRootCategory()||this._isProductListCategory()||this._isCategoryListCategory())},_isCategoryListCategory:function(){return null!==this._state.category&&0===this._state.category.parentId},_isProductListCategory:function(){return this._state.products.length},_isTextBlockVisibleInLocale:function(){return un.a.isUs()||un.a.isEs()||un.a.isJp()},_trackProductPageView:function(){Qn.TRACKED_PAGE_VIEWS++,Qn.TRACKED_PAGE_VIEWS<=1||(new a).trackPageView()},_renderProductBanner:function(){var e=this._params.banners,t=this._params.bannersPerPage,i=this._params.store.categories.getActiveCategoryId(),n=[];if(Array.isArray(e)&&e.length&&(n=e.sort((function(e,t){return e.position-t.position}))),this._params.enableProductBanners&&n.length)for(var r in n=n.filter((function(e){return e.categoryId===i})),t&&(e=n.slice(0,t)),n){var a=n[r],o=new hi;o.bannerId=a.gaEventId?a.gaEventId:a.bannerId,o.buttonText=a.buttonText,o.imgSrc=a.imageLink,o.imgSrcMobile=a.mobileImageLink,o.url=langUrl(a.url),o.title=a.title,o.columns=a.columns,new pi(o).append(this._productBannerNode)}},_initSlider:function(){if(this._productBannerNode.children.length){var e=$(this._productBannerNode);e.slick({autoplay:!1,slidesToShow:2,lazyLoad:"ondemand",slidesToScroll:1,infinite:!0,arrows:!1,adaptiveHeight:!1,focusOnSelect:!1,dots:!1,rows:0,responsive:[{breakpoint:u.a.BREAKPOINT_DOTS,settings:{autoplay:!0,slidesToShow:1,dots:!0}}]}).on("click",(function(){e.slick("slickSetOption",{autoplay:!1},!1)})).on("touchend touchcancel touchmove",(function(){e.slick("slickPlay")}))}},_pushCategoryDataLayer:function(){var e=this._state.getProducts(),t=this._params.store.categories.getActiveCategory();if(e.length&&t){var i=e.map((function(e){return e.productId}));window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dynamicRemarketing",ecomm_prodid:i,ecomm_pagetype:"category",ecomm_category:t.title})}},_renderRecentMockups:function(){if(l.a.clearNode(this._recentMockupsNode),this._state.catalogType!==u.a.TYPE_MG||this._state.getCategoryId()>0||this._isFavoriteCategory(this._state.getCategoryId()))l.a.addClassName(this._recentMockupsNode,"pf-d-none");else{var e=u.a.getRecentMockups();e.length<1?l.a.addClassName(this._recentMockupsNode,"pf-d-none"):l.a.removeClassName(this._recentMockupsNode,"pf-d-none"),tag("div","container",[tag("h4","pf-h4 pf-mt-0 pf-mb-16",dlang("products","Your recent products")),this._recentMockupsSlickNode=tag("div","row pf-my-0 slick-slider slick-dotted",e.map((function(e){return tag("div","col-12 col-sm-6 col-lg-3 pf-mb-24",[tag("div",{className:"pf-d-block pf-bg-white pf-hover-shadow pf-border pf-rounded pf-pointer recent-mockups__item",onclick:function(t){return window.location.href=e.url}},[tag("div","row no-gutters",[tag("div","col-4 col-lg-5",[tag("img",{className:"img-responsive",src:e.image})]),tag("div","col",[tag("p","pf-ui-body pf-mx-8 pf-my-12",e.title)])])])])})))]).append(this._recentMockupsNode),this._initRecentMockupsSlider()}},_resizeInitRecentMockupsSlider:function(){o.a.delay("recent-mockups-slider",this._initRecentMockupsSlider.bind(this),200)},_initRecentMockupsSlider:function(){var e;(null===(e=this._recentMockupsSlickNode)||void 0===e?void 0:e.children.length)<2||$(this._recentMockupsSlickNode).slick({autoplay:!1,lazyLoad:"ondemand",infinite:!0,adaptiveHeight:!1,focusOnSelect:!1,slidesToShow:1,slidesToScroll:1,arrows:!1,dots:!0,mobileFirst:!0,accessibility:!1,responsive:[{breakpoint:s.a.SIZES.SM,settings:"unslick"}]})},_getEmptyFavoriteProductNode:function(e,t){var i;return void 0===(null===(i=this._state)||void 0===i?void 0:i.totalCount)||!this._isFavoriteCategory(e)||t.length?null:tag("div","pf-d-flex pf-align-items-center pf-flex-column pf-align-items-center pf-justify-content-center pf-mb-32",[tag("img",{className:"favorites-image",src:Ci.a}),tag("div","pf-pt-40",dlang("products","Pick your favorite products and weâll list them here")),tag("a",{className:"pf-btn pf-btn-secondary pf-mt-24 pf-mr-8 pf-mb-12",onclick:this._returnToPrevious,text:dlang("products","Go to catalog")})])},_isFavoriteCategory:function(e){return e===I.a.ID_FAKE_FAVORITES}},l.a.Base);Qn.TRACKED_PAGE_VIEWS=0,Qn.toggleLock=function(e){vn.a.toggleLock(e)},Qn.pushProductDataLayer=function(e,t){e&&t&&(window.dataLayer=window.dataLayer||[],window.dataLayer.push({event:"dynamicRemarketing",ecomm_prodid:e.variantId,ecomm_pagetype:"product",ecomm_category:t.title,ecomm_totalvalue:e.price}))},Qn.hasAccess=!0,u.b.isCatalogLoadedIn=!0,window&&((globalThis||{}).PFProductsCatalog=Qn)},oixo:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7pSD"),r=i("gYZI"),a=i("nF4n"),o=Class({_optionPicker:null,nodeError:null,__construct:function(e){this.setProductOptions(Object(r.a)(e)),this.nodeError=tag("div","alert alert-danger text-center hidden padding-10 margin-top-15",dlang("site","Please choose options!")),this.node=tag("div","margin-bottom-10"),this.render()},render:function(){a.a.clearNode(this.node),this._optionPicker.append(this.node),this.nodeError.append(this.node)},setPickerGeneratorPlacements:function(e){this._optionPicker&&this._optionPicker.hasOwnProperty("setGeneratorPlacements")&&this._optionPicker.setGeneratorPlacements(e)},getValues:function(){return this._optionPicker.getValues()},getData:function(){return this._optionPicker.getData?this._optionPicker.getData():{}},getPrices:function(){return this._optionPicker.getPrices?this._optionPicker.getPrices():{}},setValue:function(e,t){this._optionPicker.setValue&&this._optionPicker.setValue(e,t)},getValueCount:function(){return Object.keys(this.getValues()).length},setFileTypesWithFiles:function(e){return this._optionPicker.setPlacementIdsWithLayers(e).renderOptions(),this},setPlacementIdsWithFiles:function(e){return this._optionPicker.setPlacementIdsWithFiles(e).renderOptions(),this},hasValidOptions:function(){return this._optionPicker.hasValidOptions()},hasOption:function(e){return this._optionPicker.hasOption(e)},getExtraPrice:function(){return this._optionPicker.getExtraPrice()},hasSameValues:function(e,t){return this._optionPicker.hasSameValues(e,t)},isValuePicked:function(){return!!this.hasValidOptions()},hideError:function hideError(){a.a.addClassName(this.nodeError,"hidden")},updateErrorStatus:function(){return a.a.setNodeText(this.nodeError,this._optionPicker.errorMessage),!!a.a.hasClassName(this.node,"hidden")||(this.isValuePicked()?(a.a.addClassName(this.nodeError,"hidden"),!0):(a.a.removeClassName(this.nodeError,"hidden"),!1))},setProductOptions:function(e){return this._optionPicker=e,this},hasVisibleOptions:function(){return this._optionPicker.hasVisibleOptions()},setSelectedPlacementId:function(e){this._optionPicker.setSelectedPlacementId(e)}},n.a);(globalThis||{}).PFVariantPickerOptionPicker=o},ojff:function(e,t,i){"use strict";i.d(t,"b",(function(){return r})),i.d(t,"a",(function(){return a}));var n=i("ji4W");function r(e,t){for(var i=!1,n=0;n<e.children.length;n++)r(e.children[n],t)&&(i=!0);return i||t.includes(e.id)}function a(e){return function e(t,i){for(var n=0;n<t.length;n++){var r=!1;if(t[n].children.length&&(r=e(t[n].children,i)),r||i.includes(t[n].id))return!0}return!1}((new n.a).getAll(null),e.swapCategories)}},osBa:function(e,t,i){"use strict";i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return c}));var n=i("nF4n"),r=i("jhOU"),a="layers-repositioned-warning";function o(e){return e&&e._templates&&e._templates.hasLayers()}function s(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;var i=e._userTemplates||{},n=t._userTemplates||{};if(Object.keys(i).length!==Object.keys(n).length)return!0;var r=!1;return Object.keys(i).forEach((function(e){if(!r)if(n.hasOwnProperty(e)){var t,a,o=i[e]||{},s=n[e]||{};if(Object.keys(o).length===Object.keys(s).length)Object.keys(o).forEach((function(e){r||(s.hasOwnProperty(e)?(t=o[e],a=s[e],function(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;var i,n,r,a=!1;if(["fillMode","height","placementId","technique","templateId","width"].forEach((function(i){a||e[i]!==t[i]&&(a=!0)})),a)return!0;var o=e.layers||[],s=t.layers||[];if(o.length!==s.length)return!0;for(i=0;i<o.length;i++)if(n=o[i],r=s[i],l(n,r))return!0}(t,a)&&(r=!0)):r=!0)}));else r=!0}else r=!0})),r}function l(e,t){if(!e&&!t)return!1;if(!e||!t)return!0;if(e.getType()!==t.getType())return!0;if(e.position?!t.position:!!t.position)return!0;if(e.position.isDifferent(t.position))return!0;var i=e.toArray(),n=t.toArray();if(Object.keys(i).length!==Object.keys(n).length)return!0;var r,a,o=!1,s=["position","uniqueId","overrideImagePulse","overrideImage"];return Object.keys(i).forEach((function(e){o||-1!==s.indexOf(e)||(r=i[e],a=n[e],r!==a&&(o=!0))})),o}function c(e,t){if(e&&t){var i=document.getElementsByClassName(a);if(!i.length){var o=tag("div","pf-position-relative"),s=t.substr(0,t.indexOf(" "));(i=new r.a({className:a,closable:!0,onAfterElementRemoved:function(){o.remove()},type:"warning",heading:dclang("generator","Image in designer may have changed after position recalculation","Please review your image"),content:dclang("generator","Warning about image size change from social media site (Instagram, Facebook, etc)","The latest {socialMediaSite} image size update has rearranged your design. Adjust your promo and download it in the new size.").replace("{socialMediaSite}",s)}).node).classList.add("pf-position-absolute"),i.classList.add("pf-w-100"),i.style.zIndex=5,i.append(o),n.a.insertBefore(o,e)}}}},pWIn:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("n6mh"),r=i("PSt6"),a=i("Jkv8"),o=i("mrkb"),s=Class({text:"",size:0,font:null,color:"",alignment:"",lineHeight:1,letterSpacing:0,engravingStyle:null,isCustomizable:!1,resizeToPercent:null,hasMultipleLines:!1,embroideryType:"",isGeneratorMockupTextLayerInstance:!0,_getNewLayer:function(){return new s},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.text=this.text,t.size=this.size,t.font=this.font,t.color=this.color,t.alignment=this.alignment,t.lineHeight=this.lineHeight,t.letterSpacing=this.letterSpacing,t.engravingStyle=this.engravingStyle,t.customizeKey=this.customizeKey,t.generatorOptions=this.generatorOptions,t.isCustomizable=this.isCustomizable,t.resizeToPercent=this.resizeToPercent,t.hasMultipleLines=this.hasMultipleLines,t.overrideImage=this.overrideImage,t.overrideImagePulse=this.overrideImagePulse,t.position=this.position.getFromOriginalRatio(),t.originalPosition=this.originalPosition,t.parentLayerUniqueId=this.parentLayerUniqueId,t.embroideryType=this.embroideryType,t.patternType=this.patternType,t.patternSpacing=this.patternSpacing,t.flipX=this.flipX,t.flipY=this.flipY,t.isExisting=this.isExisting,t.disableCentering=Object(o.f)(),t},getDPI:function(){return 600},isVector:function(){return!0},toArray:function(){return{type:s.TYPE,text:this.text,size:this.size,font:this.font.fontKey,fontName:this.font.name,fontPath:this.font["path-js"],color:this.color,alignment:this.alignment,lineHeight:this.lineHeight,letterSpacing:this.letterSpacing,engravingStyle:this.engravingStyle,resizeToPercent:this.resizeToPercent,hasMultipleLines:this.hasMultipleLines?1:0,position:this.position?this.position.toArray():{},embroideryType:this.embroideryType,isCustomizable:this.isCustomizable?1:0,customizeKey:this.customizeKey,uniqueId:this.uniqueId,parentLayerUniqueId:this.parentLayerUniqueId,overrideImage:this.overrideImage,overrideImagePulse:this.overrideImagePulse,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,isExisting:this.isExisting,disableCentering:Object(o.f)()}},isTextLayer:function(){return!0},getType:function(){return s.TYPE},isAlignedLeft:function(){return this.alignment===s.ALIGN_LEFT},isAlignedRight:function(){return this.alignment===s.ALIGN_RIGHT},isAlignedCenter:function(){return this.alignment===s.ALIGN_CENTER},getFontName:function(){return this.font?this.font.name:""},isSimple:function(){return!1},copyValues:function(e){this.text=e.text,this.size=e.size,this.font=e.font,this.color=e.color,this.alignment=e.alignment,this.lineHeight=e.lineHeight,this.letterSpacing=e.letterSpacing,this.engravingStyle=e.engravingStyle,this.customizeKey=e.customizeKey,this.resizeToPercent=e.resizeToPercent,this.isCustomizable=e.isCustomizable,this.generatorOptions=e.generatorOptions,this.hasMultipleLines=e.hasMultipleLines,this.overrideImage=e.overrideImage,this.overrideImagePulse=e.overrideImagePulse,this.isExisting=e.isExisting},isConfigurationSame:function(e){return this.text===e.text&&Math.abs(this.size-e.size)<.001&&this.font.fontKey===e.font.fontKey&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001&&this.color===e.color&&this.alignment===e.alignment},isWidthHeightRatioSame:function(e){return this.text===e.text&&this.getFontName()===e.getFontName()&&this.alignment===e.alignment&&Math.abs(this.lineHeight-e.lineHeight)<.001&&Math.abs(this.letterSpacing-e.letterSpacing)<.001},isValid:function(){return(new r.a).setActiveLayer(this).setText(this.text).isTextValid()},getUpdateDelay:function(){return this.isCustomizable?10:200},setWidthInPercent:function(e){this.resizeToPercent=e}},n.a);s.fromArray=function(e){var t=new s;return t.text=e.text,t.font=void 0!==Object(a.getPFCanvasFonts)().FONTS[e.font]?Object(a.getPFCanvasFonts)().FONTS[e.font]:e.font,t.color=e.color,t.alignment=e.alignment,t.letterSpacing=parseFloat(e.letterSpacing),t.lineHeight=parseFloat(e.lineHeight),t.size=parseFloat(e.size),t.engravingStyle=parseInt(e.engravingStyle),t},s.ALIGN_LEFT="left",s.ALIGN_RIGHT="right",s.ALIGN_CENTER="center",s.TYPE="text",window&&((globalThis||{}).PFComponentsGeneratorMockupTextLayer=s)},pnlN:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({onChildComponentProductOptionsChanged:null,designData:null,generatorParams:null,editDesignCallback:null});(globalThis||{}).PFMockupGeneratorBundleOrderPreviewPar=n},"q+2S":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("A8Hf"),r=i("SpuH"),a=i("nF4n"),o=Class({_par:null,_getNewInput:function(){var e={onchange:this._onchange,onkeyup:this._onkeyup,onblur:this._onblur};return this._par.prop&&a.a.O2O(e,this._par.prop),tag("textarea",{className:"pf-form-textarea "+this._par.className||!1,name:this._par.name,prop:e,attr:{placeholder:this._par.placeholder||""}})},append:function(e){return this.node.append(e),this._par.autoHeight&&Object(n.a)(this._nodeInput),this}},r.a);window&&((globalThis||{}).PFFormsTextarea=o)},qURr:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return S}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","pagination-component-mke"),v(g(t),b,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"setNewPagesProps",value:function(e){_(this,P).setDataProp("pages",e)}},{key:"setNewCurrentPageProps",value:function(e){_(this,P).setDataProp("currentPage",e)}},{key:"destroy",value:function(){_(this,P).destroy(),v(this,P,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={VPagination:function(){return Promise.all([i.e(2),i.e(272)]).then(i.bind(null,"E7lK"))}},t.template='\n            <v-pagination\n                :pages="pages"\n                :currentPage="currentPage"\n                :data-test="dataTest"\n                @onChange="emitEvent(\'onChange\', $event)"\n            />\n        ',t.initialData={pages:_(this,b).pages,currentPage:_(this,b).currentPage,dataTest:_(this,b).dataTest},t.emitEvent=function(e,t){switch(e){case"onChange":_(r,b).onChange&&_(r,b).onChange(t)}},v(this,P,new n.a(t)),_(this,P).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.pages=t.pages||void 0,this.currentPage=t.currentPage||void 0,this.dataTest=t.dataTest||void 0,this.onChange=t.onChange||void 0}},qqZP:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("n6mh"),r=i("+erO"),a=i("wo5H"),o=Class({licensedAssetItem:null,isCropState:!1,getType:function(){return o.TYPE},_getNewLayer:function(){return new o},isLicensedAssetLayer:function(){return!0},getOriginalClone:function(e){var t,i=this._getNewLayer();return e||(i.uniqueId=this.uniqueId),i.licensedAssetItem=this.licensedAssetItem,i.patternType=this.patternType,i.patternSpacing=this.patternSpacing,i.flipX=this.flipX,i.flipY=this.flipY,i.quickDesignId=this.quickDesignId,i.groupType=this.groupType,i.groupId=this.groupId,i.overrideImage=this.overrideImage,i.position=this.position.getFromOriginalRatio(),i.isCropState=this.isCropState,i.cropPosition=null===(t=this.cropPosition)||void 0===t?void 0:t.getFromOriginalRatio(),i.originalPosition=this.originalPosition.getClone(),i},getSourceWidth:function(){return this.licensedAssetItem.width},getSourceHeight:function(){return this.licensedAssetItem.height},isVector:function(){return this.licensedAssetItem.isVector},toArray:function(){return{type:o.TYPE,licensedAssetId:this._getLicensedAssetId(),url:this._getUrl(),position:this.position?this.position.toArray():{},cropPosition:this.cropPosition?this.cropPosition.toArray():null,uniqueId:this.uniqueId,patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,overrideImage:this.overrideImage,quickDesignId:this.quickDesignId,groupType:this.groupType,groupId:this.groupId}},_getUrl:function(){return this.licensedAssetItem.previewUrl},_getLicensedAssetId:function(){return this.licensedAssetItem.licensedAssetId},getDPI:function(){var e=this.cropPosition?this.cropPosition.width/this.position.width:1,t=this.getSourceWidth()*e,i=this.cropPosition||this.position;return this.isVector()?600:Math.round(t/i.getFromOriginalRatio().width)},isSimple:function(){return!1},isPartiallyOutOfBounds:function(){return this.cropPosition?this.cropPosition.isPartiallyOutOfBounds():this.position.isPartiallyOutOfBounds()},isCropPositionUpdateNeeded:function(){return!!this.cropPosition}},n.a);o.TYPE=a.l.LICENSED_ASSET,o.STATUS_REMOVED="removed",o.fromLicensedAssetItem=function(e){var t=new o;return t.licensedAssetItem=e,t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t},window&&((globalThis||{}).PFComponentsGeneratorMockupLicensedAssetLayer=o)},r4HB:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=Class({_style:null,_callback:null,_inputOptions:[],__construct:function(e,t){this._style=e||r.ENGRAVING_FILLED,this._callback=t,this.node=tag("div"),this._addStyles()},_addStyles:function(){for(var e in n.a.clearNode(this.node),r.ENGRAVING_STYLES){var t=tag("input",{type:"radio",name:"engraving_style",value:e,checked:e===this._style.toString(),prop:{onchange:this.setStyle.bind(this,parseInt(e),!1)}});this._inputOptions.push(t),tag("label","pf-p-0",[t,tag("span","pf-pl-8",dlang("generator",r.ENGRAVING_STYLES[e]))]).append(this.node)}tag("div","",[this._styleWarning=tag("p","pf-mt-16 alert alert-warning",dlang("generator","Please select the mockup view to see how the outline engraving will look on the product"))]).append(this.node),this._setEngravingWarning()},setStyle:function(e,t){e||(e=r.ENGRAVING_FILLED),this._style=e,this._setEngravingWarning(),this._inputOptions.forEach((function(t){t.checked=e==t.value})),!t&&this._callback&&this._callback(this._style)},getStyle:function(){return this._style},_setEngravingWarning:function(){parseInt(this._style)===r.ENGRAVING_OUTLINE?n.a.removeClassName(this._styleWarning,"pf-d-none"):n.a.addClassName(this._styleWarning,"pf-d-none")}},n.a.Base);r.ENGRAVING_FILLED=0,r.ENGRAVING_OUTLINE=1,r.ENGRAVING_STYLES={},r.ENGRAVING_STYLES[r.ENGRAVING_FILLED]=dlang("products","Filled"),r.ENGRAVING_STYLES[r.ENGRAVING_OUTLINE]=dlang("products","Outline"),window&&((globalThis||{}).PFComponentsEngravingStylePicker=r)},rDYR:function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return d})),i.d(t,"d",(function(){return h}));var n=i("boP+"),r=i("7QI8"),a=i("2+Fj"),o=i("5B9T"),s=i("v217"),l=i("mrkb");function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.i;return{type:t,value:e.id,urls:{large:e.image.urlLarge,thumb:e.image.urlThumb},item:e}}function u(e,t,i,l){if(!e){var c=i?s.a:s.b;if(l)return c;var u={};for(var d in c)u[d]=c[d].value;return u}if(!t)return{};var h={},p=null,f=Object(n.a)();if(r.a.PLACEMENT_COLOR_MAP[t]===a.a.NAME_EMBROIDERY_TYPE){var g=f.options[a.a.NAME_TEXT_THREAD_COLORS]||{values:{}},m=f.options[a.a.NAME_THREAD_COLORS]||{values:{}},_=f.options[a.a.NAME_THREAD_COLORS_3D]||{values:{}};p={values:Object.assign({},g.values,m.values,_.values)}}else p=f.options[r.a.PLACEMENT_COLOR_MAP[t]];if(p&&p.values&&(h=o.a.swap(p.values)),l){var v={};for(var y in h)v[y]={name:y,value:h[y],type:s.l};return v}return h}function d(e){if(!e)return"";var t=o.a.hexToRgb(e)||{};return"(R:"+t.r+" G:"+t.g+" B:"+t.b+")"}function h(){return Object(l.g)()||Object(l.e)()?s.e:s.f}},rDi1:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("xeH2"),r=i.n(n),a=i("nF4n"),o=i("97Au"),s=Class({_storageKey:"mockupPopupSeen3",_isInModal:!1,_videoUrl:"https://www.youtube.com/embed/1iH5LSlaPsM",_videoTitle:"Mockup & Print File Generator Tutorial",_imageMaxHeight:"80px",_imageWidthInModal:"70px",_imageWidth:"170px",_isHtmlTitle:!1,_thumbnailFile:"",__construct:function(e,t){this._isInModal=e,this._isHtmlTitle=!!t,this.node=tag("div"),this._hasSeen()||this._render()},_render:function(){a.a.clearNode(this.node),tag("div","timed-popup pf-bg-lighter pf-border pf-p-16 pf-pr-24 pf-mb-24",[tag("div","pf-d-flex pf-flex-row pf-justify-content-left pf-align-items-center",[tag("div",{className:"pf-mr-16",style:{width:this._isInModal?this._imageWidthInModal:this._imageWidth}},[tag("img",{className:"timed-popup__thumbnail",src:this.getThumbnailUrl(),onclick:this._isInModal?null:this._createVideoPopup.bind(this),style:{maxHeight:this._imageMaxHeight,width:this._isInModal?this._imageWidthInModal:this._imageWidth}})]),tag("div",this._isInModal?null:{className:"timed-popup__label",onclick:this._createVideoPopup.bind(this)},[tag("div","timed-popup__title",this.getTitle()),tag("div","timed-popup__text",this.getText())])]),tag("div",{className:"timed-popup__close pf-p-8 pf-text-gray",onclick:this._closeIt},[tag("i","pf-i pf-i-close pf-i-24")])]).append(this.node)},getTitle:function(){return this._isHtmlTitle?this.getHtmlTitle():this._isInModal?"New text tool in the push generator!":"Same generator, new possibilities!"},getHtmlTitle:function(){return[]},getText:function(){return this._isInModal?"Upload your design files OR create new text-based design":"Check out the new text tool and create a text-based design."},getThumbnailUrl:function(){var e=this._isInModal?"push-info-icon.svg":"play-thumbnail.jpg";return this._thumbnailFile&&(e=this._thumbnailFile),"/static/images/popups/"+e},_hasSeen:function(){try{return"1"===localStorage.getItem(this._storageKey)}catch(e){}return!1},_closeIt:function(){a.a.removeNode(this.node);try{localStorage.setItem(this._storageKey,1)}catch(e){}},_createVideoPopup:function(){var e=new o.a.Par;e.title=this._videoTitle,e.modalDialogClass="modal-lg",e.deleteOnHide=!0,e.onShown=function(){r()(".video-embed").fitVids()};var t=new o.a(e);t.setContent(tag("div","video-embed",[tag("iframe",{src:this._videoUrl,attr:{width:"853",height:"480",frameborder:"0"}})])),t.show()}},a.a.Base);(globalThis||{}).PFTimedPopup=s;var l=i("Gv5l"),c=i("QLN8"),u=i("0Dcb"),d=i("DUxB"),h=i("cCrT"),p=function e(t){this.categories=new c.a,this.categories.storeId=t.storeId,this.categoryItems=[],this.par=new e.Par,a.a.O2O(this.par,t),this.breadcrumbs=new d.a,this.node=tag("div","",[!this.par.withoutBreadcrumbs&&this.breadcrumbs,this.nodeBody=tag("div","category-picker")]),this.load()};p.prototype=new a.a.Base,p.prototype.categories=null,p.prototype.par=null,p.prototype.load=function(){this.par.pickForGenerator?this.categories.getForGenerator(this.par.storeId,$.proxy(this.loadRe,this)):this.categories.get($.proxy(this.loadRe,this))},p.prototype.loadRe=function(e){var t=!1;if(this.par.storeId&&(t=(new l.a).getCachedStore(this.par.storeId).hasNewProductBetaAccess),e=e.filter((function(e){return!e.isHidden&&(!e.inBetaTest||e.inBetaTest&&t)}),t),this.categoryItems=e,this.par.categoryId)for(var i in this.categoryItems){var n=this.categoryItems[i];if(n.categoryId==this.par.categoryId)return void this._navigateToCategory(n)}else this.renderTopLevel()},p.prototype._renderBreadCrumbs=function(e){this.breadcrumbs.clear();var t=[],i={title:"All categories",onclick:this._navigateToCategory.bind(this,0)};t.push(i);var n=this.categories.getPath(e);for(var r in n)t.push({title:n[r].name,onclick:this._navigateToCategory.bind(this,n[r],!0)});this.breadcrumbs.add(t)},p.prototype._navigateToCategory=function(e,t){var i=e?e.categoryId:0;i&&t&&this.par.shouldSaveState&&p.setState(i),!i||e.hasChildren?e?this._renderLevel(e):this.renderTopLevel():"function"==typeof this.par.callback&&this.par.callback(e.categoryId)},p.prototype.renderTopLevel=function(){a.a.clearNode(this.nodeBody);var e=Object(a.a)({tag:"div",className:"row top-category"});this._renderBreadCrumbs(0),void 0!==s&&new s(!0).append(this.nodeBody);for(var t in this.categoryItems){var i=this.categoryItems[t];if(0===i.parentId){1;var n=null;i.badge&&(n={tag:"span",className:"product-item__badge product-item__badge--popular",text:i.badge}),Object(a.a)({tag:"div",className:"top-category__category-item-wrapper",els:[{tag:"a",className:"category-item",prop:{onclick:$.proxy(this._navigateToCategory,this,i,!0)},els:[new u.a({nodeContent:n,urlImage:i.urlImage}),{tag:"div",className:"title",text:i.name}]}]}).append(e)}}e.append(this.nodeBody)},p.prototype._renderLevel=function(e){var t,i,n=e.categoryId;this._renderBreadCrumbs(n),a.a.clearNode(this.nodeBody);var r=[];for(t in r=this.shouldShowInOneLevel(e)?[e]:this.categories.getByParentId(n)){var o=r[t],s=this.categories.getByParentId(o.categoryId);0==s.length&&s.push(o);var l=[];for(i in s)l.push(this.getSubCategoryThumbNode(s[i]));this.getSubCategoryRowNode(o,l).append(this.nodeBody)}},p.prototype.getSubCategoryRowNode=function(e,t){return Object(a.a)({tag:"div",className:"row sub-category",els:[{tag:"div",className:"col-sm-3 main-name",text:e.name},{tag:"div",className:"col-sm-9 sub-items",els:t}]})},p.prototype.getSubCategoryThumbNode=function(e){return Object(a.a)({tag:"a",className:"sub-category-item",prop:{onclick:$.proxy(this._navigateToCategory,this,e,!0)},els:[{tag:"div",className:"img-wrap",els:[{tag:"img",className:"img-responsive",src:e.urlImage}]},{tag:"div",className:"title",text:e.name}]})},p.prototype.shouldShowInOneLevel=function(e){if(e.parentId)return!0;var t=this.categories.getByParentId(e.categoryId);for(var i in t){if(this.categories.getByParentId(t[i].categoryId).length>0)return!1}return!0},p.setState=function(e){var t=new h.a,i={categoryId:e,productId:0};t.query.categoryId=e,t.query.productId=0,history.pushState(i,document.title,t.toString())},p.Par=function(){},p.Par.prototype.callback=null,p.Par.prototype.onSubCategoryPicked=null,p.Par.prototype.categoryId=0,p.Par.prototype.pickForGenerator=!1,p.Par.prototype.shouldSaveState=!1,p.Par.prototype.storeId=0,p.Par.prototype.withoutBreadcrumbs=!1,(globalThis||{}).PFCategoryPicker=p},"rF+z":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("PSt6"),r=i("X5Ic"),a=i("Iarc"),o=i.n(a),s=i("ZjJM"),l=i("Jkv8");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=g(e);if(t){var r=g(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(c,e);var t,i,n,a=p(c);function c(){return u(this,c),a.apply(this,arguments)}return t=c,(i=[{key:"isTextSizeValid",value:function(){var e=this._getTechnique();if(!e||[r.a.TYPE_EMBROIDERY,r.a.TECHNIQUE_ENGRAVING,r.a.TYPE_JEWELRY].indexOf(e)<0)return!0;if(!this._activeLayer.font||this._activeLayer.isGeneratorMockupTextLayerInstance&&!Object(s.b)(Object(l.getPFCanvasFonts)().LOADED_JS_FONTS,this._activeLayer.font.fontKey))return!0;var t=this._activeLayer.getOriginalClone();t.isGeneratorMockupTextLayerInstance?o.a.DEPENDENCIES.TEXT2SVG.TextCalculator(t):t.isGeneratorMockupTextBoxLayerInstance&&o.a.calculateTextboxPositions(t);var i=t.text.trim().split("\n").length,n=this._getFontOptions();return e===r.a.TECHNIQUE_ENGRAVING||e===r.a.TECHNIQUE_EMBROIDERY?(Object(l.getPFCanvasFonts)().CUSTOMIZED_TEXT_SIZES[t.uniqueId]||t.size)>n.minSize:t.position.height/i*t.lineHeight>n.minSize}},{key:"isTextHeightOverUpperLimit",value:function(){if(!this._activeLayer.font||this._activeLayer.isGeneratorMockupTextLayerInstance&&!Object(s.b)(Object(l.getPFCanvasFonts)().LOADED_JS_FONTS,this._activeLayer.font.fontKey))return!1;var e=this._getFontMaxHeight();if(!e)return!1;var t=this._activeLayer.getOriginalClone();return t.text=t.text.replace(/\n/g,""),t.isGeneratorMockupTextBoxLayerInstance&&o.a.calculateTextboxPositions(t),t.position.height>e}}])&&d(t.prototype,i),n&&d(t,n),c}(n.a)},rFrQ:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("vUhP"),r=i("nF4n"),a=Class({_par:null,__construct:function(e,t){this._par=e,this.node=tag("div","row no-gutters pf-px-12 pf-px-md-0 pf-py-8 pf-py-md-0",[tag("div","col-12 col-md-auto order-2 order-md-1 pf-d-flex pf-align-items-center",[this._par.onBack?tag("a",{id:"js--back",className:"pf-btn pf-btn-secondary pf-mr-12 pf-w-25 pf-w-md-auto",onclick:this._par.onBack},clang("Go back","Back")):"",this._buttonContinue=tag("div",{className:"pf-btn pf-btn-primary "+(this._par.onBack?"pf-w-75":"pf-w-100")+" pf-w-md-auto",id:"js--variant-picker-continue-button",onclick:t,style:{pointerEvents:"auto"},attr:{dusk:"variant-picker-continue-button","data-test":"variant-picker-continue-button"}},this._par.isShoppingCart?dlang("site","Add to cart"):lang("Continue"))]),tag("div","col-12 col-md-auto order-3 order-md-2",[this._nodeError=tag("div","pf-text-red pf-bold pf-px-8")]),tag("div","col-12 col-md order-1 order-md-3 pf-pb-8 pb-md-0 text-left text-md-right",[this._nodePrice=tag("div","pf-h4"),tag("span","pf-text-muted",lang("Excl. taxes and other charges"))])])},setPrice:function(e){(r.a.clearNode(this._nodePrice),e.price>0)&&n.a.createDiscountElementFromPriceData({priceData:e}).append(this._nodePrice)},setError:function setError(e){var t=this;r.a.clearNode(this._nodeError),"string"==typeof e&&(e=[e]),e instanceof Array&&e.forEach((function(e){tag("div","",e).append(t._nodeError)}))},isContinueJsEventDisabled:function(){return r.a.hasClassName(this._buttonContinue,"disabled-js")},disableContinueJsEvent:function(){r.a.addClassName(this._buttonContinue,"disabled-js")},enableContinueJsEvent:function(){r.a.removeClassName(this._buttonContinue,"disabled-js")},disableContinue:function(){r.a.addClassName(this._buttonContinue,"disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!1)},enableContinue:function(){r.a.removeClassName(this._buttonContinue,"disabled"),this._par.onCanContinueChange&&this._par.onCanContinueChange(!0),this.enableContinueJsEvent()},isContinueButtonDisable:function(){return r.a.hasClassName(this._buttonContinue,"disabled")}},r.a.Base);a.PRINTFILE_TOO_SMALL=dlang("generator","Your image doesn't meet our print requirements"),a.CUSTOMIZABLE_PRINTFILE_TOO_SMALL=lang("Image is too small, please select a file with a larger resolution!"),a.EMBROIDERY_OUT_OF_BOUNDS=dlang("generator","Please make sure your text is in the embroidery area."),a.EMBROIDERY_TEXT_TOO_SMALL=dlang("generator","Text is too small to embroider"),a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT=dlang("generator","Youâve exceeded the stitch length limit for this font"),a.EMBROIDERY_LAYERS_OVERLAPPING=dlang("dashboard","Text layers canât overlap"),a.LAYER_TEXT_TOO_SMALL=dlang("dashboard","Text size is too small"),a.LAYER_CLIPART_TOO_SMALL=dlang("dashboard","Clip art is too small"),a.TEXT_TOO_LONG=dlang("dashboard","Your text is too long. The limit is {limit} characters."),a.ENGRAVING_LAYERS_OVERLAPPING=dlang("dashboard","Different engraving style layers canât overlap"),a.LAYER_OUT_OF_BOUNDS=dlang("dashboard","Please make sure your layer falls within the print area"),a.EMBROIDERY_THREAD_COLOR_LIMIT=dlang("dashboard","To continue, please pick less than {limit} thread colors!"),a.EMBROIDERY_NOTES_MISSING=dlang("dashboard","To continue, please specify which parts of your design are Flat and which 3D in the Embroidery notes"),a.PRODUCT_OUT_OF_STOCK=dlang("dashboard","Product is currently out of stock"),(globalThis||{}).PFVariantPickerFooter=a},rKkW:function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}i.d(t,"a",(function(){return r}));var r=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"id",null),n(this,"name",""),n(this,"groupId",null),n(this,"index",0),n(this,"width",1e3),n(this,"height",1e3),n(this,"customizable",!1),n(this,"extra",{}),n(this,"svg",""),n(this,"unavailableTechniques",[]),n(this,"isActive",!0),n(this,"image",{}),n(this,"type","clipart")};n(r,"fromArray",(function(e){return Object.assign(new r,e)}))},ruUh:function(e,t,i){"use strict";i.d(t,"c",(function(){return o})),i.d(t,"a",(function(){return s})),i.d(t,"b",(function(){return l}));var n=i("KLvT"),r=i("Ptwn");function a(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}var o=function(){var e,t=(e=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(n.a)().dispatch(r.c(r.e));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})),function(){var t=this,i=arguments;return new Promise((function(n,r){var o=e.apply(t,i);function s(e){a(o,n,r,s,l,"next",e)}function l(e){a(o,n,r,s,l,"throw",e)}s(void 0)}))});return function(){return t.apply(this,arguments)}}(),s=function(){return Object(n.a)().getters[r.c(r.a)]},l=function(e){return Object(n.a)().getters[r.c(r.b)]([e])[0]}},rwWB:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=new function(){this.set=function(e,t,i){var n;if(void 0!==i){var r=new Date;r.setTime(r.getTime()+24*i*3600*1e3),n=" expires="+r.toISOString()}else n="";document.cookie=e+"="+t+";"+n},this.get=function(e){for(var t=e+"=",i=document.cookie.split(";"),n=0;n<i.length;n++){for(var r=i[n];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null}};window&&((globalThis||{}).PFUtilsCookie=n)},s6Su:function(e,t,i){"use strict";i.d(t,"a",(function(){return T})),i.d(t,"b",(function(){return S}));var n=i("x0He"),r=i("SBaP"),a=i("oCYn"),o=i("e7F3");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function c(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){l(a,n,r,o,s,"next",e)}function s(e){l(a,n,r,o,s,"throw",e)}o(void 0)}))}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=m(e);if(t){var r=m(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return f(this,i)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,y(e,t,"get"))}function v(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,y(e,t,"set"),i),i}function y(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var b=new WeakMap,P=new WeakMap,C=new WeakSet,T=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(a,e);var t,i,n,r=p(a);function a(e){var t;return u(this,a),t=r.call(this),C.add(g(t)),b.set(g(t),{writable:!0,value:void 0}),P.set(g(t),{writable:!0,value:void 0}),t.node=tag("div","form-input-checkbox-mke"),v(g(t),b,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(g(t),C,w).call(g(t)),t}return t=a,(i=[{key:"destroy",value:function(){_(this,P).destroy(),v(this,P,null)}}])&&d(t.prototype,i),n&&d(t,n),a}(r.a);function w(){return I.apply(this,arguments)}function I(){return(I=c(regeneratorRuntime.mark((function e(){var t,r=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.default.use(o.c),(t=new n.b).components={"input-checkbox":function(){return i.e(220).then(i.bind(null,"fb3t"))}},t.template='\n            <input-checkbox\n                :name="name"\n                :id="id"\n                :value="value"\n                :label="label"\n                :infoIcon="infoIcon"\n                :infoIconDelay="infoIconDelay"\n                :infoIconName="infoIconName"\n                :isReadOnly="isReadOnly"\n                :tooltip="tooltip"\n                :inputSize="inputSize"\n                :validation="validation"\n                :wrapperClass="wrapperClass"\n                :labelClass="labelClass"\n                :data-test="dataTest"\n                :is-indeterminate="isIndeterminate"\n                @onChange="emitEvent(\'onChange\', $event)"\n                @onValidated="emitEvent(\'onValidated\', $event)"\n            />\n        ',t.initialData={name:_(this,b).name,id:_(this,b).id,value:_(this,b).value,label:_(this,b).label,infoIcon:_(this,b).infoIcon,infoIconDelay:_(this,b).infoIconDelay,infoIconName:_(this,b).infoIconName,isReadOnly:_(this,b).isReadOnly,tooltip:_(this,b).tooltip,inputSize:_(this,b).inputSize,validation:_(this,b).validation,wrapperClass:_(this,b).wrapperClass,labelClass:_(this,b).labelClass,dataTest:_(this,b).dataTest,isIndeterminate:_(this,b).isIndeterminate},t.emitEvent=function(e,t){switch(e){case"onChange":_(r,b).onChange&&_(r,b).onChange(t);break;case"onValidated":_(r,b).onValidated&&_(r,b).onValidated(t)}},v(this,P,new n.a(t)),_(this,P).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.name=t.name||"default Name",this.id=t.id||void 0,this.value=t.value||!1,this.label=t.label||void 0,this.infoIcon=t.infoIcon||void 0,this.infoIconDelay=t.infoIconDelay||void 0,this.infoIconName=t.infoIconName||void 0,this.isReadOnly=t.isReadOnly||void 0,this.tooltip=t.tooltip||void 0,this.inputSize=t.inputSize||void 0,this.validation=t.validation||void 0,this.wrapperClass=t.wrapperClass||void 0,this.labelClass=t.labelClass||void 0,this.dataTest=t.dataTest||void 0,this.isIndeterminate=t.isIndeterminate||void 0,this.onChange=t.onChange||void 0,this.onValidated=t.onValidated||void 0}},sWGB:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"j",(function(){return a})),i.d(t,"b",(function(){return o})),i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"h",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"k",(function(){return h})),i.d(t,"g",(function(){return p}));var n="designer/layersModule/",r="m_setActiveLayer",a="m_setActivePlacementId",o="g_activeLayer",s="g_activeLayerType",l="g_activeLayerId",c="g_activeLayerIsTemporary",u="g_isGroupActiveLayer",d="g_activePlacementId",h="a_setVirtualTextLayer";function p(e){return n+e}},sXh8:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return c})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return p})),i.d(t,"d",(function(){return f}));var n=i("nF4n"),r=i("KLvT"),a=i("Bxww");function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),s(this,"groupTagInfo",""),s(this,"groupNamesWithTagLabels",{optionGroupName:null,tagLabel:null})}var t,i,n;return t=e,n=[{key:"fromArray",value:function(e){return Object.assign(new this,e||{})}}],(i=null)&&o(t.prototype,i),n&&o(t,n),e}();function c(e){Object(r.a)().commit(a.b(a.g),e)}function u(){return Object(r.a)().getters[a.b(a.c)]}function d(e){if(h(e))return u().groupNamesWithTagLabels.find((function(t){return t.optionGroupName===e})).tagLabel}function h(e){var t,i=null===(t=u())||void 0===t?void 0:t.groupNamesWithTagLabels;return!!i&&(Array.isArray(i)?i.some((function(t){return t.optionGroupName===e})):i.optionGroupName===e)}function p(e,t){return h(e)?tag("span",{className:"pf-py-0 pf-badge pf-badge-small pf-badge--default",style:{position:"absolute",right:"5px",bottom:"7.9px",zIndex:10,height:"auto"},innerHTML:dlang("generator","by ")+d(e)}).append(t):null}function f(e){var t;return n.a.clearNode(e),null!==(t=u())&&void 0!==t&&t.groupTagInfo?tag("div","container text-center clearfix",[tag("div","row",[tag("div",{className:"col-8 center-block pf-ui-body text-center pf-text-muted hide-empty",style:{marginTop:"36px",marginBottom:"-4px"},innerHTML:u().groupTagInfo})])]).append(e):null}},slIU:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=Class({_resourcesToLoad:null,_loadedJsFilesCount:null,_loadedJsFilesNeeded:null,_hasLoadError:null,addNeededResource:function(e,t){this._resourcesToLoad||(this._resourcesToLoad=[]);var i=[];t&&("string"==typeof t&&(t=[t]),t.forEach((function(e){i.push({path:e})})));var n={path:e,childs:i};this._resourcesToLoad.push(n)},loadResources:function(e){this._resourcesToLoad&&0!==this._resourcesToLoad.length||(console.log("AsyncJsLoader: no resources to load"),e&&e(!0)),this._loadedJsFilesCount=0,this._loadedJsFilesNeeded=0,this._hasLoadError=!1,this._resourcesToLoad.forEach(function(t){this._loadJs(t,this._onMainResourceLoaded.bind(this,t,e),document.body)}.bind(this))},_loadJs:function(e,t,i){if(e&&e.path&&!n.isResourceLoaded(e.path)){this._loadedJsFilesNeeded++;var r=document.createElement("script");r.src=e.path,r.onload=t.bind(null,!0),r.onerror=t.bind(null,!1),r.onreadystatechange=t.bind(null,!0),i.appendChild(r)}},_onMainResourceLoaded:function(e,t,i){var r;this._loadedJsFilesCount++,i?n.LOADED_JS_FILES[e.path]=!0:this._hasLoadError=!0,null!==(r=e.childs)&&void 0!==r&&r.length?e.childs.forEach(function(e){this._loadJs(e,this._onChildResourceLoaded.bind(this,e,t),document.body)}.bind(this)):this._loadedJsFilesCount===this._loadedJsFilesNeeded&&t&&t(!this._hasLoadError)},_onChildResourceLoaded:function(e,t,i){this._loadedJsFilesCount++,i?n.LOADED_JS_FILES[e.path]=!0:this._hasLoadError=!0,this._loadedJsFilesCount===this._loadedJsFilesNeeded&&t&&t(!this._hasLoadError)}});n.LOADED_JS_FILES=[],n.loadResourcesAsync=function(e,t,i){var r="string"==typeof e?[e]:e,a="string"==typeof t?[t]:t;if(r.every((function(e){return n.isResourceLoaded(e)}))&&a.every((function(e){return n.isResourceLoaded(e)})))i(!0);else if(r.length&&r.length>0){var o=new n;r.forEach((function(e,i){var n=null;i+1===r.length&&(n=t),o.addNeededResource(e,n)})),o.loadResources(i)}else console.log("AsyncJsLoader: no resources to load"),i(!0)},n.isResourceLoaded=function(e){return!!n.LOADED_JS_FILES[e]},window&&((globalThis||{}).PFUtilsAsyncJsLoader=n);var r=i("nF4n"),a=i("Sucz"),o=function e(t){this.par=new e.Par,r.a.O2O(this.par,t||{}),this._enabled=!0,null!==this.par.node&&this.initUploader(this.par.node)};o.prototype.initUploader=function(e){$.blueimp.fileupload.prototype.options.processQueue.push({action:"validateLayerCount",validateAddingLayer:"@",maxNumberOfFiles:"@",disabled:"@disableValidation"},{action:"validateFileExtension",acceptFileTypes:"@",disabled:"@disableValidation"},{action:"validateFileSize",maxFileSize:"@",disabled:"@disableValidation"},{action:"validateImageDimensions",maxDimension:"@",disabled:"@disableValidation"},{action:"validateImageTransparency",enabled:"@enableTransparencyValidation"}),$.widget("blueimp.fileupload",$.blueimp.fileupload,{processActions:{validateLayerCount:function(e,t){if(t.disabled)return e;var i=$.Deferred(),n=e.files[e.index],r=e.originalFiles.length;return e.originalFiles.countError?i.rejectWith(this,[e]):(t.validateAddingLayer&&!t.validateAddingLayer("file",r)?(n.error=dlang("dashboard","Max limit is {number} image layers. Please delete a layer if you want to add another one.").replace("{number}",t.maxNumberOfFiles()),e.originalFiles.countError=!0,e.files.error=!0,i.rejectWith(this,[e])):i.resolveWith(this,[e]),i.promise())},validateFileExtension:function(e,t){if(t.disabled)return e;var i=$.Deferred(),n=e.files[e.index];if(e.originalFiles.countError)return i.rejectWith(this,[e]);if(!t.acceptFileTypes||t.acceptFileTypes.test(n.type)||t.acceptFileTypes.test(n.name))i.resolveWith(this,[e]);else{var r=/(\|?[a-zA-Z0-9]+\|?)+/.exec(t.acceptFileTypes)[0].split("|");n.error=dlang("generator","Couldn't upload {filename} because we don't accept {extension}. Please try uploading again in {formats}.").replace("{filename}",n.name).replace("{extension}",/(?:\.([^.]+))?$/.exec(n.name)[1]).replace("{formats}",r.join(", ")),e.files.error=!0,i.rejectWith(this,[e])}return i.promise()},validateFileSize:function(e,t){if(t.disabled)return e;var i=$.Deferred(),n=e.files[e.index];return e.originalFiles.countError?i.rejectWith(this,[e]):(n.size>t.maxFileSize?(n.error=dlang("generator","Couldn't upload {filename} because it exceeds our max size of {size}MB. Please try uploading a smaller file.").replace("{size}",Math.round(t.maxFileSize/1024/1024)).replace("{filename}",n.name),e.files.error=!0,i.rejectWith(this,[e])):i.resolveWith(this,[e]),i.promise())},validatePdfPages:function(e){var t=this,i=$.Deferred(),n=e.files[e.index];if("application/pdf"===n.type){var r=new FileReader;r.readAsBinaryString(n),r.onloadend=function(){if(1!==r.result.match(/\/Type[\s]*\/Page[^s]/g).length)return n.error=dlang("generator","Couldnât upload {filename} because it has more than 1 page. Format your PDF file so that it has a single page, then upload again.").replace("{filename}",n.name),e.files.error=!0,i.rejectWith(t,[e]);i.resolveWith(t,[e])}}else i.resolveWith(this,[e]);return i.promise()},validateImageDimensions:function(e,t){if(t.disabled)return e;var i=$.Deferred(),n=e.files[e.index];if(e.originalFiles.countError)return i.rejectWith(this,[e]);if(/(\.|\/)(jpe?g|png)$/i.test(n.name)){var r=new FileReader;r.readAsDataURL(n),r.onload=function(){var a=new Image;a.onload=function(){var r=this.naturalWidth||this.width,a=this.naturalHeight||this.height;r>t.maxDimension||a>t.maxDimension?(e.files.error=!0,n.error=dlang("generator","Couldn't upload {filename} because it exceeds our max size of {maxDimension}x{maxDimension} px. Please use a smaller file.").replace("{filename}",n.name).replace(/{maxDimension}/g,t.maxDimension),i.rejectWith(this,[e])):r+a===0?(e.files.error=!0,n.error=dlang("generator","Error uploading {filename}. Please try again on a different browser.").replace("{filename}",n.name),i.rejectWith(this,[e])):i.resolveWith(this,[e])},a.onerror=function(){e.files.error=!0,n.error=dlang("generator","Error uploading {filename}. Please try a different file.").replace("{filename}",n.name),i.rejectWith(this,[e])},a.src=r.result,this.preloadedImage=a}.bind(this)}else i.resolveWith(this,[e]);return i.promise()}.bind(this),validateImageTransparency:function(e,t){if(!t.enabled||!PF.ASSETS_URL)return e;var i=$.Deferred();return e.originalFiles.countError?i.rejectWith(this,[e]):(n.loadResourcesAsync(PF.ASSETS_URL+"js/tf.min.js",PF.ASSETS_URL+"tensorflow/lib.tf.js",function(t){t?this.checkTransparency(i,e):i.rejectWith(this,[e])}.bind(this)),i.promise())}.bind(this)}}),this.fileupload=$(e).fileupload({url:this.par.uploadUrl||PF.Config.S3_UPLOAD_URL,type:"POST",dataType:"xml",sequentialUploads:!0,maxFileSize:this.par.maxUploadSize,acceptFileTypes:this.par.allowedExtensionRegex,dropZone:!!this.par.nodeDropZone&&$(this.par.nodeDropZone),disableValidation:this.par.disableValidation,enableTransparencyValidation:this.par.enableTransparencyValidation,maxNumberOfFiles:this.par.getMaxFileLayerCount?this.par.getMaxFileLayerCount:5,maxDimension:this.par.maxDimension,validateAddingLayer:this.par.validateAddingLayer,add:function(e,t){var i=$(this);t.process((function(){return i.fileupload("process",t)}))},done:this.onDone.bind(this),processfail:this.onProcessFail.bind(this),stop:this.onProcessDone.bind(this),start:this.onStart.bind(this),progressall:this.onProgressAll.bind(this),fail:this.onFail.bind(this)}),this.fileupload.bind("fileuploadsubmit",this.onSubmit.bind(this)),this.fileList=[],this.errorList=[],this.processedFiles=0,this.fileupload.bind("fileuploadprocessfail",function(e,t){(t.originalFiles.countError&&t.files[t.index].error||t.files[t.index].error)&&this.errorList.push(t.files[t.index].error)}.bind(this)).bind("fileuploadprocessalways",function(e,t){this.processedFiles++,this.processedFiles>=t.originalFiles.length&&(this.submitCallback=!0)}.bind(this)).bind("fileuploadprocessdone",function(e,t){this.fileList.push(t)}.bind(this)).bind("fileuploadprocessstop",function(e){this.submitCallback&&(this.errorList.length>0?(this.par.onFail(this.errorList.join("\n")),this.fileList=[],this.errorList=[]):this.par.onFileSelected(this.fileList[0]),this.par.autoUpload&&(this.submit(),this.fileList=[],this.errorList=[]),this.processedFiles=0,this.submitCallback=!1)}.bind(this))},o.prototype.submit=function(){this.errorList.length>0?(this.par.onFail(this.errorList.join("\n")),this.fileList=[],this.errorList=[]):this.fileList.length>0&&(this.fileList.forEach((function(e){e.process().done((function(){e.submit()}))})),this.fileList=[],this.errorList=[])},o.prototype.onSubmit=function(e,t){var i=t.files[0].name,n={};Object(a.a)(this.par.uploadDataUrl,{uploadType:this.par.uploadType,fileName:i},(function(e){n=e}),{async:!1}),t.temporaryFileId=n.temporaryFileId,t.temporaryFilePusherKey=n.temporaryFilePusherKey,delete n.temporaryFileId,delete n.temporaryFilePusherKey,t.formData=n,this.par.onSubmit&&this.par.onSubmit(t)},o.prototype.onDone=function(e,t){if(t._response.result){var i=t._response.result.documentElement,n=t.files[0],r={temporaryFileId:t.temporaryFileId||0,file:{type:n.type,size:n.size,filename:n.name},location:i.childNodes[0].textContent,bucket:i.childNodes[1].textContent,key:i.childNodes[2].textContent,etag:i.childNodes[3].textContent.replace(/"/g,"")};r.extra=this.par.getUploadExtra(),n.transparency&&(r.extra.transparency=n.transparency),Object(a.a)(this.par.uploadCallbackUrl,r,this.onUploadCallback.bind(this))}else this.onFail(e,t)},o.prototype.onUploadCallback=function(e){this.par.onDone(e)},o.prototype.onProcessFail=function(e,t){var i=lang("Something went wrong!");void 0!==t.files[0].error&&(i=t.files[0].error),this.par.onProcessFail(t.files[0].name,i)},o.prototype.onProcessDone=function(){this.par.onProcessDone&&this.par.onProcessDone()},o.prototype.onStart=function(e,t){this.par.onStart()},o.prototype.onProgressAll=function(e,t){if(t.total>0){var i=Math.round(100*t.loaded/t.total);this.par.onProgress(i)}},o.prototype.onFail=function(e,t){var i=(t._response||t.response()).jqXHR;413!=i.status?void 0!==i.responseJSON?this.par.onFail(i.responseJSON.message):void 0!==i.responseText&&""!=i.responseText?this.par.onFail(i.responseText):this.par.onFail("Error happened"):this.onFail("Sorry, the maximum file size is 200Mb. Please resize the file and try uploading again.")},o.prototype.isEnabled=function(){return this._enabled},o.prototype.enable=function(){this.fileupload.fileupload("enable"),this._enabled=!0},o.prototype.disable=function(){this.fileupload.fileupload("disable"),this._enabled=!1},o.prototype.destroy=function(){$(this.par.node).fileupload("destroy")},o.prototype.setUploadType=function(e){this.par.uploadType=e},o.prototype.checkTransparency=function(e,t){/(\.|\/)(jpe?g|png)$/i.test(t.files[t.index].name)?tensorTransparrency(this.preloadedImage,(function(i){i?(i.prediction>0&&(t.files[t.index].transparency=i),e.resolveWith(this,[t])):e.rejectWith(this,[t])})):e.resolveWith(this,[t])},o.Par=function(){},o.Par.prototype.node=null,o.Par.prototype.nodeDropZone=null,o.Par.prototype.autoUpload=!0,o.Par.prototype.group=null,o.Par.prototype.uploadType="temp",o.Par.prototype.maxUploadSize=209715200,o.Par.prototype.maxDimension=2e4,o.Par.prototype.allowedExtensionRegex=/(\.|\/)(jpg|jpeg|png|psd|pdf|ai|tiff?)$/i,o.Par.prototype.uploadUrl=null,o.Par.prototype.validateAddingLayer=null,o.Par.prototype.getMaxFileLayerCount=null,o.Par.prototype.uploadCallbackUrl=null,o.Par.prototype.uploadDataUrl=null,o.Par.prototype.disableValidation=!1,o.Par.prototype.enableTransparencyValidation=!1,o.Par.prototype.getUploadExtra=function(){return{}},o.Par.prototype.onFail=function(e){console.log("PFUploader:","onFail",e)},o.Par.prototype.onProcessFail=function(e,t){console.log("PFUploader:","onProcessFail",e,t)},o.Par.prototype.onProcessDone=function(){console.log("PFUploader:","onProcessDone")},o.Par.prototype.onProgress=function(e){console.log("PFUploader:","onProgress",e,"%")},o.Par.prototype.onStart=function(){console.log("PFUploader:","onStart")},o.Par.prototype.onDone=function(e){console.log("PFUploader:","onDone",e)},o.Par.prototype.onFileSelected=function(e){console.log("PFUploader:","onFileSelected",e)},o.Par.prototype.onSubmit=function(e){console.log("PFUploader:","onSubmit",e)},window&&((globalThis||{}).PFUploader=o)},"stj/":function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"h",(function(){return r})),i.d(t,"i",(function(){return a})),i.d(t,"c",(function(){return o})),i.d(t,"d",(function(){return s})),i.d(t,"f",(function(){return l})),i.d(t,"g",(function(){return c})),i.d(t,"e",(function(){return u})),i.d(t,"b",(function(){return d}));var n="designer/toolbarModule/",r="m_setActiveView",a="m_setButtonWidth",o="g_activeView",s="g_buttons",l="g_layerTypes",c="a_onToolbarButtonSelect";function u(e){return n+e}var d={TEXT:"text",COLOR:"color",FONT:"font",TRANSFORM:"transform",POSITION:"position",OUTLINE:"outline",SHADOW:"shadow",CROP:"crop",REMOVE_BACKGROUND:"remove_background",EMBROIDERY_DETAILS:"embroidery_details",PATTERN:"pattern"}},t8U3:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("YBfo"),r={},a={preload:function(e){var t=e.filterTypes,i=e.type,a=e.typeTitle,o=e.typeSubtitle,s=e.typeBaseTitle,l=e.storeInitCallbacks;t&&(n.a.FILTER_TYPES=t),i&&(n.a.setCatalogType(i),a&&n.a.setPageTitle(i,a),o&&n.a.setPageSubtitle(i,o),s&&n.a.setBaseTitle(i,s)),l&&(l.main&&(r.main=l.main),l.products&&(r.products=l.products),l.categories&&(r.categories=l.categories))},getMainStoreInitCallback:function(){return r.main},getCategoriesStoreInitCallback:function(){return r.categories},getProductsStoreInitCallback:function(){return r.products}};(globalThis||{}).PFProductsCatalogPreloader=a},t8qe:function(e,t,i){"use strict";i.d(t,"a",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"h",(function(){return a})),i.d(t,"j",(function(){return o})),i.d(t,"k",(function(){return s})),i.d(t,"g",(function(){return l})),i.d(t,"b",(function(){return c})),i.d(t,"d",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"c",(function(){return h})),i.d(t,"e",(function(){return p}));var n="designer/layerPickerModule/",r="m_setChooserElements",a="m_setActiveView",o="m_setChooserOptionFlag",s="m_setValidationFlag",l="m_resetValidationFlags",c="g_activeChooserElements",u="g_getChooserOptionFlag",d="g_getValidationFlag",h="g_activeChooserView";function p(e){return n+e}},tJty:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({uploadType:"",extensions:["jpg","jpeg","png"],caption:"Upload",buttonClassName:"pf-btn pf-btn-secondary",onSelected:null,onStarted:null,onUploaded:null,onProcessed:null,onProcessingFailed:null,onFail:null,onClick:null,allowMultiple:!1,nodeDropZone:null,buttonTag:"a",maxUploadSize:52428800,uploadCallbackUrl:"upload/callback",uploadDataUrl:"upload/get-upload-data",extraData:{},getStartText:function(){return lang("Starting...")},getProcessingText:function(){return lang("Processing...")},getProgressText:function(e){return lang("Uploading {percent}%").replace("{percent}",e)}});window&&((globalThis||{}).PFComponentsBasicUploadButtonPar=n)},"tw/D":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("7QI8"),r=i("6JZw"),a=i("nF4n"),o=Class({_data:[],getOptionsForPlacement:function(e){for(var t in this._data)if(this._data[t].placement===e)return this._data[t].options;return null},getPlacementFill:function(e){var t=this.getOptionsForPlacement(e);return null!=t&&t.designFillValue?{designFillType:t.designFillType,designFillValue:t.designFillValue,designFillUrls:t.designFillUrls||null,designFillItem:t.designFillItem||null}:null},setPlacementFill:function(e,t,i,n,r){var a=this.getOptionsForPlacement(e);this.setOptionItemFillValues(a,t,i,n,r)},setAllPlacementFill:function(e,t,i,r){for(var a in this._data){var o=this._data[a];n.a.DESIGN_FILL_EXCEPTION_PLACEMENTS.indexOf(o.placement)>-1||this.setOptionItemFillValues(o.options,e,t,i,r)}},setOptionItemFillValues:function(e,t,i,n,r){e&&(t&&i?(e.designFillValue=i,e.designFillType=t):(delete e.designFillValue,delete e.designFillType),n?e.designFillUrls=n:delete e.designFillUrls,r?e.designFillItem=r:delete e.designFillItem)},isSameFillForAllPlacements:function(){var e,t;for(var i in this._data){var r=this._data[i];if(!(n.a.DESIGN_FILL_EXCEPTION_PLACEMENTS.indexOf(r.placement)>-1)){if(i>0&&(e!==r.options.designFillValue||t!==r.options.designFillType))return!1;e=r.options.designFillValue,t=r.options.designFillType}}return!0},hasPlacementWithFill:function(){for(var e in this._data)if(this._data[e].options.designFillValue)return!0;return!1},getData:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];return a.a.O2O(t,this._data),e&&t.forEach((function(e){var t;null==e||(null===(t=e.options)||void 0===t||delete t.designFillUrls)})),t}},r.a);o.fromArray=function(e){e=e||[];var t=new o;return a.a.O2O(t._data,e),t},o.duplicateFrom=function(e){var t=new o;return a.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsPlacementOptions=o)},tx4t:function(e,t,i){"use strict";i.d(t,"a",(function(){return Ad}));var n=i("WLCh"),r=i("mJTt"),a=i("HmCv"),o=i("4Ru2"),s=i("oixo"),l=i("Y6pR"),c=i("rFrQ"),u=i("Gv5l"),d=i("6t3j"),h=i("5sNq"),p=i("Q1Td"),f=i("pnlN"),g=i("aRUU"),m=i("bvdp"),v=i("xeH2"),y=i.n(v),b=i("TC9n"),P=i("oclZ"),C=i("SaSb"),T=i("9eNC"),w=i("nF4n");function I(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return S(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var E=Class({_drawerNode:null,_designerNode:null,_firstFooterNode:null,_tabsNode:null,_par:null,_isOpen:!1,_isAttached:!1,_isSticked:!1,_modal:!1,_secondFooterNode:null,_nodeStickPoint:null,_overrideBackCallback:null,_shouldScroll:null,__construct:function(e){var t,i,n=this;this._par=e,null!==(t=this._par)&&void 0!==t&&null!==(i=t.tabs)&&void 0!==i&&i.node&&(this._par.tabs.node.parentNodeOld=this._par.tabs.node.parentNode,Object.keys(this._par.content).forEach((function(e){return n._par.content[e].parentNodeOld=n._par.content[e].parentNode}))),this.node=tag("div","dynamic-sticky-footer "+(this._showBackdrop()?"dynamic-sticky-footer--backdrop":"")+" row pf-p-0 pf-py-md-16",[this._drawerNode=tag("div","dynamic-sticky-footer__drawer "+(this._isOpen?"dynamic-sticky-footer__drawer--open":"")+" pf-pt-24"),tag("button",{className:"dynamic-sticky-footer__close pf-p-8 pf-bg-light pf-rounded-circle",onclick:this.hideTab.bind(this)},[tag("i","pf-i pf-i-chevron-down pf-i-24")]),tag("div","dynamic-sticky-footer__whiteshadow"),this._firstFooterNode=tag("div","dynamic-sticky-footer__first "+(this._showBackdrop()?"pf-d-none":""),[tag("div","row no-gutters",[this._tabsNode=tag("div","col-8"),tag("div","col-4",[this._ctaButton=tag("button",{className:"pf-btn pf-btn-primary pf-btn-lg pf-btn-block pf-px-0 pf-rounded-0 dynamic-sticky-footer__cta",onclick:this._onCtaClick.bind(this)},["function"==typeof this._par.ctaContent?this._par.ctaContent():this._par.ctaContent])])])]),this._secondFooterWrapNode=tag("div","dynamic-sticky-footer__second-wrap",[this._secondFooterNode=tag("div","dynamic-sticky-footer__second",[this._nodeBack=tag("button",{className:"pf-px-8 pf-py-12 dynamic-sticky-footer__back pf-text-gray",onclick:this._onBackClick.bind(this)},[tag("i","pf-i pf-i-close pf-i-24")]),this._secondFooterNodeHolder=tag("div","container-fluid pf-pl-0")])])]),this.setSecondFooter(this._par.secondFooter)},setSecondFooter:function(e,t){w.a.clearNode(this._secondFooterNodeHolder),e&&(e.append(this._secondFooterNodeHolder),y()(this.node).parents(".modal-body").siblings(".modal-footer").addClass("pf-d-none"),y()(this.node).parents(".order-flow").addClass("mg-designer-modal"),this._findModal()),this._setSecondFooterHeight(e),this._overrideBackCallback="function"==typeof t?t:null,this._par.tabs?w.a.removeClassName(this._nodeBack,"pf-d-none"):w.a.addClassName(this._nodeBack,"pf-d-none"),this._unsubscribeFromEvents(),this._subscribeToEvents(),this.updateFooter(),this._secondFooterWrapNode.addEventListener("DOMNodeInserted",this.updateFooter)},_setSecondFooterHeight:function(e){var t=this._secondFooterNodeHolder.clientHeight>0?this._secondFooterNodeHolder.clientHeight:e&&e.clientHeight>0?e.clientHeight:0;t>0&&(this._secondFooterWrapNode.style.height=t+5+"px",this._secondFooterWrapNode.style.overflow="")},_onCtaClick:function(e){e&&e.preventDefault(),this._showSecondFooter(),"function"==typeof this._par.onCtaClick&&this._par.onCtaClick()},triggerCtaClick:function(){this._onCtaClick()},_onBackClick:function(e){e.preventDefault(),"function"==typeof this._overrideBackCallback&&(this._overrideBackCallback(e),this._overrideBackCallback=null),this._showFirstFooter(),"function"==typeof this._par.onBackClick&&this._par.onBackClick(),T.o(T.e)},_disableFooterExpandMenu:function(){y()(this._secondFooterWrapNode).find(".mg-sticky-footer-secondary-more-menu, .mg-sticky-footer-more-menu").removeClass("pf-d-block")},_showFirstFooter:function(){"function"!=typeof this._overrideBackCallback&&(this._secondFooterWrapNode.style.height="",this._secondFooterWrapNode.style.overflow="",w.a.removeClassName(this.node,"dynamic-sticky-footer--slided"),this._disableFooterExpandMenu())},_showSecondFooter:function(){this._setSecondFooterHeight(),w.a.addClassName(this.node,"dynamic-sticky-footer--slided"),this._disableFooterExpandMenu()},_onOutsideClick:function(e){var t=this,i=this._eventPath(e),n=!this.node.contains(e.target)&&this.node!==e.target&&i.indexOf(this.node)<0,r=i.some((function(e){var i,n;return null===(i=t._par.tabs)||void 0===i||null===(n=i.tabNodes)||void 0===n?void 0:n.includes(e)})),a=i.some((function(e){var t;return null==e||null===(t=e.classList)||void 0===t?void 0:t.contains("dropdown-menu")}));n&&!a?this._showContent(!1):r&&!this._isOpen&&this._onTabClick(e)},_eventPath:function(e){if(e.composedPath)return e.composedPath();if(e.path)return e.path;for(var t=[],i=e.target;i;)t.push(i),i=i.parentElement;return t.indexOf(window)<0&&t.indexOf(document)<0&&t.push(document),t.indexOf(window)<0&&t.push(window),t},_onTabClick:function(e){if(this._showContent(!0),this._stick(),this._shouldScroll){this._shouldScroll=!1;var t=this._getDesignerNode()?this._getDesignerNode(!0).offset().top-100:0;document.body.scrollTop=document.documentElement.scrollTop=t}},showTab:function(){var e,t;y()(this.node).find(".popover, .tooltip").remove();var i=null===(e=this._par.tabs)||void 0===e||null===(t=e.getActiveTab())||void 0===t?void 0:t.customId;i&&this._onTabClick(i)},hideTab:function(e){y()(this.node).find(".popover, .tooltip").remove(),this._showContent(!1),this.updateFooter()},setScrollTop:function(e){y()(".dynamic-sticky-footer__drawer").animate({scrollTop:e},200)},_showContent:function(e){var t,i;if(this._isOpen=!!e,this._isOpen?w.a.addClassName(this._drawerNode,"dynamic-sticky-footer__drawer--open"):w.a.removeClassName(this._drawerNode,"dynamic-sticky-footer__drawer--open"),null!==(t=this._par)&&void 0!==t&&null!==(i=t.designerPar)&&void 0!==i&&i.onFooterVisibilityChange){var n,r,a=(null===(n=this._par.tabs)||void 0===n||null===(r=n.getActiveTab())||void 0===r?void 0:r.customId)||"";this._par.designerPar.onFooterVisibilityChange(this._isOpen,a)}if(this._ctaButton&&this._par.ctaContent){w.a.clearNode(this._ctaButton);var o="function"==typeof this._par.ctaContent?this._par.ctaContent():this._par.ctaContent;o&&o.appendTo(this._ctaButton)}this._isOpen||y()(this._tabsNode).find(".tab.active").removeClass("active"),this._showBackdrop()?(w.a.addClassName(this.node,"dynamic-sticky-footer--backdrop"),w.a.addClassName(this._firstFooterNode,"pf-d-none")):(w.a.removeClassName(this.node,"dynamic-sticky-footer--backdrop"),w.a.removeClassName(this._firstFooterNode,"pf-d-none"))},_showBackdrop:function(){return this._isOpen&&this._par.tabs&&this._par.tabs.getActiveTab()},updateFooter:function(){this._updateFooterShow(),this._updateFooterStick(),this._updateFooterAttach()},_updateFooterShow:function(){this._par.tabs?this._showFirstFooter():this._secondFooterNode&&this._showSecondFooter()},_getDesignerNode:function(e){return this._designerNode&&document.body.contains(this._designerNode)||(this._designerNode=document.getElementById("js--product-push-designer")),e?y()(this._designerNode):this._designerNode},_isMobileIOS:function(){return CSS.supports("(-webkit-touch-callout: none)")},_updateFooterStick:function(){if(this._nodeStickPoint){var e=this._getDesignerNode()?this._getDesignerNode().getBoundingClientRect():{},t=e.top||0,i=e.bottom||0,n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0),r=this._modal?this._modal.innerHeight:n,a=this._par.designerPar.isModalDesigner||this._modal,o=t>r,s=r-i>0,l=o||s&&!a;!a&&w.a.hasClassName(this.node,"dynamic-sticky-footer--sticky")&&(s=r-(i+this.node.getBoundingClientRect().height)>0,l=o||s&&!a),t&&i||(l=!0);var c=!1===this._shouldScroll;if(this._shouldScroll=l&&s&&!a,a||C.a.isWindowBiggerThan(C.a.MD)?w.a.removeClassName(this._nodeStickPoint,"dynamic-sticky-footer-stick-point--spaced"):w.a.addClassName(this._nodeStickPoint,"dynamic-sticky-footer-stick-point--spaced"),l&&!this._isOpen){if(c)return void(this._shouldScroll=null);this._unstick()}else this._stick()}},_updateFooterAttach:function(){C.a.isWindowSmallerThan(C.a.MD)?this._attach():this._detach()},_subscribeToEvents:function(){var e;if(window.addEventListener("resize",this._onResizeThrottle,!1),this._findModal(),this._modal||window.addEventListener("scroll",this._onScrollThrottle,!1),document.body.addEventListener("click",this._onOutsideClick,!1),null!==(e=this._par.tabs)&&void 0!==e&&e.tabNodes){var t,i=I(this._par.tabs.tabNodes);try{for(i.s();!(t=i.n()).done;){t.value.addEventListener("click",this._onTabClick,!1)}}catch(e){i.e(e)}finally{i.f()}}T.q(E.EVENT_UPDATE_MOBILE_FOOTER,this.updateFooter,this)},_onResizeThrottle:function(){P.a.delay("dynamic-sticky-footer-resize",this.updateFooter.bind(this),100)},_onScrollThrottle:function(){P.a.delay("dynamic-sticky-footer-scroll",this._updateFooterStick.bind(this),15)},_unsubscribeFromEvents:function(){window.removeEventListener("resize",this._onResizeThrottle,!1),this._modal||window.removeEventListener("scroll",this._onScrollThrottle,!1),document.body.removeEventListener("click",this._onOutsideClick,!1),T.p(E.EVENT_UPDATE_MOBILE_FOOTER,this.updateFooter)},_attach:function(){var e,t=this;if(!this._isAttached&&this._par.tabs){if(this._isAttached=!0,y()(".pf-zendesk-chat").addClass("pf-d-none"),this._par.tabs.append(this._tabsNode),Object.keys(this._par.content).forEach((function(e){return t._par.content[e].append(t._drawerNode)})),w.a.addClassName(this.node,"dynamic-sticky-footer--attached"),this._showFirstFooter(),null!==(e=this._par.tabs)&&void 0!==e&&e.tabNodes){var i,n=I(this._par.tabs.tabNodes);try{for(n.s();!(i=n.n()).done;){var r=i.value;r.removeEventListener("click",this._onTabClick,!1),r.addEventListener("click",this._onTabClick,!1)}}catch(e){n.e(e)}finally{n.f()}}this._par.tabs.render()}},_detach:function(){var e,t,i=this;this._isAttached&&(this._isAttached=!1,y()(".pf-zendesk-chat").removeClass("pf-d-none"),null!==(e=this._par.tabs)&&void 0!==e&&null!==(t=e.node)&&void 0!==t&&t.parentNodeOld&&this._par.tabs.append(this._par.tabs.node.parentNodeOld),Object.keys(this._par.content).length&&Object.keys(this._par.content).forEach((function(e){var t;return null!==(t=i._par.content[e])&&void 0!==t&&t.parentNodeOld?i._par.content[e].append(i._par.content[e].parentNodeOld):null})),w.a.removeClassName(this.node,"dynamic-sticky-footer--attached"),this._showSecondFooter())},_stick:function(){if(!this._isSticked){this._isSticked=!0,w.a.addClassName(this.node,"dynamic-sticky-footer--sticky");var e=document.getElementById("js--cmmStickyFooter");e&&w.a.addClassName(e,"dynamic-sticky-footer--sticky"),!this._isMobileIOS()&&this._getDesignerNode()&&(this._par.designerPar.isModalDesigner||this._modal)&&(this._getDesignerNode().style.paddingBottom=this.node.getBoundingClientRect().height+"px")}},_unstick:function(){if(this._isSticked){this._isSticked=!1,w.a.removeClassName(this.node,"dynamic-sticky-footer--sticky");var e=document.getElementById("js--cmmStickyFooter");e&&w.a.removeClassName(e,"dynamic-sticky-footer--sticky"),this._showContent(!1),this._getDesignerNode()&&(this._getDesignerNode().style.paddingBottom="0px")}},_findModal:function(){this._modal=y()(this.node).closest(".modal-content").get(0)||null},append:function(e){return this.node.append(e),this._nodeStickPoint&&(w.a.removeNode(this._nodeStickPoint),this._nodeStickPoint=null),this._nodeStickPoint=tag("div","dynamic-sticky-footer-stick-point"),w.a.insertBefore(this._nodeStickPoint,this.node),this._findModal(),setTimeout(T.o,1,b.a.EVENT_SHOULD_RECALCULATE),this}},w.a.Base);E.EVENT_UPDATE_MOBILE_FOOTER="MobileFooter:EVENT_UPDATE_MOBILE_FOOTER",(globalThis||{}).PFMockupGeneratorDesignerDynamicStickyFooter=E;var O=i("o0qH"),k=i("ohgv"),L=i("md/F"),A=i("E17x"),R=i("vUhP"),N=i("5B9T"),D=i("cCrT"),x=i("XLZy"),F=i("GJiQ"),M=i.n(F),B=Class({_colors:[],_paletteColors:null,_replacementColors:null,_callback:null,_image:null,__construct:function(e,t,i){for(var n in this._callback=i,this._colors=[],t)this._colors.push(N.a.hexToRgb(t[n]));this._image=new Image,this._image.onload=this._onImageLoaded,this._image.crossOrigin="Anonymous";var r=new D.a(e);r.query.cache=(new Date).getTime(),this._image.src=r.toString()},_onImageLoaded:function(){var e=document.createElement("canvas");e.width=this._image.width,e.height=this._image.height;var t=e.getContext("2d");t.drawImage(this._image,0,0);for(var i=t.getImageData(0,0,this._image.width,this._image.height),n=i.data,r=0,a=n.length;r<a;r+=4)if(n[r+3]=n[r+3]<127?0:255,0!=n[r+3]){var o=this._getNearestColor(n[r],n[r+1],n[r+2]);o&&(n[r]=o.r,n[r+1]=o.g,n[r+2]=o.b)}t.putImageData(i,0,0),this._callback(e.toDataURL())},_getNearestColor:function(e,t,i){var n,r=1/0;for(var a in this._colors){var o=this._colors[a];if(o){var s=Math.sqrt(Math.pow(e-o.r,2)+Math.pow(t-o.g,2)+Math.pow(i-o.b,2));s<r&&(r=s,n=o)}}return n},colorizeImage:function(e,t,i,n){var r,a=t.map(N.a.Color.fromHex);r=i?a.map((function(e,t){return i[t]?i[t]?N.a.Color.fromHex(i[t]):e:null})):this._paletteColors,this._loadImage(e,this._colorizeOnImageLoaded.bind(this,n,a,r))},_quantizeImage:function(e,t,i,n,r){var a=new M.a(B.RGB_QUANT_DEFAULTS);this._loadImage(e,(function(e){try{a.sample(e);var o=a.palette(!0,!0)}catch(e){return console.error(e),x.a.hide(i),void(r&&r())}var s=o.length;o=(o=(o=o.map((function(e){return N.a.Color.fromArray(e)}))).filter((function(e,t,i){for(var n=0;n<t;n++)if(a.colorDist(e.toArray(),i[n].toArray())<.08)return!1;return!0}))).slice(0,t),n(o,s)}))},quantizeWithPaletteColors:function(e,t,i,n,r,a,o){i=i.map((function(e){return N.a.Color.fromHex(e)})),this._quantizeImage(e,t,r,function(e,t){var r={},o=i,s=this._getRgbPaletteAsArray(o);e.forEach(function(e){var t=B.getNearestColor(e.r,e.g,e.b,s);r[e.toHex()]=o[t].toHex(),this._updateSelectedPalette(i,n,t),s=this._getRgbPaletteAsArray(o)}.bind(this)),a(r,t)}.bind(this),o)},_updateSelectedPalette:function(e,t,i){e.length>i&&(e[i].isContainedBy(t)||t.push(e[i]))},_getRgbPaletteAsArray:function(e){return e.map((function(e){return e.toArray()}))},_loadImage:function(e,t){var i=new D.a(e);i.query.cache="CORS";var n=new Image;n.crossOrigin="Anonymous",n.onload=function(){t(n)},n.src=i.toString()},_colorizeOnImageLoaded:function(e,t,i,n){var r=document.createElement("canvas");r.width=n.width,r.height=n.height;var a=r.getContext("2d");a.drawImage(n,0,0,r.width,r.height);for(var o,s=a.getImageData(0,0,r.width,r.height),l=s.data,c=t.map((function(e){return e.toArray()})),u=(i=i.map((function(e){return e?e.toArray():null})),0),d=l.length;u<d;u+=4)l[u+3]=l[u+3]<127?0:255,0!=l[u+3]&&((o=i[B.getNearestColor(l[u],l[u+1],l[u+2],c)])?(l[u]=o[0],l[u+1]=o[1],l[u+2]=o[2]):l[u+3]=0);a.putImageData(s,0,0),r.toBlob?r.toBlob((function(t){var i=URL.createObjectURL(t);e(i)})):e(r.toDataURL())}});B.RGB_QUANT_DEFAULTS={method:2,boxSize:[8,8],boxPxls:10,colors:64},B.getNearestColor=function(e,t,i,n){for(var r,a,o,s=1/0,l=0;l<n.length;l++)o=n[l],(a=Math.pow(e-o[0],2))>s||(a+=Math.pow(t-o[1],2))>s||(a+=Math.pow(i-o[2],2))<s&&(s=a,r=l);return r},window&&((globalThis||{}).PFUtilsColorMapper=B);var V=i("7h5t"),j=i("gqyd"),U=i("pWIn"),z=i("+I3z"),G=Class({templates:null,onLayerCreated:function(e,t,i){console.error("No callback present for - onLayerCreated",e,t,i)},onLayerRemoved:function(e){console.error("No callback present for - onLayerRemoved",e)},onLayerConfigurationChanged:function(e){console.error("No callback present for - onLayerConfigurationChanged",e)},placementSelector:null,allowCustomizableLayers:null,technique:null,onBackCallback:null,isAdvancedTemplate:null,isAllOver:null,threadColorSelectionLimit:null,embroideryTypePrices:null,getSelectedEmbroideryColors:null,selectedGeneratorVariants:null});window&&((globalThis||{}).PFProductPushTextboxPickerPar=G);var H=i("A8Hf"),q=i("cVO5"),Y=i("7XA3"),W=i("ka4h"),K=Class({embroideryType:null,onEmbroideryTypeChangedCallback:null,labelTooltipText:"",renderRadioInput:null,embroideryTypePrices:null,showExtraPrice:null,nodeFooter:null});window&&((globalThis||{}).PFProductPushEmbroideryTypePickerPar=K);var Z=i("7QI8"),X=i("7pSD"),Q=i("boP+"),J=i("X5Ic"),ee=Class({_current:"",_available:[Z.a.DIGITIZATION_FLAT,Z.a.DIGITIZATION_3D],__construct:function(e){this._par=e;var t=Object(Q.a)();(null==t?void 0:t.productId)===J.a.ID_AS_COLOUR_BUCKET_HAT_1117&&(this._available=this._available.filter((function(e){return e===Z.a.DIGITIZATION_FLAT}))),this._current=this._par.embroideryType,this.node=tag("div","",[tag("h6","",[dlang("generator","Embroidery type"),this._getTooltipNode()]),this._buttons=tag("div")]),this._par.nodeFooter&&tag("div","pf-mt-8",[this._par.nodeFooter]).append(this.node),this._render()},_render:function(){if(w.a.clearNode(this._buttons),this._par.renderRadioInput&&this._current!==Z.a.DIGITIZATION_BOTH)for(var e in this._available){var t=this._available[e],i=this.getEmbroideryTypeMap(this._par.embroideryTypePrices,this._par.showExtraPrice)[t];tag("label",{text:i,className:"regular pf-d-block"},[tag("input",{type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onEmbroideryTypePicked.bind(this,t)})]).append(this._buttons)}else tag("div","",this.getEmbroideryTypeMap(this._par.embroideryTypePrices,this._par.showExtraPrice)[this._current]).append(this._buttons)},_onEmbroideryTypePicked:function(e){this._current=e,this._render(),this._par.onEmbroideryTypeChangedCallback&&this._par.onEmbroideryTypeChangedCallback(e)},isValuePicked:function(){return!!this._current},getValueCount:function(){return this._available.length},_getTooltipNode:function(){if(!this._par.labelTooltipText)return tag();var e=tag("span",{className:"icon-info pf-text-gray option-label-sign",attr:{title:this._par.labelTooltipText}});return $(e).tooltip({html:!0,delay:{hide:450},container:"body"}),e},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()},getEmbroideryTypeMap:function(e){var t={};if(e){var i=e&&e.prices?e.prices:{},n=e&&e.currency?e.currency:"";t[Z.a.DIGITIZATION_FLAT]=dlang("generator","Flat Embroidery"),t[Z.a.DIGITIZATION_3D]=dlang("generator","3D Puff {price}").replace("{price}",this._par.showExtraPrice?"(+"+prettyMoney(i[Z.a.DIGITIZATION_3D],n)+")":""),t[Z.a.DIGITIZATION_BOTH]=dlang("generator","Partial 3D Puff {price}").replace("{price}",this._par.showExtraPrice?"(+"+prettyMoney(i[Z.a.DIGITIZATION_BOTH],n)+")":"")}else t[Z.a.DIGITIZATION_FLAT]=dlang("generator","Flat Embroidery"),t[Z.a.DIGITIZATION_3D]=dlang("generator","3D Puff {price}").replace("{price}",""),t[Z.a.DIGITIZATION_BOTH]=dlang("generator","Partial 3D Puff {price}").replace("{price}","");return t}},X.a);ee.getDefaultEmbroideryType=function(){return Z.a.DIGITIZATION_FLAT},window&&((globalThis||{}).PFProductPushEmbroideryTypePicker=ee);var te=i("PSt6"),ie=i("JQxb"),ne=i("3Dht"),re=i("dqhU"),ae=i("dzpP"),oe=i("bWRx"),se=i("UYP3"),le=i("r4HB"),ce=i("iBt0"),ue=i("+erO"),de=i("GyOi"),he=i("Iarc"),pe=i.n(he),fe=i("o5cA"),ge=i("0Dko"),me=i("wo5H"),_e=i("gQ2J"),ve=i("SBaP"),ye=i("x0He"),be=i("sjGI"),Pe=i("Jkv8");function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function we(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=ke(e);if(t){var r=ke(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ee(this,i)}}function Ee(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?Oe(e):t}function Oe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ke(e){return(ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Re(e,t,"get"))}function Ae(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Re(e,t,"set"),i),i}function Re(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Ne=new WeakMap,De=new WeakMap,xe=new WeakSet,Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(a,e);var t,i,n,r=Se(a);function a(e){var t;return Te(this,a),t=r.call(this),xe.add(Oe(t)),Ne.set(Oe(t),{writable:!0,value:void 0}),De.set(Oe(t),{writable:!0,value:void 0}),t.node=Object(w.b)("div"),t.defaultFont=be.a.isJp()?Object(Pe.getPFCanvasFonts)().FONTS["noto-sans-jp"]:Object(Pe.getPFCanvasFonts)().FONTS["open-sans-b"],Ae(Oe(t),Ne,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Oe(t),xe,Me).call(Oe(t)),t}return t=a,(i=[{key:"setFont",value:function(e){Le(this,De).setDataProp("font",e)}},{key:"getDefaultFont",value:function(){return this.defaultFont}},{key:"focusFont",value:function(){Le(this,De).getRef("fontChooser").focusFont()}},{key:"destroy",value:function(){var e;null===(e=Le(this,De))||void 0===e||e.destroy(),Ae(this,De,null)}}])&&we(t.prototype,i),n&&we(t,n),a}(ve.a);function Me(){var e=this,t=new ye.b;t.components={"font-chooser":function(){return i.e(213).then(i.bind(null,"cyTl"))}},t.template='\n            <font-chooser \n                ref="fontChooser"\n                :font="font"\n                :technique="technique"\n                @on-change="emitEvent(\'onChange\', $event)"\n                @init-font="emitEvent(\'onInitFont\', $event)"\n            />\n        ',t.initialData={font:Le(this,Ne).font,technique:Le(this,Ne).technique},t.emitEvent=function(t,i){"onInitFont"===t&&(e.defaultFont=i),Le(e,Ne)[t]&&Le(e,Ne)[t](i)},Ae(this,De,new ye.a(t)),Le(this,De).append(this.node)}var Be=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Te(this,e),this.font=t.font,this.technique=t.technique,this.onChange=t.onChange},Ve=i("9Vz/"),je=i("mrkb"),Ue=i("rDYR"),ze=i("EQTS"),Ge=i("v217"),He=Class({_par:null,_state:{isExistingLayer:!1,textboxLayer:null,isFocused:!1,nodeTextStyle:null,changeTimeout:null,_forceDisableCustomizer:!1,canAddNewLayers:!0,isCharLimitEnabled:!1,position:null,originalPosition:null},_canCustomizeCheckbox:null,_validator:null,_techniqueMemory:null,_inactiveBtnClass:"pf-text-light",nodeError:null,fallbackFont:"open-sans-b",_canAccessNewToolbar:!1,__construct:function(e){var t;this._par=e,this._subscribeToTemplateEvents(),this._fontChooserPar=new Be({technique:this._par.technique,onChange:this._onFontChanged}),this._fontChooser=new Fe(this._fontChooserPar),this._state.textboxLayer=this._getNewLayer(),this._validator=new te.a,this._validator.isCharLimitEnabled=this._state.isCharLimitEnabled,this._validator.setActiveLayer(this._state.textboxLayer),this._techniqueMemory=new O.a(null===(t=Object(Q.a)())||void 0===t?void 0:t.productId),this.node=tag("div","textbox-picker pf-mb-md-160 pf-mb-lg-128"),this._loadRequiredFont(this._state.textboxLayer.font,this.render),this._canAccessNewToolbar=Object(je.a)()},_render:function(){this._renderTextboxPicker(),this._state.textboxLayer.isCustomizable&&this._setCustomizableSliderValue(this._state.textboxLayer,!1),this.nodeError=tag("div","alert alert-danger text-center pf-d-none pf-p-12 pf-mt-16",lang("Please add text!")).append(this.node)},_renderTextboxPicker:function(){this._state._forceDisableCustomizer=this._getSelectedPlacementId()===Z.a.TYPE_LABEL_INSIDE;var e=this._state.textboxLayer;if(this._fontChooserPar.font=e.font,this._fontChooser=new Fe(this._fontChooserPar),this._engravingStylePicker=new le.a(e.engravingStyle,this._onEngravingStyleChanged),this._isTechniqueEmbroidery()){var t=new K;t.embroideryType=e.embroideryType,t.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),t.embroideryTypePrices=this._par.embroideryTypePrices,this._embroideryTypePicker=new ee(t)}else this._embroideryTypePicker=null;var i=!this._state.canAddNewLayers&&!this._state.isExistingLayer;this._textarea=tag("textarea",{attr:{placeholder:dlang("dashboard","Start typing here")},value:e.text,prop:{oninput:this._onTextChanged,onkeydown:this._onTextKeyDown,disabled:i},className:i?"disabled":"",style:{width:"100%",height:"90px",maxWidth:"100%",minWidth:"100%",minHeight:"90px"}}),this._nodeTemplateInfo=new ie.a;var n=Object(Q.a)();n&&e.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo();var r=$(".modal-open").length?"pf-mb-16":"pf-my-16";tag("div","",[this._par.onBackCallback?tag("a",{className:"pf-link-block "+r,onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]):"",this._nodeTemplateInfo.node,this._embroideryTypePicker?tag("hr"):"",this._embroideryTypePicker?this._embroideryTypePicker:"",this._embroideryTypePicker?tag("hr"):"",tag("div","pf-my-8",[tag("div","pf-d-inline",[this._nodeCustomizableLabel=new Y.a]),this._nodeTextareaTitle=tag("h6","pf-d-inline")]),this._textarea]).append(this.node),this._state.textboxLayer.isCustomizable&&this._allowCustomizableLayers()?this._nodeCustomizableLabel.show():this._nodeCustomizableLabel.hide(),this._updateTextareaTitle(),Object(H.a)(this._textarea),this._state.isFocused&&(this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length)),this._state.nodeTextStyle=tag("div",this._state.isExistingLayer?"":"pf-d-none").append(this.node),this._nodeTextAlign=tag("div","pf-mb-24 "+(this._canDisplayTextAlignInput(this._state.textboxLayer.text)?"":"pf-d-none"),[tag("h6",null,[dlang("generator","Align text")]),this._nodeTextAlignButtons=tag("div",null,[tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_LEFT),data:{alignment:U.a.ALIGN_LEFT}},[tag("i","pf-i pf-i-format-align-left pf-i-24")]),tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_CENTER),data:{alignment:U.a.ALIGN_CENTER}},[tag("i","pf-i pf-i-format-align-center pf-i-24")]),tag("button",{className:"text-picker__align-btn btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_RIGHT),data:{alignment:U.a.ALIGN_RIGHT}},[tag("i","pf-i pf-i-format-align-right pf-i-24")])])]).append(this._state.nodeTextStyle),this._updateTextAlignButtonStates(),tag("div","pf-mb-24",[this._fontChooser]).append(this._state.nodeTextStyle),null!=n&&n.isJewelry()?tag("div","pf-mb-16",[tag("h6","",dlang("generator","Choose engraving style")),this._engravingStylePicker]).append(this._state.nodeTextStyle):tag("div","pf-mb-16",[this._getColorDropdownHtml()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-8",[this._nodeTextSize=this._getTextSizeInput(),this._nodeLetterSpacing=this._getLetterSpacingInput()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-16",[this._nodeLineHeight=this._getLineHeightInput(),this._rotationInput=this._getRotationInput(),this._arcAngleInput=this._isTechniqueEmbroidery()?"":this._getArcAngleInput()]).append(this._state.nodeTextStyle),this.renderCustomizableCheckbox()},_getColorDropdownHtml:function(){var e=this,t=this._isTechniqueEmbroidery(),i=new ze.b({activeValue:{type:Ge.l,value:this._state.textboxLayer.getDefaultColor()},showColorInHeader:!0,onActiveColorChanged:this._onColorChanged.bind(this),title:dlang("generator","Text color"),tabConfig:[{id:Ge.l,name:dlang("generator","Colors"),getElements:function(){return Object.values(e._getColors())}},{id:Ge.i,type:Ge.k,loadElements:Ve.f,getElements:Ve.c}],getAreaWidthForGraphics:function(){return e._par.templates.getSelectedTemplate().width},getDpiForGraphics:function(){var t,i=e._getSelectedPlacementId(),n=null===(t=e._par.selectedGeneratorVariants())||void 0===t?void 0:t.generatorVariants;return e._par.templates.getDpiForTextGraphic(i,n)}});if(t){var n;if(i.tabConfig=[{id:Ge.l,name:dlang("generator","Colors"),getElements:function(){return Object.values(e._getColors())}}],i.hideRgb=!0,i.showColorInHeader=!1,i.getAreaWidthForGraphics=null,i.getMinDpiForGraphics=null,this._par.getSelectedEmbroideryColors)i.highlightedColors=this._par.getSelectedEmbroideryColors(),i.highlightErrorMessage=(null===(n=i.highlightedColors)||void 0===n?void 0:n.length)>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit):null;return this._colorDropdown=new ze.a(i),this._colorDropdown}this._colorDropdown=new ze.a(i);var r=this._state.textboxLayer;return this._strokeDropdown=new ze.a(new ze.b({activeValue:{type:Ge.l,value:r.strokeColor},showColorInHeader:!0,hasNoneColor:!0,onActiveColorChanged:this._onStrokeColorChanged.bind(this),title:dlang("generator","Outline"),footerRangeInputOneParams:{title:dlang("generator","Weight"),maxValue:.6,onChanged:this._onValueChanged.bind(this,He.STROKE_WEIGHT)},footerRangeInputOneValue:this._state.textboxLayer.strokeWeight,footerRangeInputTwoParams:{title:dlang("generator","Offset"),maxValue:.2,onChanged:this._onValueChanged.bind(this,He.STROKE_OFFSET)},footerRangeInputTwoValue:this._state.textboxLayer.strokeOffset})),this._shadowDropdown=new ze.a(new ze.b({activeValue:{type:Ge.l,value:r.shadowColor},showColorInHeader:!0,hasNoneColor:!0,onActiveColorChanged:this._onShadowColorChanged.bind(this),title:dlang("generator","Shadow"),footerRangeInputOneParams:{title:dlang("generator","Distance"),maxValue:1,onChanged:this._onValueChanged.bind(this,He.SHADOW_DISTANCE)},footerRangeInputOneValue:this._state.textboxLayer.strokeWeight,footerRangeInputTwoParams:{title:dlang("generator","Angle"),maxValue:359.9,fractionDigits:1,incrementStep:.1,onChanged:this._onValueChanged.bind(this,He.SHADOW_ANGLE)},footerRangeInputTwoValue:this._state.textboxLayer.strokeOffset})),tag("div","textbox-colors row",[tag("div","col-4 textbox-colors__text",[this._colorDropdown]),tag("div","col-4 textbox-colors__stroke",[this._strokeDropdown]),tag("div","col-4 textbox-colors__shadow",[this._shadowDropdown])])},_updateTextStylingOptions:function(){var e;if(!this._canAccessNewToolbar){this._state.isExistingLayer?w.a.removeClassName(this._state.nodeTextStyle,"pf-d-none"):w.a.addClassName(this._state.nodeTextStyle,"pf-d-none"),this._state._forceDisableCustomizer=this._getSelectedPlacementId()===Z.a.TYPE_LABEL_INSIDE,Object(H.a)(this._textarea);var t=this._state.textboxLayer;if(t){var i=Object(Q.a)();if(null==i||!i.isJewelry()){if(this._isTechniqueEmbroidery()){var n,r=this._par.getSelectedEmbroideryColors(),a=(null==r?void 0:r.length)>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit):null;null===(n=this._colorDropdown)||void 0===n||n.updateHighlightedColors(r,a)}var o,s;if(t.hasFillImage())null===(o=this._colorDropdown)||void 0===o||o.updateActiveColor(Object(Ue.b)(t.colorGraphic));else null===(s=this._colorDropdown)||void 0===s||s.updateActiveColor({type:Ge.l,value:t.color});this._isTechniqueEmbroidery()||(this._strokeDropdown.updateActiveColor({type:Ge.l,value:t.strokeColor||null}),this._strokeDropdown.updateInputOne(t.strokeWeight||0),this._strokeDropdown.updateInputTwo(t.strokeOffset||0),this._shadowDropdown.updateActiveColor({type:Ge.l,value:t.shadowColor||null}),this._shadowDropdown.updateInputOne(t.shadowDistance||0),this._shadowDropdown.updateInputTwo(t.shadowAngle||0))}this._fontChooser.setFont(t.font),this._engravingStylePicker.setStyle(t.engravingStyle,!0),this._state.textboxLayer.isCustomizable&&this._allowCustomizableLayers()?this._nodeCustomizableLabel.show():this._nodeCustomizableLabel.hide();var l=!this._state.canAddNewLayers&&!this._state.isExistingLayer;this._textarea.value=t.text,l?(w.a.addClassName(this._textarea,"disabled"),this._textarea.disabled=!0):(w.a.removeClassName(this._textarea,"disabled"),this._textarea.disabled=!1),this._showHideTextAlignInput(),this._includesNewLines(t.text)?this._nodeLineHeight.show():this._nodeLineHeight.hide(),this._nodeTextSize.setValue(t.size),this._nodeLetterSpacing.setValue(t.letterSpacing),this._nodeLineHeight.setValue(t.lineHeight),null!==(e=this._arcAngleInput)&&void 0!==e&&e.setValue&&this._arcAngleInput.setValue(t.arcAngle),this._setRotationValue(t.position.rotation),this._nodeTemplateInfo=new ie.a,i&&t.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),this._updateTextareaTitle(),this._updateTextAlignButtonStates(),this.renderCustomizableCheckbox()}}},updateEmbroideryColors:function(){var e,t=this;null===(e=this._colorDropdown)||void 0===e||e.updateTabConfig([{id:Ge.l,name:dlang("generator","Colors"),getElements:function(){return Object.values(t._getColors())}}])},_setRotationValue:function(e){e=e>180?e-360:e,this._rotationInput.setValue(e)},_onValueChanged:function(e,t){if(this._state&&this._state.textboxLayer){t=parseFloat(t);var i=(e===He.STROKE_OFFSET||e===He.STROKE_WEIGHT)&&!this._state.textboxLayer.strokeColor,n=(e===He.SHADOW_DISTANCE||e===He.SHADOW_ANGLE)&&!this._state.textboxLayer.shadowColor;i||n||(e===He.STROKE_WEIGHT&&0===t&&(this._state.textboxLayer.strokeOffset=0,this._strokeDropdown.updateInputTwo(this._state.textboxLayer.strokeOffset)),this._state.textboxLayer[e]=t,this._onConfigurationChanged(!0))}},_getTextSizeInput:function(){var e,t=new ae.a;return t.title=dlang("dashboard","Text size"),t.value=this._state.textboxLayer.size,t.defaultValue=.2,t.minValue=.2,t.maxValue=100,t.incrementStep=.1,null!==(e=Object(Q.a)())&&void 0!==e&&e.isJewelry()?(t.defaultValue=.12,t.minValue=.12,t.incrementStep=.01):[J.a.TECHNIQUE_PROMO,me.n].includes(this._par.technique)&&(t.defaultValue=me.k,t.minValue=1,t.maxValue=null,t.incrementStep=1),t.onValueChanged=this._onFontSizeChanged,new oe.a(t)},_getLetterSpacingInput:function(){var e=new ae.a;e.title=dlang("dashboard","Letter spacing"),e.value=this._state.textboxLayer.letterSpacing,e.defaultValue=-.5,e.minValue=-.5,e.maxValue=10;var t=Object(Q.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=0,e.minValue=0,e.maxValue=1),e.incrementStep=.1,e.onValueChanged=this._onLetterSpacingChanged,new oe.a(e)},_getLineHeightInput:function(){var e=new ae.a;e.title=dlang("dashboard","Line height"),e.value=this._state.textboxLayer.lineHeight,e.isVisible=this._includesNewLines(this._state.textboxLayer.text),e.defaultValue=.2,e.minValue=.2,e.maxValue=100;var t=Object(Q.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=1,e.minValue=1),e.incrementStep=.1,e.onValueChanged=this._onLineHeightChanged,new oe.a(e)},_getRotationInput:function(){var e,t=new ne.a;return t.title=dlang("dashboard","Rotate"),t.className="col-sm-12",t.value=this._state.textboxLayer.position.rotation,t.minValue=-180,t.maxValue=180,t.incrementStep=1,t.fractionDigits=0,t.hasNumberInput=!0,null!==(e=Object(Q.a)())&&void 0!==e&&e.isJewelry()&&(t.isVisible=!1),t.onValueChanged=this._onRotationChanged,t.onSlide=this._onRotationChanged,new re.a(t)},_getArcAngleInput:function(){if(!!window.navigator&&/MSIE|Trident|Edge/.test(window.navigator.userAgent)){var e=dlang("generator","Text Arc isn't supported by Internet Explorer and Microsoft Edge. Please use a different browser."),t=new ce.a(e,"warning");return tag("div","col-sm-12",[tag("div","pf-bold pf-mb-8",dlang("generator","Arc")),t])}var i=new ne.a;return i.title=dlang("generator","Arc"),i.className="col-sm-12",i.value=this._state.textboxLayer.arcAngle,i.minValue=-360,i.maxValue=360,i.incrementStep=1,i.fractionDigits=0,i.hasNumberInput=!0,i.onValueChanged=this._onArcAngleChanged,i.onSlide=this._onArcAngleChanged,new re.a(i)},_updateTextareaTitle:function(){this._state.textboxLayer!==this._validator._activeLayer&&this._validator.setActiveLayer(this._state.textboxLayer);var e=this._validator.getCharLimit()-this._textarea.value.length,t="text-picker__title-limit float-right";e||(t+=" "+t+"--reached"),w.a.clearNode(this._nodeTextareaTitle);var i="";this._isTechniqueEmbroidery()&&(i=tag("span",{className:"glyphicon glyphicon-info-sign",style:{verticalAlign:0,marginLeft:"4px"},attr:{title:dlang("dashboard",dlang("generator","Only for flat embroidery"))}})),tag("span",null,[dlang("generator","Write your text"),i,this._state.isCharLimitEnabled?tag("span",t,nlang("(%d character left)","(%d characters left)",e)):""]).append(this._nodeTextareaTitle),i&&$(i).tooltip({container:"body"})},_updateRotationInput:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t instanceof re.a||this._setRotationValue(e.position.rotation)},_onLayerRemovedExternally:function(e,t){!this._unsubscribeTemplateEventsIfNeeded()&&this._state.textboxLayer&&t.uniqueId===this._state.textboxLayer.uniqueId&&this.resetText()},resetText:function(e){this._state.textboxLayer=null,this._state.isExistingLayer=!1,this._state.isFocused=!0,this._textarea.value="",e&&(this._rememberLayerState=!1),this._updateTextStylingOptions(),this._focus()},_focus:function(){this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length)},editTextboxLayer:function(e){if(!this._unsubscribeTemplateEventsIfNeeded()){var t=e instanceof V.a;e&&t&&(this._state.textboxLayer=e.getOriginalClone(),this._state.isExistingLayer=!0,this._state.isFocused=!0,this._updateTextStylingOptions(),this._fontChooser.focusFont(),this._setCustomizableSliderValue(e,!1))}},_onLayerPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&(this._setCustomizableSliderValue(t,!0),!i instanceof re.a&&this._setRotationValue(t.position.rotation),i!==this&&this._state.textboxLayer))for(var n in e){var r=e[n],a=r.getLayerIndex(this._state.textboxLayer);if(a>-1){var o=r.layers[a].getOriginalClone(),s=!o.isConfigurationSame(this._state.textboxLayer);return this._state.textboxLayer=o,i instanceof se.a&&(this._state.isFocused=!1),void(s&&this._updateTextStylingOptions())}}},_onLayerTextChangedExternally:function(e,t){!this._unsubscribeTemplateEventsIfNeeded()&&t!==this&&e instanceof V.a&&(e.parentLayerUniqueId||(this._state.textboxLayer=e),this._state.isFocused=!1,this._updateTextStylingOptions())},_getNewLayer:function(){var e=new V.a;e.font=this._fontChooser.getDefaultFont();var t=this._getSelectedPlacementId();if(e.size=fe.a.getDefaultFontSize(t,this._par.technique),e.color=e.getDefaultColor(),e.alignment=U.a.ALIGN_CENTER,e.originalPosition=new ue.a,e.position=e.originalPosition.getClone(),Object(Q.c)()&&Object(_e.b)(e),this._isTechniqueEmbroidery()&&(e.embroideryType=ee.getDefaultEmbroideryType()),this._rememberLayerState){var i=Object(Q.a)();if(this._isTechniqueEmbroidery()||null!=i&&i.isJewelry()||(e.strokeColor=this._state.textboxLayer.strokeColor,e.strokeWeight=this._state.textboxLayer.strokeWeight,e.strokeOffset=this._state.textboxLayer.strokeOffset,e.shadowColor=this._state.textboxLayer.shadowColor,e.shadowDistance=this._state.textboxLayer.shadowDistance,e.shadowAngle=this._state.textboxLayer.shadowAngle),null!=i&&i.isJewelry())e.engravingStyle=this._engravingStylePicker.getStyle()||e.engravingStyle;else{var n=this._colorDropdown.getColor();n instanceof de.a?(e.colorGraphic=n,e.color=""):(e.color=n,e.colorGraphic=null)}!this._isTechniqueEmbroidery()&&this._arcAngleInput&&(e.arcAngle=Number(this._arcAngleInput.value)),e.alignment=this._getTextAlignButtonState(),e.size=this._nodeTextSize.value,e.letterSpacing=this._nodeLetterSpacing.value,e.lineHeight=this._nodeLineHeight.value,e.position=this._state.position.getClone(),e.originalPosition=this._state.originalPosition.getClone()}return e},_onColorChanged:function(e){var t=e.type,i=e.value,n=e.item,r=void 0===n?null:n;e.urls;t===Z.a.DESIGN_FILL_TYPE_GRAPHIC?(this._state.textboxLayer.colorGraphic=r,this._state.textboxLayer.color=""):(this._state.textboxLayer.color=i,this._state.textboxLayer.colorGraphic=null),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1)},_onStrokeColorChanged:function(e){var t=e.type,i=e.value;t!==Z.a.DESIGN_FILL_TYPE_COLOR&&null!==i||(!this._state.textboxLayer.strokeColor&&i?(this._state.textboxLayer.strokeWeight=He.STROKE_WEIGHT_DEFAULT,this._state.textboxLayer.strokeOffset=He.STROKE_OFFSET_DEFAULT):i||(this._state.textboxLayer.strokeWeight=0,this._state.textboxLayer.strokeOffset=0),this._state.textboxLayer.strokeColor=i,this._strokeDropdown.updateInputOne(this._state.textboxLayer.strokeWeight),this._strokeDropdown.updateInputTwo(this._state.textboxLayer.strokeOffset),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1))},_onShadowColorChanged:function(e){var t=e.type,i=e.value;t!==Z.a.DESIGN_FILL_TYPE_COLOR&&null!==i||(!this._state.textboxLayer.shadowColor&&i?(this._state.textboxLayer.shadowDistance=He.SHADOW_DISTANCE_DEFAULT,this._state.textboxLayer.shadowAngle=He.SHADOW_ANGLE_DEFAULT):i||(this._state.textboxLayer.shadowDistance=0,this._state.textboxLayer.shadowAngle=0),this._state.textboxLayer.shadowColor=i,this._shadowDropdown.updateInputOne(this._state.textboxLayer.shadowDistance),this._shadowDropdown.updateInputTwo(this._state.textboxLayer.shadowAngle),this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textboxLayer,!1))},_onEngravingStyleChanged:function(e){this._state.textboxLayer.engravingStyle=e,this._onConfigurationChanged(!0)},_deleteLayer:function(){this._rememberLayerState=!0,this._state.position=this._state.textboxLayer.position.getClone(),this._state.originalPosition=this._state.textboxLayer.originalPosition.getClone(),this._par.onLayerRemoved&&this._par.onLayerRemoved(this._state.textboxLayer),this.resetText()},_onTextAligned:function(e){this._state.textboxLayer.alignment=e,this._onConfigurationChanged(!0),this._updateTextAlignButtonStates()},_onTextKeyDown:function(e){e.stopPropagation()},_onTextChanged:function(e){e.stopPropagation();var t=e.target.value.trim();if(this._state.isFocused=!0,this._state.textboxLayer||(this._state.textboxLayer=this._getNewLayer()),t!==this._state.textboxLayer.text){if(""===t)return this._nodeTemplateInfo.clearGuidelineInfo(),this._deleteLayer(),Object(A.b)()&&clearTimeout(this._state.changeTimeout),void(this._par.onBackCallback&&this._par.onBackCallback());if(this._validator.setText(t),!this._validator.isTextValid())return this._onTextChangedAfter(this._validator.getValidText()),void this._updateTextStylingOptions();this._updateTextareaTitle(),Object(Q.c)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),Object(A.b)()?(clearTimeout(this._state.changeTimeout),this._state.changeTimeout=setTimeout(function(){this._loadRequiredFont(this._state.textboxLayer.font,this._onTextChangedAfter.bind(this,t))}.bind(this),200)):this._loadRequiredFont(this._state.textboxLayer.font,this._onTextChangedAfter.bind(this,t)),this.hideError()}},_onTextChangedAfter:function(e){this._canDisplayTextAlignInput(e)?w.a.removeClassName(this._nodeTextAlign,"pf-d-none"):w.a.addClassName(this._nodeTextAlign,"pf-d-none"),this._includesNewLines(e)?this._nodeLineHeight.show():this._nodeLineHeight.hide(),this._state.textboxLayer.text=e,this._state.textboxLayer.hasMultipleLines=this._includesNewLines(e),this._state.textboxLayer.resizeToPercent=null,this._onConfigurationChanged(!0)},_onConfigurationChanged:function(e){var t=this;if(e||this._updateTextStylingOptions(),w.a.removeClassName(this._state.nodeTextStyle,"hidden"),this._validator.setActiveLayer(this._state.textboxLayer),this._state.isExistingLayer){var i=this._createdDateTime+He.DELAY_CONFIG_CHANGED_EXEC;Date.now()>=i?this._par.onLayerConfigurationChanged(this._state.textboxLayer):setTimeout((function(){t._par.onLayerConfigurationChanged(t._state.textboxLayer)}),i-Date.now())}else if(this._state.textboxLayer&&(this._state.isExistingLayer=!0,this._par.onLayerCreated)){var n=this._rememberLayerState&&this._state.textboxLayer.position.width;this._par.onLayerCreated(this._state.textboxLayer,this._rememberLayerState,n),this._createdDateTime=Date.now(),this._rememberLayerState=!1,this._fontChooser.focusFont()}},_onFontSizeChanged:function(e){this._state.textboxLayer.size=e,this._onConfigurationChanged(!0)},_onFontChanged:function(e){this._loadRequiredFont(e,function(){this._state.textboxLayer.font=e,this._updateTextareaTitle(),this._onConfigurationChanged(!0)}.bind(this,e))},setEnabled:function(e){return this._state.canAddNewLayers=e,this},render:function(){var e,t,i,n=null===(e=this._fontChooser)||void 0===e?void 0:e.node.childNodes[0].hasChildNodes(),r=(null===(t=this._colorDropdown)||void 0===t?void 0:t.node.childNodes[0].hasChildNodes())||(null===(i=Object(Q.a)())||void 0===i?void 0:i.isJewelry());return this._textarea?n&&r?this._updateTextStylingOptions():(w.a.clearNode(this.node),this._render()):this._render(),this},renderCustomizableCheckbox:function(){if(!this._allowCustomizableLayers())return!1;this._canCustomizeCheckbox&&w.a.removeNode(this._canCustomizeCheckbox.node);var e=new q.a;e.isChecked=this._state.textboxLayer.isCustomizable,e.onChange=this._changeIsCustomizable,e.showSlider=!0,e.onSliderChange=this._onTextLayerWidthChange,e.layerType=V.a.TYPE,this._canCustomizeCheckbox=new W.a(e),this._state.nodeTextStyle&&this._canCustomizeCheckbox.append(this._state.nodeTextStyle),this._canCustomizeCheckbox.setSliderValue(this._state.textboxLayer.resizeToPercent)},_includesNewLines:function(e){return e.trim().split("\n").length>1},_hasArcAngleSet:function(){return!!this._state.textboxLayer.arcAngle},_canDisplayTextAlignInput:function(e){return!this._hasArcAngleSet()&&this._includesNewLines(e)},_loadRequiredFont:function(e,t){return pe.a.loadTTFFont(e.fontKey,e["path-ttf"],"",t)},_onLineHeightChanged:function(e){this._state.textboxLayer.lineHeight=e,this._onConfigurationChanged(!0)},_onRotationChanged:function(e){this._state.textboxLayer.position.rotation=parseFloat(e),this._onConfigurationChanged(!0)},_onArcAngleChanged:function(e){this._state.textboxLayer.arcAngle=parseFloat(e),this._state.textboxLayer.alignment!==U.a.ALIGN_CENTER&&this._onTextAligned(U.a.ALIGN_CENTER),this._onConfigurationChanged(!0),this._showHideTextAlignInput()},_showHideTextAlignInput:function(){this._canDisplayTextAlignInput(this._state.textboxLayer.text)?w.a.removeClassName(this._nodeTextAlign,"pf-d-none"):w.a.addClassName(this._nodeTextAlign,"pf-d-none")},_onLetterSpacingChanged:function(e){this._state.textboxLayer.letterSpacing=e,this._onConfigurationChanged(!0)},_changeIsCustomizable:function(){this._state.textboxLayer.isCustomizable=!this._state.textboxLayer.isCustomizable,this._onConfigurationChanged()},_onTextLayerWidthChange:function(e){this._state.textboxLayer.setWidthInPercent(e),this._onConfigurationChanged(!0)},_setCustomizableSliderValue:function(e,t){if(this._allowCustomizableLayers()&&this._canCustomizeCheckbox){var i=e.position.width;if(e.resizeToPercent){var n=e.position.areaWidth*e.resizeToPercent/100;(i=e.position.width>n?e.position.width:n)>e.originalPosition.areaWidth&&(i=e.originalPosition.areaWidth)}var r=100*i/e.originalPosition.areaWidth,a=Math.round(r);this._canCustomizeCheckbox.setSliderValue(a),t&&this._state.textboxLayer&&(this._state.textboxLayer.resizeToPercent=a)}},_allowCustomizableLayers:function(){return!this._state._forceDisableCustomizer&&this._par.allowCustomizableLayers()},_getColors:function(){return Object(Ue.c)(this._isTechniqueEmbroidery(),this._getSelectedPlacementId(),!!this._par.isAllOver&&this._par.isAllOver(),!0)},_subscribeToTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnTemplatePositionsChangedListener(this._onLayerPositionsChangedExternally).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerRemovedListener(this._onLayerRemovedExternally).addOnLayerConfigurationChanged(this._onLayerTextChangedExternally)},unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerPositionsChangedExternally).unsubscribe(this._updateRotationInput).unsubscribe(this._onLayerRemovedExternally).unsubscribe(this._onLayerTextChangedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},_updateTextAlignButtonStates:function(){for(var e=this._nodeTextAlignButtons.children,t=0;t<e.length;t++)w.a.addClassName(e[t],this._inactiveBtnClass),e[t].dataset.alignment===this._state.textboxLayer.alignment&&w.a.removeClassName(e[t],this._inactiveBtnClass)},_getTextAlignButtonState:function(){for(var e=this._nodeTextAlignButtons.children,t=0;t<e.length;t++)if(e[t].className.indexOf(this._inactiveBtnClass)<0)return e[t].dataset.alignment;return U.a.ALIGN_CENTER},hideError:function hideError(){w.a.addClassName(this.nodeError,"pf-d-none")},showError:function showError(){w.a.removeClassName(this.nodeError,"pf-d-none")},_isTechniqueEmbroidery:function(){return this._par.technique===J.a.TECHNIQUE_EMBROIDERY},_getSelectedPlacementId:function(){return this._par.placementSelector?this._par.placementSelector.getSelectedPlacementId():null}},w.a.Base);He.STROKE_OFFSET="strokeOffset",He.STROKE_WEIGHT="strokeWeight",He.SHADOW_ANGLE="shadowAngle",He.SHADOW_DISTANCE="shadowDistance",He.STROKE_OFFSET_DEFAULT=0,He.STROKE_WEIGHT_DEFAULT=.2,He.SHADOW_ANGLE_DEFAULT=45,He.SHADOW_DISTANCE_DEFAULT=.25,He.DELAY_CONFIG_CHANGED_EXEC=500,window&&((globalThis||{}).PFProductPushTextboxPicker=He);var qe=Class({_par:null,_state:{defaultFont:function(){return be.a.isJp()?Object(Pe.getPFCanvasFonts)().FONTS["noto-sans-jp"]:Object(Pe.getPFCanvasFonts)().FONTS["open-sans-b"]},isExistingLayer:!1,textLayer:null,isFocused:!1,nodeTextStyle:null,changeTimeout:null,_forceDisableCustomizer:!1,canAddNewLayers:!0,isCharLimitEnabled:!1},_canCustomizeCheckbox:null,_validator:null,_techniqueMemory:null,nodeError:null,__construct:function(e){var t;this._par=e,this._subscribeToTemplateEvents(),this._state.textLayer=this._getNewLayer(),this._validator=new te.a,this._validator.isCharLimitEnabled=this._state.isCharLimitEnabled,this._validator.setActiveLayer(this._state.textLayer),this._techniqueMemory=new O.a(null===(t=Object(Q.a)())||void 0===t?void 0:t.productId),this.node=tag("div","text-picker"),this._loadRequiredFont(this._state.textLayer.font,this._render)},_render:function(){w.a.clearNode(this.node),this._renderTextPicker(),this._state.textLayer.isCustomizable&&this._setCustomizableSliderValue(this._state.textLayer,!1),this.nodeError=tag("div","alert alert-danger text-center hidden pf-p-12 pf-mt-16",lang("Please add text!")).append(this.node)},_renderTextPicker:function(){var e=this;this._state._forceDisableCustomizer=this._getSelectedPlacementId()===Z.a.TYPE_LABEL_INSIDE;var t,i=this._state.textLayer,n=this._isPlacementEmbroidery(),r=new ze.b({activeValue:{type:Ge.l,value:i.color||this._state.textLayer.getDefaultColor()},showColorInHeader:!n,onActiveColorChanged:this._onColorChanged.bind(this),title:n?dlang("generator","Choose thread color"):dlang("generator","Choose text color"),tabConfig:[{id:Ge.l,name:dlang("generator","Colors"),getElements:function(){return Object.values(e._getColors())}}],hideRgb:n});this._par.getSelectedEmbroideryColors&&(r.highlightedColors=this._par.getSelectedEmbroideryColors(),r.highlightErrorMessage=(null===(t=r.highlightedColors)||void 0===t?void 0:t.length)>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit):null);if(this._colorDropdown=new ze.a(r),this._engravingStylePicker=new le.a(i.engravingStyle,this._onEngravingStyleChanged),n){var a=new K;a.embroideryType=i.embroideryType,a.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),a.embroideryTypePrices=this._par.embroideryTypePrices,this._embroideryTypePicker=new ee(a)}else this._embroideryTypePicker=null;var o=!this._state.canAddNewLayers&&!this._state.isExistingLayer,s=this._state.textLayer.isCustomizable&&this._allowCustomizableLayers();this._textarea=tag("textarea",{attr:{placeholder:dlang("dashboard","Start typing here")},value:i.text,prop:{onkeyup:this._onTextChanged,onkeydown:this._onTextKeyDown,disabled:o},className:o?"disabled":"",style:{width:"100%",height:"90px",maxWidth:"100%",minWidth:"100%",minHeight:"90px"}}),this._nodeTemplateInfo=new ie.a;var l=Object(Q.a)();l&&i.text.length&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),tag("div","",[this._par.onBackCallback?tag("a",{className:"pf-link-block pf-mb-8",onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("Back to design tools"))]):"",this._nodeTemplateInfo.node,this._embroideryTypePicker?tag("hr"):"",this._embroideryTypePicker?this._embroideryTypePicker:"",this._embroideryTypePicker?tag("hr"):"",tag("div","pf-my-8",[tag("div","pf-d-inline",[s?new Y.a:""]),this._nodeTextareaTitle=tag("h6","pf-d-inline")]),this._textarea]).append(this.node),this._updateTextareaTitle(),Object(H.a)(this._textarea),this._state.isFocused&&(this._textarea.focus(),this._textarea.setSelectionRange(this._textarea.value.length,this._textarea.value.length)),this._state.nodeTextStyle=tag("div",this._state.isExistingLayer?"":"pf-d-none").append(this.node),this._nodeTextAlign=tag("div","pf-mb-24 "+(this._includesNewLines(this._state.textLayer.text)?"":"hidden"),[tag("h6",null,[dlang("generator","Align text")]),this._nodeTextAlignButtons=tag("div",null,[tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-left btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_LEFT),data:{alignment:U.a.ALIGN_LEFT}}),tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-center btn btn-empty pf-mr-16 pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_CENTER),data:{alignment:U.a.ALIGN_CENTER}}),tag("button",{className:"text-picker__align-btn text-picker__glyphicon text-picker__glyphicon--squared glyphicon glyphicon-align-right btn btn-empty pf-px-8",onclick:this._onTextAligned.bind(this,U.a.ALIGN_RIGHT),data:{alignment:U.a.ALIGN_RIGHT}})])]).append(this._state.nodeTextStyle),this._updateTextAlignButtonStates(),null!=l&&l.isJewelry()?tag("div","pf-mb-16",[tag("h6","",dlang("generator","Choose engraving style")),this._engravingStylePicker]).append(this._state.nodeTextStyle):tag("div","pf-mb-16",[this._colorDropdown]).append(this._state.nodeTextStyle),tag("div","row",[this._getTextSizeInput(),this._getLetterSpacingInput()]).append(this._state.nodeTextStyle),tag("div","row pf-mb-16",[this._nodeLineHeight=this._getLineHeightInput(),this._rotationInput=this._getRotationInput()]).append(this._state.nodeTextStyle),this.renderCustomizableCheckbox()},_getTextSizeInput:function(){var e,t=new ae.a;return t.title=dlang("dashboard","Text size"),t.value=this._state.textLayer.size,t.defaultValue=.2,t.minValue=.2,t.incrementStep=.1,null!==(e=Object(Q.a)())&&void 0!==e&&e.isJewelry()&&(t.defaultValue=.12,t.minValue=.12,t.incrementStep=.01),t.onValueChanged=this._onFontSizeChanged,new oe.a(t)},_getLetterSpacingInput:function(){var e=new ae.a;e.title=dlang("dashboard","Letter spacing"),e.value=this._state.textLayer.letterSpacing,e.defaultValue=-1,e.minValue=-1;var t=Object(Q.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=0,e.minValue=0,e.maxValue=1),e.incrementStep=.1,e.onValueChanged=this._onLetterSpacingChanged,new oe.a(e)},_getLineHeightInput:function(){var e=new ae.a;e.title=dlang("dashboard","Line height"),e.value=this._state.textLayer.lineHeight,e.isVisible=this._includesNewLines(this._state.textLayer.text),e.defaultValue=.2,e.minValue=.2;var t=Object(Q.a)();return t&&(this._techniqueMemory.isEmbroidery(t.type)||t.isJewelry())&&(e.defaultValue=1,e.minValue=1),e.incrementStep=.1,e.onValueChanged=this._onLineHeightChanged,new oe.a(e)},_getRotationInput:function(){var e,t=new ae.a;return t.title=dlang("dashboard","Rotate"),t.value=this._state.textLayer.position.rotation,t.minValue=-359,t.maxValue=359,null!==(e=Object(Q.a)())&&void 0!==e&&e.isJewelry()&&(t.isVisible=!1),t.onValueChanged=this._onRotationChanged,new oe.a(t)},_updateTextareaTitle:function(){this._state.textLayer!==this._validator._activeLayer&&this._validator.setActiveLayer(this._state.textLayer);var e=this._validator.getCharLimit()-this._textarea.value.length,t="text-picker__title-limit float-right";e||(t+=" "+t+"--reached"),w.a.clearNode(this._nodeTextareaTitle);var i="";this._isPlacementEmbroidery()&&(i=tag("span",{className:"glyphicon glyphicon-info-sign",style:{verticalAlign:0,marginLeft:"4px"},attr:{title:dlang("dashboard",dlang("generator","Only for flat embroidery"))}})),tag("span",null,[dlang("generator","Write your text"),i,this._state.isCharLimitEnabled?tag("span",t,nlang("(%d character left)","(%d characters left)",e)):""]).append(this._nodeTextareaTitle),i&&$(i).tooltip({container:"body"})},_updateRotationInput:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t instanceof oe.a||this._rotationInput.setValue(e.position.rotation)},_onLayerRemovedExternally:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t.uniqueId===this._state.textLayer.uniqueId&&this.resetText()},resetText:function(){this._state.textLayer=this._getNewLayer(),this._state.isExistingLayer=!1,this._state.isFocused=!0,this._render()},editTextLayer:function(e){this._unsubscribeTemplateEventsIfNeeded()||e&&e.isTextLayer()&&(this._state.textLayer=e.getOriginalClone(),this._state.isExistingLayer=!0,this._state.isFocused=!0,this._render(),this._setCustomizableSliderValue(e,!1))},_onLayerPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&(this._setCustomizableSliderValue(t,!0),!i instanceof oe.a&&this._rotationInput.setValue(t.position.rotation),i!==this))for(var n in e){var r=e[n],a=r.getLayerIndex(this._state.textLayer);if(a>-1){var o=r.layers[a].getOriginalClone(),s=!o.isConfigurationSame(this._state.textLayer);return this._state.textLayer=o,i instanceof se.a&&(this._state.isFocused=!1),void(s&&this._render())}}},_getNewLayer:function(e){var t=new U.a;t.font=this._state.defaultFont();var i=this._getSelectedPlacementId();return t.size=fe.a.getDefaultFontSize(i),t.color=t.getDefaultColor(),t.alignment=U.a.ALIGN_CENTER,t.originalPosition=new ue.a,t.position=t.originalPosition.getClone(),this._isPlacementEmbroidery()&&(t.embroideryType=ee.getDefaultEmbroideryType()),e&&this._state.textLayer&&(t.font=this._state.textLayer.font,t.color=this._state.textLayer.color,t.alignment=this._state.textLayer.alignment,t.size=this._state.textLayer.size),t},_onColorChanged:function(e){var t=e.type,i=e.value;t===Z.a.DESIGN_FILL_TYPE_COLOR&&(this._state.textLayer.color=i,this._onConfigurationChanged(!0),this._par.templates.getChangeListener().notifyLayerColorsChanged(this._getSelectedPlacementId(),this._state.textLayer,!1))},_onEngravingStyleChanged:function(e){this._state.textLayer.engravingStyle=e,this._onConfigurationChanged(!0)},_createNewTextInput:function(){this._state.textLayer=this._getNewLayer(!0),this._state.isExistingLayer=!1,this._render()},_deleteLayer:function(){this._par.onLayerRemoved&&this._par.onLayerRemoved(this._state.textLayer),this._createNewTextInput()},_onTextAligned:function(e){this._state.textLayer.alignment=e,this._onConfigurationChanged(!0),this._updateTextAlignButtonStates()},_onTextKeyDown:function(e){e.stopPropagation()},_onTextChanged:function(e){e.stopPropagation();var t=e.target.value.trim();if(this._state.isFocused=!0,t!==this._state.textLayer.text){if(""===t)return this._nodeTemplateInfo.clearGuidelineInfo(),this._deleteLayer(),Object(A.b)()&&clearTimeout(this._state.changeTimeout),void(this._par.onBackCallback&&this._par.onBackCallback());if(this._validator.setText(t),!this._validator.isTextValid())return this._onTextChangedAfter(this._validator.getValidText()),void this._render();this._updateTextareaTitle(),Object(Q.c)()&&!this._par.isAdvancedTemplate()&&this._nodeTemplateInfo.renderGuidelineInfo(),Object(A.b)()?(clearTimeout(this._state.changeTimeout),this._state.changeTimeout=setTimeout(function(){this._loadRequiredFont(this._state.textLayer.font,this._onTextChangedAfter.bind(this,t))}.bind(this),200)):this._loadRequiredFont(this._state.textLayer.font,this._onTextChangedAfter.bind(this,t)),this.hideError()}},_onTextChangedAfter:function(e){this._includesNewLines(e)?(w.a.removeClassName(this._nodeTextAlign,"hidden"),this._nodeLineHeight.show()):(w.a.addClassName(this._nodeTextAlign,"hidden"),this._nodeLineHeight.hide()),this._state.textLayer.text=e,this._state.textLayer.hasMultipleLines=this._includesNewLines(e),this._state.textLayer.resizeToPercent=null,this._onConfigurationChanged(!0)},_onConfigurationChanged:function(e){e||this._render(),w.a.removeClassName(this._state.nodeTextStyle,"hidden"),this._validator.setActiveLayer(this._state.textLayer),this._state.isExistingLayer?this._par.onLayerConfigurationChanged(this._state.textLayer):(this._state.isExistingLayer=!0,this._par.onLayerCreated&&this._par.onLayerCreated(this._state.textLayer))},_onFontSizeChanged:function(e){this._state.textLayer.size=e,this._onConfigurationChanged(!0)},_onFontChanged:function(e){var t=this;this._loadRequiredFont(e,(function(){t._state.textLayer.font=e,t._updateTextareaTitle(),t._onConfigurationChanged(!0)}))},enabled:function(e){return this._state.canAddNewLayers=e,this},render:function(){return this._render(),this},renderCustomizableCheckbox:function(){if(!this._allowCustomizableLayers())return!1;this._canCustomizeCheckbox&&w.a.removeNode(this._canCustomizeCheckbox.node);var e=new q.a;e.isChecked=this._state.textLayer.isCustomizable,e.onChange=this._changeIsCustomizable,e.showSlider=!0,e.onSliderChange=this._onTextLayerWidthChange,e.layerType=U.a.TYPE,this._canCustomizeCheckbox=new W.a(e),this._state.nodeTextStyle&&this._canCustomizeCheckbox.append(this._state.nodeTextStyle),this._canCustomizeCheckbox.setSliderValue(this._state.textLayer.resizeToPercent)},_includesNewLines:function(e){return e.trim().split("\n").length>1},_loadRequiredFont:function(e,t){return Object(Pe.loadJSFontFrontend)(e.fontKey,t)},_onLineHeightChanged:function(e){this._state.textLayer.lineHeight=e,this._onConfigurationChanged(!0)},_onRotationChanged:function(e){this._state.textLayer.position.rotation=e,this._onConfigurationChanged(!0)},_onLetterSpacingChanged:function(e){this._state.textLayer.letterSpacing=e,this._onConfigurationChanged(!0)},_changeIsCustomizable:function(){this._state.textLayer.isCustomizable=!this._state.textLayer.isCustomizable,this._onConfigurationChanged()},_onTextLayerWidthChange:function(e){this._state.textLayer.setWidthInPercent(e),this._onConfigurationChanged(!0)},_setCustomizableSliderValue:function(e,t){if(this._allowCustomizableLayers()&&this._canCustomizeCheckbox){var i=100*e.position.width/e.originalPosition.areaWidth,n=Math.round(i);this._canCustomizeCheckbox.setSliderValue(n),t&&(this._state.textLayer.resizeToPercent=n)}},_allowCustomizableLayers:function(){return!this._state._forceDisableCustomizer&&this._par.allowCustomizableLayers()},_getColors:function(){return Object(Ue.c)(this._isPlacementEmbroidery(),this._getSelectedPlacementId(),!!this._par.isAllOver&&this._par.isAllOver(),!0)},_subscribeToTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnTemplatePositionsChangedListener(this._onLayerPositionsChangedExternally).addOnLayerRotatedListener(this._updateRotationInput).addOnLayerRemovedListener(this._onLayerRemovedExternally)},unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onLayerPositionsChangedExternally).unsubscribe(this._updateRotationInput).unsubscribe(this._onLayerRemovedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},_updateTextAlignButtonStates:function(){for(var e=this._nodeTextAlignButtons.getElementsByClassName("text-picker__align-btn"),t=0;t<e.length;t++)w.a.addClassName(e[t],"text-picker__glyphicon--muted"),e[t].dataset.alignment===this._state.textLayer.alignment&&w.a.removeClassName(e[t],"text-picker__glyphicon--muted")},hideError:function hideError(){w.a.addClassName(this.nodeError,"pf-d-none")},showError:function showError(){w.a.removeClassName(this.nodeError,"pf-d-none")},_isPlacementEmbroidery:function(){var e=this._par.placementSelector&&this._par.placementSelector.getSelectedPlacement();return e&&e.technique===J.a.TECHNIQUE_EMBROIDERY},_getSelectedPlacementId:function(){return this._par.placementSelector?this._par.placementSelector.getSelectedPlacementId():null}},w.a.Base);qe.hasFontLoaded=function(e){return Object(Pe.getPFCanvasFonts)().LOADED_JS_FONTS.hasOwnProperty(e)},window&&((globalThis||{}).PFProductPushTextPicker=qe);var Ye=Class({templates:null,onLayerRemoved:null});window&&((globalThis||{}).PFProductPushPatternPickerPar=Ye);var We=i("tTqN"),Ke=i.n(We),Ze=i("qqZP"),Xe=i("vUaG"),Qe=i("YvQZ"),$e=i("0nZy"),Je=Class({_par:null,_nodeSpacing:null,_nodeTypeButtons:null,__construct:function(e){this._par=e,this._nodeTypeButtons={},this.node=tag("div","",[tag("div","pf-ui-body pf-bold pf-text-dark pf-my-12",dlang("generator","Pattern type")),this._getTypeButton(null,"generator/pattern-none.svg",""),this._getTypeButton(Ke.a.PATTERN_TYPE.BLOCK,"generator/pattern-block.svg",dclang("generator","pattern type","Block")),this._getTypeButton(Ke.a.PATTERN_TYPE.HALFDROP,"generator/pattern-halfdrop.svg",dclang("generator","pattern type","Half drop")),this._getTypeButton(Ke.a.PATTERN_TYPE.BRICK,"generator/pattern-brick.svg",dclang("generator","pattern type","Brick")),this._reflectTypeButton=this._getTypeButton(Ke.a.PATTERN_TYPE.REFLECT,"generator/pattern-reflect.svg",dclang("generator","pattern type","Reflect")),this._getTypeButton(Ke.a.PATTERN_TYPE.HORIZONTAL,"generator/pattern-horizontal.svg",dclang("generator","pattern type","Horizontal line")),this._getTypeButton(Ke.a.PATTERN_TYPE.VERTICAL,"generator/pattern-vertical.svg",dclang("generator","pattern type","Vertical line")),this._nodeSpacing=this._getSpacingNode()]),this._subscribeTemplateEvents()},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onActiveLayerChangedPattern).unsubscribe(this._onLayerConfigurationChangedPattern).unsubscribe(this._onLayerRemovedPattern)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnActiveLayerChanged(this._onActiveLayerChangedPattern).addOnLayerConfigurationChanged(this._onLayerConfigurationChangedPattern).addOnLayerRemovedListener(this._onLayerRemovedPattern)},resubscribeToEvents:function(){Object(A.a)(this.node)&&this._par.templates&&(this._unsubscribeTemplateEvents(),this._subscribeTemplateEvents(),this._render())},_getTypeButton:function(e,t,i){return this._nodeTypeButtons[e]=tag("button",{className:"pf-btn-outline pf-bg-white pf-border pf-border-dark pf-rounded pf-hover-shadow pf-p-8 pf-mr-8 pf-mb-8",onclick:this._onTypeClick.bind(this,e),attr:{"data-toggle":"tooltip","data-placement":"top",title:i},style:{opacity:.4,outline:"none"}},[tag("img",{className:"pf-d-inline-block",src:PF.ASSETS_URL+t,style:{width:"24px",height:"24px"}})])},_getSpacingNode:function(){var e=new ne.a;return e.title=dlang("generator","Spacing"),e.className="pf-my-12",e.value=Ke.a.PATTERN_SPACING.DEFAULT,e.minValue=Ke.a.PATTERN_SPACING.MIN,e.maxValue=Ke.a.PATTERN_SPACING.MAX,e.fractionDigits=2,e.incrementStep=Ke.a.PATTERN_SPACING.STEP,e.hasNumberInput=!0,e.onValueChanged=this._onSpacingChange,e.onSlide=this._onSpacingChange,new re.a(e)},_render:function(){var e=this._par.templates.getActiveLayer();if(e){var t=e&&e.patternType||null,i=e&&e.patternSpacing||Ke.a.PATTERN_SPACING.DEFAULT;this._reflectTypeButton.style.display=this._par.templates.isCropInAnyVariant()||e.isCropState?"none":"",this._setType(t),this._nodeSpacing.setValue(i),t?this._nodeSpacing.show():this._nodeSpacing.hide()}},_onTypeClick:function(e,t){t.preventDefault(),this._setType(e);var i=this._par.templates.getActiveLayer();i&&i.patternType!==e&&(i.patternType=e,e?this._nodeSpacing.show():(this._nodeSpacing.setValue(0),i.patternSpacing=0,this._nodeSpacing.hide()),this._notifyLayerPatternChanged(i))},_setType:function(e){for(var t in this._nodeTypeButtons)this._nodeTypeButtons.hasOwnProperty(t)&&(this._nodeTypeButtons[t].style.opacity=.4,this._nodeTypeButtons[t].classList.remove("active"));this._nodeTypeButtons[e]&&(this._nodeTypeButtons[e].style.opacity=1,this._nodeTypeButtons[e].classList.add("active"))},_onSpacingChange:function(e){this._nodeSpacing.value!==String(e)&&this._nodeSpacing.swetValue(e);var t=this._par.templates.getActiveLayer();t&&t.patternSpacing!==e&&(t.patternSpacing=e,this._notifyLayerPatternChanged(t))},_onActiveLayerChangedPattern:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t===this||this._render()},_onLayerConfigurationChangedPattern:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t===this||this._render()},_notifyLayerPatternChanged:function(e){e instanceof z.a||e instanceof Xe.a?this._par.templates.updateImageLayer(e,this):e instanceof j.a?this._par.templates.updateClipartLayer(e,this):e instanceof Ze.a?this._par.templates.updateLicensedAssetLayer(e,this):console.log("Cannot update layer pattern settings!",e)},_onLayerRemovedPattern:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()&&!$e.m.includes(Object(Qe.a)())){var i=this._par.templates.getActiveLayer();(!i||t&&t.uniqueId===i.uniqueId)&&this._par.onLayerRemoved&&this._par.onLayerRemoved(t)}},append:function(e){return this.node.append(e),$(this.node).find('[data-toggle="tooltip"]').tooltip({container:document.body}),this}},w.a.Base);window&&((globalThis||{}).PFProductPushPatternPicker=Je);var et=Class({placements:[],templates:null,activePlacementId:"",onPicked:null,conflictCalculator:null,fileCountLimit:null,productOptionsPlacements:null,productOptions:null,includeSamples:!1,searchTag:"",productOptionsValues:null,onProductOptionsChanged:null,onColorChanged:null,onCustomizableChanged:null,onDuplicate:null,enableRemoveBg:null,onRequestRemoveBg:null,allowCustomizableLayers:!1,layerPickerChooser:null,nodeTemplateTypePicker:null,nodeVideoTutorial:null,onItemEdit:null,isAdvancedTemplateLoaded:null,isAllOver:null,hasAtLeastOneDesignFill:null,validateAddingLayer:null,getSelectedMockupVariant:null,showPatternPicker:null,placementSelector:null,isMockupGeneratorMode:!1,openQTagPopoverLayerId:null,onSelectQualityTag:null,hideQualityNode:!1,showSizesInPx:!1,designFillColorPicker:null});window&&((globalThis||{}).PFProductPushLayerPickerPar=et);var tt=i("86cz"),it=Class({product:null,isProductPickable:!0,isSync:!1,onProductPickedCallback:function(){console.error("No 'onProductPickedCallback' provided")}});window&&((globalThis||{}).PFProductPushInlineProductPickerPar=it);var nt=i("S7uB"),rt=i("uV1j"),at=i("rDi1"),ot=i("c4GQ"),st=i("QLN8"),lt=i("xXdn"),ct=i("kT3P"),ut=i("oi7h"),dt=i("DUxB"),ht=i("yDyG"),pt=i("97Au"),ft=Class({_par:null,__construct:function(e){if(this._par=e,this.node=Object(w.a)({tag:"div",className:"inline-product-picker clearfix pf-mb-16"}),this._par.isProductPickable){var t=new pt.a.Par;t.nodeClass="inline-product-picker",t.modalDialogClass="modal-lg inline-product-picker__modal",this._modal=new pt.a(t),this._initSearchBox()}this._render()},_render:function(){w.a.clearNode(this.node);var e=Object(Q.a)();Object(w.a)({tag:"div",els:[{tag:"h6",className:"inline-product-picker__title pf-p-0 pf-mt-0 margin-bottom-5",text:e.getFullTitle()},R.a.createPeriodicPriceDiscountAnnouncement(e.priceRange,!0,"pf-mb-16 pf-mt-8"),this._getReviewNode(),{tag:"div",className:"pf-mt-32",els:[{tag:"a",els:[{tag:"span",className:"pf-ui-caption",text:lang("Product info, pricing & guidelines"),onclick:this._popupForMockupGen.bind(this,"info")},{tag:"i",className:"pf-link pf-link-block pf-d-inline-block pf-ml-8 pf-i pf-i-open-in-new",onclick:this._popupForMockupGen.bind(this,"info")}]}]},this._par.isProductPickable&&{tag:"div",els:[{tag:"a",text:lang("Change product"),className:"pf-btn pf-btn-secondary pf-mt-16",onclick:this._onChangeProduct}]}]}).append(this.node)},_popupForMockupGen:function(e,t){var i=Object(Q.a)();$(t.target).closest("a").css("pointer-events","none");var n=new ot.a({product:i,activeTab:e,showReviews:!0}).getModal();$(n._node).on("hidden.bs.modal",(function(){$(t.target).closest("a").css("pointer-events","all")}))},_initSearchBox:function(){var e={};e.type=ht.a.SEARCH_TYPE_PRODUCTS_GENERATOR,e.onSelected=this._onItemPicked,e.onEnterPressed=this._onItemPicked,e.placeholder=lang("Search productsâ¦"),e.showAllResults=this._onShowAllResultsClicked,this._searchBox=new ht.a(e)},_onShowAllResultsClicked:function(e){var t=this._getShowAllResultsBreadcrumbs(e),i=Object(w.a)({tag:"div",els:[t]}),n=new nt.a;n.isForGenerator=!0,n.categoryId=0,n.search=e,n.isSync=this._par.isSync,n.callback=this._onProductPicked.bind(this),new rt.a(n).append(i),this._modal.setContent(i),this._modal.setHeaderContent(this.getModalHeader(lang("Choose a product")))},_getShowAllResultsBreadcrumbs:function(e){var t=new dt.a;return t.add({title:lang("All categories"),onclick:this._setCategoryPickerContent.bind(this,0)}),t.add({title:lang('Search results for "{searchValue}"').replace("{searchValue}",tag("span",{text:e}).innerHTML)}),t},_onChangeProduct:function(){this._setCategoryPickerContent(),this._modal.show()},_onCategoryPicked:function(e){var t=this._getCategoryBreadcrumbs(e),i=Object(w.a)({tag:"div",els:[t]}),n=new nt.a;n.isForGenerator=!0,n.categoryId=e,n.callback=this._onProductPicked.bind(this),n.isSync=this._par.isSync,new rt.a(n).append(i),this._modal.setContent(i),this._modal.setHeaderContent(this.getModalHeader(lang("Choose a product")))},_onItemPicked:function(e){this._onProductPicked(J.a.fromArray(e))},_onProductPicked:function(e){this._modal&&this._modal.remove(),this._par.onProductPickedCallback&&this._par.onProductPickedCallback(e)},_getCategoryBreadcrumbs:function(e){var t=new dt.a,i=(new st.a).getPath(e);for(var n in t.add({title:lang("All categories"),onclick:this._setCategoryPickerContent.bind(this,0)}),i)t.add({title:i[n].name,onclick:this._setCategoryPickerContent.bind(this,i[n].categoryId)});return t},_setCategoryPickerContent:function(e){if(window.PFProductsCatalog&&ut.a.hasAccess){var t=new lt.a;t.onProductChoose=this._onProductPicked.bind(this),t.isMockupGenerator=!0,t.enableCategoriesSidebar=!0,t.isClean=!0,this._modal.setContent(ct.a.getInstance(t))}else{var i=new at.a.Par;i.callback=this._onCategoryPicked.bind(this),i.pickForGenerator=!0,void 0!==e&&(i.categoryId=e);var n=new at.a(i);this._modal.setContent(n)}this._modal.setHeaderContent(this.getModalHeader(lang("Choose a category")))},_getReviewNode:function(){var e,t=Object(Q.a)();if(null===(e=t.reviewRating)||void 0===e||!e.reviewCount)return!1;for(var i=[],n=1;n<=5;n++){var r=t.reviewRating.rating,a="";parseInt(r)!==r&&Math.round(r)===n?a="-half":n>r&&(a="-empty"),i.push({tag:"span",className:"icon-star"+a+" star-rating__star"})}var o=t.reviewRating.reviewCount;return Object(w.a)({tag:"a",className:"pf-link pf-ui-caption pf-mt-4",onclick:this._popupForMockupGen.bind(this,"reviews"),data:{toggle:"tooltip",placement:"bottom"},els:[{tag:"div",className:"star-rating__stars star-rating__stars--inline",els:i},nlang("%d Review","%d Reviews",o)]})},getModalHeader:function(e){return Object(w.a)({tag:"div",els:[{tag:"button",type:"button",className:"close",prop:{onclick:this._removeModal},els:[{tag:"span",text:"Ã",attr:{"aria-hidden":"true"}},{tag:"span",className:"sr-only",text:lang("Close")}]},Object(w.a)({tag:"h4",els:[e||{tag:"span",prop:{innerHTML:"&nbsp;"}}],className:"pf-m-0 pull-left"}),{tag:"div",className:"search-box",els:[this._searchBox]},{tag:"div",className:"clearfix"}]})},_removeModal:function(){this._modal&&this._modal.remove()}},w.a.Base);window&&((globalThis||{}).PFProductPushInlineProductPicker=ft);var gt=Class({templateChangeListener:null,getFileColorMapperPalette:null,currentPlacementId:null,threadColorSelectionLimit:6,embroideryTypePrices:null,onEmbroideryTypeChangedCallback:null,shouldShowExtraPriceForEmbroideryType:null,getSelectedEmbroideryColors:null,onLayerRemoved:function(e){console.error("No callback present for - onLayerRemoved",e)}});window&&((globalThis||{}).PFProductPushEmbroideryImagePickerPar=gt);var mt=Class({colors:null,getFileColorMapperPalette:null,onColorsChanged:null,threadColorSelectionLimit:null,disableDropdown:null,getSelectedEmbroideryColors:null});window&&((globalThis||{}).PFProductPushColorMapperPar=mt);var _t=Class({colors:{},onColorsChanged:null,__construct:function(e){this._par=e,this.onColorsChanged=e.onColorsChanged,this.colors=e.colors;var t=[];for(var i in this.colors)t.push(this._createColorDropdown(i,this.colors[i]));this.node=tag("div","color-mapper",t)},_createColorDropdown:function(e,t){var i,n=this,r=new ze.b({tabConfig:[{id:Ge.l,getElements:this._par.getFileColorMapperPalette}],activeValue:{type:Ge.l,value:t},isDisabled:this._par.disableDropdown,onActiveColorChanged:function(t){var i=t.type,r=t.value;i!==Z.a.DESIGN_FILL_TYPE_COLOR&&null!==r||(n.colors[e]=r,n.onColorsChanged&&n.onColorsChanged(n.colors))},hasNoneColor:!0,hideRgb:!0,disabledColors:!this._hasAtLeastTwoThreadsSelected()&&t?[null]:[]});this._par.getSelectedEmbroideryColors&&(r.highlightedColors=this._par.getSelectedEmbroideryColors(),r.highlightErrorMessage=(null===(i=r.highlightedColors)||void 0===i?void 0:i.length)>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS?dlang("generator","You can choose up to {number} colors").replace("{number}",this._par.threadColorSelectionLimit):null);var a=new ze.a(r),o=tag("div","swatches swatches--huge",[tag("span",{className:"pf-rounded swatches__item pf-border-transparent",style:{backgroundColor:e}})]);return tag("div","row pf-mt-8",[tag("div","col-1 col-md-2 col-xl-1 pf-pt-4",[o]),tag("div","col-1 col-md-2 col-xl-1 pf-m-auto",[tag("i","color-mapper__map-icon pf-i pf-i-arrow-right pf-i-18 pf-text-gray")]),tag("div","col-10 col-md-8 col-xl-10 pf-pl-0",[a])])},_hasAtLeastTwoThreadsSelected:function(){var e=0,t=Object.values(this.colors);for(var i in t)if(t[i]&&e++,e>1)return!0;return!1}},w.a.Base);window&&((globalThis||{}).PFProductPushColorMapper=_t);var vt=Class({_par:null,_imageLayer:null,_currentPlacementId:null,__construct:function(e){this._par=e,this._currentPlacementId=this._par.currentPlacementId,this.node=tag("div","image-picker"),this._imageLayer=this._getNewLayer(),this._subscribeToTemplateEvents()},_render:function(e,t){w.a.clearNode(this.node),this._currentPlacementId=e;var i=this._imageLayer;if(this._par.getFileColorMapperPalette){var n=new K;n.embroideryType=i.embroideryType,n.labelTooltipText=lang("We digitize each file to a format that supports embroidery and charge a one-time fee of $6.50 for each embroidery type. You can reuse a digitized file for the same embroidery type with other orders at no additional cost."),n.renderRadioInput=this._currentPlacementId===Z.a.TYPE_EMBROIDERY_FRONT,n.embroideryTypePrices=this._par.embroideryTypePrices,n.onEmbroideryTypeChangedCallback=this._par.onEmbroideryTypeChangedCallback,n.showExtraPrice=this._par.shouldShowExtraPriceForEmbroideryType(i),n.nodeFooter=t?tag("div","alert alert-warning",dlang("generator","We have updated our embroidery system. To continue editing, please re-upload your design.")):null,this._embroideryTypePicker=new ee(n),this._embroideryTypePicker.append(this.node),tag("hr").append(this.node);var r=new mt;r.colors=Object.assign({},i.overrideColors),r.getFileColorMapperPalette=this._par.getFileColorMapperPalette,r.onColorsChanged=this._onColorMappingChanged.bind(this,i),r.disableDropdown=t,r.getSelectedEmbroideryColors=this._par.getSelectedEmbroideryColors,r.threadColorSelectionLimit=this._par.threadColorSelectionLimit,this._colorMapper=new _t(r),this._renderColorMapper()}},_renderColorMapper:function(){this._nodeColorMapper&&w.a.removeNode(this._nodeColorMapper),this._nodeColorMapper=tag("div","pf-mb-24",[tag("h6","",[dlang("generator","Choose thread colors (max {maxThreadColors})").replace("{maxThreadColors}",this._par.threadColorSelectionLimit)]),this._colorMapper]).append(this.node)},_subscribeToTemplateEvents:function(){this._par.templateChangeListener&&this._par.templateChangeListener.addOnLayerRemovedListener(this._onLayerRemovedExternally)},editImageLayer:function(e,t){if(!this._unsubscribeTemplateEventsIfNeeded()){var i=e instanceof z.a,n=e instanceof Ze.a;if(e&&i&&!n){this._imageLayer=e.getOriginalClone();var r=!(!this._imageLayer.isEmbroideryAfterMigration||this._imageLayer.embroideryType!==Z.a.DIGITIZATION_BOTH);this._render(t,r)}}},_onColorMappingChanged:function(e,t){e.overrideColors=t,this._par.templateChangeListener.notifyLayerColorsChanged(this._currentPlacementId,e,t,!1)},_onLayerRemovedExternally:function(e,t){this._unsubscribeTemplateEventsIfNeeded()||t.uniqueId===this._imageLayer.uniqueId&&this._par.onLayerRemoved(t)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this.unsubscribeTemplateEvents(),!0)},unsubscribeTemplateEvents:function(){this._par.templateChangeListener&&this._par.templateChangeListener.unsubscribe(this._onLayerRemovedExternally)},_getNewLayer:function(){return new z.a}},w.a.Base);window&&((globalThis||{}).PFProductPushEmbroideryImagePicker=vt);var yt=i("TOJy");function bt(e){return(bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ct(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Pt(a,n,r,o,s,"next",e)}function s(e){Pt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Tt(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ot(e);if(t){var r=Ot(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return St(this,i)}}function St(e,t){return!t||"object"!==bt(t)&&"function"!=typeof t?Et(e):t}function Et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ot(e){return(Ot=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,At(e,t,"get"))}function Lt(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,At(e,t,"set"),i),i}function At(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Rt=new WeakMap,Nt=new WeakMap,Dt=new WeakMap,xt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(s,e);var t,i,n,r,a,o=It(s);function s(e){var t,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r=o.call(this),Rt.set(Et(r),{writable:!0,value:null}),Nt.set(Et(r),{writable:!0,value:null}),Dt.set(Et(r),{writable:!0,value:null}),Lt(Et(r),Dt,e),Lt(Et(r),Rt,kt(Et(r),Dt).item),r.node=Object(w.b)("div","col-2 pf-px-4 clipart-picker__col",[Lt(Et(r),Nt,Object(w.b)("div",{className:"clipart-picker__item pf-p-4 pf-mb-12 pf-position-relative pf-rounded pf-hover-shadow",onclick:r._onClick.bind(Et(r)),prop:{ondragstart:r._clipartDragStart.bind(Et(r)),ondragend:r._clipartDragEnd.bind(Et(r))}},[Object(w.b)("div","clipart-picker__labels",[null!==(t=kt(Et(r),Rt).extra)&&void 0!==t&&t.premium&&kt(Et(r),Dt).isIndividual?Object(w.b)("span","pf-d-inline-block pf-bg-white pf-rounded-circle",[Object(w.b)("span","pf-i pf-i-18 pf-i-crown pf-text-yellow-pro")]):"",null!==(i=kt(Et(r),Rt).extra)&&void 0!==i&&i.new?Object(w.b)("span","clipart-picker__new"):"",null!==(n=kt(Et(r),Rt).extra)&&void 0!==n&&n.hidden?Object(w.b)("span","pf-badge pf-badge-small pf-badge--primary",dlang("generator","hidden")):""]),Object(w.b)("div","clipart-picker__ratio",[Object(w.b)("div","clipart-picker__ratio__inner",[r._getSpinnerAndLoadDimensions(kt(Et(r),Rt),kt(Et(r),Dt).showEmpty)])])]))]),r._checkPremium(),r}return t=s,(i=[{key:"_getSpinnerAndLoadDimensions",value:function(e,t){return this._getSpinner(e,t,(function(t,i){e.width=t,e.height=i}))}},{key:"_getSpinner",value:function(e,t,i){var n=e.image.urlThumb,r=Object(w.b)("img",{className:"img-responsive pf-bg-white",src:t?"":PF.ASSETS_URL+"images/layout/spinner.svg",style:{opacity:.3}}),a=new Image;return a.onload=function(){r.src=n,r.style.opacity=1,i&&i(a.width,a.height)},a.src=n,r}},{key:"_clipartDragStart",value:function(e){kt(this,Dt).fileDropZone.enableDomElementDropZone(),e.dataTransfer.setData("domelement",JSON.stringify(kt(this,Rt)))}},{key:"_clipartDragEnd",value:function(e){kt(this,Dt).fileDropZone.disableDomElementDropZone()}},{key:"_onClick",value:(a=Ct(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=!(null!==(i=kt(this,Rt).extra)&&void 0!==i&&i.premium),e.t0){e.next=5;break}return e.next=4,Object(yt.d)(yt.a);case 4:e.t0=e.sent;case 5:if(!e.t0){e.next=7;break}return e.abrupt("return",kt(this,Dt).onClickCallback(kt(this,Rt),t));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)})},{key:"_checkPremium",value:(r=Ct(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=kt(this,Rt).extra)||void 0===t||!t.premium){e.next=5;break}return e.next=3,Object(yt.d)(yt.a);case 3:e.sent||(w.a.addClassName(kt(this,Nt),"clipart-picker__item--disabled"),kt(this,Nt).setAttribute("aria-disabled",!0),kt(this,Nt).ondragstart=function(){return{}},kt(this,Nt).ondragend=function(){return{}},kt(this,Nt).onclick=function(){return{}},Object(w.b)("div",{className:"pf-position-absolute pf-bg-white clipart-picker__item--overlay",attr:kt(this,Dt).isIndividual?{"data-toggle":"tooltip","data-container":"body",title:dlang("generator","Unlock with Printful Pro")}:{}}).append(kt(this,Nt)),kt(this,Dt).isIndividual&&$(kt(this,Nt)).find('[data-toggle="tooltip"]').tooltip());case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}])&&Tt(t.prototype,i),n&&Tt(t,n),s}(ve.a);function Ft(e){return(Ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Bt(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Mt(a,n,r,o,s,"next",e)}function s(e){Mt(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Vt(e,t){return(Vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gt(e);if(t){var r=Gt(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ut(this,i)}}function Ut(e,t){return!t||"object"!==Ft(t)&&"function"!=typeof t?zt(e):t}function zt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ht(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function qt(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Wt(e,t,"get"))}function Yt(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Wt(e,t,"set"),i),i}function Wt(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Kt=new WeakMap,Zt=new WeakMap,Xt=new WeakMap,Qt=new WeakMap,$t=new WeakMap,Jt=new WeakMap,ei=new WeakMap,ti=new WeakMap,ii=new WeakMap,ni=new WeakSet,ri=new WeakSet,ai=new WeakSet,oi=new WeakSet,si=new WeakSet,li=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vt(e,t)}(i,e);var t=jt(i);function i(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),si.add(zt(r)),oi.add(zt(r)),ai.add(zt(r)),ri.add(zt(r)),ni.add(zt(r)),Kt.set(zt(r),{writable:!0,value:null}),Zt.set(zt(r),{writable:!0,value:null}),Xt.set(zt(r),{writable:!0,value:null}),Qt.set(zt(r),{writable:!0,value:null}),$t.set(zt(r),{writable:!0,value:!1}),Jt.set(zt(r),{writable:!0,value:12}),ei.set(zt(r),{writable:!0,value:null}),ti.set(zt(r),{writable:!0,value:!1}),ii.set(zt(r),{writable:!0,value:{}}),Yt(zt(r),ii,e),Yt(zt(r),ei,qt(zt(r),ii).group),r.node=Object(w.b)("div","pf-mb-32",[Object(w.b)("div","pf-mb-8 pf-d-flex pf-align-items-center",[Yt(zt(r),Xt,Object(w.b)("h5","pf-h5 pf-m-0",qt(zt(r),ei).name)),null!==(n=qt(zt(r),ei).extra)&&void 0!==n&&n.new?Object(w.b)("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",Yt(zt(r),Zt,qt(zt(r),ei).items.length>qt(zt(r),Jt)?Object(w.b)("a",{className:"pf-ml-auto pf-mr-12 pf-link pf-ui-body",onclick:Ht(zt(r),oi,hi).bind(zt(r))},dlang("generator","See more")):"")]),Yt(zt(r),Kt,Object(w.b)("div","row-flex")),Yt(zt(r),Qt,Object(w.b)("div","row-flex"))]),Ht(zt(r),ni,ci).call(zt(r)),Ht(zt(r),si,pi).call(zt(r)),r}return i}(ve.a);function ci(){w.a.clearNode(qt(this,Kt));var e=qt(this,ei).items.length;e>qt(this,Jt)&&(e=qt(this,Jt));for(var t=0;t<e;t++)Ht(this,ai,di).call(this,qt(this,ei).items[t],qt(this,Kt))}function ui(){if(qt(this,ti))qt(this,$t)?(w.a.removeClassName(qt(this,Qt),"pf-d-none"),w.a.clearNode(qt(this,Zt)),Object(w.b)("span","",dlang("generator","See less")).append(qt(this,Zt))):(w.a.addClassName(qt(this,Qt),"pf-d-none"),w.a.clearNode(qt(this,Zt)),Object(w.b)("span","",dlang("generator","See more")).append(qt(this,Zt)));else if(w.a.clearNode(qt(this,Qt)),qt(this,$t)&&!(qt(this,ei).items.length<=qt(this,Jt))){for(var e=qt(this,ei).items.length,t=qt(this,Jt);t<e;t++)Ht(this,ai,di).call(this,qt(this,ei).items[t],qt(this,Qt));w.a.clearNode(qt(this,Zt)),Object(w.b)("span","",dlang("generator","See less")).append(qt(this,Zt)),Yt(this,ti,!0)}}function di(e,t){new xt({item:e,onClickCallback:qt(this,ii).onClickCallback,showEmpty:!0,fileDropZone:qt(this,ii).fileDropZone}).append(t)}function hi(){Yt(this,$t,!qt(this,$t)),Ht(this,ri,ui).call(this)}function pi(){return fi.apply(this,arguments)}function fi(){return(fi=Bt(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(t=qt(this,ei).extra)&&void 0!==t&&t.premium){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Object(yt.d)(yt.a);case 4:i=e.sent,Object(w.b)("span",{className:"pf-i pf-i-18 pf-i-crown pf-text-yellow-pro pf-ml-4",attr:{"data-toggle":"tooltip","data-container":"body",title:i?dlang("generator","Printful Pro feature"):dlang("generator","Unlock with Printful Pro")}}).append(qt(this,Xt)),$(qt(this,Xt)).find('[data-toggle="tooltip"]').tooltip();case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var gi=i("nwx2"),mi=i("jhOU"),_i=i("kLof"),vi=i("cKxm"),yi=i("IA60"),bi=i.n(yi),Pi=i("A+LN");function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function wi(e,t){return(wi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ii(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ei(e);if(t){var r=Ei(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Si(this,i)}}function Si(e,t){return!t||"object"!==Ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wi(e,t)}(a,e);var t,i,n,r=Ii(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=r.call(this)).node=tag("div","scroll-shadow pf-position-relative",[t.topShadow=tag("div","scroll-shadow__top pf-position-absolute pf-w-100"),t.content=tag("div","scroll-shadow__content",e),t.bottomShadow=tag("div","scroll-shadow__bottom pf-position-absolute pf-w-100")]),t}return t=a,(i=[{key:"updateScrollShadowing",value:function(){var e,t,i=this.content.scrollTop,n=this.content.scrollHeight-this.content.clientHeight;null===(e=this.topShadow)||void 0===e||e.classList.remove("pf-d-none"),null===(t=this.bottomShadow)||void 0===t||t.classList.remove("pf-d-none"),this.topShadow&&0===i&&this.topShadow.classList.add("pf-d-none"),this.bottomShadow&&i===n&&this.bottomShadow.classList.add("pf-d-none")}},{key:"addScrollEventListener",value:function(){var e=this;this.updateScrollShadowing(),this.content.addEventListener("scroll",(function(){return e.updateScrollShadowing()}))}}])&&Ti(t.prototype,i),n&&Ti(t,n),a}(ve.a),ki=i("1tjy");function Li(e){return(Li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Ri(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Ai(a,n,r,o,s,"next",e)}function s(e){Ai(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Ni(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Di(e,t){return(Di=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Bi(e);if(t){var r=Bi(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Fi(this,i)}}function Fi(e,t){return!t||"object"!==Li(t)&&"function"!=typeof t?Mi(e):t}function Mi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vi(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ji(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,zi(e,t,"get"))}function Ui(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,zi(e,t,"set"),i),i}function zi(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Gi=new WeakMap,Hi=new WeakMap,qi=new WeakMap,Yi=new WeakMap,Wi=new WeakMap,Ki=new WeakMap,Zi=new WeakMap,Xi=new WeakMap,Qi=new WeakMap,$i=new WeakMap,Ji=new WeakMap,en=new WeakMap,tn=new WeakMap,nn=new WeakMap,rn=new WeakSet,an=new WeakSet,on=new WeakSet,sn=new WeakSet,ln=new WeakSet,cn=new WeakSet,un=new WeakSet,dn=new WeakSet,hn=new WeakSet,pn=new WeakSet,fn=new WeakSet,gn=new WeakSet,mn=new WeakSet,_n=new WeakSet,vn=new WeakSet,yn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Di(e,t)}(o,e);var t,i,n,r,a=xi(o);function o(e){var t,i,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),vn.add(Mi(t)),_n.add(Mi(t)),mn.add(Mi(t)),gn.add(Mi(t)),fn.add(Mi(t)),pn.add(Mi(t)),hn.add(Mi(t)),dn.add(Mi(t)),un.add(Mi(t)),cn.add(Mi(t)),ln.add(Mi(t)),sn.add(Mi(t)),on.add(Mi(t)),an.add(Mi(t)),rn.add(Mi(t)),Gi.set(Mi(t),{writable:!0,value:[]}),i=Mi(t),r=null,(n="fileDropZone")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,Hi.set(Mi(t),{writable:!0,value:null}),qi.set(Mi(t),{writable:!0,value:null}),Yi.set(Mi(t),{writable:!0,value:null}),Wi.set(Mi(t),{writable:!0,value:null}),Ki.set(Mi(t),{writable:!0,value:null}),Zi.set(Mi(t),{writable:!0,value:null}),Xi.set(Mi(t),{writable:!0,value:null}),Qi.set(Mi(t),{writable:!0,value:null}),$i.set(Mi(t),{writable:!0,value:null}),Ji.set(Mi(t),{writable:!0,value:null}),en.set(Mi(t),{writable:!0,value:""}),tn.set(Mi(t),{writable:!0,value:0}),nn.set(Mi(t),{writable:!0,value:null}),Ui(Mi(t),$i,e),t.fileDropZone=ji(Mi(t),$i).fileDropZone,Ui(Mi(t),nn,new Oi([Ui(Mi(t),Ki,tag("h5","pf-h5 pf-mb-16 pf-d-none",dlang("generator","Recently used"))),Ui(Mi(t),Wi,tag("div","row-flex pf-mb-12 pf-d-none")),Ui(Mi(t),Qi,new gi.a("secondary")),Ui(Mi(t),Hi,tag("div","pf-mt-24")),Ui(Mi(t),Yi,tag("div","pf-d-none pf-mt-16")),Ui(Mi(t),qi,tag("div","pf-d-none pf-mt-24")),Ui(Mi(t),Xi,tag("div","row-flex pf-d-none"))]));var s=$(".modal-open").length?"pf-mb-16":"pf-my-16";return t.node=tag("div","clipart-picker",[tag("a",{className:"pf-link-block "+s,onclick:ji(Mi(t),$i).onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),Ui(Mi(t),Zi,tag("div","pf-mb-12")),ji(Mi(t),nn)]),Vi(Mi(t),rn,bn).call(Mi(t)),Vi(Mi(t),dn,Ln).call(Mi(t)),t}return t=o,(i=[{key:"renderGroups",value:(r=Ri(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ji(this,Ji)){e.next=3;break}return Vi(this,on,wn).call(this),e.abrupt("return");case 3:return e.next=5,Vi(this,vn,Mn).call(this);case 5:Vi(this,on,wn).call(this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})}])&&Ni(t.prototype,i),n&&Ni(t,n),o}(ve.a);function bn(){return Pn.apply(this,arguments)}function Pn(){return(Pn=Ri(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Pi.x)(Pi.i);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:return ji(this,Qi).add({caption:dlang("generator","Basic clipart"),isActive:!0,isDisabled:!1,customId:"clipart-tab-basic",onclick:function(){w.a.removeClassName(ji(t,Hi),"pf-d-none"),w.a.addClassName(ji(t,Yi),"pf-d-none"),w.a.addClassName(ji(t,qi),"pf-d-none"),Vi(t,hn,An).call(t,""),ji(t,nn).updateScrollShadowing()}}),ji(this,Qi).add({caption:tag("span","",[dlang("generator","Pro clipart"),tag("span","pf-i pf-i-18 pf-i-crown pf-text-yellow-pro pf-ml-4")]),isActive:!1,isDisabled:!1,customId:"clipart-tab-pro",onclick:function(){w.a.addClassName(ji(t,Hi),"pf-d-none"),w.a.removeClassName(ji(t,qi),"pf-d-none"),w.a.removeClassName(ji(t,Yi),"pf-d-none"),Vi(t,hn,An).call(t,""),ji(t,nn).updateScrollShadowing()}}),e.next=9,Vi(this,an,Cn).call(this);case 9:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Cn(){return Tn.apply(this,arguments)}function Tn(){return(Tn=Ri(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(yt.d)(yt.a);case 2:t=e.sent,w.a.clearNode(ji(this,Yi)),i=$(document.body).hasClass("embedded")||PF.EMBED_STORE||PF.WEBVIEW,t||((n=new _i.a).type="warning",n.className="premium-clipart-upsell-banner",n.closable=!1,n.heading=dlang("generator","Subscribe to Printful Pro to unlock"),n.content=dlang("generator","Add exclusive clipart content to your designs"),n.buttonText=i?null:dlang("generator","Unlock now"),n.onButtonClick=i?null:function(){var e=window.location.protocol+"//"+window.location.hostname+"/";window.open(e+be.a.langUrl("dashboard/settings/account-subscription-plan"))},new mi.a(n).append(ji(this,Yi)));case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function wn(){return Vi(this,dn,Ln).call(this),Vi(this,un,On).call(this),ji(this,nn).addScrollEventListener(),this}function In(e){w.a.clearNode(ji(this,Hi)),w.a.clearNode(ji(this,qi)),Ui(this,Gi,e);for(var t=0,i=ji(this,Gi).length;t<i;t++)Vi(this,ln,Sn).call(this,ji(this,Gi)[t]);Ui(this,Ji,!0),Vi(this,un,On).call(this)}function Sn(e){var t;new li({group:e,fileDropZone:this.fileDropZone,onClickCallback:Vi(this,mn,xn).bind(this)}).append(null!==(t=e.extra)&&void 0!==t&&t.premium?ji(this,qi):ji(this,Hi))}function En(){return ji(this,Ji)&&ji(this,tn)>0}function On(){return kn.apply(this,arguments)}function kn(){return(kn=Ri(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ki.f)(ji(this,$i).selectedPlacementTechnique);case 2:for(t=e.sent,Ui(this,tn,t.length),w.a.clearNode(ji(this,Wi)),Vi(this,cn,En).call(this)?(w.a.removeClassName(ji(this,Wi),"pf-d-none"),w.a.removeClassName(ji(this,Ki),"pf-d-none")):(w.a.addClassName(ji(this,Wi),"pf-d-none"),w.a.addClassName(ji(this,Ki),"pf-d-none")),i=0,n=t.length;i<n;i++)new xt({item:t[i],onClickCallback:Vi(this,mn,xn).bind(this),showEmpty:!0,fileDropZone:this.fileDropZone,isIndividual:!0}).append(ji(this,Wi));return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Ln(){"en"===be.a.language&&(Ui(this,en,""),Vi(this,pn,Rn).call(this),w.a.clearNode(ji(this,Zi)),new vi.a({onChange:Vi(this,hn,An).bind(this),onKeyUp:Vi(this,hn,An).bind(this),type:"text",showClearButton:!0,placeholder:dlang("generator","Search clipart"),className:"tt-input",name:"SearchCliparts",id:"search-cliparts-"+Math.random().toString(36).substring(7)}).append(ji(this,Zi)))}function An(e){ji(this,en)!==e&&(Ui(this,en,e),Vi(this,pn,Rn).call(this))}function Rn(){if(w.a.addClassName(ji(this,Wi),"pf-d-none"),w.a.addClassName(ji(this,Ki),"pf-d-none"),w.a.addClassName(ji(this,Qi).node,"pf-d-none"),w.a.addClassName(ji(this,Hi),"pf-d-none"),w.a.addClassName(ji(this,Yi),"pf-d-none"),w.a.addClassName(ji(this,qi),"pf-d-none"),!ji(this,en))return Vi(this,cn,En).call(this)&&(w.a.removeClassName(ji(this,Wi),"pf-d-none"),w.a.removeClassName(ji(this,Ki),"pf-d-none")),w.a.removeClassName(ji(this,Qi).node,"pf-d-none"),w.a.removeClassName(ji(this,Hi),"pf-d-none"),w.a.addClassName(ji(this,Xi),"pf-d-none"),ji(this,Qi).markTabAsSelectedById("clipart-tab-basic"),void ji(this,nn).updateScrollShadowing();Vi(this,fn,Nn).call(this),w.a.removeClassName(ji(this,Xi),"pf-d-none"),ji(this,nn).updateScrollShadowing()}function Nn(){if(w.a.clearNode(ji(this,Xi)),ji(this,en)){Ui(this,en,ji(this,en).toLowerCase());for(var e=!0,t=0;t<ji(this,Gi).length;t++)for(var i=ji(this,Gi)[t],n=0;n<i.items.length;n++){var r=i.items[n];if(r.name.toLowerCase().includes(ji(this,en)))new xt({item:r,onClickCallback:Vi(this,mn,xn).bind(this),showEmpty:!1,isIndividual:!0,fileDropZone:ji(this,$i).fileDropZone}).append(ji(this,Xi)),e=!1}e&&Vi(this,gn,Dn).call(this)}}function Dn(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:bi.a}),tag("div","pf-ui-body pf-text-center",dlang("generator","No results found! Try another keyword or check out our Clipart collections."))]).append(ji(this,Xi))}function xn(e,t){e.unavailableTechniques&&e.unavailableTechniques.indexOf(ji(this,$i).selectedPlacementTechnique)>-1||(Object(ki.a)(e.id,ji(this,$i).selectedPlacementTechnique),ji(this,$i).onAddFileCallback(e),Vi(this,_n,Fn).call(this))}function Fn(){Vi(this,dn,Ln).call(this),this.renderGroups()}function Mn(){return Bn.apply(this,arguments)}function Bn(){return(Bn=Ri(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.show(ji(this,nn).node),e.next=3,Object(ki.c)(ji(this,$i).selectedPlacementTechnique);case 3:t=e.sent,Vi(this,sn,In).call(this,t),x.a.hide(ji(this,nn).node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Vn=i("gY30"),jn=Class({_current:"",_available:[],__construct:function(e,t,i,n){this._onOrientationChangedCallback=i,this._available=t.slice(),this._current=n,this.node=Object(w.a)({tag:"div",els:[{tag:"hr"},{tag:"h6",text:dlang("generator","Select orientation:")},this._buttons=Object(w.a)({tag:"div"})]}),this._render()},_render:function(){for(var e in w.a.clearNode(this._buttons),this._available){var t=this._available[e],i=jn.getOrientationMap()[t];Object(w.a)({tag:"label",text:i,className:"regular",style:"display: block",els:[{tag:"input",type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onOrientationPicked.bind(this,t)}]}).append(this._buttons)}},_onOrientationPicked:function(e){this._current=e,this._render(),this._onOrientationChangedCallback(e)},isValuePicked:function(){return!!this._current},getValueCount:function(){return this._available.length},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()}},X.a);jn.ORIENTATION_ANY="any",jn.ORIENTATION_VERTICAL="vertical",jn.ORIENTATION_HORIZONTAL="horizontal",jn.getOrientationMap=function(){var e={};return e[jn.ORIENTATION_ANY]=dclang("generator","product orientation","Any"),e[jn.ORIENTATION_VERTICAL]=dclang("generator","product orientation","Vertical"),e[jn.ORIENTATION_HORIZONTAL]=dclang("generator","product orientation","Horizontal"),e},window&&((globalThis||{}).PFProductPushOrientationPicker=jn);var Un=i("iQ/s"),zn=i("JA1v"),Gn=i("2+PC"),Hn=Class({_params:null,callback:null,colors:[],unavailableColors:[],selectedColors:[],node:null,nodeCheckboxes:null,nodeCheckboxCheckAll:null,nodeError:null,__construct:function(e){this._params=e,this.callback=e.onChangedCallback,this.colors=e.values,this.selectedColors=e.selectedValues,this.node=tag("div","generator-color-picker");var t="";if(this.colors.length>1&&this._params.selectedLimit>1){var i=tag("input",{type:"checkbox",prop:{checked:this.colors.length===this.selectedColors.length}});i.onchange=this._onToggleAll.bind(this,i),t=tag("label",{className:"margin-bottom-5",style:{fontWeight:"normal"}},[i,tag("span","margin-left-10",dlang("generator","Select all colors"))]),this.nodeCheckboxCheckAll=i}this.nodeCheckboxes=tag("div"),tag("div","margin-bottom-30",[tag("h6","",(e.pickerTitle?e.pickerTitle:dlang("generator","Choose color"))+":"),t,this.nodeCheckboxes,this.nodeError=tag("div","alert alert-danger text-center hidden padding-10",[dlang("generator","Please select at least one color!")])]).append(this.node),this._render()},_render:function(){w.a.clearNode(this.nodeCheckboxes);var e,t={};for(e in this.colors)t[this.colors[e].color]=this.colors[e].colorCode2?[this.colors[e].colorCode,this.colors[e].colorCode2]:[this.colors[e].colorCode];var i=[];for(e in this.selectedColors){var n=this.selectedColors[e];i.push(n.color)}var r=new Un.a;r.colors=t,r.disabledRegionColors=this._regionDisabledColors,r.unavailableColors=this._unavailableColors,r.discontinuedColors=this._discontinuedColors,r.selectedColors=i,r.showHuge=!0,r.shouldSortColors=!1,r.maxCount=this._params.selectedLimit,r.canDeselectLast=this._params.canDeselectLast,r.onChange=this._onColorsChanged.bind(this,!0),this._picker=new zn.a(r).append(this.nodeCheckboxes)},_onColorsChanged:function(e,t){for(var i in this.selectedColors=[],t)for(var n in this.colors)this.colors[n].color===t[i]&&this.selectedColors.push(this.colors[n]);this.nodeCheckboxCheckAll&&(this.nodeCheckboxCheckAll.checked=this.selectedColors.length===this.colors.length),this.updateErrorStatus(),this.callback(this.selectedColors,e)},_onToggleAll:function(e){this.selectedColors=[],e.checked&&(this.selectedColors=this.colors.slice(),ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Check all colors"})),this._render(),this.callback(this.selectedColors)},validateSelectedColors:function(e,t,i,n,r,a){if(t||(t=this.getSelectedColorNames()),t&&this.setSelectedRegionDisabledValues(i,n,"color",e),!this._params.isPopoverEnabled)return!0;var o,s;if(this._params&&this._params.getSelectedSizes){var l=this._params.getSelectedSizes();1===l.length&&(o=l[0],s="size")}var c="",u="",d=t.length?[].concat(t).shift():"",h=!0,p=this.getAvailableAttributeRegion(d,"color",o,s);return this._isColorDiscontinued(d)?(c=Gn.a.POPOVER.DISCONTINUED.TITLE,u=Gn.a.POPOVER.DISCONTINUED.DESC,r.length||(u=Gn.a.POPOVER.DISCONTINUED.DESC_COLOR_ONLY),h=!1):this._isColorRegionDisabled(d)?(c=Gn.a.POPOVER.REGION.TITLE.replace("{region}",p),u=Gn.a.POPOVER.REGION.DESC,e.allowedSellingRegions&&(c=Gn.a.POPOVER.DSR_LIMITED.DESC_COLOR.replace("{linkStart}","").replace("{linkEnd}",""),u=""),h=!1):(this._isColorOutOfStock(d)||this._isColorRegionDisabled(d)&&!p)&&(c=Gn.a.POPOVER.UNAVAILABLE.TITLE,u=Gn.a.POPOVER.UNAVAILABLE.DESC,r.length||(u=Gn.a.POPOVER.UNAVAILABLE.DESC_COLOR_ONLY),h=!1),d&&(c||u)&&this._picker.showPopover(d,c,u,a),h},getValueCount:function(){return this.colors.length},isValuePicked:function(){return this.selectedColors.length>0},hasAtLeastOneValue:function(){return!!this.getValueCount()},setDisabledRegionColors:function(e){return this._regionDisabledColors=e,this},setUnavailableColors:function(e){return this._unavailableColors=e,this},setDiscontinuedColors:function(e){return this._discontinuedColors=e,this},_isColorDiscontinued:function(e){return this._discontinuedColors.indexOf(e)>-1},_isColorOutOfStock:function(e){return this._unavailableColors.indexOf(e)>-1},_isColorRegionDisabled:function(e){return this._regionDisabledColors.indexOf(e)>-1},setColors:function(e){return this.selectedColors=e,this},getSelectedColorNames:function(){var e=[];for(var t in this.selectedColors)-1===e.indexOf(this.selectedColors[t].color)&&e.push(this.selectedColors[t].color);return e},getColorCodes:function(e){for(var t in this.colors)if(this.colors[t].color===e){var i=[this.colors[t].colorCode];return this.colors[t].colorCode2&&i.push(this.colors[t].colorCode2),i}},selectAtLeastOneColorAndRender:function(){return this.selectedColors.length||(this.selectedColors=this._params.selectedValues.length?this._params.selectedValues.slice():[this.colors.slice().shift()]),this._render(),this},render:function(){return this._render(),this}},X.a);window&&((globalThis||{}).PFProductPushColorPicker=Hn);var qn=Class({_okCallback:null,_cancelCallback:null,__construct:function(e,t){this._okCallback=e,this._cancelCallback=t,this._render()},_render:function(){var e=new pt.a.Par;e.modalDialogClass="modal-md",this._modal=new pt.a(e),this._modal.setHeaderContent("");var t=tag("div","",[tag("div","warning-text",[tag("h4","",lang("Are you sure?")),tag("p","",lang("None of your layer changes will be saved. Are you sure you want to continue switching template type?"))])]);this._modal.setContent(t);var i=tag("div","text-left",[tag("a",{className:"pf-btn pf-btn-primary pf-mr-16",onclick:this._onOkClicked.bind(this)},lang("Yes, continue")),tag("a",{className:"pf-btn pf-btn-secondary",onclick:this._onCancelClicked.bind(this)},lang("No, go back"))]);this._modal.setFooterContent(i),this._modal.show()},_onOkClicked:function(){this._modal.remove(),this._okCallback&&this._okCallback()},_onCancelClicked:function(){this._modal.remove(),this._cancelCallback&&this._cancelCallback()}});window&&((globalThis||{}).PFProductPushAdvancedTemplatePickerPopup=qn);var Yn=Class({_current:"",_availableTypes:[],_showWarningPopup:!1,_isPopupBusy:!1,__construct:function(e,t,i,n){this._onTemplateTypeChangedCallback=t,this._getCurrentTemplateLoaded=i,this._availableTypes=e.slice(),this._current=n,this.node=tag("div","",[tag("h6","",dlang("generator","Select print file template type")),this._buttons=tag("div")]),this._render()},_render:function(){for(var e in w.a.clearNode(this._buttons),this._availableTypes){var t=this._availableTypes[e],i=this._getTemplateTypeText(t);tag("label","regular pf-d-block",[tag("input",{type:"radio",className:"margin-right-10",value:e,checked:t==this._current,onclick:this._onTemplateTypePicked.bind(this,t)}),i]).append(this._buttons)}},_onTemplateTypePicked:function(e){if(this._current!==e)return this._getCurrentTemplateLoaded&&this._getCurrentTemplateLoaded()===e?(this._current=e,void this._render()):void(this._showWarningPopup?this._isPopupBusy||(this._isPopupBusy=!0,setTimeout(function(){this._isPopupBusy=!1}.bind(this),1e3),new qn(this._onTemplateTypePickedRe.bind(this,e),this._render())):this._onTemplateTypePickedRe(e))},_getTemplateTypeText:function(e){var t={};return t[h.a.TEMPLATE_TYPE_SIMPLE]=dclang("generator","template type","Simple"),t[h.a.TEMPLATE_TYPE_ADVANCED]=dclang("generator","template type","Advanced"),t[e]?t[e]:""},_onTemplateTypePickedRe:function(e){this._current=e,this._render(),this._onTemplateTypeChangedCallback(e)},isValuePicked:function(){return!!this._current},getValue:function(){return this._current},setValue:function(e){this._current=e||"",this._render()},toggleTemplatePickerPopup:function(e){this._showWarningPopup=e}},X.a);window&&((globalThis||{}).PFProductPushAdvancedTemplatePicker=Yn);var Wn,Kn,Zn,Xn,Qn,$n,Jn,er,tr,ir,nr,rr,ar,or,sr,lr,cr,ur,dr,hr,pr,fr,gr,mr,_r,vr,yr,br,Pr,Cr,Tr,wr,Ir,Sr,Er,Or=i("IbzY"),kr=i("MW8O"),Lr=i("jorx");function Ar(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Rr=Class({});Rr.DEFAULT_PLACEMENT_ID="default",Rr.DEFAULT_FILL_COLOR="#ffffff",Rr.DEFAULT_DIMENSIONS={width:300,height:300},Rr.POSITION_X=0,Rr.POSITION_Y=0,Rr.POSITION_Z=2,Rr.AMBIENT_LIGHT_COLOR=13421772,Rr.AMBIENT_LIGHT_INTENSITY=1,Rr.DIRECTIONAL_LIGHT_COLOR=15658734,Rr.DIRECTIONAL_LIGHT_INTENSITY=.2,Rr.DEFAULT_PLACEMENT_MAP={0:"default"},Rr.staticImageCache={},Rr.placementImageStorage={},Rr.STATUS_NO_CHANGES=2,Rr.STATUS_RELOAD_PRINTFILE=1,Rr.STATUS_RELOAD_MODEL=0,Rr.STATUS_RELOAD_MODEL_PROCESSING=-1,Rr.DEFAULT_MATERIAL_MAP={0:"default"},Rr.MATERIAL_METAL="metal",Rr.PRODUCT_OBJ_FILE_MAP=[{uniqueId:1,productId:J.a.ID_LEGGINGS_ALL_OVER,templateIds:[58,64],objFile:"generator/3d-objects/189-all-over-print-leggings.obj",rowColCount:2,staticColorMap:{1:"#ffffff"},minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(Wn={},Ar(Wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(Wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Ar(Wn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),Wn),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:2,productId:J.a.ID_GLOSSY_MUG,templateIds:[43],objFile:"generator/3d-objects/19-11oz-mug.obj",rowColCount:2,objPosAdjustY:-.03,breakpointSettings:(Kn={},Ar(Kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:.1829,posX:-.0275,posY:.0889}),Ar(Kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:700,zoom:.264,posX:-.0427,posY:.0946}),Ar(Kn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:700,zoom:.199,posX:.0651,posY:.0887}),Kn)},{uniqueId:3,productId:J.a.ID_GLOSSY_MUG,templateIds:[44],objFile:"generator/3d-objects/19-15oz-mug.obj",rowColCount:2,breakpointSettings:(Zn={},Ar(Zn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.3}),Ar(Zn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:550,zoom:5.6}),Ar(Zn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:550,zoom:4.4}),Zn),objPosAdjustY:-1.5},{uniqueId:4,productId:J.a.ID_COLOR_MUG,templateIds:[43],objFile:"generator/3d-objects/403-11oz-color-mug.obj",variantColorSector:2,rowColCount:2,breakpointSettings:(Xn={},Ar(Xn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.8}),Ar(Xn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:5.7}),Ar(Xn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:4.3}),Xn)},{uniqueId:5,productId:J.a.ID_CANVAS,templateIds:[51],objFile:"generator/3d-objects/3-12x12-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(Qn={},Ar(Qn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(Qn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.5}),Ar(Qn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.5}),Qn)},{uniqueId:6,productId:J.a.ID_CANVAS,templateIds:[45],objFile:"generator/3d-objects/3-12x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:($n={},Ar($n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.7}),Ar($n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.5}),Ar($n,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.5}),$n)},{uniqueId:7,productId:J.a.ID_CANVAS,templateIds:[46],objFile:"generator/3d-objects/3-12x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(Jn={},Ar(Jn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.7}),Ar(Jn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:3.8}),Ar(Jn,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:2.8}),Jn)},{uniqueId:8,productId:J.a.ID_CANVAS,templateIds:[52],objFile:"generator/3d-objects/3-16x16-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(er={},Ar(er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Ar(er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:4}),Ar(er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:3}),er)},{uniqueId:9,productId:J.a.ID_CANVAS,templateIds:[47],objFile:"generator/3d-objects/3-16x20-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(tr={},Ar(tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.2}),Ar(tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:4.5}),Ar(tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:3.5}),tr)},{uniqueId:10,productId:J.a.ID_CANVAS,templateIds:[48],objFile:"generator/3d-objects/3-16x20-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(ir={},Ar(ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.2}),Ar(ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5}),Ar(ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4}),ir)},{uniqueId:11,productId:J.a.ID_CANVAS,templateIds:[49],objFile:"generator/3d-objects/3-18x24-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(nr={},Ar(nr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.5}),Ar(nr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5}),Ar(nr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4}),nr)},{uniqueId:12,productId:J.a.ID_CANVAS,templateIds:[50],objFile:"generator/3d-objects/3-18x24-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(rr={},Ar(rr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.5}),Ar(rr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:5.5}),Ar(rr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:4.5}),rr)},{uniqueId:13,productId:J.a.ID_CANVAS,templateIds:[53],objFile:"generator/3d-objects/3-24x36-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},breakpointSettings:(ar={},Ar(ar,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.5}),Ar(ar,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:6}),Ar(ar,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:5.2}),ar)},{uniqueId:14,productId:J.a.ID_CANVAS,templateIds:[54],objFile:"generator/3d-objects/3-24x36-canvas.obj",rowColCount:2,staticColorMap:{3:"#cccccc"},staticImageMap:{2:PF.ASSETS_URL+"generator/3d-objects/images/wood.jpg"},rotateBy90Deg:!0,breakpointSettings:(or={},Ar(or,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:3.7}),Ar(or,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:8}),Ar(or,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:6.5}),or)},{uniqueId:15,productId:J.a.ID_LEGGINGS_ALL_OVER_CAPRI,templateIds:[73,64],objFile:"generator/3d-objects/221-all-over-print--capri-leggings.obj",rowColCount:2,staticColorMap:{1:"#ffffff"},minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(sr={},Ar(sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Ar(sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),sr),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:16,productId:J.a.ID_LEGGINGS_YOGA_CAPRI,templateIds:[132,82,82,64],objFile:"generator/3d-objects/280-all-over-print-yoga-capri-leggings.obj",placementMap:{0:"default",1:"belt_front",2:"belt_back"},rowColCount:2,minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(lr={},Ar(lr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:.1,posX:2.5}),Ar(lr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:.2,posX:3.2}),Ar(lr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:.2,posX:2.8}),lr),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:17,productId:J.a.ID_LEGGINGS_YOGA,templateIds:[81,82,83,64],objFile:"generator/3d-objects/242-all-over-print-yoga-leggings.obj",placementMap:{0:"default",1:"belt_front",2:"belt_back"},rowColCount:2,minPolarAngle:Math.PI/180*45,maxPolarAngle:Math.PI/180*135,breakpointSettings:(cr={},Ar(cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:1.9}),Ar(cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:1.9}),cr),showWarning:!0,warningBannerData:{header:dlang("generator","3D view represents size M"),content:dlang("generator","The design's position and scale may look a little different for other sizes")}},{uniqueId:18,productId:J.a.ID_PILLOW_W_STUFFING,templateIds:[32,32],objFile:"generator/3d-objects/square-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(ur={},Ar(ur,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(ur,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(ur,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),ur)},{uniqueId:19,productId:J.a.ID_PILLOW_W_STUFFING,templateIds:[214,214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(dr={},Ar(dr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(dr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(dr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),dr)},{uniqueId:20,productId:J.a.ID_PILLOW_W_STUFFING,templateIds:[72,72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(hr={},Ar(hr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Ar(hr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Ar(hr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),hr)},{uniqueId:21,productId:J.a.ID_PILLOWCASE,templateIds:[32,32],objFile:"generator/3d-objects/square-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(pr={},Ar(pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),pr)},{uniqueId:22,productId:J.a.ID_PILLOWCASE,templateIds:[214,214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(fr={},Ar(fr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(fr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(fr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),fr)},{uniqueId:23,productId:J.a.ID_PILLOWCASE,templateIds:[72,72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(gr={},Ar(gr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Ar(gr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Ar(gr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),gr)},{uniqueId:24,productId:J.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[32,32],objFile:"generator/3d-objects/square-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(mr={},Ar(mr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(mr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(mr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),mr)},{uniqueId:25,productId:J.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[214,214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(_r={},Ar(_r,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(_r,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(_r,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),_r)},{uniqueId:26,productId:J.a.ID_PILLOW_W_STUFFING_RECTANGULAR,templateIds:[72,72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(vr={},Ar(vr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Ar(vr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Ar(vr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),vr)},{uniqueId:27,productId:J.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[32,32],objFile:"generator/3d-objects/square-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(yr={},Ar(yr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(yr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(yr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),yr)},{uniqueId:28,productId:J.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[214,214],objFile:"generator/3d-objects/square-pillow.obj",placementId:"front",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(br={},Ar(br,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.5}),Ar(br,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(br,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),br)},{uniqueId:29,productId:J.a.ID_PILLOWCASE_RECTANGULAR,templateIds:[72,72],objFile:"generator/3d-objects/rectangular-pillow.obj",placementMap:{0:"front",1:"back"},variantColorSector:2,rowColCount:2,breakpointSettings:(Pr={},Ar(Pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2}),Ar(Pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:4}),Ar(Pr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:3}),Pr)},{uniqueId:30,productId:J.a.ID_WATER_BOTTLE,templateIds:[192],objFile:"generator/3d-objects/water-bottle.obj",rowColCount:2,staticColorMap:{2:"#a1a1a1"},materialMap:{2:Rr.MATERIAL_METAL},breakpointSettings:(Cr={},Ar(Cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:400,zoom:.4}),Ar(Cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:800,zoom:.3}),Ar(Cr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:800,zoom:.3}),Cr)},{uniqueId:31,productId:J.a.ID_ALL_OVER_WOMEN_CREW_NECK_T_SHIRT,templateIds:[98,98,99,99],objFile:"generator/3d-objects/261-all-over-print-crew-neck-t-shirt-womens.obj",placementMap:{0:"default",1:"back",2:"sleeve_left",3:"sleeve_right"},variantColorSector:2,rowColCount:3,breakpointSettings:(Tr={},Ar(Tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:.8}),Ar(Tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:.8}),Ar(Tr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:.5}),Tr)},{uniqueId:32,productId:J.a.ID_ALL_OVER_WOMEN_ATHLETIC_T_SHIRT,templateIds:[169,169,170,170],objFile:"generator/3d-objects/329-all-over-print-athletic-t-shirt-womens.obj",placementMap:{0:"front",1:"back",2:"sleeve_right",3:"sleeve_left"},variantColorSector:2,rowColCount:3,breakpointSettings:(wr={},Ar(wr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1}),Ar(wr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:1.5}),Ar(wr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:1.3}),wr)},{uniqueId:33,productId:J.a.ID_ALL_OVER_UNISEX_SWEATSHIRT,templateIds:[151,151,151,64],objFile:"generator/3d-objects/320-all-over-print-sweatshirt.obj",placementMap:{0:"front",1:"back",2:"sleeve_right",3:"sleeve_left"},variantColorSector:2,rowColCount:3,breakpointSettings:(Ir={},Ar(Ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:2.3}),Ar(Ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:3.5}),Ar(Ir,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2.5}),Ir)},{uniqueId:34,productId:J.a.ID_ALL_OVER_MEN_CREW_NECK_T_SHIRT,templateIds:[94,94,95,95],objFile:"generator/3d-objects/257-all-over-print-crew-neck-t-shirt-men.obj",placementMap:{0:"default",1:"back",2:"sleeve_left",3:"sleeve_right"},variantColorSector:2,rowColCount:3,breakpointSettings:(Sr={},Ar(Sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1}),Ar(Sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:2}),Ar(Sr,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:2}),Sr)},{uniqueId:35,productId:J.a.ID_ALL_OVER_MEN_ATHLETIC_T_SHIRT,templateIds:[168,168,143,143],objFile:"generator/3d-objects/328-all-over-print-athletic-t-shirt-mens.obj",placementMap:{0:"front",1:"back",2:"sleeve_right",3:"sleeve_left"},variantColorSector:2,rowColCount:3,breakpointSettings:(Er={},Ar(Er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XXS],{width:300,height:300,zoom:1.1}),Ar(Er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.LG],{width:272,height:650,zoom:1.5}),Ar(Er,PFUtilsBreakpoints.SIZES[PFUtilsBreakpoints.XL],{width:371,height:650,zoom:1.3}),Er)}],Rr.getMapObject=function(e){var t,i=null===(t=Object(Q.a)())||void 0===t?void 0:t.productId;return Rr.PRODUCT_OBJ_FILE_MAP.find((function(t){return t.productId===i&&t.templateIds.indexOf(e)>-1}))},Rr.getPositionValues=function(e){var t=this._getBreakPointObject(e,["zoom","posX","posY"]);return t.posX=(null==t?void 0:t.posX)||(null==e?void 0:e.positionX)||Rr.POSITION_X,t.posY=(null==t?void 0:t.posY)||(null==e?void 0:e.positionY)||Rr.POSITION_Y,t.zoom=(null==t?void 0:t.zoom)||(null==e?void 0:e.positionZ)||Rr.POSITION_Z,t},Rr.getDimensions=function(e){return this._getBreakPointObject(e,["width","height"])||Rr.DEFAULT_DIMENSIONS},Rr.getFillColor=function(e){return(null==e?void 0:e.fillColor)||Rr.DEFAULT_FILL_COLOR},Rr.getNeededPlacementIds=function(e){return null!=e&&e.placementMap?Object.values(e.placementMap):[Rr.DEFAULT_PLACEMENT_ID]},Rr._getBreakPointObject=function(e,t){var i=null;if(null!=e&&e.breakpointSettings){var n,r=null===(n=PFUtilsBreakpoints.getWindowBreakpoint())||void 0===n?void 0:n.value,a=-1/0;Object.keys(e.breakpointSettings).forEach((function(n){e.breakpointSettings[n][t[0]]&&r>=n&&a<n&&(a=n,i={},t.forEach((function(t){return i[t]=e.breakpointSettings[a][t]})))}))}return i},Rr.savePlacementImage=function(e,t){Rr.placementImageStorage[e]=t},Rr.getPlacementImage=function(e){return Rr.placementImageStorage[e]||null},Rr.getPlacementMap=function(e){return(null==e?void 0:e.placementMap)||Rr.DEFAULT_PLACEMENT_MAP},Rr.getMaterialMap=function(e){return(null==e?void 0:e.materialMap)||Rr.DEFAULT_MATERIAL_MAP},window&&((globalThis||{}).PFProductPushLive3dViewConfig=Rr);var Nr=Class({shouldAllowFileColorChanger:null,templates:null,designerNode:null,getNodeMainMockupArea:null,pickerConfig:null,product:null,getSelectedPlacementId:null,getSelectedPlacementTechnique:null,onAllImagesProcessed:null,scheduleEmbroideryPreviewUpdate:null,editImageLayer:null,onLayerColorsChanged:null,getAvailablePlacements:null,isAllOverProduct:null,getProductOptionsPicker:null,isCustomizingMode:null});window&&((globalThis||{}).PFProductPushEmbroideryHelperPar=Nr);var Dr=i("2+Fj"),xr=Class({_par:null,_embroiderySelectedPaletteColors:[],_embroiderySelectedPaletteColorsByLayer:null,_colorizeImageCallStack:[],_showImageQualityWarning:null,lastZoomedInEmbroideryTemplate:null,__construct:function(e){this._par=e},getSelectedPaletteColors:function(){return this._embroiderySelectedPaletteColors.map((function(e){return e.toHex().toUpperCase()}))},quantizeLayer:function(e,t){var i=Object.values(Object(Ue.c)(e.technique===J.a.TECHNIQUE_EMBROIDERY,e.id,this._par.isAllOverProduct(),!0)).map((function(e){return e.value.toLowerCase()}));t.embroideryType&&e.id===Z.a.TYPE_EMBROIDERY_FRONT||(t.embroideryType=ee.getDefaultEmbroideryType()),(new B).quantizeWithPaletteColors(t.fileItem.urlPreview,ge.a.EMBROIDERY_MAX_IMAGE_COLORS,i,this._embroiderySelectedPaletteColors,this._par.designerNode,this.onImageQuantized.bind(this,t,e,!1),this._onImageQuantizeError.bind(this))},_onImageQuantizeError:function _onImageQuantizeError(){this._imageQualityWarningNode&&w.a.removeNode(this._imageQualityWarningNode);var e=dlang("generator","Your embroidery design can't be created because the file you added contains too many colors or is empty.");new ce.a(e,"danger",1e4,!0).prepend(this._par.getNodeMainMockupArea())},onImageQuantized:function(e,t,i,n,r){i||this.customizingDesignWithNewEmbroideryColorPicker()||!(r>ge.a.EMBROIDERY_IMAGE_COLOR_COUNT_LIMIT||0===r)||(this._showImageQualityWarning=!0);var a=i;e.overrideColors=n,i||this._par.templates.addLayerToPlacementTemplates(t.id,e,!1,!0),this._par.onLayerColorsChanged&&this._par.onLayerColorsChanged(t.id,e,!1,a,i)},colorizeEmbroideryLayers:function(){if((this._isNewPickerEnabled()||this.customizingDesignWithNewEmbroideryColorPicker())&&this._par.getAvailablePlacements){var e=!1;this._colorizeImageCallStack=[],this._par.getAvailablePlacements().forEach(function(t){this._par.templates.getLayersByType(z.a,t.id).forEach(function(i){i.overrideColors&&(e=!0,this.recolorizeImageLayer(i,t.id,!0,!0,!1))}.bind(this)),this._par.templates.getLayersByType(U.a,t.id).forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t.id,e,!0)}.bind(this)),this._par.templates.getLayersByType(V.a,t.id).forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t.id,e,!0)}.bind(this))}.bind(this)),!e&&this._par.onAllImagesProcessed&&this._par.onAllImagesProcessed()}},recolorizeImageLayer:function(e,t,i,n,r){n&&this._colorizeImageCallStack.push(e.uniqueId),x.a.show(this._par.designerNode),(new B).colorizeImage(e.fileItem.urlPreview,Object.keys(e.overrideColors),Object.values(e.overrideColors),this._onImageRecolorized.bind(this,e,t,i,n,r))},_onImageRecolorized:function(e,t,i,n,r,a){var o;if(this._par.getSelectedPlacementId)if(e.overrideImage=a,e.overrideImagePulse=null,this.updateSelectedEmbroideryPaletteColors(e),n)this._colorizeImageCallStack.pop(),0===this._colorizeImageCallStack.length&&(r&&this.recalcGlobalSelectedEmbroiderySelectedColors(),this._par.onAllImagesProcessed&&(o=this._par.onAllImagesProcessed,this._par.onAllImagesProcessed()),x.a.hide(this._par.designerNode)),this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t,e,i,o);else if(t===this._par.getSelectedPlacementId()){if(this._showImageQualityWarning){this._showImageQualityWarning=!1;var s=this._par.getNodeMainMockupArea();s&&(this._imageQualityWarningNode||(this._imageQualityWarningNode=this._getImageQualityWarningNode().node),w.a.insertBefore(this._imageQualityWarningNode,s))}this._par.onAllImagesProcessed&&(o=this._par.onAllImagesProcessed,this._par.onAllImagesProcessed()),setTimeout(function(){this._par.templates.setActiveLayer(e,null,!0),this._par.editImageLayer&&this._par.editImageLayer(e),this._par.scheduleEmbroideryPreviewUpdate&&this._par.scheduleEmbroideryPreviewUpdate(t,e,i,o),x.a.hide(this._par.designerNode)}.bind(this),1e3)}},updateSelectedEmbroideryPaletteColors:function(e){this._embroiderySelectedPaletteColorsByLayer||(this._embroiderySelectedPaletteColorsByLayer={});var t=[];if(e){if(e instanceof z.a){var i=Object.values(e.overrideColors);t=i.filter((function(e,t){return e&&i.indexOf(e)==t})).map((function(e){if(e)return new N.a.Color.fromHex(e)}))}else e.isTextLayer()&&t.push(new N.a.Color.fromHex(e.color));this._embroiderySelectedPaletteColorsByLayer[e.uniqueId]=t}this.recalcGlobalSelectedEmbroiderySelectedColors()},recalcGlobalSelectedEmbroiderySelectedColors:function(){if(this._isNewPickerEnabled()&&this._par.getSelectedPlacementId){var e=[];if(this._par.templates.getTemplatesByPlacement(this._par.getSelectedPlacementId()).forEach(function(t){for(var i in t.layers){var n=t.layers[i];-1===e.indexOf(n.uniqueId)&&e.push(n.uniqueId)}}.bind(this)),this._embroiderySelectedPaletteColorsByLayer||(this._embroiderySelectedPaletteColorsByLayer={}),this._embroiderySelectedPaletteColorsByLayer)for(var t in this._embroiderySelectedPaletteColors.length=0,e){var i=this._embroiderySelectedPaletteColorsByLayer[e[t]];for(var n in i)if(i[n]){var r=i[n];r.isContainedBy(this._embroiderySelectedPaletteColors)||this._embroiderySelectedPaletteColors.push(r)}}}},hasEmbroideryThreadColorsError:function hasEmbroideryThreadColorsError(){return!!this._isNewPickerEnabled()&&this._embroiderySelectedPaletteColors.length>ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS},manageEmbroiderySelectedColorsOnLayerRemove:function(e){this._embroiderySelectedPaletteColorsByLayer&&this._embroiderySelectedPaletteColorsByLayer[e.uniqueId]&&delete this._embroiderySelectedPaletteColorsByLayer[e.uniqueId],this.recalcGlobalSelectedEmbroiderySelectedColors()},switchToNewEmbrColorPicker:function(){var e=Object(Q.a)();if(this.canSwitchToNewEmbrColorPicker()&&this._par.pickerConfig&&this._par.pickerConfig.productOptionsValues&&e&&this._par.getAvailablePlacements){console.log("Switching to new embroidery color picker...");var t=e.getOptionItems(),i=[];if(this._colorizeImageCallStack=[],this._par.getAvailablePlacements().forEach(function(e){if(t.forEach((function(t){-1!==t.getConditionFilesTypes().indexOf(e.id)&&t.type===Dr.a.TYPE_COLOR&&i.push(t.name)})),this._par.templates.hasLayersForPlacement(e.id,z.a)){var n,r=[],a={};t.forEach(function(t){-1!==t.getConditionFilesTypes().indexOf(e.id)&&(t.type===Dr.a.TYPE_COLOR&&-1!==t.getConditionLayerTypes().indexOf(z.a.TYPE)&&r.push(t.name),t.type===Dr.a.TYPE_RADIO&&t.name===Dr.a.NAME_EMBROIDERY_TYPE&&(n=this._par.pickerConfig.productOptionsValues[t.name]))}.bind(this));var o=Object.keys(this._par.pickerConfig.productOptionsValues).filter((function(e){return-1!==r.indexOf(e)}));for(var s in o){var l=this._par.pickerConfig.productOptionsValues[o[s]];if(l)for(var c in l){var u=l[c].toLowerCase();a[u]||(a[u]=u)}}this._par.templates.getLayersByType(z.a,e.id).forEach(function(t){n||(n=ee.getDefaultEmbroideryType()),t.embroideryType=n,t.migratedToNewPicker=!0,n===Z.a.DIGITIZATION_BOTH&&(t.isEmbroideryAfterMigration=!0),this.onImageQuantized(t,e,!0,a)}.bind(this))}var d=function(e){e.embroideryType=Z.a.DIGITIZATION_FLAT,e.migratedToNewPicker=!0,this.updateSelectedEmbroideryPaletteColors(e)}.bind(this);this._par.templates.hasLayersForPlacement(e.id,U.a)&&(this._par.templates.getLayersByType(U.a,e.id).forEach(d),this._par.templates.getLayersByType(V.a,e.id).forEach(d),this._par.onAllImagesProcessed&&this._par.onAllImagesProcessed())}.bind(this)),this._par.getProductOptionsPicker&&i.length>0){var n=this._par.getProductOptionsPicker();for(var r in i)n.setValue(i[r],null)}}},canSwitchToNewEmbrColorPicker:function(){return this._isNewPickerEnabled()&&!this._par.isCustomizingMode&&this._hasLayersWithoutOverrideColorsOrEmbroideryType()},getEmbrTypeFromDigitizedItem:function(e){if(!e.digitizedItems||!e.digitizedItems.itemList)return null;var t=null;for(var i in e.digitizedItems.itemList){var n=e.digitizedItems.itemList[i];if(n.puffType){if(n.puffType!==Z.a.DIGITIZATION_BOTH)return n.puffType;t=n.puffType}}return t},_hasLayersWithoutOverrideColorsOrEmbroideryType:function(){if(!this._par.getAvailablePlacements)return!1;var e=this._par.getAvailablePlacements();for(var t in e){var i=e[t],n=this._par.templates.getLayersByType(z.a,i.id);for(var r in n)if(!n[r].overrideColors&&!n[r].embroideryType)return!0;var a=this._par.templates.getLayersByType(U.a,i.id);for(var o in a)if(!a[o].embroideryType)return!0}return!1},_getImageQualityWarningNode:function(){return new mi.a({type:"warning",className:"embroidery-image-quality-banner",content:dlang("generator","Your embroidery design may not turn out as expected â the uploaded file has too many colors or is low quality due to compression."),closable:!0})},_isNewPickerEnabled:function(){return this._par.shouldAllowFileColorChanger&&this._par.shouldAllowFileColorChanger()},hasLayerWithPartial3dType:function(e){if(!e)return!1;for(var t in e){var i=Object.values(e[t]);for(var n in i){return i[n].layers.some((function(e){return e.embroideryType===Z.a.DIGITIZATION_BOTH}))}}return!1},customizingDesignWithNewEmbroideryColorPicker:function(){if(!this._par.isCustomizingMode)return!1;var e=this._par.templates.getFirstLayer();return e&&e.embroideryType},reScheduleEmbroideryPreviewForTemplate:function(){this._par.scheduleEmbroideryPreviewUpdate&&this.lastZoomedInEmbroideryTemplate&&this.lastZoomedInEmbroideryTemplate.layers.forEach(function(e){this._par.scheduleEmbroideryPreviewUpdate(this._par.getSelectedPlacementId(),e,!1)}.bind(this))}});window&&((globalThis||{}).PFProductPushEmbroideryHelper=xr);var Fr=i("MMbA"),Mr=i("zsu5"),Br=i("EqHI"),Vr=Class({_templateType:"",__construct:function(){this.node=tag("div","label-switcher-node")},_render:function(){var e=this._templateType;w.a.clearNode(this.node);var t=tag("div",null,[tag("div",{style:{position:"relative",overflow:"hidden",top:"0",textAlign:"center",margin:"0 50px 0 50px"}},[this._switchNative=tag("a",{className:"type-native blue-link",style:{padding:"0 10px"},text:lang("Inside label template"),onclick:this._onSelectInsideLabelCallback.bind(this,Br.a.LABEL_NATIVE)}),this._switchCustom=tag("a",{className:"type-custom blue-link",style:{padding:"0 10px"},text:lang("Change to Blank"),onclick:this._onSelectInsideLabelCallback.bind(this,Br.a.LABEL_CUSTOM)})])]);this.setActiveSwitch(e),t.append(this.node)},show:function(e,t){this._onSelectInsideLabelCallback=t,this._templateType=e,this._render()},hide:function(){w.a.clearNode(this.node)},setActiveSwitch:function(e){e===Br.a.LABEL_NATIVE?(w.a.removeClassName(this._switchCustom,"active"),w.a.addClassName(this._switchNative,"active")):(w.a.removeClassName(this._switchNative,"active"),w.a.addClassName(this._switchCustom,"active"))}},w.a.Base);window&&((globalThis||{}).PFProductPushLabelSwitcher=Vr);var jr=i("KLvT");function Ur(e){return(Ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zr(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Gr(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){zr(a,n,r,o,s,"next",e)}function s(e){zr(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Hr(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function qr(e,t){return(qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Zr(e);if(t){var r=Zr(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Wr(this,i)}}function Wr(e,t){return!t||"object"!==Ur(t)&&"function"!=typeof t?Kr(e):t}function Kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xr(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,$r(e,t,"get"))}function Qr(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,$r(e,t,"set"),i),i}function $r(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Jr=new WeakMap,ea=new WeakMap,ta=new WeakSet,ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qr(e,t)}(a,e);var t,i,n,r=Yr(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=r.call(this),ta.add(Kr(t)),Jr.set(Kr(t),{writable:!0,value:void 0}),ea.set(Kr(t),{writable:!0,value:void 0}),Qr(Kr(t),ea,e);var i=$(".modal-open").length?"pf-mt-40":"pf-mt-56";return t.node=tag("div","designer-mockup-placement "+i),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Kr(t),ta,na).call(Kr(t)),t}return t=a,(i=[{key:"destroy",value:function(){Xr(this,Jr).destroy(),Qr(this,Jr,null)}}])&&Hr(t.prototype,i),n&&Hr(t,n),a}(ve.a);function na(){return ra.apply(this,arguments)}function ra(){return(ra=Gr(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"mockup-placement":function(){return i.e(246).then(i.bind(null,"dq3u"))}},t.template="<mockup-placement \n            @on-update-custom-mockup-layer=\"emitEvent('onUpdateCustomMockupLayer', $event)\"\n        />",t.emitEvent=function(e,t){Xr(n,ea)[e]&&Xr(n,ea)[e](t)},t.plugins={store:Object(jr.a)()},Qr(this,Jr,new ye.a(t)),Xr(this,Jr).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var aa=i("hwSo"),oa=Class({_placements:[],_selectedPlacement:null,_priceData:null,_designer:null,__construct:function(e,t,i){this._onSelectPlacement=e,t&&(this._priceData=t),this._designer=i||null,this.node=tag("div","text-center")},setPlacements:function(e){if(this._placements=e,!this._selectedPlacement)for(var t in e){this._selectedPlacement=e[t];break}this._render()},setPriceDataAndRender:function(e){this._priceData=e,this._render()},_render:function(){(w.a.clearNode(this.node),Object(je.f)())&&new ia({onUpdateCustomMockupLayer:aa.a.bind(this,{templates:this._designer.getTemplates()})}).append(this.node);if(!(this._placements.length<=1)){var e=this._shouldShowPrices(),t=new gi.a("secondary "+(e?"subtitle":""));for(var i in this._placements){var n=this._placements[i],r=this._selectedPlacement&&this._selectedPlacement.id==n.id;!0!==n.hide&&t.add({caption:n.title.replace(/ print$/,""),badge:n.isNew?tag("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",subtitle:e?this._getPrice(n.id):"",isActive:r,onclick:this._selectPlacement.bind(this,n),customId:n.id})}t.append(this.node)}},_shouldShowPrices:function(){return!!this._priceData&&Object.values(this._priceData).filter((function(e){return e.basePrice||e.finalPrice})).length>0},_selectPlacement:function(e,t){t=void 0===t||t,this._selectedPlacement=e,t&&this._onSelectPlacement(e),this._render()},_getPrice:function(e){if(!this._priceData)return"";if(!this._priceData.hasOwnProperty(e))return"-";var t=this._priceData[e],i="-";return t.canDisplayPrice||(i=dclang("products","price","Incl")),t.basePrice>0&&t.canDisplayPrice?i="+ "+prettyMoney(t.basePrice,t.currency):t.finalPrice&&(i="+ "+prettyMoney(t.finalPrice,t.currency)),i},getSelectedPlacement:function(){return this._selectedPlacement},getSelectedPlacementId:function(){return this._selectedPlacement?this._selectedPlacement.id:null},setSelectedPlacement:function(e,t){t=void 0!==t&&t,this._selectPlacement(e,t)},deselectPlacement:function(){this._selectedPlacement=null},setSelectedPlacementById:function(e,t){for(var i in this._placements){var n=this._placements[i];if(n.id==e)return void this.setSelectedPlacement(n,t)}}},w.a.Base);window&&((globalThis||{}).PFProductPushPlacementSelector=oa);var sa=Class({generatorVariants:[],activeGeneratorVariant:null,templates:null,onGeneratorVariantSelect:null,onGeneratorVariantRemove:null,getDesignFill:null});window&&((globalThis||{}).PFProductPushVariantAreaPar=sa);var la=Class({generatorVariant:null,templates:null,template:null,onRemove:null,onSelect:null,variantArea:null,getDesignFill:null});window&&((globalThis||{}).PFProductPushVariantAreaItemPar=la);var ca=i("nvph"),ua=Class({_par:null,__construct:function(e){this._par=e;var t=new ca.a;t.maxHeight=85,t.maxWidth=78,t.generatorVariant=this._par.generatorVariant,t.variantArea=this._par.variantArea,t.template=this._par.template,t.getDesignFill=this._par.getDesignFill,this._mockupPreview=new Or.a(t),this._overlayNode=tag("div"),this.node=tag("div",{className:"variant-item pf-rounded pf-hover-shadow",onclick:function(e){e.stopImmediatePropagation(),this._par.onSelect&&this._par.onSelect()}.bind(this)},[this._nodeQuality=tag("div","quality-icon"),this._par.onRemove?tag("a",{className:"variant-item__remove",onclick:function(e){e.stopImmediatePropagation(),this._par.onRemove()}.bind(this)}):"",this._mockupPreview,tag("span","",this._par.generatorVariant.title),this._overlayNode]),this._updateDPIWarnings()},setActive:function(e){e?w.a.addClassName(this.node,"active"):w.a.removeClassName(this.node,"active")},_updateDPIWarnings:function(){var e,t=this._par.templates.getQuality(),i=null===(e=Object(Q.a)())||void 0===e?void 0:e.isEmbroidery(),n=t.getTemplateQualityPercent(this._par.template.placementId,this._par.template.templateId);t.isQualityBad(n)&&!i?this._showDpiLabel("quality-bad",dlang("generator","Your file is not large enough to<br>meet the minimum requirements!")):!t.isQualityMedium(n)&&!t.isQualityBadUpscale(n)||i?this._hideDpiLabel():this._showDpiLabel("quality-medium",dlang("generator","We strongly suggest a larger file<br>for better results"))},_hideDpiLabel:function(){this._nodeQuality.className="quality-icon",w.a.removeClassName(this.node,"quality-bad"),w.a.removeClassName(this.node,"quality-medium"),$(this.node).tooltip("destroy"),this.node.title=""},_showDpiLabel:function(e,t){this._hideDpiLabel(),this._nodeQuality.className="quality-icon icon-exclamation",w.a.addClassName(this.node,e),this.node.title=t,this.node.title&&$(this.node).tooltip({container:this.node,html:"true"})},getTemplateKey:function(){return this._par.template.getKey()},getTemplate:function(){return this._par.template},updateDpiWarning:function(e,t,i){this._mockupPreview&&"delay"!==i&&"mirror"!==i&&P.a.delay("PFProductPushVariantAreaItem._updateDPIWarnings-"+this.getGeneratorVariantId(),this._updateDPIWarnings,100)},renderMockupPreviewString:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._mockupPreview.renderPreviewString(!0,e)},getGeneratorVariantId:function(){return this._par.generatorVariant.generatorVariantId},hideOverlay:function(){w.a.removeClassName(this._overlayNode,"variant-item__overlay")},showOverlay:function(){w.a.addClassName(this._overlayNode,"variant-item__overlay")}},w.a.Base);window&&((globalThis||{}).PFProductPushVariantAreaItem=ua);var da=Class({_variantItems:[],_par:null,_generatorVariants:[],_activeGeneratorVariant:null,_isVariantOverlayVisible:!1,_variantOverlayHandle:null,__construct:function(e){this._par=e,this._subscribeTemplateEvents(),this.node=tag("div","generator-variant-area"),this.setGeneratorVariants(this._par.generatorVariants.slice(),this._par.activeGeneratorVariant)},_render:function(){for(var e in w.a.clearNode(this.node),this._variantItems=[],this._generatorVariants){var t,i=this._generatorVariants[e],n=this._par.templates.getUserTemplate(i.placementId,i.templateId),r=new la;r.generatorVariant=i,r.templates=this._par.templates,r.template=n,r.onRemove=null===(t=this._par.onGeneratorVariantRemove)||void 0===t?void 0:t.bind(null,i.generatorVariantId),r.onSelect=this._onGeneratorVariantSelected.bind(this,i.generatorVariantId),r.variantArea=this,r.getDesignFill=this._par.getDesignFill;var a=new ua(r);this._activeGeneratorVariant&&this._activeGeneratorVariant.generatorVariantId===i.generatorVariantId&&a.setActive(!0),this._variantItems.push(a),a.append(this.node),a.renderMockupPreviewString()}this._variantItems.length>1&&this.hasUnrelatedTemplates()&&tag("div","overlay-notice pf-py-12",[tag("div","overlay-notice__pattern"),tag("div","overlay-notice__text pf-px-16",dlang("generator","Items with the overlay need to be adjusted individually."))]).append(this.node)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onTemplatesChangedExternallyVariant)},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnLayerAddedOrRemovedListener(this._onTemplatesChangedExternallyVariant).addOnTemplatePositionsChangedListener(this._onTemplatesChangedExternallyVariant)},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_onGeneratorVariantSelected:function(e){if(!this._activeGeneratorVariant||this._activeGeneratorVariant.generatorVariantId!==e){for(var t=0,i=this._variantItems.length;t<i;t++){var n=this._variantItems[t];n.setActive(n.getGeneratorVariantId()===e)}this._par.onGeneratorVariantSelect(e)}},setGeneratorVariants:function(e,t){var i=this._activeGeneratorVariant===t,n=this._generatorVariants.map((function(e){return e.getComparisonKey()})).join("|")===e.map((function(e){return e.getComparisonKey()})).join("|");i&&n||(this._activeGeneratorVariant=t,this._generatorVariants=e,n||this._render())},getGeneratorVariants:function(){return this._generatorVariants},_onTemplatesChangedExternallyVariant:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()){for(var n=0,r=this._variantItems.length;n<r;n++)for(var a=this._variantItems[n],o=0,s=e.length;o<s;o++){var l=e[o];l.getKey()===a.getTemplateKey()&&a.updateDpiWarning(l,t,i)}this._showTimedVariantOverlay()}},renderMockupPreviewStrings:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=0,i=this._variantItems.length;t<i;t++){var n=this._variantItems[t];n.renderMockupPreviewString(e)}},_showTimedVariantOverlay:function(){var e=this;this._isVariantOverlayVisible&&!this._variantOverlayHandle||(this._showVariantItemsOverlay(),this._variantOverlayHandle&&clearTimeout(this._variantOverlayHandle),this._variantOverlayHandle=setTimeout((function(){e._hideVariantItemsOverlay(),e._variantOverlayHandle=null}),2e3))},_showVariantItemsOverlay:function(){if(this._activeGeneratorVariant&&this._variantItems){this._isVariantOverlayVisible=!0;var e=this._par.templates.getUserTemplate(this._activeGeneratorVariant.placementId,this._activeGeneratorVariant.templateId);for(var t in this._variantItems){var i=this._variantItems[t],n=i.getTemplate();null!=e&&e.isRelated(n)||i.showOverlay()}}},_hideVariantItemsOverlay:function(){for(var e in this._variantItems)this._variantItems[e].hideOverlay();this._isVariantOverlayVisible=!1},hasUnrelatedTemplates:function(){var e=this._par.templates.getUserTemplate(this._activeGeneratorVariant.placementId,this._activeGeneratorVariant.templateId);for(var t in this._variantItems){var i=this._variantItems[t].getTemplate();if(!e.isRelated(i))return!0}return!1}},w.a.Base);window&&((globalThis||{}).PFProductPushVariantArea=da);var ha=Class({validateAddingLayer:null,getSelectedMockupVariant:null,getOrientation:null,getDesignMeta:null,getTechnique:null});(globalThis||{}).PFProductPushTemplatesPar=ha;var pa=Class({_onAdded:[],_onRemoved:[],_onTemplatePositionsChanged:[],_onTemplateResized:[],_onLayerRotated:[],_onOrderChanged:[],_onAddedOrRemoved:[],_onActiveLayerChanged:[],_onLayerConfigurationChanged:[],_onLayerCustomizableStateChanged:[],_onDesignFillChanged:[],_onLayerColorsChanged:[],_onZoomChanged:[],_onPreviewChanged:[],_onCropStateChanged:[],_onLifelikeChanged:[],_allListeners:["_onAdded","_onRemoved","_onTemplatePositionsChanged","_onTemplateResized","_onLayerRotated","_onOrderChanged","_onAddedOrRemoved","_onActiveLayerChanged","_onLayerConfigurationChanged","_onDesignFillChanged","_onLayerColorsChanged","_onZoomChanged","_onPreviewChanged","_onCropStateChanged","_onLifelikeChanged"],__construct:function(){window.dumpListeners=this._dumpListeners},_dumpListeners:function(){for(var e in this._allListeners)if(this._allListeners.hasOwnProperty(e)){var t=this._allListeners[e],i=this[t].length;if(i){console.log("âââ¬"+t,i);for(var n=0;n<i;n++){var r=this[t][n];console.log("â âââ%c"+r.name.substring(6)+"("+r.__args+")","color:dimgray")}}else console.log("âââ¬"+t,i),console.log("â âââ%c(empty)","color:dimgray")}},addOnLayerAddedListener:function(e){return this._onAdded.push(e),this},addOnLayerAddedOrRemovedListener:function(e){return this._onAddedOrRemoved.push(e),this},addOnLayerRemovedListener:function(e){return this._onRemoved.push(e),this},addOnTemplatePositionsChangedListener:function(e){return this._onTemplatePositionsChanged.push(e),this},addOnTemplateResizedListener:function(e){return this._onTemplateResized.push(e),this},addOnLayerRotatedListener:function(e){return this._onLayerRotated.push(e),this},addOnLayerOrderChangedListener:function(e){return this._onOrderChanged.push(e),this},addOnActiveLayerChanged:function(e){return this._onActiveLayerChanged.push(e),this},addOnLayerConfigurationChanged:function(e){return this._onLayerConfigurationChanged.push(e),this},addOnDesignFillChanged:function(e){return this._onDesignFillChanged.push(e),this},addOnLayerCustomizableStateChanged:function(e){return this._onLayerCustomizableStateChanged.push(e),this},addOnLayerColorsChanged:function(e){return this._onLayerColorsChanged.push(e),this},addOnZoomChanged:function(e){return this._onZoomChanged.push(e),this},addonPreviewChanged:function(e){return this._onPreviewChanged.push(e),this},addOnCropStateChanged:function(e){return this._onCropStateChanged.push(e),this},addOnLifelikeChanged:function(e){return this._onLifelikeChanged.push(e),this},notifyPreviewChanged:function(e,t,i){this._notify(this._onPreviewChanged,arguments)},notifyLayerRemoved:function(e,t){this._notify(this._onRemoved,arguments),this._notify(this._onAddedOrRemoved,[].concat(Array.prototype.slice.call(arguments),[me.r]))},notifyLayerCropStateChanged:function(e,t){this._notify(this._onLayerConfigurationChanged,arguments),this._notify(this._onCropStateChanged,arguments)},notifyLifelikeChanged:function(e,t,i,n){this._notify(this._onLifelikeChanged,arguments)},notifyLayersAdded:function(e){this._notify(this._onAdded,arguments),this._notify(this._onAddedOrRemoved,[].concat(Array.prototype.slice.call(arguments),[me.q]))},notifyLayerOrderChanged:function(){this._notify(this._onOrderChanged,arguments)},notifyTemplatePositionsChanged:function(e,t,i){this._notify(this._onTemplatePositionsChanged,arguments)},notifyTemplateResized:function(e,t,i){this._notify(this._onTemplateResized,arguments)},notifyLayerRotated:function(e,t){this._notify(this._onLayerRotated,arguments)},notifyActiveLayerChanged:function(e,t){this._notify(this._onActiveLayerChanged,arguments)},notifyLayerConfigurationChanged:function(e,t){this._notify(this._onLayerConfigurationChanged,arguments)},notifyDesignFillChanged:function(){this._notify(this._onDesignFillChanged,arguments)},notifyLayerCustomizableStateChanged:function(e){this._notify(this._onLayerCustomizableStateChanged,[e])},notifyLayerColorsChanged:function(e,t,i){this._notify(this._onLayerColorsChanged,[e,t,i])},notifyZoomChanged:function(e){this._notify(this._onZoomChanged,[e])},_notify:function(e,t){for(var i=0,n=(e=e.slice()).length;i<n;i++)e[i].apply(null,t)},unsubscribe:function(e){for(var t=0,i=this._allListeners.length;t<i;t++){var n=this._allListeners[t];this[n]=this[n].filter((function(t){return t!==e}))}return this}});window&&((globalThis||{}).PFProductPushTemplateChangeListeners=pa);var fa=i("zfrb"),ma=i("uGFp"),_a=i("Pxqf"),va=i("y70k"),ya=i("Iy0a"),ba=0;function Pa(){return++ba}var Ca=i("B5vy"),Ta=i("mBxu"),wa=i("YNgQ"),Ia=Class({_requiredDpi:null,_userTemplates:{},_changeListeners:null,_quality:null,_activeLayer:null,_par:null,closedTransparencyWarnigns:{},_shouldShowUnrelatedTemplatesPopover:!0,__construct:function(e){this._par=e,this._changeListeners=new pa,this._quality=new fa.a(this)},clone:function(){var e=this,t={};Object.keys(this._par).forEach((function(i){t[i]=e._par[i]}));var i=new Ia(t);this.getRequiredDpi()&&i.setRequiredDpi(this.getRequiredDpi());var n=this.getTemplates()||{},r=this._par.getTechnique();if(n){var a={};Object.keys(n).forEach((function(e){var t=n[e]||{},i={};Object.keys(t).forEach((function(e){var n=t[e];i[e]=n.getCloneWithLayers(r)})),a[e]=i})),i._userTemplates=a}return this.getActiveLayer()&&i.silentlySetActiveLayer(this.getActiveLayer()),i},setRequiredDpi:function(e){this._requiredDpi=e},getRequiredDpi:function(){return this._requiredDpi},getChangeListener:function(){return this._changeListeners},getQuality:function(){return this._quality},hasTemplates:function(e){return!_.isEmpty(this._userTemplates[e])},isPlacementSimple:function(e){if(!this._userTemplates[e])return!0;for(var t in this._userTemplates[e]){var i=this._userTemplates[e][t].layers;if(i.length>1)return!1;for(var n in i)if(!i[n].isSimple())return!1}return!0},isCoverMode:function(){var e=!1;return this._loopTemplates((function(t){e=e||t.isCover()})),e},areTextLayersOverlapping:function(){var e=!1;return this._loopTemplates((function(t){t.areLayersOverlapping({layerTypeInstances:[U.a,V.a]})&&(e=!0)})),e},getRelatedTemplates:function(e){var t=[];return this._loopTemplates((function(i){e.isRelated(i)&&t.push(i)})),t},setUserTemplateIfMissing:function(e){return this._userTemplates[e.placementId]||(this._userTemplates[e.placementId]={}),!this._userTemplates[e.placementId][e.templateId]&&(this._userTemplates[e.placementId][e.templateId]=e,!0)},overrideLayerImages:function(e,t,i){this._loopTemplates(function(n){if(n.placementId===e)for(var r=0,a=n.layers.length;r<a;r++){var o=n.layers[r];o instanceof z.a&&(o.fileItem.fileId===t&&(o.overrideImage=i,this.getChangeListener().notifyLayerConfigurationChanged(o,this)))}}.bind(this))},getUserTemplate:function(e,t){var i=this._userTemplates[e];if(i&&i[t])return i[t];console.error(dlang("generator","Template is missing."))},reorderLayerGroup:function(e,t,i){var n=this.getTemplateByLayer(e);this._setLayerIndex(n,e,t,i);for(var r=n.getMirroredLayers(),a=0,o=r.length;a<o;a++){var s=r[a],l=n.getMirroredLayer(s),c=n.getLayerIndex(l);this._setLayerIndex(n,s,c,i)}},reorderLayer:function(e,t){var i=this.getTemplateByLayer(e);this._setLayerIndex(i,e,t,1);for(var n=i.getMirroredLayers(),r=0,a=n.length;r<a;r++){var o=n[r],s=i.getMirroredLayer(o),l=i.getLayerIndex(s);this._setLayerIndex(i,o,l,1)}},_setLayerIndex:function(e,t,i,n){var r=e.getLayerIndex(t);if(!(r<0||i<0||i>=e.layers.length)){var a=e.getMirroredLayer(t),o=-1;a&&(o=e.getLayerIndex(a)),this._loopTemplates((function(t){if(t.layers.length&&t.placementId===e.placementId){for(var a=t.layers.splice(r,n),s=a.length;s--;){var l=a[s];t.layers.splice(i,0,l)}if(o>-1)for(var c=t.layers.splice(o,n),u=c.length;u--;){var d=c[u];t.layers.splice(i,0,d)}}})),this.getChangeListener().notifyLayerOrderChanged()}},getActiveTemplate:function(e){var t,i;if(!(this._activeLayer||null!==(t=this._activeGroupLayers)&&void 0!==t&&t.length))return null;var n=null!==(i=this._activeGroupLayers)&&void 0!==i&&i.length?this._activeGroupLayers[0]:this._activeLayer,r=this.getTemplateByLayer(n);return r&&r.placementId===e?r:null},getActiveLayer:function(){return this._activeLayer},getActiveGroupLayers:function(){return this._activeGroupLayers},removeGroup:function(e,t,i,n){var r=this;t.forEach((function(t){return r.removeLayer(e,t,i,n)}))},removeLayer:function(e,t,i,n){if(e){var r=e.getLayerIndex(t);if(r<0)console.warn("Layer index WAS NOT FOUND when removing it");else{var a=e.placementId;this._loopTemplates(function(e){if(e.placementId===a&&e.layers.length){var t=e.layers.splice(r,1)[0];if(t.hasTransparencyIssues&&t.hasTransparencyIssues()&&m.a.trackEvent("transparency-warning-remove-layer",{event:"transparency-warning",eventCategory:"Generator transparency warning message",eventAction:"Graphic file removed",eventLabel:t.fileItem?t.fileItem.fileId:null},!0),this._shouldShowUnrelatedTemplatesPopover=0===e.layers.length,t&&(this._activeLayer&&this._activeLayer.uniqueId===t.uniqueId&&(this._activeLayer=null),!i)){var n=e.getMirroredLayer(t);n&&delete n.parentLayerUniqueId}}}.bind(this)),m.a.unblockEvent("transparency-warning-remove-layer"),n||this._changeListeners.notifyLayerRemoved([e],t)}}else console.warn("Removing layer without template!")},changeCustomizableState:function(e,t,i){var n=e.getLayerIndex(t);n<0?console.error("Layer not found"):this._loopTemplates((function(t){if(e.placementId===t.placementId){var r=t.layers[n];r&&(r.isCustomizable=i)}}))},silentlyRemoveAllLayers:function(){this._activeLayer=null,this._loopTemplates(function(e){e.layers=[]}.bind(this))},getByKey:function(e){for(var t in this._userTemplates)for(var i in this._userTemplates[t]){var n=this._userTemplates[t][i];if(n.getKey()===e)return n}alert(dlang("generator","Template by key not found: {key}").replace("{key}",e))},getPlacementIdsHavingFiles:function(e){var t=[];return this._loopTemplates((function(i){i.hasLayers(e)&&-1===t.indexOf(i.placementId)&&t.push(i.placementId)})),t},getPlacementCountHavingFiles:function(){return this.getPlacementIdsHavingFiles().length},hasLayersForPlacement:function(e,t){return this.getPlacementIdsHavingFiles(t).indexOf(e)>-1},copyLayersFromTemplates:function(e){var t=e.map((function(e){return e.getKey()})),i=[];if(this._loopTemplates((function(e){i.push(e.getKey())})),i.sort().join()!==t.sort().join())for(var n in this._userTemplates)Object.keys(this._userTemplates[n]).length>0&&(console.log("OVERRIDING OLD LAYERS for "+n),this._userTemplates[n]={});var r=this.silentlyCopyLayers(e);this.getChangeListener().notifyLayersAdded(r)},silentlyCopyLayers:function(e){var t=[],i=this._par.getTechnique();for(var n in e){var r=e[n].getCloneWithLayers(i);if(!this.setUserTemplateIfMissing(r)){var a=!1,o=this.getUserTemplate(r.placementId,r.templateId);for(var s in r.layers){var l=r.layers[s];l instanceof U.a?pe.a.DEPENDENCIES.TEXT2SVG.TextCalculator(l):l instanceof V.a&&pe.a.calculateTextboxPositions(l),l instanceof z.a&&l.overrideColors&&this.getChangeListener().notifyLayerColorsChanged(r.placementId,l),o.layers.push(l),a=!0}a&&t.push(o)}}return t},copyLayersBetweenTemplates:function(e,t,i){var n=this._par.getTechnique(),r=this.getUserTemplate(e,i).getCloneWithLayers(n),a=this.getUserTemplate(t,i);a.layers=r.layers,this.setFeatureDesignCopied(e,t,i),this.getChangeListener().notifyLayersAdded([a])},copyLayerToPlacementTemplates:function(e,t){for(var i=0,n=t.length;i<n;i++){var r=t[i];e=e.getOriginalClone(!0),this.addLayerToPlacementTemplates(r.id,e,!0)}},addMirroredLayersForTemplates:function(e){Object.keys(this._userTemplates).length||console.error(dlang("generator","Empty user templates, cannot add mirrored layer"));var t=[];this._loopTemplates(function(i){if(i.hasLayers()){for(var n,r,a=i.layers.filter((function(t){var n=!(i.getMirroredLayer(t)||t.wasMirrored()&&!e),r=t.patternType;return n&&!r})),o=[],s=0,l=a.length;s<l;s++){var c=a[s];if(this._par.validateAddingLayer(c)){c instanceof U.a?pe.a.DEPENDENCIES.TEXT2SVG.TextCalculator(c):c instanceof V.a&&pe.a.calculateTextboxPositions(c);var u=c.getOriginalClone(!0);u.parentLayerUniqueId=c.uniqueId,this._recalculateMirroredPosition(c.position,u.position),c.cropPosition&&this._recalculateMirroredCropPosition(c.cropPosition,u.cropPosition,c.position,u.position),"QUICK_DESIGN"===c.groupType&&c.groupId!==r&&(n=Pa(),r=c.groupId),"QUICK_DESIGN"===u.groupType&&(u.groupId=n);var d=i.getLayerIndex(c);i.layers.splice(d,0,u),o.push(u)}}o.length>0&&t.push(i)}}.bind(this)),t.length>0&&this.getChangeListener().notifyLayersAdded(t)},removeMirroredLayersFromTemplates:function(){Object.keys(this._userTemplates).length||alert(dlang("generator","Empty user templates, cant remove mirrored layer")),this._loopTemplates(function(e){var t=e.getMirroredLayers();for(var i in t)this.removeLayer(e,t[i],!0)}.bind(this))},getUniqueFilesForPlacement:function(e){if(!this._userTemplates[e])return[];for(var t in this._userTemplates[e]){var i=[],n=[],r=this.getUserTemplate(e,t).layers;for(var a in r){var o=r[a];o instanceof z.a&&(i.indexOf(o.fileItem.fileId)>-1||(n.push(o.fileItem),i.push(o.fileItem.fileId)))}return n}return[]},getUsedFonts:function(){var e=[];return this._loopTemplates((function(t){e=e.concat(t.layers.filter((function(e){return e.isTextLayer()})).map((function(e){return e.font})).filter((function(e,t,i){return i.indexOf(e)===t})))})),e},getUsedTextColors:function(e){var t=[];return this._loopTemplates((function(i){e===i.placementId&&(t=t.concat(i.layers.filter((function(e){return e.isTextLayer()})).map((function(e){return e.color})).filter((function(e,t,i){return i.indexOf(e)===t}))))})),t},_loopTemplates:function(e){for(var t in this._userTemplates)for(var i in this._userTemplates[t])e(this._userTemplates[t][i])},resetLayer:function(e){var t=e.position.width,i=e.position.height,n=e.isCropPositionUpdateNeeded(),r=e.position.getClone().copyPositions(e.originalPosition);e.isTextLayer()&&(r.width=t,r.height=i,r.left=e.position.areaWidth/2-t/2,r.top=e.position.areaHeight/2-i/2),n&&(this.updateCropLayerPosition(e,null,this),e=this.getFreshLayer(e)),this.updateLayerPosition(e,r),n&&(e=this.getFreshLayer(e),this.getChangeListener().notifyLayerConfigurationChanged(e,this))},fitLayerSize:function(e){var t=e.getOriginalClone(),i=this.getTemplateByLayer(t);this._calculateDefaultLayerPositions(i,t,"fit"),e.isCropPositionUpdateNeeded()?(this.updateCropLayerPosition(e,t.cropPosition,this,me.d),t.cropPosition.left=t.cropPosition.areaWidth/2-e.cropPosition.width/2,i.centerDefaultYPosition&&(t.cropPosition.top=t.cropPosition.areaHeight/2-e.cropPosition.height/2),this.updateCropLayerPosition(e,t.cropPosition,this,me.b),t.cropPosition.rotation&&(t.cropPosition.rotation=0,this.updateCropLayerPosition(e,t.cropPosition,this,me.c))):this.updateLayerPosition(e,t.position)},updateImageLayer:function(e,t,i,n){var r=this;if(!(e instanceof z.a||e instanceof Xe.a))return console.error("Non-image layer given for updating!"),null;var a=e.getOriginalClone(),o=this.getTemplateByLayer(a),s=o.getLayerIndex(a),l={skipMockupRegeneration:i};this._loopTemplates((function(t){if(t.placementId===o.placementId){var i=t.layers[s];if(i){r._copyLayerParams(i,a);var c=t.getMirroredLayer(i);c&&(r._copyLayerParams(c,i),r.getChangeListener().notifyLayerConfigurationChanged(c,"mirror",l)),r._recalcUnrelatedCroppedLayerPositionsOnFlip(e,i,o,t,n)}}})),this.getChangeListener().notifyLayerConfigurationChanged(a,t,l)},_recalcUnrelatedCroppedLayerPositionsOnFlip:function(e,t,i,n,r){if(r&&t.isCropPositionUpdateNeeded()&&t.uniqueId!==e.uniqueId){var a=r.flippedX,o=r.flippedY;if(a||o){var s=this.recalculateBasePositionsOnFlip(t,a,o);this.updateLayerPosition(t,s,this,!0,r)}}},_copyLayerParams:function(e,t){e.overrideImage=t.overrideImage,e.overrideImagePulse=t.overrideImagePulse,e.patternType=t.patternType,e.patternSpacing=t.patternSpacing,e.cropPosition||(e.isRemovedBg=t.isRemovedBg,e.removeBgPreview=t.removeBgPreview),e.flipX=t.flipX,e.flipY=t.flipY,e.isUpscaled=t.isUpscaled},updateTextLayer:function(e,t,i,n){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!e.isTextLayer())return console.error("Non-text layer given for updating!"),null;e=e.getOriginalClone();var a=this.getFreshLayer(e);if(!a)return[];var o=e.isWidthHeightRatioSame(a),s=this.getTemplateByLayer(e);(!o||t instanceof qe||t instanceof He||t instanceof Ia)&&!i&&(a.position.rotation=e.position.rotation,e.position=a.position.getFromOriginalRatio(),e instanceof U.a?pe.a.DEPENDENCIES.TEXT2SVG.TextCalculator(e):e instanceof V.a&&pe.a.calculateTextboxPositions(e)),!e.overrideImage&&!e.overrideImagePulse||o&&e.color===a.color&&e.strokeColor===a.strokeColor&&e.shadowColor===a.shadowColor||(e.overrideImage=null,e.overrideImagePulse=null),"productCustomizer"===t&&(e instanceof U.a?pe.a.DEPENDENCIES.TEXT2SVG.TextCalculator(e):e instanceof V.a&&pe.a.calculateTextboxPositions(e)),s.layers.splice(s.getLayerIndex(e),1,e);var l=this._updateRelatedTextLayers(s,e);l.push(s);var c=this._repositionLinkedLayers(s,e),u=this._repositionRelatedTemplates(s);l=l.concat(u,s),l=this._filterUniqueTemplates(l);var d={skipMockupRegeneration:n};return c&&(this.getChangeListener().notifyLayerConfigurationChanged(c,"mirror",d),this.getChangeListener().notifyTemplatePositionsChanged(l,c,"mirror",d)),r&&this.getChangeListener().notifyLayerConfigurationChanged(e,t,d),this.getChangeListener().notifyTemplatePositionsChanged(l,e,t,d),l},updateClipartLayer:function(e,t,i){if(!(e instanceof j.a))return console.error("Non-clipart layer given for updating!"),null;var n=e.getOriginalClone(),r=this.getTemplateByLayer(n),a=r.getLayerIndex(n);this._loopTemplates(function(t){if(t.placementId===r.placementId){var o=t.layers[a];if(o){o.overrideImage=n.overrideImage,o.fillColor=n.fillColor,o.patternType=n.patternType,o.patternSpacing=n.patternSpacing,o.flipX=n.flipX,o.flipY=n.flipY;var s=t.getMirroredLayer(o);s&&(s.overrideImage=o.overrideImage,s.fillColor=o.fillColor,s.patternType=o.patternType,s.patternSpacing=o.patternSpacing,s.flipX=o.flipX,s.flipY=o.flipY,this.getChangeListener().notifyLayerConfigurationChanged(s,"mirror")),this._recalcUnrelatedCroppedLayerPositionsOnFlip(e,o,r,t,i)}}}.bind(this)),this.getChangeListener().notifyLayerConfigurationChanged(n,t)},updateLicensedAssetLayer:function(e,t,i){var n=this;if(!(e instanceof Ze.a))return console.error("Non-licensed-asset layer given for updating!"),null;var r=e.getOriginalClone(),a=this.getTemplateByLayer(r),o=a.getLayerIndex(r);this._loopTemplates((function(t){if(t.placementId===a.placementId){var s=t.layers[o];if(s){n._copyLayerParams(s,r);var l=t.getMirroredLayer(s);l&&(n._copyLayerParams(l,s),n.getChangeListener().notifyLayerConfigurationChanged(l,"mirror")),n._recalcUnrelatedCroppedLayerPositionsOnFlip(e,s,a,t,i)}}})),this.getChangeListener().notifyLayerConfigurationChanged(r,t)},updateLayerText:function(e,t){this.getChangeListener().notifyLayerConfigurationChanged(e,t)},_repositionRelatedTemplatesAndNotify:function(e,t,i,n,r,a,o,s,l){var c=this._repositionRelatedTemplates(t,l);if(c.push(t),r||n||a||s){var u={skipSwitchToDesignerTab:!0};i&&this.getChangeListener().notifyTemplatePositionsChanged(c,i,"mirror",u),this.getChangeListener().notifyTemplatePositionsChanged(c,e,o,u)}a&&(i&&this.getChangeListener().notifyLayerRotated(i,"mirror"),this.getChangeListener().notifyLayerRotated(e,o)),n&&(i&&this.getChangeListener().notifyTemplateResized(c,i,"mirror"),this.getChangeListener().notifyTemplateResized(c,e,o))},updateLayerPosition:function(e,t,i,n,r){var a=(e=this.getFreshLayer(e)||e).position.getFromOriginalRatio(),o=t.canMoveOutOfBounds;e.position=t.getFromOriginalRatio(),o||!e.position.isOutOfBounds()||e.disableCentering||e.position.center();var s=this.getTemplateByLayer(e);if(s){s.layers.splice(s.getLayerIndex(e),1,e);var l=a.isSizeDifferent(e.position),c=a.isPositionDifferent(e.position),u=a.isRotationDifferent(e.position),d=this._repositionLinkedLayers(s,e,!1,r);if(l&&e.isTextLayer()){if(0!==a.height&&(e.size*=e.position.height/a.height),u&&d)return this._repositionRelatedTemplatesAndNotify(e,s,d,l,c,u,i,n,r),e;var h=this.updateTextLayer(e,i);this.getChangeListener().notifyTemplateResized(h,e,i),u&&this.getChangeListener().notifyLayerRotated(e,i)}else this._repositionRelatedTemplatesAndNotify(e,s,d,l,c,u,i,n,r);return Object(Ta.a)(e),e}},updateCropLayerPosition:function(e,t,i,n,r){var a,o,s,l,c=this.getTemplateByLayer(e),u=null===(a=(e=this.getFreshLayer(e)).cropPosition)||void 0===a?void 0:a.getFromOriginalRatio();if(e.cropPosition=t?t.getFromOriginalRatio():null,e.cropPosition){var d=Math.abs(1-e.cropPosition.width/e.position.width),h=Math.abs(1-e.cropPosition.height/e.position.height);d<.01&&h<.01&&(e.cropPosition=null)}!(null===(o=e.cropPosition)||void 0===o?void 0:o.canMoveOutOfBounds)&&null!==(s=e.cropPosition)&&void 0!==s&&s.isOutOfBounds()&&(null===(l=e.cropPosition)||void 0===l||l.center());c.layers.splice(c.getLayerIndex(e),1,e);var p=!e.cropPosition||(null==u?void 0:u.isSizeDifferent(e.cropPosition)),f=!e.cropPosition||(null==u?void 0:u.isPositionDifferent(e.cropPosition)),g=!e.cropPosition||(null==u?void 0:u.isRotationDifferent(e.cropPosition)),m=this._repositionLinkedLayers(c,e,!0);m&&!r&&(r=!0),this._repositionRelatedTemplatesAndNotify(e,c,m,p,f,g,i,r),this.onCropLayerPositionsChanged(e,u,n)},onCropLayerPositionsChanged:function(e,t,i){if(e&&i&&!e.isCropState&&e.cropPosition&&t){var n=e.position.getClone();switch(i){case me.b:var r=e.cropPosition.left-t.left,a=e.cropPosition.top-t.top;n.left+=r,n.top+=a;break;case me.d:var o=e.cropPosition.left+e.cropPosition.width/2,s=e.cropPosition.top+e.cropPosition.height/2,l=o-e.position.left,c=s-e.position.top,u=e.cropPosition.width/t.width;n.width*=u,n.height*=u,n.left=o-l*u,n.top=s-c*u;break;case me.c:var d=e.cropPosition.getClone(),h=t.rotation,p=fabric.util.degreesToRadians(h),f=e.cropPosition.rotation,g=fabric.util.degreesToRadians(f),m=new fabric.Point(n.left+n.width/2,n.top+n.height/2),_=new fabric.Point(d.left+d.width/2,d.top+d.height/2),v=fabric.util.rotatePoint(m,_,-p),y=fabric.util.rotatePoint(v,_,g);n.left=y.x-n.width/2,n.top=y.y-n.height/2,n.rotation=d.rotation}this.updateLayerPosition(e,n)}},_filterUniqueTemplates:function(e){var t=[];return e.filter((function(e){return!(t.indexOf(e.getKey())>-1)&&(t.push(e.getKey()),!0)}))},_updateRelatedTextLayers:function(e,t){var i=e.getLayerIndex(t),n=[];return this._loopTemplates(function(r){if(r.placementId===e.placementId&&(n.push(r),r!==e)){var a=r.width/e.width,o=r.layers[i];if(o){o.copyValues(t),o.size=t.size*a;var s=o.position.width,l=o.position.height;o.position.width=t.position.width*a,o.position.height=t.position.height*a,o.position.left+=s/2-o.position.width/2,o.position.top+=l/2-o.position.height/2;this._repositionLinkedLayers(r,o)}}}.bind(this)),n},_repositionRelatedTemplates:function(e,t){var i=this.getRelatedTemplates(e),n=null==t?void 0:t.flippedX,r=null==t?void 0:t.flippedY;if(!i.length)return[];var a=e.layers;for(var o in i){var s=i[o];for(var l in a)if(!n&&!r){var c=s.layers[l];if(c)if(c.position=c.position.getRelativelyPositioned(a[l].position),a[l].cropPosition){var u=c.cropPosition||c.position.getClone();c.cropPosition=u.getRelativelyPositioned(a[l].cropPosition)}else c.cropPosition=a[l].cropPosition}}return i},_repositionLinkedLayers:function(e,t,i,n){var r=null==n?void 0:n.flippedX,a=null==n?void 0:n.flippedY;for(var o in e.layers){var s,l,c=e.layers[o];if(c.parentLayerUniqueId===t.uniqueId||c.uniqueId===t.parentLayerUniqueId){var u,d=i?"cropPosition":"position",h=null===(s=t[d])||void 0===s?void 0:s.getFromOriginalRatio(),p=null===(l=c[d])||void 0===l?void 0:l.getFromOriginalRatio();if(c.isTextLayer())c.copyValues(t),p=null===(u=t[d])||void 0===u?void 0:u.getClone();if(r||a)p=this.recalculateBasePositionsOnFlip(c,r,a);else if(i){var f=t.position.getFromOriginalRatio(),g=c.position.getFromOriginalRatio();p=h?p||g.getClone():null,this._recalculateMirroredCropPosition(h,p,f,g)}else this._recalculateMirroredPosition(h,p);return c[d]=p,c}}return null},recalculateBasePositionsOnFlip:function(e,t,i){var n=e.position.getFromOriginalRatio(),r=e.position.rotation,a=fabric.util.degreesToRadians(r),o=new fabric.Point(e.position.left,e.position.top),s=new fabric.Point(e.cropPosition.left+e.cropPosition.width/2,e.cropPosition.top+e.cropPosition.height/2),l=new fabric.Point(e.position.left+e.position.width/2,e.position.top+e.position.height/2),c=fabric.util.rotatePoint(o,l,a),u=fabric.util.rotatePoint(c,s,-a),d=0,h=0;if(i){var p=e.cropPosition.top+e.cropPosition.height,f=e.cropPosition.top,g=u.y+e.position.height;d=f-u.y-(g-p)}if(t){var m=e.cropPosition.left+e.cropPosition.width,_=e.cropPosition.left,v=u.x+e.position.width;h=_-u.x-(v-m)}var y=new fabric.Point(u.x+h,u.y+d),b=new fabric.Point(y.x+e.position.width/2,y.y+e.position.height/2),P=fabric.util.rotatePoint(y,s,a),C=fabric.util.rotatePoint(b,s,a),T=fabric.util.rotatePoint(P,C,-a);return n.top=T.y,n.left=T.x,n},_recalculateMirroredPosition:function(e,t){var i=e.areaWidth/2,n=i-e.width-e.left;t.left=i+n,t.top=e.top,t.width=e.width,t.height=e.height,t.rotation=e.rotation},_recalculateMirroredCropPosition:function(e,t,i,n){e?(t.left=n.left+(e.left-i.left),t.top=e.top,t.width=e.width,t.height=e.height,t.rotation=e.rotation):t=null},getTemplateByLayer:function(e){if(!e)return null;var t=null;return this._loopTemplates((function(i){!t&&i.hasLayer(e.uniqueId)&&(t=i)})),t},getTemplatesByPlacement:function(e){var t=[];return this._loopTemplates((function(i){i.placementId===e&&t.push(i)})),t},getFreshLayer:function(e){var t=this.getTemplateByLayer(e);return t?t.layers[t.getLayerIndex(e)]:null},setActiveLayer:function(e,t,i){var n=!e&&!this._activeLayer||e&&this._activeLayer&&this._activeLayer.uniqueId===e.uniqueId;n&&!i||(e&&(e=this.getFreshLayer(e)),this.silentlySetActiveLayer(e),n&&!i||this.getChangeListener().notifyActiveLayerChanged(e,t))},setActiveGroup:function(e,t,i){var n,r,a=!(null!=e&&e.length)&&!(null!==(n=this._activeGroupLayers)&&void 0!==n&&n.length)||(null==e?void 0:e.length)&&(null===(r=this._activeGroupLayers)||void 0===r?void 0:r.length)&&this._activeGroupLayers[0].groupId===e[0].groupId;a&&!i||(this.silentlySetActiveLayer(null,e),a&&!i||this.getChangeListener().notifyActiveLayerChanged(e,t))},silentlySetActiveLayer:function(e,t){this._activeLayer=e,this._activeGroupLayers=t||null},setActiveLayerFromTemplate:function(e,t,i){var n,r=this,a=this.getUserTemplate(e,t),o=a.layers.length-1;if(null!==(n=this._activeGroupLayers)&&void 0!==n&&n.length){var s=this.getTemplateByLayer(this._activeGroupLayers[0]);if((null==s?void 0:s.layers.length)===a.layers.length){var l=a.layers.filter((function(e){return e.groupId===r._activeGroupLayers[0].groupId}));return void this.setActiveGroup(l,i)}}if(this._activeLayer){var c=this.getTemplateByLayer(this._activeLayer);c&&c.layers.length===a.layers.length&&(o=c.getLayerIndex(this._activeLayer))}this.setActiveLayer(a.layers[o],i)},silentlyRemoveAllTemplates:function(){this._activeLayer=null,this._userTemplates={}},hasLayers:function(e,t){for(var i in this._userTemplates)if(!t||i===t)for(var n in this._userTemplates[i]){var r=this._userTemplates[i][n];if(r.layers.length){if(!e)return!0;if(r.layers.filter((function(t){return t instanceof e})).length)return!0}}return!1},hasTextLayers:function(e){return this.hasLayers(U.a,e)||this.hasLayers(V.a,e)},getOrientation:function(){var e="";return this._loopTemplates((function(t){e=e||t.width<t.height})),e?h.a.ORIENTATION_VERTICAL:h.a.ORIENTATION_HORIZONTAL},duplicateLayer:function(e,t){var i=t.getOriginalClone(!0);i.parentLayerUniqueId=null,i.position.areaWidth&&i.position.areaHeight||this._calculateDefaultLayerPositions(e,i);var n=i.cropPosition?i.cropPosition.height/2:i.position.height/2,r=i.cropPosition?i.cropPosition.width/2:i.position.width/2;return i.isCropPositionUpdateNeeded()?(i.cropPosition.top+=n,i.cropPosition.left+=r,i.position.top+=n,i.position.left+=r):(i.position.top+=n,i.position.left+=r),e.layers.push(i),i},_getRelatedLayers:function(e,t){var i=e.getLayerIndex(t),n=[];return this._loopTemplates(function(t){t.placementId===e.placementId&&t!==e&&t.layers.length&&t.layers.length>i&&n.push(t.layers[i])}.bind(this)),n},duplicateLayerToPlacementTemplates:function(e){if(this._par.validateAddingLayer(e)){var t=this.getTemplateByLayer(e),i=this.duplicateLayer(t,e),n=[];n.push(t);for(var r=this._getRelatedLayers(t,e),a=0,o=r.length;a<o;a++){var s=r[a],l=this.getTemplateByLayer(s);this.duplicateLayer(l,s),n.push(l)}this.getChangeListener().notifyLayersAdded(n,i),this.setActiveLayer(i)}},addLayerToPlacementTemplates:function(e,t,i,n,r,a){if(!this._par.validateAddingLayer(t))return this;var o=this._userTemplates[e],s=[],l=this.getSelectedTemplate(o),c=t.getOriginalClone(!1),u=l;if(!u)return console.warn("No base/selected template to add layer!",o),this;for(var d in i&&!a?this._performLayerPlacingWithoutRecalc(c,u,r):a||this._calculateDefaultLayerPositions(u,c),u.layers.push(c),s.push(u),o){var h=o[d];if(h.templateId!==l.templateId){var p=t.getOriginalClone(!0);i&&!a?(Object(Ca.a)(p,h.width,h.height),this._performLayerPlacingWithoutRecalc(p,h,r)):a||(this._calculateDefaultLayerPositions(h,p),this._calculateScaledLayerPositions(h,p,c,u)),h.layers.push(p),s.push(h)}}return n||this.getChangeListener().notifyLayersAdded(s,t),this},_performLayerPlacingWithoutRecalc:function(e,t,i){if(e.position.areaWidth!==t.width||e.position.areaHeight!==t.height){e.position.areaWidth=t.width,e.position.areaHeight=t.height;var n=e.isCropPositionUpdateNeeded();if(n&&(e.cropPosition.areaWidth=t.width,e.cropPosition.areaHeight=t.height),!i)if(n){var r,a=null===(r=e.cropPosition)||void 0===r?void 0:r.getFromOriginalRatio();e.cropPosition.center(),this.onCropLayerPositionsChanged(e,a,me.b)}else e.position.center();e.groupId&&this.recalcPositionForResizedTemplate(e,e.position.areaWidth,e.position.areaHeight)}},recalcPositionForResizedTemplate:function(e,t,i){var n=e.position.areaWidth,r=e.position.areaHeight,a=n/t,o=r/i,s=Math.min(a,o),l=t/2,c=i/2,u=n/2,d=r/2,h=(e.position.left+e.position.width/2-l)*s,p=(e.position.top+e.position.height/2-c)*s;e.isTextLayer()?(e.size*=s,pe.a.calculateTextboxPositions(e)):(e.position.width*=s,e.position.height*=s),e.position.left=u+h-e.position.width/2,e.position.top=d+p-e.position.height/2,e.originalPosition=e.position.getClone()},getSelectedTemplate:function(e){var t=this._par.getSelectedMockupVariant();return(e=e||t&&this.getTemplates()[t.placementId])&&(Object.values(e).filter((function(e){return e.templateId===t.templateId}))[0]||Object.values(e)[0])},recalculateTemplateLayersBySource:function(e,t){var i=this;if(e!==t){var n=this.getChangeListener();e.layers.forEach((function(r){i.recalcPositionForResizedTemplate(r,t.width,t.height),n.notifyTemplatePositionsChanged([e],r),n.notifyTemplateResized([e],r)}))}},_calculateScaledLayerPositions:function(e,t,i,n){if(t.isTextLayer()){var r=e.width/n.width;t.copyValues(i),t.size=i.size*r;var a=t.position.width,o=t.position.height;t.position.width=i.position.width*r,t.position.height=i.position.height*r,t.position.left+=a/2-t.position.width/2,t.position.top+=o/2-t.position.height/2}},_calculateDefaultLayerPositions:function(e,t,i){var n=t.originalPosition,r=t.position.width,a=t.position.height;switch(n.originalRatio=1,n.areaWidth=e.width,n.areaHeight=e.height,n.left=0,n.top=0,n.width=0,n.height=0,t.position=n.getClone(),!0){case t instanceof U.a:pe.a.DEPENDENCIES.TEXT2SVG.TextCalculator(t);break;case t instanceof V.a:pe.a.calculateTextboxPositions(t);break;case t instanceof z.a||t instanceof j.a||t instanceof Ze.a||t instanceof ya.a||t instanceof Xe.a:t=this._getInitialLayerSize(e,t,i);break;default:console.error(dlang("generator","Unknown layer type for default position calculation!"))}if(Object(wa.c)()&&!(t instanceof ya.a||t instanceof V.a)?(n.width=t.position.width/2,n.height=t.position.height/2):(n.width=t.position.width,n.height=t.position.height,n.left=n.areaWidth/2-t.position.width/2,e.centerDefaultYPosition&&(n.top=n.areaHeight/2-t.position.height/2)),t.isCropPositionUpdateNeeded()){var o=t.cropPosition.width,s=t.cropPosition.height;t.cropPosition.width*=t.position.width/r,t.cropPosition.height*=t.position.height/a,t.cropPosition.left+=o/2-t.cropPosition.width/2,e.centerDefaultYPosition&&(t.cropPosition.top+=s/2-t.cropPosition.height/2)}else t.position=n.getClone()},silentlySetDesignerState:function(e){e.hasLayersByPlacement()?this._overrideTemplatePositionsFromDesignerState(e):e.hasTemplates()&&this._setTemplatePositionsFromDesignerState(e)},_overrideTemplatePositionsFromDesignerState:function(e){var t=e.getLayersByPlacement(),i=function(e,i){var n=t[e];if(!n)return null;for(var r in n){var a=n[r];if(a.originalPosition&&a.originalPosition.isAreaSame(i.originalPosition)&&(i.fileItem&&a.fileItem.fileId==i.fileItem.fileId))return a}return null};this._loopTemplates((function(e){for(var t in e.layers){var n=e.layers[t],r=i(e.placementId,n);r&&(n.position=r.position.getClone(),n.originalPosition=r.originalPosition.getClone())}}))},_setTemplatePositionsFromDesignerState:function(e){this._loopTemplates(function(t){var i=e.getTemplateByKey(t.getKey());if(i)t.layers=i.layers.slice(0);else{var n=e.getTemplatesBestMatchingLayers(t);t.layers=n.map((function(e){return this._scaleLayerForTemplate(t,e)}),this)}}.bind(this))},_getInitialLayerSize:function(e,t,i){var n=t.getInitialScale(e),r=t.getDefaultSize(this.getRequiredDpi()),a=this._getScale(e.width/n,e.height/n,r.width,r.height,null!=i?i:e.fillMode);if(t.position.width=r.width*a.scale,t.position.height=r.height*a.scale,t instanceof z.a&&Object(je.f)()&&t.position.width<me.e){var o=t.position.width/t.position.height;t.position.width=me.e,t.position.height=t.position.width/o}return t},_scaleLayerForTemplate:function(e,t){var i,n=(t=t.getOriginalClone(!0)).position.getFromOriginalRatio(),r=null===(i=t.cropPosition)||void 0===i?void 0:i.getFromOriginalRatio(),a=this._getScale(e.width,e.height,n.areaWidth,n.areaHeight,e.fillMode);return n.areaWidth=e.width,n.areaHeight=e.height,n.left=n.left*a.scale+a.x,n.top=n.top*a.scale+a.y,n.width=n.width*a.scale,n.height=n.height*a.scale,r&&(r.areaWidth=e.width,r.areaHeight=e.height,r.left=r.left*a.scale+a.x,r.top=r.top*a.scale+a.y,r.width=r.width*a.scale,r.height=r.height*a.scale),t instanceof U.a&&(t.size*=a.scale),t.position=n,r&&(t.cropPosition=r),t.originalPosition=n.getClone(),t},_getScale:function(e,t,i,n,r){var a=e/i,o=t/n,s=this._par.getOrientation?this._par.getOrientation():null,l="cover"===r?s?o:Math.max(a,o):Math.min(1,a,o);return{scale:l,x:(e-i*l)/2,y:(t-n*l)/2}},getLayerCountByType:function(e,t,i){return this.getLayersByType(e,t,!i,i).length},getLayersByType:function(e,t,i,n){var r=this.getTemplatesByPlacement(t),a=[],o=this.getActiveTemplate(t);if(n)a=this._getLayersByTypeFromTemplate(e,n);else for(var s=0;s<r.length;s++){var l=r[s];(!i||o&&l.templateId===o.templateId)&&(a=a.concat(this._getLayersByTypeFromTemplate(e,l)))}return a},_getLayersByTypeFromTemplate:function(e,t){if(!t)return[];for(var i=[],n=0;n<t.layers.length;n++){var r=t.layers[n];r instanceof e&&i.push(r)}return i},getFirstLayer:function(e,t){var i=null,n=e&&t?this.getUserTemplate(e,t):null;return n?i=n.layers[n.layers.length-1]:this._loopTemplates((function(e){!i&&e.hasLayers()&&(i=e.layers[e.layers.length-1])})),i},getTechnique:function(){var e=null;return this._loopTemplates((function(t){t.technique&&!e&&(e=t.technique)})),e},getTemplates:function(){return this._userTemplates},getLayerByCustomizeKey:function(e){var t=!1;return this._loopTemplates((function(i){i.getLayerByCustomizeKey(e)&&(t=i.getLayerByCustomizeKey(e))})),t},getLayerById:function(e){var t=null;return this._loopTemplates((function(i){for(var n=0,r=i.layers.length;n<r;n++){var a=i.layers[n];if(a.uniqueId===e){t=a;break}}})),t},getGroupLayersById:function(e){var t=[];return this._loopTemplates((function(i){for(var n=0,r=i.layers.length;n<r;n++){var a=i.layers[n];a.groupId===e&&t.push(a)}})),t},updateFileLayerByCustomizeKey:function(e,t,i){var n=this.getLayerByCustomizeKey(e),r=this.getTemplateByLayer(n),a=r.getLayerIndex(n);t||(t=n.fileItem||n.temporaryFileItem);var o=n.getOriginalClone();t instanceof _a.a?(o.temporaryFileItem=t,o.shouldUseTempFile=!0):t instanceof va.a&&(o.fileItem=t,o.temporaryFileItem=null,o.shouldUseTempFile=!1);var s=t.width/t.height;if(n.generatorOptions.originalPosition.width/n.generatorOptions.originalPosition.height<s){var l=t.height*n.generatorOptions.originalPosition.width/t.width,c=(n.generatorOptions.originalPosition.height-l)/2+n.generatorOptions.originalPosition.top;o.position.width=n.generatorOptions.originalPosition.width,o.position.height=l,o.position.left=n.generatorOptions.originalPosition.left,o.position.top=c}else{var u=t.width*n.generatorOptions.originalPosition.height/t.height,d=(n.generatorOptions.originalPosition.width-u)/2+n.generatorOptions.originalPosition.left;o.position.width=u,o.position.height=n.generatorOptions.originalPosition.height,o.position.left=d,o.position.top=n.generatorOptions.originalPosition.top}this.removeLayer(r,n),this.addLayerToPlacementTemplates(r.placementId,o,!0),this._setLayerIndex(r,o,a,1);var h=this.getQuality(),p=h.getQualityPercent(o),f=h.getQualityKey(p,o,r.technique===J.a.TECHNIQUE_EMBROIDERY,!1);i&&i(f,e,o.getDPI())},removeCustomizerDataFromAllLayers:function(){this._loopTemplates(function(e){e.layers.forEach(function(e){if(!e.isCustomizable)return!1;var t=e.position;e.isCustomizable=!1,e.isTextLayer()&&this.updateTextLayer(e,this);var i=this.getFreshLayer(e);this._resizeTextLayerFromCustomizedPosition(t,e,i)}.bind(this))}.bind(this)),this.updateDesignerLeaveWarningLayers()},updateDesignerLeaveWarningLayers:function(){var e=[];this._loopTemplates(function(t){t.layers.forEach(function(t){var i=Object.assign({},t.toArray());e.push(i)}.bind(this))}.bind(this)),r.a.updateInitialStateLayers=e},_resizeTextLayerFromCustomizedPosition:function(e,t,i){if(i.position.width<=e.width)return!1;var n=t.position;n.left=e.left,n.width=t.position.width,n.height=t.position.width/(i.position.width/i.position.height),n.top=e.top+(i.position.height-n.height)/2,this.updateLayerPosition(t,n)},resizeImageLayerToDPI:function(e,t){var i=e.getFileItem().width/t/e.position.width;this.scaleLayer(e,i)},resizeTextLayerToHeight:function(e,t){var i=t/e.position.height;this.scaleLayer(e,i)},scaleLayer:function(e,t){var i=e.isCropPositionUpdateNeeded(),n=i?e.cropPosition:e.position,r=n.getFromOriginalRatio();r.width*=t,r.height*=t,r.left+=(n.width-r.width)/2,r.top+=(n.height-r.height)/2,i?this.updateCropLayerPosition(e,r,this,me.d):this.updateLayerPosition(e,r,this,!0)},refreshClipartColors:function(e){this._loopTemplates((function(t){return t.layers.forEach((function(t){return e(t)}))}))},getDesignMeta:function(){return this._par.getDesignMeta&&this._par.getDesignMeta()},isCropInAnyVariant:function(){var e=this.getActiveLayer(),t=this.getTemplateByLayer(e);return e.isCropPositionUpdateNeeded()||this._getRelatedLayers(t,e).some((function(e){return e.isCropPositionUpdateNeeded()}))},setFeatureDesignCopied:function(e,t,i){var n=this.getDesignMeta(),r=this.getUserTemplate(e,i);if(n&&r){var a={};a[z.a.TYPE]=[],a[j.a.TYPE]=[],a[U.a.TYPE]=[],a[Ze.a.TYPE]=[],r.layers.forEach((function(e){e.isImageLayer()?a[z.a.TYPE].push(e.fileItem.fileId):e.isClipartLayer()?a[j.a.TYPE].push(e.clipartItem.id):e.isTextLayer()?a[U.a.TYPE].push(e.text):e.isLicensedAssetLayer()&&a[Ze.a.TYPE].push(e.licensedAssetItem.licensedAssetId)})),n[ma.a.META_COPY_DESIGN]={fromPlacementId:e,toPlacementId:t,templateId:i,layers:a}}},getDpiForTextGraphic:function(e,t){var i=this,n=this.getSelectedTemplate(),r=[J.a.TYPE_POSTER,J.a.TYPE_FRAMED_POSTER,J.a.TYPE_CANVAS,J.a.TYPE_STICKER,J.a.TYPE_PHONE_CASE],a=1,o=Object(Ue.d)(),s=o,l=!1;return n&&r.includes(n.technique)&&e&&t&&t.forEach((function(t){var r=i.getUserTemplate(e,t.templateId).width/n.width,c=o*r;l=l||a!==r,a=Math.max(a,r),s=Math.min(s,c)})),{min:Math.ceil(this.getRequiredDpi()*a*2),max:Math.ceil(s),hasDifferentSizes:l}},removeFeatureDesignCopied:function(e){var t=this.getDesignMeta();if(e&&t&&t[ma.a.META_COPY_DESIGN]&&(t[ma.a.META_COPY_DESIGN].fromPlacementId==e||t[ma.a.META_COPY_DESIGN].toPlacementId==e)){var i=t[ma.a.META_COPY_DESIGN].layers,n=this.getUserTemplate(e,t[ma.a.META_COPY_DESIGN].templateId).layers,r=!!i.hasOwnProperty(z.a.TYPE)&&i[z.a.TYPE].map(Number),a=!!i.hasOwnProperty(j.a.TYPE)&&i[j.a.TYPE].map(Number),o=i[U.a.TYPE],s=!!i.hasOwnProperty(Ze.a.TYPE)&&i[Ze.a.TYPE].map(Number);n.filter((function(e){return r&&e.isImageLayer()?r.indexOf(e.fileItem.fileId)>-1:a&&e.isClipartLayer()?a.indexOf(e.clipartItem.id)>-1:o&&e.isTextLayer()?o.indexOf(e.text)>-1:s&&e.isLicensedAssetLayer()?s.indexOf(e.licensedAssetItem.licensedAssetId)>-1:void 0})).length||(t[ma.a.META_COPY_DESIGN]=!1)}}});Ia.MISSING_PRINTFILES_WARNING=["default","belt_front","belt_back","belt","back","front","sleeve_right","sleeve_left","top","bottom","pocket","top_front","top_back"],window&&((globalThis||{}).PFProductPushTemplates=Ia);var Sa=Class({storeId:0,callback:null,targetNode:null,activePlacement:null,generatorVariant:null,isModalDesigner:!1,onClick:null,validateAddingLayer:null,getMaxFileLayerCount:null,nodeDomElementDropArea:null,onDropDomElement:null,is3dViewActive:null});window&&((globalThis||{}).PFProductPushDropZoneAreaPar=Sa);var Ea=i("xB0w"),Oa=i("8POG"),ka=i("l99J"),La=Class({filesToAdd:[],_enabled:!0,_activePlacement:null,_generatorVariant:null,_dropZone:null,_domElementDropZoneEnabled:!1,_lastInsideLabelType:null,__construct:function(e){var t=this;this._par=e,this._activePlacement=e.activePlacement,this._generatorVariant=e.generatorVariant,this.node=tag("div","product-push__droparea "+this._getProductDependentClassName()+this._get3dViewClassName(),[this._dropYourDesignImgNode=tag("div",{className:"product-push__droparea__image"+(Object(je.f)()?" pf-d-none":""),prop:{onclick:function(){t._par.isModalDesigner?ga("send",{hitType:"event",eventCategory:PF.Customer.isLogged()?"Generator interactions in Order flow":"Generator interactions in Product catalog",eventAction:PF.Customer.isLogged()?"Drop your design here clicked - signed-in users":"Drop your design here clicked - anonymous users"}):t._par.isModalDesigner||ga("send",{hitType:"event",eventCategory:"Generator interactions in Mockup generator",eventAction:PF.Customer.isLogged()?"Drop your design here clicked - signed-in users":"Drop your design here clicked - anonymous users"}),t._par.onClick()}}},[tag("img",{className:"img-responsive pf-w-100 pf-d-none pf-d-md-block",prop:{src:langImage("generator/drop-your-design-here.svg")}}),tag("img",{className:"img-responsive pf-w-100 pf-d-block pf-d-md-none",prop:{src:langImage("generator/tap-your-design-here.svg")}})])]),this._initDropZone()},setActivePlacement:function(e,t){this._activePlacement=e,t&&this._render()},setGeneratorVariant:function(e,t){this._generatorVariant=e,t&&this._render()},_render:function(){this.node.className="product-push__droparea "+this._getProductDependentClassName()+this._get3dViewClassName(),this.repositionDropAreafor3dCombo()},repositionDropAreafor3dCombo:function(){var e="0px";if(this._par.is3dViewActive()&&C.a.isWindowSmallerThan(C.a.SIZES.LG)){var t=Rr.getMapObject(this._par.generatorVariant.templateId);e="calc(10.5% + "+Rr.getDimensions(t).height+"px)"}$(".product-push__droparea").css("margin-top",e)},_get3dViewClassName:function(){return this._par.is3dViewActive()?" col-lg-9 order-2 order-lg-1":""},_getProductDependentClassName:function(){var e=Object(Q.a)();if(!e)return"";var t=[J.a.ID_AA_2007,J.a.ID_GILDAN_18500,J.a.ID_GILDAN_18000,J.a.ID_NEX_LEVEL_9700,J.a.ID_BELLA_CANVAS_JACKET_3710,J.a.ID_BELLA_CANVAS_3501,J.a.ID_GILDAN_2400,J.a.ID_CHAMPION_CC8C,J.a.ID_COTTON_HERITAGE_M2580];switch(!0){case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_RIGHT:return"product-push__droparea--hats-right-side";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_LEFT:return"product-push__droparea--hats-left-side";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_BACK:return"product-push__droparea--hats-back-side";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_OUTSIDE&&!(e.productId===J.a.ID_BEAN_BAG||e.productId===J.a.ID_BEAN_BAG_CASE):return"product-push__droparea--label-outside";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_INSIDE&&this._lastInsideLabelType===Br.a.LABEL_NATIVE:return"product-push__droparea--label-inside-native";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_INSIDE&&this._lastInsideLabelType===Br.a.LABEL_CUSTOM:return"product-push__droparea--label-inside-custom";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_INSIDE&&e.productId===J.a.ID_FLIP_FLOPS:return"product-push__droparea--label-inside-flip-flops";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_INSIDE:return"product-push__droparea--label-inside";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_LEFT&&e.productId===J.a.ID_STSU822:return"product-push__droparea--stsu822-sleeve-left";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_RIGHT&&e.productId===J.a.ID_STSU822:return"product-push__droparea--stsu822-sleeve-right";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_LEFT&&e.productId===J.a.ID_STSU823:return"product-push__droparea--stsu823-sleeve-left";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_RIGHT&&e.productId===J.a.ID_STSU823:return"product-push__droparea--stsu823-sleeve-right";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_LEFT&&this._activePlacement.technique!==J.a.TECHNIQUE_CUT_SEW&&t.indexOf(e.productId)<0:return"product-push__droparea--sleeve-left";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_SLEEVE_RIGHT&&this._activePlacement.technique!==J.a.TECHNIQUE_CUT_SEW&&t.indexOf(e.productId)<0:return"product-push__droparea--sleeve-right";case!this._isPrimaryMockup()&&e.productId===J.a.ID_CUT_SEW_MEN_TANK_TOP:return"product-push__droparea--tank-template";case this._isPrimaryMockup()&&(e.productId===J.a.ID_YOGA_SHORTS||e.productId===J.a.ID_MINI_SKIRT_SUBLIMATION||e.productId===J.a.ID_305_SHORT_SHORTS):return"product-push__droparea--padding-top-3";case this._isPrimaryMockup()&&(e.productId===J.a.ID_LEGGINGS_ALL_OVER_SHORTS||e.productId===J.a.ID_304_LONG_SHORTS||e.productId===J.a.ID_SKATER_SKIRT||e.productId===J.a.ID_PENCIL_SKIRT_SUBLIMATION):return"product-push__droparea--padding-top-7";case e.productId===J.a.ID_KIDS_LEGGINGS:case e.isEmbroideryApron():case e.productId===J.a.ID_RABBIT_SKINS_1004:case e.isTote()||e.isDtgTote():case!this._isPrimaryMockup()&&e.productId===J.a.ID_ALL_OVER_SPORTS_BRA_W_PADDING:return"product-push__droparea--padding-top-45";case e.productId===J.a.ID_SP15_CAP:case e.productId===J.a.ID_BEECHFIELD_B426:case e.productId===J.a.ID_82_BEANIE:case e.productId===J.a.ID_YUPOONG_1501KC:return"product-push__droparea--beanies";case e.productId===J.a.ID_BACKPACK:return"product-push__droparea--backpack";case e.productId===J.a.ID_975MPR&&this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_APPAREL_FRONT:return"product-push__droparea--975mpr";case e.productId===J.a.ID_GLOSSY_MUG:case e.productId===J.a.ID_GLOSSY_MUG_USA:return"product-push__droparea--mugs";case e.productId===J.a.ID_MUG_MAGIC_MATTE_BLACK:case e.productId===J.a.ID_MUG_MAGIC_GLOSSY_BLACK:return"product-push__droparea--mugs-black";case e.productId===J.a.ID_FANNYPACK:switch(!0){case this._isPrimaryMockup():return"product-push__droparea--fannypack";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_FRONT:return"product-push__droparea--fannypack-front";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_TOP:return"product-push__droparea--fannypack-top";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_BACK:return"product-push__droparea--fannypack-back";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_LABEL_INSIDE:return"product-push__droparea--fannypack-label";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_POCKET:return"product-push__droparea--fannypack-pocket";default:return""}case e.isApparelEmbroidery():case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_CHEST_LEFT:return"product-push__droparea--embroidery-chest-left";case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_CHEST_CENTER:case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_LARGE_CENTER:case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_CORNER_LEFT:case this._activePlacement&&this._activePlacement.id===Z.a.TYPE_EMBROIDERY_CORNER_RIGHT:return"product-push__droparea--embroidery-chest-center";case e.isBlackMug():return"product-push__droparea--black-mugs";default:return""}},_isPrimaryMockup:function(){return this._generatorVariant&&"primary"===this._generatorVariant.role},setInsideLabelType:function(e){this._lastInsideLabelType=e,this._render()},_clearFiles:function(){this.filesToAdd=[]},_addFilesToPlacements:function(e){for(var t in e){var i=e[t];this._par.callback(i)}this._clearFiles()},_initDropZone:function(){var e=new Ea.a;e.targetNode=this._par.targetNode,e.onDone=this._onDone.bind(this),e.getUploadExtra=this._getUploadExtra.bind(this),e.onDragEnter=this._onDragEnter.bind(this),e.onDragLeave=this._onDragLeave.bind(this),e.isPushGenerator=!0,e.getMaxFileLayerCount=this._par.getMaxFileLayerCount,e.validateAddingLayer=this._par.validateAddingLayer,e.elementDropNode=this._par.nodeDomElementDropArea,e.onDropElement=this._onDropDomElement.bind(this),e.enableTransparencyValidation=!0,this._dropZone=new Oa.a(e)},_addFile:function(e){this.filesToAdd.push(e)},_onDone:function(e,t,i){this._addFile(e),0===t&&(this._addFilesToPlacements(this.filesToAdd),this._clearFiles(),ka.a.unbind(e,i))},_getUploadExtra:function(){return{storeId:this._par.storeId}},_onDragEnter:function(){if(this._enabled){var e=this._par.isModalDesigner?$(".modal-content"):$("body");$(".product-push__droparea").show(),w.a.addClassName(this.node,"product-push__droparea--active"),$(".modal-backdrop.in").css({opacity:".7"}),e.prepend('<div class="mockup-generator-loading-overlay"></div>')}},_onDragLeave:function(){this._enabled&&($(".mockup-generator-loading-overlay").remove(),w.a.removeClassName(this.node,"product-push__droparea--active"),$(".modal-backdrop.in").css({opacity:".5"}))},isEnabled:function(){return this._enabled},enable:function(){this._enabled=!0,this._dropZone.enable(),Object(je.f)()||w.a.removeClassName(this._dropYourDesignImgNode,"pf-d-none")},disable:function(){this._enabled=!1,this._dropZone.disable(),Object(je.f)()||w.a.addClassName(this._dropYourDesignImgNode,"pf-d-none")},_onDropDomElement:function(e){this._domElementDropZoneEnabled&&this._par.onDropDomElement&&this._par.onDropDomElement(e,this._activePlacement)},enableDomElementDropZone:function(){this._dropZone.disableBeforeElementDrag(),this._domElementDropZoneEnabled=!0},disableDomElementDropZone:function(){this._domElementDropZoneEnabled=!1,this._dropZone.enableAfterElementDrag()}},w.a.Base);window&&((globalThis||{}).PFProductPushDropZoneArea=La);var Aa=Class({mockupMaxWidth:400,mockupMaxHeight:400,generatorVariant:null,templateKey:"",templates:null,activeLayer:null,onReady:null,allowSpecificProductMirroring:!0,isOrderFlow:!1,disableLayerManipulations:!1,hideZoomButton:!1,disableOutOfBoundsErrorMessages:!1,isCustomizingMode:!1,placementOptions:null,node3dView:null,variantArea:null,shouldShowUnrelatedTemplatesPopover:null,shouldShowStickerLayerMergingPopover:null});window&&((globalThis||{}).PFProductPushProductMockupPar=Aa);var Ra=Class({maxWidth:null,maxHeight:null,placementOptions:null,isResizable:!1,templates:null,onReady:null,showImageQualityWarning:!1,template:null,onLayerOrderChanged:null,onLayerRemoved:null,onZoomIn:null,onZoomOut:null,isOrderFlow:!1,disableLayerManipulations:!1,disablePulseImageOverride:!1,disableScaling:!1,hideZoomButton:!1,disableOutOfBoundsErrorMessages:!1,isCustomizingMode:!1,generatorVariant:null,variantArea:null,shouldShowUnrelatedTemplatesPopover:null,shouldShowStickerLayerMergingPopover:null});window&&((globalThis||{}).PFComponentsGeneratorMockupPar=Ra);var Na=i("Vx67"),Da=Class({_isReady:!1,_par:null,_nodeMockup:null,_nodeMirror:null,_nodeMirrorCheckbox:null,_mockup:null,__construct:function(e){this._par=e,this._par.node3dView?this.node=tag("div","text-center row",[this._nodeMockup=tag("div","mockup-view-container col-lg-9 order-2 order-lg-1"),this._par.node3dView,this._nodeCheckbox=tag("div","mockup-checkbox-view-container col-lg-9 order-3")]):this.node=tag("div","text-center",[this._nodeMockup=tag("div"),this._nodeCheckbox=tag("div")]),this._subscribeTemplateEvents(),this._render()},_subscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().addOnActiveLayerChanged(this._onActiveLayerSelectedExternally).addOnLayerConfigurationChanged(this.renderMirrorCheckbox).addOnCropStateChanged(this._onCropStateChanged).addOnTemplatePositionsChangedListener(this._onPositionsChangedExternally)},_unsubscribeTemplateEvents:function(){this._par.templates&&this._par.templates.getChangeListener().unsubscribe(this._onActiveLayerSelectedExternally).unsubscribe(this.renderMirrorCheckbox).unsubscribe(this._onPositionsChangedExternally)},_unsubscribeTemplateEventsIfNeeded:function(){return!(!this._isReady||Object(A.a)(this.node))&&(this._unsubscribeTemplateEvents(),!0)},_onRequestLayerRemoval:function(e){var t=this._par.templates.getByKey(this._par.templateKey);this._par.templates.removeLayer(t,e)},_render:function(){this._renderMockupArea(),this.renderMirrorCheckbox()},_renderMockupArea:function(){w.a.clearNode(this._nodeMockup);var e=new Ra;e.isResizable=!0,e.maxHeight=this._par.mockupMaxHeight,e.maxWidth=this._par.mockupMaxWidth,e.onReady=this._onReady,e.onLayerRemoved=this._onRequestLayerRemoval,e.showImageQualityWarning=!0,e.templates=this._par.templates,e.template=this._getCurrentTemplate(),e.isOrderFlow=this._shouldShowMockupControls(this._par.activeLayer),e.disableLayerManipulations=this._par.disableLayerManipulations,e.hideZoomButton=this._par.hideZoomButton,e.disableOutOfBoundsErrorMessages=this._par.disableOutOfBoundsErrorMessages,e.isCustomizingMode=this._par.isCustomizingMode,e.placementOptions=this._par.placementOptions,e.generatorVariant=this._par.generatorVariant,e.variantArea=this._par.variantArea,e.shouldShowUnrelatedTemplatesPopover=this._par.shouldShowUnrelatedTemplatesPopover,e.shouldShowStickerLayerMergingPopover=this._par.shouldShowStickerLayerMergingPopover,this._mockup=new kr.a(e),this._mockup.append(this._nodeMockup),this._mockup.render()},_onReady:function(){if(!this._isReady){if(this._isReady=!0,this._par.templates){var e=this._par.templates.getActiveGroupLayers();e&&e.length||this.getMockup().showActiveLayer(this._par.templates.getActiveLayer())}this._par.onReady()}},applyCropIfNeeded:function(){var e,t=null===(e=this.getMockup())||void 0===e?void 0:e._canvas;null!=t&&t._canvas.isCropState()&&t.applyCrop()},_getCurrentTemplate:function(){return this._par.templates.getByKey(this._par.templateKey)},_hasMirroredLayer:function(){return this._par.templates.getByKey(this._par.templateKey).getMirroredLayers().length>0},_hasUnmirroredLayers:function(){return this._par.templates.getByKey(this._par.templateKey).hasUnmirroredLayers()},renderMirrorCheckbox:function(e,t){if(w.a.clearNode(this._nodeCheckbox),this._canMirrorImage()){var i=this._hasMirroredLayer(),n=this._hasUnmirroredLayers();tag("label",!0===t?"pf-d-none":"pf-d-block",[this._nodeMirrorCheckbox=tag("input",{type:"checkbox",className:"pf-mr-4",prop:{onchange:this._onMirrorLayerChange,checked:i,indeterminate:i&&n}}),tag("span","",dclang("generator","action (to duplicate something)","Duplicate the design on both sides"))]).append(this._nodeCheckbox)}},_onCropStateChanged:function(e,t){e&&(e.isCropState?this._mockup.hideNodeControlsHolder():this._mockup.showNodeControlsHolder(),this.getMockup().displayCustomizableTextLayerError())},_canMirrorImage:function(){var e,t=this._par.templates&&this._par.templates.getActiveLayer();return(!t||!t.patternType&&!t.isCropState)&&(!!this._par.allowSpecificProductMirroring&&([J.a.TYPE_MUG].indexOf(null===(e=Object(Q.a)())||void 0===e?void 0:e.type)>-1&&this._par.generatorVariant.role===Na.a.ROLE_TEMPLATE))},_onMirrorLayerChange:function(){ga("send",{hitType:"event",eventCategory:"ProductPush",eventAction:"Toggle mirror image",eventLabel:this.isMirroredChecked()?"Checked":"Un-checked"}),this.isMirroredChecked()?this._par.templates.addMirroredLayersForTemplates(!0):this._par.templates.removeMirroredLayersFromTemplates()},isMirroredChecked:function(){var e;return this._canMirrorImage()&&(null===(e=this._nodeMirrorCheckbox)||void 0===e?void 0:e.checked)},getMockup:function(){return this._mockup},updateControlsVisibility:function(e){this._mockup.setControlsVisibility(this._shouldShowMockupControls(e))},_onPositionsChangedExternally:function(e,t,i){if(!this._unsubscribeTemplateEventsIfNeeded()&&this._par.templates&&this._mockup&&!this._mockup.isEventOrigin(i)&&"mirror"!==i)for(var n in e)if(e[n].getKey()===this._par.templateKey){this._mockup.updateLayersPositions(e[n],t,i),i!==tt.a.GROUP_UPDATE&&(this._mockup.showActiveLayer(t),this.renderMirrorCheckbox(t));break}},_onActiveLayerSelectedExternally:function(e,t){var i;if(!this._unsubscribeTemplateEventsIfNeeded()&&this._par.templates&&e){var n=e.length?e[0]:e,r=this._par.templates.getTemplateByLayer(n);(null==r?void 0:r.getKey())===this._par.templateKey&&(t instanceof tt.a&&(e.length?this._mockup.showActiveGroup(n.groupId):this._mockup.showActiveLayer(n)),null===(i=this._mockup)||void 0===i||i.setControlsVisibility(!this._par.templates.getActiveGroupLayers()&&this._shouldShowMockupControls(n)),this.renderMirrorCheckbox(n))}},_shouldShowMockupControls:function(e){var t;return!!e&&(-1!==[J.a.TYPE_CUT_SEW,J.a.TYPE_POSTER,J.a.TYPE_FRAMED_POSTER,J.a.TYPE_CANVAS,J.a.TYPE_PHONE_CASE,J.a.TYPE_JEWELRY,J.a.TYPE_SUBLIMATION].indexOf(null===(t=Object(Q.a)())||void 0===t?void 0:t.type)&&(e&&e instanceof z.a||e instanceof j.a||e instanceof Ze.a))}},w.a.Base);window&&((globalThis||{}).PFProductPushProductMockup=Da);var xa=Class({_subscribers:{},onSizesChanged:function(e){return this._subscribe(xa.CHANNEL_SIZES,e)},onAfterSizesChanged:function(e){return this._subscribe(xa.CHANNEL_AFTER_SIZES,e)},onBeforeColorsChanged:function(e){return this._subscribe(xa.CHANNEL_BEFORE_COLORS,e)},onAfterColorsChanged:function(e){return this._subscribe(xa.CHANNEL_AFTER_COLORS,e)},onRegionChanged:function(e){return this._subscribe(xa.CHANNEL_REGION,e)},onProductOptionsChanged:function(e){return this._subscribe(xa.CHANNEL_OPTIONS,e)},onPlacementLayersChanged:function(e){return this._subscribe(xa.CHANNEL_LAYERS,e)},onPlacementPositionsChanged:function(e){return this._subscribe(xa.CHANNEL_POSITIONS,e)},onDesignerReady:function(e){return this._subscribe(xa.CHANNEL_READY,e)},onDesignerDisabled:function(e){return this._subscribe(xa.CHANNEL_DISABLED,e)},onTechniqueChanged:function(e){return this._subscribe(xa.CHANNEL_TECHNIQUE_CHANGED,e)},onMockupReady:function(e){return this._subscribe(xa.CHANNEL_MOCKUP_READY,e)},onEmbroideryNotesChanged:function(e){return this._subscribe(xa.CHANNEL_EMBROIDERY_NOTES_CHANGED,e)},onDesignFillChanged:function(e){return this._subscribe(xa.CHANNEL_DESIGN_FILL_CHANGED,e)},emitBeforeColorsChanged:function(e){return this._emit(xa.CHANNEL_BEFORE_COLORS,e)},emitAfterColorsChanged:function(e){return this._emit(xa.CHANNEL_AFTER_COLORS,e)},emitSizesChanged:function(e){return this._emit(xa.CHANNEL_SIZES,e)},emitAfterSizesChanged:function(e){return this._emit(xa.CHANNEL_AFTER_SIZES,e)},emitRegionChanged:function(e){return this._emit(xa.CHANNEL_REGION,e)},emitProductOptionsChanged:function(e){return this._emit(xa.CHANNEL_OPTIONS,e)},emitPlacementLayersChanged:function(){return this._emit(xa.CHANNEL_LAYERS,null)},emitPlacementPositionsChanged:function(){return this._emit(xa.CHANNEL_POSITIONS)},emitDesignerReady:function(){return this._emit(xa.CHANNEL_READY)},emitDesignerDisabled:function(){return this._emit(xa.CHANNEL_DISABLED)},emitMainMockupReady:function(){return this._emit(xa.CHANNEL_MOCKUP_READY)},emitDesignFillChanged:function(e){return this._emit(xa.CHANNEL_DESIGN_FILL_CHANGED,e)},emitMainTechniqueChanged:function(e){return this._emit(xa.CHANNEL_TECHNIQUE_CHANGED,e)},emitEmbroideryNotesValueChanged:function(){return this._emit(xa.CHANNEL_EMBROIDERY_NOTES_CHANGED)},_subscribe:function(e,t){return this._hasChannelSubscribers(e)||(this._subscribers[e]=[]),this._subscribers[e].push(t),this},_emit:function(e,t){return 0===this._getSubscribersByChannel(e).map((function(e){return!e||e(t)})).filter((function(e){return!1===e})).length},_hasChannelSubscribers:function(e){return this._getSubscribersByChannel(e).length>0},_getSubscribersByChannel:function(e){return this._subscribers[e]||[]}});xa.CHANNEL_BEFORE_COLORS="beforeColors",xa.CHANNEL_AFTER_COLORS="afterColors",xa.CHANNEL_SIZES="sizes",xa.CHANNEL_AFTER_SIZES="afterSizes",xa.CHANNEL_REGION="region",xa.CHANNEL_OPTIONS="options",xa.CHANNEL_LAYERS="layers",xa.CHANNEL_POSITIONS="layerPositions",xa.CHANNEL_READY="designerReady",xa.CHANNEL_DISABLED="designerDisabled",xa.CHANNEL_MOCKUP_READY="mockupReady",xa.CHANNEL_TECHNIQUE_CHANGED="techniqueChanged",xa.CHANNEL_DESIGN_FILL_CHANGED="designFillChanged",xa.CHANNEL_EMBROIDERY_NOTES_CHANGED="embroideryNotesChanged",window&&((globalThis||{}).PFProductPushDesignerObserver=xa);var Fa=Class({_conflictingTypes:{},_templates:null,_placementSelector:null,__construct:function(e,t){this._placementSelector=e,this._templates=t},setConflictingTypes:function(e){this._conflictingTypes=e},getConflictingPlacementTitles:function(e){var t=this._conflictingTypes[e];if(!t||!t.conflictsWith.length)return[];var i=[],n=this._templates.getPlacementIdsHavingFiles();for(var r in t.conflictsWith){var a=t.conflictsWith[r];n.indexOf(a.id)>-1&&i.push(a.title)}return i},getCurrentPlacementConflicts:function(){return this.getConflictingPlacementTitles(this._placementSelector.getSelectedPlacementId())}});window&&((globalThis||{}).PFProductPushConflictCalculator=Fa);var Ma=i("CvqS"),Ba=i("gYZI"),Va=i("Cj9M"),ja=i("M3Ia"),Ua=i("UzRV"),za=i("iKM3"),Ga=i("Ii6r"),Ha=i("bRD6"),qa=i("rKkW"),Ya=i("Xapb"),Wa=i("qs6/"),Ka=i("tw/D"),Za=i("4Vs6"),Xa=i("Kblr"),Qa=i("3oUi"),$a=i("83UL"),Ja=i("Yh49"),eo=i("LvDl"),to=i.n(eo);function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function no(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ro(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ao(e,t){return(ao=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=co(e);if(t){var r=co(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return so(this,i)}}function so(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?lo(e):t}function lo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function co(e){return(co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uo(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function ho(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,fo(e,t,"get"))}function po(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,fo(e,t,"set"),i),i}function fo(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var go=new WeakMap,mo=new WeakMap,_o=new WeakMap,vo=new WeakMap,yo=new WeakMap,bo=new WeakMap,Po=new WeakSet,Co=new WeakSet,To=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ao(e,t)}(a,e);var t,i,n,r=oo(a);function a(e){var t;return no(this,a),t=r.call(this),Co.add(lo(t)),Po.add(lo(t)),go.set(lo(t),{writable:!0,value:null}),mo.set(lo(t),{writable:!0,value:null}),_o.set(lo(t),{writable:!0,value:null}),vo.set(lo(t),{writable:!0,value:null}),yo.set(lo(t),{writable:!0,value:null}),bo.set(lo(t),{writable:!0,value:!0}),t.node=tag("div"),po(lo(t),go,e),po(lo(t),mo,$a.a.getFilteredAvailableRegions(ho(lo(t),go).regionData)),po(lo(t),_o,ho(lo(t),go).activeRegion),po(lo(t),vo,ho(lo(t),go).onChange),po(lo(t),bo,ho(lo(t),go).shouldShowAvailabilityInfo),uo(lo(t),Po,wo).call(lo(t)),t}return t=a,(i=[{key:"getSelectedRegions",value:function(){return ho(this,yo).getActiveValue()}},{key:"getMatchingVariants",value:function(){if(!this.getSelectedRegions())return[];var e=new d.a;return this.getRegionVariants(this.getSelectedRegions()).map((function(t){return e.getCachedVariantById(t,!0)})).filter((function(e){return!!e}))}},{key:"isRegionSelected",value:function(e){return ho(this,yo).isRegionSelected(e)}},{key:"getLastSelectedRegion",value:function(){return ho(this,yo).getLastSelectedRegion()}},{key:"getRegionVariants",value:function(e){var t,i=[];for(var n in e){var r=e[n];ho(this,mo).variantsByRegion[r]&&i.push(ho(this,mo).variantsByRegion[r])}return i.length?ho(this,mo).allowedSellingRegions?Object(eo.uniq)((t=[]).concat.apply(t,i)):i.shift().filter((function(e){return i.every((function(t){return-1!==t.indexOf(e)}))})):[]}},{key:"findVariant",value:function(e,t){var i=null,n=this.getMatchingVariants();for(var r in n){var a=n[r],o=!t||a.size===t,s=!e||a.color===e;if(o&&s&&!a.isTemporaryOutOfStock){i=a;break}}return i}}])&&ro(t.prototype,i),n&&ro(t,n),a}(ve.a);function wo(){var e=null;ho(this,mo).allowedSellingRegions&&(e=ho(this,mo).allowedSellingRegions.slice()),po(this,yo,new Ja.a(new Ja.b({regionData:ho(this,mo),activeValue:e,onChanged:uo(this,Co,Io).bind(this),shouldShowAvailabilityInfo:ho(this,bo),shouldLimitPickableRegionCount:ho(this,go).shouldLimitPickableRegionCount}))),ho(this,yo).node.append(this.node)}function Io(){var e=this,t=this.getSelectedRegions().filter((function(t){return!ho(e,yo).isRegionSelected(t)}));ho(this,vo).call(this,this.getSelectedRegions(),t)}var So=function e(t){var i=t.regionData,n=void 0===i?null:i,r=t.activeRegion,a=void 0===r?null:r,o=t.onChange,s=void 0===o?null:o,l=t.productId,c=void 0===l?null:l,u=t.shouldShowAvailabilityInfo,d=void 0===u||u,h=t.shouldLimitPickableRegionCount,p=void 0===h||h;no(this,e),this.regionData=n,this.activeRegion=a,this.onChange=s,this.productId=c,this.shouldShowAvailabilityInfo=d,this.shouldLimitPickableRegionCount=p},Eo=i("XPj6");function Oo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var ko=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Oo(this,e),this.id=t.id,this.externalId=t.externalId,this.type=t.type,this.previewUrl=t.previewUrl,this.width=t.width,this.height=t.height,this.price=t.price,this.currency=t.currency,this.pricingStrategy=t.pricingStrategy,this.status=t.status,this.pricingModifier=t.pricingModifier};function Lo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Ao=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lo(this,"onAddFileCallback",null),Lo(this,"onBackCallback",null),Lo(this,"selectedPlacementTechnique",null),Lo(this,"fileDropZone",null),Lo(this,"storeId",null),Lo(this,"currency","")};window&&((globalThis||{}).PFProductPushLicensedAssetPickerPar=Ao);var Ro=i("9Nv7");function No(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Do(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){No(a,n,r,o,s,"next",e)}function s(e){No(a,n,r,o,s,"throw",e)}o(void 0)}))}}function xo(e,t,i,n,r){return Fo.apply(this,arguments)}function Fo(){return(Fo=Do(regeneratorRuntime.mark((function e(t,i,n,r,a){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,o){to.a.includes(["getty"],t)?Object(Ro.a)("licensed-asset/search-asset",{provider:t,key:i,currency:n,storeId:r,page:a}).then((function(t){var i=(t||[]).map((function(e){return new ko(e)}));e(i)})).catch((function(e){return o(e)})):o(new Error("Invalid provider"))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Mo(e,t){return Bo.apply(this,arguments)}function Bo(){return(Bo=Do(regeneratorRuntime.mark((function e(t,i){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){t&&t instanceof ko||n(new Error("Invalid licensed asset provided")),Object(Ro.a)("licensed-asset/save-asset",{assetItem:t,searchKey:i}).then((function(t){return e(t)})).catch((function(e){return n(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Vo(e){try{return"".concat(qo,"-recent-").concat(PF.Customer.customerId?PF.Customer.customerId:"","-store-").concat(e||"")}catch(e){console.warn("Could not get recent licensed asset items from local storage!")}}function jo(e,t){try{var i=JSON.parse(localStorage.getItem(Vo(t)))||[];i.some((function(t){return t.externalId===e.externalId}))||i.unshift(e),window.localStorage.setItem(Vo(t),JSON.stringify(i))}catch(e){console.warn("Could not save recent licensed asset items in local storage!")}}function Uo(e,t,i){return zo.apply(this,arguments)}function zo(){return(zo=Do(regeneratorRuntime.mark((function e(t,i,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e,r){to.a.includes(["getty"],t)?Object(Ro.a)("licensed-asset/get-licensed-asset-item",{itemId:i,currency:n}).then((function(t){var i=t?new ko(t):null;e(i)})).catch((function(e){return r(e)})):r(new Error("Invalid provider"))}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Go(e,t,i){return Ho.apply(this,arguments)}function Ho(){return(Ho=Do(regeneratorRuntime.mark((function e(t,i,n){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(Ro.a)("licensed-asset/get-licensed-asset-converted-price",{price:t,currencyTo:i,currencyFrom:n});case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),console.warn("Could not fetch converted price.");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var qo="licensedAssetItems";function Yo(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var Wo=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Yo(this,"item",null),Yo(this,"onClickCallback",null),Yo(this,"showEmpty",!0),Yo(this,"fileDropZone",null),Yo(this,"isRecent",!1)};window&&((globalThis||{}).PFProductPushLicensedAssetPickerItemPar=Wo);var Ko=i("FHCs"),Zo=i("cvaF"),Xo=Class({_item:null,_par:null,__construct:function(e){this._par=new Wo,w.a.O2O(this._par,e||{}),this._item=this._par.item,this.node=tag("div",{className:"masonry__item pf-rounded pf-hover-shadow"},[tag("div",{className:"pf-pointer",onclick:this._par.onClickCallback.bind(this,this._item),prop:{ondragstart:this._assetDragStart.bind(this,this._item),ondragend:this._assetDragEnd.bind(this)}},[tag("div",{className:"pf-position-relative",style:{paddingTop:this._par.isRecent?"":this._item.height/this._item.width*100+"%"}},[tag("img",{className:"img-responsive "+(this._par.isRecent?"":"pf-position-absolute"),src:Ko.a,loading:"lazy",data:{src:this._item.previewUrl}}),tag("span","pf-position-absolute masonry__item-price pf-text-white pf-ui-legal pf-border pf-border-white pf-px-4",[tag("span","masonry__item-price__hidden",this.getLabelSign(this._item.price)),this.getLabelText(this._item.price,this._item.currency),tag("span","masonry__item-price__hidden",this.getLabelPrice(this._item.pricingModifier,this._item.price))])])])])},getLabelSign:function(e){return 0===e?"":"+"},getLabelText:function(e,t){return 0===e?dlang("generator","Free"):Zo.a.getCurrencySymbol(t)},getLabelPrice:function(e,t){return"pro"===e?" (".concat(dlang("generator","Pro"),")"):t},_assetDragStart:function(e,t){this._par.fileDropZone.enableDomElementDropZone(),t.dataTransfer.setData("domelement",JSON.stringify(e))},_assetDragEnd:function(e){this._par.fileDropZone.disableDomElementDropZone()}},w.a.Base);window&&((globalThis||{}).PFProductPushLicensedAssetPickerItem=Xo);var Qo=i("FKE6"),$o=i("hNNL"),Jo=i.n($o);function es(e){return function(e){if(Array.isArray(e))return ts(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ts(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ts(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function is(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ns(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){is(a,n,r,o,s,"next",e)}function s(e){is(a,n,r,o,s,"throw",e)}o(void 0)}))}}var rs,as,os,ss,ls,cs,us,ds,hs,ps,fs=Class({_state:{items:[]},_nodeItems:null,_nodeItemsTitle:null,_nodeRecent:null,_nodeRecentTitle:null,_nodeSearch:null,_nodeLoadingIndicator:null,_nodeNoMoreItems:null,_nodeScrollContainer:null,_par:null,_searchText:"",_recentLength:0,_modal:null,_latestSearchKey:"",_curPage:1,_pageSize:30,_infiniteScrollObserver:null,_masonry:null,_masonrySettings:{itemSelector:".masonry__item",columnWidth:".masonry__item",percentPosition:!0,transitionDuration:"360ms"},_scrollShadow:null,_scrollLastPosition:0,_nodeProDisclaimer:null,__construct:function(e){this._par=e,this._scrollShadow=new Oi([this._nodeRecentTitle=tag("h5","pf-h5 pf-mb-12 pf-d-none",dlang("generator","Recently used")),this._nodeRecent=tag("div","pf-d-none masonry__static"),this._nodeItemsTitle=tag("h5","pf-h5 pf-my-12",dlang("generator","Inspiration")),this._nodeItems=tag("div","masonry"),this._nodeLoadingIndicator=tag("div","load-indicator pf-d-flex"),this._nodeNoMoreItems=tag("div",{className:"pf-w-50 pf-mx-auto pf-mt-32 pf-mb-4 pf-bg-light pf-d-none",style:{height:"1px"}})]),this.node=tag("div","browse-artwork-picker",[tag("a",{className:"pf-link-block pf-mb-24",onclick:this._par.onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),tag("div","pf-mt-16 pf-d-flex pf-justify-content-between pf-align-items-center",[tag("h5","pf-h5 pf-m-0",dlang("generator","Browse artwork")),tag("a",{className:"pf-link",onclick:this._openModal},dlang("generator","How does it work?"))]),this._nodeSearch=tag("div","pf-my-12"),this._nodeProDisclaimer=tag("div"),this._scrollShadow]),this._renderSearch(),this._renderProDisclaimer(),this._buildModal()},renderItems:(ps=ns(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._defineScrollContainer(),this._setScrollContainerListener(),this._searchText||0!==this._scrollLastPosition){e.next=7;break}return e.next=5,this.loadDefaultAssets();case 5:e.next=9;break;case 7:this._renderSearch(),this._scrollToPosition();case 9:this._scrollShadow.addScrollEventListener();case 10:case"end":return e.stop()}}),e,this)}))),function(){return ps.apply(this,arguments)}),_getColumnCount:function(){var e=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),t=2;return e>=992?t=3:e>=768?t=4:e>=540&&(t=3),t},_isLastPage:function(){return this._state.items.length%this._pageSize>0},_clearAllItems:function(){!this._searchText&&this._masonry&&this._masonry.destroy(),w.a.clearNode(this._nodeItems),this._resetScrollPosition()},_setItems:function(e){this._state.items=e,this._clearAllItems();for(var t=0,i=this._state.items.length;t<i;t++)this._addItem(this._state.items[t]);this._state.items.length>0&&(this._masonry=new Jo.a(this._nodeItems,this._masonrySettings),this._addInfiniteScrollTriggers(),this._updateLoadIndicator(),this._masonry.on("layoutComplete",this._updateLoadIndicator.bind(this)))},_addAdditionalItems:function(e){var t=[];this._state.items=this._state.items.concat(e);for(var i=0,n=e.length;i<n;i++)t.push(this._addItem(e[i]).node);this._masonry.appended(t),this._addInfiniteScrollTriggers(),this._scrollShadow.updateScrollShadowing()},_addItem:function(e){var t=new Wo;t.item=e,t.fileDropZone=this._par.fileDropZone,t.onClickCallback=this.onItemClick.bind(this);var i=new Xo(t);return i.append(this._nodeItems),i},_canDisplayRecent:function(){return this._recentLength>0},loadDefaultAssets:(hs=ns(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.show(this._nodeScrollContainer),e.next=3,this._getAllLicensedAssets({searchKey:""});case 3:x.a.hide(this._nodeScrollContainer),this._renderRecent();case 5:case"end":return e.stop()}}),e,this)}))),function(){return hs.apply(this,arguments)}),_renderRecent:function(){w.a.clearNode(this._nodeRecent);var e=function(e){try{return JSON.parse(localStorage.getItem(Vo(e)))||[]}catch(e){console.warn("Could not get getRecentKey from local storage!")}}(this._par.storeId);e.length>5&&(e=e.slice(0,6)),this._recentLength=e.length,this._canDisplayRecent()?(w.a.removeClassName(this._nodeRecent,"pf-d-none"),w.a.removeClassName(this._nodeRecentTitle,"pf-d-none")):(w.a.addClassName(this._nodeRecent,"pf-d-none"),w.a.addClassName(this._nodeRecentTitle,"pf-d-none"));for(var t=0,i=e.length;t<i;t++){var n=new Wo;n.item=e[t],n.isRecent=!0,n.onClickCallback=this.onItemClick.bind(this),n.fileDropZone=this._par.fileDropZone,new Xo(n).append(this._nodeRecent)}return this},_renderSearch:function(){var e=this;this._renderSearchResult(),w.a.clearNode(this._nodeSearch),new vi.a({onChange:function(t){t||(e._searchText=null,e._clearAllItems(),e.loadDefaultAssets())},onKeyUp:function(t){e._searchText=t},onKeyUpEvent:function(t){t.keyCode===$.ui.keyCode.ENTER&&e._initSearch()},type:"text",showClearButton:!0,placeholder:dlang("generator","Search Premium Images"),className:"tt-input",name:"SearchArtworks",id:"search-artworks-"+Math.random().toString(36).substring(7),autoComplete:!1,value:this._searchText}).append(this._nodeSearch)},_renderProDisclaimer:(ds=ns(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(yt.d)(yt.c);case 2:t=e.sent,w.a.clearNode(this._nodeProDisclaimer),t&&tag("p",{className:"pf-ui-caption pf-text-muted"},[tag("i",{className:"pf-i pf-i-12 pf-i-crown pf-text-yellow-pro pf-mr-4",style:{verticalAlign:"baseline"}}),tag("span",{innerHTML:dlang("generator","Premium images are {b}free{/b} for Pro").replace("{b}","<b>").replace("{/b}","</b>")})]).append(this._nodeProDisclaimer);case 5:case"end":return e.stop()}}),e,this)}))),function(){return ds.apply(this,arguments)}),_initSearch:(us=ns(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._curPage=1,e.next=3,this._getAllLicensedAssets({searchKey:this._searchText});case 3:this._renderSearchResult();case 4:case"end":return e.stop()}}),e,this)}))),function(){return us.apply(this,arguments)}),_renderSearchResult:function(){if(w.a.addClassName(this._nodeRecent,"pf-d-none"),w.a.addClassName(this._nodeRecentTitle,"pf-d-none"),w.a.addClassName(this._nodeItemsTitle,"pf-d-none"),w.a.addClassName(this._nodeItems,"masonry"),!this._searchText)return this._canDisplayRecent()&&(w.a.removeClassName(this._nodeRecent,"pf-d-none"),w.a.removeClassName(this._nodeRecentTitle,"pf-d-none")),w.a.removeClassName(this._nodeItemsTitle,"pf-d-none"),void this._scrollShadow.updateScrollShadowing();this._searchText=this._searchText.toLowerCase(),0===this._state.items.length&&(this._renderNoResultsFound(),w.a.removeClassName(this._nodeItems,"masonry"),this._updateLoadIndicator()),this._scrollShadow.updateScrollShadowing()},_renderNoResultsFound:function(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:bi.a}),tag("div","pf-ui-body pf-text-center",dlang("site","No results found!"))]).append(this._nodeItems)},_defineScrollContainer:function(){var e=document.getElementsByClassName("dynamic-sticky-footer__drawer--open");this._nodeScrollContainer=void 0!==e[0]?e[0]:this._scrollShadow.content},_setScrollContainerListener:function(){this._nodeScrollContainer.addEventListener("scroll",this._setScrollLastPosition)},_setScrollLastPosition:function(e){this._scrollLastPosition=e.target.scrollTop},_scrollToPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._scrollLastPosition;this._nodeScrollContainer.scrollTop=e},_resetScrollPosition:function(){this._scrollToPosition(0)},onItemClick:(cs=ns(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._nodeScrollContainer.removeEventListener("scroll",this._setScrollLastPosition),t&&t instanceof ko||(t=new ko(t)),x.a.show(this._nodeScrollContainer),e.next=5,Mo(t,this._latestSearchKey);case 5:(i=e.sent).id&&(t.id=i.id,t.previewUrl=i.preview?i.preview:t.previewUrl,jo(t,this._par.storeId),this._par.onAddFileCallback(t,t.id),x.a.hide(this._nodeScrollContainer));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return cs.apply(this,arguments)}),getLicensedAssetById:(ls=ns(regeneratorRuntime.mark((function e(t){var i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Uo("getty",t,this._par.currency);case 3:if(!(i=e.sent)){e.next=7;break}return e.next=7,this.onItemClick(i);case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("RPC error while getting getty image: "+e.t0);case 12:case"end":return e.stop()}}),e,this,[[0,9]])}))),function(e){return ls.apply(this,arguments)}),getLicensedAssetsByKeyword:(ss=ns(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._searchText=t,this._renderSearch(),x.a.show(this._nodeScrollContainer),e.prev=3,e.next=6,this._initSearch();case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log("Couldn't get getty images: "+e.t0);case 11:x.a.hide(this._nodeScrollContainer);case 12:case"end":return e.stop()}}),e,this,[[3,8]])}))),function(e){return ss.apply(this,arguments)}),_getAllLicensedAssets:(os=ns(regeneratorRuntime.mark((function e(t){var i,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.searchKey,n=void 0===i?"":i,x.a.show(this._nodeScrollContainer),this._latestSearchKey=n,this._curPage=1,e.next=6,xo("getty",n,this._par.currency,this._par.storeId,this._curPage);case 6:r=e.sent,x.a.hide(this._nodeScrollContainer),r&&this._setItems(r);case 9:case"end":return e.stop()}}),e,this)}))),function(e){return os.apply(this,arguments)}),_getPaginatedAssets:(as=ns(regeneratorRuntime.mark((function e(){var t,i,n=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1,e.next=3,xo("getty",this._latestSearchKey,this._par.currency,this._par.storeId,t);case 3:(i=e.sent)&&i.length>0?this._addAdditionalItems(i):(w.a.clearNode(this._nodeLoadingIndicator),w.a.removeClassName(this._nodeNoMoreItems,"pf-d-none"));case 5:case"end":return e.stop()}}),e,this)}))),function(){return as.apply(this,arguments)}),_buildModal:(rs=ns(regeneratorRuntime.mark((function e(){var t,i,n,r,a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=new pt.a.Par).nodeClass="pf-modal",t.headerFlexWrap="pf-flex-nowrap",t.title=dlang("generator","Hereâs what you should know about Premium Images"),t.onClose=function(){s._modal.remove()},i="$1",this._par.currency===Qo.a.CURRENCY_USD){e.next=11;break}return e.next=9,Go(1,this._par.currency,Qo.a.CURRENCY_USD);case 9:(n=e.sent)&&(i=prettyMoney(n,this._par.currency));case 11:r=dlang("generator","Each individual placement of a Premium Image costs an additional {priceWithCurrency}.").replace("{priceWithCurrency}",i),a=tag("div","pf-m-0",[tag("img",{src:PF.ASSETS_URL+"images/dashboard/printful-getty.png",style:{maxWidth:"100%"}}),tag("p",null,[r]),tag("p",null,[dlang("generator","Designs containing Premium Images can be used with Printful products, but can't be downloaded as print files.")])]),o=tag("div","text-left",[this._primaryButton=tag("a",{className:"pf-btn pf-btn-primary pf-mr-12",onclick:this._closeModal},dlang("generator","Got it!"))]),this._modal=new pt.a(t),this._modal.setContent(a),this._modal.setFooterContent(o);case 17:case"end":return e.stop()}}),e,this)}))),function(){return rs.apply(this,arguments)}),_openModal:function(){this._modal.show()},_closeModal:function(){this._modal.hide()},_getInfiniteScrollObserver:function(){var e=this;if(!this._infiniteScrollObserver){var t={root:this.node,rootMargin:"0px 0px 200px 0px",threshold:0};this._infiniteScrollObserver=new IntersectionObserver((function(t){var i=!1;t.forEach((function(e){e.isIntersecting&&(i=!0)})),i&&(e._getInfiniteScrollObserver().disconnect(),e._getPaginatedAssets(++e._curPage))}),t)}return this._infiniteScrollObserver},_addInfiniteScrollTriggers:function(){if(!this._isLastPage())for(var e=this._getColumnCount(),t=this._nodeItems.children.length-2*e,i=0;i<e;i++){var n=this._nodeItems.children[--t];this._getInfiniteScrollObserver().observe(n)}},_splitItemsIntoColumns:function(e){var t={};return e.forEach((function(e){var i=e.getBoundingClientRect();t[i.left]||(t[i.left]=[]),t[i.left].push(i)})),Object.keys(t).forEach((function(e){t[e].sort((function(e,t){return e.bottom>t.bottom?-1:t.bottom>e.bottom?1:0}))})),Object.values(t)},_updateLoadIndicator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(w.a.clearNode(this._nodeLoadingIndicator),w.a.addClassName(this._nodeNoMoreItems,"pf-d-none"),this._state.items.length)if(this._isLastPage())w.a.removeClassName(this._nodeNoMoreItems,"pf-d-none");else{var t=this._getColumnCount(),i=this._nodeLoadingIndicator.getBoundingClientRect(),n=e.length>0?e[0]:null,r=100;if(!(this._state.items.length<t))for(var a=0;a<t;a++){var o=0;if(n)o=Math.max.apply(Math,es(n.layout.colYs))-n.layout.colYs[a];else{var s=this._splitItemsIntoColumns(this._nodeItems.children);if(s&&s[a]&&s[a].length){var l=s[a][0];o=i.bottom-l.bottom}else o=0}var c=r+o,u=tag("div",{className:"masonry__item masonry__item--placeholder",style:{marginTop:"-".concat(o,"px"),height:"".concat(c,"px")}},[tag("div",{className:"pf-position-relative pf-h-100",attr:{style:"--loading-animation-delay:"+(120+120*a)+"ms"}},[tag("img",{className:"img-responsive pf-position-absolute",src:Ko.a})])]);u.append(this._nodeLoadingIndicator)}}}},w.a.Base);window&&((globalThis||{}).PFProductPushLicensedAssetPicker=fs);var gs=i("oCYn"),ms=i("e7F3");function _s(e){return(_s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vs(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function ys(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){vs(a,n,r,o,s,"next",e)}function s(e){vs(a,n,r,o,s,"throw",e)}o(void 0)}))}}function bs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ps(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cs(e,t){return(Cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ts(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Ss(e);if(t){var r=Ss(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return ws(this,i)}}function ws(e,t){return!t||"object"!==_s(t)&&"function"!=typeof t?Is(e):t}function Is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ss(e){return(Ss=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Es(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,ks(e,t,"get"))}function Os(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,ks(e,t,"set"),i),i}function ks(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Ls=new WeakMap,As=new WeakMap,Rs=new WeakSet,Ns=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cs(e,t)}(a,e);var t,i,n,r=Ts(a);function a(e){var t;return bs(this,a),t=r.call(this),Rs.add(Is(t)),Ls.set(Is(t),{writable:!0,value:void 0}),As.set(Is(t),{writable:!0,value:void 0}),t.node=tag("div","youtube-video-mke"),Os(Is(t),Ls,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Is(t),Rs,Ds).call(Is(t)),t}return t=a,(i=[{key:"destroy",value:function(){Es(this,As).destroy(),Os(this,As,null)}}])&&Ps(t.prototype,i),n&&Ps(t,n),a}(ve.a);function Ds(){return xs.apply(this,arguments)}function xs(){return(xs=ys(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:gs.default.use(ms.c),(t=new ye.b).components={"youtube-video":function(){return i.e(161).then(i.bind(null,"AlMj"))}},t.template='\n            <youtube-video\n                :videoId="videoId"\n                :autoPlay="autoPlay"\n                :width="width"\n                :height="height"\n                :thumbnail="thumbnail"\n                :useIframeHook="useIframeHook"\n                :isSliding="isSliding"\n                :currentTimestampData="currentTimestampData"\n            />\n        ',t.initialData={videoId:Es(this,Ls).videoId,autoPlay:Es(this,Ls).autoPlay||!1,width:Es(this,Ls).width,height:Es(this,Ls).height,thumbnail:Es(this,Ls).thumbnail,useIframeHook:Es(this,Ls).useIframeHook,isSliding:Es(this,Ls).isSliding,currentTimestampData:Es(this,Ls).currentTimestampData},Os(this,As,new ye.a(t)),Es(this,As).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Fs=i("2ovl"),Ms=i("DD1l"),Bs=i("n6mh"),Vs=i("IAu2"),js=i("HSPo"),Us=i("XJFE");function zs(e){return(zs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Hs(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Gs(a,n,r,o,s,"next",e)}function s(e){Gs(a,n,r,o,s,"throw",e)}o(void 0)}))}}function qs(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ys(e,t){return(Ys=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ws(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Xs(e);if(t){var r=Xs(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Ks(this,i)}}function Ks(e,t){return!t||"object"!==zs(t)&&"function"!=typeof t?Zs(e):t}function Zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xs(e){return(Xs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qs(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Js(e,t,"get"))}function $s(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Js(e,t,"set"),i),i}function Js(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var el=new WeakMap,tl=new WeakMap,il=new WeakSet,nl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ys(e,t)}(i,e);var t=Ws(i);function i(e){var n;return qs(this,i),n=t.call(this),il.add(Zs(n)),el.set(Zs(n),{writable:!0,value:void 0}),tl.set(Zs(n),{writable:!0,value:void 0}),n.node=tag("div","mockup-picker-mke"),$s(Zs(n),el,e),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(Zs(n),il,rl).call(Zs(n)),n}return i}(ve.a);function rl(){return al.apply(this,arguments)}function al(){return(al=Hs(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"mockup-picker":function(){return Promise.all([i.e(1),i.e(2),i.e(245)]).then(i.bind(null,"7KO8"))}},t.template="\n            <mockup-picker\n                @onBack=\"emitEvent('onBack', $event)\"\n                @onPicked=\"emitEvent('onPicked', $event)\"\n            />\n        ",t.emitEvent=function(e,t){switch(e){case"onBack":Qs(n,el).onBack(t);break;case"onPicked":Qs(n,el).onPicked(t)}},$s(this,tl,new ye.a(t)),Qs(this,tl).append(this.node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var ol=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};qs(this,e),this.onBack=t.onBack||void 0,this.onPicked=t.onPicked||void 0},sl=i("dVbR");function ll(e,t,n){if(n&&!window.PF.Customer.isLogged())return!1;if(!(null==e?void 0:e.hasUnrelatedTemplates()))return!1;var r=[];try{r=JSON.parse(window.localStorage.getItem("unrelated_templates_modal_shown")||[])}catch(e){}if(r.indexOf(t)>-1)return!1;n&&w.a.addClassName(n,"disabled");var a=new ye.b;return a.components={"unrelated-templates-modal":function(){return i.e(194).then(i.bind(null,"ibuy"))}},a.template="<unrelated-templates-modal @onClosed=\"emitEvent('onClosed')\"/>",a.emitEvent=function(e,i){if("onClosed"===e){n&&w.a.removeClassName(n,"disabled");try{r.push(t),window.localStorage.setItem("unrelated_templates_modal_shown",JSON.stringify(r))}catch(e){}}},new ye.a(a).append(document.body),!0}var cl=i("rF+z");function ul(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return dl(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return dl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dl(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function hl(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function pl(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){hl(a,n,r,o,s,"next",e)}function s(e){hl(a,n,r,o,s,"throw",e)}o(void 0)}))}}var fl={THREE:null,OrbitControls:null,OBJLoader:null,GLTFExporter:null},gl=Class({_par:null,_camera:null,_scene:null,_renderer:null,_model:null,_materials:[],_loadedJsFilesCount:null,_loadedJFilesNeeded:null,_textureLoader:null,_mapObj:null,_previousPreviewStr:null,dimensions:null,_3dModelLoaded:null,__construct:function(e){this._par=e;var t=PF.DEV?tag("a",{className:"pf-btn pf-btn-primary pf-m-8",style:{pointerEvents:"auto"},onclick:this.export3dModel.bind(this,this._par.productSlug,!1)},dlang("generator","Export 3d model .gltf")):"",i=PF.DEV?tag("a",{className:"pf-btn pf-btn-primary pf-m-8",style:{pointerEvents:"auto"},onclick:this.export3dModel.bind(this,this._par.productSlug,!0)},dlang("generator","Export 3d model .glb")):"";this.node=tag("div","live-3d-view pf-pt-lg-16",[this._nodeStatus=tag("div","pf-d-none"),this._nodeMain=tag("div","live-3d-view__main"),t,i])},loadThreeCache:function(){return pl(regeneratorRuntime.mark((function e(){var t,n,r,a,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(fl.THREE&&fl.OrbitControls&&fl.OBJLoader&&fl.GLTFExporter)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,Promise.all([i.e(26).then(i.bind(null,"Womt")),Promise.all([i.e(26),i.e(418)]).then(i.bind(null,"RyHr")),Promise.all([i.e(26),i.e(420)]).then(i.bind(null,"5kJi")),Promise.all([i.e(26),i.e(419)]).then(i.bind(null,"nlz5"))]);case 4:t=e.sent,n=ul(t,4),r=n[0],a=n[1].OrbitControls,o=n[2].OBJLoader,s=n[3].GLTFExporter,fl.THREE=r,fl.OrbitControls=a,fl.OBJLoader=o,fl.GLTFExporter=s;case 14:case"end":return e.stop()}}),e)})))()},_validate3dViewCreation:function(){var e,t=null===(e=this._par.getSelectedVariant())||void 0===e?void 0:e.templateId;return Rr.getMapObject(t)?this._par.getCanvasObj()?!!this._isWebGlAvailable()||(console.error("WebGl is not available for your browser"),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1):(console.error("Canvas object is not reachable!"),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1):(console.error("Obj file could not be found for ",Object(Q.a)().productId,t),this._setAndShowError(dlang("generator","Failed to load 3D model")),!1)},generate3d:function(){var e=this;return pl(regeneratorRuntime.mark((function t(){var i,n,r,a,o,s,l,c,u,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._validate3dViewCreation()){t.next=2;break}return t.abrupt("return");case 2:if(t.prev=2,r=null===(i=e._par.getSelectedVariant())||void 0===i?void 0:i.templateId,e._mapObj=Rr.getMapObject(r),e._mapObj){t.next=9;break}return console.error("map config object not defined",Object(Q.a)().productId,r),e._setAndShowError(e,dlang("generator","Failed to load 3D model")),t.abrupt("return");case 9:return t.prev=9,t.next=12,e._getAndPrepareImg();case 12:a=t.sent,t.next=18;break;case 15:return t.prev=15,t.t0=t.catch(9),t.abrupt("return");case 18:if((o=PF.ASSETS_URL+e._mapObj.objFile)&&a){t.next=23;break}return console.error("base64ImageSrc or objFilePath is not defined",o),e._setAndShowError(e,dlang("generator","Failed to load 3D model")),t.abrupt("return");case 23:if(e.dimensions=Rr.getDimensions(e._mapObj),null!==(n=e.dimensions)&&void 0!==n&&n.width&&e.dimensions.height){t.next=28;break}return console.error("Dimensions for 3d model is not defined"),e._setAndShowError(e,dlang("generator","Failed to load 3D model")),t.abrupt("return");case 28:e._camera=new fl.THREE.PerspectiveCamera(75,e.dimensions.width/e.dimensions.height,.1,1e3),s=Rr.getPositionValues(e._mapObj),e._camera.position.x=s.posX,e._camera.position.y=s.posY,e._camera.position.z=s.zoom,(l=new fl.OrbitControls(e._camera,e._nodeMain)).enableZoom=!1,l.minPolarAngle=e._mapObj.minPolarAngle||0,l.maxPolarAngle=e._mapObj.maxPolarAngle||Math.PI,l.minAzimuthAngle=e._mapObj.minAzimuthAngle||-1/0,l.maxAzimuthAngle=e._mapObj.maxAzimuthAngle||1/0,l.enablePan=!1,e._scene=new fl.THREE.Scene,c=new fl.THREE.AmbientLight(Rr.AMBIENT_LIGHT_COLOR,Rr.AMBIENT_LIGHT_INTENSITY),e._scene.add(c),(u=new fl.THREE.DirectionalLight(Rr.DIRECTIONAL_LIGHT_COLOR,Rr.DIRECTIONAL_LIGHT_INTENSITY)).position.set(1,1,1).normalize(),e._scene.add(u),(d=new fl.THREE.DirectionalLight(Rr.DIRECTIONAL_LIGHT_COLOR,Rr.DIRECTIONAL_LIGHT_INTENSITY)).position.set(-1,-1,-1).normalize(),e._scene.add(d),e._model=new fl.THREE.Object3D,e._scene.add(e._model),e._updateMaterial(a,e._init3dModel.bind(e,o)),e._renderer=new fl.THREE.WebGLRenderer({alpha:!0,antialias:!0}),e._renderer.setPixelRatio(window.devicePixelRatio),e._renderer.setSize(e.dimensions.width,e.dimensions.height),e._renderer.setClearColor(16777215,0),e._renderer.domElement.style.display="inline",e._nodeMain.appendChild(e._renderer.domElement),e._animate(),t.next=65;break;case 61:t.prev=61,t.t1=t.catch(2),e._setAndShowError(dlang("generator","Failed to load 3D model")),console.error(t.t1);case 65:case"end":return t.stop()}}),t,null,[[2,61],[9,15]])})))()},getTextureLoader:function(){return this._textureLoader||(fl.THREE.ImageUtils.crossOrigin="",this._textureLoader=new fl.THREE.TextureLoader),this._textureLoader},_getAndPrepareImg:function(){var e=this;return new Promise(function(){var t=pl(regeneratorRuntime.mark((function t(i,n){var r,a,o,s;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.getSelectedPlacementId){t.next=2;break}return t.abrupt("return",n());case 2:if(r=Rr.getFillColor(e._mapObj),a=e._par.getSelectedPlacementId(),o=Rr.getNeededPlacementIds(e._mapObj),t.prev=5,!(o.indexOf(a)>-1)){t.next=12;break}return t.next=9,e._getCanvasPreview(r);case 9:t.t0=t.sent,t.next=13;break;case 12:t.t0=Rr.getPlacementImage(configPlacementId);case 13:return s=t.t0,t.next=16,e._resamplePngFile(s,r);case 16:s=t.sent,t.next=22;break;case 19:t.prev=19,t.t1=t.catch(5),n();case 22:i(s);case 23:case"end":return t.stop()}}),t,null,[[5,19]])})));return function(e,i){return t.apply(this,arguments)}}())},_getCanvasPreview:function(e){var t=this;return new Promise(function(){var i=pl(regeneratorRuntime.mark((function i(n,r){var a,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t._par.getCanvasObj){i.next=2;break}return i.abrupt("return",r());case 2:if(a=t._par.getCanvasObj()){i.next=5;break}return i.abrupt("return",!1);case 5:if(o=a.convertToPreview({multiplier:1,fillColor:e})){i.next=8;break}return i.abrupt("return",r());case 8:return i.abrupt("return",n(o));case 9:case"end":return i.stop()}}),i)})));return function(e,t){return i.apply(this,arguments)}}())},_updateMaterial:function(e,t){var i=this;this.getTextureLoader().load(e,(function(e){var n;if(e.generateMipmaps=!1,e.wrapS=e.wrapT=fl.THREE.ClampToEdgeWrapping,e.minFilter=fl.THREE.LinearFilter,e.needsUpdate=!1,null!==(n=i._materials[0])&&void 0!==n&&n.map)i._materials[0].map=e;else{var r;null===(r=i._materials[0])||void 0===r||r.dispose(),i._materials=[new fl.THREE.MeshPhongMaterial({map:e,needsUpdate:!1})];for(var a=0,o=Object.entries(Rr.getMaterialMap(i._mapObj));a<o.length;a++){var s=ul(o[a],2);s[0];s[1]===Rr.MATERIAL_METAL&&i._materials.push(new fl.THREE.MeshPhongMaterial({map:e,needsUpdate:!1,shininess:150,specular:"#a1a1a1"}))}}t&&t(),e.dispose()}),null,this._onDataLoadError)},_init3dModel:function(e){var t=this._par.getLoaded3dObj();t?this._onObjLoaded(t):new fl.OBJLoader(new fl.THREE.LoadingManager).load(e,this._onObjLoaded.bind(this),this._onObjLoadProgress,this._onDataLoadError)},scheduleDesignReload:function(){P.a.delay("3d-model-reload",this.reloadDesign.bind(this),50)},reloadDesign:function(){var e=this;return pl(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._3dModelLoaded){t.next=2;break}return t.abrupt("return");case 2:return e._nodeStatus.textContent="",t.prev=3,t.next=6,e._getAndPrepareImg();case 6:i=t.sent,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return");case 12:i&&e._previousPreviewStr!==i&&(e._previousPreviewStr=i,e._updateMaterial(i,e._setMaterialForModel.bind(e)),e.startAnimate());case 13:case"end":return t.stop()}}),t,null,[[3,9]])})))()},_setMaterialForModel:function(){var e=this;this._model&&this._model.traverse((function(t){if(t instanceof fl.THREE.Mesh){var i,n;if(null!==(i=t.material)&&void 0!==i&&i.displose)null===(n=t.material)||void 0===n||n.dispose();1===e._materials.length?t.material=e._materials[0]:t.material=e._materials}}))},_getPngDimensions:function(e){e=e.split(",")[1];var t=atob(e.slice(0,50)).slice(16,24),i=Uint8Array.from(t,(function(e){return e.charCodeAt(0)})),n=new DataView(i.buffer);return{width:n.getInt32(0),height:n.getInt32(4)}},_resamplePngFile:function(e,t){var i=this;return pl(regeneratorRuntime.mark((function n(){var r,a,o,s,l,c,u,d,h,p,f,g,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=i._mapObj.rowColCount,e){n.next=3;break}return n.abrupt("return",new Promise((function(e,t){return t()})));case 3:return a=i._getPngDimensions(e),o=document.createElement("canvas"),s=o.getContext("2d"),o.width=a.width*r,o.height=a.height*r,s.fillStyle=t,s.fillRect(0,0,o.width,o.height),i._resampleAddSelectedVariantColor(a,s),i._resampleStaticColors(a,s),n.prev=12,n.next=15,i._resampleStaticImage(a,o);case 15:n.next=20;break;case 17:return n.prev=17,n.t0=n.catch(12),n.abrupt("return",new Promise((function(e,t){return t()})));case 20:l="",c=0,u=Object.entries(Rr.getPlacementMap(i._mapObj));case 22:if(!(c<u.length)){n.next=45;break}if(d=ul(u[c],2),h=d[0],p=d[1],(f=Rr.getPlacementImage(p+"_"+i._mapObj.templateIds[h]))||(f=Rr.getPlacementImage(p)),!f){n.next=42;break}if(n.prev=27,!i._mapObj.rotateBy90Deg){n.next=32;break}return n.next=31,i._rotateImageBy90Deg(f);case 31:f=n.sent;case 32:return g=h%i._mapObj.rowColCount*a.width,m=Math.floor(h/i._mapObj.rowColCount)*a.height,n.next=36,i._drawImageReturnBase64(f,o,g,m,a.width,a.height);case 36:l=n.sent,n.next=42;break;case 39:return n.prev=39,n.t1=n.catch(27),n.abrupt("return",new Promise((function(e,t){return t()})));case 42:c++,n.next=22;break;case 45:return n.abrupt("return",l);case 46:case"end":return n.stop()}}),n,null,[[12,17],[27,39]])})))()},_rotateImageBy90Deg:function(e){return new Promise((function(t,i){var n=new Image;n.onload=function(){var e=document.createElement("canvas");e.width=n.height,e.height=n.width;var i=e.getContext("2d");i.translate(Math.floor(n.height/2),Math.floor(n.width/2)),i.rotate(Math.PI/180*90),i.drawImage(n,-n.width/2,-n.height/2),t(e.toDataURL())},n.onerror=i,n.crossOrigin="anonymous",n.src=e}))},_drawImageReturnBase64:function(e,t,i,n,r,a,o){return new Promise((function(s,l){var c=function(){t.getContext("2d").drawImage(this,i,n,r,a),Rr.staticImageCache[e]=this,s(t.toDataURL())};if(o&&Rr.staticImageCache[e])c.apply(Rr.staticImageCache[e]);else{var u=new Image;u.onload=c,u.onerror=l,u.crossOrigin="anonymous",u.src=e}}))},_resampleAddSelectedVariantColor:function(e,t){if(this._mapObj&&e&&t){var i=this._mapObj.variantColorSector;if(i){var n=this._par.getDesignData(),r=this._getSelectedVariantHexColor(n);r&&this._resampleColorSector(e,t,i,r)}}},_resampleColorSector:function(e,t,i,n){t.fillStyle=n;var r=i%this._mapObj.rowColCount*e.width,a=Math.floor(i/this._mapObj.rowColCount)*e.height;t.fillRect(r,a,e.width,e.height)},_resampleStaticColors:function(e,t){var i;if(null!==(i=this._mapObj)&&void 0!==i&&i.staticColorMap&&e&&t)for(var n=0,r=Object.entries(this._mapObj.staticColorMap);n<r.length;n++){var a=ul(r[n],2),o=a[0],s=a[1];this._resampleColorSector(e,t,o,s)}},_resampleStaticImage:function(e,t){var i=this;return new Promise(function(){var n=pl(regeneratorRuntime.mark((function n(r,a){var o,s,l,c,u,d,h,p;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!==(o=i._mapObj)&&void 0!==o&&o.staticImageMap&&e&&t){n.next=3;break}return r(),n.abrupt("return");case 3:s=0,l=Object.entries(i._mapObj.staticImageMap);case 4:if(!(s<l.length)){n.next=19;break}return c=ul(l[s],2),u=c[0],d=c[1],h=u%i._mapObj.rowColCount*e.width,p=Math.floor(u/i._mapObj.rowColCount)*e.height,n.prev=8,n.next=11,i._drawImageReturnBase64(d,t,h,p,e.width,e.height,!0);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(8),n.abrupt("return",a());case 16:s++,n.next=4;break;case 19:r();case 20:case"end":return n.stop()}}),n,null,[[8,13]])})));return function(e,t){return n.apply(this,arguments)}}())},_animate:function(){this._renderer&&(this._animationKey=requestAnimationFrame(this._animate.bind(this)),this._renderer.render(this._scene,this._camera))},stopAnimate:function(){this._animationKey&&cancelAnimationFrame(this._animationKey)},startAnimate:function(){this.stopAnimate(),this._animate(),x.a.hide(this._par.loadingNode),PF.DEV&&console.log("camera positions (x,y,z):",this._camera.position.x,this._camera.position.y,this._camera.position.z)},_onObjLoaded:function(e){var t,i,n,r,a;this._3dModelLoaded=!0,e.position.x=(null===(t=this._mapObj)||void 0===t?void 0:t.objPosAdjustX)||0,e.position.y=(null===(i=this._mapObj)||void 0===i?void 0:i.objPosAdjustY)||0,e.position.z=(null===(n=this._mapObj)||void 0===n?void 0:n.objPosAdjustZ)||0,0===e.rotation.z&&this._mapObj.rotateBy90Deg?e.rotateZ(fl.THREE.Math.degToRad(90)):0===e.rotation.z||this._mapObj.rotateBy90Deg||e.rotateZ(fl.THREE.Math.degToRad(-90)),this._model.add(e),this._setMaterialForModel(),this._par.on3dObjectLoaded&&this._par.on3dObjectLoaded(this._model,this._mapObj.uniqueId),this._par.showWarningAlert&&null!==(r=this._mapObj)&&void 0!==r&&r.showWarning&&null!==(a=this._mapObj)&&void 0!==a&&a.warningBannerData&&new PFComponentsBanner({id:"banner-warning",type:"warning",className:"pf-position-absolute pf-w-100 ",heading:this._mapObj.warningBannerData.header,content:this._mapObj.warningBannerData.content,closable:!0}).prepend(this._nodeMain),x.a.hide(this._par.loadingNode)},export3dModel:function(e,t){var i=this,n=new fl.GLTFExporter,r=t?".glb":".gltf";n.parse(this._scene,(function(n){i._downloadFile(n,e+r,t)}),{binary:t,trs:!0})},_downloadFile:function(e,t,i){this._downloadLink=document.createElement("a"),this._downloadLink.style.display="none",document.body.appendChild(this._downloadLink);var n=i?e:JSON.stringify(e);this._saveString(n,t)},_saveString:function(e,t){this._save(new Blob([e],{type:"text/plain"}),t)},_save:function(e,t){this._downloadLink.href=URL.createObjectURL(e),this._downloadLink.download=t;var i=r.a.isDisabled;r.a.isDisabled=!0,this._downloadLink.click(),r.a.isDisabled=i},_onObjLoadProgress:function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}},_onDataLoadError:function _onDataLoadError(e){this._setAndShowError(dlang("generator","Failed to load 3D model")),console.error(e)},_setAndShowError:function _setAndShowError(e){this._nodeStatus.textContent=e,w.a.removeClassName(this._nodeStatus,"pf-d-none"),x.a.hide(this._par.loadingNode)},_isWebGlAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},_getSelectedVariantHexColor:function(e){var t;return null!=e&&null!==(t=e.hexColors)&&void 0!==t&&t.length?e.hexColors[e.hexColors.length-1]:null},reset3dModelLoaded:function(){this._3dModelLoaded=!1},destroy:function(){var e,t;null===(e=this._renderer)||void 0===e||e.dispose(),null===(t=this._materials[0])||void 0===t||t.dispose()}},w.a.Base);window&&((globalThis||{}).PFProductPushLive3dView=gl);var ml=Class({getCanvasObj:null,loadingNode:null,productSlug:null,getSelectedVariant:null,getDesignData:null,getLoaded3dObj:null,getSelectedPlacementId:null,on3dObjectLoaded:null,showWarningAlert:null,onWarningAlertClose:null});function _l(e){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vl(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function yl(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){vl(a,n,r,o,s,"next",e)}function s(e){vl(a,n,r,o,s,"throw",e)}o(void 0)}))}}function bl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pl(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Cl(e,t){return(Cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Sl(e);if(t){var r=Sl(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return wl(this,i)}}function wl(e,t){return!t||"object"!==_l(t)&&"function"!=typeof t?Il(e):t}function Il(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e){return(Sl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function El(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Ll(e,t,"get"))}function Ol(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function kl(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Ll(e,t,"set"),i),i}function Ll(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}window&&((globalThis||{}).PFProductPushLive3dViewPar=ml);var Al=new WeakMap,Rl=new WeakMap,Nl=new WeakSet,Dl=new WeakSet,xl=new WeakSet,Fl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cl(e,t)}(a,e);var t,i,n,r=Tl(a);function a(e){var t;return bl(this,a),t=r.call(this),xl.add(Il(t)),Dl.add(Il(t)),Nl.add(Il(t)),Al.set(Il(t),{writable:!0,value:void 0}),Rl.set(Il(t),{writable:!0,value:void 0}),t.node=tag("div","design-tools-mke pf-py-20 "+(e.designer.getTechnique()===me.n?"":"pf-border-bottom")),kl(Il(t),Al,e),t.init(),t}return t=a,n=[{key:"copyTextToClipboard",value:function(e){var t=document.createElement("textarea");t.value=e,t.setAttribute("readonly","readonly"),t.style.position="absolute",t.style.left="-9999px",document.body.appendChild(t),t.select(),t.setSelectionRange(0,99999),document.execCommand("copy"),document.body.removeChild(t),new Us.a({type:Us.a.TYPE_SUCCESS,content:"Layer data in JSON format copied to clipboard"})}}],(i=[{key:"init",value:function(){tag("a",{className:"pf-btn pf-btn-secondary pf-mb-24 col-12",style:{pointerEvents:"auto",top:0,right:0},onclick:Ol(this,Dl,Vl).bind(this)},[tag("i","pf-i pf-i-content-copy pf-bold pf-mr-4"),tag("span","",dlang("generator","Get design data and preview"))]).append(this.node),tag("div","pf-h4",[tag("span","",dlang("generator","Or paste design data"))]).append(this.node);var e=new vi.a({type:"text",showClearButton:!0,placeholder:dlang("generator","Paste design layers and press Enter"),name:"DesignLayerInput",id:"design-layer-input"});e.node.append(this.node),e.node.addEventListener("keydown",Ol(this,Nl,Ml).bind(this))}},{key:"destroy",value:function(){El(this,Rl).destroy(),kl(this,Rl,null)}}])&&Pl(t.prototype,i),n&&Pl(t,n),a}(ve.a);function Ml(e){return Bl.apply(this,arguments)}function Bl(){return(Bl=yl(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(13===t.keyCode){e.next=2;break}return e.abrupt("return");case 2:i=t.target.value,e.prev=3,JSON.parse(i),e.next=11;break;case 7:return e.prev=7,e.t0=e.catch(3),new Us.a({type:Us.a.TYPE_ERROR,content:"Error in layer data formatting!"}),e.abrupt("return");case 11:return e.next=13,Object(Ro.a)("product-generator/get-design-data-from-layers",{designLayers:i});case 13:if((n=e.sent).success){e.next=17;break}return new Us.a({type:Us.a.TYPE_ERROR,content:"Error parsing layer data on server!"}),e.abrupt("return");case 17:El(this,Al).designer.addGroupTemplateLayers({designData:n.designLayers,isPlainLayers:!0}),new Us.a({type:Us.a.TYPE_SUCCESS,content:"Design added"});case 19:case"end":return e.stop()}}),e,this,[[3,7]])})))).apply(this,arguments)}function Vl(){var e=Object(je.b)(El(this,Al).designer,!0);null!=e&&e.length?(Fl.copyTextToClipboard(JSON.stringify(e)),Ol(this,xl,jl).call(this)):new Us.a({type:Us.a.TYPE_ERROR,content:"There are no layers in design!"})}function jl(){var e=document.createElement("a"),t=El(this,Al).getDesignerMockup().getMockup().getPreviewImageEncodedString();e.setAttribute("href",t),e.setAttribute("download","preview"),e.style.display="none",document.body.appendChild(e);var i=r.a.isDisabled;r.a.isDisabled=!0,e.click(),r.a.isDisabled=i,document.body.removeChild(e)}var Ul=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};bl(this,e),this.designer=t.designer||void 0,this.getDesignerMockup=t.getDesignerMockup||void 0};function zl(e){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gl(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Hl(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ql(e,t){return(ql=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Zl(e);if(t){var r=Zl(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Wl(this,i)}}function Wl(e,t){return!t||"object"!==zl(t)&&"function"!=typeof t?Kl(e):t}function Kl(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zl(e){return(Zl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xl(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,$l(e,t,"get"))}function Ql(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,$l(e,t,"set"),i),i}function $l(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Jl=new WeakMap,ec=new WeakMap,tc=new WeakMap,ic=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ql(e,t)}(s,e);var t,i,n,r,a,o=Yl(s);function s(e){var t,i,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),n=o.call(this),Jl.set(Kl(n),{writable:!0,value:null}),ec.set(Kl(n),{writable:!0,value:null}),tc.set(Kl(n),{writable:!0,value:null}),Ql(Kl(n),tc,e),Ql(Kl(n),Jl,Xl(Kl(n),tc).item),n.node=Object(w.b)("div","col-3 pf-px-4 quick-design-picker__col",[Ql(Kl(n),ec,Object(w.b)("div",{className:"quick-design-picker__item pf-p-4 pf-mb-12 pf-position-relative pf-rounded pf-hover-shadow",onclick:n._onClick.bind(Kl(n)),prop:{ondragstart:n._quickDesignDragStart.bind(Kl(n)),ondragend:n._quickDesignDragEnd.bind(Kl(n))}},[Object(w.b)("div","quick-design-picker__labels",[null!==(t=Xl(Kl(n),Jl).extra)&&void 0!==t&&t.new?Object(w.b)("span","quick-design-picker__new"):"",null!==(i=Xl(Kl(n),Jl).extra)&&void 0!==i&&i.hidden?Object(w.b)("span","pf-badge pf-badge-small pf-badge--primary",dlang("generator","hidden")):""]),Object(w.b)("div","quick-design-picker__ratio",[Object(w.b)("div","quick-design-picker__ratio__inner",[n._getSpinnerAndLoadDimensions(Xl(Kl(n),Jl),Xl(Kl(n),tc).showEmpty)])])]))]),n}return t=s,(i=[{key:"_getSpinnerAndLoadDimensions",value:function(e,t){var i=this,n=function(n){"clipart"===e.designData[n].type&&i._getSpinner(e.designData[n].clipartItem,t,(function(t,i){e.designData[n].clipartItem.width=t,e.designData[n].clipartItem.height=i}))};for(var r in e.designData)n(r);return this._getSpinner(e,t,(function(t,i){e.width=t,e.height=i}))}},{key:"_getSpinner",value:function(e,t,i){var n=e.image.urlThumb,r=Object(w.b)("img",{className:"img-responsive pf-bg-white",src:t?"":PF.ASSETS_URL+"images/layout/spinner.svg",style:{opacity:.3}}),a=new Image;return a.onload=function(){r.src=n,r.style.opacity=1,i&&i(a.width,a.height)},a.src=n,r}},{key:"_quickDesignDragStart",value:function(e){Xl(this,tc).fileDropZone.enableDomElementDropZone(),e.dataTransfer.setData("domelement",JSON.stringify(Xl(this,Jl)))}},{key:"_quickDesignDragEnd",value:function(){Xl(this,tc).fileDropZone.disableDomElementDropZone()}},{key:"_onClick",value:(r=regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Xl(this,tc).onClickCallback(Xl(this,Jl),t));case 1:case"end":return e.stop()}}),e,this)})),a=function(){var e=this,t=arguments;return new Promise((function(i,n){var a=r.apply(e,t);function o(e){Gl(a,i,n,o,s,"next",e)}function s(e){Gl(a,i,n,o,s,"throw",e)}o(void 0)}))},function(e){return a.apply(this,arguments)})}])&&Hl(t.prototype,i),n&&Hl(t,n),s}(ve.a);function nc(e){return(nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ac(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=lc(e);if(t){var r=lc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return oc(this,i)}}function oc(e,t){return!t||"object"!==nc(t)&&"function"!=typeof t?sc(e):t}function sc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lc(e){return(lc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cc(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function uc(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,hc(e,t,"get"))}function dc(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,hc(e,t,"set"),i),i}function hc(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var pc=new WeakMap,fc=new WeakMap,gc=new WeakMap,mc=new WeakMap,_c=new WeakMap,vc=new WeakMap,yc=new WeakMap,bc=new WeakMap,Pc=new WeakMap,Cc=new WeakSet,Tc=new WeakSet,wc=new WeakSet,Ic=new WeakSet,Sc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rc(e,t)}(i,e);var t=ac(i);function i(e){var n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=t.call(this),Ic.add(sc(r)),wc.add(sc(r)),Tc.add(sc(r)),Cc.add(sc(r)),pc.set(sc(r),{writable:!0,value:null}),fc.set(sc(r),{writable:!0,value:null}),gc.set(sc(r),{writable:!0,value:null}),mc.set(sc(r),{writable:!0,value:null}),_c.set(sc(r),{writable:!0,value:!1}),vc.set(sc(r),{writable:!0,value:8}),yc.set(sc(r),{writable:!0,value:null}),bc.set(sc(r),{writable:!0,value:!1}),Pc.set(sc(r),{writable:!0,value:{}}),dc(sc(r),Pc,e),dc(sc(r),yc,uc(sc(r),Pc).group),r.node=Object(w.b)("div","pf-mb-32",[Object(w.b)("div","pf-mb-8 pf-d-flex pf-align-items-center",[dc(sc(r),gc,Object(w.b)("h5","pf-h5 pf-m-0",uc(sc(r),yc).name)),null!==(n=uc(sc(r),yc).extra)&&void 0!==n&&n.new?Object(w.b)("span","pf-badge pf-badge-small pf-badge--primary pf-ml-4",clang("Badge","New")):"",dc(sc(r),fc,uc(sc(r),yc).items.length>uc(sc(r),vc)?Object(w.b)("a",{className:"pf-ml-auto pf-mr-12 pf-link pf-ui-body",onclick:cc(sc(r),Ic,Lc).bind(sc(r))},dlang("generator","See more")):"")]),dc(sc(r),pc,Object(w.b)("div","row-flex")),dc(sc(r),mc,Object(w.b)("div","row-flex"))]),cc(sc(r),Cc,Ec).call(sc(r)),r}return i}(ve.a);function Ec(){w.a.clearNode(uc(this,pc));var e=uc(this,yc).items.length;e>uc(this,vc)&&(e=uc(this,vc));for(var t=0;t<e;t++)cc(this,wc,kc).call(this,uc(this,yc).items[t],uc(this,pc))}function Oc(){if(uc(this,bc))uc(this,_c)?(w.a.removeClassName(uc(this,mc),"pf-d-none"),w.a.clearNode(uc(this,fc)),Object(w.b)("span","",dlang("generator","See less")).append(uc(this,fc))):(w.a.addClassName(uc(this,mc),"pf-d-none"),w.a.clearNode(uc(this,fc)),Object(w.b)("span","",dlang("generator","See more")).append(uc(this,fc)));else if(w.a.clearNode(uc(this,mc)),uc(this,_c)&&!(uc(this,yc).items.length<=uc(this,vc))){for(var e=uc(this,yc).items.length,t=uc(this,vc);t<e;t++)cc(this,wc,kc).call(this,uc(this,yc).items[t],uc(this,mc));w.a.clearNode(uc(this,fc)),Object(w.b)("span","",dlang("generator","See less")).append(uc(this,fc)),dc(this,bc,!0)}}function kc(e,t){new ic({item:e,onClickCallback:uc(this,Pc).onClickCallback,showEmpty:!0,fileDropZone:uc(this,Pc).fileDropZone}).append(t)}function Lc(){dc(this,_c,!uc(this,_c)),cc(this,Tc,Oc).call(this)}var Ac=i("Svo9");function Rc(e){return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nc(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Dc(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Nc(a,n,r,o,s,"next",e)}function s(e){Nc(a,n,r,o,s,"throw",e)}o(void 0)}))}}function xc(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Fc(e,t){return(Fc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Mc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=jc(e);if(t){var r=jc(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Bc(this,i)}}function Bc(e,t){return!t||"object"!==Rc(t)&&"function"!=typeof t?Vc(e):t}function Vc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jc(e){return(jc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uc(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function zc(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Hc(e,t,"get"))}function Gc(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Hc(e,t,"set"),i),i}function Hc(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var qc=new WeakMap,Yc=new WeakMap,Wc=new WeakMap,Kc=new WeakMap,Zc=new WeakMap,Xc=new WeakMap,Qc=new WeakMap,$c=new WeakMap,Jc=new WeakMap,eu=new WeakMap,tu=new WeakMap,iu=new WeakMap,nu=new WeakSet,ru=new WeakSet,au=new WeakSet,ou=new WeakSet,su=new WeakSet,lu=new WeakSet,cu=new WeakSet,uu=new WeakSet,du=new WeakSet,hu=new WeakSet,pu=new WeakSet,fu=new WeakSet,gu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fc(e,t)}(o,e);var t,i,n,r,a=Mc(o);function o(e){var t,i,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),t=a.call(this),fu.add(Vc(t)),pu.add(Vc(t)),hu.add(Vc(t)),du.add(Vc(t)),uu.add(Vc(t)),cu.add(Vc(t)),lu.add(Vc(t)),su.add(Vc(t)),ou.add(Vc(t)),au.add(Vc(t)),ru.add(Vc(t)),nu.add(Vc(t)),qc.set(Vc(t),{writable:!0,value:[]}),i=Vc(t),r=null,(n="fileDropZone")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,Yc.set(Vc(t),{writable:!0,value:null}),Wc.set(Vc(t),{writable:!0,value:null}),Kc.set(Vc(t),{writable:!0,value:null}),Zc.set(Vc(t),{writable:!0,value:null}),Xc.set(Vc(t),{writable:!0,value:null}),Qc.set(Vc(t),{writable:!0,value:null}),$c.set(Vc(t),{writable:!0,value:null}),Jc.set(Vc(t),{writable:!0,value:null}),eu.set(Vc(t),{writable:!0,value:""}),tu.set(Vc(t),{writable:!0,value:0}),iu.set(Vc(t),{writable:!0,value:null}),Gc(Vc(t),$c,e),t.fileDropZone=zc(Vc(t),$c).fileDropZone,Gc(Vc(t),iu,new Oi([Gc(Vc(t),Kc,tag("h5","pf-h5 pf-mb-16 pf-d-none",dlang("generator","Recently used"))),Gc(Vc(t),Wc,tag("div","row-flex pf-mb-12 pf-d-none")),Gc(Vc(t),Yc,tag("div","pf-mt-24")),Gc(Vc(t),Xc,tag("div","row-flex pf-d-none"))]));var s=$(".modal-open").length?"pf-mb-16":"pf-my-16";return t.node=tag("div","quick-design-picker",[tag("a",{className:"pf-link-block "+s,onclick:zc(Vc(t),$c).onBackCallback},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("See all design layers"))]),Gc(Vc(t),Zc,tag("div","pf-mb-12")),zc(Vc(t),iu)]),Uc(Vc(t),lu,Cu).call(Vc(t)),t}return t=o,(i=[{key:"renderGroups",value:(r=Dc(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!zc(this,Jc)){e.next=3;break}return Uc(this,nu,mu).call(this),e.abrupt("return");case 3:return e.next=5,Uc(this,fu,ku).call(this);case 5:Uc(this,nu,mu).call(this);case 6:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"onItemClick",value:function(){var e=Dc(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.unavailableTechniques&&t.unavailableTechniques.indexOf(zc(this,$c).selectedPlacementTechnique)>-1)){e.next=2;break}return e.abrupt("return");case 2:return Object(Ac.a)(t.id,zc(this,$c).selectedPlacementTechnique),zc(this,$c).onAddFileCallback(t),e.next=6,Uc(this,pu,Eu).call(this);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}])&&xc(t.prototype,i),n&&xc(t,n),o}(ve.a);function mu(){return Uc(this,lu,Cu).call(this),Uc(this,su,bu).call(this),zc(this,iu).addScrollEventListener(),this}function _u(e){w.a.clearNode(zc(this,Yc)),Gc(this,qc,e);for(var t=0,i=zc(this,qc).length;t<i;t++)Uc(this,au,vu).call(this,zc(this,qc)[t]);Gc(this,Jc,!0),Uc(this,su,bu).call(this)}function vu(e){new Sc({group:e,fileDropZone:this.fileDropZone,onClickCallback:this.onItemClick.bind(this)}).append(zc(this,Yc))}function yu(){return zc(this,Jc)&&zc(this,tu)>0}function bu(){return Pu.apply(this,arguments)}function Pu(){return(Pu=Dc(regeneratorRuntime.mark((function e(){var t,i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ac.e)(zc(this,$c).selectedPlacementTechnique);case 2:for(t=e.sent,Gc(this,tu,t.length),w.a.clearNode(zc(this,Wc)),Uc(this,ou,yu).call(this)?(w.a.removeClassName(zc(this,Wc),"pf-d-none"),w.a.removeClassName(zc(this,Kc),"pf-d-none")):(w.a.addClassName(zc(this,Wc),"pf-d-none"),w.a.addClassName(zc(this,Kc),"pf-d-none")),i=0,n=t.length;i<n;i++)new ic({item:t[i],onClickCallback:this.onItemClick.bind(this),showEmpty:!0,fileDropZone:this.fileDropZone,isIndividual:!0}).append(zc(this,Wc));return e.abrupt("return",this);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function Cu(){"en"===be.a.language&&(Gc(this,eu,""),Uc(this,uu,wu).call(this),w.a.clearNode(zc(this,Zc)),new vi.a({onChange:Uc(this,cu,Tu).bind(this),onKeyUp:Uc(this,cu,Tu).bind(this),type:"text",showClearButton:!0,placeholder:dlang("generator","Search quick designs"),className:"tt-input",name:"SearchQuickDesigns",id:"search-quick-designs-"+Math.random().toString(36).substring(7)}).append(zc(this,Zc)))}function Tu(e){zc(this,eu)!==e&&(Gc(this,eu,e),Uc(this,uu,wu).call(this))}function wu(){if(w.a.addClassName(zc(this,Wc),"pf-d-none"),w.a.addClassName(zc(this,Kc),"pf-d-none"),w.a.addClassName(zc(this,Yc),"pf-d-none"),!zc(this,eu))return Uc(this,ou,yu).call(this)&&(w.a.removeClassName(zc(this,Wc),"pf-d-none"),w.a.removeClassName(zc(this,Kc),"pf-d-none")),w.a.removeClassName(zc(this,Yc),"pf-d-none"),w.a.addClassName(zc(this,Xc),"pf-d-none"),void zc(this,iu).updateScrollShadowing();Uc(this,du,Iu).call(this),w.a.removeClassName(zc(this,Xc),"pf-d-none"),zc(this,iu).updateScrollShadowing()}function Iu(){if(w.a.clearNode(zc(this,Xc)),zc(this,eu)){Gc(this,eu,zc(this,eu).toLowerCase());for(var e=!0,t=0;t<zc(this,qc).length;t++)for(var i=zc(this,qc)[t],n=0;n<i.items.length;n++){var r=i.items[n];if(r.name.toLowerCase().includes(zc(this,eu)))new ic({item:r,onClickCallback:this.onItemClick.bind(this),showEmpty:!1,isIndividual:!0,fileDropZone:zc(this,$c).fileDropZone}).append(zc(this,Xc)),e=!1}e&&Uc(this,hu,Su).call(this)}}function Su(){tag("div","pf-w-100",[tag("img",{className:"pf-w-100",src:bi.a}),tag("div","pf-ui-body pf-text-center",dlang("generator","No results found! Try another keyword or check out our quick design collections."))]).append(zc(this,Xc))}function Eu(){return Ou.apply(this,arguments)}function Ou(){return(Ou=Dc(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Uc(this,lu,Cu).call(this),e.next=3,this.renderGroups();case 3:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}function ku(){return Lu.apply(this,arguments)}function Lu(){return(Lu=Dc(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x.a.show(zc(this,iu).node),e.next=3,Object(Ac.c)(zc(this,$c).selectedPlacementTechnique);case 3:t=e.sent,Uc(this,ru,_u).call(this,t),x.a.hide(zc(this,iu).node);case 6:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Au=i("1yrs"),Ru=i("xyjD");var Nu=i("5OoY");function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xu(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function Fu(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){xu(a,n,r,o,s,"next",e)}function s(e){xu(a,n,r,o,s,"throw",e)}o(void 0)}))}}function Mu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Bu(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Vu(e,t){return(Vu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ju(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=Gu(e);if(t){var r=Gu(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return Uu(this,i)}}function Uu(e,t){return!t||"object"!==Du(t)&&"function"!=typeof t?zu(e):t}function zu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gu(e){return(Gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hu(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,Yu(e,t,"get"))}function qu(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,Yu(e,t,"set"),i),i}function Yu(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var Wu=new WeakMap,Ku=new WeakMap,Zu=new WeakSet,Xu=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vu(e,t)}(a,e);var t,i,n,r=ju(a);function a(e){var t;return Mu(this,a),t=r.call(this),Zu.add(zu(t)),Wu.set(zu(t),{writable:!0,value:void 0}),Ku.set(zu(t),{writable:!0,value:void 0}),qu(zu(t),Ku,e),t.node=tag("div","designer-layer-picker-chooser"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(zu(t),Zu,Qu).call(zu(t)),t}return t=a,(i=[{key:"callEvent",value:function(e,t){Hu(this,Ku)[e]&&Hu(this,Ku)[e](t)}},{key:"destroy",value:function(){var e;null===(e=Hu(this,Wu))||void 0===e||e.destroy(),qu(this,Wu,null)}}])&&Bu(t.prototype,i),n&&Bu(t,n),a}(ve.a);function Qu(){return $u.apply(this,arguments)}function $u(){return($u=Fu(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"layer-picker-chooser":function(){return Promise.all([i.e(1),i.e(235)]).then(i.bind(null,"PKXN"))}},t.template='<layer-picker-chooser\n            :scenePickerCallbacks="scenePickerCallbacks"\n            @on-file-picker-chosen="emitEvent(\'onFilePickerChosen\', $event)"\n            @on-text-picker-chosen="emitEvent(\'onTextPickerChosen\', $event)"\n            @on-clipart-picker-chosen="emitEvent(\'onClipartPickerChosen\', $event)"\n            @on-promo-mockup-picker-chosen="emitEvent(\'onPromoMockupPickerChosen\', $event)"\n            @on-quick-designs-picker-chosen="emitEvent(\'onQuickDesignsPickerChosen\', $event)"\n            @on-licensed-asset-picker-chosen="emitEvent(\'onLicensedAssetPickerChosen\', $event)"\n            @on-vue-picked="emitEvent(\'onVuePicked\', $event)"\n            @on-back-to-default-view="emitEvent(\'onBackToDefaultView\', $event)"\n            @on-picked-layer="emitEvent(\'onPickedLayer\', $event)"\n            @on-update-custom-mockup-layer="emitEvent(\'onUpdateCustomMockupLayer\', $event)"\n        />',t.initialData={scenePickerCallbacks:{getTemplates:Hu(this,Ku).designer.getTemplates.bind(this),addGroupTemplateLayers:Hu(this,Ku).designer.addGroupTemplateLayers.bind(this),setPlacementOptionsRawStorage:Hu(this,Ku).designer.setPlacementOptionsRawStorage.bind(this),getNodeMainMockupAreaNode:Hu(this,Ku).designer.getNodeMainMockupAreaNode.bind(this),getRawPlacementOptions:Hu(this,Ku).designer.getRawPlacementOptions.bind(this),calculateMockupMainAreaSize:Hu(this,Ku).designer.calculateMockupMainAreaSize.bind(this),preloadFontsUsedInGroupDesign:Hu(this,Ku).designer.preloadFontsUsedInGroupDesign.bind(this)}},t.emitEvent=this.callEvent.bind(this),t.plugins={store:Object(jr.a)()},qu(this,Wu,new ye.a(t)),Hu(this,Wu).append(this.node);case 8:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var Ju=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Mu(this,e),this.onFilePickerChosen=t.onFilePickerChosen,this.onTextPickerChosen=t.onTextPickerChosen,this.onClipartPickerChosen=t.onClipartPickerChosen,this.onPromoMockupPickerChosen=t.onPromoMockupPickerChosen,this.onQuickDesignsPickerChosen=t.onQuickDesignsPickerChosen,this.onLicensedAssetPickerChosen=t.onLicensedAssetPickerChosen,this.onBackToDefaultView=t.onBackToDefaultView,this.onVuePicked=t.onVuePicked,this.onPickedLayer=t.onPickedLayer,this.onUpdateCustomMockupLayer=t.onUpdateCustomMockupLayer,this.designer=t.designer},ed=i("fhxg");function td(e){return(td="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function id(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function nd(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){id(a,n,r,o,s,"next",e)}function s(e){id(a,n,r,o,s,"throw",e)}o(void 0)}))}}function rd(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function ad(e,t){return(ad=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function od(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=cd(e);if(t){var r=cd(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return sd(this,i)}}function sd(e,t){return!t||"object"!==td(t)&&"function"!=typeof t?ld(e):t}function ld(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cd(e){return(cd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ud(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,hd(e,t,"get"))}function dd(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,hd(e,t,"set"),i),i}function hd(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}var pd=new WeakMap,fd=new WeakMap,gd=new WeakSet,md=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ad(e,t)}(a,e);var t,i,n,r=od(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=r.call(this),gd.add(ld(t)),pd.set(ld(t),{writable:!0,value:void 0}),fd.set(ld(t),{writable:!0,value:void 0}),dd(ld(t),fd,e),t.node=tag("div","designer-mockup-variant"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(ld(t),gd,_d).call(ld(t)),t}return t=a,(i=[{key:"destroy",value:function(){ud(this,pd).destroy(),dd(this,pd,null)}}])&&rd(t.prototype,i),n&&rd(t,n),a}(ve.a);function _d(){return vd.apply(this,arguments)}function vd(){return(vd=nd(regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new ye.b).components={"mockup-variant":function(){return i.e(247).then(i.bind(null,"LFhE"))}},t.template="<mockup-variant \n            @on-update-custom-mockup-layer=\"emitEvent('onUpdateCustomMockupLayer', $event)\"\n        />",t.emitEvent=function(e,t){ud(n,fd)[e]&&ud(n,fd)[e](t)},t.plugins={store:Object(jr.a)()},dd(this,pd,new ye.a(t)),ud(this,pd).append(this.node);case 7:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}var yd=i("NCUI"),bd=i("stj/"),Pd=i("nrfP"),Cd=i("ruUh"),Td=i("x722");function wd(e){return function(e){if(Array.isArray(e))return Ed(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Id(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=Sd(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}function Sd(e,t){if(e){if("string"==typeof e)return Ed(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Ed(e,t):void 0}}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function Od(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function kd(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){Od(a,n,r,o,s,"next",e)}function s(e){Od(a,n,r,o,s,"throw",e)}o(void 0)}))}}var Ld,Ad=Class({_KEY_SELECTED_COLORS:"productPushSelectedColors",_KEY_SELECTED_SIZES:"productPushSelectedSizes",_generatorParams:null,_templates:null,generatorVariants:null,_selectedColors:[],_selectedRegionAttributes:{},_selectedSizes:[],_initialSizes:[],allColors:null,discontinuedColors:{},allSizes:null,translatedSizes:null,allAvailableSizes:null,_disabledSizes:[],previewMockupVariant:null,_variantArea:null,designData:null,_par:null,_layerPicker:null,_textPicker:null,_nodeTextPicker:null,_layerPickerChooser:null,_clipartPicker:null,_mockupPicker:null,_quickDesignPicker:null,_licensedAssetPicker:null,_regionPicker:null,_colorPicker:null,_designFillPicker:null,_designFillApplyCheckbox:null,_sizePicker:null,_techniquePicker:null,_productOptionsPicker:null,_renderTimeouts:{},_placementSelector:null,storeId:null,_zoomInLoading:!1,_mockup:null,_mockupMainMaxWidth:0,_mockupMainMaxHeight:0,allVariants:{},_pickerTabContents:{},_designerTabContents:{},_shouldRegeneratePreview:!0,_3dObjUniqueId:0,_3dStatus:0,_orientation:"",_lifelikeVariants:{},_templateType:null,observer:null,excludedPlacements:{},_technique:"",allLabelTypesAvailable:!1,_dynamicStickyFooter:null,_nodeFooter:tag("div"),_nodeTextDigitizationPriceDecrease:null,_nodeHatSideBackDigitizationPriceDecrease:null,_nodeMainMockupArea:null,_nodeMainMockupAreaImage:null,_placementOptions:null,_placementOptionsRawStorage:null,_embroideryHelper:null,_videoTutorialsModal:null,_templateEditorPositionsCalculated:!1,_shownBackgroundRemovalModal:!1,_shouldShowUnrelatedTemplatesPopover:!1,_isInitialised:!1,_isLoadingProduct:!1,_canLargeEmbroideryAccessFiles:!1,_canAccessNewToolbar:!1,_canAccessTools:!1,__construct:function(e){this._par=e,Object(je.k)(),Object(je.n)(e.designerType),Object(Q.e)(e.product),this._technique=e.initDesignerTechnique||this._getInitTechnique(),Object(Q.g)(this._technique),this._par.observer?this.observer=this._par.observer:this.observer=new xa,this.node=tag("div",{className:"product-push "+(this._par.shouldShowPrice&&!this._par.isModalDesigner?"pf-mb-48":"")+" "+(Object(A.b)()?" is-touch":""),id:"js--product-push-designer"},[this.bannerNode=tag("div")]),this._showLoader(this.node),this._initialize(),pe.a.setFontDependencies(Object(Pe.getPFCanvasFonts)()),window.dump=this._dump},_initialize:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return Object(je.l)(),t.next=3,Promise.all([Object(Pe.setPFCanvasFonts)(),Object(Ru.c)(),e._readFeatureFlagsForDesigner()]);case 3:if(e._par.store&&e._par.store.storeId&&(e.storeId=e._par.store.storeId),e._par.isProductPushMode?(e._mockupMainMaxWidth=e._par.pushMockupMainMaxWidth,e._mockupMainMaxHeight=e._par.pushMockupMainMaxHeight):(e._mockupMainMaxWidth=e._par.mockupMainMaxWidth,e._mockupMainMaxHeight=e._par.mockupMainMaxHeight),e.designData=new ma.a,(i=new ha).validateAddingLayer=e.validateAddingLayer.bind(e),i.getSelectedMockupVariant=e._getSelectedVariant.bind(e),i.getOrientation=e.getOrientation.bind(e),i.getDesignMeta=e._getDesignMeta.bind(e),i.getTechnique=e.getTechnique.bind(e),e._templates=new Ia(i),e.allVariants=e._getAllVariants(),e._orientation=e._par.forceOrientation,e.previewMockupVariant=e._par.previewMockupVariant,e._subscribeTemplateEvents(),e._initTabContents(),e._updateExcludedPlacements(),e.generatorRepository=new p.a,(n=new Nr).shouldAllowFileColorChanger=e.shouldAllowFileColorChanger.bind(e),n.getSelectedPlacementId=e.getSelectedPlacementId.bind(e),n.getSelectedPlacementTechnique=e.getSelectedPlacementTechnique.bind(e),n.designerNode=e.node,n.getNodeMainMockupArea=e.getNodeMainMockupAreaNode.bind(e),n.scheduleEmbroideryPreviewUpdate=e._scheduleEmbroideryPreviewUpdate.bind(e),n.templates=e._templates,n.editImageLayer=e._editImageLayer.bind(e),n.onLayerColorsChanged=e._onLayerColorsChanged.bind(e),n.getAvailablePlacements=e.getAvailablePlacements.bind(e),n.pickerConfig=e._par.pickerConfig,n.isAllOverProduct=e.isAllOverProduct.bind(e),n.onAllImagesProcessed=e.onAllImagesProcessed.bind(e),n.getProductOptionsPicker=e.getProductOptionsPicker.bind(e),n.isCustomizingMode=e._par.isCustomizingMode,e._embroideryHelper=new xr(n),e._designerToolbarService=new yd.a((function(){return e})),e.render(),e._par.autoLoad&&e._loadProduct(e._par.designerState,!0,!1,e._par.productChanged),!Object(je.g)()){t.next=46;break}return e._dynamicStickyFooter=new E({tabs:e._pickerTabs,content:e._pickerTabContents,ctaContent:e._getCtaFooterContent,designerPar:e._par,secondFooter:e._nodeFooter}),e._dynamicStickyFooter.append(e.node),t.next=45,Object(Pi.x)(Pi.l);case 45:e._canLargeEmbroideryAccessFiles=t.sent;case 46:e._isInitialised=!0;case 47:case"end":return t.stop()}}),t)})))()},getDesignerToolbarService:function(){return this._designerToolbarService},arePickersVisible:function(){return this._par.arePickersVisible},_getCtaFooterContent:function(){var e;return this._par.isMockupGeneratorMode?tag("span","",[tag("div","",[tag("i","pf-i pf-i-arrow-right pf-i-24")]),tag("div","pf-ui-caption pf-bold",this._par.ctaText)]):tag("span","",[tag("div","",[tag("i","pf-i pf-i-cart pf-i-24")]),tag("div","pf-ui-caption pf-bold",null===(e=Object(Q.a)())||void 0===e?void 0:e.getPriceReadable())])},_getInitTechnique:function(e){var t=Object(Q.a)(),i=this._getTechniqueFromStorage()||(null==t?void 0:t.availableTechniques.slice().shift())||(null==t?void 0:t.type);if(null!=t&&t.isJewelry()&&i!==J.a.TECHNIQUE_ENGRAVING&&(i=J.a.TECHNIQUE_ENGRAVING),e)return i;var n=this._par.productTemplateEditorState;return n&&(this._isProductTemplateEditor()&&n.isNewTemplateEditor()||(i=null)),i},_dump:function(){var e=function(e){if(!e)return{};var t=e.position,i={id:e.uniqueId,parent:e.parentLayerUniqueId,qd:e.quickDesignId,g:e.groupId,type:"",data:"",position:Number(t.width).toFixed(4)+"x"+Number(t.height).toFixed(4)+", x"+Number(t.left).toFixed(4)+"y"+Number(t.top).toFixed(4)+", r"+Number(t.rotation).toFixed(2),flipX:e.flipX,flipY:e.flipY,pattern:e.patternType};if(e.isTextLayer())i.type=e instanceof V.a?"textbox":"text",i.data='"'+e.text.replace(/\n/," ")+'", '+Number(e.size).toFixed(1)+", "+e.color+", "+e.alignment+", "+e.getFontName();else if(e.isClipartLayer())i.type="clipart",i.data=e.clipartItem.id+", "+e.clipartItem.name+", "+e.fillColor;else if(e.isLicensedAssetLayer()){var n,r,a,o;i.type="licensed",i.data=(null===(n=e.licensedAssetItem)||void 0===n?void 0:n.type)+", "+(null===(r=e.licensedAssetItem)||void 0===r?void 0:r.status)+", "+(null===(a=e.licensedAssetItem)||void 0===a?void 0:a.id)+", "+(null===(o=e.licensedAssetItem)||void 0===o?void 0:o.externalId)}else e.temporaryFileItem?(i.type="temporaryFileItem",i.data=e.temporaryFileItem.fileId+", "+e.temporaryFileItem.filename+", "+e.temporaryFileItem.filesize+", "+e.temporaryFileItem.urlLarge):e.fileItem&&(i.type="fileItem",i.data=e.fileItem.fileId+", "+e.fileItem.filename+", "+e.fileItem.filesize+", "+e.fileItem.urlLarge);return i},t=this._templates.getActiveLayer();for(var i in this._templates._userTemplates){var n=Object.keys(this._templates._userTemplates[i]).length;if(n>0)for(var r in console.log("âââ¬"+i,n),this._templates._userTemplates[i]){if(Object.keys(this._templates._userTemplates[i][r]).length>0){var a=this._templates._userTemplates[i][r],o=a.layers.length;if(console.log("â âââ¬"+a.getKey(),"("+a.width+"x"+a.height+")",o),o>0)for(var s=0;s<o;s++){var l=e(a.layers[s]),c=t&&t.uniqueId===a.layers[s].uniqueId?"font-weight:bold;":"";console.log("â â âââ¬%c"+l.id+" "+l.type+(l.parent?" p:"+l.parent:"")+(l.g?" g:"+l.g:"")+(l.qd?" qd:"+l.qd:"")+" "+l.position+" flipX:"+l.flipX+" flipY:"+l.flipY+(l.pattern?" pattern:"+l.pattern:""),c),console.log("â â â â%c "+l.data,"color:dimgray;"+c)}else console.log("â â âââ%c(empty)","color:dimgray")}else console.log("â âââ%c(empty)","color:dimgray")}else console.log("âââ%c(empty)","color:dimgray")}console.log("Active Layer:",t),console.log("lastSelectedColor:",this.lastSelectedColor,"lastSelectedSize:",this.lastSelectedSize,"_shouldAllowCustomizablePush:",this._shouldAllowCustomizablePush())},_unsubscribeTemplateEvents:function(){this._templates&&this._templates.getChangeListener().unsubscribe(this._onLayerAdded).unsubscribe(this._onLayerAddedOrRemoved).unsubscribe(this._onLayerRemoved).unsubscribe(this._onLayerOrderChanged).unsubscribe(this._onTemplatePositionsChanged).unsubscribe(this._onCropStateChanged).unsubscribe(this._onActiveLayerChanged).unsubscribe(this._onTemplateResized).unsubscribe(this._checkOutOfBoundsLayers).unsubscribe(this._onPreviewChanged).unsubscribe(this._onLifelikeChanged).unsubscribe(this.requireMockupRegenerationAndShowDesigner).unsubscribe(this.requireMockupRegeneration)},_subscribeTemplateEvents:function(){this._templates&&(this._templates.getChangeListener().addOnLayerAddedListener(this._onLayerAdded).addOnLayerAddedOrRemovedListener(this._onLayerAddedOrRemoved).addOnLayerRemovedListener(this._onLayerRemoved).addOnLayerOrderChangedListener(this._onLayerOrderChanged).addOnTemplatePositionsChangedListener(this._onTemplatePositionsChanged).addOnCropStateChanged(this._onCropStateChanged).addOnActiveLayerChanged(this._onActiveLayerChanged).addOnTemplateResizedListener(this._onTemplateResized).addOnLayerColorsChanged(this._onLayerColorsChanged).addOnZoomChanged(this._onZoomChanged).addOnLayerCustomizableStateChanged(this._checkOutOfBoundsLayers).addonPreviewChanged(this._onPreviewChanged).addOnLifelikeChanged(this._onLifelikeChanged),this._isDesignerTabsVisible()&&this._templates.getChangeListener().addOnLayerAddedOrRemovedListener(this.requireMockupRegenerationAndShowDesigner).addOnTemplatePositionsChangedListener(this.requireMockupRegenerationAndShowDesigner).addOnLayerOrderChangedListener(this.requireMockupRegeneration).addOnLayerConfigurationChanged(this.requireMockupRegenerationAndShowDesigner).addOnLayerColorsChanged(this.requireMockupRegenerationAndShowDesigner).addOnDesignFillChanged(this.requireMockupRegenerationAndShowDesigner))},_unsubscribeTemplateEventsIfNeeded:function(){return!Object(A.a)(this.node)&&(this._unsubscribeTemplateEvents(),!0)},_showLoader:function(e,t){this._par.onLoaderToggle?this._par.onLoaderToggle(e,t,!0):x.a.show(e,t)},_hideLoader:function(e){w.a.removeClassName(e,"loading"),this._par.onLoaderToggle?this._par.onLoaderToggle(e,null,!1):x.a.hide(e)},_getTechniqueFromStorage:function(){var e;return Object(O.a)(null===(e=Object(Q.a)())||void 0===e?void 0:e.productId).getTechniqueFromMemory()},_getSelectedVariant:function(){return this.previewMockupVariant},_loadProduct:function(e,t,i,n){var r,a=this;this._showLoader(this.node);var o=this._par.generatorParameters;if(this._par.productTemplateEditorState&&(i?o=null:this._par.generatorParameters=null),o&&!n)return this._productLoaded(t,i,o).then((function(){return a._hideLoader(a.node)})),!1;this.observer.emitDesignerDisabled();var s,l=Object(Q.a)(),c={productChanged:n,storeId:this._par.store.storeId,isMockupGeneratorMode:this._par.isMockupGeneratorMode,isProductPushMode:this._par.isProductPushMode,isOrderFlowMode:this._par.isOrderFlowMode,productId:(null==l?void 0:l.productId)||this._par.productId,designerState:e,excludedPlacements:this.excludedPlacements,callback:(s=kd(regeneratorRuntime.mark((function e(n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a._par.onProductLoaded&&a._par.onProductLoaded(n),e.next=3,a.waitInitialRender();case 3:return e.next=5,a._productLoaded(t,i,n);case 5:a._regionPicker&&a._updatePickersByRegion(a._regionPicker.getSelectedRegions(),[]),a._par.isProductPushMode&&null!==(r=a._par)&&void 0!==r&&null!==(o=r.product)&&void 0!==o&&o.isPhoneCase()&&!a._par.isChangePrintfileMode&&(a.allVariants=a._getAllVariants(),a._renderSizePicker()),a._isTechniquePickerAvailable()&&!a._par.isTechniquePickerEnabled&&a.updateView(),a._isLoadingProduct=!1,a._hideLoader(a.node);case 10:case"end":return e.stop()}}),e)}))),function(e){return s.apply(this,arguments)}),technique:this._technique,forceTechnique:i,forceRequest:i,forceOrientation:this._orientation,generatorDesignKey:this._par.generatorDesignKey,useGeneratedDesignRpcUrl:this._par.useGeneratedDesignRpcUrl,generatorVariant:this.previewMockupVariant,forceTemplateType:this._getForcedTemplateType(l),productOptions:this._par.pickerConfig.productOptionsValues,similarProductPushState:this._par.similarProductPushState,productTemplateEditorState:this._par.productTemplateEditorState,currency:(null==l||null===(r=l.priceRange)||void 0===r?void 0:r.currency)||null};this._isLoadingProduct=!0,this._par.useGeneratedDesignRpcUrl?this.generatorRepository.loadProduct(c):this.generatorRepository.loadGeneratorProduct(c)},_getAllVariants:function(){var e=new d.a;return e.variantItemCache?Object.values(e.variantItemCache):{}},_reloadEverything:function(){var e=new Fr.a;this._par.designerState&&(e.generatorDesignId=this._par.designerState.generatorDesignId),this._par.designerState=e,e.addFromTemplates(this._templates),this._savePlacementOptionsLocaly(),this._templates.setActiveLayer(null),this._onDesignerTabPicked(Ad.TAB_DESIGNER,!0),this._loadProduct(e,!0,!1,!0)},_productLoaded:function(e,t,i){var r=this;return kd(regeneratorRuntime.mark((function a(){var o,s,c,u,d,h,p,f,g,m,_,v,y,b,P,C,T;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,r.waitInitialRender();case 2:if(kr.a.resetGrid(),r._generatorParams=i,s=null!==(o=null==i?void 0:i.placementsWithOnlyBackgroundColor)&&void 0!==o?o:[],Object(Q.f)(s),r._par.isCustomizerEnabled=r._generatorParams.isCustomizerEnabled,r._conflictCalculator&&r._conflictCalculator.setConflictingTypes(r._generatorParams.conflictingTypes),r._placementOptions=r._generatorParams.placementOptions,r._productOptionsPicker&&r._productOptionsPicker.setPickerGeneratorPlacements(i.availablePlacements),r._templates.setRequiredDpi(i.requiredDPI),r.variantLimit=i.variantLimit&&parseInt(i.variantLimit,10)||null,r.allColors=i.colors,r.allSizes=i.sizes,r.translatedSizes=i.translatedSizes,r.regionData=i.regions,r._selectedRegionAttributes={},r._orientation||(r._orientation=i.orientation),(r._par.isProductPushMode||r._par.isMockupGeneratorMode&&r._canRenderColorPicker()&&r._canRenderSizePicker(!0))&&(r.discontinuedColors=r._getDiscontinuedColorsPerSize(i.variantMapping),r.allColors=r._getAvailableColors(i.variantMapping)),r._selectedColors.length||(i.preselectedData&&i.preselectedData.colors?(c=i.preselectedData.colors.slice(),(r._par.isOrderFlowMode||r._par.isChangePrintfileMode)&&(c=c.slice(0,1)),r._selectedColors=c):r._selectedColors=r._getDefaultSelectedColors()),(u=Object(Q.a)())&&(u.sizes=i.sizes,u.colors=i.colors,Object(Q.e)(u)),d=!(null!=u&&u.canHaveSizePickerForProductTemplates()),r._isProductTemplateEditor()&&!r._selectedSizes.length&&(r._selectedSizes=d?r.allSizes.slice():i.preselectedData&&i.preselectedData.templateSelectedSizes?i.preselectedData.templateSelectedSizes.slice():[]),!r._selectedSizes.length&&r._par.isProductPushMode&&(r._selectedSizes=r._getDefaultPickerValue(n.a.TYPE_SIZE)),(!r._par.isOrderFlowMode&&!r._par.isChangePrintfileMode||r._isCreatingProductFromTemplate())&&(r._selectedSizes.length||(i.preselectedData&&i.preselectedData.sizes?(h=i.preselectedData.sizes.slice(),(r._par.isOrderFlowMode||r._par.isChangePrintfileMode)&&(h=h.slice(0,1)),r._selectedSizes=h):r._isCreatingProductFromTemplate()?r._isProductTemplateDetailsEditor()&&r._canRenderSizePicker()?r._selectedSizes=[]:r._selectedSizes=r._getDefaultSelectedSizes().slice(0,1):r._selectedSizes=r._getDefaultSelectedSizes())),r._initialSizes=r._selectedSizes,i.preselectedData&&(p=r._technique,i.preselectedData.technique?r._technique=i.preselectedData.technique:r._technique||(r._technique=r._getInitTechnique(!0)),Object(Q.g)(r._technique),r._isProductTemplateDetailsEditor()||p===r._technique||(Object(O.a)(null==u?void 0:u.productId).rememberLastUsedTechnique(r._technique),r._renderTextboxPicker()),r._par.pickerConfig&&i.preselectedData.optionData&&(r._par.pickerConfig.setOptionsValues(i.preselectedData.optionData),r._productOptionsPicker&&(f=new Ba.a(r._createProductOptionsPickerPar()),r._productOptionsPicker.setProductOptions(f),r._productOptionsPicker.render()))),r.designData=i.designData,r.designData.store=r._par.store,r.designData.product=u,r._isProductTemplateEditor()&&(g=r._par.productTemplateEditorState.sourceProductTemplate,i.preselectedData.templateSelectedSizes?r.designData.templateSelectedSizes=i.preselectedData.templateSelectedSizes.slice():r.designData.templateSelectedSizes=g?(g.sizes||[]).slice():d?[]:r._selectedSizes.slice()),r._placementOptions&&(r.designData.rawPlacementOptions=r._placementOptions.getData()),r._templates.silentlyRemoveAllTemplates(),r._templates.silentlyCopyLayers(i.calculatedPositions),t&&(r._templates.silentlyRemoveAllLayers(),r._productOptionsPicker=null,r._renderProductOptions()),e&&r._par.designerState&&r._templates.silentlySetDesignerState(r._par.designerState),r._selectedVariantCount=0,r._allSelectedVariantCount=0,kr.a.isZoomedIn=!1,r._setHideEmptyPlacements(i.calculatedPositions),!r._placementSelector){a.next=50;break}if(r._priceCalculator=new l.b(u,i.pricesCollection),r._priceCalculator.setAvailablePlacements(i.availablePlacements),m=r._getLicensedAssetIdsByPlacement(),!Object.keys(m).length){a.next=49;break}return a.next=49,Object(Vs.d)(m).then((function(e){r._priceCalculator.setLicensedAssetsPrice(e)}));case 49:r._placementSelector.setPlacements(r._generatorParams.availablePlacements);case 50:if(r._isProductTemplateDetailsEditor()?r._shouldUseFullTemplateEditor()&&(_=i.preselectedData.sizes||[],r._disabledSizes=r.allSizes.filter((function(e){return!_.includes(e)}))):(r._renderLayerPickerChooser(),r._renderLayerPicker(),r._renderOrientationPicker(),r._renderClipartPicker(),r._renderQuickDesignPicker(),r._renderLicensedAssetPicker(),r._renderEmbroideryImagePicker(),r._renderPatternPicker(),r._designerToolbarService.renderSidebar()),r._renderPickerTabs(),r._onProductLoadedShowDesignTab&&(r.showDesignTab(),r._onProductLoadedShowDesignTab=!1),r._par.isChangePrintfileMode||(!r._regionPicker&&r._isProductTemplateDetailsEditor()&&r._renderRegionPicker(),!r._isProductTemplateDetailsEditor()&&Object(je.g)()&&r._renderTechniquePicker(),r._renderColorPicker(),r._renderSizePicker(),r._renderAvailabilityWarning()),!r._isProductTemplateDetailsEditor()&&Object(je.g)()&&r._renderInlineProductPicker(),v=r._templates.getUsedFonts(),e&&r._shouldPreloadFonts()||Fs.a.isDesignCachedInSession()?r._preloadFontsAndSetActiveLayer(v,r.onFontsPreloaded.bind(r,v)):r._onFontsPreloadedFinal(),r._get3dViewConfigObject()&&e&&(r._show3dViewWarningAlert=!0),0===v.length&&r._removeCustomizerDataFromAllLayers(),y=!!document.documentMode,!e||!r._par.isMockupGeneratorMode||y){a.next=76;break}if(b=window.location.search,P=new URLSearchParams(b),C=null==P?void 0:P.get("quick-design"),T=null==P?void 0:P.get("licensed-asset"),!C){a.next=69;break}r._addQuickDesignById(parseInt(C)),a.next=76;break;case 69:if(!T){a.next=76;break}if(isNaN(T)||r._isLicensedAssetPickerDisabled()){a.next=75;break}return a.next=73,r._licensedAssetPicker.getLicensedAssetById(parseInt(T));case 73:a.next=76;break;case 75:isNaN(T)&&!r._isLicensedAssetPickerDisabled()&&(setTimeout(r.showPickerTab.bind(r,Ad.TAB_LICENSEDASSET,T),10),r._licensedAssetPicker.getLicensedAssetsByKeyword(T));case 76:Fs.a.isDesignCachedInSession()&&r.showDesignTab();case 77:case"end":return a.stop()}}),a)})))()},displayTemplateSizeChangeWarningIfNeeded:function(){var e,t=this;if(this._par.designerState&&(this._par.existingVariants||this._par.orderLineItem)&&(!this._par.existingVariants||this._par.designerState.generatorDesignId)){var i=this._templates.getUserTemplate(this.getSelectedPlacementId(),this._getSelectedVariant().templateId);if(i){var n,r,a,o=[];if(this._par.existingVariants)o=null===(n=this._par.existingVariants.filter((function(e){return e.designId===t._par.designerState.generatorDesignId}))[0])||void 0===n||null===(r=n.orderLineItem)||void 0===r||null===(a=r.getDesign())||void 0===a?void 0:a.templates;else if(this._par.orderLineItem){var s;o=null===(s=this._par.orderLineItem.getDesign())||void 0===s?void 0:s.templates}if(null!==(e=o)&&void 0!==e&&e.length){var l=o.find((function(e){return e.placementId===t.getSelectedPlacementId()&&(e.width===i.width&&e.height===i.height||e.height===i.width&&e.width===i.height)}));if((l||(l=o.find((function(e){return e.placementId===t.getSelectedPlacementId()}))))&&(l.width!==i.width&&l.width!==i.height||l.height!==i.height&&l.height!==i.width)){var c=Math.round(100*i.width)/100,u=Math.round(100*i.height)/100,d=[tag("div","pf-h4",dlang("generator",'We changed our recommended print file size to {width}"x{height}"').replace("{width}",c).replace("{height}",u)),tag("div","",dlang("generator",'You can adjust your design to the new size and save the changes. If you donât want to make any changes, close the editor and weâll scale your current print file to {width}"x{height}"âthe placement only appears misaligned in the editor; your product will be printed as normal.').replace("{width}",c).replace("{height}",u))];new ce.a(d,"warning",!1,!0,!0,null).prepend(this._nodeMainMockupArea)}}}}},onFontsPreloaded:function(e,t){var i=this;return kd(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t||(t=i._onFontsPreloadedFinal),n.next=3,i.waitInitialRender();case 3:i.shouldAllowTextboxLayer()||t&&t(),r=e.filter((function(e){return!Object(Pe.getPFCanvasFonts)().LOADED_TTF_FONTS.hasOwnProperty(e.fontKey)})),a=0,r.length>0?r.forEach((function(e){pe.a.loadTTFFont(e.fontKey,e["path-ttf"],"",(function(){++a===r.length&&t&&t()}))}),i):t&&t();case 7:case"end":return n.stop()}}),n)})))()},_onFontsPreloadedFinal:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitInitialRender();case 2:e._par.isChangePrintfileMode?e._processVariantData():!e._regionPicker&&Object(je.g)()&&(e._renderRegionPicker(),e._regionPicker&&e._updatePickersByRegion(e._regionPicker.getSelectedRegions(),[])),(i=e._templates.hasLayers())&&e._setDefaultActiveLayer(!0),e._processEmbroideryDesign(e.updateView.bind(e)),i&&(e._colorizeClipartLayers(),e._removeCustomizerDataFromAllLayers()),e._par.onReady&&e._par.onReady(),setTimeout(function(){this.observer.emitDesignerReady(),this._disableAddDesignTabIfNeeded(),this._par.disableDesignerLeaveWarning||this._isProductTemplateEditor()||new r.a(this._templates,this._par.isModalDesigner,this._placementOptions)}.bind(e),1);case 9:case"end":return t.stop()}}),t)})))()},_processEmbroideryDesign:function(e){var t=this;return kd(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.waitInitialRender();case 2:t.shouldAllowFileColorChanger()||t._embroideryHelper.customizingDesignWithNewEmbroideryColorPicker()?t._templates.hasLayers()?t._embroideryHelper.canSwitchToNewEmbrColorPicker()?t._embroideryHelper.switchToNewEmbrColorPicker():t._embroideryHelper.colorizeEmbroideryLayers():e&&e():(e&&e(),t._generatorParams.availablePlacements.filter((function(e){return e.technique===J.a.TECHNIQUE_EMBROIDERY})).forEach((function(e){t._updateEmbroideryColorsForPlacement(e.id)})),t._tryApplyingEmbroideryColorization());case 3:case"end":return i.stop()}}),i)})))()},_processVariantData:function(){var e,t=this,i=new d.a,n=null===(e=Object(Q.a)())||void 0===e?void 0:e.productId,r=i.getCachedVariantsByProductId(n);r.length?setTimeout(function(){this._setChangePrintFileAttributes(r)}.bind(this),1):i.getVariants(n,(function(e,i){t._setChangePrintFileAttributes(i)}))},_shouldPreloadFonts:function(){return!(!this._par.designerState&&!this._par.productTemplateEditorState)&&(this._par.isOrderFlowMode||this._par.isChangePrintfileMode||!!this._par.similarProductPushState||!!this._par.productTemplateEditorState||this._par.isCustomizingMode||this._par.isProductPushMode)},_preloadFontsAndSetActiveLayer:function(e,t){var i=e.filter((function(e){return!qe.hasFontLoaded(e.fontKey)})),n=0;i.length>0?i.forEach((function(e){Object(Pe.loadJSFontFrontend)(e.fontKey,(function(){++n===i.length&&t&&t()}))})):t&&t()},_setDefaultActiveLayer:function(e){var t=this._getSelectedVariant(),i=t?t.templateId:null,n=this._templates.getActiveLayer()||this._templates.getFirstLayer(this.getSelectedPlacementId(),i);if(n){var r=this._templates.getTemplateByLayer(n);e?this._templates.silentlySetActiveLayer(n):this._templates.setActiveLayer(n,null),r&&r.placementId&&this._placementSelector.setSelectedPlacementById(r.placementId),n instanceof j.a&&this._onClipartColorChanged(n)}},_setChangePrintFileAttributes:function(e){var t,i,n=[];for(t in this._selectedColors=[],this._selectedSizes=[],e)for(i in this._par.existingVariants)e[t].variantId===this._par.existingVariants[i].variantId&&(-1===this._selectedSizes.indexOf(e[t].size)&&this._selectedSizes.push(e[t].size),-1===n.indexOf(e[t].color)&&n.push(e[t].color));for(t in this.allColors)for(i in n)this.allColors[t].color===n[i]&&this._selectedColors.push(this.allColors[t]);var r=this.getSelectedGeneratorVariants();this.generatorVariants=r.generatorVariants,this._selectedVariantCount=r.variantCount;var a=this._par.defaultPlacementId?this.getGeneratorVariantByPlacementId(this._par.defaultPlacementId,!0):this.generatorVariants[0];this.setPreviewMockupVariant(a),this._templates.setActiveLayerFromTemplate(a.placementId,a.templateId),this.setActivePlacement(a.placementId),this._renderMockupMainArea()},_getAvailableColors:function(e){var t,i=[],n=Id(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;!r.discontinued&&i.indexOf(r.color)&&i.push(r.color)}}catch(e){n.e(e)}finally{n.f()}var a=this.allColors;for(var o in a){var s=a[o];i.includes(s.color)||delete a[o]}return a},_getDefaultPickerValue:function(e,t){var i="",r=this._par.pickerConfig;switch(e){case n.a.TYPE_COLOR:var a=r.colorConfig.defaultValue||"";for(var o in this.allColors){var s=this.allColors[o];if(a===s.color){i=s;break}}break;case n.a.TYPE_SIZE:i=r.sizeConfig.defaultValue||"",this.allSizes.indexOf(i)<0&&(i="");break;case n.a.TYPE_PRODUCT_OPTIONS:var l=r.productOptionsValues?r.productOptionsValues:this._productOptionsPicker?this._productOptionsPicker.getValues():{};return t?l[t]:l}return i?[i]:[]},_initTabContents:function(){this._pickerTabContents[Ad.TAB_PRODUCT]=tag("div"),this._pickerTabContents[Ad.TAB_DESIGN]=tag("div"),this.shouldAllowTextboxLayer()?this._pickerTabContents[Ad.TAB_TEXTBOX]=tag("div"):this._pickerTabContents[Ad.TAB_TEXT]=tag("div"),this._pickerTabContents[Ad.TAB_IMAGE]=tag("div"),this._pickerTabContents[Ad.TAB_CLIPART]=tag("div"),this._pickerTabContents[Ad.TAB_MOCKUPS]=tag("div"),this._pickerTabContents[Ad.TAB_QUICKDESIGN]=tag("div"),this._pickerTabContents[Ad.TAB_LICENSEDASSET]=tag("div"),this._pickerTabContents[Ad.TAB_TOOLBAR]=tag("div"),this._designerTabContents[Ad.TAB_DESIGNER]=tag("div"),this._designerTabContents[Ad.TAB_PREVIEW]=tag("div"),this._designerTabContents[Ad.TAB_3D]=tag("div")},getPickerTabContents:function(){return this._pickerTabContents},_isProductTemplateEditor:function(){var e=this._par.productTemplateEditorState;return e&&(e.isTemplateEditFlow()||e.isTemplateSwapProductFlow())},_isCreatingProductFromTemplate:function(){return this._par.productTemplateEditorState&&this._par.productTemplateEditorState.isProductCreateFlow()},_isProductTemplateDetailsEditor:function(){return this._isCreatingProductFromTemplate()&&this._par.productTemplateEditorState.useSimpleDesigner},render:function(){var e=this._isProductTemplateDetailsEditor();if(e&&(this._par.arePickersVisible=!0),this._nodeProductOptions=tag("div"),this._renderProductOptions(),this._placementSelector=new oa(e?function(){}:this._onPlacementSelectorChanged,this._getPlacementPrices(),this),!e){var t=Object(Q.a)();null!=t&&t.isAdvancedInsideLabelAllowed()&&(this._labelSwitcher=new Vr),this._conflictCalculator=new Fa(this._placementSelector,this._templates),this._placementLimiter=new Xa.a(this._templates,this._placementSelector),this.shouldAllowTextboxLayer()?(this._nodeTextboxPicker=tag("div"),this._renderTextboxPicker()):(this._nodeTextPicker=tag("div"),this._renderTextPicker()),this._nodeInlineProductPicker=tag("div"),this._nodeEmbroideryImagePicker=tag("div"),this._nodePatternPicker=tag("div","pf-mt-12"),this._nodeLayerPicker=tag("div","pf-mb-24"),this._nodeDesignFillPickerWarning=tag("div","pf-mb-24"),this._nodeDesignFillPicker=tag("div",""),this._nodeClipartPicker=tag("div","pf-mb-24"),this._nodeMockupPicker=tag("div","pf-mb-24"),this._nodeQuickDesignPicker=tag("div","pf-mb-24"),this._nodeLicensedAssetPicker=tag("div","pf-mb-24"),this._nodeOrientationPicker=tag("div","pf-mb-24"),this._nodeLayerPickerChooser=tag("div"),this._nodeAddidasBannerProductTab=tag("div","pf-my-24"),this._nodeAddidasBannerDesignTab=tag("div","pf-my-24"),this._nodeAdvancedTemplatePicker=tag("div","pf-px-8 pf-mt-24"),this._nodeTechniquePicker=tag("div"),this._renderTechniquePicker()}this._nodeRegionPicker=tag("div"),this._renderRegionPicker(),this._nodeAvailabilityWarning=tag("div"),this._renderAvailabilityWarning(),this._nodeColorPicker=tag("div"),this._renderColorPicker(),this._nodeAvailability=tag("div"),this._renderAvailability(),this._nodeUsedColors=tag("div"),this._renderUsedColors(),this._nodeSizePicker=tag("div"),this._renderSizePicker(),this._nodeVariantWarning=tag("div","product-push__variant-warning"),this._renderVariantWarning(),this._nodeDiscontinuedWarning=tag("div","product-push__discontinued-warning"),this._renderDiscontinuedWarning(),this._nodeUnavailableSizeColorWarning=tag("div"),this._renderUnavailableSizeColorWarning(),this._nodeExistingVariantsWarning=tag("div","product-push__existing-warning"),this._renderExistingVariantsWarning(),this._nodePickerTabs=tag("div"),this._nodePickerTabContents=tag("div"),e||this._renderPickerTabs(),this._renderPickerTabContents(),this._renderDetailsEditor(),this._renderFull()},_renderDetailsEditor:function(){if(this._isProductTemplateDetailsEditor()){var e=[this._nodeRegionPicker,this._nodeAvailability,this._nodeAvailabilityWarning,this._nodeColorPicker,this._nodeSizePicker,this._nodeVariantWarning,this._nodeDiscontinuedWarning,this._nodeUnavailableSizeColorWarning,this._nodeExistingVariantsWarning,this._nodeUsedColors];tag("div","row pf-mb-0",[tag("div","col-md-12 pf-mt-8 pf-mb-48",[this._nodePickerTabContents])]).append(this.node),this._buildPickerTabContent(Ad.TAB_PRODUCT,e),this._renderFooter()}},_renderFull:function(){var e;if(!this._isProductTemplateDetailsEditor()){var t=Object(Q.a)();this._nodeVideoTutorial=tag("div"),this._renderVideoTutorial(),this._nodeDesignerTabContents=tag("div"),this._renderDesignerTabContents(),this._nodeDesignerTabs=tag("div"),this._activeDesignerTabId=Ad.TAB_DESIGNER,this._showDesignerTab(this._activeDesignerTabId),this._par.isOrderFlowMode||this._par.isCustomizingMode?this._nodeMockupArea=tag("div","row",[this._placementSelector,!(null==t||!t.isAdvancedInsideLabelAllowed())&&this._labelSwitcher,this._designerToolbarNode=this._designerToolbarService.renderToolbar(),this._nodeMainMockupArea=tag("div","main-mockup-area"),this._nodeMockupVariantArea=tag("div","hidden")]):this._nodeMockupArea=tag("div","",[this._placementSelector,!(null==t||!t.isAdvancedInsideLabelAllowed())&&this._labelSwitcher,this._designerToolbarNode=this._designerToolbarService.renderToolbar(),this._nodeMainMockupArea=tag("div",{className:"main-mockup-area "+(this._isEmpty()?"main-mockup-area--empty-mockup":""),style:{position:"relative"}}),tag("div","pf-mb-8"),this._nodeMockupVariantArea=tag("div")]),tag("div","row pf-mb-0",[this._par.arePickersVisible?this._nodeLayerPickerCol=tag("div","layer-picker-col col-12 col-md-4 pf-mb-md-48",[this._nodePickerTabs,this._nodePickerTabContents]):"",this._nodeDesignerCol=tag("div","col-12 "+(this._par.arePickersVisible?"col-md-8":""),[this._nodeDesignerTabs,this._nodeDesignerTabContents])]).append(this.node);var i=[this._nodeInlineProductPicker,Object(Td.a)((null==t?void 0:t.canHaveOnlyLabel())&&!(null!==(e=this._par.store)&&void 0!==e&&e.isEtsy())),this._nodeOrientationPicker,this._nodeRegionPicker,this._nodeAvailability,this._nodeTechniquePicker,this._nodeAvailabilityWarning,this._nodeColorPicker,this._nodeSizePicker,this._nodeProductOptions,this._nodeVariantWarning,this._nodeDiscontinuedWarning,this._nodeUnavailableSizeColorWarning,this._nodeExistingVariantsWarning,this._nodeLayerPickerChooser,this._nodeUsedColors,this._nodeAddidasBannerProductTab],n=[this._nodeLayerPicker,this._nodeDesignFillPickerWarning,this._nodeDesignFillPicker,this._nodeAddidasBannerDesignTab],r=[tag("a",{className:"pf-link-block",onclick:this.showDesignTab.bind(this)},[tag("i","pf-i pf-i-chevron-left pf-i-24 pf-text-muted"),tag("span","pf-pl-4",lang("Back to design tools"))]),tag("hr","pf-my-12"),this._nodeEmbroideryImagePicker,this._nodePatternPicker];this._buildPickerTabContent(Ad.TAB_PRODUCT,i),this._buildPickerTabContent(Ad.TAB_DESIGN,n),this.shouldAllowTextboxLayer()?this._buildPickerTabContent(Ad.TAB_TEXTBOX,[this._nodeTextboxPicker]):this._buildPickerTabContent(Ad.TAB_TEXT,[this._nodeTextPicker]),this._buildPickerTabContent(Ad.TAB_IMAGE,r),this._buildPickerTabContent(Ad.TAB_CLIPART,[this._nodeClipartPicker]),this._buildPickerTabContent(Ad.TAB_MOCKUPS,[this._nodeMockupPicker]),this._buildPickerTabContent(Ad.TAB_QUICKDESIGN,[this._nodeQuickDesignPicker]),this._buildPickerTabContent(Ad.TAB_LICENSEDASSET,[this._nodeLicensedAssetPicker]),this._buildPickerTabContent(Ad.TAB_TOOLBAR,[this._designerToolbarService.getNodeToolbarPicker()]),this._buildDesignerTabContent(Ad.TAB_DESIGNER,[this._nodeMockupArea]),this._buildDesignerTabContent(Ad.TAB_PREVIEW,[this._nodePreviewArea=tag("div")]);var a=this._par.productTemplateEditorState;(this._par.isMockupGeneratorMode||this._par.isProductPushMode||!this._par.isOrderFlowMode||a)&&this._renderFooter(),null!=t&&t.shouldShowAdidasBanner()&&this._renderAdidasBannerTabs(),window.removeEventListener("resize",this._onWindowResizeThrottle,!1),window.addEventListener("resize",this._onWindowResizeThrottle,!1)}},_onWindowResizeThrottle:function(){P.a.delay("designer-window-resize",this._onWindowResize.bind(this),50)},_onWindowResize:function(){if(!this._zoomInLoading&&Object(A.a)(this._nodeMainMockupArea)&&(this._process3dAreaAfterResize(),this._mockup&&this._mockup.getMockup()&&this._mockup.getMockup().node)){var e=this._mockup.getMockup(),t=e.node.parentNode,i=e.node,n=this._par.isProductPushMode?this._par.pushMockupMainMaxWidth:this._par.mockupMainMaxWidth,r=t.clientWidth!==t.scrollWidth,a=i.clientWidth!==n&&t.clientWidth>i.clientWidth+100;(r||a)&&this._onResize(50)}},getNodeMainMockupAreaNode:function(){return this._nodeMainMockupArea||null},append:function(e){var t=this;return this.node.append(e),this.waitInitialRender().then((function(){var e;t._renderFooter(),t._renderLayerPickerChooser(),null===(e=t._layerPicker)||void 0===e||e.render(),t._renderDesignFillPicker(),t._designerToolbarNode=t._designerToolbarService.renderToolbar(),t._designerToolbarService.renderSidebar(),t._buildPickerTabContent(Ad.TAB_TOOLBAR,[t._designerToolbarService.getNodeToolbarPicker()]),t._updateChooserDisablingOptions()})),this},_buildPickerTabContent:function(e,t){for(var i in t)t[i].append(this._pickerTabContents[e])},_buildDesignerTabContent:function(e,t){for(var i in t)t[i].append(this._designerTabContents[e])},_getPlacementPrices:function(){return this._par.isOrderFlowMode?this._par.pickerConfig.placementPrices:null},_getDiscontinuedColorsPerSize:function(e){var t,i,n={},r={},a=Id(e);try{for(a.s();!(i=a.n()).done;){var o=i.value;(t=o.size)in n||(n[t]=[]),n[t].push(o.color),o.discontinued&&(t in r||(r[t]=[]),r[t].push(o.color))}}catch(e){a.e(e)}finally{a.f()}for(var s in this.allColors){var l=this.allColors[s].color;for(t in n)-1===n[t].indexOf(l)&&(t in r||(r[t]=[]),r[t].push(l))}return r},_renderInlineProductPicker:function(){if(this._par.arePickersVisible){w.a.clearNode(this._nodeInlineProductPicker);var e=it;e.onProductPickedCallback=this._onProductPickedFromPicker,e.isProductPickable=!this._par.isProductPushMode&&!this._par.isOrderFlowMode&&!this._par.productTemplateEditorState,e.isSync=this._par.isProductPushMode,new ft(e).append(this._nodeInlineProductPicker)}},_renderPickerTabs:function(){var e=this;if(this._par.arePickersVisible){if(!this._pickerTabs){w.a.clearNode(this._nodePickerTabs);var t=new gi.a("primary top-icons tabs-justify pf-tabs-generator-mobile"+(Object(je.g)()?" pf-mb-md-24":""));this._pickerTabs=t,Object(je.g)()&&t.add({caption:dlang("generator","Product"),icon:tag("i","pf-i pf-i-tshirt-crew-outline pf-i-24"),customId:Ad.TAB_PRODUCT,onclick:this.showProductTab.bind(this)});var i=!1;!this._isProductTemplateDetailsEditor()&&Object(je.g)()&&t.add({caption:dlang("generator","Design"),icon:tag("i","pf-i pf-i-palette-outline pf-i-24"),customId:Ad.TAB_DESIGN,onclick:function(){i||(m.a.trackClickedOnDesignTab(e._par.isModalDesigner,e._par),i=!0),e.showDesignTab()}}),t.append(this._nodePickerTabs)}if(Object(je.g)())this.showProductTab();else{var n,r,a;this._generatorParams=this._par.generatorParameters;var o=null!==(n=null===(r=this._par)||void 0===r||null===(a=r.generatorParameters)||void 0===a?void 0:a.placementsWithOnlyBackgroundColor)&&void 0!==n?n:[];Object(Q.f)(o),this.showDesignTab()}}},_renderDesignerTabs:function(){var e=this;if(!this._isProductTemplateDetailsEditor()&&this._nodeDesignerTabs){w.a.clearNode(this._nodeDesignerTabs);var t=!this._templates.hasLayers()&&!this._hasPlacementWithDesignFill();if(this._isDesignerTabsVisible()&&!t&&(this._selectedSizes.length||this._selectedColors.length)&&0!==this.getSelectedGeneratorVariants(!1).generatorVariants.length){var i=new gi.a("secondary");i.add({caption:this._getTemplateTabName(),isActive:this._activeDesignerTabId===Ad.TAB_DESIGNER,customId:Ad.TAB_DESIGNER,onclick:this._onDesignerTabPicked.bind(this,Ad.TAB_DESIGNER)}),this._canRender3dViewTab()&&i.add({caption:tag("div","",[dlang("generator","3D view"),tag("span","pf-badge pf-badge-small pf-badge-new pf-badge--primary pf-badge-new pf-ml-4",clang("Badge","New"))]),isActive:this._activeDesignerTabId===Ad.TAB_3D,customId:Ad.TAB_3D,onclick:this._on3dViewTabClick.bind(this)}),this._isMockupViewAvailable()&&i.add({caption:dlang("generator","Mockup view"),isActive:this._activeDesignerTabId===Ad.TAB_PREVIEW,customId:Ad.TAB_PREVIEW,onclick:function(){!e._productOptionsPicker.getValues().stitch_color&&Dr.a.OPTION_STITCH_COLOR in e._productOptionsPicker.getValues()&&new Pd.a,e._onDesignerTabPicked(Ad.TAB_PREVIEW);var t=e._getSelectedMappings();e.generatorRepository.getGeneratorVariants(t,(function(t){e._generatorParams.generatorVariants=Object.assign(e._generatorParams.generatorVariants,t),e._showMockupPreview()}))}}),tag("div","pf-mb-12 text-center",[i]).append(this._nodeDesignerTabs)}}},_on3dViewTabClick:function(){var e;this._designerToolbarService.removeToolbar(),this._activeDesignerTabId!==Ad.TAB_DESIGNER&&this._onDesignerTabPicked(Ad.TAB_DESIGNER,!0),this._activeDesignerTabId=Ad.TAB_3D,this._needToShow3dTab=!0,this._rearrangeNodesFor3dView(!0),this._onAfterDesignerTabChanged(),null===(e=this._live3dView)||void 0===e||e.scheduleDesignReload()},_onAfterDesignerTabChanged:function(){this._par.onActiveDesignerTabChanged&&this._par.onActiveDesignerTabChanged(this._activeDesignerTabId)},_canRender3dViewTab:function(){var e=this,t=this._get3dViewConfigObject(),i=Rr.getNeededPlacementIds(t);return t&&(null==i?void 0:i.some((function(t){return e.hasDesignForPlacement(t)})))},_save3dViewCanvasImagesIfNeeded:function(e,t){var i=this,n=this._get3dViewConfigObject(),r=this._getCanvasObject();if(n&&r){!this._needToShow3dTab&&this._activeDesignerTabId!==Ad.TAB_3D||1!==this.getAvailablePlacements().length||(this._show3DPreview(),this._needToShow3dTab=!1);var a,o=this._templates.getTemplatesByPlacement(e.placementId);for(var s in o)a=Or.a.getPreviewString(o[s].getKey()+t),Rr.savePlacementImage(this.getSelectedPlacementId()+"_"+o[s].templateId,a);var l=this._placementSelector.getSelectedPlacement(),c=Rr.getFillColor(n);if(a=r.convertToPreview({multiplier:2,fillColor:c},!1),Rr.savePlacementImage(l.id,a),this._needToShow3dTab||this._activeDesignerTabId===Ad.TAB_3D){var u=this._placementOptions.getPlacementFill(l.id);this.getAvailablePlacements().filter((function(e){return e.id!==l.id})).map((function(t){var n=i._placementOptions.getPlacementFill(t.id);if((null==n?void 0:n.designFillValue)===(null==u?void 0:u.designFillValue)&&!i._templates.hasLayersForPlacement(t.id)&&!i._templates.hasLayersForPlacement(l.id))return i._getTemplate(t.id).templateId===i._getTemplate(l.id).templateId?Rr.savePlacementImage(t.id+"_"+e.templateId,a):Rr.savePlacementImage(t.id+"_"+i._templates.getTemplatesByPlacement(t.id)[0].templateId,a),void i._show3DPreview();var r=i.getGeneratorVariantByPlacementId(t.id);Or.a.setPreviewStringFromTemplate(i._getTemplate(t.id),r.mockupPosition,{fill:n},(function(n){i._getTemplate(t.id).templateId===i._getTemplate(l.id).templateId?Rr.savePlacementImage(t.id+"_"+e.templateId,n):Rr.savePlacementImage(t.id+"_"+i._templates.getTemplatesByPlacement(t.id)[0].templateId,n),i._show3DPreview()}))})),this._needToShow3dTab=!1}}},_rearrangeNodesFor3dView:function(e,t){if(this._node3DArea||(this._node3DArea=tag("div","live-3d-view-container col-lg-3 order-1 order-lg-2 pf-p-0")),this._nodeLayerPickerCol&&this._nodeDesignerCol&&this._nodeMainMockupArea){if(e?(w.a.addClassName(this._nodeLayerPickerCol,"pf-d-none"),w.a.removeClassName(this._nodeDesignerCol,"col-md-8"),w.a.addClassName(this._nodeDesignerCol,"col-md-12"),w.a.addClassName(this._nodeMainMockupArea,"main-mockup-area--with-3dview")):(w.a.removeClassName(this._nodeLayerPickerCol,"pf-d-none"),w.a.removeClassName(this._nodeDesignerCol,"col-md-12"),w.a.addClassName(this._nodeDesignerCol,"col-md-8"),w.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--with-3dview"),this._node3DArea.remove()),this.hasDesignForPlacement(this.getSelectedPlacementId()))t||this._renderMockupMainArea();else{for(var i in this.getAvailablePlacements())if(this.hasDesignForPlacement(this.getAvailablePlacements()[i].id)){this._renderMockupMainArea();break}this.renderEmptyMockup(this._getSelectedVariant())}e&&!this._live3dView&&this._show3DPreview()}},_process3dAreaAfterResize:function(){var e,t,i,n,r,a=this._get3dViewConfigObject();if(a){var o=Rr.getDimensions(a),s=(null===(e=this._live3dView)||void 0===e||null===(t=e.dimensions)||void 0===t?void 0:t.width)||-1,l=(null===(i=this._live3dView)||void 0===i||null===(n=i.dimensions)||void 0===n?void 0:n.height)||-1;(s!==o.width||l!==o.height)&&(this._update3dStatus(Rr.STATUS_RELOAD_MODEL),this._activeDesignerTabId===Ad.TAB_3D&&this._show3DPreview(),null===(r=this._dropZoneArea)||void 0===r||r.repositionDropAreafor3dCombo())}},_get3dViewConfigObject:function(){var e,t=null===(e=this._getSelectedVariant())||void 0===e?void 0:e.templateId;return Rr.getMapObject(t)},_isMockupViewAvailable:function(){var e=this,t=this.getAvailablePlacements().map((function(e){return e.id})).filter((function(t){return e.hasDesignForPlacement(t)}));return Object.values(this._generatorParams.generatorVariants).filter((function(e){return t.indexOf(e.placementId)>-1&&e.role!==Na.a.ROLE_TEMPLATE&&e.role!==Na.a.ROLE_ADVANCED_TEMPLATE})).length>0},_isDesignerTabsVisible:function(){var e=Object(Q.a)();return!this._par.isCustomizingMode&&e&&(e.isMug()||e.isDrinkware()||e.isSublimation()||e.isCutSew()||e.isCanvas()||e.isPoster()||e.isFramedPoster()||e.isSticker()||e.isPostcard()||this._isEngraving())},_onDesignerTabPicked:function(e,t){this._activeDesignerTabId!==e?(this._activeDesignerTabId=e,this._onBeforeSwitchToTab(e,t),t||(this._renderDesignerTabs(),this._designerToolbarService.renderToolbar()),this._showDesignerTab(e),this._onAfterDesignerTabChanged()):t||this._renderDesignerTabs()},_onBeforeSwitchToTab:function(e,t){var i,n;(null===(i=this._mockup)||void 0===i||i.applyCropIfNeeded(),e!==Ad.TAB_3D)&&(null===(n=this._live3dView)||void 0===n||n.stopAnimate(),this._rearrangeNodesFor3dView(!1,t))},_renderPickerTabContents:function(){for(var e in this._pickerTabContents)this._pickerTabContents[e].append(this._nodePickerTabContents)},_renderDesignerTabContents:function(){for(var e in this._designerTabContents)this._designerTabContents[e].append(this._nodeDesignerTabContents)},showPickerTab:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(this._par.arePickersVisible){for(var i in this._pickerTabContents)i===e?w.a.removeClassName(this._pickerTabContents[i],"hidden"):w.a.addClassName(this._pickerTabContents[i],"hidden");var n=e===Ad.TAB_PRODUCT?e:Ad.TAB_DESIGN;this._pickerTabs.markTabAsSelectedById(n),n===Ad.TAB_PRODUCT?this._isProductTemplateDetailsEditor()||(this._templates.setActiveLayer(null,null,!0),this._renderLayerPickerChooser()):(!this._templates.hasLayersForPlacement(this.getSelectedPlacementId())||this._templates.getActiveLayer()&&this._templates.getActiveGroupLayers()||this._templates.setActiveLayerFromTemplate(this.previewMockupVariant.placementId,this.previewMockupVariant.templateId),this._renderLayerPicker()),e===Ad.TAB_CLIPART?this._clipartPicker.renderGroups():e===Ad.TAB_QUICKDESIGN?this._quickDesignPicker.renderGroups():e!==Ad.TAB_LICENSEDASSET||t?e===Ad.TAB_MOCKUPS?this._renderMockupPicker():e===Ad.TAB_IMAGE&&this._patternPicker&&this._patternPicker.resubscribeToEvents():this._licensedAssetPicker.renderItems(),this._mockup&&this._mockup.renderMirrorCheckbox(this._templates.getActiveLayer(),e===Ad.TAB_IMAGE),Object(A.b)()&&y()(".tooltip").tooltip("hide"),T.o(E.EVENT_UPDATE_MOBILE_FOOTER,e)}},_showDesignerTab:function(e){for(var t in this._designerTabContents)t===e?w.a.removeClassName(this._designerTabContents[t],"hidden"):w.a.addClassName(this._designerTabContents[t],"hidden");T.o(E.EVENT_UPDATE_MOBILE_FOOTER)},_showMockupPreview:function(){if(this._shouldRegeneratePreview){w.a.clearNode(this._nodePreviewArea);var e=this.getDesignData(),t=null;e.generatorVariants.length?this._par.isCustomizingMode||this._productOptionsPicker&&this._productOptionsPicker.hasValidOptions()?(this.isFileLimitExceeded(z.a)||this.isFileLimitExceeded(Ze.a))&&(t=this.getFileLimitExceededText()):t=e.product.isEmbroidery()?dlang("generator","Please select thread colors!"):dlang("generator","Please select product options!"):t=dlang("generator","Please select size, color and at least one file!"),null===t&&(this._shouldRegeneratePreview=!1),new Lr.a(e,t).append(this._nodePreviewArea),t&&(this._productOptionsPicker.updateErrorStatus(),this.showProductTab()),T.o(E.EVENT_UPDATE_MOBILE_FOOTER)}},_update3dStatus:function(e,t){var i;!t&&this._3dStatus<=e||(this._3dStatus=e,e===Rr.STATUS_RELOAD_MODEL&&(this._show3dViewWarningAlert=!0,null===(i=this._live3dView)||void 0===i||i.reset3dModelLoaded()))},_show3DPreview:(Ld=kd(regeneratorRuntime.mark((function e(t){var i,n,r,a,o,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._live3dView||this._3dStatus===Rr.STATUS_RELOAD_MODEL||this._3dStatus===Rr.STATUS_RELOAD_MODEL_PROCESSING){e.next=12;break}e.t0=this._3dStatus,e.next=e.t0===Rr.STATUS_RELOAD_PRINTFILE?4:e.t0===Rr.STATUS_NO_CHANGES?7:9;break;case 4:return e.next=6,null===(i=this._live3dView)||void 0===i?void 0:i.reloadDesign();case 6:return e.abrupt("break",9);case 7:return null===(n=this._live3dView)||void 0===n||n.startAnimate(),e.abrupt("break",9);case 9:this._update3dStatus(Rr.STATUS_NO_CHANGES,!0),e.next=35;break;case 12:if(this._3dStatus!==Rr.STATUS_RELOAD_MODEL){e.next=35;break}return this._update3dStatus(Rr.STATUS_RELOAD_MODEL_PROCESSING,!0),null===(r=this._live3dView)||void 0===r||r.stopAnimate(),this._loaded3dObj=null,w.a.clearNode(this._node3DArea),a=Object(Q.a)(),(o=new ml).getCanvasObj=this._getCanvasObject.bind(this),o.loadingNode=this._node3DArea,o.productSlug=a.slug,o.getSelectedVariant=this._getSelectedVariant.bind(this),o.getDesignData=this.getDesignData.bind(this),o.getLoaded3dObj=function(){return s._loaded3dObj},o.getSelectedPlacementId=this.getSelectedPlacementId.bind(this),o.on3dObjectLoaded=this._on3dObjectLoaded.bind(this),o.showWarningAlert=this._show3dViewWarningAlert,o.onWarningAlertClose=function(){s._show3dViewWarningAlert=!1},t||x.a.show(this._node3DArea),this._live3dView=new gl(o),e.next=33,this._live3dView.loadThreeCache();case 33:this._live3dView.generate3d(),this._live3dView.append(this._node3DArea);case 35:case"end":return e.stop()}}),e,this)}))),function(e){return Ld.apply(this,arguments)}),_getCanvasObject:function(){var e,t,i;return null===(e=this._mockup)||void 0===e||null===(t=e.getMockup())||void 0===t||null===(i=t.getCanvas())||void 0===i?void 0:i.getCanvas()},_on3dObjectLoaded:function(e,t){this._loaded3dObj=e,this._3dObjUniqueId=t,this._update3dStatus(Rr.STATUS_NO_CHANGES,!0)},requireMockupRegeneration:function(){this._shouldRegeneratePreview=!0,this._update3dStatus(Rr.STATUS_RELOAD_PRINTFILE)},requireMockupRegenerationAndShowDesigner:function(e){var t=Array.prototype.slice.call(arguments).some((function(e){return e&&e.skipMockupRegeneration})),i=Array.prototype.slice.call(arguments).some((function(e){return e&&e.skipSwitchToDesignerTab}));t||this.requireMockupRegeneration(),this._activeDesignerTabId===Ad.TAB_3D||i||this._onDesignerTabPicked(Ad.TAB_DESIGNER),e||this._renderFooter()},setMockupControlsVisibility:function(e){this._mockup&&this._mockup.updateControlsVisibility(e)},showProductTab:function(){this.showPickerTab(Ad.TAB_PRODUCT),this._disableAddDesignTabIfNeeded()},showDesignTab:function(){this._getSelectedVariant()&&this._technique!==J.a.TYPE_STOCK_PRODUCT&&(Object(Qe.d)(),this._designerToolbarService.setActiveToolbarView(null),this.showPickerTab(Ad.TAB_DESIGN))},setLayerPickerError:function setLayerPickerError(e){this._layerPicker.showError(),this._layerPicker.nodeError.textContent=e},_onProductPickedFromPicker:function(e){if(!this._templates.hasLayers()||confirm(lang("Changes that you made may not be saved. Are you sure?"))){r.a.isDisabled=!0,this._showLoader(this.node);try{location.assign(e.getMockupGeneratorUrl())}catch(t){location.href=e.getMockupGeneratorUrl()}}},_renderTextPicker:function(){if(w.a.clearNode(this._nodeTextPicker),this._par.arePickersVisible){var e=new G;e.templates=this._templates,e.onLayerCreated=this.onTextLayerCreated,e.onLayerRemoved=this._onTextLayerRemoved,e.onLayerConfigurationChanged=this.onTextLayerChanged,e.placementSelector=this._placementSelector,e.allowCustomizableLayers=this._shouldAllowCustomizablePush,e.technique=this._technique,e.onBackCallback=this.showDesignTab.bind(this),e.isAdvancedTemplate=this._isAdvancedTemplateLoaded.bind(this),this.shouldAllowFileColorChanger()&&(e.getSelectedEmbroideryColors=this._embroideryHelper.getSelectedPaletteColors.bind(this._embroideryHelper),e.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,e.embroideryTypePrices=this._getEmbroideryPricesData()),this._textPicker&&this._textPicker.unsubscribeTemplateEvents(),this._textPicker=new qe(e),this._textPicker.append(this._nodeTextPicker),this._toggleTextPickerAvailability()}},_renderTextboxPicker:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.shouldAllowTextboxLayer()){t.next=3;break}return e._renderTextPicker(),t.abrupt("return");case 3:return t.next=5,e.waitInitialRender();case 5:if(w.a.clearNode(e._nodeTextboxPicker),e._par.arePickersVisible){t.next=8;break}return t.abrupt("return");case 8:(i=new G).templates=e._templates,i.onLayerCreated=e.onTextLayerCreated,i.onLayerRemoved=e._onTextLayerRemoved,i.onLayerConfigurationChanged=e.onTextLayerChanged,i.placementSelector=e._placementSelector,i.allowCustomizableLayers=e._shouldAllowCustomizablePush,i.technique=e._technique,i.onBackCallback=e.showDesignTab.bind(e),i.isAdvancedTemplate=e._isAdvancedTemplateLoaded.bind(e),i.isAllOver=e.isAllOverProduct.bind(e),i.selectedGeneratorVariants=function(){return e.getSelectedGeneratorVariants()},e.shouldAllowFileColorChanger()&&(i.getSelectedEmbroideryColors=e._embroideryHelper.getSelectedPaletteColors.bind(e._embroideryHelper),i.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,i.embroideryTypePrices=e._getEmbroideryPricesData()),e._textboxPicker&&e._textboxPicker.unsubscribeTemplateEvents(),e._textboxPicker=new He(i),e._textboxPicker.append(e._nodeTextboxPicker),e._toggleTextboxPickerAvailability();case 25:case"end":return t.stop()}}),t)})))()},preloadFontsUsedInGroupDesign:function(e,t){var i=e.designData.filter((function(e){var t;return null===(t=e.textInput)||void 0===t?void 0:t.font})).map((function(e){var t;return null===(t=e.textInput)||void 0===t?void 0:t.fontArray}));this.onFontsPreloaded(i,t)},_addGroupDesignLayers:function(e){var t,i=this,n=Pa(),a=this.getSelectedPlacementId(),o=!!document.documentMode||!!window.StyleMedia,s=e instanceof sl.c,l=Object(je.f)(),c=this.getGeneratorVariantByPlacementId(a),u=this._templates.getUserTemplate(this.getSelectedPlacementId(),c.templateId);e.designData.forEach((function(r){if(r){if(r.type===Bs.a.TYPE_FILL)return void(i._canHaveDesignFill()&&i._onDesignFillColorChanged({type:r.designFillType,value:r.designFillValue,urls:r.designFillUrls,item:r.designFillItem}));r.type===j.a.TYPE&&delete r.svg,t=Ha.a.layerFromArray(r),s||e.isPlainLayers||l||t.addToGroupType(e,n),s||Object(Ca.a)(t,u.width,u.height),o&&t instanceof V.a&&t.arcAngle&&(t.arcAngle=0),i._templates.addLayerToPlacementTemplates(a,t,!s,!0,!0,s)}}));var d=this._templates.getTemplatesByPlacement(a);this._templates.getChangeListener().notifyLayersAdded(d),this._templates.setActiveLayer(t,this),this._templates.setActiveLayerFromTemplate(c.placementId,c.templateId),this._afterLayerAddedAndLoaded(),s&&(this._templates.updateDesignerLeaveWarningLayers(),r.a.updateInitialStateOptions=this._placementOptions.getData())},_addQuickDesignById:function(e){var t=this;return kd(regeneratorRuntime.mark((function i(){var n,r;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t._showLoader(t._nodeMainMockupArea),n={itemIds:[e],forTechnique:t._technique},i.next=4,Object(Ac.g)(n);case 4:if(1===(r=i.sent).length){i.next=9;break}return console.warn("Wrong count Quick designs loaded: "+r.length),t._hideLoader(t._nodeMainMockupArea),i.abrupt("return");case 9:t.preloadFontsUsedInGroupDesign(r[0],t._addGroupDesignLayers.bind(t,r[0]));case 10:case"end":return i.stop()}}),i)})))()},addGroupTemplateLayers:function(e,t){var i=this;this.preloadFontsUsedInGroupDesign(e,(function(){i._addGroupDesignLayers(e),t&&t()}))},_renderEmbroideryImagePicker:function(){var e=this;if(!this._canAccessNewToolbar&&(w.a.clearNode(this._nodeEmbroideryImagePicker),this._par.arePickersVisible&&this.shouldAllowFileColorChanger())){var t=new gt;t.templateChangeListener=this._templates.getChangeListener(),t.getFileColorMapperPalette=function(){return Object.values(Object(Ue.c)(e.isEmbroidery(),e.getSelectedPlacementId(),e.isAllOverProduct(),!0))},t.onLayerRemoved=this.showDesignTab.bind(this),t.threadColorSelectionLimit=ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS,t.embroideryTypePrices=this._getEmbroideryPricesData(),t.getSelectedEmbroideryColors=this._embroideryHelper.getSelectedPaletteColors.bind(this._embroideryHelper),t.onEmbroideryTypeChangedCallback=this.onEmbroideryTypeChanged.bind(this),t.shouldShowExtraPriceForEmbroideryType=this.shouldShowExtraPriceForEmbroideryType.bind(this),this._embroideryImagePicker&&this._embroideryImagePicker.unsubscribeTemplateEvents(),this._embroideryImagePicker=new vt(t),this._embroideryImagePicker.append(this._nodeEmbroideryImagePicker),this._recalcEmbroideryPriceOptionsValue()}},_renderPatternPicker:function(){if(!this._par.arePickersVisible||!this.shouldEnablePatternPicker())return w.a.clearNode(this._nodePatternPicker),void(this._patternPicker=null);if(this._patternPicker)this._patternPicker.resubscribeToEvents();else{w.a.clearNode(this._nodePatternPicker);var e=new Ye;e.templates=this._templates,e.onLayerRemoved=this.showDesignTab.bind(this),this._patternPicker=new Je(e),this._patternPicker.append(this._nodePatternPicker)}},_renderDesigningTools:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._canAccessTools&&(!Object(je.g)()||e._par.isMockupGeneratorMode)&&!w.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&!Object(Q.d)(e.getSelectedPlacementId())){t.next=3;break}return t.abrupt("return");case 3:i=new Ul({designer:e,getDesignerMockup:function(){return e._mockup}}),new Fl(i).node.append(e._nodeLayerPicker);case 6:case"end":return t.stop()}}),t)})))()},_getEmbroideryPricesData:function(){var e;return{currency:null===(e=Object(Q.a)())||void 0===e?void 0:e.priceRange.currency,prices:this._productOptionsPicker.getPrices()[Dr.a.NAME_EMBROIDERY_TYPE]}},_manageEmbroiderySelectedColorsOnLayersAdded:function(e){var t,i=Id(e);try{for(i.s();!(t=i.n()).done;){var n,r=Id(t.value.layers);try{for(r.s();!(n=r.n()).done;){var a=n.value;this._embroideryHelper.updateSelectedEmbroideryPaletteColors(a)}}catch(e){r.e(e)}finally{r.f()}}}catch(e){i.e(e)}finally{i.f()}},onEmbroideryTypeChanged:function(e){var t=this._templates.getActiveLayer();t&&e&&(t.embroideryType=e,this.firstLayerWith3dEmbroidery||e!==Z.a.DIGITIZATION_3D&&e!==Z.a.DIGITIZATION_3D?this.firstLayerWith3dEmbroidery&&this.firstLayerWith3dEmbroidery.uniqueId===t.uniqueId&&e===Z.a.DIGITIZATION_FLAT&&(this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType()):this.firstLayerWith3dEmbroidery=t,this._recalcEmbroideryPriceOptionsValue())},_recalcFirstLayerWith3dEmbroidery:function(){if(this.firstLayerWith3dEmbroidery){var e,t=this._getTemplate(this.getSelectedPlacementId());if(t)for(var i in t.layers)if(t.layers[i].uniqueId===this.firstLayerWith3dEmbroidery.uniqueId){e=t.layers[i];break}e||(this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType())}else this.firstLayerWith3dEmbroidery=this._getFirstEmbroideryLayerWith3dType()},shouldShowExtraPriceForEmbroideryType:function(e){return!this.firstLayerWith3dEmbroidery||!e||this.firstLayerWith3dEmbroidery.uniqueId===e.uniqueId},_recalcEmbroideryPriceOptionsValue:function(){var e=this._getFirstEmbroideryLayerWith3dType(),t=this._productOptionsPicker.getValues()[Dr.a.NAME_EMBROIDERY_TYPE],i=e?e.embroideryType:Z.a.DIGITIZATION_FLAT;t!==i&&this._productOptionsPicker.setValue(Dr.a.NAME_EMBROIDERY_TYPE,i)},_getFirstEmbroideryLayerWith3dType:function(){var e,t=this._getTemplate(this.getSelectedPlacementId());if(t)for(var i in t.layers)if(t.layers[i].embroideryType===Z.a.DIGITIZATION_3D||t.layers[i].embroideryType===Z.a.DIGITIZATION_BOTH){e=t.layers[i];break}return e},renderTextPickerForProductCustomizer:function(){var e=new G;e.technique=this._technique,e.allowCustomizableLayers=function(){return!1},e.placementSelector=this._placementSelector,e.isAdvancedTemplate=this._isAdvancedTemplateLoaded.bind(this),e.isAllOver=this.isAllOverProduct.bind(this),this._textPicker=new qe(e)},onTextLayerChanged:function(e){if(e.isTextLayer()){var t=e instanceof V.a?this._textboxPicker:this._textPicker;P.a.delay("_templates.updateTextLayer",this._templates.updateTextLayer.bind(this,e,t),e.getUpdateDelay()),this._scheduleEmbroideryPreviewUpdate(this.getSelectedPlacementId(),e),this._mockup&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayCustomizableTextLayerError()),this._layerPicker&&this._layerPicker.updateLayer(e),this.setMockupControlsVisibility(),this._renderFooter()}},_onLayerDuplicate:function(e){this._activeDesignerTabId!==Ad.TAB_PREVIEW&&this._activeDesignerTabId!==Ad.TAB_3D||(this.requireMockupRegenerationAndShowDesigner(),this.resizeMockupArea()),this._templates.duplicateLayerToPlacementTemplates(e),this.setMockupControlsVisibility(),this._validateTextLayerCount(),this._renderMockupMainArea()},onTextLayerCreated:function(e,t,i){this._activeDesignerTabId!==Ad.TAB_PREVIEW&&this._activeDesignerTabId!==Ad.TAB_3D||(this.requireMockupRegenerationAndShowDesigner(),this.resizeMockupArea()),this._templates.addLayerToPlacementTemplates(this.getSelectedPlacementId(),e,t,!1,i),this._templates.silentlySetActiveLayer(e),this.setMockupControlsVisibility(),this._validateTextLayerCount(),this._renderMockupVariantArea()},_onTextLayerRemoved:function(e){this._templates.removeLayer(this._templates.getTemplateByLayer(e),e),this._templates.setActiveLayer(null),this._validateTextLayerCount()},_onActiveLayerChanged:function(e){var t,i;e&&((null===(t=this._pickerTabs)||void 0===t||null===(i=t.getActiveTab())||void 0===i?void 0:i.uniqueId)!==Ad.TAB_DESIGN&&this.showDesignTab(),"function"==typeof this._par.onActiveLayerChanged&&this._par.onActiveLayerChanged(e));this._mockup&&e&&(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayCustomizableTextLayerError(),e.length?this._mockup.getMockup().setActiveGroup(e,!0,this):this._mockup.getMockup().setActiveLayer(e,!0,this))},_validateTextLayerCount:function(){var e=this._templates.getLayerCountByType(U.a,this._placementSelector.getSelectedPlacementId());e+=this._templates.getLayerCountByType(V.a,this._placementSelector.getSelectedPlacementId());var t=cl.a.getLayerLimit(this.getSelectedPlacementTechnique(),te.a.LAYER_LIMIT_TYPE_TEXT),i=!t||t>e,n=dlang("dashboard","Max limit is {number} text layers. Please delete a layer if you want to add another one.").replace("{number}",t);this._layerPickerChooser&&Object(Qe.f)({key:$e.k.TEXTBOX_COUNT_RESTRICTION,value:n,shouldUnset:i}),this._textPicker&&this._textPicker.enabled(i).render(),this._textboxPicker&&this._textboxPicker.setEnabled(i).render()},_renderWarningNode:function(e,t,i,n){w.a.clearNode(e),tag("div","pf-mt-24 pf-mb-12",[tag("div","pf-mb-12",[tag("b",null,t)]),tag("div",n+"-box-warning",i)]).append(e)},_renderUnavailableVariantBlock:function(e,t,i){return tag("div","pf-pt-8 variation-warning-block",[t?tag("span",{className:"pf-d-inline-block",style:{minWidth:"20%"}},[tag("b",null,t)]):"",tag("span",{className:"swatches swatches--medium",style:{verticalAlign:"middle"}},[new zn.a(i)])]).append(e)},_renderExistingVariantsWarning:function(){if(this._par.existingVariants&&0!==this._par.existingVariants.length&&!this._par.isChangePrintfileMode){var e=dlang("generator","Variants that won't be updated"),t=dlang("generator","These variants are already in your store and won't be updated");this._renderWarningNode(this._nodeExistingVariantsWarning,e,t,"blue");var i=new Un.a;i.showInline=!0,i.onChange=function(){},i.isColorClickable=!1;var n=this._getExistingProductVariantData();this._nodeExistingVariationBlock=tag("div");var r=!1;for(var a in n){for(var o in i.colors={},n[a]){var s=n[a][o];s.color&&s.colorCode&&(i.colors[s.color]=[s.colorCode],s.colorCode2&&i.colors[s.color].push(s.colorCode2),r||(r=!0))}"null"===a&&(a=""),this._renderUnavailableVariantBlock(this._nodeExistingVariationBlock,a,i)}var l=!(!Object.keys(n).length||!Object.keys(n).filter((function(e){return"null"!==e})).length);this._renderVariationWarningHeader(this._nodeExistingVariationBlock,l,r),this._nodeExistingVariationBlock.append(this._nodeExistingVariantsWarning)}},_renderUsedColors:function(){if(this._par.isChangePrintfileMode){var e,t=[],i=[];for(var n in this._par.existingVariants)t.push((new d.a).getCachedVariantById(this._par.existingVariants[n].variantId));for(e in t)i.push({color:t[e].color,colorCode:t[e].colorCode,colorCode2:t[e].colorCode2});if(!(i.length<=1&&null==i[0].colorCode)){var r=new Un.a;for(var a in r.showInline=!0,r.colors={},r.isColorClickable=!1,i){var o=i[a];o.color&&o.colorCode&&(r.colors[o.color]=[o.colorCode],o.colorCode2&&r.colors[o.color].push(o.colorCode2))}y.a.isEmptyObject(r.colors)||(Object(w.a)({tag:"div",els:[{tag:"h6",text:dlang("generator","Selected color(s):")},{tag:"span",className:"swatches swatches--huge",style:{verticalAlign:"middle"},els:[new zn.a(r)]}]}).append(this._nodeUsedColors),tag("hr").prepend(this._nodeUsedColors))}}},_renderDiscontinuedWarning:function(){if(this._colorPicker){w.a.clearNode(this._nodeDiscontinuedWarning);var e=this._colorPicker.getSelectedColorNames(),t=this._getDiscontinuedColorSelected(e);if(0!==Object.keys(t).length){var i=dlang("generator","Discontinued variants"),n=this._par.isProductPushMode?dlang("generator","These variants are discontinued and won't be pushed into your store"):dlang("generator","These variants are discontinued and won't be generated");this._renderWarningNode(this._nodeDiscontinuedWarning,i,n,"orange");var r=new Un.a;r.showInline=!0,r.onChange=function(){},r.isColorClickable=!1,this._nodeDiscontinuedVariationBlock=tag("div");var a=!1;for(var o in t)if(-1!==this._selectedSizes.indexOf(o)){for(var s in r.colors={},t[o]){var l=t[o][s];r.colors[l]=this._colorPicker.getColorCodes(l),a||(a=!0)}var c=this._sizePicker?o:"";this._renderUnavailableVariantBlock(this._nodeDiscontinuedVariationBlock,c,r)}var u=!!this._sizePicker;this._renderVariationWarningHeader(this._nodeDiscontinuedVariationBlock,u,a),this._nodeDiscontinuedVariationBlock.append(this._nodeDiscontinuedWarning,t)}}},_renderUnavailableSizeColorWarning:function(){var e=this;if(this._regionPicker&&this._colorPicker&&this._sizePicker&&this._par.isProductPushMode){w.a.clearNode(this._nodeUnavailableSizeColorWarning);var t=this._regionPicker.getRegionVariants(this.getRegion());if(t.length){var i={};this._getSelectedMappings().forEach((function(e){t.includes(e.variantId)||(i[e.size]||(i[e.size]=[]),i[e.size].push(e.color))})),Object.keys(i).length&&function(){var t=new Un.a;t.showInline=!0,t.onChange=function(){},t.isColorClickable=!1,e._nodeUnavailableSizeColorBlock=tag("div");var n=function(n){if(e._selectedSizes.indexOf(n)<0)return"continue";t.colors={},i[n].forEach((function(i){(!e.discontinuedColors[n]||e.discontinuedColors[n]&&!e.discontinuedColors[n].includes(i))&&(t.colors[i]=e._colorPicker.getColorCodes(i))})),Object.keys(t.colors).length&&e._renderUnavailableVariantBlock(e._nodeUnavailableSizeColorBlock,n,t)};for(var r in i)n(r);e._renderVariationWarningHeader(e._nodeUnavailableSizeColorBlock,!0,!0),e._nodeUnavailableSizeColorBlock.append(e._nodeUnavailableSizeColorWarning)}()}}},_renderVariationWarningHeader:function(e,t,i){tag("div","pf-text-muted",[t?tag("span",{className:"pf-d-inline-block",style:{minWidth:"20%"}},dlang("generator","Size")):"",i?tag("span",null,dlang("generator","Colors")):""]).prepend(e)},_getDiscontinuedColorSelected:function(e){var t=this,i={},n=function(n){if(-1===t._selectedSizes.indexOf(n))return"continue";var r=t.discontinuedColors[n];i[n]=e.filter((function(e){return r.indexOf(e)>-1})),0===i[n].length&&delete i[n]};for(var r in this.discontinuedColors)n(r);return i},_updateExcludedPlacements:function(){var e=Object(Q.a)(),t=this._par.isOrderFlowMode,i=this._par.isProductPushMode&&(null==e?void 0:e.isAdvancedInsideLabelAllowed()),n=this._par.productTemplateEditorState;t||i||n||!Object(Q.c)()||null!=e&&e.canHaveOnlyLabelPlacement||(this.excludedPlacements[J.a.TYPE_T_SHIRT]=[Z.a.TYPE_LABEL_INSIDE])},_renderFooter:function(){var e=this._templates.getUsedFonts();(e.length||this._shouldPreloadFonts()||this._par.isFooterVisible)&&this.onFontsPreloaded(e,this._renderFooterAfterFonts.bind(this))},_renderFooterAfterFonts:function(){var e,t,i,n,r=this;if(w.a.clearNode(this._nodeFooter),this._cleanupMoreDropdown(),this._par.isFooterVisible){var a=this._isVariantLimitExceeded(),o=this._getEbayStockQuantityExceededError(),s=!this.hasNeededQuality(),l=(null===(e=Object(Q.a)())||void 0===e?void 0:e.canHaveOnlyLabelPlacement)&&!(null!==(t=this.designData.store)&&void 0!==t&&t.isEtsy()),u=Object(Au.h)(this._templates,this.designData,!l),d=this._isInvalidVariantCombination(),h=Object(Au.f)(this._templates,this.generatorVariants),p=Object(Au.e)(this._templates,this.generatorVariants),f=Object(Au.g)(this._templates,this.generatorVariants),g=Object(Au.d)(this._templates,this.generatorVariants),_=this.hasEmbroideryPositionError(),v=this.hasEmbroideryTextSizeError(),y=this.hasEmbroideryTextTooBigError(),b=this.hasEmbroideryTextOverlapError(),P=this.hasTextSizeError(),C=this.hasClipartSizeError(),I=this.hasLayersOverlapError(),S=this.hasLayersPositionError(),O=!this.areEmbroideryThreadColorsValid(),k=this.hasEmbroideryNotesError(),L=[],R=[],N=!1,D=!0;if(this._isProductTemplateDetailsEditor()||(this._productOptionsPicker.hasValidOptions()?this._productOptionsPicker.updateErrorStatus():this._productOptionsPicker.hasOption(Dr.a.NAME_EMBROIDERY_TYPE)?N=!0:L.push(dlang("generator","Please check if all required options are selected."))),this._sizePicker&&this._sizePicker.updateErrorStatus(),o){var x=dlang("dashboard","The amount of selected variants ({0}) exceeds the available quantity ({1}) for your eBay store.");x=x.format(o.used,o.limit),R.push(x),R.push(tag("br"))}if(a&&(R.push(dlang("generator","Storeâs variant limit per product exceeded!")),R.push(tag("br"))),s&&(R.push(c.a.PRINTFILE_TOO_SMALL),R.push(tag("br"))),this._isProductTemplateDetailsEditor()||(this.isFileLimitExceeded(z.a)||this.isFileLimitExceeded(Ze.a))&&(R.push(this.getFileLimitExceededText()),R.push(tag("br"))),d){R.push(dlang("generator","Discontinued colors/sizes canât be pushed to your store. Please unselect them."));var F=this._par.store.isEtsy()?langUrl("/faq/integrations/etsy/288-can-t-publish-products-on-etsy"):langUrl("/faq/integrations/webflow/482-are-there-any-product-variant-selection-limitations-for-my-webflow-store");this._par.store.isEtsy()&&R.push(tag("a",{className:"pf-ml-4",target:"_blank",href:F},clang("button that leads to FAQ","Help"))),R.push(tag("br"))}if(this._layerPicker&&w.a.addClassName(this._layerPicker.nodeError,"hidden"),u&&L.push(lang("Please add a design!")),this._getSelectedVariant()&&!this._par.isChangePrintfileMode)for(var M in this._par.existingVariants){var B=this._par.existingVariants[M];for(var V in this._getSelectedVariants()){var j=this._getSelectedVariants()[V];B.variantId===j.variantId&&L.push(lang("Can't push already synced variant!"))}}h||p?R.push(dlang("generator","Personalization tool doesn't support text arcs or multiple lines")):f?R.push(dlang("generator","Personalization tool doesn't support graphic colors")):g&&R.push(dlang("generator","Personalization tool doesn't support cropped images")),v?R.push(c.a.EMBROIDERY_TEXT_TOO_SMALL):y?R.push(c.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT):b?R.push(c.a.EMBROIDERY_LAYERS_OVERLAPPING):_?R.push(c.a.EMBROIDERY_OUT_OF_BOUNDS):P?R.push(c.a.LAYER_TEXT_TOO_SMALL):C?R.push(c.a.LAYER_CLIPART_TOO_SMALL):I?R.push(c.a.ENGRAVING_LAYERS_OVERLAPPING):S?R.push(c.a.LAYER_OUT_OF_BOUNDS):O?R.push(c.a.EMBROIDERY_THREAD_COLOR_LIMIT.replace("{limit}",ge.a.EMBROIDERY_MAX_SELECTED_THREAD_COLORS)):k&&!this._par.isMockupGeneratorMode&&R.push(c.a.EMBROIDERY_NOTES_MISSING);var U=this.exceededTextLayerCharacterLimit();U&&R.push(c.a.TEXT_TOO_LONG.replace("{limit}",U));var G,H=2;if(PF.Customer.isLogged()&&this._par.isMockupGeneratorMode&&!this._par.isProductPushMode&&!this._isProductTemplateEditor()&&(H=3),tag("div","row no-gutters pf-pl-12 pf-pr-4 pf-px-md-0 pf-pt-8 pf-pt-md-0",[this._footerButtonWrapper=tag("div",(this._par.shouldShowPrice?"col-12":"col-11")+" col-md-auto order-2 order-md-1 pf-d-flex pf-align-items-center",[this._par.onBack?tag("a",{id:"js--back",onclick:this._onBack.bind(this),className:"pf-btn pf-btn-secondary pf-mr-12 pf-w-25 pf-w-md-auto",attr:{"data-test":"btn-back-xfpBicCui2PlgHY"}},clang("Go back","Back")):"",this._footerButtonContinue=tag("a",{className:"pf-btn pf-btn-primary "+(this._par.onBack?"pf-w-75":"pf-w-100")+" pf-w-md-auto",style:{pointerEvents:"auto"},attr:{"data-test":"product-push-designer-continue"},onclick:this._onContinue.bind(this)},[this._par.ctaText,this._footerButtonContinueSpinner=tag("span","pf-i pf-i-loading pf-i-spin pf-i-24 pf-d-none  pf-ml-4")]),this._footerExpandMenu=3===H?tag("ul",{className:"mg-sticky-footer-more-menu dropdown-menu dropdown-menu-right pf-ui-body pf-px-0 pf-py-8 pf-rounded-0"},[this._footerExpandMenuFirst=tag("li","",[this._nodeButtonOrderPreviewMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(){r._collapseMoreLinks(),r._nodeButtonOrderPreview.onclick()}},clang("action","Order"))]),this._footerExpandMenuSecond=tag("li","",[this._footerButtonSaveToTemplatesMock=tag("a",{className:"pf-px-16 pf-py-8",onclick:function(e){r._collapseMoreLinks(),r._footerButtonSaveToTemplates.onclick(e)}},clang("action","Save to templates"))])]):"",this._footerButtonMore=3===H?this._footerButtonMore=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto pf-d-sm-none",onclick:this._onMoreToggle.bind(this)},[clang("action","More"),this._footerButtonMoreCaret=tag("span","pf-i pf-i-chevron-down pf-i-24 pf-ml-12 pf-text-gray")]):"",this._footerButtonSaveToTemplates=PF.Customer.isLogged()&&this._par.isMockupGeneratorMode?this._footerButtonSaveToTemplates=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto "+(3===H?"pf-d-none pf-d-sm-inline-block":""),style:{pointerEvents:"auto"},onclick:this._onSaveToTemplates.bind(this)},[clang("action","Save to templates"),this._footerButtonSaveToTemplatesSpinner=tag("span","pf-i pf-i-loading pf-i-spin pf-i-24 pf-d-none  pf-ml-4")]):"",this._nodeButtonOrderPreview=this._par.isProductPushMode||this._isProductTemplateEditor()?"":this._nodeButtonOrderPreview=tag("a",{className:"pf-btn pf-btn-secondary pf-ml-12 pf-w-50 pf-w-md-auto "+(3===H?"pf-d-none pf-d-sm-inline-block":""),style:{pointerEvents:"auto"},onclick:function(){m.a.trackClickedOnFinish(r._templates,r._par),r._onFinish(r._initOrderPreview)}},PF.Customer.isAnonymous()?dlang("site","Add to cart"):clang("action","Order"))]),tag("div","col-12 col-md-auto order-3 order-md-2",[tag("div","pf-text-red pf-bold pf-pb-8 pf-pb-md-0 pf-px-8 pf-mt-4 pf-mt-md-8",R.map((function(e){return tag("span","pf-mx-4","string"==typeof e?e:[e])})))]),this._par.shouldShowPrice?tag("div","col-12 col-md order-1 order-md-3 text-left text-md-right",[tag("div","pf-py-8 pf-py-md-0",[this._nodeFooterPrice=tag("div","pf-h4"),this._nodeFooterPriceDescription=tag("span","pf-text-muted",lang("Excl. taxes and other charges"))])]):""]).append(this._nodeFooter),this._par.shouldShowPrice&&this._updateDesignerPricesUsingPriceCalculator(),(L.length||R.length||N||this._selectedVariantCount<1)&&(w.a.addClassName(this._footerButtonContinue,"disabled"),this._nodeButtonOrderPreview&&(w.a.addClassName(this._nodeButtonOrderPreview,"disabled"),this._nodeButtonOrderPreview.onclick=this._reCheckAndUpdateErrorStatus.bind(this,u)),this._footerButtonSaveToTemplates&&(w.a.addClassName(this._footerButtonSaveToTemplates,"disabled"),this._footerButtonSaveToTemplates.onclick=this._reCheckAndUpdateErrorStatus.bind(this,u)),this._footerButtonContinue.onclick=this._reCheckAndUpdateErrorStatus.bind(this,u),D=!1),PF.Customer.mockupGeneratorRestricted&&(w.a.addClassName(this._footerButtonContinue,"disabled"),this._footerButtonContinue.onclick=null,D=!1),this._par.isMockupGeneratorMode&&this._dynamicStickyFooter&&this._dynamicStickyFooter.updateFooter(),this._par.onFooterRender?this._par.onFooterRender(this._nodeFooter):this._dynamicStickyFooter&&this._dynamicStickyFooter.setSecondFooter(this._nodeFooter),this._par.onCanContinueChange&&this._par.onCanContinueChange(D),!Object(A.a)(null===(i=this.getDynamicStickyFooter())||void 0===i?void 0:i.node))null===(G=this.getDynamicStickyFooter())||void 0===G||G.append(this.node);null===(n=this.getDynamicStickyFooter())||void 0===n||n.setSecondFooter(this._nodeFooter),window.addEventListener("resize",this._collapseMoreLinks,!1),T.q(E.EVENT_UPDATE_MOBILE_FOOTER,this._collapseMoreLinks,this),T.q(T.e,this._collapseMoreLinks,this),T.q(T.f,this._collapseMoreLinks,this),this._setupMoreDropdown(!1)}},_cleanupMoreDropdown:function(){window.removeEventListener("resize",this._collapseMoreLinks,!1),T.p(E.EVENT_UPDATE_MOBILE_FOOTER,this._collapseMoreLinks),T.p(T.e,this._collapseMoreLinks),T.p(T.f,this._collapseMoreLinks),this._collapseMoreLinks();var e=y()(this._footerExpandMenu).parents(".dynamic-sticky-footer__second-wrap");e.find(".mg-sticky-footer-more-menu").remove(),e.find(".mg-sticky-footer-secondary-more-menu").remove()},_setupMoreDropdown:function(e){var t=y()(this._footerExpandMenu).parents(".dynamic-sticky-footer__second-wrap");if(this._footerExpandMenu&&!w.a.hasClassName(this._footerExpandMenu,"__is-init")&&(t.find(".mg-sticky-footer-more-menu").remove(),t.find(".mg-sticky-footer-secondary-more-menu").remove(),t.prepend(this._footerExpandMenu),w.a.addClassName(this._footerExpandMenu,"__is-init")),e&&this._footerButtonMore&&this._footerExpandMenu){var i=t.get(0).getBoundingClientRect(),n=this._footerButtonMore.getBoundingClientRect();t.css("overflow","visible"),this._footerExpandMenu.style.right=i.right-n.right+"px"}else t.css("overflow","hidden")},_expandMoreLinks:function(){var e=this;this._setupMoreDropdown(!0),w.a.hasClassName(this._footerButtonSaveToTemplates,"disabled")?w.a.addClassName(this._footerButtonSaveToTemplatesMock,"disabled"):w.a.removeClassName(this._footerButtonSaveToTemplatesMock,"disabled"),w.a.hasClassName(this._nodeButtonOrderPreview,"disabled")?w.a.addClassName(this._nodeButtonOrderPreviewMock,"disabled"):w.a.removeClassName(this._nodeButtonOrderPreviewMock,"disabled"),w.a.addClassName(this._footerExpandMenu,"pf-d-block"),setTimeout((function(){e._expandedMenuRect=e._footerExpandMenu.getBoundingClientRect(),y()(document).on("click.moreLinkOuterClick",e._outerClickFromMoreLinks.bind(e))}),0)},_outerClickFromMoreLinks:function(e){var t=this._expandedMenuRect||this._footerExpandMenu.getBoundingClientRect(),i=e.clientX>=t.left&&e.clientX<=t.right,n=e.clientY>=t.top&&e.clientY<=t.bottom;i&&n||this._collapseMoreLinks()},_collapseMoreLinks:function(){this._footerExpandMenu&&w.a.removeClassName(this._footerExpandMenu,"pf-d-block"),this._setupMoreDropdown(!1),y()(document).off("click.moreLinkOuterClick")},_onMoreToggle:function(){w.a.hasClassName(this._footerExpandMenu,"pf-d-block")?this._collapseMoreLinks():this._expandMoreLinks()},_getSelectedVariants:function(){var e,t,i=this,n=null===(e=this._colorPicker)||void 0===e?void 0:e.selectedColors.map((function(e){return e.color})),r=(null===(t=this._sizePicker)||void 0===t?void 0:t.selectedSizes)||this.designData.templateSelectedSizes;return this._generatorParams.allAvailableVariants.filter((function(e){return(!r||i._isProductTemplateEditor())&&n&&n.includes(e.color)||!n&&r&&r.includes(e.size)||r&&n&&n.includes(e.color)&&r.includes(e.size)}))},_getSelectedVariantsPriceInfo:function(){var e=this,t=this._getSelectedVariants(),i=[];return(t=t.length?t:this._generatorParams.allAvailableVariants).forEach((function(t){var n,r={};w.a.O2O(r,t.priceData);var a=e._priceCalculator.getTotal(t)+e.getProductOptionsPicker().getExtraPrice(),o=a-t.priceData.price,s=e._priceCalculator.getTotal(t,!0)+e.getProductOptionsPicker().getExtraPrice()-t.priceData.discountedPrice;s>0&&(r.discountType=Wa.a.DISCOUNT_TYPE_CUSTOM),r.price=a,r.originalPrice=t.priceData.originalPrice+o,r.discountedPrice=t.priceData.discountedPrice+s,r.bulkDiscountTiers=null===(n=Object(Q.a)())||void 0===n?void 0:n.priceRange.bulkDiscountTiers,r.color=t.color,r.size=t.size,i.push(r)})),this._isProductTemplateEditor()&&(this._generatorParams.templatePrices=i),i},_setFooterPrice:function(e){this._par.shouldShowPrice&&(w.a.clearNode(this._nodeFooterPrice),w.a.addClassName(this._nodeFooterPriceDescription,"pf-d-none"),null!=e&&e.length&&(R.a.createDiscountElementFromPriceDataArray({priceData:e}).append(this._nodeFooterPrice),w.a.removeClassName(this._nodeFooterPriceDescription,"pf-d-none")))},_reCheckAndUpdateErrorStatus:function(e){return this._layerPicker&&!this._layerPicker.updateErrorStatus()?(this.showDesignTab(),this._layerPicker.showError(),void this._layerPicker.scrollToNodeError()):this._layerPicker&&!this._layerPicker.checkProductOptionsStatus()?(this.showDesignTab(),void this._layerPicker.getProductOptionsPicker().scrollToNodeError()):this._productOptionsPicker&&!this._productOptionsPicker.updateErrorStatus()?(this.showProductTab(),void this._productOptionsPicker.scrollToNodeError()):this._sizePicker&&!this._sizePicker.updateErrorStatus()?(this.showProductTab(),void this._sizePicker.scrollToNodeError()):void(e&&this._generatorParams&&this.gotoFirstPlacementAndDisplayNoRealDesignMsg())},gotoFirstPlacementAndDisplayNoRealDesignMsg:function(){var e=this.getAvailablePlacements().slice().shift();e&&this.setActivePlacement(e.id),setTimeout(function(){this.showDesignTab(),this._layerPicker.showError(),this._layerPicker.scrollToNodeError()}.bind(this),0)},trackTransparencyWarningContinueClick:function(){var e=this,t=Object(Q.a)();t&&(t.isDtgShirt()||t.isDtgTote())&&this._templates.getPlacementIdsHavingFiles(z.a).forEach((function(t){e._templates.getLayersByType(z.a,t).forEach((function(e){e&&e.hasTransparencyIssues&&e.hasTransparencyIssues()&&m.a.trackTransparencyWarningContinue(e.fileItem?e.fileItem.fileId:null)}))}))},_initOrderPreview:function(){var e;this.trackTransparencyWarningContinueClick(),null===(e=this._mockup)||void 0===e||e.applyCropIfNeeded();var t=new f.a;t.onChildComponentProductOptionsChanged=this._onChildComponentProductOptionsChanged.bind(this,!1);var i=new ma.a;w.a.O2O(i,this.getDesignData()),t.designData=i,t.designData.generatorVariants=this.getSelectedGeneratorVariants(!1).generatorVariants,t.generatorParams=this._generatorParams,new g.a(t)},_hasPlacementWithDesignFill:function(){return!!this._placementOptions&&this._placementOptions.hasPlacementWithFill()},_getEbayStockQuantityExceededError:function _getEbayStockQuantityExceededError(){if(!this._par.store.canManageStock()||this._par.isOrderFlowMode)return!1;if(!this._par.store.hasEnabledLimits())return!1;var e=(this._par.store.newProductLimits||{}).quantity||0,t=(this._par.existingVariants||[]).length,i=this._allSelectedVariantCount-t;return i>e&&{limit:e,used:i}},_isInvalidVariantCombination:function(){if(!this._colorPicker)return!1;if(!this._par.store.needsAllVariantCombinations())return!1;var e=this._colorPicker.getSelectedColorNames(),t=this._getDiscontinuedColorSelected(e);return Object.keys(t).length>0},_isVariantLimitExceeded:function(){if(this._par.isChangePrintfileMode)return!1;var e=this._par.existingVariants?this._par.existingVariants.length:0;return!!(this.variantLimit&&this._allSelectedVariantCount+e>this.variantLimit)},_colorizeClipartLayers:function(){this._templates.getLayersByType(j.a,this._placementSelector.getSelectedPlacementId()).forEach(this._onClipartColorChanged)},_onClipartColorChanged:function(e){var t=this;return kd(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,t.waitInitialRender();case 2:t._layerPicker&&t._layerPicker.updateLayer(e),t._templates.updateClipartLayer(e,t._layerPicker),t.setMockupControlsVisibility(),t.updateView(),t._clipartPicker&&t._clipartPicker.renderGroups(),T.o(T.f);case 8:case"end":return i.stop()}}),i)})))()},_onPlacementItemAdded:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._updateActivePlacement(e);var n=null;switch(!0){case t instanceof va.a:n=z.a.fromFileItem(t);break;case t instanceof qa.a:n=j.a.fromClipartItem(t),Object(Q.c)()&&Object(_e.b)(n);break;case t instanceof za.a:return void this._addQuickDesignById(t.id);case t instanceof ko:(n=Ze.a.fromLicensedAssetItem(t)).licensedAssetItem.licensedAssetId=i;break;case t instanceof ed.b:n=Xe.a.fromObject(t);break;default:console.error("Invalid item type:",t)}if(!this._isProductReloadRequired(e.id,n)||n instanceof Ze.a)if(this.shouldAllowFileColorChanger()){this._showLoader(this.node);var r=this._embroideryHelper.getEmbrTypeFromDigitizedItem(t);r&&(n.embroideryType=r),this._embroideryHelper.quantizeLayer(e,n)}else{this._templates.addLayerToPlacementTemplates(e.id,n,!1);var a=this.getGeneratorVariantByPlacementId(e.id);this._templates.silentlySetActiveLayer(null),this._templates.setActiveLayerFromTemplate(a.placementId,a.templateId),this._afterLayerAddedAndLoaded()}else this._reloadProductAfterPlacementFileAdded(e,t)},_onLayerColorsChanged:function(e,t,i,n,r){if(t instanceof z.a){var a=this._templates.getFreshLayer(t);a.overrideColors=t.overrideColors,this._embroideryHelper.recolorizeImageLayer(a,e,i,n,r)}var o;t.isTextLayer()&&(t.color instanceof de.a||this._embroideryHelper.updateSelectedEmbroideryPaletteColors(t),t instanceof U.a?this._textPicker.render():t instanceof V.a&&null!==(o=Object(Q.a)())&&void 0!==o&&o.isEmbroidery()&&this._textboxPicker.render());T.o(T.f)},_onZoomChanged:function(e){var t=this._templates.getUserTemplate(this.getSelectedPlacementId(),this._getSelectedVariant().templateId);e?(t.layers.forEach(function(e){e.overrideImagePulse&&(e.overrideImagePulse=null,this._templates.getChangeListener().notifyTemplatePositionsChanged([t],e))}.bind(this)),this._embroideryHelper.lastZoomedInEmbroideryTemplate=t):t.layers.forEach(function(e){this._scheduleEmbroideryPreviewUpdate(this.getSelectedPlacementId(),e)}.bind(this))},_onPreviewChanged:function(e,t,i,n,r){var a=this;if(!this._unsubscribeTemplateEventsIfNeeded()){var o=r?me.t:n?me.u:"";if(Or.a.getPreviewString(t.getKey()+o)!==e){var s,l=0,c=0,u=this._templates.getTemplatesByPlacement(t.placementId),d=this.getSelectedGeneratorVariants(!1,!0).generatorVariants;for(var h in u)if(t.isRelated(u[h]))o!==me.t&&Or.a.setPreviewString(u[h].getKey()+me.t,null),Or.a.setPreviewString(u[h].getKey()+o,e);else for(var p in d){var f=d[p];if(f.templateId===u[h].templateId){var g={fill:this._placementOptions.getPlacementFill(u[h].placementId)};l+=1,Or.a.setPreviewStringFromTemplate(u[h],f.mockupPosition,g,(function(){(c+=1)>=l&&a._variantArea&&a._variantArea.renderMockupPreviewStrings(a._lifelikeVariants)}),o)}}if(this._save3dViewCanvasImagesIfNeeded(t,o),this._variantArea&&l<1&&this._variantArea.renderMockupPreviewStrings(this._lifelikeVariants),this._activeDesignerTabId===Ad.TAB_3D)null===(s=this._live3dView)||void 0===s||s.scheduleDesignReload()}}},_onLifelikeChanged:function(e,t,i){this._lifelikeVariants[e.placementId]=i||[]},_updateActivePlacement:function(e){this._templates.setActiveLayer(null),this._placementSelector.setSelectedPlacement(e),this._par.placementDependentOptions&&this._productOptionsPicker.setSelectedPlacementId(e.id)},_isProductReloadRequired:function(e,t){if(this._generatorParams.availableOrientations&&this._generatorParams.availableOrientations.length)return!0;if(!(t instanceof z.a))return!1;if(this._hasTemplateTypeChanged()&&this._isAdvancedTemplateAvailable())return!0;if(this._savePlacementOptionsLocaly(),this._generatorParams.layerMatchesAdvancedTemplate(e,t))return!0;var i=this.getGeneratorVariantByPlacementId(e,!1);return i&&i.role===Na.a.ROLE_ADVANCED_TEMPLATE},_savePlacementOptionsLocaly:function(){this._placementOptions&&(this._placementOptionsRawStorage=this._placementOptions.getData())},_reloadProductAfterPlacementFileAdded:function(e,t){var i,n=new Fr.a;t instanceof va.a?n.addPlacementFileLayer(e.id,t):t instanceof qa.a?n.addPlacementClipartLayer(e.id,t,null):t instanceof ko&&n.addPlacementLicensedAssetLayer(e.id,t);var r=this._orientation;!r&&this._generatorParams.availableOrientations.length>1&&this._templates.hasLayers()&&(r=this._templates.getOrientation()),this._savePlacementOptionsLocaly();var a=Object(Q.a)();this.generatorRepository.loadGeneratorProduct({storeId:this._par.store.storeId,isMockupGeneratorMode:this._par.isMockupGeneratorMode,isProductPushMode:this._par.isProductPushMode,productId:null==a?void 0:a.productId,designerState:n,excludedPlacements:this.excludedPlacements,callback:this._onNewFileAddedAndLoaded.bind(this,e),technique:this._technique,forceOrientation:r,forceTemplateType:this._getForcedTemplateType(a),forceRequest:!0,currency:(null==a||null===(i=a.priceRange)||void 0===i?void 0:i.currency)||null})},_afterLayerAddedAndLoaded:function(){this._onFilesChanged(),this._renderMockupVariantArea(),this._renderMockupMainArea()},_onNewFileAddedAndLoaded:function(e,t){var i;this._generatorParams=t;var n=null!==(i=null==t?void 0:t.placementsWithOnlyBackgroundColor)&&void 0!==i?i:[];Object(Q.f)(n),this._placementOptions=this._generatorParams.placementOptions,this._templates.copyLayersFromTemplates(t.calculatedPositions);var r=this.getGeneratorVariantByPlacementId();r&&(this._templates.silentlySetActiveLayer(null),this._templates.setActiveLayerFromTemplate(r.placementId,r.templateId,this)),this._afterLayerAddedAndLoaded()},_onFilesChanged:function(){this._productOptionsPicker&&(this._productOptionsPicker.setFileTypesWithFiles(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(z.a)),this._renderProductOptions(),this._renderFooter(),this._par.onPickerChanged&&this._par.onPickerChanged(),this._placementOptionsRawStorage&&this._updateDesignFillPicker())},_onResize:function(e){this.previewMockupVariant&&this.node.clientWidth&&(w.a.addClassName(this._nodeMainMockupArea,"loading"),setTimeout(this._renderMockupMainArea,e||300))},resizeMockupArea:function(){this._onResize(100)},_onLayerRemoved:function(e,t){this._par.onFileRemoved&&e.length&&this._par.onFileRemoved(t.fileItem.fileId,e[0].placementId);var i,n=Id(e);try{for(n.s();!(i=n.n()).done;){var r,a=i.value;null!=a&&null!==(r=a.layers)&&void 0!==r&&r.length||(this._update3dStatus(Rr.STATUS_RELOAD_PRINTFILE),Rr.savePlacementImage(a.placementId,null),this._activeDesignerTabId===Ad.TAB_3D&&this._show3DPreview())}}catch(e){n.e(e)}finally{n.f()}this._onFilesChanged(),this.shouldAllowFileColorChanger()&&(this._embroideryHelper.manageEmbroiderySelectedColorsOnLayerRemove(t),this._recalcFirstLayerWith3dEmbroidery(),this._recalcEmbroideryPriceOptionsValue()),this._templates.removeFeatureDesignCopied(this.getSelectedPlacementId())},_onLayerAdded:function(e){e.length<1||(m.a.trackAddFirstLayer(this._par.isModalDesigner,e,this._par),this._tryApplyingEmbroideryColorization(),this._mockup&&this._mockup.isMirroredChecked()&&this._templates.addMirroredLayersForTemplates(),this.shouldAllowFileColorChanger()&&(this._manageEmbroiderySelectedColorsOnLayersAdded(e),this._recalcEmbroideryPriceOptionsValue()))},validateAddingLayer:function(e,t){if(e===z.a.TYPE&&(e=new z.a),t||(t=1),this._layerPicker&&e instanceof z.a){var i=this._templates.getTemplateByLayer(e);return this._templates.getLayerCountByType(z.a,this._placementSelector.getSelectedPlacementId(),i)+t<=this._layerPicker.fileCountLimit}if(this._layerPicker&&e.isLicensedAssetLayer())return this._templates.getLayerCountByType(Ze.a,this._placementSelector.getSelectedPlacementId())+t<=this._layerPicker.licensedAssetCountLimit;if(this._layerPicker&&e.isTextLayer()){var n=cl.a.getLayerLimit(this.getSelectedPlacementTechnique(),te.a.LAYER_LIMIT_TYPE_TEXT);if(n)return this._templates.getLayerCountByType(U.a,this._placementSelector.getSelectedPlacementId())+this._templates.getLayerCountByType(V.a,this._placementSelector.getSelectedPlacementId())+t<=n}return!0},_renderLayerPicker:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i,n,r,a,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.arePickersVisible){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e._renderLayerPickerChooser();case 4:if(e._layerPickerChooser.detach(),w.a.clearNode(e._nodeLayerPicker),(i=e._generatorParams.availablePlacements)&&!(i.length<1)){t.next=9;break}return t.abrupt("return");case 9:n=e.getSelectedPlacementId()||i.slice().shift().id,Object(Ta.b)(n),r=Object(Q.a)(),a=null!=r&&r.isEmbroidery()?"EMBROIDERY":null==r?void 0:r.fileTagGroup,(o=new et).placements=i,o.activePlacementId=n,o.templates=e._templates,o.onPicked=e._onPlacementItemAdded,o.onColorChanged=e._onClipartColorChanged,o.conflictCalculator=e._conflictCalculator,o.fileCountLimit=e._getFileCountLimit(),o.licensedAssetCountLimit=e._getMaxLicensedAssetLayerCount(),o.onRequestRemoveBg=e.onRequestRemoveBg,o.enableRemoveBg=e.shouldEnableRemoveBg(),o.allowCustomizableLayers=e._shouldAllowCustomizablePush(),o.storeId=e._par.store.storeId,o.includeSamples=e._par.pickerConfig.isSampleOrder,o.searchTag=e._par.pickerConfig.getFileTag(n,a),o.onItemEdit=e._onLayerEdit,o.onCustomizableChanged=e.onTextLayerChanged,o.onDuplicate=e._onLayerDuplicate,o.getLayerPickerChooser=function(){return e._layerPickerChooser},o.nodeVideoTutorial=e._nodeVideoTutorial,e._isAdvancedTemplateAvailable()&&(o.nodeTemplateTypePicker=e._nodeAdvancedTemplatePicker),o.isAdvancedTemplate=e._isAdvancedTemplateLoaded.bind(e),o.isAllOver=e.isAllOverProduct.bind(e),o.hasAtLeastOneDesignFill=e.hasAtLeastOneDesignFill.bind(e),o.validateAddingLayer=e.validateAddingLayer.bind(e),o.getSelectedMockupVariant=e._getSelectedVariant.bind(e),(null==r?void 0:r.type)!==J.a.TYPE_CUT_SEW&&(o.productOptions=e._getProductOptions(),o.productOptionsValues=e.getProductOptionsValues(),o.onProductOptionsChanged=e._onChildComponentProductOptionsChanged.bind(e,!0),o.productOptionsPlacements=e._generatorParams.availablePlacements.slice()),o.showPatternPicker=e.shouldEnablePatternPicker(),o.placementSelector=e._placementSelector,o.onSelectQualityTag=e._onSelectQualityTag.bind(e),o.openQTagPopoverLayerId=e._openQTagPopoverLayerId,o.isMockupGeneratorMode=e._par.isMockupGeneratorMode,o.hideQualityNode=!Object(je.g)(),o.showSizesInPx=1===e._templates.getRequiredDpi(),o.waitInitialDesignerRender=e.waitInitialRender.bind(e),(Object(je.f)()||null!=r&&r.isStickerSheet())&&(e._renderDesignFillPicker(),o.designFillColorPicker=e._nodeDesignFillPicker),e._layerPicker=new tt.a(o).append(e._nodeLayerPicker),e._renderDesigningTools().then((function(){var t=w.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")?e._nodeLayerPicker.lastChild:null;$e.m.includes(Object(Qe.a)())&&(e._layerPicker.hideAllExceptVuePicker(),t&&w.a.addClassName(t,"pf-d-none"))})),e._renderFillWarning();case 52:case"end":return t.stop()}}),t)})))()},_onSelectQualityTag:function(e){this._openQTagPopoverLayerId=e},_onLayerEdit:function(e,t,i){e=e.isTextLayer()?this._templates.getLayerById(e.uniqueId):e,t.isTextLayer()?this.shouldAllowTextboxLayer()?(e instanceof U.a?(i&&i.stopPropagation(),e=this._convertTextLayerToTextboxLayer(e)):this._templates.silentlySetActiveLayer(e),this._textboxPicker.editTextboxLayer(e),this.showPickerTab(Ad.TAB_TEXTBOX)):(this._textPicker.editTextLayer(e),this._templates.silentlySetActiveLayer(e),this.showPickerTab(Ad.TAB_TEXT)):(t.isImageLayer()||t.isClipartLayer()||t.isLicensedAssetLayer)&&this._editImageLayer(e)},_convertTextLayerToTextboxLayer:function(e){var t=this._templates.getTemplateByLayer(e),i=this._layerPicker.getLayerIndexInPicker(t.placementId,e.uniqueId,!0),n=new V.a.fromTextLayer(e);return pe.a.calculateTextboxPositions(n,!0),this._templates.removeLayer(t,e,!1,!0),this._templates.addLayerToPlacementTemplates(this.getSelectedPlacementId(),n,!0,!0),this._templates.silentlySetActiveLayer(n),this._templates.reorderLayer(n,i),this._isTextLayerConverted=!0,n},getProductOptionsValues:function(e,t){var i=this._validateEmbroideryTypeForText(this._productOptionsPicker.getValues());return!e&&y.a.isEmptyObject(i)&&(i=this._getDefaultPickerValue(n.a.TYPE_PRODUCT_OPTIONS)),t&&w.a.O2O(i,this._getTextUsedColors()),i},_validateEmbroideryTypeForText:function(e){var t=Dr.a.NAME_EMBROIDERY_TYPE;return this._placementSelector.getSelectedPlacementId()!==Z.a.TYPE_EMBROIDERY_FRONT||this._isEmbroideryWithText()&&e.hasOwnProperty(t)&&"flat"!==e[t]&&(e[t]="flat"),e},_getTextUsedColors:function(){var e={},t=this._templates.getPlacementIdsHavingFiles();for(var i in t){var n=t[i];e[Dr.a.getTextThreadName(n)]=this._templates.getUsedTextColors(n)}return e},_renderMockupPicker:function(){if(this._par.arePickersVisible&&!this._mockupPicker){var e=new ol;e.onBack=this.showDesignTab,e.onPicked=this._onPickerItemPicked,this._mockupPicker=new nl(e),this._mockupPicker.append(this._nodeMockupPicker)}},_onPickerItemPicked:function(e){this._onPlacementItemAdded(this._placementSelector.getSelectedPlacement(),e)},_renderClipartPicker:function(){if(this._par.arePickersVisible){w.a.clearNode(this._nodeClipartPicker);var e=null;this._dropZoneArea&&(e=this._dropZoneArea,this._dropZoneArea.setActivePlacement(this._placementSelector.getSelectedPlacement())),this._clipartPicker=new yn({onAddFileCallback:this._onPlacementItemAdded.bind(this,this._placementSelector.getSelectedPlacement()),onBackCallback:this.showDesignTab,selectedPlacementTechnique:this._getActiveTechnique(),fileDropZone:e}),this._clipartPicker.append(this._nodeClipartPicker)}},_renderQuickDesignPicker:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e._par.arePickersVisible){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.waitInitialRender();case 4:w.a.clearNode(e._nodeQuickDesignPicker),e._dropZoneArea&&e._dropZoneArea.setActivePlacement(e._placementSelector.getSelectedPlacement()),e._quickDesignPicker=new gu({onAddFileCallback:e._onPlacementItemAdded.bind(e,e._placementSelector.getSelectedPlacement()),onBackCallback:e.showDesignTab,selectedPlacementTechnique:e._getActiveTechnique(),fileDropZone:e._dropZoneArea}),e._quickDesignPicker.append(e._nodeQuickDesignPicker);case 8:case"end":return t.stop()}}),t)})))()},_renderLicensedAssetPicker:function(){var e,t;if(this._par.arePickersVisible){w.a.clearNode(this._nodeLicensedAssetPicker);var i=new Ao;i.onAddFileCallback=this._onPlacementItemAdded.bind(this,this._placementSelector.getSelectedPlacement()),i.onBackCallback=this.showDesignTab,i.selectedPlacementTechnique=this._getActiveTechnique(),i.storeId=this.storeId,i.currency=(null===(e=Object(Q.a)())||void 0===e||null===(t=e.priceRange)||void 0===t?void 0:t.currency)||Qo.a.CURRENCY_USD,this._dropZoneArea&&(i.fileDropZone=this._dropZoneArea,this._dropZoneArea.setActivePlacement(this._placementSelector.getSelectedPlacement())),this._licensedAssetPicker=new fs(i),this._licensedAssetPicker.append(this._nodeLicensedAssetPicker)}},_renderOrientationPicker:function(){this._par.arePickersVisible&&this._generatorParams.availableOrientations.length&&(w.a.clearNode(this._nodeOrientationPicker),this._orientationPicker=new jn(this._generatorParams.generatorVariants,this._generatorParams.availableOrientations,this._onOrientationChanged,this._orientation),this._orientationPicker.append(this._nodeOrientationPicker))},getOrientation:function(){return this._orientation||null},_onOrientationChanged:function(){this._orientation=this._orientationPicker.getValue(),this.requireMockupRegenerationAndShowDesigner(),this._reloadEverything()},_createProductOptionsPickerPar:function(){var e=new Ma.a;return e.optionItems=this._getProductOptions(),e.values=this._getDefaultPickerValue(n.a.TYPE_PRODUCT_OPTIONS),e.onChange=this.onProductOptionChanged,e},_renderProductOptions:function(){if(this._par.arePickersVisible||this._par.isCustomizingMode){if(w.a.clearNode(this._nodeProductOptions),!this._productOptionsPicker){var e=this._createProductOptionsPickerPar();this._productOptionsPicker=new s.a(e)}this._toggleTextboxPickerAvailability(),this._shouldProductOptionsBeHidden()||(this._productOptionsPicker.hasVisibleOptions()&&tag("hr").append(this._nodeProductOptions),this._productOptionsPicker.append(this._nodeProductOptions))}},_shouldProductOptionsBeHidden:function(){var e;return this._technique===J.a.TYPE_EMBROIDERY||(null===(e=Object(Q.a)())||void 0===e?void 0:e.type)!==J.a.TYPE_CUT_SEW&&(!this._productOptionsPicker.hasVisibleOptions()||this._par.isOrderFlowMode&&!this._templates.getPlacementIdsHavingFiles().length)},_renderAvailabilityWarning:function(){if(this._par.arePickersVisible&&((this._canRenderColorPicker()||this._canRenderSizePicker())&&(w.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)),!(!this.allColors||!this.allSizes||!this._selectedColors.length&&this.allColors[0]||!this._selectedSizes.length&&this.allSizes[0]||!this._canRenderOSSWarning()||this._par.isMockupGeneratorMode||this._par.productTemplateEditorState))){w.a.clearNode(this._nodeAvailabilityWarning);var e=Eo.a.UNAVAILABLE.DESC;this.allColors[0]?this.allSizes[0]||(e=Eo.a.UNAVAILABLE.DESC_COLOR_ONLY):e=Eo.a.UNAVAILABLE.DESC_SIZE_ONLY,tag("div","",[tag("hr"),tag("div","alert alert-danger text-center-padding-10",e)]).append(this._nodeAvailabilityWarning)}},_canRenderOSSWarning:function(){var e=this;return!!this.allVariants.find((function(t){var i,n=t.isTemporaryOutOfStock,r=t.color,a=t.size;return r===((null===(i=e._selectedColors[0])||void 0===i?void 0:i.color)||null)&&a===(e._selectedSizes[0]||null)&&n}))},_renderColorPicker:function(){var e,t=this;if(this._par.arePickersVisible&&(w.a.clearNode(this._nodeColorPicker),this._canRenderColorPicker())){this._selectedColors.length||(this._selectedColors=this._getDefaultPickerValue(n.a.TYPE_COLOR));var i=new Gn.a;i.values=this.allColors.slice(),i.selectedValues=this._selectedColors.slice(),i.selectedLimit=this._getMaxColorsLimit(),i.pickerTitle=null===(e=Object(Q.a)())||void 0===e?void 0:e.getColorPickerTitle(this._getMaxColorsLimit()),i.onChangedCallback=this._onColorsChanged,i.isPopoverEnabled=this._par.pickerConfig.colorConfig.isPopoverEnabled,i.canDeselectLast=!this._par.isOrderFlowMode&&!this._par.isChangePrintfileMode,i.getSelectedSizes=function(){return t._selectedSizes},this._colorPicker=new Hn(i).append(this._nodeColorPicker);var r=[],a=[];if(this._dsrSettingsApplied()){var o,s=_.reduce(this.allSizes,(function(e,i){return e[i]=t.discontinuedColors[i]||[],e}),{});r=(o=_).intersection.apply(o,wd(Object.values(s))),a=this._regionPicker?_.difference(this.allColors.map((function(e){return e.color})),this.getSelectedRegionVariants().map((function(e){return e.color}))):[]}this._colorPicker.setDiscontinuedColors(r).setDisabledRegionColors(a).setUnavailableColors([]).render()}},_canRenderColorPicker:function(){return this._par.arePickersVisible&&this.allColors&&this.allColors.length&&this.allColors.length>1},_renderFillWarning:function(){var e,t;w.a.clearNode(this._nodeDesignFillPickerWarning),Object(Q.d)(this.getSelectedPlacementId())&&(e=this._nodeDesignFillPickerWarning,t=dlang("generator","This product isn't reversible"),tag("div","alert alert-warning",t).append(e))},_renderDesignFillPicker:function(){var e,t=this;if((this._par.arePickersVisible||this._par.isCustomizingMode)&&this._nodeDesignFillPicker&&(w.a.clearNode(this._nodeDesignFillPicker),this._canHaveDesignFill())){this._placementOptionsRawStorage&&this._updateDesignFillPicker();var i=this.getDesignFill(),n=i?{type:i.designFillType,value:i.designFillValue,urls:i.designFillUrls||null,item:i.designFillItem||null}:null;if(null===(e=this._designFillPicker)||void 0===e?void 0:e.node.childNodes[0].hasChildNodes())this._designFillPicker.updateActiveColor(n);else{w.a.clearNode(this._nodeDesignFillPicker);var r=Object(je.f)(),a=new ze.b({activeValue:n,hasNoneColor:!r,showColorInHeader:!1,onActiveColorChanged:this._onDesignFillColorChanged,title:r?dlang("generator","Choose background"):Object(je.g)()?dlang("generator","Print area background"):dlang("generator","Area background"),hasNewBadge:!0,hasClearActiveColor:r&&this.hasDesignFill(),tabConfig:[{id:Ge.l,name:dlang("generator","Colors"),getElements:function(){return Object.values(t._getColors())}},{id:Ge.i}],hideGraphicDpiScale:!0,hasToScrollToDropdown:!0});r&&(a.tabConfig=[{id:Ge.i,type:Ge.j,name:dlang("generator","Texture"),loadElements:Cd.c,getElements:Cd.a},{id:Ge.l},{id:Ge.h}],a.hasHexColorInput=!0),this._designFillPicker=new ze.a(a).append(this._nodeDesignFillPicker)}if(this._checkIfBgColorApplyToAllCheckBoxIsNeeded()){var o=new Va.a;o.label=dlang("generator","Apply to all placements"),o.wrapperClass="control-options pf-pt-16",o.isChecked=this._placementOptions.isSameFillForAllPlacements(),o.onchange=this._onDesignFillApplyCheckboxChanged,this._designFillApplyCheckbox=new ja.a(o).append(this._nodeDesignFillPicker),this._manageCheckboxShowHide()}}},_canHaveDesignFill:function(){return this.isAllOverProduct(!0)||!Object(je.g)()},_checkIfBgColorApplyToAllCheckBoxIsNeeded:function(){var e;if((null===(e=this._generatorParams)||void 0===e?void 0:e.availablePlacements.length)<2)return!1;var t=this.getAvailablePlacements(),i=0;for(var n in t){var r=t[n];if(-1===Z.a.DESIGN_FILL_EXCEPTION_PLACEMENTS.indexOf(r.id)&&i++,i>1)return!0}},_manageCheckboxShowHide:function(){this._designFillApplyCheckbox&&(Z.a.DESIGN_FILL_EXCEPTION_PLACEMENTS.indexOf(this.getSelectedPlacementId())>-1?(this._designFillApplyCheckbox.setChecked(!1),this._designFillApplyCheckbox.hide()):(this._designFillApplyCheckbox.setChecked(this._placementOptions.isSameFillForAllPlacements()),this._designFillApplyCheckbox.show()))},hasDesignFill:function(e){return e=void 0!==e?e:this.getSelectedPlacementId(),!!this.getDesignFill(e)},hasAtLeastOneDesignFill:function(){var e;return null===(e=this._placementOptions)||void 0===e?void 0:e.hasPlacementWithFill()},_updateDesignFillPicker:function(){if(this.isAllOverProduct(!0)||!Object(je.g)()){this._placementOptionsRawStorage&&(this._placementOptions=Ka.a.fromArray(this._placementOptionsRawStorage),this._placementOptionsRawStorage=null);var e=this.getDesignFill(),t=(null==e?void 0:e.designFillType)||Z.a.DESIGN_FILL_TYPE_COLOR,i=(null==e?void 0:e.designFillValue)||null,n=(null==e?void 0:e.designFillItem)||null;this._designFillPicker.updateActiveColor({type:t,value:i,item:n})}},getDesignFill:function(e){return this._placementOptions?this._placementOptions.getPlacementFill(null!=e?e:this.getSelectedPlacementId()):null},setPlacementOptionsRawStorage:function(e){this._placementOptionsRawStorage=e},_getColors:function(){return Object(Ue.c)(this.isEmbroidery(),this.getSelectedPlacementId(),this.isAllOverProduct(),!0)},isAllOverProduct:function(e){var t=Object(Q.a)(),i=(null==t?void 0:t.isMug())||(null==t?void 0:t.isDrinkware())||(null==t?void 0:t.isPhoneCase())||(null==t?void 0:t.isPoster())||(null==t?void 0:t.isCanvas())||(null==t?void 0:t.isPostcard())||(null==t?void 0:t.isStickerSheet())&&this.getSelectedPlacementId()===Z.a.TYPE_BACKGROUND||(null==t?void 0:t.isFramedPoster());return e?this._templates.isCoverMode()||i:this._templates.isCoverMode()&&!i},_onDesignFillColorChanged:function(e){var t=e.type,i=e.value,n=e.urls,r=e.item;this._designFillApplyCheckbox&&this._designFillApplyCheckbox.isChecked()?this._placementOptions.setAllPlacementFill(t,i,n,r):this._placementOptions.setPlacementFill(this.getSelectedPlacementId(),t,i,n,r),this.designData.rawPlacementOptions=this._placementOptions.getData(),this.requireMockupRegeneration(),this.updateView(),this.observer.emitDesignFillChanged(this._placementOptions.hasPlacementWithFill()),this._templates.getChangeListener().notifyDesignFillChanged(),T.o(T.f)},_onDesignFillApplyCheckboxChanged:function(e){if(e.target.checked){var t=this.getDesignFill();this._placementOptions.setAllPlacementFill(null==t?void 0:t.designFillType,null==t?void 0:t.designFillValue,null==t?void 0:t.designFillUrls),this._onDesignFillColorChanged({type:null==t?void 0:t.designFillType,value:null==t?void 0:t.designFillValue,urls:null==t?void 0:t.designFillUrls})}},_getMaxColorsLimit:function(){return this._par.pickerConfig.colorConfig.maxValues?this._par.pickerConfig.colorConfig.maxValues:this._isVariantLimitExceeded()?this._selectedColors.length:this.allColors.length},_onColorsChanged:function(e,t){var i;if(this._popoverCloseTimeoutColor&&clearTimeout(this._popoverCloseTimeoutColor),this.observer.emitBeforeColorsChanged(e)){var n=this.allColors.map((function(e){return e.color}));e=e.filter((function(e){return n.includes(e.color)}));var r=[];for(var a in e)e[a].color?r.push(e[a].color):e[a].colors;var o=(null===(i=this._regionPicker)||void 0===i?void 0:i.getMatchingVariants())||null,s=Object(Q.a)(),l=null==s?void 0:s.productId;if(!this.lastSelectedColor&&this._selectedColors.length&&(this.lastSelectedColor=this._selectedColors[0].color),this._colorPicker.validateSelectedColors(this.regionData,r,o,this.allVariants.filter((function(e){return l===e.productId})),null==s?void 0:s.sizes,this._onColorPopoverClosed.bind(this))){this.requireMockupRegenerationAndShowDesigner();var c=this.lastSelectedColor;if((t=t||!1)||e.length!==this.allColors.length)if(this.lastSelectedColor=null,e.length>this._selectedColors.length){for(var u in e)if(!this.isColorSelected(e[u].color)){this.lastSelectedColor=e[u].color;break}}else e.length>0&&e.length<this._selectedColors.length&&this.isColorSelected(c,e)&&(this.lastSelectedColor=c);this._selectedColors=e,0===this._selectedColors.length&&(this._selectedColors.push([].concat(this.allColors).shift()),this._colorPicker.setColors(this._selectedColors).render(),this._colorPicker.updateErrorStatus()),!this.lastSelectedColor&&e[0]&&(this.lastSelectedColor=e[0].color),(this._par.isMockupGeneratorMode||this._par.isProductPushMode||this._isProductTemplateEditor())&&this._renderSizePicker(),this.updateView(),this.observer.emitAfterColorsChanged(e);var d=this._getSelectedMappings()[0],h=d.color,p=d.size;T.o(Nu.a.EVENT_VARIANT_COLOR_CHANGED,{color:h,size:p}),this._colorPicker.setColors(e).render(),w.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)}}},_onColorPopoverClosed:function(){var e=this;this._par.isOrderFlowMode&&(this._popoverCloseTimeoutColor=setTimeout((function(){e._colorPicker.setColors(e.allColors.filter((function(t){return k.a.isEqual(t.color,e.lastSelectedColor)}))).render()}),500))},isColorSelected:function(e,t){for(var i in t=t||this._selectedColors)if(k.a.isEqual(t[i].color,e))return!0;return!1},isSizeSelected:function(e,t){for(var i=0,n=(t=t||this._selectedSizes).length;i<n;i++)if(k.a.isEqual(t[i],e))return!0;return!1},getGeneratorVariantById:function(e,t){var i=this._getGeneratorVariants(t);if(!i.length)return null;for(var n=0,r=i.length;n<r;n++)if(i[n]&&i[n].generatorVariantId===e)return i[n];if(t)for(n=0,r=(i=this.getSelectedGeneratorVariants(!1,!0).generatorVariants).length;n<r;n++)if(i[n]&&i[n].generatorVariantId===e)return i[n];return PF.DEV&&console.log("Generator variant not found for id: "+e),null},_renderTechniquePicker:function(){var e;if(this._isTechniquePickerAvailable()&&this._par.isTechniquePickerEnabled){w.a.clearNode(this._nodeTechniquePicker);var t=new Za.a;t.techniques=this._getTechniques(),t.hasNewPlacement=this._generatorParams.hasNewPlacement,t.activeValue=this._getActiveTechnique(),t.callback=this._onTechniquePicked,t.isGenerator=!0,t.isMockupGenerator=this._par.isMockupGeneratorMode,t.useStrictRegionCheck=!this._dsrSettingsApplied(),t.isRegionalTechniqueOverrideAvailable=null===(e=this.regionData)||void 0===e?void 0:e.isRegionalTechniqueOverrideAvailable,this._regionPicker&&(t.regions=this._regionPicker.getSelectedRegions()),this._techniquePicker=(this._getTechniques().length>1?new a.a(t):tag("div")).append(this._nodeTechniquePicker),tag("hr").prepend(this._techniquePicker.node),this._techniquePicker.toggleChangeTechniquePopup(this._templates.hasLayers())}},_onTechniquePicked:function(e){var t;this._technique=e,Object(Q.g)(this._technique);var i=new Fr.a;this._labelSwitcher&&this._labelSwitcher.hide(),this._par.designerState&&(i.generatorDesignId=this._par.designerState.generatorDesignId),this._par.designerState=i,this._templates.setActiveLayer(null),this._templates.silentlyRemoveAllTemplates(),this._placementSelector.deselectPlacement(),this.requireMockupRegenerationAndShowDesigner(!0),Object(O.a)(null===(t=Object(Q.a)())||void 0===t?void 0:t.productId).rememberLastUsedTechnique(e),T.o(Nu.a.EVENT_PRODUCT_TECHNIQUE_CHANGED,e),this._renderTextboxPicker(),this.observer.emitMainTechniqueChanged(e),this._loadProduct(i,!0,!0,!0)},onAllImagesProcessed:function(){this._isProductTemplateDetailsEditor()||this._renderTechniquePicker(),this.updateView()},_getTechniques:function(){return this._generatorParams.availableTechniques?this._generatorParams.availableTechniques.map((function(e){return{type:e,label:J.a.LABELS[e]}})):[]},_getActiveTechnique:function(){if(this._technique)return this._technique;var e=Object(Q.a)(),t=this._templates.getTechnique()||(null==e?void 0:e.type);return Object(O.a)(null==e?void 0:e.productId).rememberLastUsedTechnique(),t},_isTechniquePickerAvailable:function(){return this._generatorParams&&this._generatorParams.availableTechniques&&this._generatorParams.availableTechniques.length>1},_renderRegionPicker:function(){if(this._par.arePickersVisible&&!this._par.isMockupGeneratorMode&&!this._isProductTemplateEditor()&&(w.a.clearNode(this._nodeRegionPicker),this.regionData)){var e=this.regionData.allowedSellingRegions||this._par.pickerConfig.activeRegion,t=Object(Q.a)(),i=t.availableTechniques||[];this._regionPicker=new To(new So({regionData:this.regionData,activeRegion:e,onChange:this._onRegionChanged.bind(this),productId:t.productId,shouldShowAvailabilityInfo:!t.isAdidas(),shouldLimitPickableRegionCount:!i.includes(J.a.TYPE_EMBROIDERY)})),this._dsrSettingsApplied()?tag("p","pf-ui-body",dlang("dashboard","Available product customization based on your selling region and preferences")).append(this._nodeRegionPicker):(this._regionPicker.node.append(this._nodeRegionPicker),this._isProductTemplateDetailsEditor()||tag("hr").prepend(this._regionPicker.node))}},_updatePickersByRegion:function(e,t){this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(e),this._dsrSettingsApplied()||this._setAllowedRegionColorsAndSizes(e);var i=this.allSizes,n=this.allColors,r=this._selectedColors.map((function(e){return e.color})).filter((function(e){return!n.map((function(e){return e.color})).some((function(t){return t===e}))})),a=this._selectedSizes.filter((function(e){return!i.some((function(t){return t===e}))}));for(var o in e){var s=e[o];if(this._selectedRegionAttributes[s]){for(var l in this._selectedRegionAttributes[s].sizes)-1===this._selectedSizes.indexOf(this._selectedRegionAttributes[s].sizes[l])&&this._selectedSizes.push(this._selectedRegionAttributes[s].sizes[l]);for(var c in n)for(var u in this._selectedRegionAttributes[s].colors)n[c].color===this._selectedRegionAttributes[s].colors[u]&&this._selectedColors.push(n[c])}}if(r){if(t.length)for(var d in t){var h=t[d];this._selectedRegionAttributes[h]={colors:r}}for(var p in this._selectedColors)for(var f in r)this._selectedColors[p].color===r[f]&&this._selectedColors.splice(p,1)}if(a){if(t.length)for(var g in t){var m=t[g];Object.assign(this._selectedRegionAttributes[m],{sizes:a})}for(var _ in a){var v=this._selectedSizes.indexOf(a[_]);v>-1&&this._selectedSizes.splice(v,1)}}0!==r.length&&0===this._selectedColors.length&&this._selectedColors.push(n[0]);var y,b=!1,P=Id(this._selectedColors);try{for(P.s();!(y=P.n()).done;){y.value.color===this.lastSelectedColor&&(b=!0)}}catch(e){P.e(e)}finally{P.f()}!b&&this._selectedColors.length>0&&(this.lastSelectedColor=this._selectedColors[0].color);var C,T=!1,w=Id(this._selectedSizes);try{for(w.s();!(C=w.n()).done;){C.value===this.lastSelectedSize&&(T=!0)}}catch(e){w.e(e)}finally{w.f()}!T&&this._selectedSizes.length>0&&(this.lastSelectedSize=this._selectedSizes[0]),this._renderColorPicker(),this._renderSizePicker(),this.updateView()},_onRegionChanged:function(e,t){var i;(new d.a).setActiveStockedInRegion(e,null===(i=Object(Q.a)())||void 0===i?void 0:i.productId),this.observer.emitRegionChanged(e)?this._updatePickersByRegion(e,t):this._techniquePicker&&this._techniquePicker.updateTechniqueAvailability(e)},_setAllowedRegionColorsAndSizes:function(e){var t,i=[],n=Id(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;i.push(this.regionData.variantsByRegion[r])}}catch(e){n.e(e)}finally{n.f()}var a,o,s=[].concat.apply([],i).filter((function(e,t,i){return i.indexOf(e)===t})).filter((function(e){return i.every((function(t){return t.indexOf(e)>-1}))})),l=this._generatorParams.variantMapping,c=[];for(a in l)for(o in s)l[a].variantId===s[o]&&c.push(l[a]);var u=[],d=[];for(a in c)u.push(c[a].size),d.push(c[a].color);var h=u.filter((function(e,t){return u.indexOf(e)===t})),p=d.filter((function(e,t){return d.indexOf(e)===t})),f=[],g=this._generatorParams.colors;for(a in p)for(o in g)p[a]===g[o].color&&f.push(g[o]);return this.allColors=f,this.allSizes=h,!0},_shouldRenderSizePicker:function(){return!!this._par.arePickersVisible&&(!this._isProductTemplateEditor()||(null===(e=Object(Q.a)())||void 0===e?void 0:e.canHaveSizePickerForProductTemplates()));var e},_canRenderSizePicker:function(e){var t,i=Object(Q.a)();if(!(i&&(e||this._generatorParams&&this._shouldRenderSizePicker())))return!1;this._recalcAvailableSizes();var n=!this.allAvailableSizes.length&&(null==i?void 0:i.isEmbroidery())&&!i.isEmbroiderySample();if(!e&&(!n||this._par.isProductPushMode)&&(null===(t=this.allAvailableSizes)||void 0===t||!t.length||!this._getAvailableSizesCount()))return!1;if(!e&&1===this._getAvailableSizesCount()&&!this._par.pickerConfig.sizeConfig.maxValues)return!1;var r=[J.a.TYPE_T_SHIRT,J.a.TYPE_CUT_SEW,J.a.TYPE_SUBLIMATION,J.a.TYPE_SHOES,J.a.TYPE_JEWELRY,J.a.TYPE_EMBROIDERY];return!!(!this._par.isMockupGeneratorMode||-1===r.indexOf(i.type)||i.isPillow()||i.isLaptopSleeve()||i.isTowel()||i.isBeanBagCase())},_renderSizePicker:function(){var e;if(this._canRenderSizePicker()){w.a.clearNode(this._nodeSizePicker),1===this.allAvailableSizes.length&&(this._selectedSizes.length||(this._selectedSizes=this.allAvailableSizes.slice()));var t=this._par.existingVariants&&this._par.store.isEtsy(),i=this.designData.product.isDtgShirt();t&&i&&this._setExistingVariantSizes(),this._selectedSizes.length||(this._selectedSizes=this._getDefaultPickerValue(n.a.TYPE_SIZE));var r=new Gn.a;if(r.values=this.allAvailableSizes,r.allValues=this.allSizes,r.disabledSizes=this._disabledSizes,r.selectedValues=this._selectedSizes,r.selectedLimit=this._getMaxSizeLimit(),r.onChangedCallback=this._onSizesChanged,r.designData=this.designData,r.isPopoverEnabled=this._par.pickerConfig.sizeConfig.isPopoverEnabled,r.productId=null===(e=Object(Q.a)())||void 0===e?void 0:e.productId,r.isSizeGuideVisible=this._par.isOrderFlowMode||this._par.isChangePrintfileMode,this._par.isOrderFlowMode&&(r.translatedSizes=this.translatedSizes),this._sizePicker=new Vn.a(r).append(this._nodeSizePicker),this._dsrSettingsApplied()&&(this._sizePicker.setSelectedRegionDisabledValues(this.getSelectedRegionVariants(),this.allVariants,"size",this.regionData),this._sizePicker.setInactiveSizes(this._sizePicker.getSelectedRegionDisabledValues("size"))),t&&i)this._disableSizePicker();else if(this._par.onDisabledSizesWarn){var a=this._par.onDisabledSizesWarn(this._disabledSizes);a&&new ce.a(a,"warning pf-d-flex").append(this._nodeSizePicker)}this._canRenderColorPicker()&&tag("hr").prepend(this._sizePicker.node)}},_isAddVariantsFlow:function(){return!(!this._par.existingVariants||!this._par.existingVariants.length)},_renderAdvancedTemplatePicker:function(){if(this._par.arePickersVisible&&this._isAdvancedTemplateAvailable()&&this._nodeAdvancedTemplatePicker){var e=[h.a.TEMPLATE_TYPE_SIMPLE,h.a.TEMPLATE_TYPE_ADVANCED];this._updateTemplateType(),w.a.clearNode(this._nodeAdvancedTemplatePicker),this._advancedTemplatePicker=new Yn(e,this._onTemplateTypeChanged.bind(this),this.getTemplateTypeLoaded.bind(this),this._templateType),this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()||this.hasDesignFill()),this._advancedTemplatePicker.append(this._nodeAdvancedTemplatePicker)}},_onTemplateTypeChanged:function(){var e,t;this._templateType=this._advancedTemplatePicker.getValue(),this._templates.silentlyRemoveAllLayers(),this._onProductLoadedShowDesignTab=!0,this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()||this.hasDesignFill()),null===(e=(t=this._designFillPicker).setColor)||void 0===e||e.call(t,null),this._reloadEverything()},_isAdvancedTemplateAvailable:function(){return!(!this._generatorParams||!this._generatorParams.variantMapping)&&this._getSelectedMappings().some(function(e){if(e.advancedTemplateSize){var t=Object.keys(e.advancedTemplateSize);for(var i in t)if(t[i]!==Z.a.TYPE_LABEL_INSIDE&&t[i]===this.getSelectedPlacementId())return!0}}.bind(this))},_hasTemplateTypeChanged:function(){return this._templateType!==this.getTemplateTypeLoaded()},_getAvailableSizesCount:function(){return this.allAvailableSizes.length},_recalcAvailableSizes:function(){var e=this;return this.allAvailableSizes=this._getSelectedMappings(!0).map((function(e){return e.size})).filter((function(t,i,n){return t&&n.indexOf(t)===i&&e.allSizes.indexOf(t)>-1})).sort(L.a.sizeSortingCallback),(this._par.isMockupGeneratorMode||this._par.isProductPushMode)&&this._recalcSelectedSizes(),this.allAvailableSizes},_recalcSelectedSizes:function(){var e=this;this._sizePicker&&this._sizePicker.isSelectAllChecked()?this._selectedSizes=this.allAvailableSizes.slice():this._selectedSizes=this._selectedSizes.filter((function(t){return e.allAvailableSizes.includes(t)})),this._selectedSizes.length||(this._selectedSizes=this.allAvailableSizes.slice(0,this._getMaxSizeLimit()))},recalculatePositionsForTemplateEditor:function(){var e,t,i=this,n=null===(e=this._par.productTemplateEditorState)||void 0===e||null===(t=e.sourceProductTemplate)||void 0===t?void 0:t.sizes;if(n&&this._shouldUseFullTemplateEditor()&&!this._templateEditorPositionsCalculated&&(this._isCreatingProductFromTemplate()||this._isProductTemplateEditor())){var r={};if(!this.generatorVariants){var a=this.getSelectedGeneratorVariants();this.generatorVariants=a.generatorVariants,this._selectedVariantCount=a.variantCount,this._allSelectedVariantCount=a.allVariantCount}this.generatorVariants.filter((function(e){return n.includes(e.size)})).forEach((function(e){if(void 0===r[e.placementId]){r[e.placementId]=e;var t=n.slice(),a=Object(Au.c)(i._templates,e);i._generatorParams.getGeneratorVariantsArray().forEach((function(n){if(!t.includes(n.size)&&e.placementId===n.placementId){t.push(n.size);var r=Object(Au.c)(i._templates,n);i._templates.recalculateTemplateLayersBySource(r,a)}}))}})),this._templateEditorPositionsCalculated=!0}},_shouldUseFullTemplateEditor:function(){if(!Object(Q.c)())return!1;var e=Object(Q.a)();return e.isPoster()||e.isCanvas()||e.isMug()||e.isSticker()||e.isPillow()||e.isPhoneCase()||e.isLaptopSleeve()||e.isTowel()},_getMaxSizeLimit:function(){return this._par.pickerConfig.sizeConfig.maxValues||this.allAvailableSizes.length},_setExistingVariantSizes:function(){this._selectedSizes=this._par.existingVariants.map((function(e){return(new d.a).getCachedVariantById(e.variantId).size})).filter((function(e,t,i){return i.indexOf(e)===t}))},_disableSizePicker:function(){var e=tag("span",{className:"glyphicon glyphicon-info-sign size-picker-tooltip",attr:{title:dlang("generator","New color variants will be added in the existing size range.")}}).append(this._sizePicker.sizeNodeTitle);y()(e).tooltip(),w.a.addClassName(this._sizePicker.sizeCheckboxSelector,"disabled")},_onSizesChanged:function(e){var t,i=this;if(this._popoverCloseTimeoutSize&&clearTimeout(this._popoverCloseTimeoutSize),this.observer.emitSizesChanged(e)&&(!this._sizePicker||!e.some((function(e){return i._sizePicker.isSizeDisabled(e)})))){var n=this._regionPicker?this._regionPicker.getMatchingVariants():null,r=this.regionData;!this.lastSelectedSize&&this._selectedSizes.length&&(this.lastSelectedSize=this._selectedSizes[0]);var a=null===(t=Object(Q.a)())||void 0===t?void 0:t.productId;if(!this._sizePicker||this._sizePicker.validateSelectedSize(r,e.join(" "),n,this.allVariants.filter((function(e){return a===e.productId})),(function(){i._popoverCloseTimeoutSize=setTimeout((function(){i._sizePicker.setSizes(i.allSizes.filter((function(e){return k.a.isEqual(e,i.lastSelectedSize)}))).render()}),500)}))){if(this.requireMockupRegenerationAndShowDesigner(),this.lastSelectedSize=null,e.length>this._selectedSizes.length)for(var o in e)if(!this.isSizeSelected(e[o])){this.lastSelectedSize=e[o];break}if(this._par.store.isWix()&&this._isAddVariantsFlow()&&(this.designData.shouldShowWixMockupWarning=e!==this._initialSizes),this._selectedSizes=e,0===this._selectedSizes.length){var s=this.allAvailableSizes.find((function(e){return!i._sizePicker.isSizeDisabled(e)}));s&&(this._selectedSizes.push(s),this._sizePicker.setSizes(this._selectedSizes).render())}!this.lastSelectedSize&&e[0]&&(this.lastSelectedSize=e[0]),0===e.length&&(this._renderDiscontinuedWarning(),this._renderUnavailableSizeColorWarning()),this.recalculatePositionsForTemplateEditor(),this.updateView(),this.observer.emitAfterSizesChanged(e),T.o(T.f),w.a.clearNode(this._nodeAvailabilityWarning),tag("div","",[tag("hr")]).append(this._nodeAvailabilityWarning)}}},_renderAvailability:function(){var e=this._par.isMockupGeneratorMode||this._par.isChangePrintfileMode||this._par.isCustomizingMode||!Object(je.g)(),t=Object(Q.a)();if(null!=t&&t.shouldShowAvailabilityTab()&&!e){var i=(null==t?void 0:t.getProductPageUrl())+"#availability";Object(A.a)(this.node)||T.p("showProductAvailability",null),T.q("showProductAvailability",(function(){window.open(i,"_blank").focus()}),this)}},_renderLayerPickerChooser:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i,n,r,a,o,s,l,c,u,d,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.waitInitialRender();case 2:if(e._nodeLayerPickerChooser){t.next=4;break}return t.abrupt("return");case 4:a=Object(Q.d)(e.getSelectedPlacementId()),o=!e._isLicensedAssetPickerDisabled()&&Object(je.g)()&&!a,s=null===(i=e._layerPickerChooser)||void 0===i?void 0:i.node.childNodes[0].hasChildNodes(),l=Object(je.c)(Pi.j),c=l?Ad.TAB_TOOLBAR:e.shouldAllowTextboxLayer()?Ad.TAB_TEXTBOX:Ad.TAB_TEXT,s?e._nodeLayerPickerChooser.contains(e._layerPickerChooser.node)||(w.a.clearNode(e._nodeLayerPickerChooser),tag("div","pf-mb-24",[tag("hr"),e._layerPickerChooser]).append(e._nodeLayerPickerChooser)):(w.a.clearNode(e._nodeLayerPickerChooser),u=new Ju({onFilePickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Choose file",e._par),e.showDesignTab(),tt.a.checkForWarnings(!1,e.getLayerPicker().requestFilePicking.bind(e,e._placementSelector.getSelectedPlacement()))},onTextPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add text",e._par),e.showPickerTab(c),l?(e._designerToolbarService.setVirtualTextLayer(e._technique),e._designerToolbarService.setActiveToolbarView(bd.b.TEXT)):(e._templates.setActiveLayer(null),e.shouldAllowTextboxLayer()?e._textboxPicker.resetText(!0):e._textPicker.resetText())},onClipartPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add clipart",e._par),e.showPickerTab(Ad.TAB_CLIPART)},onPromoMockupPickerChosen:e.showPickerTab.bind(e,Ad.TAB_MOCKUPS),onQuickDesignsPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Add quick design",e._par),e.showPickerTab(Ad.TAB_QUICKDESIGN)},onLicensedAssetPickerChosen:function(){var t;m.a.trackDesignTabsInProductOrDesignTab(e._par.isModalDesigner,(null===(t=e._pickerTabs.getActiveTab())||void 0===t?void 0:t.customId)||"design","Premium images",e._par),e.showPickerTab(Ad.TAB_LICENSEDASSET)},onBackToDefaultView:function(){e.showDesignTab(),w.a.removeClassName(e._nodeDesignFillPickerWarning,"pf-d-none"),w.a.removeClassName(e._nodeDesignFillPicker,"pf-d-none"),w.a.removeClassName(e._nodeAddidasBannerDesignTab,"pf-d-none"),w.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&w.a.removeClassName(e._nodeLayerPicker.lastChild,"pf-d-none"),e._layerPicker.render()},onVuePicked:function(){w.a.addClassName(e._nodeDesignFillPickerWarning,"pf-d-none"),w.a.addClassName(e._nodeDesignFillPicker,"pf-d-none"),w.a.addClassName(e._nodeAddidasBannerDesignTab,"pf-d-none"),w.a.hasClassName(e._nodeLayerPicker.lastChild,"design-tools-mke")&&w.a.addClassName(e._nodeLayerPicker.lastChild,"pf-d-none"),e._layerPicker.hideAllExceptVuePicker()},onPickedLayer:e._onPickerItemPicked,onUpdateCustomMockupLayer:aa.a.bind(e,{templates:e._templates}),designer:e}),tag("div","pf-mb-24",[tag("hr"),e._layerPickerChooser=new Xu(u)]).append(e._nodeLayerPickerChooser)),e._updateChooserDisablingOptions(),Object(Qe.e)({key:$e.b.IS_PROMO_MOCKUP_PICKER_AVAILABLE,value:Object(je.h)()}),Object(Qe.e)({key:$e.b.IS_QUICK_DESIGNS_PICKER_AVAILABLE,value:!a&&(null===(n=e._generatorParams)||void 0===n?void 0:n.areQuickDesignsAvailable)}),Object(Qe.e)({key:$e.b.IS_LICENSED_ASSET_PICKER_AVAILABLE,value:o}),Object(Qe.e)({key:$e.b.IS_TITLE_HIDDEN,value:!1}),Object(Qe.e)({key:$e.b.IS_MOCKUP_MAKER_MODE,value:Object(je.f)()}),$e.m.includes(Object(Qe.a)())||Object(Qe.d)(),d=e._conflictCalculator.getConflictingPlacementTitles(e.getSelectedPlacementId()),h=null===(r=e._placementLimiter)||void 0===r?void 0:r.isLimitReached(),e._templates.hasLayersForPlacement(e.getSelectedPlacementId())||0!==d.length||h?w.a.addClassName(e._nodeLayerPickerChooser,"hidden"):w.a.removeClassName(e._nodeLayerPickerChooser,"hidden");case 20:case"end":return t.stop()}}),t)})))()},_updateChooserDisablingOptions:function(){Object(Qe.f)({key:$e.k.FILES_UNAVAILABLE,value:"",shouldUnset:!this.isFilePickerDisabled()}),Object(Qe.f)({key:$e.k.TEXTBOX_UNAVAILABLE,value:"",shouldUnset:!Object(Q.d)(this.getSelectedPlacementId())}),Object(Qe.f)({key:$e.k.CLIPARTS_UNAVAILABLE,value:"",shouldUnset:!this._isClipartPickerDisabled()}),this._toggleTextPickerAvailability(),this._toggleTextboxPickerAvailability(),this._validateTextLayerCount()},_renderAdidasBannerTabs:function(){w.a.clearNode(this._nodeAddidasBannerProductTab),this._getAdidasBanner().append(this._nodeAddidasBannerProductTab),w.a.clearNode(this._nodeAddidasBannerDesignTab),this._getAdidasBanner().append(this._nodeAddidasBannerDesignTab)},_getAdidasBanner:function(){var e=new _i.a;return e.id="adidas-banner",e.type="gray",e.icon="/static/images/icons/adidas.svg",e.content=dlang("generator","Follow the {linkStart}adidasÂ®â acceptable content guidelines{linkEnd} when customizing this product").replace("{linkStart}",'<a href="https://help.printful.com/hc/en-us/articles/360015873279-What-designs-can-I-use-to-customize-adidas-products" target="_blank" rel="noopener noreferrer">').replace("{linkEnd}","</a>"),new mi.a(e)},isFilePickerDisabled:function(){return this._isEngraving()||this._isLargeEmbroidery()&&!this._canLargeEmbroideryAccessFiles||Object(Q.d)(this.getSelectedPlacementId())},isTextPickerDisabled:function(){return Object(Q.d)(this.getSelectedPlacementId())},_isClipartPickerDisabled:function(){var e=this._placementSelector.getSelectedPlacement();return e&&(e.technique===J.a.TECHNIQUE_EMBROIDERY||Object(Q.d)(e.id))},_isLicensedAssetPickerDisabled:function(){return this.getSelectedPlacementTechnique()===J.a.TECHNIQUE_EMBROIDERY||this._isEngraving()},_isEmbroideryWithText:function(){return this.getSelectedPlacementTechnique()===J.a.TECHNIQUE_EMBROIDERY&&this._templates.hasTextLayers(this._placementSelector.getSelectedPlacementId())},_isLargeEmbroidery:function(){return this.getSelectedPlacementId()===Z.a.TYPE_EMBROIDERY_LARGE_CENTER},_isEngraving:function(){return this._technique===J.a.TECHNIQUE_ENGRAVING},onProductOptionChanged:function(e){var t=this;return kd(regeneratorRuntime.mark((function i(){var n,r,a;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(t.observer.emitProductOptionsChanged()){i.next=2;break}return i.abrupt("return");case 2:return n=e.getOption(),t.shouldAllowFileColorChanger()||(n.isEmbroideryType()||n.isEmbroideryFrontColors()||n.isEmbroideryFront3dColors()?r=Z.a.TYPE_EMBROIDERY_FRONT:n.isEmbroideryLeftColors()?r=Z.a.TYPE_EMBROIDERY_LEFT:n.isEmbroideryRightColors()?r=Z.a.TYPE_EMBROIDERY_RIGHT:n.isEmbroideryBackColors()?r=Z.a.TYPE_EMBROIDERY_BACK:n.isEmbroideryLeftChestColors()?r=Z.a.TYPE_EMBROIDERY_CHEST_LEFT:n.isEmbroideryCenterChestColors()?r=Z.a.TYPE_EMBROIDERY_CHEST_CENTER:n.isEmbroideryLargeCenterColors()?r=Z.a.TYPE_EMBROIDERY_LARGE_CENTER:n.isEmbroideryLeftCornerColors()?r=Z.a.TYPE_EMBROIDERY_CORNER_LEFT:n.isEmbroideryRightCornerColors()?r=Z.a.TYPE_EMBROIDERY_CORNER_RIGHT:n.isEmbroideryLeftInsideColors()?r=Z.a.TYPE_EMBROIDERY_INSIDE_LEFT:n.isEmbroideryRightInsideColors()?r=Z.a.TYPE_EMBROIDERY_INSIDE_RIGHT:n.isEmbroideryLeftOutsideColors()?r=Z.a.TYPE_EMBROIDERY_OUTSIDE_LEFT:n.isEmbroideryRightOutsideColors()?r=Z.a.TYPE_EMBROIDERY_OUTSIDE_RIGHT:n.isEmbroideryApparelColors()?r=Z.a.TYPE_EMBROIDERY_APPAREL_FRONT:n.isEmbroideryApparelBackColors()&&(r=Z.a.TYPE_EMBROIDERY_APPAREL_BACK)),i.next=6,t.waitInitialRender();case 6:r&&(t.shouldAllowFileColorChanger()||t._updateEmbroideryColorsForPlacement(r),r!==t.getSelectedPlacementId()&&t.setActivePlacement(r)),t._renderFooter(),t._par.arePickersVisible&&((a=t._productOptionsPicker.getValues()).hasOwnProperty(e.getName())||(a[e.getName()]=e.getValue()),t._layerPicker.setProductOptionsValues(a).renderOptions(Ga.a.fromArray({id:t.getSelectedPlacementId()}))),t.requireMockupRegenerationAndShowDesigner(),t._par.onPickerChanged&&t._par.onPickerChanged();case 11:case"end":return i.stop()}}),i)})))()},_onChildComponentProductOptionsChanged:function(e,t){if(this._isEmbroideryWithText()&&!this.shouldAllowFileColorChanger()&&w.a.O2O(t,this._getTextUsedColors()),this._productOptionsPicker){var i=this._productOptionsPicker.getValues();w.a.O2O(i,t),t=i;var n=new Ma.a;n.optionItems=this._getProductOptions(),n.values=t,n.onChange=this.onProductOptionChanged;var r=new Ba.a(n);r.setPlacementIdsWithLayers(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(z.a)).renderOptions(),this._productOptionsPicker.setProductOptions(r).render()}console.log("[W] Final option values calculated",t),this.designData.productOptions=t,e&&(this._updateEmbroideryColorsForPlacement(this.getSelectedPlacementId()),t.hasOwnProperty(Dr.a.NAME_NOTES)&&this.observer.emitEmbroideryNotesValueChanged());var a=e?500:0;setTimeout(function(){this.observer.emitProductOptionsChanged(t)}.bind(this),a),this.requireMockupRegenerationAndShowDesigner(),this._toggleTextboxPickerAvailability(t[Dr.a.NAME_EMBROIDERY_TYPE]),this._par.onPickerChanged&&this._par.onPickerChanged()},_tryApplyingEmbroideryColorization:function(){this.shouldAllowFileColorChanger()||this._productOptionsPicker&&(this._productOptionsPicker.setFileTypesWithFiles(this._templates.getPlacementIdsHavingFiles()).setPlacementIdsWithFiles(this._templates.getPlacementIdsHavingFiles(z.a)),this._updateEmbroideryColorsForPlacement(this.getSelectedPlacementId()))},_editImageLayer:function(e){this._embroideryImagePicker&&(this._recalcFirstLayerWith3dEmbroidery(),this._recalcEmbroideryPriceOptionsValue(),this._embroideryImagePicker.editImageLayer(e,this.getSelectedPlacementId())),this._templates.silentlySetActiveLayer(e),this.showPickerTab(Ad.TAB_IMAGE)},_updateEmbroideryColorsForPlacement:function(e){var t=this._getAvailablePlacementByPlacementId(e);if(t&&t.technique===J.a.TECHNIQUE_EMBROIDERY){for(var i=function(){this._mockup&&!this._par.isCustomizingMode||this.updateView();for(var e=this._getTemplate(t.id),i=0,n=e.layers.length;i<n;i++)this._scheduleEmbroideryPreviewUpdate(t.id,e.layers[i],!1)}.bind(this),n=this._getEmbroideryColorsForPlacement(t.id),r=this._templates.getUniqueFilesForPlacement(t.id),a=0,o=r.length;a<o;a++)this._updateEmbroideryColorsForPlacementAndFile(t,r[a],n,i);i()}},_getEmbroideryColorsForPlacement:function(e){if(!this._productOptionsPicker&&!this._par.isCustomizingMode)return[];if(-1===Z.a.TYPE_EMBROIDERY_FILES.indexOf(e))return[];var t=this._par.isCustomizingMode?this._par.pickerConfig.productOptionsValues||{}:this._productOptionsPicker.getValues(),i=this._validateEmbroideryTypeForText(t),n=[];if(Z.a.PLACEMENT_COLOR_MAP[e]===Dr.a.NAME_EMBROIDERY_TYPE){var r=i[Z.a.PLACEMENT_COLOR_MAP[e]];"3d"!==r&&(n=n.concat(i[Dr.a.NAME_THREAD_COLORS]||[])),"flat"!==r&&(n=n.concat(i[Dr.a.NAME_THREAD_COLORS_3D]||[]))}else n=i[Z.a.PLACEMENT_COLOR_MAP[e]]||[];return n},_updateEmbroideryColorsForPlacementAndFile:function(e,t,i,n){var r=function(i){this._templates.overrideLayerImages(e.id,t.fileId,i),e.id===this.getSelectedPlacementId()&&n&&n()}.bind(this);i.length<1?r(null):new B(t.urlPreview,i,r)},_toggleTextPickerAvailability:function(e){if(this._layerPickerChooser&&!this._par.isCustomizingMode){var t=this._isTextPickerAvailable(e),i=dlang("dashboard","Text is only available in flat embroidery and can't be combined with 3D puff elements. Please choose flat embroidery to add text.");Object(Qe.f)({key:$e.k.TEXTBOX_EMBROIDERY,value:i,shouldUnset:t})}},_toggleTextboxPickerAvailability:function(e){if(this.shouldAllowTextboxLayer()){if(this._layerPickerChooser&&!this._par.isCustomizingMode){var t=this._isTextPickerAvailable(e),i=dlang("dashboard","Text is only available in flat embroidery and can't be combined with 3D puff elements. Please choose flat embroidery to add text.");Object(Qe.f)({key:$e.k.TEXTBOX_EMBROIDERY,value:i,shouldUnset:t})}}else this._toggleTextPickerAvailability(e)},_isTextPickerAvailable:function(e){var t=this._placementSelector.getSelectedPlacementId();e||(e=t===Z.a.TYPE_EMBROIDERY_FRONT?this.getProductOptionsValues(!0)[Dr.a.NAME_EMBROIDERY_TYPE]:"flat");var i=this._templates.hasLayersForPlacement(t,z.a);return"flat"===e||!e||!i||this.shouldAllowFileColorChanger()},_scheduleEmbroideryPreviewUpdate:function(e,t,i,n){if(this._validateTextLayerCount(),this._technique===J.a.TYPE_EMBROIDERY){var r=this._getAvailablePlacementByPlacementId(e);if(!r||r.technique===J.a.TECHNIQUE_EMBROIDERY){var a=e+t.uniqueId;this._renderTimeouts[a]&&clearTimeout(this._renderTimeouts[a]);var o=i?0:3e3;this._renderTimeouts[a]=setTimeout(this._renderEmbroideryImagePreview.bind(this,e,t,a,n),o)}}},_renderEmbroideryImagePreview:function(e,t,i,n){if(this._templates.getTemplateByLayer(t)){var r=[],a={};if((t=this._templates.getFreshLayer(t)).isImageLayer()?(r=this._getEmbroideryColorsForPlacement(e),a=t.overrideColors?t.overrideColors:{}):t.isTextLayer()&&t.color?r=[t.color]:t.isClipartLayer()&&t.fillColor&&(r=[t.fillColor]),0!==r.length||0!==Object.keys(a).length)if(!this.shouldAllowFileColorChanger()&&t.position.width*t.position.height>ge.a.MAX_EMBROIDERY_PREVIEW_AREA)t.overrideImagePulse&&(t.overrideImagePulse=null,this.updateView());else{var o=this._renderTimeouts[i],s=this._embroideryPreviewGenerated.bind(this,e,t,o,i,n);this.generatorRepository.generateEmbroideryPreview(t,r,this._par.generatorDesignKey,s)}}},_embroideryPreviewGenerated:function(e,t,i,n,a,o){if(this._renderTimeouts[n]===i){var s=new Image,l=e===this.getSelectedPlacementId();s.onload=function(){var e=this._templates.getFreshLayer(t);e&&(e.overrideImagePulse=s.src,t.isImageLayer()?this._templates.updateImageLayer(e,this._templates,!0):t.isTextLayer()?this._templates.updateTextLayer(e,this._templates,!0,!0,l):l&&this.updateView(),a&&"function"==typeof a&&a())}.bind(this),s.src=o.image,r.a.updateInitialStateOptions=this._placementOptions.getData()}else console.log("Skipping preview since another task was active")},_renderVariantWarning:function(){if(!this._par.isOrderFlowMode){w.a.clearNode(this._nodeVariantWarning);var e=null;this._isVariantLimitExceeded()&&(e=this._renderExceededVariantLimitWarning()),this._getEbayStockQuantityExceededError()&&(e=this._renderEbayStockQuantityWarning()),e&&e.append(this._nodeVariantWarning)}},_renderEbayStockQuantityWarning:function(){var e=this._getEbayStockQuantityExceededError();if(!e)return null;var t=tag("div","alert alert-danger");return t.innerHTML="<b>"+dlang("dashboard","You've exceeded the total quantity of variants eBay allows you to add this month.")+"</b> "+dlang("dashboard","You're attempting to add {0} variants, but your remaining available eBay item quantity this month is {1} new items (variants).").format("<b>"+e.used+"</b>","<b>"+e.limit+"</b>")+"<br/>"+dclang("dashboard","eBay product push","Try un-checking some colors or sizes."),t},_renderExceededVariantLimitWarning:function(){if(!this._isVariantLimitExceeded())return null;var e=!!this._par.existingVariants&&this._par.existingVariants.length>0,t="<b>"+dlang("generator","You've exceeded your store's variant limit per product.")+"</b> ";return t+=e?(1===this._par.existingVariants.length?1===this.variantLimit?dlang("generator","You selected {0} including existing {1} variant, but the limit is {2} variant."):dlang("generator","You selected {0} additionally to existing {1} variants, but the limit is {2} variants."):1===this.variantLimit?dlang("generator","You selected {0} including existing {1} variants, but the limit is {2} variant."):dlang("generator","You selected {0} additionally to existing {1} variants, but the limit is {2} variants.")).format("<b>"+this._allSelectedVariantCount+"</b>","<b>"+this._par.existingVariants.length+"</b>",this.variantLimit+"</b>"):dnlang("generator","You selected {0}, but the limit is {1} variant.","You selected {0}, but the limit is {1} variants.",this.variantLimit).format("<b>"+this._allSelectedVariantCount+"</b>","<b>"+this.variantLimit+"</b>"),tag("div","alert alert-danger",[tag("span",{innerHTML:t}),tag("br"),dlang("generator","Try un-checking some colors or sizes, or create a new product if necessary.")])},_reRenderPickerTabs:function(e){this._pickerTabs.render(),this._dropZoneArea&&(e?(this._dropZoneArea.disable(),w.a.addClassName(this._layerPickerChooser.node,"hidden")):(this._dropZoneArea.enable(),w.a.removeClassName(this._layerPickerChooser.node,"hidden")))},_disableAddDesignTabIfNeeded:function(){if(this._pickerTabs){var e=this._pickerTabs.getTabById(Ad.TAB_DESIGN);e&&(this._technique===J.a.TYPE_STOCK_PRODUCT?(e.isDisabled=!0,e.tooltipTitle=dlang("generator","This product isn't available for customization"),this._reRenderPickerTabs(!0),this._addDesignDataForStockProduct()):this._par.isProductPushMode&&(this._getSelectedVariant()?e.isDisabled&&(e.isDisabled=!1,e.tooltipTitle="",this._reRenderPickerTabs()):(e.isDisabled=!0,e.tooltipTitle=dlang("generator","To start designing, please select a new variant thatâs not already synced to your store."),this._reRenderPickerTabs(!0))))}},_addDesignDataForStockProduct:function(){var e=this._getSelectedVariant();this._placementOptions&&e&&(this._placementOptions.getPlacementFill(e.placementId)||this._onDesignFillColorChanged({type:Z.a.DESIGN_FILL_TYPE_COLOR,value:"#000000"}))},updateView:function(){var e=arguments,t=this;return kd(regeneratorRuntime.mark((function i(){var n,r,a,o,s;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n=e.length>0&&void 0!==e[0]&&e[0],t._shouldShowUnrelatedTemplatesPopover=n,i.next=4,t.waitInitialRender();case 4:if(t._renderDesignFillPicker(),r=t.getSelectedGeneratorVariants(),t.generatorVariants=r.generatorVariants,t._selectedVariantCount=r.variantCount,t._allSelectedVariantCount=r.allVariantCount,t.setPreviewMockupVariant(null),(a=t.getGeneratorVariantByPlacementId(!1,!0))&&t._isProductTemplateDetailsEditor()?t.setPreviewMockupVariant(a):a&&(t.setPreviewMockupVariant(a),t._placementSelector.setSelectedPlacementById(t.previewMockupVariant.placementId),t._par.placementDependentOptions&&t._productOptionsPicker.setSelectedPlacementId(t.previewMockupVariant.placementId),t._renderQuickDesignPicker(),(o=t._pickerTabs&&t._pickerTabs.getActiveTab())&&o.customId===Ad.TAB_PRODUCT?t._renderLayerPickerChooser():t._renderLayerPicker(),t._toggleTextboxPickerAvailability(),t._validateTextLayerCount(),t._updateEmbroideryColors()),t._renderFooter(),t._renderDiscontinuedWarning(),t._renderUnavailableSizeColorWarning(),t._renderVariantWarning(),t._renderDesignerTabs(),t._renderAdvancedTemplatePicker(),t._isProductTemplateDetailsEditor()||!t._isEmpty()){i.next=30;break}i.t0=regeneratorRuntime.keys(t.getAvailablePlacements());case 20:if((i.t1=i.t0()).done){i.next=27;break}if(s=i.t1.value,!t._placementOptions.getPlacementFill(t.getAvailablePlacements()[s].id)){i.next=25;break}return t._renderMockupMainArea(),i.abrupt("return");case 25:i.next=20;break;case 27:return t.renderEmptyMockup(),t._par.isChangePrintfileMode&&t._isEmbroideryWithText()&&t._renderProductOptions(),i.abrupt("return");case 30:t._isProductTemplateDetailsEditor()||(t._renderOrientationPicker(),t._renderProductOptions(),t._renderMockupVariantArea(),t._renderMockupMainArea());case 31:case"end":return i.stop()}}),i)})))()},updatePlacementPrices:function(e){this._placementSelector.setPriceDataAndRender(e)},getGeneratorVariantByPlacementId:function(e,t){e=e||this.getSelectedPlacementId();var i=this.lastSelectedColor,n=this.lastSelectedSize,r=this.getSelectedGeneratorVariants(!1,!0).generatorVariants;if(t)return r.sort((function(t,r){var a=0,o=0;return a+=2*Number(t.placementId===e),a+=Number(k.a.isEqual(t.color,i)),a+=Number(k.a.isEqual(t.size,n)),o+=2*Number(r.placementId===e),o+=Number(k.a.isEqual(r.color,i)),a>(o+=Number(k.a.isEqual(r.size,n)))?-1:a===o?0:1}))[0];for(var a in r){var o=r[a],s=!i||!o.color||k.a.isEqual(i,o.color),l=!n||!o.size||k.a.isEqual(n,o.size),c=!e||e===o.placementId;if(s&&l&&c)return o}return null},_canGeneratePreview:function(){return this.generatorVariants&&0!==this.generatorVariants.length},_renderMockupVariantArea:function(){if(!this._par.isFooterVisible)return!1;if(Object(je.f)())return w.a.clearNode(this._nodeMockupVariantArea),void new md({onUpdateCustomMockupLayer:aa.a.bind(this,{templates:this._templates})}).append(this._nodeMockupVariantArea);var e=this.hasDesignForPlacement(this.getSelectedPlacementId()),t=this._getGeneratorVariants(!e),i=this.getSelectedPlacementId(),n=t.filter((function(e){return e.placementId===i}));if(n.length<2)this._variantArea&&(this._variantArea.remove(),this._variantArea=null,w.a.clearNode(this._nodeMockupVariantArea));else if(this._variantArea)this._variantArea.setGeneratorVariants(n,this.previewMockupVariant),e||this._variantArea.renderMockupPreviewStrings(this._lifelikeVariants);else{var r;w.a.clearNode(this._nodeMockupVariantArea);var a=new sa,o=!this._isProductTemplateEditor()||(null===(r=Object(Q.a)())||void 0===r?void 0:r.canHaveSizePickerForProductTemplates());a.generatorVariants=n,a.activeGeneratorVariant=this.previewMockupVariant,a.onGeneratorVariantRemove=o?this._onGeneratorVariantRemove:null,a.onGeneratorVariantSelect=this._onGeneratorVariantSelect,a.templates=this._templates,a.designData=this.designData,a.getDesignFill=this.getDesignFill.bind(this),this._variantArea=new da(a),this._variantArea.append(this._nodeMockupVariantArea)}},_getGeneratorVariants:function(e){return this._canGeneratePreview()&&!e?this.generatorVariants:this.getSelectedGeneratorVariants(!0,!0).generatorVariants},_onGeneratorVariantRemove:function(e){var t,i=[],n=[],r=this.getSelectedPlacementId(),a=this._getGeneratorVariants();for(var o in a){var s=a[o];s.generatorVariantId!==e&&s.placementId===r&&(s.size&&i.indexOf(s.size)<0&&i.push(s.size),s.color&&n.indexOf(s.color)<0&&n.push(s.color))}if((n=this.allColors.filter((function(e){return n.indexOf(e.color)>-1}))).length&&n.length!==this._selectedColors.length)return this._onColorsChanged(n),void this._colorPicker.setColors(n).render();i.length&&i.length!==this._selectedSizes.length&&(this._onSizesChanged(i),null===(t=this._sizePicker)||void 0===t||t.setSizes(i).render())},_getFirstInsideLabelGeneratorVariantId:function(e){var t=this._generatorParams.generatorVariants,i=null,n=null;for(var r in e||(e=this._par.isOrderFlowMode&&this._selectedColors.length>0?this._selectedColors[0].color:this.lastSelectedColor),t){var a=t[r];if(a.isInsideLabel())if((!a.color||!e||k.a.isEqual(a.color,e))&&(a.templateType===Br.a.LABEL_CUSTOM?n=a.generatorVariantId:a.templateType===Br.a.LABEL_NATIVE&&(i=a.generatorVariantId)),i&&n)break}return{native:i,custom:n}},_onGeneratorVariantSelect:function(e){this._onPlacementSelectorChanged(e,!0)},_onPlacementSelectorChanged:function(e,t){var i,n=!0;if(e instanceof Ga.a?(i=this.getGeneratorVariantByPlacementId(e.id))||(i=this.getGeneratorVariantByPlacementId(e.id,!0)):Number(e)?(i=this.getGeneratorVariantById(e,!0),n=!1):i="string"==typeof e?this.getGeneratorVariantByPlacementId(e):this.getGeneratorVariantByPlacementId(),i&&(this.setPreviewMockupVariant(i),this._templates.setActiveLayerFromTemplate(i.placementId,i.templateId),this.lastSelectedColor=i.color,this.lastSelectedSize=i.size),n){var r=this._pickerTabs&&this._pickerTabs.getActiveTab();r&&r.customId&&(this._renderLayerPickerChooser(),this.showPickerTab(r.customId))}if(this._updateEmbroideryColors(),this._embroideryHelper.recalcGlobalSelectedEmbroiderySelectedColors(),this._embroideryHelper.reScheduleEmbroideryPreviewForTemplate(),t||kr.a.resetZoom(),this._renderFooter(),this._updateDesignFillPicker(),this._manageCheckboxShowHide(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._renderPatternPicker(),this._canRenderNativeInsideLabelSelection())this._renderInsideLabel();else{if(this._isEmpty())return this._renderTextboxPicker(),this._hideInsideLabelSwitcher(),T.o(E.EVENT_UPDATE_MOBILE_FOOTER),this._placementOptions.getPlacementFill(i.placementId)?void this._renderMockupMainArea():void this.renderEmptyMockup(i);this._renderMockupVariantArea(),this._renderMockupMainArea(),this._hideInsideLabelSwitcher()}Object(Qe.c)(),this._toggleTextboxPickerAvailability(),this._validateTextLayerCount(),T.o(E.EVENT_UPDATE_MOBILE_FOOTER)},_hideInsideLabelSwitcher:function(){var e;null!==(e=Object(Q.a)())&&void 0!==e&&e.isAdvancedInsideLabelAllowed()&&this._labelSwitcher.hide()},_renderInsideLabel:function(){var e=!1;_.isUndefined(this._par.store.storeId)||(e=(new u.a).getCachedStore(this._par.store.storeId).hasFlag(Ya.a.FLAG_CUSTOM_INSIDE_LABELS_ALLOWED));var t=Object(Q.a)();if(!this._isTemplatePreselected()&&this._isPlacementInsideLabel()&&!this.designData.labelTemplateType&&(null==t?void 0:t.isDtgShirt())&&(null==t?void 0:t.hasAdvancedInsideLabel)&&!this._isProductTemplateEditor()&&e){var i=new Br.a.Par;i.nativeTemplateSelected=this._setSelectedInsideLabelTemplate.bind(this,Br.a.LABEL_NATIVE),i.customTemplateSelected=this._setSelectedInsideLabelTemplate.bind(this,Br.a.LABEL_CUSTOM),this.nodeInsideLabelTemplatePicker=new Br.a(i),w.a.clearNode(this._nodeMainMockupArea),this.nodeInsideLabelTemplatePicker.append(this._nodeMainMockupArea),this._renderLayerPicker(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._renderTextboxPicker(),this._renderEmbroideryImagePicker(),this._renderPatternPicker(),this._designerToolbarService.renderSidebar()}var n=this._isProductTemplateEditor()||!e,r=(null==t?void 0:t.hasAdvancedInsideLabel)&&n;if(r&&(this.designData.labelTemplateType=Br.a.LABEL_NATIVE),this._isTemplatePreselected()){null!=t&&t.hasAdvancedInsideLabel||(this.designData.labelTemplateType=Br.a.LABEL_CUSTOM),null!=t&&t.hasAdvancedInsideLabel&&this._labelSwitcher.setActiveSwitch.bind(this,this.designData.labelTemplateType),this._setSelectedInsideLabelTemplate(this.designData.labelTemplateType);var a=this._getFirstInsideLabelGeneratorVariantId(),o=this._generatorParams.generatorVariants[a[this.designData.labelTemplateType]];r&&this._labelSwitcher.hide(),this._templates.setActiveLayerFromTemplate(o.placementId,o.templateId),this.setPreviewMockupVariant(o),this._renderLayerPicker(),this._renderClipartPicker(),this._renderQuickDesignPicker(),this._renderLicensedAssetPicker(),this._renderTextboxPicker(),this._renderEmbroideryImagePicker(),this._renderPatternPicker(),this._designerToolbarService.renderSidebar()}},_isTemplatePreselected:function(){var e;if(null===(e=Object(Q.a)())||void 0===e||!e.isDtgShirt())return!1;if(this.getSelectedPlacementId()!==Z.a.TYPE_LABEL_INSIDE)return!1;if(this.designData.labelTemplateType)return!0;var t=this.getSelectedGeneratorVariants().generatorVariants;if(t)for(var i in t)if(t[i].isInsideLabel()&&t[i].templateType)return this.designData.labelTemplateType=t[i].templateType,!0;return!1},_setSelectedInsideLabelTemplate:function(e){var t;this._updateMockupPlacements();var i=this._getFirstInsideLabelGeneratorVariantId();null!==(t=Object(Q.a)())&&void 0!==t&&t.hasAdvancedInsideLabel&&this._labelSwitcher.show(e,this._setSelectedInsideLabelTemplate.bind(this)),this.designData.labelTemplateType=e;var n=this._generatorParams.generatorVariants[i[e]];this.setPreviewMockupVariant(n),this._isEmpty()?this.renderEmptyMockup(n):n&&(this._templates.setActiveLayerFromTemplate(n.placementId,n.templateId),this.updateView()),this._dropZoneArea&&this._isPlacementInsideLabel()&&this._dropZoneArea.setInsideLabelType(e)},_updateMockupPlacements:function(){this.observer.emitPlacementLayersChanged(this.designData)&&(this.hasDesignForPlacement(this.getSelectedPlacementId())?w.a.addClassName(this._nodeLayerPickerChooser,"hidden"):(this.renderEmptyMockup(),w.a.removeClassName(this._nodeLayerPickerChooser,"hidden")),this._activeDesignerTabId!==Ad.TAB_3D||this._canRender3dViewTab()||this._onDesignerTabPicked(Ad.TAB_DESIGNER,!0),this._renderFooter(),this._par.placementDependentOptions&&this._productOptionsPicker.setSelectedPlacementId(this.getSelectedPlacementId()),this._dropZoneArea&&(this._nodeMainMockupArea.dataset.placement=this.getSelectedPlacementId()),this._techniquePicker&&this._techniquePicker.toggleChangeTechniquePopup(this._templates.hasLayers()),this._advancedTemplatePicker&&this._advancedTemplatePicker.toggleTemplatePickerPopup(this._templates.hasLayers()||this.hasDesignFill()))},_updateDesignerPricesUsingPriceCalculator:function(){if(this._priceCalculator){var e=[];for(var t in this._generatorParams.availablePlacements){var i=this._generatorParams.availablePlacements[t].id;this.hasDesignForPlacement(i)&&e.push(i)}this._priceCalculator.updatePlacementsWithLayers(e),this.updatePlacementPrices(this._priceCalculator.getFormattedPlacementPrices()),this._setFooterPrice(this._getSelectedVariantsPriceInfo())}},_renderMockupMainArea:function(){var e,t,i,n=this;if(this.previewMockupVariant){this._showLoader(this._nodeMainMockupArea,{minHeight:200}),null===(e=this._mockup)||void 0===e||e.applyCropIfNeeded();var r=this.calculateMockupMainAreaSize(),a=new Aa;a.templates=this._templates,a.generatorVariant=this.previewMockupVariant,a.onReady=this._onMainMockupAreaReady,a.mockupMaxWidth=r.maxWidth,a.mockupMaxHeight=r.maxHeight,a.disableLayerManipulations=this._par.disableLayerManipulations,a.disableOutOfBoundsErrorMessages=this._par.disableOutOfBoundsErrorMessages,a.activeLayer=this._templates.getActiveLayer(),a.isCustomizingMode=this._par.isCustomizingMode,a.placementOptions=this._placementOptions,a.node3dView=this._activeDesignerTabId===Ad.TAB_3D?this._node3DArea:null,a.shouldShowUnrelatedTemplatesPopover=function(){return n._shouldShowUnrelatedTemplatesPopover};var o=Object(Au.c)(this._templates,this.previewMockupVariant);a.shouldShowStickerLayerMergingPopover=function(){return 2===o.getLayerCount()},o&&(a.templateKey=o.getKey()),a.variantArea=null!=o&&null!==(t=o.layers)&&void 0!==t&&t.length?this._variantArea:null,this._variantArea||null!=o&&null!==(i=o.layers)&&void 0!==i&&i.length||this._hideLoader(this._nodeMainMockupArea),a.hideZoomButton=this._par.hideZoomButton,this._mockup=new Da(a)}},_onMainMockupAreaReady:function(){var e;if(this.observer.emitMainMockupReady()&&this._mockup&&(this.hasDesignForPlacement(this.getSelectedPlacementId())||this._isAdvancedTemplateLoaded())){if(w.a.clearNode(this._nodeMainMockupArea),w.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._isAdvancedTemplateLoaded()?(this._addAdvancedTemplateWarning(),this._par.isOrderFlowMode||this._layerPicker.clearGuidelineIfo()):this._removeAdvancedTemplateWarning(),this._isTextLayerConverted&&(this._getWarningNode(dlang("generator","Please double-check text before clicking Continue")).append(this._nodeMainMockupArea),this._isTextLayerConverted=!1),this._mockup.append(this._nodeMainMockupArea),this._par.similarProductPushState&&null!==(e=Object(Q.a)())&&void 0!==e&&e.isCutSew()){var t=tag("div","text-center",dlang("generator","Please double-check your design alignment in the print area before you continue"));new ce.a([t],"warning",!1,!1,!0,null).prepend(this._nodeMainMockupArea)}this.displayTemplateSizeChangeWarningIfNeeded(),this._hideLoader(this._nodeMainMockupArea),this._shouldInitDropZone()&&!Object(A.b)()&&this._par.withGlobalDropZone&&(this.storeId?this._initDropZone(this.storeId,!1):(new u.a).getFirstId(this._initDropZone)),this._disableAddDesignTabIfNeeded()}},_isAdvancedTemplateLoaded:function(){return this.previewMockupVariant&&this.previewMockupVariant.role===Na.a.ROLE_ADVANCED_TEMPLATE&&(!this.designData.labelTemplateType||this.designData.labelTemplateType!==Br.a.LABEL_NATIVE)},_onLayerAddedOrRemoved:function(e,t,i){var n=this,r=function(){var e,t=Object(Au.c)(this._templates,this.previewMockupVariant),n=1===(null==t||null===(e=t.layers)||void 0===e?void 0:e.length)&&i===me.q;this.updateView(n),this._updateMockupPlacements(),T.o(T.f)}.bind(this),a=this._getLicensedAssetIdsByPlacement();Object.keys(a).length?Object(Vs.d)(a).then((function(e){n._priceCalculator.setLicensedAssetsPrice(e),r()})):(this._priceCalculator.setLicensedAssetsPrice(0),r())},getLicensedAssetsPrice:function(){return this._priceCalculator.getLicensedAssetsPrice()},_getLicensedAssetIdsByPlacement:function(){var e=this._templates.getTemplates(),t={},i=function(i){if(!e.hasOwnProperty(i))return"continue";for(var n in e[i])e[i].hasOwnProperty(n)&&e[i][n].layers.forEach((function(e){e.isLicensedAssetLayer()&&(t.hasOwnProperty(i)||(t[i]=[]),t[i].push(e.licensedAssetItem.licensedAssetId))}))};for(var n in this._templates.getTemplates())i(n);return t},_onLayerOrderChanged:function(){this._renderMockupMainArea(),this._renderMockupVariantArea(),T.o(T.f)},calculateMockupMainAreaSize:function(){var e=1,t=this._mockupMainMaxWidth,i=this._mockupMainMaxHeight,n=this._nodeMainMockupArea,r=y()(n).closest(".hidden");return r.length&&r.removeClass("hidden"),null!=n&&n.clientWidth&&t>n.clientWidth&&(e=t/(null==n?void 0:n.clientWidth)),r.length&&r.addClass("hidden"),{maxWidth:t/e,maxHeight:i/e}},_getProductWarning:function(){var e,t=Object(Q.a)();if((null==t?void 0:t.productId)!==J.a.ID_T_SHIRT_BB453&&(null==t?void 0:t.productId)!==J.a.ID_T_SHIRT_TC245||this.getSelectedPlacementId()!==(Z.a.TYPE_FRONT||Z.a.TYPE_BACK))if(-1!==J.a.YOGA_PRODUCTS.indexOf(null==t?void 0:t.productId)&&this._isPlacementInsideLabel())e=dlang("generator","Please note - back waist print file is copied on the inside of the waistband, so the inside label will appear on top of your design");else{if(this.getSelectedPlacementId()!==Z.a.TYPE_BACK||(null==t?void 0:t.productId)!==J.a.ID_ANVIL_71600)return"";e=dlang("generator","Because of the stitching at the top, we recommend placing graphics lower so they donât print over the seams")}else e=dlang("generator","Placement is approximate and graphics larger than 12x13â will be scaled to clear the garment seams");return this._getWarningNode(e)},_getWarningNode:function(e){return tag("div","generator-mockup__warning-message alert alert-warning alert-dismissible text-center",[tag("button",{className:"close",attr:{"aria-label":lang("Close")},data:{dismiss:"alert"}},"Ã"),tag("span","",e)])},setPreviewMockupVariant:function(e){var t,i=(null===(t=this.previewMockupVariant)||void 0===t?void 0:t.templateId)!==(null==e?void 0:e.templateId),n=this._isAdvancedTemplateLoaded();this.previewMockupVariant=e,this._manage3dViewPropsOnVariantChange(e,i),n!==this._isAdvancedTemplateLoaded()&&this._updateTemplateType()},_manage3dViewPropsOnVariantChange:function(e,t){var i;if(e&&this._loaded3dObj&&t){var n=null===(i=this._get3dViewConfigObject())||void 0===i?void 0:i.uniqueId;n&&(this._3dObjUniqueId===n?this._update3dStatus(Rr.STATUS_RELOAD_PRINTFILE):(this._update3dStatus(Rr.STATUS_RELOAD_MODEL),this._3dObjUniqueId=n),this._needToShow3dTab=this._canRender3dViewTab())}},setProductOptions:function(e){this._productOptionsPicker||(this._productOptionsPicker=new s.a(new Ma.a)),this._productOptionsPicker.setProductOptions(e)},_onTemplatePositionsChanged:function(e,t){this._needToReRenderVariantArea(e,t)&&this._renderMockupVariantArea(),this._renderFooter(),this.observer.emitPlacementPositionsChanged(),this._displayQualityIndicators(),this._par.onPositionsChanged&&this._par.onPositionsChanged(),T.o(T.f)},_onCropStateChanged:function(e,t){this.showDesignTab(),this._renderFooter()},_needToReRenderVariantArea:function(e,t){if(!this._templates||!t)return!1;var i=this._templates.getActiveTemplate(this.getSelectedPlacementId());if(i){var n=i.getLayerIndex(t);if(n>-1)return e.some((function(e){var i;return(null===(i=e.layers[n])||void 0===i?void 0:i.uniqueId)!==t.uniqueId}))}return!1},_onTemplateResized:function(e,t){if(this._renderFooter(),this._displayQualityIndicators(),this._technique===J.a.TYPE_EMBROIDERY)for(var i in e)if(e[i].technique===J.a.TECHNIQUE_EMBROIDERY){this._scheduleEmbroideryPreviewUpdate(e[i].placementId,t);break}T.o(T.f)},_displayQualityIndicators:function(){this._mockup&&Object(je.g)()?(this._mockup.getMockup().displayOutOfBoundsIndicator(),this._mockup.getMockup().displayQualityIndicators(),this._mockup.getMockup().displayCustomizableTextLayerError()):Object(je.f)()&&this._mockup.getMockup().displayOutOfBoundsIndicatorForMockupLayer()},getSelectedGeneratorVariants:function(e,t){var i={generatorVariants:[],variantCount:0,allVariantCount:0},n={},r=this._getSelectedMappings();for(var a in r){var o=r[a];if(!this._isVariantDiscontinued(o.size,o.color))if(this._par.existingVariants&&this._isVariantExistingForProduct(o.size,o.color)&&!this._par.isChangePrintfileMode){if(0===i.variantCount){var s=Object.values(Object.assign({},o.mockupIds,o.templateIds));for(var l in s){var c=s[l],u=this._generatorParams.generatorVariants[c];i.generatorVariants.push(u),i.variantCount++,i.allVariantCount++}}}else{var d=!1,h=!1;for(var p in this._generatorParams.availablePlacements){var f=this._generatorParams.availablePlacements[p];if(this._templates.hasTemplates(f.id)&&(d||(d=!0,i.allVariantCount+=1),t||this.hasDesignForPlacement(f.id))){var g=null,m=o.mockupIds[f.id],_=o.templateIds[f.id];if(m||_||console.error("active generator variant missing for color ".concat(o.color," and placement ").concat(f.id)),f.id===Z.a.TYPE_LABEL_INSIDE&&this.designData.product.isAdvancedInsideLabelAllowed()){var v=Br.a.LABEL_CUSTOM;if(this.designData.hasLabelNative()){var y=m||_,b=this._generatorParams.generatorVariants[y].color,P=this._getFirstInsideLabelGeneratorVariantId(b);m=P[v=Br.a.LABEL_NATIVE],_=P[v]}this._isPlacementInsideLabel()&&this.hasLayersForPlacement(this.getSelectedPlacementId())&&!this.designData.labelTemplateType&&(this.designData.labelTemplateType=v,this._labelSwitcher.show(v,this._setSelectedInsideLabelTemplate.bind(this)))}if(g=e?m||_:_||m,this._isZoomedTemplate(o,f)&&(g=_),h||(h=!0,i.variantCount++),!n[g]){var C=this._generatorParams.generatorVariants[g];n[g]=1,i.generatorVariants.push(C)}}}}}return i},_isZoomedTemplate:function(e,t){return this._isZoomedTemplateShown()&&void 0!==e.templateIds[t.id]},_isZoomedTemplateShown:function(){var e,t=null===(e=Object(Q.a)())||void 0===e?void 0:e.availableTechniques;return!!t&&(t.indexOf(J.a.TYPE_T_SHIRT)>-1||t.indexOf(J.a.TYPE_EMBROIDERY)>-1)},_getSelectedMappings:function(e){if(!this._generatorParams)return[];var t,i=[],n=Id(this._generatorParams.variantMapping);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.color&&!this.isColorSelected(r.color)||(e||!r.size||this.isSizeSelected(r.size,this._getFakeSelectedSizes()))&&i.push(r)}}catch(e){n.e(e)}finally{n.f()}return i},_getFakeSelectedSizes:function(){return this._par.isOrderFlowMode&&!this._selectedSizes.length?this.allSizes:null},_isVariantDiscontinued:function(e,t){return e in this.discontinuedColors&&-1!==this.discontinuedColors[e].indexOf(t)},_isVariantExistingForProduct:function(e,t){var i=this._getExistingProductVariantData(),n=!1;for(var r in i[e])i[e][r].color==t&&(n=!0);return e in i&&n},_getExistingProductVariantData:function(){var e=[];for(var t in this._par.existingVariants)e.push((new d.a).getCachedVariantById(this._par.existingVariants[t].variantId));var i,n={};for(i in e)n[e[i].size]=[];for(i in e)n[e[i].size].push({color:e[i].color,colorCode:e[i].colorCode,colorCode2:e[i].colorCode2});return n},_onFinish:function(e){var t;if(ll(this._variantArea,null===(t=Object(Q.a)())||void 0===t?void 0:t.productId,this._footerButtonContinue))this._enableContinueButton();else{if(!this._productOptionsPicker.getValues().stitch_color&&Dr.a.OPTION_STITCH_COLOR in this._productOptionsPicker.getValues())return new Pd.a,void this._enableContinueButton();var i=this.getMissingUploadPrintFiles();i.length?new Ua.a(i,e,this._enableContinueButton):e()}},_enableContinueButton:function(){w.a.removeClassName(this._footerButtonContinue,"loading"),w.a.removeClassName(this._footerButtonContinue,"disabled"),this._hideLoader(this.node),2===this._footerButtonContinue.childNodes.length&&this._footerButtonContinue.removeChild(this._footerButtonContinue.childNodes[1])},_onFinishCallback:function(){var e=this;Object(wa.j)(),this.trackTransparencyWarningContinueClick();var t=this.getDesignData(),i=this._getSelectedMappings();this.generatorRepository.getGeneratorVariants(i,(function(i){e._generatorParams.generatorVariants=Object.assign(e._generatorParams.generatorVariants,i),e._enableContinueButton(),e._par.productTemplateEditorState?e._par.onProductDesigned(t):(e._par.onProductDesigned(t,e.getSelectedGeneratorVariants(!1).generatorVariants),e._forgetColorsAndSizes(),e._par.isOrderFlowMode||e._rememberColorsAndSizes())}),!0,!0)},_onBack:function(e){this._par.onBack()},_onContinue:function(e){var t,i,n=this;m.a.trackClickedOnContinue(this._templates,this._par),null===(t=this._mockup)||void 0===t||t.applyCropIfNeeded(),e.preventDefault(),w.a.hasClassName(this._footerButtonContinue,"disabled")||ll(this._variantArea,null===(i=Object(Q.a)())||void 0===i?void 0:i.productId,this._footerButtonContinue)||(w.a.addClassName(this._footerButtonContinue,"disabled"),w.a.removeClassName(this._footerButtonContinueSpinner,"pf-d-none"),this._showLoader(this.node),this._onFinish((function(){n._onFinishCallback()})))},_onSaveToTemplates:function(e){var t,i,n=this;if((m.a.trackClickedOnSaveToTemplates(this._templates,this._par),e.preventDefault(),!w.a.hasClassName(this._footerButtonSaveToTemplates,"disabled"))&&!ll(this._variantArea,null===(t=Object(Q.a)())||void 0===t?void 0:t.productId,this._footerButtonSaveToTemplates))if(this._productOptionsPicker.getValues().stitch_color||!(Dr.a.OPTION_STITCH_COLOR in this._productOptionsPicker.getValues())){null===(i=this._mockup)||void 0===i||i.applyCropIfNeeded(),w.a.addClassName(this._footerButtonSaveToTemplates,"disabled"),w.a.removeClassName(this._footerButtonSaveToTemplatesSpinner,"pf-d-none"),this._footerButtonSaveToTemplates.onclick=null;var r=function(){w.a.removeClassName(n._footerButtonSaveToTemplates,"disabled"),w.a.addClassName(n._footerButtonSaveToTemplatesSpinner,"pf-d-none"),n._footerButtonSaveToTemplates.onclick=n._onSaveToTemplates},a=this.getDesignData(),o=(a.colors||[]).filter((function(e){return!!e}));a.canHaveColorPicker()&&o.length||(a.templateSelectedSizes=a.sizes),this._getSelectedVariants().forEach((function(e){var t=e.variantId;a.generatorVariantsIdsToSave.push(t)})),Object(js.g)({designData:a}).then((function(){new Us.a({type:Us.a.TYPE_SUCCESS,content:dlang("generator","Successfully saved to Product templates")}),r()})).catch((function(e){Object(Ms.a)(e),new Us.a({type:Us.a.TYPE_ERROR,content:dlang("generator","Error while saving to Product templates! Please contact support!")}),r()}))}else new Pd.a},getSizes:function(){return this._selectedSizes},setSizes:function(e){this._selectedSizes=e},getColors:function(){return this._selectedColors},setColors:function(e){this._selectedColors=e},getRegion:function(){return this._regionPicker?this._regionPicker.getSelectedRegions():[o.a.REGION_USA]},getSizePicker:function(){return this._sizePicker},getColorPicker:function(){return this._colorPicker},getLayerPicker:function(){return this._layerPicker},getProductOptionsPicker:function(){return this._productOptionsPicker},getSelectedRegionVariants:function(){return this._regionPicker?this._regionPicker.getMatchingVariants():[]},getValuesToRemember:function(){return{size:this.getSizes().slice().shift(),color:this.getColors().map((function(e){return e.color})).slice().shift(),region:this.getRegion(),options:this.getProductOptionsValues()}},getAvailablePlacements:function(){var e;return(null===(e=this._generatorParams)||void 0===e?void 0:e.availablePlacements)||[]},isPlacementSimple:function(e){return!this.hasDesignFill(e)&&this._templates.isPlacementSimple(e)},getTechnique:function(){var e;return this._technique||(null===(e=Object(Q.a)())||void 0===e?void 0:e.type)},getDesignData:function(){var e,t=Object(Q.a)();this.designData.colors=this.getSelectedColorNameArray(),this.designData.hexColors=this.getSelectedColorHexArray(),this.designData.sizes=this._selectedSizes,this.designData.productId=null==t?void 0:t.productId,this.designData.productTemplateId=this._isCreatingProductFromTemplate()&&this._par.productTemplateEditorState.sourceProductTemplate?this._par.productTemplateEditorState.sourceProductTemplate.id:null,this._isProductTemplateEditor()&&(this.designData.templateSelectedSizes=this._shouldRenderSizePicker()?this._selectedSizes.slice():this.designData.templateSelectedSizes||[]);var i=this.allAvailableSizes;this.designData.sizes&&i&&(this.designData.sizes=this.designData.sizes.filter((function(e){return i.includes(e)}))),this.designData.templateSelectedSizes&&i&&(this.designData.templateSelectedSizes=this.designData.templateSelectedSizes.filter((function(e){return i.includes(e)}))),this._productOptionsPicker&&(this.designData.productOptions=this.getProductOptionsValues(!0,this.shouldIncludeTextThreadColors())),this.designData.storeId=this._par.store.storeId,this.designData.templates={},this.designData.generatorVariants=[],this.designData.forceOrientation=this._orientation||"",this.designData.lifelikeVariants=this._lifelikeVariants,this.designData.forceTemplateType=this._templateType,this.designData.useSizeConversion=null==t?void 0:t.useSizeConversion,this.designData.store=this._par.store.storeId?(new u.a).getCachedStore(this._par.store.storeId):this._par.store,this.designData.technique=this.getTechnique();var n,r={},a=Id(null!==(e=this.generatorVariants)&&void 0!==e?e:[]);try{for(a.s();!(n=a.n()).done;){var o=n.value,s=Object(Au.c)(this._templates,o);this.designData.templates[s.getKey()]=s;var l,c=Id(s.layers);try{for(c.s();!(l=c.n()).done;){var d=l.value;if(d instanceof z.a){var h=d.fileItem.fileId;r[o.placementId]=r[o.placementId]||[],r[o.placementId].indexOf(h)<0&&r[o.placementId].push(h)}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){a.e(e)}finally{a.f()}this.designData.filesIdsByPlacement=r;var p,f=this.designData.defaultGeneratorVariantId,g=null,m=Id(this.getSelectedGeneratorVariants(!0).generatorVariants);try{for(m.s();!(p=m.n()).done;){var _=p.value;f==_.generatorVariantId&&(g=_.generatorVariantId),this.designData.generatorVariants.push(_)}}catch(e){m.e(e)}finally{m.f()}if(!g){var v=this.getSelectedGeneratorVariants(!1).generatorVariants[0];v&&v.generatorVariantId&&(this.designData.generatorVariants.push(v),g=v.generatorVariantId)}this.designData.defaultGeneratorVariantId=g;var y=new Mr.a(this.designData,this._generatorParams);return this.designData.generatorVariantsIdsToSave=y.getMockupVariantIds(),this.designData.sizeGuideUnits=[Qa.c],this.designData.rawPlacementOptions=this._placementOptions.getData(),this.designData},_getProductOptions:function(){var e,t=[Dr.a.NAME_EMBROIDERY_FONT,Dr.a.NAME_TEXT_THREAD_COLORS,Dr.a.NAME_TEXT_THREAD_COLORS_LEFT,Dr.a.NAME_TEXT_THREAD_COLORS_RIGHT,Dr.a.NAME_TEXT_THREAD_COLORS_BACK,Dr.a.NAME_TEXT_THREAD_COLORS_CHEST_LEFT,Dr.a.NAME_TEXT_THREAD_COLORS_CHEST_CENTER,Dr.a.NAME_TEXT_THREAD_COLORS_LARGE_CENTER,Dr.a.NAME_TEXT_THREAD_COLORS_CORNER_LEFT,Dr.a.NAME_TEXT_THREAD_COLORS_CORNER_RIGHT,Dr.a.NAME_TEXT_THREAD_COLORS_INSIDE_LEFT,Dr.a.NAME_TEXT_THREAD_COLORS_INSIDE_RIGHT,Dr.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_LEFT,Dr.a.NAME_TEXT_THREAD_COLORS_OUTSIDE_RIGHT,Dr.a.NAME_TEXT_THREAD_COLORS_APPAREL,Dr.a.NAME_TEXT_THREAD_COLORS_APPAREL_BACK];return this.getTechnique()!==J.a.TYPE_EMBROIDERY&&t.push(Dr.a.NAME_NOTES),null===(e=Object(Q.a)())||void 0===e?void 0:e.getOptionItems(t).map(function(e){return this._manageOptionItemVisibleProperty(e),e.isEmbroideryType()&&this._isEmbroideryWithText()&&(e.disabledValues=[Z.a.DIGITIZATION_3D,Z.a.DIGITIZATION_BOTH],e.disabledValuesLabelText=dlang("dashboard","Text can't be combined with 3D puff elements.")),e}.bind(this))},_manageOptionItemVisibleProperty:function(e){var t=[Dr.a.NAME_NOTES,Dr.a.OPTION_INSIDE_POCKET],i=[Dr.a.NAME_EMBROIDERY_TYPE,Dr.a.NAME_THREAD_COLORS_3D,Dr.a.NAME_THREAD_COLORS,Dr.a.NAME_THREAD_COLORS_LEFT,Dr.a.NAME_THREAD_COLORS_RIGHT,Dr.a.NAME_THREAD_COLORS_BACK,Dr.a.NAME_THREAD_COLORS_CHEST_LEFT,Dr.a.NAME_THREAD_COLORS_CHEST_CENTER,Dr.a.NAME_THREAD_COLORS_LARGE_CENTER,Dr.a.NAME_THREAD_COLORS_CORNER_LEFT,Dr.a.NAME_THREAD_COLORS_CORNER_RIGHT,Dr.a.NAME_THREAD_COLORS_INSIDE_LEFT,Dr.a.NAME_THREAD_COLORS_INSIDE_RIGHT,Dr.a.NAME_THREAD_COLORS_OUTSIDE_LEFT,Dr.a.NAME_THREAD_COLORS_OUTSIDE_RIGHT,Dr.a.NAME_THREAD_COLORS_APPAREL,Dr.a.NAME_THREAD_COLORS_APPAREL_BACK];(this._par.isMockupGeneratorMode&&t.indexOf(e.name)>-1||this.shouldAllowFileColorChanger()&&i.indexOf(e.name)>-1)&&(e.visible=!1)},getSelectedColorNameArray:function(){var e=[];for(var t in this._selectedColors)e.push(this._selectedColors[t].color);return e},getSelectedColorHexArray:function(){return this._selectedColors.map((function(e){return e.colorCode}))},_getGeneratorVariantFromVariantMapping:function(e,t){var i,n;for(var r in e.mockupIds)if(i=this._generatorParams.generatorVariants[e.mockupIds[r]],r===t){n=this._generatorParams.generatorVariants[e.mockupIds[r]];break}for(var a in e.templateIds)if(i=this._generatorParams.generatorVariants[e.templateIds[a]],a===t)return this._isZoomedTemplateShown()?this._generatorParams.generatorVariants[e.templateIds[a]]:n||this._generatorParams.generatorVariants[e.templateIds[a]];return n||i},_isEmpty:function(){var e=this._technique===J.a.TYPE_STOCK_PRODUCT,t=this._canGeneratePreview()&&(this._templates.hasLayersForPlacement(this.getSelectedPlacementId())||this.hasDesignForPlacement(this.getSelectedPlacementId()));return e||!this.isAdvancedTemplateType()&&!t},isAdvancedTemplateType:function(){return this._templateType===h.a.TEMPLATE_TYPE_ADVANCED},_updateTemplateType:function(){this._templateType=this.getTemplateTypeLoaded()},renderEmptyMockup:function(e){var t;if(Or.a.clearPreviewStrings(),!this._canRenderNativeInsideLabelSelection()||this._isTemplatePreselected()){var i,n=e||this._getFirstEmptyMockupVariant(),r=this.getSelectedPlacementId();if(!n&&null!==(t=this._generatorParams)&&void 0!==t&&t.variantMapping)for(var a in this._generatorParams.variantMapping){if(n)break;var o=this._generatorParams.variantMapping[a];n=this._getGeneratorVariantFromVariantMapping(o,r)}if(w.a.clearNode(this._nodeMainMockupArea),w.a.removeClassName(this._nodeMainMockupArea,"loading"),w.a.removeClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._removeAdvancedTemplateWarning(),this._renderMockupVariantArea(),this._shouldInitDropZone())this._par.withGlobalDropZone&&(this.storeId?this._initDropZone(this.storeId,!0):(new u.a).getFirstId(function(e){this._initDropZone(e,!0),this.storeId=e}.bind(this)));else null===(i=this._dropZoneArea)||void 0===i||i.disable();if(this.hasDesignFill()&&(this._renderMockupMainArea(),this._onMainMockupAreaReady()),n){var s=this._getProductWarning();s&&s.append(this._nodeMainMockupArea),this.hasDesignFill()||Object(je.f)()||(w.a.addClassName(this._nodeMainMockupArea,"main-mockup-area--empty-mockup"),this._renderEmptyMockupImage(n)),this._needToShow3dTab&&!Rr.getFillColor(this._get3dViewConfigObject())&&(this._show3DPreview(),this._needToShow3dTab=!1)}}else this._renderInsideLabel()},_addAdvancedTemplateWarning:function(){this.nodeAdvancedTemplateWarning||(this.nodeAdvancedTemplateWarning=this._getWarningNode(dlang("generator","You are now in advanced mode")),w.a.addClassName(this.nodeAdvancedTemplateWarning,"generator-mockup__warning-message"),this.nodeAdvancedTemplateWarning.append(this._nodeMainMockupArea))},_removeAdvancedTemplateWarning:function(){this.nodeAdvancedTemplateWarning&&(w.a.removeNode(this.nodeAdvancedTemplateWarning),this.nodeAdvancedTemplateWarning=null)},_shouldInitDropZone:function(){var e,t,i=this.getSelectedPlacementId(),n=null===(e=this._conflictCalculator)||void 0===e?void 0:e.getConflictingPlacementTitles(i),r=!this._templates.hasLayersForPlacement(i)&&0!==(null==n?void 0:n.length),a=null===(t=this._placementLimiter)||void 0===t?void 0:t.isLimitReached(),o=Object(Q.d)(i);return this._isEmpty()&&!r&&!this._isEngraving()&&!a&&!this._isLargeEmbroidery()&&!o},_renderEmptyMockupImage:function(e,t){var i=this;return kd(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={image:e.backgroundImageUrl||"",shadow:e.backgroundShadowUrl||"",base:e.generatorImageUrl||""},n.next=3,i.waitProductLoad();case 3:if(Object(je.g)()){n.next=6;break}return i._updateEmptyMockupImage(e,r.base),n.abrupt("return");case 6:(r.image||r.shadow||r.base)&&(a=Math.max(640,Math.ceil(i._nodeMainMockupArea.clientWidth)*window.devicePixelRatio),pe.a.backgroundFromCache(r,{width:a,height:a},(function(n){n&&("data:,"!==n?i._updateEmptyMockupImage(e,n):t||i._renderEmptyMockupImage(e,!0))}),i._activeDesignerTabId===Ad.TAB_3D));case 7:case"end":return n.stop()}}),n)})))()},_updateEmptyMockupImage:function(e,t){var i;if(this._nodeMainMockupAreaImage&&w.a.removeNode(this._nodeMainMockupAreaImage),this.hasLayersForPlacement(this.getSelectedPlacementId())&&this._technique!==J.a.TYPE_STOCK_PRODUCT||(this._nodeMainMockupAreaImage=tag("img",{className:"img-responsive pf-mx-auto pf-my-0",src:t,style:{backgroundColor:e.backgroundColor||"",boxShadow:"inset 0 0 0 2px white"}}),this._nodeMainMockupAreaImage.complete||this._nodeMainMockupAreaImage.addEventListener("load",T.o.bind(null,E.EVENT_UPDATE_MOBILE_FOOTER)),this._handle3dAreaNodeForEmptyMockup()),null!=e&&null!==(i=e.dynamicTexts)&&void 0!==i&&i.length){var n=this.calculateMockupMainAreaSize(),r=e.mockupPosition.getRatioToScaleTo(n.maxWidth,n.maxHeight);for(var a in e.dynamicTexts)tag("span",{text:e.dynamicTexts[a].text,style:{position:"absolute",zIndex:2,top:Math.round(e.dynamicTexts[a].top/r)+"px",left:Math.round(e.dynamicTexts[a].left/r)+"px",width:e.dynamicTexts[a].width+"px",height:e.dynamicTexts[a].height+"px",fontSize:e.dynamicTexts[a].fontSize||"18px",fontWeight:e.dynamicTexts[a].fontWeight||"normal",textShadow:"0px 0px 2px rgba(0,0,0,0.30)",fill:e.dynamicTexts[a].color||"black",textAlign:e.dynamicTexts[a].textAlign||"center"}}).append(this._nodeMainMockupArea)}this._dropZoneArea&&this._dropZoneArea.setGeneratorVariant(e,!0)},_getVariantIdIntersection:function(e,t){if(!e||!t)return[];var i=[];return e.forEach((function(e){t.forEach((function(t){e.variantId===t.variantId&&i.push(t.variantId)}))})),i},_getFirstEmptyMockupVariant:function(){var e;if(null===(e=this._generatorParams)||void 0===e||!e.variantMapping)return null;var t=this.lastSelectedColor,i=this._getVariantIdIntersection(this._par.existingVariants,this._generatorParams.variantMapping);for(var n in this._generatorParams.variantMapping){var r=this._generatorParams.variantMapping[n],a=!1;if(!(i.indexOf(r.variantId)>-1)&&((!t||k.a.isEqual(r.color,t))&&(0!==this._selectedSizes.length&&this._selectedSizes[0]||(a=!0),(!r.color||this.isColorSelected(r.color))&&(!r.size||this.isSizeSelected(r.size)||a))))for(var o in this._generatorParams.availablePlacements){var s=this._generatorParams.availablePlacements[o];if(this.getSelectedPlacementId()===s.id){if(s.id===Z.a.TYPE_LABEL_INSIDE){var l,c=this._getFirstInsideLabelGeneratorVariantId();return null!==(l=Object(Q.a)())&&void 0!==l&&l.hasAdvancedInsideLabel&&this._generatorParams.allLabelTypesAvailable||(this.designData.labelTemplateType=Br.a.LABEL_CUSTOM),this._generatorParams.generatorVariants[c[this.designData.labelTemplateType]]}if(this._isZoomedTemplate(r,s))return this._generatorParams.generatorVariants[r.templateIds[s.id]];var u=r.mockupIds[s.id];if(u)return this._generatorParams.generatorVariants[u];if(u=r.templateIds[s.id])return this._generatorParams.generatorVariants[u]}}}return null},hasNeededQuality:function(){var e;if(!this._templates.getRequiredDpi()||null!==(e=Object(Q.a)())&&void 0!==e&&e.isEmbroidery()||this._technique===J.a.TYPE_STOCK_PRODUCT)return!0;var t=this._templates.getQuality();for(var i in this.generatorVariants){var n=Object(Au.c)(this._templates,this.generatorVariants[i]);if(n.layers.length>0&&n.getLowestDPI(t)<this._templates.getRequiredDpi())return!1}return!0},isFileLimitExceeded:function(e){var t=e===Ze.a?this._getMaxLicensedAssetLayerCount:this._getMaxFileLayerCount;for(var i in this.generatorVariants){var n=Object(Au.c)(this._templates,this.generatorVariants[i]),r=0;if(0!==n.layers.length){for(var a in n.layers)n.layers[a]instanceof e&&r++;if(r>t())return!0}}return!1},getFileLimitExceededText:function(){return dlang("dashboard","Max. limit for uploaded image layers is {file_limit} and for Premium Image layers is {licensed_asset_limit}. Please delete a layer if you want to add another one.").replace("{file_limit}",String(this._getMaxFileLayerCount())).replace("{licensed_asset_limit}",String(this._getMaxLicensedAssetLayerCount()))},isDesignValid:function(){switch(this._technique){case J.a.TYPE_EMBROIDERY:return!(this.hasEmbroideryPositionError()||this.hasEmbroideryTextSizeError()||this.hasEmbroideryTextTooBigError()||this.hasEmbroideryTextOverlapError());case J.a.TECHNIQUE_ENGRAVING:return!(this.hasLayersOverlapError()||this.hasTextSizeError()||this.hasClipartSizeError())}return!0},hasEmbroideryPositionError:function hasEmbroideryPositionError(){return Object(Au.a)(c.a.EMBROIDERY_OUT_OF_BOUNDS,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextSizeError:function hasEmbroideryTextSizeError(){return Object(Au.a)(c.a.EMBROIDERY_TEXT_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextTooBigError:function hasEmbroideryTextTooBigError(){return Object(Au.a)(c.a.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT,this._templates,this.generatorVariants,this._technique)},hasEmbroideryTextOverlapError:function hasEmbroideryTextOverlapError(){return Object(Au.a)(c.a.EMBROIDERY_LAYERS_OVERLAPPING,this._templates,this.generatorVariants,this._technique)},hasTextSizeError:function hasTextSizeError(){return Object(Au.b)(c.a.LAYER_TEXT_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasClipartSizeError:function hasClipartSizeError(){return Object(Au.b)(c.a.LAYER_CLIPART_TOO_SMALL,this._templates,this.generatorVariants,this._technique)},hasLayersOverlapError:function hasLayersOverlapError(){return Object(Au.b)(c.a.ENGRAVING_LAYERS_OVERLAPPING,this._templates,this.generatorVariants,this._technique)},hasLayersPositionError:function hasLayersPositionError(){return Object(Au.b)(c.a.LAYER_OUT_OF_BOUNDS,this._templates,this.generatorVariants,this._technique)},exceededTextLayerCharacterLimit:function(){if(!this.generatorVariants||!this.generatorVariants.length)return null;for(var e=null,t=0,i=this.generatorVariants.length;t<i;t++){var n=Object(Au.c)(this._templates,this.generatorVariants[t]);if(n&&(e=n.exceededTextLayerCharacterLimit()||null))break}return e},areEmbroideryThreadColorsValid:function(){return!this._embroideryHelper.hasEmbroideryThreadColorsError()},hasEmbroideryNotesError:function hasEmbroideryNotesError(){if(!this.shouldAllowFileColorChanger()||!this._generatorParams)return!1;var e=this._templates.getTemplates();if(this._embroideryHelper.hasLayerWithPartial3dType(e)){var t=this._productOptionsPicker.getValues();if(!t||!t[Dr.a.NAME_NOTES])return!0}return!1},_rememberColorsAndSizes:function(){try{window.localStorage.setItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS),JSON.stringify(this.getSelectedColorNameArray())),window.localStorage.setItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES),JSON.stringify(this._selectedSizes))}catch(e){console.error("Could not remember Colors and size")}},_forgetColorsAndSizes:function(){window.localStorage.removeItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS)),window.localStorage.removeItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES))},_getDefaultSelectedColors:function(){try{var e=window.localStorage.getItem(this._getSessionStorageKey(this._KEY_SELECTED_COLORS))}catch(e){console.log("Local storage not supported!")}var t=e&&JSON.parse(e)||[],i=[];this.allColors.forEach((function(e){return t.includes(e.color)?i.push(e):null}));var r=this._getDefaultPickerValue(n.a.TYPE_COLOR);return r.length>0?r:i.length?i:this.allColors.slice(0,1)},_getDefaultSelectedSizes:function(){try{var e=window.localStorage.getItem(this._getSessionStorageKey(this._KEY_SELECTED_SIZES))}catch(e){console.log("Local storage not supported!")}var t=e&&JSON.parse(e)||[],i=[];return this.allSizes.forEach((function(e){return t.includes(e)?i.push(e):null})),i.length?i:this.allSizes},_getSessionStorageKey:function(e){var t;return this._getStorageKeyPrefix()+(null===(t=Object(Q.a)())||void 0===t?void 0:t.productId)+e},_getStorageKeyPrefix:function(){return this._par.isOrderFlowMode?"orderFlow_":""},getGeneratorParams:function(){if(!this._generatorParams)throw"Cannot access generator params";return this._generatorParams},getPlacementFilePosition:function(e,t){var i=new Ga.a;if(i.id=e,!this.hasLayersForPlacement(i.id))return null;var n=this._getTemplate(e);for(var r in n.layers){var a=n.layers[r];if(!a.isTextLayer()&&!(a instanceof j.a))if(a instanceof Ze.a){if(a.licensedAssetItem.licensedAssetId===t)return a.position}else if(a.fileItem.fileId===t)return a.position}return null},_getTemplate:function(e){var t=this.getGeneratorVariantByPlacementId(e);return t?Object(Au.c)(this._templates,t):new Ha.a},setActivePlacement:function(e){this._placementSelector.setSelectedPlacementById(e,!0)},getMissingUploadPrintFiles:function(){var e,t=[];if((null===(e=Object(Q.a)())||void 0===e?void 0:e.type)!==J.a.TYPE_CUT_SEW)return t;var i,n=Id(this._generatorParams.availablePlacements);try{for(n.s();!(i=n.n()).done;){var r=i.value;Ia.MISSING_PRINTFILES_WARNING.indexOf(r.id)<0||(this.hasDesignForPlacement(r.id)||t.push(r.title))}}catch(e){n.e(e)}finally{n.f()}return t},_initDropZone:function(e,t){var i=this;return kd(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Promise.all([i.waitInitialRender(),i.waitProductLoad()]);case 2:(r=new Sa).targetNode=i.node,r.callback=i._onDropZoneFileUploaded.bind(i),r.onClick=_.debounce(i._onDropzoneClick.bind(i),250),r.storeId=e,i.storeId=e,r.isModalDesigner=i._par.isModalDesigner,r.activePlacement=i._placementSelector.getSelectedPlacement(),r.getMaxFileLayerCount=i._getMaxFileLayerCount.bind(i),r.validateAddingLayer=i.validateAddingLayer.bind(i),r.nodeDomElementDropArea=i._nodeMainMockupArea,r.onDropDomElement=i._onDropDomElement.bind(i),r.enableTransparencyValidation=!0,r.generatorVariant=i.previewMockupVariant,r.is3dViewActive=function(){return i._activeDesignerTabId===Ad.TAB_3D},i._dropZoneArea?(i._dropZoneArea.setActivePlacement(r.activePlacement),i._dropZoneArea.setGeneratorVariant(r.generatorVariant,!0),i._handle3dAreaNodeOnInitDropZone(t),i._isCurrentPlacementConflicting()||i._dropZoneArea.enable(),t&&!i._isCurrentPlacementConflicting()?w.a.removeClassName(i._dropZoneArea.node,"pf-d-none"):w.a.addClassName(i._dropZoneArea.node,"pf-d-none")):(i._dropZoneArea=new La(r),i._handle3dAreaNodeOnInitDropZone(t),i._clipartPicker&&(i._clipartPicker.fileDropZone=i._dropZoneArea),i._quickDesignPicker&&(i._quickDesignPicker.fileDropZone=i._dropZoneArea),i._licensedAssetPicker&&(i._licensedAssetPicker._par.fileDropZone=i._dropZoneArea));case 18:case"end":return n.stop()}}),n)})))()},_handle3dAreaNodeOnInitDropZone:function(e){if(!e||this._activeDesignerTabId!==Ad.TAB_3D)return this._dropZoneArea.append(this._nodeMainMockupArea),void(this._nodeMainMockupArea3dMode&&w.a.clearNode(this._nodeMainMockupArea3dMode));this._nodeMainMockupArea3dMode=tag("div","text-center row",[this._dropZoneArea,this._node3DArea]).append(this._nodeMainMockupArea)},_handle3dAreaNodeForEmptyMockup:function(){if(this._activeDesignerTabId!==Ad.TAB_3D)return w.a.removeClassName(this._nodeMainMockupAreaImage,"col-lg-9 order-2 order-lg-1"),void this._nodeMainMockupAreaImage.append(this._nodeMainMockupArea);this._nodeMainMockupArea3dMode&&(w.a.addClassName(this._nodeMainMockupAreaImage,"col-lg-9 order-2 order-lg-1"),this._nodeMainMockupAreaImage.append(this._nodeMainMockupArea3dMode))},_onDropzoneClick:function(){var e,t=this;this._getSelectedVariant()&&(C.a.isWindowSmallerThan(C.a.SM)?setTimeout((function(){var e;t.showDesignTab(),null===(e=t._dynamicStickyFooter)||void 0===e||e._onTabClick()}),0):(null===(e=this._dynamicStickyFooter)||void 0===e||e._onTabClick(),this._layerPicker.requestFilePicking(this._placementSelector.getSelectedPlacement())))},_getMaxFileLayerCount:function(){return this._layerPicker?this._layerPicker.fileCountLimit:this._getFileCountLimit()},_getMaxLicensedAssetLayerCount:function(){return this._layerPicker?this._layerPicker.licensedAssetCountLimit:10},_onDropZoneFileUploaded:function(e){this._isCurrentPlacementConflicting()?this._hideLoader(this.node):this._onPlacementItemAdded(this._placementSelector.getSelectedPlacement(),e)},_isCurrentPlacementConflicting:function(){if(!this._generatorParams.conflictingTypes)return!1;for(var e in this._generatorParams.conflictingTypes){var t=this._generatorParams.conflictingTypes[e];if(this.hasLayersForPlacement(t.placementId))for(var i in t.conflictsWith)if(t.conflictsWith[i].id===this.getSelectedPlacementId())return!0}return!1},_getFileCountLimit:function(){return cl.a.getLayerLimit(this.getSelectedPlacementTechnique())||5},getTemplateTypeLoaded:function(){return this.hasDesignForPlacement(this.getSelectedPlacementId())?this._isAdvancedTemplateLoaded()?h.a.TEMPLATE_TYPE_ADVANCED:h.a.TEMPLATE_TYPE_SIMPLE:this._canGeneratePreview()?h.a.TEMPLATE_TYPE_SIMPLE:this._templateType||null},_onDropDomElement:function(e,t){var i=e.dataTransfer.getData("domelement"),n=JSON.parse(i);if("getty"===n.type)this._licensedAssetPicker.onItemClick(n);else if("clipart"===n.type){var r=new qa.a.fromArray(n);this._onPlacementItemAdded(t,r)}else{var a=new za.a.fromArray(n);this._onPlacementItemAdded(t,a)}},getSelectedPlacementId:function(){var e;return null===(e=this._placementSelector)||void 0===e?void 0:e.getSelectedPlacementId()},getSelectedPlacementTechnique:function(){var e=this._placementSelector&&this._placementSelector.getSelectedPlacement();return e?e.technique:null},hasLayersForPlacement:function(e){return this._templates.hasLayersForPlacement(e)},hasDesignForPlacement:function(e){return this.hasLayersForPlacement(e)||this.hasDesignFill(e)},_getTemplateTabName:function(){var e=Object(Q.a)();return null!=e&&e.isApparelEmbroidery()||null!=e&&e.isEmbroideryApron()||this._technique===J.a.TYPE_EMBROIDERY&&null!=e&&e.isDtgShirt()?Ad.TAB_ZOOMED_IN_TITLE:Ad.TAB_TEMPLATE_TITLE},setActiveLayerByCustomizeKey:function(e){var t=this._templates.getLayerByCustomizeKey(e),i=this._templates.getTemplateByLayer(t);this.getSelectedPlacementId()!==i.placementId&&this.setActivePlacement(i.placementId),this._templates.setActiveLayer(t,"productCustomizer",!0)},getLayerByCustomizeKey:function(e){return this._templates.getLayerByCustomizeKey(e)},updateTextLayerByCustomizeKey:function(e,t,i){var n=this._templates.getLayerByCustomizeKey(e);n.text=t,n.color=i,this._templates.updateTextLayer(n,"productCustomizer")},updateTextboxLayerByCustomizeKey:function(e,t,i,n,r){var a=this._templates.getLayerByCustomizeKey(e);a.text=t,a.color=i,n&&(a.strokeColor=n),r&&(a.shadowColor=r),this._templates.updateTextLayer(a,"productCustomizer")},updateFileLayerByCustomizeKey:function(e,t,i){this._templates.updateFileLayerByCustomizeKey(e,t,i)},_setHideEmptyPlacements:function(e){if(this._par.hideEmptyPlacements){var t={};e.forEach((function(e){t[e.placementId]=e.layers.length})),this._generatorParams.availablePlacements.forEach((function(e){t[e.id]>0||(e.hide=!0)}))}},_shouldAllowCustomizablePush:function(e){return!0===this._par.isCustomizerEnabled&&!0===this._par.isCustomizerEnabledJS&&(e||!this._par.isChangePrintfileMode)&&(e||!this._par.existingVariants||0===this._par.existingVariants.length)},isEmbroidery:function(){var e;return(null===(e=Object(Q.a)())||void 0===e?void 0:e.isEmbroidery())||this._technique===J.a.TYPE_EMBROIDERY},shouldAllowFileColorChanger:function(){return this.isEmbroidery()},shouldIncludeTextThreadColors:function(){return!this.shouldAllowFileColorChanger()},shouldAllowTextboxLayer:function(){return void 0===window._USE_OLD_TEXT_LAYERS||!window._USE_OLD_TEXT_LAYERS},shouldEnablePatternPicker:function(){var e=Object(Q.a)(),t=(null==e?void 0:e.isStickerSheet())&&this.getSelectedPlacementId()===Z.a.TYPE_BACKGROUND;return!(null!=e&&e.isEmbroidery())&&this._technique!==J.a.TECHNIQUE_EMBROIDERY&&!this._isEngraving()&&!(null!=e&&e.isJewelry())&&(!(null!=e&&e.isSticker())||t)&&(this.isAllOverProduct(!0)||Object(je.f)())},shouldEnableRemoveBg:function(){var e;return!this._isEngraving()&&!(null!==(e=Object(Q.a)())&&void 0!==e&&e.isEmbroidery())&&Object(je.g)()},onRequestRemoveBg:function(e,t){var n,r=this;null==t||t.stopPropagation(),!e.isImageLayer()||null!==(n=e.fileItem.extra)&&void 0!==n&&n.noBackgroundFound||!this._shownBackgroundRemovalModal&&(this._shownBackgroundRemovalModal=!0,function(){var e=!0;try{e="1"===localStorage.getItem("BackgroundRemovalStorageKey")}catch(e){}if(e)return!1;var t=new ye.b,n=void 0;return t.components={"background-removal-modal":function(){return i.e(194).then(i.bind(null,"WmC3"))}},t.template="<background-removal-modal @onClosed=\"emitEvent('onClosed')\"/>",t.emitEvent=function(e,t){if("onClosed"===e){try{localStorage.setItem("BackgroundRemovalStorageKey","1")}catch(e){}n.destroy()}},(n=new ye.a(t)).append(document.body),!0}())||(e.isRemovedBg||e.removeBgPreview?(e.isRemovedBg=!e.isRemovedBg,e.isRemovedBg&&this._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_OK),this._templates.updateImageLayer(e,this._templates,!1),T.o(T.f)):(this._showLoader(this.node,{loadingText:dclang("generator","background removal","Hold on, weâre removing the background"),loadingTextTimeout:1}),this.generatorRepository.getRemoveBg(e,this._templates.getTemplateByLayer(e),!1,(function(t){r._hideLoader(r.node),t.result?t.removeBgPreview&&(e.isRemovedBg=!0,e.removeBgPreview=t.removeBgPreview,r._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_OK),r._templates.updateImageLayer(e,r._templates,!1),T.o(T.f)):t.noBackgroundFound?(e.fileItem.extra||(e.fileItem.extra={}),e.fileItem.extra.noBackgroundFound=!0,r._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND),r._layerPicker.render(),r._templates.updateImageLayer(e,r._templates,!0)):r._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK),Object(Ta.a)(e)}),(function(e){r._hideLoader(r.node),e.rateLimit?r._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_LIMIT_REACHED):r._mockup.getMockup().displayRemoveBackgroundMessage(Ad.REMOVE_BG_MESSAGE_ERROR)}))))},_checkOutOfBoundsLayers:function(){this._mockup.getMockup()&&(this._mockup.getMockup().displayCustomizableTextLayerError(),this._mockup.getMockup().displayOutOfBoundsIndicator()),this._renderFooter()},setSizeAndColor:function(e,t){this.lastSelectedSize=e,this.lastSelectedColor=t,this._selectedSizes=null===e?[]:[e];var i,n=!1,r=Id(this._generatorParams.colors);try{for(r.s();!(i=r.n()).done;){var a=i.value;if(k.a.isEqual(a.color,t)){this._selectedColors=[a],n=!0;break}}}catch(e){r.e(e)}finally{r.f()}n||1!==this._generatorParams.colors.length||(console.log("Color",t,"was not found within generator colors. We picked the only available color instead."),this._selectedColors=this._generatorParams.colors.slice(0)),this.updateView(),this._par.onPositionsChanged&&this._par.onPositionsChanged()},_removeCustomizerDataFromAllLayers:function(){this._shouldAllowCustomizablePush(!0)||this._templates.removeCustomizerDataFromAllLayers()},_canRenderNativeInsideLabelSelection:function(){var e=Object(Q.a)();return this._isPlacementInsideLabel()&&(null==e?void 0:e.isDtgShirt())&&(null==e?void 0:e.hasAdvancedInsideLabel)&&this._generatorParams.allLabelTypesAvailable},refreshClipartColors:function(){this._templates.refreshClipartColors(function(e){e instanceof j.a&&this._onClipartColorChanged(e)}.bind(this))},_isPlacementInsideLabel:function(){return this.getSelectedPlacementId()===Z.a.TYPE_LABEL_INSIDE},getDynamicStickyFooter:function(){return this._dynamicStickyFooter},_renderVideoTutorial:function(){if(w.a.clearNode(this._nodeVideoTutorial),!Object(je.g)())return!1;var e=!1;try{var t="1"===window.localStorage.getItem("VideoTutorialDoneStorageKey"),i="1"===window.sessionStorage.getItem("VideoTutorialHideStorageKey");if(e="1"===window.localStorage.getItem("VideoTutorialHasSeenStorageKey"),t||i)return}catch(e){console.log("Local storage not supported!")}tag("div","pf-mt-16 pf-border-top pf-pt-12",[tag("i","pf-i pf-i-video pf-i-24 pf-text-gray"),tag("a",{className:"pf-ui-body pf-link pf-pl-8",onclick:function(){localStorage.setItem("VideoTutorialHasSeenStorageKey","1"),this.showVideoModalWindow()}.bind(this)},dlang("generator","Video tutorials")),e?tag("a",{className:"pull-right pf-ui-body pf-link pf-pl-16",onclick:function(){localStorage.setItem("VideoTutorialDoneStorageKey","1"),w.a.clearNode(this._nodeVideoTutorial)}.bind(this)},dlang("generator","Done")):"",tag("a",{className:"pull-right pf-ui-body pf-link",onclick:function(){sessionStorage.setItem("VideoTutorialHideStorageKey","1"),localStorage.setItem("VideoTutorialHasSeenStorageKey","1"),w.a.clearNode(this._nodeVideoTutorial)}.bind(this)},dlang("generator","Hide"))]).append(this._nodeVideoTutorial)},showVideoModalWindow:function(){var e=this,t=new pt.a.Par;t.nodeClass="pf-modal product-push-video-tutorials-modal",t.title=dlang("generator","Video tutorials"),t.onClose=function(){return e._videoTutorialsModal.remove()};var i=tag("div","",[tag("div","pf-h4 pf-m-0 pf-pb-16",dlang("generator","Generator")),tag("div","row",[tag("div","col-12 col-md-8 pf-pb-12 pf-pb-md-40",[new Ns({videoId:be.a.isJp()?"0W9qsVapxnA":be.a.isEs()?"nYZKxcytoJY":be.a.isFr()?"apg3OPl52w0":"zu-qOmxmta0"})]),tag("div","col-12 col-md-4",[tag("div","pf-ui-subheading pf-m-0 pf-pb-40",dlang("generator","Mockup & printfile generator: Video tutorial"))]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","Printing")),new Ns({videoId:be.a.isEs()?"44ZwgqWhN9Y":"pB2IaQGoSMw"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","How to create t-shirt designs in Printful Mockup generator")),tag("div","pf-d-block pf-d-md-none",[new Ns({videoId:be.a.isEs()?"TgwTgkSrbj4":"H8iYo08qDeE"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create AOP products in Printful Mockup generator"))])]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","Embroidery")),new Ns({videoId:be.a.isEs()?"ArcUo2jTd3U":"aEfsyYe26Zg"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","Embroidery guidelines")),tag("div","pf-d-block pf-d-md-none",[new Ns({videoId:be.a.isEs()?"4Zd8-Td-t6s":"AzLAsZNvI00"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create embroidery files & mockups"))])]),tag("div","col-12 col-md-4",[tag("div","pf-h4 pf-pb-12 pf-pb-md-16 pf-m-0",dlang("generator","General tips")),new Ns({videoId:be.a.isEs()?"7MI3qDDYQbs":"mEIznf_BX6g"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-pb-md-32 pf-m-0",dlang("generator","Color correcting for print")),tag("div","pf-d-block pf-d-md-none",[new Ns({videoId:be.a.isEs()?"t-grwIrEjLM":"fxVFD00v3BU"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","10 tips for a perfect print file"))])]),tag("div","col-4 pf-d-none pf-d-md-block",[new Ns({videoId:be.a.isEs()?"TgwTgkSrbj4":"H8iYo08qDeE"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create AOP products in Printful Mockup generator"))]),tag("div","col-4 pf-d-none pf-d-md-block",[new Ns({videoId:be.a.isEs()?"4Zd8-Td-t6s":"AzLAsZNvI00"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","How to create embroidery files & mockups"))]),tag("div","col-4 pf-d-none pf-d-md-block",[new Ns({videoId:be.a.isEs()?"t-grwIrEjLM":"fxVFD00v3BU"}),tag("div","pf-ui-body pf-pt-12 pf-pb-40 pf-m-0",dlang("generator","10 tips for a perfect print file"))])])]);this._videoTutorialsModal=new pt.a(t),this._videoTutorialsModal.setContent(i),this._videoTutorialsModal.show()},_getAvailablePlacementByPlacementId:function(e){return this.getAvailablePlacements().filter((function(t){return t.id===e})).pop()||null},waitInitialRender:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(je.o)((function(){return e._isInitialised}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},waitProductLoad:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(je.o)((function(){return!e._isLoadingProduct}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},waitInitialProductless:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(je.o)((function(){return e._isInitialised&&e._placementOptions&&e._nodeMainMockupArea&&e._layerPicker}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},_getDesignMeta:function(){return this.designData.designMeta},_dsrSettingsApplied:function(){return!this.regionData||!!this.regionData.allowedSellingRegions},getTemplates:function(){return this._templates},getRawPlacementOptions:function(){var e;return(null===(e=this._placementOptions)||void 0===e?void 0:e.getData())||this._placementOptionsRawStorage},destroyVueComponents:function(){var e;this._layerPickerChooser.destroy(),null===(e=this._textboxPicker)||void 0===e||e._fontChooser.destroy(),this._designFillPicker.destroy(),w.a.clearNode(this._nodeMockupVariantArea)},_readFeatureFlagsForDesigner:function(){var e=this;return kd(regeneratorRuntime.mark((function t(){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Pi.x)(Pi.j);case 2:return i=t.sent,t.next=5,Object(Pi.x)(Pi.h);case 5:e._canAccessTools=t.sent,Object(je.m)(Pi.j,i),Object(je.m)(Pi.h,e._canAccessTools),e._canAccessNewToolbar=Object(je.a)();case 9:case"end":return t.stop()}}),t)})))()},_updateEmbroideryColors:function(){var e;if(this.isEmbroidery()){var t=this._templates.getActiveTemplate(this.getSelectedPlacementId());t&&this._manageEmbroiderySelectedColorsOnLayersAdded([t]),null===(e=this._textboxPicker)||void 0===e||e.updateEmbroideryColors()}},_getForcedTemplateType:function(e){return null!=e&&e.hasAdvancedInsideLabel&&null!=e&&e.canHaveOnlyLabelPlacement?h.a.TEMPLATE_TYPE_ADVANCED:this._templateType}},w.a.Base);Ad.TAB_PRODUCT="product",Ad.TAB_DESIGN="design",Ad.TAB_TEXT="text",Ad.TAB_TEXTBOX="textbox",Ad.TAB_IMAGE="image",Ad.TAB_CLIPART="clipart",Ad.TAB_MOCKUPS="mockups",Ad.TAB_QUICKDESIGN="quick_design",Ad.TAB_LICENSEDASSET="licensed_asset",Ad.TAB_TOOLBAR="toolbar",Ad.TAB_DESIGNER="designer",Ad.TAB_PREVIEW="preview",Ad.TAB_3D="3d",Ad.TAB_TEMPLATE_TITLE=dlang("generator","Design view"),Ad.TAB_ZOOMED_IN_TITLE=dlang("generator","Zoomed-in view"),Ad.TECHNIQUE_DEPENDENT_VALIDATION={},Ad.TECHNIQUE_DEPENDENT_VALIDATION[J.a.TECHNIQUE_ENGRAVING]=[c.a.ENGRAVING_LAYERS_OVERLAPPING,c.a.LAYER_TEXT_TOO_SMALL,c.a.LAYER_CLIPART_TOO_SMALL],Ad.REMOVE_BG_MESSAGE_OK="OK",Ad.REMOVE_BG_MESSAGE_NO_BACKGROUND_FOUND="NO_BACKGROUND_FOUND",Ad.REMOVE_BG_MESSAGE_OTHER_ACTIVE_TASK="OTHER_ACTIVE_TASK",Ad.REMOVE_BG_MESSAGE_LIMIT_REACHED="LIMIT_REACHED",Ad.REMOVE_BG_MESSAGE_ERROR="ERROR",window&&((globalThis||{}).PFProductPushDesigner=Ad)},u8P0:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ZtlV"),r=i("6JZw"),a=i("nF4n"),o=Class({optionValueId:0,optionId:0,option:null,optionName:"",value:"",toArrayKeys:["optionValueId","optionId","option","optionName","value"]},r.a);o.fromArray=function(e){var t=new o;return a.a.O2O(t,e),e.option&&(t.option=n.a.fromArray(e.option)),t},window&&((globalThis||{}).PFItemsCustomProductVariantOptionValue=o)},uGFp:function(e,t,i){"use strict";i.d(t,"a",(function(){return I}));var n=i("gqyd"),r=i("nvph"),a=i("IbzY"),o=i("EqHI"),s=i("7QI8"),l=i("Vx67"),c=i("bRD6"),u=i("X5Ic"),d=i("tw/D"),h=i("6JZw"),p=i("LvDl");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return m(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function v(e,t,i){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=T(e)););return e}(e,t);if(n){var r=Object.getOwnPropertyDescriptor(n,t);return r.get?r.get.call(i):r.value}})(e,t,i||e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=T(e);if(t){var r=T(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return P(this,i)}}function P(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(m,e);var t,i,h,f=b(m);function m(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),w(C(e=f.call(this)),"toArrayKeys",[].concat(g(m.DESIGN_DATA_KEYS),g(m.SYNC_DATA_KEYS))),w(C(e),"toArrayKeysWithoutSyncData",g(m.DESIGN_DATA_KEYS)),w(C(e),"storeId",null),w(C(e),"productId",null),w(C(e),"productTemplateId",null),w(C(e),"customProductId",null),w(C(e),"productOptions",null),w(C(e),"colors",null),w(C(e),"sizes",null),w(C(e),"templateSelectedSizes",[]),w(C(e),"defaultGeneratorVariantId",null),w(C(e),"templates",null),w(C(e),"title",""),w(C(e),"description",""),w(C(e),"multiLanguageDetails",null),w(C(e),"prices",null),w(C(e),"initPrices",null),w(C(e),"quantities",null),w(C(e),"filesIdsByPlacement",null),w(C(e),"isVisible",null),w(C(e),"withSizeGuide",!0),w(C(e),"sizeGuideUnits",[]),w(C(e),"useSizeConversion",null),w(C(e),"generatorVariants",null),w(C(e),"isTransparent",null),w(C(e),"categoryIds",null),w(C(e),"taxRuleId",null),w(C(e),"integrationMarketplaceCategoryIds",null),w(C(e),"tags",null),w(C(e),"genderCategory",null),w(C(e),"generatorVariantsIdsToSave",null),w(C(e),"templateKeysToSave",null),w(C(e),"multipleMockups",!1),w(C(e),"store",null),w(C(e),"product",null),w(C(e),"forceOrientation",null),w(C(e),"forceTemplateType",null),w(C(e),"generatorDesignId",null),w(C(e),"orderId",null),w(C(e),"arePrintfilesHidden",!1),w(C(e),"shippingProfileId",null),w(C(e),"selectedShippingCost",null),w(C(e),"labelTemplateType",null),w(C(e),"itemUniqueId",null),w(C(e),"productTranslations",null),w(C(e),"translationLanguage",null),w(C(e),"rawPlacementOptions",null),w(C(e),"lifelikeVariants",null),w(C(e),"additionalGeneratorVariantIds",null),w(C(e),"designMeta",null),w(C(e),"hexColors",null),w(C(e),"technique",null),w(C(e),"isFreeShippingEnabled",!1),w(C(e),"shouldShowWixMockupWarning",!1),w(C(e),"marketplaceIdentities",null),w(C(e),"pushableVideoIds",null),w(C(e),"optionGroup",null),w(C(e),"skuPrefix",null),w(C(e),"productVendor",""),w(C(e),"productType",""),e}return t=m,(i=[{key:"toArray",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v(T(m.prototype),"toArray",this).call(this,e);return null!=e&&e.withoutSyncData?Object(p.pick)(t,this.toArrayKeysWithoutSyncData):t}},{key:"getGeneratorVariant",value:function(e){for(var t in this.generatorVariants)if(this.generatorVariants[t].generatorVariantId==e)return this.generatorVariants[t];PF.DEV&&console.log("Generator variant not found: "+e)}},{key:"getTemplate",value:function(e,t){for(var i in this.templates)if(this.templates[i].templateId==t&&this.templates[i].placementId==e)return this.templates[i];PF.DEV&&console.log("Generator template not found: "+t)}},{key:"getMockupPreview",value:function(e,t,i){if(e instanceof l.a||e instanceof c.a){var n=e instanceof l.a?e:this.getGeneratorVariant(this.defaultGeneratorVariantId)||this.generatorVariants[0],o=e instanceof c.a?e:this.getTemplate(e.placementId,e.templateId),s=new r.a;return s.getDesignFill=d.a.fromArray(this.rawPlacementOptions).getPlacementFill,s.generatorVariant=n,s.maxWidth=t,s.maxHeight=i,s.template=o,s.isPrintfile=e instanceof c.a,s.lifelikeVariants=this.lifelikeVariants,s.designData=this,new a.a(s)}return tag("img",{className:"generator-picker__printfile",src:PF.ASSETS_URL+"images/layout/printfile.svg"})}},{key:"isEmbroidery",value:function(){for(var e in this.generatorVariants)if(s.a.TYPE_EMBROIDERY_FILES.indexOf(this.generatorVariants[e].placementId)>-1)return!0;return!1}},{key:"getPlacementIdsWithDesign",value:function(){var e=[];for(var t in this.templates){var i=this.templates[t];i.layers.length>0&&-1===e.indexOf(i.placementId)&&e.push(i.placementId)}return e=e.concat(this.getPlacementIdsWithDesignFillSet()).filter((function(e,t,i){return i.indexOf(e)===t}))}},{key:"hasPlacementDesignFillSet",value:function(e){var t;if(!this.rawPlacementOptions)return!1;var i=this.rawPlacementOptions.find((function(t){return t.placement===e}));return(null==i||null===(t=i.options)||void 0===t?void 0:t.designFillValue)||!1}},{key:"getPlacementIdsWithDesignFillSet",value:function(){if(!this.rawPlacementOptions)return[];var e=[];for(var t in this.rawPlacementOptions){var i=this.rawPlacementOptions[t].placement;this.hasPlacementDesignFillSet(i)&&-1===e.indexOf(i)&&e.push(i)}return e}},{key:"hasTextLayers",value:function(){for(var e in this.templates)if(this.templates[e].layers.filter((function(e){return e.isTextLayer()})).length>0)return!0;return!1}},{key:"hasCustomizableLayers",value:function(){return this.getCustomizablePlacementsCount()>0}},{key:"getNonCustomizablePlacementsCount",value:function(){return Object.keys(this.templates).length-this.getCustomizablePlacementsCount()}},{key:"getCustomizablePlacementsCount",value:function(){var e=0;for(var t in this.templates){var i=this.templates[t];c.a.getCustomizableLayersCount(i)>0&&e++}return e}},{key:"hasClipartLayers",value:function(){for(var e in this.templates)if(this.templates[e].layers.filter((function(e){return e instanceof n.a})).length>0)return!0;return!1}},{key:"isCustomProduct",value:function(){return this.productId===u.a.ID_CUSTOM_PRODUCT}},{key:"isFlatEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_FLAT)}},{key:"is3DEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_3D)}},{key:"isPartial3DEmbroidery",value:function(){return!(!this.productOptions||this.productOptions.embroidery_type!==s.a.DIGITIZATION_BOTH)}},{key:"hasLabelNative",value:function(){return!(!this.labelTemplateType||this.labelTemplateType!==o.a.LABEL_NATIVE)}},{key:"canHaveColorPicker",value:function(){return!this.product||this.product.canHaveColorPicker()}},{key:"cloneDesignData",value:function(){return Object(p.cloneDeep)(this)}}])&&_(t.prototype,i),h&&_(t,h),m}(h.a);w(I,"META_COPY_DESIGN","copy_design"),w(I,"META_QUICK_DESIGN","quick_design"),w(I,"DESIGN_DATA_KEYS",["storeId","productId","productTemplateId","customProductId","productOptions","filesIdsByPlacement","colors","sizes","templateSelectedSizes","defaultGeneratorVariantId","templates","title","quantities","useSizeConversion","genderCategory","generatorVariantsIdsToSave","multipleMockups","forceOrientation","forceTemplateType","generatorDesignId","arePrintfilesHidden","templateKeysToSave","orderId","itemUniqueId","labelTemplateType","rawPlacementOptions","lifelikeVariants","additionalGeneratorVariantIds","designMeta","marketplaceIdentities","isTransparent"]),w(I,"SYNC_DATA_KEYS",["description","multiLanguageDetails","translationLanguage","withSizeGuide","sizeGuideUnits","tags","categoryIds","integrationMarketplaceCategoryIds","isVisible","shippingProfileId","isFreeShippingEnabled","taxRuleId","selectedShippingCost","pushableVideoIds","prices","skuPrefix","productVendor","productType"])},uTcR:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"m",(function(){return a})),i.d(t,"k",(function(){return o})),i.d(t,"i",(function(){return s})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"c",(function(){return u})),i.d(t,"l",(function(){return d})),i.d(t,"n",(function(){return h})),i.d(t,"f",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"g",(function(){return g})),i.d(t,"j",(function(){return m})),i.d(t,"b",(function(){return _}));var n=i("Zwo4"),r="".concat(n.a,"/scenes"),a="m_updateScenesIntoRepo",o="m_setHasLoadedAllScenes",s="m_resetRepositories",l="g_hasLoadedAllScenes",c="g_getSceneDesign",u="g_getScene",d="g_templateScenes",h="g_userScenes",p="a_loadAllActiveScenes",f="a_loadScenes",g="a_loadSceneDesign",m="a_saveUserScene",_="a_deleteUserScene"},uV1j:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("S7uB"),r=i("QLN8"),a=i("6t3j"),o=function(){this.items=[],this.brands=[],this.materials=[]};o.prototype.page=0,o.prototype.pages=0,o.prototype.total=0,o.prototype.items=null,o.prototype.brands=null,o.prototype.materials=null,o.prototype.sellingRegionSettings=null,window&&((globalThis||{}).PFItemsProductList=o);var s=i("X5Ic"),l=i("nF4n"),c=i("Sucz"),u=function(){this.productRepository=new a.a};u.prototype.getProducts=function(e){var t=new u.GetProductsPar;l.a.O2O(t,e);var i=this.productRepository.getCachedProductList(t);!1===i?Object(c.a)("products/get",{categoryId:t.categoryId,storeId:t.storeId,page:t.page,perPage:t.perPage,brand:t.brand,search:t.search,includeDisabledInPush:t.includeDisabledInPush?1:0,activeOnly:t.activeOnly?1:0,withMedia:t.withMedia?1:0,withRelatedMediaLibraryItems:t.withRelatedMediaLibraryItems?1:0,isForGenerator:t.isForGenerator?1:0,isForProductTemplates:t.isForProductTemplates?1:0},$.proxy(this.getProductsRe,this,t)):t.callback(i)},u.prototype.getProductsRe=function(e,t){var i=t.products,n=new o;n.page=i.page,n.pages=i.pages,n.total=i.total,n.brands=i.brands,n.materials=i.materials,n.availableLocales=i.availableLocales,n.sellingRegionSettings=i.sellingRegionSettings,Object.values(i.items).forEach((function(e){var t=s.a.fromArray(e);t.availableLocales=i.availableLocales,n.items.push(t)})),this.productRepository.cacheProductList(e,n),e.callback(n)},u.prototype.clearCache=function(){this.productRepository.clearCache()},u.prototype.getCachedProductById=function(e){return this.productRepository.getCachedProductById(e)},u.prototype.getCachedVariantById=function(e){return this.productRepository.getCachedVariantById(e)},(u.GetProductsPar=function(){this.categoryId=0,this.storeId=null,this.page=1,this.perPage=20,this.callback=function(){console.error("No callback defined")}}).prototype.callback=null,u.GetProductsPar.prototype.categoryId=0,u.GetProductsPar.prototype.page=0,u.GetProductsPar.prototype.perPage=0,u.GetProductsPar.prototype.includeDisabledInPush=!1,u.GetProductsPar.prototype.activeOnly=!0,u.GetProductsPar.prototype.withRelatedMediaLibraryItems=!1,u.GetProductsPar.prototype.isForGenerator=!1,u.GetProductsPar.prototype.brand="",u.GetProductsPar.prototype.search="",u.GetProductsPar.prototype.getHash=function(){var e=[];for(var t in this)this.hasOwnProperty(t)&&e.push(this[t]);return e.join("|")},(globalThis||{}).PFCatalog=u;var d=i("nwx2"),h=i("cejl"),p=i("cCrT"),f=i("XLZy"),g=i("YBfo"),m=i("I/MA"),_=i("D5LZ"),v=function(e){this.par=new n.a,l.a.O2O(this.par,e||{}),this.categories=new r.a,this.tabs=new d.a("secondary"),this.node=tag("div","product-picker pf-mt-12",[this.tabs,this.nodeBody=tag("div","row row-flex product-list")]),this.isSampleOrder=!1};v.prototype=new l.a.Base,v.prototype.load=function(){f.a.show(this.nodeBody),(this._isSync||this.par.isForGenerator)&&(this.par.includeDisabledInPush=!1),(new u).getProducts({callback:this.loadRe.bind(this),categoryId:this.par.categoryId,storeId:this.par.storeId,brand:this.par.brand,search:this.par.search,isForGenerator:this.par.isForGenerator,isForProductTemplates:this.par.isForProductTemplates,page:1,perPage:200,includeDisabledInPush:this.par.includeDisabledInPush?1:0})},v.prototype.append=function(e){return this.node.append(e),this.load(),this},v.prototype.loadRe=function(e){var t,i=0;f.a.hide(this.nodeBody),l.a.clearNode(this.nodeBody),this.renderTabs(e),e.total||tag("div","text-center alert alert-warning pf-p-16 pf-m-12 col-xs-12",e.total?[tag("span","",["Sorry, your search ",tag("b","",['"'+this.par.search+'"'])," did not match any products."])]:["Sorry, no products were found"]).append(this.nodeBody);var n=e.sellingRegionSettings?_.c.fromArray(e.sellingRegionSettings):null;for(t in e.items){i+=1;var r=e.items[t];this.par.productId&&this.par.productId===r.productId&&this.productClick(r),new h.a({product:r,callback:this.productClick.bind(this,r,!0),isUnavailable:this.isUnavailable(r),showFulfillmentCountries:this.par.showFulfillmentCountries,showSizes:this.par.showSizes,isSampleOrderContext:this.isSampleOrderFlow(),sellingRegion:n}).append(this.nodeBody),i%4==0&&tag("div","clearfix hidden-xs").append(this.nodeBody),i%2==0&&tag("div","clearfix visible-xs visible-sm").append(this.nodeBody)}},v.prototype.renderTabs=function(e){if(this.tabs.clear(),!(e.brands.length<2))for(var t in ga("send",{hitType:"event",eventCategory:"ProductPicker",eventAction:"See brand tabs"}),this.tabs.add({caption:"All",onclick:this.loadBrand.bind(this,""),isActive:""===this.par.brand}),e.brands){var i=e.brands[t];this.tabs.add({caption:i,onclick:this.loadBrand.bind(this,i),isActive:i===this.par.brand})}},v.prototype.loadBrand=function(e){ga("send",{hitType:"event",eventCategory:"ProductPicker",eventAction:"Click on brand tab"}),this.par.brand=e,this.load()},v.prototype.productClick=function(e,t){this.isUnavailable(e)||(t&&this.par.shouldSaveState&&v.setState(e),this.par.callback(e))},v.prototype.isUnavailable=function(e){return e.isDisabledInPush&&(this.par.isForGenerator||this.par.isSync)},v.prototype.containsUnavailableProduct=function(e){for(var t in e.items)if(this.isUnavailable(e.items[t]))return!0;return!1},v.prototype.isSampleOrderFlow=function(){return g.a.isOrderFlow()&&(this.order=m.a.getActiveInstance(),this.isSampleOrder=this.order.isSampleOrder),this.isSampleOrder},v.setState=function(e){var t=new p.a,i={categoryId:e.categoryIds[0],productId:e.productId};t.query.categoryId=e.categoryIds[0],t.query.productId=e.productId,history.pushState(i,document.title,t.toString())},(globalThis||{}).PFProductPicker=v},up3R:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(e,t,i){this.selfRemove=i||!1,!1!==this.selfRemove&&(this.selfRemove=parseInt(this.selfRemove,10),isNaN(this.selfRemove)&&(this.selfRemove=2e3)),"string"==typeof e&&(e=[e]),this.node=tag("div","pf-status-message pf-status-message--"+t,e)};r.prototype=new n.a.Base,r.prototype.append=function(e){return this.selfRemove&&setTimeout(this.prettyRemove.bind(this),this.selfRemove),this.node.append(e),setTimeout(function(){n.a.addClassName(this.node,"pf-status-message--visible")}.bind(this),50),this},r.prototype.prepend=function(e){return this.selfRemove&&setTimeout(this.prettyRemove.bind(this),this.selfRemove),this.node.prepend(e),setTimeout(function(){n.a.addClassName(this.node,"pf-status-message--visible")}.bind(this),50),this},r.prototype.prettyRemove=function(){n.a.removeClassName(this.node,"pf-status-message--visible"),setTimeout(n.a.removeNode.bind(this,this.node),500)},r.TYPE_SUCCESS="success",r.TYPE_WARNING="warning",r.TYPE_ERROR="error",window&&((globalThis||{}).PFComponentsStatusMessage=r)},v217:function(e,t,i){"use strict";i.d(t,"l",(function(){return n})),i.d(t,"i",(function(){return r})),i.d(t,"k",(function(){return a})),i.d(t,"j",(function(){return o})),i.d(t,"h",(function(){return s})),i.d(t,"c",(function(){return l})),i.d(t,"d",(function(){return c})),i.d(t,"e",(function(){return u})),i.d(t,"f",(function(){return d})),i.d(t,"g",(function(){return h})),i.d(t,"b",(function(){return p})),i.d(t,"a",(function(){return f}));var n="color",r="graphic",a="graphic-text",o="graphic-background",s="gradient",l=1e3,c=100,u=1e3,d=100,h=Object.freeze({None:{value:null,name:dclang("generator","color","None")}}),p=Object.freeze({Black:{value:"#000000",name:dclang("generator","color","Black"),type:n},White:{value:"#ffffff",name:dclang("generator","color","White"),type:n},Whisper:{value:"#E8E8E8",name:dclang("generator","color","Whisper"),type:n},Silver:{value:"#BABABA",name:dclang("generator","color","Silver"),type:n},Nobel:{value:"#989898",name:dclang("generator","color","Nobel"),type:n},Grey:{value:"#696969",name:dclang("generator","color","Grey"),type:n},Zambezi:{value:"#606060",name:dclang("generator","color","Zambezi"),type:n},Eclipse:{value:"#3A3A3A",name:dclang("generator","color","Eclipse"),type:n},Cabaret:{value:"#D36371",name:dclang("generator","color","Cabaret"),type:n},"Mona Lisa":{value:"#F69D91",name:dclang("generator","color","Mona Lisa"),type:n},Red:{value:"#c70f28",name:dclang("generator","color","Red"),type:n},Alizarin:{value:"#ed1c24",name:dclang("generator","color","Alizarin"),type:n},"Medium Carmine":{value:"#B34436",name:dclang("generator","color","Medium Carmine"),type:n},Froly:{value:"#f27981",name:dclang("generator","color","Froly"),type:n},"Mandys Pink":{value:"#ffb18a",name:dclang("generator","color","Mandys Pink"),type:n},Romantic:{value:"#f7c194",name:dclang("generator","color","Romantic"),type:n},Flamenco:{value:"#f5873f",name:dclang("generator","color","Flamenco"),type:n},Orange:{value:"#f26522",name:dclang("generator","color","Orange"),type:n},Tenne:{value:"#bc5500",name:dclang("generator","color","Tenne"),type:n},Brown:{value:"#603913",name:dclang("generator","color","Brown"),type:n},Nude:{value:"#bf854b",name:dclang("generator","color","Nude"),type:n},Bronze:{value:"#D07F2B",name:dclang("generator","color","Bronze"),type:n},Buttercup:{value:"#DD9D26",name:dclang("generator","color","Buttercup"),type:n},"Banana Mania":{value:"#fff2b3",name:dclang("generator","color","Banana Mania"),type:n},"Paris Daisy":{value:"#ffe94d",name:dclang("generator","color","Paris Daisy"),type:n},Yellow:{value:"#ffc829",name:dclang("generator","color","Yellow"),type:n},Starship:{value:"#e5e43b",name:dclang("generator","color","Starship"),type:n},"Old Gold":{value:"#D2B648",name:dclang("generator","color","Old Gold"),type:n},Panache:{value:"#e7ffd7",name:dclang("generator","color","Panache"),type:n},Conifer:{value:"#a1c75b",name:dclang("generator","color","Conifer"),type:n},"Bay Leaf":{value:"#74b87e",name:dclang("generator","color","Bay Leaf"),type:n},Amulet:{value:"#789472",name:dclang("generator","color","Amulet"),type:n},Karaka:{value:"#393500",name:dclang("generator","color","Karaka"),type:n},Myrtle:{value:"#253A21",name:dclang("generator","color","Myrtle"),type:n},Edgewater:{value:"#bfd8c6",name:dclang("generator","color","Edgewater"),type:n},Green:{value:"#74a952",name:dclang("generator","color","Green"),type:n},Jewel:{value:"#006838",name:dclang("generator","color","Jewel"),type:n},Niagara:{value:"#31A28E",name:dclang("generator","color","Niagara"),type:n},Opal:{value:"#A9C4BA",name:dclang("generator","color","Opal"),type:n},Gothic:{value:"#70898D",name:dclang("generator","color","Gothic"),type:n},Viking:{value:"#4BB7BC",name:dclang("generator","color","Viking"),type:n},"Eastern Blue":{value:"#008b97",name:dclang("generator","color","Eastern Blue"),type:n},"Sherpa Blue":{value:"#00505a",name:dclang("generator","color","Sherpa Blue"),type:n},"Blizzard Blue":{value:"#a2e5f4",name:dclang("generator","color","Blizzard Blue"),type:n},"Summer Sky":{value:"#43b3d4",name:dclang("generator","color","Summer Sky"),type:n},Blue:{value:"#3399b5",name:dclang("generator","color","Blue"),type:n},Cerulean:{value:"#006993",name:dclang("generator","color","Cerulean"),type:n},"Jordy Blue":{value:"#6ea5d9",name:dclang("generator","color","Jordy Blue"),type:n},"Dark Cerulean":{value:"#0e3d84",name:dclang("generator","color","Dark Cerulean"),type:n},Mariner:{value:"#4460A7",name:dclang("generator","color","Mariner"),type:n},Navy:{value:"#0f1e3c",name:dclang("generator","color","Navy"),type:n},"Wild Blue Yonder":{value:"#8091BE",name:dclang("generator","color","Wild Blue Yonder"),type:n},"Chetwode Blue":{value:"#7275B2",name:dclang("generator","color","Chetwode Blue"),type:n},Purple:{value:"#46276b",name:dclang("generator","color","Purple"),type:n},"Ce Soir":{value:"#8a6aa7",name:dclang("generator","color","Ce Soir"),type:n},"East Side":{value:"#b195c2",name:dclang("generator","color","East Side"),type:n},Lily:{value:"#B6A9B2",name:dclang("generator","color","Lily"),type:n},Twilight:{value:"#e9bdd5",name:dclang("generator","color","Twilight"),type:n},Hopbush:{value:"#d072a6",name:dclang("generator","color","Hopbush"),type:n},"Deep Cerise":{value:"#cd368c",name:dclang("generator","color","Deep Cerise"),type:n},"Medium Red Violet":{value:"#c52d89",name:dclang("generator","color","Medium Red Violet"),type:n},Eggplant:{value:"#84175e",name:dclang("generator","color","Eggplant"),type:n},Tapestry:{value:"#B17D8C",name:dclang("generator","color","Tapestry"),type:n},"Cab Sav":{value:"#512D32",name:dclang("generator","color","Cab Sav"),type:n},Pink:{value:"#ffcad0",name:dclang("generator","color","Pink"),type:n},"Mandy 2":{value:"#CF4952",name:dclang("generator","color","Mandy 2"),type:n},Mandy:{value:"#C15860",name:dclang("generator","color","Mandy"),type:n},Burgundy:{value:"#7c1123",name:dclang("generator","color","Burgundy"),type:n}}),f=p},v49Q:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("g357"),r=i("Op/+"),a=i("3R2j"),o=i("n5ho"),s=i("nF4n"),l=Class({_filter:null,_params:null,_selectedValues:[],_filterTypeMaterial:"material",__construct:function(e){this._params=e,this.node=Object(s.a)({tag:"div"}),this._params.type&&(this._selectedValues=e.selectedItems,this.render(this._params.productItems))},getType:function(){return this._params.type},render:function(e){var t=this._prepareFilter(this._params.productItems),i=this._prepareFilter(e);t.length&&(t=t.map(this._formatItem.bind(this,i)),i.length>=6&&(t=t.sort(this._sortSelected)),s.a.clearNode(this.node),this._filter=new a.a({header:this._params.title,items:t,selectedValues:this._selectedValues,enableSearchAt:10,searchItemBuffer:0,onChange:this._onChange}),this._filter.append(this.node))},_isMaterialType:function(){return this._filterTypeMaterial===this.getType()},_formatItem:function(e,t){var i=!0;return this._isMaterialType()&&(i=!1),{shouldCapitalize:i,text:this._getLabel(t,this.getType()),value:t,isActive:e.includes(t)}},_getLabel:function(e,t){return S.labelOverrides[t]&&S.labelOverrides[t][e]?S.labelOverrides[t][e]:e},getSelected:function(){return this._filter?this._filter.getSelected():[]},getMatchingProducts:function(e){return e.filter(this.filterProduct)},_prepareFilter:function(e){var t=[].concat.apply([],e.map(this.filterParam.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_sortSelected:function(e,t){var i=e.isActive===t.isActive?0:e.isActive?-1:1;return this._selectedValues.indexOf(e.value)>-1?i=-2:this._selectedValues.indexOf(t.value)>-1&&(i=2),i},_onChange:function(e,t){this._selectedValues=e,e.length,this._params.onSomethingChanged(this,t)},getItems:function(){return this._filter?this._filter.items:[]},getProduct:function(e){return e instanceof o.a?e.getCachedProduct():e},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t=e[this._params.type];if(t instanceof Array){var i;for(var n in t)if(!(this._selectedValues.indexOf(t[n])<0)){i=!0;break}return i}return this._selectedValues.indexOf(t)>-1},isEnabled:function(e){if(!this._filter)return!1;if(this._filter.items.length>1)return!0;var t=this._filter.items.map((function(e){return e.value})),i=e.filter(function(e){var i=e[this._params.type];if(i instanceof Array){var n;for(var r in i)if(!(t.indexOf(i[r])<0)){n=!0;break}return n}return t.indexOf(i)>-1}.bind(this));return e.length!==i.length},isParamBlacklisted:function(e){return["STOCK-PRODUCT"].indexOf(e)>-1},filterParam:function(e){var t=e[this._params.type];if(t instanceof Array){var i=[];for(var n in t){var r=t[n];i.indexOf(r)>-1||i.push(r)}if(i.length)return i}if(t)return t},filterEmptyOrDuplicateParam:function(e,t,i){return!(!t||!t.length)&&(!this.isParamBlacklisted(t)&&e.indexOf(t)===i)}},s.a.Base);l.Par=Class({type:"",title:"",productItems:[],selectedItems:[],onSomethingChanged:null}),window&&((globalThis||{}).PFProductsCatalogFiltersBase=l);var c=i("X5Ic"),u=i("cCrT"),d=i("Tt8e"),h=Class({_prepareFilter:function(e){var t={},i=[];return e.map(function(e){this.getProduct(e).colors.map(function(e){i.indexOf(e.colorName)>-1?t[e.colorName].times++:(i.push(e.colorName),t[e.colorName]={name:e.colorName,times:1})}.bind(this))}.bind(this)),d.a.convertToArray(t).sort(this._sortColors).map((function(e){return e.name}))},_sortColors:function(e,t){return t.times-e.times},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t;for(var i in e.colors)this._selectedValues.indexOf(e.colors[i].colorName)<0||(t=!0);return this._isVariantAndHasColor(e)&&(t=!0),t},_isVariantAndHasColor:function(e){return e.color&&-1!==this._selectedValues.indexOf(e.color)},isEnabled:function(e){if(!this._filter)return!1;if(this._filter.items.length>1)return!0;var t=this._filter.items.map((function(e){return e.value})),i=e.filter((function(e){var i=!1;for(var n in e.colors)t.indexOf(e.colors[n].colorName)<0||(i=!0);return i}));return e.length!==i.length}},l);window&&((globalThis||{}).PFProductsCatalogFiltersColor=h);var p=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=[];for(var n in t.availableTechniques)t.availableTechniques[n]&&i.push(t.availableTechniques[n]);return t.isPolyPro&&i.push(c.a.TYPE_POLY_PRO),i},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t,i=e;for(var n in e instanceof o.a&&(i=e.getCachedProduct()),this._selectedValues.includes(c.a.TYPE_POLY_PRO)&&i.isPolyPro&&(t=!0),i.availableTechniques)if(!(this._selectedValues.indexOf(i.availableTechniques[n])<0)){t=!0;break}return t}},l);window&&((globalThis||{}).PFProductsCatalogFiltersTechnique=p);var f=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapSpecialOffer.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapSpecialOffer:function(e){var t=[];return this.getProduct(e).priceRange.bulkDiscountTiers&&t.push(dlang("global","Bulk discount")),t},filterProduct:function(e){return!this._selectedValues.length||!!this.getProduct(e).priceRange.bulkDiscountTiers}},l);function g(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return _(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}window&&((globalThis||{}).PFProductsCatalogFiltersSpecialOffers=f);var v=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t))},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=Object.values(t.fulfillmentCountriesMap);return g(new Set(i))},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t,i,n=function(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=m(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(s)throw a}}}}(this._mapProductOrVariant(e));try{for(n.s();!(i=n.n()).done;){var r=i.value;if(-1!==this._selectedValues.indexOf(r)){t=!0;break}}}catch(e){n.e(e)}finally{n.f()}return t}},l);window&&((globalThis||{}).PFProductsCatalogFiltersFulfillmentCountries=v);var y=i("md/F"),b=Class({_prepareFilter:function(e){var t=[].concat.apply([],e.map(this._mapProductOrVariant.bind(this)));return t.filter(this.filterEmptyOrDuplicateParam.bind(this,t)).sort(y.a.sizeSortingCallback)},_mapProductOrVariant:function(e){var t=this.getProduct(e),i=[];for(var n in t.allSizes)this._isSizeValid(n)&&t.allSizes[n]&&i.push(n);return i},_isSizeValid:function(e){return!!e},filterProduct:function(e){if(!this._selectedValues.length)return!0;var t=e,i=null;if(e instanceof o.a&&(t=e.getCachedProduct(),i=e),i)return this._selectedValues.indexOf(i.size)>-1;var n,r={};for(var a in t.allSizes)t.allSizes[a]&&(r[a]=t.allSizes[a]);for(var s in r)if(!(this._selectedValues.indexOf(s)<0)){n=!0;break}return n}},l);window&&((globalThis||{}).PFProductsCatalogFiltersSize=b);var P=Class({_isSizeValid:function(e){return"cm"===e.slice(-2)}},b);window&&((globalThis||{}).PFProductsCatalogFiltersSizeCm=P);var C=Class({_isSizeValid:function(e){return"cm"!==e.slice(-2)}},b);window&&((globalThis||{}).PFProductsCatalogFiltersSizeIn=C);var T=i("4Ru2"),w=i("4CFC"),I=i("YBfo"),S=Class({_productOrVariantItems:[],_onFilterCallback:null,_totalCount:null,_filters:[],_filterClasses:{},_params:[],_finalLoad:!0,_sellingRegionSetting:null,__construct:function(e,t,i,n,a,o){var s=this;this._productOrVariantItems=e,this._onFilterCallback=function(){s._finalLoad=!1;for(var e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];t.apply(s,i)},this._totalCount=n,this._allowedFulfillmentRegions=i||[],this._finalLoad=o,this._sellingRegionSetting=a,this._filterClasses[I.a.FILTER_TYPES.color]=h,this._filterClasses[I.a.FILTER_TYPES.availableTechniques]=p,this._filterClasses[I.a.FILTER_TYPES.specialOffers]=f,this._sellingRegionSetting||(this._filterClasses[I.a.FILTER_TYPES.fulfillmentCountries]=v),e.filter((function(e){return e.sizes?e.sizes.join(", ").indexOf("cm")>-1:e.size.indexOf("cm")>-1})).length>0?(this._filterClasses[I.a.FILTER_TYPES.cmSizes]=P,this._filterClasses[I.a.FILTER_TYPES.inSizes]=C):this._filterClasses[I.a.FILTER_TYPES.allSizes]=b,this._params=(new r.a).getActiveFilters(),this.node=tag("div","catalog__sidebar-filter__body pf-mr-40 pf-mr-sm-0"),this._setFilterLabels(),this.render(this._productOrVariantItems)},render:function(e){this._filters=this._params.map(this._initFilter.bind(this,e)).filter(function(t){return t._params.type===I.a.FILTER_TYPES.brandingOptions||t._params.type===I.a.FILTER_TYPES.specialOffers?t.isEnabled(e):t.isEnabled(e)&&t.getItems().length>1}.bind(this)),this._applyAdditionalConditions(),this._onSomethingChanged(null,!0),s.a.clearNode(this.node),tag("div","",this._filters).append(this.node)},getAllSelectedValues:function(){return this._filters.map((function(e){return e.getSelected()})).filter((function(e){return e.length>0}))},_initFilter:function(e,t){var i=new l.Par;return i.type=t.type,i.title=t.title,i.productItems=e,i.selectedItems=this._getSelectedFromUrl(t.type),i.onSomethingChanged=this._onSomethingChanged,new(this._getFilterClass(t.type))(i)},_getFilterClass:function(e){return this._filterClasses[e]?this._filterClasses[e]:l},_getFilterByType:function(e){return this._filters.filter(function(t){return e===t.getType()}.bind(this)).shift()},_onSomethingChanged:function(e,t){var i=this._productOrVariantItems,n=this.updateFilters(this._filters,e,i);this.updateFilters(n.filters,e,n.productItems,this._totalCount),this._pushToHistory(n.productItems,t,this._totalCount),this._onFilterCallback&&this._onFilterCallback(i)},updateFilters:function(e,t,i,n){var r=[];for(var a in e){var o=e[a];0===o.getSelected().length&&r.push(o),t&&t.getType()===o.getType()||o.render(i),o.getSelected().length&&(i=o.getMatchingProducts(i))}return{productItems:i,filters:r,totalCount:n}},_applyAdditionalConditions:function(){var e=this._getFilterByType(I.a.FILTER_TYPES.cmSizes),t=this._getFilterByType(I.a.FILTER_TYPES.inSizes),i=this._getFilterByType(I.a.FILTER_TYPES.allSizes),n=this._getFilterByType(I.a.FILTER_TYPES.fulfillmentCountries);e&&e.getItems().length&&t&&t.getItems().length?i&&i.remove():(e&&e.remove(),t&&t.remove()),n&&n.getSelected().length<1&&this._allowedFulfillmentRegions.length<n.getItems().length&&(n._selectedValues=this._allowedFulfillmentRegions)},_getSelectedFromUrl:function(e){var t=new u.a;return t.query[e]?t.query[e].split("!"):[]},_setFilterLabels:function(){var e={};e[c.a.TYPE_EMBROIDERY]=dlang("products","Embroidery"),e[c.a.TYPE_MUG]=dlang("products","Mug"),e[c.a.TYPE_POSTER]=dlang("products","Poster"),e[c.a.TYPE_FRAMED_POSTER]=dlang("products","Framed Poster"),e[c.a.TYPE_CANVAS]=dlang("products","Canvas"),e[c.a.TYPE_T_SHIRT]=dlang("products","Direct to garment (DTG)"),e[c.a.TYPE_SUBLIMATION]=dlang("products","Sublimation"),e[c.a.TYPE_PHONE_CASE]=dlang("products","Phone case"),e[c.a.TYPE_CUT_SEW]=dlang("products","Cut & sew"),e[c.a.TECHNIQUE_ENGRAVING]=dlang("products","Engraving"),e[c.a.TYPE_TOTE]=dlang("products","Tote"),e[c.a.TECHNIQUE_HANG_TAG]=dlang("products","Hang tag"),e[c.a.TYPE_POLY_PRO]=dlang("products","DTG On Polyester"),e[c.a.TYPE_POSTCARD]=dlang("products","Paper printing"),e["FRAMED-PRINT"]=dlang("products","Framed canvas"),S.labelOverrides[I.a.FILTER_TYPES.availableTechniques]=e;var t={};t[T.a.REGION_USA]=Object(w.b)(T.a.REGION_USA),t[T.a.REGION_MEXICO]=Object(w.b)(T.a.REGION_MEXICO),t[T.a.REGION_EUROPE]=Object(w.b)(T.a.REGION_EUROPE),t[T.a.REGION_EUROPE_LATVIA]=Object(w.b)(T.a.REGION_EUROPE_LATVIA),t[T.a.REGION_EUROPE_MEXICO]=Object(w.b)(T.a.REGION_EUROPE_MEXICO),t[T.a.REGION_JAPAN]=Object(w.b)(T.a.REGION_JAPAN),t[T.a.REGION_EUROPE_SPAIN]=Object(w.b)(T.a.REGION_EUROPE_SPAIN),t[T.a.REGION_AUSTRALIA]=Object(w.b)(T.a.REGION_AUSTRALIA),S.labelOverrides[I.a.FILTER_TYPES.fulfillmentCountries]=t},_pushToHistory:function(e,t,i){var r={};this._filters.map((function(e){e.getSelected().length&&(r[e.getType()]=e.getSelected())})),n.a.createAndDispatch(this._finalLoad?I.a.EVENT_ALL_LOADED:I.a.EVENT_PRODUCTS_FILTER,{filter:r,productsOrVariants:e,skipHistory:!!t,totalCount:i})}},s.a.Base);S.labelOverrides={},window&&((globalThis||{}).PFProductsCatalogFilters=S)},v4sp:function(e,t,i){"use strict";var n=i("7OPZ"),r=i("PMDB"),a=i("y70k"),o=i("9Nv7");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=h(e);if(t){var r=h(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return d(this,i)}}function d(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function p(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(FileLibraryError,e);var t=u(FileLibraryError);function FileLibraryError(){return l(this,FileLibraryError),t.apply(this,arguments)}return FileLibraryError}(i("xVVd").a);p(f,"code","FILE_LIBRARY_ERROR"),p(f,"defaultMessage","Unknown File Library error");var g,m,_,v=i("d8FT"),y=i.n(v),b=i("UfWW"),P=i.n(b),C=i("MJIl"),T=i.n(C),w=i("oCYn"),I=i("46ud"),S=i("atGO"),E=i("XJFE"),O=i("edgZ");function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||A(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||A(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){if(e){if("string"==typeof e)return R(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function N(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function D(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?N(Object(i),!0).forEach((function(t){x(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):N(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function x(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var F=function(){return{recentlyUsedFiles:[],directories:[],directoryLimit:999,showMore:!1,files:[],isFilesLoading:!0,fileSelectionData:[],fileSelectionLimit:48,navigation:{currentDirectory:null,totalFilesCount:0,currentPage:1,pageItemsLimit:24,pageItemsSort:I.c.CREATED_DATE_DESC,pageSwitchCallback:function(){},isSearch:!1,searchQuery:"",shouldUseRouter:!0},overrides:{currentDirectory:{directFilesCount:void 0,directoriesCount:void 0},directories:[]},editDirectory:null,itemToMove:null,modal:{isShowing:!1,headerText:null,contentText:null,action:{primary:null,secondary:null}},flowData:{},rpcInProgress:{}}};t.a={namespaced:!0,state:F(),mutations:(g={},x(g,n.J,(function(e){Object.assign(e,F())})),x(g,n.P,(function(e,t){var i=D(D(D({},t),{capabilities:t.getCapabilities()}),y()(e.overrides.currentDirectoryOverrides,(function(e){return void 0!==e})));e.overrides.currentDirectoryOverrides={directFilesCount:void 0,directoriesCount:void 0},t=new r.c(i),e.navigation.currentDirectory=t,e.navigation.totalFilesCount=t.directFilesCount})),x(g,n.R,(function(e,t){e.overrides.directories.forEach((function(e){var i=P()(t,{id:e.id});-1!==i&&(t[i]=e)})),e.overrides.directories=[],e.directories=t})),x(g,n.X,(function(e,t){w.default.set(e,"files",t)})),x(g,n.U,(function(e,t){e.editDirectory=t})),x(g,n.mb,(function(e,t){e.showMore=t})),x(g,n.cb,(function(e,t){e.modal=D(D({},e.modal),t)})),x(g,n.T,(function(e,t){e.directoryLimit=t})),x(g,n.V,(function(e,t){new E.a({content:t.message,type:E.a.TYPE_ERROR,duration:4e3})})),x(g,n.bb,(function(e,t){new E.a({content:t,type:E.a.TYPE_SUCCESS,duration:2e3})})),x(g,n.Q,(function(e,t){e.overrides.currentDirectoryOverrides=D(D({},e.currentDirectoryOverrides),t)})),x(g,n.S,(function(e,t){e.overrides.directories=t})),x(g,n.Z,(function(e,t){e.navigation.isSearch=t})),x(g,n.lb,(function(e,t){e.navigation.searchQuery=t})),x(g,n.ib,(function(e,t){e.navigation.totalFilesCount=t})),x(g,n.eb,(function(e,t){e.navigation.pageItemsLimit=t})),x(g,n.fb,(function(e,t){e.navigation.pageItemsSort=t})),x(g,n.gb,(function(e,t){e.navigation.pageSwitchCallback=t})),x(g,n.db,(function(e,t){e.navigation.currentPage=t})),x(g,n.ab,(function(e,t){e.itemToMove=t})),x(g,n.hb,(function(e,t){e.navigation.shouldUseRouter=t})),x(g,n.W,(function(e,t){e.fileSelectionData=e.fileSelectionData.filter((function(e){return e.page!==t.page})),t.selectedFiles.length&&(e.fileSelectionData=[].concat(L(e.fileSelectionData),[t]))})),x(g,n.Y,(function(e,t){e.flowData=t})),x(g,n.jb,(function(e,t){e.recentlyUsedFiles=t})),x(g,n.kb,(function(e,t){var i=t.rpcKey,n=t.inProgress,r=void 0===n||n;e.rpcInProgress[i]=r,e.rpcInProgress=Object.entries(e.rpcInProgress).reduce((function(e,t){var i=k(t,2),n=i[0],r=i[1];return!1===r||(e[n]=r),e}),{})})),g),actions:(m={},x(m,n.D,(function(e,t){var i,a,s,l=e.state,c=e.commit,u=e.dispatch,d=!1!==(null==t?void 0:t.shouldCommit),h={directoryId:(isNaN(t)?null==t?void 0:t.directoryId:t)||null,limit:(null==t?void 0:t.limit)||(l.showMore?l.directoryLimit:7)};null!==(i=l.flowData)&&void 0!==i&&i.productId&&(h.productId=null===(a=l.flowData)||void 0===a?void 0:a.productId,h.technique=null===(s=l.flowData)||void 0===s?void 0:s.technique);var p=n.D+JSON.stringify(h);return c(n.kb,{rpcKey:p,inProgress:!0}),function(e){return Object(o.a)("library/get-directory",e)}(h).then((function(e){var t,i,a,o,s,h,p;if(!e.success)throw new f(e.error.toString());var g=new r.c({id:e.directory.id,parentId:e.directory.parentId,type:e.directory.type,storeId:e.directory.storeId,name:e.directory.name,filesCount:null===(t=e.directory)||void 0===t?void 0:t.stats.filesCount,directFilesCount:null===(i=e.directory)||void 0===i?void 0:i.stats.directFilesCount,directoriesCount:null===(a=e.directory)||void 0===a?void 0:a.stats.directoriesCount,metadata:JSON.parse((null===(o=e.directory)||void 0===o?void 0:o.metadata)||"{}"),pathDirectories:(null===(s=e.directory)||void 0===s?void 0:s.pathDirectories)||[],capabilities:(null===(h=e.directory)||void 0===h?void 0:h.capabilities)||{}}),m=[];if(((null===(p=e.directory)||void 0===p?void 0:p.items)||[]).forEach((function(e){var t;m.push(new r.c({id:e.id,parentId:e.parentId,type:e.type,name:e.name,filesCount:null===(t=e.stats)||void 0===t?void 0:t.filesCount,directoriesCount:null==e?void 0:e.stats.directoriesCount,metadata:JSON.parse((null==e?void 0:e.metadata)||"{}"),capabilities:(null==e?void 0:e.capabilities)||{}}))})),!d)return{currentDirectory:g,directories:m};c(n.P,g),c(n.R,m);var _=function(){u(n.E,{directoryId:g.id,page:l.navigation.currentPage,sort:l.navigation.pageItemsSort})};c(n.gb,_),_()})).catch((function(e){c(n.V,e)})).finally((function(){c(n.kb,{rpcKey:p,inProgress:!1})}))})),x(m,n.E,(function(e,t){var i,r,s,l,c=e.state,u=e.commit,d=!1!==(null==t?void 0:t.shouldCommit),h=!1!==(null===(i=null==t?void 0:t.shouldCommitRpcInProgress)||void 0===i||i),p={directoryId:t.directoryId,page:(null==t?void 0:t.page)||1,sort:t.sort||I.c.CREATED_DATE_DESC};null!==(r=c.flowData)&&void 0!==r&&r.productId&&(p.productId=null===(s=c.flowData)||void 0===s?void 0:s.productId,p.technique=null===(l=c.flowData)||void 0===l?void 0:l.technique);var g=n.E+JSON.stringify(p);return h&&u(n.kb,{rpcKey:g,inProgress:!0}),function(e){return Object(o.a)("library/get-directory-files",e)}(p).then((function(e){if(!e.success)throw new f(e.error.toString());var t=e.files.map((function(e){return a.a.fromArray(e)})).map((function(e){return new S.a({sourceFile:e})}));if(!d)return{files:t};u(n.X,t),u(n.eb,e.limit)})).catch((function(e){u(n.V,e)})).finally((function(){h&&u(n.kb,{rpcKey:g,inProgress:!1})}))})),x(m,n.M,(function(e,t){var i,r=e.state,s=e.commit;s(n.lb,t);var l,c,u={query:t,page:r.navigation.currentPage,sort:r.navigation.pageItemsSort};null!==(i=r.flowData)&&void 0!==i&&i.productId&&(u.productId=null===(l=r.flowData)||void 0===l?void 0:l.productId,u.technique=null===(c=r.flowData)||void 0===c?void 0:c.technique);var d=n.M+JSON.stringify(u);return s(n.kb,{rpcKey:d,inProgress:!0}),Object(o.a)("library/search-files",u).then((function(e){if(!e.success)throw new f(e.error.toString());var t=e.files.map((function(e){return a.a.fromArray(e)})).map((function(e){return new S.a({sourceFile:e})}));s(n.X,t),s(n.ib,e.total),s(n.eb,e.limit)})).catch((function(e){s(n.V,e)})).finally((function(){s(n.kb,{rpcKey:d,inProgress:!1})}))})),x(m,n.d,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/delete-directory",{directoryId:t}).then((function(e){if(!e.success)throw new f(e.error.toString());i.directories.some((function(e){if(e.id===t)return r(n.Q,{directoriesCount:i.navigation.currentDirectory.directoriesCount-(e.directoriesCount+1)}),!0})),r(n.bb,dlang("library","Folder deleted"))})).catch((function(e){r(n.V,e)}))})),x(m,n.e,(function(e,t){var i=e.state,r=e.commit,a=e.dispatch;return Object(o.a)("library/delete-directory-file",{fileIds:t.fileIds,directoryId:t.directoryId}).then((function(e){if(!e.success)throw new f(e.error.toString());var o=i.navigation.totalFilesCount-t.fileIds.length,s=o<0?0:o;r(n.Q,{directFilesCount:s}),a(n.F),r(n.bb,dnlang("library","File deleted","Files deleted",t.fileIds.length))})).catch((function(e){r(n.V,e)}))})),x(m,n.f,(function(e,t){(0,e.commit)(n.U,t.clone())})),x(m,n.K,(function(e,t){var i=e.commit,r="library/save-directory",a=t.toArray();return t.id||(r="library/create-directory",a=D(D({},t.toArray()),{parentId:t.parentId})),Object(o.a)(r,{directory:JSON.stringify(a)}).then((function(e){if(!e.success)throw new f(e.error.toString());return e})).catch((function(e){i(n.V,e)}))})),x(m,n.L,(function(e){var t,i=e.state,r=e.commit,a=e.dispatch,o=i.editDirectory;o.parentId||(o.parentId=null===(t=i.navigation.currentDirectory)||void 0===t?void 0:t.id);a(n.K,o).then((function(e){if(e)if(i.editDirectory.id){var t=i.directories.map((function(e){return e.id===i.editDirectory.id?i.editDirectory:e}));r(n.R,t),r(n.U,null),r(n.bb,dlang("library","Folder saved"))}else{var o;r(n.Q,{directoriesCount:i.navigation.currentDirectory.directoriesCount+1}),a(n.D,null===(o=i.navigation.currentDirectory)||void 0===o?void 0:o.id),r(n.U,null),r(n.bb,dlang("library","New folder created"))}}))})),x(m,n.ob,(function(e,t){var i=e.state,r=e.commit,a=i.editDirectory;a.setAvatar(t),r(n.U,a)})),x(m,n.c,(function(e){(0,e.commit)(n.U,null)})),x(m,n.pb,(function(e,t){(0,e.commit)(n.mb,t)})),x(m,n.G,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/move-directory",{directoryId:t.directory.id,destinationDirectoryId:t.destinationDirectory.id}).then((function(e){if(!e.success)throw new f(e.error.toString());var a=t.destinationDirectory,o=i.itemToMove;return o.parentId=a.id,T()(a.pathDirectories,{id:i.navigation.currentDirectory.id})||r(n.Q,{directoriesCount:i.navigation.currentDirectory.directoriesCount-(o.directoriesCount+1)}),a.directoriesCount+=o.directoriesCount+1,a.filesCount+=o.filesCount,r(n.S,[o,a]),r(n.ab,null),r(n.bb,dlang("library","You have moved the folder")),!0})).catch((function(e){return r(n.V,e),!1}))})),x(m,n.H,(function(e,t){var i=e.state,r=e.commit;return Object(o.a)("library/move-directory-file",{fileIds:t.fileIds,destinationDirectoryId:t.destinationDirectory.id}).then((function(e){if(!e.success)throw new f(e.error.toString());return i.fileSelectionData.forEach((function(e){var i=e.selectedFiles.filter((function(e){return!t.fileIds.includes(e.id)}));r(n.W,{page:e.page,selectedFiles:i})})),r(n.Q,{directFilesCount:i.navigation.currentDirectory.directFilesCount-t.fileIds.length}),r(n.ab,null),r(n.bb,dnlang("library","You have moved the file","You have moved the files",t.fileIds.length)),!0})).catch((function(e){return r(n.V,e),!1}))})),x(m,n.nb,(function(e,t){(0,e.commit)(n.cb,{isShowing:null==t?void 0:t.isShowing,headerText:null==t?void 0:t.headerText,contentText:null==t?void 0:t.contentText,action:{primary:null==t?void 0:t.actionPrimary,secondary:null==t?void 0:t.actionSecondary}})})),x(m,n.C,(function(e){(0,e.commit)(n.cb,{isShowing:!1})})),x(m,n.N,(function(e,t){var i,r=e.state,a=e.commit,o=e.getters;if(r.files){var s=r.fileSelectionData.find((function(e){return e.page===t.page})),l=null!==(i=null==s?void 0:s.selectedFiles.length)&&void 0!==i?i:0,c=r.fileSelectionLimit-(o[n.A].length-l);if(t.selectAllItems){var u=[];for(var d in r.files)if(u.push(r.files[d]),u.length===c)break;a(n.W,{page:t.page,selectedFiles:u})}else a(n.W,{page:t.page,selectedFiles:[]})}})),x(m,n.O,(function(e,t){var i,r=e.state,a=e.commit;if(r.files){var o=r.fileSelectionData.find((function(e){return e.page===t.page})),s=[],l=null!==(i=null==o?void 0:o.selectedFiles)&&void 0!==i?i:[];t.selected?(s.push(t.file),l.push(t.file)):(s=s.filter((function(e){return e.id!==t.file.id})),l=l.filter((function(e){return e.id!==t.file.id}))),a(n.W,{page:t.page,selectedFiles:l})}})),x(m,n.F,(function(e){var t=e.commit;if(!e.getters[n.m])return Object(o.a)("library/get-recently-used-files",{}).then((function(e){if(!e.success)throw new f(e.error.toString());var i=e.files.map((function(e){var t=a.a.fromArray(e);return(new O.a).cacheFile(t),new S.a({sourceFile:t})}));t(n.jb,i)})).catch((function(e){t(n.V,e)}))})),x(m,n.I,(function(e){var t,i=e.state,r=e.dispatch;i.navigation.isSearch?r(n.M,i.navigation.searchQuery):r(n.D,null===(t=i.navigation.currentDirectory)||void 0===t?void 0:t.id)})),m),getters:(_={},x(_,n.g,(function(e){return e.navigation.currentDirectory})),x(_,n.h,(function(e){return e.directories})),x(_,n.l,(function(e){return e.files})),x(_,n.j,(function(e){return e.editDirectory})),x(_,n.B,(function(e){return e.showMore})),x(_,n.r,(function(e){return e.modal})),x(_,n.i,(function(e){return e.directoryLimit})),x(_,n.p,(function(e){return e.navigation.isSearch})),x(_,n.x,(function(e){return e.navigation.totalFilesCount})),x(_,n.y,(function(e){return Math.ceil(e.navigation.totalFilesCount/(e.navigation.pageItemsLimit||1))||1})),x(_,n.s,(function(e){return e.navigation.currentPage})),x(_,n.t,(function(e){return e.navigation.pageItemsLimit})),x(_,n.v,(function(e){return e.navigation.pageSwitchCallback})),x(_,n.u,(function(e){return e.navigation.pageItemsSort})),x(_,n.q,(function(e){return e.itemToMove})),x(_,n.w,(function(e){return e.navigation.shouldUseRouter})),x(_,n.A,(function(e){var t=[];return e.fileSelectionData.forEach((function(e){t=[].concat(L(t),L(e.selectedFiles))})),t})),x(_,n.k,(function(e){return e.fileSelectionData})),x(_,n.z,(function(e){return e.recentlyUsedFiles})),x(_,n.b,(function(e){var t=[],i=e.navigation.currentDirectory;if(!(i instanceof r.c))return t;if(e.navigation.isSearch){var n=i.pathDirectories.length?i.pathDirectories[0]:i;t.push({id:null,title:n.name}),t.push({id:-1,title:dlang("dashboard","Search results")})}else(t=i.pathDirectories.map((function(e){return{id:e.parentId?e.id:null,title:e.name}}))).push({id:i.id,title:i.name});return t})),x(_,n.m,(function(e){var t,i;return void 0===(null===(t=e.flowData)||void 0===t?void 0:t.isAnonymous)||(null===(i=e.flowData)||void 0===i?void 0:i.isAnonymous)})),x(_,n.n,(function(e){var t;return(null===(t=e.flowData)||void 0===t?void 0:t.id)===I.f.generator})),x(_,n.o,(function(e){var t;return(null===(t=e.flowData)||void 0===t?void 0:t.id)===I.f.library})),_)}},vCXY:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var n=i("4qC0"),r=i.n(n),a=i("TP7S"),o=i.n(a),s=i("XLZy");function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==i)return;var n,r,a=[],o=!0,s=!1;try{for(i=i.call(e);!(o=(n=i.next()).done)&&(a.push(n.value),!t||a.length!==t);o=!0);}catch(e){s=!0,r=e}finally{try{o||null==i.return||i.return()}finally{if(s)throw r}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function u(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function d(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){u(a,n,r,o,s,"next",e)}function s(e){u(a,n,r,o,s,"throw",e)}o(void 0)}))}}function h(e,t){return p.apply(this,arguments)}function p(){return(p=d(regeneratorRuntime.mark((function e(t,i){var n,a,c,u,h,p,f,g,m,_=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>2&&void 0!==_[2]?_[2]:{},a=n.onStartLoading,c=n.onFailLoading,u=n.delayLoadingBy,h=r()(t)?document.querySelector(t)||void 0:t||void 0,p=[],a=o()(a)?function(e){e&&s.a.show(e,{minHeight:500})}:null,c=o()(c)?function(e){e&&s.a.hide(e)}:null,a&&p.push(Promise.resolve(a(h))),p.push(d(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!PF.DEV||!u){e.next=4;break}return console.warn("Async component loading delayed! Make sure you remove the delay before pushing to production!"),e.next=4,new Promise((function(e){return setTimeout(e,u)}));case 4:return e.abrupt("return",Promise.resolve(i()));case 5:case"end":return e.stop()}}),e)})))()),f=[void 0,void 0],e.prev=8,e.next=11,Promise.all(p);case 11:f=e.sent,e.next=20;break;case 14:if(e.prev=14,e.t0=e.catch(8),!c){e.next=19;break}return e.next=19,Promise.resolve(c(h,e.t0));case 19:throw e.t0;case 20:return g=l(f,2),m=g[1],e.abrupt("return",{node:h,deps:m});case 22:case"end":return e.stop()}}),e,null,[[8,14]])})))).apply(this,arguments)}},vUaG:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("n6mh"),r=i("+erO"),a=i("Fpf/"),o=i("cd9T"),s=i("mrkb"),l=i("wo5H"),c=Class({propItem:null,getType:function(){return c.TYPE},_getNewLayer:function(){return new c},getOriginalClone:function(e){var t=this._getNewLayer();return e||(t.uniqueId=this.uniqueId),t.propItem=this.propItem,t.flipX=this.flipX,t.flipY=this.flipY,t.overrideImage=this.overrideImage,t.position=this.position.getFromOriginalRatio(),t.patternType=this.patternType,t.patternSpacing=this.patternSpacing,t.originalPosition=this.originalPosition.getClone(),t.disableCentering=Object(s.f)(),t},getSourceWidth:function(){return this.propItem.width},getSourceHeight:function(){return this.propItem.height},getSourceDpi:function(){return this.getDPI()},isConfigurationSame:function(e){return e.propItem.id===this.propItem.id},toArray:function(){return{type:a.a,object:c.BE_OBJECT,id:this._getPropId(),url:this._getUrl(),position:this.position?this.position.toArray():{},patternType:this.patternType,patternSpacing:this.patternSpacing,flipX:this.flipX,flipY:this.flipY,uniqueId:this.uniqueId,disableCentering:Object(s.f)()}},_getUrl:function(){return this.propItem.image.urlLarge},_getPropId:function(){return this.propItem.id},getDPI:function(){return 600},isVector:function(){return!1},isSimple:function(){return!1},isPropLayer:function(){return!0}},n.a);c.TYPE=l.l.PROP,c.BE_OBJECT="mockupMakerObject",c.fromObject=function(e){var t=new c;return t.propItem=Object(o.b)(e.id),t.originalPosition=new r.a,t.position=t.originalPosition.getClone(),t}},vUhP:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n=i("C00j"),r=i("97Rx"),a=i("cvaF"),o=i("97Au"),s=i("Sucz"),l=Class({_modal:null,_languageContext:"user settings menu",_currency:"",__construct:function(e){this._currency=e;var t=this._getTaxOptionNode();if(null!==t){var i=tag("form","row",[tag("div","form-group col-md-12 pf-mb-0",[tag("div","taxes",[t])])]),r=new o.a.Par;r.title=n.a.getTaxName(this._currency)+" "+clang("user settings menu","settings"),r.onClose=this._onModalClose.bind(this),this._modal=new o.a(r),this._modal.setContent(i),this._modal.setFooterContent(this._getFooterContent()),this._modal.show()}},_getTaxOptionNode:function(){if(!n.a.isTaxAvailable(this._currency))return null;var e={className:"pf-mr-12",type:"radio",value:"1",name:"showPricesWithTax"},t=Object.assign({},e);return t.value="0",n.a.isTaxIncluded(this._currency)?e.checked="checked":t.checked="checked",tag("div",null,[tag("input",{type:"hidden",name:"taxCurrency",value:this._currency}),tag("p","pf-mb-16",lang("Please choose how you want to see prices")),tag("label",null,[tag("input",t),clang("tax","Excluding {taxName}").replace("{taxName}",n.a.getTaxName(this._currency))]),tag("label",null,[tag("input",e),clang("tax","Including {taxName}*").replace("{taxName}",n.a.getTaxName(this._currency))]),tag("div","pf-mt-12",[tag("p",{className:"pf-ui-caption text-muted pf-my-0"},[clang("tax","*Note that {taxName} rates may vary. The final price will be calculated at checkout.").replace("{taxName}",n.a.getTaxName(this._currency))])])])},_onModalClose:function(){this._modal.remove()},_getFooterContent:function(){return tag("div","pf-d-flex pf-justify-content-start",[tag("button",{className:"pf-btn pf-btn-primary pf-mr-8",type:"button",prop:{onclick:this._onApplySettings.bind(this)}},lang("Apply")),tag("button",{className:"pf-btn pf-btn-secondary",type:"button",prop:{onclick:this._onModalClose.bind(this)}},lang("Cancel"))])},_onApplySettings:function(){var e=new FormData(this._modal.getContentNode().querySelector("form"));Object(s.a)("user-settings/update-settings",e,function(e){1===e.success?(n.a.toggleTaxInclusion(e.currency,Boolean(e.includeTax)),this._onModalClose(),location.reload()):alert(e.error)}.bind(this),{processData:!1,contentType:!1})}});window&&((globalThis||{}).PFComponentsPriceTaxInclusionModal=l);var c=i("qs6/"),u=i("nF4n"),d={createPeriodicPriceDiscountAnnouncement:function(e,t,i){var n=e.minPriceDiscount&&e.minPriceDiscount.discountType,r=n&&c.a.DISCOUNT_PERIODIC_TYPES.includes(n);if(e.minPriceDiscount&&r&&1e3*e.minPriceDiscount.discountExpiryDate>=Date.now()){var a="";return t&&e.minPriceDiscount.discountExpiryDate&&(a=tag("span","pf-ml-8 pf-text-muted pf-ui-caption",lang("Valid until")+" "+prettyDate(e.minPriceDiscount.discountExpiryDate))),tag("div",i,[tag("span",{className:"pf-badge pf-badge--primary pf-badge-rect",style:{position:"unset"}},c.a.getDiscountName(n).toUpperCase()),a])}return""},createDiscountElementFromPriceRange:function(e,t,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a="";e.minPriceDiscount&&(a=c.a.getDiscountAppliedText(e.minPriceDiscount.discountType));var o=d.createDiscountElement({originalPrice:e.minOriginalPrice,currentPrice:e.minPrice,tooltipText:a,currency:e.currency,adjustmentForBasePrice:t,showTaxInclusion:i,returnRaw:r}),s=i&&n.a.isTaxAvailable(e.currency)?tag("br"):"";return o&&e.maxPrice>e.minPrice&&tag("span","",[dlang("products","Starting from")+" ",s]).prepend(o),o},createDiscountElementFromPriceDataArray:function(e){var t=e.priceData,i=e.basePriceAdjustment,n=void 0===i?0:i,r=e.showTaxInclusion,a=void 0!==r&&r,o=e.splitLines,s=void 0!==o&&o,l=e.allowTaxInclusion,u=void 0!==l&&l,h=e.flipLines,p=void 0!==h&&h;if(!t.length)return tag("span");var f,g,m,_,v=null;t.forEach((function(e){f=!f||e.originalPrice<f.originalPrice?e:f,g=!g||e.originalPrice>g.originalPrice?e:g,m=!m||e.discountedPrice<m.discountedPrice?e:m,_=!_||e.discountedPrice>_.discountedPrice?e:_,v=null===v||null===e.discountType||e.discountType===v?v||e.discountType:c.a.DISCOUNT_TYPE_MULTIPLE}));var y=c.a.getDiscountAppliedText(v);return d.createDiscountElement({originalPrice:f.originalPrice,currentPrice:m.discountedPrice,maxOriginalPrice:g.originalPrice,maxCurrentPrice:_.discountedPrice,tooltipText:y,currency:f.currency,adjustmentForBasePrice:n,showTaxInclusion:a,splitLines:s,flipLines:p,allowTaxInclusion:u})},createDiscountElementFromPriceData:function(e){var t=e.priceData,i=e.basePriceAdjustment,n=void 0===i?0:i,r=e.showTaxInclusion,a=void 0!==r&&r,o=e.splitLines,s=void 0!==o&&o,l=e.allowTaxInclusion,u=void 0!==l&&l,h=e.flipLines,p=void 0!==h&&h,f=e.tooltipPlacement,g=void 0===f?"top":f,m=e.returnRaw,_=void 0!==m&&m,v=t.discountedPrice;t.basePriceDiscount>0&&(v=t.price);var y=c.a.getDiscountAppliedText(t.getDisplayDiscountType());return d.createDiscountElement({originalPrice:t.originalPrice,currentPrice:v,tooltipText:y,currency:t.currency,adjustmentForBasePrice:n,showTaxInclusion:a,splitLines:s,flipLines:p,allowTaxInclusion:u,tooltipPlacement:g,returnRaw:_})},getDiscountTextFromAppliedDiscountTypes:function(e){var t="";return e.forEach((function(e){""!=t&&(t+=" "+lang("and")+" "),t+=c.a.getDiscountTypeText(e)})),""!=t&&(t+=" "+clang("(discount) applied","applied")),t},createDiscountElementFromPrices:function(e,t,i){return this.createDiscountElement({originalPrice:e,currentPrice:t,currency:i})},createDiscountElement:function(e){var t,i,o=e.originalPrice,s=e.currentPrice,c=e.maxOriginalPrice,d=e.maxCurrentPrice,h=e.tooltipText,p=void 0===h?"":h,f=e.currency,g=e.adjustmentForBasePrice,m=void 0===g?0:g,_=e.showTaxInclusion,v=void 0!==_&&_,y=e.splitLines,b=void 0!==y&&y,P=e.flipLines,C=void 0!==P&&P,T=e.allowTaxInclusion,w=void 0!==T&&T,I=e.tooltipPlacement,S=void 0===I?"top":I,E=e.returnRaw,O=void 0!==E&&E;if(!s&&!o)return tag("span");c=c===o?null:c,d=d===s?null:d,m&&(o+=m,s+=m,c=c?c+m:null,d=d?d+m:null);var k=a.a.getCurrency(f);if(k?(o=parseFloat(r.a.getDisplayValue(o,k)),s=parseFloat(r.a.getDisplayValue(s,k)),c=c?parseFloat(r.a.getDisplayValue(c,k)):null,d=d?parseFloat(r.a.getDisplayValue(d,k)):null):(o=parseFloat(o.toFixed(2)),s=parseFloat(s.toFixed(2)),c=c?parseFloat(c.toFixed(2)):null,d=d?parseFloat(d.toFixed(2)):null),c=c===d?null:c,w=(v=v||!1)||w||!1,o=o===s?null:o){var L=prettyMoney(w?n.a.addTax(f,o):o,f);c&&c!==o&&(L+=" - "+prettyMoney(w?n.a.addTax(f,c):c,f)),t={tag:"span",className:"original-price",text:L,style:{textDecoration:"line-through"},attr:{"aria-hidden":"true"}}}if(void 0!==s){var A=prettyMoney(w?n.a.addTax(f,s):s,f);d&&d!==s&&(A+=" - "+prettyMoney(w?n.a.addTax(f,d):d,f)),i={tag:"span",className:"current-price",text:" "+A},""!=p&&(i.attr={"data-toggle":"tooltip","data-original-title":"<span>"+p+"</span>","data-placement":S,"data-trigger":"hover"})}t&&(i.className=i.className+" discounted");var R=t?Object(u.a)(t):null,N=i?Object(u.a)(i):null;b=b||!1;var D,x="";if(v&&n.a.isTaxAvailable(f)){var F="";F=n.a.isTaxIncluded(f)?clang("Tax inclusion in price","incl. {taxName}").replace("{taxName}",n.a.getTaxName(f)):clang("Tax inclusion in price","excl. {taxName}").replace("{taxName}",n.a.getTaxName(f)),(x=tag(b?"div":"span",{className:"pf-link pf-ml-4 pf-ui-caption clickable",attr:{role:"link",tabindex:0}},[F])).addEventListener("click",(function(e){e.stopPropagation(),e.preventDefault(),new l(f)}))}return D=C?tag("span","discount-container pf-bold",[N||"",R||"",x]):tag("span","discount-container pf-bold",[R||"",N||"",x]),void 0!==s&&""!=p&&$(N).tooltip({html:!0}),O?{currentPrice:s,originalPrice:o,currency:f,allowTaxInclusion:w}:D}};(globalThis||{}).PFUtilsDiscount=d},vYHe:function(e,t,i){"use strict";i.d(t,"d",(function(){return p})),i.d(t,"a",(function(){return g})),i.d(t,"c",(function(){return f})),i.d(t,"b",(function(){return m}));var n=i("LvDl"),r=i.n(n);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return(o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=c(e);if(t){var r=c(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var p=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.manifests=t.manifests?r.a.mapValues(t.manifests,(function(e){return new f(e)})):{},this.marketplaces=t.marketplaces?r.a.mapValues(t.marketplaces,(function(e){return new m(e)})):{}},f=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.marketplaceIdentity=t.marketplaceIdentity,this.integrationType=t.integrationType,this.displayName=t.displayName,this.disabled=t.disabled||!1,this.displayGroup=t.displayGroup,this.logoCssClass=t.logoCssClass,this.authorizationUrl=t.authorizationUrl},g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,e),this.storeId=t.storeId,this.marketplaceIdentity=t.marketplaceIdentity,this.priority=Number.parseInt(t.priority||1),this.status=t.status,this.displayStatus=t.displayStatus,this.message=t.message,this.settings=t.settings,this.createdAt=t.createdAt,this.updatedAt=t.updatedAt,this.isPendingChanges=t.isPendingChanges||!1}return d(e,[{key:"countsAsEnabled",get:function(){return[e.STATUS_ACTIVE,e.STATUS_ERROR].includes(this.status||e.STATUS_INACTIVE)}}],[{key:"STATUS_ACTIVE",get:function(){return"active"}},{key:"STATUS_INACTIVE",get:function(){return"inactive"}},{key:"STATUS_ERROR",get:function(){return"error"}}]),e}(),m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(i,e);var t=s(i);function i(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return h(this,i),(e=t.call(this,n)).isSaved=n.isSaved||!1,e.isEnabled=n.isEnabled||e.isSaved&&e.countsAsEnabled||!1,e}return d(i,[{key:"exportForStoreSettingsPOST",value:function(){return{marketplaceIdentity:this.marketplaceIdentity,priority:this.priority,isEnabled:this.isEnabled}}}]),i}(g)},vfQf:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("bUho"),r=i("nF4n"),a=Class({__construct:function(e,t,i,a,o){this._onDestroyCallback=o;var s={placement:"left",trigger:"manual",content:"EMPTY",template:Object(r.a)({tag:"div",className:"popover popover--extended",els:[{tag:"div",className:"popover__inner",els:[{tag:"div",className:"popover__title",els:[t]},{tag:"div",className:"popover__content",els:[i]},{tag:"a",className:"pf-btn pf-btn-primary margin-top-20",text:lang("Got it"),onclick:this._destroy.bind(this)}]},{tag:"div",className:"popover__overlay",onclick:this._destroy.bind(this)}]})};if(a)for(var l in a)s[l]=a[l];this._popover=new n.a(e,t,i,s)},show:function(){return this._popover.show()},_destroy:function(e){e&&e.stopPropagation(),this._popover.destroy(),this._onDestroyCallback&&this._onDestroyCallback()}});window&&((globalThis||{}).PFComponentsPopoverExtended=a)},"wDP+":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));i("5B9T");function n(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i="";switch(e){case 1:i="pf-rounded-right";break;case 2:i="pf-rounded-bottom-right";break;case 3:i="pf-rounded-bottom-left";break;default:i="pf-rounded"}return t||(i+="--small"),i}},wRc6:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("SvWC"),r=Class({id:null,shortName:null,name:null,returnAddressId:null,allowedIpList:[],isProductionBranch:!0,isAttendanceEnabled:!0,timezone:null,region:null,address:null,warehousingProductTypes:[],getRegion:function(){return 4===this.id||8===this.id?dlang("dashboard","Europe"):lang("United States")}});r.fromArray=function(e){var t=new r;return t.id=e.id,t.shortName=e.short_name,t.name=e.name,t.returnAddressId=e.return_address_id,t.isProductionBranch=1===e.is_production_branch,t.isAttendanceEnabled=1===e.is_attendance_branch,t.timezone=e.timezone,t.region=e.region,t.warehousingProductTypes=e.warehousingProductTypes,e.allowed_ip_list&&(t.allowedIpList=JSON.parse(e.allowed_ip_list)),e.address&&(t.address=n.a.fromArray(e.address)),t},window&&((globalThis||{}).PFItemsBranch=r)},wo5H:function(e,t,i){"use strict";i.d(t,"s",(function(){return n})),i.d(t,"e",(function(){return r})),i.d(t,"u",(function(){return a})),i.d(t,"t",(function(){return o})),i.d(t,"b",(function(){return s})),i.d(t,"d",(function(){return l})),i.d(t,"c",(function(){return c})),i.d(t,"j",(function(){return u})),i.d(t,"k",(function(){return d})),i.d(t,"i",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"h",(function(){return f})),i.d(t,"f",(function(){return g})),i.d(t,"o",(function(){return m})),i.d(t,"m",(function(){return _})),i.d(t,"p",(function(){return v})),i.d(t,"n",(function(){return y})),i.d(t,"q",(function(){return b})),i.d(t,"r",(function(){return P})),i.d(t,"l",(function(){return C})),i.d(t,"a",(function(){return T}));var n=100,r=450,a="-no-pulse",o="-lifelike",s="crop-move",l="crop-scale",c="crop-rotate",u=2,d=100,h="#ffffff",p="#fff9d2",f="#7a7979",g="#000000",m="PRODUCT",_="LOGO",v="PROMO",y="MOCKUP",b="ADDED",P="REMOVED",C={CLIPART:"clipart",TEXTBOX:"textbox",FILE:"file",PROP:"prop",LICENSED_ASSET:"licensedAsset",GROUP_QUICK_DESIGN:"QUICK_DESIGN",GROUP_LOGO_TEMPLATE:"LOGO_TEMPLATE"},T="ALL_OVER"},x0He:function(e,t,i){"use strict";i.d(t,"a",(function(){return B})),i.d(t,"b",(function(){return Y}));var n=i("oCYn"),r=i("LvDl"),a=i.n(r),o=i("SBaP"),s=i("bA+e"),l=i("nF4n");function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=_(e);if(t){var r=_(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return g(this,i)}}function g(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t){return O(e,C(e,t,"get"))}function b(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}function P(e,t,i){return w(e,C(e,t,"set"),i),i}function C(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function T(e,t,i,n){return E(e,t),S(i,"set"),w(e,i,n),n}function w(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}function I(e,t,i){return E(e,t),S(i,"get"),O(e,i)}function S(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function E(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function O(e,t){return t.get?t.get.call(e):t.value}var k=new WeakMap,L=new WeakMap,A=new WeakMap,R=new WeakMap,N=new WeakMap,D=new WeakSet,x=new WeakSet,F=new WeakMap,M=new WeakSet,B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(o,e);var t,i,n,r=f(o);function o(e){var t,i,n,a;return d(this,o),t=r.call(this),M.add(m(t)),F.set(m(t),{get:z,set:void 0}),x.add(m(t)),D.add(m(t)),k.set(m(t),{writable:!0,value:void 0}),L.set(m(t),{writable:!0,value:void 0}),A.set(m(t),{writable:!0,value:void 0}),R.set(m(t),{writable:!0,value:void 0}),N.set(m(t),{writable:!0,value:void 0}),P(m(t),L,e||{}),b(m(t),D,j).call(m(t)),P(m(t),R,o.getNewUniqueID()),t.node=tag(y(m(t),L).wrapTag||"div",{className:"mke-vue-wrapper",id:y(m(t),R)}),(i=o,n=o,a=V,E(i,n),a).call(o),P(m(t),A,b(m(t),x,U).call(m(t))),b(m(t),M,G).call(m(t)),t}return t=o,n=[{key:"getNewUniqueID",value:function(){var e;return"MkeVueWrapper"+(T(o,o,q,1+(e=+I(o,o,q))),e)}}],(i=[{key:"updateData",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=y(this,A);if(!n)throw new Error("Attempting to call updateData on a destroyed instance! ".concat(y(this,R)));a.a.forIn(y(this,N),(function(r,a){!e.hasOwnProperty(a)&&i&&n.$delete(y(t,N),a),e.hasOwnProperty(a)&&n.$set(y(t,N),a,e[a])}))}},{key:"setDataProp",value:function(e,t){var i=y(this,A);if(!i)throw new Error("Attempting to call setDataProp on a destroyed instance! ".concat(y(this,R)));i.$set(y(this,N),e,t)}},{key:"getRef",value:function(e){var t,i;if(!y(this,A))throw new Error("Attempting to access a destroyed Vue instance! ".concat(y(this,R)));return null!==(t=y(this,A))&&void 0!==t&&null!==(i=t.$refs)&&void 0!==i&&i.hasOwnProperty(e)?y(this,A).$refs[e]:void 0}},{key:"destroy",value:function(){var e=y(this,A);e&&(e.$destroy(),P(this,A,null),delete o.activeComponentMap[y(this,R)],l.a.clearNode(this.node))}}])&&h(t.prototype,i),n&&h(t,n),o}(o.a);function V(){I(B,B,H)||(Object(s.b)(n.default,s.a.DYNAMIC_INSTANCE),T(B,B,H,!0))}function j(){a.a.forIn(y(this,L).components||{},(function(e){if(!(e instanceof Function))throw new Error("MkeVueWrapper components must be defined like so: {'component': () => import('./xyz')}")})),a.a.forIn(y(this,L).plugins||{},(function(e,t){if(!e)throw new Error("MkeVueWrapper plugin '".concat(t,"' is null/undefined!"))}))}function U(){var e=this;P(this,N,y(this,L).initialData?a.a.clone(y(this,L).initialData):{});var t=y(this,L).emitEvent,i=new n.default(function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}({template:y(this,L).template||"<div>Empty MkeVueWrapper instance! Please contact support!</div>",components:a.a.clone(y(this,L).components||{}),data:function(){return y(e,N)},methods:{emitEvent:function(e,i){t&&t(e,i)}},created:function(){y(e,L).onCreated&&y(e,L).onCreated()},mounted:function(){y(e,L).onMounted&&y(e,L).onMounted()}},y(this,F)));return B.activeComponentMap[y(this,R)]=i,i}function z(){return a.a.omit(y(this,L).plugins||{},["template","components","data","methods","created","mounted","watch","computed","props","el","render","renderError","beforeCreate","beforeDestroy","destroyed","beforeMount","mounted","beforeUpdate","updated","activated","deactivated","errorCaptured","propsData"])}function G(){l.a.clearNode(this.node);var e=tag("div","mke-vue-wrapper__inner");e.append(this.node),y(this,A).$mount(e)}var H={writable:!0,value:void 0},q={writable:!0,value:0};v(B,"activeComponentMap",{});var Y=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(this,e),this.components=t.components||{},this.plugins=t.plugins||{},this.template=t.template||"",this.initialData=t.initialData||{},this.emitEvent=t.emitEvent,this.onCreated=t.onCreated,this.onMounted=t.onMounted,this.wrapTag=t.wrapTag||"div"}},x722:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("x0He"),r=i("SBaP"),a=i("A+LN");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function l(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){s(a,n,r,o,l,"next",e)}function l(e){s(a,n,r,o,l,"throw",e)}o(void 0)}))}}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=f(e);if(t){var r=f(this).constructor;i=Reflect.construct(n,arguments,r)}else i=n.apply(this,arguments);return h(this,i)}}function h(e,t){return!t||"object"!==o(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,_(e,t,"get"))}function m(e,t,i){return function(e,t,i){if(t.set)t.set.call(e,i);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=i}}(e,_(e,t,"set"),i),i}function _(e,t,i){if(!t.has(e))throw new TypeError("attempted to "+i+" private field on non-instance");return t.get(e)}function v(e){return e?new P:tag("div")}var y=new WeakMap,b=new WeakSet,P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(a,e);var t,i,n,r=d(a);function a(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),e=r.call(this),b.add(p(e)),y.set(p(e),{writable:!0,value:void 0}),e.node=tag("div"),function(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}(p(e),b,C).call(p(e)),e}return t=a,(i=[{key:"destroy",value:function(){g(this,y)&&(g(this,y).destroy(),m(this,y,null))}}])&&c(t.prototype,i),n&&c(t,n),a}(r.a);function C(){return T.apply(this,arguments)}function T(){return(T=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(a.x)(a.q);case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:(t=new n.b).components={"label-only-banner":function(){return i.e(233).then(i.bind(null,"7ZkM"))}},t.template="<label-only-banner/>",m(this,y,new n.a(t)),g(this,y).append(this.node);case 10:case"end":return e.stop()}}),e,this)})))).apply(this,arguments)}},xB0w:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("97Au"),r=Class({__construct:function(e){this._errorText=e,this._showUploaderValidationWarning()},_showUploaderValidationWarning:function(){var e=new n.a.Par;e.modalDialogClass="generator-mockup__uploader-validation-warning modal-md",this._modal=new n.a(e),this._modal.setHeaderContent("");var t=tag("div","warning-text",[tag("h4",{text:dlang("generator","Warning")}),tag("p",{innerHTML:this._errorText.replace(/\n/g,"<br />")})]);this._modal.setContent(t);var i=tag("div","pf-text-left",[tag("a",{className:"pf-btn pf-btn-primary",text:dlang("generator","Got it"),onclick:function(){this._modal.remove()}.bind(this)})]);this._modal.setFooterContent(i),this._modal.show()}});window&&((globalThis||{}).PFComponentsUploaderValidationPopup=r);var a=Class({targetNode:null,uploaderPar:null,isPushGenerator:!1,validateAddingLayer:null,getMaxFileLayerCount:null,elementDropNode:null,onDone:function(e,t){console.error("File processed",e,t)},onFail:function(e){console.error("Failed",e),new r(e)},getUploadExtra:function(){return{}},onDragEnter:function(){console.log("Drag entered node")},onDragLeave:function(){console.log("Drag left node")},onDrop:function(e){console.log("Number of items dropped",e),$(".product-push__droparea").hide()},onDropElement:function(){console.log("Dropped element on node")}});window&&((globalThis||{}).PFComponentsDropZonePar=a)},xXdn:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=Class({onProductChoose:null,onCategoryChoose:null,isOrderFlow:!1,isAnonymousOrderFlow:!1,isMockupGenerator:!1,isPush:!1,isClean:!1,title:"",urlPrefix:"/products-catalog",activeCategoryId:null,currency:"",store:null,isEmbedded:!1,isProductTemplate:!1,banners:null,bannersPerPage:null,enableCategoriesSidebar:!1,headingNode:null,breadcrumbsNode:null,isFeaturedReviews:!1,sellingRegion:null,searchBox:null,isProductSwap:!1,shouldSkipHistory:function(){return this.isOrderFlow&&!this.isAnonymousOrderFlow||this.isClean||this.isProductTemplate}});window&&((globalThis||{}).PFProductsCatalogInitializerPar=n)},yA1d:function(e,t,i){"use strict";i.d(t,"e",(function(){return B})),i.d(t,"d",(function(){return V})),i.d(t,"f",(function(){return U})),i.d(t,"g",(function(){return H})),i.d(t,"c",(function(){return Y})),i.d(t,"b",(function(){return K})),i.d(t,"a",(function(){return X}));var n=i("TJkW"),r=i("6t3j"),a=i("8vlB"),o=i("edgZ"),s=i("DceF"),l=i("9bv1"),c=i("7QI8"),u=i("6JZw"),d=i("nF4n"),h=function(){};(h.prototype=new u.a).incompleteItemId=0,h.prototype.orderId=0,h.prototype.syncVariantId=null,h.prototype.syncProductId=null,h.prototype.name="",h.prototype.quantity=null,h.prototype.priceRetail=null,h.prototype.externalId=null,h.prototype.previewId=null,h.prototype.retailPriceData=null,h.prototype.createdAt=null,h.prototype.isComplete=null,h.prototype.previewItemFile=null,h.prototype.isGeneratingFiles=null,h.prototype.getSyncProduct=function(){return(new n.a).getCachedSyncProduct(this.syncProductId)},h.prototype.getSyncVariant=function(){return(new n.a).getCachedSyncVariant(this.syncVariantId)},h.prototype.isIgnored=function(){return!!this.syncVariantId&&(this.getSyncProduct().isIgnored||this.getSyncVariant().isIgnored)},h.prototype.shouldBeReviewed=function(){return!this.isIgnored()&&!this.isComplete},h.fromArray=function(e){var t=new h;return t.previewItemFile=c.a.fromArray(e.previewItemFile),delete e.previewItemFile,d.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsOrderLineItemIncomplete=h);var p=i("NXHT"),f=i("mw8R"),g=i("rKkW"),m=i("ehgC"),v=i("n5ho"),y=i("X5Ic"),b=i("y70k"),P=i("5qBa"),C=i("GCEm"),T=i("9Nv7"),w=i("SvWC"),I=i("DD1l"),S=i("GyOi"),E=i("1tjy"),O=i("9Vz/"),k=i("mrkb");function L(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function A(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?L(Object(i),!0).forEach((function(t){R(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):L(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function R(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function N(e,t,i,n,r,a,o){try{var s=e[a](o),l=s.value}catch(e){return void i(e)}s.done?t(l):Promise.resolve(l).then(n,r)}function D(e){return function(){var t=this,i=arguments;return new Promise((function(n,r){var a=e.apply(t,i);function o(e){N(a,n,r,o,s,"next",e)}function s(e){N(a,n,r,o,s,"throw",e)}o(void 0)}))}}var x=["id","customProductId","length","width","height","weight","name","sku","stockProductId","isPackaged","additionalFee","hsCode","retailPrice","originalRetailPrice"],F=["id","environmentId","type","name","price","fulfillmentFee","variantId","productId","urlImage","status","shippingType","createdAt","updatedAt"],M=["itemId","uniqueId","quantity","priceRetail","technique","options","variantId","productTemplateId","name","externalId","syncVariantId","isCopy","designId"];function B(e){if(e instanceof f.a)return e;var t,i=f.a.fromArray(e.order);i.store=m.a.fromArray(e.store);var a=new r.a;for(var c in e.products)a.cacheProduct(y.a.fromArray(e.products[c]));for(var u in e.variants)a.cacheVariant(v.a.fromArray(e.variants[u]));Object(k.k)(),Object(E.b)(e.clipartItems.map((function(e){return g.a.fromArray(e)}))),Object(O.a)(e.colorGraphicItems.map((function(e){return S.a.fromArray(e)})));var d=e.lockedOrderItemIds||[];for(var _ in e.orderItems)(t=p.PFItemsOrderLineItem.fromArray(e.orderItems[_])).setEditable(-1===d.indexOf(t.itemId)),i.items.push(t);for(var P in e.sampleOrderItems)t=p.PFItemsOrderLineItem.fromArray(e.sampleOrderItems[P]),i.sampleItems.push(t);for(var T in e.orderItemsIncomplete){var I=h.fromArray(e.orderItemsIncomplete[T]);i.incompleteItems.push(I)}i.gift=e.gift;var L=new n.a;for(var A in e.syncProducts)L.cacheSyncProduct(l.a.fromArray(e.syncProducts[A]));for(var R in e.syncVariants)L.cacheSyncVariant(s.a.fromArray(e.syncVariants[R]));var N=new o.a;for(var D in e.files){var x=b.a.fromArray(e.files[D]);N.cacheFile(x)}return C.f(m.a.fromArray(e.store)),i.recipient=w.a.fromArray(e.recipient),i.isExemptDigitizationFee=!!e.isExemptDigitizationFee,i.isManualOrder=e.isManualOrder,e.allowedFulfillmentRegions&&(i.allowedFulfillmentRegions=e.allowedFulfillmentRegions),e.sampleLogEntry&&(i.sampleLogEntry=e.sampleLogEntry),i}function V(){return j.apply(this,arguments)}function j(){return(j=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.a)("order/get-draft-for-shopping-cart");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return z.apply(this,arguments)}function z(){return(z=D(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=J(t),e.next=3,Object(T.a)("order/save-draft"+a.PFRepositoriesOrderRepository.getRef(),i);case 3:return n=e.sent,e.abrupt("return",G(n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function G(e){return function(e){return B(e)}(e)}function H(e){return q.apply(this,arguments)}function q(){return(q=D(regeneratorRuntime.mark((function e(t){var i,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=J(t),e.next=3,Object(T.a)("order/save-item-to-anonymous-order",i);case 3:return n=e.sent,e.abrupt("return",$(n.order,n.cartItem));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(e){return W.apply(this,arguments)}function W(){return(W=D(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/delete-item-from-anonymous-order",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(I.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function K(e){return Z.apply(this,arguments)}function Z(){return(Z=D(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/change-anonymous-order-item-quantity",t);case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(I.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function X(){return Q.apply(this,arguments)}function Q(){return(Q=D(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(T.a)("order/calculate-estimated-shipping-costs");case 3:return e.abrupt("return",e.sent);case 6:e.prev=6,e.t0=e.catch(0),Object(I.a)(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}function $(e,t){return B(e),P.a.fromArray(t)}function J(e){var t,i=[],n=[];if(e.itemsToRemove)for(t in e.itemsToRemove)n.push(e.itemsToRemove[t].itemId);for(t in e.items){var r=e.items[t],a=[];for(var o in r.itemFiles){var s,l=r.itemFiles[o];l.exists()&&("label_inside"===l.type&&null!==(s=r.designData)&&void 0!==s&&s.labelTemplateType&&(l.options={templateType:r.designData.labelTemplateType}),a.push(_.pick(l,["fileId","type","position","options"])))}var c={};if(r.customProductVariant){var u=[];r.customProductVariant&&r.customProductVariant.customProduct&&(u=r.customProductVariant.customProduct.getProductCategoryIdList()),c=A(A({},_.pick(r.customProductVariant,x)),{},{customProduct:A({productCategoryIdList:u},_.pick(r.customProductVariant.customProduct,F))})}i.push(A(A({},_.pick(r,M)),{},{files:a,customProductVariant:c}))}var d={items:JSON.stringify(i)};return e.orderItem&&(d.order=e.orderItem.toArray()),n&&(e.idsToRemove=n),e.hasOwnProperty("giftItem")&&(d.gift=null===e.giftItem?null:e.giftItem.toArray()),e.hasOwnProperty("saveAs")&&(d.saveAs=e.saveAs),e.hasOwnProperty("recalculateDefaults")&&(d.recalculateDefaults=e.recalculateDefaults),d}},yDyG:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("TC9n"),r=i("cCrT"),a=i("XLZy"),o=i("nF4n"),s=Class({__construct:function(e){this.type=e.type,this.onSelected=e.onSelected,this.onEnterPressed=e.onEnterPressed,this.showAllResults=e.showAllResults,this.searchValue=e.value,this.nodeInput=Object(o.a)({tag:"input",type:"search",value:this.searchValue||"",attr:{placeholder:e.placeholder||lang("Searchâ¦")}}),this.node=Object(o.a)({tag:"div",els:[this.nodeInput]});var t=this._getDefaultTemplates();o.a.O2O(t,e.templates);var i=new r.a("/rpc/search-rpc/"+this.type+"/?q=SEARCH_QUERY");if(e.urlQuery)for(var l in e.urlQuery)i.query[l]=e.urlQuery[l];var c=s.PROPERTY_MAPPING[e.type].identity||"id";this._source=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:i.toString(),wildcard:"SEARCH_QUERY",rateLimitWait:e.delay||300,prepare:e.prepare||null,cache:!e.hasOwnProperty("cache")||e.cache,filter:e.formatSearchResponse},identify:function(e){return e[c]}});var u=s.PROPERTY_MAPPING[e.type].display||"name";"sitewide-search"!==this.type?$(this.nodeInput).typeahead({highlight:!0,minLength:e.hasOwnProperty("minLength")?e.minLength:1},{name:this.type,display:u,source:this._source,limit:1/0,templates:t}).on("typeahead:select",this._onSelected).on("keyup",this._onKeyUp):new n.a({inputContainerNode:this.node,inputNode:this.nodeInput,source:this._source}),e.triggerDropdown&&setTimeout(this._forceFocus,500),e.keepOpenOnEnter&&(this.keepOpenOnEnter=!0),e.withLoader&&($(this.nodeInput).bind("typeahead:asyncrequest",function(){a.a.show(this.node)}.bind(this)),$(this.nodeInput).bind("typeahead:asyncreceive",function(){a.a.hide(this.node)}.bind(this)))},_getDefaultTemplates:function(){var e=null;return this.showAllResults&&(e=$(Object(o.a)({tag:"div",els:[{tag:"div",className:"tt-suggestion tt-selectable tt-all-results pf-py-12 pf-border-top",els:[lang("Show all results")]}]})).html(),$(this.node).on("click",".tt-all-results",this._showAllResults)),{suggestion:function(e){var t="";return e.urlImage&&(t=Object(o.a)({tag:"div",className:"search-box__image-container",els:[{tag:"img",className:"search-box__image",src:e.urlImage}]})),e.name=e.autoCompleteName||e.name||e.title,Object(o.a)({tag:"div",els:[{tag:"div",className:"tt-suggestion tt-selectable search-box__container",els:[t,{tag:"div",className:"search-box__text",els:[e.name||""]}]}]})},footer:e,empty:$(Object(o.a)({tag:"div",els:[{tag:"div",className:"tt-suggestion tt-suggestion-no-results",els:[lang("No matching results found")]}]})).html()}},_forceFocus:function(){$(this.nodeInput).focus().trigger("keypress")},_onSelected:function(e,t){this.onSelected&&this.onSelected(t),this._ignoreOnKeyUp=!0},_onKeyUp:function(e){13!=(e.keyCode?e.keyCode:e.which)||this._ignoreOnKeyUp||(this.keepOpenOnEnter||$(this.nodeInput).typeahead("close"),this.onEnterPressed&&this.onEnterPressed()),this._ignoreOnKeyUp=!1},_showAllResults:function(){$(this.nodeInput).typeahead("close"),this.showAllResults&&this.showAllResults(this.getValue())},hide:function(){o.a.addClassName(this.node,"hidden")},show:function(){o.a.removeClassName(this.node,"hidden")},cancel:function(){$(this.nodeInput).typeahead("val","")},disable:function(){this.nodeInput.setAttribute("disabled","disabled")},enable:function(){this.nodeInput.removeAttribute("disabled")},getValue:function(){return $.trim(this.nodeInput.value)},setValue:function(e){this.nodeInput.value=e}},o.a.Base);s.SEARCH_TYPE_PRODUCTS="products",s.SEARCH_TYPE_VARIANTS="variants",s.SEARCH_TYPE_FEAUTURE_REQUESTS="feature-requests",s.SEARCH_TYPE_PRODUCTS_GENERATOR="generator-products",s.SEARCH_TYPE_SYNC_PRODUCTS="sync-products",s.SEARCH_TYPE_STOCK_PRODUCT="stock-products",s.SEARCH_TYPE_STORES="stores",s.SEARCH_TYPE_CUSTOM_PRODUCTS="custom-products",s.SEARCH_TYPE_PRODUCT_CATEGORIES="product-categories",s.SEARCH_TYPE_SITEWIDE_SEARCH="sitewide-search",s.SEARCH_TYPE_SAMPLE_ORDER_PRODUCTS="sample-order-products",s.PROPERTY_MAPPING={},s.PROPERTY_MAPPING[s.SEARCH_TYPE_PRODUCTS]={identity:"productId",display:"autoCompleteName"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_VARIANTS]={identity:"id",display:"title"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_FEAUTURE_REQUESTS]={identity:"featureId",display:"searchTitle"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_PRODUCTS_GENERATOR]={identity:"productId",display:"autoCompleteName"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_SYNC_PRODUCTS]={identity:"syncProductId",display:"name"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_STOCK_PRODUCT]={identity:"stockProductId",display:"name"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_STORES]={identity:"storeId",display:"name"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_CUSTOM_PRODUCTS]={identity:"id",display:"name"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_SITEWIDE_SEARCH]={identity:"id",display:"name"},s.PROPERTY_MAPPING[s.SEARCH_TYPE_SAMPLE_ORDER_PRODUCTS]={identity:"productId",display:"autoCompleteName"},window&&((globalThis||{}).PFComponentsAutoComplete=s)},ycMH:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("6JZw"),r=i("nF4n"),a=Class({basePrice:null,additionalPrice:null,currency:null,toArrayKeys:["basePrice","additionalPrice","currency"],getReadable:function(e){var t=parseFloat(this.basePrice),i=parseFloat(this.additionalPrice);i=e&&i&&i!==t?prettyMoney(i,this.currency):null;var n=t=prettyMoney(t,this.currency);return i&&(n+=" + "+i+clang("X * Quantity (as short as possible)","*Qty")),n}},n.a);a.fromArray=function(e){var t=new a;return r.a.O2O(t,e),t},window&&((globalThis||{}).PFItemsShippingPrice=a);var o=Class({USCost:null,CACost:null,EUCost:null,AUCost:null,WWCost:null,rateIdentifier:null,toArrayKeys:["USCost","CACost","WWCost","EUCost","AUCost","rateIdentifier"]},n.a);o.fromArray=function(e){var t=new o;return r.a.O2O(t,e),t.USCost=a.fromArray(e.USCost),t.CACost=a.fromArray(e.CACost),t.WWCost=a.fromArray(e.WWCost),e.EUCost&&(t.EUCost=a.fromArray(e.EUCost)),e.AUCost&&(t.AUCost=a.fromArray(e.AUCost)),t},window&&((globalThis||{}).PFItemsPushedProductShippingCost=o)},zfrb:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("X5Ic"),r=i("rF+z"),a=i("JogF"),o=i("boP+"),s=Class({_templates:null,__construct:function(e){this._templates=e,this._validator=new r.a},getQualityPercent:function(e){if(e.isImageLayer()||e.isLicensedAssetLayer()){if(e.isVector())return 100;var t=e.getDPI()/this._templates.getRequiredDpi()*50;return t>200&&(t=200),t}if(e.isTextLayer()){if(!this._validator.setProductFromDesignerState().setActiveLayer(e).isTextSizeValid())return 0;var i=this._templates.getTemplateByLayer(e),r=Object(o.a)();return null!=r&&r.isEmbroidery()&&i&&i.technique===n.a.TECHNIQUE_EMBROIDERY&&this._templates.areTextLayersOverlapping()?1:null!=r&&r.isDtgShirt()&&e.size<=.275?0:100}if(!e)return console.error("Undefined layer found. Assuming it has 100 percent quality!"),100},shouldSkipUpscale:function(e,t){if(t||e.isLicensedAssetLayer())return!0;if(e.isImageLayer()){return e.getSourceWidth()*e.getSourceHeight()>15e6}return!1},isQualityBad:function(e,t){return t?e>0&&e<50:e>0&&e<25},isQualityBadUpscale:function(e,t){return!t&&(e>=25&&e<50)},isQualityMedium:function(e){return e>=50&&e<=80},getQualityKey:function(e,t,i,n,a){var l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";if(i&&t&&t.isTextLayer()&&e<100)return 1===e?s.EMBROIDERY_TEXT_OVERLAPPING:s.EMBROIDERY_TEXT_TOO_SMALL;var c=s.QUALITY_GOOD,u=new r.a;u.setActiveLayer(t),u.setActivePlacement(l);var d=Object(o.a)();return this.hasTransparencyProblems(t,d)&&(c=s.QUALITY_TRANSPARENCY),i&&!n&&t&&t.isTextLayerPartiallyOutOfBounds()&&(c=s.QUALITY_EMBROIDERY),!i&&this.isQualityMedium(e)&&(c=s.QUALITY_MEDIUM),"boolean"!=typeof a&&(a=this.shouldSkipUpscale(t,i)),!i&&this.isQualityBadUpscale(e,a)&&(c=s.QUALITY_BAD_UPSCALE),!i&&this.isQualityBad(e,a)&&(c=s.QUALITY_BAD),i&&l&&u.isTextHeightOverUpperLimit()&&(c=s.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT),c},getTemplateQualityPercent:function(e,t){var i=this._templates.getUserTemplate(e,t),n=null;for(var r in i.layers){var a=this.getQualityPercent(i.layers[r]);n=null===n?a:Math.min(n,a)}return n},hasTransparencyProblems:function(e,t){return e&&t&&(t.isDtgShirt()||t.isDtgTote())&&e.isImageLayer()&&e.hasTransparencyIssues()}});s.QUALITY_GOOD=a.g,s.QUALITY_MEDIUM=a.h,s.QUALITY_BAD=a.d,s.QUALITY_BAD_UPSCALE=a.e,s.QUALITY_EMBROIDERY=a.f,s.QUALITY_TRANSPARENCY=a.i,s.EMBROIDERY_TEXT_HEIGHT_OVER_LIMIT=a.a,s.TEXT_TOO_SMALL=a.j,s.EMBROIDERY_TEXT_TOO_SMALL=a.c,s.EMBROIDERY_TEXT_OVERLAPPING=a.b,s.UPSCALE_MULTIPLIER=a.k,window&&((globalThis||{}).PFProductPushTemplateQuality=s)},zorP:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("nF4n"),r=function(){this.stars=null,this.defaultClass="pf-i pf-i-24 pf-text-brown pf-pr-8 pf-keydown-click",this.starType=" pf-i-star",this.nodeStars=[];for(var e=1;e<=5;e++)this.nodeStars.push(tag("div",{className:this.defaultClass+this.starType,onclick:$.proxy(this.setStars,this,e),attr:{role:"button",tabindex:"0","aria-label":this.textual[e-1]},prop:{onmouseover:this.highlightStars.bind(this,e)}}));this.nodeTextual=Object(n.a)({tag:"span",className:"review-stars__textual"}),this.node=Object(n.a)({tag:"div",els:[{tag:"span",className:"review-stars__stars",els:this.nodeStars,prop:{onmouseout:this.highlightStars.bind(this,!1)}},this.nodeTextual]}),this.highlightStars()};r.prototype=new n.a.Base,r.prototype.textual=[dlang("reviews","Terrible"),dlang("reviews","Not impressed"),dlang("reviews","It's fine"),dlang("reviews","Like it"),dlang("reviews","Love it")],r.prototype.getStars=function(){return this.stars},r.prototype.setStars=function(e){this.stars=e,this.highlightStars(this.stars)},r.prototype.highlightStars=function(e){for(var t in e=e||this.stars,this.nodeStars)this.nodeStars[t].className=t<=e-1?this.defaultClass+this.starType:this.defaultClass+this.starType+"-outline";this.nodeTextual.textContent=this.textual[e-1]},(globalThis||{}).PFProductReviewFormStarRating=r},zsu5:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("7QI8"),r=i("X5Ic"),a=i("boP+");function o(e,t){var i="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!i){if(Array.isArray(e)||(i=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){i=i.call(e)},n:function(){var e=i.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==i.return||i.return()}finally{if(l)throw a}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=Class({_designData:null,_generatorParams:null,__construct:function(e,t){this._designData=e,this._generatorParams=t,this._alreadyAddedMockupGroups=[]},getGroupedMockupVariants:function(){var e,t={},i=[],s={},l={},c={},u=this._getTemplateGeneratorVariantIds(),d=null===(e=Object(a.a)())||void 0===e?void 0:e.canHaveOnlyLabelPlacement;Object.values(this._designData.templates).forEach((function(e){i.push(e.templateId),e.parentTemplateId&&i.push(e.parentTemplateId)}));var h,p=o(this._designData.generatorVariants);try{for(p.s();!(h=p.n()).done;){var f=h.value;l[f.size]=!0,s[f.color]=!0,c[f.placementId]=!0}}catch(e){p.e(e)}finally{p.f()}for(var g=0,m=Object.values(this._generatorParams.generatorVariants);g<m.length;g++){var _=m[g];if(!u.includes(_.generatorVariantId)&&(i.includes(_.templateId)&&(!_.size||l[_.size])&&(!_.color||s[_.color])&&(!_.placementId||c[_.placementId])&&(_.placementId!==n.a.TYPE_LABEL_INSIDE||this._designData.technique===r.a.TECHNIQUE_CUT_SEW||d)&&!(_.placementId===n.a.TYPE_BACKGROUND||_.relatedPlacements&&this.isRelatedToOtherPlacements(_)))){var v=_.option||this._getReadablePlacement(_.placementId),y=_.optionGroup||"Default";t[y]=t[y]||[],t[y][v]=t[y][v]||[],t[y][v].push(_)}}return this._sortGroupedMockupVariants(t)},_sortGroupedMockupVariants:function(e){var t=(this._designData.colors||[]).slice(),i=(this._designData.sizes||[]).slice(),n=function(e,t){return function(i,n){var r=t.indexOf(i[e]),a=t.indexOf(n[e]);return r===a?0:r<a?-1:1}},r=this._sortBySequence(e,PF.Config.ProductPush.VariantFilter.OPTION_GROUP_SEQUENCE);for(var a in r){var o=this._sortBySequence(r[a],PF.Config.ProductPush.VariantFilter.OPTION_SEQUENCE);for(var s in o){var l=o[s];l.sort((function(e,r){var a=n("color",t)(e,r),o=0;return a||(o=n("size",i)(e,r)),a+o})),o[s]=l}r[a]=o}return r},_sortBySequence:function(e,t){var i=Object.keys(e);i.sort((function(e,i){return t.indexOf(e)>t.indexOf(i)?1:-1}));var n=[];for(var r in i)n[i[r]]=e[i[r]];return n},getMockupVariantIds:function(){var e=this.getGroupedMockupVariants(),t=[];for(var i in e)for(var n in e[i])for(var r in e[i][n])t.push(e[i][n][r].generatorVariantId);return t},getGroupMockupVariantIds:function(e){var t=this.getGroupedMockupVariants(),i=[];for(var n in t[e])for(var r in t[e][n])i.push(t[e][n][r].generatorVariantId);return i},getDefaultGroupVariantId:function(e){var t=this.getGroupMockupVariantIds(e);if(t.length)return t[0];console.error("Generator variants not found for mockup main group: "+e)},getAdditionalGroupVariantId:function(e,t,i){var n=this.getGroupedMockupVariants(),r=[];for(var a in n[e]){var o=n[e][a];for(var s in o){var l=o[s];t&&i&&l.size===i&&l.color===t?r.push(l.generatorVariantId):(t&&l.color===t||i&&l.size===i)&&r.push(l.generatorVariantId)}}if(r.length>0)return r[0];var c=this.getDefaultGroupVariantId(e);if(c)return c;console.error("Generator variants not found for mockup additional group: "+e)},_getReadablePlacement:function(e){var t=this._generatorParams.availablePlacements;for(var i in t){var n=t[i];if(n.id==e)return n.title}return e},_getTemplateGeneratorVariantIds:function(){var e=this._generatorParams.variantMapping,t=[];for(var i in e){var n=e[i];for(var r in n.templateIds){var a=n.templateIds[r];t.indexOf(a)<0&&t.push(a)}}return t},isRelatedToOtherPlacements:function(e){var t=this._alreadyAddedMockupGroups[e.optionGroup];t||(t=this._alreadyAddedMockupGroups[e.optionGroup]=[]);var i=t[e.option];return i||(i=this._alreadyAddedMockupGroups[e.optionGroup][e.option]=[]),!(!i||!e.relatedPlacements.includes(i))||(this._alreadyAddedMockupGroups[e.optionGroup][e.option]=e.placementId,!1)}});window&&((globalThis||{}).PFProductPushVariantFilter=l)}}]);