!function(){let e,t=window,n=!0,o={},a=function(){},s=function(){},r=function(){},i=function(){};try{e=window.top}catch(o){n=!1,e=t}e.__wmass||(e.__wmass={});let c="outxurl",l="outxgam",d="outxcon",u={},p={forceDmpId:{anyof:"string"},forceDmpPKey:{anyof:"string"}},f="sijai",m=void 0!==e.orientation||-1!==navigator.userAgent.indexOf("IEMobile");e.innerWidth||e.document.documentElement&&0!==e.document.documentElement.clientWidth&&e.document.documentElement.clientWidth||e.document.getElementsByTagName("body")[0].clientWidth;try{e.__wmass.logger||(e.__wmass.logger=(t="",n="")=>{let a,s,r,i,c=[],l=[],d=[],u=[],p=()=>{let e=new Date,t=e.getMilliseconds().toString();return`${e.toLocaleTimeString()}:${t.padStart(4,"0")}`},f=e=>{let t={info:1,log:2,warn:3,error:4}[o.enableLog];return!0===o.enableLog||t>=e};if(a=s=r=i=function(){},e.console){let o=`${"%cWemass"}${t}`,m=["display: inline-block; color: #fff; background: #92c01f; padding: 1px 4px; border-radius: 3px;",n];e.console.info&&(a=function(){let e=f(1),t=o+"%c INFO",n=[...m,"display: inline-block; color: #111 background: #e3e3e3; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,p(),...a];if(e){for(;c.length>0;)c.shift()();console.info.apply(console,s)}else c.push(console.info.bind(console,...s))}),e.console.log&&(s=function(){let e=f(2),t=o+"%c LOG",n=[...m,"display: inline-block; color: #111 background: #3c3c3b; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,p(),...a];if(e){for(;l.length>0;)l.shift()();console.log.apply(console,s)}else l.push(console.log.bind(console,...s))}),e.console.warn&&(r=function(){let e=f(3),t=o+"%c WARN",n=[...m,"display: inline-block; color: #111 background: orange; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,p(),...a];if(e){for(;d.length>0;)d.shift()();console.warn.apply(console,s)}else d.push(console.warn.bind(console,...s))}),e.console.error&&(i=function(){let e=f(4),t=o+"%c ERROR",n=[...m,"display: inline-block; color: #111 background: red; padding: 1px 4px; border-radius: 3px;"],a=Array.prototype.slice.call(arguments),s=[t,...n,p(),...a];if(e){for(;u.length>0;)u.shift()();console.error.apply(console,s)}else u.push(console.error.bind(console,...s))})}return[a,s,r,i]}),[a,s,r,i]=e.__wmass.logger("%cDMP","display: inline-block; color: #fff; background: #658; padding: 1px 4px; border-radius: 3px;")}catch(e){}let g=[];e.__wmass.getSegments=function(e){var t=function(){O()||(-1===g.indexOf(l)&&S()&&g.push(l),-1===g.indexOf(c)&&T()&&g.push(c),-1===g.indexOf(d)&&C()&&g.push(d));var e=[],t={};try{e=JSON.parse(window.localStorage._papns||"[]").slice(0,250).map(String)}catch(t){e=[]}return e.length>0&&(t.permutive=e),g.length>0&&(t.wirr=g,s("segmentos de wemass declarados",t.wirr)),t};if(!e||!e.callback||"function"!=typeof e.callback)return t();a("llamando a getSegments con callback");var n=e.callback,o=500,r=100,i=function(){var e=t(),a=r<o?r:o;e.permutive&&e.wirr||o<=0?n(e):(o-=a,setTimeout(i,a))};"number"==typeof e.timeout&&(o=e.timeout),"number"==typeof e.interval&&(r=e.interval),i()},s("funcion getSegments sobreescrita");let b=t=>{let n=t+"=",o=e.document.cookie.split(";");for(let e of o){for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(n))return e.substring(n.length,e.length)}return null},y=(e,t)=>{var n,o=Object.prototype.toString.call(e);return t=t||{},n||void 0!==e||(n="undefined"),n||null!==e||(n="null"),!n&&e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)&&(n="buffer"),n||"object"!=typeof window||e!==window||(n="global"),n||"object"!=typeof global||e!==global||(n="global"),!n&&"number"==typeof e&&isNaN(e)&&(n="nan"),!n&&"object"==typeof e&&"[object Number]"==o&&isNaN(e)&&(n="nan"),n||"object"!=typeof e||"Event]"!=o.substr(-6)||(n="event"),n||"[object HTML"!=o.substr(0,12)||(n="html"),n||"[object Node"!=o.substr(0,12)||(n="html"),n||(n=o.match(/\[object\s*([^\]]+)\]/)[1].toLowerCase()),"object"==n&&t.pojoOnly&&e.constructor&&"Object"==(n=e.constructor.name||"unknown")&&(n="object"),n},_=(e,t,n)=>{let o=new Date,a=1e3,s={B:()=>{a*=0},M:e=>{a*=60*e},H:e=>{a*=3600*e},D:e=>{a*=86400*e},X:()=>{a*=864e5}};for(let e=0;e<t.length;e++)t[e]in s&&s[t[e]](parseInt(t.replace(t[e],""))||1);a+=o.getTime(),o.setTime(a),document.cookie=`${n}=${e}; path=/; domain=${location.hostname}; expires=${o.toUTCString()}; samesite=none; secure`};try{e.__wmass.testMode||(e.__wmass.testMode=function(t={},n="wmsstst"){let o=e=>{let t=["raPreviewMode=0; Max-Age=0; path=/; samesite=None; domain=.richaudience.com; secure","apn_prebid_debug=0; Max-Age=0; samesite=none; secure"];for(let e of t)document.cookie=e;!1===e?_(e,"B",n):_(JSON.stringify(e),"H",n)},s=(e=>{let t={enableLog:{values:[!0,"info","log","warn","error"],cookie:!0}};for(let n in e)t[n]||(t[n]=e[n]);return t})(t);return(t={})=>{if(!1===t)return o(!1),{};if("object"===y(t)){let r=((...e)=>{let t={};for(let n of e)if("object"===y(n))for(let e in n)t[e]||(t[e]=n[e]);return t})(t,(()=>{let e=b(n);if("string"===y(e))try{return JSON.parse(e)}catch(t){console.log(t,"error > valor de wmsstst = "+e)}return{}})(),(()=>{let t="wmsstst",n=e.location.search.replace("?","");if(-1===n.indexOf(t))return{};let o=n.split("&"),s={};for(let e of o)if(-1!==e.indexOf(t))if(e===t)s[enableTestCreatives]=!0;else{let[t,n]=e.replace("wmsstst.","").split("=");0===t.indexOf("key.")?(t=t.replace("key.",""),s.keywords||(s.keywords={}),s.keywords[t]||(s.keywords[t]=[]),-1===s.keywords[t].indexOf(n)&&s.keywords[t].push(n)):("true"===n&&(n=!0),"string"===y(n)&&s[t]?("string"===y(s[t])&&(s[t]=[s[t]]),s[t].push(n)):s[t]=n)}return a("parametros wemass detectados",s),s})()),i={},c={};for(let e in r)if(s[e]){let t=!1,n=r[e],o=s[e],{values:a,cookie:l=!1,anyof:d}=o,u=y(a),p=y(d),f=y(n);switch("string"===p&&f===d&&(t=!0),u){case"array":a.indexOf(n)>-1&&(t=!0);break;case"boolean":t=!0===n;case"function":t=a(n)}!0===t&&(c[e]=n,!0===l&&(i[e]=n))}return Object.keys(i).length>0&&o(i),c}}}),o=new e.__wmass.testMode(p,"d94422aa8614fd4bf4e0cafd66f9c097")()}catch(e){}let{pathname:v,hostname:w,search:h}=e.location;w=w.toLowerCase(),v=v.toLowerCase(),s("Loading Wemass DMP Tag VOCENTO~DMP");let k,x,C=()=>{if("object"===y(e.vocento))try{let t,n=e.document.querySelectorAll("div.voc-detail p.voc-paragraph,main .cuerpo-texto > p,[itemprop='articleBody'] > p,.voc-detail.voc-detail-grid > p"),{voc_tn:o,voc_tc:a,voc_se:i}=e,{config:{rtim:{service:c,webtype:l}={},vam:{options:{posicion_desktop:d={},posicion_mobile:u={}}={},pageType:p=""}={}}={}}=e.vocento,{layer_inpage:f=!1}=d,{layer_inpage:g=!1}=u,b=[a,p,l];if(t=m?g||f:f||g,r(JSON.stringify({soyMovil:m,voc_tn:o,voc_tc:a,voc_se:i,webtype:l,pageType:p}),n),n.length>=2&&"object"===y(t)){let{desactivadoen:e=[]}=t;(w.indexOf("abc.es")>-1||w.indexOf("lavozdigital.es")>-1)&&-1===e.indexOf("video")&&(s("incluyendo video en desactivadoen"),e.push("video")),r(JSON.stringify({desactivadoen:e}));for(let t of b)if(e.indexOf(t)>-1)return!1;return!0}return!1}catch(e){i(e)}return!1},S=()=>{if(e.googletag&&e.googletag.pubads){let t,n=["pos"],o=["intext","layer_inpage"];try{t=e.googletag.pubads().getSlots()}catch(e){t=[]}for(let e of t)for(let t of n){let n=e.getTargeting(t).pop();if(o.indexOf(n)>-1)return!0}}return!1},T=()=>!1,O=()=>e.document.querySelector("aside.cierre-suscripcion")?(r("Es paywall, no se pasan segmentos de outstream"),!0):e.document.querySelector("div[data-voc-pw-limit-exceeded]")?(r("Alcanzado limite, no se pasan segmentos de outstream"),!0):e.document.querySelector("div[data-voc-pw-premium]")?(r("Contenido exclusivo, no se pasan segmentos de outstream"),!0):!!e.document.querySelector("div[data-voc-pw-limit-exceeded]")&&(r("Alcanzado limite, no se pasan segmentos de outstream"),!0),j=t=>"addon"===t?function(n,o={},...s){o.page||(o.page={});let r=o.page.type;["noticia","fotogaleria","video","otros"].indexOf(r)>-1&&!o.page.classifications_watson&&(o.page.classifications_watson={categories:"$alchemy_taxonomy",keywords:"$alchemy_keywords",sentiment:"$alchemy_document_sentiment"}),g.length>0&&(g=[]),a(`Llamando a __wmass.dmp.${t} con argumentos`,[n,o,...s]),e.permutive[t].apply(null,[n,o,...s])}:"identify"===t?function(n=[],...o){let s=y(n);("array"===s||"string"===s)&&n.length>0&&(a(`Llamando a __wmass.dmp.${t} con argumentos`,[n,...o]),e.permutive[t].apply(null,[n,...o]))}:function(){a(`Llamando a __wmass.dmp.${t} con argumentos`,arguments),e.permutive[t].apply(null,arguments)},E=(e,n={})=>{let o="string"===y(e);if(o&&(e=n.useNs?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)),null!=typeof n)for(let o in n)if("string"===y(o)){let a=n[o],s=y(a);switch(o){case"T":e.appendChild(document.createTextNode(a));break;case"com":e.appendChild(document.createComment(a));break;case"Ct":e.style.cssText=a;break;case"Cn":if("string"===s||"array"===s){let t,n=[];if("string"===s?t=[a]:"array"===s&&(t=a),"array"===y(t))for(let e of t)"string"===y(e)&&("."===e.charAt(0)&&(e=e.substr(1)),n.push(e));n.length>0&&e.classList.add(...n)}break;case"H":e.innerHTML=a;break;case"St":t.attachEvent&&!t.opera?e.styleSheet.cssText=a:E(e,{T:a});break;default:"useNs"!==o&&(n.useNs?e.setAttributeNS(null,o,a):e.setAttribute(o,a))}}if(o)return e},L=(n,o,r,i,c)=>{if(!e.__wmass.dmp){if((w.indexOf("diariosur.es")>-1||w.indexOf("ideal.es")>-1)&&e.__wmass.bff.push(N),"string"===y(r)&&r.length>0&&"string"===y(i)&&i.length>0){s(`cargando dmp projectId: ${r}, key: ${i}`),"object"!==y(u)&&(u={}),e.__wmass.dmp=e.__wmass.dmp||{};let n=["addon","identify","track","trigger","query","segment","segments","ready","on","once","user","consent"];if(!o){o=o||{},e.permutive=o,o.q=[],o.config=c||{},o.config.projectId=r,o.config.apiKey=i,o.config.environment=o.config.environment||"production";for(let e of n)o[e]=function(e){return function(){let t=Array.prototype.slice.call(arguments,0);o.q.push({functionName:e,arguments:t})}}(e)}a("iniciando permutive"),((e="about:blank",n="asyncScript",o=t)=>{let a=E("script",{src:e,async:"async",Cn:[n]});(o.document.body||o.document.head).appendChild(a)})(`https://cdn.permutive.com/${r}-web.js`);for(let t of n)!e.__wmass.dmp[t]&&e.permutive[t]&&(e.__wmass.dmp[t]=j(t))}e.__wmass.dmp.ready((function(){a("permutive initialised")}),"initialised"),e.__wmass.dmp.ready((function(){a("permutive realtime")}),"realtime")}},N=()=>{let t=((t=!1)=>{try{let n=null;return!1!==t&&(e.localStorage?n=e.localStorage.getItem(t):navigator.cookieEnabled&&(n=b(t))),n}catch(e){}return null})(f),n=t=>{let{data:a,origin:s,source:i}=t;"https://wemass.io"===s&&(e.removeEventListener("message",n),o(a),r.parentNode.removeChild(r))},o=t=>{((t,n)=>{try{if(e.localStorage)e.localStorage.setItem(t,n);else{if(!navigator.cookieEnabled)return!1;_(n,"X",t)}}catch(e){}})(f,t),a("UniqueId: "+t),__wmass.dmp.identify([{id:t,tag:"wmssId"}])},s="_wmss_messenger",r=E("iframe",{src:"about:blank",id:s,name:s,scrolling:"no",border:"no",src:"https://wemass.io/messenger",Ct:"width:0px;height:0px;border:0px;"});t?o(t):(e.addEventListener("message",n),document.body.appendChild(r))},M=()=>{if(s("permisos suficientes obtenidos o no habia CMP. Iniciando"),L(e.document,e.permutive,"28986622-e6be-473d-9a8f-e603a25f3c66","390f11db-6eea-42eb-9ef9-4d27b1bb2bab",u),"array"===y(e.__wmass.bff)&&e.__wmass.bff.length>0){a("Ejecutando funciones en el buffer");for(let t of e.__wmass.bff)"function"===y(t)&&t()}"object"!==y(e.__wmass.bff)&&(e.__wmass.bff={push:function(e){"function"===y(e)&&e()}})},$=(e={},t={},n=!1)=>{let o=!0,a=y(n);for(let s in e)t.hasOwnProperty(s)&&!0===t[s]?e[s]=t[s]:o=!1,!1===o&&"object"===a&&!0===n[s]&&(e[s]=n[s],o=!0);return!1===o&&i("Consentimiento insuficiente. Obtenido:",e),o},D={getVendorConsents:e=>{try{let t,n=!0,{purposeConsents:o}=e;t=!n||$({1:!1,2:!1,3:!1,5:!1},o),!0===t&&M()}catch(e){i(e)}}},A={addEventListener:(t,n)=>{if(n){let n,o=!0,{eventStatus:a,listenerId:r,purpose:{consents:i={},legitimateInterests:c={}}={}}=t;s("Evento DMP purposes: ejecutado. Status: "+a),"tcloaded"!==a&&"useractioncomplete"!==a||(n=!o||$({1:!1,3:!1,4:!1,7:!1,10:!1},i),n&&(M(),e.__tcfapi("removeEventListener",2,(e=>{e&&s("Evento DMP purposes eliminado")}),r)))}}},I={milis:!1,callback:M};e.__wmass.bff||(e.__wmass.bff=[]),(({cmpCallbackTcf1:t={},cmpCallbackTcf2:n={},cmpTimeout:o={}})=>{let{milis:a=!1,callback:r}=o,c=y(r);if(e.__cmp||e.__tcfapi){if(e.__wmass.consentData||(e.__wmass.consentData={}),x=e.__wmass.consentData,e.__tcfapi)if(s("TCF v2 CMP detectado"),k=2,"object"===y(n)){if(!x.getTCData){let t=(t,n)=>{n&&(s("TCF v2 generic eventListener ejecutado. Estatus: "+t.eventStatus),("tcloaded"===t.eventStatus||"useractioncomplete"===t.eventStatus)&&"string"===y(t.tcString)&&t.tcString.length>0&&(s("TCF v2 generic eventListener tcdataString disponible: "+t.tcString),x.getTCData=t,e.__tcfapi("removeEventListener",2,(e=>{e&&s("TCF v2 generic eventListener event removed")}),t.listenerId)))};e.__tcfapi("addEventListener",2,t)}for(let t in n){let o=n[t],a=y(o);"function"===a?e.__tcfapi(t,2,o):i(`tcfversion 2 callback para ${t} es de tipo  ${a} se esperaba una funcion`)}}else i("Wemass CMP module required, tcfversion 2 detected but no cmpCallbackTcf2 set");else if(e.__cmp)if(s("TCF v1 CMP detectado"),k=1,"object"===y(t)){x.getConsentData||e.__cmp("getConsentData",null,(e=>{x.getConsentData=e})),x.getVendorConsents||e.__cmp("getVendorConsents",null,(e=>{x.getVendorConsents=e}));for(let n in t){let o=t[n],a=y(o);"function"===a?e.__cmp(n,null,o):i(`tcfversion 1 callback para ${n} es de tipo  ${a} se esperaba una funcion`)}}else i("Wemass CMP module required, tcfversion 1 detected but no cmpCallbackTcf1 set");0!=a&&"number"===y(a)&&(o.timer=setTimeout(r,a))}else"function"===c&&r()})({cmpCallbackTcf1:D,cmpCallbackTcf2:A,cmpTimeout:I})}();