window.googletag=window.googletag||{},googletag.cmd=googletag.cmd||[],function(e,t){var i=!0;try{e.localStorage}catch(e){i=!1}var n=1e4,r=!1;if(navigator&&navigator.userAgent){var o=navigator.userAgent.toLowerCase();if(o.indexOf("lighthouse")>-1)return;(o.indexOf("iphone")>-1||o.indexOf("android")>-1||o.indexOf("ipad")>-1)&&(r=!0)}if(e.addEventListener("message",(function(e){var t=e.data,i=e.source;if(!t||"adtHBvpaid"!==t.type)return;var n=t.key;function r(e){try{i.postMessage({type:"adtHBvpaid",key:"winner",winner:JSON.stringify(e)},"*")}catch(e){p.error("unable to send winner info to iframe",e.message)}}p.log("Message from iframe",t.type,t.key),"doYouHaveHB"===n?i.postMessage({type:"adtHBvpaid",key:"true"},"*"):"startAucs"===n&&(p.log("VPAID Getting winner for iframe"),m.getWinningBidByCode({divId:t.data.code,cb:function(e){e?(p.log("winner for iframe is ",e),r(e)):(p.log("starting auction for iframe",t.data),f.startAuction({adUnitId:t.data.adUnitId,code:t.data.code,sizes:t.data.sizes,onEnd:function(e){r(e)}}))}}))})),location.href.indexOf("disable_hb=1")>-1){var d=function(){};return d._startgpt=!0,void t.cmd.unshift(d)}var a=Date,s=a.now;var l=new function(){var t=null,i={},n={};e.IntersectionObserver&&(t=new IntersectionObserver((function(e){for(var t=0;t<e.length;t++){var o=e[t],a=o.target.id,s=o.isIntersecting&&o.intersectionRatio>=.5;if(s){n[a]=!0;var l=r[a];if(l)for(var u=0;u<l.length;u++){var g=l[u];clearTimeout(g.timeoutPtr),g.cb(!0),d(a,o.target)}delete r[a]}else delete n[a];var f=i[a];if(f)if(s)f.startVisibleAt=c(),clearInterval(f.intervalPtr),function(e,t){e.intervalPtr=setInterval((function(){var t=e.startVisibleAt;e.startVisibleAt=c(),e.onTimeUpdate(c()-t)}),300)}(f);else if(clearInterval(f.intervalPtr),f.startVisibleAt){var p=f.startVisibleAt;f.startVisibleAt=0,f.onTimeUpdate(c()-p)}}}),{threshold:.5}));var r={},o={};function d(e,o){o||(o=document.getElementById(e));var d=0;r[e]&&d++,i[e]&&d++,1===d&&(delete n[e],p.debug("visibility unobserving",e),t.unobserve(o))}this.hasBuyerEnoughVisibleRate=function(e,t){var i=e.id,n=f.getConfig("minViewRate")||{},r=n.buyer||{},d=n.clientBuyers||0,a=0;if(t?e.minViewWithDfp&&r[i]&&(a=r[i]):e.isMarket?a=r[i]:d&&(a=d),a){var s=o[i];return!!s&&(p.debug("Visibility",i,"minrate: "+a," has: "+s.h),s.h>=a)}return!0},this.requestBidViewRates=function(e){if(e){for(var t=0;t<e.length;t++){var i=e[t];o[i]&&(o[i].waiting||p.timeDiff(o[i].ts)<12e4)?(e.splice(t,1),t--):o[i]||(o[i]={waiting:!0})}0!==e.length&&p.xhr({url:"//"+p.getADomain()+"/vr?bids="+e.join(","),timeout:500,callback:function(e){try{for(var t in e=JSON.parse(e)){var i=e[t];o[t].waiting=!1,i.err||(o[t].ts=c(),o[t].h=i.h)}}catch(e){}},onError:function(){for(var t=0;t<e.length;t++)o[e[t]].waiting=!1}})}},this.getBuyerIdsThatRequireMinView=function(e,t){for(var i=f.getConfig("minViewRate")||{},n=i.buyer||{},r=i.clientBuyers||0,o={},d=0;d<e.length;d++)for(var a=e[d],s=0;s<a.bids.length;s++){var l=a.bids[s],c=l.id;t?l.minViewWithDfp&&n[c]&&(o[c]=1):(n[c]||r&&!l.isMarket)&&(o[c]=1)}return{idsToRequest:p.keys(o)}},this.monitorStop=function(e){var t=e.targetId;clearInterval(i[t].intervalPtr),d(t),delete i[t]},this.monitor=function(e){if(t){var n=e.targetId;if(i[n])p.error(n,"is already monitoring");else{var r=e.timeInView;i[n]={total:0,onTimeUpdate:function(t){this.total+=t,this.total>=r&&(this.total=0,p.log("MONIT timer passed",r),e.cb&&e.cb())}};var o=document.getElementById(n);t.observe(o)}}},this.isVisible=function(e,i){if(n[e])return p.debug(e,"hit visible cache"),i(!0);if(!t)return i(!1);var o=document.getElementById(e);if(!o)return i(!1);r[e]=r[e]||[],r[e].push({cb:i,timeoutPtr:setTimeout((function(){d(e,o),p.debug("visibility timeout",e);var t=r[e];if(t){for(var i=0;i<t.length;i++)clearTimeout(t[i].timeoutPtr),t[i].cb(!1);delete r[e]}}),30)}),t.observe(o)}};function c(){return s.call(a)}function u(e,t){for(var i in void 0===e&&(e={}),t)e[i]=t[i];return e}function g(){return(c()+Math.random()).toString(36).substr(2,9)}var f=e.vpb||{};e.vpb=f=u(f,{init_time:c(),VPB_VERSION:"0818",BUILD_VERSION:"zeD5J",SESSION_ID:g(),aucs:[],eventLog:[],getConfig:function(e){if("fastAsync"!==e||r){var t=void 0===f[e]?f.config[e]:f[e];return"buyersInRefresh"!==e||t?t:["market","clientbuyer"]}},logEvent:function(e,t){if(t.type=e,t.ts=c(),t.arguments=Array.prototype.slice.call(t.arguments,0),this.onEventLog)try{this.onEventLog(t)}catch(e){p.error(e)}else this.eventLog.push(t)}}),void 0!==f.pr&&(f.VPB_VERSION=f.pr+"0"+f.VPB_VERSION);var p={getDateStr:function(){var e=new Date;return""+e.getFullYear()+e.getMonth()+e.getDate()},getUtmFromGoogleCookie:function(){if(!document.cookie)return{};var e=document.cookie.match("__utmz_gtm=([^;]*)");if(e&&e.length){var t=e[1];if(t){for(var i={},n=t.split("|"),r=0;r<n.length;r++){var o=n[r].split("=");i[o[0]]=o[1]}return i}}return{}},getParameterByName:function(t){var i=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e.location.search);return null===i?"":decodeURIComponent(i[1].replace(/\+/g," "))},setCookie:function(e,t,i,n){var r=new Date;r.setTime(r.getTime()+60*i*60*1e3),"hourly"===n?r.setMinutes(0,0,0):"daily"===n&&r.setHours(0,0,0,0);var o="expires="+r.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"},getCookie:function(e){var t,i=e+"=";try{t=decodeURIComponent(document.cookie)}catch(e){t=document.cookie}for(var n=t.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(i))return o.substring(i.length,o.length)}return""},merge:u,getTopDomain:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return location.ancestorOrigins[location.ancestorOrigins.length-1];try{return p.getTopWindow(e).location.host}catch(e){return null}},getTopWindow:function(e){var t=function(e){try{return e===e.top?e:e.parent.location.href?t(e.parent):e}catch(t){return e}};return t(e)},copy:function(e){var t,i,n;for(n in t=Array.isArray(e)?[]:{},e)Object.prototype.hasOwnProperty.call(e,n)&&(i=e[n],t[n]=null===i?null:"object"==typeof i?p.copy(i):i);return t},track:function(t,i){try{var n=[],r=t.host||p.getADomain();for(var o in delete t.host,t)n.push(o+"="+t[o]);var d=p.getParameterByName("utm_source"),a=p.getParameterByName("utm_medium");if(n.push("full_page_url="+encodeURIComponent(p.contentPageUrl())),n.push("adid="+f.SESSION_ID),d&&n.push("utm_source="+d),a&&n.push("utm_medium="+a),n.push("vpbv="+f.VPB_VERSION),f.st&&n.push("tte="+p.timeDiff(f.st)),e.performance&&performance.now){var s=parseInt(performance.now());n.push("lifecycle_tte="+s)}p.xhr({url:"https://"+r+"/adunit/tracking?"+n.join("&"),sendCookie:!0,callback:i})}catch(e){p.error("Cant send tracking")}},contentPageUrl:function(){if(location.ancestorOrigins&&location.ancestorOrigins.length)return location.ancestorOrigins[location.ancestorOrigins.length-1];var t;try{t=e.parent.location.href}catch(e){t=""}return e.location.href!==t?document.referrer:e.location.href},debug:function(){if(this.vpbIsDev&&i&&e.localStorage.vpbdebug>="3"){var t=Array.prototype.slice.call(arguments,0);t.unshift(performance.now()),t.unshift("VPB: "),console.log.apply(console,t)}},log:function(){if(this.vpbIsDev||i&&e.localStorage.vpbdebug>="1"){this.vpbIsDev=!0;var t=Array.prototype.slice.call(arguments,0);i&&e.localStorage.vpbdebug>="2"&&t.unshift(performance.now()),t.unshift("VPB: "),console.log.apply(console,t)}},error:function(){if(this.vpbIsDev||i&&e.localStorage.vpbdebug>="1"){this.vpbIsDev=!0;var t=Array.prototype.slice.call(arguments,0);i&&e.localStorage.vpbdebug>="2"&&t.unshift(performance.now()),t.unshift("VPB WARN: "),console.error.apply(console,t)}},xhr:function(t){var i=null;if(e.XMLHttpRequest)i=new XMLHttpRequest;else if(e.ActiveXObject)try{i=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{i=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){p.log("error")}}if(!i)return console.error("Giving up :( Cannot create an XMLHTTP instance"),t.onError&&t.onError(),!1;try{i.withCredentials=t.sendCookie||!1}catch(e){}if(t.timeout&&(i.timeout=t.timeout),i.onreadystatechange=function(){4===i.readyState&&(i.status>=200&&i.status<300?t.callback&&t.callback(i.responseText):t.onError&&t.onError(i.status))},i.open(t.method||"GET",t.url||t.uri),t.data,t.headers)for(var n in t.headers)i.setRequestHeader(n,t.headers[n]);return i.send(t.data?JSON.stringify(t.data):null),this},getADomain:function(){var e=f.config.WLDomain.split(".").slice(1).join("."),t="hb.";return"adtelligent.com"===e&&(t="ghb."),t+e},getRealScriptHost:function(){return f.getConfig("realHost")||f.config.WLDomain},getMaxRefreshCount:function(){return f.maxRefreshesPerUnit||f.config.maxRefreshesPerUnit||50},getClientId:function(){return f.config.pubId},getSiteId:function(){return f.config.siteId},getDevSuffix:function(){return f.config.isDev?".dev":""},debounce:function(e,t){var i;return function(){var n=this,r=arguments,o=function(){i=null,e.apply(n,r)};clearTimeout(i),i=setTimeout(o,t)}},values:function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(e[i]);return t},keys:function(e){var t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(i);return t},each:function(e,t){if(t)for(var i=0;i<e.length;i++)t(e[i])},some:function(e,t){if(!t)return!1;for(var i=0;i<e.length;i++)if(t(e[i]))return!0;return!1},filter:function(e,t){if(!e)return e;for(var i=[],n=0;n<e.length;n++)t(e[n])&&i.push(e[n]);return i},map:function(e,t){if(!e||0===e.length)return e;for(var i=[],n=0;n<e.length;n++)i.push(t(e[n]));return i},findValue:function(e,t){for(var i in e)if(t(e[i],i))return e[i];return null},timeDiff:function(e){return Math.min(Math.abs(c()-e),4294967295)}};p.vpbIsDev="true"===p.getParameterByName("pbjs_debug"),f.utils=p,p.log("HBMP version:",f.VPB_VERSION,"Site build hash:",f.BUILD_VERSION);var h={inited:!1,init:function(){var t=f.getConfig("adtUAMPubID");t&&(e.apstag||(!function(e,t,i,n,r,o,d){function a(i,n){t[e]._Q.push([i,n])}t[e]||(t[e]={init:function(){a("i",arguments)},fetchBids:function(){a("f",arguments)},setDisplayBids:function(){},targetingKeys:function(){return[]},_Q:[]},(o=i.createElement(n)).async=!0,o.src="//c.amazon-adsystem.com/aax2/apstag.js",(d=i.getElementsByTagName(n)[0]).parentNode.insertBefore(o,d))}("apstag",e,document,"script"),this.inited=!0,e.apstag.init({pubID:t,adServer:"googletag",simplerGPT:!0})))},fetchBids:function(t){this.inited&&(p.log("adt uam request"),e.apstag.fetchBids({slots:t,timeout:(f.getConfig("vmTimeouts")._site_||2e3)-100},(function(){p.log("adt uam ready"),e.apstag.setDisplayBids()})))}},m={advertiserLevelDataUrl:"https://ald.adtelligent.com:1339/analyse",_localStorageKey:"vpb-settings",_cache:null,_outstreamCache:null,refreshHandles:{},vpbRuns:0,init:function(){this.initPrebid(),h.init(),b.init()},isRefreshAllowed:function(e,t,i,n,r,o){if(f.getConfig("refreshHBWinnerInterval")&&b.lineItemAllowed(r)&&!b.isSlotSkippedByTargeting(e)){var d=f.getConfig("refreshWhenWinnerIs");d||(p.debug("REFRESH there were no winner conditions specified for refresh, using default"),d=["market","clientbuyer"]);var a=t||m.getUnitByHook({hbUnitId:e.hbUnitId});if(a&&a.rc||d.indexOf("any")>-1||o||i&&m.bidIdsToBid[n].isMarket&&d.indexOf("market")>-1||i&&!m.bidIdsToBid[n].isMarket&&d.indexOf("clientbuyer")>-1||!i&&d.indexOf("dfp")>-1)return!0}return!1},getSecureURI:function(e){var t=m.bidIdsToBid[e.adId],i=t.id;if(1===t.sp)return null;var n=f.getConfig("secured");return n&&1===n[i]?"//"+p.getRealScriptHost()+"/prebid/iframe.html?adid="+e.adId+"&ref="+encodeURIComponent(location.origin):null},getOOPSizesFromBidders:function(e){for(var t=[],i=0;i<e.bids.length;i++){var n=e.bids[i].params.v_oop_sizes;if(n)for(var r=n.split(","),o=0;o<r.length;o++){var d=r[o].split("x");t.push([parseInt(d[0]),parseInt(d[1])])}}return t},cleanSlotsHBTargeting:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=i.getTargetingKeys(),r=0;r<n.length;r++)0!==n[r].indexOf("hb_")&&"is_vmhbmp"!==n[r]||i.clearTargeting(n[r]);p.log("HBMP targeting cleaned")},checkLabel:function(t){if(t&&"size"===t.type){var i=e.screen.width;try{i=top.innerWidth}catch(e){}return t.config.min_width<=i&&i<=t.config.max_width}return!1},checkLabels:function(e){for(var t=e.bids,i=0,n=0;n<t.length;n++){t[n].validLabelIds=[];for(var r=0;r<t[n].labels.length;r++)this.checkLabel(t[n].labels[r])&&t[n].validLabelIds.push(t[n].labels[r].id);if(0!==t[n].labels.length&&0===t[n].validLabelIds.length){var o=e.bids.splice(n,1);p.log("LABEL FILTER remove bidder: ",o,e),n--}else i++}return 0===i&&p.log("LABEL FILTER remove unit coz it has not active bidders: ",e),!!i},checkGeo:function(e){var t=e.bids,i=this.getGeo(),n=0;if(!f.config.geoRequired)return!0;for(var r=0;r<t.length;r++){var o=t[r].geo;if(o.skipGeo)n++;else if("white"===o.type&&o.list[i])n++;else if("block"===o.type&&i&&"unknown"!==i&&!o.list[i])n++;else{var d=e.bids.splice(r,1);p.log("GEO FILTER remove bidder: ",d,e),r--}}return 0===n&&p.log("GEO FILTER remove unit coz it has not active bidders: ",e),!!n},getAvailableBids:function(t){if(!e.vmpbjs)return[];var i=vmpbjs.getBidResponsesForAdUnitCode(t.divId).bids||[];return i?p.filter(i,(function(e){var i=m.bidIdsToBid[e.requestId],n=i.isMarket,r=i.noR,o=i.useFirstBidInRefresh;if(i.sp&&!t.getSPBids)return!1;if(t.getSPBids&&!i.sp)return!1;if(t.isDfpAuction&&i.noDfp)return!1;if(e.bidFloored||e.bidCeiled)return!1;if(!1===t.clientBuyers&&!1===n)return!1;if(!1===t.marketBuyers&&!0===n)return!1;if(t.isRefreshLogic&&!o&&r)return p.log("filter bid on refresh",i.id),!1;var d=m.unitIdToState[i.entityId];return!(i.disableAR&&d&&d.renderedBuyerIds&&d.renderedBuyerIds[i.id])&&(e.cpm>0&&e.responseTimestamp+1e3*e.ttl>c()&&"rendered"!==e.status)})):[]},pickMaxBid:function(e){for(var t=e[0],i=1;i<e.length;i++)e[i].cpm>t.cpm&&(t=e[i]);return t},getWinningBidByCode:function(e){var t=e.divId,i=e.cb,n=this,r=null,o=n.getAvailableBids(e),d=f.getConfig("secondPrice")?e.isDfpAuction?[]:n.getAvailableBids(p.merge({getSPBids:1},e)):[];if(0===o.length&&0===d.length)return i(r);function a(t){var o;return t&&t.length?o=n.pickMaxBid(t):d&&d.length&&(o=d[0]),o&&(r={adUnitId:m.bidIdsToBid[o.requestId].entityId,type:o.mediaType,width:o.width,height:o.height,adId:o.adId,bid:o.cpm,requestSizes:m.bidIdsToBid[o.adId].sizes,refBid:o},"video"===o.mediaType?r.vastUrl=o.vastUrl:r.ad=o.ad,e.omitUsingBid||vmpbjs.markWinningBidAsUsed({adId:o.adId})),i(r)}f.getConfig("minViewRate")?l.isVisible(t,(function(i){p.log("MinViewRate: visibility check",t,i),i?a(o):(d&&d.length&&(d=[]),a(o=p.filter(o,(function(t){var i=n.bidIdsToBid[t.requestId],r=i.id,o=l.hasBuyerEnoughVisibleRate(i,e.isDfpAuction);return t.lowView=!o,p.debug("MinViewRate: ",r,o?"allowed":"filtered"),o}))))})):a(o)},startAuction:p.debounce((function(){var e=this;S.onReady((function(){var t={DFPSlotHooks:p.filter(p.values(b.slots),(function(e){return e.slot.gptDisplayCalled})),sendDfpRequest:!0,setHBTargeting:!0};e._startAuction(t)}))}),30),getNotStrictUnit:function(e,t,i){var n=[];for(var r in e){var o=e[r];o&&-1!==t.toLowerCase().indexOf(o.code.toLowerCase()+"/")&&o.soft_match&&(!o.divId||o.divId&&i.toLowerCase()===o.divId.toLowerCase())&&n.push({uName:r,l:r.length})}return 0!==(n=n.sort((function(e,t){return e.l-t.l}))).length&&e[n.pop().uName]},getUnitByHook:function(e){function t(t){return t.entityId===e.hbUnitId}return p.findValue(this.getDisplayUnitsMap(),t)||p.findValue(this.getOutstreamUnitsMap(),t)},findHBMPUnit:function(e,t){var i=this.getOutstreamUnitsMap(),n=this.getDisplayUnitsMap(),r=e.split("/");if(""===r[0]&&r.shift(),-1===r[0].indexOf(f.getConfig("networkCode")))return null;r.shift();var o="/"+r.join("/").toLowerCase(),d=o+t.toLowerCase();return n[d]||i[d]||n[o]||i[o]||this.getNotStrictUnit(n,e,t)||this.getNotStrictUnit(i,e,t)},checkDFPInclusion:function(e,t){for(var i=e.bids,n=0,r=0;r<i.length;r++)t&&i[r].noDfp?(p.log("NoDFP FILTER remove bidder:",i[r]),e.bids.splice(r,1),r--):++n;return!!n},checkSpot:function(e,t){var i=f.getConfig("spotRefresh");if(!i)return!0;if(!t)return!0;for(var n=e.bids,r=0,o=0;o<n.length;o++)n[o].isMarket||n[o].bidder===i?r++:(p.debug("REFRESH inclusion spot FILTER remove bidder: ",n[o]),e.bids.splice(o,1),o--);return!!r},checkRefreshInclusion:function(e,t,i,n){for(var r=e.bids,o=0,d=0;d<r.length;d++){var a=m.refreshHandles[e.code];n&&1===r[d].noR||n&&r[d].refreshLimit&&a&&(a.refreshesMade||0)>=r[d].refreshLimit?(p.debug("REFRESH inclusion FILTER remove bidder: ",r[d]),e.bids.splice(d,1),d--):t&&r[d].isMarket||i&&!r[d].isMarket?o++:(p.debug("REFRESH inclusion FILTER remove bidder: ",r[d]),e.bids.splice(d,1),d--)}return!!o},checkAlreadyRenderedBuyers:function(e){for(var t=e.bids,i=0,n=this.unitIdToState[e.entityId],r=0;r<t.length;r++){var o=t[r];o.disableAR&&n&&n.renderedBuyerIds&&n.renderedBuyerIds[o.id]?(p.log("Already rendered FILTER remove bidder:",t[r]),e.bids.splice(r,1),r--):i++}return!!i},checkAB:function(e,t){for(var i=e.bids,n=0,r=0;r<i.length;r++){var o=i[r].ABPercent;void 0===o||o>=t?n++:(p.log("AB FILTER remove bidder:","generated:",t,"bidder wants:",o,i[r]),e.bids.splice(r,1),r--)}return!!n},checkWLDomains:function(e){for(var t=e.bids,i=0,n=p.getTopDomain(),r=0;r<t.length;r++){var o=t[r].allow_domains;void 0===o||o.split(",").some((function(e){return n.indexOf(e)>-1}))?i++:(p.log("DOMAIN FILTER remove bidder: ",t[r]),e.bids.splice(r,1),r--)}return!!i},checkWLSizes:function(e){for(var t=e.bids,i=0,n=e.sizes.map((function(e){return e[0]+"x"+e[1]})),r=0;r<t.length;r++){var o=t[r].allow_sizes;void 0===o||o.toLowerCase().split(",").some((function(e){return n.indexOf(e)>-1}))?i++:(p.log("SIZE FILTER remove bidder: ",t[r].allow_sizes,t[r]),e.bids.splice(r,1),r--)}return!!i},updateCookieCap:function(e){var t=this.readCookieCap();t.hourly[e]=t.hourly[e]||0,t.hourly[e]++,t.daily[e]=t.daily[e]||0,t.daily[e]++,p.setCookie("hbmp_cap_h",btoa(JSON.stringify(t.hourly)),1,"hourly"),p.setCookie("hbmp_cap_d",btoa(JSON.stringify(t.daily)),24,"daily")},readCookieCap:function(){var e=p.getCookie("hbmp_cap_h"),t=p.getCookie("hbmp_cap_d"),i={hourly:{},daily:{}};return e&&(i.hourly=JSON.parse(atob(e))),t&&(i.daily=JSON.parse(atob(t))),i},addPlacementIDs:function(e){var i="";try{i=t.pubads().getTargeting("category")[0]}catch(e){}for(var n=0;n<e.bids.length;n++)e.bids[n].bidder.indexOf("adtelligent")>-1&&(e.bids[n].params.vpb_placement_id=i?i+":"+e.fullName:e.fullName)},checkCookieCap:function(e,t){for(var i=e.bids,n=0,r=0;r<i.length;r++)if(i[r].cookieCapPerUser){if(!i[r].cookieCapPerUser.hourly&&!i[r].cookieCapPerUser.daily){n++;continue}if(i[r].cookieCapPerUser.hourly>(t.hourly[i[r].bidder]||0)&&i[r].cookieCapPerUser.daily>(t.daily[i[r].bidder]||0))n++;else{var o=e.bids.splice(r,1);p.log("COOKIE FILTER remove bidder: ",o,e),r--}}else n++;return 0===n&&p.log("COOKIE FILTER remove unit coz it has not active bidders: ",e),!!n},waitingDFPQue:[],initPrebid:function(){var e=this;e.adValidation={},e.bidAdIdsToWinSizes={},e.bidIdsToBid={},e.adUnitCodesToAdIDs={},e.isRefreshAuction={},e.unitIdToState={},w.onReady((function(){y.init(),vmpbjs.onEvent("bidWon",(function(t){p.log("hbrender",t.adId,"original AdId",t.originalAdId,"reqId",t.requestId);var i=e.bidIdsToBid[t.requestId];if(e.bidIdsToBid[t.adId]=i,i.disableAR){var n=e.unitIdToState[i.entityId]=e.unitIdToState[i.entityId]||{};n.renderedBuyerIds=n.renderedBuyerIds||{},n.renderedBuyerIds[i.id]=1}e.updateCookieCap(t.bidderCode),f.getConfig("ald")&&p.xhr({url:m.advertiserLevelDataUrl,method:"POST",data:{hbAdId:t.adId,ad:t.ad,bidderCode:t.bidderCode,cpm:t.cpm,divId:t.adUnitCode,adUnitId:e.bidIdsToBid[t.requestId].entityId,buyerId:e.bidIdsToBid[t.requestId].id,siteId:p.getSiteId()},headers:{"content-type":"application/json"}})})),vmpbjs.onEvent("bidRequested",(function(t){for(var i=0;i<t.bids.length;i++){var n=t.bids[i],r=n.bidId;if(n.geoEdgeIndex>=0){var o=f.getConfig("geoEdgeIds");e.adValidation[r]={geoedge:f.getConfig("ge_exclude")&&f.getConfig("ge_exclude").indexOf(n.id)>-1?"":o[n.geoEdgeIndex]}}e.bidIdsToBid[r]=n}})),vmpbjs.onEvent("bidResponse",(function(t){e.bidIdsToBid[t.adId]=e.bidIdsToBid[t.requestId],e.bidAdIdsToWinSizes[t.adId]=[t.width,t.height]}))})),e._startAuction=function(i){var n=p.filter(p.map(i.DFPSlotHooks,(function(e){return e.slot})),(function(e){return!!e}));i.setHBTargeting&&h.fetchBids(n),f.failLoad?t.cmd.push((function(){t.pubads().refresh(n,{vpb:!0})})):(e.waitingDFPQue=e.waitingDFPQue.concat(n),w.onReady((function(){var n=void 0===i.marketBuyers||i.marketBuyers,o=void 0===i.clientBuyers||i.clientBuyers,d=void 0!==i.isRefreshLogic&&i.isRefreshLogic;e.vpbRuns++,e.getIsEU(),p.log("Auc mapping started",i.DFPSlotHooks.length);var a,s={},u=[],h=[],v=[],I=[];function S(e){e.length&&(f.getConfig("UAMFriendly")?(f.onTargetingSet&&f.onTargetingSet(e),f.emit("targetingSet",e)):t.cmd.push((function(){t.pubads().refresh(e,{vpb:!0})})))}var B=function(){clearTimeout(a),f.aucs.push(u),i.sendDfpRequest&&(p.log("Slots to refresh after auction",I.length,I),S(I))};f.firstRunDeadLine=f.firstRunDeadLine||f.hbmpDeadline,f.firstRunDeadLine&&1===e.vpbRuns&&(a=setTimeout((function(){p.error("Finalizing in timeout"),B()}),f.firstRunDeadLine-c()));for(var R=Math.round(100*Math.random()),C=e.readCookieCap(),k=0;k<i.DFPSlotHooks.length;k++){var D=i.DFPSlotHooks[k],T=D.realId;if(D.slot){if(b.isSlotSkippedByTargeting(D.slot)){delete D.slot.hbUnitId,v.push(D.slot);continue}D.slot.gptDisplayCalled=!1}var _=D.adUnitPath,E=D.unitRef||e.getUnitByHook(D);if(E){if("video"===E.type){s[T]=E;var A=vmpbjs.getConfig("vmOutstreamConfigs")||{};A[E.outstream_id]=E,vmpbjs.setConfig({vmOutstreamConfigs:A})}if(E&&((E=p.copy(E)).fullName=_,E.code=T),E.bids&&0!==E.bids.length)if(e.checkAlreadyRenderedBuyers(E))if(e.checkAB(E,R))if(e.checkDFPInclusion(E,i.setHBTargeting))if(e.checkRefreshInclusion(E,n,o,d))if(e.checkWLDomains(E))if(e.checkCookieCap(E,C))if(e.checkLabels(E))if(e.checkGeo(E)){var U=null;if(D.sizes)U=D.sizes;else{if(D.oop||D.slot.getOutOfPage())U=E.outstream_id?E.sizes:m.getOOPSizesFromBidders(E);else{if((U=b.getDirectSizes(D.slot))&&1===U.length&&"fluid"===U[0]){p.error("FLuid is not supported refreshing",E.fullName,E.code),v.push(D.slot);continue}U=b.getDirectSizesNoFluid(D.slot);var P=f.getConfig("allow1x1");U&&1===U.length&&1===U[0][0]&&1===U[0][1]&&!P&&(U=m.getOOPSizesFromBidders(E))&&1===U.length&&1===U[0][0]&&1===U[0][1]&&(U=[[300,250]])}if(0===U.length){p.error("Was unable to parse adunit size, skip this unit and DO NOT TRY TO REFRESH IT with GPT",E.fullName,E.code),v.push(D.slot);continue}}D.size=U,E.sizes=U,e.checkWLSizes(E)?(E.mediaTypes.banner&&(E.mediaTypes.banner.sizes=U),E.mediaTypes.video&&(E.mediaTypes.video.playerSize=U[0],E.mediaTypes.video.mimes=["video/mp4"]),e.addPlacementIDs(E),"video"!==E.type&&I.push(D.slot),u.push(E),h.push(E.code)):(p.log("All bids WLSizeFiltered ",E.code,E.fullName),v.push(D.slot))}else v.push(D.slot);else p.log("All bids filtered by labels ",E.code,E.fullName),v.push(D.slot);else p.log("All bids CookieCap filtered ",E.code,E.fullName),v.push(D.slot);else p.log("All bids WLDomainFiltered ",E.code,E.fullName),v.push(D.slot);else p.debug("Refresh filter filtered all bids",E.code,E.fullName),v.push(D.slot);else p.debug("DFP filter filtered all bids",E.code,E.fullName),v.push(D.slot);else p.log("All bids ABFiltered ",E.code,E.fullName),v.push(D.slot);else p.log("All bids filtered AlreadyRendered ",E.code,E.fullName),v.push(D.slot);else p.log("No bids in ",E.code,E.fullName),v.push(D.slot)}else d?p.log("Seems like adunit disappeared from config, no refresh made"):console.error("This should not happen, slot didnt find corresponding HBMP adunit",D),D.slot&&v.push(D.slot)}if(p.filter(v,(function(e){return!!e})).length&&(p.log("Slots to refresh (no vpb matched)",v.length,v),S(v)),0===u.length)return p.log("WARNING: No adUnits to auctionate, FINALIZING"),i.onEnd&&i.onEnd(null,{stop:!0}),void B();var M=g();e.isRefreshAuction[M]=d,p.log("Placements in auction ",M,h),w.onReady((function(){function n(t,n){e.getWinningBidByCode({isRefreshLogic:d,isDfpAuction:i.setHBTargeting,omitUsingBid:!0,divId:t,cb:function(e){n&&n(e),y.aucWinnerChosen(M,t,e?e.adId:null)}})}function o(i,n){if(n){p.log("Targeting set",i);var r=vmpbjs.getTargeting(i,[n.refBid]);t.cmd.push((function(){var t=b.findSlotById(i);t&&(e.adUnitCodesToAdIDs[i]=e.adUnitCodesToAdIDs[i]||[],e.adUnitCodesToAdIDs[i].push(n.adId),p.findValue(r[i],(function(e,i){t.setTargeting(i,[e]),d&&t.setTargeting("hb_srf",["1"])})))}))}}p.log("Auc started"),vmpbjs.setConfig({cache:{url:"https://prebid.adnxs.com/pbc/v1/cache"},enableSendAllBids:!1});var a=0,c=f.getConfig("mobileTimeout"),g=l.getBuyerIdsThatRequireMinView(u,i.setHBTargeting);l.requestBidViewRates(g.idsToRequest),vmpbjs.requestBids({auctionId:M,timeout:d?f.getConfig("refreshTimeout")||4e3:r&&c?c:f.getConfig("vmTimeouts")._site_||2e3,isRefresh:d,bidsBackHandler:function(t){if(a=p.values(t).length,t&&a>0)for(var r in t){for(var d=t[r],l=0;l<t[r].bids.length;l++){var c=d.bids[l];c.adserverTargeting.hb_site_id=p.getSiteId(),c.adserverTargeting.hb_r_id=c.requestId,c.adserverTargeting.hb_buyer_id=e.bidIdsToBid[c.requestId].id,c.adserverTargeting.hb_override_id=e.bidIdsToBid[c.requestId].overrideId,c.adserverTargeting.is_vmhbmp=!0,c.adserverTargeting.hb_div_id=c.adUnitCode}!function(e){n(e,(function(n){i.setHBTargeting&&I&&I.length&&o(e,n),0===--a&&(B(),p.log("Auction finished"),i.onEnd&&i.onEnd(t))}))}(r),r in s&&t[r].bids&&e.getWinningBidByCode({divId:r,cb:function(e){e&&(e=e.refBid,s[r].bid=e,"video"===e.mediaType&&vmpbjs.renderAd(document,e.adId,{VmOutstream:""+s[r].outstream_id}))}})}else B(),p.log("Auction finished"),i.onEnd&&i.onEnd(t)},adUnits:u})}))})))}},getAllUnits:function(){return this._cache||(this._cache=this._mapData(f.config,!0)),this._cache},getOutstreamUnitsMap:function(){return this.getAllUnits().video||{}},getDisplayUnitsMap:function(){return this.getAllUnits().display||{}},getGeo:function(){return this._geo||(this._geo=i&&localStorage.getItem("vpb-location"))||"unknown"},getIsEU:function(){return f.isEU||(f.isEU=i&&"true"===localStorage.getItem("vpb-isEU"))},geoIs:function(e){return this.getGeo()===e},runSyncByType:function(e){if(p.debug("running warmup"),e.url&&(e.url=e.url.replace("{cb}",Date.now()*Math.random())),"image"===e.type)new Image(1,1).src=e.url;else if("iframe"===e.type&&document.body){var t=document.createElement("iframe");t.src=e.url,t.sandbox="allow-scripts allow-same-origin",t.style.display="none",document.body.appendChild(t)}else if("script"===e.type){var i=document.createElement("script");i.src=e.url,(document.body||document.head).appendChild(i)}},runPreSync:function(e){var t=this;e&&p.xhr({url:"https://"+p.getADomain()+e,sendCookie:!0,callback:function(e){e=JSON.parse(e);try{for(var i=0;i<e.length;i++)for(var n=e[i],r=0;r<n.cookieURLs.length;r++){var o=n.cookieURLSTypes[r],d=n.cookieURLs[r];t.runSyncByType({type:o,url:d})}}catch(e){p.error("Error wih pre csync",e)}}})},_mapData:function(e,t){if(!e)return null;for(var i={},n=e.adunits,r={},o=0;o<n.length;o++){var d=n[o];if(!d.code)return null;var a=p.copy(d);if(i[a.type]=i[a.type]||{},i[a.type]["/"+a.code+(a.divId||"")]=a,a.bids)for(var s=0;s<a.bids.length;s++){var l=a.bids[s];l.isMarket||(r[l.bidder]=1)}}var c=p.keys(r),u=e.schainMkpBidders||[];return w.onReady((function(){307199===f.config.clientId&&vmpbjs.enableAnalytics({provider:"adpartner",options:{}}),e.userIdModuleConfigs&&vmpbjs.setConfig({userSync:{userIds:e.userIdModuleConfigs}}),e.schainclient&&c.length&&vmpbjs.setBidderConfig({bidders:c,config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[e.schainclient]}}}}),e.schainmkp&&u.length&&vmpbjs.setBidderConfig({bidders:u,config:{schain:{validation:"strict",config:{ver:"1.0",complete:1,nodes:[e.schainmkp]}}}});var i=e.bidderAliases;if(i)for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&vmpbjs.aliasBidder(i[n],n);f.config.secondPrice&&vmpbjs.setConfig({secondPrice:1}),f.config.networkCurrency&&t&&vmpbjs.setConfig({currency:{adServerCurrency:f.config.networkCurrency,conversionRateFile:"https://player.adtelligent.com/exchange_rates/"+f.config.clientId+"/config.json?cb="+encodeURIComponent(p.contentPageUrl())}}),vmpbjs.setConfig({priceGranularity:e.granularity}),vmpbjs.setConfig({vmTimeouts:e.vmTimeouts}),vmpbjs.setConfig({userSync:{aliasSyncEnabled:!0,enableOverride:!0,syncsPerBidder:0,filterSettings:{iframe:{bidders:"*",filter:"include"},image:{bidders:"*",filter:"include"}}}}),e.serverConfig&&vmpbjs.setConfig({s2sConfig:e.serverConfig}),f.getConfig("bidSizeMatch")&&vmpbjs.setConfig({bidsizematch:{ignoreMismatchedSizes:!0}});e.bidAdjustment&&(vmpbjs.bidderSettings=vmpbjs.bidderSettings||{},vmpbjs.bidderSettings.standard={bidCpmAdjustment:function(t,i,n){var r=i.bidderCode;i.originalCpm=i.originalCpm||i.cpm,i.originalCurrency=i.originalCurrency||i.currency,i.grossBid=t;var o=m.bidIdsToBid[i.requestId];if(i.ad&&!n&&m.adValidation[i.requestId]){var d=m.adValidation[i.requestId].geoedge;if(d){var a='<div id="grumi-container"><script type="text/javascript" nonce="!headerNonce!">!function(d,i){var p={wver:"1.1.5",wtype:"dfp",key:"{{geoEdgeToken}}",meta:{adup:"%%ADUNIT%%",dest:"%%DEST_URL_ESC%%",w:"%%WIDTH%%",h:"%%HEIGHT%%",li:"%eaid!",adv:"%eadv!",ord:"%ebuy!",cr:"%ecid!",ygIds:"%_ygIds!",aduid:"%epid!",haduid:"%esid!",isAfc:"%_isAfc!",isAmp:"%_isAmp!",qid:"%qid!",cust_imp:"%cust_imp!",cust1:"%cust1!",cust2:"%cust2!",cust3:"%cust3!",caid:"%caid!",di:"%DEMAND_ID!",dn:"%DEMAND_NAME!",dcid:"%DEMAND_CREATIVE_ID!",pid:"%PUBLISHER_ID!",pn:"%PUBLISHER_NAME!",adElId:"%_adElId!"},sp:"dfp",cfg:{},pbAdId:"%%PATTERN:hb_adid%%",pbAdIdAst:"%%PATTERN:hb_adid_appnexusAst%%",pbBidder:"%%PATTERN:hb_bidder%%",hbPb:"%%PATTERN:hb_pb%%",hbCid:"%_hbcid!",site:"%%SITE%%",pimp:"%_pimp%"};window.grumi=p}();<\/script><template style="display: none;" id="template0"><xmp style="display: none;" id="xmp0">',s="adtelligentMarket"===o.bidder?i.cmpId:o.adapter_id;a=a.replace("{{geoEdgeToken}}",d).replace("%%WIDTH%%",i.width).replace("%%HEIGHT%%",i.height).replace("%DEMAND_ID!",s).replace("%eadv!",s).replace("%DEMAND_NAME!",o.bidder).replace("%DEMAND_CREATIVE_ID!",i.creativeId).replace("%ecid!",i.creativeId).replace("%PUBLISHER_ID!",p.getSiteId()).replace("%PUBLISHER_NAME!",f.config.domain).replace("%cust_imp!",i.requestId),i.ad=a+i.ad+'</xmp></template><script type="text/javascript" nonce="!footerNonce!">!function(t){var o=window.grumi.key,r=window.grumi,e=r&&r.wtype&&"gpt"===r.wtype,n=window.onerror,i=1*new Date,a=navigator.userAgent&&navigator.userAgent.match(/\b(MSIE |Trident.*?rv:|Edge\\/)(\\d+)/),w=e&&!a;function d(){var e=function(){for(var e,n=document.getElementsByTagName("template"),t=n.length-1;0<=t;t--)if("template0"===n[t].id){e=n[t];break}return e}();return e.content?e.content.getElementById?e.content.getElementById("xmp0"):e.content.childNodes[0]:e.getElementsByTagName("xmp")[0]}function u(){var e=d();return e&&e.innerHTML}function c(e,n){n=n||!1,top.postMessage&&top.postMessage({evType:e||"",key:r.key,adup:r.meta.adup,html:window.grumi?window.grumi.tag:"",el:r.meta.adElId,refresh:n},"*")}var m=!1;function g(e,n){if(!m){m=!0;var t="",o=a&&"complete"===document.readyState;window.grumi&&(window.grumi.fsRan=!0,t=window.grumi.tag),o||(t||(t=u()),w&&window.document.open(),window.document.write(t),window.document.close()),((n=n||!1)||o)&&c(e,o)}}function l(e,t){return function(){var n=setTimeout(function(){var e=document.getElementById(i);e&&null===function(e){if(void 0!==e.nextElementSibling)return e.nextElementSibling;for(var n=e.nextSibling;n&&1!==n.nodeType;)n=n.nextSibling;return n}(e)&&t&&t(),clearTimeout(n)},e)}}l(5e3,function(){g()})(),l(2e3,function(){c("slwCl")})(),window.grumi.tag=u(),window.grumi.scriptHost=t,window.grumi.pbGlobal=window.grumi.cfg&&window.grumi.cfg.pbGlobal||"vmpbjs",window.grumi.onerror=n,window.parent&&window.parent.postMessage&&window.parent.postMessage({iw:!0,key:r.key,adup:r.meta.adup,el:r.meta.adElId},"*"),function(){var e=document.createElement("script");e.type="text/javascript",e.src=t+o+"/grumi.js",e.className="rm",e.id=i,w&&(e.async=!0);var n="_"+1*new Date;window[n]=function(){g("netErr",!0)},window.grumi.start=1*new Date;try{window.document.write(e.outerHTML.replace(\'class="rm"\',\'onerror="\'+n+\'();"\'))}catch(e){g()}}(),window.onerror=function(e){"function"==typeof n&&n.apply(this,arguments),l(0,g)(),window.onerror=n}}(("http"===window.location.protocol.substr(0,4)?window.location.protocol:"https:")+"//rumcdn.geoedge.be/");<\/script></div>'}}i.ad&&o.isMarket&&f.getConfig("showLogo")&&(i.ad='<div style="position: relative; display: inline-block">'+i.ad+' <a href="https://adtelligent.com/?utm_source=hb_mkp_banner&utm_medium=hb_mkp&utm_campaign=hb_mkp" target="_blank"> <img  style="position: absolute; bottom: 25px; right: 25px" src = "https://player.adtelligent.com/adt_logo.png"> </a> </div>');var l=o.id,c=t*(e.bidAdjustment[l]||1);i.netBid=c,!n&&p.log("Adjusting bid for: "+r,":",t,"->",c,"(",e.bidAdjustment[l],")"),f.config.r[l]&&(c*=(100-f.config.r[l])/100,!n&&p.debug("RevShare bid for: "+r,":",t,"->",c,"(",f.config.r[l],")")),i.clientBid=c,c*=f.getConfig("pubRev"),i.pubBid=c,f.getConfig("adxEnhance")&&(c*=f.getConfig("adxEnhance")),o.isMarket&&f.getConfig("adxM")&&(c*=f.getConfig("adxM"));var u=o.entityId,g=e.bidFloorConfig.adunit[u]||0,h=e.adunitsFloorSettings;if(h&&h[u]){var b=h[u];const e=m.getGeo(),t=i.width+"x"+i.height;var v=null,I=void 0!==b[e]?b[e]:b.ANY;I&&(v=void 0!==I[t]?I[t]:I.ANY||0),g=Math.max(v,g)}var y=e.bidFloorConfig.buyer[o.id];if(g>0?(p.log("BidFloor cpm:",i.cpm,"Resulting:",c,"Floor:",g),i.bidFloored=c<g,o.sp&&(i.minCpm=g)):o.sp&&(i.minCpm=i.convertCpmFromUsd(.02)),y&&!i.bidFloored){var w=i.convertCpmToUSD(c);p.log("Buyer min cpm (USD):",y.min,"Buyer max cpm (USD):",y.max,"Resulting (USD):",w),i.bidFloored=parseFloat(w)<parseFloat(y.min),i.bidCeiled=parseFloat(w)>parseFloat(y.max)}return c}})})),p.log("config parsed",i),f.cleanConfig=i,i},getRefreshTime:function(e,t){var i=f.getConfig("customRefreshInterval");return t&&i&&i.buyer&&i.buyer[t.id]?i.buyer[t.id]:f.getConfig("refreshSubsequentInterval")&&e>=1?f.getConfig("refreshSubsequentInterval"):f.getConfig("refreshHBWinnerInterval")},updateCatfishState(e,t){var i=document.getElementById(e);if(i&&t){var n=i.getAttribute("data-hb-catfish");if(n){var r=document.getElementById(n);if(r){r.style.display="block";var o=r.getElementsByClassName("vpb-ad")[0];o&&(o.style.width=t.width+"px",o.style.height=t.height+"px");var d=r.getElementsByClassName("vpb-close-button")[0];d&&(d.style.display="inline-block")}}}},startRefreshSlot:function(e,t){var i=f.getConfig("noRefreshUnits");if(!(i&&(i=i.split(",")).indexOf(e.adUnitId+"")>-1)&&f.getConfig("refreshHBWinnerInterval")){var n=this,r=e.divId,o=n.refreshHandles[r]=n.refreshHandles[r]||{refreshesMade:0},d=!1;if(clearTimeout(o.timingFnPtr),p.getMaxRefreshCount()<=o.refreshesMade)return p.log(r+"unit finalizing refreshes"),!1;var a=e.hbUnit||m.getUnitByHook({hbUnitId:e.adUnitId}),s=n.getRefreshTime,c=!1,u=!1;a.rc&&(a.rc.interval&&(s=function(){return a.rc.interval}),a.rc.unitId&&(c=a.rc.unitId),u=!!a.rc.whenInView),u||e.withDFP&&f.getConfig("dfpRefreshInView")?(p.log("Start monitor viewability to refresh",r),l.monitor({targetId:r,timeInView:1e3,cb:function(){return p.log("Setup refresh timeout (after inView 1 sec)",r),clearTimeout(o.timingFnPtr),d=!0,o.timingFnPtr=setTimeout(g,s(o.refreshesMade,t)),l.monitorStop({targetId:r})}}),(f.getConfig("imrp")>=Math.random()||f.getConfig("refreshInvisibleMarket"))&&(d=!1,p.log("Setup refresh timeout regular",r),o.timingFnPtr=setTimeout(g,s(o.refreshesMade,t)))):(p.log("Setup refresh timeout regular",r),o.timingFnPtr=setTimeout(g,s(o.refreshesMade,t)))}function g(){if(c){b.defineSlot(c,e.sizes,e.code).setTargeting("hb_nrf",["1"])}else{f.getConfig("spotRefresh")&&d&&(e.clientBuyers=!0);var t=p.merge({},e);t.sendDfpRequest=e.withDFP,t.setHBTargeting=e.withDFP,u&&e.withDFP&&p.track({event:11,type:1,client_id:p.getClientId(),site_id:p.getSiteId()}),t=p.merge(t,{isRefreshLogic:!0,onEnd:function(t,i){if(!e.withDFP&&t){if(p.log("refresh bidwon "+t.adId,t),!T(t,r))return;n.updateCatfishState(r,t)}var o=n.refreshHandles[r];if(o.refreshesMade=++o.refreshesMade||1,p.getMaxRefreshCount()>o.refreshesMade&&f.getConfig("refreshHBWinnerInterval")){if(i&&i.stop)return void p.log(r+"unit finalizing refreshes");p.log("Setup refresh timeout after auction",r),clearTimeout(o.timingFnPtr),o.timingFnPtr=setTimeout(g,s(o.refreshesMade,t?m.bidIdsToBid[t.adId]:null))}}}),f.auctionByAdUnitID(t)}}}},b={slots:{},slotsNotMatched:{},googleNative:{},findSlotById:function(e){for(var i=t.pubads().getSlots(),n=0;n<i.length;n++)if(i[n].getSlotElementId()===e)return i[n]},init:function(){this._pushGoogleCmds()},defineSlot:function(e,i,n){var r=m.getUnitByHook({hbUnitId:e}),o=document.getElementById(n);o.innerHTML="",n+="_sub";var d=document.createElement("div");d.id=n,o.appendChild(d);var a=t.defineSlot(r.code,i,n).addService(t.pubads());t.pubads().refresh([a])},getDFPTargeting:function(e,i){return t.pubads().getTargeting(e)[0]||i&&i.getTargeting(e)[0]||null},isSlotSkippedByTargeting:function(e){return p.some(["skipHB","ads_block","only_selfpromo"],(function(t){return"1"===b.getDFPTargeting(t,e)}))},getDirectSizes:function(t){for(var i=[],n=t.getSizes(e.innerWidth,e.innerHeight)||t.getSizes(),r=0;r<n.length;r++){var o=n[r],d=[];if("fluid"===o)i.push(o);else{for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&d.push(o[a]);i.push(d)}}return i},getDirectSizesNoFluid:function(e){return p.filter(this.getDirectSizes(e),(function(e){return"fluid"!==e}))},lineItemAllowed:function(e){return p.log("check skip line item ",e&&e.lineItemId),!(e&&e.lineItemId&&f.getConfig("liToSkipRefresh"))||-1===f.getConfig("liToSkipRefresh").indexOf(e.lineItemId)},_pushGoogleCmds:function(){var e=this;function i(){e._findSlotsAndStartRefresh(),t.pubads().enableSingleRequest()||p.error("Cannot set enableSingleRequest HBMP MAY BE UNSTABLE"),p.log("HOOK GOOGLETAG"),t.pubads().addEventListener("slotOnload",(function(e){var t=e.slot;p.log("GPT slot slotOnload ",t.getAdUnitPath(),t.getSlotElementId()),m.cleanSlotsHBTargeting([t]),t._isRefreshing=!1})),t.pubads().addEventListener("slotRenderEnded",(function(t){var i,n=t.slot,r=null,o=n.getSlotElementId(),d=n.getAdUnitPath(),a=n.getResponseInformation()||{},s=!1;if(p.log("GPT slot slotRenderEnded",d,o),!n.hbUnitId&&f.getConfig("fastAsync")&&(r=m.findHBMPUnit(d,o))&&(n.hbUnitId=r.entityId),m.cleanSlotsHBTargeting([n]),n._isRefreshing=!1,n.hbUnitId){if(f.getConfig("DFPHBCreativeIds")){if(s=!t.isEmpty&&f.getConfig("DFPHBCreativeIds").indexOf(a.creativeId)>-1)i=m.adUnitCodesToAdIDs[o].shift(),m.bidAdIdsToWinSizes[i]&&(t.size=m.bidAdIdsToWinSizes[i])}else try{var l=n.getHtml();s=!t.isEmpty&&l&&(l.indexOf("hb.renderAd(")>-1||l.indexOf("ucTag.renderAd(")>-1),i=l.match(/hb.renderAd\(document, '(\w+)'.*\)/)[1],m.bidAdIdsToWinSizes[i]&&(t.size=m.bidAdIdsToWinSizes[i])}catch(e){try{i=l.match(/hb_adid(_adt)?":\["([^"]*)"\]/)[2],m.bidAdIdsToWinSizes[i]&&(t.size=m.bidAdIdsToWinSizes[i])}catch(e){}}if(s||y.dfpLose(o),f.getConfig("refreshHBWinnerInterval")&&e.lineItemAllowed(a)&&!b.isSlotSkippedByTargeting(n)){var c=f.getConfig("refreshWhenWinnerIs");c||(p.debug("REFRESH there were no winner conditions specified for refresh, using default"),c=["market","clientbuyer"]);var u=r||m.getUnitByHook({hbUnitId:n.hbUnitId});(f.getConfig("arp")>=Math.random()||u&&u.rc||c.indexOf("any")>-1||t.isEmpty||s&&m.bidIdsToBid[i].isMarket&&c.indexOf("market")>-1||s&&!m.bidIdsToBid[i].isMarket&&(c.indexOf("clientbuyer")>-1||f.getConfig("cbrp")>=Math.random())||!s&&c.indexOf("dfp")>-1)&&m.startRefreshSlot({withDFP:f.getConfig("buyersInRefresh").indexOf("dfp")>-1,adUnitId:n.hbUnitId,hbUnit:u,code:o,sizes:e.getDirectSizesNoFluid(n),divId:o,clientBuyers:f.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:f.getConfig("buyersInRefresh").indexOf("market")>-1},m.bidIdsToBid[i])}}})),e.googleNative.defineSlot=t.defineSlot,e.googleNative.defineOutOfPageSlot=t.defineOutOfPageSlot,e.googleNative.display=t.display,e.googleNative.pubadsRefresh=t.pubads().refresh,e.googleNative.disableInitialLoad=t.pubads().disableInitialLoad,e._hookGoogle()}i._startgpt=!0,t.cmd.unshift?t.cmd.unshift(i):t.cmd.push(i)},finalRun:function(){m.startAuction(),p.log("debounce auc start")},convertSlots:function(e){try{for(var t=[],i=0;i<e.length;i++){var n=e[i];t.push({code:n.getAdUnitPath(),divId:n.getSlotElementId()})}return t}catch(e){return"Errored conversion"}},_findSlotsAndStartRefresh:function(){var e=this;t.cmd.push((function(){var i=t.pubads().getSlots();p.log("getting defined slots",i.length),p.each(i,(function(t){var i=t.getSlotElementId(),n=t.getAdUnitPath(),r=m.findHBMPUnit(n,i);if(r&&!t.hbUnitId&&!e.slots[i]){var o=t.getResponseInformation(),d=document.getElementById(i),a=!!d&&!!d.getAttribute("data-google-query-id"),s=m.isRefreshAllowed(t,r,!1,"",o,!1),l=b.getDirectSizesNoFluid(t);t.hbUnitId=r.entityId,e.slots[i]={code:i,slot:t,oop:t.getOutOfPage(),realId:i,adUnitPath:n,hbUnitId:r.entityId,type:r.type,sizes:l},a&&s&&m.startRefreshSlot({withDFP:!1,adUnitId:r.entityId,hbUnit:r,code:i,sizes:b.getDirectSizesNoFluid(t),divId:i,clientBuyers:f.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:f.getConfig("buyersInRefresh").indexOf("market")>-1})}}))}))},_hookGoogle:function(){var i=this;t.pubads().refresh=function(){var e=this,n=arguments[1]||{},r=[arguments[0],arguments[1]];null==r[0]?r[0]="All Slots":r[0]=i.convertSlots(arguments[0]),f.logEvent("HBMP",{event:"PubAds refresh call detected",arguments:r,message:"Call by "+(n.vpb?"HBMP":"Publisher")});var o=!!n.vpb,d=!!n.uamForce,a=arguments[0];if(a||(a=t.pubads().getSlots()),d&&(p.log("UAM force start auc"),i.finalRun()),o)C.onReady((function(){p.log("FORCE REFRESHING from VPB:",a,r[0]),i.googleNative.pubadsRefresh.call(e,a)}));else{for(var s=[],l=[],c=0;c<a.length;c++)a[c]&&(p.log("REFRESH, refresh logic for:",a[c].getAdUnitPath()),a[c]._isRefreshing?p.log("REFRESH, throttle enabled for all slots, this slot is refreshing, skipping"):a[c].hbUnitId&&a[c]._isRefreshing?p.log("REFRESH, throttle anyway for VPB slots, skipping"):(a[c]._isRefreshing=!0,a[c].gptDisplayCalled=!0,a[c].hbUnitId?f.getConfig("fastAsync")?(p.log("REFRESH, fastAsync, refreshing slot without auc"),s.push(a[c])):(p.log("REFRESH, (native call) marking as displayed, this is VPB slot so making auc"),f.getConfig("UAMFriendly")&&!d?l.push(a[c]):i.finalRun()):d||(p.log("REFRESH, slot  adding to refreshing"),s.push(a[c]))));l.length&&runAds(l,{uamForce:!0}),s.length&&(p.log("REFRESHING:",s),f.logEvent("DFP",{event:"PubAds refresh called",arguments:i.convertSlots(s)}),C.onReady((function(){i.googleNative.pubadsRefresh.call(e,s)})))}},t.pubads().disableInitialLoad=function(){p.log("DISABLE INITIAL LOAD CALLED"),f.supressDisableInitialLoad||(f.loadOnDisplayDisabled=!0),i.googleNative.disableInitialLoad.apply(this,arguments)};var n={};t.display=function(r){if(f.getConfig("fastAsync"))return p.log("DISPLAY fastAsync calling native display for unknown id",r),void i.googleNative.display(r);var o=!1;if(r&&"string"!=typeof r&&r.getSlotElementId&&(r=r.getSlotElementId()),f.getConfig("singleDisplayMode")){if(null==n[r])return;n[r].__gdisplayed&&(o=!0),n[r].__gdisplayed=!0;var d=[];for(var a in n)n[a].__gdisplayed||(n[a].__gdisplayed=!0,d.push(n[a]));d.length&&C.onReady((function(){f.getConfig("UAMFriendly")?e.runAds(d,{uamForce:!0}):t.pubads().refresh(d)}))}if(f.getConfig("throttleDisplay")){var s=i.slotsNotMatched[r]||i.slots[r];if(s){if(s.displayedOnce)return p.log("Throttling multiple display calls for",r);s.displayedOnce=!0}}if(f.logEvent("HBMP",{event:"Slot display called",arguments:arguments}),p.log("DISPLAY, called with id:",r),f.getConfig("loadOnDisplayDisabled"))p.log("DISPLAY, DisableIntialLoad mode is ON so ckipping display");else if(o)p.log("DISPLAY, has to exit");else if(f.getConfig("UAMFriendly")){var l=b.findSlotById(r);l&&e.runAds([l],{uamForce:!0})}else{if(i.slotsNotMatched[r])return p.log("DISPLAY, adding slot to refresh queue"),void C.onReady((function(){p.log("DISPLAY, refreshing ",r),i.googleNative.pubadsRefresh.call(t.pubads(),[i.slotsNotMatched[r]])}));if(null==i.slots[r])return p.error("DISPLAY, ID",r,"IS NOT DEFINED OR NOT HOOKED BY VPB: calling native display"),void i.googleNative.display(r);var c=i.slots[r];c.slot._isRefreshing=!0,c.slot.gptDisplayCalled=!0,p.log("DISPLAY, Adding slot to auction"),i.finalRun()}},t.defineSlot=function(e,t,r){var o=i.googleNative.defineSlot.apply(this,arguments);if(r||(r=o.getSlotElementId()),p.log("Defining regular slot ",e,r),null!=o){n[r]=o,o.setCategoryExclusion("PREPOST");var d=document.getElementById(r),a=r;d&&(a=d.getAttribute("data-ad-type")||r);var s=m.findHBMPUnit(e,a);return i.slotsNotMatched[r]=!1,s?(o.hbUnitId=s.entityId,i.slots[r]={code:a,slot:o,realId:r,adUnitPath:e,hbUnitId:s.entityId,type:s.type},p.log("HBMP hooks this slot",r,e,o),o):(i.slotsNotMatched[r]=o,o)}var l="Problem with define slot: we cannot do defineSlot again. Probably:";n[r]?console.error(l+" defined a slot with an already defined div id"):t&&t.length?console.error(l+" unknown issue"):console.error(l+" defined a slot without sizes")},t.defineOutOfPageSlot=function(e,t){p.log("Defining outofpage slot ",e,t);var r=i.googleNative.defineOutOfPageSlot.apply(this,arguments);t=r.getSlotElementId(),n[t]=r;var o=document.getElementById(t),d=t;o&&(d=o.getAttribute("data-ad-type")||t);var a=m.findHBMPUnit(e,d);return i.slotsNotMatched[t]=!1,a&&302837!==f.config.clientId&&279795!==f.config.clientId?(r.hbUnitId=a.entityId,i.slots[t]={code:d,slot:r,oop:!0,realId:t,adUnitPath:e,hbUnitId:a.entityId,type:a.type},p.log("HBMP hooks this slot",t,e,r),r):(i.slotsNotMatched[t]=r,r)}}},v=function(e){this.state="waiting",this.awaits=[],this.init=function(){var t=this;function i(){return!!e()&&(clearInterval(n),t.state="ready",t.process(),!0)}if(!i())var n=setInterval((function(){i()}),20);return t},this.process=function(){for(var e=0;e<this.awaits.length;e++)this.awaits[e]();this.awaits=[]},this.forceReady=function(){this.state="ready",this.process()},this.onReady=function(e){"ready"!==this.state?this.awaits.push(e):e&&e()}};if(f.friendlyAuction=function(e,t){e&&0!==e.length||t(null);for(var i=[],n=0;n<e.length;n++){var r=b.slots[e[n].getSlotElementId()];r&&i.push(r)}m._startAuction({setHBTargeting:!0,DFPSlotHooks:i,onEnd:function(){t&&t(e)}})},f.config={adunits:[{entityId:11339,name:"tvgid.ua_premium_self",type:"display",code:"tvgid.ua_premium_self",divId:"",soft_match:!1,bids:[{id:2905,name:"Between Digital",adapter_id:1144,type:"display",bidder:"btw_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{w:"300",h:"250",s:"3220321",placementId:"tvgid300"},minViewWithDfp:0,noR:0,allow_sizes:"300x250",geoEdgeIndex:0,overrideId:788493,labels:[]},{id:2905,name:"Between Digital",adapter_id:1144,type:"display",bidder:"btw_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{w:"300",h:"500",s:"3220322",placementId:"tvgid300"},minViewWithDfp:0,noR:0,allow_sizes:"300x500",geoEdgeIndex:0,overrideId:788494,labels:[]},{id:2905,name:"Between Digital",adapter_id:1144,type:"display",bidder:"btw_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{w:"300",h:"400",s:"3220323",placementId:"tvgid300"},minViewWithDfp:0,noR:0,allow_sizes:"300x400",geoEdgeIndex:0,overrideId:788495,labels:[]},{id:2905,name:"Between Digital",adapter_id:1144,type:"display",bidder:"btw_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{w:"300",h:"300",s:"3220324",placementId:"tvgid300"},minViewWithDfp:0,noR:0,allow_sizes:"300x300",geoEdgeIndex:0,overrideId:788496,labels:[]},{id:2905,name:"Between Digital",adapter_id:1144,type:"display",bidder:"btw_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{w:"300",h:"600",s:"3220325",placementId:"tvgid300"},minViewWithDfp:0,noR:0,allow_sizes:"300x600",geoEdgeIndex:0,overrideId:788497,labels:[]},{id:6515,name:"Automatad [Appnexus]",adapter_id:1461,type:"display",bidder:"automatadC_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{placementId:16527571},minViewWithDfp:0,noR:0,useFirstBidInRefresh:1,geoEdgeIndex:0,overrideId:830874,labels:[]},{id:12200,name:"Trafmag",adapter_id:877,type:"display",bidder:"adtelligentMarket",entityId:11339,geo:{type:"white",list:{UA:1},skipGeo:!1},isMarket:!0,params:{allow_geos:"UA",pid:11339,aid:448152},minViewWithDfp:0,noR:0,refreshLimit:3,useFirstBidInRefresh:1,geoEdgeIndex:0,overrideId:1649005,labels:[]},{id:13331,name:"33Across",adapter_id:772,type:"display",bidder:"33across_mkp",entityId:11339,geo:{type:"white",list:{US:1,CA:1,MX:1},skipGeo:!1},isMarket:!0,params:{productId:"siab",allow_geos:"US,CA,MX",siteId:"b8fnS4Q_Or6R82aKlId8sQ"},minViewWithDfp:0,noR:0,geoEdgeIndex:0,overrideId:2826057,labels:[]},{id:14647,name:"RTB House",adapter_id:1111,type:"display",bidder:"rtbhouse_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{publisherId:"f7tRggCNvKnqLxaIp8gJ",region:"prebid-eu",bidfloor:"0.05"},minViewWithDfp:0,noR:0,geoEdgeIndex:0,overrideId:2050140,labels:[]},{id:14658,name:"Adpartner",adapter_id:2308,type:"display",bidder:"adpartner_mkp",entityId:11339,geo:{type:"white",list:{UA:1,RU:1},skipGeo:!1},isMarket:!0,params:{allow_geos:"UA,RU",unitId:6412},minViewWithDfp:0,noR:0,refreshLimit:4,allow_sizes:"300x250",geoEdgeIndex:0,overrideId:2967648,labels:[]},{id:15813,name:"SLDS DSP 1",adapter_id:877,type:"display",bidder:"adtelligentMarket",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{pid:11339,aid:448152},minViewWithDfp:0,noR:0,refreshLimit:7,allow_sizes:"300Ñ250,336x280,300x600",geoEdgeIndex:0,overrideId:2564711,labels:[]},{id:16356,name:"Adtelligent DSP MB",adapter_id:877,type:"display",bidder:"adtelligentMarket",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{pid:11339,aid:448152},minViewWithDfp:0,noR:0,refreshLimit:3,noDfp:1,useFirstBidInRefresh:1,geoEdgeIndex:0,overrideId:2755073,labels:[]},{id:16713,name:"Adtelligent DSP MB SP",adapter_id:877,type:"display",bidder:"adtelligent_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{aid:605039},minViewWithDfp:0,noR:0,sp:1,geoEdgeIndex:0,overrideId:2972095,labels:[]},{id:16789,name:"SLDS DSP 2",adapter_id:877,type:"display",bidder:"adtelligent_mkp",entityId:11339,geo:{type:"block",list:{},skipGeo:!0},isMarket:!0,params:{aid:607661},minViewWithDfp:0,noR:0,sp:1,geoEdgeIndex:0,overrideId:3020823,labels:[]},{id:17490,name:"hybrid.ai",adapter_id:877,type:"display",bidder:"adtelligentMarket",entityId:11339,geo:{type:"white",list:{UA:1,RU:1,IN:1,PL:1},skipGeo:!1},isMarket:!0,params:{allow_geos:"UA,RU,IN,PL",pid:11339},minViewWithDfp:0,noR:0,refreshLimit:5,useFirstBidInRefresh:1,geoEdgeIndex:0,overrideId:3163580,labels:[]}],sizes:[{width:300,height:250},{width:300,height:500},{width:300,height:400},{width:300,height:300},{width:300,height:600},{width:0,height:0},{width:1,height:1},{width:120,height:600},{width:160,height:600},{width:970,height:90},{width:728,height:90},{width:255,height:197},{width:970,height:250},{width:250,height:250},{width:240,height:400},{width:180,height:160},{width:200,height:200},{width:580,height:332},{width:300,height:60},{width:240,height:350},{width:300,height:100},{width:300,height:50},{width:120,height:240},{width:180,height:150}],mediaTypes:{banner:{}}}],cRevision:1627915608084,siteId:4463,pubId:299755,networkCode:"43356090",liToSkipRefresh:[4478100445,4595605663,4898329641,4934179147,5182350427,5292191704,5363210854,5387803628,5451151126,5732479668,5732479671,5732480304,5732480307,5735003907,5736207481,5740735633,5740735636,5743740478,5744402120],lastLiUpdatedAt:1626778654290,DFPHBCreativeIds:[138266383476,138266383479,138266383488,138266383497,138266383500,138266665408,138266665420],mobileTimeout:1e3,refreshHBWinnerInterval:45e3,refreshWhenWinnerIs:["any"],buyersInRefresh:["market"],enhanceBid:null,bidCeil:null,ald:!1,networkCurrency:"USD",clientId:299738,schainMkpBidders:["btw_mkp","33across_mkp","rtbhouse_mkp"],secondPrice:1,preCookieSyncPath:"/csyncs?aid1=448151&aid2=448152&aid3=605039&aid4=607661&aid5=undefined",vmTimeouts:{_site_:2e3},geoEdgeIds:["cd27d2ef-0f98-49dc-aa2b-537027f661c3"],bidAdjustment:{2905:.8,6515:.85,12200:1,13331:1,14647:1,14658:1,15813:1,16356:1,16713:1,16789:1,17490:1},granularity:"high",consentSettings:{gdpr:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0},usp:{cmpApi:"iab",timeout:1e3,allowAuctionWithoutConsent:!0}},pubRev:1,schainmkp:{asi:"adtelligent.com",sid:"299755",hp:1},userIdModuleConfigs:[{name:"criteo"},{name:"pubCommonId",storage:{type:"cookie",name:"_pubcid",expires:365}},{name:"id5Id",params:{partner:692},storage:{type:"html5",name:"id5id",expires:90,refreshInSeconds:28800}}],adxM:1.03,minViewRate:{clientBuyers:60,buyer:{2905:10,6515:10,12200:90,13331:5,14647:20,14658:60,15813:50,16356:100,16713:70,16789:100,17490:40}},customRefreshInterval:{buyer:{12200:5e4,14647:4e4,15813:4e4,16356:6e4,16713:5e4,17490:35e3}},secured:{2905:1,6515:1,12200:1,13331:1,14647:1,14658:1,15813:1,16356:1,16713:0,16789:1,17490:1},WLDomain:"player.adtelligent.com",domain:"tvgid.ua",bidderAliases:{btw_mkp:"btw",automatadC_mkp:"automatadC","33across_mkp":"33across",rtbhouse_mkp:"rtbhouse",adpartner_mkp:"adpartner",adtelligent_mkp:"adtelligent"},bidFloorConfig:{adunit:{},buyer:{2905:{min:.03,max:30},6515:{min:.03,max:30},12200:{min:.04,max:10},13331:{min:.03,max:30},14647:{min:.03,max:20},14658:{min:.03,max:10},15813:{min:.03,max:99},16356:{min:.04,max:20},16713:{min:.04,max:99},16789:{min:.04,max:99},17490:{min:.04,max:15}}},r:{2905:22,6515:22,12200:22,13331:22,14647:22,14658:22,15813:22,16356:22,16713:22,16789:22,17490:22},geoRequired:!0,syncWarmUps:[],adunitsFloorSettings:{}},i){m._localStorageKey+=p.getSiteId();var I=JSON.parse(localStorage.getItem(this._localStorageKey)||"{}");I&&(I.cRevision=I.cRevision||0,I.cRevision>f.config.cRevision?(p.log("Using cached config"),f.config=I):p.log("Cached config is invalidated"))}E(),p.log("Config version checked"),f.config.syncWarmUps&&setTimeout((function(){p.each(f.config.syncWarmUps,(function(e){try{m.runSyncByType(e)}catch(t){p.error("fail loading warmup",e)}}))}),f.getConfig("fastAsync")?n:0);var y=new function(){var t=this,i=[],n=p.getUtmFromGoogleCookie(),r={video:1,display:2};t.observer=null,e.IntersectionObserver&&(t.inViewHandlers={},t.observer=new IntersectionObserver((function(e){p.map(e,(function(e){if(e.isIntersecting&&e.intersectionRatio>=.5){var i=e.target.id,n=t.inViewHandlers[i];delete t.inViewHandlers[i],n&&(t.observer.unobserve(e.target),n())}}))}),{root:null,rootMargin:"0px",threshold:.5}));var o={};function d(e){return p.map(e,(function(e){return{w:e[0],h:e[1]}}))}function a(e){if(i.length){var t={utmMedium:p.getParameterByName("utm_medium")||n.utmcmd,utmSource:p.getParameterByName("utm_source")||n.utmcsr,sessionID:f.SESSION_ID,fullPageURL:p.contentPageUrl(),vpbv:f.VPB_VERSION,events:i};i=[],e&&navigator.sendBeacon?navigator.sendBeacon("https://"+p.getADomain()+"/adunit/multitracking",JSON.stringify(t)):p.xhr({uri:"https://"+p.getADomain()+"/adunit/multitracking",data:t,method:"POST"})}}t.log=function(e){i.push(e),t.send()},e.addEventListener("beforeunload",(function(){a(!0)})),e.addEventListener("unload",(function(){a(!0)})),t.send=p.debounce(a,1e3),t.refreshingUnits={},t.getSubType=function(e,i){var n=t.refreshingUnits[i];if(n&&n.isRefreshing)return n.refreshI},t.winnerCache={},t.aucWinnerChosen=function(e,i,n){var a=o[e];p.log("winner new stat",i,n);for(var s=p.findValue(a.adUnits,(function(e){return e.code===i})),l={event:8,hbDivId:f.sendHbDivId&&s.code,adunitID:s.entityId,adUnitCode:s.fullName,subtype:t.getSubType(e,i),lifecycleTTEms:p.timeDiff(f.init_time),bidders:[],ttems:p.timeDiff(a.timestamp),divID:s.divId,adType:r[s.type],clientID:p.getClientId(),siteID:p.getSiteId()},c=0;c<a.bidsReceived.length;c++){var u=a.bidsReceived[c];if(i===u.adUnitCode){var g=parseInt(u.width),h=parseInt(u.height),b=m.bidIdsToBid[u.requestId],v=u.adId===n;v&&(t.winnerCache[s.code]=u);var I={winner:v,bidName:u.bidderCode,id:b.id,bid:parseFloat(u.clientBid||0),pubBid:parseFloat(u.pubBid||0),overrideId:b.overrideId,hbAdId:u.requestId,originalBid:1*u.originalCpm,originalCurrency:u.originalCurrency,grossBid:1*u.grossBid,netBid:1*u.netBid,currency:u.currency,labelIds:b.validLabelIds,pmpDeal:u.dealId,tte:Math.abs(u.timeToRespond),sizes:[{w:g,h:h}],timeout:!1,bidFloored:u.bidFloored||!1,bidCeiled:u.bidCeiled||!1};!v&&u.lowView&&(I.lowView=!0);for(var y=d(b.sizes),w=[],S=0;S<y.length;S++)y[S].w===g&&y[S].h===h||w.push(y[S]);if(w.length){var B={hbAdId:u.requestId,winner:!1,bidName:u.bidderCode,id:b.id,sizes:w,overrideId:b.overrideId,labelIds:b.validLabelIds,timeout:!1};l.bidders.push(B)}l.bidders.push(I)}}t.log(l)},this.onDfpResolved=function(e,i){var n=o[e.auctionId],d=p.findValue(n.adUnits,(function(t){return t.code===e.adUnitCode}));i&&delete t.winnerCache[d.code];var a=parseInt(e.width),s=parseInt(e.height),l=m.bidIdsToBid[e.requestId],c={event:9,hbDivId:f.sendHbDivId&&d.code,adunitID:d.entityId,adUnitCode:d.fullName,subtype:t.getSubType(null,d.code),lifecycleTTEms:p.timeDiff(f.init_time),bidders:[{winner:i,bidName:e.bidderCode,id:l.id,bid:parseFloat(e.clientBid||0),pubBid:parseFloat(e.pubBid||0),overrideId:l.overrideId,hbAdId:e.requestId,originalBid:1*e.originalCpm,originalCurrency:e.originalCurrency,grossBid:1*e.grossBid,netBid:1*e.netBid,currency:e.currency,labelIds:l.validLabelIds,pmpDeal:e.dealId,tte:Math.abs(e.timeToRespond),sizes:[{w:a,h:s}],timeout:!1}],ttems:p.timeDiff(n.timestamp),divID:d.divId,adType:r[d.type],clientID:p.getClientId(),siteID:p.getSiteId()};if(t.log(c),i&&t.observer){t.inViewHandlers[e.adUnitCode]=function(){(c=p.copy(c)).event=18,c.lifecycleTTEms=p.timeDiff(f.init_time),t.log(c)};var u=document.getElementById(e.adUnitCode);u&&t.observer.observe(u)}},this.dfpLose=function(e){t.winnerCache[e]&&y.onDfpResolved(t.winnerCache[e],!1)},this.init=function(){vmpbjs.onEvent("bidTimeout",(function(e){for(var i={},n=0;n<e.length;n++){var a=e[n],s=o[a.auctionId],l=p.findValue(s.adUnits,(function(e){return e.code===a.adUnitCode})),c=i[l.code]||{event:8,hbDivId:f.sendHbDivId&&l.code,adunitID:l.entityId,adUnitCode:l.fullName,subtype:t.getSubType(s.auctionId,l.code),lifecycleTTEms:p.timeDiff(f.init_time),bidders:[],divID:l.divId,adType:r[l.type],clientID:p.getClientId(),siteID:p.getSiteId()};i[l.code]=c;var u=m.bidIdsToBid[a.bidId];c.bidders.push({hbAdId:a.bidId,timeout:!0,bidName:a.bidderCode,id:u.id,sizes:d(u.sizes),overrideId:u.overrideId,labelIds:u.validLabelIds})}for(var g in i)t.log(i[g])})),vmpbjs.onEvent("auctionInit",(function(e){o[e.auctionId]=e;for(var i={},n=m.isRefreshAuction[e.auctionId],a=0;a<e.adUnits.length;a++){var s=e.adUnits[a].code;t.refreshingUnits[s]=t.refreshingUnits[s]||{refreshI:0},t.refreshingUnits[s].isRefreshing=n,n&&t.refreshingUnits[s].refreshI++}for(var l=0;l<e.bidderRequests.length;l++)for(var c=e.bidderRequests[l],u=0;u<c.bids.length;u++){var g=c.bids[u],h=p.findValue(e.adUnits,(function(e){return e.code===g.adUnitCode})),b=i[h.code]||{event:10,hbDivId:f.sendHbDivId&&h.code,adunitID:h.entityId,adUnitCode:h.fullName,subtype:t.getSubType(e.auctionId,h.code,!0),lifecycleTTEms:p.timeDiff(f.init_time),bidders:[],ttems:0,divID:h.divId,adType:r[h.type],clientID:p.getClientId(),siteID:p.getSiteId()};i[h.code]=b,b.bidders.push({id:g.id,bidName:g.bidder,hbAdId:g.bidId,overrideId:g.overrideId,labelIds:g.validLabelIds,sizes:d(g.sizes)})}for(var v in i)t.log(i[v])})),vmpbjs.onEvent("bidWon",(function(e){t.onDfpResolved(e,!0)})),vmpbjs.onEvent("auctionEnd",(function(e){o[e.auctionId]=e}))}};f.fastLoad||k("//"+p.getRealScriptHost()+"/prebidlink/ex"+Math.round(c()/864e5)+"/hb_"+p.getClientId()+"_"+p.getSiteId()+p.getDevSuffix()+".js",null,(function(){f.failLoad=!0,m.waitingDFPQue.length&&t.cmd.push((function(){t.pubads().refresh(m.waitingDFPQue)}))})),f.onLoaderReady&&f.onLoaderReady();var w=new v((function(){return e.vmpbjs&&!!e.vmpbjs.onEvent})),S=new v;setTimeout((function(){!function(t){function n(e){t&&t(e),t=function(){}}f.config.geoRequired||n();var r=e;function o(){if(m.geoIs("UA")&&(m.runSyncByType({type:"iframe",url:"https://sync2.adtelligent.com/ks"}),m.runSyncByType({type:"image",url:"https://cm.g.doubleclick.net/pixel?google_nid=vertamedia&google_cm"}),i)){var t=e.localStorage.getItem("vpb-slp");(null==t||c()-t>864e5)&&(m.runSyncByType({type:"iframe",url:"https://sync.adtelligent.com/csync?redir=https%3A%2F%2Fsilpo.ua%2Fsync.html%3Fuid%3D%7Buid%7D"}),e.localStorage.setItem("vpb-slp",c()))}w.onReady((function(){var e={bidderUrl:"https://b1h.zemanta.com/api/bidder/prebid/bid/",usersyncUrl:"https://b1h.zemanta.com/usersync/prebid"};vmpbjs.setConfig({zemanta:e,outbrain:e}),f.config.consentSettings&&m.getIsEU()&&vmpbjs.setConfig({consentManagement:{gdpr:f.config.consentSettings.gdpr}}),f.config.consentSettings&&m.geoIs("US")&&vmpbjs.setConfig({consentManagement:{usp:f.config.consentSettings.usp}})}))}try{var d=r.localStorage;if(d){var a=d.getItem("vpb-location"),s=parseInt(d.getItem("vpb-lastGeoUp"));!a||isNaN(s)||c()-s>864e5?p.xhr({uri:"https://"+p.getADomain()+"/geo/",callback:function(e){try{var t=JSON.parse(e),i=t.code;i&&(d.setItem("vpb-location",i),d.setItem("vpb-isEU",!!t.isEU),d.setItem("vpb-lastGeoUp",c()))}catch(e){}o(),n()},onError:n}):(o(),n())}else console.error("localStorage unavailable"),o(),n()}catch(e){n(),p.error("Unable to get geo")}}((function(){p.log("GEO ready"),S.forceReady()}))}),f.getConfig("fastAsync")?9e3:0);var B=f.config.abInfo;if(B&&B.enabled&&B.percent<100&&-1===location.href.indexOf("ignoreAB")){var R=100*Math.random();if(console.log("VMHB AB test enabled",B.percent,"percent allowed; generated:",R),R>B.percent)return void console.warn("stopping because AB ",B.percent,R)}setTimeout((function(){p.track({event:11,type:0,client_id:p.getClientId(),site_id:p.getSiteId()},(function(){m.runPreSync(f.config.preCookieSyncPath)}))}),f.getConfig("fastAsync")?n:0),f.ready=!0;var C=new v((function(){return e.googletag&&e.googletag.pubadsReady}));w.init(),w.onReady((function(){p.log("HB ready")})),C.init(),C.onReady((function(){p.log("PUBADS ready")})),f.supressDisableInitialLoad=!1;try{location.href.indexOf("supressDisableInitialLoad")>-1&&(f.supressDisableInitialLoad=!0)}catch(e){}function k(e,t,i){var n=document.createElement("script");e=("http:"===document.location.protocol?"http:":"https:")+e,n.src=e,n.async=!0,n.onload=t,n.onerror=i,(document.body||document.head||document.documentElement).appendChild(n)}function D(){k("//"+p.getRealScriptHost()+"/prebid/vdb.js")}function T(e,t){var i=document.getElementById(t);if(!i)return p.error("Element "+t+" is not present on the page"),!1;if(i&&"IFRAME"===i.nodeName.toUpperCase()){var n=i.contentWindow.document,r="readystatechange";function o(){vmpbjs.renderAd(n,e.adId,{}),n.removeEventListener(r,o)}"loading"===n.readyState?n.addEventListener(r,o):o()}else{var d=f.createIframe((function(t){t&&vmpbjs.renderAd(t,e.adId,{})}),m.getSecureURI(e),{w:e.width,h:e.height});d.id="adunit-"+t,e.refBid&&(d.setAttribute("data-hbmp-rid",e.refBid.requestId),d.setAttribute("data-hbmp-adid",e.refBid.adId)),i.innerHTML="",i.appendChild(d)}return f.emit("render",{divId:t,w:e.width,h:e.height}),!0}e.location&&e.location.href&&e.location.href.indexOf("hbmpvdb")>-1&&D(),f.showConsole=function(){D()},f.getVastUrl=function(e){var t=e.sizes||[[300,250]];f.auctionByAdUnitID({adUnitId:e.hbmpUnitId,sizes:t,onEnd:function(i){var n=null;if(e.useDfp){var r=m.getUnitByHook({hbUnitId:e.hbmpUnitId}),o=t[0];i&&(o=[i.width,i.height]);var d={adUnit:p.merge(r,{sizes:o}),params:{iu:r.code}};i&&i.vastUrl&&(d.bid=i.refBid),n=vmpbjs.adServers.dfp.buildVideoUrl(d)}i&&i.vastUrl&&(n=i.vastUrl),e.resultCallback&&e.resultCallback(n)}})},f.startAuction=f.auctionByAdUnitID=function(e){if(!e.sizes||0===e.sizes.length)return console.error("sizes array required to start this kind of auction e.g: [[300,250],[300,600]]");if(!e.adUnitId){if(!f.getConfig("pickFirstUnit")&&1!==f.config.adunits.length)return console.error("adUnitId is required to start this kind of auction");e.adUnitId=f.config.adunits[0].entityId}var t=e.adUnitId,i=e.code||"adunit"+t;p.log("requesting auction for ",i);var n=e.withDFP?b.slots[i]:{hbUnitId:t,type:e.type||"display",realId:i,sizes:e.sizes};n.unitRef=m.getUnitByHook(n),e.isRefreshLogic&&!n.adUnitPath&&(n.adUnitPath=n.unitRef&&n.unitRef.code),m._startAuction({sendDfpRequest:e.sendDfpRequest,setHBTargeting:e.setHBTargeting,DFPSlotHooks:[n],isRefreshLogic:e.isRefreshLogic,clientBuyers:e.clientBuyers,marketBuyers:e.marketBuyers,onEnd:function(t,r){m.getWinningBidByCode({isRefreshLogic:e.isRefreshLogic,clientBuyers:e.clientBuyers,marketBuyers:e.marketBuyers,omitUsingBid:!e.isRefreshLogic&&!e.render,divId:i,cb:function(t){if(e.render){if(t&&!T(t,i))return;m.startRefreshSlot({adUnitId:n.hbUnitId,code:i,sizes:e.sizes,divId:i,clientBuyers:f.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:f.getConfig("buyersInRefresh").indexOf("market")>-1},t?m.bidIdsToBid[t.adId]:null)}f.getConfig("enhanceBid")&&t&&((t=p.copy(t)).bid=t.bid*f.getConfig("enhanceBid")),e.onEnd&&e.onEnd(t,r)}})}})},f.renderAd=function(e,t){var i=t||e.refBid.adUnitCode;T(e,i),e&&m.startRefreshSlot({adUnitId:e.adUnitId,code:e.refBid.adUnitCode,sizes:e.requestSizes,divId:i,clientBuyers:f.getConfig("buyersInRefresh").indexOf("clientbuyer")>-1,marketBuyers:f.getConfig("buyersInRefresh").indexOf("market")>-1},e)},f.createIframe=function(e,t,i){var n=document.createElement("iframe");n.onload=function(){if(!t)var i=n.contentWindow.document;n.onload=null,e&&e(i),t||(i.body.style.padding="0px",i.body.style.margin="0px",i.body.style.overflow="hidden")},n.src=t||"about:blank";var r=n.style;return function(e){e.border="none",e.padding="0px",e.margin="0px",e.overflow="hidden",e.display="block",e.margin="0px auto"}(r),i&&(r.width=i.w+"px",r.maxWidth=i.w+"px",r.height=i.h+"px"),t&&n.setAttribute("sandbox","allow-forms allow-pointer-lock allow-popups allow-popups-to-escape-sandbox allow-same-origin allow-scripts allow-top-navigation-by-user-activation"),n};var _={};function E(){r&&f.config.mobRefreshConfig&&p.merge(f.config,f.config.mobRefreshConfig)}function A(e){try{e&&e()}catch(e){p.error("Error executing que function",e)}}if(f.on=function(e,t){_[e]=_[e]||[],_[e].push(t)},f.emit=function(e,t){if(_[e])for(var i=0;i<_[e].length;i++)try{_[e][i](t)}catch(e){p.error(e)}},f.formatVastBidUrl=function(e){var t=m.bidIdsToBid[e.requestId],i="//"+p.getADomain()+"/wrapper/?vast_uri="+encodeURIComponent(e.vastUrl)+"&pid="+t.entityId+"&w="+e.width+"&h="+e.height+"&full_page_url="+encodeURIComponent(p.contentPageUrl())+"&type=1&ad_type=1&session_id="+f.SESSION_ID+"&vpbv="+f.VPB_VERSION+"&bidder_id="+t.id+"&override_id="+t.overrideId+"&hb_adid="+e.adId+"&origin_cur="+e.originalCurrency+"&origin_bid="+1*e.originalCpm+"&cur="+e.currency+"&gross_bid="+1*e.grossBid+"&net_bid="+1*e.netBid+"&pub_bid="+parseFloat(e.pubBid||0)+"&bid="+parseFloat(e.clientBid||0);return e.vastUrl=i,e},m.init(),f.onMainReady&&f.onMainReady(),function(){function e(){var e=parseInt(c()/6e5);p.xhr({uri:"//"+p.getRealScriptHost()+"/prebidlink/"+e+"/v3_"+p.getClientId()+"_"+p.getSiteId()+".json?cb="+encodeURIComponent(location.host),callback:function(e){try{var t=JSON.parse(e);if(t.cRevision>f.config.cRevision){try{localStorage.setItem(m._localStorageKey,e)}catch(e){p.log("unable to write config to localStorage",e.message)}f.config=t,m._cache=m._mapData(f.config),E()}}catch(e){}}})}setTimeout(e,f.getConfig("fastAsync")?n:3e3),setInterval(e,6e5)}(),f.cmd=f.cmd||[],f.cmd.push=A,f.cmd.length)for(var U=0;U<f.cmd.length;U++)A(f.cmd[U]);var P=f.getConfig("geoEdgeIds");if(P&&P.length&&1==f.getConfig("enable_geoedge_preloader"))for(U=0;U<P.length;U++){var M=document.createElement("link");M.rel="preload",M.as="script",M.href="//rumcdn.geoedge.be/"+P[U]+"/grumi.js";var x=document.getElementsByTagName("script")[0];x.parentNode.insertBefore(M,x)}}(window,googletag);