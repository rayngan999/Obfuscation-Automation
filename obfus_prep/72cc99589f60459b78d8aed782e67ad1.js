!function(){if("function"==typeof NodeList.prototype.forEach)return!1;NodeList.prototype.forEach=Array.prototype.forEach}(),"http:"==location.protocol&&(location.href=location.href.replace(/^http:/,"https:")),Array.isArray||(Array.isArray=function(o){return window.$&&$.isArray?$.isArray(o):o&&o.constructor==Array}),function(){for(var o,t=function(){},n=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],e=n.length,r=window.console=window.console||{};e--;)r[o=n[e]]||(r[o]=t)}(),document.contains||(document.contains=function(){return document.body.contains.apply(document.body,arguments)}),function(){function o(o,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(o,t.bubbles,t.cancelable,t.detail),n}"function"!=typeof window.CustomEvent&&(o.prototype=window.Event.prototype,window.CustomEvent=o)}();!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=3)}([function(t,e,n){"use strict";e.__esModule=!0,e.SessionStorage=void 0;var r=function(){function t(){}return t.getStorage=function(){return window.sessionStorage||null},t.put=function(t,e){try{return!!this.getStorage()&&(this.getStorage().setItem(t,JSON.stringify(e)),!0)}catch(t){}return!1},t.get=function(t){try{if(!this.getStorage())return null;var e=this.getStorage().getItem(t);return null===e?e:JSON.parse(e)}catch(t){return null}},t}();e.SessionStorage=r},function(t,e,n){"use strict";e.__esModule=!0,e.Cookie=void 0;var r=function(){function t(){}return t.getCookiesList=function(){var t={};if(document.cookie&&""!=document.cookie)for(var e=document.cookie.split(";"),n=0;n<e.length;n++)try{var r=e[n].split("=");r[0]=r[0].replace(/^ /,""),t[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}catch(t){}return t},t.getCookie=function(t){for(var e=t+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var o=n[r];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(e)){var i=o.substring(e.length,o.length);return void 0===i?null:i}}return null},t.setCookie=function(t,e,n){void 0===n&&(n=9999999);var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3);var o="expires="+r.toUTCString();return document.cookie=t+"="+e+";"+o+";path=/",!0},t}();e.Cookie=r},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});e.__esModule=!0,e.LocalStorage=void 0;var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.getStorage=function(){return window.localStorage||null},e}(n(0).SessionStorage);e.LocalStorage=i},function(t,e,n){"use strict";e.__esModule=!0;var r=n(4),o=function(t){var e=new r.Tracker;return setTimeout((function(){var t=function(){var t=Array.prototype.slice.call(arguments),n=t.shift();if("function"!=typeof e[n])return console.error("Omnimove: Unable to execute "+n+". This method not exists "),null;var r=null;t.length&&"function"==typeof t[t.length-1]&&(r=t.pop());var o=e[n].apply(e,t);return r&&r.apply(this,[o]),e.triggerBeacon(),o},n=window;(n[n.CRMTracker].q||[]).forEach((function(e){t.apply(t,e)})),n[n.CRMTracker]=t}),1),window.addEventListener("beforeunload",(function(n){e.onUnload();var r=t.activeElement;r&&r.href&&-1!==r.href.indexOf(location.host)||e.sendBeacon(!0)}),!0),function(){}};!function(t){var e=t.readyState;"interactive"===e||"complete"===e?o(t):t.addEventListener("DOMContentLoaded",o)}(document)},function(t,e,n){"use strict";e.__esModule=!0,e.Tracker=void 0;var r=n(1),o=n(0),i=n(5),a=n(6),u=n(7),s=n(2),c=n(8),f=n(9),p=function(){function t(t){void 0===t&&(t=null),this.eventQueue=[],this.forceData=!1,this.parameters=[],this.config=a.default,t&&this.setConfig(t),this.startTime=(new Date).getTime(),this.information=new i.Information(this.config),this.trigger=new c.Trigger,this.initWebVital()}return t.prototype.setConfig=function(t){return this.config=u(this.config,t),this.information.setConfig(this.config),!0},t.prototype.setPageValue=function(t){return this.information.setPageValue(t),this},t.prototype.setABTests=function(t){return this.information.setABTests(t),this},t.prototype.setToStorage=function(t,e){return o.SessionStorage.put(t,e),s.LocalStorage.put(t,e),this},t.prototype.initWebVital=function(){var t=this;this.webVitals=new f.WebVitals((function(e){t.createNewEvent("webVital",e)})),this.webVitals.start()},t.prototype.getFromStorage=function(t){var e=o.SessionStorage.get(t);return e||(e=s.LocalStorage.get(t))||null},t.prototype.getTrackData=function(){var t=this.getTrackId();return{id:t,localId:this.config.localId,queue:this.getQueueList(!0),data:this.information.getData(!!t),parameters:this.parameters}},t.prototype.getTrackId=function(){var t=r.Cookie.getCookie(this.config.keys.cookieId);return t||((t=o.SessionStorage.get(this.config.keys.cookieId))?t:(t=s.LocalStorage.get(this.config.keys.cookieId))||null)},t.prototype.setTrackId=function(t){return r.Cookie.setCookie(this.config.keys.cookieId,t),this.setToStorage(this.config.keys.cookieId,t),this},t.prototype.setCustomerId=function(t){return this.setToStorage(this.config.keys.customerId,t),this},t.prototype.getLastCallsExecution=function(){return this.getFromStorage(this.config.keys.lastCallsExecution)||0},t.prototype.setLastCallsExecution=function(t){return this.getLastCallsExecution()>=t||this.setToStorage(this.config.keys.lastCallsExecution,t),this},t.prototype.getCustomerId=function(){return this.getFromStorage(this.config.keys.customerId)},t.prototype.setVisitId=function(t){return o.SessionStorage.put(this.config.keys.visitId,t),s.LocalStorage.put(this.config.keys.visitId,t),this.config.currentVisitId=t,this},t.prototype.getBeaconData=function(){var t={id:this.getTrackId(),localId:this.config.localId,queue:this.getQueueList(!0),parameters:this.parameters};return this.forceData&&(t.data=this.information.getData(!1)),t},t.prototype.processResult=function(t,e){var n=this;if(void 0===e&&(e=!1),t&&t.success)return this.setTrackId(t.data.id),e||this.setVisitId(t.data.visitId),this.parameters=[],this.eventQueue.forEach((function(t){n.addRawEvent(n.config.currentVisitId,t)})),this.eventQueue=[],this.processCalls(t.data.calls,t.data.time),!0},t.prototype.processCalls=function(t,e){var n=this;return t.forEach((function(t){n[t.method].apply(n,t.params)})),this.setLastCallsExecution(e),!0},t.prototype.executeTrigger=function(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];"function"==typeof this.trigger[t]&&(e=this.trigger)[t].apply(e,n)},t.prototype.clearMe=function(){return this.setTrackId(""),this.setCustomerId(null),!0},t.prototype.addEvent=function(t,e,n,r){return void 0===r&&(r=null),this.createNewEvent("event",{category:t,action:e,value:n,params:r})},t.prototype.addDataSetView=function(t,e,n){return void 0===n&&(n=null),this.createNewEvent("dataSetView",{dataSet:t,externalId:e,params:n})},t.prototype.onUnload=function(){var t=this.config.currentVisitId;if(t){window.performance&&window.performance.timing&&(this.savePerformance(t,this.information.getPerformance()),this.startTime=window.performance.timing.loadEventEnd);var e=(new Date).getTime(),n=(e-this.startTime)/1e3;e<=this.startTime&&(n=.1),this.saveVisitTime(t,n)}},t.prototype.makeRequest=function(t,e,n,r){if(void 0===r&&(r=null),window.fetch){var o={method:"POST",body:e,mode:"cors",credentials:"include",referrer:window.location.href,referrerPolicy:"unsafe-url",importance:"low"};window.fetch(t,o).then((function(t){return t.json()})).then((function(t){return n(t),!0})).catch((function(t){r&&r(t),console.error("Omnimove: There has been a problem with your fetch operation: ",t)}))}else try{var i=new XMLHttpRequest;return i.open("POST",t,!0),i.withCredentials=!0,i.setRequestHeader("X-Referer",window.location.href),i.onload=function(){200==i.status?n(JSON.parse(i.responseText)):r&&r(i)},i.onerror=function(t){r&&r(t)},i.send(e),i}catch(t){return r&&r(t),null}},t.prototype.isBeaconEmpty=function(t){return!(t.parameters&&t.parameters.length>0||t.queue&&Object.keys(t.queue).length>0||t.data)},t.prototype.sendBeacon=function(t){var e=this;void 0===t&&(t=!0);var n=this.getBeaconData();if(this.isBeaconEmpty(n))return!1;var r=this.config.endpoint+"?id="+n.id+"&r="+Math.random(),o=window.navigator,i=JSON.stringify(n);if(o.sendBeacon&&t){var a=r+"&transport=beacon";if(o.sendBeacon(a,i))return this.parameters=[],!0}var u=this.parameters;this.parameters=[],r+="&lce="+this.getLastCallsExecution();try{return this.makeRequest(r,i,(function(t){e.processResult(t,!0)}),(function(){e.appendParameters(u),e.restoreQueue(n.queue)})),!0}catch(t){return this.appendParameters(u),this.restoreQueue(n.queue),console.error("Omnimove: Error during executing request",t),!1}},t.prototype.restoreQueue=function(t){var e=this;Object.keys(t).forEach((function(n){e.saveQueue(n,t[n])}))},t.prototype.savePerformance=function(t,e){var n=this.getQueue(t);return n.performance=e,this.saveQueue(t,n),!0},t.prototype.saveLocalIps=function(t,e){var n=this.getQueue(t);return n.localIps=e,this.saveQueue(t,n),!0},t.prototype.addRawEvent=function(t,e){var n=this.getQueue(t);return n.event=n.event||[],n.event.push(e),this.saveQueue(t,n),!0},t.prototype.saveVisitTime=function(t,e){var n=this.getQueue(t);return n.visitTime=e,this.saveQueue(t,n),!0},t.prototype.getQueue=function(t){var e=s.LocalStorage.get(this.config.keys.queueId)||{};return void 0===e[t]?{}:e[t]},t.prototype.getQueueList=function(t){void 0===t&&(t=!0);var e=s.LocalStorage.get(this.config.keys.queueId)||{};return t&&s.LocalStorage.put(this.config.keys.queueId,{}),e},t.prototype.saveQueue=function(t,e){var n=s.LocalStorage.get(this.config.keys.queueId)||{};return n[t]=e,s.LocalStorage.put(this.config.keys.queueId,n),!0},t.prototype.setForceSendData=function(t){return this.forceData=t,this},t.prototype.pageView=function(t){var e=this;void 0===t&&(t={});var n=this.getTrackData(),r=this.getLastCallsExecution(),o=this.config.endpoint+"?id="+n.id+"&lce="+r+"&r="+Math.random(),i=JSON.stringify(n);this.makeRequest(o,i,(function(t){e.processResult(t),setTimeout((function(){try{e.information.getLocalIps((function(t){e.saveLocalIps(e.config.currentVisitId,t)}))}catch(t){console.error("Omnimove: Error during getting local ip",t)}}),1500)}))},t.prototype.track=function(){this.pageView()},t.prototype.setParameters=function(t){return this.parameters=t,this},t.prototype.appendParameters=function(t){var e=this;return t.forEach((function(t){e.parameters.push(t)})),this},t.prototype.addParameter=function(t,e,n){return this.parameters.push({param:t,value:e,points:n}),this},t.prototype.setCustomDimensions=function(t){var e=this;return Object.keys(t).forEach((function(n){e.setCustomDimension(n,t[n])})),this},t.prototype.setCustomDimension=function(t,e){return this.createNewEvent("customDimension",{name:t,value:e})},t.prototype.setExtras=function(t){var e=this;return Object.keys(t).forEach((function(n){e.setExtra(n,t[n])})),this},t.prototype.setExtra=function(t,e){return this.createNewEvent("extra",{name:t,value:e})},t.prototype.createNewEvent=function(t,e){var n=this.config.currentVisitId,r=Date.now(),o={type:t,time:Math.floor(r/1e3),timeMs:r,data:e};return this.triggerBeacon(),n?this.addRawEvent(n,o):(this.eventQueue.push(o),!0)},t.prototype.triggerBeacon=function(){var t=this;this.timeouter&&clearTimeout(this.timeouter),this.timeouter=setTimeout((function(){t.sendBeacon(!1)}),1100)},t.prototype.start=function(){this.pageView()},t}();e.Tracker=p},function(t,e,n){"use strict";e.__esModule=!0,e.Information=void 0;var r=n(1),o=n(2),i=n(0),a=function(){function t(t){this.abTests=[],this.localIps=[],this.pageValue=null,this.setConfig(t)}return t.prototype.setPageValue=function(t){return this.pageValue=t,this},t.prototype.setABTests=function(t){return this.abTests=t,this},t.prototype.setConfig=function(t){return this.config=t,this},t.prototype.getScreen=function(){return{width:screen.width,height:screen.height,pixelDepth:screen.pixelDepth,availWidth:screen.availWidth,availHeight:screen.availHeight,colorDepth:screen.colorDepth}},t.prototype.getNavigator=function(){var t=window.navigator;return{appCodeName:t.appCodeName,appName:t.appName,appVersion:t.appVersion,cookieEnabled:t.cookieEnabled,doNotTrack:!!t.doNotTrack,hardwareConcurrency:0|t.hardwareConcurrency,language:t.language,languages:t.languages,maxTouchPoints:0|t.maxTouchPoints,platform:t.platform,product:t.product,productSub:t.productSub,userAgent:t.userAgent,vendor:t.vendor,vendorSub:t.vendorSub}},t.prototype.getTabId=function(){var t=this.config.keys.tabId,e=i.SessionStorage.get(t);if(e)return e;var n=o.LocalStorage.get(t);return n=1+(0|n),o.LocalStorage.put(t,n),i.SessionStorage.put(t,n),n},t.prototype.getPerformance=function(){var t=window.performance;if(!t)return null;var e=null;return t.memory&&(e={jsHeapSizeLimit:t.memory.jsHeapSizeLimit,totalJSHeapSize:t.memory.totalJSHeapSize,usedJSHeapSize:t.memory.usedJSHeapSize}),{timing:t.timing,memory:e,entries:null}},t.prototype.getLocalIps=function(t){var e=[],n=window,r=n.RTCPeerConnection||n.webkitRTCPeerConnection||n.mozRTCPeerConnection;if(r){var o=new r({iceServers:[]});if(o.createDataChannel&&o.createDataChannel(""),o.onicecandidate=function(n){if(!n.candidate)return o.close(),t&&t(e),void(t=null);var r=/^candidate:.+ (\S+) \d+ typ/.exec(n.candidate.candidate);if(!r||!r[1])return t&&t(e),void(t=null);var i=r[1];-1==e.indexOf(i)&&e.push(i)},!o.createOffer)return t(e),void(t=null);try{o.createOffer().then((function(t){return o.setLocalDescription(t)})).catch((function(){t&&t(e),t=null}))}catch(n){t&&t(e),t=null}}else t(e)},t.prototype.getData=function(t){return void 0===t&&(t=!1),{url:window.location.href,referrer:window.document.referrer,tabId:this.getTabId(),pageValue:this.pageValue,screen:t?null:this.getScreen(),cookie:t?null:r.Cookie.getCookiesList(),navigator:t?null:this.getNavigator(),prev:i.SessionStorage.get(this.config.keys.visitId),abTests:this.abTests,localIps:[],appVersion:this.config.appVersion}},t}();e.Information=a},function(t,e,n){"use strict";e.__esModule=!0;var r="tracking__",o={keys:{tabId:r+"tab_id",cookieId:r+"session_id",visitId:r+"visit_id",queueId:r+"queue",customerId:r+"customer_id",lastCallsExecution:r+"last_calls"},endpoint:"",localId:Math.random().toString(),currentVisitId:null,appVersion:null};e.default=o},function(t,e,n){"use strict";var r=function(t){return function(t){return!!t&&"object"==typeof t}(t)&&!function(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||function(t){return t.$$typeof===o}(t)}(t)},o="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function i(t,e){return!1!==e.clone&&e.isMergeableObject(t)?c((n=t,Array.isArray(n)?[]:{}),t,e):t;var n}function a(t,e,n){return t.concat(e).map((function(t){return i(t,n)}))}function u(t){return Object.keys(t).concat(function(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter((function(e){return t.propertyIsEnumerable(e)})):[]}(t))}function s(t,e){try{return e in t}catch(t){return!1}}function c(t,e,n){(n=n||{}).arrayMerge=n.arrayMerge||a,n.isMergeableObject=n.isMergeableObject||r,n.cloneUnlessOtherwiseSpecified=i;var o=Array.isArray(e);return o===Array.isArray(t)?o?n.arrayMerge(t,e,n):function(t,e,n){var r={};return n.isMergeableObject(t)&&u(t).forEach((function(e){r[e]=i(t[e],n)})),u(e).forEach((function(o){(function(t,e){return s(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))})(t,o)||(s(t,o)&&n.isMergeableObject(e[o])?r[o]=function(t,e){if(!e.customMerge)return c;var n=e.customMerge(t);return"function"==typeof n?n:c}(o,n)(t[o],e[o],n):r[o]=i(e[o],n))})),r}(t,e,n):i(e,n)}c.all=function(t,e){if(!Array.isArray(t))throw new Error("first argument should be an array");return t.reduce((function(t,n){return c(t,n,e)}),{})};var f=c;t.exports=f},function(t,e,n){"use strict";e.__esModule=!0,e.Trigger=void 0;var r=function(){function t(){}return t.prototype.js=function(t,e){var n=document.createElement("script");n.onload=n.onerror=function(){this.remove()},n.src=e,document.body.appendChild(n)},t}();e.Trigger=r},function(t,e,n){"use strict";e.__esModule=!0,e.WebVitals=void 0;var r=n(10),o=n(11),i=function(){function t(t){this.callback=t}return t.prototype.start=function(){var t=this;r.getCLS((function(e){return t.track(e)})),r.getFID((function(e){return t.track(e)})),r.getLCP((function(e){return t.track(e)})),r.getFCP((function(e){return t.track(e)})),r.getTTFB((function(e){return t.track(e)}))},t.prototype.track=function(t){try{var e=this.normalize(t);this.callback(e)}catch(t){console.error("Omnimove: Error during normalizing WebVitals",t)}},t.prototype.normalize=function(t){return{id:t.id,name:t.name,delta:t.delta,value:t.value,url:location.href,entries:this.normalizeEntries(t.entries)}},t.prototype.normalizeEntries=function(t){var e=this;return t.map((function(t){switch(t.constructor.name){case"LayoutShift":return{duration:t.duration,entryType:t.entryType,id:t.id,lastInputTime:t.lastInputTime,name:t.name,startTime:t.startTime,value:t.value,sources:t.sources?t.sources.map((function(t){return{node:e.normalizeHTMLElement(t.node),currentRect:t.currentRect,previousRect:t.previousRect}})):null};case"LargestContentfulPaint":return{duration:t.duration,entryType:t.entryType,id:t.id,loadTime:t.loadTime,name:t.name,renderTime:t.renderTime,size:t.size,startTime:t.startTime,element:e.normalizeHTMLElement(t.element)};case"PerformancePaintTiming":return{duration:t.duration,entryType:t.entryType,name:t.name,startTime:t.startTime};case"PerformanceEventTiming":return{duration:t.duration,entryType:t.entryType,name:t.name,processingEnd:t.processingEnd,processingStart:t.processingStart,startTime:t.startTime,target:e.normalizeHTMLElement(t.target)};case"PerformanceNavigationTiming":return t}return{}}))},t.prototype.normalizeHTMLElement=function(t){if(!t)return null;"Text"===t.constructor.name&&(t=t.parentElement);try{return{path:o(t),position:t.getBoundingClientRect()}}catch(t){return null}},t}();e.WebVitals=i},function(t,e,n){"use strict";n.r(e),n.d(e,"getCLS",(function(){return d})),n.d(e,"getFCP",(function(){return y})),n.d(e,"getFID",(function(){return I})),n.d(e,"getLCP",(function(){return C})),n.d(e,"getTTFB",(function(){return L}));var r,o,i,a,u=function(t,e){return{name:t,value:void 0===e?-1:e,delta:0,entries:[],id:"v1-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},s=function(t,e){try{if(PerformanceObserver.supportedEntryTypes.includes(t)){var n=new PerformanceObserver((function(t){return t.getEntries().map(e)}));return n.observe({type:t,buffered:!0}),n}}catch(t){}},c=function(t,e){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(t(r),e&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},f=function(t){addEventListener("pageshow",(function(e){e.persisted&&t(e)}),!0)},p="function"==typeof WeakSet?new WeakSet:new Set,l=function(t,e,n){var r;return function(){e.value>=0&&(n||p.has(e)||"hidden"===document.visibilityState)&&(e.delta=e.value-(r||0),(e.delta||void 0===r)&&(r=e.value,t(e)))}},d=function(t,e){var n,r=u("CLS",0),o=function(t){t.hadRecentInput||(r.value+=t.value,r.entries.push(t),n())},i=s("layout-shift",o);i&&(n=l(t,r,e),c((function(){i.takeRecords().map(o),n()})),f((function(){r=u("CLS",0),n=l(t,r,e)})))},h=-1,g=function(){return"hidden"===document.visibilityState?0:1/0},m=function(){c((function(t){var e=t.timeStamp;h=e}),!0)},v=function(){return h<0&&(h=g(),m(),f((function(){setTimeout((function(){h=g(),m()}),0)}))),{get timeStamp(){return h}}},y=function(t,e){var n,r=v(),o=u("FCP"),i=s("paint",(function(t){"first-contentful-paint"===t.name&&(i&&i.disconnect(),t.startTime<r.timeStamp&&(o.value=t.startTime,o.entries.push(t),p.add(o),n()))}));i&&(n=l(t,o,e),f((function(r){o=u("FCP"),n=l(t,o,e),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-r.timeStamp,p.add(o),n()}))}))})))},S={passive:!0,capture:!0},T=new Date,b=function(t,e){r||(r=e,o=t,i=new Date,E(removeEventListener),w())},w=function(){if(o>=0&&o<i-T){var t={entryType:"first-input",name:r.type,target:r.target,cancelable:r.cancelable,startTime:r.timeStamp,processingStart:r.timeStamp+o};a.forEach((function(e){e(t)})),a=[]}},k=function(t){if(t.cancelable){var e=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,e){var n=function(){b(t,e),o()},r=function(){o()},o=function(){removeEventListener("pointerup",n,S),removeEventListener("pointercancel",r,S)};addEventListener("pointerup",n,S),addEventListener("pointercancel",r,S)}(e,t):b(e,t)}},E=function(t){["mousedown","keydown","touchstart","pointerdown"].forEach((function(e){return t(e,k,S)}))},I=function(t,e){var n,i=v(),d=u("FID"),h=function(t){t.startTime<i.timeStamp&&(d.value=t.processingStart-t.startTime,d.entries.push(t),p.add(d),n())},g=s("first-input",h);n=l(t,d,e),g&&c((function(){g.takeRecords().map(h),g.disconnect()}),!0),g&&f((function(){var i;d=u("FID"),n=l(t,d,e),a=[],o=-1,r=null,E(addEventListener),i=h,a.push(i),w()}))},C=function(t,e){var n,r=v(),o=u("LCP"),i=function(t){var e=t.startTime;e<r.timeStamp&&(o.value=e,o.entries.push(t)),n()},a=s("largest-contentful-paint",i);if(a){n=l(t,o,e);var d=function(){p.has(o)||(a.takeRecords().map(i),a.disconnect(),p.add(o),n())};["keydown","click"].forEach((function(t){addEventListener(t,d,{once:!0,capture:!0})})),c(d,!0),f((function(r){o=u("LCP"),n=l(t,o,e),requestAnimationFrame((function(){requestAnimationFrame((function(){o.value=performance.now()-r.timeStamp,p.add(o),n()}))}))}))}},L=function(t){var e,n=u("TTFB");e=function(){try{var e=performance.getEntriesByType("navigation")[0]||function(){var t=performance.timing,e={entryType:"navigation",startTime:0};for(var n in t)"navigationStart"!==n&&"toJSON"!==n&&(e[n]=Math.max(t[n]-t.navigationStart,0));return e}();n.value=n.delta=e.responseStart,n.entries=[e],t(n)}catch(t){}},"complete"===document.readyState?setTimeout(e,0):addEventListener("pageshow",e)}},function(t,e,n){var r=n(12),o=function(t,e,n){var i=t.tagName.toLowerCase(),a=[i],u=t.getAttribute("class"),s=t.getAttribute("id");return s?(n.unshift(i+"#"+r(s)),n):(u&&a.push(function(t){for(var e=t.split(/\s/g),n=[],r=0;r<e.length;++r)e[r].length>0&&n.push("."+e[r]);return n.join("")}(u)),"html"!==i&&"body"!==i&&t.parentNode&&a.push(":nth-child("+function(t){for(var e=0,n=t.parentNode.childNodes,r=0;r<n.length;++r)if(1===n[r].nodeType&&++e,n[r]===t)return e}(t)+")"),n.unshift(a.join("")),t.parentNode&&t.parentNode!==e&&t.parentNode.tagName&&o(t.parentNode,e,n),n)};t.exports=function(t,e){return o(t,e,[]).join(" > ")}},function(t,e){(e=t.exports=function(t){return t.replace(/^\s*|\s*$/g,"")}).left=function(t){return t.replace(/^\s*/,"")},e.right=function(t){return t.replace(/\s*$/,"")}}]);
!function(t,e){"function"==typeof define&&define.amd?define((function(){return e(t)})):e(t)}(window,(function(t){var e=function(){function e(t){return null==t?String(t):U[X.call(t)]||"object"}function n(t){return"function"==e(t)}function r(t){return null!=t&&t==t.window}function i(t){return null!=t&&t.nodeType==t.DOCUMENT_NODE}function o(t){return"object"==e(t)}function a(t){return o(t)&&!r(t)&&Object.getPrototypeOf(t)==Object.prototype}function s(t){var e=!!t&&"length"in t&&t.length,n=w.type(t);return"function"!=n&&!r(t)&&("array"==n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function u(t){return t.length>0?w.fn.concat.apply([],t):t}function c(t){return t.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function l(t){return t in $?$[t]:$[t]=new RegExp("(^|\\s)"+t+"(\\s|$)")}function f(t,e){return"number"!=typeof e||F[c(t)]?e:e+"px"}function h(t){return"children"in t?A.call(t.children):w.map(t.childNodes,(function(t){return 1==t.nodeType?t:void 0}))}function p(t,e){var n,r=t?t.length:0;for(n=0;r>n;n++)this[n]=t[n];this.length=r,this.selector=e||""}function d(t,e,n){for(j in e)n&&(a(e[j])||G(e[j]))?(a(e[j])&&!a(t[j])&&(t[j]={}),G(e[j])&&!G(t[j])&&(t[j]=[]),d(t[j],e[j],n)):e[j]!==E&&(t[j]=e[j])}function m(t,e){return null==e?w(t):w(t).filter(e)}function v(t,e,r,i){return n(e)?e.call(t,r,i):e}function g(t,e,n){null==n?t.removeAttribute(e):t.setAttribute(e,n)}function y(t,e){var n=t.className||"",r=n&&n.baseVal!==E;return e===E?r?n.baseVal:n:void(r?n.baseVal=e:t.className=e)}function x(t){try{return t?"true"==t||"false"!=t&&("null"==t?null:+t+""==t?+t:/^[\[\{]/.test(t)?w.parseJSON(t):t):t}catch(e){return t}}function b(t,e){e(t);for(var n=0,r=t.childNodes.length;r>n;n++)b(t.childNodes[n],e)}var E,j,w,T,S,C,N=[],O=N.concat,P=N.filter,A=N.slice,D=t.document,L={},$={},F={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},k=/^\s*<(\w+|!)[^>]*>/,M=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,R=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Z=/^(?:body|html)$/i,z=/([A-Z])/g,q=["val","css","html","text","data","width","height","offset"],H=D.createElement("table"),I=D.createElement("tr"),V={tr:D.createElement("tbody"),tbody:H,thead:H,tfoot:H,td:I,th:I,"*":D.createElement("div")},_=/complete|loaded|interactive/,B=/^[\w-]*$/,U={},X=U.toString,J={},W=D.createElement("div"),Y={tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},G=Array.isArray||function(t){return t instanceof Array};return J.matches=function(t,e){if(!e||!t||1!==t.nodeType)return!1;var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.oMatchesSelector||t.matchesSelector;if(n)return n.call(t,e);var r,i=t.parentNode,o=!i;return o&&(i=W).appendChild(t),r=~J.qsa(i,e).indexOf(t),o&&W.removeChild(t),r},S=function(t){return t.replace(/-+(.)?/g,(function(t,e){return e?e.toUpperCase():""}))},C=function(t){return P.call(t,(function(e,n){return t.indexOf(e)==n}))},J.fragment=function(t,e,n){var r,i,o;return M.test(t)&&(r=w(D.createElement(RegExp.$1))),r||(t.replace&&(t=t.replace(R,"<$1></$2>")),e===E&&(e=k.test(t)&&RegExp.$1),e in V||(e="*"),(o=V[e]).innerHTML=""+t,r=w.each(A.call(o.childNodes),(function(){o.removeChild(this)}))),a(n)&&(i=w(r),w.each(n,(function(t,e){q.indexOf(t)>-1?i[t](e):i.attr(t,e)}))),r},J.Z=function(t,e){return new p(t,e)},J.isZ=function(t){return t instanceof J.Z},J.init=function(t,e){var r;if(!t)return J.Z();if("string"==typeof t)if("<"==(t=t.trim())[0]&&k.test(t))r=J.fragment(t,RegExp.$1,e),t=null;else{if(e!==E)return w(e).find(t);r=J.qsa(D,t)}else{if(n(t))return w(D).ready(t);if(J.isZ(t))return t;if(G(t))r=function(t){return P.call(t,(function(t){return null!=t}))}(t);else if(o(t))r=[t],t=null;else if(k.test(t))r=J.fragment(t.trim(),RegExp.$1,e),t=null;else{if(e!==E)return w(e).find(t);r=J.qsa(D,t)}}return J.Z(r,t)},(w=function(t,e){return J.init(t,e)}).extend=function(t){var e,n=A.call(arguments,1);return"boolean"==typeof t&&(e=t,t=n.shift()),n.forEach((function(n){d(t,n,e)})),t},J.qsa=function(t,e){var n,r="#"==e[0],i=!r&&"."==e[0],o=r||i?e.slice(1):e,a=B.test(o);return t.getElementById&&a&&r?(n=t.getElementById(o))?[n]:[]:1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType?[]:A.call(a&&!r&&t.getElementsByClassName?i?t.getElementsByClassName(o):t.getElementsByTagName(e):t.querySelectorAll(e))},w.contains=D.documentElement.contains?function(t,e){return t!==e&&t.contains(e)}:function(t,e){for(;e&&(e=e.parentNode);)if(e===t)return!0;return!1},w.type=e,w.isFunction=n,w.isWindow=r,w.isArray=G,w.isPlainObject=a,w.isEmptyObject=function(t){var e;for(e in t)return!1;return!0},w.isNumeric=function(t){var e=Number(t),n=typeof t;return null!=t&&"boolean"!=n&&("string"!=n||t.length)&&!isNaN(e)&&isFinite(e)||!1},w.inArray=function(t,e,n){return N.indexOf.call(e,t,n)},w.camelCase=S,w.trim=function(t){return null==t?"":String.prototype.trim.call(t)},w.uuid=0,w.support={},w.expr={},w.noop=function(){},w.map=function(t,e){var n,r,i,o=[];if(s(t))for(r=0;r<t.length;r++)null!=(n=e(t[r],r))&&o.push(n);else for(i in t)null!=(n=e(t[i],i))&&o.push(n);return u(o)},w.each=function(t,e){var n,r;if(s(t)){for(n=0;n<t.length;n++)if(!1===e.call(t[n],n,t[n]))return t}else for(r in t)if(!1===e.call(t[r],r,t[r]))return t;return t},w.grep=function(t,e){return P.call(t,e)},t.JSON&&(w.parseJSON=JSON.parse),w.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),(function(t,e){U["[object "+e+"]"]=e.toLowerCase()})),w.fn={constructor:J.Z,length:0,forEach:N.forEach,reduce:N.reduce,push:N.push,sort:N.sort,splice:N.splice,indexOf:N.indexOf,concat:function(){var t,e,n=[];for(t=0;t<arguments.length;t++)e=arguments[t],n[t]=J.isZ(e)?e.toArray():e;return O.apply(J.isZ(this)?this.toArray():this,n)},map:function(t){return w(w.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return w(A.apply(this,arguments))},ready:function(t){return _.test(D.readyState)&&D.body?t(w):D.addEventListener("DOMContentLoaded",(function(){t(w)}),!1),this},get:function(t){return t===E?A.call(this):this[t>=0?t:t+this.length]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each((function(){null!=this.parentNode&&this.parentNode.removeChild(this)}))},each:function(t){return N.every.call(this,(function(e,n){return!1!==t.call(e,n,e)})),this},filter:function(t){return n(t)?this.not(this.not(t)):w(P.call(this,(function(e){return J.matches(e,t)})))},add:function(t,e){return w(C(this.concat(w(t,e))))},is:function(t){return this.length>0&&J.matches(this[0],t)},not:function(t){var e=[];if(n(t)&&t.call!==E)this.each((function(n){t.call(this,n)||e.push(this)}));else{var r="string"==typeof t?this.filter(t):s(t)&&n(t.item)?A.call(t):w(t);this.forEach((function(t){r.indexOf(t)<0&&e.push(t)}))}return w(e)},has:function(t){return this.filter((function(){return o(t)?w.contains(this,t):w(this).find(t).size()}))},eq:function(t){return-1===t?this.slice(t):this.slice(t,+t+1)},first:function(){var t=this[0];return t&&!o(t)?t:w(t)},last:function(){var t=this[this.length-1];return t&&!o(t)?t:w(t)},find:function(t){var e=this;return t?"object"==typeof t?w(t).filter((function(){var t=this;return N.some.call(e,(function(e){return w.contains(e,t)}))})):1==this.length?w(J.qsa(this[0],t)):this.map((function(){return J.qsa(this,t)})):w()},closest:function(t,e){var n=[],r="object"==typeof t&&w(t);return this.each((function(o,a){for(;a&&!(r?r.indexOf(a)>=0:J.matches(a,t));)a=a!==e&&!i(a)&&a.parentNode;a&&n.indexOf(a)<0&&n.push(a)})),w(n)},parents:function(t){for(var e=[],n=this;n.length>0;)n=w.map(n,(function(t){return(t=t.parentNode)&&!i(t)&&e.indexOf(t)<0?(e.push(t),t):void 0}));return m(e,t)},parent:function(t){return m(C(this.pluck("parentNode")),t)},children:function(t){return m(this.map((function(){return h(this)})),t)},contents:function(){return this.map((function(){return this.contentDocument||A.call(this.childNodes)}))},siblings:function(t){return m(this.map((function(t,e){return P.call(h(e.parentNode),(function(t){return t!==e}))})),t)},empty:function(){return this.each((function(){this.innerHTML=""}))},pluck:function(t){return w.map(this,(function(e){return e[t]}))},show:function(){return this.each((function(){"none"==this.style.display&&(this.style.display=""),"none"==getComputedStyle(this,"").getPropertyValue("display")&&(this.style.display=function(t){var e,n;return L[t]||(e=D.createElement(t),D.body.appendChild(e),n=getComputedStyle(e,"").getPropertyValue("display"),e.parentNode.removeChild(e),"none"==n&&(n="block"),L[t]=n),L[t]}(this.nodeName))}))},replaceWith:function(t){return this.before(t).remove()},wrap:function(t){var e=n(t);if(this[0]&&!e)var r=w(t).get(0),i=r.parentNode||this.length>1;return this.each((function(n){w(this).wrapAll(e?t.call(this,n):i?r.cloneNode(!0):r)}))},wrapAll:function(t){if(this[0]){w(this[0]).before(t=w(t));for(var e;(e=t.children()).length;)t=e.first();w(t).append(this)}return this},wrapInner:function(t){var e=n(t);return this.each((function(n){var r=w(this),i=r.contents(),o=e?t.call(this,n):t;i.length?i.wrapAll(o):r.append(o)}))},unwrap:function(){return this.parent().each((function(){w(this).replaceWith(w(this).children())})),this},clone:function(){return this.map((function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return this.each((function(){var e=w(this);(t===E?"none"==e.css("display"):t)?e.show():e.hide()}))},prev:function(t){return w(this.pluck("previousElementSibling")).filter(t||"*")},next:function(t){return w(this.pluck("nextElementSibling")).filter(t||"*")},html:function(t){return 0 in arguments?this.each((function(e){var n=this.innerHTML;w(this).empty().append(v(this,t,e,n))})):0 in this?this[0].innerHTML:null},text:function(t){return 0 in arguments?this.each((function(e){var n=v(this,t,e,this.textContent);this.textContent=null==n?"":""+n})):0 in this?this.pluck("textContent").join(""):null},attr:function(t,e){var n;return"string"!=typeof t||1 in arguments?this.each((function(n){if(1===this.nodeType)if(o(t))for(j in t)g(this,j,t[j]);else g(this,t,v(this,e,n,this.getAttribute(t)))})):0 in this&&1==this[0].nodeType&&null!=(n=this[0].getAttribute(t))?n:E},removeAttr:function(t){return this.each((function(){1===this.nodeType&&t.split(" ").forEach((function(t){g(this,t)}),this)}))},prop:function(t,e){return t=Y[t]||t,1 in arguments?this.each((function(n){this[t]=v(this,e,n,this[t])})):this[0]&&this[0][t]},removeProp:function(t){return t=Y[t]||t,this.each((function(){delete this[t]}))},data:function(t,e){var n="data-"+t.replace(z,"-$1").toLowerCase(),r=1 in arguments?this.attr(n,e):this.attr(n);return null!==r?x(r):E},val:function(t){return 0 in arguments?(null==t&&(t=""),this.each((function(e){this.value=v(this,t,e,this.value)}))):this[0]&&(this[0].multiple?w(this[0]).find("option").filter((function(){return this.selected})).pluck("value"):this[0].value)},offset:function(e){if(e)return this.each((function(t){var n=w(this),r=v(this,e,t,n.offset()),i=n.offsetParent().offset(),o={top:r.top-i.top,left:r.left-i.left};"static"==n.css("position")&&(o.position="relative"),n.css(o)}));if(!this.length)return null;if(D.documentElement!==this[0]&&!w.contains(D.documentElement,this[0]))return{top:0,left:0};var n=this[0].getBoundingClientRect();return{left:n.left+t.pageXOffset,top:n.top+t.pageYOffset,width:Math.round(n.width),height:Math.round(n.height)}},css:function(t,n){if(arguments.length<2){var r=this[0];if("string"==typeof t){if(!r)return;return r.style[S(t)]||getComputedStyle(r,"").getPropertyValue(t)}if(G(t)){if(!r)return;var i={},o=getComputedStyle(r,"");return w.each(t,(function(t,e){i[e]=r.style[S(e)]||o.getPropertyValue(e)})),i}}var a="";if("string"==e(t))n||0===n?a=c(t)+":"+f(t,n):this.each((function(){this.style.removeProperty(c(t))}));else for(j in t)t[j]||0===t[j]?a+=c(j)+":"+f(j,t[j])+";":this.each((function(){this.style.removeProperty(c(j))}));return this.each((function(){this.style.cssText+=";"+a}))},index:function(t){return t?this.indexOf(w(t)[0]):this.parent().children().indexOf(this[0])},hasClass:function(t){return!!t&&N.some.call(this,(function(t){return this.test(y(t))}),l(t))},addClass:function(t){return t?this.each((function(e){if("className"in this){T=[];var n=y(this);v(this,t,e,n).split(/\s+/g).forEach((function(t){w(this).hasClass(t)||T.push(t)}),this),T.length&&y(this,n+(n?" ":"")+T.join(" "))}})):this},removeClass:function(t){return this.each((function(e){if("className"in this){if(t===E)return y(this,"");T=y(this),v(this,t,e,T).split(/\s+/g).forEach((function(t){T=T.replace(l(t)," ")})),y(this,T.trim())}}))},toggleClass:function(t,e){return t?this.each((function(n){var r=w(this);v(this,t,n,y(this)).split(/\s+/g).forEach((function(t){(e===E?!r.hasClass(t):e)?r.addClass(t):r.removeClass(t)}))})):this},scrollTop:function(t){if(this.length){var e="scrollTop"in this[0];return t===E?e?this[0].scrollTop:this[0].pageYOffset:this.each(e?function(){this.scrollTop=t}:function(){this.scrollTo(this.scrollX,t)})}},scrollLeft:function(t){if(this.length){var e="scrollLeft"in this[0];return t===E?e?this[0].scrollLeft:this[0].pageXOffset:this.each(e?function(){this.scrollLeft=t}:function(){this.scrollTo(t,this.scrollY)})}},position:function(){if(this.length){var t=this[0],e=this.offsetParent(),n=this.offset(),r=Z.test(e[0].nodeName)?{top:0,left:0}:e.offset();return n.top-=parseFloat(w(t).css("margin-top"))||0,n.left-=parseFloat(w(t).css("margin-left"))||0,r.top+=parseFloat(w(e[0]).css("border-top-width"))||0,r.left+=parseFloat(w(e[0]).css("border-left-width"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent||D.body;t&&!Z.test(t.nodeName)&&"static"==w(t).css("position");)t=t.offsetParent;return t}))}},w.fn.detach=w.fn.remove,["width","height"].forEach((function(t){var e=t.replace(/./,(function(t){return t[0].toUpperCase()}));w.fn[t]=function(n){var o,a=this[0];return n===E?r(a)?a["inner"+e]:i(a)?a.documentElement["scroll"+e]:(o=this.offset())&&o[t]:this.each((function(e){(a=w(this)).css(t,v(this,n,e,a[t]()))}))}})),["after","prepend","before","append"].forEach((function(n,r){var i=r%2;w.fn[n]=function(){var n,o,a=w.map(arguments,(function(t){var r=[];return"array"==(n=e(t))?(t.forEach((function(t){return t.nodeType!==E?r.push(t):w.zepto.isZ(t)?r=r.concat(t.get()):void(r=r.concat(J.fragment(t)))})),r):"object"==n||null==t?t:J.fragment(t)})),s=this.length>1;return a.length<1?this:this.each((function(e,n){o=i?n:n.parentNode,n=0==r?n.nextSibling:1==r?n.firstChild:2==r?n:null;var u=w.contains(D.documentElement,o);a.forEach((function(e){if(s)e=e.cloneNode(!0);else if(!o)return w(e).remove();o.insertBefore(e,n),u&&b(e,(function(e){if(!(null==e.nodeName||"SCRIPT"!==e.nodeName.toUpperCase()||e.type&&"text/javascript"!==e.type||e.src)){var n=e.ownerDocument?e.ownerDocument.defaultView:t;n.eval.call(n,e.innerHTML)}}))}))}))},w.fn[i?n+"To":"insert"+(r?"Before":"After")]=function(t){return w(t)[n](this),this}})),J.Z.prototype=p.prototype=w.fn,J.uniq=C,J.deserializeValue=x,w.zepto=J,w}();return t.Zepto=e,void 0===t.$&&(t.$=e),function(e){function n(t){return t._zid||(t._zid=h++)}function r(t,e,r,o){if((e=i(e)).ns)var a=function(t){return new RegExp("(?:^| )"+t.replace(" "," .* ?")+"(?: |$)")}(e.ns);return(v[n(t)]||[]).filter((function(t){return t&&(!e.e||t.e==e.e)&&(!e.ns||a.test(t.ns))&&(!r||n(t.fn)===n(r))&&(!o||t.sel==o)}))}function i(t){var e=(""+t).split(".");return{e:e[0],ns:e.slice(1).sort().join(" ")}}function o(t,e){return t.del&&!y&&t.e in x||!!e}function a(t){return b[t]||y&&x[t]||t}function s(t,r,s,u,l,h,p){var d=n(t),m=v[d]||(v[d]=[]);r.split(/\s/).forEach((function(n){if("ready"==n)return e(document).ready(s);var r=i(n);r.fn=s,r.sel=l,r.e in b&&(s=function(t){var n=t.relatedTarget;return!n||n!==this&&!e.contains(this,n)?r.fn.apply(this,arguments):void 0}),r.del=h;var d=h||s;r.proxy=function(e){if(!(e=c(e)).isImmediatePropagationStopped()){e.data=u;var n=d.apply(t,e._args==f?[e]:[e].concat(e._args));return!1===n&&(e.preventDefault(),e.stopPropagation()),n}},r.i=m.length,m.push(r),"addEventListener"in t&&t.addEventListener(a(r.e),r.proxy,o(r,p))}))}function u(t,e,i,s,u){var c=n(t);(e||"").split(/\s/).forEach((function(e){r(t,e,i,s).forEach((function(e){delete v[c][e.i],"removeEventListener"in t&&t.removeEventListener(a(e.e),e.proxy,o(e,u))}))}))}function c(t,n){return(n||!t.isDefaultPrevented)&&(n||(n=t),e.each(T,(function(e,r){var i=n[e];t[e]=function(){return this[r]=E,i&&i.apply(n,arguments)},t[r]=j})),t.timeStamp||(t.timeStamp=Date.now()),(n.defaultPrevented!==f?n.defaultPrevented:"returnValue"in n?!1===n.returnValue:n.getPreventDefault&&n.getPreventDefault())&&(t.isDefaultPrevented=E)),t}function l(t){var e,n={originalEvent:t};for(e in t)w.test(e)||t[e]===f||(n[e]=t[e]);return c(n,t)}var f,h=1,p=Array.prototype.slice,d=e.isFunction,m=function(t){return"string"==typeof t},v={},g={},y="onfocusin"in t,x={focus:"focusin",blur:"focusout"},b={mouseenter:"mouseover",mouseleave:"mouseout"};g.click=g.mousedown=g.mouseup=g.mousemove="MouseEvents",e.event={add:s,remove:u},e.proxy=function(t,r){var i=2 in arguments&&p.call(arguments,2);if(d(t)){var o=function(){return t.apply(r,i?i.concat(p.call(arguments)):arguments)};return o._zid=n(t),o}if(m(r))return i?(i.unshift(t[r],t),e.proxy.apply(null,i)):e.proxy(t[r],t);throw new TypeError("expected function")},e.fn.bind=function(t,e,n){return this.on(t,e,n)},e.fn.unbind=function(t,e){return this.off(t,e)},e.fn.one=function(t,e,n,r){return this.on(t,e,n,r,1)};var E=function(){return!0},j=function(){return!1},w=/^([A-Z]|returnValue$|layer[XY]$|webkitMovement[XY]$)/,T={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,e,n){return this.on(e,t,n)},e.fn.undelegate=function(t,e,n){return this.off(e,t,n)},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r,i,o){var a,c,h=this;return t&&!m(t)?(e.each(t,(function(t,e){h.on(t,n,r,e,o)})),h):(m(n)||d(i)||!1===i||(i=r,r=n,n=f),(i===f||!1===r)&&(i=r,r=f),!1===i&&(i=j),h.each((function(f,h){o&&(a=function(t){return u(h,t.type,i),i.apply(this,arguments)}),n&&(c=function(t){var r,o=e(t.target).closest(n,h).get(0);return o&&o!==h?(r=e.extend(l(t),{currentTarget:o,liveFired:h}),(a||i).apply(o,[r].concat(p.call(arguments,1)))):void 0}),s(h,t,i,r,n,c||a)})))},e.fn.off=function(t,n,r){var i=this;return t&&!m(t)?(e.each(t,(function(t,e){i.off(t,n,e)})),i):(m(n)||d(r)||!1===r||(r=n,n=f),!1===r&&(r=j),i.each((function(){u(this,t,r,n)})))},e.fn.trigger=function(t,n){return(t=m(t)||e.isPlainObject(t)?e.Event(t):c(t))._args=n,this.each((function(){t.type in x&&"function"==typeof this[t.type]?this[t.type]():"dispatchEvent"in this?this.dispatchEvent(t):e(this).triggerHandler(t,n)}))},e.fn.triggerHandler=function(t,n){var i,o;return this.each((function(a,s){(i=l(m(t)?e.Event(t):t))._args=n,i.target=s,e.each(r(s,t.type||t),(function(t,e){return o=e.proxy(i),!i.isImmediatePropagationStopped()&&void 0}))})),o},"focusin focusout focus blur load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select keydown keypress keyup error".split(" ").forEach((function(t){e.fn[t]=function(e){return 0 in arguments?this.bind(t,e):this.trigger(t)}})),e.Event=function(t,e){m(t)||(t=(e=t).type);var n=document.createEvent(g[t]||"Events"),r=!0;if(e)for(var i in e)"bubbles"==i?r=!!e[i]:n[i]=e[i];return n.initEvent(t,r,!0),c(n)}}(e),function(e){function n(t,n,r){var i=e.Event(n);return e(t).trigger(i,r),!i.isDefaultPrevented()}function r(t,e,r,i){return t.global?n(e||y,r,i):void 0}function i(t){t.global&&0==e.active++&&r(t,null,"ajaxStart")}function o(t){t.global&&!--e.active&&r(t,null,"ajaxStop")}function a(t,e){var n=e.context;return!1!==e.beforeSend.call(n,t,e)&&!1!==r(e,n,"ajaxBeforeSend",[t,e])&&void r(e,n,"ajaxSend",[t,e])}function s(t,e,n,i){var o=n.context,a="success";n.success.call(o,t,a,e),i&&i.resolveWith(o,[t,a,e]),r(n,o,"ajaxSuccess",[e,n,t]),c(a,e,n)}function u(t,e,n,i,o){var a=i.context;i.error.call(a,n,e,t),o&&o.rejectWith(a,[n,e,t]),r(i,a,"ajaxError",[n,i,t||e]),c(e,n,i)}function c(t,e,n){var i=n.context;n.complete.call(i,e,t),r(n,i,"ajaxComplete",[e,n]),o(n)}function l(){}function f(t){return t&&(t=t.split(";",2)[0]),t&&(t==w?"html":t==j?"json":b.test(t)?"script":E.test(t)&&"xml")||"text"}function h(t,e){return""==e?t:(t+"&"+e).replace(/[&?]{1,2}/,"?")}function p(t,n,r,i){return e.isFunction(n)&&(i=r,r=n,n=void 0),e.isFunction(r)||(i=r,r=void 0),{url:t,data:n,success:r,dataType:i}}function d(t,n,r,i){var o,a=e.isArray(n),s=e.isPlainObject(n);e.each(n,(function(n,u){o=e.type(u),i&&(n=r?i:i+"["+(s||"object"==o||"array"==o?n:"")+"]"),!i&&a?t.add(u.name,u.value):"array"==o||!r&&"object"==o?d(t,u,r,n):t.add(n,u)}))}var m,v,g=+new Date,y=t.document,x=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,b=/^(?:text|application)\/javascript/i,E=/^(?:text|application)\/xml/i,j="application/json",w="text/html",T=/^\s*$/,S=y.createElement("a");S.href=t.location.href,e.active=0,e.ajaxJSONP=function(n,r){if(!("type"in n))return e.ajax(n);var i,o,c=n.jsonpCallback,l=(e.isFunction(c)?c():c)||"Zepto"+g++,f=y.createElement("script"),h=t[l],p=function(t){e(f).triggerHandler("error",t||"abort")},d={abort:p};return r&&r.promise(d),e(f).on("load error",(function(a,c){clearTimeout(o),e(f).off().remove(),"error"!=a.type&&i?s(i[0],d,n,r):u(null,c||"error",d,n,r),t[l]=h,i&&e.isFunction(h)&&h(i[0]),h=i=void 0})),!1===a(d,n)?(p("abort"),d):(t[l]=function(){i=arguments},f.src=n.url.replace(/\?(.+)=\?/,"?$1="+l),y.head.appendChild(f),n.timeout>0&&(o=setTimeout((function(){p("timeout")}),n.timeout)),d)},e.ajaxSettings={type:"GET",beforeSend:l,success:l,error:l,complete:l,context:null,global:!0,xhr:function(){return new t.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript, application/x-javascript",json:j,xml:"application/xml, text/xml",html:w,text:"text/plain"},crossDomain:!1,timeout:0,processData:!0,cache:!0,dataFilter:l},e.ajax=function(n){var r,o,c=e.extend({},n||{}),p=e.Deferred&&e.Deferred();for(m in e.ajaxSettings)void 0===c[m]&&(c[m]=e.ajaxSettings[m]);i(c),c.crossDomain||((r=y.createElement("a")).href=c.url,r.href=r.href,c.crossDomain=S.protocol+"//"+S.host!=r.protocol+"//"+r.host),c.url||(c.url=t.location.toString()),(o=c.url.indexOf("#"))>-1&&(c.url=c.url.slice(0,o)),function(t){t.processData&&t.data&&"string"!=e.type(t.data)&&(t.data=e.param(t.data,t.traditional)),!t.data||t.type&&"GET"!=t.type.toUpperCase()&&"jsonp"!=t.dataType||(t.url=h(t.url,t.data),t.data=void 0)}(c);var d=c.dataType,g=/\?.+=\?/.test(c.url);if(g&&(d="jsonp"),!1!==c.cache&&(n&&!0===n.cache||"script"!=d&&"jsonp"!=d)||(c.url=h(c.url,"_="+Date.now())),"jsonp"==d)return g||(c.url=h(c.url,c.jsonp?c.jsonp+"=?":!1===c.jsonp?"":"callback=?")),e.ajaxJSONP(c,p);var x,b=c.accepts[d],E={},j=function(t,e){E[t.toLowerCase()]=[t,e]},w=/^([\w-]+:)\/\//.test(c.url)?RegExp.$1:t.location.protocol,C=c.xhr(),N=C.setRequestHeader;if(p&&p.promise(C),c.crossDomain||j("X-Requested-With","XMLHttpRequest"),j("Accept",b||"*/*"),(b=c.mimeType||b)&&(b.indexOf(",")>-1&&(b=b.split(",",2)[0]),C.overrideMimeType&&C.overrideMimeType(b)),(c.contentType||!1!==c.contentType&&c.data&&"GET"!=c.type.toUpperCase())&&j("Content-Type",c.contentType||"application/x-www-form-urlencoded"),c.headers)for(v in c.headers)j(v,c.headers[v]);if(C.setRequestHeader=j,C.onreadystatechange=function(){if(4==C.readyState){C.onreadystatechange=l,clearTimeout(x);var t,n=!1;if(C.status>=200&&C.status<300||304==C.status||0==C.status&&"file:"==w){if(d=d||f(c.mimeType||C.getResponseHeader("content-type")),"arraybuffer"==C.responseType||"blob"==C.responseType)t=C.response;else{t=C.responseText;try{t=function(t,e,n){if(n.dataFilter==l)return t;var r=n.context;return n.dataFilter.call(r,t,e)}(t,d,c),"script"==d?(0,eval)(t):"xml"==d?t=C.responseXML:"json"==d&&(t=T.test(t)?null:e.parseJSON(t))}catch(t){n=t}if(n)return u(n,"parsererror",C,c,p)}s(t,C,c,p)}else u(C.statusText||null,C.status?"error":"abort",C,c,p)}},!1===a(C,c))return C.abort(),u(null,"abort",C,c,p),C;var O=!("async"in c)||c.async;if(C.open(c.type,c.url,O,c.username,c.password),c.xhrFields)for(v in c.xhrFields)C[v]=c.xhrFields[v];for(v in E)N.apply(C,E[v]);return c.timeout>0&&(x=setTimeout((function(){C.onreadystatechange=l,C.abort(),u(null,"timeout",C,c,p)}),c.timeout)),C.send(c.data?c.data:null),C},e.get=function(){return e.ajax(p.apply(null,arguments))},e.post=function(){var t=p.apply(null,arguments);return t.type="POST",e.ajax(t)},e.getJSON=function(){var t=p.apply(null,arguments);return t.dataType="json",e.ajax(t)},e.fn.load=function(t,n,r){if(!this.length)return this;var i,o=this,a=t.split(/\s/),s=p(t,n,r),u=s.success;return a.length>1&&(s.url=a[0],i=a[1]),s.success=function(t){o.html(i?e("<div>").html(t.replace(x,"")).find(i):t),u&&u.apply(o,arguments)},e.ajax(s),this};var C=encodeURIComponent;e.param=function(t,n){var r=[];return r.add=function(t,n){e.isFunction(n)&&(n=n()),null==n&&(n=""),this.push(C(t)+"="+C(n))},d(r,t,n),r.join("&").replace(/%20/g,"+")}}(e),function(t){t.fn.serializeArray=function(){var e,n,r=[],i=function(t){return t.forEach?t.forEach(i):void r.push({name:e,value:t})};return this[0]&&t.each(this[0].elements,(function(r,o){n=o.type,(e=o.name)&&"fieldset"!=o.nodeName.toLowerCase()&&!o.disabled&&"submit"!=n&&"reset"!=n&&"button"!=n&&"file"!=n&&("radio"!=n&&"checkbox"!=n||o.checked)&&i(t(o).val())})),r},t.fn.serialize=function(){var t=[];return this.serializeArray().forEach((function(e){t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))})),t.join("&")},t.fn.submit=function(e){if(0 in arguments)this.bind("submit",e);else if(this.length){var n=t.Event("submit");this.eq(0).trigger(n),n.isDefaultPrevented()||this.get(0).submit()}return this}}(e),function(){try{getComputedStyle(void 0)}catch(n){var e=getComputedStyle;t.getComputedStyle=function(t,n){try{return e(t,n)}catch(t){return null}}}}(),e}));
!function(t){t.fn.unveil=function(i,e){var o,s=t(window),n=i||0,r=window.devicePixelRatio>1?"data-src-retina":"data-src",c=this;function a(i){var e;e=i?0:n;var r=c.filter((function(){var i=t(this);if("none"!=i.css("display")&&"hidden"!=i.css("visibility")&&(0!=i.offset().width||0!=i.offset().height)){var o=s.scrollTop(),n=o+s.height(),r=i.offset().top;return r+i.height()>=o-e&&r<=n+e&&!t(this).hasClass("lazyback")}}));o=r.trigger("unveil"),c=c.not(o)}return this.one("unveil",(function(){var i=this.getAttribute(r);if(i=i||this.getAttribute("data-src")){if(t(this).is("img")){var o=this.getAttribute("data-srcset");o&&this.setAttribute("srcset",o),this.setAttribute("src",i)}else t(this).css("background-image","url('"+i+"')");"function"==typeof e&&e.call(this)}})),"object"==typeof common&&"function"==typeof common.byWindowAction?common.byWindowAction(["scroll","resize","lookup"],a):s.on("scroll.unveil resize.unveil lookup.unveil",a),a(!0),this}}(window.jQuery||window.Zepto);
"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var AOTravellerEnquiryStore=function(){function e(t){_classCallCheck(this,e),this.common=t,this.STORAGE_KEY="bcplatest.info",this.TEMPLATES_ENDPOINT="/api/enquiry/traveller-store",this.GA_CATEGORY="Local BCP Access",this.GA_ACTION="open last enquiry",this.VALIDITY_DURATION=6048e5,this.path="",this.createdAt=0,this.seen=!1,this.lastSeenAt=0,this.BCP_PLACEHOLDER_ID="bcp-react",this.OPEN_QUESTION_STATUS=0,this.selectors={main:".js-ao-header-traveller-enquiry-store",desktop:{menu:".js-ao-header-desktop-nav",icon:".js-ao-header-desktop-nav"},mobile:{menu:".js-ao-header-handheld-nav",icon:".js-ao-header-t-menu"}}}return _createClass(e,[{key:"initialize",value:function(){if(this.rawData){try{this.data=JSON.parse(this.rawData)}catch(e){return void this.clearStore()}this.isExpired?this.clearStore():this.initUI()}}},{key:"setStore",value:function(){this.common.lsIsAvailable()&&localStorage.setItem(this.STORAGE_KEY,JSON.stringify({path:this.path,createdAt:this.createdAt,seen:this.seen,lastSeenAt:this.lastSeenAt}))}},{key:"clearStore",value:function(){this.common.lsIsAvailable()&&localStorage.removeItem(this.STORAGE_KEY)}},{key:"initUI",value:function(){var e=this;this.path&&!this.isEnquiryScreen()&&($(this.selectors.main).length?this.initGA():$(this.selectors.desktop.menu).length&&$(this.selectors.mobile.menu).length&&this.common.sendRequest(this.TEMPLATES_ENDPOINT,{bcpLink:this.path,lastSeenAt:+this.seen&&this.lastSeenAt},(function(t){var s=t.components,i=t.hasNewMessage;if(s){var a=s.cta,n=s.indicator;i&&(e.data={seen:!1}),$("".concat(e.selectors.desktop.menu," nav ul")).append(a),$("".concat(e.selectors.mobile.menu," ul li.pr-end")).removeClass("pr-end").after(a),e.seen||($("".concat(e.selectors.desktop.icon," svg")).after(n),$("".concat(e.selectors.mobile.icon)).append(n)),e.initGA()}})))}},{key:"initGA",value:function(){var e=this;this.common.sendGoogleEvent(this.GA_CATEGORY,"BCP access available",this.seen?"Without red indicator":"With red indicator",{nonInteraction:!0}),$("".concat(this.selectors.main)).on("click","a",(function(){e.data={seen:!0},$("".concat(e.selectors.main,"__indicator")).addClass("hid"),e.common.sendGoogleEvent(e.GA_CATEGORY,e.GA_ACTION,e.enquiryId)}))}},{key:"isEnquiryScreen",value:function(){var e=$("#".concat(this.BCP_PLACEHOLDER_ID));return!(!e.length||!e.data("code"))&&(parseInt(e.data("code").split("-")[0]||"",10)===this.enquiryId&&(parseInt(e.data("status"),10)===this.OPEN_QUESTION_STATUS||(this.clearStore(),!0)))}},{key:"handleEnquiryCreated",value:function(e){e&&!this.common.logged&&(this.data={path:e,createdAt:Date.now()})}},{key:"data",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.path=e.path||this.path,this.createdAt=e.createdAt||this.createdAt,this.seen=!!e.seen,this.seen&&(this.lastSeenAt=e.lastSeenAt||Date.now()),this.setStore()}},{key:"isExpired",get:function(){return Date.now()>=this.createdAt+this.VALIDITY_DURATION}},{key:"enquiryId",get:function(){var e=this.path.split("/");return parseInt(e[e.length-1].split("?enquiryCode=")[0]||"",10)}},{key:"rawData",get:function(){return this.common.lsIsAvailable()&&localStorage.getItem(this.STORAGE_KEY)}}]),e}();
"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,n){for(var o=0;o<n.length;o++){var t=n[o];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function _createClass(e,n,o){return n&&_defineProperties(e.prototype,n),o&&_defineProperties(e,o),e}var HubSpot=function(){function e(n){_classCallCheck(this,e),this.common=n,this.cookieKey="_hs_enabled",this.scriptUrl="//js.hs-scripts.com/20092223.js",this.eventCategory="Hubspot Chat"}return _createClass(e,[{key:"isEnabled",value:function(){return this.common.getCookie(this.cookieKey)}},{key:"isActive",value:function(){return this.isEnabled()&&this.common.getCookie("hs-messages-is-open")}},{key:"initiate",value:function(){document.cookie="".concat(this.cookieKey,"=1; expires=Fri, 31 Dec 9999 23:59:59 GMT; path=/")}},{key:"load",value:function(e){var n=this;this.common.loadJs(this.scriptUrl,(function(){n.common.sendGoogleEvent(n.eventCategory,"Widget loaded",window.location.href,n.isActive()&&{nonInteraction:!0}),e&&e(),window.HubSpotConversations?n.setTracking():window.hsConversationsOnReady=[function(){n.setTracking()}]}))}},{key:"setTracking",value:function(){var e=this;window.HubSpotConversations.on("conversationStarted",(function(n){e.common.sendGoogleEvent(e.eventCategory,"Conversation started","".concat(window.location.href," - conversation ID: ").concat(n.conversation.conversationId),e.isActive()&&{nonInteraction:!0})})),window.HubSpotConversations.on("conversationClosed",(function(n){e.common.sendGoogleEvent(e.eventCategory,"Conversation closed","".concat(window.location.href," - conversation ID: ").concat(n.conversation.conversationId),e.isActive()&&{nonInteraction:!0})}));var n="hs-messages-widget-open";new MutationObserver((function(o){o.forEach((function(o){var t=o.target.classList,i=o.oldValue||"",s=t.contains(n);i.indexOf(n)>-1^s&&e.common.sendGoogleEvent(e.eventCategory,s?"Open Chat Widget":"Close Chat Widget","".concat(window.location.href))}))})).observe(document.getElementsByTagName("html")[0],{attributes:!0,attributeOldValue:!0,attributeFilter:["class"]})}}]),e}();
"use strict";var _this5=void 0;function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach((function(t){_defineProperty(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Func(){var e,t,n,o=this;this.checkString=function(e,t){switch(t){case"email":return/^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/.test(e)}return!1},this.ucfirst=function(e){var t="".concat(e);return t.charAt(0).toUpperCase()+t.substr(1)},this.formatNumber=function(e){var t,n,o,a="".concat(e.number).replace(",","").replace(" ",""),i=isFinite(+a)?+a:0,r=isFinite(+e.decimals)?Math.abs(e.decimals):0,s=void 0===e.thousandSeperator?",":e.thousandSeperator,c=void 0===e.decimalPoint?".":e.decimalPoint,l="";return(l=(r?(t=i,n=r,o=Math.pow(10,n),"".concat(Math.round(t*o)/o)):"".concat(Math.round(i))).split("."))[0].length>3&&(l[0]=l[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,s)),(l[1]||"").length<r&&(l[1]=l[1]||"",l[1]+=new Array(r-l[1].length+1).join("0")),l.join(c)},this.setCookie=function(e){var t=e.name,n=e.value,o=e.path,a=e.domain,i=e.secure,r=e.expires;if(r){var s=new Date;s.setTime(s.getTime()+1e3*r),r=s.toGMTString()}document.cookie="".concat(t,"=").concat(escape(n)).concat(r?"; expires=".concat(r):"").concat(o?"; path=".concat(o):"").concat(a?"; domain=".concat(a):"").concat(i?"; secure":"")},this.getCookie=function(e){var t=" ".concat(document.cookie),n=" ".concat(e,"="),o=null,a=0,i=0;return t.length>0&&-1!==(a=t.indexOf(n))&&(a+=n.length,-1===(i=t.indexOf(";",a))&&(i=t.length),o=unescape(t.substring(a,i))),o},this.isElementOnScreen=function(e,t,n){var o=$(e),a=void 0!==t?t:0,i=void 0!==n?n:"top";if(o.length){var r=$(window),s=r.scrollTop(),c=s+r.height(),l=o.offset().top,u=l+o.height()-a;if("top"===i)return Math.min(u,c)>=Math.max(l,s);if("bottom"===i)return u>s&&u<c}return!1},this.smoothScroll=function(e){var t=e.to,n=e.duration,a=e.callback,i=e.shift,r=$(window).scrollTop();if(n<0)a&&a();else{var s,c=(!isNaN(parseFloat(t))&&isFinite(t)?t:t.offset().top+(i||0))-r;s=0===n?c:c/n*10,setTimeout((function(){isNaN(parseInt(s,10))||(window.scrollTo(0,r+s),o.smoothScroll({to:t,duration:n-10,callback:!!a&&a(),shift:i}))}),10)}},this.stripTags=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},this.debounce=function(e,t,n){var o;return function(){var a=this,i=arguments,r=function(){o=null,n||e.apply(a,i)},s=n&&!o;clearTimeout(o),o=setTimeout(r,t),s&&e.apply(a,i)}},this.getAbsoluteHeight=function(e){var t="string"==typeof e?document.querySelector(e):e,n=window.getComputedStyle(t),o=parseFloat(n.marginTop)+parseFloat(n.marginBottom);return Math.ceil(e.offsetHeight+o)},this.bodyScrollLock={initiate:function(){if((e="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform))&&(t=!1,"undefined"!=typeof window)){var n={get passive(){t=!0}};window.addEventListener("testPassive",null,n),window.removeEventListener("testPassive",null,n)}},enable:function(a){if(e){n=null;var i=a[0];i.addEventListener("touchstart",(function(e){1===e.targetTouches.length&&(n=e.targetTouches[0].clientY.clientY)}),t?{passive:!1}:void 0),i.addEventListener("touchmove",(function(e){1===e.targetTouches.length&&o.bodyScrollLock.disableScroll(e,i)}),t?{passive:!1}:void 0)}},disable:function(n){if(e){var o=n[0];o.removeEventListener("touchstart",t?{passive:!1}:void 0),o.removeEventListener("touchmove",t?{passive:!1}:void 0)}},disableScroll:function(e,t){return n=e.targetTouches[0].clientY-n,0===t.scrollTop&&n>0||o.bodyScrollLock.isOverlayTotallyScrolled(t)&&n<0?(e.preventDefault(),!0):(e.stopPropagation(),!0)},isOverlayTotallyScrolled:function(e){return e.scrollHeight-e.scrollTop<=e.clientHeight}}}function Common(e){var t,n,o,a=this,i=!1,r=null,s={},c=[];this.func=e,this.generalQuestionId=96147,this.logged=$("html").is(".logged"),this.getMonthNameByIndex=function(e,t){return t[e]},this.getMonthIndexByName=function(e,t){return t.indexOf(e)},this.getCdnUrl=function(){return window.trConfig&&window.trConfig.cdn?window.trConfig.cdn:(t||((t="".concat(window.location.host,"/")).indexOf(".com")>=0&&(t=t.indexOf("www.")>=0?t.replace("www.","cdn."):"cdn.".concat(t)),t="//".concat(t)),t)},this.getCdnVersion=function(){if(window.trVersion)return window.trVersion;if(void 0===n)for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t+=1)if(/script\.v[0-9]+\.(min|orig)\.js/.test(e[t].src)){var o=e[t].src.split("/");if(o.length>0){var a=o[o.length-1].split(".");a[1]&&(n=a[1].substr(1))}}return n},this.initLazyLoad=function(){setTimeout((function(){$("img.lazy, .img.lazy").unveil(window.screen.height||500)}),10)},this.isObjectFitSupported=function(){return"objectFit"in document.documentElement.style},this.initiateFallbackBackgroundImages=function(){var e=$(".bg-all img, .js-bg-all img:not(.no-object-fit)");!a.isObjectFitSupported()&&e.length>0&&e.each((function(e,t){var n=$(t),o=n.attr("src"),a=n.data("src");n.parent().toggleClass("img lazy",!!n.hasClass("lazy")).css("background-image",'url("'.concat(o,'")')).data("src",a),n.remove()}))},this.loadAsyncCss=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=".v".concat(a.getCdnVersion()),i=document.createElement("link");i.type="text/css",i.rel=n.rel||"stylesheet",n.as&&(i.as=n.as),i.href=e.indexOf("pw")<0||e.indexOf(o)>=0?e:e.replace(".css","".concat(o,".css")),t&&(i.onload=function(){t()}),$("html").append(i)},this.loadJs=function(e,t,n){var o=document.createElement("script"),i=n||e.indexOf("pw")<0?e:e.replace(".min.js",".v".concat(a.getCdnVersion(),".min.js"));o.async="async",o.src=i,o.nonce=window.nonce,e.indexOf(".tourradar.com")>=0&&(o.crossOrigin="anonymous"),document.body.appendChild(o),o.onload=function(){t&&t()}},this.sendRequest=function(e,t,n,o,a){var i=o;void 0===o&&(i={});var r=e,s=void 0!==window.trConfig.domainUrl&&""!==window.trConfig.domainUrl;s&&0===e.indexOf("/")&&(r="/".concat(window.trConfig.domainUrl).concat(e)),$.ajax({url:r,data:t,dataType:i.dataType?i.dataType:"json",type:i.type?i.type:"POST",headers:{"X-Language":s?window.trConfig.domainUrl:"en"},success:function(e){n&&n(e)},error:function(){a&&a()}})},this.sendGoogleEvent=function(e,t,n,o){if("undefined"!=typeof dataLayer){var i={event:"gaEvent",eventCategory:e,eventAction:t,eventLabel:n||"",eventValue:o&&o.eventValue?o.eventValue:"",nonInteraction:!1};o&&Object.keys(o).forEach((function(e){"value"===o[e]?i.eventValue=o[e]:i[e]=o[e]})),dataLayer.push(i)}a.sendTrackerEvent(e,t,n,o)},this.sendDataLayerEvent=function(e){"undefined"!=typeof dataLayer&&(dataLayer.push(e),console.log("EVENT: ".concat(JSON.stringify(e))))},this.sendTrackerEvent=function(e,t,n,o){"undefined"!=typeof tracker&&tracker&&tracker("addEvent",e,t,n,o)},this.getBreakpointMinWidth=function(e){return{s1:320,s2:568,m1:768,m2:1024,l1:1280,l2:1440}[e]},this.lib={setLoaded:function(e){e instanceof Array&&e.forEach((function(e){a.lib.use[e].initiated=!0}))},use:{popup:{initiated:!1,version:"1-1-0",css:"include/js/magnific-popup/magnific-popup",js:"include/js/magnific-popup/magnific-popup"},slider:{initiated:!1,version:"14-0-3",css:"include/js/nouislider/nouislider",js:"include/js/nouislider/nouislider"},calendar:{initiated:!1,version:"1-8-2",css:"include/js/pikaday/css/pikaday",js:"include/js/pikaday/pikaday"},moment:{initiated:!1,version:"2-26-0",js:"include/bower/moment/min/moment"},selector:{initiated:!1,version:"2-0-1",css:"include/js/selectivity/selectivity-full",js:"include/js/selectivity/selectivity-full"},animation:{initiated:!1,version:"1-0-0",css:!1,js:"include/js/zepto-anim"},mobile:{initiated:!1,version:"1-0-2",css:!1,js:"include/js/zepto-mobile"},touch:{initiated:!1,version:"1-0-2",css:!1,js:"include/js/zepto-touch"},tooltip:{initiated:!1,version:"1-1-2",css:"include/js/ttip/ttip",js:"include/js/ttip/ttip"},dragdrop:{initiated:!1,version:"1-0-0",css:!1,js:"include/js/zepto.dragswap"},autocomplete:{initiated:!1,version:"1-0-6",css:"include/js/tiny-autocomplete/tiny-autocomplete",js:"include/js/tiny-autocomplete/tiny-autocomplete"},dynamicmap:{initiated:!1,version:"1-0-0",css:"include/pw/dynamicmap/leaflet",js:"include/pw/dynamicmap/script"},dynamicmap_b:{initiated:!1,version:"1-0-0",css:"include/pw/dynamicmap/leaflet",js:"include/pw/dynamicmap_b/script"}},init:function(e,t,n){var o=window.trVersion||Math.random();a.lib.use[e].initiated?(n&&setTimeout((function(){n()}),300),t&&setTimeout((function(){a.lib.callbackFunctions(e,t)}),300)):(a.lib.use[e].initiated=!0,a.lib.use[e].css&&a.loadAsyncCss("".concat(a.getCdnUrl()+a.lib.use[e].css,".v").concat(a.lib.use[e].version,".min.css?v=").concat(o),(function(){n&&n()})),a.loadJs("".concat(a.getCdnUrl()+a.lib.use[e].js,".v").concat(a.lib.use[e].version,".min.js?v=").concat(o),(function(){t&&a.lib.callbackFunctions(e,t)}),!0))},callbackFunctions:function(e,t){if("autocomplete"===e)var n=setInterval((function(){"function"==typeof $.tinyAutocomplete&&(clearInterval(n),t())}),10);else if("popup"===e)var o=setInterval((function(){"object"===_typeof($.magnificPopup)&&(clearInterval(o),t())}),10);else if("dynamicmap_b"===e)var a=setInterval((function(){"function"==typeof DynamicMap&&(clearInterval(a),t())}),10);else t()}},this.signup={initiated:!1,version:"2021-04-08-001",getJsUrl:function(){return"".concat(a.getCdnUrl(),"include/pw/_common/signup.min.js?v=").concat(a.signup.version)},show:function(e,t,n){a.signup.initiated?$(".".concat(e,"_link")).click():(a.signup.initiated=!0,a.sendRequest("/api/common/component/signup",{},(function(o){$("main").append(o.component),a.loadJs(a.signup.getJsUrl(),(function(){a.lib.init("popup",(function(){$(".signup_link, .login_link").magnificPopup({closeOnBgClick:!0,callbacks:{open:function(){a.handleMagnificPopupHistory.openPopup()},close:function(){a.handleMagnificPopupHistory.closePopup()}}}),$(".email_add_popup_link").magnificPopup({closeOnBgClick:!1,closeOnContentClick:!1,showCloseBtn:!1,enableEscapeKey:!1}),$(".".concat(e,"_link")).click(),(new Signup).initiate(t,n)}))}))})))}},this.byUserInteraction=function(e,t){s[e]||(s[e]={},t&&(s[e].callback=t))},this.initUserInteraction=function(){a.byWindowAction(["scroll","keydown","keyup","mousemove","touchend","touchmove"],(function(){$.each(s,(function(e,t){"function"!=typeof t.callback||s[e].initiated||(s[e].initiated=!0,window.requestAnimationFrame((function(){t.callback()})))}))}))},this.deleteInteraction=function(e){delete s[e]},this.byWindowAction=function(e,t){-1!==$.inArray("load",e)&&t();var n=e.indexOf("load");n>-1&&e.splice(n,1),c.push({events:e,callback:t})},this.initWindowAction=function(){$(window).on("scroll click keydown keyup mousemove touchend load resize lookup popstate",(function(e){$.each(c,(function(t,n){$.inArray(e.type,n.events)<0||n.callback(e)}))}))},this.initParameters=function(){var e=document.getElementsByTagName("main")[0],t=e.getAttribute("data-parameters");e.removeAttribute("data-parameters"),a.parameters=t&&JSON.parse(t)||{}},this.removeQueryStringParam=function(e){var t=new RegExp("([?&])".concat(e,"=([^&;]+)?[&;]?"));if(!window.location.search.match(t))return!1;var n=[window.location.protocol,"//",window.location.host,window.location.pathname].join(""),o=document.location.search,a="",i=window.location.search.match(t)[2];return o&&(a=(a=o.replace(t,"$1")).replace(/[&;]$/,"")),a="?"===a?"":a,window.history.replaceState({},"",n+a+window.location.hash),i},this.cleanURL=function(){a.removeQueryStringParam("ehash"),a.removeQueryStringParam("email")},this.lsIsAvailable=function(){if(void 0!==o)return o;var e="testLocalStorage";try{localStorage.setItem(e,e),localStorage.removeItem(e),o=!0}catch(e){o=!1}return o},this.csrf={init:function(){r=$("#js-ao-settings-security-input")},setHash:function(e){r.length&&r.val(e)},getTokenName:function(){return r.length?r.attr("name"):""},getHash:function(){return r.length?r.val():""}},this.pwa={initiate:function(){a.pwa.serviceWorker(),window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone?a.sendGoogleEvent("PWA","App","Open"):a.pwa.events()},events:function(){window.addEventListener("beforeinstallprompt",(function(e){e.preventDefault(),a.pwaPrompt=e})),window.addEventListener("appinstalled",(function(){a.sendGoogleEvent("PWA","App","Installed")}))},prompt:function(){if(!i){var e=window.location.pathname;"/registration"!==e&&"/login"!==e&&(a.pwaPrompt.prompt(),a.sendGoogleEvent("PWA","Prompt","Show"),a.pwaPrompt.userChoice.then((function(e){"accepted"===e.outcome?a.sendGoogleEvent("PWA","Prompt","Accept"):a.sendGoogleEvent("PWA","Prompt","Dismissed"),a.pwaPrompt=null,i=!0})))}},serviceWorker:function(){"serviceWorker"in navigator&&window.addEventListener("load",(function(){if(navigator.serviceWorker.controller)console.log("[PWA Builder] active service worker found, no need to register");else{var e="".concat(window.location.origin,"/include/pw/service_worker/script.min.js?v=").concat(a.getCdnVersion());navigator.serviceWorker.register(e,{scope:"/"}).then((function(e){console.log("Service worker has been registered for scope: ".concat(e.scope))})).catch((function(e){console.log("Service worker registration failed: ".concat(e))}))}}))}},this.getServiceWorkerSupport=function(){return void 0===a.isServiceWorkerSupported&&(a.isServiceWorkerSupported="fetch"in window&&"serviceWorker"in navigator),a.isServiceWorkerSupported},this.getActiveServiceWokerFlag=function(){return a.getServiceWorkerSupport()?void 0===a.hasActiveServiceWorker?new Promise((function(e){navigator.serviceWorker.ready.then((function(){a.hasActiveServiceWorker=!0,e(a.hasActiveServiceWorker)}))})):new Promise((function(e){e(a.hasActiveServiceWorker)})):(void 0===a.hasActiveServiceWorker&&(a.hasActiveServiceWorker=!1),new Promise((function(e){e(a.hasActiveServiceWorker)})))},this.handleMagnificPopupHistory={baseLink:"",isMobile:$(window).width()<=767,backButtonMobileSelector:".js-ao-common-super-popup__header-back",doneButtonWishlistSelector:".wishlist_popup .but",mfpCloseSelector:".mfp-close",askQuestionCloseSelector:"#ask_popup_success .but.w-blue",mapCtaTdp:".js-ao-common-map-popup__content-info-details-cta--mfp-history",closePopupOnBack:function(){$.magnificPopup.instance&&($.magnificPopup.close(),$("body").off("click",a.handleMagnificPopupHistory.onOutsideContentClick),$("body").off("click",a.handleMagnificPopupHistory.onBackButtonClick),window.removeEventListener("popstate",a.handleMagnificPopupHistory.closePopupOnBack))},onOutsideContentClick:function(e){($(e.target).hasClass("mfp-container")||$(e.target).hasClass("mfp-content"))&&(window.history.back(),$("body").off("click",a.handleMagnificPopupHistory.onOutsideContentClick))},onBackButtonClick:function(){window.history.back(),$("body").off("click",a.handleMagnificPopupHistory.onBackButtonClick)},openPopup:function(){var e=a.handleMagnificPopupHistory,t=e.closePopupOnBack,n=e.onBackButtonClick,o=e.isMobile,i=e.backButtonMobileSelector,r=e.doneButtonWishlistSelector,s=e.mfpCloseSelector,c=e.askQuestionCloseSelector,l=e.mapCtaTdp,u="".concat(i,", ").concat(r,", ").concat(s,", ").concat(c,", ").concat(l);o&&(a.baseLink=window.location.href,window.history.pushState({url:window.location.href},null,"?popupOpen"),window.addEventListener("popstate",t),$("body").on("click",u,n))},closePopup:function(){var e=a.handleMagnificPopupHistory,t=e.onOutsideContentClick;e.isMobile&&(window.history.replaceState({},"",a.baseLink),$("body").on("click",".mfp-container, .mfp-content",t))}},this.prefetchImageFromSource=function(e){e&&((new Image).src=e)},this.logBrokenImages=function(){$("img").on("error",(function(e){var t={url:document.location.href,languge:navigator.language,useragent:navigator.userAgent,platform:navigator.platform,oscpu:navigator.oscpu,referrer:document.referrer,"error[message]":"Image loading error","error[filename]":e.target.src,"error[stack]":e.target.className,type:"image"};a.sendRequest("/api/utils/jserror",t)}))},this.getDomainUrl=function(){return void 0!==window.trConfig.domainUrl?window.trConfig.domainUrl:""}}function Header(e,t){var n=this;this.menu={initiated:!1,isHeaderSearchOpen:!1,isNoHeaderSearchBlur:!1,$activeDropdown:null,$nextDropdown:null,activeDropdownTimeout:null,initiate:function(){var o;$("head").append('<link rel="shortcut icon" href="'.concat(e.getCdnUrl(),'favicon.ico">')),$('a[href="#"]').click((function(e){e.preventDefault()})),$("header input").blur((function(t){n.menu.isNoHeaderSearchBlur||(n.menu.isHeaderSearchOpen=!1,$(".tagln-search").removeClass("mob-focus"),$("header .autocomplete-list").remove(),$(t.currentTarget).removeClass("focus").val(""),$("html, body").removeClass("search-focused"),e.sendGoogleEvent("Header Search","Close"))})),$("header .tagln-search").click((function(t){var o=$("header input");n.menu.isNoHeaderSearchBlur=!1,n.menu.isHeaderSearchOpen&&($(t.target).is("header .close span")||$(t.target).is("header .close"))?(n.menu.isHeaderSearchOpen=!1,$(".tagln-search").removeClass("mob-focus"),$("header .autocomplete-list").remove(),o.removeClass("focus").val(""),$("html, body").removeClass("search-focused"),e.sendGoogleEvent("Header Search","Close")):n.menu.isHeaderSearchOpen||(n.menu.isHeaderSearchOpen=!0,o.focus(),e.sendGoogleEvent("Header Search","Open"))})),$(":root").on("mousedown",".tagln-search",(function(){n.menu.isNoHeaderSearchBlur=!0})),$("header input").focus((function(e){var t=$(e.currentTarget);$(".tagln-search").addClass("mob-focus"),t.val()||t.data("serp",""),t.addClass("focus"),$("html, body").addClass("search-focused")})),$("header li.dropdown").mouseenter((function(e){var t=$(e.currentTarget);o=setTimeout((function(){n.menu.openDropdown(t)}),100)})),$("header li.dropdown").mouseleave((function(e){clearTimeout(o);var t=$(e.currentTarget);t.hasClass("hover")?n.menu.activeDropdownTimeout=setTimeout((function(){n.menu.$activeDropdown=null,t.removeClass("hover"),n.menu.$nextDropdown&&n.menu.openDropdown(n.menu.$nextDropdown)}),175):n.menu.$nextDropdown&&n.menu.$nextDropdown[0]===t[0]&&(n.menu.$nextDropdown=null)})),e.byUserInteraction("menu-load",(function(){try{if(!n.menu.initiated){if(e.lsIsAvailable()){var t=e.getDomainUrl(),o=localStorage["generation".concat(t)];if(void 0!==o){n.menu.initiated=!0;var a=localStorage["mobileMenu".concat(t)],i={destinations:localStorage["destinations".concat(t)],styles:localStorage["styles".concat(t)]};e.sendRequest("/api/common/component/cache_time",{},(function(e){String(o)!==String(e.component)?n.menu.getMenu():n.menu.load(i,a)}))}}n.menu.initiated||(n.menu.initiated=!0,n.menu.getMenu())}}catch(e){console.log(e)}})),$("header .t-menu").click((function(){setTimeout((function(){$("nav.header").addClass("open"),$(".darken").removeClass("hid"),$("body").addClass("lock")}),25),e.sendGoogleEvent("Header","Click","Mobile burger menu")})),$(".darken").click((function(){$(".darken").addClass("hid"),$("body").removeClass("lock"),$("nav.header, nav.header ul.open").removeClass("open"),$("nav.header .return").addClass("hid"),$("nav.header ul").removeAttr("style")})),$(".support .open-olark").click((function(){t.olarkIntegration.startEnquiryDialog(),e.sendGoogleEvent("Header","Click","Live Chat")})),$(".js-top-menu-deals__link, .js-top-menu-help__link").click((function(t){var n=$(t.currentTarget);e.sendGoogleEvent("Header",n.attr("href"))})),$(".js-top-menu-deals__submenu-link, .js-top-menu-help__submenu-link").click((function(t){var n=$(t.currentTarget);e.sendGoogleEvent("Main menu",n.attr("href"))}));$("body").on("click",[".js-top-menu-deals__link--mobile",".js-top-menu-why__link--mobile",".js-top-menu-win-a-tour__link--mobile",".js-top-menu-ttw__link--mobile",".js-top-menu-help__link--mobile",".js-top-menu-contact__link--mobile"].join(),(function(t){var n=$(t.currentTarget);e.sendGoogleEvent("Header","Click",n.text())})),(new AOCommonContact).initiate(),(new TravelCreditsHeaderBox).initiate(),t.travellerEnquiryStore.initialize()},openDropdown:function(e){n.menu.$activeDropdown?n.menu.$activeDropdown[0]===e[0]?clearTimeout(n.menu.activeDropdownTimeout):n.menu.$nextDropdown=e:(n.menu.$activeDropdown=e,n.menu.$nextDropdown=null,e.addClass("hover"))},getMenu:function(){e.sendRequest("/api/common/component/header_menu,header_mobile_menu",{},(function(t){var o=e.getDomainUrl(),a=t.components.header_menu,i=t.components.header_mobile_menu,r=a.generation;if(n.menu.load(a,i),$("li.dropdown.fill nav").removeClass("hid"),e.lsIsAvailable())try{localStorage["mobileMenu".concat(o)]=i,localStorage["destinations".concat(o)]=a.destinations,localStorage["styles".concat(o)]=a.styles,localStorage["generation".concat(o)]=r}catch(e){console.log(e)}}))},load:function(t,o){$("nav.header .pr-end").after(o),$('header li[data-type="destinations"] nav').html(t.destinations),$('header li[data-type="styles"] nav').html(t.styles),$("li.dropdown.fill nav").removeClass("hid"),$("nav.header li").click((function(e){var t=$(e.currentTarget);t.children("ul").addClass("open"),t.children("div.return").removeClass("hid"),t.parent("ul").css("overflow","visible")})),$("nav.header .return").click((function(e){var t=$(e.currentTarget);t.parent("li").parent("ul").removeAttr("style"),t.addClass("hid"),t.next("ul").removeClass("open"),e.stopPropagation()})),$("nav.header ul").scroll((function(e){var t=$(e.currentTarget),n=t.scrollTop(),o=Math.floor(n/43);t.children("li").each((function(e){if(e<o)t.css({opacity:0});else if(e===o){var a=(43-n%43)/43;t.css({opacity:a})}else t.css({opacity:1})}))})),$("header .return").mousedown((function(e){var t=$(e.currentTarget).parents("nav");setTimeout((function(){n.menu.swap(t.children("ul.all"),t.children("ul.top"),"t",null)}),200)})),$("header ul li.dropdown.fill").mouseleave((function(e){var t=$(e.currentTarget);t.find("ul.all").addClass("hid"),t.find("ul.top").removeClass("hid")})),$("header .see-all a").click((function(t){t.preventDefault();var o=$(t.currentTarget),a=o.parents("li[data-type]").data("type"),i=o.parents("nav");i.find("ul.all > li:not(.return)").hide(),i.find('ul.all > li[data-type="'.concat(a,'"]')).show(),n.menu.swap(i.find("ul.top"),i.children("ul.all"),"b",o.parents(".top li").find("span").text()),e.sendGoogleEvent("Header","Click","See all ".concat(a))})),$(".js-header-destination__link").on("click",(function(e){var t=$(e.currentTarget),o=t.data("category"),a=t.attr("href");"undefined"!==_typeof(a)&&!1!==a||(a=t.closest(".js-header-destination__link-anchor").attr("href"));var i=o;if(!!t.data("see-all-mobile")){var r=t.data("category");i="See all - ".concat(r)}!!t.data("trending")&&(i="".concat(o," - Trending")),n.menu.sendNavigationClickGoogleEvent(i,a)}))},sendNavigationClickGoogleEvent:function(t,n){e.sendGoogleEvent("Main menu",n,t||"")},swap:function(e,t,n,o){t.hasClass("hid")&&t.removeClass("hid");var a="t"===n;a||t.css("opacity","0");var i=Date.now()+300,r=Date.now()+800;if(!a){var s=t.parents("nav");s.find(".all .return span").text(o);var c=Date.now()+1500,l=setInterval((function(){if(Date.now()<c){var e=(c-Date.now())/1500;s.find(".all .arrow").css("opacity",1-e),s.find(".all .return span").css("opacity",e)}}),50);setTimeout((function(){clearInterval(l);var e=s.find(".return span");s.find(".all .arrow").css("opacity","1"),e.css("opacity","0"),e.text("")}),1500)}var u=setInterval((function(){if(Date.now()<i){var n=(i-Date.now())/300,o=a?100*n:100*(1-n);t.css("top","-".concat(o,"%")),e.css("top","-".concat(o,"%"))}}),25),d=setInterval((function(){if(Date.now()<r){var n=(r-Date.now())/800;a?e.css("opacity",n):t.css("opacity",1-n)}}),40);setTimeout((function(){clearInterval(u),e.addClass("hid"),e.css("opacity","1"),e.css("top","0"),t.css("top","0")}),300),setTimeout((function(){clearInterval(d),t.css("opacity","1")}),800)}},this.search={initiated:!1,clicked:!1,maxResults:3,groups:{places:{title:"",data:[]},tours:{title:"",data:[]},types:{title:"",data:[]},operators:{title:"",data:[]},default:{title:"",data:[]}},groupingOrder:["places","tours","types","operators"],initiate:function(){var t=$("header input");Object.keys(n.search.groups).forEach((function(e){n.search.groups[e].title=t.data("title-".concat(e))}));var o=t.data("see-all");t.one("focus click keydown input",(function(){n.search.initiated||(n.search.initiated=!0,e.lib.init("autocomplete",(function(){$("header input").tinyAutocomplete({url:"https://3VPAXN8SSR-dsn.algolia.net/1/indexes/*/queries",method:"post",grouped:!0,getRequestData:function(e){var t=$.param({query:e,attributesToRetrieve:"name,type_name,operator_name,url",attributesToHighlight:"",hitsPerPage:n.search.maxResults}),o={requests:[{indexName:window.trConfig.algolia.indexes.serp,params:t},{indexName:window.trConfig.algolia.indexes.operators,params:t},{indexName:window.trConfig.algolia.indexes.tours,params:t}]};return JSON.stringify(o)},ajaxSettings:{type:"post",contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-Algolia-API-Key",window.trConfig.algolia.api_key),e.setRequestHeader("X-Algolia-Application-Id",window.trConfig.algolia.app_id)}},wrapField:!1,itemTemplate:'<li class="autocomplete-item" data-url="{{url}}" data-type="{{eventType}}">{{title}}<span>{{type}}</span></li>',lastItemTemplate:'<li class="autocomplete-item" data-url="" data-type="">'.concat(o,' "{{title}}"</li>'),onSelect:function(t){var o=$(t),a=o.data("url"),i=o.data("type");if(o.hasClass("autocomplete-item"))if(a=e.func.stripTags(a),i=e.func.stripTags(i),a){var r=o.html().replace(/<span>(.*)<\/span>/g,"").replace("amp;","");r=e.func.stripTags(r),e.sendGoogleEvent("Header Search","Select ".concat(e.func.ucfirst(i.toLowerCase())),"Success - ".concat(r));var s=o.closest(".autocomplete-list").find('.autocomplete-item:not([data-url=""])'),c=s.length,l=s.index(o)+1;e.sendGoogleEvent("Header Search","Selected Position","".concat(l,"/").concat(c),{nonInteraction:!0}),window.location.href="/".concat(a)}else{var u=$("header input").val();n.search.redirectToResultsPage(),e.sendGoogleEvent("Header Search","Select All Results","Success - ".concat(u))}}}).on("receivedata",(function(e,t,o){var a=n.search.parseResults(o,t.lastSearch);t.json=a,t.selectedItem=0})).on("keydown",(function(t){var o=t.keyCode?t.keyCode:t.which,a=$("header .autocomplete-list").last(),i=a.find(".autocomplete-item.active").index();if(13===o)if(a&&"none"!==a.css("display")&&a.find("li").length>0){if(-1===i){var r=a.find(".autocomplete-item:first-child"),s=r.html().replace(/<span>(.*)<\/span>/g,"").replace("amp;","");s=e.func.stripTags(s),r.click(),e.sendGoogleEvent("Header Search","Enter",s)}}else{var c=$("header input").val();n.search.redirectToResultsPage(c)}else 27===o&&($("header input").val("").removeClass("focus"),$("html, body").removeClass("search-focused"))}))})))}))},parseResults:function(e,t){for(var o=JSON.parse(JSON.stringify(n.search.groups)),a=0;a<e.results.length;a+=1)for(var i=e.results[a].hits,r=0;r<i.length;r+=1){var s="MIX",c="MIX",l="default",u=i[r];u.type_name?(s=c=u.type_name,l="tours",l="Type"===u.type_name?"types":"places"):e.results[a].index===window.trConfig.algolia.indexes.operators?(s=c="Operator",l="operators"):e.results[a].index===window.trConfig.algolia.indexes.tours&&(c="Tour",s=u.operator_name,l="tours");var d=o[l];d.score=n.search.calculateHitScore(d,u,t),d.data.push({title:u.name,url:u.url,type:s,eventType:c})}return n.search.getSortedResultsByScore(o)},calculateHitScore:function(e,t,n){var o=e.score||0,a=t.name.toLowerCase(),i=n.toLowerCase();return a.indexOf(i)>=0&&(o+=Math.round(i.length/a.length*100)),o},getSortedResultsByScore:function(e){for(var t=[],o=0;o<n.search.groupingOrder.length;o+=1){var a=e[n.search.groupingOrder[o]];if(a&&a.data.length){var i=a.score/a.data.length;if(t.length)for(var r=0;r<t.length;r+=1){if(i>t[r].score/t[r].data.length){t.splice(r,0,a);break}if(r===t.length-1){t.push(a);break}}else t.push(a)}}return t},redirectToResultsPage:function(){var e=$("header input").val(),t=$("header input").data("search-result-url");window.location.href="".concat(t,"?q=").concat(e)}},this.topBanner={initiated:!1,initiate:function(){$(".t_b").length>0&&n.topBanner.show()},show:function(){n.topBanner.initiated||(n.topBanner.initiated=!0,e.sendRequest("/api/common/component/top_banner",{},(function(e){$("body").trigger("banner:init"),$(".t_b").addClass("done").html(e.component);var t=$("body").data("b"),n=$("main .top");n.find(".sch").length&&"you_reffered_not_logged"===t&&$("#row-banner.for_referred").length>0&&($("main .top").append("".concat('<div class="yrnl"><div><span>').concat($("#row-banner").data("in"),"</span>")+'<br>sent you a 5% discount</div><span class="li">Redeem discount</span></div>'),$("#row-banner .inv_image").clone().prependTo("main .top .yrnl"),n.find(".yrnl").click((function(){window.location.href=$("#row-banner a").attr("href")})))})))}},this.newsletterTopBanner={initiated:!1,max_window_width:963,initiate:function(){n.newsletterTopBanner.allChecks()&&n.newsletterTopBanner.show(),$(window).bind("resize",(function(){n.newsletterTopBanner.allChecks()?n.newsletterTopBanner.show():n.newsletterTopBanner.check()}))},allChecks:function(){return!$("body").data("r")&&!$(".r2 ul li.tr").hasClass("logged")&&!e.func.getCookie("tnbcls")&&0===$("#row-banner").length&&!$("body").hasClass("tab")&&$(window).width()>=n.newsletterTopBanner.max_window_width},show:function(){n.newsletterTopBanner.initiated?n.newsletterTopBanner.check():(n.newsletterTopBanner.initiated=!0,e.sendRequest("/api/subscribe/signup",{},(function(t){if("OK"===t.status){$("body").prepend(t.html);var o="#tnb .tnb1 .in",a=$("".concat(o," input")).attr("placeholder");$("".concat(o," div")).click((function(t){var n=$.trim($("".concat(o," input")).val());return n&&e.func.checkString(n,"email")?(e.sendRequest("/api/subscribe/check",{email:n},(function(t){"OK"===t.status&&($(o).html("<b>Thanks! You will receive an email soon</b>"),e.func.setCookie({name:"tnbcls",value:"1",expires:31536e3,path:"/"}))})),!0):($("".concat(o," input")).addClass("red").attr("placeholder","Please, enter a valid email").val("").focus((function(){$(t.currentTarget).removeClass("red").attr("placeholder",a).val(n)})),!1)})),$("".concat(o," input")).live("keyup",(function(e){13===(e.keyCode?e.keyCode:e.which)&&$("".concat(o," div")).click()})),$("#tnb .tnb1 .cls").click((function(){$("#tnb").remove(),e.func.setCookie({name:"tnbcls",value:"1",expires:31536e3,path:"/"}),n.newsletterTopBanner.check()})),n.newsletterTopBanner.check()}})))},check:function(){if(n.newsletterTopBanner.initiated){var e=$(".b.val.fixed");e.length>0?e.addClass("wtop"):e.removeClass("wtop");var t=$(".b.menu ul.fixed");t.length>0?t.addClass("wtop"):t.removeClass("wtop"),$("#tnb").length||(e.removeClass("wtop"),t.removeClass("wtop"))}}},this.ups={eventActions:{"best-selection":"best selection","best-prices":"best prices",deposit:"deposit"},initiate:function(){$(".js-ups-link").click((function(t){e.sendGoogleEvent("header USP",n.ups.eventActions[t.target.dataset.route],e.parameters.page_type||location.pathname.split("/")[1])}))}},this.heartIcon={initiate:function(){$(".wishlist-tours-js").click((function(){e.sendGoogleEvent("Header Saved Tours","Click",e.parameters.page_type||location.pathname.split("/")[1])}))}},this.profileWishlist={initiate:function(){$(".profile-wishlist-js").click((function(){e.sendGoogleEvent("Header Saved Tours","Click",e.parameters.page_type||location.pathname.split("/")[1])}))}}}function Footer(e,t){var n=this;this.links={initiate:function(){$("footer .rlk h4").not(".js-language-selector-title").not(".js-phone-selector-title").click((function(e){var t=$(e.currentTarget);t.find(".arrow").toggleClass("bottom"),t.toggleClass("open")})),$(".js-phone-selector-title").click((function(e){$(e.currentTarget).find(".arrow").toggleClass("bottom"),$(".js-phone-selector-list").toggleClass("hid")}))}},this.subscribe={initiate:function(){$("footer form").submit((function(t){var o=$(t.currentTarget).children("input"),a=$.trim(o.val());return a&&e.func.checkString(a,"email")?(e.sendGoogleEvent("Newsletter - Signup","SignedUp","Footer"),e.sendRequest("/api/subscribe/check",{email:a},(function(e){"OK"===e.status&&n.subscribe.success()})),!1):(alert(o.data("wrong-email")),!1)})),$("footer form .js-footer-subscribe").click((function(){return $("footer form").submit(),!1}))},success:function(){$("footer form").find("input, a, p, .tc-text").toggleClass("hid"),$("footer form .title").addClass("submit")}},this.social={initiated:!1,initiate:function(){var t=$(window);$(".js-ao-expo-awareness-footer__share-fb").length>0?n.social.initiated||(n.social.initiated=!0,e.sendRequest("/api/common/component/footer_facebook",{},(function(e){n.social.showFacebook(e.component)}))):$("footer .soc").length>0&&e.byWindowAction(["scroll"],(function(){t.scrollTop()+t.height()>=$("footer .soc").offset().top&&(n.social.initiated||(n.social.initiated=!0,e.sendRequest("/api/common/component/footer_social,footer_facebook",{},(function(e){n.social.showLinks(e.components.footer_social),n.social.showFacebook(e.components.footer_facebook)}))))}))},showLinks:function(e){$("footer .soc").prepend(e)},showFacebook:function(e){$("footer .fb, .js-ao-expo-awareness-footer__share-fb").prepend(e)}},this.hubspot=new HubSpot(_objectSpread(_objectSpread({},e),{},{getCookie:e.func.getCookie})),this.olarkIntegration={texts:[],followConversationSelector:"#ask_popup_success .js-aa-btn--conversation",askSubmit:function(t,o){var a=$.trim(t.find('input[name="tour_id"]').val())||0,i=$.trim(t.data("price"))||0,r=$.trim(t.find("textarea").val())||"",s=t.find('input[name="email"]').length>0?$.trim(t.find('input[name="email"]').val()):null,c=t.find('input[name="phone"]'),l=t.find('input[name="name"]').val(),u=t.find('input[name="live_chat"]').val()||0,d=$.trim(c.val()),p=t.find('select[name="currency"]'),m=t.find('select[name="source"]'),f=t.find('select[name="date"]'),v=t.find('input[name="stateroom"]'),g=t.find('input[name="stateroom"]:checked'),h=t.find('select[name="room"]'),k=t.find('select[name="transport"]'),w=t.find('input[name="pax"]'),b=t.find('input[name="double_opt_in"]'),y=t.find('input[name="double_opt_in"]:checked'),C=t.find('input[name="in-the-past"]'),_=$("#ask_popup button"),S=t.data("currency")||"EUR",x=t.parents("#ask_popup").hasClass("river-cruise"),I=!1;if(r||x?l?!(t.find('input[name="email"]').length>0)||s&&e.func.checkString(s,"email")?d.length<5&&x?I=n.olarkIntegration.texts.error.phone:f.length>0&&10!==f.val().length&&x?I=n.olarkIntegration.texts.error.date:(v.length>0&&0===g.length&&x&&v.parent().hasClass("active")||h.length>0&&0===h.val()&&x&&h.parent().hasClass("active"))&&(I=n.olarkIntegration.texts.error.room):I=n.olarkIntegration.texts.error.email:I=n.olarkIntegration.texts.error.name:I=n.olarkIntegration.texts.error.text,k.length>0&&!k.hasClass("hid")&&(r="".concat(r,"\n\n").concat(n.olarkIntegration.texts.comment.room.replace("{{room}}",k.val()))),v.length>0&&g.length>0&&v.parent().hasClass("active")&&(r="".concat(r?"".concat(r,"\n\n"):"").concat(n.olarkIntegration.texts.comment.stateroom.replace("{{stateroom}}",g.val()))),C.length&&C.filter(":checked").length&&(r=(r?"".concat(r,"\n\n"):"")+C.parent().find("label").text().trim()),I)alert(I);else{"undefined"!=typeof tracker&&tracker("addEvent","tracker","email",s,{});var T={type:"t",id:a,enquiry_source:"",email:s,details_phone:d,first_name:l,source:"tr",source_id:0,pax:w.length&&w.val()?w.val():1,name:l,details_type:4,double_opt_in:b.length?y.length:1,comment:r,note:o.note||"",date:o.date||null};if(Object.prototype.hasOwnProperty.call(n.olarkIntegration,"showDates")&&(T.display_dates_popup=n.olarkIntegration.showDates),x&&h.parent().hasClass("active")&&(T.room=h.val()),p.length>0&&(T.currency=p.val(),f.length>0&&10===f.val().length&&(T.date=f.val()),"0"!==m.val()&&(T.create_source=m.val())),n.olark.isOlarkAvailable()&&u&&!o.forceEnqiry){window.olark&&(n.olark.setupLocalization(),olark("api.box.expand"));var j=$("#olark-wrapper");return j.find("#olark-form-input-fname").val(l).trigger("input"),j.find("#olark-form-input-email").val(s).trigger("input"),d&&j.find("#olark-form-input-phone").val(d).trigger("input"),j.find(".olark-form-send-button").click(),j.find(".olark-feedback-cancel-button").click(),setTimeout((function(){j.find(".olark-chat-input").val(r),j.find(".olark-chat-send-button").click()}),1e3),$.magnificPopup.close(),void e.sendGoogleEvent("Ask A Question","Question Asked - Live Chat",o.name,{tourID:a,tourPrice:10,pax:1,currencyCode:"USD"})}x&&(T.booktype="river",T.date||(T.date=f.val())),_.attr("disabled",!0),e.sendRequest(t.attr("action"),T,(function(t){if(_.removeAttr("disabled"),"OK"!==t.status)return!1;var r="Question Asked";return n.olarkIntegration.showDates?r+=" - Add Dates":x?r+=" - Cruise Quote":o.note&&(r+=" - General"),e.sendGoogleEvent("Ask A Question",r,o.name,{tourID:a,tourPrice:i,pax:1,currencyCode:S}),$(n.olarkIntegration.followConversationSelector).attr("href",t.href),$.magnificPopup.close(),t.has_nps_record&&$("#ask_popup_success .js-ao-common-nps").remove(),n.olarkIntegration.showDates?n.olarkIntegration.showDatesPopup({email:s,code:t.code}):o.note?n.olarkIntegration.showSuccessPopup(s,"Contact Page"):n.olarkIntegration.showSuccessPopup(s),n.travellerEnquiryStore.handleEnquiryCreated(t.href),"function"==typeof onEnquiryCreatedGlobal&&onEnquiryCreatedGlobal(),!0}))}},showDatesPopup:function(t){n.olarkIntegration.isSuccessStep=!1;var o=$(".ask_popup_dates");"brochure"===t.type&&e.sendRequest("/api/popup/get-tour-dates",{id:t.tour_id},(function(e){"OK"===e.status&&($(".js-ask-dates__date-container").remove(),$(".js-ask-dates__pax-container").before(e.html))})),$.magnificPopup.close(),o.magnificPopup({closeOnBgClick:!0,closeMarkup:'<div title="'.concat(n.olarkIntegration.texts.close,'" class="close mfp-close"></div>'),mainClass:"ask-popup-dates",fixedContentPos:!0,callbacks:{open:function(){n.olarkIntegration.isDatesSkippedByUser=!1,(new AOCommonNps).initiate(t.email,"ask_question")},close:function(){n.olarkIntegration.isDatesSkippedByUser||n.olarkIntegration.isSuccessStep||e.sendGoogleEvent("Download Brochure","Quote Closed",t.tour_name)}}}),o.magnificPopup("open");var a=$(".js-ask-dates__pax-container");n.olarkIntegration.paxFunctions.initPax(a),$(".js-ask-dates__additional-comment").val(""),$(".js-ask-dates__button--skip").unbind("click").click((function(a){a.stopPropagation(),n.olarkIntegration.isDatesSkippedByUser=!0,o.magnificPopup("close"),"brochure"===t.type&&e.sendGoogleEvent("Download Brochure","Quote Skipped",t.tour_name),t.callback?t.callback():n.olarkIntegration.showSuccessPopup(t.email)})),$(".js-ask-dates__button--submit").unbind("click").click((function(){var a=$(".js-ask-dates__date");if(a.length>0&&a.val().length<10)alert(n.olarkIntegration.texts.error.departureDate);else{var i=$(".js-ask-dates__pax"),r=$(".js-ask-dates__additional-comment"),s="".concat(n.olarkIntegration.texts.comment.automatedMessage,"\n\n");s+=(1===i.val()?n.olarkIntegration.texts.comment.freeQuoteOne:n.olarkIntegration.texts.comment.freeQuotePlural).replace("{{departureDate}}",a.val()).replace("{{numberOfTravellers}}",i.val()),r.val()&&(s+="\n\n".concat(r.val()));var c={message:s,date:a.val(),pax:i.val(),comment:r.val()};"brochure"===t.type?(c.email=t.email,c.id=t.tour_id,c.not_formated_date=c.date,c.send_type=t.type,!e.parameters.page_type||"tdp"!==e.parameters.page_type&&"serp"!==e.parameters.page_type||(c.page_type=e.parameters.page_type),delete c.date,delete c.message,e.sendRequest("/api/enquiries/simple",c,(function(o){"OK"===o.status&&($(n.olarkIntegration.followConversationSelector).attr("href",o.href),n.olarkIntegration.showSuccessPopup(t.email),window.tracker&&tracker("appendParameters",o.parameters||[]),e.sendGoogleEvent("Download Brochure","Quote Requested",t.tour_name))}))):e.sendRequest("/api/enquiries/add-message/".concat(t.code),c,(function(e){"OK"===e.status&&(window.tracker&&tracker("appendParameters",e.parameters||[]),o.magnificPopup("close"),t.callback?t.callback():n.olarkIntegration.showSuccessPopup(t.email))}))}return!1}))},showSuccessPopup:function(t,o){n.olarkIntegration.isSuccessStep=!0;var a=$(".ask_link_success");a.magnificPopup({closeOnBgClick:!0,closeMarkup:'<div title="'.concat(n.olarkIntegration.texts.close,'" class="close mfp-close"></div>'),callbacks:{open:function(){(new AOCommonNps).initiate(t,"ask_question")},close:function(){$(".ask_link_success, #ask_popup_success").remove()}}}),a.magnificPopup("open"),$("#ask_popup_success .but:not(.blue)").click((function(){a.magnificPopup("close")}));var i=$(n.olarkIntegration.followConversationSelector);if(i.click((function(){e.sendGoogleEvent("Ask A Question","View your Question".concat(o?" - General":""),o||i.data("ga-label"))})),$(".js-ao-ask-popup_box--create-account").on("click",(function(){e.sendGoogleEvent("Ask A Question","Create an account")})),n.olarkIntegration.showDates){var r=n.olarkIntegration.isDatesSkippedByUser?"Dates Skipped":"Dates Added";e.sendGoogleEvent("Ask A Question",r)}},defaultTour:{id:-1,name:window.location.href,note:"User comes from ".concat(window.location.href)},paxFunctions:{initPax:function(e){var t=e.find(".quantity"),o=t.find("input");o.val(1),t.find(".number.minus").addClass("grey"),t.find(".number.plus").removeClass("grey"),n.olarkIntegration.paxFunctions.paxNumber=parseInt(o.val(),10),n.olarkIntegration.paxFunctions.paxMax=parseInt(t.find("input").attr("max"),10),t.find(".number").unbind("click").click((function(e){var o=$(e.currentTarget);o.hasClass("grey")||o.hasClass("disabled")||(o.hasClass("plus")?n.olarkIntegration.paxFunctions.addPax(t):n.olarkIntegration.paxFunctions.removePax(t))})),t.find("input").unbind("blur keyup").on("blur keyup",(function(e){if("blur"===e.type||"Enter"===e.code){var o=parseInt($.trim(t.find("input").val()),10);n.olarkIntegration.paxFunctions.adjustTravellersNumberTo(o,t)}}))},adjustTravellersNumberTo:function(e,t){e>n.olarkIntegration.paxFunctions.paxMax?(n.olarkIntegration.paxFunctions.paxNumber=n.olarkIntegration.paxFunctions.paxMax,n.olarkIntegration.paxFunctions.adjustIcons(t)):e<1?(n.olarkIntegration.paxFunctions.paxNumber=1,n.olarkIntegration.paxFunctions.adjustIcons(t)):(n.olarkIntegration.paxFunctions.paxNumber=e,n.olarkIntegration.paxFunctions.adjustIcons(t))},addPax:function(e){var t=e.find(".number").filter(".plus");t.addClass("disabled"),n.olarkIntegration.paxFunctions.paxNumber+=1,t.removeClass("disabled"),n.olarkIntegration.paxFunctions.adjustIcons(e)},removePax:function(e){if(!(n.olarkIntegration.paxFunctions.paxNumber<=1)){var t=e.find(".number").filter(".minus");t.addClass("disabled"),n.olarkIntegration.paxFunctions.paxNumber-=1,t.removeClass("disabled"),n.olarkIntegration.paxFunctions.adjustIcons(e)}},adjustIcons:function(e){var t=e.find(".number");e.find("input").val(n.olarkIntegration.paxFunctions.paxNumber),t.removeClass("grey"),1===n.olarkIntegration.paxFunctions.paxNumber&&t.filter(".minus").addClass("grey"),n.olarkIntegration.paxFunctions.paxNumber===n.olarkIntegration.paxFunctions.paxMax&&t.filter(".plus").addClass("grey")}},setShouldShowDates:function(e,t){var o=e&&!!!t;n.olarkIntegration.showDates=o},startEnquiryDialog:function(t,o,a){var i=t;if(i){var r="contact"===a;n.olarkIntegration.setShouldShowDates(!0,r)}else i=n.olarkIntegration.defaultTour;if(n.initialized)$(".ask_link").magnificPopup("open");else{var s={id:i.id};i.type&&(s.type=i.type),e.sendRequest("/api/popup/ask-question",s,(function(t){$("body").append(t.component),n.olarkIntegration.texts=t.texts,window.olark&&olark("api.box.shrink"),o&&$("footer .olark").html(o);var r=$("#ask_popup form");r.submit((function(e){e.preventDefault(),n.olarkIntegration.askSubmit($(e.currentTarget),i)}));var c,l,u=r.parents("#ask_popup").hasClass("river-cruise"),d=u||7===t.info.operatorType;(n.olarkIntegration.setShouldShowDates(n.olarkIntegration.showDates,d),a)&&("contact"===a?(c="",l="Contact Page"):u?(c=" - Cruise Quote",l=$("main h1").html().trim()):(c=" - Float button",l="tdp"===e.parameters.page_type?$("main h1").html():"Other"),e.sendGoogleEvent("Ask A Question","Ask a question open".concat(c),l));u&&(r.find('select[name="date"]').change((function(t){t.preventDefault();var n=$(t.currentTarget),o=r.find(".stateroom");if(o.find("img").remove(),o.find(".rooms").removeClass("active"),o.find(".rooms.select option").not('[value="0"]').remove(),"0"!==n.val()){var a=n.val();o.append('<img class="l" src="/im/r/pw/tr-loader-small.gif">'),e.sendRequest("/api/popup/get-accomodations",{id:i.id,date:a},(function(e){"OK"===e.status&&e.accomodations.length>0?($.each(e.accomodations,(function(e,t){var n=t.price<0?"-":"+";o.find(".rooms.select select").append('<option value="'.concat(t.name_original,'">').concat(t.name," (").concat(n).concat(r.data("currency-symbol")).concat(Math.abs(t.price),")</option>"))})),o.find(".rooms.select").addClass("active")):o.find(".rooms.labels").addClass("active"),o.find("img").remove()}))}})),n.olarkIntegration.paxFunctions.initPax(r));window.tracker&&tracker("appendParameters",s.parameters||[]);var p=$("#ask_popup .js-aa-btn--submit"),m=!0;e.parameters.useIOSPopupFix&&(m=!1),e.lib.init("popup",(function(){var t=$(".ask_link"),o=null;t.magnificPopup({closeOnBgClick:!0,closeMarkup:'<div title="'.concat(n.olarkIntegration.texts.close,'" class="close mfp-close"></div>'),mainClass:"ask-popup",fixedContentPos:m,callbacks:{open:function(){e.handleMagnificPopupHistory.openPopup(),i.forceEnqiry||(o=setInterval((function(){p.text(p.data("button-text"))}),500))},close:function(){e.handleMagnificPopupHistory.closePopup(),clearInterval(o),$(".ask_link, #ask_popup").remove()}}}),t.magnificPopup("open")}))}))}}},this.olark={visitorInfo:[],initiate:function(){if(n.olark.shouldBeEnabled()){var e=$("footer"),t=e.data("olark-initial");e.append('<a class="olark hid olark-tr-placeholder" data-reactid=".0.2"><p class="olark-button-text" data-reactid=".0.2.2">'.concat(t,"</p></a>"))}},show:function(){var t=$("footer .olark");e.func.getCookie("olark_active")?(t.remove(),n.olark.load()):n.hubspot.isActive()?n.hubspot.load((function(){return t.remove()})):t.removeClass("hid").on("click",(function(e){n.hubspot.isEnabled()?n.hubspot.load((function(){return t.remove()})):($(e.currentTarget).html($("footer").data("olark-wait")),n.olark.expand())}))},shouldBeEnabled:function(){if(e.parameters.disabledOlark)return!1;var t=e.lsIsAvailable()&&null!==localStorage.getItem("olark.isAvailable"),n=e.parameters&&["serp","tdp"].indexOf(e.parameters.page_type)>-1,o=e.parameters.is_olark_shown;return!!(t||n||o)},isAvailable:!1,isOlarkAvailable:function(){return"undefined"!=typeof forceOlarkStatus?!!forceOlarkStatus:n.olark.isAvailable},setupLocalization:function(){return void 0!==window.trConfig.domainUrl&&"de"===window.trConfig.domainUrl?(olark.configure("system.localization","de-DE"),void olark("api.box.setLocale","de-DE")):void 0!==window.trConfig.domainUrl&&"nl"===window.trConfig.domainUrl?(olark.configure("system.localization","nl-NL"),void olark("api.box.setLocale","nl-NL")):(olark.configure("system.localization","en-EN"),void olark("api.box.setLocale","en-EN"))},isExpand:!1,isLoaded:!1,isReady:!1,load:function(){if(n.olark.shouldBeEnabled()){var t,o,a,i,r,s;e.lsIsAvailable()&&null!==localStorage.getItem("olark.isAvailable")&&(n.olark.isAvailable=!!localStorage.getItem("olark.isAvailable")),window.olark||(t=window,o=document,a="static.olark.com/jsclient/loader.js",t.olark||(i="script",s=o.createElement(i),i=o.getElementsByTagName(i)[0],s.async=1,s.src="//".concat(a),i.parentNode.insertBefore(s,i),(s=t.olark=function(){r.s.push(arguments),r.t.push(+new Date)}).extend=function(e,t){s("extend",e,t)},s.identify=function(e){s("identify",r.i=e)},s.configure=function(e,t){s("configure",e,t),r.c[e]=t},r=s._={s:[],t:[+new Date],c:{},l:a})),olark.identify(window.olarkId),n.setupLocalization(),olark("api.chat.onBeginConversation",(function(){e.sendGoogleEvent("Olark_Chat","Olark Begin Conversation",window.location.href)}));var c=setInterval((function(){"function"==typeof olark&&(clearInterval(c),olark("api.chat.onReady",(function(){n.olark.isReady=!0,$("footer .olark").remove(),$(document).trigger("olark:loaded",[!0])})),olark("api.chat.onOperatorsAvailable",(function(){e.lsIsAvailable()&&localStorage.setItem("olark.isAvailable",!0),n.olark.isAvailable=!0,e.sendGoogleEvent("Olark_Chat","Operators are available",window.location.href,{nonInteraction:!0})})),olark("api.chat.onOperatorsAway",(function(){e.lsIsAvailable()&&localStorage.setItem("olark.isAvailable",!1),n.olark.isAvailable=!1,e.sendGoogleEvent("Olark_Chat","Operators are away",window.location.href,{nonInteraction:!0})})),olark("api.box.onExpand",(function(){n.olark.isExpand=!0,!n.olark.isOlarkAvailable()||$("body").data("disable-olark")?(setTimeout((function(){window.olark&&olark("api.box.shrink")}),1),n.olarkIntegration.startEnquiryDialog()):e.sendRequest("/api/travellers/logged-data",{},(function(e){"OK"===e.status&&e.travellerData&&n.olark.fillTravellerData(e.travellerData.email,e.travellerData.firstName,e.travellerData.lastName,e.travellerData.phoneNumber)}))})),olark("api.chat.onOfflineMessageToOperator",(function(){e.sendGoogleEvent("Olark_Chat","Offline message sent",window.location.href,{nonInteraction:!0})})),olark("api.chat.onMessageToOperator",(function(){var e=!1;olark("api.visitor.getDetails",(function(t){t.pageCountForThisVisit>=3||e||"undefined"!=typeof tracker&&(e=!0,tracker("addEvent","tracker","email",t.emailAddress,{}))}))})),olark("api.box.onShrink",(function(){n.isExpand=!1})),olark("api.chat.onBeginConversation",(function(){var e=Date.now()+Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15);olark("api.visitor.updateCustomFields",{internalChatId:e,customerLocale:window.trConfig.customerLocale}),olark("api.visitor.getDetails",(function(t){var o=$.trim(t.emailAddress),a=$.trim(t.fullName);o&&$.ajax({url:"/travellers/olark_traveller_information",data:{email:t.emailAddress,tour_id:n.olarkIntegration.defaultTour.id,visitor_name:a,phone:t.phoneNumber,internal_chat_id:e},dataType:"json",type:"POST",success:function(e){if("OK"===e.status){window.tracker&&tracker("appendParameters",e.parameters||[]);var t=[],o=e.information;if(o.traveller&&"id"in o.traveller?n.olark.visitorInfo.push("Travel Credits: ".concat(o.traveller.referral_balance)):n.olark.visitorInfo.push("Travel Credits: Not a customer yet"),o.traveller&&"location"in o.traveller&&n.olark.visitorInfo.push("Customer Location: ".concat(o.traveller.location)),o.traveller&&"medical_conditions"in o.traveller&&n.olark.visitorInfo.push("Medical Condition: ".concat(o.traveller.medical_conditions)),o.traveller&&"age"in o.traveller&&n.olark.visitorInfo.push("Age: ".concat(o.traveller.age)),o.enquiries&&(n.olark.visitorInfo.push("# of Enquiries : ".concat(o.enquiries.length)),o.enquiries.length)){var a=["","Availability request","Brochure request","Ready to book","Have a question","Hold 48 hours"];t[t.length]="CUSTOMER HAS FOLLOWING ENQUIRIES / BOOKINGS:",$.each(o.enquiries,(function(e,n){if(e<10){var o,i=parseInt(n.status,10);o=2===n.approval_status?"Waiting for user approval":3===i?"Confirmed booking":7===i?"Expired hold":8===i?"Declined hold":6===i||4===i?"Declined":"Initial enquiry",t[t.length]="".concat(n.id," - ").concat(n.added_formated," - ").concat(a[parseInt(n.type,10)]," - ").concat(o," - ").concat(n.pax," pax - ").concat(n.full_price).concat(n.per_person_currency," - ").concat(n.tour_name," - https://www.tourradar.com/admin/enquiries/go/").concat(n.id)}}))}if(o.pdf&&(n.olark.visitorInfo.push("# of Downloaded PDF : ".concat(o.pdf.length)),o.pdf.length&&(t[t.length]="CUSTOMER HAS THE FOLLOWING PDF DOWNLOADS:",$.each(o.pdf,(function(e,n){e<10&&(t[t.length]="".concat(n.time_create," - ").concat(n.name," - //www.tourradar.com/t/").concat(n.tour_id))})))),o.traveller&&"inviter"in o.traveller&&(t[t.length]="CUSTOMER DETAILS:",t[t.length]="Invited by : ".concat(o.traveller.inviter.name," - //www.tourradar.com/admin/travellers/edit/").concat(o.traveller.inviter.id)),olark("api.chat.updateVisitorStatus",{snippet:n.olark.visitorInfo}),t.length){var i=0;$.each(t,(function(e,t){setTimeout((function(){olark("api.chat.sendNotificationToOperator",{body:t})}),i),i+=120}))}}}})}))})))}),10)}},fillTravellerData:function(e,t,n,o){if(e&&olark("api.visitor.updateEmailAddress",{emailAddress:e}),t||n){var a="";t&&n?a="".concat(t," ").concat(n):t?a=t:n&&(a=n),olark("api.visitor.updateFullName",{fullName:a})}o&&olark("api.visitor.updatePhoneNumber",{phoneNumber:o})},open:function(){var t=$("footer .olark");t.length?t.click():(n.setupLocalization(),olark("api.box.expand"),e.func.setCookie({name:"olark_active",value:"1",expires:86400,path:"/"}))},expand:function(){n.olark.load(),n.setupLocalization(),olark("api.box.expand"),e.func.setCookie({name:"olark_active",value:"1",expires:86400,path:"/"}),e.sendGoogleEvent("Olark_Chat","Olark Widget Open",window.location.href)}},this.elems=function(){e.byWindowAction(["scroll","load"],(function(){t.isElementOnScreen(".asta")&&($("body").hasClass("mob")?$(".asta div").addClass("a"):$(".asta").addClass("a"))}))},this.pressTracking=function(){$(".js-footer__image-anchor").on("click",(function(t){var n=$(t.currentTarget),o=n.attr("href");"undefined"!==_typeof(o)&&!1!==o&&e.sendGoogleEvent("Footer - Press",o,"Index: ".concat(n.index()+1))}))},this.rlkTracking=function(){$(".js-rlk__link").on("click",(function(t){var n=$(t.currentTarget),o=n.closest(".js-rlk__item"),a=n.closest(".js-rlk__list").prev(".js-rlk__title").text().trim(),i=n.attr("href");"undefined"!==_typeof(i)&&!1!==i&&e.sendGoogleEvent("Footer - ".concat(a),i,"Index: ".concat(o.index()+1))}))},this.socialTracking=function(){$("body").on("click",".js-social__link",(function(t){var n=$(t.currentTarget),o=n.attr("href");"undefined"!==_typeof(o)&&!1!==o&&e.sendGoogleEvent("Footer Social sharing",o,"Index: ".concat(n.index()+1))}))},this.travellerEnquiryStore=new AOTravellerEnquiryStore(e)}var func=new Func,common=new Common(func),footer=new Footer(common,func),header=new Header(common,footer),initializeGenericTopBanner=function(){var e=$(".js-am-common-generic-top-banner");e.length&&new AMCommonGenericTopBanner(common,e).initiate()},initializeSaleTopBanner=function(){$(".js-am-common-sale-top-banner").length&&new AMCommonSaleTopBanner(common,".js-am-common-sale-top-banner").initiate()};if(common.initiateFallbackBackgroundImages(),common.initLazyLoad(),common.initWindowAction(),common.initUserInteraction(),common.initParameters(),common.cleanURL(),common.csrf.init(),common.pwa.initiate(),common.func.bodyScrollLock.initiate(),common.logBrokenImages(),$("header").length&&"review"!==common.parameters.page_type&&(header.menu.initiate(),header.search.initiate(),header.topBanner.initiate(),header.ups.initiate(),header.heartIcon.initiate(),header.profileWishlist.initiate()),$("footer").length&&"review"!==common.parameters.page_type){if(footer.links.initiate(),footer.subscribe.initiate(),footer.social.initiate(),footer.hubspot.initiate(),common.parameters.disabledOlark||"tdp"===common.parameters.page_type&&("tdp"!==common.parameters.page_type||$("body").hasClass("mob"))||footer.olark.initiate(),footer.elems(),"#chat"===window.location.hash&&!common.parameters.disabledOlark){footer.olark.load();var OlarkChatLoaded=setInterval((function(){"function"==typeof olark&&(clearInterval(OlarkChatLoaded),_this5.setupLocalization(),olark("api.box.expand"))}),10)}$(".js-language-selector-title").on("click",(function(){var e=$(".js-language-selector-arrow");if(e.length&&(e.width()||e.height()||"none"!==e.css("display"))){var t=$(".js-language-selector");t.width()||t.height()||"none"!==t.css("display")?(e.addClass("bottom"),t.css("display","none")):($("footer .rlk div").removeClass("open"),$("footer .rlk div .arrow").addClass("bottom"),e.removeClass("bottom"),t.css("display","block"))}})),$(".js-language-selector").on("click",(function(){$(".js-language-selector-list").toggleClass("hid"),$(".js-language-selector-list").hasClass("hid")?$(document).off("click.language-selector"):$(document).on("click.language-selector",(function(e){var t=$(e.target);t.hasClass("js-language-selector")||t.hasClass("js-language-selector-list")||($(".js-language-selector-list").toggleClass("hid"),$(document).off("click.language-selector"))}))})),$(".js-language-selector-list li").on("click",(function(e){var t=$(e.target).find("a");t.length&&(document.location.href=t.attr("href"))})),footer.pressTracking(),footer.rlkTracking(),footer.socialTracking()}if(window.location.search.length>0){var adTrackingName=common.removeQueryStringParam("_track_ad");adTrackingName&&adTrackingName.length>0&&(common.sendDataLayerEvent({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:adTrackingName,name:adTrackingName,position:"serp-operator-id"}]}}}),common.sendGoogleEvent("Internal Promotions","click",adTrackingName))}common.parameters.async_css&&common.loadAsyncCss(common.parameters.async_css),initializeGenericTopBanner(),initializeSaleTopBanner(),window.pwResetHubspot=function(){window.HubSpotConversations&&window.HubSpotConversations.widget&&window.HubSpotConversations.widget.remove({resetWidget:!0})};
"use strict";function MainSearch(){var e,t,o,n,a,i,c,s,r=this,l=!1,u=!1,m=!1,d=!1,p="";this.init=function(e){r.initiate(e)},this.initiateSearch=function(a){(t=e.find("input.a")).on("keydown",common.func.debounce(r.onKeyDown,100)),t.tinyAutocomplete({url:"https://3VPAXN8SSR-dsn.algolia.net/1/indexes/*/queries",method:"post",getRequestData:function(e){var t=$.param({query:e,attributesToRetrieve:"name,type_name,operator_name,url",attributesToHighlight:"",hitsPerPage:5}),o=[],n=!!a,i=n&&"all"===a[0];return o=!n||i?[{indexName:window.trConfig.algolia.indexes.serp,params:t},{indexName:window.trConfig.algolia.indexes.operators,params:t},{indexName:window.trConfig.algolia.indexes.tours,params:t}]:r.generateCustomRequestArray(a,t),JSON.stringify({requests:o,strategy:"stopIfEnoughMatches"})},ajaxSettings:{type:"post",contentType:"application/json",dataType:"json",beforeSend:function(e){e.setRequestHeader("X-Algolia-API-Key",window.trConfig.algolia.api_key),e.setRequestHeader("X-Algolia-Application-Id",window.trConfig.algolia.app_id)}},showNoResults:!0,itemTemplate:'<li class="autocomplete-item" data-url="{{url}}" data-type="{{eventType}}"><div>{{title}}</div><span>{{type}}</span></li>',noResultsTemplate:'<li class="autocomplete-item" data-url="0" data-type=""><div>Search for \'{{title}}\'</div></li>',onSelect:function(t){var n=$(t),a=n.data("url"),i=n.data("type");if(a=common.func.stripTags(a),i=common.func.stripTags(i),p=e.find("input").val(),a&&n.hasClass("autocomplete-item")){if(0!==a){var c=n.html().replace(/<span>(.*)<\/span>/g,"").replace("amp;","");c=common.func.stripTags(c),e.find("input.a").val(c).data("url",a),u=e.find("input.a").val(),common.sendGoogleEvent("Main Search","Select ".concat(common.func.ucfirst(i.toLowerCase())),u)}o.find(".months .active").length||o.click()}else e.find("input.a").val("").data("url","")}}).on("beforerequest",(function(){e.find(".autocomplete .l").length||e.find(".autocomplete").append('<img class="l" src="/im/r/pw/tr-loader-small.gif">')})).on("receivedata",(function(t,o,n){m=!1,d=!1;for(var a=[],i=0;i<n.results.length;i+=1)for(var c=n.results[i].hits,s=0;s<c.length;s+=1){var l="MIX",u="MIX";c[s].type_name?l=u=c[s].type_name:n.results[i].index===window.trConfig.algolia.indexes.operators?l=u="Operator":n.results[i].index===window.trConfig.algolia.indexes.tours&&(l=c[s].operator_name,u="Tour"),a.push({title:c[s].name,url:c[s].url,type:l,eventType:u}),m||(m=c[s].url,d=c[s].name)}o.json=a,e.find(".autocomplete img.l").remove(),r.hideDefaultSuggestions()})).on("keydown keypress change focus input",(function(t){if(!($(t.currentTarget).val().length>0)){var o=e.find(".autocomplete-list:not(.pre)");o.length&&"none"!==o.css("display")&&o.remove(),e.find(".autocomplete .pre").show(),r.monthSelector&&r.monthSelector.hideMonths()}})).on("keydown",(function(t){p="";var a=t.keyCode?t.keyCode:t.which;if(13===a||9===a){r.monthSelector&&r.monthSelector.hideMonths();var i=e.find(".autocomplete .autocomplete-list").last(),c=i.find(".autocomplete-item.active").index();13===a&&("none"!==i.css("display")?-1===c&&(t.stopPropagation(),i.find(".autocomplete-item:first-child").click(),n.click()):n.click()),9===a&&(t.preventDefault(),o.click())}}))},this.generateCustomRequestArray=function(e,t){for(var o=[],n=0;n<e.length;n+=1){var a={},i=e[n];a.indexName=window.trConfig.algolia.indexes[i],a.params=t,o.push(a)}return o},this.initiate=function(h){e=h.$searchInput,t=e.find("input.a"),o=h.$monthBlock,n=h.$ctaButton,e.find("input").val(""),"desktop"===common.parameters.deviceType&&common.func.isElementOnScreen(t)&&!h.disableFocus&&t.focus(),t.one("focus click keydown input",(function(){l||(l=!0,common.lib.init("autocomplete",(function(){r.initiateSearch(h.searchIndexes);var o=$(".js-ao-clp-hero-with-search__where-label"),n=$(".autocomplete");o.length&&n.length&&n.append(o.detach()),$(document).mouseup((function(t){"none"===e.find(".autocomplete-list").css("display")||e.find(".autocomplete").find(t.target).length||r.hideDefaultSuggestions()})),t.focus((function(t){var o=$(t.currentTarget);o.val()||(o.data("url",""),e.find(".autocomplete .pre").show()),r.monthSelector&&r.monthSelector.hideMonths()})),t.focus(),common.sendRequest("/api/homepage/load",{action:"preload_search"},(function(t){"OK"===t.status&&(e.find(".autocomplete").append(t.component),r.monthSelector&&r.monthSelector.hideMonths(),a=e.find(".autocomplete-list.pre"),i=a.find(".autocomplete-item").length,c=-1)}))})))})),o&&e.data("month")&&setTimeout((function(){o.click()}),100);var f=o.find("input");f.click((function(){r.monthSelector||common.sendRequest("/api/homepage/load",{action:"preload_search_months"},(function(e){var t=e.status,n=e.component;"OK"===t&&(o.append(n),r.monthSelector=new AMCommonMonthSelector(common),r.monthSelector.initiate({$container:o,$input:f,gaCategory:"Main Search"}),r.monthSelector.getValue()&&r.monthSelector.isVisible()&&r.hideDefaultSuggestions(),r.monthSelector.showMonths())}))})),n.click((function(){if(h.defaultDestinationSelect&&(u=h.defaultDestinationSelect),p||(p=t.val()),r.monthSelector&&r.monthSelector.hideMonths(),""===t.val().trim())return t.focus().addClass("shake").data("url",""),common.sendGoogleEvent("Main Search","Search","Error"),void setTimeout((function(){t.removeClass("shake")}),1e3);var e=t.data("url");e&&u===t.val()||m&&(e=m,u=d,t.val(d));var o=r.monthSelector?r.monthSelector.getValue():"";if(e&&u===t.val()){common.sendGoogleEvent("Main Search","Search","Success - ".concat(p)),r.groupTypeCheckbox();var n=s?"".concat(o?",":"#","group_type=").concat(s):"";window.location.href="/".concat(e).concat(o?"#month=".concat(o):"").concat(n||"")}else u=!1,r.redirectToResultsPage()}))},this.redirectToResultsPage=function(){var e=t.val(),o=e+(r.monthSelector?r.monthSelector.getValue():"");common.sendGoogleEvent("Main Search","Search"," No results - ".concat(e)),window.location.href="/search?q=".concat(o)},this.hideDefaultSuggestions=function(){a&&(a.hide(),a.find(".active").removeClass("active"),c=-1)},this.onKeyDown=function(e){if(a&&"none"!==a.css("display"))switch(e.preventDefault(),e.stopPropagation(),e.keyCode){case 38:r.previousItem();break;case 40:r.nextItem();break;case 13:r.onClickEnter();break;case 27:r.onClickEsc()}else c=-1},this.onClickEsc=function(){a.hide(),c=-1},this.onClickEnter=function(){a.find(".autocomplete-item.active").click()},this.nextItem=function(){(c+=1)>=i&&(c=0),r.renderActiveItem()},this.previousItem=function(){(c-=1)<0&&(c=i-1),r.renderActiveItem()},this.renderActiveItem=function(){a.find(".active").removeClass("active"),a.find(".autocomplete-item").eq(c).addClass("active")},this.groupTypeCheckbox=function(){var e=[],t=[],o=$("".concat(".js-ao-clp-hero-with-search__group-type-checkbox-input",":checked"));o.length&&(o.forEach((function(o){t.push($(o).attr("id")),e.push($(o).attr("name"))})),s=t.length>1?t.join(":"):t[0],common.sendGoogleEvent("Main Search",e.length>1?e.join(","):e[0]))}}
"use strict";function AMCommonMonthSelector(e){var t=this,n="js-am-month-selector__month",a="am-month-selector__popup",i="am-month-selector__month--active",r="hid",o="valid";this.common=e,this.isInline=!1,this.values=[],this.initiate=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.inline,a=void 0!==n&&n,i=e.allowMultiple,r=void 0!==i&&i,o=e.$container,s=void 0===o?$("body"):o,l=e.$input,c=e.gaCategory;t.allowMultiple=r,t.initiateWrapper({$container:s,inline:a}),t.initiateField({$input:l||s.find(".js-am-month-selector__input")}),t.initiateMonths({gaCategory:c}),t.initiateYears()},this.isVisible=function(){return!t.$wrapper.hasClass(r)},this.getValue=function(){return t.values.join(":")},this.initiateWrapper=function(e){var n=e.$container,i=e.inline;t.$wrapper=n.find(".js-am-month-selector__wrapper"),i&&(t.isInline=!0,t.$wrapper.removeClass(a).removeClass(r))},this.initiateField=function(e){var n=e.$input;t.$input=n,t.$input.on("click",(function(e){e.stopPropagation(),t.$wrapper.hasClass(r)?t.showMonths():t.hideMonths()}))},this.initiateYears=function(){t.$currentYear=t.$wrapper.find(".js-am-month-selector__current-year");var e=parseInt(t.$currentYear.text(),10);t.minYear=t.$currentYear.data("min")||e,t.maxYear=t.$currentYear.data("max")||e,t.currentYear=e,t.$prevYearButton=t.$wrapper.find(".js-am-month-selector__previous-year"),t.$prevYearButton.on("click",t.goToPreviousYear),t.$nextYearButton=t.$wrapper.find(".js-am-month-selector__next-year"),t.$nextYearButton.on("click",t.goToNextYear)},this.initiateMonths=function(e){var a=e.gaCategory;t.$months=t.$wrapper.find(".".concat(n));var r=$(".".concat(i));r.length&&(t.allowMultiple?r.each((function(e,n){t.selectMonth($(n))})):t.selectMonth(r.first())),t.$months.find("button").on("click",(function(e){var r=$(e.currentTarget).closest(".".concat(n));r.hasClass(i)?t.deselectMonth(r):(t.selectMonth(r),a&&t.common.sendGoogleEvent(a,"Select Month",r.data("value"))),t.isInline||t.hideMonths()}))},this.selectMonth=function(e){var n=e.data("value");t.allowMultiple?t.values.push(n):(t.values=[n],t.$months.removeClass(i)),e.addClass(i);var a=e.data("label");t.$input.val(t.allowMultiple?t.getValue():a).trigger("change"),t.$input.toggleClass(o,t.values.length>0)},this.deselectMonth=function(e){e.removeClass(i),t.values=t.values.filter((function(t){return t!==e.data("value")})),t.$input.val(t.allowMultiple?t.getValue():"").trigger("change"),t.$input.toggleClass(o,t.values.length>0)},this.goToPreviousYear=function(){t.currentYear!==t.minYear&&(t.currentYear-=1,t.updateYear())},this.goToNextYear=function(){t.currentYear!==t.maxYear&&(t.currentYear+=1,t.updateYear())},this.updateYear=function(){t.$months.each((function(e,n){var a=$(n),i=parseInt(a.data("value").split("-")[1],10);a.toggleClass(r,i!==t.currentYear)})),t.$currentYear.text(t.currentYear),t.$prevYearButton.prop("disabled",t.currentYear===t.minYear),t.$nextYearButton.prop("disabled",t.currentYear===t.maxYear)},this.checkOutsideMonthsClick=function(e){return!($(e.target).closest(".".concat(a)).length>0)&&(t.hideMonths(),!0)},this.addOutsideMonthsClickListener=function(){$("body").on("click",t.checkOutsideMonthsClick)},this.removeOutsideMonthsClickListener=function(){$("body").off("click",t.checkOutsideMonthsClick)},this.showMonths=function(){t.$wrapper.removeClass(r),t.addOutsideMonthsClickListener()},this.hideMonths=function(){t.$wrapper.addClass(r),t.removeOutsideMonthsClickListener()}}
"use strict";function AOCommonNps(){var o,e,c,n,s,t,i,a,l,m,r,d=this,f="download_brochure";this.initiate=function(o,s){switch(e=o,c=s,s){case"ask_question":n="Ask a question";break;case f:n="Download Brochure"}d.collect.initiate(),d.feedback.initiate()},this.collect={initiate:function(){(s=$(".js-ao-common-nps")).length&&(t=s.find(".js-ao-common-nps__collect"),i=t.find(".js-ao-common-nps__collect-confirm"),a=t.find(".js-ao-common-nps__collect-list-score"),i.length&&i.click(d.collect.onClickConfirm),a.click(d.collect.onClickScore))},onClickConfirm:function(){var s=t.find(".js-ao-common-nps__collect-list-score.ao-common-nps__collect-list-score--active"),i=parseInt(s.data("score"),10);common.sendRequest("/api/subscribe/collect-nps",{source:c,score:i,email:e},(function(e){"OK"===e.status?(o=e.id,t.remove(),l.removeClass("ao-common-nps__feedback--hidden"),common.sendGoogleEvent("NPS","".concat(n," - Rate"),i)):"error"===e.status&&alert(e.message)}))},onClickScore:function(o){i.length&&i.prop("disabled",!1).addClass("aa-btn--primary"),a.toggleClass("ao-common-nps__collect-list-score--active",!1),$(o.currentTarget).toggleClass("ao-common-nps__collect-list-score--active",!0),i.length||d.collect.onClickConfirm()}},this.feedback={MIN_CHARACTER_LIMIT:1,initiate:function(){s.length&&(l=s.find(".js-ao-common-nps__feedback"),m=l.find(".js-ao-common-nps__feedback-reason"),r=l.find(".js-ao-common-nps__feedback-cta"),m.on("keyup",d.feedback.onKeyUp),r.click(d.feedback.onClickSubmit))},onKeyUp:function(){var o;return o=!(m.val().trim().length<d.feedback.MIN_CHARACTER_LIMIT),r.toggleClass("aa-btn--primary",o),r.prop("disabled",!o),o},onClickSubmit:function(){common.sendRequest("/api/subscribe/submit-nps-message",{id:o,message:m.val().trim()},(function(o){"OK"===o.status?(c===f&&$.magnificPopup.close(),s.remove()):"error"===o.status&&alert(o.message)}))}}}
"use strict";function AOCommonContact(){var n=this;this.EVENT_CATEGORY="Contact Us",this.EVENT_CATEGORY_HEADER="Header Contact Us",this.EVENT_ACTION_MAIN="Main popup",this.EVENT_ACTION_EXISTING_BOOKING="Existing booking",this.EVENT_ACTION_CONSIDERED_TOUR="Booking a tour",this.EVENT_ACTION_SOMETHING_ELSE="Something else",this.EVENT_ACTION_SOMETHING_ELSE_OPERATOR="Something else - Operator",this.loaded=!1,this.templates={},this.initiate=function(){var o=$("body");o.on("click",".js-contact-flow-link",(function(o){var t=o.currentTarget;n.loaded?n.renderStep("menu"):n.load(),common.sendGoogleEvent(t.dataset.eventHeader||n.EVENT_CATEGORY_HEADER,"Click",window.location.href)})),o.on("click",".js-contact_us_login_link",(function(){return n.renderBookings()})),o.on("click",".js-contact_us_popup-back",(function(){return n.renderPreviousStep()})),o.on("click",".js-contact_us_booking_link",(function(o){return n.goToBCP(o)})),o.on("click",".js-contact_us_options_link",(function(){return n.renderContactOptions()})),o.on("click",".js-contact_us_call",(function(){return n.callPhone()})),o.on("click",".js-contact_us_call_country",(function(o){return n.callCountry(o)})),o.on("click",".js-contact_us_all_numbers_link",(function(){return n.toggleAllNumbers()})),o.on("click",".js-contact_us_message",(function(o){return n.renderQuestion(o)})),o.on("click",".js-contact_us_other",(function(){return n.renderOtherOptions()})),o.on("click",".js-contact_us_operator",(function(){return n.renderOperator()}))},this.load=function(){common.lib.init("popup",(function(){n.loaded=!0,common.sendRequest("/api/contact/static",null,(function(o){var t=o.success,e=o.templates;t&&e&&($.extend(n.templates,e),n.renderStep("menu"))}))}))},this.loadBookings=function(){common.sendRequest("/api/contact/bookings",null,(function(o){var t=o.success,e=o.redirectUrl,c=o.html;t&&(e?window.location.href=e:n.renderStep("bookings",c))}))},this.renderStep=function(o,t){var e=t||n.templates[o];$("main").append(e),$.magnificPopup.close(),n.openMagnificPopup("js-contact-us-".concat(o))},this.renderPreviousStep=function(){var o=$(".js-contact_us_popup-back");if(o){var t=o.data("target"),e=o.data("flow");n.renderStep(t),common.sendGoogleEvent(n.EVENT_CATEGORY,e,"Click back")}},this.renderBookings=function(){if(common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_MAIN,"Existing booking"),common.logged)n.loadBookings();else{n.renderStep("login");var o="".concat(common.getCdnUrl(),"include/pw/_common/signup.min.js?v=").concat(common.signup.version);common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_EXISTING_BOOKING,"Login popup shows"),common.loadJs(o,(function(){$(".login_popup").show(),(new Signup).initiate((function(){common.logged=!0,n.loadBookings()}))}))}},this.renderQuestion=function(o){$("#ask_popup").remove(),$.magnificPopup.close(),footer.olarkIntegration.startEnquiryDialog();var t=$(o.currentTarget).data("action");common.sendGoogleEvent(n.EVENT_CATEGORY,t,"Send a message")},this.openMagnificPopup=function(n){$("#olark-container").addClass("olark-hide"),$(".olark-launch-button").addClass("olark-hide"),$.magnificPopup.open({items:{src:"#".concat(n)},closeOnBgClick:!0,mainClass:"contact-us",fixedContentPos:!1,autoFocusLast:!1,callbacks:{close:function(){$("#olark-container").removeClass("olark-hide"),$(".olark-launch-button").removeClass("olark-hide"),$("#".concat(n)).remove(),$(".darken").click()}}},0)},this.renderContactOptions=function(){common.sendRequest("/api/contact/options",null,(function(o){o.success&&n.renderStep("contact_options",o.html)})),common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_MAIN,n.EVENT_ACTION_CONSIDERED_TOUR)},this.renderOtherOptions=function(){n.renderStep("other"),common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_MAIN,"Something else")},this.renderOperator=function(){n.renderStep("operator"),common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_SOMETHING_ELSE,"Operator")},this.sendEmailClickEvent=function(){common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_SOMETHING_ELSE_OPERATOR,"Send email")},this.callPhone=function(){common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_CONSIDERED_TOUR,"Call")},this.callCountry=function(o){var t=$(o.currentTarget).data("country");common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_CONSIDERED_TOUR,t)},this.toggleAllNumbers=function(){var o=$(".js-contact_us_all_numbers_box");o.toggle();var t=o.data("hide-text"),e="See all local numbers";null==o[0].offsetParent&&(t=o.data("show-text"),e="Hide local numbers"),$(".js-contact_us_all_numbers_link").text(t),common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_CONSIDERED_TOUR,e)},this.goToBCP=function(o){var t=$(o.currentTarget).data("tour");common.sendGoogleEvent(n.EVENT_CATEGORY,n.EVENT_ACTION_EXISTING_BOOKING,t.toString())}}
"use strict";function ContentLandingPage(){var n=this;this.initiate=function(){common.loadAsyncCss(common.parameters.async_css),common.byUserInteraction("initiate-clp-tooltips",n.initiateTooltipsIfPresentOnPage);for(var t=window.clpModules.length,o=0;o<t;o+=1)window.clpModules[o].initiate();common.parameters.is_olark_shown&&footer.olark.shouldBeEnabled()&&footer.olark.show()},this.initiateTooltipsIfPresentOnPage=function(){$(".ttip").length>0&&common.lib.init("tooltip")}}window.clpModules=[],window.addEventListener("load",(function(){(new ContentLandingPage).initiate()}));
"use strict";function TravelCreditsHeaderBox(){var e=this,o=!1,n="Header Travel Credits",t=".js-ao-header-travel-credits",r=".js-ao-header-travel-credits__infobox",i=".js-ao-header-travel-credits__infobox-close";this.initiate=function(){$(t).length&&(common.sendGoogleEvent(n,"Show","",{nonInteraction:!0}),$(i).length?e.userIteractionMobile():e.userIteractionDesktop())},this.userIteractionMobile=function(){$("body").on("click",t,(function(e){$(e.currentTarget).find(r).removeClass("hid"),common.sendGoogleEvent(n,"Click","Pop over"),o=!0})),$("body").on("click",i,(function(e){$(e.currentTarget).parents(r).addClass("hid")}))},this.userIteractionDesktop=function(){$("body").on("mouseover",t,(function(e){$(e.currentTarget).find(r).removeClass("hid"),o||(common.sendGoogleEvent(n,"Hover","On hover pop over"),o=!0)})).on("mouseout",t,(function(e){$(e.currentTarget).find(r).addClass("hid")}))}}"use strict";function AOClpHeroWithSearch(){var e=this,i=null,n=null,t=null,o=null,a=!1;this.initiate=function(){i=$(".js-ao-clp-hero-with-search__search-wrapper"),n=$(".js-ao-clp-hero-with-search__when-wrapper"),t=$(".js-ao-clp-hero-with-search__when-cta"),0!==i.length&&(e.initiateInfobox(),e.initiateMainSearch(),e.initiateTracking())},this.initiateMainSearch=function(){o=i.data("indexes"),(new MainSearch).init({$searchInput:i,searchIndexes:o,$monthBlock:n,$ctaButton:t})},this.initiateTracking=function(){e.initiateUspTracking(),e.initiateHeroImageTracking(),e.initiateWhereInputTypeTracking()},this.initiateUspTracking=function(){var e=$(".js-ao-clp-hero-with-search__usps-item");0!==e.length&&e.on("click",(function(e){var i=$(e.currentTarget),n=i.find(".js-ao-clp-hero-with-search__usps-item-title").text().trim();common.sendGoogleEvent("USP",n,"Index: ".concat(i.index()+1))}))},this.initiateHeroImageTracking=function(){$(".js-ao-clp-hero-with-search__text-wrapper").on("click",(function(){return common.sendGoogleEvent("Hero image","Click on hero image")}))},this.initiateWhereInputTypeTracking=function(){var e=$(".js-ao-clp-hero-with-search__where-input");e.on("focus",(function(i){var n=!1;i.stopPropagation(),e.unbind("keydown"),e.on("keydown",(function(e){e.stopPropagation(),n||8===e.keyCode||46===e.keyCode||(common.sendGoogleEvent("Main Search","Started typing"),n=!0)}))}))},this.initiateInfobox=function(){var e=".js-ao-clp-hero-with-search__group-type-info",i=".js-ao-clp-hero-with-search__group-type-infobox";$("body").on("mouseover",e,(function(){$(i).removeClass("hid"),a||common.sendGoogleEvent("Main Search","Group type info popup"),a=!0})).on("mouseout",e,(function(){$(i).addClass("hid")}))}}window.clpModules.push(new AOClpHeroWithSearch);"use strict";function AOClpTourFinder(){var t=this,e="Tour Finder",o=".js-ao-clp-tour-finder",n=".js-ao-clp-tour-finder__switch",a=".js-ao-clp-tour-finder__modal",i=".js-ao-clp-tour-finder__main-button",c=".js-ao-clp-tour-finder__step",l=".js-ao-clp-tour-finder__step-item",r=".js-ao-clp-tour-finder__steps-labels-item",s=".js-ao-clp-tour-finder__button--next",d=".js-ao-clp-tour-finder__button--back",p=".js-ao-clp-tour-finder__button--search",u="js-ao-clp-tour-finder__step-item--selected",f="ao-clp-tour-finder__main-button";window.storedSelection={},window.ctaUrl="";var h=!1,_=!1,m=null,b=null,v=1,C=null;this.initiate=function(){m=$(c).length,C=$(i),b=$(".js-ao-clp-tour-finder__step--first"),0!==$(o).length&&$("body").on("click",i,(function(e){var o=$(e.currentTarget);o.hasClass("".concat(f,"--active"))||(o.addClass("".concat(f,"--active")),o.siblings().removeClass("".concat(f,"--active")),_=!!$(".js-ao-clp-tour-finder__main-button-tf").hasClass("".concat(f,"--active")),t.initiateModal(),t.toggleTourFinder(_),common.sendGoogleEvent("Main Search","Select","".concat(_?"Tour Finder":"Search")))}))},this.initiateModal=function(){h||((new AOClpTourFinderDeparture).initiate(),(new AOClpTourFinderDuration).initiate(),(new AOClpTourFinderPrice).initiate(),t.appendStepLabels(),t.onNextClick(),t.onBackClick(),t.onSearchClick(),t.onStepItemClick(),t.updateStepLabel(),t.closeModalMobile(),t.onOutsideClick(),$(s).attr("disabled","disabled"),h=!0)},this.closeModalMobile=function(){var e=".js-ao-clp-tour-finder__mobile-arrow";0!==$(e).length&&$("body").on("click",e,(function(){C.toggleClass("".concat(f,"--active")),t.toggleTourFinder(!1)}))},this.onOutsideClick=function(){$("body").on("click",".js-ao-clp-tour-finder__background",(function(e){e.stopPropagation();var o=$(e.currentTarget);o.closest(a).length||o.hasClass("ao-clp-tour-finder__modal")||o.closest(n).length||o.hasClass("ao-clp-tour-finder__switch")||(C.toggleClass("".concat(f,"--active")),t.toggleTourFinder(!1))}))},this.toggleTourFinder=function(t){$(o).toggleClass("ao-clp-tour-finder--active",t),$(o).siblings().toggleClass("invis",t),$(a).toggleClass("hid",!t),$(".js-ao-clp-tour-finder__background").toggleClass("hid",!t),$("body").css("overflow",t?"hidden":"auto"),t&&!common.parameters.is_mobile&&common.func.smoothScroll({to:$(n).offset().top-50,duration:300})},this.onStepItemClick=function(){0!==$(l).length&&$("body").on("click",l,(function(e){var o="ao-clp-tour-finder__step-item--selected",n=$(e.currentTarget),a=n.data("option"),i=!!n.closest(c).data("multiselect"),l=n.hasClass(o);i||n.siblings().removeClass("".concat(u," ").concat(o)),a||n.siblings().removeClass("".concat(u," ").concat(o)),n.siblings(".js-ao-clp-tour-finder__step-item:not([data-option])").removeClass("".concat(u," ").concat(o)),n.toggleClass("".concat(u," ").concat(o),!l),t.optionValidation()}))},this.appendStepLabels=function(){for(var t=$(".js-ao-clp-tour-finder__steps-labels"),e=1;e<=m;e+=1)t.append('<li class="js-ao-clp-tour-finder__steps-labels-item ao-clp-tour-finder__steps-labels-item" data-label="'.concat(e,'">').concat(e,"</li>"))},this.updateStepLabel=function(){var t=$(r),e="ao-clp-tour-finder__steps-labels-item",o=$("".concat(r,"[data-label='").concat(v,"']"));t.removeClass("".concat(e,"--active")),o.removeClass("".concat(e,"--checked")),o.addClass("".concat(e,"--active")),o.prev(r).addClass("".concat(e,"--checked"));var n=$(".js-ao-clp-tour-finder__header-title").eq(v-1);n.removeClass("hid"),n.siblings().addClass("hid")},this.onNextClick=function(){$("body").on("click",s,(function(){var o=window.storedSelection[v],n=o&&"undefined"!==o.option?o.option:"Skipped Selection";v+=1,t.renderNextPrevStep("next"),common.sendGoogleEvent(e,"Step ".concat(v-1),n)}))},this.onBackClick=function(){$("body").on("click",d,(function(){v-=1,t.renderNextPrevStep("prev"),common.sendGoogleEvent(e,"Step ".concat(v+1),"Back")}))},this.updateStepVariables=function(e,o,n){var a=!!e.data("multiselect"),i="";a&&(i=o.map((function(t,e){return e.getAttribute("data-option")})).get().join(":")),window.storedSelection[n]={filter:e.data("filter"),option:a?i:o.data("option")},t.updateCtaUrl()},this.updateCtaUrl=function(){window.ctaUrl="",Object.keys(window.storedSelection).forEach((function(t){var e=window.storedSelection[t].filter,o=window.storedSelection[t].option;"destination"===e?window.ctaUrl=o:o&&(window.ctaUrl+="".concat(-1===window.ctaUrl.indexOf("#")?"#":",").concat(e,"=").concat(o))}))},this.activateSelectedOption=function(){b.find("".concat(l,"[data-option='").concat(window.storedSelection[v],"']")).addClass(u)},this.renderNextPrevStep=function(e){var o="next"===e?b.next(c):b.prev(c);$(c).addClass("hid"),o.removeClass("hid"),b=o,t.updateStepLabel(),$(s).removeClass("hid"),$(d).addClass("hid"),$(p).addClass("hid"),1===v?$(d).addClass("hid"):$(d).removeClass("hid"),v===m&&($(s).addClass("hid"),$(p).removeClass("hid"))},this.onSearchClick=function(){$("body").on("click",p,(function(){window.location.href=window.ctaUrl,common.sendGoogleEvent(e,"Search",window.ctaUrl)}))},this.optionValidation=function(){var e=!!b.data("required"),o=!!b.find(".".concat(u)).length;if(!e||o){$(s).removeAttr("disabled");var n=b.find(".".concat(u));t.updateStepVariables(b,n,v)}else $(s).attr("disabled","disabled")}}function AOClpTourFinderDeparture(){var t=this,e=".js-ao-clp-tour-finder__departure",o=null;this.initiate=function(){0!==e.length&&t.preloadMonths()},this.preloadMonths=function(){common.sendRequest("/api/homepage/load",{action:"preload_search_months"},(function(t){var n=t.status,a=t.component;"OK"===n&&((o=$(e)).append(a),(new AMCommonMonthSelector).initiate({inline:!0,allowMultiple:!0,$container:o}),o.find(".js-am-month-selector__month").each((function(t,e){var o=$(e),n=o.data("month");o.addClass("js-ao-clp-tour-finder__step-item").data("option",n)})))}))}}function AOClpTourFinderDuration(){var t,e,o,n,a,i,c=this,l=new AOClpTourFinder;this.initiate=function(){e=$(".js-ao-clp-tour-finder__duration"),o=e.closest(".js-ao-clp-tour-finder__step"),n=o.data("step"),0!==e.length&&common.lib.init("slider",(function(){c.initiateSlider()}))},this.initiateSlider=function(){a=e.data("label-one"),i=e.data("label-plural"),t=$(".js-ao-clp-tour-finder__duration-slider");var r=parseInt(t.data("min"),10),s=parseInt(t.data("max"),10);noUiSlider.create(t[0],{start:[r,s],step:1,connect:!0,range:{min:r,max:s},tooltips:!1}),t[0].noUiSlider.on("update",(function(e){var a=parseInt(e[0],10),i=parseInt(e[1],10),d=$(".js-ao-clp-tour-finder__duration-label-min"),p=$(".js-ao-clp-tour-finder__duration-label-max");c.updateLabels(d,a),c.updateLabels(p,i),r===a&&s===i||(t.data("option","".concat(a,"-").concat(21===i?326:i)),l.updateStepVariables(o,t,n))}))},this.updateLabels=function(t,e){e<21?t.text("".concat(1!==e?i.replace("{{amountOfDays}}",e):a.replace("{{amountOfDays}}",e))):t.text(i.replace("{{amountOfDays}}","".concat(21,"+")))}}function AOClpTourFinderPrice(){var t,e,o,n,a,i,c,l=this,r=new AOClpTourFinder;this.initiate=function(){e=$(".js-ao-clp-tour-finder__price"),o=e.closest(".js-ao-clp-tour-finder__step"),n=o.data("step"),0!==e.length&&common.lib.init("slider",(function(){l.initiateSlider()}))},this.initiateSlider=function(){t=$(".js-ao-clp-tour-finder__price-slider"),c=e.data("symbol"),i=parseInt(t.data("min"),10),a=parseInt(t.data("max"),10),noUiSlider.create(t[0],{start:[i,a],step:1,connect:!0,range:{min:i,max:a},tooltips:!1}),t[0].noUiSlider.on("update",(function(e){var c=parseInt(e[0],10),s=parseInt(e[1],10),d=$(".js-ao-clp-tour-finder__price-label-min"),p=$(".js-ao-clp-tour-finder__price-label-max");l.updateLabels(d,c),l.updateLabels(p,s),i===c&&a===s||(t.data("option","".concat(c,"-").concat(s===a?1e5:s)),r.updateStepVariables(o,t,n))}))},this.updateLabels=function(t,e){e<a?t.text("".concat(c).concat(e.toFixed(0))):t.text("".concat(c).concat(a.toFixed(0),"+"))}}window.clpModules.push(new AOClpTourFinder);"use strict";function AOClpMarketingBanner(){this.initiate=function(){var n=$(".js-ao-clp-marketing-banner__anchor-link");n.click((function(){var t=n.attr("href"),o=0===t.indexOf("https://")||0===t.indexOf("http://")?t:"".concat(window.location.protocol,"//").concat(window.location.host).concat(t);common.sendGoogleEvent("".concat("CLP - ","Marketing Banner"),"Click",o,{transport:"beacon"})}))}}window.clpModules.push(new AOClpMarketingBanner);"use strict";function AOClpCarouselSlider(e,t){var n,i,o=this,a=e||".js-ao-clp-carousel-slider__slider",l=t||".js-ao-clp-carousel-slider__column",r=".js-ao-clp-carousel-slider__arrow--left",s=".js-ao-clp-carousel-slider__arrow--right",c=[];this.initiate=function(){(n=$(a)).length&&(i=["mobile","tablet"].indexOf(common.parameters.deviceType)>=0,n.each(o.initiateCarousel),o.events.initiate(),common.byWindowAction(["resize"],o.onResize))},this.initiateCarousel=function(e,t){var n=$(t),i=c.length,a={index:0,shown:1};a.total=n.children().length,a.elementMargin=0,a.$listElement=n,a.$firstElement=n.children().first(),a.$arrowElements=n.parent().find(".js-ao-clp-carousel-slider__arrow"),a.EVENT_CATEGORY=n.data("event-category"),a.EVENT_LABEL=n.data("event-label"),n.data("carouselId",i),o.calculateElementDimensions(a),a.$arrowElements.each((function(e,t){var n=$(t);n.data("carouselId",i),n.click(o.onClickArrow)})),o.calculateShown(a),o.checkArrowActivity(a),c.push(a)},this.calculateElementDimensions=function(e){e.elementWidth=e.$firstElement.width()},this.calculateShown=function(e){var t=Math.round(e.$listElement.width()/e.elementWidth);e.index=Math.floor(e.shown*e.index/t),e.shown=t},this.checkArrowActivity=function(e){var t=0===e.index,n=e.index*e.shown+e.shown>=e.total;e.$arrowElements.filter(r).prop("disabled",t),e.$arrowElements.filter(s).prop("disabled",n),e.total>e.shown&&(e.$arrowElements.filter(r).removeClass("hid"),e.$arrowElements.filter(s).removeClass("hid"))},this.onClickArrow=function(e){var t=$(e.currentTarget),n=t.data("carouselId"),i=c[n];t.hasClass("js-ao-clp-carousel-slider__arrow--right")?i.index+=1:i.index-=1,o.moveCarousel(i),o.checkArrowActivity(i),o.events.onNavigate(null,n)},this.moveCarousel=function(e){var t=-e.index*e.shown*(e.elementWidth+e.elementMargin);if(t<=parseInt(e.$firstElement.css("margin-left"),10)){var n=-(e.total-e.shown)*(e.elementWidth+e.elementMargin);t=Math.max(t,n)}else t=Math.min(t,0);e.$firstElement.css("margin-left",t)},this.moveToStart=function(e){e.$firstElement.css("margin-left",0),e.index=0},this.onResize=common.func.debounce((function(){for(var e=0;e<c.length;e+=1){var t=c[e];o.calculateElementDimensions(t),o.calculateShown(t),o.moveToStart(t),o.checkArrowActivity(t)}}),250),this.events={initiate:function(){n.on("click",l,o.events.onClickCard),i&&n.on("scroll",common.func.debounce(o.events.onNavigate,300))},onNavigate:function(e,t){var n;n=e?$(e.target).data("carouselId"):t;var i=c[n];common.sendGoogleEvent(i.EVENT_CATEGORY,"Navigate",i.EVENT_LABEL)},onClickCard:function(e){var t=$(e.currentTarget).closest(a).data("carouselId"),n=c[t];common.sendGoogleEvent(n.EVENT_CATEGORY,"Click",n.EVENT_LABEL)}}}window.clpModules.push(new AOClpCarouselSlider);"use strict";function AOClpRecentlyViewedTours(){var i,o=this,n=".js-ao-common-tours-slider-card__wishlist";this.initiate=function(){i=$(".js-ao-clp-tours"),!!i.find(n).length&&o.wishlist.initiate()},this.wishlist={initiated:!1,initiate:function(){i.on("click",n,o.wishlist.onClick)},onClick:function(i){var n=$(i.currentTarget).data("id");common.logged?o.wishlist.show(n):common.signup.show("login",(function(){common.logged=!0,$("html").addClass("logged"),o.wishlist.show(n)}))},show:function(i){var n=o.wishlist;n.initiated?n.popup.initiate(i):(common.loadAsyncCss("".concat(common.getCdnUrl(),"include/pw/wishlist/popup.css")),common.loadJs("".concat(common.getCdnUrl(),"include/pw/wishlist/popup.min.js"),(function(){n.popup=new WishlistPopup,n.popup.initiate(i),n.initiated=!0})))}}}window.clpModules.push(new AOClpRecentlyViewedTours);"use strict";function AOClpSaleDestinations(){var i=this;this.initiate=function(){i.initiateTracking()},this.initiateTracking=function(){$(".js-ao-clp-sales-destinations__tiles-link").on("click",(function(i){var t=$(i.currentTarget),n=t.closest(".js-ao-clp-sales-destinations__tiles-item"),s=t.attr("href");s&&common.sendGoogleEvent("Sales Destinations",s,"Index: ".concat(n.index()+1))}))}}window.clpModules.push(new AOClpSaleDestinations);"use strict";function AOClpSpecialsAndNews(){this.initiate=function(){$(".js-ao-clp-specials-and-news__link").on("click",(function(n){var c=$(n.currentTarget).attr("href"),o=0===c.indexOf("https://")||0===c.indexOf("http://")?c:"".concat(window.location.protocol,"//").concat(window.location.host).concat(c);common.sendGoogleEvent("".concat("CLP - ","Special & News"),"Click",o,{transport:"beacon"})}))}}window.clpModules.push(new AOClpSpecialsAndNews);"use strict";function AOClpToursSlider(){var i,o=this,n=".js-ao-common-tours-slider-card__wishlist";this.initiate=function(){i=$(".js-ao-clp-tours-slider"),!!i.find(n).length&&o.wishlist.initiate()},this.wishlist={initiated:!1,initiate:function(){i.on("click",n,o.wishlist.onClick)},onClick:function(i){var n=$(i.currentTarget).data("id");common.logged?o.wishlist.show(n):common.signup.show("login",(function(){common.logged=!0,$("html").addClass("logged"),o.wishlist.show(n)}))},show:function(i){var n=o.wishlist;n.initiated?n.popup.initiate(i):(common.loadAsyncCss("".concat(common.getCdnUrl(),"include/pw/wishlist/popup.css")),common.loadJs("".concat(common.getCdnUrl(),"include/pw/wishlist/popup.min.js"),(function(){n.popup=new WishlistPopup,n.popup.initiate(i),n.initiated=!0})))}}}window.clpModules.push(new AOClpToursSlider);"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function AOClpRecommendedDestinations(){var n=this;this.initiate=function(){var e=$(".js-ao-clp-recommended-destinations");e.length&&e.each((function(e,o){var t=$(o);common.func.isElementOnScreen(t)?n.load(t):common.byUserInteraction("load-recommended-tours",(function(){n.load(t)}))})),n.initiateTracking()},this.load=function(n){var e=n.find(".js-ao-clp-recommended-destinations__loading-spinner"),o={limit:n.data("item-count"),omparam:n.data("omparam"),layout:n.data("layout")};common.sendRequest("/api/content-pages/get-recommended-destinations",o,(function(o){if("OK"===o.status){var t=$(o.html);e.after(t),e.remove(),common.initLazyLoad(),n.removeClass("ao-clp-recommended-destinations--loading")}}))},this.initiateTracking=function(){$("body").on("click",".js-ao-clp-recommended-destinations__item-image",(function(n){var e=$(n.currentTarget),o=e.parent(),t=e.attr("href");"undefined"!==_typeof(t)&&!1!==t&&common.sendGoogleEvent("Recommended destinations",t,"Index: ".concat(o.index()+1))}))}}window.clpModules.push(new AOClpRecommendedDestinations);"use strict";function AOClpFeaturedTours(){this.initiate=function(){$(".js-ao-clp-featured-tours__tour").on("click",(function(t){t.stopPropagation();var e=$(t.currentTarget),n=e.attr("href");0!==n.length&&common.sendGoogleEvent("Featured Tours",n,"Index: ".concat(e.index()+1))}))}}window.addEventListener("load",(function(){(new AOClpFeaturedTours).initiate()}));"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AOClpSeoLinksDeals(){var t=this,o="Deals SEO";this.initiate=function(){t.initiateTracking()},this.initiateTracking=function(){t.seoLinksTracking(),t.seoTitleTracking()},this.seoLinksTracking=function(){$(".js-ao-clp-seo-links__location-link").on("click",(function(t){var n=$(t.currentTarget),e=n.closest(".js-ao-clp-seo-links__item"),i=n.closest(".js-ao-clp-seo-links").data("event-category"),c=n.attr("href");"undefined"!==_typeof(c)&&!1!==c&&common.sendGoogleEvent("".concat(i||o," - deals links"),c,"Card: ".concat(e.index()+1,"; Item: ").concat(n.index()+1))}))},this.seoTitleTracking=function(){$(".js-ao-clp-seo-links__location-title-wrapper").on("click",(function(t){var n=$(t.currentTarget),e=n.closest(".js-ao-clp-seo-links__item"),i=n.find(".js-ao-clp-seo-links__location-title").text().trim(),c=n.closest(".js-ao-clp-seo-links").data("event-category"),s=n.attr("href");"undefined"!==_typeof(s)&&!1!==s&&common.sendGoogleEvent("".concat(c||o," - deals title"),s,"Card: ".concat(e.index()+1,"; Item: Title - ").concat(i))}))}}window.clpModules.push(new AOClpSeoLinksDeals);"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AOClpSeoDeals(){var e=this,t=null,n=null,a=null,o=null;this.initiate=function(){0===$(".js-ao-clp-seo-deals").length||(n=$(".js-ao-clp-seo-deals__percentage-text--amount"),t=$(".js-ao-clp-seo-deals__continent"),a=parseInt(n.text(),10)||0,t.mouseenter((function(t){var n=$(t.currentTarget),o=parseInt(n.data("deal-percentage"),10)||0,l=$(t.relatedTarget),r=l.hasClass("ao-clp-seo-deals__continent")?parseInt(l.data("deal-percentage"),10):a;e.animatePercentageChange(r,o)})).mouseleave((function(t){if(!$(t.relatedTarget).hasClass("ao-clp-seo-deals__continent")){var n=$(t.currentTarget),o=parseInt(n.data("deal-percentage"),10);e.animatePercentageChange(o,a)}})),e.initiateTracking())},this.animatePercentageChange=function(e,t){clearInterval(o);var a=e;o=setInterval((function(){a!==t?(a=e<t?a+1:a-1,n.text(a)):clearInterval(o)}),10)},this.initiateTracking=function(){var e="Deals SEO - The Best Deals Worldwide";$(".js-ao-clp-seo-deals__continent").on("click",(function(t){var n=$(t.currentTarget),a=n.attr("href");"undefined"!==_typeof(a)&&!1!==a&&common.sendGoogleEvent(e,a,"Item: ".concat(n.index()+1))})),$(".js-ao-clp-seo-deals__see-all").on("click",(function(t){var n=$(t.currentTarget).attr("href");"undefined"!==_typeof(n)&&!1!==n&&common.sendGoogleEvent(e,n,"CTA - See All Deals")}))}}window.clpModules.push(new AOClpSeoDeals);"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AOClpContactUs(){var t=this;this.initiate=function(){t.linkClickEvent()},this.linkClickEvent=function(){$(".js-ao-clp-contact-us__cta").on("click",(function(o){var n=$(o.currentTarget),e=n.attr("href");"undefined"!==_typeof(e)&&!1!==e&&(common.sendGoogleEvent("24/7 customer support",e),"popup"===n.attr("target")&&(o.preventDefault(),t.onClickContactUs()))}))},this.onClickContactUs=function(){footer.olarkIntegration.startEnquiryDialog({id:-1,name:"CLP - ".concat(window.location.pathname.substring(1)),forceEnqiry:!0}),common.sendGoogleEvent("Ask A Question","Ask a question open","CLP - ".concat(window.location.pathname.substring(1)))}}window.clpModules.push(new AOClpContactUs);"use strict";function _typeof(n){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function CommonClpEverythingYouWant(){var n=this;this.initiate=function(){$(".fv").length&&common.loadJs("".concat(common.getCdnUrl(),"include/pw/everything-you-want/script.min.js"),(function(){new EverythingYouWant(common).initiate()})),n.initiateTracking()},this.initiateTracking=function(){$(".js-ao-everything-you-want__link").on("click",(function(n){var t=$(n.currentTarget).attr("href");"undefined"!==_typeof(t)&&!1!==t&&common.sendGoogleEvent("Everything you want",t)}))}}window.clpModules.push(new CommonClpEverythingYouWant);"use strict";function _typeof(o){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}function AOClpDaysToCome(){var o=this;this.initiate=function(){o.initiateTracking()},this.initiateTracking=function(){$(".js-ao-clp-days-to-come__link").on("click",(function(o){var t=$(o.currentTarget),n=t.closest(".js-ao-clp-days-to-come__column"),e=t.attr("href");"undefined"!==_typeof(e)&&!1!==e&&common.sendGoogleEvent("Days to come",e,"Index: ".concat(n.index()+1))}))}}window.clpModules.push(new AOClpDaysToCome);"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AOClpOperatorsList(){var t=this;this.initiate=function(){t.initiateTracking()},this.initiateTracking=function(){$(".js-ao-clp-operators-list__content").on("click",(function(t){var o=$(t.currentTarget),n=o.closest(".ao-clp-operators-list__item"),e=o.attr("href");"undefined"!==_typeof(e)&&!1!==e&&common.sendGoogleEvent("Operators list",e,"Index: ".concat(n.index()+1))}))}}window.clpModules.push(new AOClpOperatorsList);"use strict";function AOClpNewsletterSignup(){var e=this,t=null,s=null,n=null,i="",l="";this.initiate=function(){(t=$(".js-ao-clp-newsletter-signup__form")).submit(e.onSubmit),s=t.find(".js-ao-clp-newsletter-signup__input"),n=t.find(".js-ao-clp-newsletter-signup__cta"),i=t.data("text"),l=t.data("success-text")},this.onSubmit=function(t){t.preventDefault();var n=$.trim(s.val());return n&&common.func.checkString(n,"email")?(common.sendRequest("/api/subscribe/check",{email:n},(function(t){"OK"===t.status&&e.onSuccess()})),!1):(alert(common.parameters.i18n_errors.email),!1)},this.onSuccess=function(){n.attr("disabled",!0),n.toggleClass("ao-clp-newsletter-signup__cta--success",!0),s.toggleClass("ao-clp-newsletter-signup__input--success",!0),setTimeout((function(){n.text(l)}),250),setTimeout((function(){n.text(i),n.toggleClass("ao-clp-newsletter-signup__cta--success",!1),s.toggleClass("ao-clp-newsletter-signup__input--success",!1),n.removeAttr("disabled")}),2e3),common.sendGoogleEvent("Newsletter - Signup","SignedUp","CLP")}}window.clpModules.push(new AOClpNewsletterSignup);"use strict";function Timer(e,n,t){var a,o,i=this,s=t||1;this.initiate=function(){e.length>0&&(a=null,o=i.getCurrentTimestamp()+n,document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?i.restart():i.stop()}),!1),i.start())},this.getCurrentTimestamp=function(){return Math.round(new Date/1e3)},this.restart=function(){i.stop(),i.start()},this.start=function(){a=setInterval((function(){var n=o-i.getCurrentTimestamp();if(n>0){var t=Math.floor(n/3600),a=Math.floor((n-3600*t)/60),s=parseInt(n-3600*t-60*a,10);e.text(i.format(t,a,s))}else e.hide()}),1e3*s)},this.stop=function(){clearInterval(a)},this.format=function(e,n,t){return[e>=10?e:"0".concat(e),n>=10?n:"0".concat(n),t>=10?t:"0".concat(t)].join(":")}}function UnlockSavingPopup(e){var n,t,a=this,o=$(window),i=$("main"),s="popup--wide",l={sale:null,memberSaving:null},c=null;e.byUserInteraction("sale-loaded",(function(){var n=$(".js-sale-line[data-id]");if(n.length){var t="".concat(n.data("id")," - ");switch(e.parameters.page_type){case"homepage":t+="Homepage";break;case"tdp":t+="TDP";break;case"serp":t+="SERP";break;case"operator":t+="Operator";break;case"deals":t+="Deals";break;default:t+="Other"}e.sendTrackerEvent("Sale",n.hasClass("unlock")?"Locked":"Unlocked",t)}})),this.load=function(n){$("body").on("click",".unlock, .js-ao-serp-tour__saving--locked",(function(t){var s=$(t.currentTarget);if(s.hasClass("js-sale-line")&&s.data("link")){var l=i.data("page-type");e.sendGoogleEvent("Sale banner","Click",l||"Other"),"#"===s.data("link")&&"tdp"===e.parameters.page_type&&$('.b.menu li[data-hash="check"]').length>0?$('.b.menu li[data-hash="check"]').click():"#"===s.data("link")||(i.length>0&&(i.hasClass("mob")||i.hasClass("tab"))||o.width()<=1023?window.location.href=s.data("link"):window.open(s.data("link"),"_blank"))}else s.hasClass("unlocked")||a.initPopup(s,n)})),"serp"!==e.parameters.page_type&&"tdp"!==e.parameters.page_type||a.googleEvents()},this.initPopup=function(n,t){var o={id:n.data("id")?parseInt(n.data("id"),10):null,value:n.data("value")};c=o.value||null;var i=o.id?"sale":"memberSaving";l[i]?a.showPopup(l[i],o.id,t):e.sendRequest("/api/tour/unlock-load",o,(function(e){"OK"===e.status&&(l[i]=e.html,a.showPopup(l[i],o.id,t))}))},this.initOnScroll=function(o){o.length&&(n=o,t=o.offset().top,e.byWindowAction(["scroll"],a.onScroll),a.onScroll())},this.onScroll=function(){var e=o.scrollTop()>t,a="";e&&(a=n.height()),n.parent().css("height",a),n.toggleClass("fixed",e),e?n.parent().height(n.height()):n.parent().height("")},this.showPopup=function(n,t,o){e.lib.init("popup",(function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:n},closeOnBgClick:!0,callbacks:{open:function(){var e=$(".unlockSavingPopup");e.off();var n=e.find("form");c&&e.find(".value").length&&e.find(".value").html(c),n.find("input").on("keydown",(function(e){var t=$(e.currentTarget);t.hasClass("error")&&t.removeClass("error"),13===e.keyCode&&n.submit()})),n.on("submit",(function(e){return e.preventDefault(),a.checkForm($(e.currentTarget),t,o),!1})),n.find(".but").on("click",(function(e){return e.preventDefault(),n.submit(),!1})),e.find(".terms-link").on("click",(function(e){return e.preventDefault(),a.showTerms(),!1}))}}})}))},this.checkForm=function(n,t,o){n.find("input").removeClass("error");var i=!1,s=$.trim(n.find('input[name="name"]').val()),l=$.trim(n.find('input[name="email"]').val());s||(i=!0,n.find('input[name="name"]').addClass("error")),l&&e.func.checkString(l,"email")||(i=!0,n.find('input[name="email"]').addClass("error")),i||a.success(s,l,t,o,n.parents(".popup").length?"Popup":"Header")},this.success=function(n,t,o,i,s){e.sendRequest("/api/tour/save-unlock",{name:n,email:t,saleId:o},(function(t){if("OK"===t.status){a.showSuccess(t.html.replace("{{customerName}}",n),i);var l=s;"Popup"===l&&("tdp"===e.parameters.page_type?l+=" - TDP - Button":"serp"===e.parameters.page_type&&(l+=" - SERP - Banner")),e.sendGoogleEvent("Sale",o?"Global or STR Sale Unlocked":"Member's Saving Sale Unlocked",l,{tourPrice:10,currencyCode:"USD"})}}))},this.showSuccess=function(n,t){e.lib.init("popup",(function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:n},closeOnBgClick:!0,callbacks:{open:function(){$(".unlockSavingPopupSuccess").off().on("click",".but",(function(e){e.preventDefault(),$.magnificPopup.close()}))},close:function(){t?t():window.location.reload()}}})}))},this.showTerms=function(){$(".mfp-wrap").addClass(s),$(".unlockSavingPopup").find(".content, .terms-content").toggleClass("hid").off("click.terms").on("click.terms",".terms-content .but",(function(e){return e.preventDefault(),a.hideTerms(),!1}))},this.hideTerms=function(){$(".mfp-wrap").removeClass(s),$(".unlockSavingPopup").find(".content, .terms-content").toggleClass("hid")},this.showTermsPopup=function(n){e.lib.init("popup",(function(){$.magnificPopup.close(),$.magnificPopup.open({items:{src:n},mainClass:s,closeOnBgClick:!0})}))},this.googleEvents=function(){"serp"===e.parameters.page_type?($(".list").on("click",".unlock, .js-ao-serp-tour__saving--locked",(function(){e.sendGoogleEvent("Sale","Open Popup Form","SERP - Tour card")})),$(".js-sale-line.unlock").click((function(){e.sendGoogleEvent("Sale","Open Popup Form","SERP - Banner")}))):"tdp"!==e.parameters.page_type||$(".js-sale-line").data("link")||$(".js-sale-line.unlock").click((function(){e.sendGoogleEvent("Sale","Open Popup Form","TDP - Button")}))}}function TermsSalePopup(e){var n=this,t=null;this.load=function(){$("body").on("click",".w-inf.tooltip a",(function(a){var o=$(a.currentTarget);if(!o.hasClass("loading"))if(o.addClass("loading"),t)n.showPopup();else{var i=$(".js-sale-line").data("id");e.lib.init("popup",(function(){e.sendRequest("/api/popup/load-terms-sale-layout",{id:i},(function(e){"OK"===e.status&&(t=e.html,n.showPopup()),o.removeClass("loading")}))}))}}))},this.showPopup=function(){$.magnificPopup.open({items:{src:t},closeOnBgClick:!0})}}function CommonClpSaleBanner(){this.initiate=function(){if($(".js-sale-line").length){var e=new UnlockSavingPopup(common),n=new TermsSalePopup(common);e.load((function(){window.location.href="/deals"})),n.load(),$(".js-sale-line.unlocked").click((function(){window.location.href="/deals"})),new Timer($(".js-sale-line .js-ends span"),$(".js-sale-line .js-ends").data("ends")).initiate()}}}window.clpModules.push(new CommonClpSaleBanner);;(function(){setTimeout(function(){window.dispatchEvent && window.dispatchEvent(new CustomEvent("onPartnersLoad"));; }, 0);})();!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}return"function"==typeof window.CustomEvent?!1:(t.prototype=window.Event.prototype,void(window.CustomEvent=t))}();